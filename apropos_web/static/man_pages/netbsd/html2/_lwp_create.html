<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="../style.css" type="text/css" media="all">
<title>
_LWP_CREATE(2)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
_LWP_CREATE(2)</td>
<td class="head-vol" align="center">
System Calls Manual</td>
<td class="head-rtitle" align="right">
_LWP_CREATE(2)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">_lwp_create</b> &#8212; <span class="desc">create a new light-weight process</span></div>
<div class="section">
<h1 id="x4c494252415259">LIBRARY</h1> <span class="lib">Standard C Library (libc, &#45;lc)</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="includes">#include &lt;<a class="link-includes">lwp.h</a>&gt;</b><p>
<i class="ftype">int</i><br>
<b class="fname">_lwp_create</b>(<i class="farg" style="white-space:nowrap;">ucontext_t *context</i>, <i class="farg" style="white-space:nowrap;">unsigned long flags</i>, <i class="farg" style="white-space:nowrap;">lwpid_t *new_lwp</i>);</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> <b class="fname">_lwp_create</b>() causes creation of a new light-weight process, or LWP, and adds it to the current process. The <i class="farg">context</i> argument specifies the initial execution context for the new LWP including signal mask, stack, and machine registers. If this context specifies invalid register values (for example priviledge escalation by setting machine dependend bits forbidden for user processes), or does not specify cpu register values (uc_flags does not have the _UC_CPU bit set), the call will fail and errno will be set to EINVAL.<p>
The following flags affect the creation of the new LWP:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
LWP_DETACHED</dt>
<dd class="list-tag" style="margin-left: 13.00ex;">
The LWP is created detached. The resources associated with a detached LWP will be automatically reclaimed by the system when the LWP exits. Otherwise, a terminated LWP's resources will not be reclaimed until its status is reported to another LWP via <a class="link-man" href="../html2/_lwp_wait.html">_lwp_wait(2)</a>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
LWP_SUSPENDED</dt>
<dd class="list-tag" style="margin-left: 13.00ex;">
The LWP is created suspended, and will not begin execution until it is resumed by another LWP via <a class="link-man" href="../html2/_lwp_continue.html">_lwp_continue(2)</a>.</dd>
</dl>
<p>
The LWP ID of the new LWP is stored in the location pointed to by <i class="farg">new_lwp</i>.</div>
<div class="section">
<h1 id="x52455455524e2056414c554553">RETURN VALUES</h1> Upon successful completion, <b class="fname">_lwp_create</b>() returns a value of 0. Otherwise, a value of -1 is returned and errno is set to one of the values documented below.</div>
<div class="section">
<h1 id="x4552524f5253">ERRORS</h1> <b class="fname">_lwp_create</b>() will fail and no LWP will be created if:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">EAGAIN</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
The system-imposed limit on the total number of LWPs under execution would be exceeded. This limit is configuration-dependent.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">ENOMEM</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
There is insufficient swap space for the new LWP.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">EFAULT</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
The address pointed to by <i class="farg">context</i> or <i class="farg">new_lwp</i> is outside the process's allocated address space.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">EINVAL</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
The ucontext_t passed is invalid.</dd>
</dl>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../html2/_lwp_continue.html">_lwp_continue(2)</a>, <a class="link-man" href="../html2/_lwp_exit.html">_lwp_exit(2)</a>, <a class="link-man" href="../html2/_lwp_wait.html">_lwp_wait(2)</a>, <a class="link-man" href="../html3/_lwp_makecontext.html">_lwp_makecontext(3)</a></div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> The <b class="fname">_lwp_create</b>() system call first appeared in <span class="unix">NetBSD&#160;2.0</span>.</div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
January 13, 2003</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
</html>

