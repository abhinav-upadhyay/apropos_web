<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="/static/man_pages/netbsd/style.css" type="text/css" media="all">
<title>
EXECVE(2)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
EXECVE(2)</td>
<td class="head-vol" align="center">
System Calls Manual</td>
<td class="head-rtitle" align="right">
EXECVE(2)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">execve</b> &#8212; <span class="desc">execute a file</span></div>
<div class="section">
<h1 id="x4c494252415259">LIBRARY</h1> <span class="lib">Standard C Library (libc, &#45;lc)</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="includes">#include &lt;<a class="link-includes">unistd.h</a>&gt;</b><p>
<i class="ftype">int</i><br>
<b class="fname">execve</b>(<i class="farg" style="white-space:nowrap;">const char *path</i>, <i class="farg" style="white-space:nowrap;">char *const argv[]</i>, <i class="farg" style="white-space:nowrap;">char *const envp[]</i>);</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> <b class="fname">execve</b>() transforms the calling process into a new process. The new process is constructed from an ordinary file, whose name is pointed to by <i class="farg">path</i>, called the <span class="emph">new process file</span>. This file is either an executable object file, or a file of data for an interpreter. An executable object file consists of an identifying header, followed by pages of data representing the initial program (text) and initialized data pages. Additional pages may be specified by the header to be initialized with zero data;  see <a class="link-man" href="../5/a.out">a.out(5)</a>.<p>
An interpreter file begins with a line of the form:<p>
<div style="margin-left: 5.00ex;" class="display">
<span class="symb">#!</span> <span class="emph">interpreter</span> &#91;<span class="emph">arg</span>&#93;</div>
<p>
When an interpreter file is <b class="fname">execve</b>()d the system runs the specified <span class="emph">interpreter</span>. If the optional <span class="emph">arg</span> is specified, it becomes the first argument to the <span class="emph">interpreter</span>, and the name of the originally <b class="fname">execve</b>()d file becomes the second argument; otherwise, the name of the originally <b class="fname">execve</b>()d file becomes the first argument. The original arguments are shifted over to become the subsequent arguments. The zeroth argument, normally the name of the <b class="fname">execve</b>()d file, is left unchanged. The interpreter named by <span class="emph">interpreter</span> must not itself be an interpreter file. (See <a class="link-man" href="../7/script">script(7)</a> for a detailed discussion of interpreter file execution.)<p>
The argument <i class="farg">argv</i> is a pointer to a null-terminated array of character pointers to null-terminated character strings. These strings construct the argument list to be made available to the new process. By custom, the first element should be the name of the executed program (for example, the last component of <i class="farg">path</i>).<p>
The argument <i class="farg">envp</i> is also a pointer to a null-terminated array of character pointers to null-terminated strings. A pointer to this array is normally stored in the global variable <b class="var">environ</b>. These strings pass information to the new process that is not directly an argument to the command (see <a class="link-man" href="../7/environ">environ(7)</a>).<p>
File descriptors open in the calling process image remain open in the new process image, except for those for which the close-on-exec flag is set (see <a class="link-man" href="../2/close">close(2)</a> and <a class="link-man" href="../2/fcntl">fcntl(2)</a>). Descriptors that remain open are unaffected by <b class="fname">execve</b>().<p>
In the case of a new setuid or setgid executable being executed, if file descriptors 0, 1, or 2 (representing stdin, stdout, and stderr) are currently unallocated, these descriptors will be opened to point to some system file like <i class="file">/dev/null</i>. The intent is to ensure these descriptors are not unallocated, since many libraries make assumptions about the use of these 3 file descriptors.<p>
Signals set to be ignored in the calling process are set to be ignored in the new process. Signals which are set to be caught in the calling process image are set to default action in the new process image. Blocked signals remain blocked regardless of changes to the signal action. The signal stack is reset to be undefined (see <a class="link-man" href="../2/sigaction">sigaction(2)</a> for more information).<p>
If the set-user-ID mode bit of the new process image file is set (see <a class="link-man" href="../2/chmod">chmod(2)</a>), the effective user ID of the new process image is set to the owner ID of the new process image file. If the set-group-ID mode bit of the new process image file is set, the effective group ID of the new process image is set to the group ID of the new process image file. (The effective group ID is the first element of the group list.) The real user ID, real group ID and other group IDs of the new process image remain the same as the calling process image. After any set-user-ID and set-group-ID processing, the effective user ID is recorded as the saved set-user-ID, and the effective group ID is recorded as the saved set-group-ID. These values may be used in changing the effective IDs later (see <a class="link-man" href="../2/setuid">setuid(2)</a>).<p>
The new process also inherits the following attributes from the calling process:<p>
<table style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 5.00ex;" class="list list-col">
<col style="min-width: 17.00ex;">
<tbody>
<tr class="list-col">
<td class="list-col" style="margin-top: 0.00em;">
process ID</td>
<td class="list-col" style="margin-top: 0.00em;">
see <a class="link-man" href="../2/getpid">getpid(2)</a></td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 0.00em;">
parent process ID</td>
<td class="list-col" style="margin-top: 0.00em;">
see <a class="link-man" href="../2/getppid">getppid(2)</a></td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 0.00em;">
process group ID</td>
<td class="list-col" style="margin-top: 0.00em;">
see <a class="link-man" href="../2/getpgrp">getpgrp(2)</a></td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 0.00em;">
access groups</td>
<td class="list-col" style="margin-top: 0.00em;">
see <a class="link-man" href="../2/getgroups">getgroups(2)</a></td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 0.00em;">
working directory</td>
<td class="list-col" style="margin-top: 0.00em;">
see <a class="link-man" href="../2/chdir">chdir(2)</a></td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 0.00em;">
root directory</td>
<td class="list-col" style="margin-top: 0.00em;">
see <a class="link-man" href="../2/chroot">chroot(2)</a></td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 0.00em;">
control terminal</td>
<td class="list-col" style="margin-top: 0.00em;">
see <a class="link-man" href="../4/termios">termios(4)</a></td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 0.00em;">
resource usages</td>
<td class="list-col" style="margin-top: 0.00em;">
see <a class="link-man" href="../2/getrusage">getrusage(2)</a></td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 0.00em;">
interval timers</td>
<td class="list-col" style="margin-top: 0.00em;">
see <a class="link-man" href="../2/getitimer">getitimer(2)</a></td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 0.00em;">
resource limits</td>
<td class="list-col" style="margin-top: 0.00em;">
see <a class="link-man" href="../2/getrlimit">getrlimit(2)</a></td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 0.00em;">
file mode mask</td>
<td class="list-col" style="margin-top: 0.00em;">
see <a class="link-man" href="../2/umask">umask(2)</a></td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 0.00em;">
signal mask</td>
<td class="list-col" style="margin-top: 0.00em;">
see <a class="link-man" href="../2/sigaction">sigaction(2)</a>, <a class="link-man" href="../2/sigprocmask">sigprocmask(2)</a></td>
</tr>
</tbody>
</table>
<p>
When a program is executed as a result of an <b class="fname">execve</b>() call, it is entered as follows:<p>
<pre style="margin-left: 5.00ex;" class="lit display">
main(argc, argv, envp) 
int argc; 
char **argv, **envp;</pre>
<p>
where <i class="farg">argc</i> is the number of elements in <i class="farg">argv</i> (the &#8220;arg count&#8221;) and <i class="farg">argv</i> points to the array of character pointers to the arguments themselves.</div>
<div class="section">
<h1 id="x52455455524e2056414c554553">RETURN VALUES</h1> As the <b class="fname">execve</b>() function overlays the current process image with a new process image the successful call has no process to return to. If <b class="fname">execve</b>() does return to the calling process an error has occurred; the return value will be &#45;1 and the global variable <b class="var">errno</b> is set to indicate the error.</div>
<div class="section">
<h1 id="x4552524f5253">ERRORS</h1> <b class="fname">execve</b>() will fail and return to the calling process if:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">E2BIG</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The number of bytes in the new process's argument list is larger than the system-imposed limit. The limit in the system as released is 262144 bytes (<span class="define">NCARGS</span> in &#60;<i class="file">sys/param.h</i>&#62;).</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">EACCES</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
Search permission is denied for a component of the path prefix, the new process file is not an ordinary file, its file mode denies execute permission, or it is on a filesystem mounted with execution disabled (<span class="define">MNT_NOEXEC</span> in &#60;<i class="file">sys/mount.h</i>&#62;).</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">EAGAIN</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
A <a class="link-man" href="../7/setuid">setuid(7)</a> process has exceeded the current resource limit for the number of processes it is allowed to run concurrently.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">EFAULT</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The new process file is not as long as indicated by the size values in its header; or <i class="farg">path</i>, <i class="farg">argv</i>, or <i class="farg">envp</i> point to an illegal address.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">EIO</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
An I/O error occurred while reading from the file system.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">ELOOP</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
Too many symbolic links were encountered in translating the pathname.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">ENAMETOOLONG</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
A component of a pathname exceeded &#123;<span class="define">NAME_MAX</span>&#125; characters, or an entire path name exceeded &#123;<span class="define">PATH_MAX</span>&#125; characters.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">ENOENT</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The new process file does not exist, or the new process file is a script starting with <code class="lit">#!</code> and the script interpreter does not exist.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">ENOEXEC</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The new process file has the appropriate access permission, but has an invalid magic number in its header.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">ENOMEM</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The new process requires more virtual memory than is allowed by the imposed maximum (<a class="link-man" href="../2/getrlimit">getrlimit(2)</a>).</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">ENOTDIR</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
A component of the path prefix is not a directory.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">ETXTBSY</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The new process file is a pure procedure (shared text) file that is currently open for writing or reading by some process.</dd>
</dl>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../2/_exit">_exit(2)</a>, <a class="link-man" href="../2/fork">fork(2)</a>, <a class="link-man" href="../3/execl">execl(3)</a>, <a class="link-man" href="../7/environ">environ(7)</a>, <a class="link-man" href="../7/script">script(7)</a></div>
<div class="section">
<h1 id="x5354414e4441524453">STANDARDS</h1> The <b class="fname">execve</b>() function conforms to IEEE Std 1003.1-1990 (&#8220;POSIX.1&#8221;).</div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> The <b class="fname">execve</b>() function call first appeared in Version&#160;7 AT&amp;T UNIX.</div>
<div class="section">
<h1 id="x42554753">BUGS</h1> If a program is <span class="emph">setuid</span> to a non-super-user, but is executed when the real <span class="emph">uid</span> is &#8220;root&#8221;, then the program has some of the powers of a super-user as well.</div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
February 24, 2008</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
</html>

