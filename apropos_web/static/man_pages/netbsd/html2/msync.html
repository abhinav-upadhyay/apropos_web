<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="/static/man_pages/netbsd/style.css" type="text/css" media="all">
<title>
MSYNC(2)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
MSYNC(2)</td>
<td class="head-vol" align="center">
System Calls Manual</td>
<td class="head-rtitle" align="right">
MSYNC(2)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">msync</b> &#8212; <span class="desc">synchronize a mapped region</span></div>
<div class="section">
<h1 id="x4c494252415259">LIBRARY</h1> <span class="lib">Standard C Library (libc, &#45;lc)</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="includes">#include &lt;<a class="link-includes">sys/mman.h</a>&gt;</b><p>
<i class="ftype">int</i><br>
<b class="fname">msync</b>(<i class="farg" style="white-space:nowrap;">void *addr</i>, <i class="farg" style="white-space:nowrap;">size_t len</i>, <i class="farg" style="white-space:nowrap;">int flags</i>);</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> The <b class="fname">msync</b>() system call writes all pages with shared modifications in the specified region of the process's address space back to permanent storage, and, if requested, invalidates cached data mapped in the region. If <i class="farg">len</i> is 0, all modified pages within the region containing <i class="farg">addr</i> will be flushed; if <i class="farg">len</i> is non-zero, only modified pages containing <i class="farg">addr</i> and <i class="farg">len</i> succeeding locations will be flushed. Any required synchronization of memory caches will also take place at this time. Filesystem operations on a file that is mapped for shared modifications are unpredictable except after an <b class="fname">msync</b>().<p>
The <i class="farg">flags</i> argument is formed by <span class="emph">or</span>'ing the following values<p>
<table style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 5.00ex;" class="list list-col">
<col style="min-width: 13.00ex;">
<tbody>
<tr class="list-col">
<td class="list-col" style="margin-top: 0.00em;">
<span class="define">MS_ASYNC</span></td>
<td class="list-col" style="margin-top: 0.00em;">
Perform asynchronous writes.</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 0.00em;">
<span class="define">MS_SYNC</span></td>
<td class="list-col" style="margin-top: 0.00em;">
Perform synchronous writes.</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 0.00em;">
<span class="define">MS_INVALIDATE</span></td>
<td class="list-col" style="margin-top: 0.00em;">
Invalidate cached data after writing.</td>
</tr>
</tbody>
</table>
</div>
<div class="section">
<h1 id="x52455455524e2056414c554553">RETURN VALUES</h1> Upon successful completion, a value of 0 is returned. Otherwise, a value of &#45;1 is returned and <b class="var">errno</b> is set to indicate the error.</div>
<div class="section">
<h1 id="x4552524f5253">ERRORS</h1> The following errors may be reported:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">EBUSY</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The <span class="define">MS_INVALIDATE</span> flag was specified and a portion of the specified region was locked with <a class="link-man" href="../2/mlock">mlock(2)</a>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">EINVAL</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The specified <i class="farg">flags</i> argument was invalid.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">EINVAL</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The <i class="farg">addr</i> parameter was not page aligned.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">EINVAL</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The <i class="farg">addr</i> parameter did not specify an address part of a mapped region.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">EIO</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
An I/O error occurred while writing to the file system.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">ENOMEM</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
Addresses in the specified region are outside the range allowed for the address space of the process, or specify one or more pages which are unmapped.</dd>
</dl>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../2/mlock">mlock(2)</a>, <a class="link-man" href="../2/mmap">mmap(2)</a>, <a class="link-man" href="../2/munlock">munlock(2)</a></div>
<div class="section">
<h1 id="x5354414e4441524453">STANDARDS</h1> The <b class="fname">msync</b>() function conforms to IEEE Std 1003.1b-1993 (&#8220;POSIX.1b&#8221;)</div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> The <b class="fname">msync</b>() function first appeared in <span class="unix">4.4BSD</span>. It was modified to conform to IEEE Std 1003.1b-1993 (&#8220;POSIX.1b&#8221;) in <span class="unix">NetBSD&#160;1.3</span>.</div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
May 9, 2014</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
</html>

