<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/../4/strict.dtd">
>
<head>
<meta http-equiv="Content-Type" content="te../; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="../style.css" type="text/css" media="all">
<title>
WAIT(2)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
WAIT(2)</td>
<td class="head-vol" align="center">
System Calls Manual</td>
<td class="head-rtitle" align="right">
WAIT(2)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">wait</b>, <b class="name">waitpid</b>, <b class="name">wait4</b>, <b class="name">wait3</b> &#8212; <span class="desc">wait for process termination</span></div>
<div class="section">
<h1 id="x4c494252415259">LIBRARY</h1> <span class="lib">Standard C Library (libc, &#45;lc)</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="includes">#include &lt;<a class="link-includes">sys/wait.h</a>&gt;</b><p>
<i class="ftype">pid_t</i><br>
<b class="fname">wait</b>(<i class="farg" style="white-space:nowrap;">int *status</i>);<p>
<i class="ftype">pid_t</i><br>
<b class="fname">waitpid</b>(<i class="farg" style="white-space:nowrap;">pid_t wpid</i>, <i class="farg" style="white-space:nowrap;">int *status</i>, <i class="farg" style="white-space:nowrap;">int options</i>);<p>
<b class="includes">#include &lt;<a class="link-includes">sys/resource.h</a>&gt;</b><p>
<i class="ftype">pid_t</i><br>
<b class="fname">wait3</b>(<i class="farg" style="white-space:nowrap;">int *status</i>, <i class="farg" style="white-space:nowrap;">int options</i>, <i class="farg" style="white-space:nowrap;">struct rusage *rusage</i>);<p>
<i class="ftype">pid_t</i><br>
<b class="fname">wait4</b>(<i class="farg" style="white-space:nowrap;">pid_t wpid</i>, <i class="farg" style="white-space:nowrap;">int *status</i>, <i class="farg" style="white-space:nowrap;">int options</i>, <i class="farg" style="white-space:nowrap;">struct rusage *rusage</i>);</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> The <b class="fname">wait</b>() function suspends execution of its calling process until <i class="farg">status</i> information is available for a terminated child process, or a signal is received. On return from a successful <b class="fname">wait</b>() call, the <i class="farg">status</i> area contains termination information about the process that exited as defined below.<p>
The <b class="fname">wait4</b>() call provides a more general interface for programs that need to wait for certain child processes, that need resource utilization statistics accumulated by child processes, or that require options. The other wait functions are implemented using <b class="fname">wait4</b>().<p>
The <i class="farg">wpid</i> parameter specifies the set of child processes for which to wait. If <i class="farg">wpid</i> is &#45;1, the call waits for any child process. If <i class="farg">wpid</i> is 0, the call waits for any child process in the process group of the caller. If <i class="farg">wpid</i> is greater than zero, the call waits for the process with process id <i class="farg">wpid</i>. If <i class="farg">wpid</i> is less than &#45;1, the call waits for any process whose process group id equals the absolute value of <i class="farg">wpid</i>.<p>
The <i class="farg">status</i> parameter is defined below.<p>
The <i class="farg">options</i> parameter contains the bitwise OR of any of the following options:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">WNOHANG</span></dt>
<dd class="list-tag" style="margin-left: 9.00ex;">
This option is used to indicate that the call should not block if there are no processes that wish to report status.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">WUNTRACED</span></dt>
<dd class="list-tag" style="margin-left: 9.00ex;">
If this option is set, children of the current process that are stopped due to a <span class="define">SIGTTIN</span>, <span class="define">SIGTTOU</span>, <span class="define">SIGTSTP</span>, or <span class="define">SIGSTOP</span> signal also have their status reported.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">WALTSIG</span></dt>
<dd class="list-tag" style="margin-left: 9.00ex;">
If this option is specified, the call will wait only for processes that are configured to post a signal other than <span class="define">SIGCHLD</span> when they exit. If <span class="define">WALTSIG</span> is not specified, the call will wait only for processes that are configured to post <span class="define">SIGCHLD</span>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">__WCLONE</span></dt>
<dd class="list-tag" style="margin-left: 9.00ex;">
This is an alias for <span class="define">WALTSIG</span>. It is provided for compatibility with the Linux <a class="link-man" href="../2/clone">clone(2)</a> API.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">WALLSIG</span></dt>
<dd class="list-tag" style="margin-left: 9.00ex;">
If this option is specified, the call will wait for all children regardless of what exit signal they post.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">__WALL</span></dt>
<dd class="list-tag" style="margin-left: 9.00ex;">
This is an alias for <span class="define">WALLSIG</span>. It is provided for compatibility with the Linux <a class="link-man" href="../2/clone">clone(2)</a> API .</dd>
</dl>
<p>
If <i class="farg">rusage</i> is non-zero, a summary of the resources used by the terminated process and all its children is returned (this information is currently not available for stopped processes).<p>
When the <span class="define">WNOHANG</span> option is specified and no processes wish to report status, <b class="fname">wait4</b>() returns a process id of 0.<p>
The <b class="fname">waitpid</b>() call is identical to <b class="fname">wait4</b>() with an <i class="farg">rusage</i> value of zero. The older <b class="fname">wait3</b>() call is the same as <b class="fname">wait4</b>() with a <i class="farg">wpid</i> value of &#45;1.<p>
The following macros may be used to test the manner of exit of the process. Note that these macros expect the <i class="farg">status</i> value itself, not a pointer to the <i class="farg">status</i> value. One of the first three macros will evaluate to a non-zero (true) value:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">WIFEXITED</b>(<i class="farg">status</i>)</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
True if the process terminated normally by a call to <a class="link-man" href="../2/_exit">_exit(2)</a> or <a class="link-man" href="../3/exit">exit(3)</a>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">WIFSIGNALED</b>(<i class="farg">status</i>)</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
True if the process terminated due to receipt of a signal.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">WIFSTOPPED</b>(<i class="farg">status</i>)</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
True if the process has not terminated, but has stopped and can be restarted. This macro can be true only if the wait call specified the <span class="define">WUNTRACED</span> option or if the child process is being traced (see <a class="link-man" href="../2/ptrace">ptrace(2)</a>).</dd>
</dl>
<p>
Depending on the values of those macros, the following macros produce the remaining status information about the child process:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">WEXITSTATUS</b>(<i class="farg">status</i>)</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
If <b class="fname">WIFEXITED</b>(<i class="farg">status</i>) is true, evaluates to the low-order 8 bits of the argument passed to <a class="link-man" href="../2/_exit">_exit(2)</a> or <a class="link-man" href="../3/exit">exit(3)</a> by the child.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">WTERMSIG</b>(<i class="farg">status</i>)</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
If <b class="fname">WIFSIGNALED</b>(<i class="farg">status</i>) is true, evaluates to the number of the signal that caused the termination of the process.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">WCOREDUMP</b>(<i class="farg">status</i>)</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
If <b class="fname">WIFSIGNALED</b>(<i class="farg">status</i>) is true, evaluates as true if the termination of the process was accompanied by the creation of a core file containing an image of the process when the signal was received.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">WSTOPSIG</b>(<i class="farg">status</i>)</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
If <b class="fname">WIFSTOPPED</b>(<i class="farg">status</i>) is true, evaluates to the number of the signal that caused the process to stop.</dd>
</dl>
</div>
<div class="section">
<h1 id="x4e4f544553">NOTES</h1> See <a class="link-man" href="../2/sigaction">sigaction(2)</a> for a list of termination signals. A status of 0 indicates normal termination.<p>
If a parent process terminates without waiting for all of its child processes to terminate, the remaining child processes are assigned the parent process 1 ID (the init process ID).<p>
If a signal is caught while any of the <b class="fname">wait</b>() calls is pending, the call may be interrupted or restarted when the signal-catching routine returns, depending on the options in effect for the signal; see <a class="link-man" href="../2/intro">intro(2)</a>, System call restart.</div>
<div class="section">
<h1 id="x52455455524e2056414c554553">RETURN VALUES</h1> If <b class="fname">wait</b>() returns due to a stopped or terminated child process, the process ID of the child is returned to the calling process. Otherwise, a value of &#45;1 is returned and <b class="var">errno</b> is set to indicate the error.<p>
If <b class="fname">wait4</b>(), <b class="fname">wait3</b>() or <b class="fname">waitpid</b>() returns due to a stopped or terminated child process, the process ID of the child is returned to the calling process. If there are no children not previously awaited, &#45;1 is returned with <b class="var">errno</b> set to &#91;<span class="errno">ECHILD</span>&#93;. Otherwise, if <span class="define">WNOHANG</span> is specified and there are no stopped or exited children, 0 is returned. If an error is detected or a caught signal aborts the call, a value of &#45;1 is returned and <b class="var">errno</b> is set to indicate the error.</div>
<div class="section">
<h1 id="x4552524f5253">ERRORS</h1> <b class="fname">wait</b>() will fail and return immediately if:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">ECHILD</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The calling process has no existing unwaited-for child processes.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">EFAULT</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The <i class="farg">status</i> or <i class="farg">rusage</i> arguments point to an illegal address. (May not be detected before exit of a child process.)</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">EINTR</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The call was interrupted by a caught signal, or the signal did not have the <span class="define">SA_RESTART</span> flag set.</dd>
</dl>
<p>
In addition, <b class="fname">wait3</b>(), <b class="fname">wait4</b>(), and <b class="fname">waitpid</b>() will fail and return immediately if:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">EINVAL</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
An invalid value was specified for <i class="farg">options</i>.</dd>
</dl>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../2/_exit">_exit(2)</a>, <a class="link-man" href="../2/sigaction">sigaction(2)</a></div>
<div class="section">
<h1 id="x5354414e4441524453">STANDARDS</h1> The <b class="fname">wait</b>() and <b class="fname">waitpid</b>() functions conform to IEEE Std 1003.1-1990 (&#8220;POSIX.1&#8221;); the <b class="fname">wait3</b>() function conforms to X/Open Portability Guide Issue&#160;4 (&#8220;XPG4&#8221;); <b class="fname">wait4</b>() is an extension. The <b class="fname">WCOREDUMP</b>() macro and the ability to restart a pending <b class="fname">wait</b>() call are extensions to the POSIX interface.</div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> A <b class="fname">wait</b>() function call appeared in Version&#160;2 AT&amp;T UNIX.</div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
April 3, 2010</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
<>

