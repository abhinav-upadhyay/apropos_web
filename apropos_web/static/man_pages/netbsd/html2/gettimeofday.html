<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="/static/man_pages/netbsd/style.css" type="text/css" media="all">
<title>
GETTIMEOFDAY(2)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
GETTIMEOFDAY(2)</td>
<td class="head-vol" align="center">
System Calls Manual</td>
<td class="head-rtitle" align="right">
GETTIMEOFDAY(2)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">gettimeofday</b>, <b class="name">settimeofday</b> &#8212; <span class="desc">get/set date and time</span></div>
<div class="section">
<h1 id="x4c494252415259">LIBRARY</h1> <span class="lib">Standard C Library (libc, &#45;lc)</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="includes">#include &lt;<a class="link-includes">sys/time.h</a>&gt;</b><p>
<i class="ftype">int</i><br>
<b class="fname">gettimeofday</b>(<i class="farg" style="white-space:nowrap;">struct timeval * restrict tp</i>, <i class="farg" style="white-space:nowrap;">void * restrict tzp</i>);<p>
<i class="ftype">int</i><br>
<b class="fname">settimeofday</b>(<i class="farg" style="white-space:nowrap;">const struct timeval * restrict tp</i>, <i class="farg" style="white-space:nowrap;">const void * restrict tzp</i>);</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1><div class="symb" style="display:inline;margin-left: 1.00ex;">
Note: time zone information is no longer provided by this interface. See <a class="link-man" href="../3/localtime">localtime(3)</a> for information on how to retrieve it.</div>
<p>
The system's notion of the current UTC time is obtained with the <b class="fname">gettimeofday</b>() call, and set with the <b class="fname">settimeofday</b>() call. The time is expressed in seconds and microseconds since midnight (0 hour), January 1, 1970. The resolution of the system clock is hardware dependent, and the time may be updated continuously or in &#8220;ticks&#8221;.<p>
If <i class="farg">tp</i> is NULL, the time will not be returned or set. Despite being declared <i class="farg">void *</i>, the objects pointed to by <i class="farg">tzp</i> shall be of type <i class="farg">struct timezone</i>.<p>
The structures pointed to by <i class="farg">tp</i> and <i class="farg">tzp</i> are defined in <b class="includes">&lt;<a class="link-includes">sys/time.h</a>&gt;</b>. The first one is described in <a class="link-man" href="../3/timeval">timeval(3)</a> and the latter legacy structure is defined as:<p>
<pre style="margin-left: 5.00ex;" class="lit display">
struct timezone { 
	int	tz_minuteswest; /* of Greenwich */ 
	int	tz_dsttime;	/* type of dst correction to apply */ 
};</pre>
<p>
The <i class="farg">timezone</i> structure is provided only for source compatibility. It is ignored by <b class="fname">settimeofday</b>(), and <b class="fname">gettimeofday</b>() will always return zeroes.<p>
If the calling user is not the super-user, then the <b class="fname">settimeofday</b>() function in the standard C library will try to use the <a class="link-man" href="../4/clockctl">clockctl(4)</a> device if present, thus making possible for non privileged users to set the system time. If <a class="link-man" href="../4/clockctl">clockctl(4)</a> is not present or not accessible, then <b class="fname">settimeofday</b>() reverts to the <b class="fname">settimeofday</b>() system call, which is restricted to the super user.</div>
<div class="section">
<h1 id="x52455455524e2056414c554553">RETURN VALUES</h1> A return value 0 indicates that the call succeeded. A return value &#45;1 indicates an error occurred, and in this case an error code is stored into the global variable <b class="var">errno</b>.</div>
<div class="section">
<h1 id="x4552524f5253">ERRORS</h1> The following error codes may be set in <b class="var">errno</b>:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">EFAULT</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
An argument address referenced invalid memory.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">EPERM</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
A user other than the super user attempted to set the time, or the specified time was less than the current time, which was not permitted at the current security level.</dd>
</dl>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../1/date">date(1)</a>, <a class="link-man" href="../2/adjtime">adjtime(2)</a>, <a class="link-man" href="../3/ctime">ctime(3)</a>, <a class="link-man" href="../3/localtime">localtime(3)</a>, <a class="link-man" href="../4/clockctl">clockctl(4)</a>, <a class="link-man" href="../8/timed">timed(8)</a></div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> The <b class="fname">gettimeofday</b>() function call appeared in <span class="unix">4.2BSD</span>. The <i class="farg">tzp</i> argument was deprecated in <span class="unix">4.4BSD</span> (and many other systems).</div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
May 18, 2010</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
</html>

