<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="../style.css" type="text/css" media="all">
<title>
LSEEK(2)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
LSEEK(2)</td>
<td class="head-vol" align="center">
System Calls Manual</td>
<td class="head-rtitle" align="right">
LSEEK(2)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">lseek</b>, <b class="name">seek</b> &#8212; <span class="desc">reposition read/write file offset</span></div>
<div class="section">
<h1 id="x4c494252415259">LIBRARY</h1> <span class="lib">Standard C Library (libc, &#45;lc)</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="includes">#include &lt;<a class="link-includes">unistd.h</a>&gt;</b><p>
<i class="ftype">off_t</i><br>
<b class="fname">lseek</b>(<i class="farg" style="white-space:nowrap;">int fildes</i>, <i class="farg" style="white-space:nowrap;">off_t offset</i>, <i class="farg" style="white-space:nowrap;">int whence</i>);</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> The <b class="fname">lseek</b>() function repositions the offset of the file descriptor <i class="farg">fildes</i> to the argument <i class="farg">offset</i> according to the directive <i class="farg">whence</i>. The argument <i class="farg">fildes</i> must be an open file descriptor. <b class="fname">lseek</b>() repositions the file pointer <i class="farg">fildes</i> as follows:<ul style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 5.00ex;" class="list list-item">
<li class="list-item" style="margin-top: 1.00em;">
If <i class="farg">whence</i> is <span class="define">SEEK_SET</span>, the offset is set to <i class="farg">offset</i> bytes.</li>
<li class="list-item" style="margin-top: 1.00em;">
If <i class="farg">whence</i> is <span class="define">SEEK_CUR</span>, the offset is set to its current location plus <i class="farg">offset</i> bytes.</li>
<li class="list-item" style="margin-top: 1.00em;">
If <i class="farg">whence</i> is <span class="define">SEEK_END</span>, the offset is set to the size of the file plus <i class="farg">offset</i> bytes.</li>
</ul>
<p>
The <b class="fname">lseek</b>() function allows the file offset to be set beyond the end of the existing end-of-file of the file. If data is later written at this point, subsequent reads of the data in the gap return bytes of zeros (until data is actually written into the gap).<p>
Some devices are incapable of seeking. The value of the pointer associated with such a device is undefined.</div>
<div class="section">
<h1 id="x52455455524e2056414c554553">RETURN VALUES</h1> Upon successful completion, <b class="fname">lseek</b>() returns the resulting offset location as measured in bytes from the beginning of the file. Otherwise, a value of &#45;1 is returned and <b class="var">errno</b> is set to indicate the error.</div>
<div class="section">
<h1 id="x4552524f5253">ERRORS</h1> <b class="fname">lseek</b>() will fail and the file pointer will remain unchanged if:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">EBADF</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
<i class="farg">fildes</i> is not an open file descriptor.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">EINVAL</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
<i class="farg">whence</i> is not a proper value, or the resulting file offset would be invalid.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">ESPIPE</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
<i class="farg">fildes</i> is associated with a pipe, socket, or FIFO.</dd>
</dl>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../2/dup">dup(2)</a>, <a class="link-man" href="../2/open">open(2)</a></div>
<div class="section">
<h1 id="x5354414e4441524453">STANDARDS</h1> The <b class="fname">lseek</b>() function conforms to IEEE Std 1003.1-1990 (&#8220;POSIX.1&#8221;).</div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> A <b class="fname">seek</b>() function appeared in Version&#160;2 AT&amp;T UNIX, later renamed into <b class="fname">lseek</b>() for &#8220;long seek&#8221; due to a larger <i class="farg">offset</i> argument type.</div>
<div class="section">
<h1 id="x42554753">BUGS</h1> This document's use of <i class="farg">whence</i> is incorrect English, but is maintained for historical reasons.</div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
April 3, 2010</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
</html>

