<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="/static/man_pages/netbsd/style.css" type="text/css" media="all">
<title>
GETRLIMIT(2)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
GETRLIMIT(2)</td>
<td class="head-vol" align="center">
System Calls Manual</td>
<td class="head-rtitle" align="right">
GETRLIMIT(2)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">getrlimit</b>, <b class="name">setrlimit</b> &#8212; <span class="desc">control maximum system resource consumption</span></div>
<div class="section">
<h1 id="x4c494252415259">LIBRARY</h1> <span class="lib">Standard C Library (libc, &#45;lc)</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="includes">#include &lt;<a class="link-includes">sys/resource.h</a>&gt;</b><p>
<i class="ftype">int</i><br>
<b class="fname">getrlimit</b>(<i class="farg" style="white-space:nowrap;">int resource</i>, <i class="farg" style="white-space:nowrap;">struct rlimit *rlp</i>);<p>
<i class="ftype">int</i><br>
<b class="fname">setrlimit</b>(<i class="farg" style="white-space:nowrap;">int resource</i>, <i class="farg" style="white-space:nowrap;">const struct rlimit *rlp</i>);</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> Limits on the consumption of system resources by the current process and each process it creates may be obtained with the <b class="fname">getrlimit</b>() call, and set with the <b class="fname">setrlimit</b>() call. Resources of an arbitrary process can be obtained/changed using <a class="link-man" href="../3/sysctl">sysctl(3)</a>.<p>
The <i class="farg">resource</i> parameter is one of the following:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<code class="lit">RLIMIT_AS</code></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
The maximum amount (in bytes) of virtual memory the process is allowed to map.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<code class="lit">RLIMIT_CORE</code></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
The largest size (in bytes) <i class="file">core</i> file that may be created.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<code class="lit">RLIMIT_CPU</code></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
The maximum amount of CPU time (in seconds) to be used by each process.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<code class="lit">RLIMIT_DATA</code></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
The maximum size (in bytes) of the data segment for a process; this defines how far a program may extend its break with the <a class="link-man" href="../2/sbrk">sbrk(2)</a> system call.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<code class="lit">RLIMIT_FSIZE</code></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
The largest size (in bytes) file that may be created.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<code class="lit">RLIMIT_MEMLOCK</code></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
The maximum size (in bytes) which a process may lock into memory using the <a class="link-man" href="../2/mlock">mlock(2)</a> function.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<code class="lit">RLIMIT_NOFILE</code></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
The maximum number of open files for this process.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<code class="lit">RLIMIT_NPROC</code></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
The maximum number of simultaneous processes for this user id.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<code class="lit">RLIMIT_NTHR</code></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
The maximum number of simultaneous threads (Lightweight Processes) for this user id. Kernel threads and the first thread of each process are not counted against this limit.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<code class="lit">RLIMIT_RSS</code></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
The maximum size (in bytes) to which a process's resident set size may grow. This imposes a limit on the amount of physical memory to be given to a process; if memory is tight, the system will prefer to take memory from processes that are exceeding their declared resident set size.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<code class="lit">RLIMIT_SBSIZE</code></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
The maximum size (in bytes) of the socket buffers set by the <a class="link-man" href="../2/setsockopt">setsockopt(2)</a> <span class="define">SO_RCVBUF</span> and <span class="define">SO_SNDBUF</span> options.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<code class="lit">RLIMIT_STACK</code></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
The maximum size (in bytes) of the stack segment for a process; this defines how far a program's stack segment may be extended. Stack extension is performed automatically by the system.</dd>
</dl>
<p>
A resource limit is specified as a soft limit and a hard limit. When a soft limit is exceeded a process may receive a signal (for example, if the CPU time or file size is exceeded), but it will be allowed to continue execution until it reaches the hard limit (or modifies its resource limit). The <span class="emph">rlimit</span> structure is used to specify the hard and soft limits on a resource,<p>
<pre style="margin-left: 5.00ex;" class="lit display">
struct rlimit { 
	rlim_t	rlim_cur;	/* current (soft) limit */ 
	rlim_t	rlim_max;	/* hard limit */ 
};</pre>
<p>
Only the super-user may raise the maximum limits. Other users may only alter <i class="farg">rlim_cur</i> within the range from 0 to <i class="farg">rlim_max</i> or (irreversibly) lower <i class="farg">rlim_max</i>.<p>
An &#8220;infinite&#8221; value for a limit is defined as <span class="define">RLIM_INFINITY</span>.<p>
Because this information is stored in the per-process information, this system call must be executed directly by the shell if it is to affect all future processes created by the shell. Thus, shells provide built-in commands to change the limits (<b class="cmd">limit</b> for <a class="link-man" href="../1/csh">csh(1)</a>, or <b class="cmd">ulimit</b> for <a class="link-man" href="../1/sh">sh(1)</a>).<p>
The system refuses to extend the data or stack space when the limits would be exceeded in the normal way: a <a class="link-man" href="../2/brk">brk(2)</a> call fails if the data space limit is reached. When the stack limit is reached, the process receives a segmentation fault (<span class="define">SIGSEGV</span>); if this signal is not caught by a handler using the signal stack, this signal will kill the process.<p>
A file I/O operation that would create a file larger that the process' soft limit will cause the write to fail and a signal <span class="define">SIGXFSZ</span> to be generated; this normally terminates the process, but may be caught. When the soft CPU time limit is exceeded, a signal <span class="define">SIGXCPU</span> is sent to the offending process.</div>
<div class="section">
<h1 id="x52455455524e2056414c554553">RETURN VALUES</h1> A 0 return value indicates that the call succeeded, changing or returning the resource limit. Otherwise, &#45;1 is returned and the global variable <b class="var">errno</b> is set to indicate the error.</div>
<div class="section">
<h1 id="x4552524f5253">ERRORS</h1> The <b class="fname">getrlimit</b>() and <b class="fname">setrlimit</b>() will fail if:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">EFAULT</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The address specified for <i class="farg">rlp</i> is invalid.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">EINVAL</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
Specified <i class="farg">resource</i> was invalid; or, in the <b class="fname">setrlimit</b>() call, the specified <i class="farg">rlim_cur</i> exceeds the specified <i class="farg">rlim_max</i>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">EPERM</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The limit specified to <b class="fname">setrlimit</b>() would have raised the maximum limit value, and the caller is not the super-user.</dd>
</dl>
<p>
The <b class="fname">setrlimit</b>() function may fail if:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">EINVAL</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The limit specified to <b class="fname">setrlimit</b>() cannot be lowered, because current usage is already higher than the limit.</dd>
</dl>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../1/csh">csh(1)</a>, <a class="link-man" href="../1/sh">sh(1)</a>, <a class="link-man" href="../2/mlock">mlock(2)</a>, <a class="link-man" href="../2/setsockopt">setsockopt(2)</a>, <a class="link-man" href="../2/sigaction">sigaction(2)</a>, <a class="link-man" href="../2/sigaltstack">sigaltstack(2)</a>, <a class="link-man" href="../3/libquota">libquota(3)</a>, <a class="link-man" href="../3/sysctl">sysctl(3)</a></div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> The <b class="fname">getrlimit</b>() function call appeared in <span class="unix">4.2BSD</span>.</div>
<div class="section">
<h1 id="x42554753">BUGS</h1> The resource limit <span class="define">RLIMIT_RSS</span> is not implemented in <a class="link-man" href="../9/uvm">uvm(9)</a> which means that process memory size limits are not enforced.</div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
June 8, 2012</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
</html>

