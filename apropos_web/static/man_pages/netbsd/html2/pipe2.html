<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/../4/strict.dtd">
>
<head>
<meta http-equiv="Content-Type" content="te../; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="../style.css" type="text/css" media="all">
<title>
PIPE(2)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
PIPE(2)</td>
<td class="head-vol" align="center">
System Calls Manual</td>
<td class="head-rtitle" align="right">
PIPE(2)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">pipe</b> &#8212; <span class="desc">create descriptor pair for interprocess communication</span></div>
<div class="section">
<h1 id="x4c494252415259">LIBRARY</h1> <span class="lib">Standard C Library (libc, &#45;lc)</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="includes">#include &lt;<a class="link-includes">unistd.h</a>&gt;</b><p>
<i class="ftype">int</i><br>
<b class="fname">pipe</b>(<i class="farg" style="white-space:nowrap;">int fildes[2]</i>);<p>
<b class="includes">#include &lt;<a class="link-includes">unistd.h</a>&gt;</b><br>
<b class="includes">#include &lt;<a class="link-includes">fcntl.h</a>&gt;</b><p>
<i class="ftype">int</i><br>
<b class="fname">pipe2</b>(<i class="farg" style="white-space:nowrap;">int fildes[2]</i>, <i class="farg" style="white-space:nowrap;">int flags</i>);</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> The <b class="fname">pipe</b>() function creates a <span class="emph">pipe</span>, which is an object allowing unidirectional data flow, and allocates a pair of file descriptors. The first descriptor connects to the <span class="emph">read end</span> of the pipe, and the second connects to the <span class="emph">write end</span>, so that data written to <i class="farg">fildes[1]</i> appears on (i.e., can be read from) <i class="farg">fildes[0]</i>. This allows the output of one program to be sent to another program: the source's standard output is set up to be the write end of the pipe, and the sink's standard input is set up to be the read end of the pipe. The pipe itself persists until all its associated descriptors are closed.<p>
A pipe whose read or write end has been closed is considered <span class="emph">widowed</span>. Writing on such a pipe causes the writing process to receive a <span class="define">SIGPIPE</span> signal. Widowing a pipe is the only way to deliver end-of-file to a reader: after the reader consumes any buffered data, reading a widowed pipe returns a zero count.<p>
The <b class="fname">pipe2</b>() function behaves exactly like <b class="fname">pipe</b>() only it allows extra <i class="farg">flags</i> to be set on the returned file descriptor. The following flags are valid:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 5.00ex;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">O_CLOEXEC</span></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
Set the &#8220;close-on-exec&#8221; property.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">O_NONBLOCK</span></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
Sets non-blocking I/O.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">O_NOSIGPIPE</span></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
Return <span class="errno">EPIPE</span> instead of raising <span class="define">SIGPIPE</span>.</dd>
</dl>
</div>
<div class="section">
<h1 id="x52455455524e2056414c554553">RETURN VALUES</h1> On successful creation of the pipe, zero is returned. Otherwise, a value of &#45;1 is returned and the variable <b class="var">errno</b> set to indicate the error.</div>
<div class="section">
<h1 id="x4552524f5253">ERRORS</h1> The <b class="fname">pipe</b>() and <b class="fname">pipe2</b>() calls will fail if:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">EFAULT</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The <i class="farg">fildes</i> buffer is in an invalid area of the process's address space. The reliable detection of this error cannot be guaranteed; when not detected, a signal may be delivered to the process, indicating an address violation.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">EMFILE</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
Too many descriptors are active.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">ENFILE</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The system file table is full.</dd>
</dl>
<p>
<b class="fname">pipe2</b>() will also fail if:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">EINVAL</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
<i class="farg">flags</i> contains an invalid value.</dd>
</dl>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../1/sh">sh(1)</a>, <a class="link-man" href="../2/fork">fork(2)</a>, <a class="link-man" href="../2/read">read(2)</a>, <a class="link-man" href="../2/socketpair">socketpair(2)</a>, <a class="link-man" href="../2/write">write(2)</a></div>
<div class="section">
<h1 id="x5354414e4441524453">STANDARDS</h1> The <b class="fname">pipe</b>() function conforms to IEEE Std 1003.1-1990 (&#8220;POSIX.1&#8221;).</div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> A <b class="fname">pipe</b>() function call appeared in Version&#160;6 AT&amp;T UNIX. The <b class="fname">pipe2</b>() function is inspired from Linux and appeared in <span class="unix">NetBSD&#160;6.0</span>.</div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
January 23, 2012</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
<>

