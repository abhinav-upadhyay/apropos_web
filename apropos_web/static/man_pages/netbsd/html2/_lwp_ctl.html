<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="../style.css" type="text/css" media="all">
<title>
_LWP_CTL(2)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
_LWP_CTL(2)</td>
<td class="head-vol" align="center">
System Calls Manual</td>
<td class="head-rtitle" align="right">
_LWP_CTL(2)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">_lwp_ctl</b> &#8212; <span class="desc">prepare per-LWP communication area between kernel and userland</span></div>
<div class="section">
<h1 id="x4c494252415259">LIBRARY</h1> <span class="lib">Standard C Library (libc, &#45;lc)</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="includes">#include &lt;<a class="link-includes">sys/lwpctl.h</a>&gt;</b><br>
<b class="includes">#include &lt;<a class="link-includes">lwp.h</a>&gt;</b><p>
<i class="ftype">int</i><br>
<b class="fname">_lwp_ctl</b>(<i class="farg" style="white-space:nowrap;">int features</i>, <i class="farg" style="white-space:nowrap;">struct lwpctl **address</i>);</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> <b class="fname">_lwp_ctl</b>() prepares per-LWP communication area for the calling LWP, and maps it into the calling process' address space. It takes the following arguments.<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="farg">features</i></dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
The bitwise-OR of the following flags.<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">LWPCTL_FEATURE_CURCPU</span></dt>
<dd class="list-tag" style="margin-left: 21.00ex;">
Request <span class="type">lc_curcpu</span>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">LWPCTL_FEATURE_PCTR</span></dt>
<dd class="list-tag" style="margin-left: 21.00ex;">
Request <span class="type">lc_pctr</span>.</dd>
</dl>
</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="farg">address</i></dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
The address to store a pointer to <span class="type">lwpctl</span> structure for the calling LWP.</dd>
</dl>
<p>
The per-LWP communication area is described by an <span class="type">lwpctl</span> structure. It has following members, depending on <i class="farg">features</i>.<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="type">int lc_curcpu</span></dt>
<dd class="list-tag" style="margin-left: 13.00ex;">
The integral identifier of the CPU on which the LWP is running, or <span class="define">LWPCTL_CPU_NONE</span> when the LWP is not running on any CPU. It's updated by the kernel and should be considered as read-only for userland. It's available only if requested with the <span class="define">LWPCTL_FEATURE_CURCPU</span> flag.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="type">int lc_pctr</span></dt>
<dd class="list-tag" style="margin-left: 13.00ex;">
The integer which is incremented on every context switches to the LWP. It can be used to detect preemption of the LWP. (thus its name "preemption counter".) It's updated by the kernel and should be considered as read-only for userland. It's available only if requested with the <span class="define">LWPCTL_FEATURE_PCTR</span> flag.</dd>
</dl>
</div>
<div class="section">
<h1 id="x52455455524e2056414c554553">RETURN VALUES</h1> <b class="fname">_lwp_ctl</b>() returns 0 on success. Otherwise, &#45;1 is returned and <b class="var">errno</b> is set to indicate the error.</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../html2/errno.html">errno(2)</a></div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
April 13, 2012</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
</html>

