<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/../4/strict.dtd">
>
<head>
<meta http-equiv="Content-Type" content="te../; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="../style.css" type="text/css" media="all">
<title>
MADVISE(2)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
MADVISE(2)</td>
<td class="head-vol" align="center">
System Calls Manual</td>
<td class="head-rtitle" align="right">
MADVISE(2)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">madvise</b> &#8212; <span class="desc">give advice about use of memory</span></div>
<div class="section">
<h1 id="x4c494252415259">LIBRARY</h1> <span class="lib">Standard C Library (libc, &#45;lc)</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="includes">#include &lt;<a class="link-includes">sys/mman.h</a>&gt;</b><p>
<i class="ftype">int</i><br>
<b class="fname">madvise</b>(<i class="farg" style="white-space:nowrap;">void *addr</i>, <i class="farg" style="white-space:nowrap;">size_t len</i>, <i class="farg" style="white-space:nowrap;">int behav</i>);<p>
<i class="ftype">int</i><br>
<b class="fname">posix_madvise</b>(<i class="farg" style="white-space:nowrap;">void *addr</i>, <i class="farg" style="white-space:nowrap;">size_t len</i>, <i class="farg" style="white-space:nowrap;">int advice</i>);</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> The <b class="fname">madvise</b>() system call allows a process that has knowledge of its memory behavior to describe it to the system. The <b class="fname">posix_madvise</b>() interface is identical and is provided for standards conformance.<p>
The known behaviors are:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">MADV_NORMAL</span></dt>
<dd class="list-tag" style="margin-left: 15.00ex;">
Tells the system to revert to the default paging behavior.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">MADV_RANDOM</span></dt>
<dd class="list-tag" style="margin-left: 15.00ex;">
Is a hint that pages will be accessed randomly, and prefetching is likely not advantageous.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">MADV_SEQUENTIAL</span></dt>
<dd class="list-tag" style="margin-left: 15.00ex;">
Is a hint that pages will be accessed sequentially, from the lower address to higher address. It might cause the VM system to depress the priority of pages immediately preceding a given page when it is faulted in.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">MADV_WILLNEED</span></dt>
<dd class="list-tag" style="margin-left: 15.00ex;">
Is a hint that pages will be accessed in the near future. It might cause the VM system to make pages that are in a given virtual address range to temporarily have higher priority, and if they are in memory, decrease the likelihood of them being freed. It might immediately map the pages that are already in memory into the process, thereby eliminating unnecessary overhead of going through the entire process of faulting the pages in. It might or might not fault pages in from backing store.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">MADV_DONTNEED</span></dt>
<dd class="list-tag" style="margin-left: 15.00ex;">
Is a hint that pages will not be accessed in the near future. It might allow the VM system to decrease the in-memory priority of pages in the specified range.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">MADV_FREE</span></dt>
<dd class="list-tag" style="margin-left: 15.00ex;">
Gives the VM system the freedom to free pages, and tells the system that information in the specified page range is no longer important.</dd>
</dl>
<p>
Portable programs that call the <b class="fname">posix_madvise</b>() interface should use the aliases <span class="define">POSIX_MADV_NORMAL</span>, <span class="define">POSIX_MADV_SEQUENTIAL</span>, <span class="define">POSIX_MADV_RANDOM</span>, <span class="define">POSIX_MADV_WILLNEED</span>, and <span class="define">POSIX_MADV_DONTNEED</span> rather than the flags described above.</div>
<div class="section">
<h1 id="x52455455524e2056414c554553">RETURN VALUES</h1> Upon successful completion, a value of 0 is returned. Otherwise, a value of &#45;1 is returned and <b class="var">errno</b> is set to indicate the error.</div>
<div class="section">
<h1 id="x4552524f5253">ERRORS</h1> <b class="fname">madvise</b>() will fail if:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">EINVAL</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
Invalid parameters were provided.</dd>
</dl>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../2/mincore">mincore(2)</a>, <a class="link-man" href="../2/mprotect">mprotect(2)</a>, <a class="link-man" href="../2/msync">msync(2)</a>, <a class="link-man" href="../2/munmap">munmap(2)</a>, <a class="link-man" href="../2/posix_fadvise">posix_fadvise(2)</a></div>
<div class="section">
<h1 id="x5354414e4441524453">STANDARDS</h1> The <b class="fname">posix_madvise</b>() system call is expected to conform to the IEEE Std 1003.1-2001 (&#8220;POSIX.1&#8221;) standard.</div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> The <b class="name">madvise</b> system call first appeared in <span class="unix">4.4BSD</span>, but until <span class="unix">NetBSD&#160;1.5</span> it did not perform any of the requests on, or change any behavior of the address range given. The <b class="fname">posix_madvise</b>() call was added in <span class="unix">NetBSD&#160;5.0</span>.</div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
March 29, 2011</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
<>

