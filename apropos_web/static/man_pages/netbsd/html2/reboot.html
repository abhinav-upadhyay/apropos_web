<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="../style.css" type="text/css" media="all">
<title>
REBOOT(2)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
REBOOT(2)</td>
<td class="head-vol" align="center">
System Calls Manual</td>
<td class="head-rtitle" align="right">
REBOOT(2)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">reboot</b> &#8212; <span class="desc">reboot system or halt processor</span></div>
<div class="section">
<h1 id="x4c494252415259">LIBRARY</h1> <span class="lib">Standard C Library (libc, &#45;lc)</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="includes">#include &lt;<a class="link-includes">unistd.h</a>&gt;</b><br>
<b class="includes">#include &lt;<a class="link-includes">sys/reboot.h</a>&gt;</b><p>
<i class="ftype">int</i><br>
<b class="fname">reboot</b>(<i class="farg" style="white-space:nowrap;">int howto</i>, <i class="farg" style="white-space:nowrap;">char *bootstr</i>);</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> <b class="fname">reboot</b>() reboots the system. Only the super-user may reboot a machine on demand. However, a reboot is invoked automatically in the event of unrecoverable system failures.<p>
<i class="farg">howto</i> is a mask of options; the system call interface allows the following options, defined in the include file <b class="includes">&lt;<a class="link-includes">sys/reboot.h</a>&gt;</b>, to be passed to the new kernel or the new bootstrap and init programs. In addition to the options described below, other options described in <a class="link-man" href="../html9/boothowto.html">boothowto(9)</a> may be set, but such options may be ignored by the system.<p>
Options can be combined together by OR'ing them, eg. <span class="define">RB_DUMP</span> | <span class="define">RB_NOSYNC</span> would be interpreted as &#8220;dump kernel memory before rebooting and don't sync the disks&#8221;.<table style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-col">
<col style="width: 12.00ex;">
<col style="min-width: 6.00ex;">
<tbody>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
<span class="define">RB_AUTOBOOT</span></td>
<td class="list-col" style="margin-top: 1.00em;">
<code class="lit">0x0000</code></td>
<td class="list-col" style="margin-top: 1.00em;">
The default, causing the system to reboot in its usual fashion.</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
<span class="define">RB_ASKNAME</span></td>
<td class="list-col" style="margin-top: 1.00em;">
<code class="lit">0x0001</code></td>
<td class="list-col" style="margin-top: 1.00em;">
Interpreted by the bootstrap program itself, causing it to prompt on the console as to what file should be booted. Normally, the system is booted from the file &#8220;<span class="emph">xx</span>(0,0)netbsd&#8221;, where <span class="emph">xx</span> is the default disk name, without prompting for the file name.</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
<span class="define">RB_DUMP</span></td>
<td class="list-col" style="margin-top: 1.00em;">
<code class="lit">0x0100</code></td>
<td class="list-col" style="margin-top: 1.00em;">
Dump kernel memory before rebooting; see <a class="link-man" href="../html8/savecore.html">savecore(8)</a> for more information.</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
<span class="define">RB_HALT</span></td>
<td class="list-col" style="margin-top: 1.00em;">
<code class="lit">0x0008</code></td>
<td class="list-col" style="margin-top: 1.00em;">
the processor is simply halted; no reboot takes place. This option should be used with caution.</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
<span class="define">RB_POWERDOWN</span></td>
<td class="list-col" style="margin-top: 1.00em;">
<code class="lit">0x0808</code></td>
<td class="list-col" style="margin-top: 1.00em;">
This option is always used in conjunction with <span class="define">RB_HALT</span>, and if the system hardware supports the function, the system will be powered off, otherwise it has no effect.</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
<span class="define">RB_INITNAME</span></td>
<td class="list-col" style="margin-top: 1.00em;">
<code class="lit">0x0010</code></td>
<td class="list-col" style="margin-top: 1.00em;">
An option allowing the specification of an init program (see <a class="link-man" href="../html8/init.html">init(8)</a>) other than <i class="file">/sbin/init</i> to be run when the system reboots. This switch is not currently available.</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
<span class="define">RB_KDB</span></td>
<td class="list-col" style="margin-top: 1.00em;">
<code class="lit">0x0040</code></td>
<td class="list-col" style="margin-top: 1.00em;">
Load the symbol table and enable a built-in debugger in the system. This option will have no useful function if the kernel is not configured for debugging. Several other options have different meaning if combined with this option, although their use may not be possible via the <b class="fname">reboot</b>() call. See <a class="link-man" href="../html4/ddb.html">ddb(4)</a> for more information.</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
<span class="define">RB_NOSYNC</span></td>
<td class="list-col" style="margin-top: 1.00em;">
<code class="lit">0x0004</code></td>
<td class="list-col" style="margin-top: 1.00em;">
Normally, the disks are sync'd (see <a class="link-man" href="../html8/sync.html">sync(8)</a>) before the processor is halted or rebooted. This option may be useful if file system changes have been made manually or if the processor is on fire.</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
<span class="define">RB_RDONLY</span></td>
<td class="list-col" style="margin-top: 1.00em;">
<code class="lit">0x0080</code></td>
<td class="list-col" style="margin-top: 1.00em;">
Initially mount the root file system read-only. This is currently the default, and this option has been deprecated.</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
<span class="define">RB_SINGLE</span></td>
<td class="list-col" style="margin-top: 1.00em;">
<code class="lit">0x0002</code></td>
<td class="list-col" style="margin-top: 1.00em;">
Normally, the reboot procedure involves an automatic disk consistency check and then multi-user operations. <span class="define">RB_SINGLE</span> prevents this, booting the system with a single-user shell on the console. <span class="define">RB_SINGLE</span> is actually interpreted by the <a class="link-man" href="../html8/init.html">init(8)</a> program in the newly booted system.<p>
When no options are given (i.e., <span class="define">RB_AUTOBOOT</span> is used), the system is rebooted from file ``netbsd'' in the root file system of unit 0 of a disk chosen in a processor specific way. An automatic consistency check of the disks is normally performed (see <a class="link-man" href="../html8/fsck.html">fsck(8)</a>).</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
<span class="define">RB_STRING</span></td>
<td class="list-col" style="margin-top: 1.00em;">
<code class="lit">0x0400</code></td>
<td class="list-col" style="margin-top: 1.00em;">
<i class="farg">bootstr</i> is a string passed to the firmware on the machine, if possible, if this option is set. Currently this is only implemented on the sparc and the sun3 ports.</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
<span class="define">RB_USERCONF</span></td>
<td class="list-col" style="margin-top: 1.00em;">
<code class="lit">0x1000</code></td>
<td class="list-col" style="margin-top: 1.00em;">
Initially invoke the <a class="link-man" href="../html4/userconf.html">userconf(4)</a> facility when the system starts up again, if it has been compiled into the kernel that is loaded.</td>
</tr>
</tbody>
</table>
</div>
<div class="section">
<h1 id="x52455455524e2056414c554553">RETURN VALUES</h1> If successful, this call never returns. Otherwise, a &#45;1 is returned and an error is returned in the global variable <b class="var">errno</b>.</div>
<div class="section">
<h1 id="x4552524f5253">ERRORS</h1><dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">EPERM</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The caller is not the super-user.</dd>
</dl>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../html4/ddb.html">ddb(4)</a>, <a class="link-man" href="../html8/crash.html">crash(8)</a>, <a class="link-man" href="../html8/halt.html">halt(8)</a>, <a class="link-man" href="../html8/init.html">init(8)</a>, <a class="link-man" href="../html8/reboot.html">reboot(8)</a>, <a class="link-man" href="../html8/savecore.html">savecore(8)</a>, <a class="link-man" href="../html9/boothowto.html">boothowto(9)</a></div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> The <b class="fname">reboot</b>() function call appeared in <span class="unix">4.0BSD</span>.<p>
The <span class="define">RB_DFLTROOT</span> option is now <span class="emph">obsolete</span>.</div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
September 4, 2009</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
</html>

