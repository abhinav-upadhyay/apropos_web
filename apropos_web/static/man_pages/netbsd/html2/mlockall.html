<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/../4/strict.dtd">
>
<head>
<meta http-equiv="Content-Type" content="te../; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="../style.css" type="text/css" media="all">
<title>
MLOCKALL(2)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
MLOCKALL(2)</td>
<td class="head-vol" align="center">
System Calls Manual</td>
<td class="head-rtitle" align="right">
MLOCKALL(2)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">mlockall</b>, <b class="name">munlockall</b> &#8212; <span class="desc">lock (unlock) the address space of a process</span></div>
<div class="section">
<h1 id="x4c494252415259">LIBRARY</h1> <span class="lib">Standard C Library (libc, &#45;lc)</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="includes">#include &lt;<a class="link-includes">sys/mman.h</a>&gt;</b><p>
<i class="ftype">int</i><br>
<b class="fname">mlockall</b>(<i class="farg" style="white-space:nowrap;">int flags</i>);<p>
<i class="ftype">int</i><br>
<b class="fname">munlockall</b>(<i class="farg" style="white-space:nowrap;">void</i>);</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> The <b class="name">mlockall</b> system call locks into memory the physical pages associated with the address space of a process until the address space is unlocked, the process exits, or execs another program image.<p>
The following flags affect the behavior of <b class="name">mlockall</b>:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">MCL_CURRENT</span></dt>
<dd class="list-tag" style="margin-left: 11.00ex;">
Lock all pages currently mapped into the process's address space.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">MCL_FUTURE</span></dt>
<dd class="list-tag" style="margin-left: 11.00ex;">
Lock all pages mapped into the process's address space in the future, at the time the mapping is established. Note that this may cause future mappings to fail if those mappings cause resource limits to be exceeded.</dd>
</dl>
<p>
Since physical memory is a potentially scarce resource, processes are limited in how much they can lock down. A single process can lock the minimum of a system-wide &#8220;wired pages&#8221; limit and the per-process <code class="lit">RLIMIT_MEMLOCK</code> resource limit.<p>
The <b class="name">munlockall</b> call unlocks any locked memory regions in the process address space. Any regions mapped after an <b class="name">munlockall</b> call will not be locked.</div>
<div class="section">
<h1 id="x52455455524e2056414c554553">RETURN VALUES</h1> A return value of 0 indicates that the call succeeded and all pages in the range have either been locked or unlocked. A return value of &#45;1 indicates an error occurred and the locked status of all pages in the range remains unchanged. In this case, the global location <b class="var">errno</b> is set to indicate the error.</div>
<div class="section">
<h1 id="x4552524f5253">ERRORS</h1> <b class="fname">mlockall</b>() will fail if:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">EINVAL</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The <i class="arg">flags</i> argument is zero, or includes unimplemented flags.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">ENOMEM</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
Locking the indicated range would exceed either the system or per-process limit for locked memory.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">EAGAIN</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
Some or all of the memory mapped into the process's address space could not be locked when the call was made.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">EPERM</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The calling process does not have the appropriate privilege to perform the requested operation.</dd>
</dl>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../2/mincore">mincore(2)</a>, <a class="link-man" href="../2/mlock">mlock(2)</a>, <a class="link-man" href="../2/mmap">mmap(2)</a>, <a class="link-man" href="../2/munmap">munmap(2)</a>, <a class="link-man" href="../2/setrlimit">setrlimit(2)</a></div>
<div class="section">
<h1 id="x5354414e4441524453">STANDARDS</h1> The <b class="fname">mlockall</b>() and <b class="fname">munlockall</b>() functions conform to IEEE Std 1003.1b-1993 (&#8220;POSIX.1b&#8221;).</div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> The <b class="fname">mlockall</b>() and <b class="fname">munlockall</b>() functions first appeared in <span class="unix">NetBSD&#160;1.5</span>.</div>
<div class="section">
<h1 id="x42554753">BUGS</h1> The per-process resource limit is a limit on the amount of virtual memory locked, while the system-wide limit is for the number of locked physical pages. Hence a process with two distinct locked mappings of the same physical page counts as 2 pages against the per-process limit and as only a single page in the system limit.</div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
June 12, 1999</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
<>

