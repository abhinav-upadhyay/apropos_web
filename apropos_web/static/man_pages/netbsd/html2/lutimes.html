<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/../4/strict.dtd">
>
<head>
<meta http-equiv="Content-Type" content="te../; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="../style.css" type="text/css" media="all">
<title>
UTIMES(2)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
UTIMES(2)</td>
<td class="head-vol" align="center">
System Calls Manual</td>
<td class="head-rtitle" align="right">
UTIMES(2)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">utimes</b>, <b class="name">lutimes</b>, <b class="name">futimes</b>, <b class="name">utimens</b>, <b class="name">lutimens</b>, <b class="name">futimens</b>, <b class="name">utimensat</b> &#8212; <span class="desc">set file access and modification times</span></div>
<div class="section">
<h1 id="x4c494252415259">LIBRARY</h1> <span class="lib">Standard C Library (libc, &#45;lc)</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="includes">#include &lt;<a class="link-includes">sys/time.h</a>&gt;</b><p>
<i class="ftype">int</i><br>
<b class="fname">utimes</b>(<i class="farg" style="white-space:nowrap;">const char *path</i>, <i class="farg" style="white-space:nowrap;">const struct timeval times[2]</i>);<p>
<i class="ftype">int</i><br>
<b class="fname">lutimes</b>(<i class="farg" style="white-space:nowrap;">const char *path</i>, <i class="farg" style="white-space:nowrap;">const struct timeval times[2]</i>);<p>
<i class="ftype">int</i><br>
<b class="fname">futimes</b>(<i class="farg" style="white-space:nowrap;">int fd</i>, <i class="farg" style="white-space:nowrap;">const struct timeval times[2]</i>);<p>
<b class="includes">#include &lt;<a class="link-includes">sys/stat.h</a>&gt;</b><p>
<i class="ftype">int</i><br>
<b class="fname">utimens</b>(<i class="farg" style="white-space:nowrap;">const char *path</i>, <i class="farg" style="white-space:nowrap;">const struct timespec times[2]</i>);<p>
<i class="ftype">int</i><br>
<b class="fname">lutimens</b>(<i class="farg" style="white-space:nowrap;">const char *path</i>, <i class="farg" style="white-space:nowrap;">const struct timespec times[2]</i>);<p>
<i class="ftype">int</i><br>
<b class="fname">futimens</b>(<i class="farg" style="white-space:nowrap;">int fd</i>, <i class="farg" style="white-space:nowrap;">const struct timespec times[2]</i>);<p>
<b class="includes">#include &lt;<a class="link-includes">sys/stat.h</a>&gt;</b><br>
<b class="includes">#include &lt;<a class="link-includes">fcntl.h</a>&gt;</b><p>
<i class="ftype">int</i><br>
<b class="fname">utimensat</b>(<i class="farg" style="white-space:nowrap;">int fd</i>, <i class="farg" style="white-space:nowrap;">const char *path</i>, <i class="farg" style="white-space:nowrap;">const struct timespec times[2]</i>, <i class="farg" style="white-space:nowrap;">int flag</i>);</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> The access and modification times of the file named by <i class="farg">path</i> or referenced by <i class="farg">fd</i> are changed as specified by the argument <i class="farg">times</i>.<p>
If <i class="farg">times</i> is <span class="define">NULL</span>, the access and modification times are set to the current time. The caller must be the owner of the file, have permission to write the file, or be the super-user.<p>
If <i class="farg">times</i> is non-<span class="define">NULL</span>, it is assumed to point to an array of two timeval structures. The access time is set to the value of the first element, and the modification time is set to the value of the second element. For file systems that support file birth (creation) times (such as UFS2), the birth time will be set to the value of the second element if the second element is older than the currently set birth time. To set both a birth time and a modification time, two calls are required; the first to set the birth time and the second to set the (presumably newer) modification time. Ideally a new system call will be added that allows the setting of all three times at once. The caller must be the owner of the file or be the super-user.<p>
In either case, the inode-change-time of the file is set to the current time.<p>
<b class="fname">lutimes</b>() is like <b class="fname">utimes</b>() except in the case where the named file is a symbolic link, in which case <b class="fname">lutimes</b>() changes the access and modification times of the link, while <b class="fname">utimes</b>() changes the times of the file the link references.<p>
<b class="fname">utimens</b>(), <b class="fname">lutimens</b>(), and <b class="fname">futimens</b>() are like <b class="fname">utimes</b>(), <b class="fname">lutimes</b>(), and <b class="fname">futimes</b>() respectively except that time is specified with nanosecond instead of microsecond precision.<p>
<b class="fname">utimensat</b>() works the same way as <b class="fname">utimens</b>() except if <i class="farg">path</i> is relative. In that case, it is looked up from a directory whose file descriptor was passed as <i class="farg">fd</i>. Search permission is required on this directory. <i class="farg">fd</i> can be set to <span class="define">AT_FDCWD</span> in order to specify the current directory.<p>
When it operates on a symbolic link, <b class="fname">utimensat</b>() will change the target's time unless <span class="define">AT_SYMLINK_NOFOLLOW</span> is set in <i class="farg">flag</i>. In that later case, the symbolic link's dates are changed.<p>
The nanosecond fields for <b class="fname">utimens</b>(), <b class="fname">lutimens</b>(), <b class="fname">futimens</b>(), and <b class="fname">utimensat</b>() can be set to the special value <span class="define">UTIME_NOW</span> to set the current time, or to <span class="define">UTIME_OMIT</span> to let the time unchanged (this allows changing access time but not modification time, and vice-versa).</div>
<div class="section">
<h1 id="x52455455524e2056414c554553">RETURN VALUES</h1> The <b class="fname">utimes</b>(), <b class="fname">lutimes</b>(), <b class="fname">futimes</b>(), <b class="fname">utimens</b>(), <b class="fname">lutimens</b>(), <b class="fname">futimens</b>(), and <b class="fname">utimensat</b>() functions return the value 0 if successful; otherwise the value -1 is returned and the global variable <b class="var">errno</b> is set to indicate the error.</div>
<div class="section">
<h1 id="x4552524f5253">ERRORS</h1> <b class="fname">utimes</b>(), <b class="fname">lutimes</b>(), <b class="fname">utimens</b>(), <b class="fname">lutimens</b>(), and <b class="fname">utimensat</b>() will fail if:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">EACCES</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
Search permission is denied for a component of the path prefix; or the <i class="farg">times</i> argument is <span class="define">NULL</span> and the effective user ID of the process does not match the owner of the file, and is not the super-user, and write access is denied.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">EFAULT</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
<i class="farg">path</i> or <i class="farg">times</i> points outside the process's allocated address space.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">EIO</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
An I/O error occurred while reading or writing the affected inode.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">ELOOP</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
Too many symbolic links were encountered in translating the pathname.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">ENAMETOOLONG</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
A component of a pathname exceeded &#123;<span class="define">NAME_MAX</span>&#125; characters, or an entire path name exceeded &#123;<span class="define">PATH_MAX</span>&#125; characters.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">ENOENT</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The named file does not exist.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">ENOTDIR</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
A component of the path prefix is not a directory.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">EPERM</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The <i class="farg">times</i> argument is not <span class="define">NULL</span> and the calling process's effective user ID does not match the owner of the file and is not the super-user.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">EROFS</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The file system containing the file is mounted read-only.</dd>
</dl>
<p>
In addition, <b class="fname">utimensat</b>() will fail if:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">EBADF</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
<i class="farg">path</i> does not specify an absolute path and <i class="farg">fd</i> is neither <span class="define">AT_FDCWD</span> nor a valid file descriptor open for reading or searching.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">ENOTDIR</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
<i class="farg">path</i> is not an absolute path and <i class="farg">fd</i> is a file descriptor associated with a non-directory file.</dd>
</dl>
<p>
<b class="fname">futimes</b>() and <b class="fname">futimens</b>() will fail if:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">EACCES</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The <i class="farg">times</i> argument is <span class="define">NULL</span> and the effective user ID of the process does not match the owner of the file, and is not the super-user, and write access is denied.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">EBADF</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
<i class="farg">fd</i> does not refer to a valid descriptor.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">EFAULT</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
<i class="farg">times</i> points outside the process's allocated address space.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">EIO</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
An I/O error occurred while reading or writing the affected inode.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">EPERM</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The <i class="farg">times</i> argument is not <span class="define">NULL</span> and the calling process's effective user ID does not match the owner of the file and is not the super-user.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">EROFS</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The file system containing the file is mounted read-only.</dd>
</dl>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../2/stat">stat(2)</a>, <a class="link-man" href="../3/utime">utime(3)</a>, <a class="link-man" href="../7/symlink">symlink(7)</a></div>
<div class="section">
<h1 id="x5354414e4441524453">STANDARDS</h1> The <b class="fname">utimes</b>() function conforms to IEEE Std 1003.1-2001 (&#8220;POSIX.1&#8221;). It was however marked as legacy in the IEEE Std 1003.1-2004 (&#8220;POSIX.1&#8221;) revision. <b class="fname">futimens</b>() and <b class="fname">utimensat</b>() functions conform to IEEE Std 1003.1-2008 (&#8220;POSIX.1&#8221;).</div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> The <b class="fname">utimes</b>() function call appeared in <span class="unix">4.2BSD</span>. The <b class="fname">futimes</b>() function call appeared in <span class="unix">NetBSD&#160;1.2</span>. The <b class="fname">lutimes</b>() function call appeared in <span class="unix">NetBSD&#160;1.3</span>. Birthtime setting support was added in <span class="unix">NetBSD&#160;5.0</span>. <b class="fname">futimens</b>() and <b class="fname">utimensat</b>() functions calls appeared in <span class="unix">NetBSD&#160;6.0</span>.</div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
September 14, 2013</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
<>

