<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/../4/strict.dtd">
>
<head>
<meta http-equiv="Content-Type" content="te../; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="../style.css" type="text/css" media="all">
<title>
ACCESS(2)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
ACCESS(2)</td>
<td class="head-vol" align="center">
System Calls Manual</td>
<td class="head-rtitle" align="right">
ACCESS(2)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">access</b>, <b class="name">faccessat</b> &#8212; <span class="desc">check access permissions of a file or pathname</span></div>
<div class="section">
<h1 id="x4c494252415259">LIBRARY</h1> <span class="lib">Standard C Library (libc, &#45;lc)</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="includes">#include &lt;<a class="link-includes">unistd.h</a>&gt;</b><p>
<i class="ftype">int</i><br>
<b class="fname">access</b>(<i class="farg" style="white-space:nowrap;">const char *path</i>, <i class="farg" style="white-space:nowrap;">int mode</i>);<p>
<b class="includes">#include &lt;<a class="link-includes">fcntl.h</a>&gt;</b><p>
<i class="ftype">int</i><br>
<b class="fname">faccessat</b>(<i class="farg" style="white-space:nowrap;">int fd</i>, <i class="farg" style="white-space:nowrap;">const char *path</i>, <i class="farg" style="white-space:nowrap;">int mode</i>, <i class="farg" style="white-space:nowrap;">int flags</i>);</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> The <b class="fname">access</b>() function checks the accessibility of the file named by <i class="farg">path</i>. The <b class="fname">faccessat</b>() function checks the accessibility of the file named by <i class="farg">path</i> using <i class="farg">fd</i> as the starting point for relative pathnames. If <i class="farg">fd</i> is <span class="define">AT_FDCWD</span> the current directory is used. Calling <b class="fname">access</b>() is equivalent to calling <b class="fname">faccessat</b>() with <i class="farg">fd</i> set to <span class="define">AT_FDCWD</span> and <i class="farg">flags</i> set to 0.<p>
The form of access to check is specified by the bitwise or of the following values for <i class="farg">mode</i>:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">R_OK</span></dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
Check for read permission.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">W_OK</span></dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
Check for write permission.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">X_OK</span></dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
Check for execute/search permission.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">F_OK</span></dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
Check only for existence.</dd>
</dl>
<p>
All components of the pathname <i class="farg">path</i> are checked for access permissions as well.<p>
The owner of a file has permission checked with respect to the &#8220;owner&#8221; read, write, and execute mode bits, members of the file's group other than the owner have permission checked with respect to the &#8220;group&#8221; mode bits, and all others have permissions checked with respect to the &#8220;other&#8221; mode bits.<p>
The file descriptor <i class="farg">fd</i> must name a directory. Search permission is required on this directory.<p>
The <i class="farg">flags</i> argument to <b class="fname">faccessat</b>() can specify the following optional behavior:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
AT_EACCESS</dt>
<dd class="list-tag" style="margin-left: 19.00ex;">
Use the effective user and group IDs instead of the real user and group IDs for checking permission. See discussion below.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
AT_SYMLINK_NOFOLLOW</dt>
<dd class="list-tag" style="margin-left: 19.00ex;">
Do not follow a symbolic link encountered as the last component in <i class="farg">path</i>.</dd>
</dl>
<p>
For <b class="fname">access</b>(), and <b class="fname">faccessat</b>() when the <span class="define">AT_EACCESS</span> flag is not passed, the real user ID and the real group ID are used for checking permission in place of the effective user ID and effective group ID. This affects only set-user-ID and set-group-ID programs, which should not use these functions. (For other programs, the real and effective IDs are the same.)<p>
For processes running with super-user privileges, these functions may return success for read and write checks regardless of whether read and write permission bits are actually set. This reflects the fact that the super-user may read and write all files regardless of permission settings. However, even for the super-user, an execute check using <span class="define">X_OK</span> will succeed only if the target object has at least one of its execute permission bits set. (This does not guarantee that the target object can necessarily be successfully executed. See <a class="link-man" href="../2/execve">execve(2)</a>.)</div>
<div class="section">
<h1 id="x52455455524e2056414c554553">RETURN VALUES</h1> The <b class="fname">access</b>() and <b class="fname">faccessat</b>() functions succeed and return 0 if, at some point in the recent past, the target object named by <i class="farg">path</i> existed and its permission settings allowed the requested access as described above. If the requested access would not have been granted, the object did not exist, or the path lookup failed, the value &#45;1 is returned and the value of <b class="var">errno</b> is set to reflect what went wrong.</div>
<div class="section">
<h1 id="x4552524f5253">ERRORS</h1> These functions fail if:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">EACCES</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
Search permission is denied for <i class="farg">fd</i>, or for the current directory, or for a directory in the prefix of <i class="farg">path</i>; or the permission bits on the target file system object do not permit the requested access.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">EBADF</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The file descriptor <i class="farg">fd</i> is not open and is not <span class="define">AT_FDCWD</span>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">EFAULT</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
<i class="farg">path</i> points outside the process's allocated address space.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">EINVAL</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The <i class="farg">mode</i> or <i class="farg">flags</i> argument contained an invalid value.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">EIO</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
An I/O error occurred while reading from or writing to the file system.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">ELOOP</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
Too many symbolic links were encountered in translating the pathname.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">ENAMETOOLONG</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
A component of a pathname exceeded &#123;<span class="define">NAME_MAX</span>&#125; characters, or an entire path name exceeded &#123;<span class="define">PATH_MAX</span>&#125; characters.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">ENOENT</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The named file does not exist.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">ENOTDIR</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The file descriptor <i class="farg">fd</i> does not name a directory, or a component of the path prefix is not a directory.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">EROFS</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
Write access is requested for a file on a read-only file system.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">ETXTBSY</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
Write access is requested for a pure procedure (shared text) file presently being executed.</dd>
</dl>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../2/chmod">chmod(2)</a>, <a class="link-man" href="../2/execve">execve(2)</a>, <a class="link-man" href="../2/stat">stat(2)</a>, <a class="link-man" href="../3/secure_path">secure_path(3)</a></div>
<div class="section">
<h1 id="x5354414e4441524453">STANDARDS</h1> The <b class="fname">access</b>() function conforms to IEEE Std 1003.1-1990 (&#8220;POSIX.1&#8221;). <b class="fname">faccessat</b>() function conforms to IEEE Std 1003.1-2008 (&#8220;POSIX.1&#8221;).<p>
Note that <b class="fname">faccessat</b>() violates the historic convention that system calls whose names begin with `f' operate on file handles rather than paths. There is no equivalent to <b class="fname">access</b>() for checking access properties of an already-opened file.</div>
<div class="section">
<h1 id="x534543555249545920434f4e53494445524154494f4e53">SECURITY CONSIDERATIONS</h1> Because the results of these calls reflect the state of the file system at the time they ran, and the file system can potentially be modified between that time and the time the caller attempts to act on the results, they should <span class="emph">never</span> be used for security enforcement.<p>
Privileged programs that need to restrict their actions to files or directories properly accessible to unprivileged users <span class="emph">must</span> do this by assuming or restoring an unprivileged state (see <a class="link-man" href="../2/seteuid">seteuid(2)</a>) when performing the pertinent actions. Checking in advance (with <b class="fname">access</b>() or any other method) and performing such actions while privileged introduces a race condition that in most cases is easily exploitable by even a naive adversary.<p>
Even for non-privileged programs, the opportunity for the world to change after the call runs makes <b class="fname">access</b>() and <b class="fname">faccessat</b>() not very useful. In general only <span class="define">F_OK</span> should be used, and that sparingly. The other checks may occasionally be useful for user interface or diagnostic purposes.</div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
January 12, 2013</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
<>

