<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="../style.css" type="text/css" media="all">
<title>
GETITIMER(2)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
GETITIMER(2)</td>
<td class="head-vol" align="center">
System Calls Manual</td>
<td class="head-rtitle" align="right">
GETITIMER(2)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">getitimer</b>, <b class="name">setitimer</b> &#8212; <span class="desc">get/set value of interval timer</span></div>
<div class="section">
<h1 id="x4c494252415259">LIBRARY</h1> <span class="lib">Standard C Library (libc, &#45;lc)</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="includes">#include &lt;<a class="link-includes">sys/time.h</a>&gt;</b><p>
<i class="ftype">int</i><br>
<b class="fname">getitimer</b>(<i class="farg" style="white-space:nowrap;">int which</i>, <i class="farg" style="white-space:nowrap;">struct itimerval *value</i>);<p>
<i class="ftype">int</i><br>
<b class="fname">setitimer</b>(<i class="farg" style="white-space:nowrap;">int which</i>, <i class="farg" style="white-space:nowrap;">const struct itimerval * restrict value</i>, <i class="farg" style="white-space:nowrap;">struct itimerval * restrict ovalue</i>);</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> The system provides each process with three interval timers, defined in &#60;<i class="file">sys/time.h</i>&#62;. The <b class="fname">getitimer</b>() call returns the current value for the timer specified in <i class="farg">which</i> in the structure at <i class="farg">value</i>. The <b class="fname">setitimer</b>() call sets a timer to the specified <i class="farg">value</i>, returning the previous value of the timer if <i class="farg">ovalue</i> is not <span class="define">NULL</span>.<p>
A timer value is defined by the <i class="farg">itimerval</i> structure:<p>
<pre style="margin-left: 5.00ex;" class="lit display">
struct itimerval { 
	struct	timeval it_interval;	/* timer interval */ 
	struct	timeval it_value;	/* current value */ 
};</pre>
<p>
If <i class="farg">it_value</i> is non-zero, it indicates the time to the next timer expiration. If <i class="farg">it_interval</i> is non-zero, it specifies a value to be used in reloading <i class="farg">it_value</i> when the timer expires. Setting <i class="farg">it_value</i> to 0 disables a timer. Setting <i class="farg">it_interval</i> to 0 causes a timer to be disabled after its next expiration (assuming <i class="farg">it_value</i> is non-zero).<p>
The <i class="farg">which</i> parameter specifies the type of the timer:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 5.00ex;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">ITIMER_REAL</span></dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
timer decrements in real time. This timer is affected by <a class="link-man" href="../2/adjtime">adjtime(2)</a> and <a class="link-man" href="../2/settimeofday">settimeofday(2)</a>. A <span class="define">SIGALRM</span> signal is delivered when this timer expires.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">ITIMER_VIRTUAL</span></dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
timer decrements in process virtual time. It runs only when the process is executing. A <span class="define">SIGVTALRM</span> signal is delivered when it expires.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">ITIMER_PROF</span></dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
timer decrements both in process virtual time and when the system is running on behalf of the process. It is designed to be used by interpreters in statistically profiling the execution of interpreted programs. Each time the <span class="define">ITIMER_PROF</span> timer expires, the <span class="define">SIGPROF</span> signal is delivered. Because this signal may interrupt in-progress system calls, programs using this timer must be prepared to restart interrupted system calls.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">ITIMER_MONOTONIC</span></dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
timer decrements in monotonic time. This timer is not affected by <a class="link-man" href="../2/adjtime">adjtime(2)</a> and <a class="link-man" href="../2/settimeofday">settimeofday(2)</a>. A <span class="define">SIGALRM</span> signal is delivered when this timer expires.</dd>
</dl>
Note that:<ul style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 5.00ex;" class="list list-bul">
<li class="list-bul" style="margin-top: 1.00em;">
Time values smaller than the resolution of the system clock are rounded up to this resolution (typically 10 milliseconds).</li>
<li class="list-bul" style="margin-top: 1.00em;">
The interaction between <b class="fname">setitimer</b>() and <a class="link-man" href="../3/alarm">alarm(3)</a> or <a class="link-man" href="../3/sleep">sleep(3)</a> is unspecified by the specification.</li>
</ul>
</div>
<div class="section">
<h1 id="x52455455524e2056414c554553">RETURN VALUES</h1> If the calls succeed, a value of 0 is returned. If an error occurs, the value &#45;1 is returned, and a more precise error code is placed in the global variable <b class="var">errno</b>.</div>
<div class="section">
<h1 id="x4552524f5253">ERRORS</h1> Both functions may fail if:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">EFAULT</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The <i class="farg">value</i> parameter specified a bad address.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">EINVAL</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The <i class="farg">which</i> parameter was not a known timer type, or the <i class="farg">value</i> parameter specified a time that was too large to be handled.</dd>
</dl>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../2/gettimeofday">gettimeofday(2)</a>, <a class="link-man" href="../2/select">select(2)</a>, <a class="link-man" href="../2/sigaction">sigaction(2)</a>, <a class="link-man" href="../3/itimerval">itimerval(3)</a>, <a class="link-man" href="../3/timeradd">timeradd(3)</a></div>
<div class="section">
<h1 id="x5354414e4441524453">STANDARDS</h1> The functions conform to IEEE Std 1003.1-2001 (&#8220;POSIX.1&#8221;). The later IEEE Std 1003.1-2008 (&#8220;POSIX.1&#8221;) revision however marked both as obsolescent, recommending the use of <a class="link-man" href="../2/timer_gettime">timer_gettime(2)</a> and <a class="link-man" href="../2/timer_settime">timer_settime(2)</a> instead.</div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> The <b class="fname">getitimer</b>() function call appeared in <span class="unix">4.2BSD</span>. The <span class="define">ITIMER_MONOTONIC</span> functionality appeared in <span class="unix">NetBSD&#160;6.0</span>.</div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
October 27, 2011</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
</html>

