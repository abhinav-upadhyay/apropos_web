<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/../4/strict.dtd">
>
<head>
<meta http-equiv="Content-Type" content="te../; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="../style.css" type="text/css" media="all">
<title>
KNOTE(9)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
KNOTE(9)</td>
<td class="head-vol" align="center">
Kernel Developer's Manual</td>
<td class="head-rtitle" align="right">
KNOTE(9)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">knote</b>, <b class="name">KNOTE</b> &#8212; <span class="desc">raise kernel event</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="includes">#include &lt;<a class="link-includes">sys/event.h</a>&gt;</b><p>
<i class="ftype">void</i><br>
<b class="fname">knote</b>(<i class="farg" style="white-space:nowrap;">struct klist *list</i>, <i class="farg" style="white-space:nowrap;">long hint</i>);<p>
<b class="fname">KNOTE</b>(<i class="farg" style="white-space:nowrap;">struct klist *list</i>, <i class="farg" style="white-space:nowrap;">long hint</i>);</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> The <b class="fname">knote</b>() function provides a hook into the kqueue kernel event notification mechanism to allow sections of the kernel to raise a kernel event in the form of a &#8216;knote&#8217;, which is a <i class="farg">struct knote</i> as defined in <b class="includes">&lt;<a class="link-includes">sys/event.h</a>&gt;</b>.<p>
<b class="fname">knote</b>() takes a singly linked <i class="farg">list</i> of knotes, along with a <i class="farg">hint</i> (which is passed to the appropriate filter routine). <b class="fname">knote</b>() then walks the <i class="farg">list</i> making calls to the filter routine for each knote. As each knote contains a reference to the data structure that it is attached to, the filter may choose to examine the data structure in deciding whether an event should be reported. The <i class="farg">hint</i> is used to pass in additional information, which may not be present in the data structure that the filter examines.<p>
If the filter decides that the event should be returned, it returns a non-zero value and <b class="fname">knote</b>() links the knote onto the tail end of the active list in the corresponding kqueue for the application to retrieve. If the knote is already on the active list, no action is taken, but the call to the filter occurs in order to provide an opportunity for the filter to record the activity.<p>
<b class="fname">knote</b>() must not be called from interrupt contexts running at an interrupt priority level higher than <b class="fname">splsched</b>().<p>
<b class="fname">KNOTE</b>() is a macro that calls <b class="fname">knote</b>(<i class="farg">list</i>, <i class="farg">hint</i>) if <i class="farg">list</i> is not empty.</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../2/kqueue">kqueue(2)</a>, <a class="link-man" href="../9/kfilter_register">kfilter_register(9)</a></div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> The <b class="fname">knote</b>() and <b class="fname">KNOTE</b>() functions first appeared in <span class="unix">FreeBSD&#160;4.1</span>, and then in <span class="unix">NetBSD&#160;2.0</span>.</div>
<div class="section">
<h1 id="x415554484f5253">AUTHORS</h1> The <b class="fname">kqueue</b>() system was written by <span class="author">Jonathan Lemon</span> &#60;<a class="link-mail" href="mailto:jlemon@FreeBSD.org">jlemon@FreeBSD.org</a>&#62;.</div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
February 18, 2004</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
<>

