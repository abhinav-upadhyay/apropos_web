<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="/static/man_pages/netbsd/style.css" type="text/css" media="all">
<title>
VFSOPS(9)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
VFSOPS(9)</td>
<td class="head-vol" align="center">
Kernel Developer's Manual</td>
<td class="head-rtitle" align="right">
VFSOPS(9)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">vfsops</b>, <b class="name">VFS_MOUNT</b>, <b class="name">VFS_START</b>, <b class="name">VFS_UNMOUNT</b>, <b class="name">VFS_ROOT</b>, <b class="name">VFS_QUOTACTL</b>, <b class="name">VFS_STATVFS</b>, <b class="name">VFS_SYNC</b>, <b class="name">VFS_VGET</b>, <b class="name">VFS_LOADVNODE</b>, <b class="name">VFS_NEWVNODE</b>, <b class="name">VFS_FHTOVP</b>, <b class="name">VFS_VPTOFH</b>, <b class="name">VFS_SNAPSHOT</b>, <b class="name">VFS_SUSPENDCTL</b> &#8212; <span class="desc">kernel file system interface</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="includes">#include &lt;<a class="link-includes">sys/param.h</a>&gt;</b><br>
<b class="includes">#include &lt;<a class="link-includes">sys/mount.h</a>&gt;</b><br>
<b class="includes">#include &lt;<a class="link-includes">sys/vnode.h</a>&gt;</b><p>
<i class="ftype">int</i><br>
<b class="fname">VFS_MOUNT</b>(<i class="farg">struct mount *mp</i>, <i class="farg">const char *path</i>, <i class="farg">void *data</i>, <i class="farg">size_t *dlen</i>);<p>
<i class="ftype">int</i><br>
<b class="fname">VFS_START</b>(<i class="farg" style="white-space:nowrap;">struct mount *mp</i>, <i class="farg" style="white-space:nowrap;">int flags</i>);<p>
<i class="ftype">int</i><br>
<b class="fname">VFS_UNMOUNT</b>(<i class="farg" style="white-space:nowrap;">struct mount *mp</i>, <i class="farg" style="white-space:nowrap;">int mntflags</i>);<p>
<i class="ftype">int</i><br>
<b class="fname">VFS_ROOT</b>(<i class="farg" style="white-space:nowrap;">struct mount *mp</i>, <i class="farg" style="white-space:nowrap;">struct vnode **vpp</i>);<p>
<i class="ftype">int</i><br>
<b class="fname">VFS_QUOTACTL</b>(<i class="farg" style="white-space:nowrap;">struct mount *mp</i>, <i class="farg" style="white-space:nowrap;">struct quotactl_args *args</i>);<p>
<i class="ftype">int</i><br>
<b class="fname">VFS_STATVFS</b>(<i class="farg" style="white-space:nowrap;">struct mount *mp</i>, <i class="farg" style="white-space:nowrap;">struct statvfs *sbp</i>);<p>
<i class="ftype">int</i><br>
<b class="fname">VFS_SYNC</b>(<i class="farg" style="white-space:nowrap;">struct mount *mp</i>, <i class="farg" style="white-space:nowrap;">int waitfor</i>, <i class="farg" style="white-space:nowrap;">kauth_cred_t cred</i>);<p>
<i class="ftype">int</i><br>
<b class="fname">VFS_VGET</b>(<i class="farg" style="white-space:nowrap;">struct mount *mp</i>, <i class="farg" style="white-space:nowrap;">ino_t ino</i>, <i class="farg" style="white-space:nowrap;">struct vnode **vpp</i>);<p>
<i class="ftype">int</i><br>
<b class="fname">VFS_LOADVNODE</b>(<i class="farg" style="white-space:nowrap;">struct mount *mp</i>, <i class="farg" style="white-space:nowrap;">struct vnode *vp</i>, <i class="farg" style="white-space:nowrap;">const void *key</i>, <i class="farg" style="white-space:nowrap;">size_t key_len</i>, <i class="farg" style="white-space:nowrap;">const void **new_key</i>);<p>
<i class="ftype">int</i><br>
<b class="fname">VFS_NEWVNODE</b>(<i class="farg" style="white-space:nowrap;">struct mount *mp</i>, <i class="farg" style="white-space:nowrap;">struct vnode *dvp</i>, <i class="farg" style="white-space:nowrap;">struct vnode *vp</i>, <i class="farg" style="white-space:nowrap;">struct vattr *vap</i>, <i class="farg" style="white-space:nowrap;">kauth_cred_t cred</i>, <i class="farg" style="white-space:nowrap;">size_t *key_len</i>, <i class="farg" style="white-space:nowrap;">const void **new_key</i>);<p>
<i class="ftype">int</i><br>
<b class="fname">VFS_FHTOVP</b>(<i class="farg" style="white-space:nowrap;">struct mount *mp</i>, <i class="farg" style="white-space:nowrap;">struct fid *fhp</i>, <i class="farg" style="white-space:nowrap;">struct vnode **vpp</i>);<p>
<i class="ftype">int</i><br>
<b class="fname">VFS_VPTOFH</b>(<i class="farg" style="white-space:nowrap;">struct vnode *vp</i>, <i class="farg" style="white-space:nowrap;">struct fid *fhp</i>, <i class="farg" style="white-space:nowrap;">size_t *fh_size</i>);<p>
<i class="ftype">int</i><br>
<b class="fname">VFS_SNAPSHOT</b>(<i class="farg" style="white-space:nowrap;">struct mount *mp</i>, <i class="farg" style="white-space:nowrap;">struct vnode *vp</i>, <i class="farg" style="white-space:nowrap;">struct timespec *ts</i>);<p>
<i class="ftype">int</i><br>
<b class="fname">VFS_SUSPENDCTL</b>(<i class="farg" style="white-space:nowrap;">struct mount *mp</i>, <i class="farg" style="white-space:nowrap;">int cmd</i>);</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> In a similar fashion to the <a class="link-man" href="../9/vnode">vnode(9)</a> interface, all operations that are done on a file system are conducted through a single interface that allows the system to carry out operations on a file system without knowing its construction or type.<p>
All supported file systems in the kernel have an entry in the <b class="var">vfs_list_initial</b> table. This table is generated by <a class="link-man" href="../1/config">config(1)</a> and is a <span class="define">NULL</span>-terminated list of <span class="type">vfsops</span> structures. The vfsops structure describes the operations that can be done to a specific file system type. The following table lists the elements of the vfsops vector, the corresponding invocation macro, and a description of the element.<p>
<table style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-col">
<col style="width: 23.00ex;">
<col style="min-width: 14.00ex;">
<tbody>
<tr class="list-col">
<td class="list-col" style="margin-top: 0.00em;">
<span class="symb">Vector element</span></td>
<td class="list-col" style="margin-top: 0.00em;">
<span class="symb">Macro</span></td>
<td class="list-col" style="margin-top: 0.00em;">
<span class="symb">Description</span></td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 0.00em;">
int (*vfs_mount)()</td>
<td class="list-col" style="margin-top: 0.00em;">
<span class="define">VFS_MOUNT</span></td>
<td class="list-col" style="margin-top: 0.00em;">
Mount a file system</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 0.00em;">
int (*vfs_start)()</td>
<td class="list-col" style="margin-top: 0.00em;">
<span class="define">VFS_START</span></td>
<td class="list-col" style="margin-top: 0.00em;">
Make operational</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 0.00em;">
int (*vfs_unmount)()</td>
<td class="list-col" style="margin-top: 0.00em;">
<span class="define">VFS_UNMOUNT</span></td>
<td class="list-col" style="margin-top: 0.00em;">
Unmount a file system</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 0.00em;">
int (*vfs_root)()</td>
<td class="list-col" style="margin-top: 0.00em;">
<span class="define">VFS_ROOT</span></td>
<td class="list-col" style="margin-top: 0.00em;">
Get the file system root vnode</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 0.00em;">
int (*vfs_quotactl)()</td>
<td class="list-col" style="margin-top: 0.00em;">
<span class="define">VFS_QUOTACTL</span></td>
<td class="list-col" style="margin-top: 0.00em;">
Query/modify space quotas</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 0.00em;">
int (*vfs_statvfs)()</td>
<td class="list-col" style="margin-top: 0.00em;">
<span class="define">VFS_STATVFS</span></td>
<td class="list-col" style="margin-top: 0.00em;">
Get file system statistics</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 0.00em;">
int (*vfs_sync)()</td>
<td class="list-col" style="margin-top: 0.00em;">
<span class="define">VFS_SYNC</span></td>
<td class="list-col" style="margin-top: 0.00em;">
Flush file system buffers</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 0.00em;">
int (*vfs_vget)()</td>
<td class="list-col" style="margin-top: 0.00em;">
<span class="define">VFS_VGET</span></td>
<td class="list-col" style="margin-top: 0.00em;">
Get vnode from file id</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 0.00em;">
int (*vfs_loadvnode)()</td>
<td class="list-col" style="margin-top: 0.00em;">
<span class="define">VFS_LOADVNODE</span></td>
<td class="list-col" style="margin-top: 0.00em;">
Initialze vnode with file</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 0.00em;">
int (*vfs_loadvnode)()</td>
<td class="list-col" style="margin-top: 0.00em;">
<span class="define">VFS_NEWVNODE</span></td>
<td class="list-col" style="margin-top: 0.00em;">
Initialze vnode with new file</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 0.00em;">
int (*vfs_fhtovp)()</td>
<td class="list-col" style="margin-top: 0.00em;">
<span class="define">VFS_FHTOVP</span></td>
<td class="list-col" style="margin-top: 0.00em;">
NFS file handle to vnode lookup</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 0.00em;">
int (*vfs_vptofh)()</td>
<td class="list-col" style="margin-top: 0.00em;">
<span class="define">VFS_VPTOFH</span></td>
<td class="list-col" style="margin-top: 0.00em;">
Vnode to NFS file handle lookup</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 0.00em;">
void (*vfs_init)()</td>
<td class="list-col" style="margin-top: 0.00em;">
&#45;</td>
<td class="list-col" style="margin-top: 0.00em;">
Initialize file system</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 0.00em;">
void (*vfs_reinit)()</td>
<td class="list-col" style="margin-top: 0.00em;">
&#45;</td>
<td class="list-col" style="margin-top: 0.00em;">
Reinitialize file system</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 0.00em;">
void (*vfs_done)()</td>
<td class="list-col" style="margin-top: 0.00em;">
&#45;</td>
<td class="list-col" style="margin-top: 0.00em;">
Cleanup unmounted file system</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 0.00em;">
int (*vfs_mountroot)()</td>
<td class="list-col" style="margin-top: 0.00em;">
&#45;</td>
<td class="list-col" style="margin-top: 0.00em;">
Mount the root file system</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 0.00em;">
int (*vfs_snapshot)()</td>
<td class="list-col" style="margin-top: 0.00em;">
<span class="define">VFS_SNAPSHOT</span></td>
<td class="list-col" style="margin-top: 0.00em;">
Take a snapshot</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 0.00em;">
int (*vfs_suspendctl)()</td>
<td class="list-col" style="margin-top: 0.00em;">
<span class="define">VFS_SUSPENDCTL</span></td>
<td class="list-col" style="margin-top: 0.00em;">
Suspend or resume</td>
</tr>
</tbody>
</table>
<p>
Some additional non-function members of the vfsops structure are the file system name <i class="farg">vfs_name</i> and a reference count <i class="farg">vfs_refcount</i>. It is not mandatory for a file system type to support a particular operation, but it must assign each member function pointer to a suitable function to do the minimum required of it. In most cases, such functions either do nothing or return an error value to the effect that it is not supported. <i class="farg">vfs_reinit</i>, <i class="farg">vfs_mountroot</i>, <i class="farg">vfs_fhtovp</i>, and <i class="farg">vfs_vptofh</i> may be <span class="define">NULL</span>.<p>
At system boot, each file system with an entry in <b class="var">vfs_list_initial</b> is established and initialized. Each initialized file system is recorded by the kernel in the list <b class="var">vfs_list</b> and the file system specific initialization function <i class="farg">vfs_init</i> in its vfsops vector is invoked. When the file system is no longer needed <i class="farg">vfs_done</i> is invoked to run file system specific cleanups and the file system is removed from the kernel list.<p>
At system boot, the root file system is mounted by invoking the file system type specific <i class="farg">vfs_mountroot</i> function in the vfsops vector. All file systems that can be mounted as a root file system must define this function. It is responsible for initializing to list of mount structures for all future mounted file systems.<p>
Kernel state which affects a specific file system type can be queried and modified using the <a class="link-man" href="../8/sysctl">sysctl(8)</a> interface.</div>
<div class="section">
<h1 id="x46554e4354494f4e53">FUNCTIONS</h1><dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">VFS_MOUNT</b>(<i class="farg">mp</i>, <i class="farg">path</i>, <i class="farg">data</i>, <i class="farg">dlen</i>)</dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
Mount a file system specified by the mount structure <i class="farg">mp</i> on the mount point described by <i class="farg">path</i>. The argument <i class="farg">data</i> contains file system type specific data, while the argument <i class="farg">dlen</i> points to a location specifying the length of the data.<p>
<b class="fname">VFS_MOUNT</b>() initializes the mount structure for the mounted file system. This structure records mount-specific information for the file system and records the list of vnodes associated with the file system. This function is invoked both to mount new file systems and to change the attributes of an existing file system. If the flag <span class="define">MNT_UPDATE</span> is set in <b class="var">mp-&gt;mnt_flag</b>, the file system should update its state. This can be used, for instance, to convert a read-only file system to read-write. The current attributes for a mounted file system can be fetched by specifying <span class="define">MNT_GETARGS</span>. If neither <span class="define">MNT_UPDATE</span> or <span class="define">MNT_GETARGS</span> are specified, a new file system will attempted to be mounted.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">VFS_START</b>(<i class="farg">mp</i>, <i class="farg">flags</i>)</dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
Make the file system specified by the mount structure <i class="farg">mp</i> operational. The argument <i class="farg">flags</i> is a set of flags for controlling the operation of <b class="fname">VFS_START</b>(). This function is invoked after <b class="fname">VFS_MOUNT</b>() and before the first access to the file system.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">VFS_UNMOUNT</b>(<i class="farg">mp</i>, <i class="farg">mntflags</i>)</dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
Unmount a file system specified by the mount structure <i class="farg">mp</i>. <b class="fname">VFS_UNMOUNT</b>() performs any file system type specific operations required before the file system is unmounted, such are flushing buffers. If <span class="define">MNT_FORCE</span> is specified in the flags <i class="farg">mntflags</i> then open files are forcibly closed. The function also deallocates space associated with data structure that were allocated for the file system when it was mounted.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">VFS_ROOT</b>(<i class="farg">mp</i>, <i class="farg">vpp</i>)</dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
Get the root vnode of the file system specified by the mount structure <i class="farg">mp</i>. The vnode is returned in the address given by <i class="farg">vpp</i>. This function is used by the pathname translation algorithms when a vnode that has been covered by a mounted file system is encountered. While resolving the pathname, the pathname translation algorithm will have to go through the directory tree in the file system associated with that mount point and therefore requires the root vnode of the file system.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">VFS_QUOTACTL</b>(<i class="farg">mp</i>, <i class="farg">args</i>)</dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
Query/modify user space quotas for the file system specified by the mount structure <i class="farg">mp</i>. The argument structure provides the operation ID and arguments to perform. This is the same interface as documented in <a class="link-man" href="../2/__quotactl">__quotactl(2)</a> except that the file system argument has been resolved. All <a class="link-man" href="../9/copyin">copyin(9)</a> and <a class="link-man" href="../9/copyout">copyout(9)</a> processing is handled by code above the file system.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">VFS_STATVFS</b>(<i class="farg">mp</i>, <i class="farg">sbp</i>)</dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
Get file system statistics for the file system specified by the mount structure <i class="farg">mp</i>. A statvfs structure filled with the statistics is returned in <i class="farg">sbp</i>. <b class="fname">VFS_STATVFS</b>() is the file system type specific implementation of the <a class="link-man" href="../2/statvfs">statvfs(2)</a> and <a class="link-man" href="../2/fstatvfs">fstatvfs(2)</a> system calls.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">VFS_SYNC</b>(<i class="farg">mp</i>, <i class="farg">waitfor</i>, <i class="farg">cred</i>)</dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
Flush file system I/O buffers for the file system specified by the mount structure <i class="farg">mp</i>. The <i class="farg">waitfor</i> argument indicates whether a partial flush or complete flush should be performed. The argument <i class="farg">cred</i> specifies the calling credentials. <b class="fname">VFS_SYNC</b>() does not provide any return value since the operation can never fail.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">VFS_VGET</b>(<i class="farg">mp</i>, <i class="farg">ino</i>, <i class="farg">vpp</i>)</dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
Get vnode for a file system type specific file id <i class="farg">ino</i> for the file system specified by the mount structure <i class="farg">mp</i>. The vnode is returned in the address specified <i class="farg">vpp</i>. The function is optional for file systems which have a unique id number for every file in the file system. It is used internally by the UFS file system and also by the NFSv3 server to implement the READDIRPLUS NFS call. If the file system does not support this function, it should return <span class="errno">EOPNOTSUPP</span>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">VFS_LOADVNODE</b>(<i class="farg">mp</i>, <i class="farg">vp</i>, <i class="farg">key</i>, <i class="farg">key_len</i>, <i class="farg">new_key</i>)</dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
Initialise the vnode <i class="farg">vp</i> with the file identified by the arguments <i class="farg">key</i> and <i class="farg">key_len</i> for the file system specified by the mount structure <i class="farg">mp</i>.<p>
The new key is returned in the address specified by <i class="farg">new_key</i>.<p>
Caller of this function assures no other thread will try to load this file.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">VFS_NEWVNODE</b>(<i class="farg">mp</i>, <i class="farg">dvp</i>, <i class="farg">vp</i>, <i class="farg">vap</i>, <i class="farg">cred</i>, <i class="farg">key_len</i>, <i class="farg">new_key</i>)</dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
Initialise the vnode <i class="farg">vp</i> with a new file for the file system specified by the mount structure <i class="farg">mp</i>.<p>
The argument <i class="farg">dvp</i> points to the directory to create the file in.<p>
The argument <i class="farg">vap</i> points to the attributes for the file to create.<p>
The argument <i class="farg">cred</i> holds the credentials for the file to create.<p>
The key for the file is returned in the addresses specified by <i class="farg">key_len</i> and <i class="farg">new_key</i>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">VFS_FHTOVP</b>(<i class="farg">mp</i>, <i class="farg">fhp</i>, <i class="farg">vpp</i>)</dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
Get the vnode for the file handle <i class="farg">fhp</i> in the file system specified by the mount structure <i class="farg">mp</i>. The locked vnode is returned in <i class="farg">vpp</i>.<p>
When exporting, the call to <b class="fname">VFS_FHTOVP</b>() should follow a call to <b class="fname">netexport_check</b>(), which checks if the file is accessible to the client.<p>
If file handles are not supported by the file system, this function must return <span class="errno">EOPNOTSUPP</span>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">VFS_VPTOFH</b>(<i class="farg">vp</i>, <i class="farg">fhp</i>, <i class="farg">fh_size</i>)</dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
Get a file handle for the vnode specified by <i class="farg">vp</i>. The file handle is returned in <i class="farg">fhp</i>. The contents of the file handle are defined by the file system and are not examined by any other subsystems. It should contain enough information to uniquely identify a file within the file system as well as noticing when a file has been removed and the file system resources have been recycled for a new file.<p>
The parameter <i class="farg">fh_size</i> points to the container size for the file handle. This parameter should be updated to the size of the finished file handle. Note that it is legal to call this function with <i class="farg">fhp</i> set to <span class="define">NULL</span> in case <i class="farg">fh_size</i> is zero. In case <i class="farg">fh_size</i> indicates a storage space too small, the storage space required for the file handle corresponding to <i class="farg">vp</i> should be filled in and <span class="errno">E2BIG</span> should be returned.<p>
If file handles are not supported by the file system, this function must return <span class="errno">EOPNOTSUPP</span>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">VFS_SNAPSHOT</b>(<i class="farg">mp</i>, <i class="farg">vp</i>, <i class="farg">ts</i>)</dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
Take a snapshot of the file system specified by the mount structure <i class="farg">mp</i> and make it accessible through the locked vnode <i class="farg">vp</i>. If <i class="farg">ts</i> is not <span class="define">NULL</span> it will receive the time this snapshot was taken. If the file system does not support this function, it should return <span class="errno">EOPNOTSUPP</span>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">VFS_SUSPENDCTL</b>(<i class="farg">mp</i>, <i class="farg">cmd</i>)</dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
Suspend or resume all operations on this file system. <i class="farg">cmd</i> is either <span class="define">SUSPEND_SUSPEND</span> to suspend or <span class="define">SUSPEND_RESUME</span> to resume operations. If the file system does not support this function, it should return <span class="errno">EOPNOTSUPP</span>.</dd>
</dl>
</div>
<div class="section">
<h1 id="x434f4445205245464552454e434553">CODE REFERENCES</h1> The vfs operations are implemented within the files <i class="file">sys/kern/vfs_subr.c</i> and <i class="file">sys/kern/vfs_init.c</i>.</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../9/intro">intro(9)</a>, <a class="link-man" href="../9/namei">namei(9)</a>, <a class="link-man" href="../9/vfs">vfs(9)</a>, <a class="link-man" href="../9/vfssubr">vfssubr(9)</a>, <a class="link-man" href="../9/vnode">vnode(9)</a>, <a class="link-man" href="../9/vnodeops">vnodeops(9)</a></div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> The vfs operations vector, its functions and the corresponding macros appeared in <span class="unix">4.3BSD</span>.</div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
July 12, 2015</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
</html>

