<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/../4/strict.dtd">
>
<head>
<meta http-equiv="Content-Type" content="te../; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="../style.css" type="text/css" media="all">
<title>
IEEE80211(9)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
IEEE80211(9)</td>
<td class="head-vol" align="center">
Kernel Developer's Manual</td>
<td class="head-rtitle" align="right">
IEEE80211(9)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">ieee80211_ifattach</b>, <b class="name">ieee80211_ifdetach</b>, <b class="name">ieee80211_mhz2ieee</b>, <b class="name">ieee80211_chan2ieee</b>, <b class="name">ieee80211_ieee2mhz</b>, <b class="name">ieee80211_media_init</b>, <b class="name">ieee80211_media_change</b>, <b class="name">ieee80211_media_status</b>, <b class="name">ieee80211_watchdog</b>, <b class="name">ieee80211_setmode</b>, <b class="name">ieee80211_chan2mode</b>, <b class="name">ieee80211_rate2media</b>, <b class="name">ieee80211_media2rate</b> &#8212; <span class="desc">core 802.11 network stack functions</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="includes">#include &lt;<a class="link-includes">net80211/ieee80211_var.h</a>&gt;</b><br>
<b class="includes">#include &lt;<a class="link-includes">net80211/ieee80211_proto.h</a>&gt;</b><p>
<i class="ftype">void</i><br>
<b class="fname">ieee80211_ifattach</b>(<i class="farg" style="white-space:nowrap;">struct ieee80211com *ic</i>);<p>
<i class="ftype">void</i><br>
<b class="fname">ieee80211_ifdetach</b>(<i class="farg" style="white-space:nowrap;">struct ieee80211com *ic</i>);<p>
<i class="ftype">u_int</i><br>
<b class="fname">ieee80211_mhz2ieee</b>(<i class="farg" style="white-space:nowrap;">u_int freq</i>, <i class="farg" style="white-space:nowrap;">u_int flags</i>);<p>
<i class="ftype">u_int</i><br>
<b class="fname">ieee80211_chan2ieee</b>(<i class="farg" style="white-space:nowrap;">struct ieee80211com *ic</i>, <i class="farg" style="white-space:nowrap;">struct ieee80211_channel *c</i>);<p>
<i class="ftype">u_int</i><br>
<b class="fname">ieee80211_ieee2mhz</b>(<i class="farg" style="white-space:nowrap;">u_int chan</i>, <i class="farg" style="white-space:nowrap;">u_int flags</i>);<p>
<i class="ftype">void</i><br>
<b class="fname">ieee80211_media_init</b>(<i class="farg">struct ieee80211com *ic</i>, <i class="farg">ifm_change_cb_t media_change</i>, <i class="farg">ifm_stat_cb_t media_stat</i>);<p>
<i class="ftype">int</i><br>
<b class="fname">ieee80211_media_change</b>(<i class="farg" style="white-space:nowrap;">struct ifnet *ifp</i>);<p>
<i class="ftype">void</i><br>
<b class="fname">ieee80211_media_status</b>(<i class="farg" style="white-space:nowrap;">struct ifnet *ifp</i>, <i class="farg" style="white-space:nowrap;">struct ifmediareq *imr</i>);<p>
<i class="ftype">void</i><br>
<b class="fname">ieee80211_watchdog</b>(<i class="farg" style="white-space:nowrap;">struct ieee80211com *ic</i>);<p>
<i class="ftype">int</i><br>
<b class="fname">ieee80211_setmode</b>(<i class="farg" style="white-space:nowrap;">struct ieee80211com *ic</i>, <i class="farg" style="white-space:nowrap;">enum ieee80211_phymode mode</i>);<p>
<i class="ftype">enum ieee80211_phymode</i><br>
<b class="fname">ieee80211_chan2mode</b>(<i class="farg">struct ieee80211com *ic</i>, <i class="farg">struct ieee80211_channel *chan</i>);<p>
<i class="ftype">int</i><br>
<b class="fname">ieee80211_rate2media</b>(<i class="farg">struct ieee80211com *ic</i>, <i class="farg">int rate</i>, <i class="farg">enum ieee80211_phymode mode</i>);<p>
<i class="ftype">int</i><br>
<b class="fname">ieee80211_media2rate</b>(<i class="farg" style="white-space:nowrap;">int mword</i>);</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> The <b class="name">ieee80211</b> collection of functions are used to manage wireless network interfaces in the system which use the system's software 802.11 network stack. Most of these functions require that attachment to the stack is performed before calling. Several utility functions are also provided; these are safe to call from any driver without prior initialization.<p>
The <b class="fname">ieee80211_ifattach</b>() function attaches the wireless network interface <i class="farg">ic</i> to the 802.11 network stack layer. This function must be called before using any of the <b class="name">ieee80211</b> functions which need to store driver state across invocations. This function also performs Ethernet and BPF attachment (by calling <b class="fname">ether_ifattach</b>() and <b class="fname">bpfattach2</b>()) on behalf of the caller.<p>
The <b class="fname">ieee80211_ifdetach</b>() function frees any <b class="name">ieee80211</b> structures associated with the driver, and performs Ethernet and BPF detachment on behalf of the caller.<p>
The <b class="fname">ieee80211_mhz2ieee</b>() utility function converts the frequency <i class="farg">freq</i> (specified in MHz) to an IEEE 802.11 channel number. The <i class="farg">flags</i> argument is a hint which specifies whether the frequency is in the 2GHz ISM band (<span class="type">IEEE80211_CHAN_2GHZ</span>) or the 5GHz band (<span class="type">IEEE80211_CHAN_5GHZ</span>); appropriate clipping of the result is then performed.<p>
The <b class="fname">ieee80211_chan2ieee</b>() function converts the channel specified in <i class="farg">*c</i> to an IEEE channel number for the driver <i class="farg">ic</i>. If the conversion would be invalid, an error message is printed to the system console. This function REQUIRES that the driver is hooked up to the <b class="name">ieee80211</b> subsystem.<p>
The <b class="fname">ieee80211_ieee2mhz</b>() utility function converts the IEEE channel number <i class="ftype">chan</i> to a frequency (in MHz). The <i class="farg">flags</i> argument is a hint which specifies whether the frequency is in the 2GHz ISM band (<span class="type">IEEE80211_CHAN_2GHZ</span>) or the 5GHz band (<span class="type">IEEE80211_CHAN_5GHZ</span>); appropriate clipping of the result is then performed.<p>
The <b class="fname">ieee80211_media_init</b>() function initializes media data structures used by the <span class="type">ifmedia</span> interface for the driver <i class="farg">ic</i>. It must be called by the driver after calling <b class="fname">ieee80211_ifattach</b>() and before calling most <b class="name">ieee80211</b> functions. The <i class="farg">media_change</i> and <i class="farg">media_stat</i> arguments specify helper functions which will be invoked by the <span class="type">ifmedia</span> framework when the user changes or queries media options, using a command such as <a class="link-man" href="../8/ifconfig">ifconfig(8)</a>.<p>
The <b class="fname">ieee80211_media_status</b>() and <b class="fname">ieee80211_media_change</b>() functions are device-independent handlers for <span class="type">ifmedia</span> commands and are not intended to be called directly.<p>
The <b class="fname">ieee80211_watchdog</b>() function is intended to be called from a driver's <b class="var">if_watchdog</b> routine. It is used to perform periodic cleanup of state within the software 802.11 stack, as well as timing out scans.<p>
The <b class="fname">ieee80211_setmode</b>() function is called from within the 802.11 stack to change the mode of the driver's PHY; it is not intended to be called directly.<p>
The <b class="fname">ieee80211_chan2mode</b>() function returns the PHY mode required for use with the channel <i class="farg">chan</i> on the device <i class="farg">ic</i>. This is typically used when selecting a rate set, to be advertised in beacons, for example.<p>
The <b class="fname">ieee80211_rate2media</b>() function converts the bit rate <i class="farg">rate</i> (measured in units of 0.5Mbps) to an <span class="type">ifmedia</span> sub-type, for the device <i class="farg">ic</i> running in PHY mode <i class="farg">mode</i>. The <b class="fname">ieee80211_media2rate</b>() performs the reverse of this conversion, returning the bit rate (in 0.5Mbps units) corresponding to an <span class="type">ifmedia</span> sub-type.</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../9/ieee80211_crypto">ieee80211_crypto(9)</a>, <a class="link-man" href="../9/ieee80211_input">ieee80211_input(9)</a>, <a class="link-man" href="../9/ieee80211_ioctl">ieee80211_ioctl(9)</a>, <a class="link-man" href="../9/ieee80211_node">ieee80211_node(9)</a>, <a class="link-man" href="../9/ieee80211_output">ieee80211_output(9)</a>, <a class="link-man" href="../9/ieee80211_proto">ieee80211_proto(9)</a>, <a class="link-man" href="../9/ieee80211_radiotap">ieee80211_radiotap(9)</a></div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> The <b class="name">ieee80211</b> series of functions first appeared in <span class="unix">NetBSD&#160;1.5</span>, and were later ported to <span class="unix">FreeBSD&#160;4.6</span>.</div>
<div class="section">
<h1 id="x415554484f5253">AUTHORS</h1> <span class="author"></span>This man page was written by <span class="author">Bruce M. Simpson</span> &#60;<a class="link-mail" href="mailto:bms@FreeBSD.org">bms@FreeBSD.org</a>&#62; and <span class="author">Darron Broad</span> &#60;<a class="link-mail" href="mailto:darron@kewl.org">darron@kewl.org</a>&#62;.</div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
September 12, 2006</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
<>

