<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="../style.css" type="text/css" media="all">
<title>
BOOTHOWTO(9)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
BOOTHOWTO(9)</td>
<td class="head-vol" align="center">
Kernel Developer's Manual</td>
<td class="head-rtitle" align="right">
BOOTHOWTO(9)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">boothowto</b>, <b class="name">BOOT_FLAG</b> &#8212; <span class="desc">flags passed to kernel during boot or shutdown</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="includes">#include &lt;<a class="link-includes">sys/reboot.h</a>&gt;</b><br>
<b class="includes">#include &lt;<a class="link-includes">sys/systm.h</a>&gt;</b><p>
<span class="type">extern int boothowto;</span><p>
<b class="includes">#include &lt;<a class="link-includes">sys/boot_flag.h</a>&gt;</b><p>
<span class="type">#define BOOT_FLAG(arg, retval) ...</span></div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> The <b class="var">boothowto</b> variable contains flags passed to the kernel by the boot loader (see <a class="link-man" href="../8/boot">boot(8)</a>), or the <a class="link-man" href="../2/reboot">reboot(2)</a> system call. The value is interpreted as a bit mask, with bits defined by the &#8220;<span class="symb">RB_</span>*&#8221; and &#8220;<span class="symb">AB_</span>*&#8221; symbols in <b class="includes">&lt;<a class="link-includes">sys/reboot.h</a>&gt;</b>. The value is made available via the <a class="link-man" href="../7/sysctl">sysctl(7)</a> variable <b class="var">kern.boothowto</b>.<p>
The <span class="define">BOOT_FLAG</span> macro defined in <b class="includes">&lt;<a class="link-includes">sys/boot_flag.h</a>&gt;</b> is used by many boot loaders to convert command line options into <b class="var">boothowto</b> flags. Note that not all boot loaders use this macro, and some boot loaders may have incompatible options.<p>
Where possible, flags set by the <a class="link-man" href="../2/reboot">reboot(2)</a> system call will be passed to the new kernel after a reboot; the extent to which this is possible is machine dependent.<p>
In the following tables, each flag is listed with its symbolic name, the corresponding numeric value defined in <b class="includes">&lt;<a class="link-includes">sys/reboot.h</a>&gt;</b>, and the option letter (if any) understood by the <span class="define">BOOT_FLAG</span> macro.<div class="subsection">
<h2 id="x466c61677320746861742061666665637420626f6f74696e67206f72207368757474696e6720646f776e">Flags that affect booting or shutting down</h2> The following flags affect actions taken during system boot or shutdown.<table style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-col">
<col style="width: 12.00ex;">
<col style="width: 10.00ex;">
<col style="min-width: 3.00ex;">
<tbody>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
<span class="define">RB_AUTOBOOT</span></td>
<td class="list-col" style="margin-top: 1.00em;">
<code class="lit">0</code></td>
<td class="list-col" style="margin-top: 1.00em;">
</td>
<td class="list-col" style="margin-top: 1.00em;">
The default if no other flags are set. Causes the system to boot in the normal way.</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
<span class="define">RB_ASKNAME</span></td>
<td class="list-col" style="margin-top: 1.00em;">
<code class="lit">0x00000001</code></td>
<td class="list-col" style="margin-top: 1.00em;">
<b class="flag">&#45;a</b></td>
<td class="list-col" style="margin-top: 1.00em;">
This flag causes various parts of the system to prompt:<ul style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-bul">
<li class="list-bul" style="margin-top: 0.00em;">
The boot loader may prompt for the name or location of the kernel to be booted.</li>
<li class="list-bul" style="margin-top: 0.00em;">
The kernel will prompt for the root file system device.</li>
<li class="list-bul" style="margin-top: 0.00em;">
The kernel will prompt for the root file system type.</li>
<li class="list-bul" style="margin-top: 0.00em;">
The kernel will prompt for the location of the dump device.</li>
<li class="list-bul" style="margin-top: 0.00em;">
The kernel will prompt for the path to the <a class="link-man" href="../8/init">init(8)</a> program.</li>
</ul>
Some subsystems set this flag when they are unable to automatically make a decision.</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
<span class="define">RB_SINGLE</span></td>
<td class="list-col" style="margin-top: 1.00em;">
<code class="lit">0x00000002</code></td>
<td class="list-col" style="margin-top: 1.00em;">
<b class="flag">&#45;s</b></td>
<td class="list-col" style="margin-top: 1.00em;">
Boot in single-user mode. If this flag is set, the kernel passes the <b class="flag">&#45;s</b> option to <a class="link-man" href="../8/init">init(8)</a>.</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
<span class="define">RB_NOSYNC</span></td>
<td class="list-col" style="margin-top: 1.00em;">
<code class="lit">0x00000004</code></td>
<td class="list-col" style="margin-top: 1.00em;">
</td>
<td class="list-col" style="margin-top: 1.00em;">
If this flag is set, then some parts of the shutdown process will be less graceful than usual:<ul style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-bul">
<li class="list-bul" style="margin-top: 0.00em;">
Disks will not be synced (see <a class="link-man" href="../2/sync">sync(2)</a> and <a class="link-man" href="../9/cpu_reboot">cpu_reboot(9)</a>).</li>
<li class="list-bul" style="margin-top: 0.00em;">
Devices will not be detached (see <a class="link-man" href="../9/autoconf">autoconf(9)</a>).</li>
<li class="list-bul" style="margin-top: 0.00em;">
File systems will not be unmounted (see <a class="link-man" href="../9/cpu_reboot">cpu_reboot(9)</a>, and <a class="link-man" href="../9/vfs_shutdown">vfs_shutdown(9)</a>).</li>
<li class="list-bul" style="margin-top: 0.00em;">
The time of day clock will not be set (see <a class="link-man" href="../9/resettodr">resettodr(9)</a>).</li>
</ul>
</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
<span class="define">RB_HALT</span></td>
<td class="list-col" style="margin-top: 1.00em;">
<code class="lit">0x00000008</code></td>
<td class="list-col" style="margin-top: 1.00em;">
<b class="flag">&#45;b</b></td>
<td class="list-col" style="margin-top: 1.00em;">
If this flag is set, then <a class="link-man" href="../2/reboot">reboot(2)</a> will cause the system to halt instead of rebooting. This flag may be set at boot time, and cannot be cleared by <a class="link-man" href="../2/reboot">reboot(2)</a>.</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
<span class="define">RB_INITNAME</span></td>
<td class="list-col" style="margin-top: 1.00em;">
<code class="lit">0x00000010</code></td>
<td class="list-col" style="margin-top: 1.00em;">
</td>
<td class="list-col" style="margin-top: 1.00em;">
This flag is obsolete. It was previously used to cause the kernel to prompt for the name of the <a class="link-man" href="../8/init">init(8)</a> program, but that function is now controlled by the <span class="define">RB_ASKNAME</span> flag.</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
<span class="define">RB_KDB</span></td>
<td class="list-col" style="margin-top: 1.00em;">
<code class="lit">0x00000040</code></td>
<td class="list-col" style="margin-top: 1.00em;">
<b class="flag">&#45;d</b></td>
<td class="list-col" style="margin-top: 1.00em;">
Gives control to a kernel debugger early in the boot sequence. See <a class="link-man" href="../4/ddb">ddb(4)</a>, &#8220;options KGDB&#8221; in <a class="link-man" href="../4/options">options(4)</a>, and <a class="link-man" href="../9/ipkdb">ipkdb(9)</a>.</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
<span class="define">RB_RDONLY</span></td>
<td class="list-col" style="margin-top: 1.00em;">
<code class="lit">0x00000080</code></td>
<td class="list-col" style="margin-top: 1.00em;">
</td>
<td class="list-col" style="margin-top: 1.00em;">
This flag is deprecated. It previously caused the kernel to mount the root file system in read-only mode, but now that is the default, and this flag has no effect.</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
<span class="define">RB_DUMP</span></td>
<td class="list-col" style="margin-top: 1.00em;">
<code class="lit">0x00000100</code></td>
<td class="list-col" style="margin-top: 1.00em;">
</td>
<td class="list-col" style="margin-top: 1.00em;">
Causes the kernel to dump memory to the dump device during shutdown. See <a class="link-man" href="../8/savecore">savecore(8)</a>, <a class="link-man" href="../9/cpu_reboot">cpu_reboot(9)</a>, and <a class="link-man" href="../9/dumpsys">dumpsys(9)</a>.</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
<span class="define">RB_MINIROOT</span></td>
<td class="list-col" style="margin-top: 1.00em;">
<code class="lit">0x00000200</code></td>
<td class="list-col" style="margin-top: 1.00em;">
<b class="flag">&#45;m</b></td>
<td class="list-col" style="margin-top: 1.00em;">
This flag informs the kernel that a mini-root file system is present in memory. See <a class="link-man" href="../4/md">md(4)</a>, and <a class="link-man" href="../8/mdsetimage">mdsetimage(8)</a>.</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
<span class="define">RB_STRING</span></td>
<td class="list-col" style="margin-top: 1.00em;">
<code class="lit">0x00000400</code></td>
<td class="list-col" style="margin-top: 1.00em;">
</td>
<td class="list-col" style="margin-top: 1.00em;">
This flag indicates that a boot string is present. The string may be provided by <a class="link-man" href="../2/reboot">reboot(2)</a> and will be passed to the boot loader if possible.</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
<span class="define">RB_POWERDOWN</span></td>
<td class="list-col" style="margin-top: 1.00em;">
<code class="lit">(RB_HALT|0x800)</code></td>
<td class="list-col" style="margin-top: 1.00em;">
</td>
<td class="list-col" style="margin-top: 1.00em;">
This flag is used in conjunction with <span class="define">RB_HALT</span>. If this flag is set, then then system will be powered down if possible. If powerdown is not supported, then the system will halt.</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
<span class="define">RB_USERCONF</span></td>
<td class="list-col" style="margin-top: 1.00em;">
<code class="lit">0x00001000</code></td>
<td class="list-col" style="margin-top: 1.00em;">
<b class="flag">&#45;c</b></td>
<td class="list-col" style="margin-top: 1.00em;">
This flag causes the kernel to invoke the <a class="link-man" href="../4/userconf">userconf(4)</a> device configuration manager early in the boot sequence.</td>
</tr>
</tbody>
</table>
</div>
<div class="subsection">
<h2 id="x466c61677320746861742061666665637420766572626f73697479">Flags that affect verbosity</h2> The following flags affect the verbosity of messages printed by the kernel. These flags are used by several functions described in <a class="link-man" href="../9/kprintf">kprintf(9)</a> to control whether output is sent to the console, the system log, both, or neither. The use of flags that increase verbosity simultaneously with the use of flags that decrease verbosity, is not well defined.<table style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-col">
<col style="width: 12.00ex;">
<col style="width: 10.00ex;">
<col style="min-width: 3.00ex;">
<tbody>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
<span class="define">AB_NORMAL</span></td>
<td class="list-col" style="margin-top: 1.00em;">
<code class="lit">0</code></td>
<td class="list-col" style="margin-top: 1.00em;">
</td>
<td class="list-col" style="margin-top: 1.00em;">
The default, if none of the other <span class="define">AB_*</span> flags is set, is that ordinary kernel messages are sent both to the console and to the system log.</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
<span class="define">AB_QUIET</span></td>
<td class="list-col" style="margin-top: 1.00em;">
<code class="lit">0x00010000</code></td>
<td class="list-col" style="margin-top: 1.00em;">
<b class="flag">&#45;q</b></td>
<td class="list-col" style="margin-top: 1.00em;">
Boot quietly. Ordinary kernel messages are sent to the system log, but not to the console. Messages printed with <a class="link-man" href="../9/aprint_naive">aprint_naive(9)</a> are sent to the console, but not to the system log.</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
<span class="define">AB_VERBOSE</span></td>
<td class="list-col" style="margin-top: 1.00em;">
<code class="lit">0x00020000</code></td>
<td class="list-col" style="margin-top: 1.00em;">
<b class="flag">&#45;v</b></td>
<td class="list-col" style="margin-top: 1.00em;">
Boot verbosely. Some messages will be printed that would otherwise not be printed. Both ordinary kernel messages, and messages printed with <a class="link-man" href="../9/aprint_verbose">aprint_verbose(9)</a>, will be sent both to the console and to the system log. If this flag is not set, then messages printed with <a class="link-man" href="../9/aprint_verbose">aprint_verbose(9)</a> will be sent only to the system log.</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
<span class="define">AB_SILENT</span></td>
<td class="list-col" style="margin-top: 1.00em;">
<code class="lit">0x00040000</code></td>
<td class="list-col" style="margin-top: 1.00em;">
<b class="flag">&#45;z</b></td>
<td class="list-col" style="margin-top: 1.00em;">
Boot silently. Most kernel messages will be sent only to the system log, not to the console. The <b class="fname">aprint_*</b>() functions display a spinning symbol on the console.</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
<span class="define">AB_DEBUG</span></td>
<td class="list-col" style="margin-top: 1.00em;">
<code class="lit">0x00080000</code></td>
<td class="list-col" style="margin-top: 1.00em;">
<b class="flag">&#45;x</b></td>
<td class="list-col" style="margin-top: 1.00em;">
Boot with debug messages.</td>
</tr>
</tbody>
</table>
</div>
<div class="subsection">
<h2 id="x4d616368696e651e646570656e64656e7420666c616773">Machine-dependent flags</h2> The following flags have machine-dependent meanings.<table style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-col">
<col style="width: 12.00ex;">
<col style="width: 10.00ex;">
<col style="min-width: 3.00ex;">
<tbody>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
<span class="define">RB_MD1</span></td>
<td class="list-col" style="margin-top: 1.00em;">
<code class="lit">0x10000000</code></td>
<td class="list-col" style="margin-top: 1.00em;">
<b class="flag">&#45;1</b></td>
<td class="list-col" style="margin-top: 1.00em;">
Some ports use this flag to disable multiprocessor mode, making them use only a single CPU. The zaurus port uses this flag to enable the serial console.</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
<span class="define">RB_MD2</span></td>
<td class="list-col" style="margin-top: 1.00em;">
<code class="lit">0x20000000</code></td>
<td class="list-col" style="margin-top: 1.00em;">
<b class="flag">&#45;2</b></td>
<td class="list-col" style="margin-top: 1.00em;">
The i386 and amd64 ports use this flag to disable <a class="link-man" href="../4/acpi">acpi(4)</a>.</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
<span class="define">RB_MD3</span></td>
<td class="list-col" style="margin-top: 1.00em;">
<code class="lit">0x40000000</code></td>
<td class="list-col" style="margin-top: 1.00em;">
<b class="flag">&#45;3</b></td>
<td class="list-col" style="margin-top: 1.00em;">
This flag is currently not used by any ports.</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
<span class="define">RB_MD4</span></td>
<td class="list-col" style="margin-top: 1.00em;">
<code class="lit">0x80000000</code></td>
<td class="list-col" style="margin-top: 1.00em;">
<b class="flag">&#45;4</b></td>
<td class="list-col" style="margin-top: 1.00em;">
This flag is currently not used by any ports.</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../2/reboot">reboot(2)</a>, <a class="link-man" href="../4/ddb">ddb(4)</a>, <a class="link-man" href="../4/userconf">userconf(4)</a>, <a class="link-man" href="../7/sysctl">sysctl(7)</a>, <a class="link-man" href="../8/boot">boot(8)</a>, <a class="link-man" href="../8/crash">crash(8)</a>, <a class="link-man" href="../8/init">init(8)</a>, <a class="link-man" href="../8/reboot">reboot(8)</a>, <a class="link-man" href="../8/savecore">savecore(8)</a>, <a class="link-man" href="../8/sync">sync(8)</a>, <a class="link-man" href="../9/cpu_reboot">cpu_reboot(9)</a>, <a class="link-man" href="../9/kprintf">kprintf(9)</a></div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> The <b class="var">boothowto</b> variable appeared in <span class="unix">4.0BSD</span>. The <span class="symb">BOOT_FLAG</span> macro appeared in <span class="unix">NetBSD&#160;1.6</span>.<p>
The <span class="define">RB_DFLTROOT</span> option is now <span class="emph">obsolete</span>.</div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
September 11, 2009</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
</html>

