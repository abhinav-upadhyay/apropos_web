<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="../style.css" type="text/css" media="all">
<title>
MICROTIME(9)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
MICROTIME(9)</td>
<td class="head-vol" align="center">
Kernel Developer's Manual</td>
<td class="head-rtitle" align="right">
MICROTIME(9)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">bintime</b>, <b class="name">getbintime</b>, <b class="name">microtime</b>, <b class="name">getmicrotime</b>, <b class="name">nanotime</b>, <b class="name">getnanotime</b> &#8212; <span class="desc">get the current time</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="includes">#include &lt;<a class="link-includes">sys/time.h</a>&gt;</b><p>
<i class="ftype">void</i><br>
<b class="fname">bintime</b>(<i class="farg">struct bintime *bt</i>);<p>
<i class="ftype">void</i><br>
<b class="fname">getbintime</b>(<i class="farg">struct bintime *bt</i>);<p>
<i class="ftype">void</i><br>
<b class="fname">microtime</b>(<i class="farg">struct timeval *tv</i>);<p>
<i class="ftype">void</i><br>
<b class="fname">getmicrotime</b>(<i class="farg">struct timeval *tv</i>);<p>
<i class="ftype">void</i><br>
<b class="fname">nanotime</b>(<i class="farg">struct timespec *tsp</i>);<p>
<i class="ftype">void</i><br>
<b class="fname">getnanotime</b>(<i class="farg">struct timespec *tsp</i>);</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> The <b class="fname">bintime</b>() and <b class="fname">getbintime</b>() functions store the system time as a <span class="type">struct bintime</span> at the addresses specified by <i class="farg">bt</i>. The <b class="fname">microtime</b>() and <b class="fname">getmicrotime</b>() functions perform the same utility, but record the time as a <span class="type">struct timeval</span> instead. Similarly the <b class="fname">nanotime</b>() and <b class="fname">getnanotime</b>() functions store the time as a <span class="type">struct timespec</span>. The structures are described in <a class="link-man" href="../3/timeval">timeval(3)</a>.<p>
The <b class="fname">bintime</b>(), <b class="fname">microtime</b>(), and <b class="fname">nanotime</b>() functions always query the timecounter to return the current time as precisely as possible. Whereas <b class="fname">getbintime</b>(), <b class="fname">getmicrotime</b>(), and <b class="fname">getnanotime</b>() functions are abstractions which return a less precise, but faster to obtain, time.<p>
The intent of the <b class="fname">getbintime</b>(), <b class="fname">getmicrotime</b>(), and <b class="fname">getnanotime</b>() functions is to enforce the user's preference for timer accuracy versus execution time. They should be used where a precision of 1/<span class="emph">HZ</span> (e.g., 10 msec on a 100<span class="emph">HZ</span> machine, see <a class="link-man" href="../9/hz">hz(9)</a>) is acceptable or where performance is priority.<p>
The system realtime clock is guaranteed to be monotonically increasing at all times. As such, all calls to these functions are guaranteed to return a system time greater than or equal to the system time returned in any previous calls. Comparable functions exist to retrieve the time elapsed since boot; see <a class="link-man" href="../9/microuptime">microuptime(9)</a>.</div>
<div class="section">
<h1 id="x434f4445205245464552454e434553">CODE REFERENCES</h1> The implementation of the <b class="fname">microtime</b>() family of functions is in <i class="file">sys/kern/kern_tc.c</i> as a part of the <a class="link-man" href="../9/timecounter">timecounter(9)</a> framework.<p>
The implementation of the time counter sources used by the <a class="link-man" href="../9/timecounter">timecounter(9)</a> is machine dependent, hence its location in the source code tree varies from architecture to architecture.</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../2/settimeofday">settimeofday(2)</a>, <a class="link-man" href="../9/bintime_add">bintime_add(9)</a>, <a class="link-man" href="../9/inittodr">inittodr(9)</a>, <a class="link-man" href="../9/time_second">time_second(9)</a>, <a class="link-man" href="../9/tvtohz">tvtohz(9)</a></div>
<div class="section">
<h1 id="x415554484f5253">AUTHORS</h1> This manual page was written by <span class="author">Jeremy Cooper</span> and <span class="author">Kelly Yancey</span> &#60;<a class="link-mail" href="mailto:kbyanc@posi.net">kbyanc@posi.net</a>&#62;.</div>
<div class="section">
<h1 id="x43415645415453">CAVEATS</h1> Despite the guarantee that the system realtime clock will always be monotonically increasing, it is always possible for the system clock to be manually reset by the system administrator to any date.</div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
May 13, 2013</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
</html>

