<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="../style.css" type="text/css" media="all">
<title>
GENFS(9)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
GENFS(9)</td>
<td class="head-vol" align="center">
Kernel Developer's Manual</td>
<td class="head-rtitle" align="right">
GENFS(9)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">genfs</b> &#8212; <span class="desc">genfs routines</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="includes">#include &lt;<a class="link-includes">miscfs/genfs/genfs.h</a>&gt;</b><p>
<i class="ftype">int</i><br>
<b class="fname">genfs_can_access</b>(<i class="farg" style="white-space:nowrap;">enum vtype type</i>, <i class="farg" style="white-space:nowrap;">mode_t file_mode</i>, <i class="farg" style="white-space:nowrap;">uid_t uid</i>, <i class="farg" style="white-space:nowrap;">gid_t gid</i>, <i class="farg" style="white-space:nowrap;">mode_t acc_mode</i>, <i class="farg" style="white-space:nowrap;">kauth_cred_t cred</i>);<p>
<i class="ftype">int</i><br>
<b class="fname">genfs_can_chflags</b>(<i class="farg" style="white-space:nowrap;">kauth_cred_t cred</i>, <i class="farg" style="white-space:nowrap;">enum vtype type</i>, <i class="farg" style="white-space:nowrap;">uid_t owner_uid</i>, <i class="farg" style="white-space:nowrap;">bool changing_sysflags</i>);<p>
<i class="ftype">int</i><br>
<b class="fname">genfs_can_chmod</b>(<i class="farg" style="white-space:nowrap;">enum vtype type</i>, <i class="farg" style="white-space:nowrap;">kauth_cred_t cred</i>, <i class="farg" style="white-space:nowrap;">uid_t cur_uid</i>, <i class="farg" style="white-space:nowrap;">gid_t cur_gid</i>, <i class="farg" style="white-space:nowrap;">mode_t new_mode</i>);<p>
<i class="ftype">int</i><br>
<b class="fname">genfs_can_chown</b>(<i class="farg" style="white-space:nowrap;">kauth_cred_t cred</i>, <i class="farg" style="white-space:nowrap;">uid_t cur_uid</i>, <i class="farg" style="white-space:nowrap;">gid_t cur_gid</i>, <i class="farg" style="white-space:nowrap;">uid_t new_uid</i>, <i class="farg" style="white-space:nowrap;">gid_t new_gid</i>);<p>
<i class="ftype">int</i><br>
<b class="fname">genfs_can_chtimes</b>(<i class="farg" style="white-space:nowrap;">vnode_t *vp</i>, <i class="farg" style="white-space:nowrap;">u_int vaflags</i>, <i class="farg" style="white-space:nowrap;">uid_t owner_uid</i>, <i class="farg" style="white-space:nowrap;">kauth_cred_t cred</i>);<p>
<i class="ftype">int</i><br>
<b class="fname">genfs_can_extattr</b>(<i class="farg" style="white-space:nowrap;">kauth_cred_t cred</i>, <i class="farg" style="white-space:nowrap;">int access_mode</i>, <i class="farg" style="white-space:nowrap;">vnode_t *vp</i>, <i class="farg" style="white-space:nowrap;">const char *attr</i>);<p>
<i class="ftype">int</i><br>
<b class="fname">genfs_can_sticky</b>(<i class="farg" style="white-space:nowrap;">kauth_cred_t cred</i>, <i class="farg" style="white-space:nowrap;">uid_t dir_uid</i>, <i class="farg" style="white-space:nowrap;">uid_t file_uid</i>);</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> The functions documented here are general routines for internal use in file systems to implement common policies for performing various operations. The developer must understand that these routines implement no system-wide policies and only take into account the object being accessed and the nominal values of the credentials accessing it.<p>
In other words, these functions are not meant to be called directly. They are intended to be used in <a class="link-man" href="../html9/kauth.html">kauth(9)</a> vnode scope authorization calls, for providing the fall-back file system decision.<p>
As a rule of thumb, code that looks like this is wrong:<p>
<pre style="margin-left: 5.00ex;" class="lit display">
error = genfs_can_foo(...); /* WRONG */</pre>
<p>
While code that looks like this is right:<p>
<pre style="margin-left: 5.00ex;" class="lit display">
error = kauth_authorize_vnode(..., genfs_can_foo(...));</pre>
</div>
<div class="section">
<h1 id="x46554e4354494f4e53">FUNCTIONS</h1><dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">genfs_can_access</b>(<i class="farg">enum vtype type</i>, <i class="farg">mode_t file_mode</i>, <i class="farg">uid_t uid</i>, <i class="farg">gid_t gid</i>, <i class="farg">mode_t acc_mode</i>, <i class="farg">kauth_cred_t cred</i>)</dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
Implements file access checking based on traditional Unix permissions.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">genfs_can_chflags</b>(<i class="farg">kauth_cred_t cred</i>, <i class="farg">enum vtype type</i>, <i class="farg">uid_t owner_uid</i>, <i class="farg">bool changing_sysflags</i>)</dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
Implements <a class="link-man" href="../html2/chflags.html">chflags(2)</a> policy.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">genfs_can_chmod</b>(<i class="farg">enum vtype type</i>, <i class="farg">kauth_cred_t cred</i>, <i class="farg">uid_t cur_uid</i>, <i class="farg">gid_t cur_gid</i>, <i class="farg">mode_t new_mode</i>)</dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
Implements <a class="link-man" href="../html2/chmod.html">chmod(2)</a> policy.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">genfs_can_chown</b>(<i class="farg">kauth_cred_t cred</i>, <i class="farg">uid_t cur_uid</i>, <i class="farg">gid_t cur_gid</i>, <i class="farg">uid_t new_uid</i>, <i class="farg">gid_t new_gid</i>)</dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
Implements <a class="link-man" href="../html2/chown.html">chown(2)</a> policy.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">genfs_can_chtimes</b>(<i class="farg">vnode_t *vp</i>, <i class="farg">u_int vaflags</i>, <i class="farg">uid_t owner_uid</i>, <i class="farg">kauth_cred_t cred</i>)</dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
Implements <a class="link-man" href="../html2/utimes.html">utimes(2)</a> policy.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">genfs_can_extattr</b>(<i class="farg">kauth_cred_t cred</i>, <i class="farg">int access_mode</i>, <i class="farg">vnode_t *vp</i>, <i class="farg">const char *attr</i>)</dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
Implements extended attributes access policy.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">genfs_can_sticky</b>(<i class="farg">kauth_cred_t cred</i>, <i class="farg">uid_t dir_uid</i>, <i class="farg">uid_t file_uid</i>)</dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
Implements rename and delete policy from sticky directories.</dd>
</dl>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../html9/kauth.html">kauth(9)</a></div>
<div class="section">
<h1 id="x415554484f5253">AUTHORS</h1> <span class="author">Elad Efrat</span> &#60;<a class="link-mail" href="mailto:elad@NetBSD.org">elad@NetBSD.org</a>&#62; wrote this manual page.</div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
March 1, 2012</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
</html>

