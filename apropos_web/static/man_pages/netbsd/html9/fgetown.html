<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/../4/strict.dtd">
>
<head>
<meta http-equiv="Content-Type" content="te../; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="../style.css" type="text/css" media="all">
<title>
FSETOWN(9)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
FSETOWN(9)</td>
<td class="head-vol" align="center">
Kernel Developer's Manual</td>
<td class="head-rtitle" align="right">
FSETOWN(9)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">fsetown</b>, <b class="name">fgetown</b>, <b class="name">fownsignal</b> &#8212; <span class="desc">file descriptor owner handling functions</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="includes">#include &lt;<a class="link-includes">sys/file.h</a>&gt;</b><p>
<i class="ftype">int</i><br>
<b class="fname">fsetown</b>(<i class="farg" style="white-space:nowrap;">struct lwp *l</i>, <i class="farg" style="white-space:nowrap;">pid_t *pgid</i>, <i class="farg" style="white-space:nowrap;">int cmd</i>, <i class="farg" style="white-space:nowrap;">const void *data</i>);<p>
<i class="ftype">int</i><br>
<b class="fname">fgetown</b>(<i class="farg" style="white-space:nowrap;">struct lwp *l</i>, <i class="farg" style="white-space:nowrap;">pid_t pgid</i>, <i class="farg" style="white-space:nowrap;">int cmd</i>, <i class="farg" style="white-space:nowrap;">void *data</i>);<p>
<i class="ftype">void</i><br>
<b class="fname">fownsignal</b>(<i class="farg" style="white-space:nowrap;">pid_t pgid</i>, <i class="farg" style="white-space:nowrap;">int signo</i>, <i class="farg" style="white-space:nowrap;">int code</i>, <i class="farg" style="white-space:nowrap;">int band</i>, <i class="farg" style="white-space:nowrap;">void *fdescdata</i>);</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> These functions handle file descriptor owner related ioctls and related signal delivery. Device drivers and other parts of the kernel call these functions from ioctl entry functions or I/O notification functions.<p>
<b class="fname">fsetown</b>() sets the owner of file. <i class="farg">cmd</i> is an ioctl command, one of <span class="define">SIOCSPGRP</span>, <span class="define">FIOSETOWN</span>, and <span class="define">TIOCSPGRP</span>. <i class="farg">data</i> is interpreted as a pointer to a signed integer, the integer being the ID of the owner. The <i class="farg">cmd</i> determines how exactly <i class="farg">data</i> should be interpreted. If <i class="farg">cmd</i> is <span class="define">TIOCSPGRP</span>, the ID needs to be positive and is interpreted as process group ID. For <span class="define">SIOCSPGRP</span> and <span class="define">FIOSETOWN</span>, the passed ID is the process ID if positive, or the process group ID if negative.<p>
<b class="fname">fgetown</b>() returns the current owner of the file. <i class="farg">cmd</i> is an ioctl command, one of <span class="define">SIOCGPGRP</span>, <span class="define">FIOGETOWN</span>, and <span class="define">TIOCGPGRP</span>. <i class="farg">data</i> is interpreted as a pointer to a signed integer, and the value is set according to the passed <i class="farg">cmd</i>. For <span class="define">TIOCGPGRP</span>, the returned <i class="farg">data</i> value is positive process group ID if the owner is the process group, or negative process ID if the owner is a process. For other ioctls, the returned value is the positive process ID if the owner is a process, or the negative process group ID if the owner is a process group.<p>
<b class="fname">fownsignal</b>() schedules the <i class="farg">signo</i> signal to be sent to the current file descriptor owner. The signals typically used with this function are <span class="define">SIGIO</span> and <span class="define">SIGURG</span>. The <i class="farg">code</i> and <i class="farg">band</i> arguments are sent along with the signal as additional signal specific information if <span class="define">SA_SIGINFO</span> is activated. If the information is not available from the context of the <b class="fname">fownsignal</b>() call, these should be passed as zero. <i class="farg">fdescdata</i> is used to lookup the file descriptor for <span class="define">SA_SIGINFO</span> signals. If it is specified, the file descriptor number is sent along with the signal as additional signal specific information. If file descriptor data pointer is not available in the context of the <b class="fname">fownsignal</b>() call, <span class="define">NULL</span> should be used instead.<p>
Note that a <a class="link-man" href="../2/fcntl">fcntl(2)</a> <span class="define">F_SETOWN request</span> is translated by the kernel to a <span class="define">FIOSETOWN</span> ioctl, and <span class="define">F_GETOWN</span> is translated to <span class="define">FIOGETOWN</span>. This is done transparently by generic code, before the device- or subsystem-specific ioctl entry function is called.</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../2/fcntl">fcntl(2)</a>, <a class="link-man" href="../2/siginfo">siginfo(2)</a>, <a class="link-man" href="../7/signal">signal(7)</a>, <a class="link-man" href="../9/ioctl">ioctl(9)</a>, <a class="link-man" href="../9/signal">signal(9)</a></div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> These kernel functions appeared in <span class="unix">NetBSD&#160;2.0</span>.</div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
December 20, 2005</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
<>

