<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="/static/man_pages/netbsd/style.css" type="text/css" media="all">
<title>
ISR_ADD(9) (Sun3)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
ISR_ADD(9)</td>
<td class="head-vol" align="center">
Kernel Developer's Manual (Sun3)</td>
<td class="head-rtitle" align="right">
ISR_ADD(9)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">isr_add</b>, <b class="name">isr_add_autovect</b>, <b class="name">isr_add_vectored</b>, <b class="name">isr_add_custom</b> &#8212; <span class="desc">establish interrupt handler</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="includes">#include &lt;<a class="link-includes">sun3/autoconf.h</a>&gt;</b><p>
<pre style="margin-left: 0.00ex;" class="lit display">
typedef int (*isr_func_t)(void *);</pre>
<br>
<i class="ftype">void</i><br>
<b class="fname">isr_add_autovect</b>(<i class="farg" style="white-space:nowrap;">isr_func_t fun</i>, <i class="farg" style="white-space:nowrap;">void *arg</i>, <i class="farg" style="white-space:nowrap;">int level</i>);<p>
<i class="ftype">void</i><br>
<b class="fname">isr_add_vectored</b>(<i class="farg" style="white-space:nowrap;">isr_func_t fun</i>, <i class="farg" style="white-space:nowrap;">void *arg</i>, <i class="farg" style="white-space:nowrap;">int pri</i>, <i class="farg" style="white-space:nowrap;">int vec</i>);<p>
<i class="ftype">void</i><br>
<b class="fname">isr_add_custom</b>(<i class="farg" style="white-space:nowrap;">int level</i>, <i class="farg" style="white-space:nowrap;">void *fun</i>);</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> The <b class="name">isr_add</b> functions establish interrupt handlers into the system interrupt dispatch table and are typically called from device drivers during the autoconfiguration process.<p>
There are two types of interrupts in the Motorola 68000 architecture, which differ in the way that an interrupt request is mapped to a dispatch function within the interrupt vector table.<p>
When the CPU detects an asserted signal on one of its interrupt request lines, it suspends normal instruction execution and begins an interrupt acknowledge cycle on the system bus. During this cycle the interrupting device directs how the CPU is to dispatch its interrupt request.<p>
If the interrupting device is integrated tightly with the system bus, it provides an 8-bit interrupt vector number to the CPU and a <span class="symb">vectored</span> interrupt occurs. This vector number points to a vector entry within the interrupt vector table to which instruction execution is immediately transfered.<p>
If the interrupting device cannot provide a vector number, it asserts a specialized bus line and an <span class="symb">autovectored</span> interrupt occurs. The vector number to use is determined by adding the interrupt priority (0&#8211;6) to an autovector base (typically <code class="lit">18 hexadecimal</code>).<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">isr_add_autovect</b>()</dt>
<dd class="list-tag" style="margin-left: 15.00ex;">
Adds the function <i class="farg">fun</i> to the list of interrupt handlers to be called during an autovectored interrupt of priority <i class="farg">level</i>. The pointer <i class="farg">arg</i> is passed to the function as its first argument.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">isr_add_vectored</b>()</dt>
<dd class="list-tag" style="margin-left: 15.00ex;">
Adds the function <i class="farg">fun</i> to the list of interrupt handlers to be called during a vectored interrupts of priority <i class="farg">pri</i> at dispatch vector number <i class="farg">vec</i>. The pointer <i class="farg">arg</i> is passed to the function as its first argument.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">isr_add_custom</b>()</dt>
<dd class="list-tag" style="margin-left: 15.00ex;">
Establish function <i class="farg">fun</i> as the interrupt handler for vector <i class="farg">level</i>. The autovector base number is automatically added to <i class="farg">level</i>.<p>
<i class="farg">fun</i> is called directly as the dispatch handler and must handle all of the specifics of saving the processor state and returning from a processor exception. These requirements generally dictate that <i class="farg">fun</i> be written in assembler.</dd>
</dl>
</div>
<div class="section">
<h1 id="x434f4445205245464552454e434553">CODE REFERENCES</h1> <i class="file">sys/arch/sun3/sun3/isr.c</i></div>
<div class="section">
<h1 id="x5245464552454e434553">REFERENCES</h1> MC68030 User's Manual, Third edition, MC68030UM/AD Rev 2, Motorola Inc.</div>
<div class="section">
<h1 id="x42554753">BUGS</h1> There is no way to remove a handler once it has been added.</div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
May 21, 1997</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
</html>

