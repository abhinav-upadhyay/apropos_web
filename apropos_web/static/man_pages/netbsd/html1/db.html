<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="../style.css" type="text/css" media="all">
<title>
DB(1)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
DB(1)</td>
<td class="head-vol" align="center">
General Commands Manual</td>
<td class="head-rtitle" align="right">
DB(1)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">db</b> &#8212; <span class="desc">manipulate <a class="link-man" href="../3/db">db(3)</a>'s <a class="link-man" href="../3/btree">btree(3)</a> and <a class="link-man" href="../3/hash">hash(3)</a> databases</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1><table class="synopsis">
<col style="width: 2.00ex;">
<col>
<tbody>
<tr>
<td>
db</td>
<td>
&#91;<span class="opt"><b class="flag">&#45;DKiNqV</b></span>&#93; &#91;<span class="opt"><b class="flag">&#45;E</b> <i class="arg">endian</i></span>&#93; &#91;<span class="opt"><b class="flag">&#45;f</b> <i class="arg">infile</i></span>&#93; &#91;<span class="opt"><b class="flag">&#45;O</b> <i class="arg">outsep</i></span>&#93; &#91;<span class="opt"><b class="flag">&#45;S</b> <i class="arg">visitem</i></span>&#93; &#91;<span class="opt"><b class="flag">&#45;T</b> <i class="arg">visspec</i></span>&#93; &#91;<span class="opt"><b class="flag">&#45;U</b> <i class="arg">unvisitem</i></span>&#93; &#91;<span class="opt"><b class="flag">&#45;X</b> <i class="arg">extravis</i></span>&#93; <i class="arg">type</i> <i class="arg">dbfile</i> &#91;<span class="opt"><i class="arg">key</i> &#91;<span class="opt"><i class="arg">...</i></span>&#93;</span>&#93;</td>
</tr>
</tbody>
</table>
<br>
<table class="synopsis">
<col style="width: 2.00ex;">
<col>
<tbody>
<tr>
<td>
db</td>
<td>
<b class="flag">&#45;d</b> &#91;<span class="opt"><b class="flag">&#45;iNq</b></span>&#93; &#91;<span class="opt"><b class="flag">&#45;E</b> <i class="arg">endian</i></span>&#93; &#91;<span class="opt"><b class="flag">&#45;f</b> <i class="arg">infile</i></span>&#93; &#91;<span class="opt"><b class="flag">&#45;T</b> <i class="arg">visspec</i></span>&#93; &#91;<span class="opt"><b class="flag">&#45;U</b> <i class="arg">unvisitem</i></span>&#93; <i class="arg">type</i> <i class="arg">dbfile</i> &#91;<span class="opt"><i class="arg">key</i> &#91;<span class="opt"><i class="arg">...</i></span>&#93;</span>&#93;</td>
</tr>
</tbody>
</table>
<br>
<table class="synopsis">
<col style="width: 2.00ex;">
<col>
<tbody>
<tr>
<td>
db</td>
<td>
<b class="flag">&#45;w</b> &#91;<span class="opt"><b class="flag">&#45;CDiNqR</b></span>&#93; &#91;<span class="opt"><b class="flag">&#45;E</b> <i class="arg">endian</i></span>&#93; &#91;<span class="opt"><b class="flag">&#45;F</b> <i class="arg">insep</i></span>&#93; &#91;<span class="opt"><b class="flag">&#45;f</b> <i class="arg">infile</i></span>&#93; &#91;<span class="opt"><b class="flag">&#45;m</b> <i class="arg">mode</i></span>&#93; &#91;<span class="opt"><b class="flag">&#45;P</b> <i class="arg">pagesize</i></span>&#93; &#91;<span class="opt"><b class="flag">&#45;T</b> <i class="arg">visspec</i></span>&#93; &#91;<span class="opt"><b class="flag">&#45;U</b> <i class="arg">unvisitem</i></span>&#93; <i class="arg">type</i> <i class="arg">dbfile</i> &#91;<span class="opt"><i class="arg">key</i> <i class="arg">value</i> &#91;<span class="opt"><i class="arg">...</i></span>&#93;</span>&#93;</td>
</tr>
</tbody>
</table>
</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> <b class="name">db</b> allows manipulation of <a class="link-man" href="../3/btree">btree(3)</a> and <a class="link-man" href="../3/hash">hash(3)</a> (<a class="link-man" href="../3/db">db(3)</a>) databases.<p>
<b class="name">db</b> has three modes of operation to perform upon <i class="arg">dbfile</i>:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 5.00ex;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
read</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Displays the given <i class="arg">key</i>s, and keys described in <i class="arg">infile</i>. If no keys and no <i class="arg">infile</i> is specified, the entire database is displayed. This is the default mode of operation.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
delete</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Enabled with <b class="flag">&#45;d</b>. Deletes the given <i class="arg">key</i>s, and keys described in <i class="arg">infile</i>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
write</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Enabled with <b class="flag">&#45;w</b>. Writes the given <i class="arg">key</i>s and <i class="arg">value</i>s, and keys and values described in <i class="arg">infile</i> (in the latter case, entries are separated by <i class="arg">insep</i>).</dd>
</dl>
<p>
There are two mandatory arguments: <i class="arg">type</i> is the database type; either &#8216;<span class="symb">btree</span>&#8217; or &#8216;<span class="symb">hash</span>&#8217;, and <i class="arg">dbfile</i> is the database file to manipulate.<p>
Options valid for all modes are:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 5.00ex;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;E</b> <i class="arg">endian</i></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
Set the endianness of the database. <i class="arg">endian</i> may be one of:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 5.00ex;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
<span class="symb">B</span></dt>
<dd class="list-tag" style="margin-left: 1.00ex;">
Big endian</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<span class="symb">H</span></dt>
<dd class="list-tag" style="margin-left: 1.00ex;">
Host endian</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<span class="symb">L</span></dt>
<dd class="list-tag" style="margin-left: 1.00ex;">
Little endian</dd>
</dl>
Defaults to &#8216;H&#8217; (host endian).</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;f</b> <i class="arg">infile</i></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
Contains a list of keys (for read and delete), or <i class="arg">insep</i> separated keys and values (for write) to be used as arguments to the given mode. If <i class="arg">infile</i> is &#8216;<span class="symb">-</span>&#8217;, <span class="define">stdin</span> is used.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;i</b></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
Keys are converted to lower case before manipulation.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;N</b></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
Include the NUL byte at the end of the key or value.<p>
By convention, each key and value in the underlying database is terminated with a NUL byte, although it is possible to have keys or values that are not so terminated. Without the <b class="flag">&#45;N</b> option, <b class="name">db</b> adds a NUL terminator to any keys and values specified on the command line or in the input file, before searching or modifying the underlying database, and removes the last byte (which is usually a NUL terminator) before printing any keys and values retrieved from the underlying database. With the <b class="flag">&#45;N</b> option, <b class="name">db</b> does not add or remove a terminating byte. The <b class="flag">&#45;S</b>, <b class="flag">&#45;T</b>, and <b class="flag">&#45;U</b> options may be useful to encode the NUL terminator in a readable form.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;q</b></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
Quiet operation. In read mode, missing keys are not considered to be an error. In delete (<b class="flag">&#45;d</b>) and write (<b class="flag">&#45;w</b>) modes, the result of various operations is suppressed.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;T</b> <i class="arg">visspec</i></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
Control how the items specified by the <b class="flag">&#45;S</b> option are encoded and <b class="flag">&#45;U</b> option are decoded. The <i class="arg">visspec</i> option-argument is a string specifying <a class="link-man" href="../3/strsvisx">strsvisx(3)</a> flags. The string consists of one or more characters:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 5.00ex;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
<span class="symb">b</span></dt>
<dd class="list-tag" style="margin-left: 2.00ex;">
<span class="define">VIS_NOSLASH</span></dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<span class="symb">c</span></dt>
<dd class="list-tag" style="margin-left: 2.00ex;">
<span class="define">VIS_CSTYLE</span>. Overrides <span class="symb">h</span> and <span class="symb">o</span>.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<span class="symb">h</span></dt>
<dd class="list-tag" style="margin-left: 2.00ex;">
<span class="define">VIS_HTTPSTYLE</span>. Overrides <span class="symb">c</span> and <span class="symb">o</span>.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<span class="symb">o</span></dt>
<dd class="list-tag" style="margin-left: 2.00ex;">
<span class="define">VIS_OCTAL</span>. Overrides <span class="symb">c</span> and <span class="symb">h</span>.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<span class="symb">s</span></dt>
<dd class="list-tag" style="margin-left: 2.00ex;">
<span class="define">VIS_SAFE</span></dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<span class="symb">t</span></dt>
<dd class="list-tag" style="margin-left: 2.00ex;">
<span class="define">VIS_TAB</span></dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<span class="symb">w</span></dt>
<dd class="list-tag" style="margin-left: 2.00ex;">
<span class="define">VIS_WHITE</span></dd>
</dl>
<p>
<b class="flag">&#45;U</b> only supports <b class="flag">&#45;T</b> <span class="symb">h</span>.<p>
See <a class="link-man" href="../1/vis">vis(1)</a>'s corresponding options for the meaning of these characters, and <a class="link-man" href="../3/strsvisx">strsvisx(3)</a> for more detail on the flags.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;U</b> <i class="arg">unvisitem</i></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
Specify items to <a class="link-man" href="../3/strunvisx">strunvisx(3)</a> decode. The <i class="arg">unvisitem</i> option-argument is a character specifying if the key (<i class="arg">k</i>), the value (<i class="arg">v</i>) or both (<i class="arg">b</i>) should be decoded.</dd>
</dl>
<p>
Read mode specific options are:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 5.00ex;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;D</b></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
Display duplicate entries in <span class="symb">btree</span> databases.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;K</b></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
Display key.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;O</b> <i class="arg">outsep</i></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
Field separator string between key and value. Defaults to a single tab (&#8216;&#92;t&#8217;).</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;S</b> <i class="arg">visitem</i></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
Specify items to <a class="link-man" href="../3/strsvisx">strsvisx(3)</a> encode. The <i class="arg">visitem</i> option-argument is a character specifying if the key (<i class="arg">k</i>), the value (<i class="arg">v</i>) or both (<i class="arg">b</i>) should be encoded.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;V</b></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
Display value.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;X</b> <i class="arg">extravis</i></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
When encoding items with <b class="flag">&#45;S</b> option also encode characters in <i class="arg">extravis</i>, per <a class="link-man" href="../3/strsvisx">strsvisx(3)</a>.</dd>
</dl>
<p>
<div style="margin-left: 5.00ex;" class="display">
(If neither of <b class="flag">&#45;K</b> or <b class="flag">&#45;V</b> is given, both options are enabled.)</div>
<p>
Write mode specific options are:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 5.00ex;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;C</b></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
Create new database, and truncate existing databases.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;D</b></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
Allow duplicate entries in <span class="symb">btree</span> databases. (Requires <b class="flag">&#45;R</b> to be useful.)</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;F</b> <i class="arg">insep</i></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
Input field separator string between key and value used when parsing <i class="arg">infile</i>. Defaults to a single space (&#8216;&#160;&#8217;).</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;m</b> <i class="arg">mode</i></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
Octal mode of created database. Defaults to &#8216;0644&#8217;.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;P</b> <i class="arg">pagesize</i></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
Set the page size of the table to <i class="arg">pagesize</i> bytes. If set to &#8216;0&#8217;, a database-specific default is determined, based on the block-size of the underlying file-system. Defaults to &#8216;4096&#8217;.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;R</b></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
Overwrite existing entries. If not specified, writing to an existing entry raises an error.</dd>
</dl>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../1/vis">vis(1)</a>, <a class="link-man" href="../3/btree">btree(3)</a>, <a class="link-man" href="../3/db">db(3)</a>, <a class="link-man" href="../3/hash">hash(3)</a>, <a class="link-man" href="../3/strsvisx">strsvisx(3)</a>, <a class="link-man" href="../3/strunvisx">strunvisx(3)</a></div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> The <b class="name">db</b> command appeared in <span class="unix">NetBSD&#160;2.0</span>.</div>
<div class="section">
<h1 id="x415554484f5253">AUTHORS</h1> <span class="author">Luke Mewburn</span> &#60;lukem@NetBSD.org&#62;.</div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
February 17, 2012</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
</html>

