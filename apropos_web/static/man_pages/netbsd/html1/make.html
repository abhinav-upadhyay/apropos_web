<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="/static/man_pages/netbsd/style.css" type="text/css" media="all">
<title>
MAKE(1)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
MAKE(1)</td>
<td class="head-vol" align="center">
General Commands Manual</td>
<td class="head-rtitle" align="right">
MAKE(1)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">make</b> &#8212; <span class="desc">maintain program dependencies</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1><table class="synopsis">
<col style="width: 4.00ex;">
<col>
<tbody>
<tr>
<td>
make</td>
<td>
&#91;<span class="opt"><b class="flag">&#45;BeikNnqrstWwX</b></span>&#93; &#91;<span class="opt"><b class="flag">&#45;C</b> <i class="arg">directory</i></span>&#93; &#91;<span class="opt"><b class="flag">&#45;D</b> <i class="arg">variable</i></span>&#93; &#91;<span class="opt"><b class="flag">&#45;d</b> <i class="arg">flags</i></span>&#93; &#91;<span class="opt"><b class="flag">&#45;f</b> <i class="arg">makefile</i></span>&#93; &#91;<span class="opt"><b class="flag">&#45;I</b> <i class="arg">directory</i></span>&#93; &#91;<span class="opt"><b class="flag">&#45;J</b> <i class="arg">private</i></span>&#93; &#91;<span class="opt"><b class="flag">&#45;j</b> <i class="arg">max_jobs</i></span>&#93; &#91;<span class="opt"><b class="flag">&#45;m</b> <i class="arg">directory</i></span>&#93; &#91;<span class="opt"><b class="flag">&#45;T</b> <i class="arg">file</i></span>&#93; &#91;<span class="opt"><b class="flag">&#45;V</b> <i class="arg">variable</i></span>&#93; &#91;<span class="opt"><i class="arg">variable=value</i></span>&#93; &#91;<span class="opt"><i class="arg">target ...</i></span>&#93;</td>
</tr>
</tbody>
</table>
</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> <b class="name">make</b> is a program designed to simplify the maintenance of other programs. Its input is a list of specifications as to the files upon which programs and other files depend. If no <b class="flag">&#45;f</b> <i class="arg">makefile</i> makefile option is given, <b class="name">make</b> will try to open &#8216;<code class="lit"><i class="file">makefile</i></code>&#8217; then &#8216;<code class="lit"><i class="file">Makefile</i></code>&#8217; in order to find the specifications. If the file &#8216;<code class="lit"><i class="file">.depend</i></code>&#8217; exists, it is read (see <a class="link-man" href="../1/mkdep">mkdep(1)</a>).<p>
This manual page is intended as a reference document only. For a more thorough description of <b class="name">make</b> and makefiles, please refer to <span class="ref-title">PMake &#45; A Tutorial.</span><p>
<b class="name">make</b> will prepend the contents of the <b class="var">MAKEFLAGS</b> environment variable to the command line arguments before parsing them.<p>
The options are as follows:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;B</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Try to be backwards compatible by executing a single shell per command and by executing the commands to make the sources of a dependency line in sequence.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;C</b> <i class="arg">directory</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Change to <i class="arg">directory</i> before reading the makefiles or doing anything else. If multiple <b class="flag">&#45;C</b> options are specified, each is interpreted relative to the previous one: <b class="flag">&#45;C</b> <i class="file">/</i> <b class="flag">&#45;C</b> <i class="file">etc</i> is equivalent to <b class="flag">&#45;C</b> <i class="file">/etc</i>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;D</b> <i class="arg">variable</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Define <i class="arg">variable</i> to be 1, in the global context.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;d</b> <i class="arg">[-]flags</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Turn on debugging, and specify which portions of <b class="name">make</b> are to print debugging information. Unless the flags are preceded by &#8216;<code class="lit">&#45;</code>&#8217; they are added to the <b class="var">MAKEFLAGS</b> environment variable and will be processed by any child make processes. By default, debugging information is printed to standard error, but this can be changed using the <i class="arg">F</i> debugging flag. The debugging output is always unbuffered; in addition, if debugging is enabled but debugging output is not directed to standard output, then the standard output is line buffered. <i class="arg">Flags</i> is one or more of the following:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="arg">A</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Print all possible debugging information; equivalent to specifying all of the debugging flags.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="arg">a</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Print debugging information about archive searching and caching.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="arg">C</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Print debugging information about current working directory.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="arg">c</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Print debugging information about conditional evaluation.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="arg">d</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Print debugging information about directory searching and caching.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="arg">e</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Print debugging information about failed commands and targets.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="arg">F</i>&#91;<span class="opt"><span class="symb">+</span></span>&#93;<i class="arg">filename</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Specify where debugging output is written. This must be the last flag, because it consumes the remainder of the argument. If the character immediately after the &#8216;<code class="lit">F</code>&#8217; flag is &#8216;<code class="lit">+</code>&#8217;, then the file will be opened in append mode; otherwise the file will be overwritten. If the file name is &#8216;<code class="lit">stdout</code>&#8217; or &#8216;<code class="lit">stderr</code>&#8217; then debugging output will be written to the standard output or standard error output file descriptors respectively (and the &#8216;<code class="lit">+</code>&#8217; option has no effect). Otherwise, the output will be written to the named file. If the file name ends &#8216;<code class="lit">.%d</code>&#8217; then the &#8216;<code class="lit">%d</code>&#8217; is replaced by the pid.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="arg">f</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Print debugging information about loop evaluation.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="arg">g1</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Print the input graph before making anything.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="arg">g2</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Print the input graph after making everything, or before exiting on error.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="arg">g3</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Print the input graph before exiting on error.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="arg">j</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Print debugging information about running multiple shells.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="arg">l</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Print commands in Makefiles regardless of whether or not they are prefixed by &#8216;<code class="lit">@</code>&#8217; or other "quiet" flags. Also known as "loud" behavior.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="arg">M</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Print debugging information about "meta" mode decisions about targets.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="arg">m</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Print debugging information about making targets, including modification dates.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="arg">n</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Don't delete the temporary command scripts created when running commands. These temporary scripts are created in the directory referred to by the <span class="env">TMPDIR</span> environment variable, or in <i class="file">/tmp</i> if <span class="env">TMPDIR</span> is unset or set to the empty string. The temporary scripts are created by <a class="link-man" href="../3/mkstemp">mkstemp(3)</a>, and have names of the form <i class="file">makeXXXXXX</i>. <span class="emph">NOTE</span>: This can create many files in <span class="env">TMPDIR</span> or <i class="file">/tmp</i>, so use with care.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="arg">p</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Print debugging information about makefile parsing.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="arg">s</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Print debugging information about suffix-transformation rules.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="arg">t</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Print debugging information about target list maintenance.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="arg">V</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Force the <b class="flag">&#45;V</b> option to print raw values of variables.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="arg">v</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Print debugging information about variable assignment.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="arg">x</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Run shell commands with <b class="flag">&#45;x</b> so the actual commands are printed as they are executed.</dd>
</dl>
</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;e</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Specify that environment variables override macro assignments within makefiles.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;f</b> <i class="arg">makefile</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Specify a makefile to read instead of the default &#8216;<code class="lit"><i class="file">makefile</i></code>&#8217;. If <i class="arg">makefile</i> is &#8216;<code class="lit"><b class="flag">&#45;</b></code>&#8217;, standard input is read. Multiple makefiles may be specified, and are read in the order specified.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;I</b> <i class="arg">directory</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Specify a directory in which to search for makefiles and included makefiles. The system makefile directory (or directories, see the <b class="flag">&#45;m</b> option) is automatically included as part of this list.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;i</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Ignore non-zero exit of shell commands in the makefile. Equivalent to specifying &#8216;<code class="lit"><b class="flag">&#45;</b></code>&#8217; before each command line in the makefile.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;J</b> <i class="arg">private</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
This option should <span class="emph">not</span> be specified by the user.<p>
When the <i class="arg">j</i> option is in use in a recursive build, this option is passed by a make to child makes to allow all the make processes in the build to cooperate to avoid overloading the system.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;j</b> <i class="arg">max_jobs</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Specify the maximum number of jobs that <b class="name">make</b> may have running at any one time. The value is saved in <b class="var">.MAKE.JOBS</b>. Turns compatibility mode off, unless the <i class="arg">B</i> flag is also specified. When compatibility mode is off, all commands associated with a target are executed in a single shell invocation as opposed to the traditional one shell invocation per line. This can break traditional scripts which change directories on each command invocation and then expect to start with a fresh environment on the next line. It is more efficient to correct the scripts rather than turn backwards compatibility on.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;k</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Continue processing after errors are encountered, but only on those targets that do not depend on the target whose creation caused the error.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;m</b> <i class="arg">directory</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Specify a directory in which to search for sys.mk and makefiles included via the &#60;<i class="arg">file</i>&#62;-style include statement. The <b class="flag">&#45;m</b> option can be used multiple times to form a search path. This path will override the default system include path: /usr/share/mk. Furthermore the system include path will be appended to the search path used for &#8220;<i class="arg">file</i>&#8221;-style include statements (see the <b class="flag">&#45;I</b> option).<p>
If a file or directory name in the <b class="flag">&#45;m</b> argument (or the <span class="env">MAKESYSPATH</span> environment variable) starts with the string &#8220;.../&#8221; then <b class="name">make</b> will search for the specified file or directory named in the remaining part of the argument string. The search starts with the current directory of the Makefile and then works upward towards the root of the filesystem. If the search is successful, then the resulting directory replaces the &#8220;.../&#8221; specification in the <b class="flag">&#45;m</b> argument. If used, this feature allows <b class="name">make</b> to easily search in the current source tree for customized sys.mk files (e.g., by using &#8220;.../mk/sys.mk&#8221; as an argument).</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;n</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Display the commands that would have been executed, but do not actually execute them unless the target depends on the .MAKE special source (see below).</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;N</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Display the commands which would have been executed, but do not actually execute any of them; useful for debugging top-level makefiles without descending into subdirectories.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;q</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Do not execute any commands, but exit 0 if the specified targets are up-to-date and 1, otherwise.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;r</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Do not use the built-in rules specified in the system makefile.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;s</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Do not echo any commands as they are executed. Equivalent to specifying &#8216;<code class="lit"><b class="cmd">@</b></code>&#8217; before each command line in the makefile.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;T</b> <i class="arg">tracefile</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
When used with the <b class="flag">&#45;j</b> flag, append a trace record to <i class="arg">tracefile</i> for each job started and completed.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;t</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Rather than re-building a target as specified in the makefile, create it or update its modification time to make it appear up-to-date.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;V</b> <i class="arg">variable</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Print <b class="name">make</b>'s idea of the value of <i class="arg">variable</i>, in the global context. Do not build any targets. Multiple instances of this option may be specified; the variables will be printed one per line, with a blank line for each null or undefined variable. If <i class="arg">variable</i> contains a &#8216;<code class="lit">$</code>&#8217; then the value will be expanded before printing.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;W</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Treat any warnings during makefile parsing as errors.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;w</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Print entering and leaving directory messages, pre and post processing.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;X</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Don't export variables passed on the command line to the environment individually. Variables passed on the command line are still exported via the <b class="var">MAKEFLAGS</b> environment variable. This option may be useful on systems which have a small limit on the size of command arguments.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="arg">variable=value</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Set the value of the variable <i class="arg">variable</i> to <i class="arg">value</i>. Normally, all values passed on the command line are also exported to sub-makes in the environment. The <b class="flag">&#45;X</b> flag disables this behavior. Variable assignments should follow options for POSIX compatibility but no ordering is enforced.</dd>
</dl>
<p>
There are seven different types of lines in a makefile: file dependency specifications, shell commands, variable assignments, include statements, conditional directives, for loops, and comments.<p>
In general, lines may be continued from one line to the next by ending them with a backslash (&#8216;<code class="lit">&#92;</code>&#8217;). The trailing newline character and initial whitespace on the following line are compressed into a single space.</div>
<div class="section">
<h1 id="x46494c4520444550454e44454e43592053504543494649434154494f4e53">FILE DEPENDENCY SPECIFICATIONS</h1> Dependency lines consist of one or more targets, an operator, and zero or more sources. This creates a relationship where the targets &#8220;depend&#8221; on the sources and are usually created from them. The exact relationship between the target and the source is determined by the operator that separates them. The three operators are as follows:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">:</b></dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
A target is considered out-of-date if its modification time is less than those of any of its sources. Sources for a target accumulate over dependency lines when this operator is used. The target is removed if <b class="name">make</b> is interrupted.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">!</b></dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
Targets are always re-created, but not until all sources have been examined and re-created as necessary. Sources for a target accumulate over dependency lines when this operator is used. The target is removed if <b class="name">make</b> is interrupted.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">::</b></dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
If no sources are specified, the target is always re-created. Otherwise, a target is considered out-of-date if any of its sources has been modified more recently than the target. Sources for a target do not accumulate over dependency lines when this operator is used. The target will not be removed if <b class="name">make</b> is interrupted.</dd>
</dl>
<p>
Targets and sources may contain the shell wildcard values &#8216;<code class="lit">?</code>&#8217;, &#8216;<code class="lit">*</code>&#8217;, &#8216;<code class="lit">[]</code>&#8217;, and &#8216;<code class="lit">{}</code>&#8217;. The values &#8216;<code class="lit">?</code>&#8217;, &#8216;<code class="lit">*</code>&#8217;, and &#8216;<code class="lit">[]</code>&#8217; may only be used as part of the final component of the target or source, and must be used to describe existing files. The value &#8216;<code class="lit">{}</code>&#8217; need not necessarily be used to describe existing files. Expansion is in directory order, not alphabetically as done in the shell.</div>
<div class="section">
<h1 id="x5348454c4c20434f4d4d414e4453">SHELL COMMANDS</h1> Each target may have associated with it one or more lines of shell commands, normally used to create the target. Each of the lines in this script <span class="emph">must</span> be preceded by a tab. (For historical reasons, spaces are not accepted.) While targets can appear in many dependency lines if desired, by default only one of these rules may be followed by a creation script. If the &#8216;<code class="lit"><b class="cmd">::</b></code>&#8217; operator is used, however, all rules may include scripts and the scripts are executed in the order found.<p>
Each line is treated as a separate shell command, unless the end of line is escaped with a backslash (&#8216;<code class="lit">&#92;</code>&#8217;) in which case that line and the next are combined. If the first characters of the command are any combination of &#8216;<code class="lit"><b class="cmd">@</b></code>&#8217;, &#8216;<code class="lit"><b class="cmd">+</b></code>&#8217;, or &#8216;<code class="lit"><b class="cmd">&#45;</b></code>&#8217;, the command is treated specially. A &#8216;<code class="lit"><b class="cmd">@</b></code>&#8217; causes the command not to be echoed before it is executed. A &#8216;<code class="lit"><b class="cmd">+</b></code>&#8217; causes the command to be executed even when <b class="flag">&#45;n</b> is given. This is similar to the effect of the .MAKE special source, except that the effect can be limited to a single line of a script. A &#8216;<code class="lit"><b class="cmd">&#45;</b></code>&#8217; in compatibility mode causes any non-zero exit status of the command line to be ignored.<p>
When <b class="name">make</b> is run in jobs mode with <b class="flag">&#45;j</b> <i class="arg">max_jobs</i>, the entire script for the target is fed to a single instance of the shell. In compatibility (non-jobs) mode, each command is run in a separate process. If the command contains any shell meta characters (&#8216;<code class="lit">#=|^(){};&amp;&lt;&gt;*?[]:$`&#92;&#92;n</code>&#8217;) it will be passed to the shell; otherwise <b class="name">make</b> will attempt direct execution. If a line starts with &#8216;<code class="lit"><b class="cmd">&#45;</b></code>&#8217; and the shell has ErrCtl enabled then failure of the command line will be ignored as in compatibility mode. Otherwise &#8216;<code class="lit"><b class="cmd">&#45;</b></code>&#8217; affects the entire job; the script will stop at the first command line that fails, but the target will not be deemed to have failed.<p>
Makefiles should be written so that the mode of <b class="name">make</b> operation does not change their behavior. For example, any command which needs to use &#8220;cd&#8221; or &#8220;chdir&#8221; without potentially changing the directory for subsequent commands should be put in parentheses so it executes in a subshell. To force the use of one shell, escape the line breaks so as to make the whole script one command. For example:<p>
<pre style="margin-left: 5.00ex;" class="lit display">
avoid-chdir-side-effects: 
	@echo Building $@ in `pwd` 
	@(cd ${.CURDIR} &amp;&amp; ${MAKE} $@) 
	@echo Back in `pwd` 
 
ensure-one-shell-regardless-of-mode: 
	@echo Building $@ in `pwd`; &#92; 
	(cd ${.CURDIR} &amp;&amp; ${MAKE} $@); &#92; 
	echo Back in `pwd`</pre>
<p>
Since <b class="name">make</b> will <a class="link-man" href="../2/chdir">chdir(2)</a> to &#8216;<code class="lit"><b class="var">.OBJDIR</b></code>&#8217; before executing any targets, each child process starts with that as its current working directory.</div>
<div class="section">
<h1 id="x5641524941424c452041535349474e4d454e5453">VARIABLE ASSIGNMENTS</h1> Variables in make are much like variables in the shell, and, by tradition, consist of all upper-case letters.<div class="subsection">
<h2 id="x5661726961626c652061737369676e6d656e74206d6f64696669657273">Variable assignment modifiers</h2> The five operators that can be used to assign values to variables are as follows:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">=</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Assign the value to the variable. Any previous value is overridden.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">+=</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Append the value to the current value of the variable.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">?=</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Assign the value to the variable if it is not already defined.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">:=</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Assign with expansion, i.e. expand the value before assigning it to the variable. Normally, expansion is not done until the variable is referenced. <span class="emph">NOTE</span>: References to undefined variables are <span class="emph">not</span> expanded. This can cause problems when variable modifiers are used.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">!=</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Expand the value and pass it to the shell for execution and assign the result to the variable. Any newlines in the result are replaced with spaces.</dd>
</dl>
<p>
Any white-space before the assigned <i class="arg">value</i> is removed; if the value is being appended, a single space is inserted between the previous contents of the variable and the appended value.<p>
Variables are expanded by surrounding the variable name with either curly braces (&#8216;<code class="lit">{}</code>&#8217;) or parentheses (&#8216;<code class="lit">()</code>&#8217;) and preceding it with a dollar sign (&#8216;<code class="lit">$</code>&#8217;). If the variable name contains only a single letter, the surrounding braces or parentheses are not required. This shorter form is not recommended.<p>
If the variable name contains a dollar, then the name itself is expanded first. This allows almost arbitrary variable names, however names containing dollar, braces, parenthesis, or whitespace are really best avoided!<p>
If the result of expanding a variable contains a dollar sign (&#8216;<code class="lit">$</code>&#8217;) the string is expanded again.<p>
Variable substitution occurs at three distinct times, depending on where the variable is being used.<ol style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-enum">
<li class="list-enum" style="margin-top: 1.00em;">
Variables in dependency lines are expanded as the line is read.</li>
<li class="list-enum" style="margin-top: 1.00em;">
Variables in shell commands are expanded when the shell command is executed.</li>
<li class="list-enum" style="margin-top: 1.00em;">
&#8220;.for&#8221; loop index variables are expanded on each loop iteration. Note that other variables are not expanded inside loops so the following example code:<p>
<pre style="margin-left: 5.00ex;" class="lit display">
 
<span class="define">.for i in 1 2 3</span> 
a+=     ${i} 
j=      ${i} 
b+=     ${j} 
<span class="define">.endfor</span> 
 
all: 
	@echo ${a} 
	@echo ${b} 
</pre>
will print:<p>
<pre style="margin-left: 5.00ex;" class="lit display">
1 2 3 
3 3 3 
</pre>
Because while ${a} contains &#8220;1 2 3&#8221; after the loop is executed, ${b} contains &#8220;${j} ${j} ${j}&#8221; which expands to &#8220;3 3 3&#8221; since after the loop completes ${j} contains &#8220;3&#8221;.</li>
</ol>
</div>
<div class="subsection">
<h2 id="x5661726961626c6520636c6173736573">Variable classes</h2> The four different classes of variables (in order of increasing precedence) are:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
Environment variables</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Variables defined as part of <b class="name">make</b>'s environment.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
Global variables</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Variables defined in the makefile or in included makefiles.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
Command line variables</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Variables defined as part of the command line.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
Local variables</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Variables that are defined specific to a certain target.</dd>
</dl>
<p>
Local variables are all built in and their values vary magically from target to target. It is not currently possible to define new local variables. The seven local variables are as follows:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 5.00ex;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="var">.ALLSRC</b></dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
The list of all sources for this target; also known as &#8216;<code class="lit"><b class="var">&gt;</b></code>&#8217;.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="var">.ARCHIVE</b></dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
The name of the archive file; also known as &#8216;<code class="lit"><b class="var">!</b></code>&#8217;.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="var">.IMPSRC</b></dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
In suffix-transformation rules, the name/path of the source from which the target is to be transformed (the &#8220;implied&#8221; source); also known as &#8216;<code class="lit"><b class="var">&lt;</b></code>&#8217;. It is not defined in explicit rules.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="var">.MEMBER</b></dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
The name of the archive member; also known as &#8216;<code class="lit"><b class="var">%</b></code>&#8217;.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="var">.OODATE</b></dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
The list of sources for this target that were deemed out-of-date; also known as &#8216;<code class="lit"><b class="var">?</b></code>&#8217;.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="var">.PREFIX</b></dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
The file prefix of the target, containing only the file portion, no suffix or preceding directory components; also known as &#8216;<code class="lit"><b class="var">*</b></code>&#8217;. The suffix must be one of the known suffixes declared with <b class="cmd">.SUFFIXES</b> or it will not be recognized.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="var">.TARGET</b></dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
The name of the target; also known as &#8216;<code class="lit"><b class="var">@</b></code>&#8217;.</dd>
</dl>
<p>
The shorter forms (&#8216;<code class="lit"><b class="var">&gt;</b></code>&#8217;, &#8216;<code class="lit"><b class="var">!</b></code>&#8217;, &#8216;<code class="lit"><b class="var">&lt;</b></code>&#8217;, &#8216;<code class="lit"><b class="var">%</b></code>&#8217;, &#8216;<code class="lit"><b class="var">?</b></code>&#8217;, &#8216;<code class="lit"><b class="var">*</b></code>&#8217;, and &#8216;<code class="lit"><b class="var">@</b></code>&#8217;) are permitted for backward compatibility with historical makefiles and legacy POSIX make and are not recommended.<p>
Variants of these variables with the punctuation followed immediately by &#8216;<code class="lit">D</code>&#8217; or &#8216;<code class="lit">F</code>&#8217;, e.g. &#8216;<code class="lit"><b class="var">$(@D)</b></code>&#8217;, are legacy forms equivalent to using the &#8216;<code class="lit">:H</code>&#8217; and &#8216;<code class="lit">:T</code>&#8217; modifiers. These forms are accepted for compatibility with AT&amp;T System&#160;V UNIX makefiles and POSIX but are not recommended.<p>
Four of the local variables may be used in sources on dependency lines because they expand to the proper value for each target on the line. These variables are &#8216;<code class="lit"><b class="var">.TARGET</b></code>&#8217;, &#8216;<code class="lit"><b class="var">.PREFIX</b></code>&#8217;, &#8216;<code class="lit"><b class="var">.ARCHIVE</b></code>&#8217;, and &#8216;<code class="lit"><b class="var">.MEMBER</b></code>&#8217;.</div>
<div class="subsection">
<h2 id="x4164646974696f6e616c206275696c741e696e207661726961626c6573">Additional built-in variables</h2> In addition, <b class="name">make</b> sets or knows about the following variables:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="var">$</b></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
A single dollar sign &#8216;<code class="lit">$</code>&#8217;, i.e. &#8216;<code class="lit">$$</code>&#8217; expands to a single dollar sign.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="var">.ALLTARGETS</b></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
The list of all targets encountered in the Makefile. If evaluated during Makefile parsing, lists only those targets encountered thus far.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="var">.CURDIR</b></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
A path to the directory where <b class="name">make</b> was executed. Refer to the description of &#8216;<code class="lit"><span class="env">PWD</span></code>&#8217; for more details.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="var">.INCLUDEDFROMDIR</b></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
The directory of the file this Makefile was included from.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="var">.INCLUDEDFROMFILE</b></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
The filename of the file this Makefile was included from.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">MAKE</span></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
The name that <b class="name">make</b> was executed with (<b class="var">argv[0]</b>). For compatibility <b class="name">make</b> also sets <b class="var">.MAKE</b> with the same value. The preferred variable to use is the environment variable <span class="env">MAKE</span> because it is more compatible with other versions of <b class="name">make</b> and cannot be confused with the special target with the same name.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="var">.MAKE.DEPENDFILE</b></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
Names the makefile (default &#8216;<code class="lit"><i class="file">.depend</i></code>&#8217;) from which generated dependencies are read.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="var">.MAKE.EXPAND_VARIABLES</b></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
A boolean that controls the default behavior of the <b class="flag">&#45;V</b> option.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="var">.MAKE.EXPORTED</b></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
The list of variables exported by <b class="name">make</b>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="var">.MAKE.JOBS</b></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
The argument to the <b class="flag">&#45;j</b> option.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="var">.MAKE.JOB.PREFIX</b></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
If <b class="name">make</b> is run with <i class="arg">j</i> then output for each target is prefixed with a token &#8216;<code class="lit">--- target ---</code>&#8217; the first part of which can be controlled via <b class="var">.MAKE.JOB.PREFIX</b>. If <b class="var">.MAKE.JOB.PREFIX</b> is empty, no token is printed.<div style="height: 0.00em;">
&#160;</div>
For example: <code class="lit">.MAKE.JOB.PREFIX=${.newline}---${.MAKE:T}[${.MAKE.PID}]</code> would produce tokens like &#8216;<code class="lit">---make[1234] target ---</code>&#8217; making it easier to track the degree of parallelism being achieved.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">MAKEFLAGS</span></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
The environment variable &#8216;<code class="lit"><span class="env">MAKEFLAGS</span></code>&#8217; may contain anything that may be specified on <b class="name">make</b>'s command line. Anything specified on <b class="name">make</b>'s command line is appended to the &#8216;<code class="lit"><span class="env">MAKEFLAGS</span></code>&#8217; variable which is then entered into the environment for all programs which <b class="name">make</b> executes.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="var">.MAKE.LEVEL</b></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
The recursion depth of <b class="name">make</b>. The initial instance of <b class="name">make</b> will be 0, and an incremented value is put into the environment to be seen by the next generation. This allows tests like: <code class="lit">.if ${.MAKE.LEVEL} == 0</code> to protect things which should only be evaluated in the initial instance of <b class="name">make</b>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="var">.MAKE.MAKEFILE_PREFERENCE</b></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
The ordered list of makefile names (default &#8216;<code class="lit"><i class="file">makefile</i></code>&#8217;, &#8216;<code class="lit"><i class="file">Makefile</i></code>&#8217;) that <b class="name">make</b> will look for.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="var">.MAKE.MAKEFILES</b></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
The list of makefiles read by <b class="name">make</b>, which is useful for tracking dependencies. Each makefile is recorded only once, regardless of the number of times read.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="var">.MAKE.MODE</b></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
Processed after reading all makefiles. Can affect the mode that <b class="name">make</b> runs in. It can contain a number of keywords:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-hang">
<dt class="list-hang" style="margin-top: 1.00em;">
<i class="file">compat</i></dt>
<dd class="list-hang" style="margin-left: 10.00ex;">
Like <b class="flag">&#45;B</b>, puts <b class="name">make</b> into "compat" mode.</dd>
<dt class="list-hang" style="margin-top: 1.00em;">
<i class="file">meta</i></dt>
<dd class="list-hang" style="margin-left: 10.00ex;">
Puts <b class="name">make</b> into "meta" mode, where meta files are created for each target to capture the command run, the output generated and if <a class="link-man" href="../4/filemon">filemon(4)</a> is available, the system calls which are of interest to <b class="name">make</b>. The captured output can be very useful when diagnosing errors.</dd>
<dt class="list-hang" style="margin-top: 1.00em;">
<i class="file">curdirOk=</i> <i class="arg">bf</i></dt>
<dd class="list-hang" style="margin-left: 10.00ex;">
Normally <b class="name">make</b> will not create .meta files in &#8216;<code class="lit"><b class="var">.CURDIR</b></code>&#8217;. This can be overridden by setting <b class="var">bf</b> to a value which represents True.</dd>
<dt class="list-hang" style="margin-top: 1.00em;">
<i class="file">env</i></dt>
<dd class="list-hang" style="margin-left: 10.00ex;">
For debugging, it can be useful to inlcude the environment in the .meta file.</dd>
<dt class="list-hang" style="margin-top: 1.00em;">
<i class="file">verbose</i></dt>
<dd class="list-hang" style="margin-left: 10.00ex;">
If in "meta" mode, print a clue about the target being built. This is useful if the build is otherwise running silently. The message printed the value of: <b class="var">.MAKE.META.PREFIX</b>.</dd>
<dt class="list-hang" style="margin-top: 1.00em;">
<i class="file">ignore-cmd</i></dt>
<dd class="list-hang" style="margin-left: 10.00ex;">
Some makefiles have commands which are simply not stable. This keyword causes them to be ignored for determining whether a target is out of date in "meta" mode. See also <b class="cmd">.NOMETA_CMP</b>.</dd>
<dt class="list-hang" style="margin-top: 1.00em;">
<i class="file">silent=</i> <i class="arg">bf</i></dt>
<dd class="list-hang" style="margin-left: 10.00ex;">
If <b class="var">bf</b> is True, when a .meta file is created, mark the target <b class="cmd">.SILENT</b>.</dd>
</dl>
</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="var">.MAKE.META.BAILIWICK</b></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
In "meta" mode, provides a list of prefixes which match the directories controlled by <b class="name">make</b>. If a file that was generated outside of <b class="var">.OBJDIR</b> but within said bailiwick is missing, the current target is considered out-of-date.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="var">.MAKE.META.CREATED</b></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
In "meta" mode, this variable contains a list of all the meta files updated. If not empty, it can be used to trigger processing of <b class="var">.MAKE.META.FILES</b>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="var">.MAKE.META.FILES</b></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
In "meta" mode, this variable contains a list of all the meta files used (updated or not). This list can be used to process the meta files to extract dependency information.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="var">.MAKE.META.IGNORE_PATHS</b></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
Provides a list of path prefixes that should be ignored; because the contents are expected to change over time. The default list includes: &#8216;<code class="lit"><i class="file">/dev /etc /proc /tmp /var/run /var/tmp</i></code>&#8217;</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="var">.MAKE.META.PREFIX</b></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
Defines the message printed for each meta file updated in "meta verbose" mode. The default value is:<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit">Building ${.TARGET:H:tA}/${.TARGET:T}</code></div>
</blockquote>
</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="var">.MAKEOVERRIDES</b></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
This variable is used to record the names of variables assigned to on the command line, so that they may be exported as part of &#8216;<code class="lit"><span class="env">MAKEFLAGS</span></code>&#8217;. This behaviour can be disabled by assigning an empty value to &#8216;<code class="lit"><b class="var">.MAKEOVERRIDES</b></code>&#8217; within a makefile. Extra variables can be exported from a makefile by appending their names to &#8216;<code class="lit"><b class="var">.MAKEOVERRIDES</b></code>&#8217;. &#8216;<code class="lit"><span class="env">MAKEFLAGS</span></code>&#8217; is re-exported whenever &#8216;<code class="lit"><b class="var">.MAKEOVERRIDES</b></code>&#8217; is modified.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="var">.MAKE.PATH_FILEMON</b></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
If <b class="name">make</b> was built with <a class="link-man" href="../4/filemon">filemon(4)</a> support, this is set to the path of the device node. This allows makefiles to test for this support.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="var">.MAKE.PID</b></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
The process-id of <b class="name">make</b>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="var">.MAKE.PPID</b></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
The parent process-id of <b class="name">make</b>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="var">MAKE_PRINT_VAR_ON_ERROR</b></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
When <b class="name">make</b> stops due to an error, it prints its name and the value of &#8216;<code class="lit"><b class="var">.CURDIR</b></code>&#8217; as well as the value of any variables named in &#8216;<code class="lit"><b class="var">MAKE_PRINT_VAR_ON_ERROR</b></code>&#8217;.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="var">.newline</b></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
This variable is simply assigned a newline character as its value. This allows expansions using the <b class="flag">:@</b> modifier to put a newline between iterations of the loop rather than a space. For example, the printing of &#8216;<code class="lit"><b class="var">MAKE_PRINT_VAR_ON_ERROR</b></code>&#8217; could be done as ${MAKE_PRINT_VAR_ON_ERROR:@v@$v='${$v}'${.newline}@}.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="var">.OBJDIR</b></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
A path to the directory where the targets are built. Its value is determined by trying to <a class="link-man" href="../2/chdir">chdir(2)</a> to the following directories in order and using the first match:<ol style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-enum">
<li class="list-enum" style="margin-top: 1.00em;">
<span class="env">${MAKEOBJDIRPREFIX}${.CURDIR}</span><p>
(Only if &#8216;<code class="lit"><span class="env">MAKEOBJDIRPREFIX</span></code>&#8217; is set in the environment or on the command line.)</li>
<li class="list-enum" style="margin-top: 1.00em;">
<span class="env">${MAKEOBJDIR}</span><p>
(Only if &#8216;<code class="lit"><span class="env">MAKEOBJDIR</span></code>&#8217; is set in the environment or on the command line.)</li>
<li class="list-enum" style="margin-top: 1.00em;">
<span class="env">${.CURDIR}</span><i class="file">/obj.</i><span class="env">${MACHINE}</span></li>
<li class="list-enum" style="margin-top: 1.00em;">
<span class="env">${.CURDIR}</span><i class="file">/obj</i></li>
<li class="list-enum" style="margin-top: 1.00em;">
<i class="file">/usr/obj/</i><span class="env">${.CURDIR}</span></li>
<li class="list-enum" style="margin-top: 1.00em;">
<span class="env">${.CURDIR}</span></li>
</ol>
<p>
Variable expansion is performed on the value before it's used, so expressions such as<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit">${.CURDIR:S,^/usr/src,/var/obj,}</code></div>
</blockquote>
may be used. This is especially useful with &#8216;<code class="lit"><span class="env">MAKEOBJDIR</span></code>&#8217;.<p>
&#8216;<code class="lit"><b class="var">.OBJDIR</b></code>&#8217; may be modified in the makefile via the special target &#8216;<code class="lit"><b class="cmd">.OBJDIR</b></code>&#8217;. In all cases, <b class="name">make</b> will <a class="link-man" href="../2/chdir">chdir(2)</a> to the specified directory if it exists, and set &#8216;<code class="lit"><b class="var">.OBJDIR</b></code>&#8217; and &#8216;<code class="lit"><span class="env">PWD</span></code>&#8217; to that directory before executing any targets.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="var">.PARSEDIR</b></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
A path to the directory of the current &#8216;<code class="lit"><i class="file">Makefile</i></code>&#8217; being parsed.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="var">.PARSEFILE</b></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
The basename of the current &#8216;<code class="lit"><i class="file">Makefile</i></code>&#8217; being parsed. This variable and &#8216;<code class="lit"><b class="var">.PARSEDIR</b></code>&#8217; are both set only while the &#8216;<code class="lit"><i class="file">Makefiles</i></code>&#8217; are being parsed. If you want to retain their current values, assign them to a variable using assignment with expansion: (&#8216;<code class="lit"><b class="flag">:=</b></code>&#8217;).</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="var">.PATH</b></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
A variable that represents the list of directories that <b class="name">make</b> will search for files. The search list should be updated using the target &#8216;<code class="lit"><b class="var">.PATH</b></code>&#8217; rather than the variable.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">PWD</span></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
Alternate path to the current directory. <b class="name">make</b> normally sets &#8216;<code class="lit"><b class="var">.CURDIR</b></code>&#8217; to the canonical path given by <a class="link-man" href="../3/getcwd">getcwd(3)</a>. However, if the environment variable &#8216;<code class="lit"><span class="env">PWD</span></code>&#8217; is set and gives a path to the current directory, then <b class="name">make</b> sets &#8216;<code class="lit"><b class="var">.CURDIR</b></code>&#8217; to the value of &#8216;<code class="lit"><span class="env">PWD</span></code>&#8217; instead. This behaviour is disabled if &#8216;<code class="lit"><span class="env">MAKEOBJDIRPREFIX</span></code>&#8217; is set or &#8216;<code class="lit"><span class="env">MAKEOBJDIR</span></code>&#8217; contains a variable transform. &#8216;<code class="lit"><span class="env">PWD</span></code>&#8217; is set to the value of &#8216;<code class="lit"><b class="var">.OBJDIR</b></code>&#8217; for all programs which <b class="name">make</b> executes.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">.TARGETS</span></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
The list of targets explicitly specified on the command line, if any.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">VPATH</span></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
Colon-separated (&#8220;:&#8221;) lists of directories that <b class="name">make</b> will search for files. The variable is supported for compatibility with old make programs only, use &#8216;<code class="lit"><b class="var">.PATH</b></code>&#8217; instead.</dd>
</dl>
</div>
<div class="subsection">
<h2 id="x5661726961626c65206d6f64696669657273">Variable modifiers</h2> Variable expansion may be modified to select or modify each word of the variable (where a &#8220;word&#8221; is white-space delimited sequence of characters). The general format of a variable expansion is as follows:<p>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit">${variable[:modifier[:...]]}</code></div>
</blockquote>
<p>
Each modifier begins with a colon, which may be escaped with a backslash (&#8216;<code class="lit">&#92;</code>&#8217;).<p>
A set of modifiers can be specified via a variable, as follows:<p>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit">modifier_variable=modifier[:...]</code></div>
</blockquote>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit">${variable:${modifier_variable}[:...]}</code></div>
</blockquote>
<p>
In this case the first modifier in the modifier_variable does not start with a colon, since that must appear in the referencing variable. If any of the modifiers in the modifier_variable contain a dollar sign (&#8216;<code class="lit">$</code>&#8217;), these must be doubled to avoid early expansion.<p>
The supported modifiers are:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">:E</b></dt>
<dd class="list-tag" style="margin-left: 3.00ex;">
Replaces each word in the variable with its suffix.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">:H</b></dt>
<dd class="list-tag" style="margin-left: 3.00ex;">
Replaces each word in the variable with everything but the last component.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">:M</b><i class="arg">pattern</i></dt>
<dd class="list-tag" style="margin-left: 3.00ex;">
Select only those words that match <i class="arg">pattern</i>. The standard shell wildcard characters (&#8216;<code class="lit">*</code>&#8217;, &#8216;<code class="lit">?</code>&#8217;, and &#8216;<code class="lit">&#91;<span class="opt"></span>&#93;</code>&#8217;) may be used. The wildcard characters may be escaped with a backslash (&#8216;<code class="lit">&#92;</code>&#8217;). As a consequence of the way values are split into words, matched, and then joined, a construct like<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit">${VAR:M*}</code></div>
</blockquote>
will normalise the inter-word spacing, removing all leading and trailing space, and converting multiple consecutive spaces to single spaces.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">:N</b><i class="arg">pattern</i></dt>
<dd class="list-tag" style="margin-left: 3.00ex;">
This is identical to &#8216;<code class="lit"><b class="flag">:M</b></code>&#8217;, but selects all words which do not match <i class="arg">pattern</i>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">:O</b></dt>
<dd class="list-tag" style="margin-left: 3.00ex;">
Order every word in variable alphabetically. To sort words in reverse order use the &#8216;<code class="lit"><b class="flag">:O:[-1..1]</b></code>&#8217; combination of modifiers.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">:Ox</b></dt>
<dd class="list-tag" style="margin-left: 3.00ex;">
Randomize words in variable. The results will be different each time you are referring to the modified variable; use the assignment with expansion (&#8216;<code class="lit"><b class="flag">:=</b></code>&#8217;) to prevent such behaviour. For example,<p>
<pre style="margin-left: 5.00ex;" class="lit display">
LIST=			uno due tre quattro 
RANDOM_LIST=		${LIST:Ox} 
STATIC_RANDOM_LIST:=	${LIST:Ox} 
 
all: 
	@echo "${RANDOM_LIST}" 
	@echo "${RANDOM_LIST}" 
	@echo "${STATIC_RANDOM_LIST}" 
	@echo "${STATIC_RANDOM_LIST}"</pre>
may produce output similar to:<p>
<pre style="margin-left: 5.00ex;" class="lit display">
quattro due tre uno 
tre due quattro uno 
due uno quattro tre 
due uno quattro tre</pre>
</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">:Q</b></dt>
<dd class="list-tag" style="margin-left: 3.00ex;">
Quotes every shell meta-character in the variable, so that it can be passed safely through recursive invocations of <b class="name">make</b>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">:R</b></dt>
<dd class="list-tag" style="margin-left: 3.00ex;">
Replaces each word in the variable with everything but its suffix.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">:gmtime</b></dt>
<dd class="list-tag" style="margin-left: 3.00ex;">
The value is a format string for <a class="link-man" href="../3/strftime">strftime(3)</a>, using the current <a class="link-man" href="../3/gmtime">gmtime(3)</a>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">:hash</b></dt>
<dd class="list-tag" style="margin-left: 3.00ex;">
Compute a 32bit hash of the value and encode it as hex digits.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">:localtime</b></dt>
<dd class="list-tag" style="margin-left: 3.00ex;">
The value is a format string for <a class="link-man" href="../3/strftime">strftime(3)</a>, using the current <a class="link-man" href="../3/localtime">localtime(3)</a>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">:tA</b></dt>
<dd class="list-tag" style="margin-left: 3.00ex;">
Attempt to convert variable to an absolute path using <a class="link-man" href="../3/realpath">realpath(3)</a>, if that fails, the value is unchanged.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">:tl</b></dt>
<dd class="list-tag" style="margin-left: 3.00ex;">
Converts variable to lower-case letters.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">:ts</b><i class="arg">c</i></dt>
<dd class="list-tag" style="margin-left: 3.00ex;">
Words in the variable are normally separated by a space on expansion. This modifier sets the separator to the character <i class="arg">c</i>. If <i class="arg">c</i> is omitted, then no separator is used. The common escapes (including octal numeric codes), work as expected.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">:tu</b></dt>
<dd class="list-tag" style="margin-left: 3.00ex;">
Converts variable to upper-case letters.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">:tW</b></dt>
<dd class="list-tag" style="margin-left: 3.00ex;">
Causes the value to be treated as a single word (possibly containing embedded white space). See also &#8216;<code class="lit"><b class="flag">:[*]</b></code>&#8217;.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">:tw</b></dt>
<dd class="list-tag" style="margin-left: 3.00ex;">
Causes the value to be treated as a sequence of words delimited by white space. See also &#8216;<code class="lit"><b class="flag">:[@]</b></code>&#8217;.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">:S</b>/<i class="arg">old_string</i>/<i class="arg">new_string</i>/&#91;<span class="opt"><b class="flag">1gW</b></span>&#93;</dt>
<dd class="list-tag" style="margin-left: 3.00ex;">
 Modify the first occurrence of <i class="arg">old_string</i> in the variable's value, replacing it with <i class="arg">new_string</i>. If a &#8216;<code class="lit">g</code>&#8217; is appended to the last slash of the pattern, all occurrences in each word are replaced. If a &#8216;<code class="lit">1</code>&#8217; is appended to the last slash of the pattern, only the first word is affected. If a &#8216;<code class="lit">W</code>&#8217; is appended to the last slash of the pattern, then the value is treated as a single word (possibly containing embedded white space). If <i class="arg">old_string</i> begins with a caret (&#8216;<code class="lit">^</code>&#8217;), <i class="arg">old_string</i> is anchored at the beginning of each word. If <i class="arg">old_string</i> ends with a dollar sign (&#8216;<code class="lit">$</code>&#8217;), it is anchored at the end of each word. Inside <i class="arg">new_string</i>, an ampersand (&#8216;<code class="lit">&amp;</code>&#8217;) is replaced by <i class="arg">old_string</i> (without any &#8216;<code class="lit">^</code>&#8217; or &#8216;<code class="lit">$</code>&#8217;). Any character may be used as a delimiter for the parts of the modifier string. The anchoring, ampersand and delimiter characters may be escaped with a backslash (&#8216;<code class="lit">&#92;</code>&#8217;).<p>
Variable expansion occurs in the normal fashion inside both <i class="arg">old_string</i> and <i class="arg">new_string</i> with the single exception that a backslash is used to prevent the expansion of a dollar sign (&#8216;<code class="lit">$</code>&#8217;), not a preceding dollar sign as is usual.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">:C</b>/<i class="arg">pattern</i>/<i class="arg">replacement</i>/&#91;<span class="opt"><b class="flag">1gW</b></span>&#93;</dt>
<dd class="list-tag" style="margin-left: 3.00ex;">
 The <b class="flag">:C</b> modifier is just like the <b class="flag">:S</b> modifier except that the old and new strings, instead of being simple strings, are an extended regular expression (see <a class="link-man" href="../3/regex">regex(3)</a>) string <i class="arg">pattern</i> and an <a class="link-man" href="../1/ed">ed(1)</a>&#45;style string <i class="arg">replacement</i>. Normally, the first occurrence of the pattern <i class="arg">pattern</i> in each word of the value is substituted with <i class="arg">replacement</i>. The &#8216;<code class="lit">1</code>&#8217; modifier causes the substitution to apply to at most one word; the &#8216;<code class="lit">g</code>&#8217; modifier causes the substitution to apply to as many instances of the search pattern <i class="arg">pattern</i> as occur in the word or words it is found in; the &#8216;<code class="lit">W</code>&#8217; modifier causes the value to be treated as a single word (possibly containing embedded white space). Note that &#8216;<code class="lit">1</code>&#8217; and &#8216;<code class="lit">g</code>&#8217; are orthogonal; the former specifies whether multiple words are potentially affected, the latter whether multiple substitutions can potentially occur within each affected word.<p>
As for the <b class="flag">:S</b> modifier, the <i class="arg">pattern</i> and <i class="arg">replacement</i> are subjected to variable expansion before being parsed as regular expressions.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">:T</b></dt>
<dd class="list-tag" style="margin-left: 3.00ex;">
Replaces each word in the variable with its last component.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">:u</b></dt>
<dd class="list-tag" style="margin-left: 3.00ex;">
Remove adjacent duplicate words (like <a class="link-man" href="../1/uniq">uniq(1)</a>).</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">:?</b><i class="arg">true_string</i><b class="flag">:</b><i class="arg">false_string</i></dt>
<dd class="list-tag" style="margin-left: 3.00ex;">
 If the variable name (not its value), when parsed as a .if conditional expression, evaluates to true, return as its value the <i class="arg">true_string</i>, otherwise return the <i class="arg">false_string</i>. Since the variable name is used as the expression, :? must be the first modifier after the variable name itself - which will, of course, usually contain variable expansions. A common error is trying to use expressions like<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit">${NUMBERS:M42:?match:no}</code></div>
</blockquote>
which actually tests defined(NUMBERS), to determine is any words match "42" you need to use something like:<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit">${"${NUMBERS:M42}" != "":?match:no}.</code></div>
</blockquote>
</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="arg">:old_string=new_string</i></dt>
<dd class="list-tag" style="margin-left: 3.00ex;">
This is the AT&amp;T System&#160;V UNIX style variable substitution. It must be the last modifier specified. If <i class="arg">old_string</i> or <i class="arg">new_string</i> do not contain the pattern matching character <i class="arg">%</i> then it is assumed that they are anchored at the end of each word, so only suffixes or entire words may be replaced. Otherwise <i class="arg">%</i> is the substring of <i class="arg">old_string</i> to be replaced in <i class="arg">new_string</i>.<p>
Variable expansion occurs in the normal fashion inside both <i class="arg">old_string</i> and <i class="arg">new_string</i> with the single exception that a backslash is used to prevent the expansion of a dollar sign (&#8216;<code class="lit">$</code>&#8217;), not a preceding dollar sign as is usual.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">:@</b><i class="arg">temp</i><b class="flag">@</b><i class="arg">string</i><b class="flag">@</b></dt>
<dd class="list-tag" style="margin-left: 3.00ex;">
 This is the loop expansion mechanism from the OSF Development Environment (ODE) make. Unlike <b class="flag">.for</b> loops expansion occurs at the time of reference. Assign <i class="arg">temp</i> to each word in the variable and evaluate <i class="arg">string</i>. The ODE convention is that <i class="arg">temp</i> should start and end with a period. For example.<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit">${LINKS:@.LINK.@${LN} ${TARGET} ${.LINK.}@}</code></div>
</blockquote>
<p>
However a single character variable is often more readable:<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit">${MAKE_PRINT_VAR_ON_ERROR:@v@$v='${$v}'${.newline}@}</code></div>
</blockquote>
</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">:U</b><i class="arg">newval</i></dt>
<dd class="list-tag" style="margin-left: 3.00ex;">
If the variable is undefined <i class="arg">newval</i> is the value. If the variable is defined, the existing value is returned. This is another ODE make feature. It is handy for setting per-target CFLAGS for instance:<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit">${_${.TARGET:T}_CFLAGS:U${DEF_CFLAGS}}</code></div>
</blockquote>
If a value is only required if the variable is undefined, use:<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit">${VAR:D:Unewval}</code></div>
</blockquote>
</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">:D</b><i class="arg">newval</i></dt>
<dd class="list-tag" style="margin-left: 3.00ex;">
If the variable is defined <i class="arg">newval</i> is the value.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">:L</b></dt>
<dd class="list-tag" style="margin-left: 3.00ex;">
The name of the variable is the value.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">:P</b></dt>
<dd class="list-tag" style="margin-left: 3.00ex;">
The path of the node which has the same name as the variable is the value. If no such node exists or its path is null, then the name of the variable is used. In order for this modifier to work, the name (node) must at least have appeared on the rhs of a dependency.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">:!</b><i class="arg">cmd</i><b class="flag">!</b></dt>
<dd class="list-tag" style="margin-left: 3.00ex;">
 The output of running <i class="arg">cmd</i> is the value.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">:sh</b></dt>
<dd class="list-tag" style="margin-left: 3.00ex;">
If the variable is non-empty it is run as a command and the output becomes the new value.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">::=</b><i class="arg">str</i></dt>
<dd class="list-tag" style="margin-left: 3.00ex;">
The variable is assigned the value <i class="arg">str</i> after substitution. This modifier and its variations are useful in obscure situations such as wanting to set a variable when shell commands are being parsed. These assignment modifiers always expand to nothing, so if appearing in a rule line by themselves should be preceded with something to keep <b class="name">make</b> happy.<p>
The &#8216;<code class="lit"><b class="flag">::</b></code>&#8217; helps avoid false matches with the AT&amp;T System&#160;V UNIX style <b class="flag">:=</b> modifier and since substitution always occurs the <b class="flag">::=</b> form is vaguely appropriate.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">::?=</b><i class="arg">str</i></dt>
<dd class="list-tag" style="margin-left: 3.00ex;">
As for <b class="flag">::=</b> but only if the variable does not already have a value.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">::+=</b><i class="arg">str</i></dt>
<dd class="list-tag" style="margin-left: 3.00ex;">
Append <i class="arg">str</i> to the variable.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">::!=</b><i class="arg">cmd</i></dt>
<dd class="list-tag" style="margin-left: 3.00ex;">
Assign the output of <i class="arg">cmd</i> to the variable.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">:[</b><i class="arg">range</i><b class="flag">]</b></dt>
<dd class="list-tag" style="margin-left: 3.00ex;">
Selects one or more words from the value, or performs other operations related to the way in which the value is divided into words.<p>
Ordinarily, a value is treated as a sequence of words delimited by white space. Some modifiers suppress this behaviour, causing a value to be treated as a single word (possibly containing embedded white space). An empty value, or a value that consists entirely of white-space, is treated as a single word. For the purposes of the &#8216;<code class="lit"><b class="flag">:[]</b></code>&#8217; modifier, the words are indexed both forwards using positive integers (where index 1 represents the first word), and backwards using negative integers (where index &#45;1 represents the last word).<p>
The <i class="arg">range</i> is subjected to variable expansion, and the expanded result is then interpreted as follows:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="arg">index</i></dt>
<dd class="list-tag" style="margin-left: 5.00ex;">
Selects a single word from the value.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="arg">start</i><b class="flag">..</b><i class="arg">end</i></dt>
<dd class="list-tag" style="margin-left: 5.00ex;">
Selects all words from <i class="arg">start</i> to <i class="arg">end</i>, inclusive. For example, &#8216;<code class="lit"><b class="flag">:[2..-1]</b></code>&#8217; selects all words from the second word to the last word. If <i class="arg">start</i> is greater than <i class="arg">end</i>, then the words are output in reverse order. For example, &#8216;<code class="lit"><b class="flag">:[-1..1]</b></code>&#8217; selects all the words from last to first.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">*</b></dt>
<dd class="list-tag" style="margin-left: 5.00ex;">
Causes subsequent modifiers to treat the value as a single word (possibly containing embedded white space). Analogous to the effect of "$*" in Bourne shell.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
0</dt>
<dd class="list-tag" style="margin-left: 5.00ex;">
Means the same as &#8216;<code class="lit"><b class="flag">:[*]</b></code>&#8217;.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">@</b></dt>
<dd class="list-tag" style="margin-left: 5.00ex;">
Causes subsequent modifiers to treat the value as a sequence of words delimited by white space. Analogous to the effect of "$@" in Bourne shell.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">#</b></dt>
<dd class="list-tag" style="margin-left: 5.00ex;">
Returns the number of words in the value.</dd>
</dl>
</dd>
</dl>
</div>
</div>
<div class="section">
<h1 id="x494e434c5544452053544154454d454e54532c20434f4e444954494f4e414c5320414e4420464f52204c4f4f5053">INCLUDE STATEMENTS, CONDITIONALS AND FOR LOOPS</h1> Makefile inclusion, conditional structures and for loops  reminiscent of the C programming language are provided in <b class="name">make</b>. All such structures are identified by a line beginning with a single dot (&#8216;<code class="lit">.</code>&#8217;) character. Files are included with either <b class="flag">.include</b> &#60;<i class="arg">file</i>&#62; or <b class="flag">.include</b> &#34;<i class="arg">file</i>&#34;. Variables between the angle brackets or double quotes are expanded to form the file name. If angle brackets are used, the included makefile is expected to be in the system makefile directory. If double quotes are used, the including makefile's directory and any directories specified using the <b class="flag">&#45;I</b> option are searched before the system makefile directory. For compatibility with other versions of <b class="name">make</b> &#8216;<code class="lit">include file ...</code>&#8217; is also accepted. If the include statement is written as <b class="flag">.-include</b> or as <b class="flag">.sinclude</b> then errors locating and/or opening include files are ignored.<p>
Conditional expressions are also preceded by a single dot as the first character of a line. The possible conditionals are as follows:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">.error</b> <i class="arg">message</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
The message is printed along with the name of the makefile and line number, then <b class="name">make</b> will exit.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">.export</b> <i class="arg">variable ...</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Export the specified global variable. If no variable list is provided, all globals are exported except for internal variables (those that start with &#8216;<code class="lit">.</code>&#8217;). This is not affected by the <b class="flag">&#45;X</b> flag, so should be used with caution. For compatibility with other <b class="name">make</b> programs &#8216;<code class="lit">export variable=value</code>&#8217; is also accepted.<p>
Appending a variable name to <b class="var">.MAKE.EXPORTED</b> is equivalent to exporting a variable.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">.export-env</b> <i class="arg">variable ...</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
The same as &#8216;<code class="lit">.export</code>&#8217;, except that the variable is not appended to <b class="var">.MAKE.EXPORTED</b>. This allows exporting a value to the environment which is different from that used by <b class="name">make</b> internally.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">.info</b> <i class="arg">message</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
The message is printed along with the name of the makefile and line number.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">.undef</b> <i class="arg">variable</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Un-define the specified global variable. Only global variables may be un-defined.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">.unexport</b> <i class="arg">variable ...</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
The opposite of &#8216;<code class="lit">.export</code>&#8217;. The specified global <b class="var">variable</b> will be removed from <b class="var">.MAKE.EXPORTED</b>. If no variable list is provided, all globals are unexported, and <b class="var">.MAKE.EXPORTED</b> deleted.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">.unexport-env</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Unexport all globals previously exported and clear the environment inherited from the parent. This operation will cause a memory leak of the original environment, so should be used sparingly. Testing for <b class="var">.MAKE.LEVEL</b> being 0, would make sense. Also note that any variables which originated in the parent environment should be explicitly preserved if desired. For example:<p>
<pre style="margin-left: 5.00ex;" class="lit display">
<code class="lit">.if ${.MAKE.LEVEL} == 0</code> 
PATH := ${PATH} 
<code class="lit">.unexport-env</code> 
<code class="lit">.export PATH</code> 
<code class="lit">.endif</code> 
<p>
</pre>
Would result in an environment containing only &#8216;<code class="lit"><span class="env">PATH</span></code>&#8217;, which is the minimal useful environment. Actually &#8216;<code class="lit"><span class="env">.MAKE.LEVEL</span></code>&#8217; will also be pushed into the new environment.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">.warning</b> <i class="arg">message</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
The message prefixed by &#8216;<code class="lit"><i class="file">warning:</i></code>&#8217; is printed along with the name of the makefile and line number.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">.if</b> &#91;<span class="opt">!</span>&#93;<i class="arg">expression</i> &#91;<span class="opt"><i class="arg">operator expression ...</i></span>&#93;</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Test the value of an expression.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">.ifdef</b> &#91;<span class="opt">!</span>&#93;<i class="arg">variable</i> &#91;<span class="opt"><i class="arg">operator variable ...</i></span>&#93;</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Test the value of a variable.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">.ifndef</b> &#91;<span class="opt">!</span>&#93;<i class="arg">variable</i> &#91;<span class="opt"><i class="arg">operator variable ...</i></span>&#93;</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Test the value of a variable.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">.ifmake</b> &#91;<span class="opt">!</span>&#93;<i class="arg">target</i> &#91;<span class="opt"><i class="arg">operator target ...</i></span>&#93;</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Test the target being built.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">.ifnmake</b> &#91;<span class="opt">!</span>&#93; <i class="arg">target</i> &#91;<span class="opt"><i class="arg">operator target ...</i></span>&#93;</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Test the target being built.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">.else</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Reverse the sense of the last conditional.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">.elif</b> &#91;<span class="opt">!</span>&#93; <i class="arg">expression</i> &#91;<span class="opt"><i class="arg">operator expression ...</i></span>&#93;</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
A combination of &#8216;<code class="lit"><b class="cmd">.else</b></code>&#8217; followed by &#8216;<code class="lit"><b class="cmd">.if</b></code>&#8217;.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">.elifdef</b> &#91;<span class="opt">!</span>&#93;<i class="arg">variable</i> &#91;<span class="opt"><i class="arg">operator variable ...</i></span>&#93;</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
A combination of &#8216;<code class="lit"><b class="cmd">.else</b></code>&#8217; followed by &#8216;<code class="lit"><b class="cmd">.ifdef</b></code>&#8217;.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">.elifndef</b> &#91;<span class="opt">!</span>&#93;<i class="arg">variable</i> &#91;<span class="opt"><i class="arg">operator variable ...</i></span>&#93;</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
A combination of &#8216;<code class="lit"><b class="cmd">.else</b></code>&#8217; followed by &#8216;<code class="lit"><b class="cmd">.ifndef</b></code>&#8217;.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">.elifmake</b> &#91;<span class="opt">!</span>&#93;<i class="arg">target</i> &#91;<span class="opt"><i class="arg">operator target ...</i></span>&#93;</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
A combination of &#8216;<code class="lit"><b class="cmd">.else</b></code>&#8217; followed by &#8216;<code class="lit"><b class="cmd">.ifmake</b></code>&#8217;.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">.elifnmake</b> &#91;<span class="opt">!</span>&#93;<i class="arg">target</i> &#91;<span class="opt"><i class="arg">operator target ...</i></span>&#93;</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
A combination of &#8216;<code class="lit"><b class="cmd">.else</b></code>&#8217; followed by &#8216;<code class="lit"><b class="cmd">.ifnmake</b></code>&#8217;.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">.endif</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
End the body of the conditional.</dd>
</dl>
<p>
The <i class="arg">operator</i> may be any one of the following:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">||</b></dt>
<dd class="list-tag" style="margin-left: 5.00ex;">
Logical OR.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&amp;&amp;</b></dt>
<dd class="list-tag" style="margin-left: 5.00ex;">
Logical AND; of higher precedence than &#8220;||&#8221;.</dd>
</dl>
<p>
As in C, <b class="name">make</b> will only evaluate a conditional as far as is necessary to determine its value. Parentheses may be used to change the order of evaluation. The boolean operator &#8216;<code class="lit"><b class="cmd">!</b></code>&#8217; may be used to logically negate an entire conditional. It is of higher precedence than &#8216;<code class="lit"><b class="cmd">&amp;&amp;</b></code>&#8217;.<p>
The value of <i class="arg">expression</i> may be any of the following:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">defined</b></dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
Takes a variable name as an argument and evaluates to true if the variable has been defined.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">make</b></dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
Takes a target name as an argument and evaluates to true if the target was specified as part of <b class="name">make</b>'s command line or was declared the default target (either implicitly or explicitly, see <b class="var">.MAIN</b>) before the line containing the conditional.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">empty</b></dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
Takes a variable, with possible modifiers, and evaluates to true if the expansion of the variable would result in an empty string.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">exists</b></dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
Takes a file name as an argument and evaluates to true if the file exists. The file is searched for on the system search path (see <b class="var">.PATH</b>).</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">target</b></dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
Takes a target name as an argument and evaluates to true if the target has been defined.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">commands</b></dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
Takes a target name as an argument and evaluates to true if the target has been defined and has commands associated with it.</dd>
</dl>
<p>
<i class="arg">Expression</i> may also be an arithmetic or string comparison. Variable expansion is performed on both sides of the comparison, after which the integral values are compared. A value is interpreted as hexadecimal if it is preceded by 0x, otherwise it is decimal; octal numbers are not supported. The standard C relational operators are all supported. If after variable expansion, either the left or right hand side of a &#8216;<code class="lit"><b class="cmd">==</b></code>&#8217; or &#8216;<code class="lit"><b class="cmd">!=</b></code>&#8217; operator is not an integral value, then string comparison is performed between the expanded variables. If no relational operator is given, it is assumed that the expanded variable is being compared against 0 or an empty string in the case of a string comparison.<p>
When <b class="name">make</b> is evaluating one of these conditional expressions, and it encounters a (white-space separated) word it doesn't recognize, either the &#8220;make&#8221; or &#8220;defined&#8221; expression is applied to it, depending on the form of the conditional. If the form is &#8216;<code class="lit"><b class="cmd">.ifdef</b></code>&#8217;, &#8216;<code class="lit"><b class="cmd">.ifndef</b></code>&#8217;, or &#8216;<code class="lit"><b class="cmd">.if</b></code>&#8217; the &#8220;defined&#8221; expression is applied. Similarly, if the form is &#8216;<code class="lit"><b class="cmd">.ifmake</b></code>&#8217; or &#8216;<code class="lit"><b class="cmd">.ifnmake</b>, <b class="cmd">the</b></code>&#8217; &#8220;make&#8221; expression is applied.<p>
If the conditional evaluates to true the parsing of the makefile continues as before. If it evaluates to false, the following lines are skipped. In both cases this continues until a &#8216;<code class="lit"><b class="cmd">.else</b></code>&#8217; or &#8216;<code class="lit"><b class="cmd">.endif</b></code>&#8217; is found.<p>
For loops are typically used to apply a set of rules to a list of files. The syntax of a for loop is:<p>
<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="cmd">.for</b> <i class="arg">variable</i> &#91;<span class="opt"><i class="arg">variable ...</i></span>&#93; <b class="cmd">in</b> <i class="arg">expression</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
&#60;make-rules&#62;</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="cmd">.endfor</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
</dd>
</dl>
<p>
After the for <b class="cmd">expression</b> is evaluated, it is split into words. On each iteration of the loop, one word is taken and assigned to each <b class="cmd">variable</b>, in order, and these <b class="cmd">variables</b> are substituted into the <b class="cmd">make-rules</b> inside the body of the for loop. The number of words must come out even; that is, if there are three iteration variables, the number of words provided must be a multiple of three.</div>
<div class="section">
<h1 id="x434f4d4d454e5453">COMMENTS</h1> Comments begin with a hash (&#8216;<code class="lit">#</code>&#8217;) character, anywhere but in a shell command line, and continue to the end of an unescaped new line.</div>
<div class="section">
<h1 id="x5350454349414c20534f555243455320284154545249425554455329">SPECIAL SOURCES (ATTRIBUTES)</h1><dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">.EXEC</b></dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
Target is never out of date, but always execute commands anyway.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">.IGNORE</b></dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
Ignore any errors from the commands associated with this target, exactly as if they all were preceded by a dash (&#8216;<code class="lit">&#45;</code>&#8217;).</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">.MADE</b></dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
Mark all sources of this target as being up-to-date.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">.MAKE</b></dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
Execute the commands associated with this target even if the <b class="flag">&#45;n</b> or <b class="flag">&#45;t</b> options were specified. Normally used to mark recursive <b class="name">make</b>s.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">.META</b></dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
Create a meta file for the target, even if it is flagged as <b class="cmd">.PHONY</b>, <b class="cmd">.MAKE</b>, or <b class="cmd">.SPECIAL</b>. Usage in conjunction with <b class="cmd">.MAKE</b> is the most likely case. In "meta" mode, the target is out-of-date if the meta file is missing.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">.NOMETA</b></dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
Do not create a meta file for the target. Meta files are also not created for <b class="cmd">.PHONY</b>, <b class="cmd">.MAKE</b>, or <b class="cmd">.SPECIAL</b> targets.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">.NOMETA_CMP</b></dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
Ignore differences in commands when deciding if target is out of date. This is useful if the command contains a value which always changes. If the number of commands change, though, the target will still be out of date. The same effect applies to any command line that uses the variable <b class="var">.OODATE</b>, which can be used for that purpose even when not otherwise needed or desired:<p>
<pre style="margin-left: 5.00ex;" class="lit display">
 
skip-compare-for-some: 
	@echo this will be compared 
	@echo this will not ${.OODATE:M.NOMETA_CMP} 
	@echo this will also be compared 
</pre>
The <b class="flag">:M</b> pattern suppresses any expansion of the unwanted variable.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">.NOPATH</b></dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
Do not search for the target in the directories specified by <b class="cmd">.PATH</b>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">.NOTMAIN</b></dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
Normally <b class="name">make</b> selects the first target it encounters as the default target to be built if no target was specified. This source prevents this target from being selected.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">.OPTIONAL</b></dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
If a target is marked with this attribute and <b class="name">make</b> can't figure out how to create it, it will ignore this fact and assume the file isn't needed or already exists.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">.PHONY</b></dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
The target does not correspond to an actual file; it is always considered to be out of date, and will not be created with the <b class="flag">&#45;t</b> option. Suffix-transformation rules are not applied to <b class="cmd">.PHONY</b> targets.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">.PRECIOUS</b></dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
When <b class="name">make</b> is interrupted, it normally removes any partially made targets. This source prevents the target from being removed.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">.RECURSIVE</b></dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
Synonym for <b class="cmd">.MAKE</b>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">.SILENT</b></dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
Do not echo any of the commands associated with this target, exactly as if they all were preceded by an at sign (&#8216;<code class="lit">@</code>&#8217;).</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">.USE</b></dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
Turn the target into <b class="name">make</b>'s version of a macro. When the target is used as a source for another target, the other target acquires the commands, sources, and attributes (except for <b class="cmd">.USE</b>) of the source. If the target already has commands, the <b class="cmd">.USE</b> target's commands are appended to them.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">.USEBEFORE</b></dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
Exactly like <b class="cmd">.USE</b>, but prepend the <b class="cmd">.USEBEFORE</b> target commands to the target.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">.WAIT</b></dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
If <b class="cmd">.WAIT</b> appears in a dependency line, the sources that precede it are made before the sources that succeed it in the line. Since the dependents of files are not made until the file itself could be made, this also stops the dependents being built unless they are needed for another branch of the dependency tree. So given:<p>
<pre style="margin-left: 0.00ex;" class="lit display">
x: a .WAIT b 
	echo x 
a: 
	echo a 
b: b1 
	echo b 
b1: 
	echo b1 
</pre>
the output is always &#8216;<code class="lit">a</code>&#8217;, &#8216;<code class="lit">b1</code>&#8217;, &#8216;<code class="lit">b</code>&#8217;, &#8216;<code class="lit">x</code>&#8217;.<div style="height: 0.00em;">
&#160;</div>
The ordering imposed by <b class="cmd">.WAIT</b> is only relevant for parallel makes.</dd>
</dl>
</div>
<div class="section">
<h1 id="x5350454349414c2054415247455453">SPECIAL TARGETS</h1> Special targets may not be included with other targets, i.e. they must be the only target specified.<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">.BEGIN</b></dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
Any command lines attached to this target are executed before anything else is done.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">.DEFAULT</b></dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
This is sort of a <b class="cmd">.USE</b> rule for any target (that was used only as a source) that <b class="name">make</b> can't figure out any other way to create. Only the shell script is used. The <b class="cmd">.IMPSRC</b> variable of a target that inherits <b class="cmd">.DEFAULT</b>'s commands is set to the target's own name.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">.END</b></dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
Any command lines attached to this target are executed after everything else is done.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">.ERROR</b></dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
Any command lines attached to this target are executed when another target fails. The <b class="cmd">.ERROR_TARGET</b> variable is set to the target that failed. See also <b class="cmd">MAKE_PRINT_VAR_ON_ERROR</b>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">.IGNORE</b></dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
Mark each of the sources with the <b class="cmd">.IGNORE</b> attribute. If no sources are specified, this is the equivalent of specifying the <b class="flag">&#45;i</b> option.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">.INTERRUPT</b></dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
If <b class="name">make</b> is interrupted, the commands for this target will be executed.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">.MAIN</b></dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
If no target is specified when <b class="name">make</b> is invoked, this target will be built.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">.MAKEFLAGS</b></dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
This target provides a way to specify flags for <b class="name">make</b> when the makefile is used. The flags are as if typed to the shell, though the <b class="flag">&#45;f</b> option will have no effect.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">.NOPATH</b></dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
Apply the <b class="cmd">.NOPATH</b> attribute to any specified sources.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">.NOTPARALLEL</b></dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
Disable parallel mode.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">.NO_PARALLEL</b></dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
Synonym for <b class="cmd">.NOTPARALLEL</b>, for compatibility with other pmake variants.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">.OBJDIR</b></dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
The source is a new value for &#8216;<code class="lit"><b class="var">.OBJDIR</b></code>&#8217;. If it exists, <b class="name">make</b> will <a class="link-man" href="../2/chdir">chdir(2)</a> to it and update the value of &#8216;<code class="lit"><b class="var">.OBJDIR</b></code>&#8217;.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">.ORDER</b></dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
The named targets are made in sequence. This ordering does not add targets to the list of targets to be made. Since the dependents of a target do not get built until the target itself could be built, unless &#8216;<code class="lit">a</code>&#8217; is built by another part of the dependency graph, the following is a dependency loop:<p>
<pre style="margin-left: 0.00ex;" class="lit display">
.ORDER: b a 
b: a</pre>
<p>
The ordering imposed by <b class="cmd">.ORDER</b> is only relevant for parallel makes.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">.PATH</b></dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
The sources are directories which are to be searched for files not found in the current directory. If no sources are specified, any previously specified directories are deleted. If the source is the special <b class="cmd">.DOTLAST</b> target, then the current working directory is searched last.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">.PATH.</b><b class="var">suffix</b></dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
Like <b class="cmd">.PATH</b> but applies only to files with a particular suffix. The suffix must have been previously declared with <b class="cmd">.SUFFIXES</b>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">.PHONY</b></dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
Apply the <b class="cmd">.PHONY</b> attribute to any specified sources.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">.PRECIOUS</b></dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
Apply the <b class="cmd">.PRECIOUS</b> attribute to any specified sources. If no sources are specified, the <b class="cmd">.PRECIOUS</b> attribute is applied to every target in the file.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">.SHELL</b></dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
Sets the shell that <b class="name">make</b> will use to execute commands. The sources are a set of <i class="arg">field=value</i> pairs.<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="arg">name</i></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
This is the minimal specification, used to select one of the builtin shell specs; <i class="arg">sh</i>, <i class="arg">ksh</i>, and <i class="arg">csh</i>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="arg">path</i></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
Specifies the path to the shell.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="arg">hasErrCtl</i></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
Indicates whether the shell supports exit on error.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="arg">check</i></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
The command to turn on error checking.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="arg">ignore</i></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
The command to disable error checking.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="arg">echo</i></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
The command to turn on echoing of commands executed.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="arg">quiet</i></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
The command to turn off echoing of commands executed.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="arg">filter</i></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
The output to filter after issuing the <i class="arg">quiet</i> command. It is typically identical to <i class="arg">quiet</i>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="arg">errFlag</i></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
The flag to pass the shell to enable error checking.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="arg">echoFlag</i></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
The flag to pass the shell to enable command echoing.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="arg">newline</i></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
The string literal to pass the shell that results in a single newline character when used outside of any quoting characters.</dd>
</dl>
Example:<p>
<pre style="margin-left: 0.00ex;" class="lit display">
.SHELL: name=ksh path=/bin/ksh hasErrCtl=true &#92; 
	check="set &#45;e" ignore="set +e" &#92; 
	echo="set &#45;v" quiet="set +v" filter="set +v" &#92; 
	echoFlag=v errFlag=e newline="'&#92;n'"</pre>
</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">.SILENT</b></dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
Apply the <b class="cmd">.SILENT</b> attribute to any specified sources. If no sources are specified, the <b class="cmd">.SILENT</b> attribute is applied to every command in the file.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">.STALE</b></dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
This target gets run when a dependency file contains stale entries, having <b class="var">.ALLSRC</b> set to the name of that dependency file.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">.SUFFIXES</b></dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
Each source specifies a suffix to <b class="name">make</b>. If no sources are specified, any previously specified suffixes are deleted. It allows the creation of suffix-transformation rules.<p>
Example:<p>
<pre style="margin-left: 0.00ex;" class="lit display">
.SUFFIXES: .o 
.c.o: 
	cc &#45;o ${.TARGET} &#45;c ${.IMPSRC}</pre>
</dd>
</dl>
</div>
<div class="section">
<h1 id="x454e5649524f4e4d454e54">ENVIRONMENT</h1> <b class="name">make</b> uses the following environment variables, if they exist: <span class="env">MACHINE</span>, <span class="env">MACHINE_ARCH</span>, <span class="env">MAKE</span>, <span class="env">MAKEFLAGS</span>, <span class="env">MAKEOBJDIR</span>, <span class="env">MAKEOBJDIRPREFIX</span>, <span class="env">MAKESYSPATH</span>, <span class="env">PWD</span>, and <span class="env">TMPDIR</span>.<p>
<span class="env">MAKEOBJDIRPREFIX</span> and <span class="env">MAKEOBJDIR</span> may only be set in the environment or on the command line to <b class="name">make</b> and not as makefile variables; see the description of &#8216;<code class="lit"><b class="var">.OBJDIR</b></code>&#8217; for more details.</div>
<div class="section">
<h1 id="x46494c4553">FILES</h1><dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
.depend</dt>
<dd class="list-tag" style="margin-left: 13.00ex;">
list of dependencies</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
Makefile</dt>
<dd class="list-tag" style="margin-left: 13.00ex;">
list of dependencies</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
makefile</dt>
<dd class="list-tag" style="margin-left: 13.00ex;">
list of dependencies</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
sys.mk</dt>
<dd class="list-tag" style="margin-left: 13.00ex;">
system makefile</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
/usr/share/mk</dt>
<dd class="list-tag" style="margin-left: 13.00ex;">
system makefile directory</dd>
</dl>
</div>
<div class="section">
<h1 id="x434f4d5041544942494c495459">COMPATIBILITY</h1> The basic make syntax is compatible between different versions of make; however the special variables, variable modifiers and conditionals are not.<div class="subsection">
<h2 id="x4f6c6465722076657273696f6e73">Older versions</h2> An incomplete list of changes in older versions of <b class="name">make</b>:<p>
The way that .for loop variables are substituted changed after <span class="unix">NetBSD&#160;5.0</span> so that they still appear to be variable expansions. In particular this stops them being treated as syntax, and removes some obscure problems using them in .if statements.<p>
The way that parallel makes are scheduled changed in <span class="unix">NetBSD&#160;4.0</span> so that .ORDER and .WAIT apply recursively to the dependent nodes. The algorithms used may change again in the future.</div>
<div class="subsection">
<h2 id="x4f74686572206d616b65206469616c65637473">Other make dialects</h2> Other make dialects (GNU make, SVR4 make, POSIX make, etc.) do not support most of the features of <b class="name">make</b> as described in this manual. Most notably:<ul style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 5.00ex;" class="list list-bul">
<li class="list-bul" style="margin-top: 1.00em;">
The <b class="cmd">.WAIT</b> and <b class="cmd">.ORDER</b> declarations and most functionality pertaining to parallelization. (GNU make supports parallelization but lacks these features needed to control it effectively.)</li>
<li class="list-bul" style="margin-top: 1.00em;">
Directives, including for loops and conditionals and most of the forms of include files. (GNU make has its own incompatible and less powerful syntax for conditionals.)</li>
<li class="list-bul" style="margin-top: 1.00em;">
All built-in variables that begin with a dot.</li>
<li class="list-bul" style="margin-top: 1.00em;">
Most of the special sources and targets that begin with a dot, with the notable exception of <b class="cmd">.PHONY</b>, <b class="cmd">.PRECIOUS</b>, and <b class="cmd">.SUFFIXES</b>.</li>
<li class="list-bul" style="margin-top: 1.00em;">
Variable modifiers, except for the<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit">:old=new</code></div>
</blockquote>
string substitution, which does not portably support globbing with &#8216;<code class="lit">%</code>&#8217; and historically only works on declared suffixes.</li>
<li class="list-bul" style="margin-top: 1.00em;">
The <b class="cmd">$&gt;</b> variable even in its short form; most makes support this functionality but its name varies.</li>
</ul>
<p>
Some features are somewhat more portable, such as assignment with <b class="cmd">+=</b>, <b class="cmd">?=</b>, and <b class="cmd">!=</b>. The <b class="cmd">.PATH</b> functionality is based on an older feature <b class="cmd">VPATH</b> found in GNU make and many versions of SVR4 make; however, historically its behavior is too ill-defined (and too buggy) to rely upon.<p>
The <b class="cmd">$@</b> and <b class="cmd">$&lt;</b> variables are more or less universally portable, as is the <b class="cmd">$(MAKE)</b> variable. Basic use of suffix rules (for files only in the current directory, not trying to chain transformations together, etc.) is also reasonably portable.</div>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../1/mkdep">mkdep(1)</a></div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> A <b class="name">make</b> command appeared in Version&#160;7 AT&amp;T UNIX. This <b class="name">make</b> implementation is based on Adam De Boor's pmake program which was written for Sprite at Berkeley. It was designed to be a parallel distributed make running jobs on different machines using a daemon called &#8220;customs&#8221;.<p>
Historically the target/dependency &#8220;FRC&#8221; has been used to FoRCe rebuilding (since the target/dependency does not exist... unless someone creates an &#8220;FRC&#8221; file).</div>
<div class="section">
<h1 id="x42554753">BUGS</h1> The <b class="name">make</b> syntax is difficult to parse without actually acting of the data. For instance finding the end of a variable use should involve scanning each the modifiers using the correct terminator for each field. In many places <b class="name">make</b> just counts {} and () in order to find the end of a variable expansion.<p>
There is no way of escaping a space character in a filename.</div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
June 4, 2015</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
</html>

