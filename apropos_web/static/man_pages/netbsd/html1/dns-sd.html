<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="../style.css" type="text/css" media="all">
<title>
dns-sd(1)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
dns-sd(1)</td>
<td class="head-vol" align="center">
General Commands Manual</td>
<td class="head-rtitle" align="right">
dns-sd(1)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">dns-sd</b> &#8212; <span class="desc">Multicast DNS (mDNS) &amp; DNS Service Discovery (DNS-SD) Test Tool</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1><table class="synopsis">
<col style="width: 6.00ex;">
<col>
<tbody>
<tr>
<td>
<b class="flag">&#45;R</b> <i class="arg">name type domain port</i> &#91;<span class="opt"><i class="arg">key=value ...</i></span>&#93;</td>
<td>
</td>
</tr>
</tbody>
</table>
<p>
<br>
<table class="synopsis">
<col style="width: 6.00ex;">
<col>
<tbody>
<tr>
<td>
<b class="flag">&#45;B</b> <i class="arg">type domain</i></td>
<td>
</td>
</tr>
</tbody>
</table>
<p>
<br>
<table class="synopsis">
<col style="width: 6.00ex;">
<col>
<tbody>
<tr>
<td>
<b class="flag">&#45;L</b> <i class="arg">name type domain</i></td>
<td>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> The <b class="name">dns-sd</b> command is a network diagnostic tool, much like <a class="link-man" href="../html8/ping.html">ping(8)</a> or <a class="link-man" href="../html8/traceroute.html">traceroute(8)</a>. However, unlike those tools, most of its functionality is not implemented in the <b class="name">dns-sd</b> executable itself, but in library code that is available to any application. The library API that <b class="name">dns-sd</b> uses is documented in <i class="file">/usr/include/dns_sd.h</i>.<p>
The <b class="name">dns-sd</b> command is primarily intended for interactive use. Because its command-line arguments and output format are subject to change, invoking it from a shell script will generally be fragile. Additionally, the asynchronous nature of DNS Service Discovery does not lend itself easily to script-oriented programming. For example, calls like "browse" never complete; the action of performing a "browse" sets in motion machinery to notify the client whenever instances of that service type appear or disappear from the network. These notifications continue to be delivered indefinitely, for minutes, hours, or even days, as services come and go, until the client explicitly terminates the call. This style of asynchronous interaction works best with applications that are either multi-threaded, or use a main event-handling loop to receive keystrokes, network data, and other asynchronous event notifications as they happen.<div style="height: 0.00em;">
&#160;</div>
If you wish to perform DNS Service Discovery operations from a scripting language, then the best way to do this is not to execute the <b class="name">dns-sd</b> command and then attempt to decipher the textual output, but instead to directly call the DNS-SD APIs using a binding for your chosen language.<div style="height: 0.00em;">
&#160;</div>
For example, if you are programming in Ruby, then you can directly call DNS-SD APIs using the dnssd package documented at <i class="file">&lt;http://rubyforge.org/projects/dnssd/&gt;</i>.<div style="height: 0.00em;">
&#160;</div>
Similar bindings for other languages are also in development.<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="name">dns-sd</b> <b class="flag">&#45;R</b> <i class="arg">name type domain port</i> &#91;<span class="opt"><i class="arg">key=value ...</i></span>&#93;</dt>
<dd class="list-tag" style="margin-left: 1.00ex;">
register (advertise) a service in the specified <i class="arg">domain</i> with the given <i class="arg">name</i> and <i class="arg">type</i> as listening (on the current machine) on <i class="arg">port.</i><p>
<i class="arg">name</i> can be arbitrary unicode text, containing any legal unicode characters (including dots, spaces, slashes, colons, etc. without restriction), up to 63 UTF-8 bytes long. <i class="arg">type</i> must be of the form "_app-proto._tcp" or "_app-proto._udp", where "app-proto" is an application protocol name registered at <i class="file">http://www.dns-sd.org/ServiceTypes.html</i>.<p>
<i class="arg">domain</i> is the domain in which to register the service. In current implementations, only the local multicast domain "local" is supported. In the future, registering will be supported in any arbitrary domain that has a working DNS Update server [RFC 2136]. The <i class="arg">domain</i> "." is a synonym for "pick a sensible default" which today means "local".<p>
<i class="arg">port</i> is a number from 0 to 65535, and is the TCP or UDP port number upon which the service is listening.<p>
Additional attributes of the service may optionally be described by key/value pairs, which are stored in the advertised service's DNS TXT record. Allowable keys and values are listed with the service registration at <i class="file">http://www.dns-sd.org/ServiceTypes.html</i>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="name">dns-sd</b> <b class="flag">&#45;B</b> <i class="arg">type domain</i></dt>
<dd class="list-tag" style="margin-left: 1.00ex;">
browse for instances of service <i class="arg">type</i> in <i class="arg">domain</i>.<p>
For valid <i class="arg">type</i>s see <i class="file">http://www.dns-sd.org/ServiceTypes.html</i> as described above. Omitting the <i class="arg">domain</i> or using "." means "pick a sensible default."</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="name">dns-sd</b> <b class="flag">&#45;L</b> <i class="arg">name type domain</i></dt>
<dd class="list-tag" style="margin-left: 1.00ex;">
look up and display the information necessary to contact and use the named service: the hostname of the machine where that service is available, the port number on which the service is listening, and (if present) TXT record attributes describing properties of the service.<p>
Note that in a typical application, browsing happens rarely, while lookup (or "resolving") happens every time the service is used. For example, a user browses the network to pick a default printer fairly rarely, but once a default printer has been picked, that named service is resolved to its current IP address and port number every time the user presses Cmd-P to print.</dd>
</dl>
</div>
<div class="section">
<h1 id="x4558414d504c4553">EXAMPLES</h1> To advertise the existence of LPR printing service on port 515 on this machine, such that it will be discovered by the Mac OS X printing software and other DNS-SD compatible printing clients, use:<p>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit"><b class="name">dns-sd</b> <b class="flag">&#45;R</b>&#160;"My Test" _printer._tcp. . 515 pdl=application/postscript</code></div>
</blockquote>
<p>
For this registration to be useful, you need to actually have LPR service available on port 515. Advertising a service that does not exist is not very useful, and will be confusing and annoying to other people on the network.<p>
Similarly, to advertise a web page being served by an HTTP server on port 80 on this machine, such that it will show up in the Bonjour list in Safari and other DNS-SD compatible Web clients, use:<p>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit"><b class="name">dns-sd</b> <b class="flag">&#45;R</b>&#160;"My Test" _http._tcp . 80 path=/path-to-page.html</code></div>
</blockquote>
<p>
To find the advertised web pages on the local network (the same list that Safari shows), use:<p>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit"><b class="name">dns-sd</b> <b class="flag">&#45;B</b>&#160;_http._tcp</code></div>
</blockquote>
<p>
While that command is running, in another window, try the <b class="name">dns-sd</b> <b class="flag">&#45;R</b> example given above to advertise a web page, and you should see the "Add" event reported to the <b class="name">dns-sd</b> <b class="flag">&#45;B</b> window. Now press Ctrl-C in the <b class="name">dns-sd</b> <b class="flag">&#45;R</b> window and you should see the "Remove" event reported to the <b class="name">dns-sd</b> <b class="flag">&#45;B</b> window.</div>
<div class="section">
<h1 id="x46494c4553">FILES</h1> <i class="file">/usr/bin/dns-sd</i></div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../html8/mdnsd.html">mdnsd(8)</a></div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> The <b class="name">dns-sd</b> command first appeared in <span class="unix">NetBSD&#160;6.0</span>, having originated in Mac OS X 10.4 (Tiger).</div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
April 2004</td>
<td class="foot-os" align="right">
NetBSD</td>
</tr>
</tbody>
</table>
</div>
</body>
</html>

