<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/../4/strict.dtd">
>
<head>
<meta http-equiv="Content-Type" content="te../; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="../style.css" type="text/css" media="all">
<title>
SNTP(1)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
SNTP(1)</td>
<td class="head-vol" align="center">
User</td>
<td class="head-rtitle" align="right">
SNTP(1)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">sntp</b> &#8212; <span class="desc">standard Simple Network Time Protocol client program</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1><table class="synopsis">
<col style="width: 4.00ex;">
<col>
<tbody>
<tr>
<td>
sntp</td>
<td>
&#91;<span class="opt"><b class="flag">&#45;flags</b></span>&#93; &#91;<span class="opt"><b class="flag">&#45;flag</b> &#91;<span class="opt"><i class="arg">value</i></span>&#93;</span>&#93; &#91;<span class="opt"><b class="flag">&#45;&#45;option&#45;name</b>&#91;<span class="opt">&#91;<span class="opt">=| </span>&#93;<i class="arg">value</i></span>&#93;</span>&#93; [ hostname&#45;or&#45;IP ...]</td>
</tr>
</tbody>
</table>
</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> <b class="name">sntp</b> can be used as an SNTP client to query a NTP or SNTP server and either display the time or set the local system's time (given suitable privilege).  It can be run as an interactive command or from a <b class="cmd">cron</b> job. NTP (the Network Time Protocol) and SNTP (the Simple Network Time Protocol) are defined and described by RFC 5905.<p>
The default is to write the estimated correct local date and time (i.e. not UTC) to the standard output in a format like: <b class="cmd">'1996&#45;10&#45;15 20:17:25.123 (+0800) +4.567 +/&#45; 0.089 [host] IP sN'</b> where the <b class="cmd">'(+0800)'</b> means that to get to UTC from the reported local time one must add 8 hours and 0 minutes, the <b class="cmd">'+4.567'</b> indicates the local clock is 4.567 seconds behind the correct time (so 4.567 seconds must be added to the local clock to get it to be correct). Note that the number of decimals printed for this value will change based on the reported precision of the server. <b class="cmd">'+/&#45; 0.089'</b> is the reported <span class="emph">synchronization distance</span> (in seconds), which represents the maximum error due to all causes. If the server does not report valid data needed to calculate the synchronization distance, this will be reported as <b class="cmd">'+/&#45; ?'</b>. If the <span class="emph">host</span> is different from the <span class="emph">IP</span>, both will be displayed. Otherwise, only the <span class="emph">IP</span> is displayed. Finally, the <span class="emph">stratum</span> of the host is reported.</div>
<div class="section">
<h1 id="x4f5054494f4e53">OPTIONS</h1><dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;4</b>, <b class="flag">&#45;&#45;ipv4</b></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
Force IPv4 DNS name resolution. This option must not appear in combination with any of the following options: ipv6.<div style="height: 1.00em;">
&#160;</div>
Force DNS resolution of the following host names on the command line to the IPv4 namespace.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;6</b>, <b class="flag">&#45;&#45;ipv6</b></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
Force IPv6 DNS name resolution. This option must not appear in combination with any of the following options: ipv4.<div style="height: 1.00em;">
&#160;</div>
Force DNS resolution of the following host names on the command line to the IPv6 namespace.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;a</b> <i class="arg">auth&#45;keynumber</i>, <b class="flag">&#45;&#45;authentication</b>=<i class="arg">auth&#45;keynumber</i></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
Enable authentication with the key <b>auth&#45;keynumber</b>. This option takes an integer number as its argument.<div style="height: 1.00em;">
&#160;</div>
Enable authentication using the key specified in this option's argument.  The argument of this option is the  <b>keyid</b>, a number specified in the  <b>keyfile</b> as this key's identifier. See the  <b>keyfile</b> option (<b>&#45;k</b>) for more details.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;b</b> <i class="arg">broadcast&#45;address</i>, <b class="flag">&#45;&#45;broadcast</b>=<i class="arg">broadcast&#45;address</i></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
Listen to the address specified for broadcast time sync. This option may appear an unlimited number of times.<div style="height: 1.00em;">
&#160;</div>
If specified <b>sntp</b> will listen to the specified address for NTP broadcasts.  The default maximum wait time can (and probably should) be modified with  <b>&#45;t</b>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;c</b> <i class="arg">host&#45;name</i>, <b class="flag">&#45;&#45;concurrent</b>=<i class="arg">host&#45;name</i></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
Concurrently query all IPs returned for host&#45;name. This option may appear an unlimited number of times.<div style="height: 1.00em;">
&#160;</div>
Requests from an NTP "client" to a "server" should never be sent more rapidly than one every 2 seconds.  By default, any IPs returned as part of a DNS lookup are assumed to be for a single instance of  <b>ntpd</b>, and therefore <b>sntp</b> will send queries to these IPs one after another, with a 2&#45;second gap in between each query.<div style="height: 1.00em;">
&#160;</div>
The <b>&#45;c</b> or <b>&#45;&#45;concurrent</b> flag says that any IPs returned for the DNS lookup of the supplied host&#45;name are on different machines, so we can send concurrent queries.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;d</b>, <b class="flag">&#45;&#45;debug&#45;level</b></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
Increase debug verbosity level. This option may appear an unlimited number of times.<div style="height: 1.00em;">
&#160;</div>
</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;D</b> <i class="arg">number</i>, <b class="flag">&#45;&#45;set&#45;debug&#45;level</b>=<i class="arg">number</i></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
Set the debug verbosity level. This option may appear an unlimited number of times. This option takes an integer number as its argument.<div style="height: 1.00em;">
&#160;</div>
</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;g</b> <i class="arg">milliseconds</i>, <b class="flag">&#45;&#45;gap</b>=<i class="arg">milliseconds</i></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
The gap (in milliseconds) between time requests. This option takes an integer number as its argument. The default <i class="arg">milliseconds</i> for this option is:<br>
 50<div style="height: 1.00em;">
&#160;</div>
Since we're only going to use the first valid response we get and there is benefit to specifying a good number of servers to query, separate the queries we send out by the specified number of milliseconds.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;K</b> <i class="arg">file&#45;name</i>, <b class="flag">&#45;&#45;kod</b>=<i class="arg">file&#45;name</i></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
KoD history filename. The default <i class="arg">file&#45;name</i> for this option is:<br>
 /var/db/ntp&#45;kod<div style="height: 1.00em;">
&#160;</div>
Specifies the filename to be used for the persistent history of KoD responses received from servers.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;k</b> <i class="arg">file&#45;name</i>, <b class="flag">&#45;&#45;keyfile</b>=<i class="arg">file&#45;name</i></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
Look in this file for the key specified with <b>&#45;a</b>.<div style="height: 1.00em;">
&#160;</div>
This option specifies the keyfile.  <b>sntp</b> will search for the key specified with <b>&#45;a</b>  <i>keyno</i> in this file.  See <b>ntp.keys(5)</b> for more information.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;l</b> <i class="arg">file&#45;name</i>, <b class="flag">&#45;&#45;logfile</b>=<i class="arg">file&#45;name</i></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
Log to specified logfile.<div style="height: 1.00em;">
&#160;</div>
This option causes the client to write log messages to the specified  <i>logfile</i>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;M</b> <i class="arg">number</i>, <b class="flag">&#45;&#45;steplimit</b>=<i class="arg">number</i></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
Adjustments less than <b>steplimit</b> msec will be slewed. This option takes an integer number as its argument. The value of <i class="arg">number</i> is constrained to being: greater than or equal to 0<div style="height: 1.00em;">
&#160;</div>
If the time adjustment is less than <i>steplimit</i> milliseconds, slew the amount using  <b>adjtime(2)</b>.  Otherwise, step the correction using  <b>settimeofday(2)</b>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;o</b> <i class="arg">number</i>, <b class="flag">&#45;&#45;ntpversion</b>=<i class="arg">number</i></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
Send <b>int</b> as our NTP protocol version. This option takes an integer number as its argument. The value of <i class="arg">number</i> is constrained to being: in the range  0 through 7 The default <i class="arg">number</i> for this option is:<br>
 4<div style="height: 1.00em;">
&#160;</div>
When sending requests to a remote server, tell them we are running NTP protocol version  <i>ntpversion</i> .</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;r</b>, <b class="flag">&#45;&#45;usereservedport</b></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
Use the NTP Reserved Port (port 123).<div style="height: 1.00em;">
&#160;</div>
Use port 123, which is reserved for NTP, for our network communications.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;S</b>, <b class="flag">&#45;&#45;step</b></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
OK to 'step' the time with <b>settimeofday(2)</b>.<div style="height: 1.00em;">
&#160;</div>
</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;s</b>, <b class="flag">&#45;&#45;slew</b></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
OK to 'slew' the time with <b>adjtime(2)</b>.<div style="height: 1.00em;">
&#160;</div>
</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;t</b> <i class="arg">seconds</i>, <b class="flag">&#45;&#45;timeout</b>=<i class="arg">seconds</i></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
The number of seconds to wait for responses. This option takes an integer number as its argument. The default <i class="arg">seconds</i> for this option is:<br>
 5<div style="height: 1.00em;">
&#160;</div>
When waiting for a reply, <b>sntp</b> will wait the number of seconds specified before giving up.  The default should be more than enough for a unicast response.  If  <b>sntp</b> is only waiting for a broadcast response a longer timeout is likely needed.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;&#45;wait</b>, <b class="flag">&#45; Fl &#45;no&#45;wait</b></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
Wait for pending replies (if not setting the time). The  <i>no&#45;wait</i> form will disable the option. This option is enabled by default.<div style="height: 1.00em;">
&#160;</div>
If we are not setting the time, wait for all pending responses.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;?</b>, <b class="flag">&#45;&#45;help</b></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
Display usage information and exit.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;!</b>, <b class="flag">&#45;&#45;more&#45;help</b></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
Pass the extended usage information through a pager.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;&gt;</b> &#91;<span class="opt"><i class="arg">cfgfile</i></span>&#93;, <b class="flag">&#45;&#45;save&#45;opts</b> &#91;<span class="opt">=<i class="arg">cfgfile</i></span>&#93;</dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
Save the option state to <i>cfgfile</i>.  The default is the <i>last</i> configuration file listed in the  <b>OPTION PRESETS</b> section, below. The command will exit after updating the config file.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;&lt;</b> <i class="arg">cfgfile</i>, <b class="flag">&#45;&#45;load&#45;opts</b>=<i class="arg">cfgfile</i>, <b class="flag">&#45;&#45;no&#45;load&#45;opts</b></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
Load options from <i>cfgfile</i>. The  <i>no&#45;load&#45;opts</i> form will disable the loading of earlier config/rc/ini files.   <i>&#45;&#45;no&#45;load&#45;opts</i> is handled early, out of order.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;&#45;version</b> &#91;<span class="opt">&#123;<i class="arg">v|c|n</i>&#125;</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
Output version of program and exit.  The default mode is `v', a simple version.  The `c' mode will print copyright information and `n' will print the full copyright notice.</dd>
</dl>
</div>
<div class="section">
<h1 id="x4f5054494f4e2050524553455453">OPTION PRESETS</h1> Any option that is not marked as  <i>not presettable</i> may be preset by loading values from configuration ("RC" or ".INI") file(s) and values from environment variables named:<br>
  <b>SNTP_&lt;option&#45;name&gt;</b> or <b>SNTP</b> The environmental presets take precedence (are processed later than) the configuration files. The  <i>homerc</i> files are "<i>$HOME</i>", and "<i>.</i>". If any of these are directories, then the file  <i>.ntprc</i> is searched for within those directories. cvt_prog='/usr/local/gnu/share/autogen/texi2mdoc' cvt_prog=`cd &#768;dirname "$cvt_prog"&#768; &gt;/dev/null &amp;&amp; pwd<br>
         `/`basename "$cvt_prog"` cd $tmp_dir test &#45;x "$cvt_prog" || die "'$cvt_prog' is not executable" {<br>
    list='synopsis description options option&#45;presets'<br>
    for f in $list ; do cat $f ; echo ; done<br>
    rm &#45;f $list name<br>
    list='implementation&#45;notes environment files examples exit&#45;status errors<br>
        compatibility see&#45;also conforming&#45;to history authors copyright bugs<br>
        notes'<br>
    for f in $list ; do cat $f ; echo ; done &gt; .end&#45;doc<br>
    rm &#45;f $list<br>
    list=`ls &#45;1 *`' .end&#45;doc'<br>
    for f in $list ; do cat $f ; echo ; done<br>
    rm &#45;f $list } 1&gt;.doc 2&gt;/dev/null sed &#45;f .cmds .doc | /usr/local/gnu/bin/grep &#45;E &#45;v '^[ 	]*$' | $cvt_prog</div>
<div class="section">
<h1 id="x5553414745">USAGE</h1><dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<code class="lit">sntp ntpserver.somewhere</code></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
is the simplest use of this program and can be run as an unprivileged command to check the current time and error in the local clock.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<code class="lit">sntp &#45;a ntpserver.somewhere</code></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
With suitable privilege, run as a command or from a <a class="link-man" href="../8/cron">cron(8)</a> job, <b class="cmd">sntp &#45;a</b> will reset the local clock from a synchronized specified server, like the (deprecated) <a class="link-man" href="../8/ntpdate">ntpdate(8)</a>, or <a class="link-man" href="../8/rdate">rdate(8)</a> commands.</dd>
</dl>
</div>
<div class="section">
<h1 id="x454e5649524f4e4d454e54">ENVIRONMENT</h1> See  <b>OPTION PRESETS</b> for configuration environment variables.</div>
<div class="section">
<h1 id="x46494c4553">FILES</h1> See  <b>OPTION PRESETS</b> for configuration files.</div>
<div class="section">
<h1 id="x4558495420535441545553">EXIT STATUS</h1> One of the following exit values will be returned:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
0  (EXIT_SUCCESS)</dt>
<dd class="list-tag" style="margin-left: 18.00ex;">
Successful program execution.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
1  (EXIT_FAILURE)</dt>
<dd class="list-tag" style="margin-left: 18.00ex;">
The operation failed or the command syntax was not valid.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
66  (EX_NOINPUT)</dt>
<dd class="list-tag" style="margin-left: 18.00ex;">
A specified configuration file could not be loaded.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
70  (EX_SOFTWARE)</dt>
<dd class="list-tag" style="margin-left: 18.00ex;">
libopts had an internal operational error.  Please report it to autogen&#45;users@lists.sourceforge.net.  Thank you.</dd>
</dl>
</div>
<div class="section">
<h1 id="x415554484f5253">AUTHORS</h1> <span class="author">Johannes Maximilian Kuehn</span> <span class="author">Harlan Stenn</span> <span class="author">Dave Hart</span></div>
<div class="section">
<h1 id="x434f50595249474854">COPYRIGHT</h1> Copyright (C) 1970&#45;2013 The University of Delaware all rights reserved. This program is released under the terms of the NTP license, &lt;http://ntp.org/license&gt;.</div>
<div class="section">
<h1 id="x42554753">BUGS</h1> Please send bug reports to: http://bugs.ntp.org, bugs@ntp.org</div>
<div class="section">
<h1 id="x4e4f544553">NOTES</h1> This document corresponds to version 4.2.7p404 of <b class="name">sntp</b>.<p>
This manual page was <i>AutoGen</i>&#45;erated from the <b>sntp</b> option definitions.</div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
December 24 2013</td>
<td class="foot-os" align="right">
SunOS 5.10</td>
</tr>
</tbody>
</table>
</div>
</body>
<>

