<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="../style.css" type="text/css" media="all">
<title>
SU(1)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
SU(1)</td>
<td class="head-vol" align="center">
General Commands Manual</td>
<td class="head-rtitle" align="right">
SU(1)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">su</b> &#8212; <span class="desc">substitute user identity</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1><table class="synopsis">
<col style="width: 2.00ex;">
<col>
<tbody>
<tr>
<td>
su</td>
<td>
&#91;<span class="opt"><b class="flag">&#45;dfKlm</b></span>&#93; &#91;<span class="opt"><b class="flag">&#45;c</b> <i class="arg">login-class</i></span>&#93; &#91;<span class="opt"><i class="arg">login</i>&#91;<span class="opt">:<i class="arg">group</i></span>&#93; &#91;<span class="opt"><i class="arg">shell arguments</i></span>&#93;</span>&#93;</td>
</tr>
</tbody>
</table>
<br>
<table class="synopsis">
<col style="width: 2.00ex;">
<col>
<tbody>
<tr>
<td>
su</td>
<td>
&#91;<span class="opt"><b class="flag">&#45;dfKlm</b></span>&#93; &#91;<span class="opt"><b class="flag">&#45;c</b> <i class="arg">login-class</i></span>&#93; &#91;<span class="opt">:<i class="arg">group</i> &#91;<span class="opt"><i class="arg">shell arguments</i></span>&#93;</span>&#93;</td>
</tr>
</tbody>
</table>
</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> <b class="name">su</b> allows one user to become another user <i class="arg">login</i> without logging out and in as the new user. If a <i class="arg">group</i> is specified and <i class="arg">login</i> is a member of <i class="arg">group</i>, then the group is changed to <i class="arg">group</i> rather than to <i class="arg">login</i>'s primary group. If <i class="arg">login</i> is omitted and <i class="arg">group</i> is provided (form two above), then <i class="arg">login</i> is assumed to be the current username.<p>
When executed by a user, the <i class="arg">login</i> user's password is requested. When using Kerberos, the password for <i class="arg">login</i> (or for &#8220;<i class="arg">login</i>.root&#8221;, if no login is provided) is requested, and <b class="name">su</b> switches to that user and group ID after obtaining a Kerberos ticket granting ticket. A shell is then executed, and any additional <i class="arg">shell arguments</i> after the login name are passed to the shell. <b class="name">su</b> will resort to the local password file to find the password for <i class="arg">login</i> if there is a Kerberos error. If <b class="name">su</b> is executed by root, no password is requested and a shell with the appropriate user ID is executed; no additional Kerberos tickets are obtained.<p>
Alternatively, if the user enters the password "s/key", authentication will use the S/Key one-time password system as described in <a class="link-man" href="../1/skey">skey(1)</a>. S/Key is a Trademark of Bellcore.<p>
By default, the environment is unmodified with the exception of <span class="env">LOGNAME</span>, <span class="env">USER</span>, <span class="env">HOME</span>, <span class="env">SHELL</span>, and <span class="env">SU_FROM</span>. <span class="env">HOME</span> and <span class="env">SHELL</span> are set to the target login's default values. <span class="env">LOGNAME</span> and <span class="env">USER</span> are set to the target login, unless the target login has a user ID of 0, in which case they are unmodified. <span class="env">SU_FROM</span> is set to the caller's login. The invoked shell is the target login's. With the exception of <span class="env">SU_FROM</span> this is the traditional behavior of <b class="name">su</b>.<p>
The options are as follows:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;c</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Specify a login class. You may only override the default class if you're already root. See <a class="link-man" href="../5/login.conf">login.conf(5)</a> for details.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;d</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Same as <b class="flag">&#45;l</b>, but does not change the current directory.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;f</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
If the invoked shell is <a class="link-man" href="../1/csh">csh(1)</a>, this option prevents it from reading the &#8220;<i class="file">.cshrc</i>&#8221; file. If the invoked shell is <a class="link-man" href="../1/sh">sh(1)</a>, or <a class="link-man" href="../1/ksh">ksh(1)</a>, this option unsets <span class="env">ENV</span>, thus preventing the shell from executing the startup file pointed to by this variable.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;K</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Do not attempt to use Kerberos to authenticate the user.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;l</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Simulate a full login. The environment is discarded except for <span class="env">HOME</span>, <span class="env">SHELL</span>, <span class="env">PATH</span>, <span class="env">TERM</span>, <span class="env">LOGNAME</span>, <span class="env">USER</span>, and <span class="env">SU_FROM</span>. <span class="env">HOME</span>, <span class="env">SHELL</span>, and <span class="env">SU_FROM</span> are modified as above. <span class="env">LOGNAME</span> and <span class="env">USER</span> are set to the target login. <span class="env">PATH</span> is set to the path specified in the <i class="file">/etc/login.conf</i> file (or to the default of &#8220;<i class="file">/usr/bin:/bin:/usr/pkg/bin:/usr/local/bin</i>&#8221; ). <span class="env">TERM</span> is imported from your current environment. The invoked shell is the target login's, and <b class="name">su</b> will change directory to the target login's home directory. The <a class="link-man" href="../5/utmp">utmp(5)</a>, <a class="link-man" href="../5/wtmp">wtmp(5)</a>, and <a class="link-man" href="../5/lastlogin">lastlogin(5)</a> databases are not updated.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Same as <b class="flag">&#45;l</b>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;m</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Leave the environment unmodified. The invoked shell is your login shell, and no directory changes are made. As a security precaution, if the target user's shell is a non-standard shell (as defined by <a class="link-man" href="../3/getusershell">getusershell(3)</a>) and the caller's real uid is non-zero, <b class="name">su</b> will fail.</dd>
</dl>
<p>
The <b class="flag">&#45;l</b> and <b class="flag">&#45;m</b> options are mutually exclusive; the last one specified overrides any previous ones.<p>
Only users in group &#8220;wheel&#8221; (normally gid 0), as listed in <i class="file">/etc/group</i>, can <b class="name">su</b> to &#8220;root&#8221;, unless group wheel does not exist or has no members. (If you do not want anybody to be able to <b class="name">su</b> to &#8220;root&#8221;, make &#8220;root&#8221; the only member of group &#8220;wheel&#8221;, which is the default.)<p>
For sites with very large user populations, group &#8220;wheel&#8221; can contain the names of other groups that will be considered authorized to <b class="name">su</b> to &#8220;root&#8221;.<p>
By default (unless the prompt is reset by a startup file) the super-user prompt is set to &#8220;<span class="symb">#</span>&#8221; to remind one of its awesome power.</div>
<div class="section">
<h1 id="x435553544f4d495a4154494f4e">CUSTOMIZATION</h1><dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
Changing required group</dt>
<dd class="list-tag" style="margin-left: 0.00ex;">
For the <a class="link-man" href="../8/pam">pam(8)</a> version of <b class="name">su</b> the name of the required group can be changed by setting <i class="arg">gname</i> in <a class="link-man" href="../5/pam.conf">pam.conf(5)</a>:<p>
<pre style="margin-left: 0.00ex;" class="lit display">
auth requisite pam_group.so no_warn group=gname root_only fail_safe</pre>
<p>
For the non <a class="link-man" href="../8/pam">pam(8)</a> version of <b class="name">su</b> the same can be achieved by compiling with <span class="define">SU_GROUP</span> set to the desired group name.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
Supplying own password</dt>
<dd class="list-tag" style="margin-left: 0.00ex;">
<b class="name">su</b> can be configured so that users in a particular group can supply their own password to become &#8220;root&#8221;. For the <a class="link-man" href="../8/pam">pam(8)</a> version of <b class="name">su</b> this can be done by adding a line to <a class="link-man" href="../5/pam.conf">pam.conf(5)</a> such as:<p>
<pre style="margin-left: 0.00ex;" class="lit display">
auth sufficient pam_group.so no_warn group=gname root_only authenticate</pre>
<p>
where <i class="arg">gname</i> is the name of the desired group. For the non <a class="link-man" href="../8/pam">pam(8)</a> version of <b class="name">su</b> the same can be achieved by compiling with <span class="define">SU_ROOTAUTH</span> set to the desired group name.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
Indirect groups</dt>
<dd class="list-tag" style="margin-left: 0.00ex;">
This option is not available with the <a class="link-man" href="../8/pam">pam(8)</a> version of <b class="name">su</b>. For the non <a class="link-man" href="../8/pam">pam(8)</a> version of <b class="name">su</b>, if <span class="define">SU_INDIRECT_GROUP</span> is defined, the <i class="arg">SU_GROUP</i> and <i class="arg">SU_ROOTAUTH</i> groups are treated as indirect groups. The group members of those two groups are treated as groups themselves.</dd>
</dl>
</div>
<div class="section">
<h1 id="x454e5649524f4e4d454e54">ENVIRONMENT</h1> Environment variables used by <b class="name">su</b>:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">HOME</span></dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
Default home directory of real user ID unless modified as specified above.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">LOGNAME</span></dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
The user ID is always the effective ID (the target user ID) after an <b class="name">su</b> unless the user ID is 0 (root).</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">PATH</span></dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
Default search path of real user ID unless modified as specified above.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">TERM</span></dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
Provides terminal type which may be retained for the substituted user ID.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">USER</span></dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
The user ID is always the effective ID (the target user ID) after an <b class="name">su</b> unless the user ID is 0 (root).</dd>
</dl>
</div>
<div class="section">
<h1 id="x4558495420535441545553">EXIT STATUS</h1> <b class="name">su</b> returns the exit status of the executed subshell, or 1 if any error occurred while switching privileges.</div>
<div class="section">
<h1 id="x4558414d504c4553">EXAMPLES</h1> To become user username and use the same environment as in original shell, execute:<p>
<pre style="margin-left: 5.00ex;" class="lit display">
su username</pre>
<p>
To become user username and use environment as if full login would be performed, execute:<p>
<pre style="margin-left: 5.00ex;" class="lit display">
su -l username</pre>
<p>
When a <b class="flag">&#45;c</b> option is included <span class="emph">after</span> the <i class="arg">login</i> name it is not a <b class="name">su</b> option, because any arguments after the <i class="arg">login</i> are passed to the shell. (See <a class="link-man" href="../1/csh">csh(1)</a>, <a class="link-man" href="../1/ksh">ksh(1)</a> or <a class="link-man" href="../1/sh">sh(1)</a> for details.) To execute arbitrary command with privileges of user <span class="emph">username</span>, execute:<p>
<pre style="margin-left: 5.00ex;" class="lit display">
su username -c "command args"</pre>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../1/csh">csh(1)</a>, <a class="link-man" href="../1/kinit">kinit(1)</a>, <a class="link-man" href="../1/login">login(1)</a>, <a class="link-man" href="../1/sh">sh(1)</a>, <a class="link-man" href="../1/skey">skey(1)</a>, <a class="link-man" href="../3/setusercontext">setusercontext(3)</a>, <a class="link-man" href="../5/group">group(5)</a>, <a class="link-man" href="../5/login.conf">login.conf(5)</a>, <a class="link-man" href="../5/passwd">passwd(5)</a>, <a class="link-man" href="../7/environ">environ(7)</a>, <a class="link-man" href="../8/kerberos">kerberos(8)</a></div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> A <b class="name">su</b> command existed in Version&#160;5 AT&amp;T UNIX (and probably earlier).</div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
November 20, 2012</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
</html>

