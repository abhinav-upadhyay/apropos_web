<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/../4/strict.dtd">
>
<head>
<meta http-equiv="Content-Type" content="te../; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="../style.css" type="text/css" media="all">
<title>
NETPGPKEYS(1)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
NETPGPKEYS(1)</td>
<td class="head-vol" align="center">
General Commands Manual</td>
<td class="head-rtitle" align="right">
NETPGPKEYS(1)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">netpgpkeys</b> &#8212; <span class="desc">PGP key management utility</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1><table class="synopsis">
<col style="width: 10.00ex;">
<col>
<tbody>
<tr>
<td>
netpgpkeys</td>
<td>
<b class="flag">&#45;</b><b class="flag">&#45;export&#45;key</b> &#91;<span class="opt">options</span>&#93; <i class="arg">file ...</i></td>
</tr>
</tbody>
</table>
<br>
<table class="synopsis">
<col style="width: 10.00ex;">
<col>
<tbody>
<tr>
<td>
netpgpkeys</td>
<td>
<b class="flag">&#45;</b><b class="flag">&#45;find&#45;key</b> &#91;<span class="opt">options</span>&#93; <i class="arg">file ...</i></td>
</tr>
</tbody>
</table>
<br>
<table class="synopsis">
<col style="width: 10.00ex;">
<col>
<tbody>
<tr>
<td>
netpgpkeys</td>
<td>
<b class="flag">&#45;</b><b class="flag">&#45;generate&#45;key</b> &#91;<span class="opt">options</span>&#93; <i class="arg">file ...</i></td>
</tr>
</tbody>
</table>
<br>
<table class="synopsis">
<col style="width: 10.00ex;">
<col>
<tbody>
<tr>
<td>
netpgpkeys</td>
<td>
<b class="flag">&#45;</b><b class="flag">&#45;import&#45;key</b> &#91;<span class="opt">options</span>&#93; <i class="arg">file ...</i></td>
</tr>
</tbody>
</table>
<br>
<table class="synopsis">
<col style="width: 10.00ex;">
<col>
<tbody>
<tr>
<td>
netpgpkeys</td>
<td>
<b class="flag">&#45;</b><b class="flag">&#45;list&#45;keys</b> &#91;<span class="opt">options</span>&#93; <i class="arg">file ...</i></td>
</tr>
</tbody>
</table>
<br>
<table class="synopsis">
<col style="width: 10.00ex;">
<col>
<tbody>
<tr>
<td>
netpgpkeys</td>
<td>
<b class="flag">&#45;</b><b class="flag">&#45;list&#45;sigs</b> &#91;<span class="opt">options</span>&#93; <i class="arg">file ...</i></td>
</tr>
</tbody>
</table>
<br>
<table class="synopsis">
<col style="width: 10.00ex;">
<col>
<tbody>
<tr>
<td>
netpgpkeys</td>
<td>
<b class="flag">&#45;</b><b class="flag">&#45;trusted&#45;keys</b> &#91;<span class="opt">options</span>&#93; <i class="arg">key ...</i></td>
</tr>
</tbody>
</table>
<br>
<table class="synopsis">
<col style="width: 10.00ex;">
<col>
<tbody>
<tr>
<td>
netpgpkeys</td>
<td>
<b class="flag">&#45;</b><b class="flag">&#45;version</b></td>
</tr>
</tbody>
</table>
<br>
<table class="synopsis">
<col style="width: 10.00ex;">
<col>
<tbody>
<tr>
<td>
netpgpkeys</td>
<td>
&#91;<span class="opt"><b class="flag">&#45;Vgls</b></span>&#93; &#91;<span class="opt"><b class="flag">&#45;olong-option</b>=value</span>&#93; <i class="arg">file ...</i></td>
</tr>
</tbody>
</table>
<p>
where the long options for all commands are:<p>
&#91;<span class="opt"><b class="flag">&#45;</b><b class="flag">&#45;cipher</b>=<i class="arg">cipher&#45;algorithm</i></span>&#93;<div style="height: 0.00em;">
&#160;</div>
&#91;<span class="opt"><b class="flag">&#45;</b><b class="flag">&#45;coredumps</b></span>&#93;<div style="height: 0.00em;">
&#160;</div>
&#91;<span class="opt"><b class="flag">&#45;</b><b class="flag">&#45;hash</b>=<i class="arg">hash&#45;algorithm</i></span>&#93;<div style="height: 0.00em;">
&#160;</div>
&#91;<span class="opt"><b class="flag">&#45;</b><b class="flag">&#45;homedir</b>=<i class="arg">home&#45;directory</i></span>&#93;<div style="height: 0.00em;">
&#160;</div>
&#91;<span class="opt"><b class="flag">&#45;</b><b class="flag">&#45;keyring</b>=<i class="arg">keyring</i></span>&#93;<div style="height: 0.00em;">
&#160;</div>
&#91;<span class="opt"><b class="flag">&#45;</b><b class="flag">&#45;ssh-keys</b></span>&#93;<div style="height: 0.00em;">
&#160;</div>
&#91;<span class="opt"><b class="flag">&#45;</b><b class="flag">&#45;userid</b>=<i class="arg">userid</i></span>&#93;<div style="height: 0.00em;">
&#160;</div>
&#91;<span class="opt"><b class="flag">&#45;</b><b class="flag">&#45;verbose</b></span>&#93;</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> At the present time, the <b class="name">netpgpkeys</b> utility is still under development. Whilst the signing and verification, encryption and decryption parts of <a class="link-man" href="../1/netpgp">netpgp(1)</a> are considered mature, <b class="name">netpgpkeys</b> needs more work. Other key management utilities should be used in preference to this one.<p>
The <b class="name">netpgpkeys</b> command is used for all forms of PGP key management, from generation of new keys to propagation of public keys to key servers, and import of new public keys from other identities.<p>
The <a class="link-man" href="../1/netpgp">netpgp(1)</a> utility should be used for file management and transformation &#8212;encryption, decryption, signing and verification of files.<p>
For signing and encryption, a unique identity is needed. This identity is made up of a private and public key. The public key part is made available and known to everyone. The private key is kept secret, and known only to the user who created the identity. The secret key is protected with a passphrase.<p>
In rough terms, a digital signature is a digest of a file's contents, encrypted with the user's private key. Since together, the private and public keys identify the user uniquely, the signature can be used to identify the exact version of the file, and any changes made to the file will mean that the signature no longer matches.<p>
As a corollary, the file can be transformed using a user's public key, into text such that the contents can only be viewed by someone with the corresponding private key. This is called encryption.<p>
The <b class="name">netpgpkeys</b> utility can be used to generate a new key-pair for a user. As mentioned before, this key is in two parts, the public key (which is known by other people) and the private key.<p>
The other use of <b class="name">netpgpkeys</b> is to maintain keyrings. Key and keyring management commands available are: <b class="flag">&#45;</b><b class="flag">&#45;export&#45;key</b>, <b class="flag">&#45;</b><b class="flag">&#45;find&#45;key</b>, <b class="flag">&#45;</b><b class="flag">&#45;generate&#45;key</b>, <b class="flag">&#45;</b><b class="flag">&#45;import&#45;key</b>, and <b class="flag">&#45;</b><b class="flag">&#45;list&#45;keys</b>. Keyrings are collections of public keys belonging to other users. By using other means of identification, it is possible to establish the bona fides of other users. Once trust has been established, the public key of the other user will be signed. The other user's public key can be added to our keyring. The other user will add our public key to their keyring.<p>
Keys can be listed, exported (i.e. made available to others), and imported (i.e. users who have signed our public key).<p>
Key and keyring management can be done with the following commands:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;</b><b class="flag">&#45;export&#45;key</b></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
Display the current public key in a format suitable for export. This can be used to place the keyring on one of the public key servers, for example.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;</b><b class="flag">&#45;find&#45;key</b></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
Find the appropriate public key from the current keyring. If no keyring is provided, the user's public keyring is used.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;</b><b class="flag">&#45;generate&#45;key</b></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
This command is used to generate a new public and private key pair. If provided on the command line, the argument will be given to the key generation routine to be used as the identity of the key. This is usually the email address and full name, but can be any identification token. The newly-generated keys are placed in a sub-directory of the &#8220;home directory&#8221; which is created at key generation time. At present, only RSA keys can be generated. The hash algorithm and keysize can be specified on the command line.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;</b><b class="flag">&#45;import&#45;key</b></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
Import a public key as retrieved from one of the public key servers. This is in the form of a file which has previously been retrieved from elsewhere.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;</b><b class="flag">&#45;list&#45;keys</b></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
List all the public keys in the current keyring. If no keyring is provided, the user's public keyring is used.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;</b><b class="flag">&#45;list&#45;sigs</b></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
List all the public keys in the current keyring, along with the sub-key signatures which provide the key with trust. If no keyring is provided, the user's public keyring is used.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;</b><b class="flag">&#45;trusted&#45;keys</b></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
Prints a list of keys in a more machine-readble format than is normally used, which can be used as input to other parsing engines. The output from this command is sent to <span class="define">stdout</span>. Normal key-matching rules apply.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;</b><b class="flag">&#45;version</b></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
Print the version information from the <a class="link-man" href="../3/libnetpgp">libnetpgp(3)</a> library.</dd>
</dl>
<p>
In addition to one of the preceding commands, a number of qualifiers or options may be given.<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;</b><b class="flag">&#45;cipher</b> <i class="arg">cipher&#45;algorithm</i></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
Specify the cipher to be used for symmetric encryption. The default cipher is &#8220;CAST5&#8221;.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;</b><b class="flag">&#45;hash</b> <i class="arg">hash&#45;algorithm</i></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
Specify the hash algorithm which is used during fingerprint calculation. For reference, at the present time, <a class="link-man" href="../1/ssh-keygen">ssh-keygen(1)</a> uses &#8220;MD5&#8221; for its fingerprint values.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;</b><b class="flag">&#45;homedir</b> <i class="arg">home&#45;directory</i></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
Keyrings are normally located, for historical reasons, within the user's home directory in a subdirectory called &#8220;<i class="file">.gnupg</i>&#8221; and this option specifies an alternative location in which to find that sub-directory.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;</b><b class="flag">&#45;keyring</b> <i class="arg">keyring</i></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
This option specifies an alternative keyring to be used. All keyring operations will be relative to this alternative keyring.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;</b><b class="flag">&#45;numbits</b> <i class="arg">numbits</i></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
specifies the number of bits to be used when generating a key. The default number of bits is 2048. This is considered the absolute minimum which should be chosen at the time of writing (2009). Due to advances in computing power every year, this number should be reviewed, and increased when it becomes easier to factor 2048 bit numbers.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;</b><b class="flag">&#45;userid</b> <i class="arg">userid</i></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
This option specifies the user identity to be used for all operations. This identity can either be in the form of the full name, or as an email address. Care should be exercised with these ways of specifying the user identity, since the <b class="name">netpgpkeys</b> utility has no way of verifying that an email address is valid, or that a key belongs to a certain individual. The trust for a signed key is given by the other signers of that key. The 16 hexadecimal digit user identity should be used when specifying user identities &#8212;email addresses and names are provided as aliases.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;</b><b class="flag">&#45;pass&#45;fd</b>=<i class="arg">fd</i></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
This option is intended for the use of external programs which may like to use the <a class="link-man" href="../3/libnetpgp">libnetpgp(3)</a> library through the <b class="name">netpgpkeys</b> interface, but have their own ways of retrieving and caching the passphrase for the secret key. In this case, the <b class="name">netpgpkeys</b> utility will read a line of text from the file descriptor passed to it in the command line argument, rather than using its own methods of retrieving the passphrase from the user.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;</b><b class="flag">&#45;verbose</b></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
This option can be used to view information during the process of the <b class="name">netpgpkeys</b> requests.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;</b><b class="flag">&#45;ssh-keys</b></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
specifies that the public and private keys should be taken from the <a class="link-man" href="../1/ssh">ssh(1)</a> host key files, usually found in <i class="file">/etc/ssh/ssh_host_rsa_key</i> and <i class="file">/etc/ssh/ssh_host_rsa_key.pub</i> for the private and public host keys.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;</b><b class="flag">&#45;coredumps</b></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
in normal processing, if an error occurs, the contents of memory are saved to disk, and can be read using tools to analyse behaviour. Unfortunately this can disclose information to people viewing the core dump, such as secret keys, and passphrases protecting those keys. In normal operation, <b class="name">netpgpkeys</b> will turn off the ability to save core dumps on persistent storage, but selecting this option will allow core dumps to be written to disk. This option should be used wisely, and any core dumps should be deleted in a secure manner when no longer needed.</dd>
</dl>
<p>
It is often useful to be able to refer to another user's identity by using their <b class="name">netpgpkeys</b> &#8220;fingerprint&#8221;. This can be found in the output from normal <b class="flag">&#45;</b><b class="flag">&#45;list&#45;keys</b> and <b class="flag">&#45;</b><b class="flag">&#45;list&#45;sigs</b> commands.</div>
<div class="section">
<h1 id="x504153532050485241534553">PASS PHRASES</h1> The pass phrase cannot be changed by <b class="name">netpgpkeys</b> once it has been chosen, and will be used for the life of the key, so a wise choice is advised. The pass phrase should not be an easily guessable word or phrase, or related to information that can be gained through &#8220;social engineering&#8221; using search engines, or other public information retrieval methods.<p>
<a class="link-man" href="../3/getpass">getpass(3)</a> will be used to obtain the pass phrase from the user if it is needed, such as during signing or encryption, or key generation, so that any secret information cannot be viewed by other users using the <a class="link-man" href="../1/ps">ps(1)</a> or <a class="link-man" href="../1/top">top(1)</a> commands, or by looking over the shoulder at the screen.<p>
Since the public and private key pair can be used to verify a person's identity, and since identity theft can have far-reaching consequences, users are strongly encouraged to enter their pass phrases only when prompted by the application.</div>
<div class="section">
<h1 id="x4558495420535441545553">EXIT STATUS</h1> The <b class="name">netpgpkeys</b> utility will return 0 for success, 1 if the file's signature does not match what was expected, or 2 if any other error occurs.</div>
<div class="section">
<h1 id="x4558414d504c4553">EXAMPLES</h1><pre style="margin-left: 0.00ex;" class="lit display">
% netpgpkeys --ssh-keys --sshkeyfile=/etc/ssh/ssh_host_rsa_key.pub --list-keys --hash=md5 
1 key 
pub 1024/RSA (Encrypt or Sign) fcdd1c608bef4c4b 2008-08-11 
Key fingerprint: e935 902d ebf1 76ba fcdd 1c60 8bef 4c4b 
uid              osx-vm1.crowthorne.alistaircrooks.co.uk (/etc/ssh/ssh_host_rsa_key.pub) &lt;root@osx-vm1.crowthorne.alistaircrooks.co.uk&gt; 
 
% ssh-keygen -l -f /etc/ssh/ssh_host_rsa_key.pub 
1024 e9:35:90:2d:eb:f1:76:ba:fc:dd:1c:60:8b:ef:4c:4b /etc/ssh/ssh_host_rsa_key.pub (RSA) 
%</pre>
<p>
The following is an example of RSA key generation:<p>
<pre style="margin-left: 0.00ex;" class="lit display">
% netpgpkeys --generate&#45;key 
netpgp: default key set to "C0596823" 
pub 2048/RSA (Encrypt or Sign) 5bc707d1b495aaf2 2010-04-14 
Key fingerprint: 08cb 4867 eeed 454c ce30 610d 5bc7 07d1 b495 aaf2 
uid              RSA 2048-bit key &lt;agc@localhost&gt; 
netpgp: generated keys in directory /home/agc/.gnupg/5bc707d1b495aaf2 
% ls -al /home/agc/.gnupg/5bc707d1b495aaf2 
total 8 
drwx------  2 agc  agc   512 Apr 13 18:25 . 
drwx------  6 agc  agc   512 Apr 13 18:25 .. 
-rw-------  1 agc  agc   596 Apr 13 18:25 pubring.gpg 
-rw-------  1 agc  agc  1284 Apr 13 18:25 secring.gpg 
% 
% netpgpkeys --list-keys --home ~/.gnupg/5bc707d1b495aaf2 
1 key 
pub 2048/RSA (Encrypt or Sign) 5bc707d1b495aaf2 2010-04-14 
Key fingerprint: 08cb 4867 eeed 454c ce30 610d 5bc7 07d1 b495 aaf2 
uid              RSA 2048-bit key &lt;agc@localhost&gt; 
 
%</pre>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../1/netpgp">netpgp(1)</a>, <a class="link-man" href="../1/ssh">ssh(1)</a>, <a class="link-man" href="../1/ssh-keygen">ssh-keygen(1)</a>, <a class="link-man" href="../3/getpass">getpass(3)</a>, <a class="link-man" href="../3/libnetpgp">libnetpgp(3)</a>, <a class="link-man" href="../3/ssl">ssl(3)</a>, <a class="link-man" href="../3/zlib">zlib(3)</a></div>
<div class="section">
<h1 id="x5354414e4441524453">STANDARDS</h1> <span class="ref"><span class="ref-auth">J. Callas</span>, <span class="ref-auth">L. Donnerhacke</span>, <span class="ref-auth">H. Finney</span>, <span class="ref-auth">D. Shaw</span>, and <span class="ref-auth">R. Thayer</span>, <span class="ref-title">OpenPGP Message Format</span>, <span class="ref-rep">RFC 4880</span>, <span class="ref-date">November 2007</span>.</span></div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> The <b class="name">netpgpkeys</b> command first appeared in <span class="unix">NetBSD&#160;6.0</span>.</div>
<div class="section">
<h1 id="x415554484f5253">AUTHORS</h1> <span class="author"></span><span class="author">Ben Laurie</span>, <span class="author">Rachel Willmer</span>, and overhauled and rewritten by <span class="author">Alistair Crooks</span> &#60;<a class="link-mail" href="mailto:agc@NetBSD.org">agc@NetBSD.org</a>&#62;. This manual page was also written by <span class="author">Alistair Crooks</span>.</div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
February 21, 2012</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
<>

