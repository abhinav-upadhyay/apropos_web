<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/../4/strict.dtd">
>
<head>
<meta http-equiv="Content-Type" content="te../; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="../style.css" type="text/css" media="all">
<title>
NBPERF(1)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
NBPERF(1)</td>
<td class="head-vol" align="center">
General Commands Manual</td>
<td class="head-rtitle" align="right">
NBPERF(1)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">nbperf</b> &#8212; <span class="desc">compute a perfect hash function</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1><table class="synopsis">
<col style="width: 6.00ex;">
<col>
<tbody>
<tr>
<td>
nbperf</td>
<td>
&#91;<span class="opt"><b class="flag">&#45;ps</b></span>&#93; &#91;<span class="opt"><b class="flag">&#45;a</b> <i class="arg">algorithm</i></span>&#93; &#91;<span class="opt"><b class="flag">&#45;c</b> <i class="arg">utilisation</i></span>&#93; &#91;<span class="opt"><b class="flag">&#45;h</b> <i class="arg">hash</i></span>&#93; &#91;<span class="opt"><b class="flag">&#45;i</b> <i class="arg">iterations</i></span>&#93; &#91;<span class="opt"><b class="flag">&#45;m</b> <i class="arg">map-file</i></span>&#93; &#91;<span class="opt"><b class="flag">&#45;n</b> <i class="arg">name</i></span>&#93; &#91;<span class="opt"><b class="flag">&#45;o</b> <i class="arg">output</i></span>&#93; &#91;<span class="opt"><i class="arg">input</i></span>&#93;</td>
</tr>
</tbody>
</table>
</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> <b class="name">nbperf</b> reads a number of keys one per line from standard input or <i class="arg">input</i>. It computes a minimal perfect hash function and writes it to stdout or <i class="arg">output</i>. The default algorithm is &#8220;<span class="symb">chm</span>&#8221;.<p>
The <b class="flag">&#45;m</b> argument instructs <b class="name">nbperf</b> to write the resulting key mapping to <i class="arg">map-file</i>. Each line gives the result of the hash function for the corresponding input key.<p>
The parameter <i class="arg">utilisation</i> determines the space efficiency.<p>
Supported arguments for <b class="flag">&#45;a</b>:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">chm</span></dt>
<dd class="list-tag" style="margin-left: 3.00ex;">
This results in an order preserving minimal perfect hash function. The <i class="arg">utilisation</i> must be at least 2, the default. The number of iterations needed grows if the utilisation is very near to 2.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">chm3</span></dt>
<dd class="list-tag" style="margin-left: 3.00ex;">
Similar to <i class="arg">chm</i>. The resulting hash function needs three instead of two table lookups when compared to <i class="arg">chm</i>. The <i class="arg">utilisation</i> must be at least 1.24, the default. This makes the output for <i class="arg">chm3</i> noticable smaller than the output for <i class="arg">chm</i>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">bpz</span></dt>
<dd class="list-tag" style="margin-left: 3.00ex;">
This results in a non-order preserving minimal perfect hash function. Output size is approximately 2.79 bit per key for the default value of <i class="arg">utilisation</i>, 1.24. This is also the smallest supported value.</dd>
</dl>
<p>
Supported arguments for <b class="flag">&#45;h</b>:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">mi_vector_hash</span></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
Platform-independent version of Jenkins parallel hash. See <a class="link-man" href="../3/mi_vector_hash">mi_vector_hash(3)</a>.</dd>
</dl>
<p>
The number of iterations can be limited with <b class="flag">&#45;i</b>. <b class="name">nbperf</b> outputs a function matching <i class="ftype">uint32_t</i> <b class="fname">hash</b>(<i class="farg">const void * restrict</i>, <i class="farg">size_t</i>) to stdout. The function expects the key length as second argument, for strings not including the terminating NUL. It is the responsibility of the caller to pass in only valid keys or compare the resulting index to the key. The function name can be changed using <b class="flag">&#45;n</b> <i class="arg">name</i>. If the <b class="flag">&#45;s</b> flag is specified, it will be static.<p>
After each failing iteration, a dot is written to stderr.<p>
<b class="name">nbperf</b> checks for duplicate keys on the first iteration that passed basic hash distribution tests. In that case, an error message is printed and the program terminates.<p>
If the <b class="flag">&#45;p</b> flag is specified, the hash function is seeded in a stable way. This may take longer than the normal random seed, but ensures that the output is the same for repeated invocations as long as the input is constant.</div>
<div class="section">
<h1 id="x4558495420535441545553">EXIT STATUS</h1> The <b class="utility">nbperf</b> utility exits 0 on success, and &gt;0 if an error occurs.</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../3/mi_vector_hash">mi_vector_hash(3)</a></div>
<div class="section">
<h1 id="x415554484f5253">AUTHORS</h1> <span class="author">J&#246;rg Sonnenberger</span></div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
September 25, 2012</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
<>

