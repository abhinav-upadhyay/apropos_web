<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/../4/strict.dtd">
>
<head>
<meta http-equiv="Content-Type" content="te../; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="../style.css" type="text/css" media="all">
<title>
AWK(1)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
AWK(1)</td>
<td class="head-vol" align="center">
General Commands Manual</td>
<td class="head-rtitle" align="right">
AWK(1)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">awk</b> &#8212; <span class="desc">pattern-directed scanning and processing language</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1><table class="synopsis">
<col style="width: 3.00ex;">
<col>
<tbody>
<tr>
<td>
awk</td>
<td>
&#91;<span class="opt"><b class="flag">&#45;F</b> <i class="arg">fs</i></span>&#93; &#91;<span class="opt"><b class="flag">&#45;v</b> <i class="arg">var=value</i></span>&#93; &#91;<span class="opt"><b class="flag">&#45;safe</b></span>&#93; &#91;<span class="opt"><b class="flag">&#45;d</b>&#91;<span class="opt"><i class="arg">N</i></span>&#93;</span>&#93; &#91;<span class="opt"><i class="arg">prog</i> | <b class="flag">&#45;f</b> <i class="arg">filename</i></span>&#93; <i class="arg">file ...</i></td>
</tr>
</tbody>
</table>
<br>
<table class="synopsis">
<col style="width: 3.00ex;">
<col>
<tbody>
<tr>
<td>
awk</td>
<td>
<b class="flag">&#45;version</b></td>
</tr>
</tbody>
</table>
</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> <b class="name">awk</b> is the Bell Labs' implementation of the AWK programming language as described in the <span class="emph">The AWK Programming Language</span> by A. V. Aho, B. W. Kernighan, and P. J. Weinberger.<p>
<b class="name">awk</b> scans each input <i class="arg">file</i> for lines that match any of a set of patterns specified literally in <i class="arg">prog</i> or in one or more files specified as <b class="flag">&#45;f</b> <i class="arg">filename</i>. With each pattern there can be an associated action that will be performed when a line of a <i class="arg">file</i> matches the pattern. Each line is matched against the pattern portion of every pattern-action statement; the associated action is performed for each matched pattern. The file name <i class="arg">-</i> means the standard input. Any <i class="arg">file</i> of the form <i class="arg">var=value</i> is treated as an assignment, not a filename, and is executed at the time it would have been opened if it were a filename.<p>
The options are as follows:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;d</b>&#91;<span class="opt"><i class="arg">N</i></span>&#93;</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Set debug level to specified number <i class="arg">N</i>. If the number is omitted, debug level is set to 1.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;f</b> <i class="arg">filename</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Read the AWK program source from specified file <i class="arg">filename</i>, instead of the first command line argument. Multiple <b class="flag">&#45;f</b> options may be specified.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;F</b> <i class="arg">fs</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Set the input field separator <b class="var">FS</b> to the regular expression <i class="arg">fs</i>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;mr</b> <i class="arg">NNN</i>, <b class="flag">&#45;mf</b> <i class="arg">NNN</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Obsolete, no longer needed options. Set limit on maximum record or fields number.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;safe</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Potentially unsafe functions such as <b class="fname">system</b>() make the program abort (with a warning message).</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;v</b> <i class="arg">var</i>=<i class="arg">value</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Assign the value <i class="arg">value</i> to the variable <b class="var">var</b> before <i class="arg">prog</i> is executed. Any number of <b class="flag">&#45;v</b> options may be present.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;version</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Print <b class="name">awk</b> version on standard output and exit.</dd>
</dl>
<p>
An input line is normally made up of fields separated by white space, or by regular expression <b class="var">FS</b>. The fields are denoted <b class="var">$1</b>, <b class="var">$2</b>, ..., while <b class="var">$0</b> refers to the entire line. If <b class="var">FS</b> is null, the input line is split into one field per character.<p>
A pattern-action statement has the form<p>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit">pattern { action }</code></div>
</blockquote>
<p>
A missing { action } means print the line; a missing pattern always matches. Pattern-action statements are separated by newlines or semicolons.<p>
An action is a sequence of statements. Statements are terminated by semicolons, newlines or right braces. An empty <i class="arg">expression-list</i> stands for <b class="var">$0</b>. String constants are quoted <span class="emph">"&#160;"</span>, with the usual C escapes recognized within. Expressions take on string or numeric values as appropriate, and are built using the <i class="link-sec"><a class="link-sec" href="#x4f70657261746f7273">Operators</a></i> (see next subsection). Variables may be scalars, array elements (denoted <b class="var">x[i]</b>) or fields. Variables are initialized to the null string. Array subscripts may be any string, not necessarily numeric; this allows for a form of associative memory. Multiple subscripts such as <b class="var">[i,j,k]</b> are permitted; the constituents are concatenated, separated by the value of <b class="var">SUBSEP</b>.<div class="subsection">
<h2 id="x4f70657261746f7273">Operators</h2> <b class="name">awk</b> operators, in order of decreasing precedence, are:<p>
<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="cmd">(...)</b></dt>
<dd class="list-tag" style="margin-left: 5.00ex;">
Grouping</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="cmd">$</b></dt>
<dd class="list-tag" style="margin-left: 5.00ex;">
Field reference</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="cmd">++ --</b></dt>
<dd class="list-tag" style="margin-left: 5.00ex;">
Increment and decrement, can be used either as postfix or prefix.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="cmd">^</b></dt>
<dd class="list-tag" style="margin-left: 5.00ex;">
Exponentiation (the <b class="cmd">**</b> form is also supported, and <b class="cmd">**=</b> for the assignment operator).</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
+ - !</dt>
<dd class="list-tag" style="margin-left: 5.00ex;">
Unary plus, unary minus and logical negation.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
* / %</dt>
<dd class="list-tag" style="margin-left: 5.00ex;">
Multiplication, division and modulus.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
+ -</dt>
<dd class="list-tag" style="margin-left: 5.00ex;">
Addition and subtraction.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="arg">space</i></dt>
<dd class="list-tag" style="margin-left: 5.00ex;">
String concatenation.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="cmd">&lt; &gt;</b></dt>
<dd class="list-tag" style="margin-left: 5.00ex;">
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="cmd">&#8804; &#8805;</b></dt>
<dd class="list-tag" style="margin-left: 5.00ex;">
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="cmd">!= ==</b></dt>
<dd class="list-tag" style="margin-left: 5.00ex;">
Regular relational operators</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="cmd">~ !~</b></dt>
<dd class="list-tag" style="margin-left: 5.00ex;">
Regular expression match and not match</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="cmd">in</b></dt>
<dd class="list-tag" style="margin-left: 5.00ex;">
Array membership</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="cmd">&amp;&amp;</b></dt>
<dd class="list-tag" style="margin-left: 5.00ex;">
Logical AND</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="cmd">||</b></dt>
<dd class="list-tag" style="margin-left: 5.00ex;">
Logical OR</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="cmd">?:</b></dt>
<dd class="list-tag" style="margin-left: 5.00ex;">
C conditional expression. This is used as <i class="arg">expr1</i> <b class="cmd">?</b> <i class="arg">expr2</i> <b class="cmd">:</b> <i class="arg">expr3</i> . If <i class="arg">expr1</i> is true, the result value is <i class="arg">expr2</i>, otherwise it is <i class="arg">expr3</i>. Only one of <i class="arg">expr2</i> and <i class="arg">expr3</i> is evaluated.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="cmd">= += -=</b></dt>
<dd class="list-tag" style="margin-left: 5.00ex;">
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="cmd">*= /= %= ^=</b></dt>
<dd class="list-tag" style="margin-left: 5.00ex;">
Assignment and Operator-Assignment</dd>
</dl>
</div>
<div class="subsection">
<h2 id="x436f6e74726f6c2053746174656d656e7473">Control Statements</h2> The control statements are as follows:<p>
<dl style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 5.00ex;" class="list list-hang">
<dt class="list-hang" style="margin-top: 0.00em;">
<b class="cmd">if (</b> <i class="arg">expression</i> <b class="cmd">)</b> <i class="arg">statement</i> &#91;<b class="cmd">else</b> <i class="arg">statement</i>&#93;</dt>
<dd class="list-hang" style="margin-left: 6.00ex;">
</dd>
<dt class="list-hang" style="margin-top: 0.00em;">
<b class="cmd">while (</b> <i class="arg">expression</i> <b class="cmd">)</b> <i class="arg">statement</i></dt>
<dd class="list-hang" style="margin-left: 6.00ex;">
</dd>
<dt class="list-hang" style="margin-top: 0.00em;">
<b class="cmd">for (</b> <i class="arg">expression</i> <b class="cmd">;</b> <i class="arg">expression</i> <b class="cmd">;</b> <i class="arg">expression</i> <b class="cmd">)</b> <i class="arg">statement</i></dt>
<dd class="list-hang" style="margin-left: 6.00ex;">
</dd>
<dt class="list-hang" style="margin-top: 0.00em;">
<b class="cmd">for (</b> <b class="var">var</b> <b class="cmd">in</b> <i class="arg">array</i> <b class="cmd">)</b> <i class="arg">statement</i></dt>
<dd class="list-hang" style="margin-left: 6.00ex;">
</dd>
<dt class="list-hang" style="margin-top: 0.00em;">
<b class="cmd">do</b> <i class="arg">statement</i> <b class="cmd">while (</b> <i class="arg">expression</i> <b class="cmd">)</b></dt>
<dd class="list-hang" style="margin-left: 6.00ex;">
</dd>
<dt class="list-hang" style="margin-top: 0.00em;">
<b class="cmd">break</b></dt>
<dd class="list-hang" style="margin-left: 6.00ex;">
</dd>
<dt class="list-hang" style="margin-top: 0.00em;">
<b class="cmd">continue</b></dt>
<dd class="list-hang" style="margin-left: 6.00ex;">
</dd>
<dt class="list-hang" style="margin-top: 0.00em;">
<b class="cmd">delete</b> <b class="var">array</b> &#91;<i class="arg">expression</i>&#93;</dt>
<dd class="list-hang" style="margin-left: 6.00ex;">
</dd>
<dt class="list-hang" style="margin-top: 0.00em;">
<b class="cmd">delete</b> <b class="var">array</b></dt>
<dd class="list-hang" style="margin-left: 6.00ex;">
</dd>
<dt class="list-hang" style="margin-top: 0.00em;">
<b class="cmd">exit</b> &#91;<i class="arg">expression</i>&#93;</dt>
<dd class="list-hang" style="margin-left: 6.00ex;">
<i class="arg">expression</i></dd>
<dt class="list-hang" style="margin-top: 0.00em;">
<b class="cmd">return</b> &#91;<i class="arg">expression</i>&#93;</dt>
<dd class="list-hang" style="margin-left: 6.00ex;">
</dd>
<dt class="list-hang" style="margin-top: 0.00em;">
<b class="cmd">{</b> [<i class="arg">statement ...</i>] <b class="cmd">}</b></dt>
<dd class="list-hang" style="margin-left: 6.00ex;">
</dd>
</dl>
</div>
<div class="subsection">
<h2 id="x492f4f2053746174656d656e7473">I/O Statements</h2> The input/output statements are as follows:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">close</b>(<i class="farg">expr</i>)</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Closes the file or pipe <i class="arg">expr</i>. Returns zero on success; otherwise nonzero.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">fflush</b>(<i class="farg">expr</i>)</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Flushes any buffered output for the file or pipe <i class="arg">expr</i>. Returns zero on success; otherwise nonzero.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">getline</b> &#91;<b class="var">var</b>&#93;</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Set <b class="var">var</b> (or <b class="var">$0 if</b> <b class="var">var</b> is not specified) to the next input record from the current input file. <b class="cmd">getline</b> returns 1 for a successful input, 0 for end of file, and &#45;1 for an error.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">getline</b> &#91;<b class="var">var</b>&#93; <b class="cmd">&lt;</b> <i class="arg">file</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Set <b class="var">var</b> (or <b class="var">$0 if</b> <b class="var">var</b> is not specified) to the next input record from the specified file <i class="arg">file</i>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="arg">expr</i> <b class="cmd">| getline</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Pipes the output of <i class="arg">expr</i> into <b class="cmd">getline</b>; each call of <b class="cmd">getline</b> returns the next line of output from <i class="arg">expr</i>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">next</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Skip remaining patterns on this input line.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">nextfile</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Skip rest of this file, open next, start at top.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">print</b> &#91;<i class="arg">expr-list</i>&#93; &#91;<b class="cmd">&gt;</b> <i class="arg">file</i>&#93;</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
The <b class="cmd">print</b> statement prints its arguments on the standard output (or to a file if <b class="cmd">&gt; file</b> or to a pipe if | <i class="arg">expr</i> is present), separated by the current output field separator <b class="var">OFS</b>, and terminated by the output record separator <b class="var">ORS</b>. Both <i class="arg">file</i> and <i class="arg">expr</i> may be literal names or parenthesized expressions; identical string values in different statements denote the same open file.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">printf</b> <i class="arg">format</i> &#91;<b class="cmd">,</b> <i class="arg">expr-list</i>&#93; &#91;<b class="cmd">&gt;</b> <i class="arg">file</i>&#93;</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Format and print its expression list according to <i class="arg">format</i>. See <a class="link-man" href="../3/printf">printf(3)</a> for list of supported formats and their meaning.</dd>
</dl>
</div>
<div class="subsection">
<h2 id="x4d617468656d61746963616c20616e64204e756d657269632046756e6374696f6e73">Mathematical and Numeric Functions</h2> AWK has the following mathematical and numerical functions built-in:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">atan2</b>(<i class="farg">x</i>, <i class="farg">y</i>)</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Returns the arctangent of <i class="arg">x</i> <b class="cmd">/</b> <i class="arg">y</i> in radians. See also <a class="link-man" href="../3/atan2">atan2(3)</a>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">cos</b>(<i class="farg">expr</i>)</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Computes the cosine of <i class="arg">expr</i>, measured in radians. See also <a class="link-man" href="../3/cos">cos(3)</a>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">exp</b>(<i class="farg">expr</i>)</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Computes the exponential value of the given argument <i class="arg">expr</i>. See also <a class="link-man" href="../3/exp">exp(3)</a>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">int</b>(<i class="farg">expr</i>)</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Truncates <i class="arg">expr</i> to integer.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">log</b>(<i class="farg">expr</i>)</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Computes the value of the natural logarithm of argument <i class="arg">expr</i>. See also <a class="link-man" href="../3/log">log(3)</a>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">rand</b>()</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Returns random number between 0 and 1.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">sin</b>(<i class="farg">expr</i>)</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Computes the sine of <i class="arg">expr</i>, measured in radians. See also <a class="link-man" href="../3/sin">sin(3)</a>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">sqrt</b>(<i class="farg">expr</i>)</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Computes the non-negative square root of <i class="arg">expr</i>. See also <a class="link-man" href="../3/sqrt">sqrt(3)</a>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">srand</b>(<i class="farg">[expr]</i>)</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Sets seed for random number generator ( <b class="fname">rand</b>()) and returns the previous seed.</dd>
</dl>
</div>
<div class="subsection">
<h2 id="x537472696e672046756e6374696f6e73">String Functions</h2> AWK has the following string functions built-in:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">gensub</b>(<i class="farg">r</i>, <i class="farg">s</i>, <i class="farg">h</i>, <i class="farg">[t]</i>)</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Search the target string <i class="arg">t</i> for matches of the regular expression <i class="arg">r</i>. If <i class="arg">h</i> is a string beginning with <b class="cmd">g</b> or <b class="cmd">G</b>, then replace all matches of <i class="arg">r</i> with <i class="arg">s</i>. Otherwise, <i class="arg">h</i> is a number indicating which match of <i class="arg">r</i> to replace. If no <i class="arg">t</i> is supplied, <b class="var">$0</b> is used instead. Unlike <b class="fname">sub</b>() and <b class="fname">gsub</b>(), the modified string is returned as the result of the function, and the original target is <span class="emph">not</span> changed. Note that the <i class="arg">&#92;n</i> sequences within replacement string <i class="arg">s</i> supported by GNU <b class="name">awk</b> are <span class="emph">not</span> supported at this moment.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">gsub</b>(<i class="farg">r</i>, <i class="farg">s</i>, <i class="farg">[t]</i>)</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Same as <b class="fname">sub</b>() except that all occurrences of the regular expression are replaced; <b class="fname">sub</b>() and <b class="fname">gsub</b>() return the number of replacements.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">index</b>(<i class="farg">s</i>, <i class="farg">t</i>)</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
the position in <i class="arg">s</i> where the string <i class="arg">t</i> occurs, or 0 if it does not.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">length</b>(<i class="farg">[string]</i>)</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
the length of its argument taken as a string, or of <b class="var">$0</b> if no argument.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">match</b>(<i class="farg">s</i>, <i class="farg">r</i>)</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
the position in <i class="arg">s</i> where the regular expression <i class="arg">r</i> occurs, or 0 if it does not. The variables <b class="var">RSTART</b> and <b class="var">RLENGTH</b> are set to the position and length of the matched string.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">split</b>(<i class="farg">s</i>, <i class="farg">a</i>, <i class="farg">[fs]</i>)</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
splits the string <i class="arg">s</i> into array elements <b class="var">a[1]</b>, <b class="var">a[2]</b>, ..., <b class="var">a[n]</b>, and returns <b class="var">n</b>. The separation is done with the regular expression <i class="arg">fs</i> or with the field separator <b class="var">FS</b> if <i class="arg">fs</i> is not given. An empty string as field separator splits the string into one array element per character.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">sprintf</b>(<i class="farg">fmt</i>, <i class="farg">expr</i>, <i class="farg">...</i>)</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Returns the string resulting from formatting <i class="arg">expr</i> according to the <a class="link-man" href="../3/printf">printf(3)</a> format <i class="arg">fmt</i>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">sub</b>(<i class="farg">r</i>, <i class="farg">s</i>, <i class="farg">[t]</i>)</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
substitutes <i class="arg">s</i> for the first occurrence of the regular expression <i class="arg">r</i> in the target string <i class="arg">t</i>. If <i class="arg">t</i> is not given, <b class="var">$0</b> is used.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">substr</b>(<i class="farg">s</i>, <i class="farg">m</i>, <i class="farg">[n]</i>)</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Returns the at most <i class="arg">n</i>-character substring of <i class="arg">s</i> starting at position <i class="arg">m</i>, counted from 1. If <i class="arg">n</i> is omitted, the rest of <i class="arg">s</i> is returned.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">tolower</b>(<i class="farg">str</i>)</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
returns a copy of <i class="arg">str</i> with all upper-case characters translated to their corresponding lower-case equivalents.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">toupper</b>(<i class="farg">str</i>)</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
returns a copy of <i class="arg">str</i> with all lower-case characters translated to their corresponding upper-case equivalents.</dd>
</dl>
</div>
<div class="subsection">
<h2 id="x54696d652046756e6374696f6e73">Time Functions</h2> This <b class="name">awk</b> provides the following two functions for obtaining time stamps and formatting them:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">systime</b>()</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Returns the value of time in seconds since the start of Unix Epoch (Midnight, January 1, 1970, Coordinated Universal Time). See also <a class="link-man" href="../3/time">time(3)</a>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">strftime</b>(<i class="farg">[format [, timestamp]]</i>)</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Formats the time <i class="arg">timestamp</i> according to the string <i class="arg">format</i>. <i class="arg">timestamp</i> should be in same form as value returned by <b class="fname">systime</b>(). If <i class="arg">timestamp</i> is missing, current time is used. If <i class="arg">format</i> is missing, a default format equivalent to the output of <a class="link-man" href="../1/date">date(1)</a> would be used. See the specification of ANSI C <a class="link-man" href="../3/strftime">strftime(3)</a> for the format conversions which are supported.</dd>
</dl>
</div>
<div class="subsection">
<h2 id="x4f74686572206275696c741e696e2066756e6374696f6e73">Other built-in functions</h2><dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">system</b>(<i class="farg">cmd</i>)</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
executes <i class="arg">cmd</i> and returns its exit status</dd>
</dl>
</div>
<div class="subsection">
<h2 id="x5061747465726e73">Patterns</h2> Patterns are arbitrary Boolean combinations (with <b class="cmd">! || &amp;&amp;</b>) of regular expressions and relational expressions. Regular expressions are as in <a class="link-man" href="../1/egrep">egrep(1)</a>. Isolated regular expressions in a pattern apply to the entire line. Regular expressions may also occur in relational expressions, using the operators <b class="cmd">~</b> and <b class="cmd">!~</b>. <b class="cmd">/ re /</b> is a constant regular expression; any string (constant or variable) may be used as a regular expression, except in the position of an isolated regular expression in a pattern.<p>
A pattern may consist of two patterns separated by a comma; in this case, the action is performed for all lines from an occurrence of the first pattern though an occurrence of the second.<p>
A relational expression is one of the following:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 5.00ex;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="arg">expression matchop regular-expression</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="arg">expression relop expression</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="arg">expression</i> <b class="cmd">in</b> <i class="arg">array-name</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
</dd>
(<dt class="list-tag" style="margin-top: 0.00em;">
<i class="arg">expr</i>, <i class="arg">expr,...</i> <b class="cmd">) in</b> <i class="arg">array-name</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
</dd>
</dl>
<p>
where a <i class="arg">relop</i> is any of the six relational operators in C, and a <i class="arg">matchop</i> is either <b class="cmd">~</b> (matches) or <b class="cmd">!~</b> (does not match). A conditional is an arithmetic expression, a relational expression, or a Boolean combination of these.<p>
The special patterns <b class="cmd">BEGIN</b> and <b class="cmd">END</b> may be used to capture control before the first input line is read and after the last. <b class="cmd">BEGIN</b> and <b class="cmd">END</b> do not combine with other patterns.</div>
<div class="subsection">
<h2 id="x4275696c741e696e205661726961626c6573">Built-in Variables</h2> Variable names with special meanings:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-hang">
<dt class="list-hang" style="margin-top: 1.00em;">
<b class="var">ARGC</b></dt>
<dd class="list-hang" style="margin-left: 9.00ex;">
argument count, assignable</dd>
<dt class="list-hang" style="margin-top: 1.00em;">
<b class="var">ARGV</b></dt>
<dd class="list-hang" style="margin-left: 9.00ex;">
argument array, assignable; non-null members are taken as filenames</dd>
<dt class="list-hang" style="margin-top: 1.00em;">
<b class="var">CONVFMT</b></dt>
<dd class="list-hang" style="margin-left: 9.00ex;">
conversion format used when converting numbers (default &#8220;%.6g&#8221;)</dd>
<dt class="list-hang" style="margin-top: 1.00em;">
<b class="var">ENVIRON</b></dt>
<dd class="list-hang" style="margin-left: 9.00ex;">
array of environment variables; subscripts are names.</dd>
<dt class="list-hang" style="margin-top: 1.00em;">
<b class="var">FILENAME</b></dt>
<dd class="list-hang" style="margin-left: 9.00ex;">
the name of the current input file</dd>
<dt class="list-hang" style="margin-top: 1.00em;">
<b class="var">FNR</b></dt>
<dd class="list-hang" style="margin-left: 9.00ex;">
ordinal number of the current record in the current file</dd>
<dt class="list-hang" style="margin-top: 1.00em;">
<b class="var">FS</b></dt>
<dd class="list-hang" style="margin-left: 9.00ex;">
regular expression used to separate fields; also settable by option <b class="flag">&#45;F</b> <i class="arg">fs</i>.</dd>
<dt class="list-hang" style="margin-top: 1.00em;">
<b class="var">NF</b></dt>
<dd class="list-hang" style="margin-left: 9.00ex;">
number of fields in the current record</dd>
<dt class="list-hang" style="margin-top: 1.00em;">
<b class="var">NR</b></dt>
<dd class="list-hang" style="margin-left: 9.00ex;">
ordinal number of the current record</dd>
<dt class="list-hang" style="margin-top: 1.00em;">
<b class="var">OFMT</b></dt>
<dd class="list-hang" style="margin-left: 9.00ex;">
output format for numbers (default &#8220;%.6g&#8221; )</dd>
<dt class="list-hang" style="margin-top: 1.00em;">
<b class="var">OFS</b></dt>
<dd class="list-hang" style="margin-left: 9.00ex;">
output field separator (default blank)</dd>
<dt class="list-hang" style="margin-top: 1.00em;">
<b class="var">ORS</b></dt>
<dd class="list-hang" style="margin-left: 9.00ex;">
output record separator (default newline)</dd>
<dt class="list-hang" style="margin-top: 1.00em;">
<b class="var">RS</b></dt>
<dd class="list-hang" style="margin-left: 9.00ex;">
input record separator (default newline)</dd>
<dt class="list-hang" style="margin-top: 1.00em;">
<b class="var">RSTART</b></dt>
<dd class="list-hang" style="margin-left: 9.00ex;">
Position of the first character matched by <b class="fname">match</b>(); 0 if not match.</dd>
<dt class="list-hang" style="margin-top: 1.00em;">
<b class="var">RLENGTH</b></dt>
<dd class="list-hang" style="margin-left: 9.00ex;">
Length of the string matched by <b class="fname">match</b>(); -1 if no match.</dd>
<dt class="list-hang" style="margin-top: 1.00em;">
<b class="var">SUBSEP</b></dt>
<dd class="list-hang" style="margin-left: 9.00ex;">
separates multiple subscripts (default 034)</dd>
</dl>
</div>
<div class="subsection">
<h2 id="x46756e6374696f6e73">Functions</h2> Functions may be defined (at the position of a pattern-action statement) thus:<p>
<div style="margin-left: 5.00ex;" class="display">
<b class="cmd">function foo(a, b, c) { ...; return x }</b></div>
<p>
Parameters are passed by value if scalar and by reference if array name; functions may be called recursively. Parameters are local to the function; all other variables are global. Thus local variables may be created by providing excess parameters in the function definition.</div>
</div>
<div class="section">
<h1 id="x4558414d504c4553">EXAMPLES</h1><dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="cmd">length($0) &gt; 72</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Print lines longer than 72 characters.<p>
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="cmd">{ print $2, $1 }</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Print first two fields in opposite order.<p>
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="cmd">BEGIN { FS = ",[ &#92;t]*|[ &#92;t]+" }</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="cmd">&#160;&#160;&#160;&#160;&#160;&#160;{ print $2, $1 }</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Same, with input fields separated by comma and/or blanks and tabs.<p>
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="cmd">&#160;&#160;&#160;&#160;{ s += $1 }</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="cmd">END { print "sum is", s, " average is&#160;",&#160;s/NR&#160;}</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Add up first column, print sum and average.<p>
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="cmd">/start/, /stop/</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Print all lines between start/stop pairs.<p>
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="cmd">BEGIN { # Simulate echo(1)</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="cmd">&#160;&#160;&#160;&#160; for (i = 1; i &lt; ARGC;&#160;i++)&#160;printf&#160;"%s&#160;",&#160;ARGV[i]</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="cmd">&#160;&#160;&#160;&#160; printf "&#92;n"</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="cmd">&#160;&#160;&#160;&#160; exit }</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
</dd>
</dl>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../1/egrep">egrep(1)</a>, <a class="link-man" href="../1/lex">lex(1)</a>, <a class="link-man" href="../1/sed">sed(1)</a>, <a class="link-man" href="../3/atan2">atan2(3)</a>, <a class="link-man" href="../3/cos">cos(3)</a>, <a class="link-man" href="../3/exp">exp(3)</a>, <a class="link-man" href="../3/log">log(3)</a>, <a class="link-man" href="../3/sin">sin(3)</a>, <a class="link-man" href="../3/sqrt">sqrt(3)</a>, <a class="link-man" href="../3/strftime">strftime(3)</a>, <a class="link-man" href="../3/time">time(3)</a><p>
A. V. Aho, B. W. Kernighan, P. J. Weinberger, <span class="emph">The AWK Programming Language</span>, Addison-Wesley, 1988. ISBN 0-201-07981-X<p>
<span class="emph">AWK Language Programming</span>, Edition 1.0, published by the Free Software Foundation, 1995</div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> <b class="name">nawk</b> has been the default system <b class="name">awk</b> since <span class="unix">NetBSD&#160;2.0</span>, replacing the previously used GNU <b class="name">awk</b>.</div>
<div class="section">
<h1 id="x42554753">BUGS</h1> There are no explicit conversions between numbers and strings. To force an expression to be treated as a number add 0 to it; to force it to be treated as a string concatenate "" to it.<p>
The scope rules for variables in functions are a botch; the syntax is worse.</div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
April 6, 2015</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
<>

