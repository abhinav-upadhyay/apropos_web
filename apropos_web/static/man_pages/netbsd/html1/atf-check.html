<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="../style.css" type="text/css" media="all">
<title>
ATF-CHECK(1)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
ATF-CHECK(1)</td>
<td class="head-vol" align="center">
General Commands Manual</td>
<td class="head-rtitle" align="right">
ATF-CHECK(1)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">atf-check</b> &#8212; <span class="desc">executes a command and analyzes its results</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1><table class="synopsis">
<col style="width: 9.00ex;">
<col>
<tbody>
<tr>
<td>
atf-check</td>
<td>
&#91;<span class="opt"><b class="flag">&#45;s</b> <i class="arg">qual:value</i></span>&#93; &#91;<span class="opt"><b class="flag">&#45;o</b> <i class="arg">action:arg ...</i></span>&#93; &#91;<span class="opt"><b class="flag">&#45;e</b> <i class="arg">action:arg ...</i></span>&#93; &#91;<span class="opt"><b class="flag">&#45;x</b></span>&#93; <i class="arg">command</i></td>
</tr>
</tbody>
</table>
<br>
<table class="synopsis">
<col style="width: 9.00ex;">
<col>
<tbody>
<tr>
<td>
atf-check</td>
<td>
<b class="flag">&#45;h</b></td>
</tr>
</tbody>
</table>
</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> <b class="name">atf-check</b> executes a given command and analyzes its results, including exit code, stdout and stderr.<p>
In the first synopsis form, <b class="name">atf-check</b> will execute the provided command and apply checks specified by arguments. By default it will act as if it was run with <b class="flag">&#45;s</b> <i class="arg">exit:0</i> <b class="flag">&#45;o</b> <i class="arg">empty</i> <b class="flag">&#45;e</b> <i class="arg">empty</i>. Multiple checks for the same output channel are allowed and, if specified, their results will be combined as a logical and (meaning that the output must match all the provided checks).<p>
In the second synopsis form, <b class="name">atf-check</b> will print information about all supported options and their purpose.<p>
The following options are available:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;h</b></dt>
<dd class="list-tag" style="margin-left: 13.00ex;">
Shows a short summary of all available options and their purpose.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;s</b> <i class="arg">qual:value</i></dt>
<dd class="list-tag" style="margin-left: 13.00ex;">
Analyzes termination status. Must be one of:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="arg">exit:&lt;value&gt;</i></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
checks that the program exited cleanly and that its exit status is equal to <b class="var">value</b>. The exit code can be omitted altogether, in which case any clean exit is accepted.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="arg">ignore</i></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
ignores the exit check.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="arg">signal:&lt;value&gt;</i></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
checks that the program exited due to a signal and that the signal that terminated it is <b class="var">value</b>. The signal can be specified both as a number or as a name, or it can also be omitted altogether, in which case any signal is accepted.</dd>
</dl>
<p>
Most of these checkers can be prefixed by the &#8216;not-&#8217; string, which effectively reverses the check.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;o</b> <i class="arg">action:arg</i></dt>
<dd class="list-tag" style="margin-left: 13.00ex;">
Analyzes standard output. Must be one of:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="arg">empty</i></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
checks that stdout is empty</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="arg">ignore</i></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
ignores stdout</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="arg">file:&lt;path&gt;</i></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
compares stdout with given file</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="arg">inline:&lt;value&gt;</i></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
compares stdout with inline value</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="arg">match:&lt;regexp&gt;</i></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
looks for a regular expression in stdout</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="arg">save:&lt;path&gt;</i></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
saves stdout to given file</dd>
</dl>
<p>
Most of these checkers can be prefixed by the &#8216;not-&#8217; string, which effectively reverses the check.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;e</b> <i class="arg">action:arg</i></dt>
<dd class="list-tag" style="margin-left: 13.00ex;">
Analyzes standard error (syntax identical to above)</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;x</b></dt>
<dd class="list-tag" style="margin-left: 13.00ex;">
Executes <i class="arg">command</i> as a shell command line, executing it with the system shell defined by <b class="var">ATF_SHELL</b> in <a class="link-man" href="../html1/atf-config.html">atf-config(1)</a>. You should avoid using this flag if at all possible to prevent shell quoting issues.</dd>
</dl>
</div>
<div class="section">
<h1 id="x4558495420535441545553">EXIT STATUS</h1> <b class="name">atf-check</b> exits 0 on success, and other (unspecified) value on failure.</div>
<div class="section">
<h1 id="x4558414d504c4553">EXAMPLES</h1><pre style="margin-left: 5.00ex;" class="lit display">
# Exit code 0, nothing on stdout/stderr 
atf-check 'true' 
 
# Typical usage if failure is expected 
atf-check -s not-exit:0 'false' 
 
# Checking stdout/stderr 
echo foobar &gt;expout 
atf-check -o file:expout -e inline:"xx&#92;tyy&#92;n" &#92; 
    'echo foobar ; printf "xx&#92;tyy&#92;n" &gt;&amp;2' 
 
# Checking for a crash 
atf-check -s signal:sigsegv my_program 
 
# Combined checks 
atf-check -o match:foo -o not-match:bar echo foo baz</pre>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../html1/atf-config.html">atf-config(1)</a>, <a class="link-man" href="../html7/atf.html">atf(7)</a></div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
June 27, 2010</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
</html>

