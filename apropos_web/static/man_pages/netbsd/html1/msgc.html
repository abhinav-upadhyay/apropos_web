<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="../style.css" type="text/css" media="all">
<title>
MSGC(1)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
MSGC(1)</td>
<td class="head-vol" align="center">
General Commands Manual</td>
<td class="head-rtitle" align="right">
MSGC(1)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">msgc</b>, <b class="name">msg_window</b>, <b class="name">msg_string</b>, <b class="name">msg_clear</b>, <b class="name">msg_standout</b>, <b class="name">msg_standend</b>, <b class="name">msg_display</b>, <b class="name">msg_display_add</b>, <b class="name">msg_printf</b>, <b class="name">msg_prompt</b>, <b class="name">msg_prompt_add</b>, <b class="name">msg_prompt_win</b>, <b class="name">msg_prompt_noecho</b>, <b class="name">msg_row</b>, <b class="name">msg_table_add</b> &#8212; <span class="desc">simple message list compiler</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> msgc &#91;<span class="opt"><b class="flag">&#45;o</b> <i class="arg">name</i></span>&#93; <i class="arg">file</i><p>
<br>
<b class="includes">#include <a class="link-includes">"msg_defs.h"</a></b><p>
<i class="ftype">void</i><br>
<b class="fname">msg_window</b>(<i class="farg" style="white-space:nowrap;">WINDOW *window</i>);<p>
<i class="ftype">const char *</i><br>
<b class="fname">msg_string</b>(<i class="farg" style="white-space:nowrap;">msg msg_no</i>);<p>
<i class="ftype">void</i><br>
<b class="fname">msg_clear</b>(<i class="farg" style="white-space:nowrap;">void</i>);<p>
<i class="ftype">void</i><br>
<b class="fname">msg_standout</b>(<i class="farg" style="white-space:nowrap;">void</i>);<p>
<i class="ftype">void</i><br>
<b class="fname">msg_standend</b>(<i class="farg" style="white-space:nowrap;">void</i>);<p>
<i class="ftype">void</i><br>
<b class="fname">msg_display</b>(<i class="farg" style="white-space:nowrap;">msg msg_no</i>, <i class="farg" style="white-space:nowrap;">...</i>);<p>
<i class="ftype">void</i><br>
<b class="fname">msg_display_add</b>(<i class="farg" style="white-space:nowrap;">msg msg_no</i>, <i class="farg" style="white-space:nowrap;">...</i>);<p>
<i class="ftype">void</i><br>
<b class="fname">msg_printf</b>(<i class="farg" style="white-space:nowrap;">fmt</i>, <i class="farg" style="white-space:nowrap;">...</i>);<p>
<i class="ftype">void</i><br>
<b class="fname">msg_prompt</b>(<i class="farg" style="white-space:nowrap;">msg msg_no</i>, <i class="farg" style="white-space:nowrap;">const char *def</i>, <i class="farg" style="white-space:nowrap;">char *val</i>, <i class="farg" style="white-space:nowrap;">int max_chars</i>, <i class="farg" style="white-space:nowrap;">...</i>);<p>
<i class="ftype">void</i><br>
<b class="fname">msg_prompt_add</b>(<i class="farg" style="white-space:nowrap;">msg msg_no</i>, <i class="farg" style="white-space:nowrap;">const char *def</i>, <i class="farg" style="white-space:nowrap;">char *val</i>, <i class="farg" style="white-space:nowrap;">int max_chars</i>, <i class="farg" style="white-space:nowrap;">...</i>);<p>
<i class="ftype">void</i><br>
<b class="fname">msg_prompt_win</b>(<i class="farg" style="white-space:nowrap;">msg msg_no</i>, <i class="farg" style="white-space:nowrap;">WINDOW *win</i>, <i class="farg" style="white-space:nowrap;">const char *def</i>, <i class="farg" style="white-space:nowrap;">char *val</i>, <i class="farg" style="white-space:nowrap;">int max_chars</i>, <i class="farg" style="white-space:nowrap;">...</i>);<p>
<i class="ftype">void</i><br>
<b class="fname">msg_prompt_noecho</b>(<i class="farg" style="white-space:nowrap;">msg msg_no</i>, <i class="farg" style="white-space:nowrap;">const char *def</i>, <i class="farg" style="white-space:nowrap;">char *val</i>, <i class="farg" style="white-space:nowrap;">int max_chars</i>, <i class="farg" style="white-space:nowrap;">...</i>);<p>
<i class="ftype">int</i><br>
<b class="fname">msg_row</b>(<i class="farg" style="white-space:nowrap;">void</i>);<p>
<i class="ftype">void</i><br>
<b class="fname">msg_table_add</b>(<i class="farg" style="white-space:nowrap;">msg msg_no</i>, <i class="farg" style="white-space:nowrap;">...</i>);</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> This implements a curses based message display system. A source file that lists messages with associated names is given to <b class="name">msgc</b> and produces both a .c and a .h file that implement the menu system. The standard root name of the files is <i class="file">msg_defs</i>. The <b class="flag">&#45;o</b> <i class="arg">name</i> can be used to specify a different root name.</div>
<div class="section">
<h1 id="x454e5649524f4e4d454e54">ENVIRONMENT</h1><dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">MSGDEF</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Can be set to point to a different set of definition files for <b class="name">msgc</b>. The current location defaults to <i class="file">/usr/share/misc</i>.</dd>
</dl>
</div>
<div class="section">
<h1 id="x46494c4553">FILES</h1><ul style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-item">
<li class="list-item" style="margin-top: 1.00em;">
<i class="file">/usr/share/misc/msg_sys.def</i></li>
</ul>
</div>
<div class="section">
<h1 id="x534f55524345204445534352495054494f4e">SOURCE DESCRIPTION</h1> The format is very simple. Each message is started with the word &#8216;message&#8217; followed by the name of the message. The body of the message is next and is started by a { and closed by a }. The braces are not part of the message. Everything, including newlines between the braces are part of the message.</div>
<div class="section">
<h1 id="x4d4553534147452046554e4354494f4e53">MESSAGE FUNCTIONS</h1> The defined messages are used through calls routines that manipulate the messages. You first need to set the <a class="link-man" href="../3/curses">curses(3)</a> environment up and then tell the message system which window to use for displaying message by calling the function <b class="fname">msg_window</b>().<p>
All variable argument lists in the functions are used as are arguments to <a class="link-man" href="../3/sprintf">sprintf(3)</a>. The messages may have <a class="link-man" href="../3/sprintf">sprintf(3)</a> conversions in them and the corresponding parameters should match. Messages are identified by name using the notation &#8216;MSG_name&#8217; where &#8220;name&#8221; is the name in the message source file. (The definitions are accessed by including the generated .h file into a source file wanting to use the message routines.)<p>
The function <b class="fname">msg_string</b>() just returns a pointer to the actual message string. The functions <b class="fname">msg_clear</b>(), <b class="fname">msg_standout</b>() and <b class="fname">msg_standend</b>() respectively clear the message window, set standout mode and clear standout mode.<p>
The functions <b class="fname">msg_display</b>() and <b class="fname">msg_display_add</b>() cause a defined message to be displayed in the message window and does the requested conversions before printing. The difference is that <b class="fname">msg_display</b>() clears the window before displaying the message. These functions fill paragraphs for readability. The <b class="fname">msg_table_add</b>() function behaves like <b class="fname">msg_display_add</b>() but does not fill text.<p>
The function <b class="fname">msg_printf</b>() allows to display a raw message without going through the message catalog.<p>
The remaining functions deal with a prompt facility. A prompt message is either taken from the message directory or from a given string. The message is processed with <a class="link-man" href="../3/sprintf">sprintf(3)</a> and then displayed. If the parameter <i class="arg">def</i> is non-<span class="define">NULL</span> and not a string of zero length, a default value is printed in brackets. The user is allowed to type in a response. If the user types just the newline character, the default is returned in the value. The parameter <i class="arg">max_chars</i> is the length of the parameter <i class="arg">val</i>, where the results are stored. The parameters <i class="arg">def</i> and <i class="arg">val</i> may point to the same character array. If the default is chosen, the character array is not changed. The functions <b class="fname">msg_echo</b>() and <b class="fname">msg_noecho</b>() control whether the prompt routine echo or don't echo the input that is typed by the user.<p>
<b class="fname">msg_prompt_win</b>() uses the specified curses window instead of the default one.<p>
<b class="fname">msg_row</b>() return the current row - i.e.: getcury(msg_win) + getbegy(msg_win).</div>
<div class="section">
<h1 id="x415554484f5253">AUTHORS</h1> Philip A. Nelson for Piermont Information Systems Inc.</div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
March 3, 2012</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
</html>

