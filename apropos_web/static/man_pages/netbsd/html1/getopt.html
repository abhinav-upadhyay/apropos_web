<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="/static/man_pages/netbsd/style.css" type="text/css" media="all">
<title>
GETOPT(1)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
GETOPT(1)</td>
<td class="head-vol" align="center">
General Commands Manual</td>
<td class="head-rtitle" align="right">
GETOPT(1)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">getopt</b> &#8212; <span class="desc">parse command options</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <code class="lit">args=&#768;getopt optstring $*&#768;</code><p>
<code class="lit">set &#45;&#45; &#768;getopt optstring $*&#768;</code></div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> <b class="name">getopt</b> is used to break up options in command lines for easy parsing by shell procedures, and to check for legal options. &#91;<span class="opt">Optstring</span>&#93; is a string of recognized option letters (see <a class="link-man" href="../3/getopt">getopt(3)</a>); if a letter is followed by a colon, the option is expected to have an argument which may or may not be separated from it by white space. The special option &#8220;&#45;&#45;&#8221; is used to delimit the end of the options. <b class="name">getopt</b> will place &#8220;&#45;&#45;&#8221; in the arguments at the end of the options, or recognize it if used explicitly. The shell arguments (<span class="env">$1</span>, <span class="env">$2</span>, <span class="env">...</span>) are reset so that each option is preceded by a &#8220;&#45;&#8221; and in its own shell argument; each option argument is also in its own shell argument.<p>
<b class="name">getopt</b> should not be used in new scripts; use the shell builtin <b class="name">getopts</b> instead.</div>
<div class="section">
<h1 id="x4558414d504c4553">EXAMPLES</h1> The following code fragment shows how one might process the arguments for a command that can take the options &#91;<span class="opt">a</span>&#93; and &#91;<span class="opt">b</span>&#93;, and the option &#91;<span class="opt">c</span>&#93;, which requires an argument.<p>
<pre style="margin-left: 5.00ex;" class="lit display">
args=&#768;getopt abc: $*&#768; 
if [ $? &#45;ne 0 ]; then 
	echo 'Usage: ...' 
	exit 2 
fi 
set &#45;&#45; $args 
while [ $# &#45;gt 0 ]; do 
	case "$1" in 
		&#45;a|&#45;b) 
			flag=$1 
			;; 
		&#45;c) 
			carg=$2; shift 
			;; 
		&#45;&#45;) 
			shift; break 
			;; 
	esac 
	shift 
done</pre>
<p>
This code will accept any of the following as equivalent:<p>
<pre style="margin-left: 5.00ex;" class="lit display">
cmd &#45;acarg file file 
cmd &#45;a &#45;c arg file file 
cmd &#45;carg -a file file 
cmd &#45;a &#45;carg &#45;&#45; file file</pre>
<p>
IEEE Std 1003.2 (&#8220;POSIX.2&#8221;) mandates that the <a class="link-man" href="../1/sh">sh(1)</a> set command return the value of 0 for the exit status. Therefore, the exit status of the <b class="name">getopt</b> command is lost when <b class="name">getopt</b> and the <a class="link-man" href="../1/sh">sh(1)</a> set command are used on the same line. The example given is one way to detect errors found by <b class="name">getopt</b>.</div>
<div class="section">
<h1 id="x444941474e4f5354494353">DIAGNOSTICS</h1> <b class="name">getopt</b> prints an error message on the standard error output when it encounters an option letter not included in &#91;<span class="opt">optstring</span>&#93;.</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../1/sh">sh(1)</a>, <a class="link-man" href="../3/getopt">getopt(3)</a></div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> Written by Henry Spencer, working from a Bell Labs manual page. Behavior believed identical to the Bell version.</div>
<div class="section">
<h1 id="x42554753">BUGS</h1> Whatever <a class="link-man" href="../3/getopt">getopt(3)</a> has.<p>
Arguments containing white space or embedded shell metacharacters generally will not survive intact;  this looks easy to fix but isn't.<p>
The error message for an invalid option is identified as coming from <b class="name">getopt</b> rather than from the shell procedure containing the invocation of <b class="name">getopt</b>; this again is hard to fix.<p>
The precise best way to use the <b class="cmd">set</b> command to set the arguments without disrupting the value(s) of shell options varies from one shell version to another.</div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
November 28, 2009</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
</html>

