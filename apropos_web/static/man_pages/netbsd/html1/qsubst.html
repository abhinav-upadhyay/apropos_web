<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="../style.css" type="text/css" media="all">
<title>
QSUBST(1)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
QSUBST(1)</td>
<td class="head-vol" align="center">
General Commands Manual</td>
<td class="head-rtitle" align="right">
QSUBST(1)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">qsubst</b> &#8212; <span class="desc">query-replace strings in files</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1><table class="synopsis">
<col style="width: 6.00ex;">
<col>
<tbody>
<tr>
<td>
qsubst</td>
<td>
<i class="arg">str1</i> <i class="arg">str2</i> &#91;<span class="opt"><i class="arg">flags</i></span>&#93; <i class="arg">file</i> &#91;<span class="opt"><i class="arg">file</i> &#91;<span class="opt"><i class="arg">...</i></span>&#93;</span>&#93;</td>
</tr>
</tbody>
</table>
</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> <b class="name">qsubst</b> reads its options (see below) to get a list of files. For each file on this list, it then replaces <i class="arg">str1</i> with <i class="arg">str2</i> wherever possible in that file, depending on user input (see below). The result is written back onto the original file.<p>
For each potential substitution found, the user is prompted with a few lines before and after the line containing the string to be substituted. The string itself is displayed using the terminal's standout mode, if any. Then one character is read from the terminal. This is then interpreted as follows (this is designed to be like Emacs' query-replace-string):<dl style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 5.00ex;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
space</dt>
<dd class="list-tag" style="margin-left: 5.00ex;">
Replace this occurrence and go on to the next one.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
.</dt>
<dd class="list-tag" style="margin-left: 5.00ex;">
Replace this occurrence and don't change any more in this file (i.e., go on to the next file).</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
,</dt>
<dd class="list-tag" style="margin-left: 5.00ex;">
Tentatively replace this occurrence. The lines as they would look if the substitution were made are printed out. Then another character is read and it is used to decide the result as if the tentative replacement had not happened.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
n</dt>
<dd class="list-tag" style="margin-left: 5.00ex;">
Don't change this one; just go on to the next one.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
^G</dt>
<dd class="list-tag" style="margin-left: 5.00ex;">
Don't change this one or any others in this file, but instead simply go on to the next file.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
!</dt>
<dd class="list-tag" style="margin-left: 5.00ex;">
Change the rest in this file without asking, then go on to the next file (at which point qsubst will start asking again).</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
?</dt>
<dd class="list-tag" style="margin-left: 5.00ex;">
Print out the current filename and ask again.</dd>
</dl>
<p>
The first two arguments to qsubst are always the string to replace and the string to replace it with. The options are as follows:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 5.00ex;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">&#45;w</b></dt>
<dd class="list-tag" style="margin-left: 11.00ex;">
The search string is considered as a C symbol; it must be bounded by non-symbol characters. This option toggles. (&#8216;w&#8217; for &#8216;word&#8217;.)</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">&#45;!</b></dt>
<dd class="list-tag" style="margin-left: 11.00ex;">
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">&#45;go</b></dt>
<dd class="list-tag" style="margin-left: 11.00ex;">
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">&#45;noask</b></dt>
<dd class="list-tag" style="margin-left: 11.00ex;">
Enter ! mode automatically at the beginning of each file.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">&#45;nogo</b></dt>
<dd class="list-tag" style="margin-left: 11.00ex;">
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">&#45;ask</b></dt>
<dd class="list-tag" style="margin-left: 11.00ex;">
Negate <b class="flag">&#45;go</b>, that is, ask as usual.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">&#45;c</b><i class="arg">N</i></dt>
<dd class="list-tag" style="margin-left: 11.00ex;">
(Where <i class="arg">N</i> is a number.) Give <i class="arg">N</i> lines of context above and below the line with the match when prompting the user.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">&#45;CA</b><i class="arg">N</i></dt>
<dd class="list-tag" style="margin-left: 11.00ex;">
(Where <i class="arg">N</i> is a number.) Give <i class="arg">N</i> lines of context above the line with the match when prompting the user.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">&#45;CB</b><i class="arg">N</i></dt>
<dd class="list-tag" style="margin-left: 11.00ex;">
(Where <i class="arg">N</i> is a number.) Give <i class="arg">N</i> lines of context below the line with the match when prompting the user.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">&#45;f</b> <i class="arg">filename</i></dt>
<dd class="list-tag" style="margin-left: 11.00ex;">
The <i class="arg">filename</i> argument is one of the files qsubst should perform substitutions in.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">&#45;F</b> <i class="arg">filename</i></dt>
<dd class="list-tag" style="margin-left: 11.00ex;">
<b class="name">qsubst</b> reads <i class="arg">filename</i> to get the names of files to perform substitutions in. The names should appear one to a line.</dd>
</dl>
<p>
The default amount of context is <b class="flag">&#45;c2</b>, that is, two lines above and two lines below the line with the match.<p>
Arguments not beginning with a <b class="flag">&#45;</b> sign in the options field are implicitly preceded by <b class="flag">&#45;f</b>. Thus, <b class="flag">&#45;f</b> is really needed only when the file name begins with a <b class="flag">&#45;</b> sign.<p>
<b class="name">qsubst</b> reads its options in order and processes files as it gets them. This means, for example, that a <b class="flag">&#45;go</b> will affect only files named after the <b class="flag">&#45;go</b>.<p>
The most context you can get is ten lines each, above and below.<p>
<i class="arg">str1</i> is limited to 512 characters; there is no limit on the size of <i class="arg">str2</i>. Neither one may contain a NUL.<p>
NULs in the file may cause qsubst to make various mistakes.<p>
If any other program modifies the file while qsubst is running, all bets are off.</div>
<div class="section">
<h1 id="x415554484f5253">AUTHORS</h1> <span class="author">der Mouse</span> &#60;<a class="link-mail" href="mailto:mouse@rodents.montreal.qc.ca">mouse@rodents.montreal.qc.ca</a>&#62;</div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
September 4, 1999</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
</html>

