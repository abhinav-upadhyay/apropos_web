<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="/static/man_pages/netbsd/style.css" type="text/css" media="all">
<title>
EXPR(1)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
EXPR(1)</td>
<td class="head-vol" align="center">
General Commands Manual</td>
<td class="head-rtitle" align="right">
EXPR(1)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">expr</b> &#8212; <span class="desc">evaluate expression</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1><table class="synopsis">
<col style="width: 4.00ex;">
<col>
<tbody>
<tr>
<td>
expr</td>
<td>
<i class="arg">expression</i></td>
</tr>
</tbody>
</table>
</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> The <b class="name">expr</b> utility evaluates <i class="arg">expression</i> and writes the result on standard output.<p>
All operators are separate arguments to the <b class="name">expr</b> utility. Characters special to the command interpreter must be escaped.<p>
Operators are listed below in order of increasing precedence. Operators with equal precedence are grouped within { } symbols.<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="arg">expr1</i> <code class="lit">|</code> <i class="arg">expr2</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Returns the evaluation of <i class="arg">expr1</i> if it is neither an empty string nor zero; otherwise, returns the evaluation of <i class="arg">expr2</i>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="arg">expr1</i> <code class="lit">&amp;</code> <i class="arg">expr2</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Returns the evaluation of <i class="arg">expr1</i> if neither expression evaluates to an empty string or zero; otherwise, returns zero.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="arg">expr1</i> <code class="lit">{=, &gt;, &#8805;, &lt;, &#8804;, !=}</code> <i class="arg">expr2</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Returns the results of integer comparison if both arguments are integers; otherwise, returns the results of string comparison using the locale-specific collation sequence. The result of each comparison is 1 if the specified relation is true, or 0 if the relation is false.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="arg">expr1</i> <code class="lit">{+, -}</code> <i class="arg">expr2</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Returns the results of addition or subtraction of integer-valued arguments.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="arg">expr1</i> <code class="lit">{*, /, %}</code> <i class="arg">expr2</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Returns the results of multiplication, integer division, or remainder of integer-valued arguments.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="arg">expr1</i> <code class="lit">:</code> <i class="arg">expr2</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
The &#8220;:&#8221; operator matches <i class="arg">expr1</i> against <i class="arg">expr2</i>, which must be a regular expression. The regular expression is anchored to the beginning of the string with an implicit &#8220;^&#8221;.<p>
If the match succeeds and the pattern contains at least one regular expression subexpression &#8220;&#92;(...&#92;)&#8221;, the string corresponding to &#8220;&#92;1&#8221; is returned; otherwise the matching operator returns the number of characters matched. If the match fails and the pattern contains a regular expression subexpression the null string is returned; otherwise 0.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
(  <i class="arg">expr</i>  )</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Parentheses are used for grouping in the usual manner.</dd>
</dl>
<p>
Additionally, the following keywords are recognized:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
length <i class="arg">expr</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Returns the length of the specified string in bytes.</dd>
</dl>
<p>
Operator precedence (from highest to lowest):<ol style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 5.00ex;" class="list list-enum">
<li class="list-enum" style="margin-top: 0.00em;">
parentheses</li>
<li class="list-enum" style="margin-top: 0.00em;">
length</li>
<li class="list-enum" style="margin-top: 0.00em;">
&#8220;:&#8221;</li>
<li class="list-enum" style="margin-top: 0.00em;">
&#8220;*&#8221;, &#8220;/&#8221;, and &#8220;%&#8221;</li>
<li class="list-enum" style="margin-top: 0.00em;">
&#8220;+&#8221; and &#8220;-&#8221;</li>
<li class="list-enum" style="margin-top: 0.00em;">
compare operators</li>
<li class="list-enum" style="margin-top: 0.00em;">
&#8220;&amp;&#8221;</li>
<li class="list-enum" style="margin-top: 0.00em;">
&#8220;|&#8221;</li>
</ol>
</div>
<div class="section">
<h1 id="x4558495420535441545553">EXIT STATUS</h1> The <b class="name">expr</b> utility exits with one of the following values:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
0</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
the expression is neither an empty string nor 0.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
1</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
the expression is an empty string or 0.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
2</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
the expression is invalid.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
&gt;2</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
an error occurred (such as memory allocation failure).</dd>
</dl>
</div>
<div class="section">
<h1 id="x4558414d504c4553">EXAMPLES</h1><ol style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-enum">
<li class="list-enum" style="margin-top: 1.00em;">
The following example adds one to variable &#8220;a&#8221;:<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit">a=`expr $a + 1`</code></div>
</blockquote>
</li>
<li class="list-enum" style="margin-top: 1.00em;">
The following example returns zero, due to subtraction having higher precedence than the &#8220;&amp;&#8221; operator:<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit">expr 1 '&amp;' 1 - 1</code></div>
</blockquote>
</li>
<li class="list-enum" style="margin-top: 1.00em;">
The following example returns the filename portion of a pathname stored in variable &#8220;a&#8221;:<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit">expr /$a <code class="lit"></code>: <code class="lit">'.*/&#92;(.*&#92;)'</code></code></div>
</blockquote>
</li>
<li class="list-enum" style="margin-top: 1.00em;">
The following example returns the number of characters in variable &#8220;a&#8221;:<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit">expr $a <code class="lit"></code>: <code class="lit">'.*'</code></code></div>
</blockquote>
</li>
</ol>
</div>
<div class="section">
<h1 id="x434f4d5041544942494c495459">COMPATIBILITY</h1> This implementation of <b class="name">expr</b> internally uses 64 bit representation of integers and checks for over- and underflows. It also treats &#8220;/&#8221; (the division mark) and option &#8220;--&#8221; correctly depending upon context.<p>
<b class="name">expr</b> on other systems (including <span class="unix">NetBSD</span> up to and including <span class="unix">NetBSD&#160;1.5</span>) might not be so graceful. Arithmetic results might be arbitrarily limited on such systems, most commonly to 32 bit quantities. This means such <b class="name">expr</b> can only process values between -2147483648 and +2147483647.<p>
On other systems, <b class="name">expr</b> might also not work correctly for regular expressions where either side contains &#8220;/&#8221; (a single forward slash), like this:<p>
<pre style="margin-left: 5.00ex;" class="lit display">
expr / : '.*/&#92;(.*&#92;)'</pre>
<p>
If this is the case, you might use &#8220;//&#8221; (a double forward slash) to avoid confusion with the division operator:<p>
<pre style="margin-left: 5.00ex;" class="lit display">
expr "//$a" : '.*/&#92;(.*&#92;)'</pre>
<p>
According to IEEE Std 1003.2 (&#8220;POSIX.2&#8221;), <b class="name">expr</b> has to recognize special option &#8220;--&#8221;, treat it as a delimiter to mark the end of command line options, and ignore it. Some <b class="name">expr</b> implementations don't recognize it at all; others might ignore it even in cases where doing so results in syntax error. There should be same result for both following examples, but it might not always be:<ol style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 5.00ex;" class="list list-enum">
<li class="list-enum" style="margin-top: 0.00em;">
expr -- : .</li>
<li class="list-enum" style="margin-top: 0.00em;">
expr -- -- : .</li>
</ol>
Although <span class="unix">NetBSD</span> <b class="name">expr</b> handles both cases correctly, you should not depend on this behavior for portability reasons and avoid passing a bare &#8220;--&#8221; as the first argument.</div>
<div class="section">
<h1 id="x5354414e4441524453">STANDARDS</h1> The <b class="name">expr</b> utility conforms to IEEE Std 1003.2 (&#8220;POSIX.2&#8221;). The <i class="arg">length</i> keyword is an extension for compatibility with GNU <b class="name">expr</b>.</div>
<div class="section">
<h1 id="x415554484f5253">AUTHORS</h1> Original implementation was written by <span class="author">J.T. Conklin</span> &#60;jtc@NetBSD.org&#62;. It was rewritten for <span class="unix">NetBSD&#160;1.6</span> by <span class="author">Jaromir Dolecek</span> &#60;jdolecek@NetBSD.org&#62;.</div>
<div class="section">
<h1 id="x4e4f544553">NOTES</h1> The empty string &#8220;&#8221; cannot be matched with the intuitive:<p>
<pre style="margin-left: 5.00ex;" class="lit display">
expr '' : '$'</pre>
<p>
The reason is that the returned number of matched characters (zero) is indistinguishable from a failed match, so this returns failure. To match the empty string, use something like:<p>
<pre style="margin-left: 5.00ex;" class="lit display">
expr x'' : 'x$'</pre>
</div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
April 20, 2004</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
</html>

