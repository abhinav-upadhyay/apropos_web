<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="../../style.css" type="text/css" media="all">
<title>
MS(4) (ATARI)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
MS(4)</td>
<td class="head-vol" align="center">
Kernel Interfaces Manual (ATARI)</td>
<td class="head-rtitle" align="right">
MS(4)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">ms</b> &#8212; <span class="desc">Atari mouse interface</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="config">pseudo-device mouse 1</b></div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> The Atari mouse driver supports both the original Atari mouse and the third party 3-button mouse that has its middle button connected to the up-switch of the second joystick port. To accommodate X11 users with a standard mouse, the driver is able to emulate the middle button. See the section on ioctls for more info.<div class="subsection">
<h2 id="x537570706f7274656420696f63746c73">Supported ioctls</h2><dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
MIOCS3B_EMUL</dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
This ioctl turns the middle button emulation on or off depending on its argument. The middle button event is triggered by simultaneously pressing the left and right buttons. The default emulation mode is on.<p>
Note that the emulation status is retained across multiple open/close calls.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
MIOCG3B_EMUL</dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
This ioctl allows you to get the actual status of the emulation mode.</dd>
</dl>
</div>
<div class="subsection">
<h2 id="x496e74657266616365206465736372697074696f6e">Interface description</h2> The Atari mouse interface works on a minimal emulation of Sun's Firm_event structures. The primary reason for this is easy interfacing with X11.<p>
The movement and button events are read as structures of the form:<p>
<pre style="margin-left: 0.00ex;" class="lit display">
typedef struct Firm_event { 
	u_int_16_t      id;       /* key or MS_* or LOC_[XY]_DELTA   */ 
	u_int_16_t      pad;      /* unused                          */ 
	int_16_t        value;    /* VKEY_{UP,DOWN} or locator delta */ 
	struct timeval  time;     /* time stamp of the event         */ 
}</pre>
<p>
The values of 'id' concerning the mouse:<p>
<pre style="margin-left: 0.00ex;" class="lit display">
#define MS_LEFT         0x7f20    /* left mouse button   */ 
#define MS_MIDDLE       0x7f21    /* middle mouse button */ 
#define MS_RIGHT        0x7f22    /* right mouse button  */ 
#define LOC_X_DELTA     0x7f80    /* mouse delta-X       */ 
#define LOC_Y_DELTA     0x7f81    /* mouse delta-Y       */</pre>
<p>
The values of 'value' concerning a button event:<p>
<pre style="margin-left: 0.00ex;" class="lit display">
#define VKEY_UP         0         /* a button went up   */ 
#define VKEY_DOWN       1         /* a button went down */</pre>
</div>
</div>
<div class="section">
<h1 id="x46494c4553">FILES</h1><dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/dev/mouse0</i></dt>
<dd class="list-tag" style="margin-left: 11.00ex;">
The real mouse device</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/dev/mouse</i></dt>
<dd class="list-tag" style="margin-left: 11.00ex;">
The currently active mouse device</dd>
</dl>
</div>
<div class="section">
<h1 id="x42554753">BUGS</h1> The time interval that defines 'simultaneous' cannot be set.</div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
October 16, 1995</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
</html>

