<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="../style.css" type="text/css" media="all">
<title>
PCIBACK(4) (Xen)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
PCIBACK(4)</td>
<td class="head-vol" align="center">
Kernel Interfaces Manual (Xen)</td>
<td class="head-rtitle" align="right">
PCIBACK(4)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">pciback</b> &#8212; <span class="desc">Xen backend paravirtualized PCI pass-through driver</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="config">pciback* at pci?</b></div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> The <b class="name">pciback</b> driver is the backend part of the PCI pass-through functionality that can be used by the Xen dom0 to export <a class="link-man" href="../4/pci">pci(4)</a> devices to a guest domain. To export a PCI device to a guest domain, the device has to be attached to <b class="name">pciback</b> in the dom0.<p>
When the guest domain is <span class="unix">NetBSD</span>, the device attached to the <b class="name">pciback</b> driver will attach to a <a class="link-man" href="../4/xpci">xpci(4)</a> bus inside the guest domain.</div>
<div class="section">
<h1 id="x4558414d504c4553">EXAMPLES</h1> To attach a device to the <b class="name">pciback</b> driver, follow these steps:<ol style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 5.00ex;" class="list list-enum">
<li class="list-enum" style="margin-top: 0.00em;">
look for the device PCI ID, via <a class="link-man" href="../8/pcictl">pcictl(8)</a>.</li>
<li class="list-enum" style="margin-top: 0.00em;">
edit <a class="link-man" href="../5/boot.cfg">boot.cfg(5)</a> and add the PCI ID to the list of PCI IDs that you want to attach to <b class="name">pciback</b>, in bus:device.function notation. The list is passed to dom0 module via the <b class="cmd">pciback.hide</b> parameter:<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit">pciback.hide=(bus:dev.fun)(bus:dev.func)(...)</code></div>
</blockquote>
See also <a class="link-man" href="../8/boot">boot(8)</a>.</li>
<li class="list-enum" style="margin-top: 0.00em;">
reboot dom0.</li>
<li class="list-enum" style="margin-top: 0.00em;">
add the PCI ID to the list of PCI devices in the domain configuration file:<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit">pci = ['bus:dev.fun', '...']</code></div>
</blockquote>
</li>
<li class="list-enum" style="margin-top: 0.00em;">
start the guest domain.</li>
</ol>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../4/pci">pci(4)</a>, <a class="link-man" href="../4/xpci">xpci(4)</a>, <a class="link-man" href="../8/boot">boot(8)</a>, <a class="link-man" href="../8/pcictl">pcictl(8)</a></div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> The <b class="name">pciback</b> driver first appeared in <span class="unix">NetBSD&#160;5.1</span>.</div>
<div class="section">
<h1 id="x415554484f5253">AUTHORS</h1> <span class="author"></span>The <b class="name">pciback</b> driver was written by <span class="author">Manuel Bouyer</span> &#60;<a class="link-mail" href="mailto:bouyer@NetBSD.org">bouyer@NetBSD.org</a>&#62;.</div>
<div class="section">
<h1 id="x43415645415453">CAVEATS</h1> Currently, to attach a device to the <b class="name">pciback</b> backend, this procedure has to be performed at <a class="link-man" href="../8/boot">boot(8)</a> time. In the future, it will be possible to do it without requiring a dom0 reboot.</div>
<div class="section">
<h1 id="x534543555249545920434f4e53494445524154494f4e53">SECURITY CONSIDERATIONS</h1> As PCI passthrough offers the possibility for guest domains to send arbitrary PCI commands to a physical device, this has direct impact on the overall stability and security of the system. For example, in case of erroneous or malicious commands, the device could overwrite physical memory portions, via DMA.</div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
January 8, 2011</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
</html>

