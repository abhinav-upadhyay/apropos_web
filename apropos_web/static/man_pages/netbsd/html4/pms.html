<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="../style.css" type="text/css" media="all">
<title>
PMS(4)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
PMS(4)</td>
<td class="head-vol" align="center">
Kernel Interfaces Manual</td>
<td class="head-rtitle" align="right">
PMS(4)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">pms</b> &#8212; <span class="desc">PS/2 auxiliary port mouse driver</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="config">pckbc* at isa?</b><br>
<b class="config">pms* at pckbc?</b><br>
<b class="config">wsmouse* at pms?</b><p>
<br>
<b class="config">options PMS_DISABLE_POWERHOOK</b><br>
<b class="config">options PMS_SYNAPTICS_TOUCHPAD</b><br>
<b class="config">options PMS_ELANTECH_TOUCHPAD</b></div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> The <b class="name">pms</b> driver provides an interface to PS/2 auxiliary port mice within the <a class="link-man" href="../html4/wscons.html">wscons(4)</a> framework. Parent device in terms of the autoconfiguration framework is <a class="link-man" href="../html4/pckbc.html">pckbc(4)</a>, the PC keyboard controller. &#8220;pms&#8221; is a generic driver which supports mice using common variants of the PS/2 protocol, including wheel mice of the &#8220;IntelliMouse&#8221; breed. Wheel movements are mapped to a third (z-) axis. The driver is believed to work with both 3-button and 5-button mice with scroll wheels. Mice which use other protocol extensions are not currently supported, but might be if protocol documentation could be found. Mouse related data are accessed by <a class="link-man" href="../html4/wsmouse.html">wsmouse(4)</a> devices.<p>
The <b class="name">pms</b> driver has been updated to attempt to renegotiate mouse protocol after seeing suspicious or defective mouse protocol packets, or unusual delays in the middle of a packet; this should improve the chances that a mouse will recover after being switched away or reset (for instance, by a console switch).<p>
The <b class="var">PMS_DISABLE_POWERHOOK</b> kernel option disables PS/2 reset on resume.<p>
In addition, the <b class="name">pms</b> driver supports the &#8220;Synaptics&#8221; and &#8220;Elantech&#8221; touchpads in native mode, enabled with the <b class="var">PMS_SYNAPTICS_TOUCHPAD</b> and <b class="var">PMS_ELANTECH_TOUCHPAD</b> kernel options. This allows the driver to take advantage of extra features available on Synaptics and Elantech Touchpads. The following <a class="link-man" href="../html8/sysctl.html">sysctl(8)</a> variables control behavior of Synaptics touchpads:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">hw.synaptics.up_down_emulation</span></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
If the touchpad reports the existence of Up/Down buttons, this value determines if they should be reported as button 4 and 5 events or if they should be used to emulate some other event. When set to 0, report Up/Down events as buttons 4 and 5. When set to 1, the Up and Down buttons are both mapped to the middle button. When set to 2 (default), the Up and Down buttons are used for Z-axis emulation, which more closely resembles how mouse wheels operate.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">hw.synaptics.up_down_motion_delta</span></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
When the Up/Down buttons are used for Z-axis emulation, this value specifies the emulated delta-Z value per click.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">hw.synaptics.gesture_move</span></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
Gestures will not be recognised if the finger moves by more than this amount between taps.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">hw.synaptics.gesture_length</span></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
Gestures will not be recognised if the number of packets (at 80 packets per second) between taps exceeds this value.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">hw.synaptics.edge_left</span></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">hw.synaptics.edge_right</span></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">hw.synaptics.edge_top</span></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">hw.synaptics.edge_bottom</span></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
These values define a border around the touchpad which will be used for edge motion emulation during a drag gesture. If a drag gesture is in progress and the finger moves into this border, the driver will behave as if the finger continues to move in the same direction beyond the edge of the touchpad.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">hw.synaptics.edge_motion_delta</span></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
This specifies the pointer speed when edge motion is in effect.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">hw.synaptics.finger_high</span></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
The driver will ignore new finger events until the reported pressure exceeds this value.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">hw.synaptics.finger_low</span></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
The driver will assume a finger remains on the touchpad until the reported pressure drops below this value.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">hw.synaptics.two_fingers_emulation</span></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
More recent touchpads can report the presence of more than one finger on the pad. This value determines how such events are used. If set to 0 (default), two-finger events are ignored. If set to 1, two-finger events generate a right button click. If set to 2, two-finger events generate a middle button click.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">hw.synaptics.scale_x</span></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">hw.synaptics.scale_y</span></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
Scale factor used to divide movement deltas derived from Synaptics coordinates (0-6143) to yield more reasonable values (default 16).</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">hw.synaptics.max_speed_x</span></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">hw.synaptics.max_speed_y</span></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
Limits pointer rate of change (after scaling) per reported movement event (default 32).</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">hw.synaptics.movement_threshold</span></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
Movements of less than this value (in Synaptics coordinates) are ignored (default 4).</dd>
</dl>
<p>
The following <a class="link-man" href="../html8/sysctl.html">sysctl(8)</a> variables control behavior of Elantech touchpads:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">hw.elantech.xy_precision_shift</span></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">hw.elantech.z_precision_shift</span></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
Increased values improve the accuracy of X, Y, and Z-axis reporting at the expense of slower mouse movement (default 2 for xy, and 3 for z).</dd>
</dl>
<p>
For Elantech touchpads, the Z-axis is emulated using two-finger Y-axis reporting.</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../html4/pckbc.html">pckbc(4)</a>, <a class="link-man" href="../html4/ums.html">ums(4)</a>, <a class="link-man" href="../html4/wsmouse.html">wsmouse(4)</a></div>
<div class="section">
<h1 id="x415554484f5253">AUTHORS</h1> The <b class="name">pms</b> driver was originally written by Christopher G. Demetriou. The changes to merge the &#8220;IntelliMouse&#8221; protocol in, and reset the mouse in the event of protocol problems, were contributed by Peter Seebach. Special thanks to Ray Trent, at Synaptics, who contributed valuable insight into how to identify bogus mouse data. The changes to add &#8220;Synaptics&#8221; pad support were by Ales Krenek, Kentaro A. Kurahone, and Steve C. Woodford. The changes to add &#8220;Elantech&#8221; pad support were by Jared D. McNeill.</div>
<div class="section">
<h1 id="x42554753">BUGS</h1> It is possible for the driver to mistakenly negotiate the non-scroll-wheel protocol, after which it is unlikely to recover until the device is closed and reopened.<p>
The &#8220;Elantech&#8221; pad code only supports trackpads with firmware version 2.48 or above.</div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
December 13, 2008</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
</html>

