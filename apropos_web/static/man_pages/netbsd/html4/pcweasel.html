<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="../style.css" type="text/css" media="all">
<title>
PCWEASEL(4)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
PCWEASEL(4)</td>
<td class="head-vol" align="center">
Kernel Interfaces Manual</td>
<td class="head-rtitle" align="right">
PCWEASEL(4)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">pcweasel</b> &#8212; <span class="desc">Support for the PC-Weasel serial console board</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="config">pseudo-device pcweasel</b><br>
<b class="config">weasel* at pci? dev ? function ?</b><p>
Note that the appropriate display device must also be enabled. See <a class="link-man" href="../4/pcdisplay">pcdisplay(4)</a> for more information.</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> The PC-Weasel is a serial console board for use primarily on Intel-based PC-class systems. It addresses a problem that nearly everyone who has deployed a PC-class server has experienced: the total lack of remote management capability on PC-class hardware.<p>
In addition to serial console support, the PC-Weasel provides the ability to remotely reset the system (by means of a hardware reset signal), and provides a watchdog timer function.<p>
The PC-Weasel works by emulating the original IBM Monochrome Display Adapter (MDA). Writes to the display's character cells are translated into ANSI terminal sequences which are then sent out the PC-Weasel's serial port. Incoming characters are translated into PC keyboard scan codes and then fed (by means of a cable) into the system's keyboard controller. The system believes it is using a display console. This is particularly important in the event that one needs access to BIOS configuration menus.<p>
The PC-Weasel also includes a ST16550 serial port, which may be configured as any one of the system's serial ports. Typical usage is to configure the port as <span class="emph">com0</span> at ISA I/O address 0x3f8. When the PC-Weasel detects activity on the ST16550, the serial port is automatically connected to the ST16550 so that the serial port may be used as normal. When the PC-Weasel detects activity on the internal UART used for MDA emulation, the serial port is automatically reconnected to the emulation UART. This allows the boot program and kernel to be configured to use the serial port directly (which is more efficient than using the MDA emulation mode), yet allows the MDA emulation to be reestablished as soon as the kernel loses control of the system.<p>
The <b class="name">pcweasel</b> driver provides support for the additional features present on the PC-Weasel. At the moment, this includes support for the watchdog timer function. Use of the <b class="name">pcweasel</b> driver is not required in order for the system to function with a PC-Weasel installed so long as only the MDA emulation and ST16550 serial port functionality is required.</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../4/pcdisplay">pcdisplay(4)</a>, <a class="link-man" href="../8/wdogctl">wdogctl(8)</a></div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> The <b class="name">pcweasel</b> driver first appeared in <span class="unix">NetBSD&#160;1.5.1</span>.</div>
<div class="section">
<h1 id="x415554484f5253">AUTHORS</h1> The PC-Weasel was invented by Herb Peyerl and Jonathan Levine at Canada Connect Corporation.<p>
The <b class="name">pcweasel</b> driver was written by <span class="author">Jason R. Thorpe</span> &#60;thorpej@zembu.com&#62;, and contributed by Zembu Labs, Inc. Herb Peyerl of Middle Digital, Inc. provided several firmware updates during the development of the driver.</div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
November 23, 2007</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
</html>

