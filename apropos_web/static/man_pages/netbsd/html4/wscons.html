<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="../style.css" type="text/css" media="all">
<title>
WSCONS(4)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
WSCONS(4)</td>
<td class="head-vol" align="center">
Kernel Interfaces Manual</td>
<td class="head-rtitle" align="right">
WSCONS(4)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">wscons</b> &#8212; <span class="desc">workstation console access</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="config">options WSEMUL_SUN</b><br>
<b class="config">options WSEMUL_VT100</b><br>
<b class="config">options WSEMUL_NO_DUMB</b><br>
<b class="config">options WSEMUL_DEFAULT="xxx"</b><br>
<b class="config">options WS_DEFAULT_FG=WSCOL_XXX</b><br>
<b class="config">options WS_DEFAULT_BG=WSCOL_XXX</b><br>
<b class="config">options WS_DEFAULT_COLATTR="(WSATTR_XXX</b> |<br>
<b class="config">WSATTR_YYY)"</b><br>
<b class="config">options WS_DEFAULT_MONOATTR="(WSATTR_XXX</b> |<br>
<b class="config">WSATTR_YYY)"</b><br>
<b class="config">options WS_KERNEL_FG=WSCOL_XXX</b><br>
<b class="config">options WS_KERNEL_BG=WSCOL_XXX</b><br>
<b class="config">options WS_KERNEL_COLATTR="(WSATTR_XXX</b> |<br>
<b class="config">WSATTR_YYY)"</b><br>
<b class="config">options WS_KERNEL_MONOATTR="(WSATTR_XXX</b> |<br>
<b class="config">WSATTR_YYY)"</b><br>
<b class="config">options WSCOMPAT_USL_SYNCTIMEOUT=nnn</b><br>
<b class="config">options WSDISPLAY_COMPAT_PCVT</b><br>
<b class="config">options WSDISPLAY_COMPAT_SYSCONS</b><br>
<b class="config">options WSDISPLAY_COMPAT_USL</b><br>
<b class="config">options WSDISPLAY_COMPAT_RAWKBD</b><br>
<b class="config">options WSKBD_EVENT_AUTOREPEAT</b><br>
<b class="config">options WSKBD_USONLY</b><p>
<br>
<b class="config">wsdisplay* at ...</b><br>
<b class="config">wskbd*     at ... mux N</b><br>
<b class="config">wsmouse*   at ... mux N</b><p>
<br>
<b class="config">pseudo-device wsmux N</b></div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> The <b class="name">wscons</b> driver provides support for machine independent access to the console.<p>
<b class="name">wscons</b> is made of a number of cooperating modules, in particular<ul style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-bul">
<li class="list-bul" style="margin-top: 1.00em;">
hardware support for display adapters, keyboards and mice, see <a class="link-man" href="../4/wsdisplay">wsdisplay(4)</a>, <a class="link-man" href="../4/wskbd">wskbd(4)</a>, and <a class="link-man" href="../4/wsmouse">wsmouse(4)</a></li>
<li class="list-bul" style="margin-top: 1.00em;">
input event multiplexor, see <a class="link-man" href="../4/wsmux">wsmux(4)</a></li>
<li class="list-bul" style="margin-top: 1.00em;">
terminal emulation modules (see below), and</li>
<li class="list-bul" style="margin-top: 1.00em;">
compatibility options to support control operations and other low-level behaviour of existing terminal drivers (see below)</li>
</ul>
<div class="subsection">
<h2 id="x5465726d696e616c20656d756c6174696f6e73">Terminal emulations</h2> <b class="name">wscons</b> does not define its own set of terminal control sequences and special keyboard codes in terms of <a class="link-man" href="../5/terminfo">terminfo(5)</a>. Instead a &#8220;terminal emulation&#8221; is assigned to each virtual screen when the screen is created. (See <a class="link-man" href="../8/wsconscfg">wsconscfg(8)</a>.) Different terminal emulations can be active at the same time on one display. The following choices are available:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
dumb</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
This minimal terminal support is available unless the kernel option <b class="config">options WSEMUL_NO_DUMB</b> was specified at build time. No control sequences are supported besides the ASCII control characters. The cursor is not addressable. Only ASCII keyboard codes will be delivered, cursor and functions keys do not work.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
sun</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
The &#8220;sun&#8221; console emulation is available if <b class="config">options WSEMUL_SUN</b> was specified at kernel build time. It supports the control sequences of SUN machine consoles and delivers its keyboard codes for function and keypad keys in use. This emulation is sufficient for full-screen applications.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
vt100</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
is available with the kernel compile option <b class="config">options WSEMUL_VT100</b>. It provides the most commonly used functions of DEC VT100 terminals with some extensions introduced by the DEC VT220 and DEC VT320 models. The features of the original VT100 which are not or not completely implemented are:<ul style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-bul">
<li class="list-bul" style="margin-top: 1.00em;">
VT52 support, 132-column-mode, smooth scroll, light background, keyboard autorepeat control, external printer support, keyboard locking, newline/linefeed switching: Escape sequences related to these features are ignored or answered with standard replies. (DECANM, DECCOLM, DECSCLM, DECSCNM, DECARM, DECPFF, DECPEX, KAM, LNM)</li>
<li class="list-bul" style="margin-top: 1.00em;">
Function keys are not reprogrammable and fonts can not be downloaded. DECUDK and DECDLD sequences will be ignored.</li>
<li class="list-bul" style="margin-top: 1.00em;">
Neither C1 control set characters will be recognized nor will 8-bit keyboard codes be delivered.</li>
<li class="list-bul" style="margin-top: 1.00em;">
The &#8220;DEC supplemental graphic&#8221; font is approximated by the ISO-latin-1 font, though there are subtle differences.</li>
<li class="list-bul" style="margin-top: 1.00em;">
The actual rendering quality depends on the underlying graphics hardware driver. Characters might be missing in the available fonts and be substituted by more or less fitting replacements.<p>
Depending on the keyboard used, not all function keys might be available.</li>
</ul>
<p>
In addition to the plain VT100 functions are supported:<ul style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-bul">
<li class="list-bul" style="margin-top: 1.00em;">
ANSI colors.</li>
<li class="list-bul" style="margin-top: 1.00em;">
Some VT220 -like presentation state settings and -reports (DECRSPS), especially tabulator settings.</li>
</ul>
<p>
In most applications, <b class="name">wscons</b> will work sufficiently as a VT220 emulator.</dd>
</dl>
<p>
The <b class="var">WSEMUL_DEFAULT</b> kernel option is used to select one of the described terminal options as the default choice. The default takes effect at kernel startup, i.e. for the operating system console or additional screens allocated through the <b class="var">WSDISPLAY_DEFAULTSCREENS</b> option (see <a class="link-man" href="../4/wsdisplay">wsdisplay(4)</a>), or if no emulation type was passed to the <a class="link-man" href="../8/wsconscfg">wsconscfg(8)</a> utility.</div>
<div class="subsection">
<h2 id="x436f6d7061746962696c697479206f7074696f6e73">Compatibility options</h2> these options allow X servers and other programs using low-level console driver functions usually written specifically for other console drivers to run on <span class="unix">NetBSD</span> systems. The options are in particular:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="config">WSDISPLAY_COMPAT_USL</b></dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
Support the protocol for switches between multiple virtual screens on one display as used by most PC-UNIX variants. This is used by the <span class="unix">NetBSD</span> <a class="link-man" href="../8/wsconscfg">wsconscfg(8)</a> utility.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="config">WSDISPLAY_COMPAT_RAWKBD</b></dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
Allows to get raw XT keyboard scancodes from PC keyboards as needed by i386 X servers.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="config">WSDISPLAY_COMPAT_PCVT</b></dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
Emulates enough of the <span class="unix">NetBSD</span>/i386 &#8220;pcvt&#8221; driver to make X servers work.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="config">WSDISPLAY_COMPAT_SYSCONS</b></dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
Emulates enough of the <span class="unix">FreeBSD</span> &#8220;syscons&#8221; driver to make X servers work. Useful with <span class="unix">FreeBSD</span> binary emulation.</dd>
</dl>
<p>
Linux/i386 X servers usually run successfully if the first two options are enabled together with the <span class="unix">NetBSD</span> Linux binary emulation.<p>
(To have programs looking for device special files of other console drivers find the <b class="name">wscons</b> driver entry points, symlinks are a helpful measure.)</div>
<div class="subsection">
<h2 id="x4f74686572206f7074696f6e73">Other options</h2><dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="config">options WS_DEFAULT_FG=WSCOL_XXX</b>,</dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="config">options WS_DEFAULT_BG=WSCOL_XXX</b>,</dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="config">options WS_DEFAULT_COLATTR="(WSATTR_XXX</b> | <b class="config">WSATTR_YYY)"</b></dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
and</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="config">options WS_DEFAULT_MONOATTR="(WSATTR_XXX</b> | <b class="config">WSATTR_YYY)"</b></dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
allow to make default console output appear in specific colors and attributes. &#8220;WS_DEFAULT_FG&#8221; and &#8220;WS_DEFAULT_BG&#8221; set the foreground / background used on color displays. The &#8220;WSCOL_XXX&#8221; arguments are colors as defined in <i class="file">src/sys/dev/wscons/wsdisplayvar.h</i>. &#8220;WS_DEFAULT_COLATTR&#8221; and &#8220;WS_DEFAULT_MONOATTR&#8221; are additional attribute flags used on color or monochrome displays, respectively. The arguments are defined in the same header file. Whether the attributes are supported or not depends on the actually used graphics adapter. These options are ignored by the &#8220;dumb&#8221; terminal emulation.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="config">options WS_KERNEL_FG=WSCOL_XXX</b>,</dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="config">options WS_KERNEL_BG=WSCOL_XXX</b>,</dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="config">options WS_KERNEL_COLATTR="(WSATTR_XXX</b> | <b class="config">WSATTR_YYY)"</b></dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
and</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="config">options WS_KERNEL_MONOATTR="(WSATTR_XXX</b> | <b class="config">WSATTR_YYY)"</b></dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
allow to make console output originating from the kernel appear differently than output from user level programs (via <i class="file">/dev/console</i> or the specific tty device like <i class="file">/dev/ttyE0</i>). Their meaning is the same as their &#8216;WS_DEFAULT_*&#8217; counterparts.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="config">options WSCOMPAT_USL_SYNCTIMEOUT=nnn</b></dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
The virtual screen switching protocol enabled by &#8220;WSDISPLAY_COMPAT_USL&#8221; uses a somewhat complex handshake protocol to pass control to user programs such as X servers controlling a virtual screen. In order to prevent a non-responsive application from locking the whole console system, a screen switch will be rolled back after a 5 second timeout if the application does not respond. This option can be used to specify in seconds a different timeout value.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="config">options WSKBD_EVENT_AUTOREPEAT</b></dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
If set, this option enables auto repeat even in event mode. The auto repeat will generate key down events while the key is pressed.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="config">options WSKBD_USONLY</b></dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
In order to strip down the space usage of wscons, all keymaps except the US english one can be removed from the kernel with this option, which results in a space gain of about 10kB.</dd>
</dl>
</div>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../4/wsdisplay">wsdisplay(4)</a>, <a class="link-man" href="../4/wskbd">wskbd(4)</a>, <a class="link-man" href="../4/wsmouse">wsmouse(4)</a>, <a class="link-man" href="../4/wsmux">wsmux(4)</a>, <a class="link-man" href="../8/wsconscfg">wsconscfg(8)</a>, <a class="link-man" href="../8/wsconsctl">wsconsctl(8)</a>, <a class="link-man" href="../8/wsfontload">wsfontload(8)</a>, <a class="link-man" href="../9/wscons">wscons(9)</a></div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
June 5, 2012</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
</html>

