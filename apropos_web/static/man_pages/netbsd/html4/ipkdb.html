<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/../4/strict.dtd">
>
<head>
<meta http-equiv="Content-Type" content="te../; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="../style.css" type="text/css" media="all">
<title>
IPKDB(4)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
IPKDB(4)</td>
<td class="head-vol" align="center">
Kernel Interfaces Manual</td>
<td class="head-rtitle" align="right">
IPKDB(4)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">ipkdb</b> &#8212; <span class="desc">IP-based kernel debugger</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="config">options IPKDB</b><br>
<b class="config">options IPKDBSECURE</b><br>
<b class="config">options IPKDBKEY="&#92;"IPKDB key for remote debugging&#92;""</b><br>
<b class="config">options IPKDB_NE_PCISLOT=x</b></div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> <b class="name">ipkdb</b> is a kernel debugger that uses UDP and IP to communicate with a remote debugger (normally <a class="link-man" href="../1/gdb">gdb(1)</a>).<p>
Since the debugger uses its own driver to talk to the networking hardware, the number of supported network interfaces is a lot less than what is supported by the kernel. At the time of this writing, there is only support for a NE2000 compatible card in a PCI slot. In order for <b class="name">ipkdb</b> to find your card, you need to specify the slot the card is in via the <code class="lit">options IPKDB_NE_PCISLOT</code>.<p>
To use <b class="name">ipkdb</b>, you have to set up a DHCP server, from which <b class="name">ipkdb</b> can get the IP address for the interface that is used for debugging.<p>
To enter <b class="name">ipkdb</b>, the remote debugger has to send the protocol start packet. E.g., gdb will do this on the command<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit">target ipkdb debuggee IPKDB key for remote debugging</code></div>
</blockquote>
where <code class="lit">debuggee</code> is the name of the machine to debug (which must resolve to the IP address of the interface), and the rest of the line corresponds to the definition of <span class="define">IPKDBKEY</span> (see below). For <b class="name">ipkdb</b> to actually see this packet, the interface which is used for debugging has to be set up to actually receive packets, i.e. it has to be up and running.<p>
To prevent messing around with a secured system, <b class="name">ipkdb</b> normally also checks the security level at which the kernel is running. <b class="name">ipkdb</b> will only work with security levels less than 1, unless the kernel is configured with <code class="lit">options IPKDBSECURE</code>.<p>
In addition, the debugger is forcedly entered on a panic, as well as on initial startup, if you boot the kernel with the <b class="flag">&#45;d</b> option (note that this however is machine dependent). On such a forced enter to <b class="name">ipkdb</b> there is no need for the interface in question to already be up and running, since <b class="name">ipkdb</b> only needs to send/receive packets via its own driver.<p>
As some form of security against the occasional hacker, <b class="name">ipkdb</b> uses the definition of <code class="lit">options IPKDBKEY</code> to compute a checksum on the data in every packet. The remote debugger has to send this checksum, based on the data it sends and the key, or <b class="name">ipkdb</b> ignores the packet. This is also used in order to check against data errors on the connection.</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../1/gdb">gdb(1)</a>, <a class="link-man" href="../4/ddb">ddb(4)</a>, <a class="link-man" href="../4/ip">ip(4)</a>, <a class="link-man" href="../4/udp">udp(4)</a>, <a class="link-man" href="../8/init">init(8)</a></div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> <b class="name">ipkdb</b> appeared in <span class="unix">NetBSD&#160;1.3</span> for the first time. Its configuration and setup changed quite a bit in <span class="unix">NetBSD&#160;1.5</span>.</div>
<div class="section">
<h1 id="x42554753">BUGS</h1> Since the kernel includes the definition of IPKDBKEY, anyone who can read the kernel can extract it and use it to enter <b class="name">ipkdb</b>.<p>
There is no support for <a class="link-man" href="../4/ip6">ip6(4)</a>.</div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
March 27, 2000</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
<>

