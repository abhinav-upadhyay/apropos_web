<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/../4/strict.dtd">
>
<head>
<meta http-equiv="Content-Type" content="te../; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="../style.css" type="text/css" media="all">
<title>
ACPI(4)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
ACPI(4)</td>
<td class="head-vol" align="center">
Kernel Interfaces Manual</td>
<td class="head-rtitle" align="right">
ACPI(4)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">acpi</b> &#8212; <span class="desc">Advanced Configuration and Power Interface</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="config">acpi0	at mainbus0</b><p>
<br>
<b class="config">options	ACPI_DEBUG</b><br>
<b class="config">options	ACPIVERBOSE</b><br>
<b class="config">options	ACPI_ACTIVATE_DEV</b><br>
<b class="config">options	ACPI_DSDT_OVERRIDE</b><br>
<b class="config">options	ACPI_DSDT_FILE=""</b><br>
<b class="config">options	ACPI_BLACKLIST_YEAR=2000</b><br>
<b class="config">options	ACPI__DIS_IS_BROKEN</b></div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> <span class="unix">NetBSD</span> provides machine-independent bus support for Advanced Configuration and Power Interface (ACPI) devices and includes several ACPI device drivers.<p>
The <span class="unix">NetBSD</span> implementation of ACPI integrates Intel's ACPI Component Architecture (ACPI-CA) for the OS-independent part. The ACPI-CA provides OS-neutral ACPI functionalities such as ACPI BIOS table support, an ACPI event framework and an ACPI Machine Language (AML) interpreter.<p>
Options:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 3.00ex;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">ACPI_DEBUG</span></dt>
<dd class="list-tag" style="margin-left: 27.00ex;">
Enable various debug facilities.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">ACPIVERBOSE</span></dt>
<dd class="list-tag" style="margin-left: 27.00ex;">
Enable verbose debug messages.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">ACPI_ACTIVATE_DEV</span></dt>
<dd class="list-tag" style="margin-left: 27.00ex;">
Determine if the ACPI driver should attempt to activate inactive devices. The default is off.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">ACPI_DSDT_OVERRIDE</span></dt>
<dd class="list-tag" style="margin-left: 27.00ex;">
Force a given Differentiated System Description Table (DSDT) instead of the version supplied by the BIOS. Use <span class="define">ACPI_DSDT_FILE</span> to specify a DSDT.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">ACPI_DSDT_FILE="filename"</span></dt>
<dd class="list-tag" style="margin-left: 27.00ex;">
If <span class="define">ACPI_DSDT_FILE</span> is not specified, default to &#8220;dsdt.hex&#8221; in the build directory.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">ACPI_BLACKLIST_YEAR=2000</span></dt>
<dd class="list-tag" style="margin-left: 27.00ex;">
Do not use ACPI with any BIOS made on or before the specified year.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">ACPI__DIS_IS_BROKEN</span></dt>
<dd class="list-tag" style="margin-left: 27.00ex;">
Do not call the ACPI "_DIS" method to disable interrupt links. This may be required on specific &#8220;nForce4&#8221; chipset systems, which hard hang when this method is called instead of having it fail gracefully. &#8220;&#8221;</dd>
</dl>
</div>
<div class="section">
<h1 id="x53595343544c20535550504f5254">SYSCTL SUPPORT</h1> Few <a class="link-man" href="../8/sysctl">sysctl(8)</a> variables are directly relevant for ACPI.<dl style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 5.00ex;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">hw.acpi.root</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
The address of the ACPI root pointer in system memory.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">hw.acpi.sleep.state</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
The system sleep state.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">hw.acpi.sleep.states</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
A list of system sleep states that the machine supports. The possible values are:<p>
<dl style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 5.00ex;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
S0</dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
fully running</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
S1</dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
power on suspend (CPU and hard disks are off)</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
S2</dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
similar to S3, usually not implemented</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
S3</dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
suspend-to-RAM</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
S4</dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
suspend-to-disk (not supported on <span class="unix">NetBSD</span>)</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
S5</dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
power off</dd>
</dl>
</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">hw.acpi.sleep.beep</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
A boolean variable that controls whether the PC speaker beeps upon resume. Only available on i386 and amd64 architectures.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">hw.acpi.sleep.vbios</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Defines the handling of the graphics card on i386 and amd64 architectures. The supported values are:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 2.00ex;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
0</dt>
<dd class="list-tag" style="margin-left: 3.00ex;">
No attempt to reset the VGA controller will be made.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
1</dt>
<dd class="list-tag" style="margin-left: 3.00ex;">
Call the VGA BIOS when still in real mode. This can result in direct reboots. In that case, use &#8216;2&#8217; or <b class="cmd">vbetool post</b> from the <i class="file">pkgsrc/sysutils/vbetool</i> package.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
2</dt>
<dd class="list-tag" style="margin-left: 3.00ex;">
Call the VGA BIOS using the in-kernel x86 emulator.</dd>
</dl>
<p>
If the system has problems in resuming from the S3 state, experimenting with different values may provide a solution.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">hw.acpi.stat.gpe</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
The number of dispatched General Purpose Events (GPEs).</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">hw.acpi.stat.sci</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
The number of System Control Interrupts (SCIs). See <a class="link-man" href="../4/acpiec">acpiec(4)</a> for a brief description of both GPEs and SCIs.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">hw.acpi.stat.fixed</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
The number of &#8220;fixed events&#8221;.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">hw.acpi.stat.method</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
The number of AML methods executed by the interpreter.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">hw.acpi.power</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
This read-only node describes the ACPI power state of devices. The values range from D0 (&#8220;on&#8221;) to D3 (&#8220;off&#8221;).</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">hw.acpi.wake</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
This node represents devices that can wake the system from the S3 or S4 sleep state. By default, <a class="link-man" href="../4/acpibut">acpibut(4)</a>, <a class="link-man" href="../4/acpilid">acpilid(4)</a>, and <a class="link-man" href="../4/pckbd">pckbd(4)</a> are allowed to wake the system, provided that the devices are present and the firmware supports wake-up capabilities for the devices.</dd>
</dl>
</div>
<div class="section">
<h1 id="x535550504f525445442044455649434553">SUPPORTED DEVICES</h1> <span class="unix">NetBSD</span> ACPI supports several machine-dependent and machine-independent devices, some specific to ACPI and some configured via it.<div class="subsection">
<h2 id="x4d616368696e651e696e646570656e64656e742064657669636573">Machine-independent devices</h2><dl style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 5.00ex;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
<a class="link-man" href="../4/acpiacad">acpiacad(4)</a></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
ACPI AC adapters.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<a class="link-man" href="../4/acpibat">acpibat(4)</a></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
ACPI batteries.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<a class="link-man" href="../4/acpibut">acpibut(4)</a></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
ACPI power and sleep buttons.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<a class="link-man" href="../4/acpicpu">acpicpu(4)</a></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
ACPI processors.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<a class="link-man" href="../4/acpidalb">acpidalb(4)</a></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
ACPI direction application launch buttons.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<a class="link-man" href="../4/acpiec">acpiec(4)</a></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
ACPI embedded controllers.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<a class="link-man" href="../4/acpiecdt">acpiecdt(4)</a></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
ACPI Embedded Controller Boot Resource Table (ECDT).</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<a class="link-man" href="../4/acpifan">acpifan(4)</a></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
ACPI fans.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<a class="link-man" href="../4/acpilid">acpilid(4)</a></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
ACPI lid switches.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<a class="link-man" href="../4/acpipmtr">acpipmtr(4)</a></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
ACPI power meters.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<a class="link-man" href="../4/acpismbus">acpismbus(4)</a></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
ACPI SMBus via control method interface (CMI).</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<a class="link-man" href="../4/acpitz">acpitz(4)</a></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
ACPI thermal zones.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<a class="link-man" href="../4/acpivga">acpivga(4)</a></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
ACPI display adapter and output devices.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<a class="link-man" href="../4/acpiwmi">acpiwmi(4)</a></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
ACPI support for Windows Management Instrumentation.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<a class="link-man" href="../4/acpiwdrt">acpiwdrt(4)</a></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
ACPI watchdogs.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<a class="link-man" href="../4/aibs">aibs(4)</a></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
ASUSTeK voltage, temperature and fan sensors.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<a class="link-man" href="../4/asus">asus(4)</a></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
ASUS laptop hotkeys.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<a class="link-man" href="../4/attimer">attimer(4)</a></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
AT Timer.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<a class="link-man" href="../4/com">com(4)</a></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
NS8250-, NS16450-, and NS16550-based serial ports.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<a class="link-man" href="../4/fdc">fdc(4)</a></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
Floppy disk controllers.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<a class="link-man" href="../4/fujbp">fujbp(4)</a></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
Fujitsu brightness and pointer.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<a class="link-man" href="../4/fujhk">fujhk(4)</a></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
Fujitsu hotkeys.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<a class="link-man" href="../4/hpacel">hpacel(4)</a></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
HP 3D DriveGuard accelerometer.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<a class="link-man" href="../4/hpet">hpet(4)</a></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
High Precision Event Timer (HPET).</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<a class="link-man" href="../4/hpqlb">hpqlb(4)</a></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
HP Quick Launch Buttons.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<a class="link-man" href="../4/joy">joy(4)</a></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
Joystick/Game port interface.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<a class="link-man" href="../4/lpt">lpt(4)</a></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
Standard ISA parallel port interface.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<a class="link-man" href="../4/mpu">mpu(4)</a></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
Roland MPU-401 (compatible) MIDI UART.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<a class="link-man" href="../4/pcppi">pcppi(4)</a></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
AT-style speaker sound.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<a class="link-man" href="../4/thinkpad">thinkpad(4)</a></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
IBM/Lenovo ThinkPad laptop device driver.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<a class="link-man" href="../4/ug">ug(4)</a></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
Abit uGuru Hardware monitor.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<a class="link-man" href="../4/vald">vald(4)</a></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
Toshiba Libretto device.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<a class="link-man" href="../4/wb">wb(4)</a></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
Winbond W83L518D Integrated Media Reader.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<a class="link-man" href="../4/wss">wss(4)</a></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
Windows Sound System-compatible sound cards</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<a class="link-man" href="../4/ym">ym(4)</a></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
Yamaha OPL3-SA2 and OPL3-SA3 audio device driver.</dd>
</dl>
</div>
<div class="subsection">
<h2 id="x693338362d646570656e64656e742064657669636573">i386-dependent devices</h2><dl style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 5.00ex;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
<a class="link-man" href="../4/npx">npx(4)</a></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
i386 numeric processing extension coprocessor.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<a class="link-man" href="../4/pckbc">pckbc(4)</a></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
PC keyboard controllers.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<a class="link-man" href="../4/sony">sony(4)</a></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
Sony Miscellaneous Controller</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<a class="link-man" href="../4/spic">spic(4)</a></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
Sony programmable I/O controller.</dd>
</dl>
</div>
</div>
<div class="section">
<h1 id="x444542554747494e47">DEBUGGING</h1> Although the situation has become better over the years, ACPI is typically prone to various errors, ranging from blatant flaws in the firmware to bugs in the implementation. Before anything else, it is a good practice to upgrade the BIOS to the latest version available from the vendor.<p>
To ease the task of diagnosing and fixing different problems, the ACPICA reference implementation provides a rich facility of different debugging methods. In <span class="unix">NetBSD</span> these are generally only available if the kernel has been compiled with the ACPI_DEBUG option.<div class="subsection">
<h2 id="x566572626f7365206d65737361676573">Verbose messages</h2> The ACPIVERBOSE compile time option enables some verbose debug messages printed during the system startup. In a MODULAR (see <a class="link-man" href="../4/options">options(4)</a>) system, the information can be printed also at runtime, regardless of the presence of ACPIVERBOSE. To print the messages, <a class="link-man" href="../8/modload">modload(8)</a> the <b class="cmd">acpiverbose</b> module using the option <i class="arg">-b dump=true</i>.</div>
<div class="subsection">
<h2 id="x437573746f6d2044534454">Custom DSDT</h2> ACPI interprets bytecode known as ACPI Machine Language (AML), provided by the BIOS as a memory image during the system bootstrap. Most of the AML relevant to <b class="name">acpi</b> is implemented in the so-called Differentiated System Descriptor Table (DSDT). <span class="unix">NetBSD</span> provides support for overriding the default DSDT supplied by the BIOS.<p>
The following steps can be used to override the DSDT:<ol style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 5.00ex;" class="list list-enum">
<li class="list-enum" style="margin-top: 1.00em;">
Dump the raw DSDT with <a class="link-man" href="../8/acpidump">acpidump(8)</a>.</li>
<li class="list-enum" style="margin-top: 1.00em;">
Disassemble the table with <a class="link-man" href="../8/iasl">iasl(8)</a>.</li>
<li class="list-enum" style="margin-top: 1.00em;">
Modify the disassembled table.</li>
<li class="list-enum" style="margin-top: 1.00em;">
Compile the table with <a class="link-man" href="../8/iasl">iasl(8)</a> using the option <i class="arg">&#45;tc</i>.</li>
<li class="list-enum" style="margin-top: 1.00em;">
Either copy the (<i class="file">*.hex</i>) file to<p>
<pre style="margin-left: 5.00ex;" class="lit display">
src/sys/dev/acpi/acpica/Osd/custom_dsdt.hex</pre>
<p>
or use the option<p>
<pre style="margin-left: 5.00ex;" class="lit display">
ACPI_DSDT_FILE="/some/directory/custom_dsdt.hex"</pre>
<p>
in the kernel configuration file.</li>
<li class="list-enum" style="margin-top: 1.00em;">
Define ACPI_DSDT_OVERRIDE in the kernel configuration file and rebuild.</li>
</ol>
</div>
<div class="subsection">
<h2 id="x4465627567676572">Debugger</h2> The ACPICA interpreter provides its own debugger for low-level debugging. It can be used to display internal data structures and namespace objects, and to debug the execution of control methods. Single step and breakpoint functionality are available. In <span class="unix">NetBSD</span> this is integrated to the in-kernel <a class="link-man" href="../4/ddb">ddb(4)</a>. In order to enter the ACPICA debugger from <a class="link-man" href="../4/ddb">ddb(4)</a>, use the command <b class="cmd">call</b> with the argument <b class="cmd">acpi_osd_debugger</b>.</div>
<div class="subsection">
<h2 id="x4465627567204f7574707574">Debug Output</h2> <span class="unix">NetBSD</span> provides three <a class="link-man" href="../8/sysctl">sysctl(8)</a> variables that control the debug output at runtime. The <b class="cmd">hw.acpi.debug.layer</b> variable limits the output to a specific ACPI layer and the <b class="cmd">hw.acpi.debug.level</b> variable controls the debug level. Both <a class="link-man" href="../8/sysctl">sysctl(8)</a> variables are string literals. The third variable is <b class="cmd">hw.acpi.debug.object</b>. This is a boolean that controls whether debug messages internal to the AML are enabled.<p>
For the first two variables, the possible values are:<table style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 5.00ex;" class="list list-col">
<col style="width: 28.00ex;">
<col style="min-width: 28.00ex;">
<tbody>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
<span class="symb">LAYER</span></td>
<td class="list-col" style="margin-top: 1.00em;">
<span class="symb">LEVEL</span></td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
<code class="lit">ACPI_DEBUG_NONE</code></td>
<td class="list-col" style="margin-top: 1.00em;">
ACPI_DEBUG_NONE</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
</td>
<td class="list-col" style="margin-top: 1.00em;">
</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
<code class="lit">ACPI_UTILITIES</code></td>
<td class="list-col" style="margin-top: 1.00em;">
ACPI_LV_INIT</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
<code class="lit">ACPI_HARDWARE</code></td>
<td class="list-col" style="margin-top: 1.00em;">
ACPI_LV_DEBUG_OBJECT</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
<code class="lit">ACPI_EVENTS</code></td>
<td class="list-col" style="margin-top: 1.00em;">
ACPI_LV_INFO</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
<code class="lit">ACPI_TABLES</code></td>
<td class="list-col" style="margin-top: 1.00em;">
ACPI_LV_ALL_EXCEPTIONS *</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
<code class="lit">ACPI_NAMESPACE</code></td>
<td class="list-col" style="margin-top: 1.00em;">
</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
<code class="lit">ACPI_PARSER</code></td>
<td class="list-col" style="margin-top: 1.00em;">
ACPI_LV_INIT_NAMES</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
<code class="lit">ACPI_DISPATCHER</code></td>
<td class="list-col" style="margin-top: 1.00em;">
ACPI_LV_PARSE</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
<code class="lit">ACPI_EXECUTER</code></td>
<td class="list-col" style="margin-top: 1.00em;">
ACPI_LV_LOAD</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
<code class="lit">ACPI_RESOURCES</code></td>
<td class="list-col" style="margin-top: 1.00em;">
ACPI_LV_DISPATCH</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
<code class="lit">ACPI_CA_DEBUGGER</code></td>
<td class="list-col" style="margin-top: 1.00em;">
ACPI_LV_EXEC</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
<code class="lit">ACPI_OS_SERVICES</code></td>
<td class="list-col" style="margin-top: 1.00em;">
ACPI_LV_NAMES</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
<code class="lit">ACPI_CA_DISASSEMBLER</code></td>
<td class="list-col" style="margin-top: 1.00em;">
ACPI_LV_OPREGION</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
<code class="lit">ACPI_COMPILER</code></td>
<td class="list-col" style="margin-top: 1.00em;">
ACPI_LV_BFIELD</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
<code class="lit">ACPI_TOOLS</code></td>
<td class="list-col" style="margin-top: 1.00em;">
ACPI_LV_TABLES</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
<code class="lit">ACPI_EXAMPLE</code></td>
<td class="list-col" style="margin-top: 1.00em;">
ACPI_LV_VALUES</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
<code class="lit">ACPI_DRIVER</code></td>
<td class="list-col" style="margin-top: 1.00em;">
ACPI_LV_OBJECTS</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
<code class="lit">ACPI_ALL_COMPONENTS *</code></td>
<td class="list-col" style="margin-top: 1.00em;">
ACPI_LV_RESOURCES</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
</td>
<td class="list-col" style="margin-top: 1.00em;">
ACPI_LV_USER_REQUESTS</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
<code class="lit">ACPI_BUS_COMPONENT</code></td>
<td class="list-col" style="margin-top: 1.00em;">
ACPI_LV_PACKAGE</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
<code class="lit">ACPI_ACAD_COMPONENT</code></td>
<td class="list-col" style="margin-top: 1.00em;">
ACPI_LV_VERBOSITY1 *</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
<code class="lit">ACPI_BAT_COMPONENT</code></td>
<td class="list-col" style="margin-top: 1.00em;">
</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
<code class="lit">ACPI_BUTTON_COMPONENT</code></td>
<td class="list-col" style="margin-top: 1.00em;">
ACPI_LV_ALLOCATIONS</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
<code class="lit">APCI_EC_COMPONENT</code></td>
<td class="list-col" style="margin-top: 1.00em;">
ACPI_LV_FUNCTIONS</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
<code class="lit">ACPI_LID_COMPONENT</code></td>
<td class="list-col" style="margin-top: 1.00em;">
ACPI_LV_OPTIMIZATIONS</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
<code class="lit">ACPI_RESOURCE_COMPONENT</code></td>
<td class="list-col" style="margin-top: 1.00em;">
ACPI_LV_VERBOSITY2 *</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
<code class="lit">ACPI_TZ_COMPONENT</code></td>
<td class="list-col" style="margin-top: 1.00em;">
</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
<code class="lit">ACPI_DISPLAY_COMPONENT</code></td>
<td class="list-col" style="margin-top: 1.00em;">
</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
<code class="lit">ACPI_ALL_DRIVERS *</code></td>
<td class="list-col" style="margin-top: 1.00em;">
ACPI_LV_MUTEX</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
</td>
<td class="list-col" style="margin-top: 1.00em;">
ACPI_LV_THREADS</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
</td>
<td class="list-col" style="margin-top: 1.00em;">
ACPI_LV_IO</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
</td>
<td class="list-col" style="margin-top: 1.00em;">
ACPI_LV_AML_INTERRUPTS</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
<code class="lit">* This is a compound</code></td>
<td class="list-col" style="margin-top: 1.00em;">
ACPI_LV_VERBOSITY3 *</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
<code class="lit">  constant, including</code></td>
<td class="list-col" style="margin-top: 1.00em;">
</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
<code class="lit">  all previous elements.</code></td>
<td class="list-col" style="margin-top: 1.00em;">
ACPI_LV_AML_DISASSEMBLE</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
</td>
<td class="list-col" style="margin-top: 1.00em;">
ACPI_LV_VERBOSE_INFO</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
</td>
<td class="list-col" style="margin-top: 1.00em;">
ACPI_LV_FULL_TABLES</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
</td>
<td class="list-col" style="margin-top: 1.00em;">
ACPI_LV_EVENTS</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
</td>
<td class="list-col" style="margin-top: 1.00em;">
ACPI_LV_VERBOSE *</td>
</tr>
</tbody>
</table>
<p>
In addition, there is <span class="define">ACPI_DEBUG_DEFAULT</span> that is used by ACPICA as the default debug level. It includes <span class="define">ACPI_LV_INIT</span> and <span class="define">ACPI_LV_DEBUG_OBJECT</span>.<p>
The debug layer can be divided into two groups: the first one is specific to the ACPICA interpreter and the second one contains the internal ACPI components of <span class="unix">NetBSD</span>. The constant <span class="define">ACPI_ALL_DRIVERS</span> includes all <span class="unix">NetBSD</span> specific parts.<p>
The ACPICA interpreter uses several debug levels internally, but the <span class="unix">NetBSD</span> specific parts are typically limited to <span class="define">ACPI_LV_DEBUG_OBJECT</span> and <span class="define">ACPI_LV_INFO</span>. The debug output can be stopped by setting <b class="cmd">hw.acpi.debug.level</b> to <span class="define">ACPI_DEBUG_NONE</span>.</div>
<div class="subsection">
<h2 id="x4578616d706c65">Example</h2> As an example, a driver may have defined the component it belongs to and the name of the module:<p>
<pre style="margin-left: 5.00ex;" class="lit display">
#define _COMPONENT	ACPI_BUS_COMPONENT 
ACPI_MODULE_NAME	("acpi_example")</pre>
<p>
The driver may also utilize the debug facility:<p>
<pre style="margin-left: 5.00ex;" class="lit display">
ACPI_DEBUG_PRINT((ACPI_DB_INFO, "Failed to evaluate _STA\n"));</pre>
<p>
With these options the debug message from the <span class="define">ACPI_DEBUG_PRINT</span> macro is only visible when <b class="cmd">hw.acpi.debug.layer</b> is either <span class="define">ACPI_BUS_COMPONENT</span> or a compound constant including it, and <b class="cmd">hw.acpi.debug.level</b> is <span class="define">ACPI_LV_INFO</span> or some constant that includes it. Finally, it can be noted that the ACPI implementation uses the prefix <span class="define">ACPI_DB</span>, whereas the debug level <a class="link-man" href="../8/sysctl">sysctl(8)</a> variable is always specified with the prefix <span class="define">ACPI_LV</span>.<p>
Another example can be mentioned for the use of <b class="cmd">hw.acpi.debug.object</b>. The following could appear in an ASL code:<p>
<pre style="margin-left: 5.00ex;" class="lit display">
Method(_Q19, 0, NotSerialized) 
{ 
	Store("_Q19 invoked", Debug) 
	Notify(ACAD, 0x80) 
}</pre>
<p>
When <b class="cmd">hw.acpi.debug.object</b> is set to 1, the message stored to the debug object is printed every time the method is called by the interpreter.</div>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../4/ioapic">ioapic(4)</a>, <a class="link-man" href="../8/acpidump">acpidump(8)</a>, <a class="link-man" href="../8/amldb">amldb(8)</a>, <a class="link-man" href="../8/iasl">iasl(8)</a><p>
<span class="ref"><span class="ref-auth">Hewlett-Packard Corporation</span>, <span class="ref-auth">Intel Corporation</span>, <span class="ref-auth">Microsoft Corporation</span>, <span class="ref-auth">Phoenix Technologies Ltd.</span>, and <span class="ref-auth">Toshiba Corporation</span>, <span class="ref-title">Advanced Configuration and Power Interface Specification</span>, <span class="ref-num">Revision 4.0</span>, <a class="link-ref" href="http://www.acpi.info/spec.htm">http://www.acpi.info/spec.htm</a>, <span class="ref-date">June 16, 2009</span>.</span><p>
<span class="ref"><span class="ref-auth">Intel Corporation</span>, <span class="ref-title">ACPI Component Architecture,</span>, <span class="ref-title">Programmer Reference,</span>, <span class="ref-title">OS-Independent Subsystem, Debugger, and Utilities</span>, <span class="ref-num">Revision 1.27</span>, <a class="link-ref" href="http://www.acpica.org/download/acpica-reference.pdf">http://www.acpica.org/download/acpica-reference.pdf</a>, <span class="ref-date">January 20, 2010</span>.</span><p>
<span class="ref"><span class="ref-auth">Len Brown</span>, <span class="ref-title">ACPI in Linux - Myths vs. Reality</span>, <a class="link-ref" href="http://www.linuxsymposium.org/archives/OLS/Reprints-2007/brown_1-Reprint.pdf">http://www.linuxsymposium.org/archives/OLS/Reprints-2007/brown_1-Reprint.pdf</a>, <span class="ref-page">65-74</span>, <span class="ref-date">June 27-30, 2007</span>, <span class="ref-opt">Proceedings of the Linux Symposium</span>.</span><p>
<span class="ref"><span class="ref-auth">Joerg Sonnenberger</span> and <span class="ref-auth">Jared D. McNeill</span>, <span class="ref-title">Sleeping Beauty - NetBSD on Modern Laptops</span>, <a class="link-ref" href="http://2008.asiabsdcon.org/papers/P9A-paper.pdf">http://2008.asiabsdcon.org/papers/P9A-paper.pdf</a>, <span class="ref-page">127-134</span>, <span class="ref-date">February 3, 2008</span>, <span class="ref-opt">Proceedings of AsiaBSDCon 2008</span>.</span><p>
<span class="ref"><span class="ref-auth">Takanori Watanabe</span>, <span class="ref-title">ACPI Implementation on FreeBSD</span>, <i class="ref-book">Proceedings of the FREENIX Track: 2002 USENIX Annual Technical Conference</i>, <i class="ref-issue">USENIX Association</i>, <a class="link-ref" href="http://www.usenix.org/event/usenix02/tech/freenix/full_papers/watanabe/watanabe.pdf">http://www.usenix.org/event/usenix02/tech/freenix/full_papers/watanabe/watanabe.pdf</a>, <span class="ref-page">121-131</span>, <span class="ref-date">June 10-15, 2002</span>.</span></div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> The <b class="name">acpi</b> driver appeared in <span class="unix">NetBSD&#160;1.6</span>.</div>
<div class="section">
<h1 id="x415554484f5253">AUTHORS</h1> <span class="author"></span>Authors of the <b class="name">acpi</b> subsystem include <span class="author">Charles M. Hannum</span>, <span class="author">Frank van der Linden</span>, <span class="author">Jared D. McNeill</span>, <span class="author">Jason R. Thorpe</span>, <span class="author">Joerg Sonnenberger</span>, and <span class="author">Jukka Ruohonen</span>, among others.</div>
<div class="section">
<h1 id="x42554753">BUGS</h1> Most of the ACPI power management functionalities are not implemented.<p>
The <span class="define">ACPI__DIS_IS_BROKEN</span> option should not be necessary.</div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
September 8, 2014</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
<>

