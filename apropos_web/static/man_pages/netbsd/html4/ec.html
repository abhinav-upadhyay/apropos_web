<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="/static/man_pages/netbsd/style.css" type="text/css" media="all">
<title>
EC(4)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
EC(4)</td>
<td class="head-vol" align="center">
Kernel Interfaces Manual</td>
<td class="head-rtitle" align="right">
EC(4)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">ec</b> &#8212; <span class="desc">driver for 3Com EtherLink II (3c503) ISA bus Ethernet cards</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="config">ec0 at isa? port 0x250 iomem 0xd8000 irq 9</b></div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> The <b class="name">ec</b> device driver supports 3Com EtherLink II (3c503) Ethernet cards for ISA bus which are based on the National Semiconductor DP8390/WD83C690 Ethernet interface chips.</div>
<div class="section">
<h1 id="x4d454449412053454c454354494f4e">MEDIA SELECTION</h1> The EtherLink II supports two media types on a single card. All support the AUI media type. The other media is either BNC or UTP behind a transceiver. Software cannot differentiate between BNC and UTP cards.<p>
To enable the AUI media, select the <span class="emph">10base5</span> or <span class="emph">aui</span> media type with <a class="link-man" href="../8/ifconfig">ifconfig(8)</a>'s <b class="flag">media</b> directive. To select the other media (BNC or UTP), select the <span class="emph">10base2</span> or <span class="emph">bnc</span> media type.</div>
<div class="section">
<h1 id="x444941474e4f5354494353">DIAGNOSTICS</h1><dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-diag">
<dt class="list-diag" style="margin-top: 1.00em;">
<b class="diag">ec0: wildcarded IRQ is not allowed</b></dt>
<dd class="list-diag">
<p>
The IRQ was wildcarded in the kernel configuration file. This is not supported.</dd>
<dt class="list-diag" style="margin-top: 1.00em;">
<b class="diag">ec0: invalid IRQ &lt;n&gt;, must be 3, 4, 5, or 9</b></dt>
<dd class="list-diag">
<p>
An IRQ other than the above IRQ values was specified in the kernel configuration file. The EtherLink II hardware only supports the above listed IRQ values.</dd>
<dt class="list-diag" style="margin-top: 1.00em;">
<b class="diag">ec0: failed to clear shared memory at offset &lt;off&gt;</b></dt>
<dd class="list-diag">
<p>
The memory test was unable to clear shared the interface's shared memory region. This often indicates that the card is configured at a conflicting <span class="emph">iomem</span> address.</dd>
<dt class="list-diag" style="margin-top: 1.00em;">
<b class="diag">ec0: warning - receiver ring buffer overrun</b></dt>
<dd class="list-diag">
<p>
The DP8390 Ethernet chip used by this board implements a shared-memory ring-buffer to store incoming packets. The 3c503 usually has only 8K bytes of shared memory. This is only enough room for about 4 full-size (1500 byte) packets. This can sometimes be a problem, especially on the original 3c503, because these boards' shared-memory access speed is quite slow; typically only about 1MB/second. The overhead of this slow memory access, and the fact that there is only room for 4 full-sized packets means that the ring-buffer will occasionally overrun.<p>
When an overrun occurs, the board must be reset to avoid a lockup problem in early revision DP8390 Ethernet chips. Resetting the board causes all of the data in the ring-buffer to be lost, requiring the data to be retransmitted/received, congesting the board further. Because of this, maximum throughput on these boards is only about 400-600K bytes per second.<p>
This problem is exacerbated by NFS because the 8-bit boards lack sufficient packet buffer memory to support the default 8K byte packets that NFS and other protocols use as their default. If these cards must be used with NFS, use the <a class="link-man" href="../8/mount_nfs">mount_nfs(8)</a> <b class="flag">&#45;r</b> and <b class="flag">&#45;w</b> options in <i class="file">/etc/fstab</i> to limit NFS's packet size. 4K (4096) byte packets generally work.</dd>
</dl>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../4/ifmedia">ifmedia(4)</a>, <a class="link-man" href="../4/intro">intro(4)</a>, <a class="link-man" href="../4/isa">isa(4)</a>, <a class="link-man" href="../8/ifconfig">ifconfig(8)</a>, <a class="link-man" href="../8/mount_nfs">mount_nfs(8)</a></div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
October 20, 1997</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
</html>

