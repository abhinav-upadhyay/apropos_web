<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/../4/strict.dtd">
>
<head>
<meta http-equiv="Content-Type" content="te../; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="../style.css" type="text/css" media="all">
<title>
SWSENSOR(4)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
SWSENSOR(4)</td>
<td class="head-vol" align="center">
Kernel Interfaces Manual</td>
<td class="head-rtitle" align="right">
SWSENSOR(4)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">swsensor</b> &#8212; <span class="desc">software environmental sensor</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="config">pseudo-device swsensor</b></div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> The <b class="name">swsensor</b> driver provides a software environmental sensor that works with <a class="link-man" href="../8/sysctl">sysctl(8)</a> and <a class="link-man" href="../8/envstat">envstat(8)</a>. The driver is intended to be loaded as a kernel module. One can, however, include the <b class="name">swsensor</b> driver directly in a kernel using the configuration from the synopsis. By default, the sensor is of type <span class="define">ENVSYS_UNITS_INTEGER</span>.<p>
The following values can be specified in the <a class="link-man" href="../8/modload">modload(8)</a> command when loading the <b class="name">swsensor</b> module to alter the driver's behavior.<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">Variable</span> <span class="symb">Usage</span></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<code class="lit">mode</code></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
Controls whether or not <b class="name">swsensor</b> provides internally-maintained limits and limit checking<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">Value</span> <span class="symb">Meaning</span></dt>
<dd class="list-tag" style="margin-left: 5.00ex;">
</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<code class="lit">0</code></dt>
<dd class="list-tag" style="margin-left: 5.00ex;">
sensor has no internally-maintained limits</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<code class="lit">1</code></dt>
<dd class="list-tag" style="margin-left: 5.00ex;">
sensor provides its own internal limit value</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<code class="lit">2</code></dt>
<dd class="list-tag" style="margin-left: 5.00ex;">
sensor maintains an internal adjustable limit and performs its own comparison between the sensor's limit and its current value</dd>
</dl>
</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<code class="lit">limit</code></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
The initial alarm limit value, if limit emulation is selected (i.e., if <span class="define">mode</span> is set to 1 or 2)</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<code class="lit">value_max</code></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<code class="lit">value_min</code></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
The maximum and minimum values. The corresponding <span class="define">ENVSYS_FVALID_MAX</span> and <span class="define">ENVSYS_FVALID_MIN</span> flags are implicitly set.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<code class="lit">percentage</code></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
This boolean value controls the setting of the <span class="define">ENVSYS_FPERCENT</span> flag.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<code class="lit">type</code></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
Define the sensor's unit/type. By default, a Temperature sensor is created. Any of the string values from the following table can be specified:<table style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-col">
<col style="width: 16.00ex;">
<col style="width: 14.00ex;">
<col style="min-width: 11.00ex;">
<tbody>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
Temperature</td>
<td class="list-col" style="margin-top: 1.00em;">
Fan</td>
<td class="list-col" style="margin-top: 1.00em;">
Voltage AC</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
Voltage DC</td>
<td class="list-col" style="margin-top: 1.00em;">
Ohms</td>
<td class="list-col" style="margin-top: 1.00em;">
Watts</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
Ampere</td>
<td class="list-col" style="margin-top: 1.00em;">
Watt hour</td>
<td class="list-col" style="margin-top: 1.00em;">
Ampere hour</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
Indicator</td>
<td class="list-col" style="margin-top: 1.00em;">
Integer</td>
<td class="list-col" style="margin-top: 1.00em;">
Drive</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
Battery capacity</td>
<td class="list-col" style="margin-top: 1.00em;">
Battery charge</td>
</tr>
</tbody>
</table>
(Values are case-sensitive, and spaces must be included.)</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<code class="lit">value</code></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
Provide an initial value for the sensor. If this is omitted, the sensor's initial value is set to zero.</dd>
</dl>
<p>
For example,<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit"><b class="cmd">modload -s type=Voltage&#92; DC swsensor</b></code></div>
</blockquote>
will create a sensor of type <span class="define">ENVSYS_UNITS_SVOLTS_DC</span>, while<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit"><b class="cmd">modload -i mode=1 -i limit=50 swsensor</b></code></div>
</blockquote>
will create a sensor which has an initial, device-provided limit of 50.<p>
The sensor's raw value and state can be manually updated by modifying the <a class="link-man" href="../8/sysctl">sysctl(8)</a> variables &#8220;hw.swsensor.cur_value&#8221; and &#8220;hw.swsensor.state&#8221; variables respectively.</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../2/modctl">modctl(2)</a>, <a class="link-man" href="../8/envstat">envstat(8)</a>, <a class="link-man" href="../8/sysctl">sysctl(8)</a></div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> The <b class="name">swsensor</b> driver was written by <span class="author">Paul Goyette</span> and first appeared in <span class="unix">NetBSD&#160;6.0</span>.</div>
<div class="section">
<h1 id="x42554753">BUGS</h1> The <b class="name">swsensor</b> driver emulates a device with only a single sensor.<p>
The <b class="name">swsensor</b> driver can only emulate one hardware-managed limit; this is assumed to be the <span class="define">critical-min</span> limit.</div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
August 27, 2012</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
<>

