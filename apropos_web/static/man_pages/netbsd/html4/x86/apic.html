<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="/static/man_pages/netbsd/style.css" type="text/css" media="all">
<title>
APIC(4) (x86)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
APIC(4)</td>
<td class="head-vol" align="center">
Kernel Interfaces Manual (x86)</td>
<td class="head-rtitle" align="right">
APIC(4)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">apic</b>, <b class="name">ioapic</b>, <b class="name">lapic</b> &#8212; <span class="desc">Intel APIC Architecture</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="config">ioapic* at mainbus*</b></div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> The <b class="name">apic</b> subsystem provides basis for a system of advanced programmable interrupt controllers (APICs) originally designed by Intel but now widely used on all x86 systems.<p>
There are two elements in the architecture, the local APIC (LAPIC) and the I/O APIC. Historically these were connected by a dedicated 3-wire &#8220;APIC bus&#8221;, but the system bus is used for communication today. The configuration is increasingly dependent on ACPI.<p>
Typically each CPU in the system contains one LAPIC that performs two primary functions:<ol style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 5.00ex;" class="list list-enum">
<li class="list-enum" style="margin-top: 1.00em;">
It receives interrupts both from internal sources and from the external I/O APIC. The interrupt sources include I/O devices, the programmable APIC timer, performance monitoring counters, thermal sensor interrupts, and others.</li>
<li class="list-enum" style="margin-top: 1.00em;">
In multiprocessor (MP) systems a LAPIC receives and sends interprocessor interrupts (IPIs) from and to other processors in the system. IPIs are used to provide software interrupts, interrupt forwarding, or preemptive scheduling. Against this, the architecture can be generally seen as an attempt to solve the interrupt routing efficiency issues in MP systems.</li>
</ol>
<p>
There is typically one I/O APIC for each peripheral bus in the system. Each I/O APIC has a series of interrupt inputs to external interrupt sources. The architecture usually contains a redirection table which can be used to route the interrupts that an I/O APIC receives to one or more local APICs. When a LAPIC is able to accept an interrupt, it will signal the CPU. Without an I/O APIC, the local APICs are therefore mostly useless; one of the primary functions of the architecture is no longer achievable, interrupts can not be distributed to different CPUs.<p>
The 8259 PIC has coexisted with the architecture since its introduction. It is still possible to disable the APIC system and revert back to a 8259-compatible PIC. But the widespread use of MP systems has made this mainly a fallback option.</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../../4/acpi">acpi(4)</a>, <a class="link-man" href="../../4/ichlpcib">ichlpcib(4)</a>, <a class="link-man" href="../../4/mainbus">mainbus(4)</a><p>
<span class="ref"><span class="ref-auth">Intel Corporation</span>, <span class="ref-title">Intel 64 and IA-32 Architectures Software Developer's Manual</span>, <span class="ref-vol">Volume 3A: System Programming Guide, Part 1</span>, <a class="link-ref" href="http://www.intel.com/Assets/PDF/manual/253668.pdf">http://www.intel.com/Assets/PDF/manual/253668.pdf</a>, <span class="ref-page">Chapter 10</span>, <span class="ref-date">January, 2011</span>.</span><p>
<span class="ref"><span class="ref-auth">Intel Corporation</span>, <span class="ref-title">Intel 82093AA I/O Advanced Programmable</span>, <span class="ref-title">Interrupt Controller (I/O APIC) Datasheet</span>, <a class="link-ref" href="http://www.intel.com/design/chipsets/datashts/29056601.pdf">http://www.intel.com/design/chipsets/datashts/29056601.pdf</a>, <span class="ref-date">May, 1996</span>.</span><p>
<span class="ref"><span class="ref-auth">Intel Corporation</span>, <span class="ref-title">8259A, Programmable Interrupt Controller</span>, <a class="link-ref" href="http://pdos.csail.mit.edu/6.828/2005/readings/hardware/8259A.pdf">http://pdos.csail.mit.edu/6.828/2005/readings/hardware/8259A.pdf</a>, <span class="ref-date">December, 1988</span>.</span><p>
<span class="ref"><span class="ref-auth">John Baldwin</span>, <span class="ref-title">PCI Interrupts for x86 Machines under FreeBSD</span>, <a class="link-ref" href="http://people.freebsd.org/~jhb/papers/bsdcan/2007/article.pdf">http://people.freebsd.org/~jhb/papers/bsdcan/2007/article.pdf</a>, <span class="ref-date">May 18-19, 2007</span>, <span class="ref-opt">Proceedings of BSDCan 2007</span>.</span><p>
<span class="ref"><span class="ref-auth">Microsoft Corporation</span>, <span class="ref-title">PCI IRQ Routing on a Multiprocessor ACPI System</span>, <a class="link-ref" href="http://www.microsoft.com/whdc/archive/acpi-mp.mspx">http://www.microsoft.com/whdc/archive/acpi-mp.mspx</a>, <span class="ref-date">December 4, 2001</span>.</span></div>
<div class="section">
<h1 id="x415554484f5253">AUTHORS</h1> <span class="author"></span>Authors of the <span class="unix">NetBSD</span> implementation of the Intel APIC Architecture include <span class="author">Andrew Doran</span>, <span class="author">Bill Sommerfeld</span>, <span class="author">Frank van der Linden</span>, and <span class="author">Stefan Grefen</span>, among others. The older 8259 PIC implementation is based on the work of <span class="author">William Jolitz</span>.</div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
June 6, 2011</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
</html>

