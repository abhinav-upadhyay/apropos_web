<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="..//static/man_pages/netbsd/style.css" type="text/css" media="all">
<title>
EN(4) (VAX)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
EN(4)</td>
<td class="head-vol" align="center">
Kernel Interfaces Manual (VAX)</td>
<td class="head-rtitle" align="right">
EN(4)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">en</b> &#8212; <span class="desc">Xerox 3 Mb/s Ethernet interface</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="config">en0 at uba0 csr 161000 vector enrint enxint encollide</b></div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> NOTE: This driver has not been ported from <span class="unix">4.4BSD</span> yet.<p>
The <b class="name">en</b> interface provides access to a 3 Mb/s Ethernet network. Due to limitations in the hardware, DMA transfers to and from the network must take place in the lower 64K bytes of the UNIBUS address space, and thus this must be among the first UNIBUS devices enabled after boot.<p>
Each of the host's network addresses is specified at boot time with an <span class="define">SIOCSIFADDR</span> <a class="link-man" href="../../2/ioctl">ioctl(2)</a>. The station address is discovered by probing the on-board Ethernet address register, and is used to verify the protocol addresses. No packets will be sent or accepted until a network address is supplied.<p>
The interface software implements an exponential backoff algorithm when notified of a collision on the cable.  This algorithm uses a 16-bit mask and the VAX-11's interval timer in calculating a series of random backoff values.  The algorithm is as follows:<ol style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 5.00ex;" class="list list-enum">
<li class="list-enum" style="margin-top: 1.00em;">
Initialize the mask to be all 1's.</li>
<li class="list-enum" style="margin-top: 1.00em;">
If the mask is zero, 16 retries have been made and we give up.</li>
<li class="list-enum" style="margin-top: 1.00em;">
Shift the mask left one bit and formulate a backoff by masking the interval timer with the mask (this is actually the two's complement of the value).</li>
<li class="list-enum" style="margin-top: 1.00em;">
Use the value calculated in step 3 to delay before retransmitting the packet.</li>
</ol>
<p>
The interface handles both Internet and NS protocol families. It normally tries to use a &#8220;trailer&#8221; encapsulation to minimize copying data on input and output. The use of trailers is negotiated with ARP. This negotiation may be disabled, on a per-interface basis, by setting the <span class="define">IFF_NOTRAILERS</span> flag with an <span class="define">SIOCSIFFLAGS</span> <a class="link-man" href="../../2/ioctl">ioctl(2)</a>.</div>
<div class="section">
<h1 id="x444941474e4f5354494353">DIAGNOSTICS</h1><dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-diag">
<dt class="list-diag" style="margin-top: 1.00em;">
<b class="diag">en%d: output error.</b></dt>
<dd class="list-diag">
The hardware indicated an error on the previous transmission.</dd>
<dt class="list-diag" style="margin-top: 1.00em;">
<b class="diag">en%d: send error.</b></dt>
<dd class="list-diag">
After 16 retransmissions using the exponential backoff algorithm described above, the packet was dropped.</dd>
<dt class="list-diag" style="margin-top: 1.00em;">
<b class="diag">en%d: input error.</b></dt>
<dd class="list-diag">
The hardware indicated an error in reading a packet off the cable.</dd>
<dt class="list-diag" style="margin-top: 1.00em;">
<b class="diag">en%d: can't handle af%d.</b></dt>
<dd class="list-diag">
The interface was handed a message with addresses formatted in an unsuitable address family; the packet was dropped.</dd>
</dl>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../../4/inet">inet(4)</a>, <a class="link-man" href="../../4/netintro">netintro(4)</a></div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> The <b class="name">en</b> driver appeared in <span class="unix">4.2BSD</span>.</div>
<div class="section">
<h1 id="x42554753">BUGS</h1> The device has insufficient buffering to handle back to back packets.  This makes use in a production environment painful.<p>
The hardware does word at a time DMA without byte swapping. To compensate, byte swapping of user data must either be done by the user or by the system.  A kludge to byte swap only IP packets is provided if the <span class="define">ENF_SWABIPS</span> flag is defined in the driver and set at boot time with an <span class="define">SIOCSIFFLAGS</span> <a class="link-man" href="../../2/ioctl">ioctl(2)</a>.</div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
June 5, 1993</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
</html>

