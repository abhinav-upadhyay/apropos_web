<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="../../style.css" type="text/css" media="all">
<title>
HK(4) (VAX)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
HK(4)</td>
<td class="head-vol" align="center">
Kernel Interfaces Manual (VAX)</td>
<td class="head-rtitle" align="right">
HK(4)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">hk</b> &#8212; <span class="desc">RK6-11/ RK06 and RK07 disk interface</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="config">hk0 at uba? csr 0177440 vector rkintr</b><br>
<b class="config">rk0 at hk0 drive 0</b></div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> NOTE: This driver has not been ported from <span class="unix">4.4BSD</span> yet.<p>
The <b class="name">hk</b> driver is a typical block-device disk driver; block device I/O is described in <a class="link-man" href="../../html4/physio.html">physio(4)</a>.<p>
The script <a class="link-man" href="../../html8/MAKEDEV.html">MAKEDEV(8)</a> should be used to create the special files; if a special file needs to be created by hand consult <a class="link-man" href="../../html8/mknod.html">mknod(8)</a>.</div>
<div class="section">
<h1 id="x4449534b20535550504f5254">DISK SUPPORT</h1> Special file names begin with &#8216;<code class="lit">hk</code>&#8217; and &#8216;<code class="lit">rhk</code>&#8217; for the block and character files respectively. The second component of the name, a drive unit number in the range of zero to seven, is represented by a &#8216;<code class="lit">?</code>&#8217; in the disk layouts below. The last component is the file system partition which is designated by a letter from &#8216;<code class="lit">a</code>&#8217; to &#8216;<code class="lit">h</code>&#8217;. and corresponds to a minor device number set: zero to seven, eight to 15, 16 to 23 and so forth for drive zero, drive two and drive three respectively. The location and size (in sectors) of the partitions for the RK06 and RK07 drives are as follows:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-hang">
<dt class="list-hang" style="margin-top: 1.00em;">
RK07 partitions</dt>
<dd class="list-hang">
<table style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-col">
<col style="width: 5.00ex;">
<col style="width: 9.00ex;">
<col style="width: 6.00ex;">
<col style="min-width: 8.00ex;">
<tbody>
<tr class="list-col">
<td class="list-col" style="margin-top: 0.00em;">
<span class="symb">disk</span></td>
<td class="list-col" style="margin-top: 0.00em;">
start</td>
<td class="list-col" style="margin-top: 0.00em;">
length</td>
<td class="list-col" style="margin-top: 0.00em;">
cyl</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 0.00em;">
hk?a</td>
<td class="list-col" style="margin-top: 0.00em;">
0</td>
<td class="list-col" style="margin-top: 0.00em;">
15884</td>
<td class="list-col" style="margin-top: 0.00em;">
0-240</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 0.00em;">
hk?b</td>
<td class="list-col" style="margin-top: 0.00em;">
15906</td>
<td class="list-col" style="margin-top: 0.00em;">
10032</td>
<td class="list-col" style="margin-top: 0.00em;">
241-392</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 0.00em;">
hk?c</td>
<td class="list-col" style="margin-top: 0.00em;">
0</td>
<td class="list-col" style="margin-top: 0.00em;">
53790</td>
<td class="list-col" style="margin-top: 0.00em;">
0-814</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 0.00em;">
hk?d</td>
<td class="list-col" style="margin-top: 0.00em;">
25938</td>
<td class="list-col" style="margin-top: 0.00em;">
15884</td>
<td class="list-col" style="margin-top: 0.00em;">
393-633</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 0.00em;">
hk?f</td>
<td class="list-col" style="margin-top: 0.00em;">
41844</td>
<td class="list-col" style="margin-top: 0.00em;">
11792</td>
<td class="list-col" style="margin-top: 0.00em;">
634-814</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 0.00em;">
hk?g</td>
<td class="list-col" style="margin-top: 0.00em;">
25938</td>
<td class="list-col" style="margin-top: 0.00em;">
27786</td>
<td class="list-col" style="margin-top: 0.00em;">
393-813</td>
</tr>
</tbody>
</table>
</dd>
<dt class="list-hang" style="margin-top: 1.00em;">
RK06 partitions</dt>
<dd class="list-hang">
<table style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-col">
<col style="width: 5.00ex;">
<col style="width: 9.00ex;">
<col style="width: 6.00ex;">
<col style="min-width: 8.00ex;">
<tbody>
<tr class="list-col">
<td class="list-col" style="margin-top: 0.00em;">
<span class="symb">disk</span></td>
<td class="list-col" style="margin-top: 0.00em;">
start</td>
<td class="list-col" style="margin-top: 0.00em;">
length</td>
<td class="list-col" style="margin-top: 0.00em;">
cyl</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 0.00em;">
hk?a</td>
<td class="list-col" style="margin-top: 0.00em;">
0</td>
<td class="list-col" style="margin-top: 0.00em;">
15884</td>
<td class="list-col" style="margin-top: 0.00em;">
0-240</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 0.00em;">
hk?b</td>
<td class="list-col" style="margin-top: 0.00em;">
15906</td>
<td class="list-col" style="margin-top: 0.00em;">
11154</td>
<td class="list-col" style="margin-top: 0.00em;">
241-409</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 0.00em;">
hk?c</td>
<td class="list-col" style="margin-top: 0.00em;">
0</td>
<td class="list-col" style="margin-top: 0.00em;">
27126</td>
<td class="list-col" style="margin-top: 0.00em;">
0-410</td>
</tr>
</tbody>
</table>
</dd>
</dl>
<p>
On a dual RK-07 system partition hk?a is used for the root for one drive and partition hk?g for the /usr file system. If large jobs are to be run using hk?b on both drives as swap area provides a 10Mbyte paging area. Otherwise partition hk?c on the other drive is used as a single large file system.</div>
<div class="section">
<h1 id="x46494c4553">FILES</h1><dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/dev/hk[0-7][a-h]</i></dt>
<dd class="list-tag" style="margin-left: 18.00ex;">
block files</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/dev/rhk[0-7][a-h]</i></dt>
<dd class="list-tag" style="margin-left: 18.00ex;">
raw files</dd>
</dl>
</div>
<div class="section">
<h1 id="x444941474e4f5354494353">DIAGNOSTICS</h1><dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-diag">
<dt class="list-diag" style="margin-top: 1.00em;">
<b class="diag">hk%d%c: hard error %sing fsbn %d[-%d] cs2=%b ds=%b er=%b.</b></dt>
<dd class="list-diag">
An unrecoverable error occurred during transfer of the specified filesystem block number(s), which are logical block numbers on the indicated partition. The contents of the cs2, ds and er registers are printed in octal and symbolically with bits decoded. The error was either unrecoverable, or a large number of retry attempts (including offset positioning and drive recalibration) could not recover the error.</dd>
<dt class="list-diag" style="margin-top: 1.00em;">
<b class="diag">rk%d: write locked.</b></dt>
<dd class="list-diag">
The write protect switch was set on the drive when a write was attempted. The write operation is not recoverable.</dd>
<dt class="list-diag" style="margin-top: 1.00em;">
<b class="diag">rk%d: not ready.</b></dt>
<dd class="list-diag">
The drive was spun down or off line when it was accessed. The I/O operation is not recoverable.</dd>
<dt class="list-diag" style="margin-top: 1.00em;">
<b class="diag">rk%d: not ready (came back!).</b></dt>
<dd class="list-diag">
The drive was not ready, but after printing the message about being not ready (which takes a fraction of a second) was ready. The operation is recovered if no further errors occur.</dd>
<dt class="list-diag" style="margin-top: 1.00em;">
<b class="diag">rk%d%c: soft ecc reading fsbn %d[-%d].</b></dt>
<dd class="list-diag">
A recoverable ECC error occurred on the specified sector(s) in the specified disk partition. This happens normally a few times a week. If it happens more frequently than this the sectors where the errors are occurring should be checked to see if certain cylinders on the pack, spots on the carriage of the drive or heads are indicated.</dd>
<dt class="list-diag" style="margin-top: 1.00em;">
<b class="diag">hk%d: lost interrupt.</b></dt>
<dd class="list-diag">
A timer watching the controller detected no interrupt for an extended period while an operation was outstanding. This indicates a hardware or software failure. There is currently a hardware/software problem with spinning down drives while they are being accessed which causes this error to occur. The error causes a UNIBUS reset, and retry of the pending operations. If the controller continues to lose interrupts, this error will recur a few seconds later.</dd>
</dl>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../../html4/hp.html">hp(4)</a>, <a class="link-man" href="../../html4/uda.html">uda(4)</a>, <a class="link-man" href="../../html4/up.html">up(4)</a>, <a class="link-man" href="../../html8/syslogd.html">syslogd(8)</a></div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> The <b class="name">hk</b> driver appeared in <span class="unix">4.1BSD</span>.</div>
<div class="section">
<h1 id="x42554753">BUGS</h1> The <a class="link-man" href="../../html2/write.html">write(2)</a> function scribbles on the tail of incomplete blocks.<p>
DEC-standard error logging should be supported.<p>
A program to analyze the logged error information (even in its present reduced form) is needed.<p>
The partition tables for the file systems should be read off of each pack, as they are never quite what any single installation would prefer, and this would make packs more portable.<p>
The RK07 g partition size in rk.c disagrees with that in <i class="file">/etc/disktab</i>.</div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
June 5, 1993</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
</html>

