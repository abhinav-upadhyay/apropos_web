<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="../../style.css" type="text/css" media="all">
<title>
HP(4) (VAX)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
HP(4)</td>
<td class="head-vol" align="center">
Kernel Interfaces Manual (VAX)</td>
<td class="head-rtitle" align="right">
HP(4)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">hp</b> &#8212; <span class="desc">MASSBUS disk interface</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="config">hp0 at mba0 drive 0</b><br>
<b class="config">hp* at mba? drive ?</b></div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> The <b class="name">hp</b> driver is a generic MASSBUS disk driver which handles the standard DEC controllers. It is typical of a block-device disk driver; block I/O is described in <a class="link-man" href="../../4/physio">physio(4)</a>.<p>
The script <a class="link-man" href="../../8/MAKEDEV">MAKEDEV(8)</a> should be used to create the special files; if a special file needs to be created by hand consult <a class="link-man" href="../../8/mknod">mknod(8)</a>. It is recommended as a security precaution to not create special files for devices which may never be installed.<p>
The first sector of each disk contains both a first-stage bootstrap program and a disk label containing geometry information and partition layouts (see <a class="link-man" href="../../5/disklabel">disklabel(5)</a>. This sector is normally write-protected, and disk-to-disk copies should avoid copying this sector. The label may be updated with <a class="link-man" href="../../8/disklabel">disklabel(8)</a>, which can also be used to write-enable and write-disable the sector. The next 15 sectors contain a second-stage bootstrap program.</div>
<div class="section">
<h1 id="x4449534b20535550504f5254">DISK SUPPORT</h1> During autoconfiguration or whenever a drive comes on line for the first time, or when a drive is opened after all partitions are closed, the first sector of the drive is examined for a disk label. If a label is found, the geometry of the drive and the partition tables are taken from it. If no label is found, a fake label is created by the driver, enough so that a real label can be written.<p>
The hp?a partition is normally used for the root file system, the hp?b partition as a paging area, and the hp?c partition for pack-pack copying (it maps the entire disk). On disks larger than about 205 Megabytes, the hp?h partition is inserted prior to the hp?d or hp?g partition; the hp?g partition then maps the remainder of the pack.</div>
<div class="section">
<h1 id="x46494c4553">FILES</h1><dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/dev/hp[0-7][a-h]</i></dt>
<dd class="list-tag" style="margin-left: 18.00ex;">
block files</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/dev/rhp[0-7][a-h]</i></dt>
<dd class="list-tag" style="margin-left: 18.00ex;">
raw files</dd>
</dl>
</div>
<div class="section">
<h1 id="x444941474e4f5354494353">DIAGNOSTICS</h1><dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-diag">
<dt class="list-diag" style="margin-top: 1.00em;">
<b class="diag">hp%d%c: hard error %sing fsbn %d [of %d-%d] (hp%d bn %d cn %d tn %d sn %d) mbsr=%b er1=%b er2=%b.</b></dt>
<dd class="list-diag">
An unrecoverable error occurred during transfer of the specified filesystem block number, which is a logical block number on the indicated partition. If the transfer involved multiple blocks, the block range is printed as well. The parenthesized fields list the actual disk sector number relative to the beginning of the drive, as well as the cylinder, track and sector number of the block. The MASSBUS status register is printed in hexadecimal and with the error bits decoded if any error bits other than MBEXC and DTABT are set. In any case the contents of the two error registers are also printed in octal and symbolically with bits decoded. (Note that er2 is what old RP06 manuals would call RPER3; the terminology is that of the RM disks). The error was either unrecoverable, or a large number of retry attempts (including offset positioning and drive recalibration) could not recover the error.</dd>
<dt class="list-diag" style="margin-top: 1.00em;">
<b class="diag">hp%d%c: soft ecc reading fsbn %d [of %d-%d] (hp%d bn %d cn %d tn %d sn %d).</b></dt>
<dd class="list-diag">
A recoverable ECC error occurred on the specified sector of the specified disk partition. If the transfer involved multiple blocks, the block range is printed as well. The parenthesized fields list the actual disk sector number relative to the beginning of the drive, as well as the cylinder, track and sector number of the block. This happens normally a few times a week. If it happens more frequently than this the sectors where the errors are occurring should be checked to see if certain cylinders on the pack, spots on the carriage of the drive or heads are indicated.</dd>
</dl>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../../4/physio">physio(4)</a>, <a class="link-man" href="../../4/up">up(4)</a>, <a class="link-man" href="../../5/disklabel">disklabel(5)</a>, <a class="link-man" href="../../8/disklabel">disklabel(8)</a>, <a class="link-man" href="../../8/MAKEDEV">MAKEDEV(8)</a>, <a class="link-man" href="../../8/mknod">mknod(8)</a></div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> The <b class="name">hp</b> driver appeared in <span class="unix">4.0BSD</span>.<p>
A new <b class="name">hp</b> driver showed up in <span class="unix">NetBSD&#160;1.2</span>.</div>
<div class="section">
<h1 id="x42554753">BUGS</h1> DEC-standard <a class="link-man" href="../../8/bad144">bad144(8)</a> bad-block handling should be used.<p>
DEC-standard error logging should be supported.<p>
A program to analyze the logged error information (even in its present reduced form) is needed.</div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
June 5, 1993</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
</html>

