<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="../../style.css" type="text/css" media="all">
<title>
VP(4) (VAX)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
VP(4)</td>
<td class="head-vol" align="center">
Kernel Interfaces Manual (VAX)</td>
<td class="head-rtitle" align="right">
VP(4)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">vp</b> &#8212; <span class="desc">Versatec printer/plotter interface</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="config">vp0 at uba0 csr 0177510 vector vpintr vpintr</b></div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> NOTE: This driver has not been ported from <span class="unix">4.4BSD</span> yet.<p>
The Versatec printer/plotter is normally used with the line printer system. This description is designed for those who wish to drive the Versatec directly.<p>
To use the Versatec yourself, you must realize that you cannot open the device, <i class="file">/dev/vp0</i> if there is a daemon active. You can see if there is a daemon active by doing a <a class="link-man" href="../../html1/lpq.html">lpq(1)</a>, and seeing if there are any files being sent. Printing should be turned off using <a class="link-man" href="../../html8/lpc.html">lpc(8)</a>.<p>
To set the Versatec into plot mode you should include <b class="includes">&lt;<a class="link-includes">sys/vcmd.h</a>&gt;</b> and use the <a class="link-man" href="../../html2/ioctl.html">ioctl(2)</a> call<p>
<pre style="margin-left: 5.00ex;" class="lit display">
ioctl(fileno(vp), VSETSTATE, plotmd);</pre>
<p>
where <span class="emph">plotmd</span> is defined to be<p>
<pre style="margin-left: 5.00ex;" class="lit display">
int plotmd[] = { VPLOT, 0, 0 };</pre>
<p>
and <span class="emph">vp</span> is the result of a call to <a class="link-man" href="../../html3/fopen.html">fopen(3)</a> on stdio. When you finish using the Versatec in plot mode you should eject paper by sending it a EOT after putting it back into print mode, i.e. by<p>
<pre style="margin-left: 5.00ex;" class="lit display">
int prtmd[] = { VPRINT, 0, 0 }; 
... 
fflush(vp); 
ioctl(fileno(vp), VSETSTATE, prtmd); 
write(fileno(vp), "&#92;04", 1);</pre>
</div>
<div class="section">
<h1 id="x46494c4553">FILES</h1><dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/dev/vp0</i></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
</dd>
</dl>
</div>
<div class="section">
<h1 id="x444941474e4f5354494353">DIAGNOSTICS</h1> The following error numbers are significant at the time the device is opened.<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">ENXIO</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
The device is already in use.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">EIO</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
The device is offline.</dd>
</dl>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../../html1/lpr.html">lpr(1)</a>, <a class="link-man" href="../../html4/va.html">va(4)</a>, <a class="link-man" href="../../html8/lpd.html">lpd(8)</a></div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> A <b class="name">vp</b> driver appeared in Version&#160;7 AT&amp;T UNIX.</div>
<div class="section">
<h1 id="x42554753">BUGS</h1> The configuration part of the driver assumes that the device is set up to vector print mode through 0174 and plot mode through 0200. As the configuration program can't be sure which vector interrupted at boot time, we specify that it has two interrupt vectors, and if an interrupt comes through 0200 it is reset to 0174. This is safe for devices with one or two vectors at these two addresses. Other configurations with 2 vectors may require changes in the driver.</div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
June 5, 1993</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
</html>

