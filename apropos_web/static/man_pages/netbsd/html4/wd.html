<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/../4/strict.dtd">
>
<head>
<meta http-equiv="Content-Type" content="te../; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="../style.css" type="text/css" media="all">
<title>
WD(4)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
WD(4)</td>
<td class="head-vol" align="center">
Kernel Interfaces Manual</td>
<td class="head-rtitle" align="right">
WD(4)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">wd</b> &#8212; <span class="desc">WD100x compatible hard disk driver</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="config">wd* at atabus? drive ? flags 0x0000</b><br>
<b class="config">wd* at umass?</b><br>
<b class="config">options WD_SOFTBADSECT</b></div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> The <b class="name">wd</b> driver supports hard disks that emulate the Western Digital WD100x. This includes standard MFM, RLL, ESDI, IDE, EIDE, and SATA drives.<p>
The flags are used only with controllers that support DMA operations and mode settings (like some pciide controllers). The lowest order nibble (rightmost digit) of the flags defines the PIO mode, the next four bits define the DMA mode and the third nibble defines the UltraDMA mode. For each set of four bits, the 3 lower bits define the mode to use and the last bit must be set to 1 for this setting to be used. For DMA and UDMA, 0xf (1111) means 'disable'. For example, a flags value of 0x0fac (1111 1010 1100) means 'use PIO mode 4, DMA mode 2, disable UltraDMA'. 0x0000 means "use whatever the drive claims to support."<p>
The kernel configuration option &#8220;<b class="config">options WD_SOFTBADSECT</b>&#8221; enables a software managed bad-sector list which will prevent further accesses to sectors where an unrecoverable read error occurred. A user interface is provided by <a class="link-man" href="../8/dkctl">dkctl(8)</a>. Unlike the (historical) mechanisms provided by <a class="link-man" href="../8/bad144">bad144(8)</a> and <a class="link-man" href="../8/badsect">badsect(8)</a> the software list does neither support sector replacement nor is it saved across reboots.</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../4/ata">ata(4)</a>, <a class="link-man" href="../4/intro">intro(4)</a>, <a class="link-man" href="../4/pciide">pciide(4)</a>, <a class="link-man" href="../4/scsi">scsi(4)</a>, <a class="link-man" href="../4/umass">umass(4)</a>, <a class="link-man" href="../4/wdc">wdc(4)</a>, <a class="link-man" href="../8/atactl">atactl(8)</a>, <a class="link-man" href="../8/dkctl">dkctl(8)</a></div>
<div class="section">
<h1 id="x42554753">BUGS</h1> The optional software bad sector list does not interoperate well with sector remapping features of modern disks. To let the disk remap a sector internally, the software bad sector list must be flushed or disabled before.</div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
August 30, 2004</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
<>

