<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="../style.css" type="text/css" media="all">
<title>
DGE(4)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
DGE(4)</td>
<td class="head-vol" align="center">
Kernel Interfaces Manual</td>
<td class="head-rtitle" align="right">
DGE(4)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">dge</b> &#8212; <span class="desc">Intel i82597EX Ten Gigabit Ethernet driver</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="config">dge* at pci? dev ? function ?</b></div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> The <b class="name">dge</b> device driver supports the Intel i82597EX PRO/10GbE LR Ethernet adapter, which uses a single mode fiber (1310nm) interface.<p>
The i82597EX supports IPv4/TCP/UDP checksumming in hardware, as well as TCP Segmentation Offloading (TSO). The driver does currently only support the hardware checksumming features. See <a class="link-man" href="../8/ifconfig">ifconfig(8)</a> for information on how to enable the hardware checksum calculations.<p>
The driver also makes use of the <a class="link-man" href="../8/ifconfig">ifconfig(8)</a> link flags <i class="arg">link0</i> and <i class="arg">link1</i> to set the PCIX burst size. The burst size is set according to this table:<table style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-col">
<col style="width: 5.00ex;">
<col style="width: 5.00ex;">
<col style="min-width: 10.00ex;">
<tbody>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
<span class="emph">link0</span></td>
<td class="list-col" style="margin-top: 1.00em;">
link1</td>
<td class="list-col" style="margin-top: 1.00em;">
burst size</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
<code class="lit">off</code></td>
<td class="list-col" style="margin-top: 1.00em;">
off</td>
<td class="list-col" style="margin-top: 1.00em;">
512</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
<code class="lit">on</code></td>
<td class="list-col" style="margin-top: 1.00em;">
off</td>
<td class="list-col" style="margin-top: 1.00em;">
1024</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
<code class="lit">off</code></td>
<td class="list-col" style="margin-top: 1.00em;">
on</td>
<td class="list-col" style="margin-top: 1.00em;">
2048</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
<code class="lit">on</code></td>
<td class="list-col" style="margin-top: 1.00em;">
on</td>
<td class="list-col" style="margin-top: 1.00em;">
4096</td>
</tr>
</tbody>
</table>
<p>
A larger burst size will increase the transmit capacity of the card dramatically but may have negative effect on other devices in the system.</div>
<div class="section">
<h1 id="x444941474e4f5354494353">DIAGNOSTICS</h1><dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-diag">
<dt class="list-diag" style="margin-top: 1.00em;">
<b class="diag">dge%d: Tx packet consumes too many DMA segments, dropping...</b></dt>
<dd class="list-diag">
The packet consisted of too many small mbufs and could therefore not be loaded into a DMA map. This is most unlikely, the driver can currently handle up to 100 segments, but over 80 segments has been seen using large (16k) jumbo frames.</dd>
<dt class="list-diag" style="margin-top: 1.00em;">
<b class="diag">dge%s: device timeout (txfree %d txsfree %d txnext %d)</b></dt>
<dd class="list-diag">
The i82597EX had been given packets to send, but didn't interrupt within 5 seconds. This diagnostic is most likely the result of a hardware failure, and the chip will be reset to resume normal operation.</dd>
<dt class="list-diag" style="margin-top: 1.00em;">
<b class="diag">dge%d: Receive overrun</b></dt>
<dd class="list-diag">
If the computer is under heavy load, the software may not be able to keep up removing received datagrams from the receive queue, and will therefore loose datagrams. To avoid this, check that the other end is using the XON/XOFF protocol, if possible, or increase the receive descriptor ring size in the driver.</dd>
<dt class="list-diag" style="margin-top: 1.00em;">
<b class="diag">dge%d: symbol error</b></dt>
<dd class="list-diag">
</dd>
<dt class="list-diag" style="margin-top: 1.00em;">
<b class="diag">dge%d: parity error</b></dt>
<dd class="list-diag">
An error in the XGMII communication was detected. This is a hardware error in the MAC&lt;-&gt;PHY communication bus.</dd>
<dt class="list-diag" style="margin-top: 1.00em;">
<b class="diag">dge%d: CRC error</b></dt>
<dd class="list-diag">
A CRC error in the received datagram was detected. The error is probably caused in the fiber communication.</dd>
<dt class="list-diag" style="margin-top: 1.00em;">
<b class="diag">dge%d: WARNING: reset failed to complete</b></dt>
<dd class="list-diag">
This is a fatal error and means that the hardware is broken and will most likely not function correctly.</dd>
<dt class="list-diag" style="margin-top: 1.00em;">
<b class="diag">dge%d: unable to allocate or map rx buffer %d error = %d</b></dt>
<dd class="list-diag">
The driver was not able to map a mbuf cluster page to a receive descriptor entry in the receive ring. Most likely the system has run out of mbuf clusters or have a too small cluster map. See the errno for more information.</dd>
</dl>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../4/arp">arp(4)</a>, <a class="link-man" href="../4/ifmedia">ifmedia(4)</a>, <a class="link-man" href="../4/netintro">netintro(4)</a>, <a class="link-man" href="../4/pci">pci(4)</a>, <a class="link-man" href="../8/ifconfig">ifconfig(8)</a></div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> The <b class="name">dge</b> driver first appeared in <span class="unix">NetBSD&#160;2.0</span>.</div>
<div class="section">
<h1 id="x415554484f5253">AUTHORS</h1> The <b class="name">dge</b> driver was written by <span class="author">Anders Magnusson</span> &#60;<a class="link-mail" href="mailto:ragge@ludd.luth.se">ragge@ludd.luth.se</a>&#62;.</div>
<div class="section">
<h1 id="x42554753">BUGS</h1> There should be an XGMII framework for the driver to use.</div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
March 18, 2004</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
</html>

