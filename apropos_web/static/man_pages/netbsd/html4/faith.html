<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="/static/man_pages/netbsd/style.css" type="text/css" media="all">
<title>
FAITH(4)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
FAITH(4)</td>
<td class="head-vol" align="center">
Kernel Interfaces Manual</td>
<td class="head-rtitle" align="right">
FAITH(4)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">faith</b> &#8212; <span class="desc">IPv6-to-IPv4 TCP relay capturing interface</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="config">pseudo-device faith</b></div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> The <b class="name">faith</b> interface captures IPv6 TCP traffic, for implementing userland IPv6-to-IPv4 TCP relay like <a class="link-man" href="../8/faithd">faithd(8)</a>.<p>
<b class="name">faith</b> interfaces are dynamically created and destroyed with the <a class="link-man" href="../8/ifconfig">ifconfig(8)</a> <b class="flag">create</b> and <b class="flag">destroy</b> subcommands.<p>
Special action will be taken when IPv6 TCP traffic is seen on a router, and the routing table suggests to route it to the <b class="name">faith</b> interface. In this case, the packet will be accepted by the router, regardless of the list of IPv6 interface addresses assigned to the router. The packet will be captured by an IPv6 TCP socket, if it has the <span class="define">IN6P_FAITH</span> flag turned on and matching address/port pairs. As a result, <b class="name">faith</b> will let you capture IPv6 TCP traffic to some specific destination addresses. Userland programs, such as <a class="link-man" href="../8/faithd">faithd(8)</a> can use this behavior to relay IPv6 TCP traffic to IPv4 TCP traffic. The program can accept some specific IPv6 TCP traffic, perform <a class="link-man" href="../2/getsockname">getsockname(2)</a> to get the IPv6 destination address specified by the client, and perform application-specific address mapping to relay IPv6 TCP to IPv4 TCP.<p>
<span class="define">IN6P_FAITH</span> flag on an IPv6 TCP socket can be set by using <a class="link-man" href="../2/setsockopt">setsockopt(2)</a>, with level <span class="define">IPPROTO_IPV6</span> and optname <span class="define">IPv6_FAITH</span>.<p>
To handle error reports by ICMPv6, some ICMPv6 packets routed to an <b class="name">faith</b> interface will be delivered to IPv6 TCP, as well.<p>
To understand how <b class="name">faith</b> can be used, take a look at the source code of <a class="link-man" href="../8/faithd">faithd(8)</a>.<p>
As the <b class="name">faith</b> interface implements potentially dangerous operations, great care must be taken when configuring it. To avoid possible misuse, the <a class="link-man" href="../8/sysctl">sysctl(8)</a> variable <code class="lit">net.inet6.ip6.keepfaith</code> must be set to <code class="lit">1</code> prior to using the interface. When <code class="lit">net.inet6.ip6.keepfaith</code> is <code class="lit">0</code>, no packets will be captured by the <b class="name">faith</b> interface.<p>
The <b class="name">faith</b> interface is intended to be used on routers, not on hosts.</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../4/inet">inet(4)</a>, <a class="link-man" href="../4/inet6">inet6(4)</a>, <a class="link-man" href="../8/faithd">faithd(8)</a><p>
<span class="ref"><span class="ref-auth">Jun-ichiro itojun Hagino</span> and <span class="ref-auth">Kazu Yamamoto</span>, <span class="ref-title">An IPv6-to-IPv4 transport relay translator</span>, <i class="ref-book">RFC 3142</i>, <a class="link-ref" href="ftp://ftp.isi.edu/in-notes/rfc3142.txt">ftp://ftp.isi.edu/in-notes/rfc3142.txt</a>, <span class="ref-date">June 2001</span>.</span></div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> The FAITH IPv6-to-IPv4 TCP relay translator first appeared in the WIDE hydrangea IPv6 stack.</div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
January 9, 2010</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
</html>

