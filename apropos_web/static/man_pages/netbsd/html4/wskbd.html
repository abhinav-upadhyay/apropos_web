<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="/static/man_pages/netbsd/style.css" type="text/css" media="all">
<title>
WSKBD(4)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
WSKBD(4)</td>
<td class="head-vol" align="center">
Kernel Interfaces Manual</td>
<td class="head-rtitle" align="right">
WSKBD(4)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">wskbd</b> &#8212; <span class="desc">generic keyboard support in wscons</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="config">wskbd* at pckbd? console ? mux 1</b> (standard PC keyboard)<br>
<b class="config">wskbd* at ukbd? console ? mux 1</b> (USB keyboard)<br>
<b class="config">wskbd* at lkkbd? console ? mux 1</b> (DEC LK200/400 serial keyboard)<br>
<b class="config">wskbd0 at akbd? console ? mux 1</b> (Apple ADB keyboard)<br>
<b class="config">wskbd0 at nextkbd? console ? mux 1</b> (NeXT keyboard)<br>
<b class="config">wskbd* at vrkiu? console ? mux 1</b> (NEC VR4000 series HPC keyboard)<br>
<b class="config">wskbd* at skbd? console ? mux 1</b> (keyboard of misc hpcmips handheld devices)<br>
<b class="config">wskbd* at btkbd? console ? mux 1</b> (Bluetooth keyboard)</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> The <b class="name">wskbd</b> driver handles common tasks for keyboards within the <a class="link-man" href="../4/wscons">wscons(4)</a> framework. It is attached to the hardware specific keyboard drivers and provides their connection to &#8220;wsdisplay&#8221; devices and a character device interface.<p>
The common keyboard support consists of:<ul style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-bul">
<li class="list-bul" style="margin-top: 1.00em;">
Mapping from keycodes (defined by the specific keyboard driver) to keysyms (hardware independent, defined in <i class="file">/usr/include/dev/wscons/wsksymdef.h</i>).</li>
<li class="list-bul" style="margin-top: 1.00em;">
Handling of &#8220;compose&#8221; sequences. Characters commonly not present as separate key on keyboards can be generated after either a special &#8220;compose&#8221; key is pressed or a &#8220;dead accent&#8221; character is used.</li>
<li class="list-bul" style="margin-top: 1.00em;">
Certain translations, like turning an &#8220;ALT&#8221; modifier into an &#8220;ESC&#8221; prefix.</li>
<li class="list-bul" style="margin-top: 1.00em;">
Automatic key repetition (&#8220;typematic&#8221;).</li>
<li class="list-bul" style="margin-top: 1.00em;">
Parameter handling for &#8220;keyboard bells&#8221;.</li>
<li class="list-bul" style="margin-top: 1.00em;">
Generation of &#8220;keyboard events&#8221; for use by X servers.</li>
</ul>
<p>
The <b class="name">wskbd</b> driver provides a number of ioctl functions to control key maps and other parameters. These functions are accessible though the associated &#8220;wsdisplay&#8221; device as well. A complete list is in <i class="file">/usr/include/dev/wscons/wsconsio.h</i>. The <a class="link-man" href="../8/wsconsctl">wsconsctl(8)</a> utility allows to access key maps and other variables.<p>
The <span class="emph">console</span> locator in the configuration line refers to the device's use as input part of the operating system console. A device specification containing a positive value here will only match if the device is in use as system console. (The console device selection in early system startup is not influenced.) This way, the console device can be connected to a known wskbd device instance.<div class="subsection">
<h2 id="x496f63746c73">Ioctls</h2> The following <a class="link-man" href="../2/ioctl">ioctl(2)</a> calls are provided by the <b class="name">wskbd</b> driver or by devices which use it. Their definitions are found in <i class="file">dev/wscons/wsconsio.h</i>.<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">WSKBDIO_GTYPE</span></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
Get the keyboard type.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">WSKBDIO_COMPLEXBELL, WSKBDIO_SETBELL, WSKBDIO_GETBELL, WSKBDIO_SETDEFAULTBELL, WSKBDIO_GETDEFAULTBELL</span> (<code class="lit">struct wsmouse_repeat</code>)</dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
Get and set keyboard bell settings.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">WSKBDIO_SETKEYREPEAT, WSKBDIO_GETKEYREPEAT, WSKBDIO_SETDEFAULTKEYREPEAT, WSKBDIO_GETDEFAULTKEYREPEAT</span> (<code class="lit">struct wskbd_keyrepeat_data</code>)</dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
Get and set keyboard autorepeat settings.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">WSKBDIO_SETLEDS, WSKBDIO_GETLEDS</span> (<code class="lit">int</code>)</dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
Get and set keyboard LED settings.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">WSKBDIO_GETMAP, WSKBDIO_SETMAP</span> (<code class="lit">struct wskbd_map_data</code>)</dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
Get and set keyboard keymapping settings.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">WSKBDIO_GETENCODING, WSKBDIO_SETENCODING</span> (<code class="lit">kbd_t</code>)</dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
Get and set keyboard encoding settings.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">WSKBDIO_GETKEYCLICK, WSKBDIO_SETKEYCLICK</span> (<code class="lit">int</code>)</dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
Get and set keyboard keyclick settings.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">WSKBDIO_SETVERSION</span> (<code class="lit">int</code>)</dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
Set the wscons_event protocol version. The default is 0 for binary compatibility. The latest version is always available as <span class="define">WSKBD_EVENT_VERSION</span>, and is currently 1. All new code should use a call similar to the below to ensure the correct version is returned.<p>
<pre style="margin-left: 5.00ex;" class="lit display">
int ver = WSKBD_EVENT_VERSION; 
if (ioctl(fd, WSKBDIO_SETVERSION, &amp;ver) == -1) 
    err(EXIT_FAILURE, "cannot set version");</pre>
</dd>
</dl>
</div>
</div>
<div class="section">
<h1 id="x46494c4553">FILES</h1><ul style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-item">
<li class="list-item" style="margin-top: 1.00em;">
<i class="file">/dev/wskbd*</i></li>
<li class="list-item" style="margin-top: 1.00em;">
<i class="file">/usr/include/dev/wscons/wsksymdef.h</i></li>
<li class="list-item" style="margin-top: 1.00em;">
<i class="file">/usr/include/dev/wscons/wsconsio.h</i>.</li>
</ul>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../4/btkbd">btkbd(4)</a>, <a class="link-man" href="../4/pckbd">pckbd(4)</a>, <a class="link-man" href="../4/ukbd">ukbd(4)</a>, <a class="link-man" href="../4/wscons">wscons(4)</a>, <a class="link-man" href="../4/wsmux">wsmux(4)</a>, <a class="link-man" href="../8/wsconsctl">wsconsctl(8)</a>, <a class="link-man" href="../9/wskbd">wskbd(9)</a></div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
May 27, 2012</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
</html>

