<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/../4/strict.dtd">
>
<head>
<meta http-equiv="Content-Type" content="te../; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="../style.css" type="text/css" media="all">
<title>
MTIO(4)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
MTIO(4)</td>
<td class="head-vol" align="center">
Kernel Interfaces Manual</td>
<td class="head-rtitle" align="right">
MTIO(4)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">mtio</b> &#8212; <span class="desc">generic magnetic tape I/O interface</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="includes">#include &lt;<a class="link-includes">sys/ioctl.h</a>&gt;</b><br>
<b class="includes">#include &lt;<a class="link-includes">sys/types.h</a>&gt;</b><br>
<b class="includes">#include &lt;<a class="link-includes">sys/mtio.h</a>&gt;</b></div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> Magnetic tape has been the computer system backup and data transfer medium of choice for decades, because it has historically been cheaper in cost per bit stored, and the formats have been designed for portability and storage. However, tape drives have generally been the slowest mass storage devices attached to any computer system.<p>
Magnetic tape comes in a wide variety of formats, from classic 9-track, through various Quarter Inch Cartridge (QIC) variants, to more modern systems using 8mm video tape, and Digital Audio Tape (DAT). There have also been a variety of proprietary tape systems, including DECtape, and IBM 3480.<div class="subsection">
<h2 id="x554e4958205441504520492f4f">UNIX TAPE I/O</h2> Regardless of the specific characteristics of the particular tape transport mechanism (tape drive), <span class="unix">UNIX</span> tape I/O has two interfaces: &#8220;block&#8221; and &#8220;raw&#8221;. I/O through the block interface of a tape device is similar to I/O through the block special device for a disk driver: the individual <a class="link-man" href="../2/read">read(2)</a> and <a class="link-man" href="../2/write">write(2)</a> calls can be done in any amount of bytes, but all data is buffered through the system buffer cache, and I/O to the device is done in 1024 byte sized blocks. This limitation is sufficiently restrictive that the block interface to tape devices is rarely used.<p>
The &#8220;raw&#8221; interface differs in that all I/O can be done in arbitrary sized blocks, within the limitations for the specific device and device driver, and all I/O is synchronous. This is the most flexible interface, but since there is very little that is handled automatically by the kernel, user programs must implement specific magnetic tape handling routines, which puts the onus of correctness on the application programmer.</div>
<div class="subsection">
<h2 id="x444556494345204e414d4520434f4e56454e54494f4e53">DEVICE NAME CONVENTIONS</h2> Each magnetic tape subsystem has a couple of special devices associated with it.<p>
The block device is usually named for the driver, e.g. <i class="file">/dev/st0</i> for unit zero of a <a class="link-man" href="../4/st">st(4)</a> SCSI tape drive.<p>
The raw device name is the block device name with an &#8220;r&#8221; prepended, e.g. <i class="file">/dev/rst0</i>.<p>
By default, the tape driver will rewind the tape drive when the device is closed. To make it possible for multiple program invocations to sequentially write multiple files on the same tape, a &#8220;no rewind on close&#8221; device is provided, denoted by the letter &#8220;n&#8221; prepended to the name of the device, e.g. <i class="file">/dev/nst0</i>, <i class="file">/dev/nrst0</i>.<p>
The <a class="link-man" href="../1/mt">mt(1)</a> command can be used to explicitly rewind, or otherwise position a tape at a particular point with the no-rewind device.</div>
<div class="subsection">
<h2 id="x46494c45204d41524b2048414e444c494e47">FILE MARK HANDLING</h2> Two end-of-file (EOF) markers mark the end of a tape (EOT), and one end-of-file marker marks the end of a tape file.<p>
By default, the tape driver will write two End Of File (EOF) marks and rewind the tape when the device is closed after the last write.<p>
If the tape is not to be rewound it is positioned with the head in between the two tape marks, where the next write will over write the second end-of-file marker.<p>
All of the magnetic tape devices may be manipulated with the <a class="link-man" href="../1/mt">mt(1)</a> command.<p>
A number of <a class="link-man" href="../2/ioctl">ioctl(2)</a> operations are available on raw magnetic tape. Please see <b class="includes">&lt;<a class="link-includes">sys/mtio.h</a>&gt;</b> for their definitions.<p>
The manual pages for specific tape device drivers should list their particular capabilities and limitations.</div>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../1/dd">dd(1)</a>, <a class="link-man" href="../1/mt">mt(1)</a>, <a class="link-man" href="../1/pax">pax(1)</a>, <a class="link-man" href="../1/tar">tar(1)</a>, <a class="link-man" href="../4/st">st(4)</a>, <a class="link-man" href="../4/wt">wt(4)</a></div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> The <b class="name">mtio</b> manual appeared in <span class="unix">4.2BSD</span>.</div>
<div class="section">
<h1 id="x42554753">BUGS</h1> The status should be returned in a device independent format.<p>
If and when <span class="unix">NetBSD</span> is updated to deal with non-512 byte per sector disk media through the system buffer cache, perhaps a more sane tape interface can be implemented.</div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
January 14, 1999</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
<>

