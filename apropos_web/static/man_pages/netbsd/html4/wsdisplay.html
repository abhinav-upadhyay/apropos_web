<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="/static/man_pages/netbsd/style.css" type="text/css" media="all">
<title>
WSDISPLAY(4)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
WSDISPLAY(4)</td>
<td class="head-vol" align="center">
Kernel Interfaces Manual</td>
<td class="head-rtitle" align="right">
WSDISPLAY(4)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">wsdisplay</b> &#8212; <span class="desc">generic display device support in wscons</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="config">wsdisplay* at ega? console ?</b> (EGA display on ISA)<br>
<b class="config">wsdisplay* at vga? console ?</b> (VGA display on ISA or PCI)<br>
<b class="config">wsdisplay* at pcdisplay? console ?</b> (generic PC (ISA) display)<br>
<b class="config">wsdisplay* at tga? console ?</b> (DEC TGA display, alpha only)<br>
<b class="config">wsdisplay* at pfb? console ?</b> (PCI framebuffer, bebox only)<br>
<b class="config">wsdisplay0 at ofb? console ?</b> (Open Firmware framebuffer, macppc only)<br>
<b class="config">wsdisplay* at nextdisplay? console ?</b> (NeXT display)<br>
<b class="config">wsdisplay0 at smg0</b> (VAXstation small monochrome display)<br>
<b class="config">wsdisplay* at ... kbdmux N</b><p>
<br>
<b class="config">options WSDISPLAY_BORDER_COLOR=WSCOL_XXX</b><br>
<b class="config">options WSDISPLAY_CUSTOM_BORDER</b><br>
<b class="config">options WSDISPLAY_CUSTOM_OUTPUT</b><br>
<b class="config">options WSDISPLAY_DEFAULTSCREENS=N</b><br>
<b class="config">options WSDISPLAY_SCROLLSUPPORT</b></div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> The <b class="name">wsdisplay</b> driver is an abstraction layer for display devices within the <a class="link-man" href="../4/wscons">wscons(4)</a> framework. It attaches to the hardware specific display device driver and makes it available as a text terminal or graphics interface.<p>
A display device can have the ability to display characters on it (without the help of an X server), either directly by hardware or through software putting pixel data into the display memory. Such displays are called &#8220;emulating&#8221;, the <b class="name">wsdisplay</b> driver will connect a terminal emulation module and provide a tty-like software interface. In contrary, non-emulating displays can only be used by special programs like X servers.<p>
The <span class="emph">console</span> locator in the configuration line refers to the device's use as the output part of the operating system console. A device specification containing a positive value here will only match if the device is in use as the system console. (The console device selection in early system startup is not influenced.) This way, the console device can be connected to a known wsdisplay device instance. (Naturally, only &#8220;emulating&#8221; display devices are usable as console.)<p>
The <span class="emph">kbdmux</span> locator in the configuration line refers to the <a class="link-man" href="../4/wsmux">wsmux(4)</a> that will be used to get keyboard events. If this locator is -1 no mux will be used.<p>
The logical unit of an independent contents displayed on a display (sometimes referred to as &#8220;virtual terminal&#8221; ) is called a &#8220;screen&#8221; here. If the underlying device driver supports it, multiple screens can be used on one display. (As of this writing, only the <a class="link-man" href="../4/vga">vga(4)</a> and the VAX &#8220;smg&#8221; display drivers provide this ability.) Screens have different minor device numbers and separate tty instances. One screen possesses the &#8220;focus&#8221;, this means it is visible and its tty device will get the keyboard input. (In some cases &#45; if no screen is set up or if a screen was just deleted &#45; it is possible that no focus is present at all.) The focus can be switched by either special keyboard input (typically CTRL-ALT-F<i class="arg">n, STOP-F</i><i class="arg">n on Sun hardware, Command-F</i><i class="arg">n</i> on ADB keyboards ) or an ioctl command issued by a user program. Screens are created and deleted through the <i class="file">/dev/ttyEcfg</i> control device (preferably using the <a class="link-man" href="../8/wsconscfg">wsconscfg(8)</a> utility). Alternatively, the compile-time option <span class="define">WSDISPLAY_DEFAULTSCREENS</span>=<i class="arg">n</i> will also create (at autoconfiguration time) <i class="arg">n</i> initial screens of the display driver's default type with the system's default terminal emulator.<div class="subsection">
<h2 id="x4b65726e656c206f7074696f6e73">Kernel options</h2> The following kernel options are available to configure the behavior of the <b class="name">wsdisplay</b> driver:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="config">options WSDISPLAY_BORDER_COLOR=WSCOL_XXX</b></dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
Sets the border color at boot time. Possible values are defined in <i class="file">src/sys/dev/wscons/wsdisplayvar.h</i>. Defaults to &#8216;WSCOL_BLACK&#8217;.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="config">options WSDISPLAY_CUSTOM_BORDER</b></dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
Enables the <span class="define">WSDISPLAYIO_GBORDER</span> and <span class="define">WSDISPLAYIO_SBORDER</span> ioctls, which allow the customization of the border color from userland (after boot). See <a class="link-man" href="../8/wsconsctl">wsconsctl(8)</a>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="config">options WSDISPLAY_CUSTOM_OUTPUT</b></dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
Enables the <span class="define">WSDISPLAYIO_GMSGATTRS</span> and <span class="define">WSDISPLAYIO_SMSGATTRS</span> ioctls, which allow the customization of the console output and kernel messages from userland (after boot). See <a class="link-man" href="../8/wsconsctl">wsconsctl(8)</a>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="config">options WSDISPLAY_DEFAULTSCREENS=N</b></dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
Sets the number of virtual screens to allocate at boot time. Useful for small root filesystems where the <a class="link-man" href="../8/wsconscfg">wsconscfg(8)</a> utility is not wanted.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="config">options WSDISPLAY_SCROLLSUPPORT</b></dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
Enables scrolling support. The key combinations are <b class="cmd">LEFT SHIFT + PAGE UP</b> and <b class="cmd">LEFT SHIFT + PAGE DOWN</b> by default. Please note that this function may not work under the system console and is available depending on the framebuffer you are using.</dd>
</dl>
</div>
<div class="subsection">
<h2 id="x496f63746c73">Ioctls</h2> The following <a class="link-man" href="../2/ioctl">ioctl(2)</a> calls are provided by the <b class="name">wsdisplay</b> driver or by devices which use it. Their definitions are found in <b class="includes">&lt;<a class="link-includes">dev/wscons/wsconsio.h</a>&gt;</b>.<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">WSDISPLAYIO_GTYPE</span> (<code class="lit">int</code>)</dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
Retrieve the type of the display. The list of types is in <b class="includes">&lt;<a class="link-includes">dev/wscons/wsconsio.h</a>&gt;</b>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">WSDISPLAYIO_GINFO</span> (<code class="lit">struct wsdisplay_fbinfo</code>)</dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
Retrieve basic information about a framebuffer display. The returned structure is as follows:<p>
<pre style="margin-left: 5.00ex;" class="lit display">
struct wsdisplay_fbinfo { 
	u_int	height; 
	u_int	width; 
	u_int	depth; 
	u_int	cmsize; 
};</pre>
<p>
The <b class="var">height</b> and <b class="var">width</b> members are counted in pixels. The <b class="var">depth</b> member indicates the number of bits per pixel, and <b class="var">cmsize</b> indicates the number of color map entries accessible through <span class="define">WSDISPLAYIO_GETCMAP</span> and <span class="define">WSDISPLAYIO_PUTCMAP</span>. This call is likely to be unavailable on text-only displays.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">WSDISPLAYIO_GETCMAP</span> (<code class="lit">struct wsdisplay_cmap</code>)</dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
Retrieve the current color map from the display. This call needs the following structure set up beforehand:<p>
<pre style="margin-left: 5.00ex;" class="lit display">
struct wsdisplay_cmap { 
	u_int	index; 
	u_int	count; 
	u_char	*red; 
	u_char	*green; 
	u_char	*blue; 
};</pre>
<p>
The <b class="var">index</b> and <b class="var">count</b> members specify the range of color map entries to retrieve. The <b class="var">red</b>, <b class="var">green</b>, and <b class="var">blue</b> members should each point to an array of <b class="var">count</b> <code class="lit">u_char</code>s. On return, these will be filled in with the appropriate entries from the color map. On all displays that support this call, values range from 0 for minimum intensity to 255 for maximum intensity, even if the display does not use eight bits internally to represent intensity.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">WSDISPLAYIO_PUTCMAP</span> (<code class="lit">struct wsdisplay_cmap</code>)</dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
Change the display's color map. The argument structure is the same as for <span class="define">WSDISPLAYIO_GETCMAP</span>, but <b class="var">red</b>, <b class="var">green</b>, and <b class="var">blue</b> are taken as pointers to the values to use to set the color map. This call is not available on displays with fixed color maps.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">WSDISPLAYIO_GVIDEO</span> (<code class="lit">int</code>)</dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
Get the current state of the display's video output. Possible values are:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">WSDISPLAYIO_VIDEO_OFF</span></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
The display is blanked.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">WSDISPLAYIO_VIDEO_ON</span></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
The display is enabled.</dd>
</dl>
</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">WSDISPLAYIO_SVIDEO</span> (<code class="lit">int</code>)</dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
Set the state of the display's video output. See <span class="define">WSDISPLAYIO_GVIDEO</span> above for possible values.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">WSDISPLAYIO_GCURPOS</span> (<code class="lit">struct wsdisplay_curpos</code>)</dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
Retrieve the current position of the hardware cursor. The returned structure is as follows:<p>
<pre style="margin-left: 5.00ex;" class="lit display">
struct wsdisplay_curpos { 
        u_int x, y; 
};</pre>
<p>
The <b class="var">x</b> and <b class="var">y</b> members count the number of pixels right and down, respectively, from the top-left corner of the display to the hot spot of the cursor. This call is not available on displays without a hardware cursor.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">WSDISPLAYOP_SCURPOS</span> (<code class="lit">struct wsdisplay_curpos</code>)</dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
Set the current cursor position. The argument structure, and its semantics, are the same as for <span class="define">WSDISPLAYIO_GCURPOS</span>. This call is not available on displays without a hardware cursor.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">WSDISPLAYIO_GCURMAX</span> (<code class="lit">struct wsdisplay_curpos</code>)</dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
Retrieve the maximum size of cursor supported by the display. The <b class="var">x</b> and <b class="var">y</b> members of the returned structure indicate the maximum number of pixel rows and columns, respectively, in a hardware cursor on this display. This call is not available on displays without a hardware cursor.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">WSDISPLAYIO_GCURSOR</span> (<code class="lit">struct wsdisplay_cursor</code>)</dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
Retrieve some or all of the hardware cursor's attributes. The argument structure is as follows:<p>
<pre style="margin-left: 5.00ex;" class="lit display">
struct wsdisplay_cursor { 
	u_int	which; 
	u_int	enable; 
	struct wsdisplay_curpos pos; 
	struct wsdisplay_curpos hot; 
	struct wsdisplay_cmap cmap; 
	struct wsdisplay_curpos size; 
	u_char *image; 
	u_char *mask; 
}; 
<p>
</pre>
The <b class="var">which</b> member indicates which of the values the application requires to be returned. It should contain the logical OR of the following flags:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">WSDISPLAY_CURSOR_DOCUR</span></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
Get <b class="var">enable</b>, which indicates whether the cursor is currently displayed (non-zero) or not (zero).</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">WSDISPLAY_CURSOR_DOPOS</span></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
Get <b class="var">pos</b>, which indicates the current position of the cursor on the display, as would be returned by <span class="define">WSDISPLAYIO_GCURPOS</span>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">WSDISPLAY_CURSOR_DOHOT</span></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
Get <b class="var">hot</b>, which indicates the location of the &#8220;hot spot&#8221; within the cursor. This is the point on the cursor whose position on the display is treated as being the position of the cursor by other calls. Its location is counted in pixels from the top-right corner of the cursor.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">WSDISPLAY_CURSOR_DOCMAP</span></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
Get <b class="var">cmap</b>, which indicates the current cursor color map. Unlike in a call to <span class="define">WSDISPLAYIO_GETCMAP</span>, <b class="var">cmap</b> here need not have its <b class="var">index</b> and <b class="var">count</b> members initialized. They will be set to 0 and 2 respectively by the call. This means that <b class="var">cmap</b>.<b class="var">red</b>, <b class="var">cmap</b>.<b class="var">green</b>, and <b class="var">cmap</b>.<b class="var">blue</b> must each point to at least enough space to hold two <code class="lit">u_char</code>s.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">WSDISPLAY_CURSOR_DOSHAPE</span></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
Get <b class="var">size</b>, <b class="var">image</b>, and <b class="var">mask</b>. These are, respectively, the dimensions of the cursor in pixels, the bitmap of set pixels in the cursor and the bitmap of opaque pixels in the cursor. The format in which these bitmaps are returned, and hence the amount of space that must be provided by the application, are device-dependent.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">WSDISPLAY_CURSOR_DOALL</span></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
Get all of the above.</dd>
</dl>
<p>
The device may elect to return information that was not requested by the user, so those elements of <code class="lit">struct wsdisplay_cursor</code> which are pointers should be initialized to <span class="define">NULL</span> if not otherwise used. This call is not available on displays without a hardware cursor.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">WSDISPLAYIO_SCURSOR</span> (<code class="lit">struct wsdisplay_cursor</code>)</dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
Set some or all of the hardware cursor's attributes. The argument structure is the same as for <span class="define">WSDISPLAYIO_GCURSOR</span>. The <b class="var">which</b> member specifies which attributes of the cursor are to be changed. It should contain the logical OR of the following flags:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">WSDISPLAY_CURSOR_DOCUR</span></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
If <b class="var">enable</b> is zero, hide the cursor. Otherwise, display it.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">WSDISPLAY_CURSOR_DOPOS</span></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
Set the cursor's position on the display to <b class="var">pos</b>, the same as <span class="define">WSDISPLAYIO_SCURPOS</span>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">WSDISPLAY_CURSOR_DOHOT</span></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
Set the &#8220;hot spot&#8221; of the cursor, as defined above, to <b class="var">hot</b>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">WSDISPLAY_CURSOR_DOCMAP</span></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
Set some or all of the cursor color map based on <b class="var">cmap</b>. The <b class="var">index</b> and <b class="var">count</b> elements of <b class="var">cmap</b> indicate which color map entries to set, and the entries themselves come from <b class="var">cmap</b>.<b class="var">red</b>, <b class="var">cmap</b>.<b class="var">green</b>, and <b class="var">cmap</b>.<b class="var">blue</b>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">WSDISPLAY_CURSOR_DOSHAPE</span></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
Set the cursor shape from <b class="var">size</b>, <b class="var">image</b>, and <b class="var">mask</b>. See above for their meanings.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">WSDISPLAY_CURSOR_DOALL</span></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
Do all of the above.</dd>
</dl>
<p>
This call is not available on displays without a hardware cursor.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">WSDISPLAYIO_GMODE</span> (<code class="lit">u_int</code>)</dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
Get the current mode of the display. Possible results include:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">WSDISPLAYIO_MODE_EMUL</span></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
The display is in emulating (text) mode.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">WSDISPLAYIO_MODE_MAPPED</span></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
The display is in mapped (graphics) mode.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">WSDISPLAYIO_MODE_DUMBFB</span></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
The display is in mapped (frame buffer) mode.</dd>
</dl>
</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">WSDISPLAYIO_SMODE</span> (<code class="lit">u_int</code>)</dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
Set the current mode of the display. For possible arguments, see <span class="define">WSDISPLAYIO_GMODE</span>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">WSDISPLAYIO_LINEBYTES</span> (<code class="lit">u_int</code>)</dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
Get the number of bytes per row, which may be the same as the number of pixels.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">WSDISPLAYIO_GMSGATTRS</span> (<code class="lit">struct wsdisplay_msgattrs</code>)</dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
Get the attributes (colors and flags) used to print console messages, including separate fields for default output and kernel output. The returned structure is as follows:<p>
<pre style="margin-left: 5.00ex;" class="lit display">
struct wsdisplay_msgattrs { 
	int default_attrs, default_bg, default_fg; 
	int kernel_attrs, kernel_bg, kernel_fg; 
};</pre>
<p>
The <b class="var">default_attrs</b> and <b class="var">kernel_attrs</b> variables are a combination of <b class="var">WSATTR_*</b> bits, and specify the attributes used to draw messages. The <b class="var">default_bg</b>, <b class="var">default_fg</b>, <b class="var">kernel_bg</b> and <b class="var">kernel_fg</b> variables specify the colors used to print messages, being &#8216;_bg&#8217; for the background and &#8216;_fg&#8217; for the foreground; their values are one of all the <b class="var">WSCOL_*</b> macros available.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">WSDISPLAYIO_SMSGATTRS</span> (<code class="lit">struct wsdisplay_msgattrs</code>)</dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
Set the attributes (colors and flags) used to print console messages, including separate fields for default output and kernel output. The argument structure is the same as for <span class="define">WSDISPLAYIO_GMSGATTRS</span>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">WSDISPLAYIO_GBORDER</span> (<code class="lit">u_int</code>)</dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
Retrieve the color of the screen border. This number corresponds to an ANSI standard color.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">WSDISPLAYIO_SBORDER</span> (<code class="lit">u_int</code>)</dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
Set the color of the screen border, if applicable. This number corresponds to an ANSI standard color. Not all drivers support this feature.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">WSDISPLAYIO_GETWSCHAR</span> (<code class="lit">struct wsdisplay_char</code>)</dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
Gets a single character from the screen, specified by its position. The structure used is as follows:<p>
<pre style="margin-left: 5.00ex;" class="lit display">
struct wsdisplay_char { 
	int row, col; 
	uint16_t letter; 
	uint8_t background, foreground; 
	char flags; 
};</pre>
<p>
The <b class="var">row</b> and <b class="var">col</b> parameters are used as input; the rest of the structure is filled by the ioctl and is returned to you. <b class="var">letter</b> is the ASCII code of the letter found at the specified position, <b class="var">background</b> and <b class="var">foreground</b> are its colors and <b class="var">flags</b> is a combination of &#8216;WSDISPLAY_CHAR_BRIGHT&#8217; and/or &#8216;WSDISPLAY_CHAR_BLINK&#8217;.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">WSDISPLAYIO_PUTWSCHAR</span> (<code class="lit">struct wsdisplay_char</code>)</dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
Puts a character on the screen. The structure has the same meaning as described in <span class="define">WSDISPLAY_GETWSCHAR</span>, although all of its fields are treated as input.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">WSDISPLAYIO_SSPLASH</span> (<code class="lit">u_int</code>)</dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
Toggle the splash screen. This call is only available with the <span class="define">SPLASHSCREEN</span> kernel option.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">WSDISPLAYIO_SPROGRESS</span> (<code class="lit">u_int</code>)</dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
Update the splash animation. This call is only available with the <span class="define">SPLASHSCREEN</span> and <span class="define">SPLASHSCREEN_PROGRESS</span> kernel options.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">WSDISPLAYIO_GET_EDID</span> (<code class="lit">struct wsdisplay_edid_info</code>)</dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
Retrieve EDID data from a driver.<p>
<pre style="margin-left: 5.00ex;" class="lit display">
struct wsdisplayio_edid_info { 
	uint32_t buffer_size; 
	uint32_t data_size; 
	void *edid_data; 
};</pre>
The caller is responsible for allocating a buffer of at least 128 bytes (the minimum size of an EDID block) and set data_size to its size. If the EDID block is bigger the call will fail with <span class="errno">EAGAIN</span> and the driver will set data_size to the required buffer size. Otherwise the EDID block will be written into the buffer pointed at by edid_data and data_size will be set to the number of bytes written.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">WSDISPLAYIO_SETVERSION</span> (<code class="lit">int</code>)</dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
Set the wscons_event protocol version. The default is 0 for binary compatibility. The latest version is always available as <span class="define">WSDISPLAYIO_EVENT_VERSION</span>, and is currently 1. All new code should use a call similar to the below to ensure the correct version is returned.<p>
<pre style="margin-left: 5.00ex;" class="lit display">
int ver = WSDISPLAY_EVENT_VERSION; 
if (ioctl(fd, WSDISPLAYIO_SETVERSION, &amp;ver) == -1) 
    err(EXIT_FAILURE, "cannot set version");</pre>
</dd>
</dl>
</div>
</div>
<div class="section">
<h1 id="x46494c4553">FILES</h1><ul style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-item">
<li class="list-item" style="margin-top: 1.00em;">
<i class="file">/dev/ttyE*</i> Terminal devices (per screen).</li>
<li class="list-item" style="margin-top: 1.00em;">
<i class="file">/dev/ttyEcfg</i> Control device.</li>
<li class="list-item" style="margin-top: 1.00em;">
<i class="file">/dev/ttyEstat</i> Status device.</li>
<li class="list-item" style="margin-top: 1.00em;">
<i class="file">/usr/include/dev/wscons/wsconsio.h</i></li>
</ul>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../2/ioctl">ioctl(2)</a>, <a class="link-man" href="../4/pcdisplay">pcdisplay(4)</a>, <a class="link-man" href="../4/tty">tty(4)</a>, <a class="link-man" href="../4/vga">vga(4)</a>, <a class="link-man" href="../4/wscons">wscons(4)</a>, <a class="link-man" href="../8/wsconscfg">wsconscfg(8)</a>, <a class="link-man" href="../8/wsconsctl">wsconsctl(8)</a>, <a class="link-man" href="../8/wsfontload">wsfontload(8)</a>, <a class="link-man" href="../9/wsdisplay">wsdisplay(9)</a></div>
<div class="section">
<h1 id="x42554753">BUGS</h1> The <b class="name">wsdisplay</b> code currently limits the number of screens on one display to 8.<p>
The terms &#8220;wscons&#8221; and &#8220;wsdisplay&#8221; are not cleanly distinguished in the code and in manual pages.<p>
&#8220;non-emulating&#8221; display devices are not tested.</div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
October 1, 2014</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
</html>

