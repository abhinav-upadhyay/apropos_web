<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="/static/man_pages/netbsd/style.css" type="text/css" media="all">
<title>
SLHCI(4)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
SLHCI(4)</td>
<td class="head-vol" align="center">
Kernel Interfaces Manual</td>
<td class="head-rtitle" align="right">
SLHCI(4)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">slhci</b> &#8212; <span class="desc">Cypress/ScanLogic SL811HS USB Host Controller driver</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1><div class="subsection">
<h2 id="x616d696761">amiga</h2> <b class="config">slhci*   at zbus?</b></div>
<div class="subsection">
<h2 id="x50434d434941202843462920636f6e74726f6c6c657273">PCMCIA (CF) controllers</h2> <b class="config">slhci*   at pcmcia? function ?</b><br>
<b class="config">usb*     at slhci?</b></div>
<div class="subsection">
<h2 id="x49534120636f6e74726f6c6c657273">ISA controllers</h2> <b class="config">slhci*   at isa? port ? irq ?</b><br>
<b class="config">usb*     at slhci?</b></div>
<div class="subsection">
<h2 id="x7836386b">x68k</h2> <b class="config">slhci0   at intio0 addr 0xece380 intr 251</b><br>
<b class="config">slhci1   at intio0 addr 0xeceb80 intr 250</b><br>
<b class="config">usb*     at slhci?</b><p>
<br>
<b class="config">options SLHCI_TRY_LSVH</b></div>
</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> The <b class="name">slhci</b> driver provides support for Cypress/ScanLogic SL811HS USB Host Controller.<p>
The driver supports control, bulk, and interrupt transfers but not isochronous (audio), which cannot be supported by this chip without perfectly reliable 1ms interrupts. USB is polled and this chip requires the driver to initiate all transfers. The driver interrupts at least once every ms when a device is attached even if no data is transferred. The driver polls the chip when the transfer is expected to be completed soon; with maximum use of the bus, the driver will not exit for most of each ms. Use of this driver can easily have a significant performance impact on any system.<p>
The chip is unreliable in some conditions, possibly due in part to difficulty meeting timing restrictions (this is likely to be worse on multiprocessor systems). Unexpected device behavior may trigger some problems;  power cycling externally powered devices may help resolve persistent problems. Detection of invalid chip state will usually cause the driver to halt, however is recommended that all data transfers be verified. Data corruption due to controller error will not be detected automatically. Unmounting and remounting a device is necessary to prevent use of cached data.<p>
The driver currently will start the next incoming packet before copying in the previous packet but will not copy the next outgoing packet before the previous packet is transferred. Reading or writing the chip is about the same speed as the USB bus, so this means that one outgoing transfer is half the speed of one incoming transfer and two outgoing transfers are needed to use the full available bandwidth.<p>
All revisions of the SL811HS have trouble with low speed devices attached to some (likely most) hubs. Low speed traffic via hub is not allowed by default, but can be enabled with <b class="config">options SLHCI_TRY_LSVH</b> in the kernel config file or by setting the <b class="var">slhci_try_lsvh</b> variable to non-zero using <a class="link-man" href="../4/ddb">ddb(4)</a> or <a class="link-man" href="../1/gdb">gdb(1)</a>.<p>
Many USB keyboards have built in hubs and may be low speed devices. All USB mice I have seen are low speed devices, however a serial mouse should be usable on a hub with a full speed Serial-USB converter. A PS2-USB keyboard and mouse converter is likely to be a single low speed device.<p>
Some hardware using this chip does not provide the USB minimum 100mA current, which could potentially cause problems even with externally powered hubs. The system can allow excess power use in some other cases as well. Some signs of excess power draw may cause the driver to halt, however this may not stop the power draw. To be safe verify power use and availability before connecting any device.</div>
<div class="section">
<h1 id="x4841524457415245">HARDWARE</h1> Hardware supported by the <b class="name">slhci</b> driver includes:<ul style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 5.00ex;" class="list list-item">
<li class="list-item" style="margin-top: 1.00em;">
Ratoc <span class="emph">CFU1U</span></li>
<li class="list-item" style="margin-top: 1.00em;">
Nereid Ethernet/USB/Memory board</li>
<li class="list-item" style="margin-top: 1.00em;">
Thylacine USB Host Controller</li>
</ul>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../1/config">config(1)</a>, <a class="link-man" href="../4/isa">isa(4)</a>, <a class="link-man" href="../4/pcmcia">pcmcia(4)</a>, <a class="link-man" href="../4/usb">usb(4)</a><p>
<span class="ref"><span class="ref-title">Cypress SL811HS datasheet, errata, and application note</span>, <a class="link-ref" href="http://www.cypress.com">http://www.cypress.com</a>.</span></div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> The <b class="name">slhci</b> driver appeared in <span class="unix">NetBSD&#160;2.0</span> and was rewritten in <span class="unix">NetBSD&#160;5.0</span>.</div>
<div class="section">
<h1 id="x415554484f5253">AUTHORS</h1> <span class="author">Tetsuya Isaki</span> &#60;isaki@NetBSD.org&#62; <span class="author">Matthew Orgass</span></div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
April 28, 2013</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
</html>

