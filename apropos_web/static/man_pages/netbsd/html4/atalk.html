<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="../style.css" type="text/css" media="all">
<title>
ATALK(4)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
ATALK(4)</td>
<td class="head-vol" align="center">
Kernel Interfaces Manual</td>
<td class="head-rtitle" align="right">
ATALK(4)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">atalk</b> &#8212; <span class="desc">AppleTalk Protocol Family</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="includes">#include &lt;<a class="link-includes">sys/types.h</a>&gt;</b><br>
<b class="includes">#include &lt;<a class="link-includes">netatalk/at.h</a>&gt;</b></div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> The AppleTalk Protocol Family provides presentation layer support for the AppleTalk Datagram Delivery Protocol (DDP), using the SOCK_DGRAM socket type. In addition, access to in-kernel AppleTalk routing tables and network interface configurations is provided.<p>
The AppleTalk Protocol Suite provides support for five kinds of physical media: LocalTalk (230kbps wire-or'd serial), Ethernet, FDDI, Token Ring, and asynchronous serial connections (using either AppleTalk Remote Access (ARA) or PPP ). Currently, <span class="unix">NetBSD</span>'s AppleTalk implementation supports Ethernet, FDDI, and Token Ring.<p>
AppleTalk packets are encapsulated on the Ethernet using the EtherTalk Link Access Protocol (ELAP). Local network address resolution is handled using the AppleTalk Address Resolution Protocol (AARP). Neither of these protocols is exposed to user-mode applications.</div>
<div class="section">
<h1 id="x41444452455353494e47">ADDRESSING</h1> AppleTalk addresses are three byte quantities, stored in network byte order. The include file <b class="includes">&lt;<a class="link-includes">netatalk/at.h</a>&gt;</b> defines the AppleTalk address format.<p>
Sockets in the AppleTalk protocol family use the following address structure:<p>
<pre style="margin-left: 5.00ex;" class="lit display">
struct sockaddr_at { 
	uint8_t	sat_len; 
	sa_family_t	sat_family; 
	uint8_t	sat_port; 
	struct at_addr	sat_addr; 
	union { 
		struct netrange r_netrange; 
		char		r_zero[8]; 
	} sat_range; 
};</pre>
<p>
The port of a socket may be set with <a class="link-man" href="../2/bind">bind(2)</a>. The node for <a class="link-man" href="../2/bind">bind(2)</a> must always be <span class="define">ATADDR_ANYNODE</span>: &#8220;this node&#8221;. The net must be <span class="define">ATADDR_ANYNET</span>. <span class="define">ATADDR_ANYNET</span> corresponds to the machine's &#8220;primary&#8221; address (the first configured). The port of a socket and the primary address are returned with <a class="link-man" href="../2/getsockname">getsockname(2)</a>.</div>
<div class="section">
<h1 id="x50524f544f434f4c53">PROTOCOLS</h1> The AppleTalk protocol family comprises the DDP datagram delivery protocol, AppleTalk Data Stream Protocol (ADSP), AppleTalk Echo Protocol (AEP), AppleTalk Filing Protocol (AFP), AppleTalk Session Protocol (ASP), AppleTalk Transaction Protocol (ATP), Name Binding Protocol (NBP), Printer Access Protocol (PAP), and Zone Information Protocol (ZIP).<p>
DDP is implemented in the kernel as <span class="define">SOCK_DGRAM</span> sockets in the <span class="define">AF_APPLETALK</span> address family. <span class="unix">NetBSD</span> implements all other AppleTalk protocols using the Netatalk package. Netatalk implements all functions except for ADSP and an AFP client. AEP, NBP, and ZIP services are provided by the atalkd daemon. ASP and ATP services are provided by a user library. PAP and AFP services are provided by user programs and daemons.</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../2/bind">bind(2)</a>, <a class="link-man" href="../2/getsockname">getsockname(2)</a>, <a class="link-man" href="../4/options">options(4)</a><p>
<span class="ref"><span class="ref-auth">Gursharan S. Sidhu</span>, <span class="ref-auth">Richard F. Andrews</span>, and <span class="ref-auth">Alan B. Oppenheimer</span>, <i class="ref-book">Inside AppleTalk, second edition</i>.</span></div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
November 14, 1997</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
</html>

