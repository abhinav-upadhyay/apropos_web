<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/../4/strict.dtd">
>
<head>
<meta http-equiv="Content-Type" content="te../; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="../../style.css" type="text/css" media="all">
<title>
LEDS(4) (Sun3)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
LEDS(4)</td>
<td class="head-vol" align="center">
Kernel Interfaces Manual (Sun3)</td>
<td class="head-rtitle" align="right">
LEDS(4)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">leds</b> &#8212; <span class="desc">sun3 diagnostic Light Emitting Diodes driver</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="includes">#include &lt;<a class="link-includes">machine/leds.h</a>&gt;</b></div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> With the exception of the Sun 3/80, all sun3 machines are equipped a diagnostic display of eight Light Emitting Diodes (LEDs), located on the back of the system unit. The Sun 3/80 has a single LED, which is located on the front panel.<p>
The kernel changes the display during periods of idle processor activity according to a stored sequential pattern list. The <i class="file">/dev/leds</i> interface provides a way of manipulating the pattern list via simple file I/O.<p>
The structure of the file is as follows:<p>
<pre style="margin-left: 0.00ex;" class="lit display">
struct led_patterns { 
        u_char divisor; 
        u_char patlen; 
        u_char pat[256]; 
};</pre>
<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">divisor</span></dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
The number of idle periods to wait before switching to the next pattern in the array.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">patlen</span></dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
The number of patterns stored in the array.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">pat</span></dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
The array of patterns to display.</dd>
</dl>
<p>
When a clock interrupt occurs while the processor is idle, a pattern countdown timer is decremented. When the countdown timer reaches zero it is reset with the <span class="symb">divisor</span> value and the next pattern in the array is selected and displayed.<p>
Each 8-bit pattern describes the state of the diagnostic LEDs. With the exception of the 3/80, a set bit in a pattern indicates that its corresponding LED should be extinguished, while a reset bit indicates an LED to be illuminated. On the 3/80 the polarity of the bits is reversed and only the lowest order bit is used.</div>
<div class="section">
<h1 id="x46494c4553">FILES</h1><dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/dev/leds</i></dt>
<dd class="list-tag" style="margin-left: 9.00ex;">
</dd>
</dl>
</div>
<div class="section">
<h1 id="x4558414d504c4553">EXAMPLES</h1> The following example uses <a class="link-man" href="../../1/awk">awk(1)</a> to display the repeating animation of a single lit LED scrolling from one end of the display to the other, using six clock ticks between each update.<p>
<div style="margin-left: 5.00ex;" class="display">
# echo 5 8 254 253 251 247 239 223 191 127 |<br>
  awk '{ for (i=1;i&#8804;NF;i++) printf("%c",$i+0); }' &gt; /dev/leds</div>
</div>
<div class="section">
<h1 id="x4552524f5253">ERRORS</h1> An I/O transfer to <i class="file">/dev/leds</i> will complete successfully unless:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">EIO</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
A read or write starting beyond the end of the file was attempted.</dd>
</dl>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../../6/ppt">ppt(6)</a></div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> <i class="file">/dev/leds</i> first appeared in <span class="unix">NetBSD&#160;1.2</span>.</div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
March 2, 1996</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
<>

