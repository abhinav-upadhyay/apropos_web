<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="/static/man_pages/netbsd/style.css" type="text/css" media="all">
<title>
CCD(4)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
CCD(4)</td>
<td class="head-vol" align="center">
Kernel Interfaces Manual</td>
<td class="head-rtitle" align="right">
CCD(4)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">ccd</b> &#8212; <span class="desc">Concatenated disk driver</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="config">pseudo-device ccd</b></div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> The <b class="name">ccd</b> driver provides the capability of combining one or more disks/partitions into one virtual disk.<p>
This document assumes that you're familiar with how to generate kernels, how to properly configure disks and pseudo-devices in a kernel configuration file, and how to partition disks.<p>
Note that the &#8216;raw&#8217; partitions of the disks <i class="file">must not</i> be combined. Each component partition should be offset at least one cylinder from the beginning of the component disk. This avoids potential conflicts between the component disk's disklabel and the <b class="name">ccd</b>'s disklabel. The kernel will only allow component partitions of type <span class="define">FS_CCD</span>. But for now, it allows partition of all types since some port lacks support of an on-disk BSD disklabel. The partition of <span class="define">FS_UNUSED</span> may be rejected because device driver of component disk will refuse it.<p>
In order to compile in support for the <b class="name">ccd</b>, you must add a line similar to the following to your kernel configuration file:<p>
<pre style="margin-left: 5.00ex;" class="lit display">
pseudo-device	ccd	# concatenated disk devices</pre>
<p>
The <b class="name">ccd</b>s are allocated dynamically as needed.<p>
A <b class="name">ccd</b> may be either serially concatenated or interleaved. To serially concatenate the partitions, specify the interleave factor of 0.<p>
If a <b class="name">ccd</b> is interleaved correctly, a &#8220;striping&#8221; effect is achieved, which can increase performance. Since the interleave factor is expressed in units of <span class="define">DEV_BSIZE</span>, one must account for sector sizes other than <span class="define">DEV_BSIZE</span> in order to calculate the correct interleave. The kernel will not allow an interleave factor less than the size of the largest component sector divided by <span class="define">DEV_BSIZE</span>.<p>
Note that best performance is achieved if all component disks have the same geometry and size. Optimum striping cannot occur with different disk types.<p>
Also note that the total size of concatenated disk may vary depending on the interleave factor even if the exact same components are concatenated. And an old on-disk disklabel may be read after interleave factor change. As a result, the disklabel may contain wrong partition geometry and will cause an error when doing I/O near the end of concatenated disk.<p>
There is a run-time utility that is used for configuring <b class="name">ccd</b>s. See <a class="link-man" href="../8/ccdconfig">ccdconfig(8)</a> for more information.</div>
<div class="section">
<h1 id="x5741524e494e4753">WARNINGS</h1> If just one (or more) of the disks in a non-mirrored <b class="name">ccd</b> fails, the entire file system will be lost.</div>
<div class="section">
<h1 id="x46494c4553">FILES</h1><dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/dev/{,r}ccd*</i></dt>
<dd class="list-tag" style="margin-left: 13.00ex;">
<b class="name">ccd</b> device special files.</dd>
</dl>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../1/config">config(1)</a>, <a class="link-man" href="../8/ccdconfig">ccdconfig(8)</a>, <a class="link-man" href="../8/fsck">fsck(8)</a>, <a class="link-man" href="../8/MAKEDEV">MAKEDEV(8)</a>, <a class="link-man" href="../8/mount">mount(8)</a>, <a class="link-man" href="../8/newfs">newfs(8)</a></div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> The concatenated disk driver was originally written at the University of Utah.</div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
November 30, 2013</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
</html>

