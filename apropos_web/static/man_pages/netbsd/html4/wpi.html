<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="../style.css" type="text/css" media="all">
<title>
WPI(4)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
WPI(4)</td>
<td class="head-vol" align="center">
Kernel Interfaces Manual</td>
<td class="head-rtitle" align="right">
WPI(4)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">wpi</b> &#8212; <span class="desc">Intel PRO/Wireless 3945ABG IEEE 802.11a/b/g wireless network driver</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="config">wpi* at pci? dev ? function ?</b></div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> The <b class="name">wpi</b> driver provides support for Intel PRO/Wireless 3945ABG Mini PCI Express network adapters.<p>
These are the modes the <b class="name">wpi</b> driver can operate in:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
BSS mode</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Also known as <span class="emph">infrastructure</span> mode, this is used when associating with an access point, through which all traffic passes. This mode is the default.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
monitor mode</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
In this mode the driver is able to receive packets without associating with an access point. This disables the internal receive filter and enables the card to capture packets from networks to which it wouldn't normally have access, or to scan for access points.</dd>
</dl>
<p>
<b class="name">wpi</b> supports software WEP. Wired Equivalent Privacy (WEP) is the de facto encryption standard for wireless networks. It can be typically configured in one of three modes: no encryption; 40-bit encryption; or 104-bit encryption. Unfortunately, due to serious weaknesses in the WEP protocol it is strongly recommended that it not be used as the sole mechanism to secure wireless communication. WEP is not enabled by default.</div>
<div class="section">
<h1 id="x434f4e46494755524154494f4e">CONFIGURATION</h1> The <b class="name">wpi</b> driver can be configured at runtime with <a class="link-man" href="../8/ifconfig">ifconfig(8)</a> using the following parameters:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">bssid</b> <i class="arg">bssid</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Set the desired BSSID.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;bssid</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Unset the desired BSSID. The interface will automatically select a BSSID in this mode, which is the default.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">chan</b> <i class="arg">n</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Set the channel (radio frequency) to be used by the driver based on the given channel ID <i class="arg">n</i>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;chan</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Unset the desired channel to be used by the driver. The driver will automatically select a channel in this mode, which is the default.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">media</b> <i class="arg">media</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
The <b class="name">wpi</b> driver supports the following <i class="arg">media</i> types:<p>
<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">autoselect</b></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
Enable autoselection of the media type and options.</dd>
</dl>
</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">mediaopt</b> <i class="arg">opts</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
The <b class="name">wpi</b> driver supports the following media options:<p>
<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">monitor</b></dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
Select monitor mode.</dd>
</dl>
</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;mediaopt</b> <i class="arg">opts</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Disable the specified media options on the driver and return it to the default mode of operation (BSS).</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">mode</b> <i class="arg">mode</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
The <b class="name">wpi</b> driver supports the following modes:<p>
<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">11a</b></dt>
<dd class="list-tag" style="margin-left: 3.00ex;">
Force 802.11a operation.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">11b</b></dt>
<dd class="list-tag" style="margin-left: 3.00ex;">
Force 802.11b operation.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">11g</b></dt>
<dd class="list-tag" style="margin-left: 3.00ex;">
Force 802.11g operation.</dd>
</dl>
</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">nwid</b> <i class="arg">id</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Set the network ID. The <i class="arg">id</i> can either be any text string up to 32 characters in length, or a series of hexadecimal digits up to 64 digits. An empty <i class="arg">id</i> string allows the interface to connect to any available access points. By default the <b class="name">wpi</b> driver uses an empty string. Note that network ID is synonymous with Extended Service Set ID (ESSID).</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">nwkey</b> <i class="arg">key</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Enable WEP encryption using the specified <i class="arg">key</i>. The <i class="arg">key</i> can either be a string, a series of hexadecimal digits (preceded by &#8216;0x&#8217;), or a set of keys of the form &#8220;n:k1,k2,k3,k4&#8221;, where &#8216;n&#8217; specifies which of the keys will be used for transmitted packets, and the four keys, &#8220;k1&#8221; through &#8220;k4&#8221;, are configured as WEP keys. If a set of keys is specified, a comma (&#8216;,&#8217;) within the key must be escaped with a backslash. Note that if multiple keys are used, their order must be the same within the network. <b class="name">wpi</b> is capable of using both 40-bit (5 characters or 10 hexadecimal digits) or 104-bit (13 characters or 26 hexadecimal digits) keys.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;nwkey</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Disable WEP encryption. This is the default mode of operation.</dd>
</dl>
</div>
<div class="section">
<h1 id="x46494c4553">FILES</h1> The driver needs at least version 2.14.4 of the following firmware file, which is loaded when an interface is brought up:<p>
<dl style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 5.00ex;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/libdata/firmware/if_wpi/iwlwifi-3945.ucode</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
</dd>
</dl>
</div>
<div class="section">
<h1 id="x4558414d504c4553">EXAMPLES</h1><pre style="margin-left: 5.00ex;" class="lit display">
# ifconfig wpi0 nwkey 0x1deadbeef1</pre>
<p>
Return wpi0 to its default settings:<p>
<pre style="margin-left: 5.00ex;" class="lit display">
# ifconfig wpi0 -bssid -chan media autoselect &#92; 
	nwid "" -nwkey</pre>
<p>
Join an existing BSS network, &#8220;my_net&#8221;:<p>
<pre style="margin-left: 5.00ex;" class="lit display">
# ifconfig wpi0 192.168.1.1 netmask 0xffffff00 nwid my_net</pre>
</div>
<div class="section">
<h1 id="x444941474e4f5354494353">DIAGNOSTICS</h1><dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-diag">
<dt class="list-diag" style="margin-top: 1.00em;">
<b class="diag">wpi%d: device timeout</b></dt>
<dd class="list-diag">
A frame dispatched to the hardware for transmission did not complete in time. The driver will reset the hardware. This should not happen.</dd>
<dt class="list-diag" style="margin-top: 1.00em;">
<b class="diag">wpi%d: fatal firmware error</b></dt>
<dd class="list-diag">
For some reason, the firmware crashed. The driver will reset the hardware. This should not happen.</dd>
<dt class="list-diag" style="margin-top: 1.00em;">
<b class="diag">wpi%d: Radio transmitter is off</b></dt>
<dd class="list-diag">
The radio transmitter is off and thus no packet can go out. The driver will reset the hardware. Make sure the laptop radio switch is on.</dd>
<dt class="list-diag" style="margin-top: 1.00em;">
<b class="diag">wpi%d: could not read firmware file</b></dt>
<dd class="list-diag">
For some reason, the driver was unable to read the firmware image from the filesystem. The file might be missing or corrupted.</dd>
<dt class="list-diag" style="margin-top: 1.00em;">
<b class="diag">wpi%d: firmware file too short: %d bytes</b></dt>
<dd class="list-diag">
The firmware image is corrupted and can't be loaded into the adapter.</dd>
<dt class="list-diag" style="margin-top: 1.00em;">
<b class="diag">wpi%d: could not load firmware</b></dt>
<dd class="list-diag">
An attempt to load the firmware into the adapter failed. The driver will reset the hardware.</dd>
</dl>
</div>
<div class="section">
<h1 id="x4e4f544553">NOTES</h1> On some laptops the radio transmitter button must be pushed twice to get the driver working, or you will get a <i class="file">wpi%d: fatal firmware error</i> when the interface will be set to up</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../4/arp">arp(4)</a>, <a class="link-man" href="../4/ifmedia">ifmedia(4)</a>, <a class="link-man" href="../4/intro">intro(4)</a>, <a class="link-man" href="../4/netintro">netintro(4)</a>, <a class="link-man" href="../4/pci">pci(4)</a>, <a class="link-man" href="../8/ifconfig">ifconfig(8)</a>, <a class="link-man" href="../9/firmload">firmload(9)</a><p>
<span class="ref"><span class="ref-title">The IPW Web Page</span>, <a class="link-ref" href="http://damien.bergamini.free.fr/ipw/">http://damien.bergamini.free.fr/ipw/</a>.</span></div>
<div class="section">
<h1 id="x415554484f5253">AUTHORS</h1> The <b class="name">wpi</b> driver was originally written by <span class="author">Damien Bergamini</span> &#60;<a class="link-mail" href="mailto:damien@openbsd.org">damien@openbsd.org</a>&#62;. <span class="unix">NetBSD</span> porting was done by <span class="author">Jean-Baptiste Campesato</span> &#60;<a class="link-mail" href="mailto:camjelemon@gmail.com">camjelemon@gmail.com</a>&#62;.</div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
October 14, 2012</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
</html>

