<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="../style.css" type="text/css" media="all">
<title>
PTHREAD_BARRIER(3)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
PTHREAD_BARRIER(3)</td>
<td class="head-vol" align="center">
Library Functions Manual</td>
<td class="head-rtitle" align="right">
PTHREAD_BARRIER(3)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">pthread_barrier</b> &#8212; <span class="desc">barrier interface</span></div>
<div class="section">
<h1 id="x4c494252415259">LIBRARY</h1> <span class="lib">POSIX Threads Library (libpthread, &#45;lpthread)</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="includes">#include &lt;<a class="link-includes">pthread.h</a>&gt;</b><p>
<i class="ftype">int</i><br>
<b class="fname">pthread_barrier_init</b>(<i class="farg" style="white-space:nowrap;">pthread_barrier_t * restrict barrier</i>, <i class="farg" style="white-space:nowrap;">const pthread_barrierattr_t * restrict attr</i>, <i class="farg" style="white-space:nowrap;">unsigned int count</i>);<p>
<i class="ftype">int</i><br>
<b class="fname">pthread_barrier_destroy</b>(<i class="farg" style="white-space:nowrap;">pthread_barrier_t *barrier</i>);<p>
<i class="ftype">int</i><br>
<b class="fname">pthread_barrier_wait</b>(<i class="farg" style="white-space:nowrap;">pthread_barrier_t *barrier</i>);</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> The <b class="fname">pthread_barrier_init</b>() function creates a new barrier with attributes <i class="farg">attr</i> and <i class="farg">count</i>. The <i class="farg">count</i> parameter indicates the number of threads which will participate in the barrier. The <a class="link-man" href="../3/pthread_barrierattr_init">pthread_barrierattr_init(3)</a> function may be used to specify the attributes supplied in <i class="farg">attr</i>. If <i class="farg">attr</i> is <span class="define">NULL</span>, the default attributes are used. Barriers are most commonly used in the decomposition of parallel loops.<p>
The <b class="fname">pthread_barrier_destroy</b>() function causes the resources allocated to <i class="farg">barrier</i> to be released. No threads should be blocked on <i class="farg">barrier</i>.<p>
The <b class="fname">pthread_barrier_wait</b>() function causes the current thread to wait on the barrier specified. Once as many threads as specified by the <i class="farg">count</i> parameter to the corresponding <b class="fname">pthread_barrier_init</b>() call have called <b class="fname">pthread_barrier_wait</b>(), all threads will wake up, return from their respective <b class="fname">pthread_barrier_wait</b>() calls and continue execution.</div>
<div class="section">
<h1 id="x52455455524e2056414c554553">RETURN VALUES</h1> If successful, <b class="fname">pthread_barrier_init</b>() will return zero and put the new barrier id into <i class="farg">barrier</i>, otherwise an error number will be returned to indicate the error.<p>
If successful, <b class="fname">pthread_barrier_destroy</b>() will return zero. Otherwise an error value will be returned.<p>
If successful, <b class="fname">pthread_barrier_wait</b>() will return zero for all waiting threads except for one. One thread will receive status <span class="define">PTHREAD_BARRIER_SERIAL_THREAD</span>, which is intended to indicate that this thread may be used to update shared data. It is the responsibility of this thread to insure the visibility and atomicity of any updates to shared data with respect to the other threads participating in the barrier. In the case of failure, an error value will be returned.</div>
<div class="section">
<h1 id="x4552524f5253">ERRORS</h1> The <b class="fname">pthread_barrier_init</b>() function may fail if:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">EINVAL</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The value specified by <i class="farg">count</i> is zero or <i class="farg">attr</i> is invalid.</dd>
</dl>
<p>
The <b class="fname">pthread_barrier_destroy</b>() function may fail if:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">EBUSY</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The <i class="farg">barrier</i> still has active threads associated with it.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">EINVAL</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The value specified by <i class="farg">barrier</i> is invalid.</dd>
</dl>
<p>
The <b class="fname">pthread_barrier_wait</b>() function may fail if:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">EINVAL</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The value specified by <i class="farg">barrier</i> is invalid.</dd>
</dl>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../3/pthread_barrierattr">pthread_barrierattr(3)</a>, <a class="link-man" href="../3/pthread_cond">pthread_cond(3)</a>, <a class="link-man" href="../3/pthread_mutex">pthread_mutex(3)</a></div>
<div class="section">
<h1 id="x5354414e4441524453">STANDARDS</h1> These functions conform to IEEE Std 1003.1-2001 (&#8220;POSIX.1&#8221;).</div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
July 8, 2010</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
</html>

