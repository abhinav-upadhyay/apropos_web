<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="../style.css" type="text/css" media="all">
<title>
MQ_NOTIFY(3)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
MQ_NOTIFY(3)</td>
<td class="head-vol" align="center">
Library Functions Manual</td>
<td class="head-rtitle" align="right">
MQ_NOTIFY(3)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">mq_notify</b> &#8212; <span class="desc">notify process that a message is available (REALTIME)</span></div>
<div class="section">
<h1 id="x4c494252415259">LIBRARY</h1> <span class="lib">POSIX Real&#45;time Library (librt, &#45;lrt)</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="includes">#include &lt;<a class="link-includes">mqueue.h</a>&gt;</b><p>
<i class="ftype">int</i><br>
<b class="fname">mq_notify</b>(<i class="farg" style="white-space:nowrap;">mqd_t mqdes</i>, <i class="farg" style="white-space:nowrap;">const struct sigevent *notification</i>);</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> If the argument <i class="farg">notification</i> is not <span class="define">NULL</span>, this function will register the calling process to be notified of message arrival at an empty message queue associated with the specified message queue descriptor, <i class="farg">mqdes</i>. The notification specified by the <i class="farg">notification</i> argument will be sent to the process when the message queue transitions from empty to non-empty. At any time, only one process may be registered for notification by a message queue. If the calling process or any other process has already registered for notification of message arrival at the specified message queue, subsequent attempts to register for that message queue fails.<p>
If <i class="farg">notification</i> is <span class="define">NULL</span> and the process is currently registered for notification by the specified message queue, the existing registration will be removed.<p>
When the notification is sent to the registered process, its registration will be removed. The message queue will then be available for registration.<p>
If a process has registered for notification of message arrival at a message queue and some thread is blocked in <b class="fname">mq_receive</b>() waiting to receive a message when a message arrives at the queue, the arriving message will satisfy the appropriate <b class="fname">mq_receive</b>(). The resulting behavior is as if the message queue remains empty, and no notification will be sent.</div>
<div class="section">
<h1 id="x52455455524e2056414c554553">RETURN VALUES</h1> The <b class="fname">mq_notify</b>() function returns the value 0 if successful; otherwise the value -1 is returned and the global variable <b class="var">errno</b> is set to indicate the error.</div>
<div class="section">
<h1 id="x4552524f5253">ERRORS</h1> The <b class="fname">mq_notify</b>() function fails if:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">EBADF</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The <i class="farg">mqdes</i> argument is not a valid message queue descriptor.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">EBUSY</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
A process is already registered for notification by the message queue.</dd>
</dl>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../html3/mq.html">mq(3)</a>, <a class="link-man" href="../html3/sigevent.html">sigevent(3)</a></div>
<div class="section">
<h1 id="x5354414e4441524453">STANDARDS</h1> This function conforms to the IEEE Std 1003.1-2001 (&#8220;POSIX.1&#8221;) standard.</div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> This function first appeared in <span class="unix">NetBSD&#160;5.0</span>.</div>
<div class="section">
<h1 id="x434f50595249474854">COPYRIGHT</h1> Portions of this text are reprinted and reproduced in electronic form from IEEE Std 1003.1, 2003 Edition, Standard for Information Technology -- Portable Operating System Interface (POSIX), The Open Group Base Specifications Issue 6, Copyright (C) 2001-2003 by the Institute of Electrical and Electronics Engineers, Inc and The Open Group. In the event of any discrepancy between this version and the original IEEE and The Open Group Standard, the original IEEE and The Open Group Standard is the referee document. The original Standard can be obtained online at <a class="link-ext" href="http://www.opengroup.org/unix/online.html">http://www.opengroup.org/unix/online.html</a>.</div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
June 7, 2010</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
</html>

