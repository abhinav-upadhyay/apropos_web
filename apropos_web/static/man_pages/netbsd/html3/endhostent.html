<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/../4/strict.dtd">
>
<head>
<meta http-equiv="Content-Type" content="te../; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="../style.css" type="text/css" media="all">
<title>
GETHOSTBYNAME(3)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
GETHOSTBYNAME(3)</td>
<td class="head-vol" align="center">
Library Functions Manual</td>
<td class="head-rtitle" align="right">
GETHOSTBYNAME(3)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">gethostbyname</b>, <b class="name">gethostbyname2</b>, <b class="name">gethostbyaddr</b>, <b class="name">gethostent</b>, <b class="name">sethostent</b>, <b class="name">endhostent</b>, <b class="name">herror</b>, <b class="name">hstrerror</b> &#8212; <span class="desc">get network host entry</span></div>
<div class="section">
<h1 id="x4c494252415259">LIBRARY</h1> <span class="lib">Standard C Library (libc, &#45;lc)</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="includes">#include &lt;<a class="link-includes">netdb.h</a>&gt;</b><p>
<b class="macro">extern int h_errno;</b><p>
<i class="ftype">struct hostent *</i><br>
<b class="fname">gethostbyname</b>(<i class="farg" style="white-space:nowrap;">const char *name</i>);<p>
<i class="ftype">struct hostent *</i><br>
<b class="fname">gethostbyname2</b>(<i class="farg" style="white-space:nowrap;">const char *name</i>, <i class="farg" style="white-space:nowrap;">int af</i>);<p>
<i class="ftype">struct hostent *</i><br>
<b class="fname">gethostbyaddr</b>(<i class="farg" style="white-space:nowrap;">const void *addr</i>, <i class="farg" style="white-space:nowrap;">socklen_t len</i>, <i class="farg" style="white-space:nowrap;">int type</i>);<p>
<i class="ftype">struct hostent *</i><br>
<b class="fname">gethostent</b>(<i class="farg" style="white-space:nowrap;">void</i>);<p>
<i class="ftype">void</i><br>
<b class="fname">sethostent</b>(<i class="farg" style="white-space:nowrap;">int stayopen</i>);<p>
<i class="ftype">void</i><br>
<b class="fname">endhostent</b>(<i class="farg" style="white-space:nowrap;">void</i>);<p>
<i class="ftype">void</i><br>
<b class="fname">herror</b>(<i class="farg" style="white-space:nowrap;">const char *string</i>);<p>
<i class="ftype">const char *</i><br>
<b class="fname">hstrerror</b>(<i class="farg" style="white-space:nowrap;">int err</i>);</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> The <b class="fname">gethostbyname</b>(), <b class="fname">gethostbyname2</b>() and <b class="fname">gethostbyaddr</b>() functions each return a pointer to an object with the following structure describing an internet host.<p>
<pre style="margin-left: 0.00ex;" class="lit display">
struct	hostent { 
	char	*h_name;	/* official name of host */ 
	char	**h_aliases;	/* alias list */ 
	int	h_addrtype;	/* host address type */ 
	int	h_length;	/* length of address */ 
	char	**h_addr_list;	/* list of addresses from name server */ 
}; 
#define	h_addr  h_addr_list[0]	/* address, for backward compatibility */</pre>
<p>
The members of this structure are:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="farg">h_name</i></dt>
<dd class="list-tag" style="margin-left: 11.00ex;">
Official name of the host.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="farg">h_aliases</i></dt>
<dd class="list-tag" style="margin-left: 11.00ex;">
A NULL-terminated array of alternative names for the host.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="farg">h_addrtype</i></dt>
<dd class="list-tag" style="margin-left: 11.00ex;">
The type of address being returned; currently always <span class="define">AF_INET</span>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="farg">h_length</i></dt>
<dd class="list-tag" style="margin-left: 11.00ex;">
The length, in bytes, of the address.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="farg">h_addr_list</i></dt>
<dd class="list-tag" style="margin-left: 11.00ex;">
A NULL-terminated array of network addresses for the host. Host addresses are returned in network byte order.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="farg">h_addr</i></dt>
<dd class="list-tag" style="margin-left: 11.00ex;">
The first address in <i class="farg">h_addr_list</i>; this is for backward compatibility.</dd>
</dl>
<p>
In the case of <b class="fname">gethostbyname</b>() and <b class="fname">gethostbyname2</b>(), the host is specified by name, or using a string representation of a numeric address. In the case of <b class="fname">gethostbyaddr</b>(), the host is specified using a binary representation of an address.<p>
The returned <i class="ftype">struct hostent</i> structure may contain the result of a simple string to binary conversion, information obtained from the domain name resolver (see <a class="link-man" href="../3/resolver">resolver(3)</a>), broken-out fields from a line in <i class="file">/etc/hosts</i>, or database entries supplied by the <a class="link-man" href="../8/yp">yp(8)</a> system. The order of the lookups is controlled by the &#8216;hosts&#8217; entry in <a class="link-man" href="../5/nsswitch.conf">nsswitch.conf(5)</a>.<p>
When using the domain name resolver, <b class="fname">gethostbyname</b>() and <b class="fname">gethostbyname2</b>() will search for the named host in the current domain and its parents unless the name ends in a dot. If the name contains no dot, and if the environment variable &#8220;<span class="env">HOSTALIASES</span>&#8221; contains the name of an alias file, the alias file will first be searched for an alias matching the input name. See <a class="link-man" href="../7/hostname">hostname(7)</a> for the domain search procedure and the alias file format.<p>
The <b class="fname">gethostbyname2</b>() function is an evolution of <b class="fname">gethostbyname</b>() which is intended to allow lookups in address families other than <span class="define">AF_INET</span>, for example <span class="define">AF_INET6</span>. Currently the <i class="farg">af</i> argument must be specified as <span class="define">AF_INET</span> or <span class="define">AF_INET6</span>, else the function will return <span class="define">NULL</span> after having set <b class="var">h_errno</b> to <span class="define">NETDB_INTERNAL</span>.<p>
The <b class="fname">gethostent</b>() function reads the next line of the <i class="file">/etc/hosts</i> file, opening the file if necessary.<p>
The <b class="fname">sethostent</b>() function may be used to request the use of a connected TCP socket for queries. If the <i class="farg">stayopen</i> flag is non-zero, this sets the option to send all queries to the name server using TCP and to retain the connection after each call to <b class="fname">gethostbyname</b>(), <b class="fname">gethostbyname2</b>(), or <b class="fname">gethostbyaddr</b>(). Otherwise, queries are performed using UDP datagrams.<p>
The <b class="fname">endhostent</b>() function closes the TCP connection.<p>
The <b class="fname">herror</b>() function writes a message to the diagnostic output consisting of the string parameter <i class="farg">s</i>, the constant string ": ", and a message corresponding to the value of <b class="var">h_errno</b>.<p>
The <b class="fname">hstrerror</b>() function returns a string which is the message text corresponding to the value of the <i class="farg">err</i> parameter.</div>
<div class="section">
<h1 id="x46494c4553">FILES</h1><dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/etc/hosts</i></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
</dd>
</dl>
</div>
<div class="section">
<h1 id="x444941474e4f5354494353">DIAGNOSTICS</h1> Error return status from <b class="fname">gethostbyent</b>(), <b class="fname">gethostbyname</b>(), <b class="fname">gethostbyname2</b>(), and <b class="fname">gethostbyaddr</b>() is indicated by return of a null pointer. The external integer <b class="var">h_errno</b> may then be checked to see whether this is a temporary failure or an invalid or unknown host. The routine <b class="fname">herror</b>() can be used to print an error message describing the failure. If its argument <i class="farg">string</i> is non<span class="define">-NULL</span>, it is printed, followed by a colon and a space. The error message is printed with a trailing newline.<p>
The variable <b class="var">h_errno</b> can have the following values:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">HOST_NOT_FOUND</span></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
No such host is known.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">TRY_AGAIN</span></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
This is usually a temporary error and means that the local server did not receive a response from an authoritative server. A retry at some later time may succeed.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">NO_RECOVERY</span></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
Some unexpected server failure was encountered. This is a non-recoverable error.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">NO_DATA</span></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
The requested name is valid but does not have an IP address; this is not a temporary error. This means that the name is known to the name server but there is no address associated with this name. Another type of request to the name server using this domain name will result in an answer; for example, a mail-forwarder may be registered for this domain.</dd>
</dl>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../3/resolver">resolver(3)</a>, <a class="link-man" href="../5/hosts">hosts(5)</a>, <a class="link-man" href="../5/nsswitch.conf">nsswitch.conf(5)</a>, <a class="link-man" href="../7/hostname">hostname(7)</a>, <a class="link-man" href="../8/named">named(8)</a></div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> The <b class="fname">herror</b>() function appeared in <span class="unix">4.3BSD</span>. The <b class="fname">endhostent</b>(), <b class="fname">gethostbyaddr</b>(), <b class="fname">gethostbyname</b>(), <b class="fname">gethostent</b>(), and <b class="fname">sethostent</b>() functions appeared in <span class="unix">4.2BSD</span>. The <b class="fname">gethostbyname2</b>() function first appeared in bind-4.9.4. IPv6 support was implemented in WIDE Hydrangea IPv6 protocol stack kit.</div>
<div class="section">
<h1 id="x43415645415453">CAVEATS</h1> If the search routines specified in <a class="link-man" href="../5/nsswitch.conf">nsswitch.conf(5)</a> decide to read the <i class="file">/etc/hosts</i> file, <b class="fname">gethostbyname</b>(), <b class="fname">gethostbyname2</b>(), and <b class="fname">gethostbyaddr</b>() will read the next line of the file, re-opening the file if necessary.<p>
The <b class="fname">sethostent</b>() function opens and/or rewinds the file <i class="file">/etc/hosts</i>. If the <i class="farg">stayopen</i> argument is non-zero, the file will not be closed after each call to <b class="fname">gethostbyname</b>(), <b class="fname">gethostbyname2</b>(), <b class="fname">gethostbyaddr</b>(), or <b class="fname">gethostent</b>().<p>
The <b class="fname">endhostent</b>() function closes the file.</div>
<div class="section">
<h1 id="x42554753">BUGS</h1> These functions use static data storage; if the data is needed for future use, it should be copied before any subsequent calls overwrite it. Only the Internet address format is currently understood.<p>
The <b class="fname">gethostent</b>() does not currently follow the search order specified in <a class="link-man" href="../5/nsswitch.conf">nsswitch.conf(5)</a> and only reads the <i class="file">/etc/hosts</i> file.</div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
August 19, 2013</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
<>

