<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="../style.css" type="text/css" media="all">
<title>
PUFFS_CC(3)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
PUFFS_CC(3)</td>
<td class="head-vol" align="center">
Library Functions Manual</td>
<td class="head-rtitle" align="right">
PUFFS_CC(3)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">puffs_cc</b> &#8212; <span class="desc">puffs continuation routines</span></div>
<div class="section">
<h1 id="x4c494252415259">LIBRARY</h1> <span class="lib">puffs Convenience Library (libpuffs, &#45;lpuffs)</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="includes">#include &lt;<a class="link-includes">puffs.h</a>&gt;</b><p>
<i class="ftype">void</i><br>
<b class="fname">puffs_cc_yield</b>(<i class="farg" style="white-space:nowrap;">struct puffs_cc *pcc</i>);<p>
<i class="ftype">void</i><br>
<b class="fname">puffs_cc_continue</b>(<i class="farg" style="white-space:nowrap;">struct puffs_cc *pcc</i>);<p>
<i class="ftype">void</i><br>
<b class="fname">puffs_cc_schedule</b>(<i class="farg" style="white-space:nowrap;">struct puffs_cc *pcc</i>);<p>
<i class="ftype">struct puffs_cc *</i><br>
<b class="fname">puffs_cc_getcc</b>(<i class="farg" style="white-space:nowrap;">struct puffs_usermount *pu</i>);</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> These routines are used for the cooperative multitasking suite present in puffs.<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">puffs_cc_yield</b>(<i class="farg">pcc</i>)</dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
Suspend and save the current execution context and return control to the previous point. In practice, from the file system author perspective, control returns back to where either the mainloop or where <b class="fname">puffs_dispatch_exec</b>() was called from.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">puffs_cc_continue</b>(<i class="farg">pcc</i>)</dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
Will suspend current execution and return control to where it was before before calling <b class="fname">puffs_cc_yield</b>(). This is rarely called directly but rather through <b class="fname">puffs_dispatch_exec</b>().</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">puffs_cc_schedule</b>(<i class="farg">pcc</i>)</dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
Schedule a continuation. As opposed to <b class="fname">puffs_cc_continue</b>() this call returns immediately. <i class="farg">pcc</i> will be scheduled sometime in the future.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">puffs_cc_getcc</b>(<i class="farg">pu</i>)</dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
Returns the current pcc or <span class="define">NULL</span> if this is the main thread. <span class="emph">NOTE</span>: The argument <i class="arg">pu</i> will most likely disappear at some point.</dd>
</dl>
<p>
Before calling <b class="fname">puffs_cc_yield</b>() a file system will typically want to record some cookie value into its own internal bookkeeping. This cookie should be hooked to the <b class="var">pcc</b> so that the correct continuation can be continued when the event it was waiting for triggers. Alternatively, the <a class="link-man" href="../3/puffs_framebuf">puffs_framebuf(3)</a> framework and <b class="fname">puffs_mainloop</b>() can be used for handling this automatically.</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../3/puffs">puffs(3)</a>, <a class="link-man" href="../3/puffs_framebuf">puffs_framebuf(3)</a></div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
January 28, 2008</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
</html>

