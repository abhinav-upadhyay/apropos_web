<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="../style.css" type="text/css" media="all">
<title>
GETSUBOPT(3)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
GETSUBOPT(3)</td>
<td class="head-vol" align="center">
Library Functions Manual</td>
<td class="head-rtitle" align="right">
GETSUBOPT(3)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">getsubopt</b> &#8212; <span class="desc">get sub options from an argument</span></div>
<div class="section">
<h1 id="x4c494252415259">LIBRARY</h1> <span class="lib">Standard C Library (libc, &#45;lc)</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="includes">#include &lt;<a class="link-includes">unistd.h</a>&gt;</b><p>
<span class="type">extern char *suboptarg</span><p>
<i class="ftype">int</i><br>
<b class="fname">getsubopt</b>(<i class="farg" style="white-space:nowrap;">char **optionp</i>, <i class="farg" style="white-space:nowrap;">char * const *tokens</i>, <i class="farg" style="white-space:nowrap;">char **valuep</i>);</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> The <b class="fname">getsubopt</b>() function parses a string containing tokens delimited by one or more tab, space or comma (&#8216;<code class="lit">,</code>&#8217;) characters. It is intended for use in parsing groups of option arguments provided as part of a utility command line.<p>
The argument <i class="farg">optionp</i> is a pointer to a pointer to the string. The argument <i class="farg">tokens</i> is a pointer to a <span class="define">NULL</span>-terminated array of pointers to strings.<p>
The <b class="fname">getsubopt</b>() function returns the zero-based offset of the pointer in the <i class="farg">tokens</i> array referencing a string which matches the first token in the string, or &#45;1 if the string contains no tokens or <i class="farg">tokens</i> does not contain a matching string.<p>
If the token is of the form ``name=value'', the location referenced by <i class="farg">valuep</i> will be set to point to the start of the ``value'' portion of the token.<p>
On return from <b class="fname">getsubopt</b>(), <i class="farg">optionp</i> will be set to point to the start of the next token in the string, or the null at the end of the string if no more tokens are present. The external variable <i class="farg">suboptarg</i> will be set to point to the start of the current token, or <span class="define">NULL</span> if no tokens were present. The argument <i class="farg">valuep</i> will be set to point to the ``value'' portion of the token, or <span class="define">NULL</span> if no ``value'' portion was present.</div>
<div class="section">
<h1 id="x4558414d504c4553">EXAMPLES</h1><pre style="margin-left: 0.00ex;" class="lit display">
char *tokens[] = { 
	#define	ONE	0 
		"one", 
	#define	TWO	1 
		"two", 
	NULL 
}; 
 
... 
 
extern char *optarg, *suboptarg; 
char *options, *value; 
 
while ((ch = getopt(argc, argv, "ab:")) != &#45;1) { 
	switch(ch) { 
	case 'a': 
		/* process ``a'' option */ 
		break; 
	case 'b': 
		options = optarg; 
		while (*options) { 
			switch(getsubopt(&amp;options, tokens, &amp;value)) { 
			case ONE: 
				/* process ``one'' sub option */ 
				break; 
			case TWO: 
				/* process ``two'' sub option */ 
				if (!value) 
					error("no value for two"); 
				i = atoi(value); 
				break; 
			case &#45;1: 
				if (suboptarg) 
					error("unknown sub option %s", 
					  suboptarg); 
				else 
					error("missing sub option"); 
				break; 
		} 
		break; 
	}</pre>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../3/getopt">getopt(3)</a>, <a class="link-man" href="../3/strsep">strsep(3)</a></div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> The <b class="fname">getsubopt</b>() function first appeared in <span class="unix">4.4BSD</span>, and is included in IEEE Std 1003.1-2008 (&#8220;POSIX.1&#8221;).</div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
November 17, 2009</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
</html>

