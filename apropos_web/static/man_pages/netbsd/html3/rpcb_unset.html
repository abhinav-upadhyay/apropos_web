<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="../style.css" type="text/css" media="all">
<title>
RPCBIND(3)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
RPCBIND(3)</td>
<td class="head-vol" align="center">
Library Functions Manual</td>
<td class="head-rtitle" align="right">
RPCBIND(3)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">rpcb_getmaps</b>, <b class="name">rpcb_getaddr</b>, <b class="name">rpcb_gettime</b>, <b class="name">rpcb_rmtcall</b>, <b class="name">rpcb_set</b>, <b class="name">rpcb_unset</b> &#8212; <span class="desc">library routines for RPC bind service</span></div>
<div class="section">
<h1 id="x4c494252415259">LIBRARY</h1> <span class="lib">Standard C Library (libc, &#45;lc)</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="includes">#include &lt;<a class="link-includes">rpc/rpc.h</a>&gt;</b><p>
<i class="ftype">struct rpcblist *</i><br>
<b class="fname">rpcb_getmaps</b>(<i class="farg" style="white-space:nowrap;">const struct netconfig *netconf</i>, <i class="farg" style="white-space:nowrap;">const char *host</i>);<p>
<i class="ftype">bool_t</i><br>
<b class="fname">rpcb_getaddr</b>(<i class="farg" style="white-space:nowrap;">const rpcprog_t prognum</i>, <i class="farg" style="white-space:nowrap;">const rpcvers_t versnum</i>, <i class="farg" style="white-space:nowrap;">const struct netconfig *netconf</i>, <i class="farg" style="white-space:nowrap;">struct netbuf *svcaddr</i>, <i class="farg" style="white-space:nowrap;">const char *host</i>);<p>
<i class="ftype">bool_t</i><br>
<b class="fname">rpcb_gettime</b>(<i class="farg" style="white-space:nowrap;">const char *host</i>, <i class="farg" style="white-space:nowrap;">time_t * timep</i>);<p>
<i class="ftype">enum clnt_stat</i><br>
<b class="fname">rpcb_rmtcall</b>(<i class="farg" style="white-space:nowrap;">const struct netconfig *netconf</i>, <i class="farg" style="white-space:nowrap;">const char *host</i>, <i class="farg" style="white-space:nowrap;">const rpcprog_t prognum, const rpcvers_t versnum</i>, <i class="farg" style="white-space:nowrap;">const rpcproc_t procnum, const xdrproc_t inproc</i>, <i class="farg" style="white-space:nowrap;">const char *in</i>, <i class="farg" style="white-space:nowrap;">const xdrproc_t outproc</i>, <i class="farg" style="white-space:nowrap;">caddr_t out</i>, <i class="farg" style="white-space:nowrap;">const struct timeval tout, struct netbuf  *svcaddr</i>);<p>
<i class="ftype">bool_t</i><br>
<b class="fname">rpcb_set</b>(<i class="farg" style="white-space:nowrap;">const rpcprog_t prognum</i>, <i class="farg" style="white-space:nowrap;">const rpcvers_t versnum</i>, <i class="farg" style="white-space:nowrap;">const struct netconfig *netconf</i>, <i class="farg" style="white-space:nowrap;">const struct netbuf *svcaddr</i>);<p>
<i class="ftype">bool_t</i><br>
<b class="fname">rpcb_unset</b>(<i class="farg" style="white-space:nowrap;">const rpcprog_t prognum</i>, <i class="farg" style="white-space:nowrap;">const rpcvers_t versnum</i>, <i class="farg" style="white-space:nowrap;">const struct netconfig *netconf</i>);</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> These routines allow client C programs to make procedure calls to the RPC binder service. (see <a class="link-man" href="../html8/rpcbind.html">rpcbind(8)</a>) maintains a list of mappings between programs and their universal addresses.</div>
<div class="section">
<h1 id="x524f5554494e4553">ROUTINES</h1><dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">rpcb_getmaps</b>()</dt>
<dd class="list-tag" style="margin-left: 5.00ex;">
An interface to the rpcbind service, which returns a list of the current RPC program-to-address mappings on <i class="farg">host</i>. It uses the transport specified through <i class="farg">netconf</i> to contact the remote rpcbind service on <i class="farg">host</i>. This routine will return <span class="define">NULL</span>, if the remote rpcbind could not be contacted.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">rpcb_getaddr</b>()</dt>
<dd class="list-tag" style="margin-left: 5.00ex;">
An interface to the rpcbind service, which finds the address of the service on <i class="farg">host</i> that is registered with program number <i class="farg">prognum</i>, version <i class="farg">versnum</i>, and speaks the transport protocol associated with <i class="farg">netconf</i>. The address found is returned in <i class="farg">svcaddr</i>. <i class="farg">svcaddr</i> should be preallocated. This routine returns <span class="define">TRUE</span> if it succeeds. A return value of <span class="define">FALSE</span> means that the mapping does not exist or that the RPC system failed to contact the remote rpcbind service. In the latter case, the global variable <b class="var">rpc_createerr</b> (see <a class="link-man" href="../html3/rpc_clnt_create.html">rpc_clnt_create(3)</a> contains the RPC status.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">rpcb_gettime</b>()</dt>
<dd class="list-tag" style="margin-left: 5.00ex;">
This routine returns the time on <i class="farg">host</i> in <i class="farg">timep</i>. If <i class="farg">host</i> is <span class="define">NULL</span>, <b class="fname">rpcb_gettime</b>() returns the time on its own machine. This routine returns <span class="define">TRUE</span> if it succeeds, <span class="define">FALSE</span> if it fails. <b class="fname">rpcb_gettime</b>() can be used to synchronize the time between the client and the remote server.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">rpcb_rmtcall</b>()</dt>
<dd class="list-tag" style="margin-left: 5.00ex;">
An interface to the rpcbind service, which instructs rpcbind on <i class="farg">host</i> to make an RPC call on your behalf to a procedure on that host. The <b class="fname">netconfig</b>() structure should correspond to a connectionless transport. The parameter <i class="farg">svcaddr</i> will be modified to the server's address if the procedure succeeds (see <b class="fname">rpc_call</b>() and <b class="fname">clnt_call</b>() in <a class="link-man" href="../html3/rpc_clnt_calls.html">rpc_clnt_calls(3)</a> for the definitions of other parameters).<p>
This procedure should normally be used for a ``ping'' and nothing else. This routine allows programs to do lookup and call, all in one step.<p>
Note: Even if the server is not running <b class="fname">rpcb_rmtcall</b>() does not return any error messages to the caller. In such a case, the caller times out.<p>
Note: <b class="fname">rpcb_rmtcall</b>() is only available for connectionless transports.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">rpcb_set</b>()</dt>
<dd class="list-tag" style="margin-left: 5.00ex;">
An interface to the rpcbind service, which establishes a mapping between the triple [ <i class="farg">prognum</i>, <i class="farg">versnum</i>, <i class="farg">netconf-&gt;nc_netid</i>] and <i class="farg">svcaddr</i> on the machine's rpcbind service. The value of <i class="farg">nc_netid</i> must correspond to a network identifier that is defined by the netconfig database. This routine returns <span class="define">TRUE</span> if it succeeds, <span class="define">FALSE</span> otherwise. (See also <b class="fname">svc_reg</b>() in <a class="link-man" href="../html3/rpc_svc_calls.html">rpc_svc_calls(3)</a>. If there already exists such an entry with rpcbind, <b class="fname">rpcb_set</b>() will fail.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">rpcb_unset</b>()</dt>
<dd class="list-tag" style="margin-left: 5.00ex;">
An interface to the rpcbind service, which destroys the mapping between the triple [ <i class="farg">prognum</i>, <i class="farg">versnum</i>, <i class="farg">netconf-&gt;nc_netid</i>] and the address on the machine's rpcbind service. If <i class="farg">netconf</i> is <span class="define">NULL</span>, <b class="fname">rpcb_unset</b>() destroys all mapping between the triple [ <i class="farg">prognum</i>, <i class="farg">versnum</i>, <i class="farg">all-transports</i>] and the addresses on the machine's rpcbind service. This routine returns <span class="define">TRUE</span> if it succeeds, <span class="define">FALSE</span> otherwise. Only the owner of the service or the super-user can destroy the mapping. (See also <b class="fname">svc_unreg</b>() in <a class="link-man" href="../html3/rpc_svc_calls.html">rpc_svc_calls(3)</a>.</dd>
</dl>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../html3/rpc_clnt_calls.html">rpc_clnt_calls(3)</a>, <a class="link-man" href="../html3/rpc_svc_calls.html">rpc_svc_calls(3)</a>, <a class="link-man" href="../html8/rpcbind.html">rpcbind(8)</a>, <a class="link-man" href="../html8/rpcinfo.html">rpcinfo(8)</a></div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
December 4, 2005</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
</html>

