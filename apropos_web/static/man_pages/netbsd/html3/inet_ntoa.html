<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="/static/man_pages/netbsd/style.css" type="text/css" media="all">
<title>
INET(3)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
INET(3)</td>
<td class="head-vol" align="center">
Library Functions Manual</td>
<td class="head-rtitle" align="right">
INET(3)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">inet_addr</b>, <b class="name">inet_aton</b>, <b class="name">inet_lnaof</b>, <b class="name">inet_makeaddr</b>, <b class="name">inet_netof</b>, <b class="name">inet_network</b>, <b class="name">inet_ntoa</b>, <b class="name">inet_ntop</b>, <b class="name">inet_pton</b>, <b class="name">addr</b>, <b class="name">ntoa</b>, <b class="name">network</b> &#8212; <span class="desc">Internet address manipulation routines</span></div>
<div class="section">
<h1 id="x4c494252415259">LIBRARY</h1> <span class="lib">Standard C Library (libc, &#45;lc)</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="includes">#include &lt;<a class="link-includes">arpa/inet.h</a>&gt;</b><p>
<i class="ftype">in_addr_t</i><br>
<b class="fname">inet_addr</b>(<i class="farg" style="white-space:nowrap;">const char *cp</i>);<p>
<i class="ftype">int</i><br>
<b class="fname">inet_aton</b>(<i class="farg" style="white-space:nowrap;">const char *cp</i>, <i class="farg" style="white-space:nowrap;">struct in_addr *addr</i>);<p>
<i class="ftype">in_addr_t</i><br>
<b class="fname">inet_lnaof</b>(<i class="farg" style="white-space:nowrap;">struct in_addr in</i>);<p>
<i class="ftype">struct in_addr</i><br>
<b class="fname">inet_makeaddr</b>(<i class="farg" style="white-space:nowrap;">in_addr_t net</i>, <i class="farg" style="white-space:nowrap;">in_addr_t lna</i>);<p>
<i class="ftype">in_addr_t</i><br>
<b class="fname">inet_netof</b>(<i class="farg" style="white-space:nowrap;">struct in_addr in</i>);<p>
<i class="ftype">in_addr_t</i><br>
<b class="fname">inet_network</b>(<i class="farg" style="white-space:nowrap;">const char *cp</i>);<p>
<i class="ftype">char *</i><br>
<b class="fname">inet_ntoa</b>(<i class="farg" style="white-space:nowrap;">struct in_addr in</i>);<p>
<i class="ftype">const char *</i><br>
<b class="fname">inet_ntop</b>(<i class="farg" style="white-space:nowrap;">int af</i>, <i class="farg" style="white-space:nowrap;">const void * restrict src</i>, <i class="farg" style="white-space:nowrap;">char * restrict dst</i>, <i class="farg" style="white-space:nowrap;">socklen_t size</i>);<p>
<i class="ftype">int</i><br>
<b class="fname">inet_pton</b>(<i class="farg" style="white-space:nowrap;">int af</i>, <i class="farg" style="white-space:nowrap;">const char * restrict src</i>, <i class="farg" style="white-space:nowrap;">void * restrict dst</i>);</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> The routines <b class="fname">inet_aton</b>(), <b class="fname">inet_addr</b>() and <b class="fname">inet_network</b>() interpret character strings representing numbers expressed in the Internet standard &#8220;dotted quad&#8221; notation.<p>
The <b class="fname">inet_pton</b>() function converts a presentation format address (that is, printable form as held in a character string) to network format (usually a <i class="ftype">struct in_addr</i> or some other internal binary representation, in network byte order). It returns 1 if the address was valid for the specified address family, or 0 if the address wasn't parsable in the specified address family, or -1 if some system error occurred (in which case <b class="var">errno</b> will have been set). This function is presently valid for <span class="define">AF_INET</span> and <span class="define">AF_INET6</span>.<p>
The <b class="fname">inet_aton</b>() routine interprets the specified character string as an Internet address, placing the address into the structure provided. It returns 1 if the string was successfully interpreted, or 0 if the string is invalid.<p>
The <b class="fname">inet_addr</b>() and <b class="fname">inet_network</b>() functions return numbers suitable for use as Internet addresses and Internet network numbers, respectively.<p>
The function <b class="fname">inet_ntop</b>() converts an address from network format (usually a <i class="ftype">struct in_addr</i> or some other binary form, in network byte order) to presentation format (suitable for external display purposes). It returns NULL if a system error occurs (in which case, <b class="var">errno</b> will have been set), or it returns a pointer to the destination string. The <i class="arg">size</i> parameter is the size of the <i class="arg">buf</i> argument.<p>
The routine <b class="fname">inet_ntoa</b>() takes an Internet address and returns an ASCII string representing the address in &#8220;dotted quad&#8221; notation.<p>
The routine <b class="fname">inet_makeaddr</b>() takes an Internet network number and a local network address (both in host order) and constructs an Internet address from it. Note that to convert only a single value to a <i class="ftype">struct in_addr</i> form that value should be passed as the first parameter and &#8216;<code class="lit">0L</code>&#8217; should be given for the second parameter.<p>
The routines <b class="fname">inet_netof</b>() and <b class="fname">inet_lnaof</b>() break apart Internet host addresses, returning the network number and local network address part, respectively (both in host order).<p>
All Internet addresses are returned in network order (bytes ordered from left to right). All network numbers and local address parts are returned as machine format integer values.</div>
<div class="section">
<h1 id="x494e5445524e455420414444524553534553202849502056455253494f4e203429">INTERNET ADDRESSES (IP VERSION 4)</h1> Values specified using the &#8220;dotted quad&#8221; notation take one of the following forms:<p>
<pre style="margin-left: 5.00ex;" class="lit display">
a.b.c.d 
a.b.c 
a.b 
a</pre>
<p>
When four parts are specified, each is interpreted as a byte of data and assigned, from left to right, to the four bytes of an Internet address. Note that when an Internet address is viewed as a 32-bit integer quantity on a system that uses little-endian byte order (e.g. Intel i386, i486 and Pentium processors) the bytes referred to above appear as &#8220;<code class="lit">d.c.b.a</code>&#8221;. That is, little-endian bytes are ordered from right to left.<p>
When a three part address is specified, the last part is interpreted as a 16-bit quantity and placed in the right-most two bytes of the network address. This makes the three part address format convenient for specifying Class B network addresses as &#8220;<code class="lit">128.net.host</code>&#8221;.<p>
When a two part address is supplied, the last part is interpreted as a 24-bit quantity and placed in the right most three bytes of the network address. This makes the two part address format convenient for specifying Class A network addresses as &#8220;<code class="lit">net.host</code>&#8221;.<p>
When only one part is given, the value is stored directly in the network address without any byte rearrangement.<p>
All numbers supplied as &#8220;parts&#8221; in a &#8220;dotted quad&#8221; notation may be decimal, octal, or hexadecimal, as specified in the C language (i.e., a leading 0x or 0X implies hexadecimal; otherwise, a leading 0 implies octal; otherwise, the number is interpreted as decimal).</div>
<div class="section">
<h1 id="x494e5445524e455420414444524553534553202849502056455253494f4e203629">INTERNET ADDRESSES (IP VERSION 6)</h1> In order to support scoped IPv6 addresses, the use of <a class="link-man" href="../3/getaddrinfo">getaddrinfo(3)</a> and <a class="link-man" href="../3/getnameinfo">getnameinfo(3)</a> is recommended rather than the functions presented here.<p>
The presentation format of an IPv6 address is given in RFC 2373:<p>
There are three conventional forms for representing IPv6 addresses as text strings:<ol style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-enum">
<li class="list-enum" style="margin-top: 1.00em;">
The preferred form is x:x:x:x:x:x:x:x, where the 'x's are the hexadecimal values of the eight 16-bit pieces of the address. Examples:<p>
<pre style="margin-left: 5.00ex;" class="lit display">
FEDC:BA98:7654:3210:FEDC:BA98:7654:3210 
1080:0:0:0:8:800:200C:417A</pre>
<p>
Note that it is not necessary to write the leading zeros in an individual field, but there must be at least one numeral in every field (except for the case described in 2).</li>
<li class="list-enum" style="margin-top: 1.00em;">
Due to the method of allocating certain styles of IPv6 addresses, it will be common for addresses to contain long strings of zero bits. In order to make writing addresses containing zero bits easier, a special syntax is available to compress the zeros. The use of ``::'' indicates multiple groups of 16-bits of zeros. The ``::'' can only appear once in an address. The ``::'' can also be used to compress the leading and/or trailing zeros in an address.<p>
For example the following addresses:<p>
<pre style="margin-left: 5.00ex;" class="lit display">
1080:0:0:0:8:800:200C:417A  a unicast address 
FF01:0:0:0:0:0:0:43         a multicast address 
0:0:0:0:0:0:0:1             the loopback address 
0:0:0:0:0:0:0:0             the unspecified addresses</pre>
<p>
may be represented as:<p>
<pre style="margin-left: 5.00ex;" class="lit display">
1080::8:800:200C:417A       a unicast address 
FF01::43                    a multicast address 
::1                         the loopback address 
::                          the unspecified addresses</pre>
</li>
<li class="list-enum" style="margin-top: 1.00em;">
An alternative form that is sometimes more convenient when dealing with a mixed environment of IPv4 and IPv6 nodes is x:x:x:x:x:x:d.d.d.d, where the 'x's are the hexadecimal values of the six high-order 16-bit pieces of the address, and the 'd's are the decimal values of the four low-order 8-bit pieces of the address (standard IPv4 representation). Examples:<p>
<pre style="margin-left: 5.00ex;" class="lit display">
0:0:0:0:0:0:13.1.68.3 
0:0:0:0:0:FFFF:129.144.52.38</pre>
<p>
or in compressed form:<p>
<pre style="margin-left: 5.00ex;" class="lit display">
::13.1.68.3 
::FFFF:129.144.52.38</pre>
</li>
</ol>
</div>
<div class="section">
<h1 id="x444941474e4f5354494353">DIAGNOSTICS</h1> The constant <span class="define">INADDR_NONE</span> is returned by <b class="fname">inet_addr</b>() and <b class="fname">inet_network</b>() for malformed requests.</div>
<div class="section">
<h1 id="x4552524f5253">ERRORS</h1> The <b class="fname">inet_ntop</b>() and <b class="fname">inet_pton</b>() functions may fail with<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">EAFNOSUPPORT</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The value of <i class="farg">af</i> was not <span class="define">AF_INET</span> or <span class="define">AF_INET6</span>.</dd>
</dl>
<p>
The <b class="fname">inet_ntop</b>() function may fail with<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">ENOSPC</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The <i class="farg">size</i> indicated for <i class="farg">dst</i> was too small to store the presentation form of the network address.</dd>
</dl>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../3/byteorder">byteorder(3)</a>, <a class="link-man" href="../3/gethostbyname">gethostbyname(3)</a>, <a class="link-man" href="../3/getnetent">getnetent(3)</a>, <a class="link-man" href="../3/inet_net">inet_net(3)</a>, <a class="link-man" href="../5/hosts">hosts(5)</a>, <a class="link-man" href="../5/networks">networks(5)</a><p>
<span class="ref"><span class="ref-title">IP Version 6 Addressing Architecture</span>, <span class="ref-rep">RFC 2373</span>, <span class="ref-date">July 1998</span>.</span><p>
<span class="ref"><span class="ref-title">Basic Socket Interface Extensions for IPv6</span>, <span class="ref-rep">RFC 3493</span>, <span class="ref-date">February 2003</span>.</span></div>
<div class="section">
<h1 id="x5354414e4441524453">STANDARDS</h1> The <b class="fname">inet_ntop</b>() and <b class="fname">inet_pton</b>() functions conform to IEEE Std 1003.1-2001 (&#8220;POSIX.1&#8221;). Note that <b class="fname">inet_pton</b>() does not accept 1-, 2-, or 3-part dotted addresses; all four parts must be specified. Additionally all four parts of a dotted address must be decimal. This is a narrower input set than that accepted by <b class="fname">inet_aton</b>().</div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> The <b class="fname">inet_addr</b>(), <b class="fname">inet_network</b>(), <b class="fname">inet_makeaddr</b>(), <b class="fname">inet_lnaof</b>() and <b class="fname">inet_netof</b>() functions appeared in <span class="unix">4.2BSD</span>. They were changed to use <span class="type">in_addr_t</span> in place of <span class="type">unsigned long</span> in <span class="unix">NetBSD&#160;2.0</span>. The <b class="fname">inet_aton</b>() and <b class="fname">inet_ntoa</b>() functions appeared in <span class="unix">4.3BSD</span>. The <b class="fname">inet_pton</b>() and <b class="fname">inet_ntop</b>() functions appeared in BIND 4.9.4 and thence <span class="unix">NetBSD&#160;1.3</span>; they were also in X/Open Networking Services Issue&#160;5.2 (&#8220;XNS5.2&#8221;).</div>
<div class="section">
<h1 id="x42554753">BUGS</h1> The value <span class="define">INADDR_NONE</span> (0xffffffff) is a valid broadcast address, but <b class="fname">inet_addr</b>() cannot return that value without indicating failure. The newer <b class="fname">inet_aton</b>() function does not share this problem.<p>
The problem of host byte ordering versus network byte ordering is confusing.<p>
The string returned by <b class="fname">inet_ntoa</b>() resides in a static memory area.<p>
The function <b class="fname">inet_addr</b>() should return a <span class="type">struct in_addr</span>.<p>
The function <b class="fname">inet_network</b>() does not support byte rearrangement for one, two, and three part addresses.</div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
July 25, 2012</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
</html>

