<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="../style.css" type="text/css" media="all">
<title>
PWCACHE(3)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
PWCACHE(3)</td>
<td class="head-vol" align="center">
Library Functions Manual</td>
<td class="head-rtitle" align="right">
PWCACHE(3)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">pwcache</b>, <b class="name">user_from_uid</b>, <b class="name">group_from_gid</b> &#8212; <span class="desc">cache password and group entries</span></div>
<div class="section">
<h1 id="x4c494252415259">LIBRARY</h1> <span class="lib">Standard C Library (libc, &#45;lc)</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="includes">#include &lt;<a class="link-includes">pwd.h</a>&gt;</b><p>
<i class="ftype">const char *</i><br>
<b class="fname">user_from_uid</b>(<i class="farg" style="white-space:nowrap;">uid_t uid</i>, <i class="farg" style="white-space:nowrap;">int nouser</i>);<p>
<i class="ftype">int</i><br>
<b class="fname">uid_from_user</b>(<i class="farg" style="white-space:nowrap;">const char *name</i>, <i class="farg" style="white-space:nowrap;">uid_t *uid</i>);<p>
<i class="ftype">int</i><br>
<b class="fname">pwcache_userdb</b>(<i class="farg" style="white-space:nowrap;">int (*setpassent)(int)</i>, <i class="farg" style="white-space:nowrap;">void (*endpwent)(void)</i>, <i class="farg" style="white-space:nowrap;">struct passwd * (*getpwnam)(const char *)</i>, <i class="farg" style="white-space:nowrap;">struct passwd * (*getpwuid)(uid_t)</i>);<p>
<b class="includes">#include &lt;<a class="link-includes">grp.h</a>&gt;</b><p>
<i class="ftype">const char *</i><br>
<b class="fname">group_from_gid</b>(<i class="farg" style="white-space:nowrap;">gid_t gid</i>, <i class="farg" style="white-space:nowrap;">int nogroup</i>);<p>
<i class="ftype">int</i><br>
<b class="fname">gid_from_group</b>(<i class="farg" style="white-space:nowrap;">const char *name</i>, <i class="farg" style="white-space:nowrap;">gid_t *gid</i>);<p>
<i class="ftype">int</i><br>
<b class="fname">pwcache_groupdb</b>(<i class="farg" style="white-space:nowrap;">int (*setgroupent)(int)</i>, <i class="farg" style="white-space:nowrap;">void (*endgrent)(void)</i>, <i class="farg" style="white-space:nowrap;">struct group * (*getgrnam)(const char *)</i>, <i class="farg" style="white-space:nowrap;">struct group * (*getgrgid)(gid_t)</i>);</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> The <b class="fname">user_from_uid</b>() function returns the user name associated with the argument <i class="farg">uid</i>. The user name is cached so that multiple calls with the same <i class="farg">uid</i> do not require additional calls to <a class="link-man" href="../html3/getpwuid.html">getpwuid(3)</a>. If there is no user associated with the <i class="farg">uid</i>, a pointer is returned to a string representation of the <i class="farg">uid</i>, unless the argument <i class="farg">nouser</i> is non-zero, in which case a <span class="define">NULL</span> pointer is returned.<p>
The <b class="fname">group_from_gid</b>() function returns the group name associated with the argument <i class="farg">gid</i>. The group name is cached so that multiple calls with the same <i class="farg">gid</i> do not require additional calls to <a class="link-man" href="../html3/getgrgid.html">getgrgid(3)</a>. If there is no group associated with the <i class="farg">gid</i>, a pointer is returned to a string representation of the <i class="farg">gid</i>, unless the argument <i class="farg">nogroup</i> is non-zero, in which case a <span class="define">NULL</span> pointer is returned.<p>
The <b class="fname">uid_from_user</b>() function returns the uid associated with the argument <i class="farg">name</i>. The uid is cached so that multiple calls with the same <i class="farg">name</i> do not require additional calls to <a class="link-man" href="../html3/getpwnam.html">getpwnam(3)</a>. If there is no uid associated with the <i class="farg">name</i>, the <b class="fname">uid_from_user</b>() function returns &#45;1; otherwise it stores the uid at the location pointed to by <i class="farg">uid</i> and returns 0.<p>
The <b class="fname">gid_from_group</b>() function returns the gid associated with the argument <i class="farg">name</i>. The gid is cached so that multiple calls with the same <i class="farg">name</i> do not require additional calls to <a class="link-man" href="../html3/getgrnam.html">getgrnam(3)</a>. If there is no gid associated with the <i class="farg">name</i>, the <b class="fname">gid_from_group</b>() function returns &#45;1; otherwise it stores the gid at the location pointed to by <i class="farg">gid</i> and returns 0.<p>
The <b class="fname">pwcache_userdb</b>() function changes the user database access routines which <b class="fname">user_from_uid</b>() and <b class="fname">uid_from_user</b>() call to search for users. The caches are flushed and the existing <b class="fname">endpwent</b>() method is called before switching to the new routines. <i class="farg">getpwnam</i> and <i class="farg">getpwuid</i> must be provided, and <i class="farg">setpassent</i> and <i class="farg">endpwent</i> may be <span class="define">NULL</span> pointers.<p>
The <b class="fname">pwcache_groupdb</b>() function changes the group database access routines which <b class="fname">group_from_gid</b>() and <b class="fname">gid_from_group</b>() call to search for groups. The caches are flushed and the existing <b class="fname">endgrent</b>() method is called before switching to the new routines. <i class="farg">getgrnam</i> and <i class="farg">getgrgid</i> must be provided, and <i class="farg">setgroupent</i> and <i class="farg">endgrent</i> may be <span class="define">NULL</span> pointers.</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../html3/getgrgid.html">getgrgid(3)</a>, <a class="link-man" href="../html3/getgrnam.html">getgrnam(3)</a>, <a class="link-man" href="../html3/getpwnam.html">getpwnam(3)</a>, <a class="link-man" href="../html3/getpwuid.html">getpwuid(3)</a></div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> The <b class="fname">user_from_uid</b>() and <b class="fname">group_from_gid</b>() functions first appeared in <span class="unix">4.4BSD</span>.<p>
The <b class="fname">uid_from_user</b>() and <b class="fname">gid_from_group</b>() functions first appeared in <span class="unix">NetBSD&#160;1.4</span>.<p>
The <b class="fname">pwcache_userdb</b>() and <b class="fname">pwcache_groupdb</b>() functions first appeared in <span class="unix">NetBSD&#160;1.6</span>.</div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
January 24, 2002</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
</html>

