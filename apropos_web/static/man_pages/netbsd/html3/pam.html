<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="/static/man_pages/netbsd/style.css" type="text/css" media="all">
<title>
PAM(3)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
PAM(3)</td>
<td class="head-vol" align="center">
Library Functions Manual</td>
<td class="head-rtitle" align="right">
PAM(3)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">pam</b> &#8212; <span class="desc">Pluggable Authentication Modules Library</span></div>
<div class="section">
<h1 id="x4c494252415259">LIBRARY</h1> <span class="lib">Pluggable Authentication Module Library (libpam, &#45;lpam)</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="includes">#include &lt;<a class="link-includes">security/pam_appl.h</a>&gt;</b></div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> The Pluggable Authentication Modules (PAM) library abstracts a number of common authentication-related operations and provides a framework for dynamically loaded modules that implement these operations in various ways.<div class="subsection">
<h2 id="x5465726d696e6f6c6f6779">Terminology</h2> In PAM parlance, the application that uses PAM to authenticate a user is the server, and is identified for configuration purposes by a service name, which is often (but not necessarily) the program name.<p>
The user requesting authentication is called the applicant, while the user (usually, root) charged with verifying his identity and granting him the requested credentials is called the arbitrator.<p>
The sequence of operations the server goes through to authenticate a user and perform whatever task he requested is a PAM transaction; the context within which the server performs the requested task is called a session.<p>
The functionality embodied by PAM is divided into six primitives grouped into four facilities: authentication, account management, session management and password management.</div>
<div class="subsection">
<h2 id="x436f6e766572736174696f6e">Conversation</h2> The PAM library expects the application to provide a conversation callback which it can use to communicate with the user. Some modules may use specialized conversation functions to communicate with special hardware such as cryptographic dongles or biometric devices. See <a class="link-man" href="../3/pam_conv">pam_conv(3)</a> for details.</div>
<div class="subsection">
<h2 id="x496e697469616c697a6174696f6e20616e6420436c65616e7570">Initialization and Cleanup</h2> The <b class="fname">pam_start</b>() function initializes the PAM library and returns a handle which must be provided in all subsequent function calls. The transaction state is contained entirely within the structure identified by this handle, so it is possible to conduct multiple transactions in parallel.<p>
The <b class="fname">pam_end</b>() function releases all resources associated with the specified context, and can be called at any time to terminate a PAM transaction.</div>
<div class="subsection">
<h2 id="x53746f72616765">Storage</h2> The <b class="fname">pam_set_item</b>() and <b class="fname">pam_get_item</b>() functions set and retrieve a number of predefined items, including the service name, the names of the requesting and target users, the conversation function, and prompts.<p>
The <b class="fname">pam_set_data</b>() and <b class="fname">pam_get_data</b>() functions manage named chunks of free-form data, generally used by modules to store state from one invocation to another.</div>
<div class="subsection">
<h2 id="x41757468656e7469636174696f6e">Authentication</h2> There are two authentication primitives: <b class="fname">pam_authenticate</b>() and <b class="fname">pam_setcred</b>(). The former authenticates the user, while the latter manages his credentials.</div>
<div class="subsection">
<h2 id="x4163636f756e74204d616e6167656d656e74">Account Management</h2> The <b class="fname">pam_acct_mgmt</b>() function enforces policies such as password expiry, account expiry, time-of-day restrictions, and so forth.</div>
<div class="subsection">
<h2 id="x53657373696f6e204d616e6167656d656e74">Session Management</h2> The <b class="fname">pam_open_session</b>() and <b class="fname">pam_close_session</b>() functions handle session setup and teardown.</div>
<div class="subsection">
<h2 id="x50617373776f7264204d616e6167656d656e74">Password Management</h2> The <b class="fname">pam_chauthtok</b>() function allows the server to change the user's password, either at the user's request or because the password has expired.</div>
<div class="subsection">
<h2 id="x4d697363656c6c616e656f7573">Miscellaneous</h2> The <b class="fname">pam_putenv</b>(), <b class="fname">pam_getenv</b>() and <b class="fname">pam_getenvlist</b>() functions manage a private environment list in which modules can set environment variables they want the server to export during the session.<p>
The <b class="fname">pam_strerror</b>() function returns a pointer to a string describing the specified PAM error code.</div>
</div>
<div class="section">
<h1 id="x52455455524e2056414c554553">RETURN VALUES</h1> The following return codes are defined by <b class="includes">&lt;<a class="link-includes">security/pam_constants.h</a>&gt;</b>:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">PAM_ABORT</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 18.00ex;">
General failure.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">PAM_ACCT_EXPIRED</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 18.00ex;">
User account has expired.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">PAM_AUTHINFO_UNAVAIL</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 18.00ex;">
Authentication information is unavailable.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">PAM_AUTHTOK_DISABLE_AGING</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 18.00ex;">
Authentication token aging disabled.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">PAM_AUTHTOK_ERR</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 18.00ex;">
Authentication token failure.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">PAM_AUTHTOK_EXPIRED</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 18.00ex;">
Password has expired.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">PAM_AUTHTOK_LOCK_BUSY</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 18.00ex;">
Authentication token lock busy.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">PAM_AUTHTOK_RECOVERY_ERR</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 18.00ex;">
Failed to recover old authentication token.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">PAM_AUTH_ERR</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 18.00ex;">
Authentication error.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">PAM_BUF_ERR</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 18.00ex;">
Memory buffer error.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">PAM_CONV_ERR</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 18.00ex;">
Conversation failure.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">PAM_CRED_ERR</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 18.00ex;">
Failed to set user credentials.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">PAM_CRED_EXPIRED</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 18.00ex;">
User credentials have expired.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">PAM_CRED_INSUFFICIENT</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 18.00ex;">
Insufficient credentials.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">PAM_CRED_UNAVAIL</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 18.00ex;">
Failed to retrieve user credentials.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">PAM_DOMAIN_UNKNOWN</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 18.00ex;">
Unknown authentication domain.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">PAM_IGNORE</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 18.00ex;">
Ignore this module.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">PAM_MAXTRIES</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 18.00ex;">
Maximum number of tries exceeded.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">PAM_MODULE_UNKNOWN</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 18.00ex;">
Unknown module type.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">PAM_NEW_AUTHTOK_REQD</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 18.00ex;">
New authentication token required.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">PAM_NO_MODULE_DATA</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 18.00ex;">
Module data not found.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">PAM_OPEN_ERR</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 18.00ex;">
Failed to load module.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">PAM_PERM_DENIED</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 18.00ex;">
Permission denied.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">PAM_SERVICE_ERR</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 18.00ex;">
Error in service module.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">PAM_SESSION_ERR</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 18.00ex;">
Session failure.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">PAM_SUCCESS</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 18.00ex;">
Success.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">PAM_SYMBOL_ERR</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 18.00ex;">
Invalid symbol.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">PAM_SYSTEM_ERR</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 18.00ex;">
System error.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">PAM_TRY_AGAIN</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 18.00ex;">
Try again.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">PAM_USER_UNKNOWN</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 18.00ex;">
Unknown user.</dd>
</dl>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../3/openpam">openpam(3)</a>, <a class="link-man" href="../3/pam_conv">pam_conv(3)</a></div>
<div class="section">
<h1 id="x5354414e4441524453">STANDARDS</h1> <span class="ref"><span class="ref-title">X/Open Single Sign-On Service (XSSO) - Pluggable Authentication Modules</span>, <span class="ref-date">June 1997</span>.</span></div>
<div class="section">
<h1 id="x415554484f5253">AUTHORS</h1> The OpenPAM library and this manual page were developed for the <span class="unix">FreeBSD</span> Project by ThinkSec AS and Network Associates Laboratories, the Security Research Division of Network Associates, Inc. under DARPA/SPAWAR contract N66001-01-C-8035 (&#8220;CBOSS&#8221;), as part of the DARPA CHATS research program.<p>
The OpenPAM library is maintained by <span class="author">Dag-Erling Sm&#248;rgrav</span> &#60;<a class="link-mail" href="mailto:des@des.no">des@des.no</a>&#62;.</div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
September 12, 2014</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
</html>

