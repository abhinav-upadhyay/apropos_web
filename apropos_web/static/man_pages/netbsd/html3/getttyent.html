<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="../style.css" type="text/css" media="all">
<title>
GETTTYENT(3)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
GETTTYENT(3)</td>
<td class="head-vol" align="center">
Library Functions Manual</td>
<td class="head-rtitle" align="right">
GETTTYENT(3)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">getttyent</b>, <b class="name">getttynam</b>, <b class="name">setttyent</b>, <b class="name">setttyentpath</b>, <b class="name">endttyent</b> &#8212; <span class="desc">get ttys file entry</span></div>
<div class="section">
<h1 id="x4c494252415259">LIBRARY</h1> <span class="lib">Standard C Library (libc, &#45;lc)</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="includes">#include &lt;<a class="link-includes">ttyent.h</a>&gt;</b><p>
<i class="ftype">struct ttyent *</i><br>
<b class="fname">getttyent</b>(<i class="farg" style="white-space:nowrap;">void</i>);<p>
<i class="ftype">struct ttyent *</i><br>
<b class="fname">getttynam</b>(<i class="farg" style="white-space:nowrap;">const char *name</i>);<p>
<i class="ftype">int</i><br>
<b class="fname">setttyent</b>(<i class="farg" style="white-space:nowrap;">void</i>);<p>
<i class="ftype">int</i><br>
<b class="fname">setttyentpath</b>(<i class="farg" style="white-space:nowrap;">const char *path</i>);<p>
<i class="ftype">int</i><br>
<b class="fname">endttyent</b>(<i class="farg" style="white-space:nowrap;">void</i>);</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> The <b class="fname">getttyent</b>(), and <b class="fname">getttynam</b>() functions each return a pointer to an object, with the following structure, containing the broken-out fields of a line from the tty description file.<p>
<pre style="margin-left: 0.00ex;" class="lit display">
struct ttyent { 
	char	*ty_name;	/* terminal device name */ 
	char	*ty_getty;	/* command to execute */ 
	char	*ty_type;	/* terminal type */ 
#define	TTY_ON		0x01	/* enable logins */ 
#define	TTY_SECURE	0x02	/* allow uid of 0 to login */ 
#define	TTY_LOCAL	0x04	/* set 'CLOCAL' on open (dev. specific) */ 
#define	TTY_RTSCTS	0x08	/* set 'CRTSCTS' on open (dev. specific) */ 
#define	TTY_SOFTCAR	0x10	/* ignore hardware carrier (dev. spec.) */ 
#define	TTY_MDMBUF	0x20	/* set 'MDMBUF' on open (dev. specific) */ 
#define	TTY_DTRCTS	0x40	/* set 'CDTRCTS' on open (dev. specific) */ 
	int	ty_status;	/* flag values */ 
	char	*ty_window;	/* command for window manager */ 
	char	*ty_comment;	/* comment field */ 
	char	*ty_class;	/* category of tty usage */ 
};</pre>
<p>
The fields are as follows:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="farg">ty_name</i></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
The name of the character-special file.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="farg">ty_getty</i></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
The name of the command invoked by <a class="link-man" href="../8/init">init(8)</a> to initialize tty line characteristics.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="farg">ty_type</i></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
The name of the default terminal type connected to this tty line.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="farg">ty_status</i></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
A mask of bit fields which indicate various actions allowed on this tty line. The possible flags are as follows:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">TTY_ON</span></dt>
<dd class="list-tag" style="margin-left: 11.00ex;">
Enables logins (i.e., <a class="link-man" href="../8/init">init(8)</a> will start the command referenced by <i class="farg">ty_getty</i> on this entry).</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">TTY_SECURE</span></dt>
<dd class="list-tag" style="margin-left: 11.00ex;">
Allow users with a uid of 0 to login on this terminal.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">TTY_LOCAL</span></dt>
<dd class="list-tag" style="margin-left: 11.00ex;">
If the terminal port's driver supports it, cause the line to be treated as ``local.''</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">TTY_MDMBUF</span></dt>
<dd class="list-tag" style="margin-left: 11.00ex;">
If the terminal port's driver supports it, use DTR/DCD hardware flow control on the line by default.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">TTY_RTSCTS</span></dt>
<dd class="list-tag" style="margin-left: 11.00ex;">
If the terminal port's driver supports it, use full-duplex RTS/CTS hardware flow control on the line by default.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">TTY_SOFTCAR</span></dt>
<dd class="list-tag" style="margin-left: 11.00ex;">
If the terminal port's driver supports it, ignore hardware carrier on the line.</dd>
</dl>
</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="farg">ty_window</i></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
The command to execute for a window system associated with the line.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="farg">ty_comment</i></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
Any trailing comment field, with any leading hash marks (``#'') or whitespace removed.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="farg">ty_class</i></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
A key indexing into a capfile style database (/etc/ttyclasses) of attributes for this class of tty. No attributes are currently defined or used, so there are currently no functions to retrieve them.</dd>
</dl>
<p>
If any of the fields pointing to character strings are unspecified, they are returned as null pointers. The field <i class="farg">ty_status</i> will be zero if no flag values are specified.<p>
See <a class="link-man" href="../5/ttys">ttys(5)</a> for a more complete discussion of the meaning and usage of the fields.<p>
The <b class="fname">getttyent</b>() function reads the next line from the ttys file, opening the file if necessary. The <b class="fname">setttyent</b>() function rewinds the file if open, or opens the file if it is unopened. The <b class="fname">setttyentpath</b>() function is equivalent to <b class="fname">setttyent</b>() but accepts an additional argument to read the ttys information from an alternate file instead of the default location (defined in <span class="define">_PATH_TTYS</span>). The <b class="fname">endttyent</b>() function closes any open files.<p>
The <b class="fname">getttynam</b>() function searches from the beginning of the file until a matching <i class="farg">name</i> is found (or until <span class="define">EOF</span> is encountered).</div>
<div class="section">
<h1 id="x52455455524e2056414c554553">RETURN VALUES</h1> The routines <b class="fname">getttyent</b>() and <b class="fname">getttynam</b>() return a null pointer on <span class="define">EOF</span> or error. The <b class="fname">setttyent</b>() and <b class="fname">setttyentpath</b>() functions and <b class="fname">endttyent</b>() return 0 on failure and 1 on success.</div>
<div class="section">
<h1 id="x46494c4553">FILES</h1><dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/etc/ttys</i></dt>
<dd class="list-tag" style="margin-left: 9.00ex;">
</dd>
</dl>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../1/login">login(1)</a>, <a class="link-man" href="../3/ttyslot">ttyslot(3)</a>, <a class="link-man" href="../5/capfile">capfile(5)</a>, <a class="link-man" href="../5/gettytab">gettytab(5)</a>, <a class="link-man" href="../5/ttys">ttys(5)</a>, <a class="link-man" href="../8/getty">getty(8)</a>, <a class="link-man" href="../8/init">init(8)</a>, <a class="link-man" href="../8/ttyflags">ttyflags(8)</a></div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> The <b class="fname">getttyent</b>(), <b class="fname">getttynam</b>(), <b class="fname">setttyent</b>(), and <b class="fname">endttyent</b>() functions appeared in <span class="unix">4.3BSD</span>. The <b class="fname">setttyentpath</b>() function appeared in <span class="unix">NetBSD&#160;4.0</span>.</div>
<div class="section">
<h1 id="x42554753">BUGS</h1> These functions use static data storage; if the data is needed for future use, it should be copied before any subsequent calls overwrite it.</div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
February 7, 2014</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
</html>

