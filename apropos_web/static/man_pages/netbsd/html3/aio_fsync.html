<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="../style.css" type="text/css" media="all">
<title>
AIO_FSYNC(3)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
AIO_FSYNC(3)</td>
<td class="head-vol" align="center">
Library Functions Manual</td>
<td class="head-rtitle" align="right">
AIO_FSYNC(3)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">aio_fsync</b> &#8212; <span class="desc">asynchronous data synchronization of file (REALTIME)</span></div>
<div class="section">
<h1 id="x4c494252415259">LIBRARY</h1> <span class="lib">POSIX Real&#45;time Library (librt, &#45;lrt)</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="includes">#include &lt;<a class="link-includes">aio.h</a>&gt;</b><p>
<i class="ftype">int</i><br>
<b class="fname">aio_fsync</b>(<i class="farg" style="white-space:nowrap;">int op</i>, <i class="farg" style="white-space:nowrap;">struct aiocb *aiocbp</i>);</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> The <b class="fname">aio_fsync</b>() system call allows the calling process to force all modified data associated with the file descriptor <i class="farg">aiocbp-&gt;aio_fildes</i> to be flushed to the stable storage device. The call returns immediately after the synchronization request has been enqueued to the descriptor; the synchronization may or may not have completed at the time the call returns. If the request could not be enqueued, generally due to invalid arguments, the call returns without having enqueued the request.<p>
The <i class="farg">op</i> argument could be set only to <span class="define">O_DSYNC</span> or <span class="define">O_SYNC</span>. If <i class="farg">op</i> is <span class="define">O_DSYNC</span>, then <b class="fname">aio_fsync</b>() does the same as a <b class="fname">fdatasync</b>() call, if <span class="define">O_SYNC</span>, then the same as <b class="fname">fsync</b>().<p>
If <span class="define">_POSIX_PRIORITIZED_IO</span> is defined, and the descriptor supports it, then the enqueued operation is submitted at a priority equal to that of the calling process minus <i class="farg">aiocbp-&gt;aio_reqprio</i>.<p>
The <i class="farg">aiocbp</i> pointer may be subsequently used as an argument to <b class="fname">aio_return</b>() and <b class="fname">aio_error</b>() in order to determine return or error status for the enqueued operation while it is in progress.</div>
<div class="section">
<h1 id="x52455455524e2056414c554553">RETURN VALUES</h1> The <b class="fname">aio_fsync</b>() function returns the value 0 if successful; otherwise the value -1 is returned and the global variable <b class="var">errno</b> is set to indicate the error.</div>
<div class="section">
<h1 id="x4552524f5253">ERRORS</h1> The <b class="fname">aio_fsync</b>() system call will fail if:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">EAGAIN</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The request was not queued because of system resource limitations.</dd>
</dl>
<p>
The following conditions may be synchronously detected when the <b class="fname">aio_fsync</b>() system call is made, or asynchronously, at any time thereafter. If they are detected at call time, <b class="fname">aio_fsync</b>() returns &#45;1 and sets <b class="var">errno</b> appropriately; otherwise the <b class="fname">aio_return</b>() system call must be called, and will return &#45;1, and <b class="fname">aio_error</b>() must be called to determine the actual value that would have been returned in <b class="var">errno</b>.<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">EBADF</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The <i class="farg">aiocbp-&gt;aio_fildes</i> is invalid for writing.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">EINVAL</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
This implementation does not support synchronized I/O for this file, or the <i class="farg">op</i> argument is neither set to <span class="define">O_DSYNC</span> nor <span class="define">O_SYNC</span>.</dd>
</dl>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../2/fcntl">fcntl(2)</a>, <a class="link-man" href="../2/fdatasync">fdatasync(2)</a>, <a class="link-man" href="../2/fsync">fsync(2)</a>, <a class="link-man" href="../3/aio">aio(3)</a></div>
<div class="section">
<h1 id="x5354414e4441524453">STANDARDS</h1> The <b class="fname">aio_fsync</b>() system call is expected to conform to the IEEE Std 1003.1-2001 (&#8220;POSIX.1&#8221;) standard.</div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> The <b class="fname">aio_fsync</b>() system call first appeared in <span class="unix">NetBSD&#160;5.0</span>.</div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
May 17, 2010</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
</html>

