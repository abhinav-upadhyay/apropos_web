<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/../4/strict.dtd">
>
<head>
<meta http-equiv="Content-Type" content="te../; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="../style.css" type="text/css" media="all">
<title>
BIO_s_file(3)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
BIO_s_file(3)</td>
<td class="head-vol" align="center">
OpenSSL</td>
<td class="head-rtitle" align="right">
BIO_s_file(3)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>NAME</h1> BIO_s_file, BIO_new_file, BIO_new_fp, BIO_set_fp, BIO_get_fp, BIO_read_filename, BIO_write_filename, BIO_append_filename, BIO_rw_filename &#45; FILE bio</div>
<div class="section">
<h1>LIBRARY</h1> libcrypto, -lcrypto</div>
<div class="section">
<h1>SYNOPSIS</h1><br>
 #include &lt;openssl/bio.h&gt;<br>
<br>
 BIO_METHOD *   BIO_s_file(void);<br>
 BIO *BIO_new_file(const char *filename, const char *mode);<br>
 BIO *BIO_new_fp(FILE *stream, int flags);<br>
<br>
 BIO_set_fp(BIO *b,FILE *fp, int flags);<br>
 BIO_get_fp(BIO *b,FILE **fpp);<br>
<br>
 int BIO_read_filename(BIO *b, char *name)<br>
 int BIO_write_filename(BIO *b, char *name)<br>
 int BIO_append_filename(BIO *b, char *name)<br>
 int BIO_rw_filename(BIO *b, char *name)<br>
</div>
<div class="section">
<h1>DESCRIPTION</h1>  <i>BIO_s_file()</i> returns the BIO file method. As its name implies it is a wrapper round the stdio FILE structure and it is a source/sink BIO.<p>
Calls to <i>BIO_read()</i> and <i>BIO_write()</i> read and write data to the underlying stream.  <i>BIO_gets()</i> and <i>BIO_puts()</i> are supported on file BIOs.<p>
<i>BIO_flush()</i> on a file BIO calls the <i>fflush()</i> function on the wrapped stream.<p>
<i>BIO_reset()</i> attempts to change the file pointer to the start of file using fseek(stream, 0, 0).<p>
<i>BIO_seek()</i> sets the file pointer to position <b>ofs</b> from start of file using fseek(stream, ofs, 0).<p>
<i>BIO_eof()</i> calls <i>feof()</i>.<p>
Setting the BIO_CLOSE flag calls <i>fclose()</i> on the stream when the BIO is freed.<p>
<i>BIO_new_file()</i> creates a new file BIO with mode <b>mode</b> the meaning of  <b>mode</b> is the same as the stdio function <i>fopen()</i>. The BIO_CLOSE flag is set on the returned BIO.<p>
<i>BIO_new_fp()</i> creates a file BIO wrapping <b>stream</b>. Flags can be: BIO_CLOSE, BIO_NOCLOSE (the close flag) BIO_FP_TEXT (sets the underlying stream to text mode, default is binary: this only has any effect under Win32).<p>
<i>BIO_set_fp()</i> set the fp of a file BIO to <b>fp</b>. <b>flags</b> has the same meaning as in  <i>BIO_new_fp()</i>, it is a macro.<p>
<i>BIO_get_fp()</i> retrieves the fp of a file BIO, it is a macro.<p>
<i>BIO_seek()</i> is a macro that sets the position pointer to <b>offset</b> bytes from the start of file.<p>
<i>BIO_tell()</i> returns the value of the position pointer.<p>
<i>BIO_read_filename()</i>, <i>BIO_write_filename()</i>, <i>BIO_append_filename()</i> and  <i>BIO_rw_filename()</i> set the file BIO <b>b</b> to use file <b>name</b> for reading, writing, append or read write respectively.</div>
<div class="section">
<h1>NOTES</h1> When wrapping stdout, stdin or stderr the underlying stream should not normally be closed so the BIO_NOCLOSE flag should be set.<p>
Because the file BIO calls the underlying stdio functions any quirks in stdio behaviour will be mirrored by the corresponding BIO.<p>
On Windows BIO_new_files reserves for the filename argument to be UTF&#45;8 encoded. In other words if you have to make it work in multi&#45; lingual environment, encode file names in UTF&#45;8.</div>
<div class="section">
<h1>EXAMPLES</h1> File BIO "hello world":<p>
<br>
 BIO *bio_out;<br>
 bio_out = BIO_new_fp(stdout, BIO_NOCLOSE);<br>
 BIO_printf(bio_out, "Hello World&#92;n");<br>
<p>
Alternative technique:<p>
<br>
 BIO *bio_out;<br>
 bio_out = BIO_new(BIO_s_file());<br>
 if(bio_out == NULL) /* Error ... */<br>
 if(!BIO_set_fp(bio_out, stdout, BIO_NOCLOSE)) /* Error ... */<br>
 BIO_printf(bio_out, "Hello World&#92;n");<br>
<p>
Write to a file:<p>
<br>
 BIO *out;<br>
 out = BIO_new_file("filename.txt", "w");<br>
 if(!out) /* Error occurred */<br>
 BIO_printf(out, "Hello World&#92;n");<br>
 BIO_free(out);<br>
<p>
Alternative technique:<p>
<br>
 BIO *out;<br>
 out = BIO_new(BIO_s_file());<br>
 if(out == NULL) /* Error ... */<br>
 if(!BIO_write_filename(out, "filename.txt")) /* Error ... */<br>
 BIO_printf(out, "Hello World&#92;n");<br>
 BIO_free(out);<br>
</div>
<div class="section">
<h1>RETURN VALUES</h1>  <i>BIO_s_file()</i> returns the file BIO method.<p>
<i>BIO_new_file()</i> and <i>BIO_new_fp()</i> return a file BIO or NULL if an error occurred.<p>
<i>BIO_set_fp()</i> and <i>BIO_get_fp()</i> return 1 for success or 0 for failure (although the current implementation never return 0).<p>
<i>BIO_seek()</i> returns the same value as the underlying <i>fseek()</i> function: 0 for success or &#45;1 for failure.<p>
<i>BIO_tell()</i> returns the current file position.<p>
<i>BIO_read_filename()</i>, <i>BIO_write_filename()</i>,  <i>BIO_append_filename()</i> and  <i>BIO_rw_filename()</i> return 1 for success or 0 for failure.</div>
<div class="section">
<h1>BUGS</h1>  <i>BIO_reset()</i> and <i>BIO_seek()</i> are implemented using <i>fseek()</i> on the underlying stream. The return value for  <i>fseek()</i> is 0 for success or &#45;1 if an error occurred this differs from other types of BIO which will typically return 1 for success and a non positive value if an error occurred.</div>
<div class="section">
<h1>SEE ALSO</h1>  <i>BIO_seek</i>(3), <i>BIO_tell</i>(3),  <i>BIO_reset</i>(3), <i>BIO_flush</i>(3),  <i>BIO_read</i>(3),  <i>BIO_write</i>(3), <i>BIO_puts</i>(3),  <i>BIO_gets</i>(3), <i>BIO_printf</i>(3),  <i>BIO_set_close</i>(3), <i>BIO_get_close</i>(3)</div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tr>
<td class="foot-date">
2011-06-05</td>
<td class="foot-os" align="right">
1.0.1n</td>
</tr>
</table>
</div>
</body>
<>

