<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="../style.css" type="text/css" media="all">
<title>
PMC(3)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
PMC(3)</td>
<td class="head-vol" align="center">
Library Functions Manual</td>
<td class="head-rtitle" align="right">
PMC(3)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">pmc_configure_counter</b>, <b class="name">pmc_start_counter</b>, <b class="name">pmc_stop_counter</b>, <b class="name">pmc_get_num_counters</b>, <b class="name">pmc_get_counter_class</b>, <b class="name">pmc_get_counter_type</b>, <b class="name">pmc_get_counter_value</b>, <b class="name">pmc_get_accumulated_counter_value</b>, <b class="name">pmc_get_counter_class_name</b>, <b class="name">pmc_get_counter_type_name</b>, <b class="name">pmc_get_counter_event_name</b>, <b class="name">pmc_get_counter_event_list</b> &#8212; <span class="desc">performance counter interface library</span></div>
<div class="section">
<h1 id="x4c494252415259">LIBRARY</h1> <span class="lib">Performance Counters Library (libpmc, &#45;lpmc)</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="includes">#include &lt;<a class="link-includes">pmc.h</a>&gt;</b><p>
<i class="ftype">int</i><br>
<b class="fname">pmc_configure_counter</b>(<i class="farg" style="white-space:nowrap;">int ctr</i>, <i class="farg" style="white-space:nowrap;">const char *evname</i>, <i class="farg" style="white-space:nowrap;">pmc_ctr_t reset_val</i>, <i class="farg" style="white-space:nowrap;">uint32_t flags</i>);<p>
<i class="ftype">int</i><br>
<b class="fname">pmc_start_counter</b>(<i class="farg" style="white-space:nowrap;">int ctr</i>);<p>
<i class="ftype">int</i><br>
<b class="fname">pmc_stop_counter</b>(<i class="farg" style="white-space:nowrap;">int ctr</i>);<p>
<i class="ftype">int</i><br>
<b class="fname">pmc_get_num_counters</b>(<i class="farg" style="white-space:nowrap;">void</i>);<p>
<i class="ftype">int</i><br>
<b class="fname">pmc_get_counter_class</b>(<i class="farg" style="white-space:nowrap;">void</i>);<p>
<i class="ftype">int</i><br>
<b class="fname">pmc_get_counter_type</b>(<i class="farg" style="white-space:nowrap;">int ctr</i>, <i class="farg" style="white-space:nowrap;">int *typep</i>);<p>
<i class="ftype">int</i><br>
<b class="fname">pmc_get_counter_value</b>(<i class="farg" style="white-space:nowrap;">int ctr</i>, <i class="farg" style="white-space:nowrap;">uint64_t *valp</i>);<p>
<i class="ftype">int</i><br>
<b class="fname">pmc_get_accumulated_counter_value</b>(<i class="farg" style="white-space:nowrap;">int ctr</i>, <i class="farg" style="white-space:nowrap;">uint64_t *valp</i>);<p>
<i class="ftype">const char *</i><br>
<b class="fname">pmc_get_counter_class_name</b>(<i class="farg" style="white-space:nowrap;">int class</i>);<p>
<i class="ftype">const char *</i><br>
<b class="fname">pmc_get_counter_type_name</b>(<i class="farg" style="white-space:nowrap;">int type</i>);<p>
<i class="ftype">const char *</i><br>
<b class="fname">pmc_get_counter_event_name</b>(<i class="farg" style="white-space:nowrap;">pmc_evid_t event</i>);<p>
<i class="ftype">const struct pmc_event *</i><br>
<b class="fname">pmc_get_counter_event_list</b>(<i class="farg" style="white-space:nowrap;">void</i>);</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> The <b class="name">pmc</b> library is an interface to performance monitoring counters available on some CPUs.<p>
The <b class="name">pmc</b> library can count events on the following CPU families. Each second-level entry describes a performance counter class. A given class may apply to multiple individual CPU models. Each class has one or more counter types. A CPU may have more than one counter of a given type. Refer to the corresponding processor programmer's manual for more information about individual events.<ul style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-bul">
<li class="list-bul" style="margin-top: 1.00em;">
ARM<ul style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-bul">
<li class="list-bul" style="margin-top: 1.00em;">
Intel i80200 (PMC_CLASS_I80200)<p>
There are two types of counters available in this class:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
PMC_TYPE_I80200_CCNT</dt>
<dd class="list-tag" style="margin-left: 22.00ex;">
cycle counter</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
PMC_TYPE_I80200_PMCx</dt>
<dd class="list-tag" style="margin-left: 22.00ex;">
performance counter</dd>
</dl>
<p>
The following events may be counted by a counter of type PMC_TYPE_I80200_CCNT:<p>
<ul style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 5.00ex;" class="list list-item">
<li class="list-item" style="margin-top: 0.00em;">
clock</li>
<li class="list-item" style="margin-top: 0.00em;">
clock-div-64</li>
</ul>
<p>
The following events may be counted by a counter of type PMC_TYPE_I80200_PMCx:<p>
<ul style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 5.00ex;" class="list list-item">
<li class="list-item" style="margin-top: 0.00em;">
insfetch-miss</li>
<li class="list-item" style="margin-top: 0.00em;">
insfetch-stall</li>
<li class="list-item" style="margin-top: 0.00em;">
datadep-stall</li>
<li class="list-item" style="margin-top: 0.00em;">
itlb-miss</li>
<li class="list-item" style="margin-top: 0.00em;">
dtlb-miss</li>
<li class="list-item" style="margin-top: 0.00em;">
branch-taken</li>
<li class="list-item" style="margin-top: 0.00em;">
branch-mispredicted</li>
<li class="list-item" style="margin-top: 0.00em;">
instruction-executed</li>
<li class="list-item" style="margin-top: 0.00em;">
dcachebufffull-stall-time</li>
<li class="list-item" style="margin-top: 0.00em;">
dcachebufffull-stall-count</li>
<li class="list-item" style="margin-top: 0.00em;">
dcache-access</li>
<li class="list-item" style="margin-top: 0.00em;">
dcache-miss</li>
<li class="list-item" style="margin-top: 0.00em;">
dcache-writeback</li>
<li class="list-item" style="margin-top: 0.00em;">
swchange-pc</li>
<li class="list-item" style="margin-top: 0.00em;">
bcu-mem-request</li>
<li class="list-item" style="margin-top: 0.00em;">
bcu-queue-full</li>
<li class="list-item" style="margin-top: 0.00em;">
bcu-queue-drain</li>
<li class="list-item" style="margin-top: 0.00em;">
bcu-ecc-no-elog</li>
<li class="list-item" style="margin-top: 0.00em;">
bcu-1bit-error</li>
<li class="list-item" style="margin-top: 0.00em;">
narrow-ecc-caused-rmw</li>
</ul>
</li>
</ul>
</li>
<li class="list-bul" style="margin-top: 1.00em;">
i386<ul style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-bul">
<li class="list-bul" style="margin-top: 1.00em;">
Intel i586 (PMC_CLASS_I586)<p>
There are two types of counters available in this class:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
PMC_TYPE_I586_TSC</dt>
<dd class="list-tag" style="margin-left: 20.00ex;">
cycle counter</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
PMC_TYPE_I586_PMCx</dt>
<dd class="list-tag" style="margin-left: 20.00ex;">
performance counter</dd>
</dl>
<p>
The following events may be counted by a counter of type PMC_TYPE_I586_PMCx:<p>
<ul style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 5.00ex;" class="list list-item">
<li class="list-item" style="margin-top: 0.00em;">
tlb-data-miss</li>
<li class="list-item" style="margin-top: 0.00em;">
tlb-ins-miss</li>
<li class="list-item" style="margin-top: 0.00em;">
l1cache-ins-miss</li>
<li class="list-item" style="margin-top: 0.00em;">
l1cache-data-miss</li>
<li class="list-item" style="margin-top: 0.00em;">
l1cache-data-miss-read</li>
<li class="list-item" style="margin-top: 0.00em;">
l1cache-data-miss-write</li>
<li class="list-item" style="margin-top: 0.00em;">
l1cache-writeback</li>
<li class="list-item" style="margin-top: 0.00em;">
l1cache-writeback-hit</li>
<li class="list-item" style="margin-top: 0.00em;">
l2cache-data-snoop</li>
<li class="list-item" style="margin-top: 0.00em;">
l2cache-data-snoop-hit</li>
<li class="list-item" style="margin-top: 0.00em;">
mem-read</li>
<li class="list-item" style="margin-top: 0.00em;">
mem-write</li>
<li class="list-item" style="margin-top: 0.00em;">
mem-access</li>
<li class="list-item" style="margin-top: 0.00em;">
mem-access-both-pipes</li>
<li class="list-item" style="margin-top: 0.00em;">
mem-bank-conflicts</li>
<li class="list-item" style="margin-top: 0.00em;">
mem-misalign-ref</li>
<li class="list-item" style="margin-top: 0.00em;">
mem-uncached-read</li>
<li class="list-item" style="margin-top: 0.00em;">
seg-load-any</li>
<li class="list-item" style="margin-top: 0.00em;">
branch</li>
<li class="list-item" style="margin-top: 0.00em;">
branch-btb-hit</li>
<li class="list-item" style="margin-top: 0.00em;">
branch-taken</li>
<li class="list-item" style="margin-top: 0.00em;">
ins-read</li>
<li class="list-item" style="margin-top: 0.00em;">
ins-pipeline-flush</li>
<li class="list-item" style="margin-top: 0.00em;">
ins-executed</li>
<li class="list-item" style="margin-top: 0.00em;">
ins-executed-vpipe</li>
<li class="list-item" style="margin-top: 0.00em;">
ins-stall-agi</li>
<li class="list-item" style="margin-top: 0.00em;">
ins-stall-write</li>
<li class="list-item" style="margin-top: 0.00em;">
ins-stall-data</li>
<li class="list-item" style="margin-top: 0.00em;">
ins-stall-writeline</li>
<li class="list-item" style="margin-top: 0.00em;">
bus-utilization</li>
<li class="list-item" style="margin-top: 0.00em;">
bus-locked</li>
<li class="list-item" style="margin-top: 0.00em;">
bus-io-cycle</li>
<li class="list-item" style="margin-top: 0.00em;">
fpu-flops</li>
<li class="list-item" style="margin-top: 0.00em;">
int-hw</li>
<li class="list-item" style="margin-top: 0.00em;">
break-match0</li>
<li class="list-item" style="margin-top: 0.00em;">
break-match1</li>
<li class="list-item" style="margin-top: 0.00em;">
break-match2</li>
<li class="list-item" style="margin-top: 0.00em;">
break-match3</li>
</ul>
</li>
<li class="list-bul" style="margin-top: 1.00em;">
Intel i686 (PMC_CLASS_I686)<p>
There are two types of counters available in this class:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
PMC_TYPE_I686_TSC</dt>
<dd class="list-tag" style="margin-left: 20.00ex;">
cycle counter</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
PMC_TYPE_I686_PMCx</dt>
<dd class="list-tag" style="margin-left: 20.00ex;">
performance counter</dd>
</dl>
<p>
The following events may be counted by a counter of type PMC_TYPE_I686_PMCx:<p>
<ul style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 5.00ex;" class="list list-item">
<li class="list-item" style="margin-top: 0.00em;">
mem-refs</li>
<li class="list-item" style="margin-top: 0.00em;">
l1cache-lines</li>
<li class="list-item" style="margin-top: 0.00em;">
l1cache-mlines</li>
<li class="list-item" style="margin-top: 0.00em;">
l1cache-mlines-evict</li>
<li class="list-item" style="margin-top: 0.00em;">
l1cache-miss-wait</li>
<li class="list-item" style="margin-top: 0.00em;">
ins-fetch</li>
<li class="list-item" style="margin-top: 0.00em;">
ins-fetch-misses</li>
<li class="list-item" style="margin-top: 0.00em;">
itlb-misses</li>
<li class="list-item" style="margin-top: 0.00em;">
insfetch-mem-stall</li>
<li class="list-item" style="margin-top: 0.00em;">
insfetch-decode-stall</li>
<li class="list-item" style="margin-top: 0.00em;">
l2cache-insfetch</li>
<li class="list-item" style="margin-top: 0.00em;">
l2cache-data-loads</li>
<li class="list-item" style="margin-top: 0.00em;">
l2cache-data-stores</li>
<li class="list-item" style="margin-top: 0.00em;">
l2cache-lines</li>
<li class="list-item" style="margin-top: 0.00em;">
l2cache-lines-evict</li>
<li class="list-item" style="margin-top: 0.00em;">
l2cache-mlines</li>
<li class="list-item" style="margin-top: 0.00em;">
l2cache-mlines-evict</li>
<li class="list-item" style="margin-top: 0.00em;">
l2cache-reqs</li>
<li class="list-item" style="margin-top: 0.00em;">
l2cache-addr-strobes</li>
<li class="list-item" style="margin-top: 0.00em;">
l2cache-data-busy</li>
<li class="list-item" style="margin-top: 0.00em;">
l2cache-data-busy-read</li>
<li class="list-item" style="margin-top: 0.00em;">
bus-drdy-clocks-self</li>
<li class="list-item" style="margin-top: 0.00em;">
bus-drdy-clocks-any</li>
<li class="list-item" style="margin-top: 0.00em;">
bus-lock-clocks-self</li>
<li class="list-item" style="margin-top: 0.00em;">
bus-lock-clocks-any</li>
<li class="list-item" style="margin-top: 0.00em;">
bus-req-outstanding-self</li>
<li class="list-item" style="margin-top: 0.00em;">
bus-req-outstanding-any</li>
<li class="list-item" style="margin-top: 0.00em;">
bus-burst-reads-self</li>
<li class="list-item" style="margin-top: 0.00em;">
bus-burst-reads-any</li>
<li class="list-item" style="margin-top: 0.00em;">
bus-read-for-ownership-self</li>
<li class="list-item" style="margin-top: 0.00em;">
bus-read-for-ownership-any</li>
<li class="list-item" style="margin-top: 0.00em;">
bus-write-back-self</li>
<li class="list-item" style="margin-top: 0.00em;">
bus-write-back-any</li>
<li class="list-item" style="margin-top: 0.00em;">
bus-ins-fetches-self</li>
<li class="list-item" style="margin-top: 0.00em;">
bus-ins-fetches-any</li>
<li class="list-item" style="margin-top: 0.00em;">
bus-invalidates-self</li>
<li class="list-item" style="margin-top: 0.00em;">
bus-invalidates-any</li>
<li class="list-item" style="margin-top: 0.00em;">
bus-partial-writes-self</li>
<li class="list-item" style="margin-top: 0.00em;">
bus-partial-writes-any</li>
<li class="list-item" style="margin-top: 0.00em;">
bus-partial-trans-self</li>
<li class="list-item" style="margin-top: 0.00em;">
bus-partial-trans-any</li>
<li class="list-item" style="margin-top: 0.00em;">
bus-io-trans-self</li>
<li class="list-item" style="margin-top: 0.00em;">
bus-io-trans-any</li>
<li class="list-item" style="margin-top: 0.00em;">
bus-deferred-trans-self</li>
<li class="list-item" style="margin-top: 0.00em;">
bus-deferred-trans-any</li>
<li class="list-item" style="margin-top: 0.00em;">
bus-burst-trans-self</li>
<li class="list-item" style="margin-top: 0.00em;">
bus-burst-trans-any</li>
<li class="list-item" style="margin-top: 0.00em;">
bus-total-trans-self</li>
<li class="list-item" style="margin-top: 0.00em;">
bus-total-trans-any</li>
<li class="list-item" style="margin-top: 0.00em;">
bus-mem-trans-self</li>
<li class="list-item" style="margin-top: 0.00em;">
bus-mem-trans-any</li>
<li class="list-item" style="margin-top: 0.00em;">
bus-recv-cycles</li>
<li class="list-item" style="margin-top: 0.00em;">
bus-bnr-cycles</li>
<li class="list-item" style="margin-top: 0.00em;">
bus-hit-cycles</li>
<li class="list-item" style="margin-top: 0.00em;">
bus-hitm-cycles</li>
<li class="list-item" style="margin-top: 0.00em;">
bus-snoop-stall</li>
<li class="list-item" style="margin-top: 0.00em;">
fpu-flops</li>
<li class="list-item" style="margin-top: 0.00em;">
fpu-comp-ops</li>
<li class="list-item" style="margin-top: 0.00em;">
fpu-except-assist</li>
<li class="list-item" style="margin-top: 0.00em;">
fpu-mul</li>
<li class="list-item" style="margin-top: 0.00em;">
fpu-div</li>
<li class="list-item" style="margin-top: 0.00em;">
fpu-div-busy</li>
<li class="list-item" style="margin-top: 0.00em;">
mem-sb-blocks</li>
<li class="list-item" style="margin-top: 0.00em;">
mem-sb-drains</li>
<li class="list-item" style="margin-top: 0.00em;">
mem-misalign-ref</li>
<li class="list-item" style="margin-top: 0.00em;">
ins-pref-dispatch-nta</li>
<li class="list-item" style="margin-top: 0.00em;">
ins-pref-dispatch-t1</li>
<li class="list-item" style="margin-top: 0.00em;">
ins-pref-dispatch-t2</li>
<li class="list-item" style="margin-top: 0.00em;">
ins-pref-dispatch-weak</li>
<li class="list-item" style="margin-top: 0.00em;">
ins-pref-miss-nta</li>
<li class="list-item" style="margin-top: 0.00em;">
ins-pref-miss-t1</li>
<li class="list-item" style="margin-top: 0.00em;">
ins-pref-miss-t2</li>
<li class="list-item" style="margin-top: 0.00em;">
ins-pref-miss-weak</li>
<li class="list-item" style="margin-top: 0.00em;">
ins-retired</li>
<li class="list-item" style="margin-top: 0.00em;">
uops-retired</li>
<li class="list-item" style="margin-top: 0.00em;">
ins-decoded</li>
<li class="list-item" style="margin-top: 0.00em;">
ins-stream-retired-packed-scalar</li>
<li class="list-item" style="margin-top: 0.00em;">
ins-stream-retired-scalar</li>
<li class="list-item" style="margin-top: 0.00em;">
ins-stream-comp-retired-packed-scalar</li>
<li class="list-item" style="margin-top: 0.00em;">
ins-stream-comp-retired-scalar</li>
<li class="list-item" style="margin-top: 0.00em;">
int-hw</li>
<li class="list-item" style="margin-top: 0.00em;">
int-cycles-masked</li>
<li class="list-item" style="margin-top: 0.00em;">
int-cycles-masked-pending</li>
<li class="list-item" style="margin-top: 0.00em;">
branch-retired</li>
<li class="list-item" style="margin-top: 0.00em;">
branch-miss-retired</li>
<li class="list-item" style="margin-top: 0.00em;">
branch-taken-retired</li>
<li class="list-item" style="margin-top: 0.00em;">
branch-taken-mispred-retired</li>
<li class="list-item" style="margin-top: 0.00em;">
branch-decoded</li>
<li class="list-item" style="margin-top: 0.00em;">
branch-btb-miss</li>
<li class="list-item" style="margin-top: 0.00em;">
branch-bogus</li>
<li class="list-item" style="margin-top: 0.00em;">
branch-baclear</li>
<li class="list-item" style="margin-top: 0.00em;">
stall-resource</li>
<li class="list-item" style="margin-top: 0.00em;">
stall-partial</li>
<li class="list-item" style="margin-top: 0.00em;">
seg-loads</li>
<li class="list-item" style="margin-top: 0.00em;">
unhalted-cycles</li>
<li class="list-item" style="margin-top: 0.00em;">
mmx-exec</li>
<li class="list-item" style="margin-top: 0.00em;">
mmx-sat-exec</li>
<li class="list-item" style="margin-top: 0.00em;">
mmx-uops-exec</li>
<li class="list-item" style="margin-top: 0.00em;">
mmx-exec-packed-mul</li>
<li class="list-item" style="margin-top: 0.00em;">
mmx-exec-packed-shift</li>
<li class="list-item" style="margin-top: 0.00em;">
mmx-exec-pack-ops</li>
<li class="list-item" style="margin-top: 0.00em;">
mmx-exec-unpack-ops</li>
<li class="list-item" style="margin-top: 0.00em;">
mmx-exec-packed-logical</li>
<li class="list-item" style="margin-top: 0.00em;">
mmx-exec-packed-arith</li>
<li class="list-item" style="margin-top: 0.00em;">
mmx-trans-mmx-float</li>
<li class="list-item" style="margin-top: 0.00em;">
mmx-trans-float-mmx</li>
<li class="list-item" style="margin-top: 0.00em;">
mmx-assist</li>
<li class="list-item" style="margin-top: 0.00em;">
mmx-retire</li>
<li class="list-item" style="margin-top: 0.00em;">
seg-rename-stalls-es</li>
<li class="list-item" style="margin-top: 0.00em;">
seg-rename-stalls-ds</li>
<li class="list-item" style="margin-top: 0.00em;">
seg-rename-stalls-fs</li>
<li class="list-item" style="margin-top: 0.00em;">
seg-rename-stalls-gs</li>
<li class="list-item" style="margin-top: 0.00em;">
seg-rename-stalls-all</li>
<li class="list-item" style="margin-top: 0.00em;">
seg-rename-es</li>
<li class="list-item" style="margin-top: 0.00em;">
seg-rename-ds</li>
<li class="list-item" style="margin-top: 0.00em;">
seg-rename-fs</li>
<li class="list-item" style="margin-top: 0.00em;">
seg-rename-gs</li>
<li class="list-item" style="margin-top: 0.00em;">
seg-rename-all</li>
<li class="list-item" style="margin-top: 0.00em;">
seg-rename-retire</li>
</ul>
</li>
<li class="list-bul" style="margin-top: 1.00em;">
AMD Athlon / K7 (PMC_CLASS_K7)<p>
There are two types of counters available in this class:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
PMC_TYPE_K7_TSC</dt>
<dd class="list-tag" style="margin-left: 18.00ex;">
cycle counter</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
PMC_TYPE_K7_PMCx</dt>
<dd class="list-tag" style="margin-left: 18.00ex;">
performance counter</dd>
</dl>
<p>
The following events may be counted by a counter of type PMC_TYPE_K7_PMCx:<p>
<ul style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 5.00ex;" class="list list-item">
<li class="list-item" style="margin-top: 0.00em;">
seg-load-all</li>
<li class="list-item" style="margin-top: 0.00em;">
seg-load-es</li>
<li class="list-item" style="margin-top: 0.00em;">
seg-load-cs</li>
<li class="list-item" style="margin-top: 0.00em;">
seg-load-ss</li>
<li class="list-item" style="margin-top: 0.00em;">
seg-load-ds</li>
<li class="list-item" style="margin-top: 0.00em;">
seg-load-fs</li>
<li class="list-item" style="margin-top: 0.00em;">
seg-load-gs</li>
<li class="list-item" style="margin-top: 0.00em;">
seg-load-hs</li>
<li class="list-item" style="margin-top: 0.00em;">
seg-load-stall</li>
<li class="list-item" style="margin-top: 0.00em;">
l1cache-access</li>
<li class="list-item" style="margin-top: 0.00em;">
l1cache-miss</li>
<li class="list-item" style="margin-top: 0.00em;">
l1cache-refill</li>
<li class="list-item" style="margin-top: 0.00em;">
l1cache-refill-invalid</li>
<li class="list-item" style="margin-top: 0.00em;">
l1cache-refill-shared</li>
<li class="list-item" style="margin-top: 0.00em;">
l1cache-refill-exclusive</li>
<li class="list-item" style="margin-top: 0.00em;">
l1cache-refill-owner</li>
<li class="list-item" style="margin-top: 0.00em;">
l1cache-refill-modified</li>
<li class="list-item" style="margin-top: 0.00em;">
l1cache-load</li>
<li class="list-item" style="margin-top: 0.00em;">
l1cache-load-invalid</li>
<li class="list-item" style="margin-top: 0.00em;">
l1cache-load-shared</li>
<li class="list-item" style="margin-top: 0.00em;">
l1cache-load-exclusive</li>
<li class="list-item" style="margin-top: 0.00em;">
l1cache-load-owner</li>
<li class="list-item" style="margin-top: 0.00em;">
l1cache-load-modified</li>
<li class="list-item" style="margin-top: 0.00em;">
l1cache-writeback</li>
<li class="list-item" style="margin-top: 0.00em;">
l1cache-writeback-invalid</li>
<li class="list-item" style="margin-top: 0.00em;">
l1cache-writeback-shared</li>
<li class="list-item" style="margin-top: 0.00em;">
l1cache-writeback-exclusive</li>
<li class="list-item" style="margin-top: 0.00em;">
l1cache-writeback-owner</li>
<li class="list-item" style="margin-top: 0.00em;">
l1cache-writeback-modified</li>
<li class="list-item" style="margin-top: 0.00em;">
l2cache-access</li>
<li class="list-item" style="margin-top: 0.00em;">
l2cache-tag-read</li>
<li class="list-item" style="margin-top: 0.00em;">
l2cache-tag-write</li>
<li class="list-item" style="margin-top: 0.00em;">
l2cache-inst-read</li>
<li class="list-item" style="margin-top: 0.00em;">
l2cache-inst-load</li>
<li class="list-item" style="margin-top: 0.00em;">
l2cache-data-store</li>
<li class="list-item" style="margin-top: 0.00em;">
l2cache-data-loadmem</li>
<li class="list-item" style="margin-top: 0.00em;">
l2cache-data-write</li>
<li class="list-item" style="margin-top: 0.00em;">
l2cache-data-move</li>
<li class="list-item" style="margin-top: 0.00em;">
l2cache-access-busy</li>
<li class="list-item" style="margin-top: 0.00em;">
l2cache-hit</li>
<li class="list-item" style="margin-top: 0.00em;">
l2cache-miss</li>
<li class="list-item" style="margin-top: 0.00em;">
mem-misalign-ref</li>
<li class="list-item" style="margin-top: 0.00em;">
mem-access</li>
<li class="list-item" style="margin-top: 0.00em;">
mem-access-uc</li>
<li class="list-item" style="margin-top: 0.00em;">
mem-access-wc</li>
<li class="list-item" style="margin-top: 0.00em;">
mem-access-wt</li>
<li class="list-item" style="margin-top: 0.00em;">
mem-access-wp</li>
<li class="list-item" style="margin-top: 0.00em;">
mem-access-wb</li>
<li class="list-item" style="margin-top: 0.00em;">
ins-fetch</li>
<li class="list-item" style="margin-top: 0.00em;">
ins-fetch-miss</li>
<li class="list-item" style="margin-top: 0.00em;">
ins-refill-l2</li>
<li class="list-item" style="margin-top: 0.00em;">
ins-refill-mem</li>
<li class="list-item" style="margin-top: 0.00em;">
ins-fetch-stall</li>
<li class="list-item" style="margin-top: 0.00em;">
ins-retired</li>
<li class="list-item" style="margin-top: 0.00em;">
ins-empty</li>
<li class="list-item" style="margin-top: 0.00em;">
itlb-miss-l1</li>
<li class="list-item" style="margin-top: 0.00em;">
itlb-miss-l2</li>
<li class="list-item" style="margin-top: 0.00em;">
ops-retired</li>
<li class="list-item" style="margin-top: 0.00em;">
branch-retired</li>
<li class="list-item" style="margin-top: 0.00em;">
branch-miss-retired</li>
<li class="list-item" style="margin-top: 0.00em;">
branch-taken-retired</li>
<li class="list-item" style="margin-top: 0.00em;">
branch-taken-miss-retired</li>
<li class="list-item" style="margin-top: 0.00em;">
branch-far-retired</li>
<li class="list-item" style="margin-top: 0.00em;">
branch-resync-retired</li>
<li class="list-item" style="margin-top: 0.00em;">
branch-near-retired</li>
<li class="list-item" style="margin-top: 0.00em;">
branch-near-miss-retired</li>
<li class="list-item" style="margin-top: 0.00em;">
branch-indirect-miss-retired</li>
<li class="list-item" style="margin-top: 0.00em;">
int-hw</li>
<li class="list-item" style="margin-top: 0.00em;">
int-cycles-masked</li>
<li class="list-item" style="margin-top: 0.00em;">
int-cycles-masked-pending</li>
<li class="list-item" style="margin-top: 0.00em;">
break-match0</li>
<li class="list-item" style="margin-top: 0.00em;">
break-match1</li>
<li class="list-item" style="margin-top: 0.00em;">
break-match2</li>
<li class="list-item" style="margin-top: 0.00em;">
break-match3</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>
The <b class="name">pmc</b> library maintains a mapping between event names and the event selector used by the CPU's performance monitoring hardware. The mapping is described by the following structure:<p>
<pre style="margin-left: 5.00ex;" class="lit display">
struct pmc_event { 
	const char *name; 
	pmc_evid_t val; 
};</pre>
<p>
The <b class="fname">pmc_configure_counter</b>() function configures the counter <i class="farg">ctr</i> to count the event <i class="farg">evname</i>. The initial value of the counter will be set to <i class="farg">reset_val</i>, and this value will be loaded back into the counter each time it overflows. There are currently no flags defined for the <i class="farg">flags</i> argument.<p>
The <b class="fname">pmc_start_counter</b>() function enables counting on counter <i class="farg">ctr</i>.<p>
The <b class="fname">pmc_stop_counter</b>() function disables counting on counter <i class="farg">ctr</i>.<p>
The <b class="fname">pmc_get_num_counters</b>() function returns the number of counters present in the CPU.<p>
The <b class="fname">pmc_get_counter_class</b>() function returns the counter class of the CPU.<p>
The <b class="fname">pmc_get_counter_type</b>() function places the counter type of counter <i class="farg">ctr</i> into <i class="farg">*typep</i>.<p>
The <b class="fname">pmc_get_counter_value</b>() function places the total number of events counted by counter <i class="farg">ctr</i> into <i class="farg">*valp</i>.<p>
The <b class="fname">pmc_get_accumulated_counter_value</b>() function places the total number of events counted for the current process and all of its children by counter <i class="farg">ctr</i> into <i class="farg">*valp</i>.<p>
The <b class="fname">pmc_get_counter_class_name</b>() function returns the name of the counter class <i class="farg">classval</i>.<p>
The <b class="fname">pmc_get_counter_type_name</b>() function returns the name of the counter type <i class="farg">type</i>.<p>
The <b class="fname">pmc_get_counter_event_name</b>() function returns the name of the event <i class="farg">event</i> for the current CPU's performance counter class.<p>
The <b class="fname">pmc_get_counter_event_list</b>() function returns an array of <span class="emph">pmc_event</span> structures, listing the supported event types for the CPU. The array is terminated by and entry who's <span class="emph">name</span> member is NULL.</div>
<div class="section">
<h1 id="x52455455524e2056414c554553">RETURN VALUES</h1> The <b class="fname">pmc_configure_counter</b>(), <b class="fname">pmc_start_counter</b>(), <b class="fname">pmc_stop_counter</b>(), <b class="fname">pmc_get_counter_type</b>(), <b class="fname">pmc_get_counter_value</b>(), and <b class="fname">pmc_get_accumulated_counter_value</b>() functions return 0 to indicate success and &#45;1 to indicate failure, in which case <a class="link-man" href="../html2/errno.html">errno(2)</a> will be set to indicate the mode of failure.<p>
The <b class="fname">pmc_get_counter_class_name</b>(), <b class="fname">pmc_get_counter_type_name</b>(), <b class="fname">pmc_get_counter_event_name</b>(), and <b class="fname">pmc_get_counter_event_list</b>() functions return NULL and set <a class="link-man" href="../html2/errno.html">errno(2)</a> to indicate failure.</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../html1/pmc.html">pmc(1)</a>, <a class="link-man" href="../html2/pmc_control.html">pmc_control(2)</a>, <a class="link-man" href="../html2/pmc_get_info.html">pmc_get_info(2)</a>, <a class="link-man" href="../html9/pmc.html">pmc(9)</a></div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> The <b class="name">pmc</b> library first appeared in <span class="unix">NetBSD&#160;2.0</span>.</div>
<div class="section">
<h1 id="x415554484f5253">AUTHORS</h1> The <b class="name">pmc</b> library was written by <span class="author">Jason R. Thorpe</span> &#60;thorpej@wasabisystems.com&#62; and contributed by Wasabi Systems, Inc.</div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
August 8, 2002</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
</html>

