<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="../style.css" type="text/css" media="all">
<title>
PROP_DICTIONARY(3)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
PROP_DICTIONARY(3)</td>
<td class="head-vol" align="center">
Library Functions Manual</td>
<td class="head-rtitle" align="right">
PROP_DICTIONARY(3)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">prop_dictionary</b>, <b class="name">prop_dictionary_create</b>, <b class="name">prop_dictionary_create_with_capacity</b>, <b class="name">prop_dictionary_copy</b>, <b class="name">prop_dictionary_copy_mutable</b>, <b class="name">prop_dictionary_count</b>, <b class="name">prop_dictionary_ensure_capacity</b>, <b class="name">prop_dictionary_iterator</b>, <b class="name">prop_dictionary_all_keys</b>, <b class="name">prop_dictionary_make_immutable</b>, <b class="name">prop_dictionary_mutable</b>, <b class="name">prop_dictionary_get</b>, <b class="name">prop_dictionary_set</b>, <b class="name">prop_dictionary_remove</b>, <b class="name">prop_dictionary_get_keysym</b>, <b class="name">prop_dictionary_set_keysym</b>, <b class="name">prop_dictionary_remove_keysym</b>, <b class="name">prop_dictionary_externalize</b>, <b class="name">prop_dictionary_internalize</b>, <b class="name">prop_dictionary_externalize_to_file</b>, <b class="name">prop_dictionary_internalize_from_file</b>, <b class="name">prop_dictionary_externalize_to_pref</b>, <b class="name">prop_dictionary_internalize_from_pref</b>, <b class="name">prop_dictionary_equals</b>, <b class="name">prop_dictionary_keysym_cstring_nocopy</b>, <b class="name">prop_dictionary_keysym_equals</b> &#8212; <span class="desc">dictionary property collection object</span></div>
<div class="section">
<h1 id="x4c494252415259">LIBRARY</h1> <span class="lib">Property Container Object Library (libprop, &#45;lprop)</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="includes">#include &lt;<a class="link-includes">prop/proplib.h</a>&gt;</b><p>
<i class="ftype">prop_dictionary_t</i><br>
<b class="fname">prop_dictionary_create</b>(<i class="farg" style="white-space:nowrap;">void</i>);<p>
<i class="ftype">prop_dictionary_t</i><br>
<b class="fname">prop_dictionary_create_with_capacity</b>(<i class="farg" style="white-space:nowrap;">unsigned int capacity</i>);<p>
<i class="ftype">prop_dictionary_t</i><br>
<b class="fname">prop_dictionary_copy</b>(<i class="farg" style="white-space:nowrap;">prop_dictionary_t dict</i>);<p>
<i class="ftype">prop_dictionary_t</i><br>
<b class="fname">prop_dictionary_copy_mutable</b>(<i class="farg" style="white-space:nowrap;">prop_dictionary_t dict</i>);<p>
<i class="ftype">unsigned int</i><br>
<b class="fname">prop_dictionary_count</b>(<i class="farg" style="white-space:nowrap;">prop_dictionary_t dict</i>);<p>
<i class="ftype">bool</i><br>
<b class="fname">prop_dictionary_ensure_capacity</b>(<i class="farg" style="white-space:nowrap;">prop_dictionary_t dict</i>, <i class="farg" style="white-space:nowrap;">unsigned int capacity</i>);<p>
<i class="ftype">prop_object_iterator_t</i><br>
<b class="fname">prop_dictionary_iterator</b>(<i class="farg" style="white-space:nowrap;">prop_dictionary_t dict</i>);<p>
<i class="ftype">prop_array_t</i><br>
<b class="fname">prop_dictionary_all_keys</b>(<i class="farg" style="white-space:nowrap;">prop_dictionary_t dict</i>);<p>
<i class="ftype">void</i><br>
<b class="fname">prop_dictionary_make_immutable</b>(<i class="farg" style="white-space:nowrap;">prop_dictionary_t dict</i>);<p>
<i class="ftype">bool</i><br>
<b class="fname">prop_dictionary_mutable</b>(<i class="farg" style="white-space:nowrap;">prop_dictionary_t dict</i>);<p>
<i class="ftype">prop_object_t</i><br>
<b class="fname">prop_dictionary_get</b>(<i class="farg" style="white-space:nowrap;">prop_dictionary_t dict</i>, <i class="farg" style="white-space:nowrap;">const char *key</i>);<p>
<i class="ftype">bool</i><br>
<b class="fname">prop_dictionary_set</b>(<i class="farg" style="white-space:nowrap;">prop_dictionary_t dict</i>, <i class="farg" style="white-space:nowrap;">const char *key</i>, <i class="farg" style="white-space:nowrap;">prop_object_t obj</i>);<p>
<i class="ftype">void</i><br>
<b class="fname">prop_dictionary_remove</b>(<i class="farg" style="white-space:nowrap;">prop_dictionary_t dict</i>, <i class="farg" style="white-space:nowrap;">const char *key</i>);<p>
<i class="ftype">prop_object_t</i><br>
<b class="fname">prop_dictionary_get_keysym</b>(<i class="farg" style="white-space:nowrap;">prop_dictionary_t dict</i>, <i class="farg" style="white-space:nowrap;">prop_dictionary_keysym_t keysym</i>);<p>
<i class="ftype">bool</i><br>
<b class="fname">prop_dictionary_set_keysym</b>(<i class="farg" style="white-space:nowrap;">prop_dictionary_t dict</i>, <i class="farg" style="white-space:nowrap;">prop_dictionary_keysym_t keysym</i>, <i class="farg" style="white-space:nowrap;">prop_object_t obj</i>);<p>
<i class="ftype">void</i><br>
<b class="fname">prop_dictionary_remove_keysym</b>(<i class="farg" style="white-space:nowrap;">prop_dictionary_t dict</i>, <i class="farg" style="white-space:nowrap;">prop_dictionary_keysym_t keysym</i>);<p>
<i class="ftype">bool</i><br>
<b class="fname">prop_dictionary_equals</b>(<i class="farg" style="white-space:nowrap;">prop_dictionary_t dict1</i>, <i class="farg" style="white-space:nowrap;">prop_dictionary_t dict2</i>);<p>
<i class="ftype">const char *</i><br>
<b class="fname">prop_dictionary_keysym_cstring_nocopy</b>(<i class="farg" style="white-space:nowrap;">prop_dictionary_keysym_t sym</i>);<p>
<i class="ftype">bool</i><br>
<b class="fname">prop_dictionary_keysym_equals</b>(<i class="farg" style="white-space:nowrap;">prop_dictionary_keysym_t keysym1</i>, <i class="farg" style="white-space:nowrap;">prop_dictionary_keysym_t keysym2</i>);<p>
<i class="ftype">char *</i><br>
<b class="fname">prop_dictionary_externalize</b>(<i class="farg" style="white-space:nowrap;">prop_dictionary_t dict</i>);<p>
<i class="ftype">prop_dictionary_t</i><br>
<b class="fname">prop_dictionary_internalize</b>(<i class="farg" style="white-space:nowrap;">const char *xml</i>);<p>
<i class="ftype">bool</i><br>
<b class="fname">prop_dictionary_externalize_to_file</b>(<i class="farg" style="white-space:nowrap;">prop_dictionary_t dict</i>, <i class="farg" style="white-space:nowrap;">const char *path</i>);<p>
<i class="ftype">prop_dictionary_t</i><br>
<b class="fname">prop_dictionary_internalize_from_file</b>(<i class="farg" style="white-space:nowrap;">const char *path</i>);<p>
<i class="ftype">bool</i><br>
<b class="fname">prop_dictionary_externalize_to_pref</b>(<i class="farg" style="white-space:nowrap;">prop_dictionary_t dict</i>, <i class="farg" style="white-space:nowrap;">struct plistref *pref</i>);<p>
<i class="ftype">bool</i><br>
<b class="fname">prop_dictionary_internalize_from_pref</b>(<i class="farg" style="white-space:nowrap;">const struct plistref *pref</i>, <i class="farg" style="white-space:nowrap;">prop_dictionary_t *dictp</i>);</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> The <b class="name">prop_dictionary</b> family of functions operate on the dictionary property collection object type. A dictionary is an unordered set of objects stored as key-value pairs.<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">prop_dictionary_create</b>(<i class="farg">void</i>)</dt>
<dd class="list-tag" style="margin-left: 5.00ex;">
Create an empty dictionary. The dictionary initially has no capacity. Returns <span class="define">NULL</span> on failure.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">prop_dictionary_create_with_capacity</b>(<i class="farg">unsigned int capacity</i>)</dt>
<dd class="list-tag" style="margin-left: 5.00ex;">
Create a dictionary with the capacity to store <i class="farg">capacity</i> objects. Returns <span class="define">NULL</span> on failure.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">prop_dictionary_copy</b>(<i class="farg">prop_dictionary_t dict</i>)</dt>
<dd class="list-tag" style="margin-left: 5.00ex;">
Copy a dictionary. The new dictionary has an initial capacity equal to the number of objects stored in the dictionary being copied. The new dictionary contains references to the original dictionary's objects, not copies of those objects (i.e. a shallow copy is made). If the original dictionary is immutable, the resulting dictionary is also immutable.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">prop_dictionary_copy_mutable</b>(<i class="farg">prop_dictionary_t dict</i>)</dt>
<dd class="list-tag" style="margin-left: 5.00ex;">
Like <b class="fname">prop_dictionary_copy</b>(), except the resulting dictionary is always mutable.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">prop_dictionary_count</b>(<i class="farg">prop_dictionary_t dict</i>)</dt>
<dd class="list-tag" style="margin-left: 5.00ex;">
Returns the number of objects stored in the dictionary.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">prop_dictionary_ensure_capacity</b>(<i class="farg">prop_dictionary_t dict</i>, <i class="farg">unsigned int capacity</i>)</dt>
<dd class="list-tag" style="margin-left: 5.00ex;">
Ensure that the dictionary has a total capacity of <i class="farg">capacity</i>, including objects already stored in the dictionary. Returns <span class="define">true</span> if the capacity of the dictionary is greater or equal to <i class="farg">capacity</i> or if the expansion of the dictionary's capacity was successful and <span class="define">false</span> otherwise. If the supplied object isn't a dictionary, <span class="define">false</span> is returned.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">prop_dictionary_iterator</b>(<i class="farg">prop_dictionary_t dict</i>)</dt>
<dd class="list-tag" style="margin-left: 5.00ex;">
Create an iterator for the dictionary. The dictionary is retained by the iterator. A dictionary iterator returns the key symbols used to look up objects stored in the dictionary; to get the object itself, a dictionary lookup using this key symbol must be performed. Storing to or removing from the dictionary invalidates any active iterators for the dictionary. Returns <span class="define">NULL</span> on failure.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">prop_dictionary_all_keys</b>(<i class="farg">prop_dictionary_t dict</i>)</dt>
<dd class="list-tag" style="margin-left: 5.00ex;">
Return an array of all of the dictionary key symbols (prop_dictionary_keysym_t) in the dictionary. This provides a way to iterate over the items in the dictionary while retaining the ability to mutate the dictionary; instead of iterating over the dictionary itself, iterate over the array of keys. The caller is responsible for releasing the array. Returns <span class="define">NULL</span> on failure.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">prop_dictionary_make_immutable</b>(<i class="farg">prop_dictionary_t dict</i>)</dt>
<dd class="list-tag" style="margin-left: 5.00ex;">
Make <i class="farg">dict</i> immutable.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">prop_dictionary_mutable</b>(<i class="farg">prop_dictionary_t dict</i>)</dt>
<dd class="list-tag" style="margin-left: 5.00ex;">
Returns <span class="define">true</span> if the dictionary is mutable.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">prop_dictionary_get</b>(<i class="farg">prop_dictionary_t dict</i>, <i class="farg">const char *key</i>)</dt>
<dd class="list-tag" style="margin-left: 5.00ex;">
Return the object stored in the dictionary with the key <i class="farg">key</i>. If no object is stored with the specified key, <span class="define">NULL</span> is returned.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">prop_dictionary_set</b>(<i class="farg">prop_dictionary_t dict</i>, <i class="farg">const char *key</i>, <i class="farg">prop_object_t obj</i>)</dt>
<dd class="list-tag" style="margin-left: 5.00ex;">
Store a reference to the object <i class="farg">obj</i> with the key <i class="farg">key</i>. The object will be retained by the dictionary. If the key already exists in the dictionary, the object associated with that key will be released and replaced with the new object. Returns <span class="define">true</span> if storing the object was successful and <span class="define">false</span> otherwise.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">prop_dictionary_remove</b>(<i class="farg">prop_dictionary_t dict</i>, <i class="farg">const char *key</i>)</dt>
<dd class="list-tag" style="margin-left: 5.00ex;">
Remove the reference to the object stored in the dictionary with the key <i class="farg">key</i>. The object will be released.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">prop_dictionary_get_keysym</b>(<i class="farg">prop_dictionary_t dict</i>, <i class="farg">prop_dictionary_keysym_t sym</i>)</dt>
<dd class="list-tag" style="margin-left: 5.00ex;">
Like <b class="fname">prop_dictionary_get</b>(), but the lookup is performed using a key symbol returned by a dictionary iterator. The results are undefined if the iterator used to obtain the key symbol is not associated with <i class="farg">dict</i>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">prop_dictionary_set_keysym</b>(<i class="farg">prop_dictionary_t dict</i>, <i class="farg">prop_dictionary_keysym_t sym</i>, <i class="farg">prop_object_t obj</i>)</dt>
<dd class="list-tag" style="margin-left: 5.00ex;">
Like <b class="fname">prop_dictionary_set</b>(), but the lookup of the object to replace is performed using a key symbol returned by a dictionary iterator. The results are undefined if the iterator used to obtain the key symbol is not associated with <i class="farg">dict</i>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">prop_dictionary_remove_keysym</b>(<i class="farg">prop_dictionary_t dict</i>, <i class="farg">prop_dictionary_keysym_t sym</i>)</dt>
<dd class="list-tag" style="margin-left: 5.00ex;">
Like <b class="fname">prop_dictionary_remove</b>(), but the lookup of the object to remove is performed using a key symbol returned by a dictionary iterator. The results are undefined if the iterator used to obtain the key symbol is not associated with <i class="farg">dict</i>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">prop_dictionary_equals</b>(<i class="farg">prop_dictionary_t dict1</i>, <i class="farg">prop_dictionary_t dict2</i>)</dt>
<dd class="list-tag" style="margin-left: 5.00ex;">
Returns <span class="define">true</span> if the two dictionaries are equivalent. Note: Objects contained in the dictionary are compared by value, not by reference.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">prop_dictionary_keysym_cstring_nocopy</b>(<i class="farg">prop_dictionary_keysym_t keysym</i>)</dt>
<dd class="list-tag" style="margin-left: 5.00ex;">
Returns an immutable reference to the dictionary key symbol's string value.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">prop_dictionary_keysym_equals</b>(<i class="farg">prop_dictionary_keysym_t keysym1</i>, <i class="farg">prop_dictionary_keysym_t keysym2</i>)</dt>
<dd class="list-tag" style="margin-left: 5.00ex;">
Returns <span class="define">true</span> if the two dictionary key symbols are equivalent.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">prop_dictionary_externalize</b>(<i class="farg">prop_dictionary_t dict</i>)</dt>
<dd class="list-tag" style="margin-left: 5.00ex;">
Externalizes a dictionary, returning a NUL-terminated buffer containing the XML representation of the dictionary. The caller is responsible for freeing the returned buffer. If converting to the external representation fails for any reason, <span class="define">NULL</span> is returned.<p>
In user space, the buffer is allocated using <a class="link-man" href="../3/malloc">malloc(3)</a>. In the kernel, the buffer is allocated using <a class="link-man" href="../9/malloc">malloc(9)</a> using the malloc type <span class="define">M_TEMP</span>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">prop_dictionary_internalize</b>(<i class="farg">const char *xml</i>)</dt>
<dd class="list-tag" style="margin-left: 5.00ex;">
Parse the XML representation of a property list in the NUL-terminated buffer <i class="farg">xml</i> and return the corresponding dictionary. Returns <span class="define">NULL</span> if parsing fails for any reason.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">prop_dictionary_externalize_to_file</b>(<i class="farg">prop_dictionary_t dict</i>, <i class="farg">const char *path</i>)</dt>
<dd class="list-tag" style="margin-left: 5.00ex;">
Externalizes a dictionary and writes it to the file specified by <i class="farg">path</i>. The file is saved with the mode <span class="define">0666</span> as modified by the process's file creation mask (see <a class="link-man" href="../2/umask">umask(2)</a>) and is written atomically. Returns <span class="define">false</span> if externalizing or writing the dictionary fails for any reason.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">prop_dictionary_internalize_from_file</b>(<i class="farg">const char *path</i>)</dt>
<dd class="list-tag" style="margin-left: 5.00ex;">
Reads the XML property list contained in the file specified by <i class="farg">path</i>, internalizes it, and returns the corresponding dictionary. Returns <span class="define">NULL</span> on failure.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">prop_dictionary_externalize_to_pref</b>(<i class="farg">prop_dictionary_t dict</i>, <i class="farg">struct plistref *pref</i>)</dt>
<dd class="list-tag" style="margin-left: 5.00ex;">
Externalizes a dictionary and packs it into the plistref specified by <i class="farg">pref</i>. Returns <span class="define">false</span> if externalizing the dictionary fails for any reason.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">prop_dictionary_internalize_from_pref</b>(<i class="farg">const struct plistref *pref</i>, <i class="farg">prop_dictionary_t *dictp</i>)</dt>
<dd class="list-tag" style="margin-left: 5.00ex;">
Reads the plistref specified by <i class="farg">pref</i>, internalizes it, and returns the corresponding dictionary. Returns <span class="define">false</span> if internalizing or writing the dictionary fails for any reason.</dd>
</dl>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../3/prop_array">prop_array(3)</a>, <a class="link-man" href="../3/prop_bool">prop_bool(3)</a>, <a class="link-man" href="../3/prop_data">prop_data(3)</a>, <a class="link-man" href="../3/prop_dictionary_util">prop_dictionary_util(3)</a>, <a class="link-man" href="../3/prop_number">prop_number(3)</a>, <a class="link-man" href="../3/prop_object">prop_object(3)</a>, <a class="link-man" href="../3/prop_string">prop_string(3)</a>, <a class="link-man" href="../3/proplib">proplib(3)</a></div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> The <b class="name">proplib</b> property container object library first appeared in <span class="unix">NetBSD&#160;4.0</span>.</div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
December 5, 2009</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
</html>

