<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="/static/man_pages/netbsd/style.css" type="text/css" media="all">
<title>
RMTOPS(3)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
RMTOPS(3)</td>
<td class="head-vol" align="center">
Library Functions Manual</td>
<td class="head-rtitle" align="right">
RMTOPS(3)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">rmtops</b> &#8212; <span class="desc">access tape drives on remote machines</span></div>
<div class="section">
<h1 id="x4c494252415259">LIBRARY</h1> Remote Magnetic Tape Library (librmt, -lrmt)</div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="includes">#include &lt;<a class="link-includes">rmt.h</a>&gt;</b><br>
<b class="includes">#include &lt;<a class="link-includes">sys/stat.h</a>&gt;</b><p>
<i class="ftype">int</i><br>
<b class="fname">isrmt</b>(<i class="farg" style="white-space:nowrap;">int fd</i>);<p>
<i class="ftype">int</i><br>
<b class="fname">rmtaccess</b>(<i class="farg" style="white-space:nowrap;">char *file</i>, <i class="farg" style="white-space:nowrap;">int mode</i>);<p>
<i class="ftype">int</i><br>
<b class="fname">rmtclose</b>(<i class="farg" style="white-space:nowrap;">int fd</i>);<p>
<i class="ftype">int</i><br>
<b class="fname">rmtcreat</b>(<i class="farg" style="white-space:nowrap;">char *file</i>, <i class="farg" style="white-space:nowrap;">int mode</i>);<p>
<i class="ftype">int</i><br>
<b class="fname">rmtdup</b>(<i class="farg" style="white-space:nowrap;">int fd</i>);<p>
<i class="ftype">int</i><br>
<b class="fname">rmtfcntl</b>(<i class="farg" style="white-space:nowrap;">int fd</i>, <i class="farg" style="white-space:nowrap;">int cmd</i>, <i class="farg" style="white-space:nowrap;">int arg</i>);<p>
<i class="ftype">int</i><br>
<b class="fname">rmtfstat</b>(<i class="farg" style="white-space:nowrap;">int fd</i>, <i class="farg" style="white-space:nowrap;">struct stat *buf</i>);<p>
<i class="ftype">int</i><br>
<b class="fname">rmtioctl</b>(<i class="farg" style="white-space:nowrap;">int fd</i>, <i class="farg" style="white-space:nowrap;">int request</i>, <i class="farg" style="white-space:nowrap;">char *argp</i>);<p>
<i class="ftype">int</i><br>
<b class="fname">rmtisatty</b>(<i class="farg" style="white-space:nowrap;">int fd</i>);<p>
<i class="ftype">long</i><br>
<b class="fname">rmtlseek</b>(<i class="farg" style="white-space:nowrap;">int fd</i>, <i class="farg" style="white-space:nowrap;">long offset</i>, <i class="farg" style="white-space:nowrap;">int whence</i>);<p>
<i class="ftype">int</i><br>
<b class="fname">rmtlstat</b>(<i class="farg" style="white-space:nowrap;">char *file</i>, <i class="farg" style="white-space:nowrap;">struct stat *buf</i>);<p>
<i class="ftype">int</i><br>
<b class="fname">rmtopen</b>(<i class="farg" style="white-space:nowrap;">char *file</i>, <i class="farg" style="white-space:nowrap;">int flags</i>, <i class="farg" style="white-space:nowrap;">int mode</i>);<p>
<i class="ftype">int</i><br>
<b class="fname">rmtread</b>(<i class="farg" style="white-space:nowrap;">int fd</i>, <i class="farg" style="white-space:nowrap;">char *buf</i>, <i class="farg" style="white-space:nowrap;">int nbytes</i>);<p>
<i class="ftype">int</i><br>
<b class="fname">rmtstat</b>(<i class="farg" style="white-space:nowrap;">char *file</i>, <i class="farg" style="white-space:nowrap;">struct stat *buf</i>);<p>
<i class="ftype">int</i><br>
<b class="fname">rmtwrite</b>(<i class="farg" style="white-space:nowrap;">int fd</i>, <i class="farg" style="white-space:nowrap;">char *buf</i>, <i class="farg" style="white-space:nowrap;">int nbytes</i>);</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> The <b class="name">rmtops</b> library provides a simple means of transparently accessing tape drives on remote machines via <a class="link-man" href="../1/rsh">rsh(1)</a> and <a class="link-man" href="../8/rmt">rmt(8)</a>. These routines are used like their corresponding system calls, but allow the user to open up a tape drive on a remote system on which he or she has an account and the appropriate remote permissions.<p>
A remote tape drive file name has the form<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit">[user@]hostname:/dev/???</code></div>
</blockquote>
where <span class="emph">system</span> is the remote system, <span class="emph">/dev/???</span> is the particular drive on the remote system (raw, blocked, rewinding, non-rewinding, etc.), and the optional <span class="emph">user</span> is the login name to be used on the remote system, if different from the current user's login name.<p>
For transparency, the user should include the file <b class="includes">&lt;<a class="link-includes">rmt.h</a>&gt;</b>, which has the following defines in it:<p>
<pre style="margin-left: 0.00ex;" class="lit display">
#define access	rmtaccess 
#define close	rmtclose 
#define creat	rmtcreat 
#define dup	rmtdup 
#define fcntl	rmtfcntl 
#define fstat	rmtfstat 
#define ioctl	rmtioctl 
#define isatty	rmtisatty 
#define lseek	rmtlseek 
#define lstat	rmtlstat 
#define open	rmtopen 
#define read	rmtread 
#define stat	rmtstat 
#define write	rmtwrite</pre>
<p>
This allows the programmer to use <a class="link-man" href="../2/open">open(2)</a>, <a class="link-man" href="../2/close">close(2)</a>, <a class="link-man" href="../2/read">read(2)</a>, <a class="link-man" href="../2/write">write(2)</a>, etc. in their normal fashion, with the <b class="name">rmtops</b> routines taking care of differentiating between local and remote files. This file should be included <span class="emph">before</span> including the file <i class="file">&lt;sys/stat.h&gt;</i>, since it redefines the identifier ``stat'' which is used to declare objects of type <span class="emph">struct stat</span>.<p>
The routines differentiate between local and remote file descriptors by adding a bias (currently 128) to the file descriptor of the pipe. The programmer, if he or she must know if a file is remote, should use <b class="fname">isrmt</b>().</div>
<div class="section">
<h1 id="x454e5649524f4e4d454e54">ENVIRONMENT</h1> The RCMD_CMD environment variable can be set to the name or pathname of a program to use, instead of <i class="file">/usr/bin/rsh</i>, and must have the same calling conventions as <a class="link-man" href="../1/rsh">rsh(1)</a>.</div>
<div class="section">
<h1 id="x46494c4553">FILES</h1><dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/usr/lib/librmt.a</i></dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
remote tape library</dd>
</dl>
</div>
<div class="section">
<h1 id="x444941474e4f5354494353">DIAGNOSTICS</h1> Several of these routines will return &#45;1 and set <b class="var">errno</b> to EOPNOTSUPP, if they are given a remote file name or a file descriptor on an open remote file (e.g., <b class="fname">rmtdup</b>()).</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../1/rcp">rcp(1)</a>, <a class="link-man" href="../1/rsh">rsh(1)</a>, <a class="link-man" href="../8/rmt">rmt(8)</a><p>
And the appropriate system calls in section 2.</div>
<div class="section">
<h1 id="x415554484f5253">AUTHORS</h1> Jeff Lee wrote the original routines for accessing tape drives via <a class="link-man" href="../8/rmt">rmt(8)</a>.<p>
Fred Fish redid them into a general purpose library.<p>
Arnold Robbins added the ability to specify a user name on the remote system, the <i class="file">&lt;rmt.h&gt;</i> include file, this man page, cleaned up the library a little, and made the appropriate changes for <span class="unix">4.3BSD</span>.<p>
Dan Kegel contributed the code to use the <a class="link-man" href="../3/rexec">rexec(3)</a> library routine.</div>
<div class="section">
<h1 id="x42554753">BUGS</h1> There is no way to use remote tape drives with <a class="link-man" href="../3/stdio">stdio(3)</a>, short of recompiling it entirely to use these routines.<p>
The <a class="link-man" href="../8/rmt">rmt(8)</a> protocol is not very capable. In particular, it relies on TCP/IP sockets for error free transmission, and does no data validation of its own.</div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
October 16, 2001</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
</html>

