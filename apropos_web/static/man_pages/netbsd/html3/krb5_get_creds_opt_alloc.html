<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="/static/man_pages/netbsd/style.css" type="text/css" media="all">
<title>
KRB5_GET_CREDS(3)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
KRB5_GET_CREDS(3)</td>
<td class="head-vol" align="center">
Library Functions Manual</td>
<td class="head-rtitle" align="right">
KRB5_GET_CREDS(3)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">krb5_get_creds</b>, <b class="name">krb5_get_creds_opt_add_options</b>, <b class="name">krb5_get_creds_opt_alloc</b>, <b class="name">krb5_get_creds_opt_free</b>, <b class="name">krb5_get_creds_opt_set_enctype</b>, <b class="name">krb5_get_creds_opt_set_impersonate</b>, <b class="name">krb5_get_creds_opt_set_options</b>, <b class="name">krb5_get_creds_opt_set_ticket</b> &#8212; <span class="desc">get credentials from the KDC</span></div>
<div class="section">
<h1 id="x4c494252415259">LIBRARY</h1> Kerberos 5 Library (libkrb5, -lkrb5)</div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="includes">#include &lt;<a class="link-includes">krb5/krb5.h</a>&gt;</b><p>
<i class="ftype">krb5_error_code</i><br>
<b class="fname">krb5_get_creds</b>(<i class="farg">krb5_context context</i>, <i class="farg">krb5_get_creds_opt opt</i>, <i class="farg">krb5_ccache ccache</i>, <i class="farg">krb5_const_principal inprinc</i>, <i class="farg">krb5_creds **out_creds</i>);<p>
<i class="ftype">void</i><br>
<b class="fname">krb5_get_creds_opt_add_options</b>(<i class="farg">krb5_context context</i>, <i class="farg">krb5_get_creds_opt opt</i>, <i class="farg">krb5_flags options</i>);<p>
<i class="ftype">krb5_error_code</i><br>
<b class="fname">krb5_get_creds_opt_alloc</b>(<i class="farg">krb5_context context</i>, <i class="farg">krb5_get_creds_opt *opt</i>);<p>
<i class="ftype">void</i><br>
<b class="fname">krb5_get_creds_opt_free</b>(<i class="farg">krb5_context context</i>, <i class="farg">krb5_get_creds_opt opt</i>);<p>
<i class="ftype">void</i><br>
<b class="fname">krb5_get_creds_opt_set_enctype</b>(<i class="farg">krb5_context context</i>, <i class="farg">krb5_get_creds_opt opt</i>, <i class="farg">krb5_enctype enctype</i>);<p>
<i class="ftype">krb5_error_code</i><br>
<b class="fname">krb5_get_creds_opt_set_impersonate</b>(<i class="farg">krb5_context context</i>, <i class="farg">krb5_get_creds_opt opt</i>, <i class="farg">krb5_const_principal self</i>);<p>
<i class="ftype">void</i><br>
<b class="fname">krb5_get_creds_opt_set_options</b>(<i class="farg">krb5_context context</i>, <i class="farg">krb5_get_creds_opt opt</i>, <i class="farg">krb5_flags options</i>);<p>
<i class="ftype">krb5_error_code</i><br>
<b class="fname">krb5_get_creds_opt_set_ticket</b>(<i class="farg">krb5_context context</i>, <i class="farg">krb5_get_creds_opt opt</i>, <i class="farg">const Ticket *ticket</i>);</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> <b class="fname">krb5_get_creds</b>() fetches credentials specified by <i class="farg">opt</i> by first looking in the <i class="farg">ccache</i>, and then it doesn't exists, fetch the credential from the KDC using the krbtgts in <i class="farg">ccache</i>. The credential is returned in <i class="farg">out_creds</i> and should be freed using the function <b class="fname">krb5_free_creds</b>().<p>
The structure <code class="lit">krb5_get_creds_opt</code> controls the behavior of <b class="fname">krb5_get_creds</b>(). The structure is opaque to consumers that can set the content of the structure with accessors functions. All accessor functions make copies of the data that is passed into accessor functions, so external consumers free the memory before calling <b class="fname">krb5_get_creds</b>().<p>
The structure <code class="lit">krb5_get_creds_opt</code> is allocated with <b class="fname">krb5_get_creds_opt_alloc</b>() and freed with <b class="fname">krb5_get_creds_opt_free</b>(). The free function also frees the content of the structure set by the accessor functions.<p>
<b class="fname">krb5_get_creds_opt_add_options</b>() and <b class="fname">krb5_get_creds_opt_set_options</b>() adds and sets options to the structure . The possible options to set are<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
KRB5_GC_CACHED</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
Only check the <i class="farg">ccache</i>, don't got out on network to fetch credential.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
KRB5_GC_USER_USER</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
request a user to user ticket. This options doesn't store the resulting user to user credential in the <i class="farg">ccache</i>.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
KRB5_GC_EXPIRED_OK</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
returns the credential even if it is expired, default behavior is trying to refetch the credential from the KDC.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
KRB5_GC_NO_STORE</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
Do not store the resulting credentials in the <i class="farg">ccache</i>.</dd>
</dl>
<p>
<b class="fname">krb5_get_creds_opt_set_enctype</b>() sets the preferred encryption type of the application. Don't set this unless you have to since if there is no match in the KDC, the function call will fail.<p>
<b class="fname">krb5_get_creds_opt_set_impersonate</b>() sets the principal to impersonate., Returns a ticket that have the impersonation principal as a client and the requestor as the service. Note that the requested principal have to be the same as the client principal in the krbtgt.<p>
<b class="fname">krb5_get_creds_opt_set_ticket</b>() sets the extra ticket used in user-to-user or contrained delegation use case.</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../3/krb5">krb5(3)</a>, <a class="link-man" href="../3/krb5_get_credentials">krb5_get_credentials(3)</a>, <a class="link-man" href="../5/krb5.conf">krb5.conf(5)</a></div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
June 15, 2006</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
</html>

