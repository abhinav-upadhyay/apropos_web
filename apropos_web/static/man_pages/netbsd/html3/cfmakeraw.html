<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="../style.css" type="text/css" media="all">
<title>
TCSETATTR(3)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
TCSETATTR(3)</td>
<td class="head-vol" align="center">
Library Functions Manual</td>
<td class="head-rtitle" align="right">
TCSETATTR(3)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">cfgetispeed</b>, <b class="name">cfsetispeed</b>, <b class="name">cfgetospeed</b>, <b class="name">cfsetospeed</b>, <b class="name">cfsetspeed</b>, <b class="name">cfmakeraw</b>, <b class="name">tcgetattr</b>, <b class="name">tcsetattr</b> &#8212; <span class="desc">manipulating the termios structure</span></div>
<div class="section">
<h1 id="x4c494252415259">LIBRARY</h1> <span class="lib">Standard C Library (libc, &#45;lc)</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="includes">#include &lt;<a class="link-includes">termios.h</a>&gt;</b><p>
<i class="ftype">speed_t</i><br>
<b class="fname">cfgetispeed</b>(<i class="farg" style="white-space:nowrap;">const struct termios *t</i>);<p>
<i class="ftype">int</i><br>
<b class="fname">cfsetispeed</b>(<i class="farg" style="white-space:nowrap;">struct termios *t</i>, <i class="farg" style="white-space:nowrap;">speed_t speed</i>);<p>
<i class="ftype">speed_t</i><br>
<b class="fname">cfgetospeed</b>(<i class="farg" style="white-space:nowrap;">const struct termios *t</i>);<p>
<i class="ftype">int</i><br>
<b class="fname">cfsetospeed</b>(<i class="farg" style="white-space:nowrap;">struct termios *t</i>, <i class="farg" style="white-space:nowrap;">speed_t speed</i>);<p>
<i class="ftype">int</i><br>
<b class="fname">cfsetspeed</b>(<i class="farg" style="white-space:nowrap;">struct termios *t</i>, <i class="farg" style="white-space:nowrap;">speed_t speed</i>);<p>
<i class="ftype">void</i><br>
<b class="fname">cfmakeraw</b>(<i class="farg" style="white-space:nowrap;">struct termios *t</i>);<p>
<i class="ftype">int</i><br>
<b class="fname">tcgetattr</b>(<i class="farg" style="white-space:nowrap;">int fd</i>, <i class="farg" style="white-space:nowrap;">struct termios *t</i>);<p>
<i class="ftype">int</i><br>
<b class="fname">tcsetattr</b>(<i class="farg" style="white-space:nowrap;">int fd</i>, <i class="farg" style="white-space:nowrap;">int action</i>, <i class="farg" style="white-space:nowrap;">const struct termios *t</i>);</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> The <b class="name">cfmakeraw</b>, <b class="name">tcgetattr</b> and <b class="name">tcsetattr</b> functions are provided for getting and setting the termios structure.<p>
The <b class="name">cfgetispeed</b>, <b class="name">cfsetispeed</b>, <b class="name">cfgetospeed</b>, <b class="name">cfsetospeed</b> and <b class="name">cfsetspeed</b> functions are provided for getting and setting the baud rate values in the termios structure. The effects of the functions on the terminal as described below do not become effective, nor are all errors detected, until the <b class="name">tcsetattr</b> function is called. Certain values for baud rates set in the termios structure and passed to <b class="name">tcsetattr</b> have special meanings. These are discussed in the portion of the manual page that describes the <b class="name">tcsetattr</b> function.</div>
<div class="section">
<h1 id="x47455454494e4720414e442053455454494e472054484520424155442052415445">GETTING AND SETTING THE BAUD RATE</h1> The input and output baud rates are found in the termios structure. The unsigned integer <code class="lit">speed_t</code> is typdef'd in the include file <b class="includes">&lt;<a class="link-includes">termios.h</a>&gt;</b>. The value of the integer corresponds directly to the baud rate being represented, however, the following symbolic values are defined.<p>
<pre style="margin-left: 0.00ex;" class="lit display">
#define B0	0 
#define B50	50 
#define B75	75 
#define B110	110 
#define B134	134 
#define B150	150 
#define B200	200 
#define B300	300 
#define B600	600 
#define B1200	1200 
#define	B1800	1800 
#define B2400	2400 
#define B4800	4800 
#define B9600	9600 
#define B19200	19200 
#define B38400	38400 
#ifndef _POSIX_SOURCE 
#define EXTA	19200 
#define EXTB	38400 
#endif  /*_POSIX_SOURCE */</pre>
<p>
The <b class="name">cfgetispeed</b> function returns the input baud rate in the termios structure referenced by <i class="farg">tp</i>.<p>
The <b class="name">cfsetispeed</b> function sets the input baud rate in the termios structure referenced by <i class="farg">tp</i> to <i class="farg">speed</i>.<p>
The <b class="name">cfgetospeed</b> function returns the output baud rate in the termios structure referenced by <i class="farg">tp</i>.<p>
The <b class="name">cfsetospeed</b> function sets the output baud rate in the termios structure referenced by <i class="farg">tp</i> to <i class="farg">speed</i>.<p>
The <b class="name">cfsetspeed</b> function sets both the input and output baud rate in the termios structure referenced by <i class="farg">tp</i> to <i class="farg">speed</i>.<p>
Upon successful completion, the functions <b class="name">cfsetispeed</b>, <b class="name">cfsetospeed</b>, and <b class="name">cfsetspeed</b> return a value of 0. Otherwise, a value of -1 is returned and the global variable <b class="var">errno</b> is set to indicate the error.</div>
<div class="section">
<h1 id="x47455454494e4720414e442053455454494e4720544845205445524d494f53205354415445">GETTING AND SETTING THE TERMIOS STATE</h1> This section describes the functions that are used to control the general terminal interface. Unless otherwise noted for a specific command, these functions are restricted from use by background processes. Attempts to perform these operations shall cause the process group to be sent a SIGTTOU signal. If the calling process is blocking or ignoring SIGTTOU signals, the process is allowed to perform the operation and the SIGTTOU signal is not sent.<p>
In all the functions, although <i class="farg">fd</i> is an open file descriptor, the functions affect the underlying terminal file, not just the open file description associated with the particular file descriptor.<p>
The <b class="name">cfmakeraw</b> function sets the flags stored in the termios structure (initialized by <b class="name">tcgetattr</b>) to a state disabling all input and output processing, giving a &#8220;raw I/O path&#8221;. It should be noted that there is no function to reverse this effect. This is because there are a variety of processing options that could be re-enabled and the correct method is for an application to snapshot the current terminal state using the function <b class="name">tcgetattr</b>, setting raw mode with <b class="name">cfmakeraw</b> and the subsequent <b class="name">tcsetattr</b>, and then using another <b class="name">tcsetattr</b> with the saved state to revert to the previous terminal state.<p>
The <b class="name">tcgetattr</b> function copies the parameters associated with the terminal referenced by <i class="farg">fd</i> to the termios structure referenced by <i class="farg">tp</i>. This function is allowed from a background process, however, the terminal attributes may be subsequently changed by a foreground process.<p>
The <b class="name">tcsetattr</b> function sets the parameters associated with the terminal from the termios structure referenced by <i class="farg">tp</i>. The <i class="farg">action</i> field is created by <span class="emph">or</span>'ing the following values, as specified in the include file <b class="includes">&lt;<a class="link-includes">termios.h</a>&gt;</b>.<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="farg">TCSANOW</i></dt>
<dd class="list-tag" style="margin-left: 9.00ex;">
The change occurs immediately.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="farg">TCSADRAIN</i></dt>
<dd class="list-tag" style="margin-left: 9.00ex;">
The change occurs after all output written to <i class="farg">fd</i> has been transmitted to the terminal. This value of <i class="farg">action</i> should be used when changing parameters that affect output.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="farg">TCSAFLUSH</i></dt>
<dd class="list-tag" style="margin-left: 9.00ex;">
The change occurs after all output written to <i class="farg">fd</i> has been transmitted to the terminal. Additionally, any input that has been received but not read is discarded.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="farg">TCSASOFT</i></dt>
<dd class="list-tag" style="margin-left: 9.00ex;">
If this value is <span class="emph">or</span>'ed into the <i class="farg">action</i> value, the values of the <span class="emph">c_cflag</span>, <span class="emph">c_ispeed</span>, and <span class="emph">c_ospeed</span> fields are ignored.</dd>
</dl>
<p>
The 0 baud rate is used to terminate the connection. If 0 is specified as the output speed to the function <b class="name">tcsetattr</b>, modem control will no longer be asserted on the terminal, disconnecting the terminal.<p>
If zero is specified as the input speed to the function <b class="name">tcsetattr</b>, the input baud rate will be set to the same value as that specified by the output baud rate.</div>
<div class="section">
<h1 id="x52455455524e2056414c554553">RETURN VALUES</h1> If <b class="name">tcsetattr</b> is unable to make any of the requested changes, it returns -1 and sets errno. Otherwise, it makes all of the requested changes it can. If the specified input and output baud rates differ and are a combination that is not supported, neither baud rate is changed.<p>
Upon successful completion, the functions <b class="name">tcgetattr</b> and <b class="name">tcsetattr</b> return a value of 0. Otherwise, they return -1 and the global variable <b class="var">errno</b> is set to indicate the error, as follows:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">EBADF</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The <i class="farg">fd</i> argument to <b class="name">tcgetattr</b> or <b class="name">tcsetattr</b> was not a valid file descriptor.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">EINTR</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The <b class="name">tcsetattr</b> function was interrupted by a signal.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">EINVAL</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The <i class="farg">action</i> argument to the <b class="name">tcsetattr</b> function was not valid, or an attempt was made to change an attribute represented in the termios structure to an unsupported value.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">ENOTTY</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The file associated with the <i class="farg">fd</i> argument to <b class="name">tcgetattr</b> or <b class="name">tcsetattr</b> is not a terminal.</dd>
</dl>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../3/tcsendbreak">tcsendbreak(3)</a>, <a class="link-man" href="../4/termios">termios(4)</a></div>
<div class="section">
<h1 id="x5354414e4441524453">STANDARDS</h1> The <b class="name">cfgetispeed</b>, <b class="name">cfsetispeed</b>, <b class="name">cfgetospeed</b>, <b class="name">cfsetospeed</b>, <b class="name">tcgetattr</b> and <b class="name">tcsetattr</b> functions are expected to be compliant with the IEEE Std 1003.1-1988 (&#8220;POSIX.1&#8221;) specification. The <b class="name">cfmakeraw</b> and <b class="name">cfsetspeed</b> functions, as well as the <code class="lit">TCSASOFT</code> option to the <b class="name">tcsetattr</b> function are extensions to the IEEE Std 1003.1-1988 (&#8220;POSIX.1&#8221;) specification.</div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
May 1, 2004</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
</html>

