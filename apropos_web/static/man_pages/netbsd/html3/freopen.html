<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/../4/strict.dtd">
>
<head>
<meta http-equiv="Content-Type" content="te../; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="../style.css" type="text/css" media="all">
<title>
FOPEN(3)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
FOPEN(3)</td>
<td class="head-vol" align="center">
Library Functions Manual</td>
<td class="head-rtitle" align="right">
FOPEN(3)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">fopen</b>, <b class="name">fdopen</b>, <b class="name">freopen</b> &#8212; <span class="desc">stream open functions</span></div>
<div class="section">
<h1 id="x4c494252415259">LIBRARY</h1> <span class="lib">Standard C Library (libc, &#45;lc)</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="includes">#include &lt;<a class="link-includes">stdio.h</a>&gt;</b><p>
<i class="ftype">FILE *</i><br>
<b class="fname">fopen</b>(<i class="farg" style="white-space:nowrap;">const char * restrict path</i>, <i class="farg" style="white-space:nowrap;">const char * restrict mode</i>);<p>
<i class="ftype">FILE *</i><br>
<b class="fname">fdopen</b>(<i class="farg" style="white-space:nowrap;">int fildes</i>, <i class="farg" style="white-space:nowrap;">const char *mode</i>);<p>
<i class="ftype">FILE *</i><br>
<b class="fname">freopen</b>(<i class="farg" style="white-space:nowrap;">const char * restrict path</i>, <i class="farg" style="white-space:nowrap;">const char * restrict mode</i>, <i class="farg" style="white-space:nowrap;">FILE * restrict stream</i>);</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> The <b class="fname">fopen</b>() function opens the file whose name is the string pointed to by <i class="farg">path</i> and associates a stream with it.<p>
The argument <i class="farg">mode</i> points to a string beginning with one of the following sequences (Additional characters may follow these sequences.):<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
&#8220;<code class="lit">a</code>&#8221;</dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
Append; open for writing. The file is created if it does not exist.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
&#8220;<code class="lit">a+</code>&#8221;</dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
Append; open for reading and writing. The file is created if it does not exist.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
&#8220;<code class="lit">r</code>&#8221;</dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
Open for reading.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
&#8220;<code class="lit">r+</code>&#8221;</dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
Open for reading and writing.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
&#8220;<code class="lit">w</code>&#8221;</dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
Open for writing. Truncate file to zero length or create file.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
&#8220;<code class="lit">w+</code>&#8221;</dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
Open for reading and writing. Truncate file to zero length or create file.</dd>
</dl>
<p>
Additionally, the <i class="farg">mode</i> string can also include one of the following letters:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
&#8216;b&#8217;</dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
The letter &#8216;b&#8217; may appear either as a last character or as a character between the characters in any of the two-character strings described above. This is strictly for compatibility with ANSI X3.159-1989 (&#8220;ANSI&#160;C89&#8221;) and has no effect; the &#8216;b&#8217; is ignored.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
&#8216;e&#8217;</dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
The letter &#8216;e&#8217; in the mode string sets the close-on-exec flag in the file descriptors of the newly opened file files; if the operation fails, <b class="fname">fopen</b>() will fail. This is a non ANSI X3.159-1989 (&#8220;ANSI&#160;C89&#8221;) extension.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
&#8216;f&#8217;</dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
The letter &#8216;f&#8217; in the mode string restricts <b class="fname">fopen</b>() to regular files; if the file opened is not a regular file, <b class="fname">fopen</b>() will fail. This is a non ANSI X3.159-1989 (&#8220;ANSI&#160;C89&#8221;) extension.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
&#8216;x&#8217;</dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
The letter &#8216;x&#8217; in the mode turns on exclusive open mode to the file (<span class="define">O_EXCL</span>) which means that the file will not be created if it already exists.</dd>
</dl>
<p>
Any created files will have mode &#34;<span class="define">S_IRUSR</span> | <span class="define">S_IWUSR</span> | <span class="define">S_IRGRP</span> | <span class="define">S_IWGRP</span> | <span class="define">S_IROTH</span> | <span class="define">S_IWOTH</span>&#34; (<code class="lit">0666</code>), as modified by the process' <a class="link-man" href="../2/umask">umask(2)</a> value.<p>
Opening a file with append mode causes all subsequent writes to it to be forced to the then current end of file, regardless of intervening repositioning of the stream.<p>
The <b class="fname">fopen</b>() and <b class="fname">freopen</b>() functions initially position the stream at the start of the file unless the file is opened with append mode, in which case the stream is initially positioned at the end of the file.<p>
The <b class="fname">fdopen</b>() function associates a stream with the existing file descriptor, <i class="farg">fildes</i>. The <i class="farg">mode</i> of the stream must be compatible with the mode of the file descriptor. The stream is positioned at the file offset of the file descriptor.<p>
The <b class="fname">freopen</b>() function opens the file whose name is the string pointed to by <i class="farg">path</i> and associates the stream pointed to by <i class="farg">stream</i> with it. The original stream (if it exists) is closed. The <i class="farg">mode</i> argument is used just as in the <b class="fname">fopen</b>() function. The primary use of the <b class="fname">freopen</b>() function is to change the file associated with a standard text stream (<span class="emph">stderr</span>, <span class="emph">stdin</span>, or <span class="emph">stdout</span>).</div>
<div class="section">
<h1 id="x52455455524e2056414c554553">RETURN VALUES</h1> Upon successful completion <b class="fname">fopen</b>(), <b class="fname">fdopen</b>() and <b class="fname">freopen</b>() return a FILE pointer. Otherwise, <span class="define">NULL</span> is returned and the global variable <b class="var">errno</b> is set to indicate the error.</div>
<div class="section">
<h1 id="x4552524f5253">ERRORS</h1> The functions may fail if:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">EFTYPE</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The file is not a regular file and the character ``f'' is specified in the mode.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">EINVAL</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The specified <i class="farg">mode</i> was invalid.</dd>
</dl>
<p>
The <b class="fname">fopen</b>(), <b class="fname">fdopen</b>() and <b class="fname">freopen</b>() functions may also fail and set <b class="var">errno</b> for any of the errors specified for the routine <a class="link-man" href="../3/malloc">malloc(3)</a>.<p>
The <b class="fname">fopen</b>() function may also fail and set <b class="var">errno</b> for any of the errors specified for the routine <a class="link-man" href="../2/open">open(2)</a>.<p>
The <b class="fname">fdopen</b>() function may also fail and set <b class="var">errno</b> for any of the errors specified for the routine <a class="link-man" href="../2/fcntl">fcntl(2)</a>.<p>
The <b class="fname">freopen</b>() function may also fail and set <b class="var">errno</b> for any of the errors specified for the routines <a class="link-man" href="../2/open">open(2)</a>, <a class="link-man" href="../3/fclose">fclose(3)</a> and <a class="link-man" href="../3/fflush">fflush(3)</a>.</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../2/open">open(2)</a>, <a class="link-man" href="../3/fclose">fclose(3)</a>, <a class="link-man" href="../3/fileno">fileno(3)</a>, <a class="link-man" href="../3/fseek">fseek(3)</a>, <a class="link-man" href="../3/funopen">funopen(3)</a></div>
<div class="section">
<h1 id="x5354414e4441524453">STANDARDS</h1> The <b class="fname">fopen</b>() and <b class="fname">freopen</b>() functions conform to ANSI X3.159-1989 (&#8220;ANSI&#160;C89&#8221;). All three functions are specified in IEEE Std 1003.1-2008 (&#8220;POSIX.1&#8221;).</div>
<div class="section">
<h1 id="x43415645415453">CAVEATS</h1> Proper code using <b class="fname">fdopen</b>() with error checking should <a class="link-man" href="../2/close">close(2)</a> <i class="farg">fildes</i> in case of failure, and <a class="link-man" href="../3/fclose">fclose(3)</a> the resulting FILE * in case of success.<p>
<pre style="margin-left: 0.00ex;" class="lit display">
	FILE *file; 
	int fd; 
 
	if ((file = fdopen(fd, "r")) != NULL) { 
		/* perform operations on the FILE * */ 
		fclose(file); 
	} else { 
		/* failure, report the error */ 
		close(fd); 
	}</pre>
</div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
November 14, 2012</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
<>

