<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/../4/strict.dtd">
>
<head>
<meta http-equiv="Content-Type" content="te../; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="../style.css" type="text/css" media="all">
<title>
KRB5_GET_INIT_CREDS(3)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
KRB5_GET_INIT_CREDS(3)</td>
<td class="head-vol" align="center">
Library Functions Manual</td>
<td class="head-rtitle" align="right">
KRB5_GET_INIT_CREDS(3)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">krb5_get_init_creds</b>, <b class="name">krb5_get_init_creds_keytab</b>, <b class="name">krb5_get_init_creds_opt</b>, <b class="name">krb5_get_init_creds_opt_alloc</b>, <b class="name">krb5_get_init_creds_opt_free</b>, <b class="name">krb5_get_init_creds_opt_init</b>, <b class="name">krb5_get_init_creds_opt_set_address_list</b>, <b class="name">krb5_get_init_creds_opt_set_addressless</b>, <b class="name">krb5_get_init_creds_opt_set_anonymous</b>, <b class="name">krb5_get_init_creds_opt_set_default_flags</b>, <b class="name">krb5_get_init_creds_opt_set_etype_list</b>, <b class="name">krb5_get_init_creds_opt_set_forwardable</b>, <b class="name">krb5_get_init_creds_opt_set_pa_password</b>, <b class="name">krb5_get_init_creds_opt_set_paq_request</b>, <b class="name">krb5_get_init_creds_opt_set_preauth_list</b>, <b class="name">krb5_get_init_creds_opt_set_proxiable</b>, <b class="name">krb5_get_init_creds_opt_set_renew_life</b>, <b class="name">krb5_get_init_creds_opt_set_salt</b>, <b class="name">krb5_get_init_creds_opt_set_tkt_life</b>, <b class="name">krb5_get_init_creds_opt_set_canonicalize</b>, <b class="name">krb5_get_init_creds_opt_set_win2k</b>, <b class="name">krb5_get_init_creds_password</b>, <b class="name">krb5_prompt</b>, <b class="name">krb5_prompter_posix</b> &#8212; <span class="desc">Kerberos 5 initial authentication functions</span></div>
<div class="section">
<h1 id="x4c494252415259">LIBRARY</h1> Kerberos 5 Library (libkrb5, -lkrb5)</div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="includes">#include &lt;<a class="link-includes">krb5/krb5.h</a>&gt;</b><p>
<br>
<i class="ftype">krb5_get_init_creds_opt;</i><p>
<br>
<i class="ftype">krb5_error_code</i><br>
<b class="fname">krb5_get_init_creds_opt_alloc</b>(<i class="farg">krb5_context context</i>, <i class="farg">krb5_get_init_creds_opt **opt</i>);<p>
<i class="ftype">void</i><br>
<b class="fname">krb5_get_init_creds_opt_free</b>(<i class="farg">krb5_context context</i>, <i class="farg">krb5_get_init_creds_opt *opt</i>);<p>
<i class="ftype">void</i><br>
<b class="fname">krb5_get_init_creds_opt_init</b>(<i class="farg">krb5_get_init_creds_opt *opt</i>);<p>
<i class="ftype">void</i><br>
<b class="fname">krb5_get_init_creds_opt_set_address_list</b>(<i class="farg">krb5_get_init_creds_opt *opt</i>, <i class="farg">krb5_addresses *addresses</i>);<p>
<i class="ftype">void</i><br>
<b class="fname">krb5_get_init_creds_opt_set_addressless</b>(<i class="farg">krb5_get_init_creds_opt *opt</i>, <i class="farg">krb5_boolean addressless</i>);<p>
<i class="ftype">void</i><br>
<b class="fname">krb5_get_init_creds_opt_set_anonymous</b>(<i class="farg">krb5_get_init_creds_opt *opt</i>, <i class="farg">int anonymous</i>);<p>
<i class="ftype">void</i><br>
<b class="fname">krb5_get_init_creds_opt_set_default_flags</b>(<i class="farg">krb5_context context</i>, <i class="farg">const char *appname</i>, <i class="farg">krb5_const_realm realm</i>, <i class="farg">krb5_get_init_creds_opt *opt</i>);<p>
<i class="ftype">void</i><br>
<b class="fname">krb5_get_init_creds_opt_set_etype_list</b>(<i class="farg">krb5_get_init_creds_opt *opt</i>, <i class="farg">krb5_enctype *etype_list</i>, <i class="farg">int etype_list_length</i>);<p>
<i class="ftype">void</i><br>
<b class="fname">krb5_get_init_creds_opt_set_forwardable</b>(<i class="farg">krb5_get_init_creds_opt *opt</i>, <i class="farg">int forwardable</i>);<p>
<i class="ftype">krb5_error_code</i><br>
<b class="fname">krb5_get_init_creds_opt_set_pa_password</b>(<i class="farg">krb5_context context</i>, <i class="farg">krb5_get_init_creds_opt *opt</i>, <i class="farg">const char *password</i>, <i class="farg">krb5_s2k_proc key_proc</i>);<p>
<i class="ftype">krb5_error_code</i><br>
<b class="fname">krb5_get_init_creds_opt_set_paq_request</b>(<i class="farg">krb5_context context</i>, <i class="farg">krb5_get_init_creds_opt *opt</i>, <i class="farg">krb5_boolean req_pac</i>);<p>
<i class="ftype">krb5_error_code</i><br>
<b class="fname">krb5_get_init_creds_opt_set_pkinit</b>(<i class="farg">krb5_context context</i>, <i class="farg">krb5_get_init_creds_opt *opt</i>, <i class="farg">const char *cert_file</i>, <i class="farg">const char *key_file</i>, <i class="farg">const char *x509_anchors</i>, <i class="farg">int flags</i>, <i class="farg">char *password</i>);<p>
<i class="ftype">void</i><br>
<b class="fname">krb5_get_init_creds_opt_set_preauth_list</b>(<i class="farg">krb5_get_init_creds_opt *opt</i>, <i class="farg">krb5_preauthtype *preauth_list</i>, <i class="farg">int preauth_list_length</i>);<p>
<i class="ftype">void</i><br>
<b class="fname">krb5_get_init_creds_opt_set_proxiable</b>(<i class="farg">krb5_get_init_creds_opt *opt</i>, <i class="farg">int proxiable</i>);<p>
<i class="ftype">void</i><br>
<b class="fname">krb5_get_init_creds_opt_set_renew_life</b>(<i class="farg">krb5_get_init_creds_opt *opt</i>, <i class="farg">krb5_deltat renew_life</i>);<p>
<i class="ftype">void</i><br>
<b class="fname">krb5_get_init_creds_opt_set_salt</b>(<i class="farg">krb5_get_init_creds_opt *opt</i>, <i class="farg">krb5_data *salt</i>);<p>
<i class="ftype">void</i><br>
<b class="fname">krb5_get_init_creds_opt_set_tkt_life</b>(<i class="farg">krb5_get_init_creds_opt *opt</i>, <i class="farg">krb5_deltat tkt_life</i>);<p>
<i class="ftype">krb5_error_code</i><br>
<b class="fname">krb5_get_init_creds_opt_set_canonicalize</b>(<i class="farg">krb5_context context</i>, <i class="farg">krb5_get_init_creds_opt *opt</i>, <i class="farg">krb5_boolean req</i>);<p>
<i class="ftype">krb5_error_code</i><br>
<b class="fname">krb5_get_init_creds_opt_set_win2k</b>(<i class="farg">krb5_context context</i>, <i class="farg">krb5_get_init_creds_opt *opt</i>, <i class="farg">krb5_boolean req</i>);<p>
<i class="ftype">krb5_error_code</i><br>
<b class="fname">krb5_get_init_creds</b>(<i class="farg">krb5_context context</i>, <i class="farg">krb5_creds *creds</i>, <i class="farg">krb5_principal client</i>, <i class="farg">krb5_prompter_fct prompter</i>, <i class="farg">void *prompter_data</i>, <i class="farg">krb5_deltat start_time</i>, <i class="farg">const char *in_tkt_service</i>, <i class="farg">krb5_get_init_creds_opt *options</i>);<p>
<i class="ftype">krb5_error_code</i><br>
<b class="fname">krb5_get_init_creds_password</b>(<i class="farg">krb5_context context</i>, <i class="farg">krb5_creds *creds</i>, <i class="farg">krb5_principal client</i>, <i class="farg">const char *password</i>, <i class="farg">krb5_prompter_fct prompter</i>, <i class="farg">void *prompter_data</i>, <i class="farg">krb5_deltat start_time</i>, <i class="farg">const char *in_tkt_service</i>, <i class="farg">krb5_get_init_creds_opt *in_options</i>);<p>
<i class="ftype">krb5_error_code</i><br>
<b class="fname">krb5_get_init_creds_keytab</b>(<i class="farg">krb5_context context</i>, <i class="farg">krb5_creds *creds</i>, <i class="farg">krb5_principal client</i>, <i class="farg">krb5_keytab keytab</i>, <i class="farg">krb5_deltat start_time</i>, <i class="farg">const char *in_tkt_service</i>, <i class="farg">krb5_get_init_creds_opt *options</i>);<p>
<i class="ftype">int</i><br>
<b class="fname">krb5_prompter_posix</b>(<i class="farg">krb5_context context</i>, <i class="farg">void *data</i>, <i class="farg">const char *name</i>, <i class="farg">const char *banner</i>, <i class="farg">int num_prompts</i>, <i class="farg">krb5_prompt prompts[]</i>);</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> Getting initial credential ticket for a principal. That may include changing an expired password, and doing preauthentication. This interface that replaces the deprecated <i class="farg">krb5_in_tkt</i> and <i class="farg">krb5_in_cred</i> functions.<p>
If you only want to verify a username and password, consider using <a class="link-man" href="../3/krb5_verify_user">krb5_verify_user(3)</a> instead, since it also verifies that initial credentials with using a keytab to make sure the response was from the KDC.<p>
First a <code class="lit">krb5_get_init_creds_opt</code> structure is initialized with <b class="fname">krb5_get_init_creds_opt_alloc</b>() or <b class="fname">krb5_get_init_creds_opt_init</b>(). <b class="fname">krb5_get_init_creds_opt_alloc</b>() allocates a extendible structures that needs to be freed with <b class="fname">krb5_get_init_creds_opt_free</b>(). The structure may be modified by any of the <b class="fname">krb5_get_init_creds_opt_set</b>() functions to change request parameters and authentication information.<p>
If the caller want to use the default options, <span class="define">NULL</span> can be passed instead.<p>
The the actual request to the KDC is done by any of the <b class="fname">krb5_get_init_creds</b>(), <b class="fname">krb5_get_init_creds_password</b>(), or <b class="fname">krb5_get_init_creds_keytab</b>() functions. <b class="fname">krb5_get_init_creds</b>() is the least specialized function and can, with the right in data, behave like the latter two. The latter two are there for compatibility with older releases and they are slightly easier to use.<p>
<code class="lit">krb5_prompt</code> is a structure containing the following elements:<p>
<pre style="margin-left: 0.00ex;" class="lit display">
typedef struct { 
    const char *prompt; 
    int hidden; 
    krb5_data *reply; 
    krb5_prompt_type type 
} krb5_prompt;</pre>
<p>
<i class="farg">prompt</i> is the prompt that should shown to the user If <i class="farg">hidden</i> is set, the prompter function shouldn't echo the output to the display device. <i class="farg">reply</i> must be preallocated; it will not be allocated by the prompter function. Possible values for the <i class="farg">type</i> element are:<p>
<dl style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 5.00ex;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
KRB5_PROMPT_TYPE_PASSWORD</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
KRB5_PROMPT_TYPE_NEW_PASSWORD</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
KRB5_PROMPT_TYPE_NEW_PASSWORD_AGAIN</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
KRB5_PROMPT_TYPE_PREAUTH</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
KRB5_PROMPT_TYPE_INFO</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
</dd>
</dl>
<p>
<b class="fname">krb5_prompter_posix</b>() is the default prompter function in a POSIX environment. It matches the <i class="farg">krb5_prompter_fct</i> and can be used in the <i class="farg">krb5_get_init_creds</i> functions. <b class="fname">krb5_prompter_posix</b>() doesn't require <i class="farg">prompter_data.</i><p>
If the <i class="farg">start_time</i> is zero, then the requested ticket will be valid beginning immediately. Otherwise, the <i class="farg">start_time</i> indicates how far in the future the ticket should be postdated.<p>
If the <i class="farg">in_tkt_service</i> name is <span class="define">non-NULL</span>, that principal name will be used as the server name for the initial ticket request. The realm of the name specified will be ignored and will be set to the realm of the client name. If no in_tkt_service name is specified, krbtgt/CLIENT-REALM@CLIENT-REALM will be used.<p>
For the rest of arguments, a configuration or library default will be used if no value is specified in the options structure.<p>
<b class="fname">krb5_get_init_creds_opt_set_address_list</b>() sets the list of <i class="farg">addresses</i> that is should be stored in the ticket.<p>
<b class="fname">krb5_get_init_creds_opt_set_addressless</b>() controls if the ticket is requested with addresses or not, <b class="fname">krb5_get_init_creds_opt_set_address_list</b>() overrides this option.<p>
<b class="fname">krb5_get_init_creds_opt_set_anonymous</b>() make the request anonymous if the <i class="farg">anonymous</i> parameter is non-zero.<p>
<b class="fname">krb5_get_init_creds_opt_set_default_flags</b>() sets the default flags using the configuration file.<p>
<b class="fname">krb5_get_init_creds_opt_set_etype_list</b>() set a list of enctypes that the client is willing to support in the request.<p>
<b class="fname">krb5_get_init_creds_opt_set_forwardable</b>() request a forwardable ticket.<p>
<b class="fname">krb5_get_init_creds_opt_set_pa_password</b>() set the <i class="farg">password</i> and <i class="farg">key_proc</i> that is going to be used to get a new ticket. <i class="farg">password</i> or <i class="farg">key_proc</i> can be <span class="define">NULL</span> if the caller wants to use the default values. If the <i class="farg">password</i> is unset and needed, the user will be prompted for it.<p>
<b class="fname">krb5_get_init_creds_opt_set_paq_request</b>() sets the password that is going to be used to get a new ticket.<p>
<b class="fname">krb5_get_init_creds_opt_set_preauth_list</b>() sets the list of client-supported preauth types.<p>
<b class="fname">krb5_get_init_creds_opt_set_proxiable</b>() makes the request proxiable.<p>
<b class="fname">krb5_get_init_creds_opt_set_renew_life</b>() sets the requested renewable lifetime.<p>
<b class="fname">krb5_get_init_creds_opt_set_salt</b>() sets the salt that is going to be used in the request.<p>
<b class="fname">krb5_get_init_creds_opt_set_tkt_life</b>() sets requested ticket lifetime.<p>
<b class="fname">krb5_get_init_creds_opt_set_canonicalize</b>() requests that the KDC canonicalize the client pricipal if possible.<p>
<b class="fname">krb5_get_init_creds_opt_set_win2k</b>() turns on compatibility with Windows 2000.</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../3/krb5">krb5(3)</a>, <a class="link-man" href="../3/krb5_creds">krb5_creds(3)</a>, <a class="link-man" href="../3/krb5_verify_user">krb5_verify_user(3)</a>, <a class="link-man" href="../5/krb5.conf">krb5.conf(5)</a>, <a class="link-man" href="../8/kerberos">kerberos(8)</a></div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
Sep 16, 2006</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
<>

