<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="../style.css" type="text/css" media="all">
<title>
PROP_ARRAY(3)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
PROP_ARRAY(3)</td>
<td class="head-vol" align="center">
Library Functions Manual</td>
<td class="head-rtitle" align="right">
PROP_ARRAY(3)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">prop_array</b>, <b class="name">prop_array_create</b>, <b class="name">prop_array_create_with_capacity</b>, <b class="name">prop_array_copy</b>, <b class="name">prop_array_copy_mutable</b>, <b class="name">prop_array_capacity</b>, <b class="name">prop_array_count</b>, <b class="name">prop_array_ensure_capacity</b>, <b class="name">prop_array_iterator</b>, <b class="name">prop_array_make_immutable</b>, <b class="name">prop_array_mutable</b>, <b class="name">prop_array_get</b>, <b class="name">prop_array_set</b>, <b class="name">prop_array_add</b>, <b class="name">prop_array_remove</b>, <b class="name">prop_array_externalize</b>, <b class="name">prop_array_internalize</b>, <b class="name">prop_array_externalize_to_file</b>, <b class="name">prop_array_internalize_from_file</b>, <b class="name">prop_array_externalize_to_pref</b>, <b class="name">prop_array_internalize_from_pref</b>, <b class="name">prop_array_equals</b> &#8212; <span class="desc">array property collection object</span></div>
<div class="section">
<h1 id="x4c494252415259">LIBRARY</h1> <span class="lib">Property Container Object Library (libprop, &#45;lprop)</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="includes">#include &lt;<a class="link-includes">prop/proplib.h</a>&gt;</b><p>
<i class="ftype">prop_array_t</i><br>
<b class="fname">prop_array_create</b>(<i class="farg" style="white-space:nowrap;">void</i>);<p>
<i class="ftype">prop_array_t</i><br>
<b class="fname">prop_array_create_with_capacity</b>(<i class="farg" style="white-space:nowrap;">unsigned int capacity</i>);<p>
<i class="ftype">prop_array_t</i><br>
<b class="fname">prop_array_copy</b>(<i class="farg" style="white-space:nowrap;">prop_array_t array</i>);<p>
<i class="ftype">prop_array_t</i><br>
<b class="fname">prop_array_copy_mutable</b>(<i class="farg" style="white-space:nowrap;">prop_array_t array</i>);<p>
<i class="ftype">unsigned int</i><br>
<b class="fname">prop_array_capacity</b>(<i class="farg" style="white-space:nowrap;">prop_array_t array</i>);<p>
<i class="ftype">unsigned int</i><br>
<b class="fname">prop_array_count</b>(<i class="farg" style="white-space:nowrap;">prop_array_t array</i>);<p>
<i class="ftype">bool</i><br>
<b class="fname">prop_array_ensure_capacity</b>(<i class="farg" style="white-space:nowrap;">prop_array_t array</i>, <i class="farg" style="white-space:nowrap;">unsigned int capacity</i>);<p>
<i class="ftype">prop_object_iterator_t</i><br>
<b class="fname">prop_array_iterator</b>(<i class="farg" style="white-space:nowrap;">prop_array_t array</i>);<p>
<i class="ftype">void</i><br>
<b class="fname">prop_array_make_immutable</b>(<i class="farg" style="white-space:nowrap;">prop_array_t array</i>);<p>
<i class="ftype">bool</i><br>
<b class="fname">prop_array_mutable</b>(<i class="farg" style="white-space:nowrap;">prop_array_t array</i>);<p>
<i class="ftype">prop_object_t</i><br>
<b class="fname">prop_array_get</b>(<i class="farg" style="white-space:nowrap;">prop_array_t array</i>, <i class="farg" style="white-space:nowrap;">unsigned int index</i>);<p>
<i class="ftype">bool</i><br>
<b class="fname">prop_array_set</b>(<i class="farg" style="white-space:nowrap;">prop_array_t array</i>, <i class="farg" style="white-space:nowrap;">unsigned int index</i>, <i class="farg" style="white-space:nowrap;">prop_object_t obj</i>);<p>
<i class="ftype">bool</i><br>
<b class="fname">prop_array_add</b>(<i class="farg" style="white-space:nowrap;">prop_array_t array</i>, <i class="farg" style="white-space:nowrap;">prop_object_t obj</i>);<p>
<i class="ftype">void</i><br>
<b class="fname">prop_array_remove</b>(<i class="farg" style="white-space:nowrap;">prop_array_t array</i>, <i class="farg" style="white-space:nowrap;">unsigned int index</i>);<p>
<i class="ftype">char *</i><br>
<b class="fname">prop_array_externalize</b>(<i class="farg" style="white-space:nowrap;">prop_array_t array</i>);<p>
<i class="ftype">prop_array_t</i><br>
<b class="fname">prop_array_internalize</b>(<i class="farg" style="white-space:nowrap;">const char *xml</i>);<p>
<i class="ftype">bool</i><br>
<b class="fname">prop_array_externalize_to_file</b>(<i class="farg" style="white-space:nowrap;">prop_array_t array</i>, <i class="farg" style="white-space:nowrap;">const char *path</i>);<p>
<i class="ftype">prop_array_t</i><br>
<b class="fname">prop_array_internalize_from_file</b>(<i class="farg" style="white-space:nowrap;">const char *path</i>);<p>
<i class="ftype">bool</i><br>
<b class="fname">prop_array_externalize_to_pref</b>(<i class="farg" style="white-space:nowrap;">prop_array_t array</i>, <i class="farg" style="white-space:nowrap;">struct plistref *pref</i>);<p>
<i class="ftype">bool</i><br>
<b class="fname">prop_array_internalize_from_pref</b>(<i class="farg" style="white-space:nowrap;">const struct plistref *pref</i>, <i class="farg" style="white-space:nowrap;">prop_array_t *arrayp</i>);<p>
<i class="ftype">bool</i><br>
<b class="fname">prop_array_equals</b>(<i class="farg" style="white-space:nowrap;">prop_array_t array1</i>, <i class="farg" style="white-space:nowrap;">prop_array_t array2</i>);</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> The <b class="name">prop_array</b> family of functions operate on the array property collection object type. An array is an ordered set; an iterated array will return objects in the same order with which they were stored.<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">prop_array_create</b>(<i class="farg">void</i>)</dt>
<dd class="list-tag" style="margin-left: 5.00ex;">
Create an empty array. The array initially has no capacity. Returns <span class="define">NULL</span> on failure.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">prop_array_create_with_capacity</b>(<i class="farg">unsigned int capacity</i>)</dt>
<dd class="list-tag" style="margin-left: 5.00ex;">
Create an array with the capacity to store <i class="farg">capacity</i> objects. Returns <span class="define">NULL</span> on failure.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">prop_array_copy</b>(<i class="farg">prop_array_t array</i>)</dt>
<dd class="list-tag" style="margin-left: 5.00ex;">
Copy an array. The new array has an initial capacity equal to the number of objects stored in the array being copied. The new array contains references to the original array's objects, not copies of those objects (i.e. a shallow copy is made). If the original array is immutable, the resulting array is also immutable. Returns <span class="define">NULL</span> on failure.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">prop_array_copy_mutable</b>(<i class="farg">prop_array_t array</i>)</dt>
<dd class="list-tag" style="margin-left: 5.00ex;">
Like <b class="fname">prop_array_copy</b>(), except the resulting array is always mutable.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">prop_array_capacity</b>(<i class="farg">prop_array_t array</i>)</dt>
<dd class="list-tag" style="margin-left: 5.00ex;">
Returns the total capacity of the array, including objects already stored in the array. If the supplied object isn't an array, zero is returned.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">prop_array_count</b>(<i class="farg">prop_array_t array</i>)</dt>
<dd class="list-tag" style="margin-left: 5.00ex;">
Returns the number of objects stored in the array. If the supplied object isn't an array, zero is returned.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">prop_array_ensure_capacity</b>(<i class="farg">prop_array_t array</i>, <i class="farg">unsigned int capacity</i>)</dt>
<dd class="list-tag" style="margin-left: 5.00ex;">
Ensure that the array has a total capacity of <i class="farg">capacity</i>, including objects already stored in the array. Returns <span class="define">true</span> if the capacity of the array is greater or equal to <i class="farg">capacity</i> or if expansion of the array's capacity was successful and <span class="define">false</span> otherwise.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">prop_array_iterator</b>(<i class="farg">prop_array_t array</i>)</dt>
<dd class="list-tag" style="margin-left: 5.00ex;">
Create an iterator for the array. The array is retained by the iterator. An array iterator returns the object references stored in the array. Storing to or removing from the array invalidates any active iterators for the array. Returns <span class="define">NULL</span> on failure.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">prop_array_make_immutable</b>(<i class="farg">prop_array_t array</i>)</dt>
<dd class="list-tag" style="margin-left: 5.00ex;">
Make <i class="farg">array</i> immutable.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">prop_array_mutable</b>(<i class="farg">prop_array_t array</i>)</dt>
<dd class="list-tag" style="margin-left: 5.00ex;">
Returns <span class="define">true</span> if the array is mutable.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">prop_array_get</b>(<i class="farg">prop_array_t array</i>, <i class="farg">unsigned int index</i>)</dt>
<dd class="list-tag" style="margin-left: 5.00ex;">
Return the object stored at the array index <i class="farg">index</i>. Returns <span class="define">NULL</span> on failure.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">prop_array_set</b>(<i class="farg">prop_array_t array</i>, <i class="farg">unsigned int index</i>, <i class="farg">prop_object_t obj</i>)</dt>
<dd class="list-tag" style="margin-left: 5.00ex;">
Store a reference to the object <i class="farg">obj</i> at the array index <i class="farg">index</i>. This function is not allowed to create holes in the array; the caller must either be setting the object just beyond the existing count or replacing an already existing object reference. The object will be retained by the array. If an existing object reference is being replaced, that object will be released. Returns <span class="define">true</span> if storing the object was successful and <span class="define">false</span> otherwise.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">prop_array_add</b>(<i class="farg">prop_array_t array</i>, <i class="farg">prop_object_t obj</i>)</dt>
<dd class="list-tag" style="margin-left: 5.00ex;">
Add a reference to the object <i class="farg">obj</i> to the array, appending to the end and growing the array's capacity if necessary. The object will be retained by the array. Returns <span class="define">true</span> if storing the object was successful and <span class="define">false</span> otherwise.<p>
During expansion, array's capacity is augmented by the <span class="define">EXPAND_STEP</span> constant, as defined in <i class="file">libprop/prop_array.c</i> file, e.g.<p>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit">#define	EXPAND_STEP		16</code></div>
</blockquote>
</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">prop_array_remove</b>(<i class="farg">prop_array_t array</i>, <i class="farg">unsigned int index</i>)</dt>
<dd class="list-tag" style="margin-left: 5.00ex;">
Remove the reference to the object stored at array index <i class="farg">index</i>. The object will be released and the array compacted following the removal.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">prop_array_externalize</b>(<i class="farg">prop_array_t array</i>)</dt>
<dd class="list-tag" style="margin-left: 5.00ex;">
Externalizes an array, returning a NUL-terminated buffer containing the XML representation of the array. The caller is responsible for freeing the returned buffer. If converting to the external representation fails for any reason, <span class="define">NULL</span> is returned.<p>
In user space, the buffer is allocated using <a class="link-man" href="../html3/malloc.html">malloc(3)</a>. In the kernel, the buffer is allocated using <a class="link-man" href="../html9/malloc.html">malloc(9)</a> using the malloc type <span class="define">M_TEMP</span>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">prop_array_internalize</b>(<i class="farg">const char *xml</i>)</dt>
<dd class="list-tag" style="margin-left: 5.00ex;">
Parse the XML representation of a property list in the NUL-terminated buffer <i class="farg">xml</i> and return the corresponding array. Returns <span class="define">NULL</span> if parsing fails for any reason.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">prop_array_externalize_to_file</b>(<i class="farg">prop_array_t array</i>, <i class="farg">const char *path</i>)</dt>
<dd class="list-tag" style="margin-left: 5.00ex;">
Externalizes an array and writes it to the file specified by <i class="farg">path</i>. The file is saved with the mode <span class="define">0666</span> as modified by the process's file creation mask (see <a class="link-man" href="../html2/umask.html">umask(2)</a>) and is written atomically. Returns <span class="define">false</span> if externalizing or writing the array fails for any reason.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">prop_array_internalize_from_file</b>(<i class="farg">const char *path</i>)</dt>
<dd class="list-tag" style="margin-left: 5.00ex;">
Reads the XML property list contained in the file specified by <i class="farg">path</i>, internalizes it, and returns the corresponding array. Returns <span class="define">NULL</span> on failure.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">prop_array_externalize_to_pref</b>(<i class="farg">prop_array_t array</i>, <i class="farg">struct plistref *pref</i>)</dt>
<dd class="list-tag" style="margin-left: 5.00ex;">
Externalizes an array and packs it into the plistref specified by <i class="farg">pref</i>. Returns <span class="define">false</span> if externalizing the array fails for any reason.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">prop_array_internalize_from_pref</b>(<i class="farg">const struct plistref *pref</i>, <i class="farg">prop_array_t *arrayp</i>)</dt>
<dd class="list-tag" style="margin-left: 5.00ex;">
Reads the plistref specified by <i class="farg">pref</i>, internalizes it, and returns the corresponding array. Returns <span class="define">false</span> if internalizing or writing the array fails for any reason.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">prop_array_equals</b>(<i class="farg">prop_array_t array1</i>, <i class="farg">prop_array_t array2</i>)</dt>
<dd class="list-tag" style="margin-left: 5.00ex;">
Returns <span class="define">true</span> if the two arrays are equivalent. If at least one of the supplied objects isn't an array, <span class="define">false</span> is returned. Note: Objects contained in the array are compared by value, not by reference.</dd>
</dl>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../html3/prop_bool.html">prop_bool(3)</a>, <a class="link-man" href="../html3/prop_data.html">prop_data(3)</a>, <a class="link-man" href="../html3/prop_dictionary.html">prop_dictionary(3)</a>, <a class="link-man" href="../html3/prop_number.html">prop_number(3)</a>, <a class="link-man" href="../html3/prop_object.html">prop_object(3)</a>, <a class="link-man" href="../html3/prop_string.html">prop_string(3)</a>, <a class="link-man" href="../html3/proplib.html">proplib(3)</a></div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> The <b class="name">proplib</b> property container object library first appeared in <span class="unix">NetBSD&#160;4.0</span>.</div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
October 10, 2009</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
</html>

