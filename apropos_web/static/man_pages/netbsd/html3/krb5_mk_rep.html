<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="../style.css" type="text/css" media="all">
<title>
KRB5_MK_REQ(3)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
KRB5_MK_REQ(3)</td>
<td class="head-vol" align="center">
Library Functions Manual</td>
<td class="head-rtitle" align="right">
KRB5_MK_REQ(3)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">krb5_mk_req</b>, <b class="name">krb5_mk_req_exact</b>, <b class="name">krb5_mk_req_extended</b>, <b class="name">krb5_rd_req</b>, <b class="name">krb5_rd_req_with_keyblock</b>, <b class="name">krb5_mk_rep</b>, <b class="name">krb5_mk_rep_exact</b>, <b class="name">krb5_mk_rep_extended</b>, <b class="name">krb5_rd_rep</b>, <b class="name">krb5_build_ap_req</b>, <b class="name">krb5_verify_ap_req</b> &#8212; <span class="desc">create and read application authentication request</span></div>
<div class="section">
<h1 id="x4c494252415259">LIBRARY</h1> Kerberos 5 Library (libkrb5, -lkrb5)</div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="includes">#include &lt;<a class="link-includes">krb5/krb5.h</a>&gt;</b><p>
<i class="ftype">krb5_error_code</i><br>
<b class="fname">krb5_mk_req</b>(<i class="farg">krb5_context context</i>, <i class="farg">krb5_auth_context *auth_context</i>, <i class="farg">const krb5_flags ap_req_options</i>, <i class="farg">const char *service</i>, <i class="farg">const char *hostname</i>, <i class="farg">krb5_data *in_data</i>, <i class="farg">krb5_ccache ccache</i>, <i class="farg">krb5_data *outbuf</i>);<p>
<i class="ftype">krb5_error_code</i><br>
<b class="fname">krb5_mk_req_extended</b>(<i class="farg">krb5_context context</i>, <i class="farg">krb5_auth_context *auth_context</i>, <i class="farg">const krb5_flags ap_req_options</i>, <i class="farg">krb5_data *in_data</i>, <i class="farg">krb5_creds *in_creds</i>, <i class="farg">krb5_data *outbuf</i>);<p>
<i class="ftype">krb5_error_code</i><br>
<b class="fname">krb5_rd_req</b>(<i class="farg">krb5_context context</i>, <i class="farg">krb5_auth_context *auth_context</i>, <i class="farg">const krb5_data *inbuf</i>, <i class="farg">krb5_const_principal server</i>, <i class="farg">krb5_keytab keytab</i>, <i class="farg">krb5_flags *ap_req_options</i>, <i class="farg">krb5_ticket **ticket</i>);<p>
<i class="ftype">krb5_error_code</i><br>
<b class="fname">krb5_build_ap_req</b>(<i class="farg">krb5_context context</i>, <i class="farg">krb5_enctype enctype</i>, <i class="farg">krb5_creds *cred</i>, <i class="farg">krb5_flags ap_options</i>, <i class="farg">krb5_data authenticator</i>, <i class="farg">krb5_data *retdata</i>);<p>
<i class="ftype">krb5_error_code</i><br>
<b class="fname">krb5_verify_ap_req</b>(<i class="farg">krb5_context context</i>, <i class="farg">krb5_auth_context *auth_context</i>, <i class="farg">krb5_ap_req *ap_req</i>, <i class="farg">krb5_const_principal server</i>, <i class="farg">krb5_keyblock *keyblock</i>, <i class="farg">krb5_flags flags</i>, <i class="farg">krb5_flags *ap_req_options</i>, <i class="farg">krb5_ticket **ticket</i>);</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> The functions documented in this manual page document the functions that facilitates the exchange between a Kerberos client and server. They are the core functions used in the authentication exchange between the client and the server.<p>
The <b class="name">krb5_mk_req</b> and <b class="name">krb5_mk_req_extended</b> creates the Kerberos message <span class="define">KRB_AP_REQ</span> that is sent from the client to the server as the first packet in a client/server exchange.  The result that should be sent to server is stored in <i class="farg">outbuf</i>.<p>
<i class="farg">auth_context</i> should be allocated with <b class="fname">krb5_auth_con_init</b>() or <span class="define">NULL</span> passed in, in that case, it will be allocated and freed internally.<p>
The input data <i class="farg">in_data</i> will have a checksum calculated over it and checksum will be transported in the message to the server.<p>
<i class="farg">ap_req_options</i> can be set to one or more of the following flags:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">AP_OPTS_USE_SESSION_KEY</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Use the session key when creating the request, used for user to user authentication.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">AP_OPTS_MUTUAL_REQUIRED</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Mark the request as mutual authenticate required so that the receiver returns a mutual authentication packet.</dd>
</dl>
<p>
The <b class="name">krb5_rd_req</b> read the AP_REQ in <i class="farg">inbuf</i> and verify and extract the content. If <i class="farg">server</i> is specified, that server will be fetched from the <i class="farg">keytab</i> and used unconditionally. If <i class="farg">server</i> is <span class="define">NULL</span>, the <i class="farg">keytab</i> will be search for a matching principal.<p>
The <i class="farg">keytab</i> argument specifies what keytab to search for receiving principals. The arguments <i class="farg">ap_req_options</i> and <i class="farg">ticket</i> returns the content.<p>
When the AS-REQ is a user to user request, neither of <i class="farg">keytab</i> or <i class="farg">principal</i> are used, instead <b class="fname">krb5_rd_req</b>() expects the session key to be set in <i class="farg">auth_context</i>.<p>
The <b class="name">krb5_verify_ap_req</b> and <b class="name">krb5_build_ap_req</b> both constructs and verify the AP_REQ message, should not be used by external code.</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../3/krb5">krb5(3)</a>, <a class="link-man" href="../5/krb5.conf">krb5.conf(5)</a></div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
August 27, 2005</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
</html>

