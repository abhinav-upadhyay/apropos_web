<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/../4/strict.dtd">
>
<head>
<meta http-equiv="Content-Type" content="te../; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="../style.css" type="text/css" media="all">
<title>
DAEMON(3)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
DAEMON(3)</td>
<td class="head-vol" align="center">
Library Functions Manual</td>
<td class="head-rtitle" align="right">
DAEMON(3)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">daemon</b> &#8212; <span class="desc">run in the background</span></div>
<div class="section">
<h1 id="x4c494252415259">LIBRARY</h1> <span class="lib">Standard C Library (libc, &#45;lc)</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="includes">#include &lt;<a class="link-includes">stdlib.h</a>&gt;</b><p>
<i class="ftype">int</i><br>
<b class="fname">daemon</b>(<i class="farg" style="white-space:nowrap;">int nochdir</i>, <i class="farg" style="white-space:nowrap;">int noclose</i>);</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> The <b class="fname">daemon</b>() function is for programs wishing to detach themselves from the controlling terminal and run in the background as system daemons.<p>
Unless the argument <i class="farg">nochdir</i> is non-zero, <b class="fname">daemon</b>() changes the current working directory to the root (<i class="file">/</i>).<p>
Unless the argument <i class="farg">noclose</i> is non-zero, <b class="fname">daemon</b>() will redirect standard input, standard output and standard error to <i class="file">/dev/null</i>.</div>
<div class="section">
<h1 id="x52455455524e2056414c554553">RETURN VALUES</h1> On return 0 indicates success with &#45;1 indicating error.</div>
<div class="section">
<h1 id="x4552524f5253">ERRORS</h1> The function <b class="fname">daemon</b>() may fail and set <b class="var">errno</b> for any of the errors specified for the library functions <a class="link-man" href="../2/fork">fork(2)</a> and <a class="link-man" href="../2/setsid">setsid(2)</a>.</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../2/fork">fork(2)</a>, <a class="link-man" href="../2/setsid">setsid(2)</a></div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> The <b class="fname">daemon</b>() function first appeared in <span class="unix">4.4BSD</span>.</div>
<div class="section">
<h1 id="x43415645415453">CAVEATS</h1> Unless the <i class="arg">noclose</i> argument is non-zero, <b class="fname">daemon</b>() will close the first three file descriptors and redirect them to <i class="file">/dev/null</i>. Normally, these correspond to standard input, standard output and standard error. However, if any of those file descriptors refer to something else they will still be closed, resulting in incorrect behavior of the calling program. This can happen if any of standard input, standard output or standard error have been closed before the program was run. Programs using <b class="fname">daemon</b>() should therefore make sure to either call <b class="fname">daemon</b>() before opening any files or sockets or, alternately, verifying that any file descriptors obtained have a value greater than 2.</div>
<div class="section">
<h1 id="x42554753">BUGS</h1> <b class="fname">daemon</b>() uses <b class="fname">fork</b>() as part of its tty detachment mechanism. Consequently the process id changes when <b class="fname">daemon</b>() is invoked. Processes employing <b class="fname">daemon</b>() can not be reliably waited upon until <b class="fname">daemon</b>() has been invoked.</div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
September 3, 1999</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
<>

