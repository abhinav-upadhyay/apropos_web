<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/../4/strict.dtd">
>
<head>
<meta http-equiv="Content-Type" content="te../; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="../style.css" type="text/css" media="all">
<title>
REFUSE(3)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
REFUSE(3)</td>
<td class="head-vol" align="center">
Library Functions Manual</td>
<td class="head-rtitle" align="right">
REFUSE(3)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">refuse</b> &#8212; <span class="desc">Re-implementation of a file system in userspace system</span></div>
<div class="section">
<h1 id="x4c494252415259">LIBRARY</h1> <span class="lib">File System in Userspace Convenience Library (librefuse, &#45;lrefuse)</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="includes">#include &lt;<a class="link-includes">fuse.h</a>&gt;</b><p>
<i class="ftype">int</i><br>
<b class="fname">fuse_main</b>(<i class="farg">int argc</i>, <i class="farg">char **argv</i>, <i class="farg">const struct fuse_operations *</i>);<p>
<i class="ftype">int</i><br>
<b class="fname">fuse_opt_add_arg</b>(<i class="farg">struct fuse_args *args</i>, <i class="farg">const char *arg</i>);<p>
<i class="ftype">int</i><br>
<b class="fname">fuse_opt_parse</b>(<i class="farg">struct fuse_args *args</i>, <i class="farg">void *userdata</i>, <i class="farg">const struct fuse_opt *descriptions</i>, <i class="farg">fuse_opt_proc_t processingfunc</i>);<p>
<i class="ftype">int</i><br>
<b class="fname">fuse_teardown</b>(<i class="farg">struct fuse *fuse</i>, <i class="farg">char *mountpoint</i>);<p>
<i class="ftype">struct fuse *</i><br>
<b class="fname">fuse_setup</b>(<i class="farg">int argc</i>, <i class="farg">char **argv</i>, <i class="farg">const struct fuse_operations *ops</i>, <i class="farg">size_t opssize</i>, <i class="farg">char **mountpoint</i>, <i class="farg">int *multithreaded</i>, <i class="farg">int *fd</i>);<p>
<i class="ftype">int</i><br>
<b class="fname">puffs_fuse_node_getattr</b>(<i class="farg">const char *path</i>, <i class="farg">struct stat *attrs</i>);<p>
<i class="ftype">int</i><br>
<b class="fname">puffs_fuse_node_readlink</b>(<i class="farg">const char *path</i>, <i class="farg">char *output</i>, <i class="farg">size_t outlen</i>);<p>
<i class="ftype">int</i><br>
<b class="fname">puffs_fuse_node_mknod</b>(<i class="farg">const char *path</i>, <i class="farg">mode_t permissions</i>, <i class="farg">dev_t devicenumber</i>);<p>
<i class="ftype">int</i><br>
<b class="fname">puffs_fuse_node_mkdir</b>(<i class="farg">const char *path</i>, <i class="farg">mode_t permissions</i>);<p>
<i class="ftype">int</i><br>
<b class="fname">puffs_fuse_unlink</b>(<i class="farg">const char *path</i>);<p>
<i class="ftype">int</i><br>
<b class="fname">puffs_fuse_node_rmdir</b>(<i class="farg">const char *path</i>);<p>
<i class="ftype">int</i><br>
<b class="fname">puffs_fuse_node_symlink</b>(<i class="farg">const char *path</i>, <i class="farg">const char *target</i>);<p>
<i class="ftype">int</i><br>
<b class="fname">puffs_fuse_node_rename</b>(<i class="farg">const char *from</i>, <i class="farg">const char *to</i>);<p>
<i class="ftype">int</i><br>
<b class="fname">puffs_fuse_node_link</b>(<i class="farg">const char *from</i>, <i class="farg">const char *to</i>);<p>
<i class="ftype">int</i><br>
<b class="fname">puffs_fuse_node_chmod</b>(<i class="farg">const char *path</i>, <i class="farg">mode_t permissions</i>);<p>
<i class="ftype">int</i><br>
<b class="fname">puffs_fuse_node_own</b>(<i class="farg">const char *path</i>, <i class="farg">uid_t owner</i>, <i class="farg">gid_t group</i>);<p>
<i class="ftype">int</i><br>
<b class="fname">puffs_fuse_node_truncate</b>(<i class="farg">const char *path</i>, <i class="farg">off_t newsize</i>);<p>
<i class="ftype">int</i><br>
<b class="fname">puffs_fuse_node_utime</b>(<i class="farg">const char *path</i>, <i class="farg">struct utimbuf *newtimes</i>);<p>
<i class="ftype">int</i><br>
<b class="fname">puffs_fuse_node_open</b>(<i class="farg">const char *path</i>, <i class="farg">struct fuse_file_info *fileinfo</i>);<p>
<i class="ftype">int</i><br>
<b class="fname">puffs_fuse_node_read</b>(<i class="farg">const char *path</i>, <i class="farg">char *buffer</i>, <i class="farg">size_t bufferlen</i>, <i class="farg">off_t startoffset</i>, <i class="farg">struct fuse_file_info *fileinfo</i>);<p>
<i class="ftype">int</i><br>
<b class="fname">puffs_fuse_node_write</b>(<i class="farg">const char *path</i>, <i class="farg">char *buffer</i>, <i class="farg">size_t bufferlen</i>, <i class="farg">off_t startoffset</i>, <i class="farg">struct fuse_file_info *fileinfo</i>);<p>
<i class="ftype">int</i><br>
<b class="fname">puffs_fuse_fs_statfs</b>(<i class="farg">const char *path</i>, <i class="farg">struct statvfs *vfsinfo</i>);<p>
<i class="ftype">int</i><br>
<b class="fname">puffs_fuse_node_flush</b>(<i class="farg">const char *path</i>, <i class="farg">struct fuse_file_info *fileinfo</i>);<p>
<i class="ftype">int</i><br>
<b class="fname">puffs_fuse_node_fsync</b>(<i class="farg">const char *path</i>, <i class="farg">int flags</i>, <i class="farg">struct fuse_file_info *fileinfo</i>);<p>
<i class="ftype">int</i><br>
<b class="fname">puffs_fuse_node_setxattr</b>(<i class="farg">const char *path</i>, <i class="farg">const char *attrname</i>, <i class="farg">const char *attrvalue</i>, <i class="farg">size_t attrsize</i>, <i class="farg">int flags</i>);<p>
<i class="ftype">int</i><br>
<b class="fname">puffs_fuse_node_getxattr</b>(<i class="farg">const char *path</i>, <i class="farg">const char *attrname</i>, <i class="farg">const char *attrvalue</i>, <i class="farg">size_t attrvaluesize</i>);<p>
<i class="ftype">int</i><br>
<b class="fname">puffs_fuse_node_listxattr</b>(<i class="farg">const char *path</i>, <i class="farg">const char *attrname</i>, <i class="farg">size_t attrvaluesize</i>);<p>
<i class="ftype">int</i><br>
<b class="fname">puffs_fuse_node_removexattr</b>(<i class="farg">const char *path</i>, <i class="farg">const char *attrname</i>);<p>
<i class="ftype">int</i><br>
<b class="fname">puffs_fuse_node_opendir</b>(<i class="farg">const char *path</i>, <i class="farg">struct fuse_file_info *fileinfo</i>);<p>
<i class="ftype">int</i><br>
<b class="fname">puffs_fuse_node_readdir</b>(<i class="farg">const char *path</i>, <i class="farg">void *data</i>, <i class="farg">fuse_fill_dir_t fillinfo</i>, <i class="farg">off_t offset</i>, <i class="farg">struct fuse_file_info *fileinfo</i>);<p>
<i class="ftype">int</i><br>
<b class="fname">puffs_fuse_node_releasedir</b>(<i class="farg">const char *path</i>, <i class="farg">struct fuse_file_info *fileinfo</i>);<p>
<i class="ftype">int</i><br>
<b class="fname">puffs_fuse_node_fsyncdir</b>(<i class="farg">const char *path</i>, <i class="farg">int flags</i>, <i class="farg">struct fuse_file_info *fileinfo</i>);<p>
<i class="ftype">void *</i><br>
<b class="fname">puffs_fuse_fs_init</b>(<i class="farg">struct fuse_conn_info *connectioninfo</i>);<p>
<i class="ftype">void</i><br>
<b class="fname">puffs_fuse_node_destroy</b>(<i class="farg">void *connection</i>);<p>
<i class="ftype">int</i><br>
<b class="fname">puffs_fuse_node_access</b>(<i class="farg">const char *path</i>, <i class="farg">int accesstype</i>);<p>
<i class="ftype">int</i><br>
<b class="fname">puffs_fuse_node_create</b>(<i class="farg">const char *path</i>, <i class="farg">mode_t permissions</i>, <i class="farg">struct fuse_file_info *fileinfo</i>);<p>
<i class="ftype">int</i><br>
<b class="fname">puffs_fuse_node_ftruncate</b>(<i class="farg">const char *path</i>, <i class="farg">off_t offset</i>, <i class="farg">struct fuse_file_info *fileinfo</i>);<p>
<i class="ftype">int</i><br>
<b class="fname">puffs_fuse_node_fgetattr</b>(<i class="farg">const char *path</i>, <i class="farg">struct stat *attrs</i>, <i class="farg">struct fuse_file_info *fileinfo</i>);<p>
<i class="ftype">int</i><br>
<b class="fname">puffs_fuse_node_lock</b>(<i class="farg">const char *path</i>, <i class="farg">struct fuse_file_info *fileinfo</i>, <i class="farg">int locktype</i>, <i class="farg">struct flock *lockinfo</i>);<p>
<i class="ftype">int</i><br>
<b class="fname">puffs_fuse_node_utimens</b>(<i class="farg">const char *path</i>, <i class="farg">const struct timespec *newtimes</i>);<p>
<i class="ftype">int</i><br>
<b class="fname">puffs_fuse_node_bmap</b>(<i class="farg">const char *path</i>, <i class="farg">size_t mapsize</i>, <i class="farg">uint64_t offset</i>);</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> <b class="name">refuse</b> is a reimplementation of the file system in user space subsystem. Operations are transported from the kernel virtual file system layer to the concrete implementation behind <b class="name">refuse</b>, where they are processed and results are sent back to the kernel.<p>
It uses the framework provided by the <a class="link-man" href="../3/puffs">puffs(3)</a> subsystem, and, through that, the kernel interface provided by <a class="link-man" href="../4/puffs">puffs(4)</a>.</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../3/puffs">puffs(3)</a>, <a class="link-man" href="../4/puffs">puffs(4)</a><p>
<span class="ref"><span class="ref-auth">Antti Kantee</span> and <span class="ref-auth">Alistair Crooks</span>, <span class="ref-title">ReFUSE: Userspace FUSE Reimplementation Using puffs</span>, <i class="ref-jrnl">EuroBSDCon 2007</i>, <span class="ref-date">September 2007</span>.</span></div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> An unsupported experimental version of <b class="name">refuse</b> first appeared in <span class="unix">NetBSD&#160;5.0</span>.</div>
<div class="section">
<h1 id="x415554484f5253">AUTHORS</h1> <span class="author">Alistair Crooks</span> &#60;<a class="link-mail" href="mailto:agc@NetBSD.org">agc@NetBSD.org</a>&#62;, <span class="author">Antti Kantee</span> &#60;<a class="link-mail" href="mailto:pooka@NetBSD.org">pooka@NetBSD.org</a>&#62;</div>
<div class="section">
<h1 id="x42554753">BUGS</h1> Many, legion, but well-loved.</div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
April 30, 2007</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
<>

