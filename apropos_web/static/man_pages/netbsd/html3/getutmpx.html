<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="../style.css" type="text/css" media="all">
<title>
GETLASTLOGX(3)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
GETLASTLOGX(3)</td>
<td class="head-vol" align="center">
Library Functions Manual</td>
<td class="head-rtitle" align="right">
GETLASTLOGX(3)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">getlastlogx</b>, <b class="name">getutmp</b>, <b class="name">getutmpx</b>, <b class="name">updlastlogx</b>, <b class="name">updwtmpx</b>, <b class="name">utmpxname</b> &#8212; <span class="desc">user accounting database functions</span></div>
<div class="section">
<h1 id="x4c494252415259">LIBRARY</h1> <span class="lib">Standard C Library (libc, &#45;lc)</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="includes">#include &lt;<a class="link-includes">utmpx.h</a>&gt;</b><p>
<i class="ftype">struct lastlogx *</i><br>
<b class="fname">getlastlogx</b>(<i class="farg" style="white-space:nowrap;">const char *fname</i>, <i class="farg" style="white-space:nowrap;">uid_t uid</i>, <i class="farg" style="white-space:nowrap;">struct lastlogx *ll</i>);<p>
<i class="ftype">void</i><br>
<b class="fname">getutmp</b>(<i class="farg" style="white-space:nowrap;">const struct utmpx *ux</i>, <i class="farg" style="white-space:nowrap;">struct utmp *u</i>);<p>
<i class="ftype">void</i><br>
<b class="fname">getutmpx</b>(<i class="farg" style="white-space:nowrap;">const struct utmp *u</i>, <i class="farg" style="white-space:nowrap;">struct utmpx *ux</i>);<p>
<i class="ftype">int</i><br>
<b class="fname">updlastlogx</b>(<i class="farg" style="white-space:nowrap;">const char *fname</i>, <i class="farg" style="white-space:nowrap;">uid_t uid</i>, <i class="farg" style="white-space:nowrap;">struct lastlogx *ll</i>);<p>
<i class="ftype">int</i><br>
<b class="fname">updwtmpx</b>(<i class="farg" style="white-space:nowrap;">const char *file</i>, <i class="farg" style="white-space:nowrap;">const struct utmpx *utx</i>);<p>
<i class="ftype">int</i><br>
<b class="fname">utmpxname</b>(<i class="farg" style="white-space:nowrap;">const char *fname</i>);</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> The <b class="fname">getlastlogx</b>() function looks up the entry for the user with user id <i class="farg">uid</i> in the <a class="link-man" href="../5/lastlogx">lastlogx(5)</a> file given by <i class="farg">fname</i> and returns it in <i class="farg">ll</i>. If the provided <i class="farg">ll</i> is <span class="define">NULL</span>, the necessary space will be allocated by <b class="fname">getlastlogx</b>() and should be <b class="fname">free</b>()d by the caller.<p>
The <b class="fname">getutmp</b>() function fills out the entries in the struct utmp <i class="farg">u</i> with the data provided in the struct utmpx <i class="farg">ux</i>. <b class="fname">getutmpx</b>() does the opposite, filling out the entries in the struct utmpx <i class="farg">ux</i> with the data provided in the struct utmp <i class="farg">u</i>, and initializing all the unknown fields to 0. The sole exception is the <i class="farg">ut_type</i> field, which will be initialized to <span class="define">USER_PROCESS</span>.<p>
The <b class="fname">updlastlogx</b>() function tries to update the information for the user with the user id <i class="farg">uid</i> in the <a class="link-man" href="../5/lastlogx">lastlogx(5)</a> file given by <i class="farg">fname</i> with the data supplied in <i class="farg">ll</i>. A <i class="ftype">struct lastlogx</i> is defined like this:<p>
<pre style="margin-left: 0.00ex;" class="lit display">
struct lastlogx { 
        struct timeval ll_tv;           /* time entry was created */ 
        char ll_line[_UTX_LINESIZE];    /* tty name */ 
        char ll_host[_UTX_HOSTSIZE];    /* host name */ 
        struct sockaddr_storage ll_ss;  /* address where entry was made from */ 
};</pre>
All the fields should be filled out by the caller.<p>
The <b class="fname">updwtmpx</b>() function updates the <a class="link-man" href="../5/wtmpx">wtmpx(5)</a> file <i class="farg">file</i> with the <a class="link-man" href="../5/utmpx">utmpx(5)</a> entry <i class="farg">utx</i>.<p>
The <b class="fname">utmpxname</b>() function sets the default <a class="link-man" href="../5/utmpx">utmpx(5)</a> database file name to <i class="farg">fname</i>.</div>
<div class="section">
<h1 id="x52455455524e2056414c554553">RETURN VALUES</h1> <b class="fname">getlastlogx</b>() returns the found entry on success, or <span class="define">NULL</span> if it could not open the database, could not find an entry matching <i class="farg">uid</i> in there, or could not allocate the necessary space (in case <i class="farg">ll</i> was <span class="define">NULL</span>).<p>
<b class="fname">utmpxname</b>() returns 1 on success, or 0 if the supplied file name was too long or did not end with &#8216;x&#8217;.<p>
<b class="fname">updlastlogx</b>() and <b class="fname">updwtmpx</b>() return 0 on success, or &#45;1 in case the database or file respectively could not be opened or the data not written into it.</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../3/endutxent">endutxent(3)</a>, <a class="link-man" href="../3/loginx">loginx(3)</a>, <a class="link-man" href="../5/utmpx">utmpx(5)</a></div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> The functions <b class="fname">getutmp</b>(), <b class="fname">getutmpx</b>(), <b class="fname">updwtmpx</b>(), and <b class="fname">utmpxname</b>() first appeared in Solaris. <b class="name">getlastlogx</b> and <b class="name">updlastlogx</b> first appeared in <span class="unix">NetBSD&#160;2.0</span>.</div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
August 26, 2003</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
</html>

