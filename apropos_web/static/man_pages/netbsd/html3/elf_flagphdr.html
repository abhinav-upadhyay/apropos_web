<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="/static/man_pages/netbsd/style.css" type="text/css" media="all">
<title>
ELF_FLAGDATA(3)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
ELF_FLAGDATA(3)</td>
<td class="head-vol" align="center">
Library Functions Manual</td>
<td class="head-rtitle" align="right">
ELF_FLAGDATA(3)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">elf_flagarhdr</b>, <b class="name">elf_flagdata</b>, <b class="name">elf_flagehdr</b>, <b class="name">elf_flagelf</b>, <b class="name">elf_flagphdr</b>, <b class="name">elf_flagscn</b>, <b class="name">elf_flagshdr</b> &#8212; <span class="desc">manipulate flags associated with ELF(3) data structures</span></div>
<div class="section">
<h1 id="x4c494252415259">LIBRARY</h1> <span class="lib">ELF Access Library (libelf, &#45;lelf)</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="includes">#include &lt;<a class="link-includes">libelf.h</a>&gt;</b><p>
<i class="ftype">unsigned int</i><br>
<b class="fname">elf_flagarhdr</b>(<i class="farg" style="white-space:nowrap;">Elf_Arhdr *arhdr</i>, <i class="farg" style="white-space:nowrap;">Elf_Cmd cmd</i>, <i class="farg" style="white-space:nowrap;">unsigned int flags</i>);<p>
<i class="ftype">unsigned int</i><br>
<b class="fname">elf_flagdata</b>(<i class="farg" style="white-space:nowrap;">Elf_Data *data</i>, <i class="farg" style="white-space:nowrap;">Elf_Cmd cmd</i>, <i class="farg" style="white-space:nowrap;">unsigned int flags</i>);<p>
<i class="ftype">unsigned int</i><br>
<b class="fname">elf_flagehdr</b>(<i class="farg" style="white-space:nowrap;">Elf *elf</i>, <i class="farg" style="white-space:nowrap;">Elf_Cmd cmd</i>, <i class="farg" style="white-space:nowrap;">unsigned int flags</i>);<p>
<i class="ftype">unsigned int</i><br>
<b class="fname">elf_flagelf</b>(<i class="farg" style="white-space:nowrap;">Elf *elf</i>, <i class="farg" style="white-space:nowrap;">Elf_Cmd cmd</i>, <i class="farg" style="white-space:nowrap;">unsigned int flags</i>);<p>
<i class="ftype">unsigned int</i><br>
<b class="fname">elf_flagphdr</b>(<i class="farg" style="white-space:nowrap;">Elf *elf</i>, <i class="farg" style="white-space:nowrap;">Elf_Cmd cmd</i>, <i class="farg" style="white-space:nowrap;">unsigned int flags</i>);<p>
<i class="ftype">unsigned int</i><br>
<b class="fname">elf_flagscn</b>(<i class="farg" style="white-space:nowrap;">Elf_Scn *scn</i>, <i class="farg" style="white-space:nowrap;">Elf_Cmd cmd</i>, <i class="farg" style="white-space:nowrap;">unsigned int flags</i>);<p>
<i class="ftype">unsigned int</i><br>
<b class="fname">elf_flagshdr</b>(<i class="farg" style="white-space:nowrap;">Elf_Scn *scn</i>, <i class="farg" style="white-space:nowrap;">Elf_Cmd cmd</i>, <i class="farg" style="white-space:nowrap;">unsigned int flags</i>);</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> These functions are used to query, set or reset flags on data structures associated with an ELF file.<p>
Arguments <i class="arg">arhdr</i>, <i class="arg">data</i>, <i class="arg">elf</i> and <i class="arg">scn</i> denote the data structures whose flags need to be changed. These values should have been returned by prior calls to functions in the ELF(3) API set:<ul style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-bul">
<li class="list-bul" style="margin-top: 0.00em;">
Argument <i class="arg">arhdr</i> should have been returned by a prior call to <a class="link-man" href="../3/elf_getarhdr">elf_getarhdr(3)</a>.</li>
<li class="list-bul" style="margin-top: 0.00em;">
Argument <i class="arg">data</i> should have been returned by a prior call to one of <a class="link-man" href="../3/elf_newdata">elf_newdata(3)</a>, <a class="link-man" href="../3/elf_getdata">elf_getdata(3)</a> or <a class="link-man" href="../3/elf_rawdata">elf_rawdata(3)</a>.</li>
<li class="list-bul" style="margin-top: 0.00em;">
Argument <i class="arg">elf</i> should have been allocated by a prior call to one of <a class="link-man" href="../3/elf_begin">elf_begin(3)</a> or <a class="link-man" href="../3/elf_memory">elf_memory(3)</a>.</li>
<li class="list-bul" style="margin-top: 0.00em;">
Argument <i class="arg">scn</i> should have been returned by a prior call to one of <a class="link-man" href="../3/elf_getscn">elf_getscn(3)</a>, <a class="link-man" href="../3/elf_newscn">elf_newscn(3)</a> or <a class="link-man" href="../3/elf_nextscn">elf_nextscn(3)</a>.</li>
</ul>
These values are allowed to be NULL to simplify error handling in application code.<p>
Argument <i class="arg">cmd</i> may have the following values:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">ELF_C_CLR</span></dt>
<dd class="list-tag" style="margin-left: 9.00ex;">
The argument <i class="arg">flags</i> specifies the flags to be cleared.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">ELF_C_SET</span></dt>
<dd class="list-tag" style="margin-left: 9.00ex;">
The argument <i class="arg">flags</i> specifies the flags to be set.</dd>
</dl>
<p>
The argument <i class="arg">flags</i> is allowed to have the following flags set:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">ELF_F_ARCHIVE</span></dt>
<dd class="list-tag" style="margin-left: 18.00ex;">
This flag is only valid with the <b class="fname">elf_flagelf</b>() API. It informs the library that the application desires to create an <a class="link-man" href="../1/ar">ar(1)</a> archive. Argument <i class="arg">elf</i> should have been opened for writing using the <span class="define">ELF_C_WRITE</span> command to function <b class="fname">elf_begin</b>().</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">ELF_F_ARCHIVE_SYSV</span></dt>
<dd class="list-tag" style="margin-left: 18.00ex;">
This flag is used in conjunction with the <span class="define">ELF_F_ARCHIVE</span> flag to indicate that library should create archives that conform to System V layout rules. The default is to create BSD style archives.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">ELF_F_DIRTY</span></dt>
<dd class="list-tag" style="margin-left: 18.00ex;">
Mark the associated data structure as needing to be written back to the underlying file. A subsequent call to <a class="link-man" href="../3/elf_update">elf_update(3)</a> will resynchronize the library's internal data structures.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">ELF_F_LAYOUT</span></dt>
<dd class="list-tag" style="margin-left: 18.00ex;">
This flag is only valid with the <b class="fname">elf_flagelf</b>() API. It informs the library that the application will take responsibility for the layout of the file and that the library is not to insert any padding in between sections.</dd>
</dl>
<p>
Marking a given data structure as &#8220;dirty&#8221; affects all of its contained elements. Thus marking an ELF descriptor <i class="arg">elf</i> with <b class="fname">elf_flagelf</b>(<i class="farg">elf</i>, <i class="farg">ELF_C_SET</i>, <i class="farg">ELF_F_DIRTY</i>) means that the entire contents of the descriptor are &#8220;dirty&#8221;.<p>
Using a value of zero for argument <i class="arg">flags</i> will return the current set of flags for the data structure being queried.</div>
<div class="section">
<h1 id="x52455455524e2056414c554553">RETURN VALUES</h1> These functions return the updated flags if successful, or zero if an error is detected.</div>
<div class="section">
<h1 id="x434f4d5041544942494c495459">COMPATIBILITY</h1> The <b class="fname">elf_flagarhdr</b>() function and the <span class="define">ELF_F_ARCHIVE</span> and <span class="define">ELF_F_ARCHIVE_SYSV</span> flags are an extension to the ELF(3) API.</div>
<div class="section">
<h1 id="x4552524f5253">ERRORS</h1> These functions may fail with the following errors:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">ELF_E_ARGUMENT</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 16.00ex;">
An unsupported value was used for the <i class="arg">cmd</i> argument.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">ELF_E_ARGUMENT</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 16.00ex;">
Argument <i class="arg">flags</i> had unsupported flags set.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">ELF_E_ARGUMENT</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 16.00ex;">
The argument <i class="arg">elf</i> was not a descriptor for an ELF object.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">ELF_E_MODE</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 16.00ex;">
The <span class="define">ELF_F_ARCHIVE</span> flag was used with an ELF descriptor that had not been opened for writing.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">ELF_E_SEQUENCE</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 16.00ex;">
Function <b class="fname">elf_flagehdr</b>() was called without an executable header being allocated.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">ELF_E_SEQUENCE</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 16.00ex;">
Function <b class="fname">elf_flagphdr</b>() was called without a program header being allocated.</dd>
</dl>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../3/elf">elf(3)</a>, <a class="link-man" href="../3/elf32_newehdr">elf32_newehdr(3)</a>, <a class="link-man" href="../3/elf32_newphdr">elf32_newphdr(3)</a>, <a class="link-man" href="../3/elf32_newshdr">elf32_newshdr(3)</a>, <a class="link-man" href="../3/elf64_newehdr">elf64_newehdr(3)</a>, <a class="link-man" href="../3/elf64_newphdr">elf64_newphdr(3)</a>, <a class="link-man" href="../3/elf64_newshdr">elf64_newshdr(3)</a>, <a class="link-man" href="../3/elf_newdata">elf_newdata(3)</a>, <a class="link-man" href="../3/elf_update">elf_update(3)</a>, <a class="link-man" href="../3/gelf">gelf(3)</a>, <a class="link-man" href="../3/gelf_newehdr">gelf_newehdr(3)</a>, <a class="link-man" href="../3/gelf_newphdr">gelf_newphdr(3)</a>, <a class="link-man" href="../3/gelf_newshdr">gelf_newshdr(3)</a>, <a class="link-man" href="../3/gelf_update_dyn">gelf_update_dyn(3)</a>, <a class="link-man" href="../3/gelf_update_move">gelf_update_move(3)</a>, <a class="link-man" href="../3/gelf_update_rel">gelf_update_rel(3)</a>, <a class="link-man" href="../3/gelf_update_rela">gelf_update_rela(3)</a>, <a class="link-man" href="../3/gelf_update_sym">gelf_update_sym(3)</a>, <a class="link-man" href="../3/gelf_update_syminfo">gelf_update_syminfo(3)</a></div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
December 3, 2011</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
</html>

