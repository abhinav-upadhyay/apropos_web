<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="../style.css" type="text/css" media="all">
<title>
FTS(3)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
FTS(3)</td>
<td class="head-vol" align="center">
Library Functions Manual</td>
<td class="head-rtitle" align="right">
FTS(3)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">fts</b>, <b class="name">fts_open</b>, <b class="name">fts_read</b>, <b class="name">fts_children</b>, <b class="name">fts_set</b>, <b class="name">fts_close</b> &#8212; <span class="desc">traverse a file hierarchy</span></div>
<div class="section">
<h1 id="x4c494252415259">LIBRARY</h1> <span class="lib">Standard C Library (libc, &#45;lc)</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="includes">#include &lt;<a class="link-includes">sys/types.h</a>&gt;</b><br>
<b class="includes">#include &lt;<a class="link-includes">sys/stat.h</a>&gt;</b><br>
<b class="includes">#include &lt;<a class="link-includes">fts.h</a>&gt;</b><p>
<i class="ftype">FTS *</i><br>
<b class="fname">fts_open</b>(<i class="farg">char * const *path_argv</i>, <i class="farg">int options</i>, <i class="farg">int (*compar)(const FTSENT **, const FTSENT **)</i>);<p>
<i class="ftype">FTSENT *</i><br>
<b class="fname">fts_read</b>(<i class="farg" style="white-space:nowrap;">FTS *ftsp</i>);<p>
<i class="ftype">FTSENT *</i><br>
<b class="fname">fts_children</b>(<i class="farg" style="white-space:nowrap;">FTS *ftsp</i>, <i class="farg" style="white-space:nowrap;">int options</i>);<p>
<i class="ftype">int</i><br>
<b class="fname">fts_set</b>(<i class="farg" style="white-space:nowrap;">FTS *ftsp</i>, <i class="farg" style="white-space:nowrap;">FTSENT *f</i>, <i class="farg" style="white-space:nowrap;">int options</i>);<p>
<i class="ftype">int</i><br>
<b class="fname">fts_close</b>(<i class="farg" style="white-space:nowrap;">FTS *ftsp</i>);</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> The <b class="name">fts</b> functions are provided for traversing <span class="unix">UNIX</span> file hierarchies. A simple overview is that the <b class="fname">fts_open</b>() function returns a &#8220;handle&#8221; on a file hierarchy, which is then supplied to the other <b class="name">fts</b> functions. The function <b class="fname">fts_read</b>() returns a pointer to a structure describing one of the files in the file hierarchy. The function <b class="fname">fts_children</b>() returns a pointer to a linked list of structures, each of which describes one of the files contained in a directory in the hierarchy. In general, directories are visited two distinguishable times; in pre-order (before any of their descendants are visited) and in post-order (after all of their descendants have been visited). Files are visited once. It is possible to walk the hierarchy &#8220;logically&#8221; (ignoring symbolic links) or physically (visiting symbolic links), order the walk of the hierarchy or prune and/or re-visit portions of the hierarchy.<p>
Two structures are defined (and typedef'd) in the include file <b class="includes">&lt;<a class="link-includes">fts.h</a>&gt;</b>. The first is <i class="farg">FTS</i>, the structure that represents the file hierarchy itself. The second is <i class="farg">FTSENT</i>, the structure that represents a file in the file hierarchy. Normally, an <i class="farg">FTSENT</i> structure is returned for every file in the file hierarchy. In this manual page, &#8220;file&#8221; and &#8220;<i class="farg">FTSENT</i> structure&#8221; are generally interchangeable. The <i class="farg">FTSENT</i> structure contains at least the following fields, which are described in greater detail below:<p>
<pre style="margin-left: 2.00ex;" class="lit display">
typedef struct _ftsent { 
	u_short fts_info;		/* flags for FTSENT structure */ 
	char *fts_accpath;		/* access path */ 
	char *fts_path;			/* root path */ 
	short fts_pathlen;		/* strlen(fts_path) */ 
	char *fts_name;			/* file name */ 
	short fts_namelen;		/* strlen(fts_name) */ 
	short fts_level;		/* depth (&#45;1 to N) */ 
	int fts_errno;			/* file errno */ 
	long fts_number;		/* local numeric value */ 
	void *fts_pointer;		/* local address value */ 
	struct ftsent *fts_parent;	/* parent directory */ 
	struct ftsent *fts_link;	/* next file structure */ 
	struct ftsent *fts_cycle;	/* cycle structure */ 
	struct stat *fts_statp;		/* stat(2) information */ 
} FTSENT;</pre>
<p>
These fields are defined as follows:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="farg">fts_info</i></dt>
<dd class="list-tag" style="margin-left: 11.00ex;">
One of the following flags describing the returned <i class="farg">FTSENT</i> structure and the file it represents. With the exception of directories without errors (<span class="define">FTS_D</span>), all of these entries are terminal, that is, they will not be revisited, nor will any of their descendants be visited.<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">FTS_D</span></dt>
<dd class="list-tag" style="margin-left: 11.00ex;">
A directory being visited in pre-order.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">FTS_DC</span></dt>
<dd class="list-tag" style="margin-left: 11.00ex;">
A directory that causes a cycle in the tree. (The <i class="farg">fts_cycle</i> field of the <i class="farg">FTSENT</i> structure will be filled in as well).</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">FTS_DEFAULT</span></dt>
<dd class="list-tag" style="margin-left: 11.00ex;">
Any <i class="farg">FTSENT</i> structure that represents a file type not explicitly described by one of the other <i class="farg">fts_info</i> values.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">FTS_DNR</span></dt>
<dd class="list-tag" style="margin-left: 11.00ex;">
A directory which cannot be read. This is an error return, and the <i class="farg">fts_errno</i> field will be set to indicate what caused the error.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">FTS_DOT</span></dt>
<dd class="list-tag" style="margin-left: 11.00ex;">
A file named &#8216;<code class="lit">.</code>&#8217; or &#8216;<code class="lit">..</code>&#8217; which was not specified as a file name to <b class="fname">fts_open</b>() (see <span class="define">FTS_SEEDOT</span>).</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">FTS_DP</span></dt>
<dd class="list-tag" style="margin-left: 11.00ex;">
A directory being visited in post-order. The contents of the <i class="farg">FTSENT</i> structure will be unchanged from when it was returned in pre-order, i.e., with the <i class="farg">fts_info</i> field set to <span class="define">FTS_D</span>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">FTS_ERR</span></dt>
<dd class="list-tag" style="margin-left: 11.00ex;">
This is an error return, and the <i class="farg">fts_errno</i> field will be set to indicate what caused the error.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">FTS_F</span></dt>
<dd class="list-tag" style="margin-left: 11.00ex;">
A regular file.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">FTS_NS</span></dt>
<dd class="list-tag" style="margin-left: 11.00ex;">
A file for which no <a class="link-man" href="../html2/stat.html">stat(2)</a> information was available. The contents of the <i class="farg">fts_statp</i> field are undefined. This is an error return, and the <i class="farg">fts_errno</i> field will be set to indicate what caused the error.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">FTS_NSOK</span></dt>
<dd class="list-tag" style="margin-left: 11.00ex;">
A file for which no <a class="link-man" href="../html2/stat.html">stat(2)</a> information was requested. The contents of the <i class="farg">fts_statp</i> field are undefined.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">FTS_SL</span></dt>
<dd class="list-tag" style="margin-left: 11.00ex;">
A symbolic link.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">FTS_SLNONE</span></dt>
<dd class="list-tag" style="margin-left: 11.00ex;">
A symbolic link with a non-existent target. The contents of the <i class="farg">fts_statp</i> field reference the file characteristic information for the symbolic link itself.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">FTS_W</span></dt>
<dd class="list-tag" style="margin-left: 11.00ex;">
A whiteout object.</dd>
</dl>
</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="farg">fts_accpath</i></dt>
<dd class="list-tag" style="margin-left: 11.00ex;">
A path for accessing the file from the current directory.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="farg">fts_path</i></dt>
<dd class="list-tag" style="margin-left: 11.00ex;">
The path for the file relative to the root of the traversal. This path contains the path specified to <b class="fname">fts_open</b>() as a prefix.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="farg">fts_pathlen</i></dt>
<dd class="list-tag" style="margin-left: 11.00ex;">
The length of the string referenced by <i class="farg">fts_path</i>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="farg">fts_name</i></dt>
<dd class="list-tag" style="margin-left: 11.00ex;">
The name of the file.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="farg">fts_namelen</i></dt>
<dd class="list-tag" style="margin-left: 11.00ex;">
The length of the string referenced by <i class="farg">fts_name</i>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="farg">fts_level</i></dt>
<dd class="list-tag" style="margin-left: 11.00ex;">
The depth of the traversal, numbered from &#45;1 to N, where this file was found. The <i class="farg">FTSENT</i> structure representing the parent of the starting point (or root) of the traversal is numbered &#45;1, and the <i class="farg">FTSENT</i> structure for the root itself is numbered 0.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="farg">fts_errno</i></dt>
<dd class="list-tag" style="margin-left: 11.00ex;">
Upon return of a <i class="farg">FTSENT</i> structure from the <b class="fname">fts_children</b>() or <b class="fname">fts_read</b>() functions, with its <i class="farg">fts_info</i> field set to <span class="define">FTS_DNR</span>, <span class="define">FTS_ERR</span> or <span class="define">FTS_NS</span>, the <i class="farg">fts_errno</i> field contains the value of the external variable <b class="var">errno</b> specifying the cause of the error. Otherwise, the contents of the <i class="farg">fts_errno</i> field are undefined.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="farg">fts_number</i></dt>
<dd class="list-tag" style="margin-left: 11.00ex;">
This field is provided for the use of the application program and is not modified by the <b class="name">fts</b> functions. It is initialized to 0.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="farg">fts_pointer</i></dt>
<dd class="list-tag" style="margin-left: 11.00ex;">
This field is provided for the use of the application program and is not modified by the <b class="name">fts</b> functions. It is initialized to <span class="define">NULL</span>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="farg">fts_parent</i></dt>
<dd class="list-tag" style="margin-left: 11.00ex;">
A pointer to the <i class="farg">FTSENT</i> structure referencing the file in the hierarchy immediately above the current file, i.e., the directory of which this file is a member. A parent structure for the initial entry point is provided as well, however, only the <i class="farg">fts_level</i>, <i class="farg">fts_number</i> and <i class="farg">fts_pointer</i> fields are guaranteed to be initialized.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="farg">fts_link</i></dt>
<dd class="list-tag" style="margin-left: 11.00ex;">
Upon return from the <b class="fname">fts_children</b>() function, the <i class="farg">fts_link</i> field points to the next structure in the <span class="define">NULL</span>-terminated linked list of directory members. Otherwise, the contents of the <i class="farg">fts_link</i> field are undefined.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="farg">fts_cycle</i></dt>
<dd class="list-tag" style="margin-left: 11.00ex;">
If a directory causes a cycle in the hierarchy (see <span class="define">FTS_DC</span>), either because of a hard link between two directories, or a symbolic link pointing to a directory, the <i class="farg">fts_cycle</i> field of the structure will point to the <i class="farg">FTSENT</i> structure in the hierarchy that references the same file as the current <i class="farg">FTSENT</i> structure. Otherwise, the contents of the <i class="farg">fts_cycle</i> field are undefined.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="farg">fts_statp</i></dt>
<dd class="list-tag" style="margin-left: 11.00ex;">
A pointer to <a class="link-man" href="../html2/stat.html">stat(2)</a> information for the file.</dd>
</dl>
<p>
A single buffer is used for all of the paths of all of the files in the file hierarchy. Therefore, the <i class="farg">fts_path</i> and <i class="farg">fts_accpath</i> fields are guaranteed to be <span class="define">NUL</span>-terminated <span class="emph">only</span> for the file most recently returned by <b class="fname">fts_read</b>(). To use these fields to reference any files represented by other <i class="farg">FTSENT</i> structures will require that the path buffer be modified using the information contained in that <i class="farg">FTSENT</i> structure's <i class="farg">fts_pathlen</i> field. Any such modifications should be undone before further calls to <b class="fname">fts_read</b>() are attempted. The <i class="farg">fts_name</i> field is always <span class="define">NUL</span>-terminated.</div>
<div class="section">
<h1 id="x4654535f4f50454e">FTS_OPEN</h1> The <b class="fname">fts_open</b>() function takes a pointer to an array of character pointers naming one or more paths which make up a logical file hierarchy to be traversed. The array must be terminated by a <span class="define">NULL</span> pointer.<p>
There are a number of options, at least one of which (either <span class="define">FTS_LOGICAL</span> or <span class="define">FTS_PHYSICAL</span>) must be specified. The options are selected by <span class="emph">or</span>'ing the following values:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">FTS_COMFOLLOW</span></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
This option causes any symbolic link specified as a root path to be followed immediately whether or not <span class="define">FTS_LOGICAL</span> is also specified.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">FTS_LOGICAL</span></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
This option causes the <b class="name">fts</b> routines to return <i class="farg">FTSENT</i> structures for the targets of symbolic links instead of the symbolic links themselves. If this option is set, the only symbolic links for which <i class="farg">FTSENT</i> structures are returned to the application are those referencing non-existent files. Either <span class="define">FTS_LOGICAL</span> or <span class="define">FTS_PHYSICAL</span> <span class="emph">must</span> be provided to the <b class="fname">fts_open</b>() function.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">FTS_NOCHDIR</span></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
As a performance optimization, the <b class="name">fts</b> functions change directories as they walk the file hierarchy. This has the side-effect that an application cannot rely on being in any particular directory during the traversal. The <span class="define">FTS_NOCHDIR</span> option turns off this optimization, and the <b class="name">fts</b> functions will not change the current directory. Note that applications should not themselves change their current directory and try to access files unless <span class="define">FTS_NOCHDIR</span> is specified and absolute pathnames were provided as arguments to <b class="fname">fts_open</b>().</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">FTS_NOSTAT</span></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
By default, returned <i class="farg">FTSENT</i> structures reference file characteristic information (the <i class="farg">statp</i> field) for each file visited. This option relaxes that requirement as a performance optimization, allowing the <b class="name">fts</b> functions to set the <i class="farg">fts_info</i> field to <span class="define">FTS_NSOK</span> and leave the contents of the <i class="farg">statp</i> field undefined.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">FTS_PHYSICAL</span></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
This option causes the <b class="name">fts</b> routines to return <i class="farg">FTSENT</i> structures for symbolic links themselves instead of the target files they point to. If this option is set, <i class="farg">FTSENT</i> structures for all symbolic links in the hierarchy are returned to the application. Either <span class="define">FTS_LOGICAL</span> or <span class="define">FTS_PHYSICAL</span> <span class="emph">must</span> be provided to the <b class="fname">fts_open</b>() function.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">FTS_SEEDOT</span></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
By default, unless they are specified as path arguments to <b class="fname">fts_open</b>(), any files named &#8216;<code class="lit">.</code>&#8217; or &#8216;<code class="lit">..</code>&#8217; encountered in the file hierarchy are ignored. This option causes the <b class="name">fts</b> routines to return <i class="farg">FTSENT</i> structures for them.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">FTS_WHITEOUT</span></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
Return whiteout entries, which are normally hidden.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">FTS_XDEV</span></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
This option prevents <b class="name">fts</b> from descending into directories that have a different device number than the file from which the descent began.</dd>
</dl>
<p>
The argument <b class="fname">compar</b>() specifies a user-defined function which may be used to order the traversal of the hierarchy. It takes two pointers to pointers to <i class="farg">FTSENT</i> structures as arguments and should return a negative value, zero, or a positive value to indicate if the file referenced by its first argument comes before, in any order with respect to, or after, the file referenced by its second argument. The <i class="farg">fts_accpath</i>, <i class="farg">fts_path</i> and <i class="farg">fts_pathlen</i> fields of the <i class="farg">FTSENT</i> structures may <span class="emph">never</span> be used in this comparison. If the <i class="farg">fts_info</i> field is set to <span class="define">FTS_NS</span> or <span class="define">FTS_NSOK</span>, the <i class="farg">fts_statp</i> field may not either. If the <b class="fname">compar</b>() argument is <span class="define">NULL</span>, the directory traversal order is in the order listed in <i class="farg">path_argv</i> for the root paths, and in the order listed in the directory for everything else.</div>
<div class="section">
<h1 id="x4654535f52454144">FTS_READ</h1> The <b class="fname">fts_read</b>() function returns a pointer to an <i class="farg">FTSENT</i> structure describing a file in the hierarchy. Directories (that are readable and do not cause cycles) are visited at least twice, once in pre-order and once in post-order. All other files are visited at least once. (Hard links between directories that do not cause cycles or symbolic links to symbolic links may cause files to be visited more than once, or directories more than twice.)<p>
If all the members of the hierarchy have been returned, <b class="fname">fts_read</b>() returns <span class="define">NULL</span> and sets the external variable <b class="var">errno</b> to 0. If an error unrelated to a file in the hierarchy occurs, <b class="fname">fts_read</b>() returns <span class="define">NULL</span> and sets <b class="var">errno</b> appropriately. If an error related to a returned file occurs, a pointer to an <i class="farg">FTSENT</i> structure is returned, and <b class="var">errno</b> may or may not have been set (see <i class="farg">fts_info</i>).<p>
The <i class="farg">FTSENT</i> structures returned by <b class="fname">fts_read</b>() may be overwritten after a call to <b class="fname">fts_close</b>() on the same file hierarchy stream, or, after a call to <b class="fname">fts_read</b>() on the same file hierarchy stream unless they represent a file of type directory, in which case they will not be overwritten until after a call to <b class="fname">fts_read</b>() after the <i class="farg">FTSENT</i> structure has been returned by the function <b class="fname">fts_read</b>() in post-order.</div>
<div class="section">
<h1 id="x4654535f4348494c4452454e">FTS_CHILDREN</h1> The <b class="fname">fts_children</b>() function returns a pointer to an <i class="farg">FTSENT</i> structure describing the first entry in a <span class="define">NULL</span>-terminated linked list of the files in the directory represented by the <i class="farg">FTSENT</i> structure most recently returned by <b class="fname">fts_read</b>(). The list is linked through the <i class="farg">fts_link</i> field of the <i class="farg">FTSENT</i> structure, and is ordered by the user-specified comparison function, if any. Repeated calls to <b class="fname">fts_children</b>() will recreate this linked list.<p>
As a special case, if <b class="fname">fts_read</b>() has not yet been called for a hierarchy, <b class="fname">fts_children</b>() will return a pointer to the files in the logical directory specified to <b class="fname">fts_open</b>(), i.e., the arguments specified to <b class="fname">fts_open</b>(). Otherwise, if the <i class="farg">FTSENT</i> structure most recently returned by <b class="fname">fts_read</b>() is not a directory being visited in pre-order, or the directory does not contain any files, <b class="fname">fts_children</b>() returns <span class="define">NULL</span> and sets <b class="var">errno</b> to zero. If an error occurs, <b class="fname">fts_children</b>() returns <span class="define">NULL</span> and sets <b class="var">errno</b> appropriately.<p>
The <i class="farg">FTSENT</i> structures returned by <b class="fname">fts_children</b>() may be overwritten after a call to <b class="fname">fts_children</b>(), <b class="fname">fts_close</b>() or <b class="fname">fts_read</b>() on the same file hierarchy stream.<p>
<span class="emph">Option</span> may be set to the following value:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">FTS_NAMEONLY</span></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
Only the names of the files are needed. The contents of all the fields in the returned linked list of structures are undefined with the exception of the <i class="farg">fts_name</i> and <i class="farg">fts_namelen</i> fields.</dd>
</dl>
</div>
<div class="section">
<h1 id="x4654535f534554">FTS_SET</h1> The function <b class="fname">fts_set</b>() allows the user application to determine further processing for the file <i class="farg">f</i> of the stream <i class="farg">ftsp</i>. The <b class="fname">fts_set</b>() function returns 0 on success, and &#45;1 if an error occurs. <span class="emph">Option</span> must be set to one of the following values:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">FTS_AGAIN</span></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
Re-visit the file; any file type may be re-visited. The next call to <b class="fname">fts_read</b>() will return the referenced file. The <i class="farg">fts_stat</i> and <i class="farg">fts_info</i> fields of the structure will be reinitialized at that time, but no other fields will have been changed. This option is meaningful only for the most recently returned file from <b class="fname">fts_read</b>(). Normal use is for post-order directory visits, where it causes the directory to be re-visited (in both pre and post-order) as well as all of its descendants.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">FTS_FOLLOW</span></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
The referenced file must be a symbolic link. If the referenced file is the one most recently returned by <b class="fname">fts_read</b>(), the next call to <b class="fname">fts_read</b>() returns the file with the <i class="farg">fts_info</i> and <i class="farg">fts_statp</i> fields reinitialized to reflect the target of the symbolic link instead of the symbolic link itself. If the file is one of those most recently returned by <b class="fname">fts_children</b>(), the <i class="farg">fts_info</i> and <i class="farg">fts_statp</i> fields of the structure, when returned by <b class="fname">fts_read</b>(), will reflect the target of the symbolic link instead of the symbolic link itself. In either case, if the target of the symbolic link does not exist the fields of the returned structure will be unchanged and the <i class="farg">fts_info</i> field will be set to <span class="define">FTS_SLNONE</span>.<p>
If the target of the link is a directory, the pre-order return, followed by the return of all of its descendants, followed by a post-order return, is done.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">FTS_SKIP</span></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
No descendants of this file are visited. The file may be one of those most recently returned by either <b class="fname">fts_children</b>() or <b class="fname">fts_read</b>().</dd>
</dl>
</div>
<div class="section">
<h1 id="x4654535f434c4f5345">FTS_CLOSE</h1> The <b class="fname">fts_close</b>() function closes a file hierarchy stream <i class="farg">ftsp</i> and restores the current directory to the directory from which <b class="fname">fts_open</b>() was called to open <i class="farg">ftsp</i>. The <b class="fname">fts_close</b>() function returns 0 on success, and &#45;1 if an error occurs.</div>
<div class="section">
<h1 id="x4552524f5253">ERRORS</h1> The function <b class="fname">fts_open</b>() may fail and set <b class="var">errno</b> for any of the errors specified for the library functions <a class="link-man" href="../html2/open.html">open(2)</a> and <a class="link-man" href="../html3/malloc.html">malloc(3)</a>.<p>
The function <b class="fname">fts_close</b>() may fail and set <b class="var">errno</b> for any of the errors specified for the library functions <a class="link-man" href="../html2/chdir.html">chdir(2)</a> and <a class="link-man" href="../html2/close.html">close(2)</a>.<p>
The functions <b class="fname">fts_read</b>() and <b class="fname">fts_children</b>() may fail and set <b class="var">errno</b> for any of the errors specified for the library functions <a class="link-man" href="../html2/chdir.html">chdir(2)</a>, <a class="link-man" href="../html3/malloc.html">malloc(3)</a>, <a class="link-man" href="../html3/opendir.html">opendir(3)</a>, <a class="link-man" href="../html3/readdir.html">readdir(3)</a> and <a class="link-man" href="../html2/stat.html">stat(2)</a>.<p>
In addition, <b class="fname">fts_children</b>(), <b class="fname">fts_open</b>() and <b class="fname">fts_set</b>() may fail and set <b class="var">errno</b> as follows:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">EINVAL</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The options were invalid.</dd>
</dl>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../html1/find.html">find(1)</a>, <a class="link-man" href="../html2/chdir.html">chdir(2)</a>, <a class="link-man" href="../html2/stat.html">stat(2)</a>, <a class="link-man" href="../html3/qsort.html">qsort(3)</a>, <a class="link-man" href="../html7/symlink.html">symlink(7)</a></div>
<div class="section">
<h1 id="x5354414e4441524453">STANDARDS</h1> The <b class="name">fts</b> utility was expected to be included in the IEEE Std 1003.1-1988 (&#8220;POSIX.1&#8221;) revision. But twenty years later, it still was not included in the IEEE Std 1003.1-2008 (&#8220;POSIX.1&#8221;) revision.</div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
March 30, 2011</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
</html>

