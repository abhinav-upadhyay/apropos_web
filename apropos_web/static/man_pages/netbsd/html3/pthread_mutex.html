<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="/static/man_pages/netbsd/style.css" type="text/css" media="all">
<title>
PTHREAD_MUTEX(3)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
PTHREAD_MUTEX(3)</td>
<td class="head-vol" align="center">
Library Functions Manual</td>
<td class="head-rtitle" align="right">
PTHREAD_MUTEX(3)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">pthread_mutex</b> &#8212; <span class="desc">mutual exclusion primitives</span></div>
<div class="section">
<h1 id="x4c494252415259">LIBRARY</h1> <span class="lib">POSIX Threads Library (libpthread, &#45;lpthread)</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="includes">#include &lt;<a class="link-includes">pthread.h</a>&gt;</b><p>
<i class="ftype">int</i><br>
<b class="fname">pthread_mutex_init</b>(<i class="farg" style="white-space:nowrap;">pthread_mutex_t * restrict mutex</i>, <i class="farg" style="white-space:nowrap;">const pthread_mutexattr_t * restrict attr</i>);<p>
<span class="type">pthread_mutex_t mutex = <span class="define">PTHREAD_MUTEX_INITIALIZER;</span></span><p>
<i class="ftype">int</i><br>
<b class="fname">pthread_mutex_destroy</b>(<i class="farg" style="white-space:nowrap;">pthread_mutex_t *mutex</i>);<p>
<i class="ftype">int</i><br>
<b class="fname">pthread_mutex_lock</b>(<i class="farg" style="white-space:nowrap;">pthread_mutex_t *mutex</i>);<p>
<i class="ftype">int</i><br>
<b class="fname">pthread_mutex_trylock</b>(<i class="farg" style="white-space:nowrap;">pthread_mutex_t *mutex</i>);<p>
<i class="ftype">int</i><br>
<b class="fname">pthread_mutex_unlock</b>(<i class="farg" style="white-space:nowrap;">pthread_mutex_t *mutex</i>);</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> The <b class="fname">pthread_mutex_init</b>() function creates a new mutex, with attributes specified with <i class="farg">attr</i>. If <i class="farg">attr</i> is <span class="define">NULL</span>, the default attributes are used.<p>
The macro <span class="define">PTHREAD_MUTEX_INITIALIZER</span> can be used to initialize a mutex when the default attributes are appropriate and the mutex can be statically allocated. The behavior is similar to <b class="fname">pthread_mutex_init</b>() with <i class="farg">attr</i> specified as <span class="define">NULL</span>, except that no error checking is done.<p>
The <b class="fname">pthread_mutex_destroy</b>() function frees the resources allocated for <i class="farg">mutex</i>. It is possible to reinitialize a destroyed mutex, but undefined behavior may follow if the destroyed object is otherwise referenced.<p>
The <b class="fname">pthread_mutex_lock</b>() function locks <i class="farg">mutex</i>. If the mutex is already locked, the calling thread will block until the mutex becomes available. The error conditions may vary depending on the type of the mutex; see <a class="link-man" href="../3/pthread_mutexattr">pthread_mutexattr(3)</a> for additional details.<p>
The <b class="fname">pthread_mutex_trylock</b>() function locks <i class="farg">mutex</i>. If the mutex is already locked, <b class="fname">pthread_mutex_trylock</b>() will not block waiting for the mutex, but will return an error condition.<p>
The <b class="fname">pthread_mutex_unlock</b>() function unlocks an acquired <i class="farg">mutex</i>. When operating with the default mutex type, undefined behavior follows if a thread tries to unlock a mutex that has not been locked by it, or if a thread tries to release a mutex that is already unlocked.</div>
<div class="section">
<h1 id="x52455455524e2056414c554553">RETURN VALUES</h1> Upon success all described functions return zero. Otherwise, an error number will be returned to indicate the error.</div>
<div class="section">
<h1 id="x4552524f5253">ERRORS</h1> <b class="fname">pthread_mutex_init</b>() may fail if:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">EAGAIN</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The system lacks the resources to initialize another mutex.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">EINVAL</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The value specified by <i class="farg">attr</i> is invalid.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">ENOMEM</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The process cannot allocate enough memory to initialize another mutex.</dd>
</dl>
<p>
<b class="fname">pthread_mutex_destroy</b>() may fail if:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">EBUSY</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
<i class="farg">Mutex</i> is locked by another thread.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">EINVAL</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The value specified by <i class="farg">mutex</i> is invalid.</dd>
</dl>
<p>
<b class="fname">pthread_mutex_lock</b>() may fail if:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">EDEADLK</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
A deadlock would occur if the thread blocked waiting for <i class="farg">mutex</i>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">EINVAL</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The value specified by <i class="farg">mutex</i> is invalid.</dd>
</dl>
<p>
<b class="fname">pthread_mutex_trylock</b>() may fail if:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">EBUSY</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
<i class="farg">Mutex</i> is already locked.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">EINVAL</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The value specified by <i class="farg">mutex</i> is invalid.</dd>
</dl>
<p>
<b class="fname">pthread_mutex_unlock</b>() may fail if:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">EINVAL</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The value specified by <i class="farg">mutex</i> is invalid.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">EPERM</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The current thread does not hold a lock on <i class="farg">mutex</i>.</dd>
</dl>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../3/pthread">pthread(3)</a>, <a class="link-man" href="../3/pthread_barrier">pthread_barrier(3)</a>, <a class="link-man" href="../3/pthread_cond">pthread_cond(3)</a>, <a class="link-man" href="../3/pthread_mutexattr">pthread_mutexattr(3)</a>, <a class="link-man" href="../3/pthread_rwlock">pthread_rwlock(3)</a>, <a class="link-man" href="../3/pthread_spin">pthread_spin(3)</a></div>
<div class="section">
<h1 id="x5354414e4441524453">STANDARDS</h1> These functions conform to IEEE Std 1003.1-2001 (&#8220;POSIX.1&#8221;).</div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
July 8, 2010</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
</html>

