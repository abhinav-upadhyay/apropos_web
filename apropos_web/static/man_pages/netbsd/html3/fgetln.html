<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="../style.css" type="text/css" media="all">
<title>
FGETLN(3)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
FGETLN(3)</td>
<td class="head-vol" align="center">
Library Functions Manual</td>
<td class="head-rtitle" align="right">
FGETLN(3)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">fgetln</b> &#8212; <span class="desc">get a line from a stream</span></div>
<div class="section">
<h1 id="x4c494252415259">LIBRARY</h1> <span class="lib">Standard C Library (libc, &#45;lc)</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="includes">#include &lt;<a class="link-includes">stdio.h</a>&gt;</b><p>
<i class="ftype">char *</i><br>
<b class="fname">fgetln</b>(<i class="farg" style="white-space:nowrap;">FILE * restrict stream</i>, <i class="farg" style="white-space:nowrap;">size_t * restrict len</i>);</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> The <b class="fname">fgetln</b>() function returns a pointer to the next line from the stream referenced by <i class="farg">stream</i>. This line is <span class="emph">not</span> a C string as it does not end with a terminating <span class="define">NUL</span> character. The length of the line, including the final newline, is stored in the memory location to which <i class="farg">len</i> points. (Note, however, that if the line is the last in a file that does not end in a newline, the returned text will not contain a newline.)</div>
<div class="section">
<h1 id="x52455455524e2056414c554553">RETURN VALUES</h1> Upon successful completion a pointer is returned; this pointer becomes invalid after the next I/O operation on <i class="farg">stream</i> (whether successful or not) or as soon as the stream is closed. Otherwise, <span class="define">NULL</span> is returned. The <b class="fname">fgetln</b>() function does not distinguish between end-of-file and error; the routines <a class="link-man" href="../html3/feof.html">feof(3)</a> and <a class="link-man" href="../html3/ferror.html">ferror(3)</a> must be used to determine which occurred. If an error occurs, the global variable <b class="var">errno</b> is set to indicate the error. The end-of-file condition is remembered, even on a terminal, and all subsequent attempts to read will return <span class="define">NULL</span> until the condition is cleared with <a class="link-man" href="../html3/clearerr.html">clearerr(3)</a>.<p>
The text to which the returned pointer points may be modified, provided that no changes are made beyond the returned size. These changes are lost as soon as the pointer becomes invalid.</div>
<div class="section">
<h1 id="x4552524f5253">ERRORS</h1><dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">EBADF</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
The argument <i class="farg">stream</i> is not a stream open for reading.</dd>
</dl>
<p>
The <b class="fname">fgetln</b>() function may also fail and set <b class="var">errno</b> for any of the errors specified for the routines <a class="link-man" href="../html3/fflush.html">fflush(3)</a>, <a class="link-man" href="../html3/malloc.html">malloc(3)</a>, <a class="link-man" href="../html2/read.html">read(2)</a>, <a class="link-man" href="../html2/stat.html">stat(2)</a>, or <a class="link-man" href="../html3/realloc.html">realloc(3)</a>.</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../html3/ferror.html">ferror(3)</a>, <a class="link-man" href="../html3/fgets.html">fgets(3)</a>, <a class="link-man" href="../html3/fopen.html">fopen(3)</a>, <a class="link-man" href="../html3/putc.html">putc(3)</a></div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> The <b class="fname">fgetln</b>() function first appeared in <span class="unix">4.4BSD</span>.</div>
<div class="section">
<h1 id="x43415645415453">CAVEATS</h1> Since the returned buffer is not a C string (it is not null terminated), a common practice is to replace the newline character with &#8216;&#92;0&#8217;. However, if the last line in a file does not contain a newline, the returned text won't contain a newline either. The following code demonstrates how to deal with this problem by allocating a temporary buffer:<p>
<pre style="margin-left: 0.00ex;" class="lit display">
	char *buf, *lbuf; 
	size_t len; 
 
	while ((lbuf = buf = fgetln(fp, &amp;len)) != NULL) { 
		if (len &gt; 0 &amp;&amp; buf[len - 1] == '&#92;n') 
			buf[len - 1] = '&#92;0'; 
		else if ((lbuf = strndup(buf, len + 1)) == NULL) 
				err(1, NULL); 
		printf("%s&#92;n", lbuf); 
 
		if (lbuf != buf) 
			free(lbuf); 
	}</pre>
</div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
June 19, 2014</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
</html>

