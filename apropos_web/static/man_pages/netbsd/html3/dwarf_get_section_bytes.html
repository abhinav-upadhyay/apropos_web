<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="/static/man_pages/netbsd/style.css" type="text/css" media="all">
<title>
DWARF_GET_SECTION_BYTES(3)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
DWARF_GET_SECTION_BYTES(3)</td>
<td class="head-vol" align="center">
Library Functions Manual</td>
<td class="head-rtitle" align="right">
DWARF_GET_SECTION_BYTES(3)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">dwarf_get_section_bytes</b> &#8212; <span class="desc">retrieve ELF section byte streams</span></div>
<div class="section">
<h1 id="x4c494252415259">LIBRARY</h1> <span class="lib">DWARF Access Library (libdwarf, &#45;ldwarf)</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="includes">#include &lt;<a class="link-includes">libdwarf.h</a>&gt;</b><p>
<i class="ftype">Dwarf_Ptr</i><br>
<b class="fname">dwarf_get_section_bytes</b>(<i class="farg">Dwarf_P_Debug dbg</i>, <i class="farg">Dwarf_Signed dwarf_section</i>, <i class="farg">Dwarf_Signed *elf_section_index</i>, <i class="farg">Dwarf_Unsigned *length</i>, <i class="farg">Dwarf_Error *err</i>);</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> Function <b class="fname">dwarf_get_section_bytes</b>() returns the ELF section byte streams generated by a prior call to function <a class="link-man" href="../3/dwarf_transform_to_disk_form">dwarf_transform_to_disk_form(3)</a>.<p>
Each call to function <b class="fname">dwarf_get_section_bytes</b>() will return the byte stream for one ELF section. The first call to this function will always return the first ELF section, and the subsequent calls will return the rest of sections in the order when they were generated, until the last one. The total number of sections generated is returned by the function <a class="link-man" href="../3/dwarf_transform_to_disk_form">dwarf_transform_to_disk_form(3)</a>.<p>
Argument <i class="arg">dbg</i> should reference a DWARF producer instance allocated using the functions <a class="link-man" href="../3/dwarf_producer_init">dwarf_producer_init(3)</a> or <a class="link-man" href="../3/dwarf_producer_init_b">dwarf_producer_init_b(3)</a>.<p>
Argument <i class="arg">dwarf_section</i> is currently ignored.<p>
Argument <i class="arg">elf_section_index</i> should point to a location which will be set to the section index value of the returned ELF section.<p>
Argument <i class="arg">length</i> should point to a location which will hold the length in bytes of the returned ELF section.<p>
If argument <i class="arg">err</i> is not NULL, it will be used to store error information in case of an error.<div class="subsection">
<h2 id="x4d656d6f7279204d616e6167656d656e74">Memory Management</h2> The memory areas used for the returned ELF section byte streams should be freed using the function <b class="fname">dwarf_producer_finish</b>().</div>
</div>
<div class="section">
<h1 id="x52455455524e2056414c554553">RETURN VALUES</h1> On success, function <b class="fname">dwarf_get_section_bytes</b>() returns a pointer to a ELF section byte stream. In case of an error, function <b class="fname">dwarf_get_section_bytes</b>() will return NULL and set the argument <i class="arg">err</i>.</div>
<div class="section">
<h1 id="x4552524f5253">ERRORS</h1> Function <b class="fname">dwarf_get_section_bytes</b>() can fail with:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">DW_DLE_ARGUMENT</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 22.00ex;">
One of the arguments <i class="arg">dbg</i>, <i class="arg">elf_section_index</i>, or <i class="arg">length</i> was NULL.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">DW_DLE_NO_ENTRY</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 22.00ex;">
There were no more ELF sections to retrieve, or the function was called before a call to <a class="link-man" href="../3/dwarf_transform_to_disk_form">dwarf_transform_to_disk_form(3)</a>.</dd>
</dl>
</div>
<div class="section">
<h1 id="x4558414d504c4553">EXAMPLES</h1> To generate and retrieve ELF section byte streams, use:<p>
<pre style="margin-left: 5.00ex;" class="lit display">
Dwarf_P_Debug dbg; 
Dwarf_Signed count, i, sec_index; 
Dwarf_Unsigned len; 
Dwarf_Ptr bytes; 
Dwarf_Error de; 
 
/* ... Assume that `dbg' refers to a DWARF producer instance, 
 * and that application code has added DWARF debugging 
 * information to the producer instance. ... 
 */ 
if ((count = dwarf_transform_to_disk_form(dbg, &amp;de)) == 
    DW_DLV_NOCOUNT) { 
	warnx("dwarf_transform_to_disk_form failed: %s", 
	    dwarf_errmsg(-1)); 
	return; 
} 
 
/* Retrieve section data. */ 
for (i = 0; i &lt; count; i++) { 
	bytes = dwarf_get_section_bytes(dbg, i, &amp;sec_index, &amp;len, 
	    &amp;de); 
	if (bytes == NULL) { 
		warnx("dwarf_get_section_bytes failed: %s", 
		    dwarf_errmsg(-1)); 
		continue; 
	} 
	/* ... use the returned byte stream ... */ 
} 
 
/* Release resources. */ 
dwarf_producer_finish(dbg, &amp;de);</pre>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../3/dwarf">dwarf(3)</a>, <a class="link-man" href="../3/dwarf_reset_section_bytes">dwarf_reset_section_bytes(3)</a>, <a class="link-man" href="../3/dwarf_producer_finish">dwarf_producer_finish(3)</a>, <a class="link-man" href="../3/dwarf_producer_init">dwarf_producer_init(3)</a>, <a class="link-man" href="../3/dwarf_producer_init_b">dwarf_producer_init_b(3)</a>, <a class="link-man" href="../3/dwarf_transform_to_disk_form">dwarf_transform_to_disk_form(3)</a></div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
August 26, 2011</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
</html>

