<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/../4/strict.dtd">
>
<head>
<meta http-equiv="Content-Type" content="te../; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="../style.css" type="text/css" media="all">
<title>
PTHREAD_ATTR_GETSTACK(3)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
PTHREAD_ATTR_GETSTACK(3)</td>
<td class="head-vol" align="center">
Library Functions Manual</td>
<td class="head-rtitle" align="right">
PTHREAD_ATTR_GETSTACK(3)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">pthread_attr_getstack</b> &#8212; <span class="desc">get and set thread stack attributes</span></div>
<div class="section">
<h1 id="x4c494252415259">LIBRARY</h1> <span class="lib">POSIX Threads Library (libpthread, &#45;lpthread)</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="includes">#include &lt;<a class="link-includes">pthread.h</a>&gt;</b><p>
<i class="ftype">int</i><br>
<b class="fname">pthread_attr_getstack</b>(<i class="farg" style="white-space:nowrap;">const pthread_attr_t * restrict attr</i>, <i class="farg" style="white-space:nowrap;">void ** restrict stackaddr, size_t * restrict stacksize</i>);<p>
<i class="ftype">int</i><br>
<b class="fname">pthread_attr_setstack</b>(<i class="farg" style="white-space:nowrap;">pthread_attr_t * restrict attr</i>, <i class="farg" style="white-space:nowrap;">void *stackaddr, size_t stacksize</i>);<p>
<i class="ftype">int</i><br>
<b class="fname">pthread_attr_getstacksize</b>(<i class="farg" style="white-space:nowrap;">const pthread_attr_t * restrict attr</i>, <i class="farg" style="white-space:nowrap;">size_t * restrict stacksize</i>);<p>
<i class="ftype">int</i><br>
<b class="fname">pthread_attr_setstacksize</b>(<i class="farg" style="white-space:nowrap;">pthread_attr_t *attr</i>, <i class="farg" style="white-space:nowrap;">size_t stacksize</i>);<p>
<i class="ftype">int</i><br>
<b class="fname">pthread_attr_getstackaddr</b>(<i class="farg" style="white-space:nowrap;">const pthread_attr_t * restrict attr</i>, <i class="farg" style="white-space:nowrap;">void ** restrict stackaddr</i>);<p>
<i class="ftype">int</i><br>
<b class="fname">pthread_attr_setstackaddr</b>(<i class="farg" style="white-space:nowrap;">pthread_attr_t *attr</i>, <i class="farg" style="white-space:nowrap;">void *stackaddr</i>);</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> The <b class="fname">pthread_attr_getstack</b>() and <b class="fname">pthread_attr_setstack</b>() functions get and set, respectively, the thread stack attributes <i class="farg">stackaddr</i> and <i class="farg">stacksize</i> in the <i class="farg">attr</i> object. The remaining four functions behave similarly, but instead of getting or setting both <i class="farg">stackaddr</i> and <i class="farg">stacksize</i>, these get and set the values individually.<p>
The <i class="farg">stacksize</i> parameter is defined to be the minimum stack size (in bytes) allocated for the thread's stack during the creation of the thread. The <i class="farg">stackaddr</i> attribute specifies the location of storage to be used for the thread's stack. All pages within the stack described by <i class="farg">stackaddr</i> and <i class="farg">stacksize</i> should be both readable and writable by the thread.<p>
The behavior is undefined in all functions if the <i class="farg">attr</i> parameter does not refer to an attribute object initialized by using <a class="link-man" href="../3/pthread_attr_init">pthread_attr_init(3)</a> prior to the call. In addition, undefined behavior may follow if the <b class="fname">pthread_attr_getstack</b>() function is called before the <i class="farg">stackaddr</i> attribute has been set.<div class="subsection">
<h2 id="x526174696f6e616c65">Rationale</h2> The rationale behind these functions is to address cases where an application may be used in an environment where the stack of a thread must be placed to some particular region of memory. For the majority of applications, this is seldom necessary, and the use of these functions should be generally avoided. At least few potential caveats can be mentioned.<ul style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 2.00ex;" class="list list-bul">
<li class="list-bul" style="margin-top: 1.00em;">
There is a certain degree of ambiguity in the POSIX standard with respect to thread stack.</li>
<li class="list-bul" style="margin-top: 1.00em;">
The exact behavior of the functions may vary both across machines and operating systems. In particular, the address specified by <i class="farg">stackaddr</i> should be suitably aligned. The system page size, as specified by <a class="link-man" href="../3/sysconf">sysconf(3)</a>, and the use of <a class="link-man" href="../3/posix_memalign">posix_memalign(3)</a> may guarantee some degree of portability. Also <a class="link-man" href="../2/mmap">mmap(2)</a> provides means for alignment.</li>
<li class="list-bul" style="margin-top: 1.00em;">
If the application modifies the stack address, it claims also the responsibility of allocating the stack area and guarding it against possible stack overflow. No default guard area will be allocated (see <a class="link-man" href="../3/pthread_attr_getguardsize">pthread_attr_getguardsize(3)</a>). It may be necessary to manually use <a class="link-man" href="../2/mprotect">mprotect(2)</a> in order to define a guard area at the end of the allocated stack.</li>
<li class="list-bul" style="margin-top: 1.00em;">
Moreover, if <i class="farg">attr</i> is used to create multiple threads, the stack address must be changed by the application between successive calls to <a class="link-man" href="../3/pthread_create">pthread_create(3)</a>.</li>
</ul>
</div>
</div>
<div class="section">
<h1 id="x52455455524e2056414c554553">RETURN VALUES</h1> If successful, these functions return 0. Otherwise, an error number is returned to indicate the error.</div>
<div class="section">
<h1 id="x4552524f5253">ERRORS</h1> No errors are defined for the three functions that obtain the stack values. The three functions that set the stack values may fail if:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">ENOMEM</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
There was insufficient memory to complete the operation.</dd>
</dl>
<p>
The <b class="fname">pthread_attr_setstacksize</b>() function may additionally fail if:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">EINVAL</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The specified <i class="farg">stacksize</i> is less than <span class="define">PTHREAD_STACK_MIN</span> or exceeds some system-imposed limit.</dd>
</dl>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../3/pthread_attr">pthread_attr(3)</a>, <a class="link-man" href="../3/pthread_attr_setguardsize">pthread_attr_setguardsize(3)</a></div>
<div class="section">
<h1 id="x5354414e4441524453">STANDARDS</h1> All described functions conform to IEEE Std 1003.1-2001 (&#8220;POSIX.1&#8221;). Note that <b class="fname">pthread_attr_getstackaddr</b>() and <b class="fname">pthread_attr_setstackaddr</b>() were however removed from the specification in the IEEE Std 1003.1-2008 (&#8220;POSIX.1&#8221;) revision.</div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
July 9, 2010</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
<>

