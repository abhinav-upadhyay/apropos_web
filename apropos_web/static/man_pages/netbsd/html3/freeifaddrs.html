<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="/static/man_pages/netbsd/style.css" type="text/css" media="all">
<title>
GETIFADDRS(3)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
GETIFADDRS(3)</td>
<td class="head-vol" align="center">
Library Functions Manual</td>
<td class="head-rtitle" align="right">
GETIFADDRS(3)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">getifaddrs</b> &#8212; <span class="desc">get interface addresses</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="includes">#include &lt;<a class="link-includes">sys/types.h</a>&gt;</b><br>
<b class="includes">#include &lt;<a class="link-includes">sys/socket.h</a>&gt;</b><br>
<b class="includes">#include &lt;<a class="link-includes">ifaddrs.h</a>&gt;</b><p>
<i class="ftype">int</i><br>
<b class="fname">getifaddrs</b>(<i class="farg" style="white-space:nowrap;">struct ifaddrs **ifap</i>);<p>
<i class="ftype">void</i><br>
<b class="fname">freeifaddrs</b>(<i class="farg" style="white-space:nowrap;">struct ifaddrs *ifp</i>);</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> The <b class="fname">getifaddrs</b>() function stores a reference to a linked list of the network interfaces on the local machine in the memory referenced by <i class="farg">ifap</i>. The list consists of <b class="name">ifaddrs</b> structures, as defined in the include file <b class="includes">&lt;<a class="link-includes">ifaddrs.h</a>&gt;</b>. The <b class="name">ifaddrs</b> structure contains at least the following entries:<p>
<pre style="margin-left: 0.00ex;" class="lit display">
    struct ifaddrs   *ifa_next;         /* Pointer to next struct */ 
    char             *ifa_name;         /* Interface name */ 
    u_int             ifa_flags;        /* Interface flags */ 
    struct sockaddr  *ifa_addr;         /* Interface address */ 
    struct sockaddr  *ifa_netmask;      /* Interface netmask */ 
    struct sockaddr  *ifa_broadaddr;    /* Interface broadcast address */ 
    struct sockaddr  *ifa_dstaddr;      /* P2P interface destination */ 
    void             *ifa_data;		/* Address specific data */</pre>
<p>
The <code class="lit">ifa_next</code> field contains a pointer to the next structure on the list. This field is <span class="define">NULL</span> in last structure on the list.<p>
The <code class="lit">ifa_name</code> field contains the interface name.<p>
The <code class="lit">ifa_flags</code> field contains the interface flags, as set by <a class="link-man" href="../8/ifconfig">ifconfig(8)</a> utility.<p>
The <code class="lit">ifa_addr</code> field references either the address of the interface or the link level address of the interface, if one exists, otherwise it is <span class="define">NULL</span>. (The <code class="lit">sa_family</code> field of the <code class="lit">ifa_addr</code> field should be consulted to determine the format of the <code class="lit">ifa_addr</code> address.)<p>
The <code class="lit">ifa_netmask</code> field references the netmask associated with <code class="lit">ifa_addr</code>, if one is set, otherwise it is <span class="define">NULL</span>.<p>
The <code class="lit">ifa_broadaddr</code> field, which should only be referenced for non-P2P interfaces, references the broadcast address associated with <code class="lit">ifa_addr</code>, if one exists, otherwise it is <span class="define">NULL</span>.<p>
The <code class="lit">ifa_dstaddr</code> field references the destination address on a P2P interface, if one exists, otherwise it is <span class="define">NULL</span>.<p>
The <code class="lit">ifa_data</code> field references address family specific data. For <span class="define">AF_LINK</span> addresses it contains a pointer to the <i class="farg">struct if_data</i> (as defined in include file &#60;<i class="file">net/if.h</i>&#62;) which contains various interface attributes and statistics. For all other address families, it is <span class="define">NULL</span>.<p>
The data returned by <b class="fname">getifaddrs</b>() is dynamically allocated and should be freed using <b class="fname">freeifaddrs</b>() when no longer needed.</div>
<div class="section">
<h1 id="x52455455524e2056414c554553">RETURN VALUES</h1> Upon successful completion, a value of 0 is returned. Otherwise, a value of -1 is returned and <b class="var">errno</b> is set to indicate the error.</div>
<div class="section">
<h1 id="x4558414d504c4553">EXAMPLES</h1> The following example program prints a list of all addresses configured on the system.<p>
<pre style="margin-left: 5.00ex;" class="lit display">
#include &lt;sys/types.h&gt; 
#include &lt;sys/socket.h&gt; 
#include &lt;stdio.h&gt; 
#include &lt;ifaddrs.h&gt; 
#include &lt;util.h&gt; 
#include &lt;err.h&gt; 
#include &lt;stdlib.h&gt; 
 
int 
main(int argc, char *argv[]) 
{ 
	struct ifaddrs *ifa, *a; 
 
	if (getifaddrs(&amp;ifa) == -1) 
		err(EXIT_FAILURE, "getifaddrs"); 
 
	for (a = ifa; a; a = a-&gt;ifa_next) { 
		char buf[1024]; 
		sockaddr_snprintf(buf, sizeof(buf), "%f %a", 
		    a-&gt;ifa_addr); 
		printf("%s %x %s\n", a-&gt;ifa_name, a-&gt;ifa_flags, buf); 
	} 
	freeifaddrs(ifa); 
	return EXIT_SUCCESS; 
}</pre>
</div>
<div class="section">
<h1 id="x4552524f5253">ERRORS</h1> The <b class="fname">getifaddrs</b>() may fail and set <b class="var">errno</b> for any of the errors specified for the library routines <a class="link-man" href="../2/ioctl">ioctl(2)</a>, <a class="link-man" href="../2/socket">socket(2)</a>, <a class="link-man" href="../3/malloc">malloc(3)</a> or <a class="link-man" href="../3/sysctl">sysctl(3)</a>.</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../2/ioctl">ioctl(2)</a>, <a class="link-man" href="../2/socket">socket(2)</a>, <a class="link-man" href="../3/sysctl">sysctl(3)</a>, <a class="link-man" href="../4/networking">networking(4)</a>, <a class="link-man" href="../8/ifconfig">ifconfig(8)</a></div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> The <b class="name">getifaddrs</b> implementation first appeared in <span class="unix">BSD/OS</span>.</div>
<div class="section">
<h1 id="x42554753">BUGS</h1> If both <b class="includes">&lt;<a class="link-includes">net/if.h</a>&gt;</b> and <b class="includes">&lt;<a class="link-includes">ifaddrs.h</a>&gt;</b> are being included, <b class="includes">&lt;<a class="link-includes">net/if.h</a>&gt;</b> <span class="emph">must</span> be included before <b class="includes">&lt;<a class="link-includes">ifaddrs.h</a>&gt;</b>.</div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
April 7, 2013</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
</html>

