<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="../style.css" type="text/css" media="all">
<title>
X509_NAME_add_entry_by_txt(3)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
X509_NAME_add_entry_by_txt(3)</td>
<td class="head-vol" align="center">
OpenSSL</td>
<td class="head-rtitle" align="right">
X509_NAME_add_entry_by_txt(3)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>NAME</h1> X509_NAME_add_entry_by_txt, X509_NAME_add_entry_by_OBJ, X509_NAME_add_entry_by_NID, X509_NAME_add_entry, X509_NAME_delete_entry &#45; X509_NAME modification functions</div>
<div class="section">
<h1>LIBRARY</h1> libcrypto, -lcrypto</div>
<div class="section">
<h1>SYNOPSIS</h1><br>
 #include &lt;openssl/x509.h&gt;<br>
<br>
 int X509_NAME_add_entry_by_txt(X509_NAME *name, const char *field, int type, const unsigned char *bytes, int len, int loc, int set);<br>
<br>
 int X509_NAME_add_entry_by_OBJ(X509_NAME *name, ASN1_OBJECT *obj, int type, unsigned char *bytes, int len, int loc, int set);<br>
<br>
 int X509_NAME_add_entry_by_NID(X509_NAME *name, int nid, int type, unsigned char *bytes, int len, int loc, int set);<br>
<br>
 int X509_NAME_add_entry(X509_NAME *name,X509_NAME_ENTRY *ne, int loc, int set);<br>
<br>
 X509_NAME_ENTRY *X509_NAME_delete_entry(X509_NAME *name, int loc);<br>
</div>
<div class="section">
<h1>DESCRIPTION</h1>  <i>X509_NAME_add_entry_by_txt()</i>, <i>X509_NAME_add_entry_by_OBJ()</i> and  <i>X509_NAME_add_entry_by_NID()</i> add a field whose name is defined by a string  <b>field</b>, an object <b>obj</b> or a NID <b>nid</b> respectively. The field value to be added is in  <b>bytes</b> of length <b>len</b>. If  <b>len</b> is &#45;1 then the field length is calculated internally using strlen(bytes).<p>
The type of field is determined by <b>type</b> which can either be a definition of the type of  <b>bytes</b> (such as <b>MBSTRING_ASC</b>) or a standard ASN1 type (such as  <b>V_ASN1_IA5STRING</b>). The new entry is added to a position determined by  <b>loc</b> and <b>set</b>.<p>
<i>X509_NAME_add_entry()</i> adds a copy of <b>X509_NAME_ENTRY</b> structure <b>ne</b> to  <b>name</b>. The new entry is added to a position determined by <b>loc</b> and  <b>set</b>. Since a copy of <b>ne</b> is added <b>ne</b> must be freed up after the call.<p>
<i>X509_NAME_delete_entry()</i> deletes an entry from <b>name</b> at position  <b>loc</b>. The deleted entry is returned and must be freed up.</div>
<div class="section">
<h1>NOTES</h1> The use of string types such as  <b>MBSTRING_ASC</b> or <b>MBSTRING_UTF8</b> is strongly recommened for the  <b>type</b> parameter. This allows the internal code to correctly determine the type of the field and to apply length checks according to the relevant standards. This is done using  <i>ASN1_STRING_set_by_NID()</i>.<p>
If instead an ASN1 type is used no checks are performed and the supplied data in  <b>bytes</b> is used directly.<p>
In <i>X509_NAME_add_entry_by_txt()</i> the <b>field</b> string represents the field name using OBJ_txt2obj(field, 0).<p>
The <b>loc</b> and <b>set</b> parameters determine where a new entry should be added. For almost all applications  <b>loc</b> can be set to &#45;1 and <b>set</b> to 0. This adds a new entry to the end of  <b>name</b> as a single valued RelativeDistinguishedName (RDN).<p>
<b>loc</b> actually determines the index where the new entry is inserted: if it is &#45;1 it is appended.<p>
<b>set</b> determines how the new type is added. If it is zero a new RDN is created.<p>
If <b>set</b> is &#45;1 or 1 it is added to the previous or next RDN structure respectively. This will then be a multivalued RDN: since multivalues RDNs are very seldom used  <b>set</b> is almost always set to zero.</div>
<div class="section">
<h1>EXAMPLES</h1> Create an  <b>X509_NAME</b> structure:<p>
"C=UK, O=Disorganized Organization, CN=Joe Bloggs"<p>
<br>
 X509_NAME *nm;<br>
 nm = X509_NAME_new();<br>
 if (nm == NULL)<br>
        /* Some error */<br>
 if (!X509_NAME_add_entry_by_txt(nm, "C", MBSTRING_ASC,<br>
                        "UK", &#45;1, &#45;1, 0))<br>
        /* Error */<br>
 if (!X509_NAME_add_entry_by_txt(nm, "O", MBSTRING_ASC,<br>
                        "Disorganized Organization", &#45;1, &#45;1, 0))<br>
        /* Error */<br>
 if (!X509_NAME_add_entry_by_txt(nm, "CN", MBSTRING_ASC,<br>
                        "Joe Bloggs", &#45;1, &#45;1, 0))<br>
        /* Error */<br>
</div>
<div class="section">
<h1>RETURN VALUES</h1>  <i>X509_NAME_add_entry_by_txt()</i>, <i>X509_NAME_add_entry_by_OBJ()</i>,  <i>X509_NAME_add_entry_by_NID()</i> and <i>X509_NAME_add_entry()</i> return 1 for success of 0 if an error occurred.<p>
<i>X509_NAME_delete_entry()</i> returns either the deleted <b>X509_NAME_ENTRY</b> structure of  <b>NULL</b> if an error occurred.</div>
<div class="section">
<h1>BUGS</h1>  <b>type</b> can still be set to <b>V_ASN1_APP_CHOOSE</b> to use a different algorithm to determine field types. Since this form does not understand multicharacter types, performs no length checks and can result in invalid field types its use is strongly discouraged.</div>
<div class="section">
<h1>SEE ALSO</h1>  <i>ERR_get_error</i>(3), <i>d2i_X509_NAME</i>(3)</div>
<div class="section">
<h1>HISTORY</h1></div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tr>
<td class="foot-date">
2015-01-13</td>
<td class="foot-os" align="right">
1.0.1n</td>
</tr>
</table>
</div>
</body>
</html>

