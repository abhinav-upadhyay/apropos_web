<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="../style.css" type="text/css" media="all">
<title>
GETGRENT(3)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
GETGRENT(3)</td>
<td class="head-vol" align="center">
Library Functions Manual</td>
<td class="head-rtitle" align="right">
GETGRENT(3)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">getgrent</b>, <b class="name">getgrent_r</b>, <b class="name">getgrgid</b>, <b class="name">getgrgid_r</b>, <b class="name">getgrnam</b>, <b class="name">getgrnam_r</b>, <b class="name">setgroupent</b>, <b class="name">setgrent</b>, <b class="name">endgrent</b> &#8212; <span class="desc">group database operations</span></div>
<div class="section">
<h1 id="x4c494252415259">LIBRARY</h1> <span class="lib">Standard C Library (libc, &#45;lc)</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="includes">#include &lt;<a class="link-includes">grp.h</a>&gt;</b><p>
<i class="ftype">struct group *</i><br>
<b class="fname">getgrent</b>(<i class="farg" style="white-space:nowrap;">void</i>);<p>
<i class="ftype">int</i><br>
<b class="fname">getgrent_r</b>(<i class="farg">struct group *grp</i>, <i class="farg">char *buffer</i>, <i class="farg">size_t buflen</i>, <i class="farg">struct group **result</i>);<p>
<i class="ftype">struct group *</i><br>
<b class="fname">getgrgid</b>(<i class="farg" style="white-space:nowrap;">gid_t gid</i>);<p>
<i class="ftype">int</i><br>
<b class="fname">getgrgid_r</b>(<i class="farg">gid_t gid</i>, <i class="farg">struct group *grp</i>, <i class="farg">char *buffer</i>, <i class="farg">size_t buflen</i>, <i class="farg">struct group **result</i>);<p>
<i class="ftype">struct group *</i><br>
<b class="fname">getgrnam</b>(<i class="farg" style="white-space:nowrap;">const char *name</i>);<p>
<i class="ftype">int</i><br>
<b class="fname">getgrnam_r</b>(<i class="farg">const char *name</i>, <i class="farg">struct group *grp</i>, <i class="farg">char *buffer</i>, <i class="farg">size_t buflen</i>, <i class="farg">struct group **result</i>);<p>
<i class="ftype">int</i><br>
<b class="fname">setgroupent</b>(<i class="farg" style="white-space:nowrap;">int stayopen</i>);<p>
<i class="ftype">void</i><br>
<b class="fname">setgrent</b>(<i class="farg" style="white-space:nowrap;">void</i>);<p>
<i class="ftype">void</i><br>
<b class="fname">endgrent</b>(<i class="farg" style="white-space:nowrap;">void</i>);</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> These functions operate on the group database which is described in <a class="link-man" href="../html5/group.html">group(5)</a>. Each line of the database is defined by the structure <i class="arg">group</i> found in the include file <b class="includes">&lt;<a class="link-includes">grp.h</a>&gt;</b>:<p>
<pre style="margin-left: 5.00ex;" class="lit display">
struct group { 
	char	*gr_name;	/* group name */ 
	char	*gr_passwd;	/* group password */ 
	gid_t	gr_gid;		/* group id */ 
	char	**gr_mem;	/* group members */ 
};</pre>
<p>
The functions <b class="fname">getgrnam</b>() and <b class="fname">getgrgid</b>() search the group database for the given group name pointed to by <i class="arg">name</i> or the group id pointed to by <i class="arg">gid</i>, respectively, returning the first one encountered. Identical group names or group ids may result in undefined behavior.<p>
The <b class="fname">getgrent</b>() function sequentially reads the group database and is intended for programs that wish to step through the complete list of groups.<p>
All three functions will open the group file for reading, if necessary.<p>
The functions <b class="fname">getgrnam_r</b>(), <b class="fname">getgrgid_r</b>(), and <b class="fname">getgrent_r</b>() act like their non re-entrant counterparts respectively, updating the contents of <i class="arg">grp</i> and storing a pointer to that in <i class="arg">result</i>, and returning <span class="define">0</span>. Storage used by <i class="arg">grp</i> is allocated from <i class="arg">buffer</i>, which is <i class="arg">buflen</i> bytes in size. If the requested entry cannot be found, <i class="arg">result</i> will point to <span class="define">NULL</span> and <span class="define">0</span> will be returned. If an error occurs, a non-zero error number will be returned and <i class="arg">result</i> will point to <span class="define">NULL</span>. Calling <b class="fname">getgrent_r</b>() from multiple threads will result in each thread reading a disjoint portion of the group database.<p>
The <b class="fname">setgroupent</b>() function opens the file, or rewinds it if it is already open. If <i class="farg">stayopen</i> is non-zero, file descriptors are left open, significantly speeding functions subsequent calls. This functionality is unnecessary for <b class="fname">getgrent</b>() as it doesn't close its file descriptors by default. It should also be noted that it is dangerous for long-running programs to use this functionality as the group file may be updated.<p>
The <b class="fname">setgrent</b>() function is equivalent to <b class="fname">setgroupent</b>() with an argument of zero.<p>
The <b class="fname">endgrent</b>() function closes any open files.</div>
<div class="section">
<h1 id="x52455455524e2056414c554553">RETURN VALUES</h1> The functions <b class="fname">getgrgid</b>(), <b class="fname">getgrnam</b>(), and <b class="fname">getgrent</b>() return a valid pointer to a group structure on success and a <span class="define">NULL</span> pointer if the entry was not found or an error occured. If an error occured, the global variable <span class="define">errno</span> is set to indicate the nature of the failure.<p>
The functions <b class="fname">getgrgid_r</b>(), <b class="fname">getgrnam_r</b>(), and <b class="fname">getgrent_r</b>() return <span class="define">0</span> on success or entry not found, and non-zero on failure, setting the global variable <span class="define">errno</span> to indicate the nature of the failure.<p>
The <b class="fname">setgroupent</b>() function returns the value 1 if successful, otherwise the value 0 is returned, setting the global variable <span class="define">errno</span> to indicate the nature of the failure.<p>
The <b class="fname">endgrent</b>() and <b class="fname">setgrent</b>() functions have no return value.</div>
<div class="section">
<h1 id="x46494c4553">FILES</h1><dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/etc/group</i></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
group database file</dd>
</dl>
</div>
<div class="section">
<h1 id="x434f4d5041544942494c495459">COMPATIBILITY</h1> The historic function <b class="fname">setgrfile</b>(), which allowed the specification of alternative group databases, has been deprecated and is no longer available.</div>
<div class="section">
<h1 id="x4552524f5253">ERRORS</h1> The following error codes may be set in <b class="var">errno</b> for <b class="name">getgrent</b>, <b class="name">getgrent_r</b>, <b class="name">getgrnam</b>, <b class="name">getgrnam_r</b>, <b class="name">getgrgid</b>, <b class="name">getgrgid_r</b>, and <b class="name">setgroupent</b>:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">EINTR</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
A signal was caught during the database search.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">EIO</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
An I/O error has occurred.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">EMFILE</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The limit on open files for this process has been reached.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">ENFILE</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The system limit on open files has been reached.</dd>
</dl>
<p>
The following error code may be set in <b class="var">errno</b> for <b class="name">getgrent_r</b>, <b class="name">getgrnam_r</b>, and <b class="name">getgrgid_r</b>:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">ERANGE</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The resulting <i class="ftype">struct group</i> does not fit in the space defined by <span class="define">buffer</span> and <span class="define">buflen</span></dd>
</dl>
<p>
Other <span class="define">errno</span> values may be set depending on the specific database backends.</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../html3/getpwent.html">getpwent(3)</a>, <a class="link-man" href="../html5/group.html">group(5)</a>, <a class="link-man" href="../html5/nsswitch.conf.html">nsswitch.conf(5)</a></div>
<div class="section">
<h1 id="x5354414e4441524453">STANDARDS</h1> The <b class="fname">getgrgid</b>() and <b class="fname">getgrnam</b>() functions conform to IEEE Std 1003.1-1990 (&#8220;POSIX.1&#8221;). The <b class="fname">getgrgid_r</b>() and <b class="fname">getgrnam_r</b>() functions conform to IEEE Std 1003.1c-1995 (&#8220;POSIX.1c&#8221;). The <b class="fname">endgrent</b>(), <b class="fname">getgrent</b>(), and <b class="fname">setgrent</b>() functions conform to X/Open Portability Guide Issue&#160;4, Version&#160;2 (&#8220;XPG4.2&#8221;) and IEEE Std 1003.1-2004 (&#8220;POSIX.1&#8221;) (XSI extension).</div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> The functions <b class="fname">endgrent</b>(), <b class="fname">getgrent</b>(), <b class="fname">getgrgid</b>(), <b class="fname">getgrnam</b>(), and <b class="fname">setgrent</b>() appeared in Version&#160;7 AT&amp;T UNIX. The functions <b class="fname">setgrfile</b>() and <b class="fname">setgroupent</b>() appeared in <span class="unix">4.3BSD-Reno</span>. The functions <b class="fname">getgrgid_r</b>() and <b class="fname">getgrnam_r</b>() appeared in <span class="unix">NetBSD&#160;3.0</span>.</div>
<div class="section">
<h1 id="x42554753">BUGS</h1> The functions <b class="fname">getgrent</b>(), <b class="fname">getgrgid</b>(), <b class="fname">getgrnam</b>(), <b class="fname">setgroupent</b>() and <b class="fname">setgrent</b>() leave their results in an internal static object and return a pointer to that object. Subsequent calls to the same function will modify the same object.<p>
The functions <b class="fname">getgrent</b>(), <b class="fname">endgrent</b>(), <b class="fname">setgroupent</b>(), and <b class="fname">setgrent</b>() are fairly useless in a networked environment and should be avoided, if possible. <b class="fname">getgrent</b>() makes no attempt to suppress duplicate information if multiple sources are specified in <a class="link-man" href="../html5/nsswitch.conf.html">nsswitch.conf(5)</a></div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
April 30, 2008</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
</html>

