<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/../4/strict.dtd">
>
<head>
<meta http-equiv="Content-Type" content="te../; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="../style.css" type="text/css" media="all">
<title>
PTHREAD_ATTR_GETGUARDSIZE(3)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
PTHREAD_ATTR_GETGUARDSIZE(3)</td>
<td class="head-vol" align="center">
Library Functions Manual</td>
<td class="head-rtitle" align="right">
PTHREAD_ATTR_GETGUARDSIZE(3)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">pthread_attr_getguardsize</b> &#8212; <span class="desc">get and set thread guard size</span></div>
<div class="section">
<h1 id="x4c494252415259">LIBRARY</h1> <span class="lib">POSIX Threads Library (libpthread, &#45;lpthread)</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="includes">#include &lt;<a class="link-includes">pthread.h</a>&gt;</b><p>
<i class="ftype">int</i><br>
<b class="fname">pthread_attr_getguardsize</b>(<i class="farg" style="white-space:nowrap;">const pthread_attr_t * restrict attr</i>, <i class="farg" style="white-space:nowrap;">size_t * restrict guardsize</i>);<p>
<i class="ftype">int</i><br>
<b class="fname">pthread_attr_setguardsize</b>(<i class="farg" style="white-space:nowrap;">pthread_attr_t *attr</i>, <i class="farg" style="white-space:nowrap;">size_t guardsize</i>);</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> The <b class="fname">pthread_attr_getguardsize</b>() and <b class="fname">pthread_attr_setguardsize</b>() functions get and set <i class="farg">guardsize</i> in the <i class="farg">attr</i> object. If <i class="farg">guardsize</i> is larger than 0, the system reserves an additional region of guarded memory of at least <i class="farg">guardsize</i> bytes at the end of the thread's stack for each new thread created by using <i class="farg">attr</i>.<p>
The guarded area is understood to be pages of memory that are protected from read and write access. While the guarded area should be rounded by the system page size, the actual default size is implementation-defined. In <span class="unix">NetBSD</span> the default <i class="farg">guardsize</i> is <span class="define">_SC_PAGESIZE</span>, the system page size.<p>
The rationale behind <i class="farg">guardsize</i> is two-fold:<ol style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 2.00ex;" class="list list-enum">
<li class="list-enum" style="margin-top: 1.00em;">
On the one hand, it provides protection against overflow of the stack pointer. If there is a guard area and a thread overflows its stack pointer into this extra memory area, it should receive a <span class="define">SIGSEGV</span> signal or experience other comparable fatal error condition. Note that if a thread allocates large data structures on stack, it may be necessary to raise the default <i class="farg">guardsize</i> in order to detect stack overflows.</li>
<li class="list-enum" style="margin-top: 1.00em;">
On the other hand, the overflow protection may waste system resources if an application that creates a large number of threads knows that it will never overflow the stack. In this case it is possible to set <i class="farg">guardsize</i> to 0.</li>
</ol>
<p>
If <a class="link-man" href="../3/pthread_attr_setstack">pthread_attr_setstack(3)</a> or <a class="link-man" href="../3/pthread_attr_setstackaddr">pthread_attr_setstackaddr(3)</a> is used to set the stack address attribute in <i class="farg">attr</i>, the guard size attribute is ignored and no guard area will be allocated; it is the responsibility of the application to handle the overflow conditions.</div>
<div class="section">
<h1 id="x52455455524e2056414c554553">RETURN VALUES</h1> If successful, both functions return 0. Otherwise, an error number is returned to indicate the error.</div>
<div class="section">
<h1 id="x4552524f5253">ERRORS</h1> No errors are defined for <b class="fname">pthread_attr_getguardsize</b>().<p>
The <b class="fname">pthread_attr_setguardsize</b>() may fail if:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">ENOMEM</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
There was insufficient memory.</dd>
</dl>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../3/pthread_attr">pthread_attr(3)</a>, <a class="link-man" href="../3/pthread_attr_setstack">pthread_attr_setstack(3)</a>, <a class="link-man" href="../3/sysconf">sysconf(3)</a></div>
<div class="section">
<h1 id="x5354414e4441524453">STANDARDS</h1> Both functions conform to IEEE Std 1003.1-2008 (&#8220;POSIX.1&#8221;).</div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
July 7, 2010</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
<>

