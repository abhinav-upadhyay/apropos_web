<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="../style.css" type="text/css" media="all">
<title>
SCHED(3)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
SCHED(3)</td>
<td class="head-vol" align="center">
Library Functions Manual</td>
<td class="head-rtitle" align="right">
SCHED(3)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">sched_setparam</b>, <b class="name">sched_getparam</b>, <b class="name">sched_setscheduler</b>, <b class="name">sched_getscheduler</b>, <b class="name">sched_get_priority_max</b>, <b class="name">sched_get_priority_min</b>, <b class="name">sched_rr_get_interval</b>, <b class="name">sched_yield</b> &#8212; <span class="desc">process scheduling</span></div>
<div class="section">
<h1 id="x4c494252415259">LIBRARY</h1> <span class="lib">POSIX Real&#45;time Library (librt, &#45;lrt)</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="includes">#include &lt;<a class="link-includes">sched.h</a>&gt;</b><p>
<i class="ftype">int</i><br>
<b class="fname">sched_setparam</b>(<i class="farg" style="white-space:nowrap;">pid_t pid</i>, <i class="farg" style="white-space:nowrap;">const struct sched_param *param</i>);<p>
<i class="ftype">int</i><br>
<b class="fname">sched_getparam</b>(<i class="farg" style="white-space:nowrap;">pid_t pid</i>, <i class="farg" style="white-space:nowrap;">struct sched_param *param</i>);<p>
<i class="ftype">int</i><br>
<b class="fname">sched_setscheduler</b>(<i class="farg" style="white-space:nowrap;">pid_t pid</i>, <i class="farg" style="white-space:nowrap;">int policy</i>, <i class="farg" style="white-space:nowrap;">const struct sched_param *param</i>);<p>
<i class="ftype">int</i><br>
<b class="fname">sched_getscheduler</b>(<i class="farg" style="white-space:nowrap;">pid_t pid</i>);<p>
<i class="ftype">int</i><br>
<b class="fname">sched_get_priority_max</b>(<i class="farg" style="white-space:nowrap;">int policy</i>);<p>
<i class="ftype">int</i><br>
<b class="fname">sched_get_priority_min</b>(<i class="farg" style="white-space:nowrap;">int policy</i>);<p>
<i class="ftype">int</i><br>
<b class="fname">sched_rr_get_interval</b>(<i class="farg" style="white-space:nowrap;">pid_t pid</i>, <i class="farg" style="white-space:nowrap;">struct timespec *interval</i>);<p>
<i class="ftype">int</i><br>
<b class="fname">sched_yield</b>(<i class="farg" style="white-space:nowrap;">void</i>);</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> This section describes the functions used to get scheduling information about processes, and control the scheduling of processes.<p>
Available scheduling policies (classes) are:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">SCHED_OTHER</span></dt>
<dd class="list-tag" style="margin-left: 11.00ex;">
Time-sharing (TS) scheduling policy. The default policy in <span class="unix">NetBSD</span>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">SCHED_FIFO</span></dt>
<dd class="list-tag" style="margin-left: 11.00ex;">
First in, first out (FIFO) scheduling policy.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">SCHED_RR</span></dt>
<dd class="list-tag" style="margin-left: 11.00ex;">
Round robin scheduling policy.</dd>
</dl>
<p>
The <i class="farg">struct sched_param</i> contains at least one member:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="farg">sched_priority</i></dt>
<dd class="list-tag" style="margin-left: 5.00ex;">
Specifies the priority of the process.</dd>
</dl>
</div>
<div class="section">
<h1 id="x46554e4354494f4e53">FUNCTIONS</h1><dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">sched_setparam</b>(<i class="farg">pid</i>, <i class="farg">param</i>)</dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
Sets the scheduling parameters for the process specified by <i class="farg">pid</i> to <i class="farg">param</i>. If the value of <i class="farg">pid</i> is equal to zero, then the calling process is used.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">sched_getparam</b>(<i class="farg">pid</i>, <i class="farg">param</i>)</dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
Gets the scheduling parameters of the process specified by <i class="farg">pid</i> into the structure <i class="farg">param</i>. If the value of <i class="farg">pid</i> is equal to zero, then the calling process is used.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">sched_setscheduler</b>(<i class="farg">pid</i>, <i class="farg">policy</i>, <i class="farg">param</i>)</dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
Set the scheduling policy and parameters for the process specified by <i class="farg">pid</i>. If the value of <i class="farg">pid</i> is equal to zero, then the calling process is used.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">sched_getscheduler</b>(<i class="farg">pid</i>)</dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
Returns the scheduling policy of the process specified by <i class="farg">pid</i>. If the value of <i class="farg">pid</i> is equal to zero, then the calling process is used.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">sched_get_priority_max</b>(<i class="farg">policy</i>)</dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
Returns the maximal priority which may be used for the scheduling policy specified by <i class="farg">policy</i>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">sched_get_priority_min</b>(<i class="farg">policy</i>)</dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
Returns the minimal priority which may be used for the scheduling policy specified by <i class="farg">policy</i>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">sched_rr_get_interval</b>(<i class="farg">pid</i>, <i class="farg">interval</i>)</dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
Returns the time quantum into the structure <i class="farg">interval</i> of the process specified by <i class="farg">pid</i>. If the value of <i class="farg">pid</i> is equal to zero, then the calling process is used. The process must be running at <i class="farg">SCHED_RR</i> scheduling policy.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">sched_yield</b>()</dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
Yields a processor voluntarily and gives other threads a chance to run without waiting for an involuntary preemptive switch.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">sched_setaffinity_np</b>(<i class="farg">pid</i>, <i class="farg">size</i>, <i class="farg">cpuset</i>)</dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
Set the affinity mask specified by <i class="farg">cpuset</i> for the process specified by <i class="farg">pid</i>. At least one valid CPU must be set in the mask.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">sched_getaffinity_np</b>(<i class="farg">pid</i>, <i class="farg">size</i>, <i class="farg">cpuset</i>)</dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
Get the affinity mask of the process specified by <i class="farg">pid</i> into the <i class="farg">cpuset</i>.</dd>
</dl>
</div>
<div class="section">
<h1 id="x494d504c454d454e544154494f4e204e4f544553">IMPLEMENTATION NOTES</h1> Setting CPU <a class="link-man" href="../html3/affinity.html">affinity(3)</a> requires super-user privileges. Ordinary users can be allowed to control CPU affinity of their threads via the <i class="file">security.models.extensions.user_set_cpu_affinity</i> <a class="link-man" href="../html7/sysctl.html">sysctl(7)</a>. See <a class="link-man" href="../html9/secmodel_extensions.html">secmodel_extensions(9)</a>.<p>
Portable applications should not use the <b class="fname">sched_setaffinity_np</b>() and <b class="fname">sched_getaffinity_np</b>() functions.</div>
<div class="section">
<h1 id="x52455455524e2056414c554553">RETURN VALUES</h1> <b class="fname">sched_setparam</b>(), <b class="fname">sched_getparam</b>(), <b class="fname">sched_rr_get_interval</b>(), and <b class="fname">sched_yield</b>() return 0 on success. Otherwise, &#45;1 is returned and <b class="var">errno</b> is set to indicate the error.<p>
<b class="fname">sched_setscheduler</b>() returns the previously used scheduling policy on success. Otherwise, &#45;1 is returned and <b class="var">errno</b> is set to indicate the error.<p>
<b class="fname">sched_getscheduler</b>() returns the scheduling policy on success. Otherwise, &#45;1 is returned and <b class="var">errno</b> is set to indicate the error.<p>
<b class="fname">sched_get_priority_max</b>() and <b class="fname">sched_get_priority_min</b>() return the maximal/minimal priority value on success. Otherwise, &#45;1 is returned and <b class="var">errno</b> is set to indicate the error.<p>
<b class="fname">sched_setaffinity_np</b>() and <b class="fname">sched_getaffinity_np</b>() return 0 on success. Otherwise, &#45;1 is returned and <b class="var">errno</b> is set to indicate the error.</div>
<div class="section">
<h1 id="x4552524f5253">ERRORS</h1> The <b class="fname">sched_setparam</b>() and <b class="fname">sched_setscheduler</b>() functions fail if:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">EINVAL</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
At least one of the specified scheduling parameters was invalid.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">EPERM</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The calling process has no appropriate privileges to perform the operation.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">ESRCH</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
No process can be found corresponding to the PID specified by <i class="farg">pid</i>, and the value of <i class="farg">pid</i> is not zero.</dd>
</dl>
<p>
The <b class="fname">sched_getparam</b>() and <b class="fname">sched_getscheduler</b>() functions fail if:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">EPERM</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The calling process is not a super-user and its effective user id does not match the effective user-id of the specified process.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">ESRCH</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
No process can be found corresponding to that specified by <i class="farg">pid</i>, and the value of <i class="farg">pid</i> is not zero.</dd>
</dl>
<p>
The <b class="fname">sched_get_priority_max</b>() and <b class="fname">sched_get_priority_min</b>() functions fail if:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">EINVAL</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The specified scheduling policy is invalid.</dd>
</dl>
<p>
The <b class="fname">sched_rr_get_interval</b>() function fails if:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">ESRCH</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
No process can be found corresponding to that specified by <i class="farg">pid</i>, and the value of <i class="farg">pid</i> is not zero.</dd>
</dl>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../html3/affinity.html">affinity(3)</a>, <a class="link-man" href="../html3/cpuset.html">cpuset(3)</a>, <a class="link-man" href="../html3/pset.html">pset(3)</a>, <a class="link-man" href="../html8/schedctl.html">schedctl(8)</a></div>
<div class="section">
<h1 id="x5354414e4441524453">STANDARDS</h1> These functions, except <b class="fname">sched_setaffinity_np</b>() and <b class="fname">sched_getaffinity_np</b>(), are expected to conform the IEEE Std 1003.1-2001 (&#8220;POSIX.1&#8221;) standard.</div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> The scheduling functions appeared in <span class="unix">NetBSD&#160;5.0</span>.</div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
December 4, 2011</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
</html>

