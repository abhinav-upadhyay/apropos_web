<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="../style.css" type="text/css" media="all">
<title>
BLUETOOTH(3)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
BLUETOOTH(3)</td>
<td class="head-vol" align="center">
Library Functions Manual</td>
<td class="head-rtitle" align="right">
BLUETOOTH(3)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">bt_gethostbyname</b>, <b class="name">bt_gethostbyaddr</b>, <b class="name">bt_gethostent</b>, <b class="name">bt_sethostent</b>, <b class="name">bt_endhostent</b>, <b class="name">bt_getprotobyname</b>, <b class="name">bt_getprotobynumber</b>, <b class="name">bt_getprotoent</b>, <b class="name">bt_setprotoent</b>, <b class="name">bt_endprotoent</b>, <b class="name">bt_aton</b>, <b class="name">bt_ntoa</b> &#8212; <span class="desc">Bluetooth host lookup routines</span></div>
<div class="section">
<h1 id="x4c494252415259">LIBRARY</h1> <span class="lib">Bluetooth Library (libbluetooth, &#45;lbluetooth)</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="includes">#include &lt;<a class="link-includes">bluetooth.h</a>&gt;</b><p>
<i class="ftype">struct hostent *</i><br>
<b class="fname">bt_gethostbyname</b>(<i class="farg" style="white-space:nowrap;">const char *name</i>);<p>
<i class="ftype">struct hostent *</i><br>
<b class="fname">bt_gethostbyaddr</b>(<i class="farg" style="white-space:nowrap;">const char *addr</i>, <i class="farg" style="white-space:nowrap;">int len</i>, <i class="farg" style="white-space:nowrap;">int type</i>);<p>
<i class="ftype">struct hostent *</i><br>
<b class="fname">bt_gethostent</b>(<i class="farg" style="white-space:nowrap;">void</i>);<p>
<i class="ftype">void</i><br>
<b class="fname">bt_sethostent</b>(<i class="farg" style="white-space:nowrap;">int stayopen</i>);<p>
<i class="ftype">void</i><br>
<b class="fname">bt_endhostent</b>(<i class="farg" style="white-space:nowrap;">void</i>);<p>
<i class="ftype">struct protoent *</i><br>
<b class="fname">bt_getprotobyname</b>(<i class="farg" style="white-space:nowrap;">const char *name</i>);<p>
<i class="ftype">struct protoent *</i><br>
<b class="fname">bt_getprotobynumber</b>(<i class="farg" style="white-space:nowrap;">int proto</i>);<p>
<i class="ftype">struct protoent *</i><br>
<b class="fname">bt_getprotoent</b>(<i class="farg" style="white-space:nowrap;">void</i>);<p>
<i class="ftype">void</i><br>
<b class="fname">bt_setprotoent</b>(<i class="farg" style="white-space:nowrap;">int stayopen</i>);<p>
<i class="ftype">void</i><br>
<b class="fname">bt_endprotoent</b>(<i class="farg" style="white-space:nowrap;">void</i>);<p>
<i class="ftype">int</i><br>
<b class="fname">bt_aton</b>(<i class="farg" style="white-space:nowrap;">const char *str</i>, <i class="farg" style="white-space:nowrap;">bdaddr_t *ba</i>);<p>
<i class="ftype">const char *</i><br>
<b class="fname">bt_ntoa</b>(<i class="farg" style="white-space:nowrap;">const bdaddr_t *ba</i>, <i class="farg" style="white-space:nowrap;">char *str</i>);</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> The <b class="fname">bt_gethostent</b>(), <b class="fname">bt_gethostbyname</b>(), and <b class="fname">bt_gethostbyaddr</b>() functions each return a pointer to an object with the <span class="type">hostent</span> structure describing a Bluetooth host referenced by name or by address, respectively.<p>
The <i class="farg">name</i> argument passed to <b class="fname">bt_gethostbyname</b>() should point to a <span class="define">NUL</span>-terminated hostname. The <i class="farg">addr</i> argument passed to <b class="fname">bt_gethostbyaddr</b>() should point to an address which is <i class="farg">len</i> bytes long, in binary form (i.e., not a Bluetooth BD_ADDR in human readable ASCII form). The <i class="farg">type</i> argument specifies the address family of this address and must be set to <span class="define">AF_BLUETOOTH</span>.<p>
The structure returned contains the information obtained from a line in <i class="file">/etc/bluetooth/hosts</i> file.<p>
The <b class="fname">bt_sethostent</b>() function controls whether <i class="file">/etc/bluetooth/hosts</i> file should stay open after each call to <b class="fname">bt_gethostbyname</b>() or <b class="fname">bt_gethostbyaddr</b>(). If the <i class="farg">stayopen</i> flag is non-zero, the file will not be closed.<p>
The <b class="fname">bt_endhostent</b>() function closes the <i class="file">/etc/bluetooth/hosts</i> file.<p>
The <b class="fname">bt_getprotoent</b>(), <b class="fname">bt_getprotobyname</b>(), and <b class="fname">bt_getprotobynumber</b>() functions each return a pointer to an object with the <span class="type">protoent</span> structure describing a Bluetooth Protocol Service Multiplexor referenced by name or number, respectively.<p>
The <i class="farg">name</i> argument passed to <b class="fname">bt_getprotobyname</b>() should point to a <span class="define">NUL</span>-terminated Bluetooth Protocol Service Multiplexor name. The <i class="farg">proto</i> argument passed to <b class="fname">bt_getprotobynumber</b>() should have numeric value of the desired Bluetooth Protocol Service Multiplexor.<p>
The structure returned contains the information obtained from a line in <i class="file">/etc/bluetooth/protocols</i> file.<p>
The <b class="fname">bt_setprotoent</b>() function controls whether <i class="file">/etc/bluetooth/protocols</i> file should stay open after each call to <b class="fname">bt_getprotobyname</b>() or <b class="fname">bt_getprotobynumber</b>(). If the <i class="farg">stayopen</i> flag is non-zero, the file will not be closed.<p>
The <b class="fname">bt_endprotoent</b>() function closes the <i class="file">/etc/bluetooth/protocols</i> file.<p>
The <b class="fname">bt_aton</b>() routine interprets the specified character string as a Bluetooth address, placing the address into the structure provided. It returns 1 if the string was successfully interpreted, or 0 if the string is invalid.<p>
The routine <b class="fname">bt_ntoa</b>() takes a Bluetooth address and places an ASCII string representing the address into the buffer provided. It is up to the caller to ensure that provided buffer has enough space. If no buffer was provided then an internal static buffer will be used.</div>
<div class="section">
<h1 id="x46494c4553">FILES</h1><dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/etc/bluetooth/hosts</i></dt>
<dd class="list-tag" style="margin-left: 24.00ex;">
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/etc/bluetooth/protocols</i></dt>
<dd class="list-tag" style="margin-left: 24.00ex;">
</dd>
</dl>
</div>
<div class="section">
<h1 id="x4558414d504c4553">EXAMPLES</h1> Print out the hostname associated with a specific BD_ADDR:<p>
<pre style="margin-left: 5.00ex;" class="lit display">
const char *bdstr = "00:01:02:03:04:05"; 
bdaddr_t bd; 
struct hostent *hp; 
 
if (!bt_aton(bdstr, &amp;bd)) 
	errx(1, "can't parse BD_ADDR %s", bdstr); 
 
if ((hp = bt_gethostbyaddr((const char *)&amp;bd, 
    sizeof(bd), AF_BLUETOOTH)) == NULL) 
	errx(1, "no name associated with %s", bdstr); 
 
printf("name associated with %s is %s&#92;n", bdstr, hp-&gt;h_name);</pre>
</div>
<div class="section">
<h1 id="x444941474e4f5354494353">DIAGNOSTICS</h1> Error return status from <b class="fname">bt_gethostent</b>(), <b class="fname">bt_gethostbyname</b>(), and <b class="fname">bt_gethostbyaddr</b>() is indicated by return of a <span class="define">NULL</span> pointer. The external integer <b class="var">h_errno</b> may then be checked to see whether this is a temporary failure or an invalid or unknown host. The routine <a class="link-man" href="../3/herror">herror(3)</a> can be used to print an error message describing the failure. If its argument <i class="farg">string</i> is non-<span class="define">NULL</span>, it is printed, followed by a colon and a space. The error message is printed with a trailing newline.<p>
The variable <b class="var">h_errno</b> can have the following values:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">HOST_NOT_FOUND</span></dt>
<dd class="list-tag" style="margin-left: 18.00ex;">
No such host is known.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">NO_RECOVERY</span></dt>
<dd class="list-tag" style="margin-left: 18.00ex;">
Some unexpected server failure was encountered. This is a non-recoverable error.</dd>
</dl>
<p>
The <b class="fname">bt_getprotoent</b>(), <b class="fname">bt_getprotobyname</b>(), and <b class="fname">bt_getprotobynumber</b>() return <span class="define">NULL</span> on EOF or error.</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../3/gethostbyaddr">gethostbyaddr(3)</a>, <a class="link-man" href="../3/gethostbyname">gethostbyname(3)</a>, <a class="link-man" href="../3/getprotobyname">getprotobyname(3)</a>, <a class="link-man" href="../3/getprotobynumber">getprotobynumber(3)</a>, <a class="link-man" href="../3/herror">herror(3)</a>, <a class="link-man" href="../3/inet_aton">inet_aton(3)</a>, <a class="link-man" href="../3/inet_ntoa">inet_ntoa(3)</a></div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> <b class="name">libbluetooth</b> first appeared in <span class="unix">FreeBSD</span> was ported to <span class="unix">NetBSD&#160;4.0</span> and extended by <span class="author">Iain Hibbert</span> for Itronix, Inc.</div>
<div class="section">
<h1 id="x415554484f5253">AUTHORS</h1> <span class="author">Maksim Yevmenkin</span> &#60;<a class="link-mail" href="mailto:m_evmenkin@yahoo.com">m_evmenkin@yahoo.com</a>&#62; <span class="author">Iain Hibbert</span></div>
<div class="section">
<h1 id="x43415645415453">CAVEATS</h1> The <b class="fname">bt_gethostent</b>() function reads the next line of <i class="file">/etc/bluetooth/hosts</i>, opening the file if necessary.<p>
The <b class="fname">bt_sethostent</b>() function opens and/or rewinds the <i class="file">/etc/bluetooth/hosts</i> file.<p>
The <b class="fname">bt_getprotoent</b>() function reads the next line of <i class="file">/etc/bluetooth/protocols</i>, opening the file if necessary.<p>
The <b class="fname">bt_setprotoent</b>() function opens and/or rewinds the <i class="file">/etc/bluetooth/protocols</i> file.</div>
<div class="section">
<h1 id="x42554753">BUGS</h1> These functions use static data storage; if the data is needed for future use, it should be copied before any subsequent calls overwrite it.</div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
October 25, 2011</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
</html>

