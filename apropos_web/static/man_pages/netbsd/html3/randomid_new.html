<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/../4/strict.dtd">
>
<head>
<meta http-equiv="Content-Type" content="te../; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="../style.css" type="text/css" media="all">
<title>
RANDOMID(3)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
RANDOMID(3)</td>
<td class="head-vol" align="center">
Library Functions Manual</td>
<td class="head-rtitle" align="right">
RANDOMID(3)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">randomid</b> <b class="name">randomid_new</b>, <b class="name">randomid_delete</b>, &#8212; <span class="desc">provide pseudo-random data stream without repetitions</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="includes">#include &lt;<a class="link-includes">sys/types.h</a>&gt;</b><br>
<b class="includes">#include &lt;<a class="link-includes">randomid.h</a>&gt;</b><p>
<i class="ftype">uint32_t</i><br>
<b class="fname">randomid</b>(<i class="farg" style="white-space:nowrap;">randomid_t ctx</i>);<p>
<i class="ftype">randomid_t</i><br>
<b class="fname">randomid_new</b>(<i class="farg" style="white-space:nowrap;">int bits</i>, <i class="farg" style="white-space:nowrap;">long timeo</i>);<p>
<i class="ftype">void</i><br>
<b class="fname">randomid_delete</b>(<i class="farg" style="white-space:nowrap;">randomid_t ctx</i>);</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> The <b class="fname">randomid</b>() function provides pseudo-random data stream, which is guaranteed not to generate the same number twice during a certain duration. <i class="farg">ctx</i> is the context which holds internal state for the random number generator.<p>
To initialize a context, <i class="farg">randomid_new</i> is used. <i class="farg">bits</i> specifies the bitwidth of the value generated by <b class="fname">randomid</b>(). Currently 32, 20, and 16 are supported. <i class="farg">timeo</i> specifies the reinitialization interval in seconds. <i class="farg">timeo</i> has to be bigger than <span class="define">RANDOMID_TIMEO_MIN</span>. <i class="farg">randomid_new</i> returns a dynamically-allocated memory region allocated by <a class="link-man" href="../3/malloc">malloc(3)</a>.<p>
<b class="fname">randomid_delete</b>() will <a class="link-man" href="../3/free">free(3)</a> the internal state <i class="farg">ctx</i>.<p>
The same number may appear after two reinitialization events of the internal state, <i class="farg">ctx</i>. Reinitialization happens when the random number generator cycle is exhausted, or <i class="farg">timeo</i> seconds have passed since the last reinitialization. For instance, <i class="farg">ctx</i> configured to generate 16 bit data stream will reinitialize its internal state every 30000 calls to <b class="fname">randomid</b>() (or after <i class="farg">timeo</i> seconds), therefore the same data will not appear until after 30000 calls to <b class="fname">randomid</b>() (or after <i class="farg">timeo</i> seconds).<p>
The internal state, <i class="farg">ctx</i>, determines the data stream generated by <b class="fname">randomid</b>(). <i class="farg">ctx</i> must be allocated per data stream (such as a specific data field). It must not be shared among multiple data streams with different usage.</div>
<div class="section">
<h1 id="x4558414d504c4553">EXAMPLES</h1><pre style="margin-left: 5.00ex;" class="lit display">
#include &lt;stdio.h&gt; 
#include &lt;sys/types.h&gt; 
#include &lt;randomid.h&gt; 
 
uint32_t 
genid(void) 
{ 
	static randomid_t ctx = NULL; 
 
	if (!ctx) 
		ctx = randomid_new(16, (long)3600); 
	return randomid(ctx); 
}</pre>
</div>
<div class="section">
<h1 id="x4552524f5253">ERRORS</h1> <b class="fname">randomid_new</b>() returns <span class="define">NULL</span> on error and sets the external variable <b class="var">errno</b>.</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../3/arc4random">arc4random(3)</a></div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> The pseudo-random data stream generator was designed by Niels Provos for <span class="unix">OpenBSD</span> IPv4 fragment ID generation. <b class="fname">randomid</b>() is a generalized version of the generator, reworked by Jun-ichiro itojun Hagino, and was introduced in <span class="unix">NetBSD&#160;2.0</span>.</div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
January 5, 2006</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
<>

