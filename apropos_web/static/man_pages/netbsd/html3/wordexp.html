<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/../4/strict.dtd">
>
<head>
<meta http-equiv="Content-Type" content="te../; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="../style.css" type="text/css" media="all">
<title>
WORDEXP(3)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
WORDEXP(3)</td>
<td class="head-vol" align="center">
Library Functions Manual</td>
<td class="head-rtitle" align="right">
WORDEXP(3)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">wordexp</b> &#8212; <span class="desc">perform shell-style word expansions</span></div>
<div class="section">
<h1 id="x4c494252415259">LIBRARY</h1> <span class="lib">Standard C Library (libc, &#45;lc)</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="includes">#include &lt;<a class="link-includes">wordexp.h</a>&gt;</b><p>
<i class="ftype">int</i><br>
<b class="fname">wordexp</b>(<i class="farg" style="white-space:nowrap;">const char * restrict words</i>, <i class="farg" style="white-space:nowrap;">wordexp_t * restrict pwordexp</i>, <i class="farg" style="white-space:nowrap;">int flags</i>);<p>
<i class="ftype">void</i><br>
<b class="fname">wordfree</b>(<i class="farg" style="white-space:nowrap;">wordexp_t *pwordexp</i>);</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> The <b class="fname">wordexp</b>() function performs shell-style word expansion on <i class="farg">words</i> and places the list of expanded words into the structure pointed to by <i class="farg">pwordexp</i>.<p>
The <i class="farg">flags</i> argument is the bitwise inclusive OR of any of the following constants:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">WRDE_APPEND</span></dt>
<dd class="list-tag" style="margin-left: 16.00ex;">
Append the words to those generated by a previous call to <b class="fname">wordexp</b>().</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">WRDE_DOOFFS</span></dt>
<dd class="list-tag" style="margin-left: 16.00ex;">
As many <span class="define">NULL</span> pointers as are specified by the <b class="var">we_offs</b> member of <i class="farg">we</i> are added to the front of <b class="var">we_wordv</b>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">WRDE_NOCMD</span></dt>
<dd class="list-tag" style="margin-left: 16.00ex;">
Disallow command substitution in <i class="farg">words</i>. See the note in <i class="link-sec"><a class="link-sec" href="#x42554753">BUGS</a></i> before using this.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">WRDE_REUSE</span></dt>
<dd class="list-tag" style="margin-left: 16.00ex;">
The <i class="farg">we</i> argument was passed to a previous successful call to <b class="fname">wordexp</b>() but has not been passed to <b class="fname">wordfree</b>(). The implementation may reuse the space allocated to it.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">WRDE_SHOWERR</span></dt>
<dd class="list-tag" style="margin-left: 16.00ex;">
Do not redirect shell error messages to <i class="file">/dev/null</i>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">WRDE_UNDEF</span></dt>
<dd class="list-tag" style="margin-left: 16.00ex;">
Report error on an attempt to expand an undefined shell variable.</dd>
</dl>
<p>
The structure type <b class="name">wordexp_t</b> includes the following members:<p>
<pre style="margin-left: 5.00ex;" class="lit display">
size_t	we_wordc 
char	**we_wordv 
size_t	we_offs</pre>
<p>
The <i class="farg">we_wordc</i> member is the count of generated words.<p>
The <i class="farg">we_wordv</i> member points to a list of pointers to expanded words.<p>
The <i class="farg">we_offs</i> member is the number of slots to reserve at the beginning of the <i class="farg">we_wordv</i> member.<p>
It is the caller's responsibility to allocate the storage pointed to by <i class="farg">pwordexp</i>. The <b class="fname">wordexp</b>() function allocates other space as needed, including memory pointed to by the <i class="farg">we_wordv</i> member.<p>
The <b class="fname">wordfree</b>() function frees the memory allocated by <b class="fname">wordexp</b>().</div>
<div class="section">
<h1 id="x494d504c454d454e544154494f4e204e4f544553">IMPLEMENTATION NOTES</h1> The <b class="fname">wordexp</b>() function is implemented as a wrapper around the undocumented <b class="cmd">wordexp</b> shell built-in command.</div>
<div class="section">
<h1 id="x52455455524e2056414c554553">RETURN VALUES</h1> The <b class="fname">wordexp</b>() function returns zero if successful, otherwise it returns one of the following error codes:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">WRDE_BADCHAR</span></dt>
<dd class="list-tag" style="margin-left: 16.00ex;">
The <i class="farg">words</i> argument contains one of the following unquoted characters: &#60;newline&#62;, &#8216;<code class="lit">|</code>&#8217;, &#8216;<code class="lit">&amp;</code>&#8217;, &#8216;<code class="lit">;</code>&#8217;, &#8216;<code class="lit">&lt;</code>&#8217;, &#8216;<code class="lit">&gt;</code>&#8217;, &#8216;<code class="lit">(</code>&#8217;, &#8216;<code class="lit">)</code>&#8217;, &#8216;<code class="lit">{</code>&#8217;, &#8216;<code class="lit">}</code>&#8217;.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">WRDE_BADVAL</span></dt>
<dd class="list-tag" style="margin-left: 16.00ex;">
An attempt was made to expand an undefined shell variable and <span class="define">WRDE_UNDEF</span> is set in <i class="farg">flags</i>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">WRDE_CMDSUB</span></dt>
<dd class="list-tag" style="margin-left: 16.00ex;">
An attempt was made to use command substitution and <span class="define">WRDE_NOCMD</span> is set in <i class="farg">flags</i>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">WRDE_NOSPACE</span></dt>
<dd class="list-tag" style="margin-left: 16.00ex;">
Not enough memory to store the result.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">WRDE_SYNTAX</span></dt>
<dd class="list-tag" style="margin-left: 16.00ex;">
Shell syntax error in <i class="farg">words</i>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">WRDE_ERRNO</span></dt>
<dd class="list-tag" style="margin-left: 16.00ex;">
An internal error occured and <b class="var">errno</b> is set to indicate the error.</dd>
</dl>
<p>
The <b class="fname">wordfree</b>() function returns no value.</div>
<div class="section">
<h1 id="x454e5649524f4e4d454e54">ENVIRONMENT</h1><dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">IFS</span></dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
Field separator.</dd>
</dl>
</div>
<div class="section">
<h1 id="x4558414d504c4553">EXAMPLES</h1> Invoke the editor on all <i class="file">.c</i> files in the current directory and <i class="file">/etc/motd</i> (error checking omitted):<p>
<pre style="margin-left: 5.00ex;" class="lit display">
wordexp_t we; 
 
wordexp("${EDITOR:-vi} *.c /etc/motd", &amp;we, 0); 
execvp(we-&gt;we_wordv[0], we-&gt;we_wordv);</pre>
</div>
<div class="section">
<h1 id="x444941474e4f5354494353">DIAGNOSTICS</h1> Diagnostic messages from the shell are written to the standard error output if <span class="define">WRDE_SHOWERR</span> is set in <i class="farg">flags</i>.</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../1/sh">sh(1)</a>, <a class="link-man" href="../3/fnmatch">fnmatch(3)</a>, <a class="link-man" href="../3/glob">glob(3)</a>, <a class="link-man" href="../3/popen">popen(3)</a>, <a class="link-man" href="../3/system">system(3)</a></div>
<div class="section">
<h1 id="x5354414e4441524453">STANDARDS</h1> The <b class="fname">wordexp</b>() and <b class="fname">wordfree</b>() functions conform to IEEE Std 1003.1-2001 (&#8220;POSIX.1&#8221;). Their first release was in IEEE Std 1003.2-1992 (&#8220;POSIX.2&#8221;). The return value <span class="define">WRDE_ERRNO</span> is an extension.</div>
<div class="section">
<h1 id="x42554753">BUGS</h1> Do not pass untrusted user data to <b class="fname">wordexp</b>(), regardless of whether the <span class="define">WRDE_NOCMD</span> flag is set. The <b class="fname">wordexp</b>() function attempts to detect input that would cause commands to be executed before passing it to the shell but it does not use the same parser so it may be fooled.</div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
July 13, 2004</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
<>

