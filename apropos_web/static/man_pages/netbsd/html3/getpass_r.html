<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/../4/strict.dtd">
>
<head>
<meta http-equiv="Content-Type" content="te../; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="../style.css" type="text/css" media="all">
<title>
GETPASS(3)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
GETPASS(3)</td>
<td class="head-vol" align="center">
Library Functions Manual</td>
<td class="head-rtitle" align="right">
GETPASS(3)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">getpass</b> &#8212; <span class="desc">get a password</span></div>
<div class="section">
<h1 id="x4c494252415259">LIBRARY</h1> <span class="lib">Standard C Library (libc, &#45;lc)</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="includes">#include &lt;<a class="link-includes">unistd.h</a>&gt;</b><p>
<i class="ftype">char *</i><br>
<b class="fname">getpass</b>(<i class="farg" style="white-space:nowrap;">const char *prompt</i>);<p>
<i class="ftype">char *</i><br>
<b class="fname">getpass_r</b>(<i class="farg" style="white-space:nowrap;">const char *prompt</i>, <i class="farg" style="white-space:nowrap;">char *buf</i>, <i class="farg" style="white-space:nowrap;">size_t buflen</i>);<p>
<i class="ftype">char *</i><br>
<b class="fname">getpassfd</b>(<i class="farg" style="white-space:nowrap;">const char *prompt</i>, <i class="farg" style="white-space:nowrap;">char *buf</i>, <i class="farg" style="white-space:nowrap;">size_t buflen</i>, <i class="farg" style="white-space:nowrap;">int *fd</i>, <i class="farg" style="white-space:nowrap;">int flags</i>, <i class="farg" style="white-space:nowrap;">int timeout</i>);</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> The <b class="fname">getpass</b>() function displays a prompt to, and reads in a password from, <i class="file">/dev/tty</i>. If this file is not accessible, <b class="fname">getpass</b>() displays the prompt on the standard error output and reads from the standard input.<p>
The password may be up to <a class="link-man" href="../3/sysconf">sysconf(3)</a> <span class="define">_SC_PASS_MAX</span> characters in length. Any additional characters and the terminating newline character are discarded.<p>
<b class="fname">getpass</b>() turns off character echoing while reading the password.<p>
<b class="fname">getpass_r</b>() is similar to <b class="fname">getpass</b>() only it puts its result in <i class="farg">buf</i> for up to <i class="farg">buflen</i> characters. If the <i class="farg">buf</i> argument is <span class="define">NULL</span>, then a buffer will be dynamically allocated.<p>
The <b class="fname">getpassfd</b>() function allows one to specify the three file descriptors corresponding to <span class="define">stdin</span>, <span class="define">stdout</span>, and <span class="define">stderr</span> in the <i class="farg">fd</i> argument, or if <i class="farg">fd</i> is <span class="define">NULL</span>, <b class="fname">getpassfd</b>() first attempts to open <i class="file">/dev/tty</i> and if that fails, defaults to <span class="define">STDIN_FILENO</span> for input and <span class="define">STDERR_FILENO</span> for output.<p>
The behavior of <b class="fname">getpassfd</b>() is controlled by the <i class="farg">flags</i> argument:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">GETPASS_NEED_TTY</span></dt>
<dd class="list-tag" style="margin-left: 19.00ex;">
Fail if we are unable to set the tty modes like we want.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">GETPASS_FAIL_EOF</span></dt>
<dd class="list-tag" style="margin-left: 19.00ex;">
Fail if we get the end-of-file character instead of returning the result so far.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">GETPASS_BUF_LIMIT</span></dt>
<dd class="list-tag" style="margin-left: 19.00ex;">
Beep when the buffer limit is reached, instead of silently absorbing it.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">GETPASS_NO_SIGNAL</span></dt>
<dd class="list-tag" style="margin-left: 19.00ex;">
Don't make ttychars send signals.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">GETPASS_NO_BEEP</span></dt>
<dd class="list-tag" style="margin-left: 19.00ex;">
Don't beep if we erase past the beginning of the buffer or we try to enter past the end.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">GETPASS_ECHO_STAR</span></dt>
<dd class="list-tag" style="margin-left: 19.00ex;">
Echo a &#8216;*&#8217; for each character entered.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">GETPASS_ECHO</span></dt>
<dd class="list-tag" style="margin-left: 19.00ex;">
Echo characters as they are typed.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">GETPASS_ECHO_NL</span></dt>
<dd class="list-tag" style="margin-left: 19.00ex;">
Echoes a newline if successful.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">GETPASS_7BIT</span></dt>
<dd class="list-tag" style="margin-left: 19.00ex;">
Mask the high bit for each entered character.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">GETPASS_FORCE_LOWER</span></dt>
<dd class="list-tag" style="margin-left: 19.00ex;">
Lowercase each entered character.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">GETPASS_FORCE_UPPER</span></dt>
<dd class="list-tag" style="margin-left: 19.00ex;">
Uppercase each entered character.</dd>
</dl>
<p>
Finally if the <i class="farg">timeout</i> argument is non zero, <b class="fname">getpassfd</b>() will wait for <i class="farg">timeout</i> seconds for input after each character before returning an error, instead of waiting forever.</div>
<div class="section">
<h1 id="x52455455524e2056414c554553">RETURN VALUES</h1> The <b class="fname">getpass</b>() function returns a pointer to the NUL terminated password, or an empty string on error. The <b class="fname">getpass_r</b>() and <b class="fname">getpassfd</b>() functions return a pointer to the NUL terminated password, or <span class="define">NULL</span> on error.</div>
<div class="section">
<h1 id="x46494c4553">FILES</h1><dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/dev/tty</i></dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
</dd>
</dl>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../3/crypt">crypt(3)</a></div>
<div class="section">
<h1 id="x5354414e4441524453">STANDARDS</h1> The <b class="fname">getpass</b>() function appeared in Version&#160;2 of the Single UNIX Specification (&#8220;SUSv2&#8221;), but it was already marked as legacy. The function was removed in the IEEE Std 1003.1-2001 (&#8220;POSIX.1&#8221;) standard.</div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> A <b class="fname">getpass</b>() function appeared in Version&#160;7 AT&amp;T UNIX. The <b class="fname">getpass_r</b>() and <b class="fname">getpassfd</b>() functions appeared in <span class="unix">NetBSD&#160;7.0</span>.</div>
<div class="section">
<h1 id="x42554753">BUGS</h1> The <b class="fname">getpass</b>() function leaves its result in an internal static object and returns a pointer to that object. Subsequent calls to <b class="fname">getpass</b>() will modify the same object.</div>
<div class="section">
<h1 id="x534543555249545920434f4e53494445524154494f4e53">SECURITY CONSIDERATIONS</h1> The calling process should zero the password as soon as possible to avoid leaving the cleartext password visible in the process's address space.<p>
Historically <b class="name">getpass</b> accepted and returned a password if it could not modify the terminal settings to turn echo off (or if the input was not a terminal). In this implementation, only terminal input is accepted.</div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
April 13, 2012</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
<>

