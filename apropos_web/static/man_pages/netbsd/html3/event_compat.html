<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="/static/man_pages/netbsd/style.css" type="text/css" media="all">
<title>
event_compat(3)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
event_compat(3)</td>
<td class="head-vol" align="center">
Library Functions Manual</td>
<td class="head-rtitle" align="right">
event_compat(3)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>NAME</h1> event_compat &#45;<p>
Potentially non-threadsafe versions of the functions in <b>event.h</b>: provided only for backwards compatibility.<div style="height: 1.00em;">
&#160;</div>
</div>
<div class="section">
<h1>SYNOPSIS</h1> #include &lt;event2/event_compat.h&gt;<div style="height: 0.00em;">
&#160;</div>
#include &lt;event2/event-config.h&gt;<div style="height: 0.00em;">
&#160;</div>
#include &lt;event2/util.h&gt;<div style="height: 0.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
<div class="subsection">
<h2>Macros</h2><br>
#define <b>EVENT_FD</b>(ev)   ((int)<b>event_get_fd</b>(ev))<div style="height: 0.00em;">
&#160;</div>
#define <b>EVENT_SIGNAL</b>(ev)   <b>event_get_signal</b>(ev)<div style="height: 0.00em;">
&#160;</div>
#define <b>evsignal_set</b>(ev, x, cb, arg)   <b>event_set</b>((ev), (x), <b>EV_SIGNAL</b>|<b>EV_PERSIST</b>, (cb), (arg))<div style="height: 0.00em;">
&#160;</div>
#define <b>evtimer_set</b>(ev, cb, arg)   <b>event_set</b>((ev), -1, 0, (cb), (arg))<div style="height: 0.00em;">
&#160;</div>
<br>
<p>
<b>timeout_* macros</b><div style="height: 0.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
<p>
<b>Deprecated</b><div style="margin-left: 4.00ex;">
These macros are deprecated because their naming is inconsistent with the rest of Libevent. Use the evtimer_* macros instead.</div>
<p>
<div style="height: 1.00em;">
&#160;</div>
<p>
<br>
<br>
#define <b>timeout_add</b>(ev, tv)   <b>event_add</b>((ev), (tv))<div style="height: 0.00em;">
&#160;</div>
#define <b>timeout_set</b>(ev, cb, arg)   <b>event_set</b>((ev), -1, 0, (cb), (arg))<div style="height: 0.00em;">
&#160;</div>
#define <b>timeout_del</b>(ev)   <b>event_del</b>(ev)<div style="height: 0.00em;">
&#160;</div>
#define <b>timeout_pending</b>(ev, tv)   <b>event_pending</b>((ev), <b>EV_TIMEOUT</b>, (tv))<div style="height: 0.00em;">
&#160;</div>
#define <b>timeout_initialized</b>(ev)   <b>event_initialized</b>(ev)<div style="height: 0.00em;">
&#160;</div>
<br>
<br>
<p>
<b>signal_* macros</b><div style="height: 0.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
<p>
<b>Deprecated</b><div style="margin-left: 4.00ex;">
These macros are deprecated because their naming is inconsistent with the rest of Libevent. Use the evsignal_* macros instead.</div>
<p>
<div style="height: 1.00em;">
&#160;</div>
<p>
<br>
<br>
#define <b>signal_add</b>(ev, tv)   <b>event_add</b>((ev), (tv))<div style="height: 0.00em;">
&#160;</div>
#define <b>signal_set</b>(ev, x, cb, arg)   <b>event_set</b>((ev), (x), <b>EV_SIGNAL</b>|<b>EV_PERSIST</b>, (cb), (arg))<div style="height: 0.00em;">
&#160;</div>
#define <b>signal_del</b>(ev)   <b>event_del</b>(ev)<div style="height: 0.00em;">
&#160;</div>
#define <b>signal_pending</b>(ev, tv)   <b>event_pending</b>((ev), <b>EV_SIGNAL</b>, (tv))<div style="height: 0.00em;">
&#160;</div>
#define <b>signal_initialized</b>(ev)   <b>event_initialized</b>(ev)<div style="height: 0.00em;">
&#160;</div>
<br>
<br>
</div>
<div class="subsection">
<h2>Functions</h2><br>
int <b>event_dispatch</b> (void)<div style="height: 0.00em;">
&#160;</div>
<i>Loop to process events. </i> const char *  <b>event_get_method</b> (void)<div style="height: 0.00em;">
&#160;</div>
<i>Get the kernel event notification mechanism used by Libevent. </i> struct  <b>event_base</b> * <b>event_init</b> (void)<div style="height: 0.00em;">
&#160;</div>
<i>Initialize the event API. </i> int  <b>event_loop</b> (int)<div style="height: 0.00em;">
&#160;</div>
<i>Handle events. </i> int  <b>event_loopbreak</b> (void)<div style="height: 0.00em;">
&#160;</div>
<i>Abort the active </i><b>event_loop()</b><i> immediately. </i><b></b> int  <b>event_loopexit</b> (const struct timeval *)<div style="height: 0.00em;">
&#160;</div>
<i>Exit the event loop after the specified time. </i> int  <b>event_once</b> (<b>evutil_socket_t</b>, short, void(*)(<b>evutil_socket_t</b>, short, void *), void *, const struct timeval *)<div style="height: 0.00em;">
&#160;</div>
<i>Schedule a one-time event to occur. </i> int  <b>event_priority_init</b> (int)<div style="height: 0.00em;">
&#160;</div>
<i>Set the number of different event priorities. </i> void  <b>event_set</b> (struct <b>event</b> *, <b>evutil_socket_t</b>, short, void(*)(<b>evutil_socket_t</b>, short, void *), void *)<div style="height: 0.00em;">
&#160;</div>
<i>Prepare an event structure to be added. </i><br>
</div>
</div>
<div class="section">
<h1>Detailed Description</h1> Potentially non-threadsafe versions of the functions in  <b>event.h</b>: provided only for backwards compatibility.<div style="height: 1.00em;">
&#160;</div>
In the oldest versions of Libevent, <b>event_base</b> was not a first-class structure. Instead, there was a single event base that every function manipulated. Later, when separate event bases were added, the old functions that didn't take an <b>event_base</b> argument needed to work by manipulating the 'current' event base. This could lead to thread-safety issues, and obscure, hard-to-diagnose bugs.<p>
<b>Deprecated</b><div style="margin-left: 4.00ex;">
All functions in this file are by definition deprecated.</div>
<p>
<div style="height: 1.00em;">
&#160;</div>
</div>
<div class="section">
<h1>Function Documentation</h1><div class="subsection">
<h2>int event_dispatch (void)</h2> Loop to process events. Like  <b>event_base_dispatch()</b>, but uses the 'current' base.<p>
<b>Deprecated</b><div style="margin-left: 4.00ex;">
This function is deprecated because it is easily confused by multiple calls to <b>event_init()</b>, and because it is not safe for multithreaded use. The replacement is <b>event_base_dispatch()</b>.</div>
<p>
<b>See also:</b><div style="margin-left: 4.00ex;">
<b>event_base_dispatch()</b>, <b>event_init()</b></div>
<p>
<div style="height: 1.00em;">
&#160;</div>
</div>
<div class="subsection">
<h2>const char* event_get_method (void)</h2> Get the kernel event notification mechanism used by Libevent.<p>
<b>Deprecated</b><div style="margin-left: 4.00ex;">
This function is obsolete, and has been replaced by <b>event_base_get_method()</b>. Its use is deprecated because it relies on the 'current' base configured by <b>event_init()</b>.</div>
<p>
<b>See also:</b><div style="margin-left: 4.00ex;">
<b>event_base_get_method()</b></div>
<p>
<div style="height: 1.00em;">
&#160;</div>
</div>
<div class="subsection">
<h2>struct <b>event_base</b>* event_init (void)</h2> Initialize the event API. The event API needs to be initialized with  <b>event_init()</b> before it can be used. Sets the global current base that gets used for events that have no base associated with them.<p>
<b>Deprecated</b><div style="margin-left: 4.00ex;">
This function is deprecated because it replaces the 'current' <b>event_base</b>, and is totally unsafe for multithreaded use. The replacement is <b>event_base_new()</b>.</div>
<p>
<b>See also:</b><div style="margin-left: 4.00ex;">
<b>event_base_set()</b>, <b>event_base_new()</b></div>
<p>
<div style="height: 1.00em;">
&#160;</div>
</div>
<div class="subsection">
<h2>int event_loop (int)</h2> Handle events. This function behaves like  <b>event_base_loop()</b>, but uses the 'current' base<p>
<b>Deprecated</b><div style="margin-left: 4.00ex;">
This function is deprecated because it uses the event base from the last call to event_init, and is therefore not safe for multithreaded use. The replacement is <b>event_base_loop()</b>.</div>
<p>
<b>See also:</b><div style="margin-left: 4.00ex;">
<b>event_base_loop()</b>, <b>event_init()</b></div>
<p>
<div style="height: 1.00em;">
&#160;</div>
</div>
<div class="subsection">
<h2>int event_loopbreak (void)</h2> Abort the active  <b>event_loop()</b> immediately. This function behaves like event_base_loopbreakt(), except that it uses the 'current' base.<p>
<b>Deprecated</b><div style="margin-left: 4.00ex;">
This function is deprecated because it uses the event base from the last call to event_init, and is therefore not safe for multithreaded use. The replacement is <b>event_base_loopbreak()</b>.</div>
<p>
<b>See also:</b><div style="margin-left: 4.00ex;">
<b>event_base_loopbreak()</b>, <b>event_init()</b></div>
<p>
<div style="height: 1.00em;">
&#160;</div>
</div>
<div class="subsection">
<h2>int event_loopexit (const struct timeval *)</h2> Exit the event loop after the specified time. This function behaves like  <b>event_base_loopexit()</b>, except that it uses the 'current' base.<p>
<b>Deprecated</b><div style="margin-left: 4.00ex;">
This function is deprecated because it uses the event base from the last call to event_init, and is therefore not safe for multithreaded use. The replacement is <b>event_base_loopexit()</b>.</div>
<p>
<b>See also:</b><div style="margin-left: 4.00ex;">
<b>event_init</b>, <b>event_base_loopexit()</b></div>
<p>
<div style="height: 1.00em;">
&#160;</div>
</div>
<div class="subsection">
<h2>int event_once (<b>evutil_socket_t</b>, short, void(*)(<b>evutil_socket_t</b>, short, void *), void *, const struct timeval *)</h2> Schedule a one-time event to occur.<p>
<b>Deprecated</b><div style="margin-left: 4.00ex;">
This function is obsolete, and has been replaced by <b>event_base_once()</b>. Its use is deprecated because it relies on the 'current' base configured by <b>event_init()</b>.</div>
<p>
<b>See also:</b><div style="margin-left: 4.00ex;">
<b>event_base_once()</b></div>
<p>
<div style="height: 1.00em;">
&#160;</div>
</div>
<div class="subsection">
<h2>int event_priority_init (int)</h2> Set the number of different event priorities.<p>
<b>Deprecated</b><div style="margin-left: 4.00ex;">
This function is deprecated because it is easily confused by multiple calls to <b>event_init()</b>, and because it is not safe for multithreaded use. The replacement is <b>event_base_priority_init()</b>.</div>
<p>
<b>See also:</b><div style="margin-left: 4.00ex;">
<b>event_base_priority_init()</b></div>
<p>
<div style="height: 1.00em;">
&#160;</div>
</div>
<div class="subsection">
<h2>void event_set (struct <b>event</b> *, <b>evutil_socket_t</b>, short, void(*)(<b>evutil_socket_t</b>, short, void *), void *)</h2> Prepare an event structure to be added.<p>
<b>Deprecated</b><div style="margin-left: 4.00ex;">
<b>event_set()</b> is not recommended for new code, because it requires a subsequent call to <b>event_base_set()</b> to be safe under most circumstances. Use <b>event_assign()</b> or <b>event_new()</b> instead.</div>
<p>
<div style="height: 1.00em;">
&#160;</div>
</div>
</div>
<div class="section">
<h1>Author</h1> Generated automatically by Doxygen for libevent from the source code.</div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tr>
<td class="foot-date">
Tue Jan 27 2015</td>
<td class="foot-os" align="right">
libevent</td>
</tr>
</table>
</div>
</body>
</html>

