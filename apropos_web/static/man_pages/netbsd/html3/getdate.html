<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/../4/strict.dtd">
>
<head>
<meta http-equiv="Content-Type" content="te../; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="../style.css" type="text/css" media="all">
<title>
GETDATE(3)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
GETDATE(3)</td>
<td class="head-vol" align="center">
Library Functions Manual</td>
<td class="head-rtitle" align="right">
GETDATE(3)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">getdate</b>, <b class="name">getdate_err</b> &#8212; <span class="desc">convert user format date and time</span></div>
<div class="section">
<h1 id="x4c494252415259">LIBRARY</h1> <span class="lib">Standard C Library (libc, &#45;lc)</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="includes">#include &lt;<a class="link-includes">time.h</a>&gt;</b><p>
<i class="ftype">struct tm *</i><br>
<b class="fname">getdate</b>(<i class="farg">const char *str</i>);<p>
<span class="type">extern int getdate_err</span>;</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> The <b class="fname">getdate</b>() function converts a date or time character string pointed to by <i class="farg">str</i> into a static <span class="type">tm</span> structure described in <a class="link-man" href="../3/tm">tm(3)</a>.<p>
The input string is parsed and interpreted using templates. A text file containing templates is specified by the environment variable <span class="env">DATEMSK</span>. This should contain the full path to the template file. Lines in the template file represent acceptable date and/or time conversion specifications. These specifications are similar to those given for <a class="link-man" href="../3/strptime">strptime(3)</a>. The first line in the template file that matches the input string is used to interpret and convert to internal time format.<div class="subsection">
<h2 id="x496e7465726e616c20466f726d617420436f6e76657273696f6e">Internal Format Conversion</h2> The following rules apply to converting the input into the internal format.<ul style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 5.00ex;" class="list list-bul">
<li class="list-bul" style="margin-top: 1.00em;">
If only the weekday is given, the conversion assumes today when the weekday matches today or the first future matching weekday.</li>
<li class="list-bul" style="margin-top: 1.00em;">
If only the month and no year is given, the conversion assumes the current month when the month matches or the first future matching month. The first day of the month is assumed if no day is given.</li>
<li class="list-bul" style="margin-top: 1.00em;">
If only the year is given, the values of the <i class="farg">tm_mon</i>, <i class="farg">tm_mday</i>, <i class="farg">tm_wday</i>, <i class="farg">tm_yday</i>, and <i class="farg">tm_isdst</i> members of the returned <span class="type">struct tm</span> are unspecified.</li>
<li class="list-bul" style="margin-top: 1.00em;">
If the century is given, but the year within the century is not given, the conversion assumes the current year.</li>
<li class="list-bul" style="margin-top: 1.00em;">
If no hour, minute, and second are given, the conversion assumes the current hour, minute, and second.</li>
<li class="list-bul" style="margin-top: 1.00em;">
If no date is given, the conversion assumes today when the given hour is greater than the current hour and tomorrow when the given hour is less.</li>
<li class="list-bul" style="margin-top: 1.00em;">
If <b class="flag">%Z</b> is being scanned, then the broken-down time is based on the the current time of the matched timezone and not the current runtime environment timezone.</li>
</ul>
</div>
</div>
<div class="section">
<h1 id="x52455455524e2056414c554553">RETURN VALUES</h1> If successful, the <b class="fname">getdate</b>() function returns a pointer to a static <span class="type">tm</span> structure containing the broken-down time. Otherwise, a null pointer is returned and <b class="var">getdate_err</b> is set to indicate the error.<p>
The variable <b class="var">getdate_err</b> can have the following values:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
1</dt>
<dd class="list-tag" style="margin-left: 3.00ex;">
<span class="env">DATEMSK</span> environment variable is null or undefined.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
2</dt>
<dd class="list-tag" style="margin-left: 3.00ex;">
Cannot open the template file for reading.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
3</dt>
<dd class="list-tag" style="margin-left: 3.00ex;">
Get file status failed for template file.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
4</dt>
<dd class="list-tag" style="margin-left: 3.00ex;">
Template file is not a regular file.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
5</dt>
<dd class="list-tag" style="margin-left: 3.00ex;">
Encountered an error while reading the template file.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
6</dt>
<dd class="list-tag" style="margin-left: 3.00ex;">
Cannot allocate memory.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
7</dt>
<dd class="list-tag" style="margin-left: 3.00ex;">
Input string does not match any line in the template file.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
8</dt>
<dd class="list-tag" style="margin-left: 3.00ex;">
Input string is invalid (for example, February 31) or could not be represented in a <span class="type">time_t</span>.</dd>
</dl>
</div>
<div class="section">
<h1 id="x454e5649524f4e4d454e54">ENVIRONMENT</h1><dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">DATEMSK</span></dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
The full path to the text file containing the templates for acceptable date and/or time conversions.</dd>
</dl>
</div>
<div class="section">
<h1 id="x46494c4553">FILES</h1><dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="file">/usr/share/examples/getdate/datemsk.template</i></dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
An example template file that could be specified via the <span class="env">DATEMSK</span> environment variable.</dd>
</dl>
</div>
<div class="section">
<h1 id="x4558414d504c4553">EXAMPLES</h1> The following example shows the possible contents of a template file:<p>
<pre style="margin-left: 5.00ex;" class="lit display">
%m 
%A %B %d, %Y, %H:%M:%S 
%A 
%B 
%m/%d/%y %I %p 
%d,%m,%Y %H:%M 
at %A the %dst of %B in %Y 
run job at %I %p, %B %dnd 
%A den %d. %B %Y %H.%M Uhr</pre>
<p>
The following are examples of valid input for the above template:<p>
<pre style="margin-left: 5.00ex;" class="lit display">
10/1/87 4 PM 
Friday 
Friday September 18, 1987, 10:30:30 
24,9,1986 10:30 
at monday the 1st of december in 1986 
run job at 3 PM, december 2nd</pre>
<p>
The following examples show how local data and time specification can be defined in the template.<table style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 5.00ex;" class="list list-col">
<col style="width: 19.00ex;">
<col style="min-width: 20.00ex;">
<tbody>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
<span class="symb">Input String</span></td>
<td class="list-col" style="margin-top: 1.00em;">
<span class="symb">Line in Template</span></td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
<code class="lit">11/27/86</code></td>
<td class="list-col" style="margin-top: 1.00em;">
<code class="lit">%m/%d/%y</code></td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
<code class="lit">27.11.86</code></td>
<td class="list-col" style="margin-top: 1.00em;">
<code class="lit">%d.%m.%y</code></td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
<code class="lit">86-11-27</code></td>
<td class="list-col" style="margin-top: 1.00em;">
<code class="lit">%y-%m-%d</code></td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
<code class="lit">Friday 12:00:00</code></td>
<td class="list-col" style="margin-top: 1.00em;">
<code class="lit">%A %H:%M:%S</code></td>
</tr>
</tbody>
</table>
<p>
The following examples illustrate the Internal Format Conversion rules given that the current date is <code class="lit">Mon Sep 22 12:19:47 EDT 1986</code> and the <span class="env">LC_TIME</span> environment variable is set to the default C locale.<table style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 5.00ex;" class="list list-col">
<col style="width: 16.00ex;">
<col style="width: 20.00ex;">
<col style="min-width: 8.00ex;">
<tbody>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
<span class="symb">Input String</span></td>
<td class="list-col" style="margin-top: 1.00em;">
<span class="symb">Line in Template</span></td>
<td class="list-col" style="margin-top: 1.00em;">
<span class="symb">Date</span></td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
<code class="lit">Mon</code></td>
<td class="list-col" style="margin-top: 1.00em;">
<code class="lit">%a</code></td>
<td class="list-col" style="margin-top: 1.00em;">
<code class="lit">Mon Sep 22 12:19:47 EDT 1986</code></td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
<code class="lit">Sun</code></td>
<td class="list-col" style="margin-top: 1.00em;">
<code class="lit">%a</code></td>
<td class="list-col" style="margin-top: 1.00em;">
<code class="lit">Sun Sep 28 12:19:47 EDT 1986</code></td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
<code class="lit">Fri</code></td>
<td class="list-col" style="margin-top: 1.00em;">
<code class="lit">%a</code></td>
<td class="list-col" style="margin-top: 1.00em;">
<code class="lit">Fri Sep 26 12:19:47 EDT 1986</code></td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
<code class="lit">September</code></td>
<td class="list-col" style="margin-top: 1.00em;">
<code class="lit">%B</code></td>
<td class="list-col" style="margin-top: 1.00em;">
<code class="lit">Mon Sep  1 12:19:47 EDT 1986</code></td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
<code class="lit">January</code></td>
<td class="list-col" style="margin-top: 1.00em;">
<code class="lit">%B</code></td>
<td class="list-col" style="margin-top: 1.00em;">
<code class="lit">Thu Jan  1 12:19:47 EST 1987</code></td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
<code class="lit">December</code></td>
<td class="list-col" style="margin-top: 1.00em;">
<code class="lit">%B</code></td>
<td class="list-col" style="margin-top: 1.00em;">
<code class="lit">Mon Dec  1 12:19:47 EST 1986</code></td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
<code class="lit">Sep Mon</code></td>
<td class="list-col" style="margin-top: 1.00em;">
<code class="lit">%b %a</code></td>
<td class="list-col" style="margin-top: 1.00em;">
<code class="lit">Mon Sep  1 12:19:47 EDT 1986</code></td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
<code class="lit">Jan Fri</code></td>
<td class="list-col" style="margin-top: 1.00em;">
<code class="lit">%b %a</code></td>
<td class="list-col" style="margin-top: 1.00em;">
<code class="lit">Fri Jan  2 12:19:47 EST 1987</code></td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
<code class="lit">Dec Mon</code></td>
<td class="list-col" style="margin-top: 1.00em;">
<code class="lit">%b %a</code></td>
<td class="list-col" style="margin-top: 1.00em;">
<code class="lit">Mon Dec  1 12:19:47 EST 1986</code></td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
<code class="lit">Jan Wed 1989</code></td>
<td class="list-col" style="margin-top: 1.00em;">
<code class="lit">%b %a %Y</code></td>
<td class="list-col" style="margin-top: 1.00em;">
<code class="lit">Wed Jan  4 12:19:47 EST 1989</code></td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
<code class="lit">Fri 9</code></td>
<td class="list-col" style="margin-top: 1.00em;">
<code class="lit">%a %H</code></td>
<td class="list-col" style="margin-top: 1.00em;">
<code class="lit">Fri Sep 26 09:00:00 EDT 1986</code></td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
<code class="lit">Feb 10:30</code></td>
<td class="list-col" style="margin-top: 1.00em;">
<code class="lit">%b %H:%S</code></td>
<td class="list-col" style="margin-top: 1.00em;">
<code class="lit">Sun Feb  1 10:00:30 EST 1987</code></td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
<code class="lit">10:30</code></td>
<td class="list-col" style="margin-top: 1.00em;">
<code class="lit">%H:%M</code></td>
<td class="list-col" style="margin-top: 1.00em;">
<code class="lit">Tue Sep 23 10:30:00 EDT 1986</code></td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
<code class="lit">13:30</code></td>
<td class="list-col" style="margin-top: 1.00em;">
<code class="lit">%H:%M</code></td>
<td class="list-col" style="margin-top: 1.00em;">
<code class="lit">Tue Sep 22 13:30:00 EDT 1986</code></td>
</tr>
</tbody>
</table>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../3/ctime">ctime(3)</a>, <a class="link-man" href="../3/localtime">localtime(3)</a>, <a class="link-man" href="../3/mktime">mktime(3)</a>, <a class="link-man" href="../3/strftime">strftime(3)</a>, <a class="link-man" href="../3/strptime">strptime(3)</a>, <a class="link-man" href="../3/time">time(3)</a></div>
<div class="section">
<h1 id="x5354414e4441524453">STANDARDS</h1> The <b class="fname">getdate</b>() function conforms to IEEE Std 1003.1-2001 (&#8220;POSIX.1&#8221;).</div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> The <b class="name">getdate</b> function appeared in AT&amp;T System&#160;V Release&#160;4 UNIX.</div>
<div class="section">
<h1 id="x42554753">BUGS</h1> The <b class="name">getdate</b> interface is inherently unsafe for multi-threaded programs or libraries, since it returns a pointer to a static variable and uses a global state variable.</div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
December 14, 2012</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
<>

