<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/../4/strict.dtd">
>
<head>
<meta http-equiv="Content-Type" content="te../; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="../style.css" type="text/css" media="all">
<title>
KRB5_GET_CREDENTIALS(3)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
KRB5_GET_CREDENTIALS(3)</td>
<td class="head-vol" align="center">
Library Functions Manual</td>
<td class="head-rtitle" align="right">
KRB5_GET_CREDENTIALS(3)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">krb5_get_credentials</b>, <b class="name">krb5_get_credentials_with_flags</b>, <b class="name">krb5_get_kdc_cred</b>, <b class="name">krb5_get_renewed_creds</b> &#8212; <span class="desc">get credentials from the KDC using krbtgt</span></div>
<div class="section">
<h1 id="x4c494252415259">LIBRARY</h1> Kerberos 5 Library (libkrb5, -lkrb5)</div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="includes">#include &lt;<a class="link-includes">krb5/krb5.h</a>&gt;</b><p>
<i class="ftype">krb5_error_code</i><br>
<b class="fname">krb5_get_credentials</b>(<i class="farg">krb5_context context</i>, <i class="farg">krb5_flags options</i>, <i class="farg">krb5_ccache ccache</i>, <i class="farg">krb5_creds *in_creds</i>, <i class="farg">krb5_creds **out_creds</i>);<p>
<i class="ftype">krb5_error_code</i><br>
<b class="fname">krb5_get_credentials_with_flags</b>(<i class="farg">krb5_context context</i>, <i class="farg">krb5_flags options</i>, <i class="farg">krb5_kdc_flags flags</i>, <i class="farg">krb5_ccache ccache</i>, <i class="farg">krb5_creds *in_creds</i>, <i class="farg">krb5_creds **out_creds</i>);<p>
<i class="ftype">krb5_error_code</i><br>
<b class="fname">krb5_get_kdc_cred</b>(<i class="farg">krb5_context context</i>, <i class="farg">krb5_ccache id</i>, <i class="farg">krb5_kdc_flags flags</i>, <i class="farg">krb5_addresses *addresses</i>, <i class="farg">Ticket  *second_ticket</i>, <i class="farg">krb5_creds *in_creds</i>, <i class="farg">krb5_creds **out_creds</i>);<p>
<i class="ftype">krb5_error_code</i><br>
<b class="fname">krb5_get_renewed_creds</b>(<i class="farg">krb5_context context</i>, <i class="farg">krb5_creds *creds</i>, <i class="farg">krb5_const_principal client</i>, <i class="farg">krb5_ccache ccache</i>, <i class="farg">const char *in_tkt_service</i>);</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> <b class="fname">krb5_get_credentials_with_flags</b>() get credentials specified by <i class="farg">in_creds-&gt;server</i> and <i class="farg">in_creds-&gt;client</i> (the rest of the <i class="farg">in_creds</i> structure is ignored) by first looking in the <i class="farg">ccache</i> and if doesn't exists or is expired, fetch the credential from the KDC using the krbtgt in <i class="farg">ccache</i>. The credential is returned in <i class="farg">out_creds</i> and should be freed using the function <b class="fname">krb5_free_creds</b>().<p>
Valid flags to pass into <i class="farg">options</i> argument are:<p>
<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
KRB5_GC_CACHED</dt>
<dd class="list-tag" style="margin-left: 18.00ex;">
Only check the <i class="farg">ccache</i>, don't got out on network to fetch credential.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
KRB5_GC_USER_USER</dt>
<dd class="list-tag" style="margin-left: 18.00ex;">
Request a user to user ticket. This option doesn't store the resulting user to user credential in the <i class="farg">ccache</i>.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
KRB5_GC_EXPIRED_OK</dt>
<dd class="list-tag" style="margin-left: 18.00ex;">
returns the credential even if it is expired, default behavior is trying to refetch the credential from the KDC.</dd>
</dl>
<p>
<i class="farg">Flags</i> are KDCOptions, note the caller must fill in the bit-field and not use the integer associated structure.<p>
<b class="fname">krb5_get_credentials</b>() works the same way as <b class="fname">krb5_get_credentials_with_flags</b>() except that the <i class="farg">flags</i> field is missing.<p>
<b class="fname">krb5_get_kdc_cred</b>() does the same as the functions above, but the caller must fill in all the information andits closer to the wire protocol.<p>
<b class="fname">krb5_get_renewed_creds</b>() renews a credential given by <i class="farg">in_tkt_service</i> (if <span class="define">NULL</span> the default <code class="lit">krbtgt</code>) using the credential cache <i class="farg">ccache</i>. The result is stored in <i class="farg">creds</i> and should be freed using <i class="farg">krb5_free_creds</i>.</div>
<div class="section">
<h1 id="x4558414d504c4553">EXAMPLES</h1> Here is a example function that get a credential from a credential cache <i class="farg">id</i> or the KDC and returns it to the caller.<p>
<pre style="margin-left: 0.00ex;" class="lit display">
#include &lt;krb5/krb5.h&gt; 
 
int 
getcred(krb5_context context, krb5_ccache id, krb5_creds **creds) 
{ 
    krb5_error_code ret; 
    krb5_creds in; 
 
    ret = krb5_parse_name(context, "client@EXAMPLE.COM", 
			  &amp;in.client); 
    if (ret) 
	krb5_err(context, 1, ret, "krb5_parse_name"); 
 
    ret = krb5_parse_name(context, "host/server.example.com@EXAMPLE.COM", 
			  &amp;in.server); 
    if (ret) 
	krb5_err(context, 1, ret, "krb5_parse_name"); 
 
    ret = krb5_get_credentials(context, 0, id, &amp;in, creds); 
    if (ret) 
	krb5_err(context, 1, ret, "krb5_get_credentials"); 
 
    return 0; 
}</pre>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../3/krb5">krb5(3)</a>, <a class="link-man" href="../3/krb5_get_forwarded_creds">krb5_get_forwarded_creds(3)</a>, <a class="link-man" href="../5/krb5.conf">krb5.conf(5)</a></div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
July 26, 2004</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
<>

