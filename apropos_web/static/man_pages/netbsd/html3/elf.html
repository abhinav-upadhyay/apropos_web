<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="../style.css" type="text/css" media="all">
<title>
ELF(3)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
ELF(3)</td>
<td class="head-vol" align="center">
Library Functions Manual</td>
<td class="head-rtitle" align="right">
ELF(3)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">elf</b> &#8212; <span class="desc">API for manipulating ELF objects</span></div>
<div class="section">
<h1 id="x4c494252415259">LIBRARY</h1> <span class="lib">ELF Access Library (libelf, &#45;lelf)</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="includes">#include &lt;<a class="link-includes">libelf.h</a>&gt;</b></div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> The <span class="lib">ELF Access Library (libelf, &#45;lelf)</span> provides functions that allow an application to read and manipulate ELF object files, and to read <a class="link-man" href="../1/ar">ar(1)</a> archives. The library allows the manipulation of ELF objects in a byte ordering and word-size independent way, allowing an application to read and create ELF objects for 32 and 64 bit architectures and for little- and big-endian machines. The library is capable of processing ELF objects that use extended section numbering.<p>
This manual page serves to provide an overview of the functionality in the ELF library. Further information may found in the manual pages for individual <a class="link-man" href="../3/ELF">ELF(3)</a> functions that comprise the library.<div class="subsection">
<h2 id="x454c4620436f6e6365707473">ELF Concepts</h2> As described in <a class="link-man" href="../5/elf">elf(5)</a>, ELF files contain several data structures that are laid out in a specific way. ELF files begin with an &#8220;Executable Header&#8221;, and may contain an optional &#8220;Program Header Table&#8221;, and optional data in the form of ELF &#8220;sections&#8221;. A &#8220;Section Header Table&#8221; describes the content of the data in these sections.<p>
ELF objects have an associated &#8220;ELF class&#8221; which denotes the natural machine word size for the architecture the object is associated with. Objects for 32 bit architectures have an ELF class of <span class="define">ELFCLASS32</span>. Objects for 64 bit architectures have an ELF class of <span class="define">ELFCLASS64</span>.<p>
ELF objects also have an associated &#8220;endianness&#8221; which denotes the endianness of the machine architecture associated with the object. This may be <span class="define">ELFDATA2LSB</span> for little-endian architectures and <span class="define">ELFDATA2MSB</span> for big-endian architectures.<p>
ELF objects are also associated with an API version number. This version number determines the layout of the individual components of an ELF file and the semantics associated with these.</div>
<div class="subsection">
<h2 id="x4461746120526570726573656e746174696f6e20416e64205472616e736c6174696f6e">Data Representation And Translation</h2> The <a class="link-man" href="../3/ELF">ELF(3)</a> library distinguishes between &#8220;native&#8221; representations of ELF data structures and their &#8220;file&#8221; representations.<p>
An application would work with ELF data in its &#8220;native&#8221; representation, i.e., using the native byteorder and alignment mandated by the processor the application is running on. The &#8220;file&#8221; representation of the same data could use a different byte ordering and follow different constraints on object alignment than these native constraints.<p>
Accordingly, the <a class="link-man" href="../3/ELF">ELF(3)</a> library offers translation facilities (<a class="link-man" href="../3/elf32_xlatetof">elf32_xlatetof(3)</a>, <a class="link-man" href="../3/elf32_xlatetom">elf32_xlatetom(3)</a>, <a class="link-man" href="../3/elf64_xlatetof">elf64_xlatetof(3)</a> and <a class="link-man" href="../3/elf64_xlatetom">elf64_xlatetom(3)</a>) to and from these representations and also provides higher-level APIs that retrieve and store data from the ELF object in a transparent manner.</div>
<div class="subsection">
<h2 id="x4c69627261727920576f726b696e672056657273696f6e">Library Working Version</h2> Conceptually, there are three version numbers associated with an application using the ELF library to manipulate ELF objects:<ul style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 5.00ex;" class="list list-bul">
<li class="list-bul" style="margin-top: 0.00em;">
The ELF version that the application was compiled against. This version determines the ABI expected by the application.</li>
<li class="list-bul" style="margin-top: 0.00em;">
The ELF version of the ELF object being manipulated by the application through the ELF library.</li>
<li class="list-bul" style="margin-top: 0.00em;">
The ELF version (or set of versions) supported by the ELF library itself.</li>
</ul>
<p>
In order to facilitate working with ELF objects of differing versions, the ELF library requires the application to call the <b class="fname">elf_version</b>() function before invoking many of its operations, in order to inform the library of the application's desired working version.<p>
In the current implementation, all three versions have to be <span class="define">EV_CURRENT</span>.</div>
<div class="subsection">
<h2 id="x4e616d65737061636520757365">Namespace use</h2> The ELF library uses the following prefixes:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">elf_</span></dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
Used for class-independent functions.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">elf32_</span></dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
Used for functions working with 32 bit ELF objects.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">elf64_</span></dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
Used for functions working with 64 bit ELF objects.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">Elf_</span></dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
Used for class-independent data types.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">ELF_C_</span></dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
Used for command values used in a few functions. These symbols are defined as members of the <span class="define">Elf_Cmd</span> enumeration.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">ELF_E_</span></dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
Used for error numbers.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">ELF_F_</span></dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
Used for flags.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">ELF_K_</span></dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
These constants define the kind of file associated with an ELF descriptor. See <a class="link-man" href="../3/elf_kind">elf_kind(3)</a>. The symbols are defined by the <span class="type">Elf_Kind</span> enumeration.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">ELF_T_</span></dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
These values are defined by the <span class="type">Elf_Type</span> enumeration, and denote the types of ELF data structures that can be present in an ELF object.</dd>
</dl>
<p>
In addition, the library uses symbols with prefixes <span class="define">_ELF</span> and <span class="define">_libelf</span> for its internal use.</div>
<div class="subsection">
<h2 id="x44657363726970746f7273">Descriptors</h2> Applications communicate with the library using descriptors. These are:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="type">Elf</span></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
An <span class="type">Elf</span> descriptor represents an ELF object or an <a class="link-man" href="../1/ar">ar(1)</a> archive. It is allocated using one of the <b class="fname">elf_begin</b>() or <b class="fname">elf_memory</b>() functions. An <span class="type">Elf</span> descriptor can be used to read and write data to an ELF file. An <span class="type">Elf</span> descriptor can be associated with zero or more <span class="type">Elf_Scn</span> section descriptors.<p>
Given an ELF descriptor, the application may retrieve the ELF object's class-dependent &#8220;Executable Header&#8221; structures using the <b class="fname">elf32_getehdr</b>() or <b class="fname">elf64_getehdr</b>() functions. A new Ehdr structure may be allocated using the <b class="fname">elf64_newehdr</b>() or <b class="fname">elf64_newehdr</b>() functions.<p>
The &#8220;Program Header Table&#8221; associated with an ELF descriptor may be allocated using the <b class="fname">elf32_getphdr</b>() or <b class="fname">elf64_getphdr</b>() functions. A new program header table may be allocated or an existing table resized using the <b class="fname">elf32_newphdr</b>() or <b class="fname">elf64_newphdr</b>() functions.<p>
The <span class="type">Elf</span> structure is opaque and has no members visible to the application.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="type">Elf_Data</span></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
An <span class="type">Elf_Data</span> data structure describes an individual chunk of a ELF file as represented in memory. It has the following application-visible members:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
<span class="type">uint64_t d_align</span></dt>
<dd class="list-tag" style="margin-left: 26.00ex;">
The in-file alignment of the data buffer within its containing ELF section. This value must be non-zero and a power of two.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<span class="type">void *d_buf</span></dt>
<dd class="list-tag" style="margin-left: 26.00ex;">
A pointer to data in memory.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<span class="type">uint64_t d_off</span></dt>
<dd class="list-tag" style="margin-left: 26.00ex;">
The offset within the containing section where this descriptor's data would be placed. This field will be computed by the library unless the application requests full control of the ELF object's layout.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<span class="type">uint64_t d_size</span></dt>
<dd class="list-tag" style="margin-left: 26.00ex;">
The number of bytes of data in this descriptor.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<span class="type">Elf_Type d_type</span></dt>
<dd class="list-tag" style="margin-left: 26.00ex;">
The ELF type (see below) of the data in this descriptor.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<span class="type">unsigned int d_version</span></dt>
<dd class="list-tag" style="margin-left: 26.00ex;">
The operating version for the data in this buffer.</dd>
</dl>
<p>
<span class="type">Elf_Data</span> descriptors are usually associated with <span class="type">Elf_Scn</span> descriptors. Existing data descriptors associated with an ELF section may be structures are retrieved using the <b class="fname">elf_getdata</b>() and <b class="fname">elf_rawdata</b>() functions. The <b class="fname">elf_newdata</b>() function may be used to attach new data descriptors to an ELF section.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="type">Elf_Scn</span></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
<span class="type">Elf_Scn</span> descriptors represent a section in an ELF object.<p>
They are retrieved using the <b class="fname">elf_getscn</b>() function. An application may iterate through the existing sections of an ELF object using the <b class="fname">elf_nextscn</b>() function. New sections may be allocated using the <b class="fname">elf_newscn</b>() function.<p>
The <span class="type">Elf_Scn</span> descriptor is opaque and contains no application modifiable fields.</dd>
</dl>
</div>
<div class="subsection">
<h2 id="x537570706f7274656420456c66205479706573">Supported Elf Types</h2> The following ELF datatypes are supported by the library.<p>
<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
<span class="define">ELF_T_ADDR</span></dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
Machine addresses.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<span class="define">ELF_T_BYTE</span></dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
Byte data. The library will not attempt to translate byte data.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<span class="define">ELF_T_CAP</span></dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
Software and hardware capability records.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<span class="define">ELF_T_DYN</span></dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
Records used in a section of type <span class="define">SHT_DYNAMIC</span>.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<span class="define">ELF_T_EHDR</span></dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
ELF executable header.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<span class="define">ELF_T_GNUHASH</span></dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
GNU-style hash tables.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<span class="define">ELF_T_HALF</span></dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
16-bit unsigned words.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<span class="define">ELF_T_LWORD</span></dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
64 bit unsigned words.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<span class="define">ELF_T_MOVE</span></dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
ELF Move records.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<span class="define">ELF_T_NOTE</span></dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
ELF Note structures.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<span class="define">ELF_T_OFF</span></dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
File offsets.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<span class="define">ELF_T_PHDR</span></dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
ELF program header table entries.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<span class="define">ELF_T_REL</span></dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
ELF relocation entries.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<span class="define">ELF_T_RELA</span></dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
ELF relocation entries with addends.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<span class="define">ELF_T_SHDR</span></dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
ELF section header entries.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<span class="define">ELF_T_SWORD</span></dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
Signed 32-bit words.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<span class="define">ELF_T_SXWORD</span></dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
Signed 64-bit words.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<span class="define">ELF_T_SYMINFO</span></dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
ELF symbol information.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<span class="define">ELF_T_SYM</span></dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
ELF symbol table entries.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<span class="define">ELF_T_VDEF</span></dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
Symbol version definition records.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<span class="define">ELF_T_VNEED</span></dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
Symbol version requirement records.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<span class="define">ELF_T_WORD</span></dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
Unsigned 32-bit words.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<span class="define">ELF_T_XWORD</span></dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
Unsigned 64-bit words.</dd>
</dl>
<p>
The symbol <span class="define">ELF_T_NUM</span> denotes the number of Elf types known to the library.<p>
The following table shows the mapping between ELF section types defined in <a class="link-man" href="../5/elf">elf(5)</a> and the types supported by the library.<table style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-col">
<col style="width: 21.00ex;">
<col style="min-width: 17.00ex;">
<tbody>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
<span class="emph">Section Type</span></td>
<td class="list-col" style="margin-top: 1.00em;">
<span class="emph">Library Type</span></td>
<td class="list-col" style="margin-top: 1.00em;">
<span class="emph">Description</span></td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
<span class="define">SHT_DYNAMIC</span></td>
<td class="list-col" style="margin-top: 1.00em;">
<span class="define">ELF_T_DYN</span></td>
<td class="list-col" style="margin-top: 1.00em;">
&#8216;.dynamic&#8217; section entries.</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
<span class="define">SHT_DYNSYM</span></td>
<td class="list-col" style="margin-top: 1.00em;">
<span class="define">ELF_T_SYM</span></td>
<td class="list-col" style="margin-top: 1.00em;">
Symbols for dynamic linking.</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
<span class="define">SHT_FINI_ARRAY</span></td>
<td class="list-col" style="margin-top: 1.00em;">
<span class="define">ELF_T_ADDR</span></td>
<td class="list-col" style="margin-top: 1.00em;">
Termination function pointers.</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
<span class="define">SHT_GROUP</span></td>
<td class="list-col" style="margin-top: 1.00em;">
<span class="define">ELF_T_WORD</span></td>
<td class="list-col" style="margin-top: 1.00em;">
Section group marker.</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
<span class="define">SHT_HASH</span></td>
<td class="list-col" style="margin-top: 1.00em;">
<span class="define">ELF_T_HASH</span></td>
<td class="list-col" style="margin-top: 1.00em;">
Symbol hashes.</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
<span class="define">SHT_INIT_ARRAY</span></td>
<td class="list-col" style="margin-top: 1.00em;">
<span class="define">ELF_T_ADDR</span></td>
<td class="list-col" style="margin-top: 1.00em;">
Initialization function pointers.</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
<span class="define">SHT_NOBITS</span></td>
<td class="list-col" style="margin-top: 1.00em;">
<span class="define">ELF_T_BYTE</span></td>
<td class="list-col" style="margin-top: 1.00em;">
Empty sections. See <a class="link-man" href="../5/elf">elf(5)</a>.</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
<span class="define">SHT_NOTE</span></td>
<td class="list-col" style="margin-top: 1.00em;">
<span class="define">ELF_T_NOTE</span></td>
<td class="list-col" style="margin-top: 1.00em;">
ELF note records.</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
<span class="define">SHT_PREINIT_ARRAY</span></td>
<td class="list-col" style="margin-top: 1.00em;">
<span class="define">ELF_T_ADDR</span></td>
<td class="list-col" style="margin-top: 1.00em;">
Pre-initialization function pointers.</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
<span class="define">SHT_PROGBITS</span></td>
<td class="list-col" style="margin-top: 1.00em;">
<span class="define">ELF_T_BYTE</span></td>
<td class="list-col" style="margin-top: 1.00em;">
Machine code.</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
<span class="define">SHT_REL</span></td>
<td class="list-col" style="margin-top: 1.00em;">
<span class="define">ELF_T_REL</span></td>
<td class="list-col" style="margin-top: 1.00em;">
ELF relocation records.</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
<span class="define">SHT_RELA</span></td>
<td class="list-col" style="margin-top: 1.00em;">
<span class="define">ELF_T_RELA</span></td>
<td class="list-col" style="margin-top: 1.00em;">
Relocation records with addends.</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
<span class="define">SHT_STRTAB</span></td>
<td class="list-col" style="margin-top: 1.00em;">
<span class="define">ELF_T_BYTE</span></td>
<td class="list-col" style="margin-top: 1.00em;">
String tables.</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
<span class="define">SHT_SYMTAB</span></td>
<td class="list-col" style="margin-top: 1.00em;">
<span class="define">ELF_T_SYM</span></td>
<td class="list-col" style="margin-top: 1.00em;">
Symbol tables.</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
<span class="define">SHT_SYMTAB_SHNDX</span></td>
<td class="list-col" style="margin-top: 1.00em;">
<span class="define">ELF_T_WORD</span></td>
<td class="list-col" style="margin-top: 1.00em;">
Used with extended section numbering.</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
<span class="define">SHT_GNU_verdef</span></td>
<td class="list-col" style="margin-top: 1.00em;">
<span class="define">ELF_T_VDEF</span></td>
<td class="list-col" style="margin-top: 1.00em;">
Symbol version definitions.</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
<span class="define">SHT_GNU_verneed</span></td>
<td class="list-col" style="margin-top: 1.00em;">
<span class="define">ELF_T_VNEED</span></td>
<td class="list-col" style="margin-top: 1.00em;">
Symbol versioning requirements.</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
<span class="define">SHT_GNU_versym</span></td>
<td class="list-col" style="margin-top: 1.00em;">
<span class="define">ELF_T_HALF</span></td>
<td class="list-col" style="margin-top: 1.00em;">
Version symbols.</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
<span class="define">SHT_SUNW_move</span></td>
<td class="list-col" style="margin-top: 1.00em;">
<span class="define">ELF_T_MOVE</span></td>
<td class="list-col" style="margin-top: 1.00em;">
ELF move records.</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
<span class="define">SHT_SUNW_syminfo</span></td>
<td class="list-col" style="margin-top: 1.00em;">
<span class="define">ELF_T_SYMINFO</span></td>
<td class="list-col" style="margin-top: 1.00em;">
Additional symbol flags.</td>
</tr>
</tbody>
</table>
</div>
<div class="subsection">
<h2 id="x46756e6374696f6e616c2047726f7570696e67">Functional Grouping</h2> This section contains a brief overview of the available functionality in the ELF library. Each function listed here is described further in its own manual page.<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
Archive Access</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="fname">elf_getarsym</b>()</dt>
<dd class="list-tag" style="margin-left: 16.00ex;">
Retrieve the archive symbol table.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="fname">elf_getarhdr</b>()</dt>
<dd class="list-tag" style="margin-left: 16.00ex;">
Retrieve the archive header for an object.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="fname">elf_getbase</b>()</dt>
<dd class="list-tag" style="margin-left: 16.00ex;">
Retrieve the offset of a member inside an archive.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="fname">elf_next</b>()</dt>
<dd class="list-tag" style="margin-left: 16.00ex;">
Iterate through an <a class="link-man" href="../1/ar">ar(1)</a> archive.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="fname">elf_rand</b>()</dt>
<dd class="list-tag" style="margin-left: 16.00ex;">
Random access inside an <a class="link-man" href="../1/ar">ar(1)</a> archive.</dd>
</dl>
</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
Data Structures</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="fname">elf_getdata</b>()</dt>
<dd class="list-tag" style="margin-left: 16.00ex;">
Retrieve translated data for an ELF section.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="fname">elf_getscn</b>()</dt>
<dd class="list-tag" style="margin-left: 16.00ex;">
Retrieve the section descriptor for a named section.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="fname">elf_ndxscn</b>()</dt>
<dd class="list-tag" style="margin-left: 16.00ex;">
Retrieve the index for a section.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="fname">elf_newdata</b>()</dt>
<dd class="list-tag" style="margin-left: 16.00ex;">
Add a new <span class="type">Elf_Data</span> descriptor to an ELF section.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="fname">elf_newscn</b>()</dt>
<dd class="list-tag" style="margin-left: 16.00ex;">
Add a new section descriptor to an ELF descriptor.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="fname">elf_nextscn</b>()</dt>
<dd class="list-tag" style="margin-left: 16.00ex;">
Iterate through the sections in an ELF object.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="fname">elf_rawdata</b>()</dt>
<dd class="list-tag" style="margin-left: 16.00ex;">
Retrieve untranslated data for an ELF section.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="fname">elf_rawfile</b>()</dt>
<dd class="list-tag" style="margin-left: 16.00ex;">
Return a pointer to the untranslated file contents for an ELF object.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="fname">elf32_getehdr</b>(), <b class="fname">elf64_getehdr</b>()</dt>
<dd class="list-tag" style="margin-left: 16.00ex;">
Retrieve the Executable Header in an ELF object.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="fname">elf32_getphdr</b>(), <b class="fname">elf64_getphdr</b>()</dt>
<dd class="list-tag" style="margin-left: 16.00ex;">
Retrieve the Program Header Table in an ELF object.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="fname">elf32_getshdr</b>(), <b class="fname">elf64_getshdr</b>()</dt>
<dd class="list-tag" style="margin-left: 16.00ex;">
Retrieve the ELF section header associated with an <span class="type">Elf_Scn</span> descriptor.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="fname">elf32_newehdr</b>(), <b class="fname">elf64_newehdr</b>()</dt>
<dd class="list-tag" style="margin-left: 16.00ex;">
Allocate an Executable Header in an ELF object.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="fname">elf32_newphdr</b>(), <b class="fname">elf64_newphdr</b>()</dt>
<dd class="list-tag" style="margin-left: 16.00ex;">
Allocate or resize the Program Header Table in an ELF object.</dd>
</dl>
</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
Data Translation</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="fname">elf32_xlatetof</b>(), <b class="fname">elf64_xlatetof</b>()</dt>
<dd class="list-tag" style="margin-left: 16.00ex;">
Translate an ELF data structure from its native representation to its file representation.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="fname">elf32_xlatetom</b>(), <b class="fname">elf64_xlatetom</b>()</dt>
<dd class="list-tag" style="margin-left: 16.00ex;">
Translate an ELF data structure from its file representation to a native representation.</dd>
</dl>
</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
Error Reporting</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="fname">elf_errno</b>()</dt>
<dd class="list-tag" style="margin-left: 16.00ex;">
Retrieve the current error.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="fname">elf_errmsg</b>()</dt>
<dd class="list-tag" style="margin-left: 16.00ex;">
Retrieve a human readable description of the current error.</dd>
</dl>
</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
Initialization</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="fname">elf_begin</b>()</dt>
<dd class="list-tag" style="margin-left: 16.00ex;">
Opens an <a class="link-man" href="../1/ar">ar(1)</a> archive or ELF object given a file descriptor.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="fname">elf_end</b>()</dt>
<dd class="list-tag" style="margin-left: 16.00ex;">
Close an ELF descriptor and release all its resources.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="fname">elf_memory</b>()</dt>
<dd class="list-tag" style="margin-left: 16.00ex;">
Opens an <a class="link-man" href="../1/ar">ar(1)</a> archive or ELF object present in a memory arena.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="fname">elf_version</b>()</dt>
<dd class="list-tag" style="margin-left: 16.00ex;">
Sets the operating version.</dd>
</dl>
</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
IO Control</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="fname">elf_cntl</b>()</dt>
<dd class="list-tag" style="margin-left: 19.00ex;">
Manage the association between and ELF descriptor and its underlying file.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="fname">elf_flagdata</b>()</dt>
<dd class="list-tag" style="margin-left: 19.00ex;">
Mark an <span class="type">Elf_Data</span> descriptor as dirty.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="fname">elf_flagehdr</b>()</dt>
<dd class="list-tag" style="margin-left: 19.00ex;">
Mark the ELF Executable Header in an ELF descriptor as dirty.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="fname">elf_flagphdr</b>()</dt>
<dd class="list-tag" style="margin-left: 19.00ex;">
Mark the ELF Program Header Table in an ELF descriptor as dirty.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="fname">elf_flagscn</b>()</dt>
<dd class="list-tag" style="margin-left: 19.00ex;">
Mark an <span class="type">Elf_Scn</span> descriptor as dirty.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="fname">elf_flagshdr</b>()</dt>
<dd class="list-tag" style="margin-left: 19.00ex;">
Mark an ELF Section Header as dirty.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="fname">elf_setshstrndx</b>()</dt>
<dd class="list-tag" style="margin-left: 19.00ex;">
Set the index of the section name string table for the ELF object.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="fname">elf_update</b>()</dt>
<dd class="list-tag" style="margin-left: 19.00ex;">
Recompute ELF object layout and optionally write the modified object back to the underlying file.</dd>
</dl>
</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
Queries</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="fname">elf32_checksum</b>(), <b class="fname">elf64_checkum</b>()</dt>
<dd class="list-tag" style="margin-left: 19.00ex;">
Compute checksum of an ELF object.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="fname">elf_getident</b>()</dt>
<dd class="list-tag" style="margin-left: 19.00ex;">
Retrieve the identification bytes for an ELF object.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="fname">elf_getshnum</b>()</dt>
<dd class="list-tag" style="margin-left: 19.00ex;">
Retrieve the number of sections in an ELF object.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="fname">elf_getshstrndx</b>()</dt>
<dd class="list-tag" style="margin-left: 19.00ex;">
Retrieve the section index of the section name string table in an ELF object.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="fname">elf_hash</b>()</dt>
<dd class="list-tag" style="margin-left: 19.00ex;">
Compute the ELF hash value of a string.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="fname">elf_kind</b>()</dt>
<dd class="list-tag" style="margin-left: 19.00ex;">
Query the kind of object associated with an ELF descriptor.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="fname">elf32_fsize</b>(), <b class="fname">elf64_fsize</b>()</dt>
<dd class="list-tag" style="margin-left: 19.00ex;">
Return the size of the file representation of an ELF type.</dd>
</dl>
</dd>
</dl>
</div>
<div class="subsection">
<h2 id="x436f6e74726f6c6c696e6720454c46204f626a656374204c61796f7574">Controlling ELF Object Layout</h2> In the usual mode of operation, library will compute section offsets and alignments based on the contents of an ELF descriptor's sections without need for further intervention by the application.<p>
However, if the application wishes to take complete charge of the layout of the ELF file, it may set the <span class="define">ELF_F_LAYOUT</span> flag on an ELF descriptor using <a class="link-man" href="../3/elf_flagelf">elf_flagelf(3)</a>, following which the library will use the data offsets and alignments specified by the application when laying out the file. Application control of file layout is described further in the <a class="link-man" href="../3/elf_update">elf_update(3)</a> manual page.<p>
Gaps in between sections will be filled with the fill character set by function <b class="fname">elf_fill</b>().</div>
<div class="subsection">
<h2 id="x4572726f722048616e646c696e67">Error Handling</h2> In case an error is encountered, these library functions set an internal error number and signal the presence of the error by returning an special return value. The application can check the current error number by calling <a class="link-man" href="../3/elf_errno">elf_errno(3)</a>. A human readable description of the recorded error is available by calling <a class="link-man" href="../3/elf_errmsg">elf_errmsg(3)</a>.</div>
<div class="subsection">
<h2 id="x4d656d6f7279204d616e6167656d656e742052756c6573">Memory Management Rules</h2> The library keeps track of all <span class="type">Elf_Scn</span> and <span class="type">Elf_Data</span> descriptors associated with an ELF descriptor and recovers them when the descriptor is closed using <a class="link-man" href="../3/elf_end">elf_end(3)</a>. Thus the application must not call <a class="link-man" href="../3/free">free(3)</a> on data structures allocated by the ELF library.<p>
Conversely the library will not free data that it has not allocated. As an example, an application may call <a class="link-man" href="../3/elf_newdata">elf_newdata(3)</a> to allocate a new <span class="type">Elf_Data</span> descriptor and can set the <b class="var">d_off</b> member of the descriptor to point to a region of memory allocated using <a class="link-man" href="../3/malloc">malloc(3)</a>. It is the applications responsibility to free this arena, though the library will reclaim the space used by the <span class="type">Elf_Data</span> descriptor itself.</div>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../3/gelf">gelf(3)</a>, <a class="link-man" href="../5/elf">elf(5)</a></div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> The original ELF(3) API was developed for Unix System V. This implementation first appeared in <span class="unix">FreeBSD&#160;7.0</span> and <span class="unix">NetBSD&#160;6.0</span>.</div>
<div class="section">
<h1 id="x415554484f5253">AUTHORS</h1> The ELF library was written by <span class="author">Joseph Koshy</span> &#60;jkoshy@FreeBSD.org&#62;.</div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
August 14, 2011</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
</html>

