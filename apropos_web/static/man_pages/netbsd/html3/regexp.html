<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="../style.css" type="text/css" media="all">
<title>
REGEXP(3)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
REGEXP(3)</td>
<td class="head-vol" align="center">
Library Functions Manual</td>
<td class="head-rtitle" align="right">
REGEXP(3)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">regcomp</b>, <b class="name">regexec</b>, <b class="name">regsub</b>, <b class="name">regerror</b> &#8212; <span class="desc">obsolete 'regexp' regular expression handlers</span></div>
<div class="section">
<h1 id="x4c494252415259">LIBRARY</h1> <span class="lib">Compatibility Library (libcompat, &#45;lcompat)</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="includes">#include &lt;<a class="link-includes">regexp.h</a>&gt;</b><p>
<i class="ftype">regexp *</i><br>
<b class="fname">regcomp</b>(<i class="farg" style="white-space:nowrap;">const char *exp</i>);<p>
<i class="ftype">int</i><br>
<b class="fname">regexec</b>(<i class="farg" style="white-space:nowrap;">const regexp *prog</i>, <i class="farg" style="white-space:nowrap;">const char *string</i>);<p>
<i class="ftype">void</i><br>
<b class="fname">regsub</b>(<i class="farg" style="white-space:nowrap;">const regexp *prog</i>, <i class="farg" style="white-space:nowrap;">const char *source</i>, <i class="farg" style="white-space:nowrap;">char *dest</i>);<p>
<i class="ftype">void</i><br>
<b class="fname">regerror</b>(<i class="farg" style="white-space:nowrap;">const char *msg</i>);</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1><div class="symb" style="display:inline;margin-left: 1.00ex;">
This interface is made obsolete by <a class="link-man" href="../3/regex">regex(3)</a>. It is available from the compatibility library, libcompat.</div>
<p>
The <b class="fname">regcomp</b>(), <b class="fname">regexec</b>(), <b class="fname">regsub</b>(), and <b class="fname">regerror</b>() functions implement <a class="link-man" href="../1/egrep">egrep(1)</a>-style regular expressions and supporting facilities.<p>
The <b class="fname">regcomp</b>() function compiles a regular expression into a structure of type <span class="emph">regexp</span>, and returns a pointer to it. The space has been allocated using <a class="link-man" href="../3/malloc">malloc(3)</a> and may be released by <a class="link-man" href="../3/free">free(3)</a>.<p>
The <b class="fname">regexec</b>() function matches a <span class="define">NUL</span>-terminated <i class="farg">string</i> against the compiled regular expression in <i class="farg">prog</i>. It returns 1 for success and 0 for failure, and adjusts the contents of <i class="farg">prog</i>'s <span class="emph">startp</span> and <span class="emph">endp</span> (see below) accordingly.<p>
The members of a <span class="emph">regexp</span> structure include at least the following (not necessarily in order):<p>
<pre style="margin-left: 5.00ex;" class="lit display">
char *startp[NSUBEXP]; 
char *endp[NSUBEXP];</pre>
<p>
where <span class="define">NSUBEXP</span> is defined (as 10) in the header file. Once a successful <b class="fname">regexec</b>() has been done using the <b class="fname">regexp</b>(), each <span class="emph">startp</span>- <span class="emph">endp</span> pair describes one substring within the <i class="farg">string</i>, with the <span class="emph">startp</span> pointing to the first character of the substring and the <span class="emph">endp</span> pointing to the first character following the substring. The 0th substring is the substring of <i class="farg">string</i> that matched the whole regular expression. The others are those substrings that matched parenthesized expressions within the regular expression, with parenthesized expressions numbered in left-to-right order of their opening parentheses.<p>
The <b class="fname">regsub</b>() function copies <i class="farg">source</i> to <i class="farg">dest</i>, making substitutions according to the most recent <b class="fname">regexec</b>() performed using <i class="farg">prog</i>. Each instance of `&amp;' in <i class="farg">source</i> is replaced by the substring indicated by <span class="emph">startp</span>&#91;&#93; and <span class="emph">endp</span>&#91;&#93;. Each instance of &#8216;&#92;<span class="emph">n</span>&#8217;, where <span class="emph">n</span> is a digit, is replaced by the substring indicated by <span class="emph">startp</span>&#91;<span class="emph">n</span>&#93; and <span class="emph">endp</span>&#91;<span class="emph">n</span>&#93;. To get a literal `&amp;' or &#8216;&#92;<span class="emph">n</span>&#8217; into <i class="farg">dest</i>, prefix it with `&#92;'; to get a literal `&#92;' preceding `&amp;' or &#8216;&#92;<span class="emph">n</span>&#8217;, prefix it with another `&#92;'.<p>
The <b class="fname">regerror</b>() function is called whenever an error is detected in <b class="fname">regcomp</b>(), <b class="fname">regexec</b>(), or <b class="fname">regsub</b>(). The default <b class="fname">regerror</b>() writes the string <i class="farg">msg</i>, with a suitable indicator of origin, on the standard error output and invokes <a class="link-man" href="../3/exit">exit(3)</a>. The <b class="fname">regerror</b>() function can be replaced by the user if other actions are desirable.</div>
<div class="section">
<h1 id="x524547554c41522045585052455353494f4e2053594e544158">REGULAR EXPRESSION SYNTAX</h1> A regular expression is zero or more <span class="emph">branches</span>, separated by `|'. It matches anything that matches one of the branches.<p>
A branch is zero or more <span class="emph">pieces</span>, concatenated. It matches a match for the first, followed by a match for the second, etc.<p>
A piece is an <span class="emph">atom</span> possibly followed by `*', `+', or `?'. An atom followed by `*' matches a sequence of 0 or more matches of the atom. An atom followed by `+' matches a sequence of 1 or more matches of the atom. An atom followed by `?' matches a match of the atom, or the null string.<p>
An atom is a regular expression in parentheses (matching a match for the regular expression), a <span class="emph">range</span> (see below), `.' (matching any single character), `^' (matching the null string at the beginning of the input string), `$' (matching the null string at the end of the input string), a `&#92;' followed by a single character (matching that character), or a single character with no other significance (matching that character).<p>
A <span class="emph">range</span> is a sequence of characters enclosed in `[]'. It normally matches any single character from the sequence. If the sequence begins with `^', it matches any single character <span class="emph">not</span> from the rest of the sequence. If two characters in the sequence are separated by `&#45;', this is shorthand for the full list of ASCII characters between them (e.g. `[0-9]' matches any decimal digit). To include a literal `]' in the sequence, make it the first character (following a possible `^'). To include a literal `&#45;', make it the first or last character.</div>
<div class="section">
<h1 id="x414d42494755495459">AMBIGUITY</h1> If a regular expression could match two different parts of the input string, it will match the one which begins earliest. If both begin in the same place but match different lengths, or match the same length in different ways, life gets messier, as follows.<p>
In general, the possibilities in a list of branches are considered in left-to-right order, the possibilities for `*', `+', and `?' are considered longest-first, nested constructs are considered from the outermost in, and concatenated constructs are considered leftmost-first. The match that will be chosen is the one that uses the earliest possibility in the first choice that has to be made. If there is more than one choice, the next will be made in the same manner (earliest possibility) subject to the decision on the first choice. And so forth.<p>
For example, &#8216;<code class="lit">(ab|a)b*c</code>&#8217; could match `abc' in one of two ways. The first choice is between `ab' and `a'; since `ab' is earlier, and does lead to a successful overall match, it is chosen. Since the `b' is already spoken for, the `b*' must match its last possibility&#8212;the empty string&#8212;since it must respect the earlier choice.<p>
In the particular case where no `|'s are present and there is only one `*', `+', or `?', the net effect is that the longest possible match will be chosen. So &#8216;<code class="lit">ab*</code>&#8217;, presented with `xabbbby', will match `abbbb'. Note that if &#8216;<code class="lit">ab*</code>&#8217;, is tried against `xabyabbbz', it will match `ab' just after `x', due to the begins-earliest rule. (In effect, the decision on where to start the match is the first choice to be made, hence subsequent choices must respect it even if this leads them to less-preferred alternatives.)</div>
<div class="section">
<h1 id="x52455455524e2056414c554553">RETURN VALUES</h1> The <b class="fname">regcomp</b>() function returns <span class="define">NULL</span> for a failure (<b class="fname">regerror</b>() permitting), where failures are syntax errors, exceeding implementation limits, or applying `+' or `*' to a possibly-null operand.</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../1/ed">ed(1)</a>, <a class="link-man" href="../1/egrep">egrep(1)</a>, <a class="link-man" href="../1/ex">ex(1)</a>, <a class="link-man" href="../1/expr">expr(1)</a>, <a class="link-man" href="../1/fgrep">fgrep(1)</a>, <a class="link-man" href="../1/grep">grep(1)</a>, <a class="link-man" href="../3/regex">regex(3)</a></div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> Both code and manual page for <b class="fname">regcomp</b>(), <b class="fname">regexec</b>(), <b class="fname">regsub</b>(), and <b class="fname">regerror</b>() were written at the University of Toronto and appeared in <span class="unix">4.3BSD-Tahoe</span>. They are intended to be compatible with the Bell V8 <a class="link-man" href="../3/regexp">regexp(3)</a>, but are not derived from Bell code.</div>
<div class="section">
<h1 id="x42554753">BUGS</h1> Empty branches and empty regular expressions are not portable to V8.<p>
The restriction against applying `*' or `+' to a possibly-null operand is an artifact of the simplistic implementation.<p>
Does not support <a class="link-man" href="../1/egrep">egrep(1)</a>'s newline-separated branches; neither does the V8 <a class="link-man" href="../3/regexp">regexp(3)</a>, though.<p>
Due to emphasis on compactness and simplicity, it's not strikingly fast. It does give special attention to handling simple cases quickly.</div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
June 4, 1993</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
</html>

