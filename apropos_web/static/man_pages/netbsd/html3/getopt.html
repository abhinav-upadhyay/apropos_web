<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="../style.css" type="text/css" media="all">
<title>
GETOPT(3)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
GETOPT(3)</td>
<td class="head-vol" align="center">
Library Functions Manual</td>
<td class="head-rtitle" align="right">
GETOPT(3)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">getopt</b> &#8212; <span class="desc">get option character from command line argument list</span></div>
<div class="section">
<h1 id="x4c494252415259">LIBRARY</h1> <span class="lib">Standard C Library (libc, &#45;lc)</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="includes">#include &lt;<a class="link-includes">unistd.h</a>&gt;</b><p>
<span class="type">extern char *optarg;</span><br>
<span class="type">extern int optind;</span><br>
<span class="type">extern int optopt;</span><br>
<span class="type">extern int opterr;</span><br>
<span class="type">extern int optreset;</span><p>
<i class="ftype">int</i><br>
<b class="fname">getopt</b>(<i class="farg" style="white-space:nowrap;">int argc</i>, <i class="farg" style="white-space:nowrap;">char * const argv[]</i>, <i class="farg" style="white-space:nowrap;">const char *optstring</i>);</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> The <b class="fname">getopt</b>() function incrementally parses a command line argument list <i class="farg">argv</i> and returns the next <span class="emph">known</span> option character. An option character is <span class="emph">known</span> if it has been specified in the string of accepted option characters, <i class="farg">optstring</i>.<p>
The option string <i class="farg">optstring</i> may contain the following elements: individual characters, and characters followed by a colon to indicate an option argument is to follow. If an individual character is followed by two colons, then the option argument is optional; <b class="var">optarg</b> is set to the rest of the current <b class="var">argv</b> word, or <span class="define">NULL</span> if there were no more characters in the current word. This is a <span class="unix">NetBSD</span> extension. For example, an option string &#8220;x&#8221; recognizes an option &#8220;<b class="flag">&#45;x</b>&#8221;, and an option string &#8220;x:&#8221; recognizes an option and argument &#8220;<b class="flag">&#45;x</b> <i class="arg">argument</i>&#8221;. It does not matter to <b class="fname">getopt</b>() if a following argument has leading whitespace.<p>
On return from <b class="fname">getopt</b>(), <b class="var">optarg</b> points to an option argument, if it is anticipated, and the variable <b class="var">optind</b> contains the index to the next <i class="farg">argv</i> argument for a subsequent call to <b class="fname">getopt</b>(). The variable <b class="var">optopt</b> saves the last <span class="emph">known</span> option character returned by <b class="fname">getopt</b>().<p>
The variables <b class="var">opterr</b> and <b class="var">optind</b> are both initialized to 1. The <b class="var">optind</b> variable may be set to another value before a set of calls to <b class="fname">getopt</b>() in order to skip over more or less argv entries.<p>
In order to use <b class="fname">getopt</b>() to evaluate multiple sets of arguments, or to evaluate a single set of arguments multiple times, the variable <b class="var">optreset</b> must be set to 1 before the second and each additional set of calls to <b class="fname">getopt</b>(), and the variable <b class="var">optind</b> must be reinitialized.<p>
The <b class="fname">getopt</b>() function returns &#45;1 when the argument list is exhausted. The interpretation of options in the argument list may be cancelled by the option &#8220;--&#8221; (double dash) which causes <b class="fname">getopt</b>() to signal the end of argument processing and return &#45;1. When all options have been processed (i.e., up to the first non-option argument), <b class="fname">getopt</b>() returns &#45;1.</div>
<div class="section">
<h1 id="x52455455524e2056414c554553">RETURN VALUES</h1> The <b class="fname">getopt</b>() function returns the next known option character in <i class="farg">optstring</i>. If <b class="fname">getopt</b>() encounters a character not found in <i class="farg">optstring</i> or if it detects a missing option argument, it returns &#8216;?&#8217; (question mark). If <i class="farg">optstring</i> has a leading &#8216;:&#8217; then a missing option argument causes &#8216;:&#8217; to be returned instead of &#8216;?&#8217;. In either case, the variable <b class="var">optopt</b> is set to the character that caused the error. The <b class="fname">getopt</b>() function returns &#45;1 when the argument list is exhausted.</div>
<div class="section">
<h1 id="x4558414d504c4553">EXAMPLES</h1><pre style="margin-left: 0.00ex;" class="lit display">
extern char *optarg; 
extern int optind; 
int bflag, ch, fd; 
 
bflag = 0; 
while ((ch = getopt(argc, argv, "bf:")) != -1) { 
	switch (ch) { 
	case 'b': 
		bflag = 1; 
		break; 
	case 'f': 
		if ((fd = open(optarg, O_RDONLY, 0)) &lt; 0) { 
			(void)fprintf(stderr, 
			    "myname: %s: %s&#92;n", optarg, strerror(errno)); 
			exit(1); 
		} 
		break; 
	case '?': 
	default: 
		usage(); 
	} 
} 
argc -= optind; 
argv += optind;</pre>
</div>
<div class="section">
<h1 id="x444941474e4f5354494353">DIAGNOSTICS</h1> If the <b class="fname">getopt</b>() function encounters a character not found in the string <i class="farg">optstring</i> or detects a missing option argument it writes an error message to <span class="emph">stderr</span> and returns &#8216;?&#8217;. Setting <b class="var">opterr</b> to a zero will disable these error messages. If <i class="farg">optstring</i> has a leading &#8216;:&#8217; then a missing option argument causes a &#8216;:&#8217; to be returned in addition to suppressing any error messages.<p>
Option arguments are allowed to begin with &#8216;-&#8217;; this is reasonable but reduces the amount of error checking possible.</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../1/getopt">getopt(1)</a>, <a class="link-man" href="../3/getopt_long">getopt_long(3)</a>, <a class="link-man" href="../3/getsubopt">getsubopt(3)</a></div>
<div class="section">
<h1 id="x5354414e4441524453">STANDARDS</h1> The <b class="var">optreset</b> variable was added to make it possible to call the <b class="fname">getopt</b>() function multiple times. This is an extension to the IEEE Std 1003.2 (&#8220;POSIX.2&#8221;) specification.</div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> The <b class="fname">getopt</b>() function appeared in <span class="unix">4.3BSD</span>.</div>
<div class="section">
<h1 id="x42554753">BUGS</h1> The <b class="fname">getopt</b>() function was once specified to return <span class="define">EOF</span> instead of &#45;1. This was changed by IEEE Std 1003.2-1992 (&#8220;POSIX.2&#8221;) to decouple <b class="fname">getopt</b>() from <b class="includes">&lt;<a class="link-includes">stdio.h</a>&gt;</b>.<p>
A single dash (&#8216;-&#8217;) may be specified as a character in <i class="farg">optstring</i>, however it should <span class="emph">never</span> have an argument associated with it. This allows <b class="fname">getopt</b>() to be used with programs that expect &#8216;-&#8217; as an option flag. This practice is wrong, and should not be used in any current development. It is provided for backward compatibility <span class="emph">only</span>. Care should be taken not to use &#8216;-&#8217; as the first character in <i class="farg">optstring</i> to avoid a semantic conflict with GNU <b class="fname">getopt</b>(), which assigns different meaning to an <i class="farg">optstring</i> that begins with a &#8216;-&#8217;. By default, a single dash causes <b class="fname">getopt</b>() to return &#45;1.<p>
It is also possible to handle digits as option letters. This allows <b class="fname">getopt</b>() to be used with programs that expect a number (&#8220;<code class="lit">&#45;3</code>&#8221;) as an option. This practice is wrong, and should not be used in any current development. It is provided for backward compatibility <span class="emph">only</span>. The following code fragment works in most cases.<p>
<pre style="margin-left: 5.00ex;" class="lit display">
int ch; 
long length; 
char *p; 
 
while ((ch = getopt(argc, argv, "0123456789")) != -1) { 
	switch (ch) { 
	case '0': case '1': case '2': case '3': case '4': 
	case '5': case '6': case '7': case '8': case '9': 
		p = argv[optind - 1]; 
		if (p[0] == '-' &amp;&amp; p[1] == ch &amp;&amp; !p[2]) 
			length = ch - '0'; 
		else 
			length = strtol(argv[optind] + 1, NULL, 10); 
		break; 
	} 
}</pre>
</div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
June 5, 2014</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
</html>

