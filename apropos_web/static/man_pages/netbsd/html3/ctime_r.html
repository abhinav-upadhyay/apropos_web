<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="../style.css" type="text/css" media="all">
<title>
CTIME(3)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
CTIME(3)</td>
<td class="head-vol" align="center">
Library Functions Manual</td>
<td class="head-rtitle" align="right">
CTIME(3)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">asctime</b>, <b class="name">asctime_r</b>, <b class="name">ctime</b>, <b class="name">ctime_r</b>, <b class="name">ctime_rz</b>, <b class="name">difftime</b>, <b class="name">gmtime</b>, <b class="name">gmtime_r</b>, <b class="name">localtime</b>, <b class="name">localtime_r</b>, <b class="name">localtime_rz</b>, <b class="name">mktime</b>, <b class="name">mktime_z</b>, &#8212; <span class="desc">convert date and time</span></div>
<div class="section">
<h1 id="x4c494252415259">LIBRARY</h1> <span class="lib">Standard C Library (libc, &#45;lc)</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="includes">#include &lt;<a class="link-includes">time.h</a>&gt;</b><p>
<span class="type">extern char *tzname[2];</span><p>
<i class="ftype">char *</i><br>
<b class="fname">asctime</b>(<i class="farg" style="white-space:nowrap;">const struct tm *tm</i>);<p>
<i class="ftype">char *</i><br>
<b class="fname">asctime_r</b>(<i class="farg" style="white-space:nowrap;">const struct tm restrict tm</i>, <i class="farg" style="white-space:nowrap;">char * restrict buf</i>);<p>
<i class="ftype">char *</i><br>
<b class="fname">ctime</b>(<i class="farg" style="white-space:nowrap;">const time_t *clock</i>);<p>
<i class="ftype">char *</i><br>
<b class="fname">ctime_r</b>(<i class="farg" style="white-space:nowrap;">const time_t *clock</i>, <i class="farg" style="white-space:nowrap;">char *buf</i>);<p>
<i class="ftype">char *</i><br>
<b class="fname">ctime_rz</b>(<i class="farg" style="white-space:nowrap;">timezone_t restrict tz</i>, <i class="farg" style="white-space:nowrap;">const time_t *clock</i>, <i class="farg" style="white-space:nowrap;">char *buf</i>);<p>
<i class="ftype">double</i><br>
<b class="fname">difftime</b>(<i class="farg" style="white-space:nowrap;">time_t time1</i>, <i class="farg" style="white-space:nowrap;">time_t time0</i>);<p>
<i class="ftype">struct tm *</i><br>
<b class="fname">gmtime</b>(<i class="farg" style="white-space:nowrap;">const time_t *clock</i>);<p>
<i class="ftype">struct tm *</i><br>
<b class="fname">gmtime_r</b>(<i class="farg" style="white-space:nowrap;">const time_t * restrict clock</i>, <i class="farg" style="white-space:nowrap;">struct tm * restrict result</i>);<p>
<i class="ftype">struct tm *</i><br>
<b class="fname">localtime</b>(<i class="farg" style="white-space:nowrap;">const time_t *clock</i>);<p>
<i class="ftype">struct tm *</i><br>
<b class="fname">localtime_r</b>(<i class="farg" style="white-space:nowrap;">const time_t * restrict clock</i>, <i class="farg" style="white-space:nowrap;">struct tm * restrict result</i>);<p>
<i class="ftype">struct tm *</i><br>
<b class="fname">localtime_rz</b>(<i class="farg" style="white-space:nowrap;">timezone_t restrict tz</i>, <i class="farg" style="white-space:nowrap;">const time_t * restrict clock</i>, <i class="farg" style="white-space:nowrap;">struct tm * restrict result</i>);<p>
<i class="ftype">time_t</i><br>
<b class="fname">mktime</b>(<i class="farg" style="white-space:nowrap;">struct tm *tm</i>);<p>
<i class="ftype">time_t</i><br>
<b class="fname">mktime_z</b>(<i class="farg" style="white-space:nowrap;">timezone_t restrict tz</i>, <i class="farg" style="white-space:nowrap;">struct tm *restrict tm</i>);</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> The <b class="name">asctime</b> family of functions provide various standard library routines to operate with time and conversions related to time.</div>
<div class="section">
<h1 id="x46554e4354494f4e53">FUNCTIONS</h1><dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">asctime</b>(<i class="farg">tm</i>)</dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
The <b class="fname">asctime</b>() function converts a time value contained in the <i class="farg">tm</i> structure to a string with the following general format:<p>
<pre style="margin-left: 5.00ex;" class="lit display">
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
Thu Nov 24 18:22:48 1986&#92;n&#92;0</div>
</blockquote>
</pre>
<p>
The <i class="farg">tm</i> structure is described in <a class="link-man" href="../3/tm">tm(3)</a>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">asctime_r</b>(<i class="farg">tm</i>, <i class="farg">buf</i>)</dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
The <b class="fname">asctime_r</b>() has the same behavior as <b class="fname">asctime</b>(), but the result is stored to <i class="farg">buf</i>, which should have a size of at least 26 bytes.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">ctime</b>(<i class="farg">clock</i>)</dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
The <b class="fname">ctime</b>() function converts a <span class="type">time_t</span>, pointed to by <i class="farg">clock</i>, and returns a pointer to a string with the format described above. Years requiring fewer than four characters are padded with leading zeroes. For years longer than four characters, the string is of the form<p>
<pre style="margin-left: 5.00ex;" class="lit display">
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
Thu Nov 24 18:22:48     81986&#92;n&#92;0</div>
</blockquote>
</pre>
<p>
with five spaces before the year. These unusual formats are designed to make it less likely that older software that expects exactly 26 bytes of output will mistakenly output misleading values for out-of-range years.<p>
The <i class="farg">clock</i> time stamp represents the time in seconds since 1970-01-01 00:00:00 Coordinated Universal Time (UTC). The POSIX standard says that time stamps must be nonnegative and must ignore leap seconds. Many implementations extend POSIX by allowing negative time stamps, and can therefore represent time stamps that predate the introduction of UTC and are some other flavor of Universal Time (UT). Some implementations support leap seconds, in contradiction to POSIX.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">ctime_r</b>(<i class="farg">clock</i>, <i class="farg">buf</i>)</dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
The <b class="fname">ctime_r</b>() is similar to <b class="fname">ctime</b>(), except it places the result of the conversion on the <i class="farg">buf</i> argument, which should be 26 or more bytes long, instead of using a global static buffer.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">ctime_rz</b>(<i class="farg">tz</i>, <i class="farg">clock</i>, <i class="farg">buf</i>)</dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
The <b class="fname">ctime_rz</b>() function is similar to <b class="fname">ctime_r</b>(), but it also takes a <i class="ftype">timezone_t</i> argument, as returned by a previous call to <b class="fname">tzalloc</b>(), or a <span class="define">NULL</span> pointer denoting Coordinated Universal Time (UTC).</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">difftime</b>(<i class="farg">time1</i>, <i class="farg">time2</i>)</dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
The <b class="fname">difftime</b>() function returns the difference between two calendar times, (<i class="farg">time1</i> - <i class="farg">time0</i>), expressed in seconds.<p>
The <b class="fname">ctime_r</b>(), <b class="fname">localtime_r</b>(), <b class="fname">gmtime_r</b>(), and <b class="fname">asctime_r</b>() functions are like their unsuffixed counterparts, except that they accept an additional argument specifying where to store the result if successful.<p>
The <b class="fname">ctime_rz</b>(), <b class="fname">localtime_rz</b>(), and <b class="fname">mktime_z</b>() functions are like their unsuffixed counterparts, except that they accept an extra initial <i class="arg">zone</i> argument specifying the time zone to be used for conversion. If <i class="farg">zone</i> is <span class="define">NULL</span>, UTC is used; otherwise, <i class="farg">zone</i> should be have been allocated by <b class="fname">tzalloc</b>() and should not be freed until after all uses (e.g., by calls to <b class="fname">strftime</b>()) of the filled-in <b class="fname">tm_zone</b>() fields.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">gmtime</b>(<i class="farg">clock</i>)</dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
The <b class="fname">gmtime</b>() function converts to Coordinated Universal Time (UTC) and returns a pointer to the <b class="var">tm</b> structure described in <a class="link-man" href="../3/tm">tm(3)</a>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">gmtime_r</b>(<i class="farg">clock</i>, <i class="farg">result</i>)</dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
The <b class="fname">gmtime_r</b>() provides the same functionality as <b class="fname">gmtime</b>(), differing in that the caller must supply a buffer area <i class="farg">result</i> to which the result is stored.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">localtime</b>(<i class="farg">clock</i>)</dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
Also <b class="fname">localtime</b>() is comparable to <b class="fname">gmtime</b>(). However, <b class="fname">localtime</b>() corrects for the time zone and any time zone adjustments (such as Daylight Saving Time in the U.S.A.). After filling in the <b class="var">tm</b> structure, the function sets the <i class="farg">tm_isdst</i>'th element of <i class="farg">tzname</i> to a pointer to an ASCII string that is the time zone abbreviation to be used with <b class="fname">localtime</b>()'s return value.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">localtime_r</b>(<i class="farg">clock</i>, <i class="farg">result</i>)</dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
As <b class="fname">gmtime_r</b>(), the <b class="fname">localtime_r</b>() takes an additional buffer <i class="farg">result</i> as a parameter and stores the result to it. Note however that <b class="fname">localtime_r</b>() does not imply initialization of the local time conversion information; the application may need to do so by calling <a class="link-man" href="../3/tzset">tzset(3)</a>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">localtime_rz</b>(<i class="farg">tz</i>, <i class="farg">clock</i>, <i class="farg">result</i>)</dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
The <b class="fname">localtime_rz</b>() function is similar to <b class="fname">localtime_r</b>(), but it also takes a <i class="ftype">timezone_t</i> argument, returned by a previous call to <b class="fname">tzalloc</b>(), or a <span class="define">NULL</span> pointer denoting Coordinated Universal Time (UTC).</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">mktime</b>(<i class="farg">tm</i>)</dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
The <b class="fname">mktime</b>() function converts the broken-down time, expressed as local time in the <a class="link-man" href="../3/tm">tm(3)</a> structure, into a calendar time value with the same encoding as that of the values returned by the <a class="link-man" href="../3/time">time(3)</a> function. The following remarks should be taken into account.<ul style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-bul">
<li class="list-bul" style="margin-top: 1.00em;">
The original values of the <i class="farg">tm_wday</i> and <i class="farg">tm_yday</i> components of the structure are ignored, and the original values of the other components are not restricted to their normal ranges. (A positive or zero value for <i class="farg">tm_isdst</i> causes <b class="fname">mktime</b>() to presume initially that summer time (for example, Daylight Saving Time in the U.S.A.) respectively, is or is not in effect for the specified time.</li>
<li class="list-bul" style="margin-top: 1.00em;">
A negative value for <i class="farg">tm_isdst</i> causes the <b class="fname">mktime</b>() function to attempt to divine whether summer time is in effect for the specified time; in this case it does not use a consistent rule and may give a different answer when later presented with the same argument.</li>
<li class="list-bul" style="margin-top: 1.00em;">
On successful completion, the values of the <i class="farg">tm_wday</i> and <i class="farg">tm_yday</i> components of the structure are set appropriately, and the other components are set to represent the specified calendar time, but with their values forced to their normal ranges; the final value of <i class="farg">tm_mday</i> is not set until <i class="farg">tm_mon</i> and <i class="farg">tm_year</i> are determined.</li>
</ul>
<p>
The function returns the specified calendar time; if the calendar time cannot be represented, it returns <b class="var">(time_t)-1</b>. This can happen either because the resulting conversion would not fit in a <span class="type">time_t</span> variable, or because the time specified happens to be in the daylight savings gap and <i class="farg">tm_isdst</i> was set to <span class="define">&#45;1</span>. Other <b class="fname">mktime</b>() implementations do not return an error in the second case and return the appropriate time offset after the daylight savings gap. There is code to mimick this behavior, but it is not enabled by default.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">mktime_z</b>(<i class="farg">tz</i>, <i class="farg">tm</i>)</dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
The <b class="fname">mktime_z</b>() function is similar to <b class="fname">mktime</b>() but it also takes a <i class="ftype">const timezone_t</i> argument, returned by a previous call to <b class="fname">tzalloc</b>(), or a null pointer denoting Coordinated Universal Time (UTC).</dd>
</dl>
<p>
Declarations of all the functions and externals, and the <i class="ftype">tm</i> structure, are in the <b class="includes">&lt;<a class="link-includes">time.h</a>&gt;</b> header file. The structure (of type) <i class="ftype">struct tm</i> includes the following fields:<p>
<pre style="margin-left: 0.00ex;" class="lit display">
       int tm_sec;      /* seconds (0 - 60) */ 
       int tm_min;      /* minutes (0 - 59) */ 
       int tm_hour;     /* hours (0 - 23) */ 
       int tm_mday;     /* day of month (1 - 31) */ 
       int tm_mon;      /* month of year (0 - 11) */ 
       int tm_year;     /* year - 1900 */ 
       int tm_wday;     /* day of week (Sunday = 0) */ 
       int tm_yday;     /* day of year (0 - 365) */ 
       int tm_isdst;    /* is summer time in effect? */ 
       char *tm_zone;   /* abbreviation of timezone name */ 
       long tm_gmtoff;  /* offset from UT in seconds */</pre>
<p>
The <i class="farg">tm_zone</i> and <i class="farg">tm_gmtoff</i> fields exist, and are filled in, only if arrangements to do so were made when the library containing these functions was created. There is no guarantee that these fields  will  continue to exist in this form in future releases of this code.<ul style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-bul">
<li class="list-bul" style="margin-top: 1.00em;">
<b class="var">tm_isdst</b> is non-zero if summer time is in effect.</li>
<li class="list-bul" style="margin-top: 1.00em;">
<b class="var">tm_gmtoff</b> is the offset (in seconds) of the time represented from UT, with positive values indicating east of the Prime Meridian. The field's name is derived from Greenwich Mean Time, a precursor of UT.</li>
</ul>
</div>
<div class="section">
<h1 id="x52455455524e2056414c554553">RETURN VALUES</h1><ul style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-bul">
<li class="list-bul" style="margin-top: 1.00em;">
On success the <b class="fname">asctime</b>() and <b class="fname">ctime</b>() functions return a pointer to a static character buffer, and the <b class="fname">asctime_r</b>(), <b class="fname">ctime_r</b>(), and <b class="fname">ctime_rz</b>() function return a pointer to the user-supplied buffer. On failure they all return <span class="define">NULL</span> and no errors are defined for them.</li>
<li class="list-bul" style="margin-top: 1.00em;">
On success the <b class="fname">gmtime</b>(), and <b class="fname">localtime</b>() functions return a pointer to a statically allocated <b class="var">struct tm</b> whereas the <b class="fname">gmtime_r</b>(), <b class="fname">localtime_r</b>(), and <b class="fname">localtime_rz</b>(), functions return a pointer to the user-supplied <b class="var">struct tm</b>. On failure they all return <span class="define">NULL</span> and the global variable <b class="var">errno</b> is set to indicate the error.</li>
<li class="list-bul" style="margin-top: 1.00em;">
The <b class="fname">mktime</b>() and <b class="fname">mktime_z</b>() function returns the specified time since the Epoch as a <span class="type">time_t</span> type value. If the time cannot be represented, then <b class="fname">mktime</b>() and <b class="fname">mktime_z</b>() return <b class="var">(time_t)-1</b> setting the global variable <b class="var">errno</b> to indicate the error.</li>
<li class="list-bul" style="margin-top: 1.00em;">
The <b class="fname">tzalloc</b>() function returns a pointer to a <i class="ftype">timezone_t</i> object or <span class="define">NULL</span> on failure, setting <b class="var">errno</b> to indicate the error. It may also return <span class="define">NULL</span> when the <i class="farg">name</i> argument is <span class="define">NULL</span>, and this is not an error, but a way of referring to Coordinated Universal Time (UTC).</li>
<li class="list-bul" style="margin-top: 1.00em;">
<b class="fname">tzgetzone</b>() function returns string containing the name of the timezone given in <i class="farg">tz</i>.</li>
</ul>
</div>
<div class="section">
<h1 id="x46494c4553">FILES</h1><dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/etc/localtime</i></dt>
<dd class="list-tag" style="margin-left: 30.00ex;">
local time zone file</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/usr/share/zoneinfo</i></dt>
<dd class="list-tag" style="margin-left: 30.00ex;">
time zone information directory</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/usr/share/zoneinfo/posixrules</i></dt>
<dd class="list-tag" style="margin-left: 30.00ex;">
used with POSIX-style TZ's</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/usr/share/zoneinfo/GMT</i></dt>
<dd class="list-tag" style="margin-left: 30.00ex;">
for UTC leap seconds</dd>
</dl>
<p>
If <i class="file">/usr/share/zoneinfo/GMT</i> is absent, UTC leap seconds are loaded from <i class="file">/usr/share/zoneinfo/posixrules</i>.</div>
<div class="section">
<h1 id="x4552524f5253">ERRORS</h1> The described functions may fail with<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">EINVAL</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The result cannot be represented because a parameter is incorrect, or the conversion failed because no such time exists (for example a time in the DST gap).</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
&#91;<span class="errno">EOVERFLOW</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The result cannot be represented because the time requested is out of bounds and the time calculation resulted in overflow.</dd>
</dl>
<p>
All functions that return values, except their &#8220;z&#8221; variants, can also return the same errors as <a class="link-man" href="../2/open">open(2)</a> and <a class="link-man" href="../3/malloc">malloc(3)</a>.</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../3/getenv">getenv(3)</a>, <a class="link-man" href="../3/strftime">strftime(3)</a>, <a class="link-man" href="../3/time">time(3)</a>, <a class="link-man" href="../3/tm">tm(3)</a>, <a class="link-man" href="../3/tzset">tzset(3)</a>, <a class="link-man" href="../5/tzfile">tzfile(5)</a></div>
<div class="section">
<h1 id="x5354414e4441524453">STANDARDS</h1> The <b class="fname">ctime</b>(), <b class="fname">difftime</b>(), <b class="fname">asctime</b>(), <b class="fname">localtime</b>(), <b class="fname">gmtime</b>() and <b class="fname">mktime</b>() functions conform to ANSI X3.159-1989 (&#8220;ANSI&#160;C89&#8221;). Rest of the functions conform to IEEE Std 1003.1-2008 (&#8220;POSIX.1&#8221;).</div>
<div class="section">
<h1 id="x43415645415453">CAVEATS</h1> The functions that do not take an explicit <i class="ftype">timezone_t</i> argument return values point to static data; the data is overwritten by each call. For the above functions the <i class="farg">tm_zone</i> field of a returned <b class="var">struct tm</b> points to a static array of characters, which will also be overwritten at the next call (and by calls to <a class="link-man" href="../3/tzset">tzset(3)</a>). The functions that do take an explicit <i class="ftype">timezone_t</i> argument and set the fields of a supplied <b class="var">struct tm</b> should not call <b class="fname">tzfree</b>() since the <i class="farg">tm_zone</i> field of the <b class="var">struct tm</b> points to data allocated by <b class="fname">tzalloc</b>().<p>
The <b class="fname">asctime</b>(), <b class="fname">asctime_r</b>(), <b class="fname">ctime</b>(), <b class="fname">ctime_r</b>(), and <b class="fname">ctime_rz</b>(), functions behave strangely for years before 1000 or after 9999. The 1989 and 1999 editions of the C Standard say that years from &#45;99 through 999 are converted without extra spaces, but this conflicts with longstanding tradition and with this implementation. The 2011 edition says that the behavior is undefined if the year is before 1000 or after 9999. Traditional implementations of these two functions are restricted to years in the range 1900 through 2099. To avoid this portability mess, new programs should use <b class="fname">strftime</b>() instead.</div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
October 7, 2014</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
</html>

