<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="/static/man_pages/netbsd/style.css" type="text/css" media="all">
<title>
PUFFS_NODE(3)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
PUFFS_NODE(3)</td>
<td class="head-vol" align="center">
Library Functions Manual</td>
<td class="head-rtitle" align="right">
PUFFS_NODE(3)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">puffs_node</b> &#8212; <span class="desc">puffs node routines</span></div>
<div class="section">
<h1 id="x4c494252415259">LIBRARY</h1> <span class="lib">puffs Convenience Library (libpuffs, &#45;lpuffs)</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="includes">#include &lt;<a class="link-includes">puffs.h</a>&gt;</b><p>
<i class="ftype">struct puffs_node *</i><br>
<b class="fname">puffs_pn_new</b>(<i class="farg" style="white-space:nowrap;">struct puffs_usermount *pu</i>, <i class="farg" style="white-space:nowrap;">void *priv</i>);<p>
<i class="ftype">void *</i><br>
<b class="fname">puffs_nodewalk_fn</b>(<i class="farg">struct puffs_usermount *pu</i>, <i class="farg">struct puffs_node *pn</i>, <i class="farg">void *arg</i>);<p>
<i class="ftype">void *</i><br>
<b class="fname">puffs_pn_nodewalk</b>(<i class="farg">struct puffs_usermount *pu</i>, <i class="farg">puffs_nodewalk_fn nwfn</i>, <i class="farg">void *arg</i>);<p>
<i class="ftype">void</i><br>
<b class="fname">puffs_pn_remove</b>(<i class="farg" style="white-space:nowrap;">struct puffs_node *pn</i>);<p>
<i class="ftype">void</i><br>
<b class="fname">puffs_pn_put</b>(<i class="farg" style="white-space:nowrap;">struct puffs_node *pn</i>);</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1><dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">puffs_pn_new</b>(<i class="farg">pu</i>, <i class="farg">priv</i>)</dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
Create a new node and attach it to the mountpoint <i class="arg">pu</i>. The argument <i class="arg">priv</i> can be used for associating file system specific data with the new node and will not be accessed by puffs.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">puffs_nodewalk_fn</b>(<i class="farg">pu</i>, <i class="farg">pn</i>, <i class="farg">arg</i>)</dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
A callback for <b class="fname">puffs_nodewalk</b>(). The list of nodes is iterated in the argument <i class="arg">pn</i> and the argument <i class="arg">arg</i> is the argument given to <b class="fname">puffs_nodewalk</b>().</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">puffs_nodewalk</b>(<i class="farg">pu</i>, <i class="farg">nwfn</i>, <i class="farg">arg</i>)</dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
Walk all nodes associted with the mountpoint <i class="arg">pu</i> and call <b class="fname">nwfn</b>() for them. The walk is aborted if <b class="fname">puffs_nodewalk_fn</b>() returns a value which is not <span class="define">NULL</span>. This value is also returned this function. In case the whole set of nodes is traversed, <span class="define">NULL</span> is returned. This function is useful for example in handling the <b class="fname">puffs_fs_sync</b>() callback, when cached data for every node should be flushed to stable storage.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">puffs_pn_remove</b>(<i class="farg">pn</i>)</dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
Signal that a node has been removed from the file system, but do not yet release resources associated with the node. This will prevent the nodewalk functions from accessing the node. If necessary, this is usually called from <b class="fname">puffs_node_remove</b>() and <b class="fname">puffs_node_rmdir</b>().</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">puffs_pn_put</b>(<i class="farg">pn</i>)</dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
Free all resources associated with node <i class="arg">pn</i>. This is typically called from <b class="fname">puffs_node_reclaim</b>().</dd>
</dl>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../3/puffs">puffs(3)</a></div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
June 24, 2007</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
</html>

