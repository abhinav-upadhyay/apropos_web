<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/../4/strict.dtd">
>
<head>
<meta http-equiv="Content-Type" content="te../; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="../style.css" type="text/css" media="all">
<title>
BOUNCE(5)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
BOUNCE(5)</td>
<td class="head-vol" align="center">
File Formats Manual</td>
<td class="head-rtitle" align="right">
BOUNCE(5)</td>
</tr>
</tbody>
</table>
<br>
<div class="section">
<h1>NAME</h1> bounce &#45; Postfix bounce message template format</div>
<div class="section">
<h1>SYNOPSIS</h1><br>
<b>bounce_template_file = /etc/postfix/bounce.cf</b><p>
<br>
<b>postconf -b</b> [<i>template_file</i>]</div>
<div class="section">
<h1>DESCRIPTION</h1><br>
The Postfix <b>bounce</b>(8) server produces delivery status notification (DSN) messages for undeliverable mail, delayed mail, successful delivery or address verification requests.<div style="height: 1.00em;">
&#160;</div>
By default, these notifications are generated from built-in templates with message headers and message text. Sites can override the built-in information by specifying a bounce template file with the  <b>bounce_template_file</b> configuration parameter.<div style="height: 1.00em;">
&#160;</div>
This document describes the general procedure to create a bounce template file, followed by the specific details of bounce template formats.</div>
<div class="section">
<h1>GENERAL PROCEDURE</h1><br>
To create a customized bounce template file, create a temporary copy of the file  <b>/etc/postfix/bounce.cf.default</b> and edit the temporary file.<div style="height: 1.00em;">
&#160;</div>
To preview the results of $<i>name</i> expansions in the template text, use the command<div style="height: 1.00em;">
&#160;</div>
<br>
    <b>postconf -b</b> <i>temporary_file</i><br>
<div style="height: 1.00em;">
&#160;</div>
Errors in the template will be reported to the standard error stream and to the syslog daemon.<div style="height: 1.00em;">
&#160;</div>
While previewing the text, be sure to pay particular attention to the expansion of time value parameters that appear in the delayed mail notification text.<div style="height: 1.00em;">
&#160;</div>
Once the result is satisfactory, copy the template to the Postfix configuration directory and specify in main.cf something like:<div style="height: 1.00em;">
&#160;</div>
<br>
/etc/postfix/main.cf:<br>
    bounce_template_file = /etc/postfix/bounce.cf<br>
</div>
<div class="section">
<h1>TEMPLATE FILE FORMAT</h1><br>
The template file can specify templates for failed mail, delayed mail, successful delivery or for address verification. These templates are named  <b>failure_template</b>,  <b>delay_template</b>, <b>success_template</b> and  <b>verify_template</b>, respectively.  You can but do not have to specify all four templates in a bounce template file.<div style="height: 1.00em;">
&#160;</div>
Each template starts with "<i>template_name</i><b> = &lt;&lt;EOF</b>" and ends with a line that contains the word " <b>EOF</b>" only. You can change the word EOF, but you can't enclose it in quotes as with the shell or with Perl ( <i>template_name</i><b></b>  <b>= &lt;&lt;'EOF'</b>). Here is an example:<div style="height: 1.00em;">
&#160;</div>
<br>
    # The failure template is used for undeliverable mail.<p>
<br>
    failure_template = &lt;&lt;EOF<br>
    Charset: us-ascii<br>
    From: MAILER-DAEMON (Mail Delivery System)<br>
    Subject: Undelivered Mail Returned to Sender<br>
    Postmaster-Subject: Postmaster Copy: Undelivered Mail<p>
<br>
    This is the mail system at host $myhostname.<p>
<br>
    I'm sorry to have to inform you that your message could not<br>
    be delivered to one or more recipients. It's attached below.<p>
<br>
    For further assistance, please send mail to postmaster.<p>
<br>
    If you do so, please include this problem report. You can<br>
    delete your own text from the attached returned message.<p>
<br>
                       The mail system<br>
    EOF<br>
<p>
The usage and specification of bounce templates is subject to the following restrictions:<dl>
<dt>
&#8226;</dt>
<dd>
No special meaning is given to the backslash character or to leading whitespace; these are always taken literally.</dd>
</dl>
<dl>
<dt>
&#8226;</dt>
<dd>
Inside the &lt;&lt; context, the "$" character is special. To produce a "$" character as output, specify "$$".</dd>
</dl>
<dl>
<dt>
&#8226;</dt>
<dd>
Outside the &lt;&lt; context, lines beginning with "#" are ignored, as are empty lines, and lines consisting of whitespace only.</dd>
</dl>
<p>
Examples of all templates can be found in the file  <b>bounce.cf.default</b> in the Postfix configuration directory.</div>
<div class="section">
<h1>TEMPLATE HEADER FORMAT</h1><br>
The first portion of a bounce template consists of optional template headers.  Some become message headers in the delivery status notification; some control the formatting of that notification. Headers not specified in a template will be left at their default value.<div style="height: 1.00em;">
&#160;</div>
The following headers are supported:<dl>
<dt>
<b>Charset:</b></dt>
<dd>
The MIME character set of the template message text.  See the "TEMPLATE MESSAGE TEXT FORMAT" description below.</dd>
</dl>
<dl>
<dt>
<b>From:</b></dt>
<dd>
The sender address in the message header of the delivery status notification.</dd>
</dl>
<dl>
<dt>
<b>Subject:</b></dt>
<dd>
The subject in the message header of the delivery status notification that is returned to the sender.</dd>
</dl>
<dl>
<dt>
<b>Postmaster-Subject:</b></dt>
<dd>
The subject that will be used in Postmaster copies of undeliverable or delayed mail notifications. These copies are sent under control of the notify_classes configuration parameter.</dd>
</dl>
<p>
The usage and specification of template message headers is subject to the following restrictions:<dl>
<dt>
&#8226;</dt>
<dd>
Template message header names can be specified in upper case, lower case or mixed case. Postfix always produces bounce message header labels of the form " <b>From:</b>" and " <b>Subject:</b>".</dd>
</dl>
<dl>
<dt>
&#8226;</dt>
<dd>
Template message headers must not span multiple lines.</dd>
</dl>
<dl>
<dt>
&#8226;</dt>
<dd>
Template message headers do not support $parameter expansions.</dd>
</dl>
<dl>
<dt>
&#8226;</dt>
<dd>
Template message headers must contain ASCII characters only, and must not contain ASCII null characters.</dd>
</dl>
</div>
<div class="section">
<h1>TEMPLATE MESSAGE TEXT FORMAT</h1><br>
The second portion of a bounce template consists of message text. As the above example shows, template message text may contain main.cf $parameters. Besides the parameters that are defined in main.cf, the following parameters are treated specially depending on the suffix that is appended to their name.<dl>
<dt>
<b>delay_warning_time_</b><i>suffix</i></dt>
<dd>
Expands into the value of the <b>delay_warning_time</b> parameter, expressed in the time unit specified by  <i>suffix</i>, which is one of <b>seconds</b>, <b>minutes</b>,  <b>hours</b><b>, </b><b>days</b>, or <b>weeks</b>.</dd>
</dl>
<dl>
<dt>
<b>maximal_queue_lifetime_</b><i>suffix</i></dt>
<dd>
Expands into the value of the <b>maximal_queue_lifetime</b> parameter, expressed in the time unit specified by  <i>suffix</i>.  See above under <b>delay_warning_time</b> for possible  <i>suffix</i> values.</dd>
</dl>
<p>
The usage and specification of template message text is subject to the following restrictions:<dl>
<dt>
&#8226;</dt>
<dd>
The template message text is not sent in Postmaster copies of delivery status notifications.</dd>
</dl>
<dl>
<dt>
&#8226;</dt>
<dd>
If the template message text contains non-ASCII characters, Postfix requires that the  <b>Charset:</b> template header is updated.  Specify an appropriate superset of US-ASCII. A superset is needed because Postfix appends ASCII text after the message template when it sends a delivery status notification.</dd>
</dl>
</div>
<div class="section">
<h1>SEE ALSO</h1><br>
bounce(8), Postfix delivery status notifications<br>
postconf(5), configuration parameters</div>
<div class="section">
<h1>LICENSE</h1><br>
The Secure Mailer license must be distributed with this software.</div>
<div class="section">
<h1>HISTORY</h1><br>
The Postfix bounce template format was originally developed by Nicolas Riendeau.</div>
<div class="section">
<h1>AUTHOR(S)</h1><br>
Wietse Venema<br>
IBM T.J. Watson Research<br>
P.O. Box 704<br>
Yorktown Heights, NY 10598, USA</div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tr>
<td class="foot-date">
</td>
<td class="foot-os" align="right">
</td>
</tr>
</table>
</div>
</body>
<>

