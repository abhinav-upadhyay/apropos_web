<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="../style.css" type="text/css" media="all">
<title>
PAM.CONF(5)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
PAM.CONF(5)</td>
<td class="head-vol" align="center">
File Formats Manual</td>
<td class="head-rtitle" align="right">
PAM.CONF(5)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">pam.conf</b> &#8212; <span class="desc">PAM policy file format</span></div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> The PAM library searches for policies in the following files, in decreasing order of preference:<ol style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-enum">
<li class="list-enum" style="margin-top: 1.00em;">
<i class="file">/etc/pam.d/</i><i class="arg">service-name</i></li>
<li class="list-enum" style="margin-top: 1.00em;">
<i class="file">/etc/pam.conf</i></li>
</ol>
<p>
If none of these locations contains a policy for the given service, the &#8220;<span class="define">other</span>&#8221; policy is used instead, if it exists.<p>
Entries in per-service policy files must be of one of the two forms below:<p>
<pre style="margin-left: 5.00ex;" class="lit display">
<i class="arg">facility control-flag module-path</i> &#91;<span class="opt"><i class="arg">arguments ...</i></span>&#93; 
<i class="arg">facility</i> <b class="flag">include</b> <i class="arg">other-service-name</i></pre>
<p>
Entries in <i class="file">pam.conf</i>-style policy files are of the same form, but are prefixed by an additional field specifying the name of the service they apply to.<p>
In both cases, blank lines and comments introduced by a &#8216;<code class="lit">#</code>&#8217; sign are ignored, and the normal shell quoting rules apply. The precise details of how the file is tokenized are described in <a class="link-man" href="../3/openpam_readword">openpam_readword(3)</a>.<p>
The <i class="arg">facility</i> field specifies the facility the entry applies to, and is one of:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">auth</b></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
Authentication functions (<a class="link-man" href="../3/pam_authenticate">pam_authenticate(3)</a>, <a class="link-man" href="../3/pam_setcred">pam_setcred(3)</a>)</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">account</b></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
Account management functions (<a class="link-man" href="../3/pam_acct_mgmt">pam_acct_mgmt(3)</a>)</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">session</b></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
Session handling functions (<a class="link-man" href="../3/pam_open_session">pam_open_session(3)</a>, <a class="link-man" href="../3/pam_close_session">pam_close_session(3)</a>)</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">password</b></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
Password management functions (<a class="link-man" href="../3/pam_chauthtok">pam_chauthtok(3)</a>)</dd>
</dl>
<p>
The <i class="arg">control-flag</i> field determines how the result returned by the module affects the flow of control through (and the final result of) the rest of the chain, and is one of:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">required</b></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
If this module succeeds, the result of the chain will be success unless a later module fails. If it fails, the rest of the chain still runs, but the final result will be failure regardless of the success of later modules.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">requisite</b></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
If this module succeeds, the result of the chain will be success unless a later module fails. If the module fails, the chain is broken and the result is failure.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">sufficient</b></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
If this module succeeds, the chain is broken and the result is success. If it fails, the rest of the chain still runs, but the final result will be failure unless a later module succeeds.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">binding</b></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
If this module succeeds, the chain is broken and the result is success. If it fails, the rest of the chain still runs, but the final result will be failure regardless of the success of later modules.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">optional</b></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
If this module succeeds, the result of the chain will be success unless a later module fails. If this module fails, the result of the chain will be failure unless a later module succeeds.</dd>
</dl>
<p>
There are two exceptions to the above: <b class="flag">sufficient</b> and <b class="flag">binding</b> modules are treated as <b class="flag">optional</b> by <a class="link-man" href="../3/pam_setcred">pam_setcred(3)</a>, and in the <span class="define">PAM_PRELIM_CHECK</span> phase of <a class="link-man" href="../3/pam_chauthtok">pam_chauthtok(3)</a>.<p>
The <i class="arg">module-path</i> field specifies the name or full path of the module to call. If only the name is specified, the PAM library will search for it in the following location:<ol style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-enum">
<li class="list-enum" style="margin-top: 1.00em;">
<i class="file">/usr/lib/security</i></li>
</ol>
<p>
The remaining fields, if any, are passed unmodified to the module if and when it is invoked.<p>
The <b class="flag">include</b> form of entry causes entries from a different chain (specified by <i class="arg">other-system-name</i>) to be included in the current one. This allows one to define system-wide policies which are then included into service-specific policies. The system-wide policy can then be modified without having to also modify each and every service-specific policy.<p>
<div class="symb" style="display:inline;margin-left: 1.00ex;">
Take care not to introduce loops when using <b class="flag">include</b> rules, as there is currently no loop detection in place.</div>
</div>
<div class="section">
<h1 id="x4d4f44554c45204f5054494f4e53">MODULE OPTIONS</h1> Some PAM library functions may alter their behavior when called by a service module if certain module options were specified, regardless of whether the module itself accords them any importance. One such option is <b class="flag">debug</b>, which causes the dispatcher to enable debugging messages before calling each service function, and disable them afterwards (unless they were already enabled). Other special options include:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">authtok_prompt</b>=<i class="arg">prompt</i>, <b class="flag">oldauthtok_prompt</b>=<i class="arg">prompt</i>, <b class="flag">user_prompt</b>=<i class="arg">prompt</i></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
These options can be used to override the prompts used by <a class="link-man" href="../3/pam_get_authtok">pam_get_authtok(3)</a> and <a class="link-man" href="../3/pam_get_user">pam_get_user(3)</a>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">echo_pass</b></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
This option controls whether <a class="link-man" href="../3/pam_get_authtok">pam_get_authtok(3)</a> will allow the user to see what they are typing.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">try_first_pass</b>, <b class="flag">use_first_pass</b></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
These options control <a class="link-man" href="../3/pam_get_authtok">pam_get_authtok(3)</a>'s use of cached authentication tokens.</dd>
</dl>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../3/pam">pam(3)</a></div>
<div class="section">
<h1 id="x5354414e4441524453">STANDARDS</h1> <span class="ref"><span class="ref-title">X/Open Single Sign-On Service (XSSO) - Pluggable Authentication Modules</span>, <span class="ref-date">June 1997</span>.</span></div>
<div class="section">
<h1 id="x415554484f5253">AUTHORS</h1> The OpenPAM library was developed for the <span class="unix">FreeBSD</span> Project by ThinkSec AS and Network Associates Laboratories, the Security Research Division of Network Associates, Inc. under DARPA/SPAWAR contract N66001-01-C-8035 (&#8220;CBOSS&#8221;), as part of the DARPA CHATS research program.<p>
The OpenPAM library is maintained by <span class="author">Dag-Erling Sm&#248;rgrav</span> &#60;<a class="link-mail" href="mailto:des@des.no">des@des.no</a>&#62;.</div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
September 12, 2014</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
</html>

