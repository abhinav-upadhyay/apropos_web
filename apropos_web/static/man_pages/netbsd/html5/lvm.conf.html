<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="/static/man_pages/netbsd/style.css" type="text/css" media="all">
<title>
LVM.CONF(5)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
LVM.CONF(5)</td>
<td class="head-vol" align="center">
File Formats Manual</td>
<td class="head-rtitle" align="right">
LVM.CONF(5)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>NAME</h1> lvm.conf &#45; Configuration file for LVM2</div>
<div class="section">
<h1>SYNOPSIS</h1> <b>/etc/lvm/lvm.conf</b></div>
<div class="section">
<h1>DESCRIPTION</h1> lvm.conf is loaded during the initialisation phase of  <b>lvm</b> (8).  This file can in turn lead to other files being loaded - settings read in later override earlier settings.  File timestamps are checked between commands and if any have changed, all the files are reloaded.<p>
Use <b>lvm dumpconfig</b> to check what settings are in use.</div>
<div class="section">
<h1>SYNTAX</h1> This section describes the configuration file syntax.<p>
Whitespace is not significant unless it is within quotes. This provides a wide choice of acceptable indentation styles. Comments begin with # and continue to the end of the line. They are treated as whitespace.<p>
Here is an informal grammar:<dl>
<dt>
<b>file = value*</b></dt>
<dd>
<div style="height: 0.00em;">
&#160;</div>
A configuration file consists of a set of values.</dd>
</dl>
<dl>
<dt>
<b>value = section | assignment</b></dt>
<dd>
<div style="height: 0.00em;">
&#160;</div>
A value can either be a new section, or an assignment.</dd>
</dl>
<dl>
<dt>
<b>section = identifier '{' value* '}'</b></dt>
<dd>
<div style="height: 0.00em;">
&#160;</div>
A section is groups associated values together.<div style="height: 0.00em;">
&#160;</div>
It is denoted by a name and delimited by curly brackets.<div style="height: 0.00em;">
&#160;</div>
e.g.	backup {<div style="height: 0.00em;">
&#160;</div>
		...<div style="height: 0.00em;">
&#160;</div>
	}</dd>
</dl>
<dl>
<dt>
<b>assignment = identifier '=' (array | type)</b></dt>
<dd>
<div style="height: 0.00em;">
&#160;</div>
An assignment associates a type with an identifier.<div style="height: 0.00em;">
&#160;</div>
e.g.	max_archives = 42<div style="height: 0.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
<b>array = '[' (type ',')* type ']' | '[' ']'</b></dt>
<dd>
<div style="height: 0.00em;">
&#160;</div>
Inhomogeneous arrays are supported.<div style="height: 0.00em;">
&#160;</div>
Elements must be separated by commas.<div style="height: 0.00em;">
&#160;</div>
An empty array is acceptable.</dd>
</dl>
<dl>
<dt>
<b>type = integer | float | string</b></dt>
<dd>
<b>integer = [0-9]*</b><div style="height: 0.00em;">
&#160;</div>
<b>float = [0-9]*&#46;[0-9]*</b><div style="height: 0.00em;">
&#160;</div>
<b>string = '"' .* '"'</b></dd>
</dl>
<dl>
<dt>
</dt>
<dd>
Strings must be enclosed in double quotes.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
</div>
<div class="section">
<h1>SECTIONS</h1> The sections that may be present in the file are:<dl>
<dt>
<b>devices</b> &#8212; Device settings</dt>
<dd>
</dd>
</dl>
<dl>
<dt>
</dt>
<dd>
<b>dir</b> &#8212; Directory in which to create volume group device nodes. Defaults to "/dev".  Commands also accept this as a prefix on volume group names.</dd>
</dl>
<dl>
<dt>
</dt>
<dd>
<b>scan</b> &#8212; List of directories to scan recursively for LVM physical volumes. Devices in directories outside this hierarchy will be ignored. Defaults to "/dev".</dd>
</dl>
<dl>
<dt>
</dt>
<dd>
<b>preferred_names</b> &#8212; List of patterns compared in turn against all the pathnames referencing the same device in in the scanned directories. The pathname that matches the earliest pattern in the list is the one used in any output.  As an example, if device-mapper multipathing is used, the following will select multipath device names:<div style="height: 0.00em;">
&#160;</div>
<b>devices { preferred_names = [ "^/dev/mapper/mpath" ] }</b></dd>
</dl>
<dl>
<dt>
</dt>
<dd>
<b>filter</b> &#8212; List of patterns to apply to devices found by a scan. Patterns are regular expressions delimited by any character and preceded by  <b>a</b> (for accept) or <b>r</b> (for reject).  The list is traversed in order, and the first regex that matches determines if the device will be accepted or rejected (ignored).  Devices that don't match any patterns are accepted. If you want to reject patterns that don't match, end the list with "r/.*/". If there are several names for the same device (e.g. symbolic links in /dev), if any name matches any  <b>a</b> pattern, the device is accepted; otherwise if any name matches any  <b>r</b> pattern it is rejected; otherwise it is accepted. As an example, to ignore /dev/cdrom you could use:<div style="height: 0.00em;">
&#160;</div>
<b>devices { filter=["r|cdrom|"] }</b></dd>
</dl>
<dl>
<dt>
</dt>
<dd>
<b>cache_dir</b> &#8212; Persistent filter cache file directory. Defaults to "/etc/lvm/cache".</dd>
</dl>
<dl>
<dt>
</dt>
<dd>
<b>write_cache_state</b> &#8212; Set to 0 to disable the writing out of the persistent filter cache file when  <b>lvm</b> exits. Defaults to 1.</dd>
</dl>
<dl>
<dt>
</dt>
<dd>
<b>types</b> &#8212; List of pairs of additional acceptable block device types found in /proc/devices together with maximum (non-zero) number of partitions (normally 16).  By default, LVM2 supports ide, sd, md, loop, dasd, dac960, nbd, ida, cciss, ubd, ataraid, drbd, power2, i2o_block and iseries/vd.  Block devices with major numbers of different types are ignored by LVM2. Example:  <b>types = ["fd", 16]</b>. To create physical volumes on device-mapper volumes created outside LVM2, perhaps encrypted ones from  <b>cryptsetup</b>, you'll need  <b>types = ["device-mapper", 16]</b>.  But if you do this, be careful to avoid recursion within LVM2.  The figure for number of partitions is not currently used in LVM2 - and might never be.</dd>
</dl>
<dl>
<dt>
</dt>
<dd>
<b>sysfs_scan</b> (em If set to 1 and your kernel supports sysfs and it is mounted, sysfs will be used as a quick way of filtering out block devices that are not present.</dd>
</dl>
<dl>
<dt>
</dt>
<dd>
<b>md_component_detection</b> (em If set to 1, LVM2 will ignore devices used as components of software RAID (md) devices by looking for md superblocks. This doesn't always work satisfactorily e.g. if a device has been reused without wiping the md superblocks first.</dd>
</dl>
<dl>
<dt>
<b>log</b> &#8212; Default log settings</dt>
<dd>
</dd>
</dl>
<dl>
<dt>
</dt>
<dd>
<b>file</b> &#8212; Location of log file.  If this entry is not present, no log file is written.</dd>
</dl>
<dl>
<dt>
</dt>
<dd>
<b>overwrite</b> &#8212; Set to 1 to overwrite the log file each time a tool is invoked.  By default tools append messages to the log file.</dd>
</dl>
<dl>
<dt>
</dt>
<dd>
<b>level</b> &#8212; Log level (0-9) of messages to write to the file. 9 is the most verbose; 0 should produce no output.</dd>
</dl>
<dl>
<dt>
</dt>
<dd>
<b>verbose</b> &#8212; Default level (0-3) of messages sent to stdout or stderr. 3 is the most verbose; 0 should produce the least output.</dd>
</dl>
<dl>
<dt>
</dt>
<dd>
<b>syslog</b> &#8212; Set to 1 (the default) to send log messages through syslog. Turn off by setting to 0.  If you set to an integer greater than one, this is used - unvalidated - as the facility.  The default is LOG_USER. See /usr/include/sys/syslog.h for safe facility values to use. For example, LOG_LOCAL0 might be 128.</dd>
</dl>
<dl>
<dt>
</dt>
<dd>
<b>indent</b> &#8212; When set to 1 (the default) messages are indented according to their severity, two spaces per level. Set to 0 to turn off indentation.</dd>
</dl>
<dl>
<dt>
</dt>
<dd>
<b>command_names</b> &#8212; When set to 1, the command name is used as a prefix for each message. Default is 0 (off).</dd>
</dl>
<dl>
<dt>
</dt>
<dd>
<b>prefix</b> &#8212; Prefix used for all messages (after the command name). Default is two spaces.</dd>
</dl>
<dl>
<dt>
</dt>
<dd>
<b>activation</b> &#8212; Set to 1 to log messages while devices are suspended during activation. Only set this temporarily while debugging a problem because in low memory situations this setting can cause your machine to lock up.</dd>
</dl>
<dl>
<dt>
<b>backup</b> &#8212; Configuration for metadata backups.</dt>
<dd>
</dd>
</dl>
<dl>
<dt>
</dt>
<dd>
<b>archive_dir</b> &#8212; Directory used for automatic metadata archives. Backup copies of former metadata for each volume group are archived here. Defaults to "/etc/lvm/archive".</dd>
</dl>
<dl>
<dt>
</dt>
<dd>
<b>backup_dir</b> &#8212; Directory used for automatic metadata backups. A single backup copy of the current metadata for each volume group is stored here. Defaults to "/etc/lvm/backup".</dd>
</dl>
<dl>
<dt>
</dt>
<dd>
<b>archive</b> &#8212; Whether or not tools automatically archive existing metadata into  <b>archive_dir</b> before making changes to it. Default is 1 (automatic archives enabled). Set to 0 to disable. Disabling this might make metadata recovery difficult or impossible if something goes wrong.</dd>
</dl>
<dl>
<dt>
</dt>
<dd>
<b>backup</b> &#8212; Whether or not tools make an automatic backup into  <b>backup_dir</b> after changing metadata. Default is 1 (automatic backups enabled).  Set to 0 to disable. Disabling this might make metadata recovery difficult or impossible if something goes wrong.</dd>
</dl>
<dl>
<dt>
</dt>
<dd>
<b>retain_min</b> &#8212; Minimum number of archives to keep. Defaults to 10.</dd>
</dl>
<dl>
<dt>
</dt>
<dd>
<b>retain_days</b> &#8212; Minimum number of days to keep archive files. Defaults to 30.</dd>
</dl>
<dl>
<dt>
<b>shell</b> &#8212; LVM2 built-in readline shell settings</dt>
<dd>
</dd>
</dl>
<dl>
<dt>
</dt>
<dd>
<b>history_size</b> &#8212; Maximum number of lines of shell history to retain (default 100) in $HOME/.lvm_history</dd>
</dl>
<dl>
<dt>
<b>global</b> &#8212; Global settings</dt>
<dd>
</dd>
</dl>
<dl>
<dt>
</dt>
<dd>
<b>test</b> &#8212; If set to 1, run tools in test mode i.e. no changes to the on-disk metadata will get made.  It's equivalent to having the -t option on every command.</dd>
</dl>
<dl>
<dt>
</dt>
<dd>
<b>activation</b> &#8212; Set to 0 to turn off all communication with the device-mapper driver.  Useful if you want to manipulate logical volumes while device-mapper is not present in your kernel.</dd>
</dl>
<dl>
<dt>
</dt>
<dd>
<b>proc</b> &#8212; Mount point of proc filesystem. Defaults to /proc.</dd>
</dl>
<dl>
<dt>
</dt>
<dd>
<b>umask</b> &#8212; File creation mask for any files and directories created. Interpreted as octal if the first digit is zero. Defaults to 077. Use 022 to allow other users to read the files by default.</dd>
</dl>
<dl>
<dt>
</dt>
<dd>
<b>format</b> &#8212; The default value of <b>--metadatatype</b> used to determine which format of metadata to use when creating new physical volumes and volume groups.  <b>lvm1</b> or <b>lvm2</b>.</dd>
</dl>
<dl>
<dt>
</dt>
<dd>
<b>fallback_to_lvm1</b> &#8212; Set this to 1 if you need to be able to switch between 2.4 kernels using LVM1 and kernels including device-mapper. The LVM2 tools should be installed as normal and the LVM1 tools should be installed with a .lvm1 suffix e.g. vgscan.lvm1. If an LVM2 tool is then run but unable to communicate with device-mapper, it will automatically invoke the equivalent LVM1 version of the tool.  Note that for LVM1 tools to manipulate physical volumes and volume groups created by LVM2 you must use  <b>--metadataformat lvm1</b> when creating them.</dd>
</dl>
<dl>
<dt>
</dt>
<dd>
<b>library_dir</b> &#8212; A directory searched for LVM2's shared libraries ahead of the places  <b>dlopen</b> (3) searches.</dd>
</dl>
<dl>
<dt>
</dt>
<dd>
<b>format_libraries</b> &#8212; A list of shared libraries to load that contain code to process different formats of metadata. For example, liblvm2formatpool.so is needed to read GFS pool metadata if LVM2 was configured  <b>--with-pool=shared</b>.</dd>
</dl>
<dl>
<dt>
</dt>
<dd>
<b>locking_type</b> &#8212; What type of locking to use. 1 is the default, which use flocks on files in  <b>locking_dir</b> (see below) to avoid conflicting LVM2 commands running concurrently on a single machine. 0 disables locking and risks corrupting your metadata. If set to 2, the tools will load the external  <b>locking_library</b> (see below). If the tools were configured  <b>--with-cluster=internal</b> (the default) then 3 means to use built-in cluster-wide locking. All changes to logical volumes and their states are communicated using locks.</dd>
</dl>
<dl>
<dt>
</dt>
<dd>
<b>locking_dir</b> &#8212; The directory LVM2 places its file locks if  <b>locking_type</b> is set to 1.  The default is <b>/var/lock/lvm</b>.</dd>
</dl>
<dl>
<dt>
</dt>
<dd>
<b>locking_library</b> &#8212; The name of the external locking library to load if  <b>locking_type</b> is set to 2. The default is  <b>liblvm2clusterlock.so</b>.  If you need to write such a library, look at the lib/locking source code directory.</dd>
</dl>
<dl>
<dt>
<b>tags</b> &#8212; Host tag settings</dt>
<dd>
</dd>
</dl>
<dl>
<dt>
</dt>
<dd>
<b>hosttags</b> &#8212; If set to 1, create a host tag with the machine name. Setting this to 0 does nothing, neither creating nor destroying any tag. The machine name used is the nodename as returned by  <b>uname</b> (2).</dd>
</dl>
<dl>
<dt>
</dt>
<dd>
Additional host tags to be set can be listed here as subsections. The @ prefix for tags is optional. Each of these host tag subsections can contain a  <b>host_list</b> array of host names. If any one of these entries matches the machine name exactly then the host tag gets defined on this particular host, otherwise it doesn't.</dd>
</dl>
<dl>
<dt>
</dt>
<dd>
After lvm.conf has been processed, LVM2 works through each host tag that has been defined in turn, and if there is a configuration file called lvm_ <b>&lt;host_tag&gt;</b>.conf it attempts to load it. Any settings read in override settings found in earlier files. Any additional host tags defined get appended to the search list, so in turn they can lead to further configuration files being processed. Use  <b>lvm dumpconfig</b> to check the result of config file processing.</dd>
</dl>
<dl>
<dt>
</dt>
<dd>
The following example always sets host tags <b>tag1</b> and sets  <b>tag2</b> on machines fs1 and fs2:</dd>
</dl>
<dl>
<dt>
</dt>
<dd>
tags { tag1 { } tag2 { host_list = [ "fs1", "fs2" ] } }</dd>
</dl>
<dl>
<dt>
</dt>
<dd>
These options are useful if you are replicating configuration files around a cluster.  Use of  <b>hosttags = 1</b> means every machine can have static and identical local configuration files yet use different settings and activate different logical volumes by default.  See also  <b>volume_list</b> below and <b>--addtag</b> in  <b>lvm</b> (8).</dd>
</dl>
<dl>
<dt>
<b>activation</b> &#8212; Settings affecting device-mapper activation</dt>
<dd>
</dd>
</dl>
<dl>
<dt>
</dt>
<dd>
<b>missing_stripe_filler</b> &#8212; When activating an incomplete logical volume in partial mode, this option dictates how the missing data is replaced.  A value of "error" will cause activation to create error mappings for the missing data, meaning that read access to missing portions of the volume will result in I/O errors. You can instead also use a device path, and in that case this device will be used in place of missing stripes. However, note that using anything other than "error" with mirrored or snapshotted volumes is likely to result in data corruption.  For instructions on how to create a device that always returns zeros, see  <b>lvcreate</b> (8).</dd>
</dl>
<dl>
<dt>
</dt>
<dd>
<b>mirror_region_size</b> &#8212; Unit size in KB for copy operations when mirroring.</dd>
</dl>
<dl>
<dt>
</dt>
<dd>
<b>readahead</b> &#8212; Used when there is no readahead value stored in the volume group metadata.  Set to  <b>none</b> to disable readahead in these circumstances or  <b>auto</b> to use the default value chosen by the kernel.</dd>
</dl>
<dl>
<dt>
</dt>
<dd>
<b>reserved_memory</b>, <b>reserved_stack</b> &#8212; How many KB to reserve for LVM2 to use while logical volumes are suspended.  If insufficient memory is reserved before suspension, there is a risk of machine deadlock.</dd>
</dl>
<dl>
<dt>
</dt>
<dd>
<b>process_priority</b> &#8212; The nice value to use while devices are suspended.  This is set to a high priority so that logical volumes are suspended (with I/O generated by other processes to those logical volumes getting queued) for the shortest possible time.</dd>
</dl>
<dl>
<dt>
</dt>
<dd>
<b>volume_list</b> &#8212; This acts as a filter through which all requests to activate a logical volume on this machine are passed.  A logical volume is only activated if it matches an item in the list.  Tags must be preceded by @ and are checked against all tags defined in the logical volume and volume group metadata for a match. @* is short-hand to check every tag set on the host machine (see  <b>tags</b> above). Logical volume and volume groups can also be included in the list by name e.g. vg00, vg00/lvol1.</dd>
</dl>
<dl>
<dt>
<b>metadata</b> &#8212; Advanced metadata settings</dt>
<dd>
</dd>
</dl>
<dl>
<dt>
</dt>
<dd>
<b>pvmetadatacopies</b> &#8212; When creating a physical volume using the LVM2 metadata format, this is the default number of copies of metadata to store on each physical volume. Currently it can be set to 0, 1 or 2.  The default is 1. If set to 2, one copy is placed at the beginning of the disk and the other is placed at the end. It can be overridden on the command line with  <b>--metadatacopies</b>. If creating a volume group with just one physical volume, it's a good idea to have 2 copies.  If creating a large volume group with many physical volumes, you may decide that 3 copies of the metadata is sufficient, i.e. setting it to 1 on three of the physical volumes, and 0 on the rest.  Every volume group must contain at least one physical volume with at least 1 copy of the metadata (unless using the text files described below).  The disadvantage of having lots of copies is that every time the tools access the volume group, every copy of the metadata has to be accessed, and this slows down the tools.</dd>
</dl>
<dl>
<dt>
</dt>
<dd>
<b>pvmetadatasize</b> &#8212; Approximate number of sectors to set aside for each copy of the metadata. Volume groups with large numbers of physical or logical volumes, or volumes groups containing complex logical volume structures will need additional space for their metadata. The metadata areas are treated as circular buffers, so unused space becomes filled with an archive of the most recent previous versions of the metadata.</dd>
</dl>
<dl>
<dt>
</dt>
<dd>
<b>dirs</b> &#8212; List of directories holding live copies of LVM2 metadata as text files.  These directories must not be on logical volumes.  It is possible to use LVM2 with a couple of directories here, preferably on different (non-logical-volume) filesystems and with no other on-disk metadata,  <b>pvmetadatacopies = 0</b>. Alternatively these directories can be in addition to the on-disk metadata areas.  This feature was created during the development of the LVM2 metadata before the new on-disk metadata areas were designed and no longer gets tested. It is not supported under low-memory conditions, and it is important never to edit these metadata files unless you fully understand how things work: to make changes you should always use the tools as normal, or else vgcfgbackup, edit backup, vgcfgrestore.</dd>
</dl>
</div>
<div class="section">
<h1>FILES</h1> <i>/etc/lvm/lvm.conf</i> <i>/etc/lvm/archive</i> <i>/etc/lvm/backup</i> <i>/etc/lvm/cache/.cache</i> <i>/var/lock/lvm</i></div>
<div class="section">
<h1>SEE ALSO</h1> <b>lvm</b>(8), <b>umask</b>(2), <b>uname</b>(2), <b>dlopen</b>(3), <b>syslog</b>(3), <b>syslog.conf</b>(5)</div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tr>
<td class="foot-date">
LVM TOOLS 2.02.44-cvs (02-17-09)</td>
<td class="foot-os" align="right">
Sistina Software UK</td>
</tr>
</table>
</div>
</body>
</html>

