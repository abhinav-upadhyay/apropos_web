<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/../4/strict.dtd">
>
<head>
<meta http-equiv="Content-Type" content="te../; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="../style.css" type="text/css" media="all">
<title>
RELOCATED(5)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
RELOCATED(5)</td>
<td class="head-vol" align="center">
File Formats Manual</td>
<td class="head-rtitle" align="right">
RELOCATED(5)</td>
</tr>
</tbody>
</table>
<br>
<div class="section">
<h1>NAME</h1> relocated &#45; Postfix relocated table format</div>
<div class="section">
<h1>SYNOPSIS</h1><br>
<b>postmap /etc/postfix/relocated</b></div>
<div class="section">
<h1>DESCRIPTION</h1><br>
The optional <b>relocated</b>(5) table provides the information that is used in "user has moved to  <i>new_location</i>" bounce messages.<div style="height: 1.00em;">
&#160;</div>
Normally, the <b>relocated</b>(5) table is specified as a text file that serves as input to the  <b>postmap</b>(1) command. The result, an indexed file in  <b>dbm</b> or <b>db</b> format, is used for fast searching by the mail system. Execute the command " <b>postmap /etc/postfix/relocated</b>" to rebuild an indexed file after changing the corresponding relocated table.<div style="height: 1.00em;">
&#160;</div>
When the table is provided via other means such as NIS, LDAP or SQL, the same lookups are done as for ordinary indexed files.<div style="height: 1.00em;">
&#160;</div>
Alternatively, the table can be provided as a regular-expression map where patterns are given as regular expressions, or lookups can be directed to TCP-based server. In those case, the lookups are done in a slightly different way as described below under "REGULAR EXPRESSION TABLES" or "TCP-BASED TABLES".<div style="height: 1.00em;">
&#160;</div>
Table lookups are case insensitive.</div>
<div class="section">
<h1>CASE FOLDING</h1><br>
The search string is folded to lowercase before database lookup. As of Postfix 2.3, the search string is not case folded with database types such as regexp: or pcre: whose lookup fields can match both upper and lower case.</div>
<div class="section">
<h1>TABLE FORMAT</h1><br>
The input format for the <b>postmap</b>(1) command is as follows:<dl>
<dt>
&#8226;</dt>
<dd>
An entry has one of the following form:<div style="height: 1.00em;">
&#160;</div>
<br>
     <i>pattern      new_location</i><br>
<div style="height: 1.00em;">
&#160;</div>
Where <i>new_location</i> specifies contact information such as an email address, or perhaps a street address or telephone number.</dd>
</dl>
<dl>
<dt>
&#8226;</dt>
<dd>
Empty lines and whitespace-only lines are ignored, as are lines whose first non-whitespace character is a `#'.</dd>
</dl>
<dl>
<dt>
&#8226;</dt>
<dd>
A logical line starts with non-whitespace text. A line that starts with whitespace continues a logical line.</dd>
</dl>
</div>
<div class="section">
<h1>TABLE SEARCH ORDER</h1><br>
With lookups from indexed files such as DB or DBM, or from networked tables such as NIS, LDAP or SQL, patterns are tried in the order as listed below:<dl>
<dt>
<i>user</i>@<i>domain</i></dt>
<dd>
Matches <i>user</i>@<i>domain</i>. This form has precedence over all other forms.</dd>
</dl>
<dl>
<dt>
<i>user</i></dt>
<dd>
Matches <i>user</i>@<i>site</i> when <i>site</i> is $<b>myorigin</b>, when  <i>site</i> is listed in $<b>mydestination</b>, or when <i>site</i> is listed in $ <b>inet_interfaces</b> or $<b>proxy_interfaces</b>.</dd>
</dl>
<dl>
<dt>
@<i>domain</i></dt>
<dd>
Matches other addresses in <i>domain</i>. This form has the lowest precedence.</dd>
</dl>
</div>
<div class="section">
<h1>ADDRESS EXTENSION</h1><br>
When a mail address localpart contains the optional recipient delimiter (e.g.,  <i>user+foo</i>@<i>domain</i>), the lookup order becomes:  <i>user+foo</i>@<i>domain</i>, <i>user</i>@<i>domain</i>, <i>user+foo</i>,  <i>user</i>, and @<i>domain</i>.</div>
<div class="section">
<h1>REGULAR EXPRESSION TABLES</h1><br>
This section describes how the table lookups change when the table is given in the form of regular expressions or when lookups are directed to a TCP-based server. For a description of regular expression lookup table syntax, see  <b>regexp_table</b>(5) or  <b>pcre_table</b>(5). For a description of the TCP client/server table lookup protocol, see  <b>tcp_table</b>(5). This feature is not available up to and including Postfix version 2.4.<div style="height: 1.00em;">
&#160;</div>
Each pattern is a regular expression that is applied to the entire address being looked up. Thus,  <i>user@domain</i> mail addresses are not broken up into their  <i>user</i> and <i>@domain</i> constituent parts, nor is  <i>user+foo</i> broken up into <i>user</i> and <i>foo</i>.<div style="height: 1.00em;">
&#160;</div>
Patterns are applied in the order as specified in the table, until a pattern is found that matches the search string.<div style="height: 1.00em;">
&#160;</div>
Results are the same as with indexed file lookups, with the additional feature that parenthesized substrings from the pattern can be interpolated as  <b>$1</b>, <b>$2</b> and so on.</div>
<div class="section">
<h1>TCP-BASED TABLES</h1><br>
This section describes how the table lookups change when lookups are directed to a TCP-based server. For a description of the TCP client/server lookup protocol, see  <b>tcp_table</b>(5). This feature is not available up to and including Postfix version 2.4.<div style="height: 1.00em;">
&#160;</div>
Each lookup operation uses the entire address once.  Thus,  <i>user@domain</i> mail addresses are not broken up into their  <i>user</i> and <i>@domain</i> constituent parts, nor is  <i>user+foo</i> broken up into <i>user</i> and <i>foo</i>.<div style="height: 1.00em;">
&#160;</div>
Results are the same as with indexed file lookups.</div>
<div class="section">
<h1>BUGS</h1><br>
The table format does not understand quoting conventions.</div>
<div class="section">
<h1>CONFIGURATION PARAMETERS</h1><br>
The following <b>main.cf</b> parameters are especially relevant. The text below provides only a parameter summary. See  <b>postconf</b>(5) for more details including examples.<dl>
<dt>
<b>relocated_maps</b></dt>
<dd>
List of lookup tables for relocated users or sites.</dd>
</dl>
<p>
Other parameters of interest:<dl>
<dt>
<b>inet_interfaces</b></dt>
<dd>
The network interface addresses that this system receives mail on. You need to stop and start Postfix when this parameter changes.</dd>
</dl>
<dl>
<dt>
<b>mydestination</b></dt>
<dd>
List of domains that this mail system considers local.</dd>
</dl>
<dl>
<dt>
<b>myorigin</b></dt>
<dd>
The domain that is appended to locally-posted mail.</dd>
</dl>
<dl>
<dt>
<b>proxy_interfaces</b></dt>
<dd>
Other interfaces that this machine receives mail on by way of a proxy agent or network address translator.</dd>
</dl>
</div>
<div class="section">
<h1>SEE ALSO</h1><br>
trivial-rewrite(8), address resolver<br>
postmap(1), Postfix lookup table manager<br>
postconf(5), configuration parameters</div>
<div class="section">
<h1>README FILES</h1><br>
Use "<b>postconf readme_directory</b>" or " <b>postconf_directory</b>" to locate this information.<br>
DATABASE_README, Postfix lookup table overview<br>
ADDRESS_REWRITING_README, address rewriting guide</div>
<div class="section">
<h1>LICENSE</h1><br>
The Secure Mailer license must be distributed with this software.</div>
<div class="section">
<h1>AUTHOR(S)</h1><br>
Wietse Venema<br>
IBM T.J. Watson Research<br>
P.O. Box 704<br>
Yorktown Heights, NY 10598, USA</div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tr>
<td class="foot-date">
</td>
<td class="foot-os" align="right">
</td>
</tr>
</table>
</div>
</body>
<>

