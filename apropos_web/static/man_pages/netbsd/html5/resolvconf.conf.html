<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/../4/strict.dtd">
>
<head>
<meta http-equiv="Content-Type" content="te../; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="../style.css" type="text/css" media="all">
<title>
RESOLVCONF.CONF(5)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
RESOLVCONF.CONF(5)</td>
<td class="head-vol" align="center">
File Formats Manual</td>
<td class="head-rtitle" align="right">
RESOLVCONF.CONF(5)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">resolvconf.conf</b> &#8212; <span class="desc">resolvconf configuration file</span></div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> <b class="name">resolvconf.conf</b> is the configuration file for <a class="link-man" href="../8/resolvconf">resolvconf(8)</a>. The <b class="name">resolvconf.conf</b> file is a shell script that is sourced by <a class="link-man" href="../8/resolvconf">resolvconf(8)</a>, meaning that <b class="name">resolvconf.conf</b> must contain valid shell commands. Listed below are the standard <b class="name">resolvconf.conf</b> variables that may be set. If the values contain white space for special shell characters, ensure they are quoted and escaped correctly.<p>
After updating this file, you may wish to run <b class="name">resolvconf -u</b> to apply the new configuration.<p>
When a dynamically generated list is appended or prepended to, the whole is made unique where left-most wins.</div>
<div class="section">
<h1 id="x5245534f4c56434f4e46204f5054494f4e53">RESOLVCONF OPTIONS</h1><dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">resolvconf</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Set to NO to disable <b class="name">resolvconf</b> from running any subscribers. Defaults to YES.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">interface_order</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
These interfaces will always be processed first. If unset, defaults to the following:-<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
lo lo[0-9]*</div>
</blockquote>
</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">dynamic_order</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
These interfaces will be processed next, unless they have a metric. If unset, defaults to the following:-<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
tap[0-9]* tun[0-9]* vpn vpn[0-9]* ppp[0-9]* ippp[0-9]*</div>
</blockquote>
</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">local_nameservers</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
If unset, defaults to the following:-<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
127.* 0.0.0.0 255.255.255.255 ::1</div>
</blockquote>
</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">search_domains</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Prepend search domains to the dynamically generated list.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">search_domains_append</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Append search domains to the dynamically generated list.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">domain_blacklist</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
A list of domains to be removed from consideration. To remove a domain, you can use foo.* To remove a sub domain, you can use *.bar</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">name_servers</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Prepend name servers to the dynamically generated list. You should set this to 127.0.0.1 if you use a local name server other than libc.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">name_servers_append</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Append name servers to the dynamically generated list.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">name_server_blacklist</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
A list of name servers to be removed from consideration. The default is 0.0.0.0 as some faulty routers send it via DHCP. To remove a block, you can use 192.168.*</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">private_interfaces</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
These interfaces name servers will only be queried for the domains listed in their resolv.conf. Useful for VPN domains. This is equivalent to the <b class="name">resolvconf -p</b> option.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">replace</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Is a space separated list of replacement keywords. The syntax is this: <b class="var">$keyword</b>/<b class="var">$match</b>/<b class="var">$replacement</b><p>
Example, given this resolv.conf:<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
domain foo.org</div>
</blockquote>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
search foo.org dead.beef</div>
</blockquote>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
nameserver 1.2.3.4</div>
</blockquote>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
nameserver 2.3.4.5</div>
</blockquote>
and this configuaration:<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
replace="search/foo*/bar.com nameserver/1.2.3.4/5.6.7.8 nameserver/2.3.4.5/"</div>
</blockquote>
you would get this resolv.conf instead:<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
domain foo.org</div>
</blockquote>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
search bar.com</div>
</blockquote>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
nameserver 5.6.7.8</div>
</blockquote>
</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">replace_sub</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Works the same way as <span class="symb">replace</span> except it works on each space separated value rather than the whole line, so it's useful for the replacing a single domain within the search directive. Using the same example resolv.conf and changing <span class="symb">replace</span> to <span class="symb">replace_sub</span>, you would get this resolv.conf instead:<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
domain foo.org</div>
</blockquote>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
search bar.com dead.beef</div>
</blockquote>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
nameserver 5.6.7.8</div>
</blockquote>
</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">state_dir</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Override the default state directory of <i class="file">/var/run/resolvconf</i>. This should not be changed once <b class="name">resolvconf</b> is in use unless the old directory is copied to the new one.</dd>
</dl>
</div>
<div class="section">
<h1 id="x4c494243204f5054494f4e53">LIBC OPTIONS</h1> The following variables affect <a class="link-man" href="../5/resolv.conf">resolv.conf(5)</a> directly:-<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">resolv_conf</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Defaults to <i class="file">/etc/resolv.conf</i> if not set.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">resolv_conf_options</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
A list of libc resolver options, as specified in <a class="link-man" href="../5/resolv.conf">resolv.conf(5)</a>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">resolv_conf_passthrough</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
When set to YES the latest resolv.conf is written to <span class="symb">resolv_conf</span> without any alteration. When set to /dev/null or NULL, <span class="symb">resolv_conf_local_only</span> is defaulted to NO, <span class="symb">local_nameservers</span> is unset unless overriden and only the information set in <b class="name">resolvconf.conf</b> is written to <span class="symb">resolv_conf</span>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">resolv_conf_sortlist</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
A libc resolver sortlist, as specified in <a class="link-man" href="../5/resolv.conf">resolv.conf(5)</a>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">resolv_conf_local_only</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
If a local name server is configured then the default is just to specify that and ignore all other entries as they will be configured for the local name server. Set this to NO to also list non-local nameservers. This will give you working DNS even if the local nameserver stops functioning at the expense of duplicated server queries.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">append_nameservers</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Append name servers to the dynamically generated list.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">prepend_nameservers</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Prepend name servers to the dynamically generated list.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">append_search</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Append search domains to the dynamically generated list.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">prepend_search</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Prepend search domains to the dynamically generated list.</dd>
</dl>
</div>
<div class="section">
<h1 id="x53554253435249424552204f5054494f4e53">SUBSCRIBER OPTIONS</h1> openresolv ships with subscribers for the name servers <a class="link-man" href="../8/dnsmasq">dnsmasq(8)</a>, <a class="link-man" href="../8/named">named(8)</a>, <a class="link-man" href="../8/pdnsd">pdnsd(8)</a> and <a class="link-man" href="../8/unbound">unbound(8)</a>. Each subscriber can create configuration files which should be included in in the subscribers main configuration file.<p>
To disable a subscriber, simply set it's name to NO. For example, to disable the libc subscriber you would set:<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
libc=NO</div>
</blockquote>
<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">dnsmasq_conf</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
This file tells dnsmasq which name servers to use for specific domains.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">dnsmasq_resolv</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
This file tells dnsmasq which name servers to use for global lookups.<p>
Example resolvconf.conf for dnsmasq:<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
name_servers=127.0.0.1</div>
</blockquote>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
dnsmasq_conf=/etc/dnsmasq-conf.conf</div>
</blockquote>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
dnsmasq_resolv=/etc/dnsmasq-resolv.conf</div>
</blockquote>
<p>
Example dnsmasq.conf:<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
listen-address=127.0.0.1</div>
</blockquote>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
# If dnsmasq is compiled for DBus then we can take</div>
</blockquote>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
# advantage of not having to restart dnsmasq.</div>
</blockquote>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
enable-dbus</div>
</blockquote>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
conf-file=/etc/dnsmasq-conf.conf</div>
</blockquote>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
resolv-file=/etc/dnsmasq-resolv.conf</div>
</blockquote>
</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">named_options</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Include this file in the named options block. This file tells named which name servers to use for global lookups.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">named_zones</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Include this file in the named global scope, after the options block. This file tells named which name servers to use for specific domains.<p>
Example resolvconf.conf for named:<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
name_servers=127.0.0.1</div>
</blockquote>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
named_options=/etc/named-options.conf</div>
</blockquote>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
named_zones=/etc/named-zones.conf</div>
</blockquote>
<p>
Example named.conf:<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
options {</div>
</blockquote>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
	listen-on { 127.0.0.1; };</div>
</blockquote>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
	include /etc/named-options.conf;</div>
</blockquote>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
};</div>
</blockquote>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
include /etc/named-zones.conf;</div>
</blockquote>
</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">pdnsd_conf</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
This is the main pdnsd configuration file which we modify to add our forward domains to. If this variable is not set then we rely on the pdnsd configuration file setup to read <i class="file">pdnsd_resolv</i> as documented below.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">pdnsd_resolv</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
This file tells pdnsd about global name servers. If this variable is not set then it's written to <i class="file">pdnsd_conf</i>.<p>
Example resolvconf.conf for pdnsd:<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
name_servers=127.0.0.1</div>
</blockquote>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
pdnsd_conf=/etc/pdnsd.conf</div>
</blockquote>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
# pdnsd_resolv=/etc/pdnsd-resolv.conf</div>
</blockquote>
<p>
Example pdnsd.conf:<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
global {</div>
</blockquote>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
	server_ip = 127.0.0.1;</div>
</blockquote>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
	status_ctl = on;</div>
</blockquote>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
}</div>
</blockquote>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
server {</div>
</blockquote>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
	# A server definition is required, even if emtpy.</div>
</blockquote>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
	label="empty";</div>
</blockquote>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
	proxy_only=on;</div>
</blockquote>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
	# file="/etc/pdnsd-resolv.conf";</div>
</blockquote>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
}</div>
</blockquote>
</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">unbound_conf</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
This file tells unbound about specific and global name servers.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">unbound_insecure</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
When set to YES, unbound marks the domains as insecure, thus ignoring DNSSEC.<p>
Example resolvconf.conf for unbound:<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
name_servers=127.0.0.1</div>
</blockquote>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
unbound_conf=/etc/unbound-resolvconf.conf</div>
</blockquote>
<p>
Example unbound.conf:<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
include: /etc/unbound-resolvconf.conf</div>
</blockquote>
</dd>
</dl>
</div>
<div class="section">
<h1 id="x5355425343524942455220494e544547524154494f4e">SUBSCRIBER INTEGRATION</h1> Not all distributions store the files the subscribers need in the same locations. For example, named service scripts have been called named, bind and rc.bind and they could be located in a directory called /etc/rc.d, /etc/init.d or similar. Each subscriber attempts to automatically configure itself, but not every distribution has been catered for. Also, users could equally want to use a different version from the one installed by default, such as bind8 and bind9. To accomodate this, the subscribers have these files in configurable variables, documented below.<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">dnsmasq_service</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Location of the dnsmasq service.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">dnsmasq_restart</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Command to restart the dnsmasq service.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">dnsmasq_pid</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Location of the dnsmasq pidfile.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">libc_service</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Location of the libc service.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">libc_restart</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Command to restart the libc service.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">named_service</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Location of the named service.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">named_restart</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Command to restart the named service.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">pdnsd_restart</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Command to restart the pdnsd service.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">unbound_service</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Location of the unbound service.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">unbound_restart</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Command to restart the unbound service.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">unbound_pid</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Location of the unbound pidfile.</dd>
</dl>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../5/resolv.conf">resolv.conf(5)</a>, <a class="link-man" href="../8/resolvconf">resolvconf(8)</a> and <a class="link-man" href="../1/sh">sh(1)</a>.</div>
<div class="section">
<h1 id="x415554484f5253">AUTHORS</h1> <span class="author">Roy Marples</span> &#60;<a class="link-mail" href="mailto:roy@marples.name">roy@marples.name</a>&#62;</div>
<div class="section">
<h1 id="x42554753">BUGS</h1> Each distribution is a special snowflake and likes to name the same thing differently, namely the named service script.<p>
Please report them to <a class="link-ext" href="http://roy.marples.name/projects/openresolv">http://roy.marples.name/projects/openresolv</a></div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
March 20, 2015</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
<>

