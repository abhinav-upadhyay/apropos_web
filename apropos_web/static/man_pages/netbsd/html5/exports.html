<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="../style.css" type="text/css" media="all">
<title>
EXPORTS(5)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
EXPORTS(5)</td>
<td class="head-vol" align="center">
File Formats Manual</td>
<td class="head-rtitle" align="right">
EXPORTS(5)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">exports</b> &#8212; <span class="desc">define remote mount points for NFS mount requests</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1><table class="synopsis">
<col style="width: 7.00ex;">
<col>
<tbody>
<tr>
<td>
exports</td>
<td>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> The <b class="name">exports</b> file specifies remote mount points for the NFS mount protocol per the NFS server specification; see <span class="ref-title">Network File System Protocol Specification RFC 1094, Appendix A</span> and <span class="ref-title">NFS: Network File System Version 3 Specification, Appendix I.</span><p>
Each line in the file (other than comment lines that begin with a &#8216;#&#8217;) specifies the mount point(s) and export flags within one local server filesystem for one or more hosts. A host may be specified only once for each local filesystem on the server and there may be only one default entry for each server filesystem that applies to all other hosts. The latter exports the filesystem to the &#8220;world&#8221; and should be used only when the filesystem contains public information.<p>
If you have modified the <i class="file">/etc/exports</i> file, send the mountd a SIGHUP to make it re-read the <i class="file">/etc/exports</i> file: &#8220;kill -HUP `cat /var/run/mountd.pid`&#8221;.<p>
In a mount entry, the first field(s) specify the directory path(s) within a server filesystem that can be mounted on by the corresponding client(s). There are two forms of this specification. The first is to list all mount points as absolute directory paths separated by whitespace. The second is to specify the pathname of the root of the filesystem followed by the <b class="flag">&#45;alldirs</b> flag; this form allows the host(s) to mount at any point within the filesystem, including regular files. Note that the <b class="flag">&#45;alldirs</b> option should not be used as a security measure to make clients mount only those subdirectories that they should have access to. A client can still access the whole filesystem via individual RPCs if it wanted to, even if just one subdirectory has been mounted. The pathnames must not have any symbolic links in them and should not have any &#8220;.&#8221; or &#8220;..&#8221; components. Mount points for a filesystem may appear on multiple lines each with different sets of hosts and export options.<p>
The second component of a line specifies how the filesystem is to be exported to the host set. The option flags specify whether the filesystem is exported read-only or read-write and how the client uid is mapped to user credentials on the server.<p>
Export options are specified as follows:<p>
<b class="flag">&#45;maproot</b>=<i class="arg">user</i> The credential of the specified user is used for remote access by root. The credential includes all the groups to which the user is a member on the local machine (see <a class="link-man" href="../1/id">id(1)</a>). The user may be specified by name or number.<p>
<b class="flag">&#45;maproot</b>=<i class="arg">user</i>:<i class="arg">group1</i>:<i class="arg">group2</i>:<i class="arg">...</i> The colon separated list is used to specify the precise credential to be used for remote access by root. The elements of the list may be either names or numbers. Note that user: should be used to distinguish a credential containing no groups from a complete credential for that user.<p>
<b class="flag">&#45;mapall</b>=<i class="arg">user</i> or <b class="flag">&#45;mapall</b>=<i class="arg">user</i>:<i class="arg">group1</i>:<i class="arg">group2</i>:<i class="arg">...</i> specifies a mapping for all client uids (including root) using the same semantics as <b class="flag">&#45;maproot</b>.<p>
The option <b class="flag">&#45;r</b> is a synonym for <b class="flag">&#45;maproot</b> in an effort to be backward compatible with older export file formats.<p>
In the absence of <b class="flag">&#45;maproot</b> and <b class="flag">&#45;mapall</b> options, remote accesses by root will result in using a credential of -2:-2. All other users will be mapped to their remote credential. If a <b class="flag">&#45;maproot</b> option is given, remote access by root will be mapped to that credential instead of -2:-2. If a <b class="flag">&#45;mapall</b> option is given, all users (including root) will be mapped to that credential in place of their own.<p>
The <b class="flag">&#45;kerb</b> option specifies that the Kerberos authentication server should be used to authenticate and map client credentials. This option is currently not implemented.<p>
The <b class="flag">&#45;ro</b> option specifies that the filesystem should be exported read-only (default read/write). The option <b class="flag">&#45;o</b> is a synonym for <b class="flag">&#45;ro</b> in an effort to be backward compatible with older export file formats.<p>
The <b class="flag">&#45;noresvport</b> option specifies that NFS RPC calls for the filesystem do not have to come from reserved ports. Normally, clients are required to use reserved ports for operations. Using this option decreases the security of your system.<p>
The <b class="flag">&#45;noresvmnt</b> option specifies that mount RPC requests for the filesystem do not have to come from reserved ports. Normally, clients are required to use reserved ports for mount requests. Using this option decreases the security of your system.<p>
WebNFS exports strictly according to the spec (RFC 2054 and RFC 2055) can be done with the <b class="flag">&#45;public</b> flag. However, this flag in itself allows r/w access to all files in the filesystem, not requiring reserved ports and not remapping uids. It is only provided to conform to the spec, and should normally not be used. For a WebNFS export, use the <b class="flag">&#45;webnfs</b> flag, which implies <b class="flag">&#45;public</b>, <b class="flag">&#45;mapall</b>=<i class="arg">nobody</i> and <b class="flag">&#45;ro</b>.<p>
A <b class="flag">&#45;index</b>=<i class="arg">file</i> option can be used to specify a file whose handle will be returned if a directory is looked up using the public filehandle (WebNFS). This is to mimic the behavior of URLs. If no <b class="flag">&#45;index</b> option is specified, a directory filehandle will be returned as usual. The <b class="flag">&#45;index</b> option only makes sense in combination with the <b class="flag">&#45;public</b> or <b class="flag">&#45;webnfs</b> flags.<p>
<div class="symb" style="display:inline;margin-left: 1.00ex;">
Warning: exporting a filesystem both using WebNFS and read/write in the normal way to other hosts should be avoided in an environment that is vulnerable to IP spoofing.</div>
WebNFS enables any client to get filehandles to the exported filesystem. Using IP spoofing, a client could then pretend to be a host to which the same filesystem was exported read/write, and use the handle to gain access to that filesystem.<p>
The third component of a line specifies the host set to which the line applies. If no host set is specified, the filesystem is exported to everyone. The set may be specified in three ways. The first way is to list the host name(s) separated by white space. (Standard internet &#8220;dot&#8221; addresses may be used in place of names.) The second way is to specify a &#8220;netgroup&#8221; as defined in the netgroup file (see <a class="link-man" href="../5/netgroup">netgroup(5)</a>). A netgroup that contains an item that does have a host entry is treated like an error. The third way is to specify an internet subnetwork using a network and network mask that is defined as the set of all hosts with addresses within the subnetwork. This latter approach requires less overhead within the kernel and is recommended for cases where the export line refers to a large number of clients within an administrative subnet.<p>
The first two cases are specified by simply listing the name(s) separated by whitespace. All names are checked to see if they are &#8220;netgroup&#8221; names first and are assumed to be hostnames otherwise. Using the full domain specification for a hostname can normally circumvent the problem of a host that has the same name as a netgroup. The third case is specified by the flag <b class="flag">&#45;network</b>=<i class="arg">netname</i>&#91;<span class="opt">/<i class="arg">prefixlength</i></span>&#93; and optionally <b class="flag">&#45;mask</b>=<i class="arg">netmask</i>. The netmask may be specified either by attaching a <i class="arg">prefixlength</i> to the <b class="flag">&#45;network</b> option, or by using a separate <b class="flag">&#45;mask</b> option. If the mask is not specified, it will default to the mask for that network class (A, B or C; see <a class="link-man" href="../4/inet">inet(4)</a>).<p>
Scoped IPv6 address must carry scope identifier as documented in <a class="link-man" href="../4/inet6">inet6(4)</a>. For example, &#8220;fe80::%ne2/10&#8221; is used to specify fe80::/10 on ne2 interface.<p>
For example:<p>
<pre style="margin-left: 5.00ex;" class="lit display">
/usr /usr/local -maproot=0:10 friends 
/usr -maproot=daemon grumpy.cis.uoguelph.ca 131.104.48.16 
/usr -ro -mapall=nobody 
/u -maproot=bin: -network 131.104.48 -mask 255.255.255.0 
/a -network 192.168.0/24 
/a -network 3ffe:1ce1:1:fe80::/64 
/u2 -maproot=root friends 
/u2 -alldirs -kerb -network cis-net -mask cis-mask</pre>
<p>
Given that <i class="file">/usr</i>, <i class="file">/u</i>, and <i class="file">/u2</i> are local filesystem mount points, the above example specifies the following: <i class="file">/usr</i> is exported to hosts <span class="emph">friends</span> where friends is specified in the netgroup file with users mapped to their remote credentials and root mapped to uid 0 and group 10. It is exported read-write and the hosts in &#8220;friends&#8221; can mount either <i class="file">/usr</i> or <i class="file">/usr/local</i>. It is exported to <span class="emph">131.104.48.16</span> and <span class="emph">grumpy.cis.uoguelph.ca</span> with users mapped to their remote credentials and root mapped to the user and groups associated with &#8220;daemon&#8221;; it is exported to the rest of the world as read-only with all users mapped to the user and groups associated with &#8220;nobody&#8221;.<p>
<i class="file">/u</i> is exported to all hosts on the subnetwork <span class="emph">131.104.48</span> with root mapped to the uid for &#8220;bin&#8221; and with no group access.<p>
<i class="file">/u2</i> is exported to the hosts in &#8220;friends&#8221; with root mapped to uid and groups associated with &#8220;root&#8221;; it is exported to all hosts on network &#8220;cis-net&#8221; allowing mounts at any directory within /u2 and mapping all uids to credentials for the principal that is authenticated by a Kerberos ticket.<p>
<i class="file">/a</i> is exported to the network 192.168.0.0, with a netmask of 255.255.255.0. However, the netmask length in the entry for /a is not specified through a -mask option, but through the /prefix notation.<p>
<i class="file">/a</i> is also exported to the IPv6 network 3ffe:1ce1:1:fe80:: address, using the upper 64 bits as the prefix. Note that, unlike with IPv4 network addresses, the specified network address must be complete, and not just contain the upper bits. With IPv6 addresses, the -mask option must not be used.</div>
<div class="section">
<h1 id="x46494c4553">FILES</h1><dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/etc/exports</i></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
The default remote mount-point file.</dd>
</dl>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../5/netgroup">netgroup(5)</a>, <a class="link-man" href="../8/mountd">mountd(8)</a>, <a class="link-man" href="../8/nfsd">nfsd(8)</a>, <a class="link-man" href="../8/showmount">showmount(8)</a></div>
<div class="section">
<h1 id="x43415645415453">CAVEATS</h1> Don't re-export NFS-mounted filesystems unless you are sure of the implications. NFS has some assumptions about the characteristics of the file systems being exported, e.g. when timestamps are updated. Re-exporting should work to some extent and can even be useful in some cases, but don't expect it works as well as with local file systems.</div>
<div class="section">
<h1 id="x42554753">BUGS</h1> The export options are tied to the local mount points in the kernel and must be non-contradictory for any exported subdirectory of the local server mount point. It is recommended that all exported directories within the same server filesystem be specified on adjacent lines going down the tree. You cannot specify a hostname that is also the name of a netgroup. Specifying the full domain specification for a hostname can normally circumvent the problem.</div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
October 8, 2006</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
</html>

