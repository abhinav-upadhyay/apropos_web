<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="/static/man_pages/netbsd/style.css" type="text/css" media="all">
<title>
PASSWD(5)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
PASSWD(5)</td>
<td class="head-vol" align="center">
File Formats Manual</td>
<td class="head-rtitle" align="right">
PASSWD(5)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">passwd</b>, <b class="name">master.passwd</b> &#8212; <span class="desc">format of the password file</span></div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> The <b class="name">passwd</b> files are the local source of password information. They can be used in conjunction with the Hesiod domain &#8216;passwd&#8217; and the NIS maps &#8216;passwd.byname&#8217;, &#8216;passwd.byuid&#8217;, &#8216;master.passwd.byname&#8217;, and &#8216;master.passwd.byuid&#8217;, as controlled by <a class="link-man" href="../5/nsswitch.conf">nsswitch.conf(5)</a>.<p>
The <b class="name">master.passwd</b> file is readable only by root, and consists of newline separated ASCII records, one per user, containing ten colon (&#8220;:&#8221;) separated fields.<p>
Each line has the form:<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit">name:password:uid:gid:class:change:expire:gecos:home_dir:shell</code></div>
</blockquote>
<p>
These fields are as follows:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 5.00ex;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
<span class="emph">name</span></dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
User's login name.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<span class="emph">password</span></dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
User's <span class="emph">encrypted</span> password.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<span class="emph">uid</span></dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
User's id.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<span class="emph">gid</span></dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
User's login group id.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<span class="emph">class</span></dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
User's login class.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<span class="emph">change</span></dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
Password change time.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<span class="emph">expire</span></dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
Account expiration time.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<span class="emph">gecos</span></dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
General information about the user.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<span class="emph">home_dir</span></dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
User's home directory.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<span class="emph">shell</span></dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
User's login shell.</dd>
</dl>
<p>
Be aware that each line is limited to 1024 characters; longer ones will be ignored. This limit can be queried through <a class="link-man" href="../3/sysconf">sysconf(3)</a> by using the <code class="lit">_SC_GETPW_R_SIZE_MAX</code> parameter.<p>
The <b class="name">passwd</b> file is generated from the <b class="name">master.passwd</b> file by <a class="link-man" href="../8/pwd_mkdb">pwd_mkdb(8)</a>, has the <span class="emph">class</span>, <span class="emph">change</span>, and <span class="emph">expire</span> fields removed, and the <span class="emph">password</span> field replaced by a &#8220;*&#8221;.<p>
The <span class="emph">name</span> field is the login used to access the computer account, and the <span class="emph">uid</span> field is the number associated with it. They should both be unique across the system (and often across a group of systems) since they control file access.<p>
While it is possible to have multiple entries with identical login names and/or identical user id's, it is usually a mistake to do so. Routines that manipulate these files will often return only one of the multiple entries, and that one by random selection.<p>
The login name must never begin with a hyphen (&#8220;-&#8221;); also, it is strongly suggested that neither upper-case characters nor dots (&#8220;.&#8221;) be part of the name, as this tends to confuse mailers. No field may contain a colon (&#8220;:&#8221;) as this has been used historically to separate the fields in the user database.<p>
The <span class="emph">password</span> field is the <span class="emph">encrypted</span> form of the password. If the <span class="emph">password</span> field is empty, no password will be required to gain access to the machine. This is almost invariably a mistake. Because these files contain the encrypted user passwords, they should not be readable by anyone without appropriate privileges. For the possible ciphers used in this field see <a class="link-man" href="../5/passwd.conf">passwd.conf(5)</a>.<p>
The <span class="emph">gid</span> field is the group that the user will be placed in upon login. Since this system supports multiple groups (see <a class="link-man" href="../1/groups">groups(1)</a>) this field currently has little special meaning.<p>
The <span class="emph">class</span> field is a key for a user's login class. Login classes are defined in <a class="link-man" href="../5/login.conf">login.conf(5)</a>, which is a <a class="link-man" href="../5/capfile">capfile(5)</a> style database of user attributes, accounting, resource and environment settings.<p>
The <span class="emph">change</span> field is the number of seconds from the epoch, <span class="define">UTC</span>, until the password for the account must be changed. This field may be left empty to turn off the password aging feature. If this is set to &#8220;-1&#8221; then the user will be prompted to change their password at the next login.<p>
The <span class="emph">expire</span> field is the number of seconds from the epoch, <span class="define">UTC</span>, until the account expires. This field may be left empty to turn off the account aging feature.<p>
If either of the <span class="emph">change</span> or <span class="emph">expire</span> fields are set, the system will remind the user of the impending change or expiry if they login within a configurable period (defaulting to 14 days) before the event.<p>
The <span class="emph">gecos</span> field normally contains comma (&#8220;,&#8221;) separated subfields as follows:<p>
<dl style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 5.00ex;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
<span class="emph">name</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
user's full name</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<span class="emph">office</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
user's office number</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<span class="emph">wphone</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
user's work phone number</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<span class="emph">hphone</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
user's home phone number</dd>
</dl>
<p>
The full name may contain an ampersand (&#8220;&amp;&#8221;) which will be replaced by the capitalized login name when the gecos field is displayed or used by various programs such as <a class="link-man" href="../1/finger">finger(1)</a>, <a class="link-man" href="../1/sendmail">sendmail(1)</a>, etc.<p>
The office and phone number subfields are used by the <a class="link-man" href="../1/finger">finger(1)</a> program, and possibly other applications.<p>
The user's home directory is the full <span class="unix">UNIX</span> path name where the user will be placed on login.<p>
The shell field is the command interpreter the user prefers. If there is nothing in the <span class="emph">shell</span> field, the Bourne shell (<i class="file">/bin/sh</i>) is assumed.</div>
<div class="section">
<h1 id="x484553494f4420535550504f5254">HESIOD SUPPORT</h1> If &#8216;dns&#8217; is specified for the &#8216;passwd&#8217; database in <a class="link-man" href="../5/nsswitch.conf">nsswitch.conf(5)</a>, then <b class="name">passwd</b> lookups occur from the &#8216;passwd&#8217; Hesiod domain.</div>
<div class="section">
<h1 id="x4e495320535550504f5254">NIS SUPPORT</h1> If &#8216;nis&#8217; is specified for the &#8216;passwd&#8217; database in <a class="link-man" href="../5/nsswitch.conf">nsswitch.conf(5)</a>, then <b class="name">passwd</b> lookups occur from the &#8216;passwd.byname&#8217;, &#8216;passwd.byuid&#8217;, &#8216;master.passwd.byname&#8217;, and &#8216;master.passwd.byuid&#8217; NIS maps.</div>
<div class="section">
<h1 id="x434f4d50415420535550504f5254">COMPAT SUPPORT</h1> If &#8216;compat&#8217; is specified for the &#8216;passwd&#8217; database, and either &#8216;dns&#8217; or &#8216;nis&#8217; is specified for the &#8216;passwd_compat&#8217; database in <a class="link-man" href="../5/nsswitch.conf">nsswitch.conf(5)</a>, then the <b class="name">passwd</b> file also supports standard &#8216;+/-&#8217; exclusions and inclusions, based on user names and netgroups.<p>
Lines beginning with a minus sign (&#8220;-&#8221;) are entries marked as being excluded from any following inclusions, which are marked with a plus sign (&#8220;+&#8221;).<p>
If the second character of the line is an at sign (&#8220;@&#8221;), the operation involves the user fields of all entries in the netgroup specified by the remaining characters of the <span class="emph">name</span> field. Otherwise, the remainder of the <span class="emph">name</span> field is assumed to be a specific user name.<p>
The &#8220;+&#8221; token may also be alone in the <span class="emph">name</span> field, which causes all users from either the Hesiod domain <b class="name">passwd</b> (with &#8216;passwd_compat: dns&#8217;) or &#8216;passwd.byname&#8217; and &#8216;passwd.byuid&#8217; NIS maps (with &#8216;passwd_compat: nis&#8217;) to be included.<p>
If the entry contains non-empty <span class="emph">uid</span> or <span class="emph">gid</span> fields, the specified numbers will override the information retrieved from the Hesiod domain or the NIS maps. As well, if the <span class="emph">gecos</span>, <span class="emph">home_dir</span> or <span class="emph">shell</span> entries contain text, it will override the information included via Hesiod or NIS. On some systems, the <span class="emph">passwd</span> field may also be overridden.</div>
<div class="section">
<h1 id="x434f4d5041544942494c495459">COMPATIBILITY</h1> The password file format has changed since <span class="unix">4.3BSD</span>. The following awk script can be used to convert your old-style password file into a new style password file. The additional fields &#8220;class&#8221;, &#8220;change&#8221; and &#8220;expire&#8221; are added, but are turned off by default. To set them, use the current day in seconds from the epoch + whatever number of seconds of offset you want.<p>
<pre style="margin-left: 5.00ex;" class="lit display">
BEGIN { FS = ":"} 
{ print $1 ":" $2 ":" $3 ":" $4 "::0:0:" $5 ":" $6 ":" $7 }</pre>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../1/chpass">chpass(1)</a>, <a class="link-man" href="../1/login">login(1)</a>, <a class="link-man" href="../1/newgrp">newgrp(1)</a>, <a class="link-man" href="../1/passwd">passwd(1)</a>, <a class="link-man" href="../1/pwhash">pwhash(1)</a>, <a class="link-man" href="../3/getpwent">getpwent(3)</a>, <a class="link-man" href="../3/login_getclass">login_getclass(3)</a>, <a class="link-man" href="../5/login.conf">login.conf(5)</a>, <a class="link-man" href="../5/netgroup">netgroup(5)</a>, <a class="link-man" href="../5/passwd.conf">passwd.conf(5)</a>, <a class="link-man" href="../8/adduser">adduser(8)</a>, <a class="link-man" href="../8/pwd_mkdb">pwd_mkdb(8)</a>, <a class="link-man" href="../8/vipw">vipw(8)</a>, <a class="link-man" href="../8/yp">yp(8)</a><p>
<span class="ref-title">Managing NFS and NIS</span> (O'Reilly &amp; Associates)</div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> A <b class="name">passwd</b> file format appeared in Version&#160;6 AT&amp;T UNIX.<p>
The NIS <b class="name">passwd</b> file format first appeared in SunOS.<p>
The Hesiod support first appeared in <span class="unix">NetBSD&#160;1.4</span>.<p>
The <a class="link-man" href="../5/login.conf">login.conf(5)</a> capability first appeared in <span class="unix">NetBSD&#160;1.5</span>.</div>
<div class="section">
<h1 id="x42554753">BUGS</h1> User information should (and eventually will) be stored elsewhere.<p>
Placing &#8216;compat&#8217; exclusions in the file after any inclusions will have unexpected results.</div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
April 5, 2012</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
</html>

