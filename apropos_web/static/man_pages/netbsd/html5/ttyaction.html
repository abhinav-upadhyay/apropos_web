<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="/static/man_pages/netbsd/style.css" type="text/css" media="all">
<title>
TTYACTION(5)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
TTYACTION(5)</td>
<td class="head-vol" align="center">
File Formats Manual</td>
<td class="head-rtitle" align="right">
TTYACTION(5)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">ttyaction</b> &#8212; <span class="desc">ttyaction file format</span></div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> The <b class="name">ttyaction</b> file specifies site-specific commands to run when a login session begins and ends. The <b class="name">ttyaction</b> file contains a list of newline separated records, where each record has the following three fields:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
ttyname</dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
Name of the tty line(s) on which this line should apply. The name is relative to the <i class="file">/dev</i> directory, similar to how such devices are named in the <i class="file">/etc/ttys</i> file.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
action</dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
Name of the action for which this line should apply. The action names currently defined are "login", "getty", "telnetd" and "rlogind" which indicate which program is processing this file. (Note that "login" begins a login session, while the other three are run after a login session ends.)</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
command</dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
What command to run if this record matches.</dd>
</dl>
<p>
The first two fields are delimited with blanks or tabs, and the command field is all text to the end of the line. Either or both of first two fields may contain wildcard match patterns as implemented by the <b class="fname">fnmatch</b>() library function.<p>
All command strings are executed by passing them to <i class="file">/bin/sh &#45;c</i> running as "root," with an environment containing:<p>
<pre style="margin-left: 5.00ex;" class="lit display">
TTY=ttyname 
ACT=action 
USER=username 
PATH=_PATH_STDPATH</pre>
<p>
These variables may be used directly in the shell command part of the record for simple tasks such as changing the ownership of related devices.  For example:<p>
<pre style="margin-left: 5.00ex;" class="lit display">
console  *	chown ${USER}:tty /dev/mouse</pre>
<p>
will <i class="farg">chown</i> the mouse appropriately when the console owner changes.</div>
<div class="section">
<h1 id="x4558414d504c4553">EXAMPLES</h1> Here are some more example records:<p>
<pre style="margin-left: 5.00ex;" class="lit display">
tty0	login	/somewhere/tty_setup ${TTY} 
tty0	getty	/somewhere/tty_clean ${TTY} 
*	*	/somewhere/ttyfrob ${TTY} ${ACT}</pre>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../3/fnmatch">fnmatch(3)</a>, <a class="link-man" href="../3/ttyaction">ttyaction(3)</a></div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> The ideas for the <i class="file">/etc/ttyaction</i> file were inspired by the <i class="file">/etc/fbtab</i> file under SunOS.</div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
August 24, 1996</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
</html>

