<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/../4/strict.dtd">
>
<head>
<meta http-equiv="Content-Type" content="te../; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="../style.css" type="text/css" media="all">
<title>
CONFIG(5)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
CONFIG(5)</td>
<td class="head-vol" align="center">
File Formats Manual</td>
<td class="head-rtitle" align="right">
CONFIG(5)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">config</b> &#8212; <span class="desc">kernel configuration file syntax</span></div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> The kernel configuration file specifies the way the kernel should be compiled by the rest of the toolchain. It is processed by <a class="link-man" href="../1/config">config(1)</a> to produce a number of files that will allow the user to compile a possibly customised kernel. One compilation can issue several kernel binaries, with different root and dump devices configurations, or with full debugging information.<p>
This manual page is intended to serve as a complete reference of all aspects of the syntax used in the many files processed by <a class="link-man" href="../1/config">config(1)</a>. The novice user will prefer looking at the examples given in <a class="link-man" href="../5/config.samples">config.samples(5)</a> in order to understand better how the default configuration can be changed, and how all of its elements interact with each other.<p>
The kernel configuration file actually contains the description of all the options, drivers and source files involved in the kernel compilation, and the logic that binds them. The <b class="cmd">machine</b> statement, usually found in the <i class="file">std.${MACHINE}</i> file, hides this from the user by automatically including all the descriptive files spread all around the kernel source tree, the main one being <i class="file">conf/files</i>.<p>
Thus, the kernel configuration file contains two parts: the description of the compilation options, and the selection of those options. However, it begins with a small preamble that controls a couple of options of <a class="link-man" href="../1/config">config(1)</a>, and a few statements belong to any of the two sections.<p>
The user controls the options selection part, which is located in a file commonly referenced as the <span class="emph">main configuration file</span> or simply the <span class="emph">kernel configuration file</span>. The developer is responsible for describing the options in the relevant files from the kernel source tree.<p>
Statements are separated by new-line characters. However, new-line characters can appear in the middle of a given statement, with the value of a space character.<div class="subsection">
<h2 id="x4f424a4543545320414e44204e414d4553">OBJECTS AND NAMES</h2> <a class="link-man" href="../1/config">config(1)</a> is a rather complicated piece of software that tries to comply with any configuration the user might think of. Quite a few different objects are manipulated through the kernel configuration file, therefore some definitions are needed.</div>
<div class="subsection">
<h2 id="x4f7074696f6e7320616e642061747472696275746573">Options and attributes</h2> The basic objects driving the kernel compilation are <span class="emph">options</span>, and are called <i class="arg">attributes</i> in some contexts. An <i class="arg">attribute</i> usually refers to a feature a given piece of hardware might have. However, the scope of an attribute is rather wide and can just be a place holder to group some source files together.<p>
There is a special class of attribute, named <span class="emph">interface attribute</span>, which represents a hook that allows a device to attach to (i.e., be a child of) another device. An <span class="emph">interface attribute</span> has a (possibly empty) list of <i class="arg">locators</i> to match the actual location of a device. For example, on a PCI bus, devices are located by a <span class="emph">device number</span> that is fixed by the wiring of the motherboard. Additionally, each of those devices can appear through several interfaces named <span class="emph">functions</span>. A single PCI device entity is a unique function number of a given device from the considered PCI bus. Therefore, the locators for a <a class="link-man" href="../4/pci">pci(4)</a> device are <i class="arg">dev</i> (for device), and <i class="arg">function</i>.<p>
A <i class="arg">locator</i> can either be a single integer value, or an array of integer values. It can have a default value, in which case it can be wildcarded with a &#8220;?&#8221; in the options selection section of the configuration file. A single <i class="arg">locator</i> definition can take one of the following forms:<ol style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 5.00ex;" class="list list-enum">
<li class="list-enum" style="margin-top: 0.00em;">
<i class="arg">locator</i></li>
<li class="list-enum" style="margin-top: 0.00em;">
<i class="arg">locator</i> = <i class="arg">value</i></li>
<li class="list-enum" style="margin-top: 0.00em;">
<i class="arg">locator</i>&#91;<span class="opt"><i class="arg">length</i></span>&#93;</li>
<li class="list-enum" style="margin-top: 0.00em;">
<i class="arg">locator</i>&#91;<span class="opt"><i class="arg">length</i></span>&#93; = &#123;<i class="arg">value</i>, <i class="arg">...</i>&#125;</li>
</ol>
The variants that specify a default value can be enclosed into square brackets, in which case the locator will not have to be specified later in the options selection section of the configuration file.<p>
In the options selection section, the locators are specified when declaring an instance as a space-separated list of &#8220;&#60;<i class="arg">locator</i>&#62; &#60;<i class="arg">value</i>&#62;&#8221; where value can be the &#8220;?&#8221; wildcard if the locator allows it.</div>
<div class="subsection">
<h2 id="x446576696365732c20696e7374616e63657320616e64206174746163686d656e7473">Devices, instances and attachments</h2> The main benefit of the kernel configuration file is to allow the user to avoid compiling some drivers, and wire down the configuration of some others. We have already seen that devices attach to each other through <span class="emph">interface attributes</span>, but not everything can attach to anything. Furthermore, the user has the ability to define precise instances for the devices. An <i class="arg">instance</i> is simply the reality of a device when it is probed and attached by the kernel.<p>
Each driver has a name for its devices. It is called the base device name and is found as <i class="arg">base</i> in this documentation. An <i class="arg">instance</i> is the concatenation of a device name and a number. In the kernel configuration file, instances can sometimes be wildcarded (i.e., the number is replaced by a &#8220;*&#8221; or a &#8220;?&#8221;) in order to match all the possible instances of a device.<p>
The usual &#8220;*&#8221; becomes a &#8220;?&#8221; when the instance name is used as an <span class="emph">attachment name</span>. In the options selection part of the kernel configuration files, an <span class="emph">attachment</span> is an <span class="emph">interface attribute</span> concatenated with a number or the wildcard &#8220;?&#8221;.</div>
<div class="subsection">
<h2 id="x50736575646f1e64657669636573">Pseudo-devices</h2> Some components of the kernel behave like a device although they don't have any actual reality in the hardware. For example, this is the case for special network devices, such as <a class="link-man" href="../4/tun">tun(4)</a> and <a class="link-man" href="../4/tap">tap(4)</a>. They are integrated in the kernel as pseudo-devices, and can have several instances and even children, just like normal devices.</div>
<div class="subsection">
<h2 id="x446570656e64656e63696573">Dependencies</h2> The options description part of the kernel configuration file contains all the logic that ties the source files together, and it is done first through writing down dependencies between <a class="link-man" href="../1/config">config(1)</a> objects.<p>
In this documentation, the syntax for <i class="arg">dependencies</i> is a comma-separated list of <i class="arg">options</i> and <i class="arg">attributes</i>.<p>
For example, the use of an Ethernet network card requires the source files that handle the specificities of that protocol. Therefore, all Ethernet network card drivers depend on the <i class="arg">ether</i> attribute.</div>
<div class="subsection">
<h2 id="x436f6e646974696f6e73">Conditions</h2> Finally, source file selection is possible through the help of conditionals, referred to as <i class="arg">condition</i> later in this documentation. The syntax for those conditions uses well-known operators ( &#8220;&amp;&#8221;, &#8220;|&#8221; and &#8220;!&#8221;) to combine <i class="arg">options</i> and <i class="arg">attributes</i>.</div>
<div class="subsection">
<h2 id="x434f4e54455854204e45555452414c2053544154454d454e5453">CONTEXT NEUTRAL STATEMENTS</h2><dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-ohang">
<dt class="list-ohang" style="margin-top: 1.00em;">
<b class="cmd">version</b> <i class="arg">yyyymmdd</i></dt>
<dd class="list-ohang">
Indicates the syntax version used by the rest of the file, or until the next <b class="cmd">version</b> statement. The argument is an ISO date. A given <a class="link-man" href="../1/config">config(1)</a> binary might only be compatible with a limited range of version numbers.</dd>
<dt class="list-ohang" style="margin-top: 1.00em;">
<b class="cmd">include</b> <i class="arg">path</i></dt>
<dd class="list-ohang">
Includes a file. The path is relative to the top of the kernel source tree, or the inner-most defined <b class="cmd">prefix</b>.</dd>
<dt class="list-ohang" style="margin-top: 1.00em;">
<b class="cmd">cinclude</b> <i class="arg">path</i></dt>
<dd class="list-ohang">
Conditionally includes a file. Contrary to <b class="cmd">include</b>, it will not produce an error if the file does not exist. The argument obeys the same rules as for <b class="cmd">include</b>.</dd>
<dt class="list-ohang" style="margin-top: 1.00em;">
<b class="cmd">prefix</b> &#91;<span class="opt"><i class="arg">path</i></span>&#93;</dt>
<dd class="list-ohang">
If <i class="arg">path</i> is given, it pushes a new prefix for <b class="cmd">include</b> and <b class="cmd">cinclude</b>. <b class="cmd">prefix</b> statements act like a stack, and an empty <i class="arg">path</i> argument has the latest prefix popped out. The <i class="arg">path</i> argument is either absolute or relative to the current defined prefix, which defaults to the top of the kernel source tree.</dd>
<dt class="list-ohang" style="margin-top: 1.00em;">
<b class="cmd">ifdef</b> <i class="arg">attribute</i></dt>
<dd class="list-ohang">
</dd>
<dt class="list-ohang" style="margin-top: 1.00em;">
<b class="cmd">ifndef</b> <i class="arg">attribute</i></dt>
<dd class="list-ohang">
</dd>
<dt class="list-ohang" style="margin-top: 1.00em;">
<b class="cmd">elifdef</b> <i class="arg">attribute</i></dt>
<dd class="list-ohang">
</dd>
<dt class="list-ohang" style="margin-top: 1.00em;">
<b class="cmd">elifndef</b> <i class="arg">attribute</i></dt>
<dd class="list-ohang">
</dd>
<dt class="list-ohang" style="margin-top: 1.00em;">
<b class="cmd">else</b></dt>
<dd class="list-ohang">
</dd>
<dt class="list-ohang" style="margin-top: 1.00em;">
<b class="cmd">endif</b></dt>
<dd class="list-ohang">
Conditionally interprets portions of the current file. Those statements depend on whether or not the given <i class="arg">attribute</i> has been previously defined, through <b class="cmd">define</b> or any other statement that implicitely defines attributes such as <b class="cmd">device</b>.</dd>
</dl>
</div>
<div class="subsection">
<h2 id="x505245414d424c45">PREAMBLE</h2> In addition to <b class="cmd">include</b>, <b class="cmd">cinclude</b>, and <b class="cmd">prefix</b>, the preamble may contain the following optional statements:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-ohang">
<dt class="list-ohang" style="margin-top: 1.00em;">
<b class="cmd">build</b> <i class="arg">path</i></dt>
<dd class="list-ohang">
Defines the build directory for the compilation of the kernel. It replaces the default of <i class="file">../compile/&lt;config-file&gt;</i> and is superseded by the <b class="flag">&#45;b</b> parameter of <a class="link-man" href="../1/config">config(1)</a>.</dd>
<dt class="list-ohang" style="margin-top: 1.00em;">
<b class="cmd">source</b> <i class="arg">path</i></dt>
<dd class="list-ohang">
Defines the directory in which the source of the kernel lives. It replaces the default of <i class="file">../../../..</i> and is superseded by the <b class="flag">&#45;s</b> parameter of <a class="link-man" href="../1/config">config(1)</a>.</dd>
</dl>
</div>
<div class="subsection">
<h2 id="x4f5054494f4e53204445534352495054494f4e">OPTIONS DESCRIPTION</h2> The user will not usually have to use descriptive statements, as they are meant for the developer to tie a given piece of code to the rest of the kernel. However, third parties may provide sources to add to the kernel compilation, and the logic that binds them to the <span class="unix">NetBSD</span> kernel will have to be added to the user-edited configuration file.<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-ohang">
<dt class="list-ohang" style="margin-top: 1.00em;">
<b class="cmd">devclass</b> <i class="arg">class</i></dt>
<dd class="list-ohang">
Defines a special attribute, named <span class="emph">device class</span>. A given device cannot belong to more than one device class. <a class="link-man" href="../1/config">config(1)</a> translates that property by the rule that a device cannot depend on more than one device class, and will properly fill the configuration information file it generates according to that value.</dd>
<dt class="list-ohang" style="margin-top: 1.00em;">
<b class="cmd">defflag</b> &#91;<span class="opt"><i class="arg">file</i></span>&#93; <i class="arg">option</i> &#91;<span class="opt"><i class="arg">option</i> &#91;<span class="opt"><i class="arg">...</i></span>&#93;</span>&#93; &#91;<span class="opt">: <i class="arg">dependencies</i></span>&#93;</dt>
<dd class="list-ohang">
Defines a boolean option, that can either be selected or be un-selected by the user with the <b class="cmd">options</b> statement. The optional <i class="arg">file</i> argument names a header file that will contain the C pre-processor definition for the option. If no file name is given, it will default to <i class="arg">opt_&lt;option&gt;.h</i>. <a class="link-man" href="../1/config">config(1)</a> will always create the header file, but if the user choose not to select the option, it will be empty. Several options can be combined in one header file, for convenience. The header file is created in the compilation directory, making them directly accessible by source files.</dd>
<dt class="list-ohang" style="margin-top: 1.00em;">
<b class="cmd">defparam</b> &#91;<span class="opt"><i class="arg">file</i></span>&#93; <i class="arg">option</i> &#91;<span class="opt">= <i class="arg">value</i></span>&#93; &#91;<span class="opt">:= <i class="arg">lint-value</i></span>&#93; &#91;<span class="opt"><i class="arg">option</i> &#91;<span class="opt"><i class="arg">...</i></span>&#93;</span>&#93; &#91;<span class="opt">: <i class="arg">dependencies</i></span>&#93;</dt>
<dd class="list-ohang">
Behaves like <b class="cmd">defflag</b>, except the defined option must have a value. Such options are not typed: they can have either a numeric or a string value. If a <i class="arg">value</i> is specified, it is treated as a default, and the option is always defined in the corresponding header file. If a <i class="arg">lint-value</i> is specified, <a class="link-man" href="../1/config">config(1)</a> will use it as a value when generating a lint configuration with <b class="flag">&#45;L</b>, and ignore it in all other cases.</dd>
<dt class="list-ohang" style="margin-top: 1.00em;">
<b class="cmd">deffs</b> <i class="arg">name</i> &#91;<span class="opt"><i class="arg">name</i> &#91;<span class="opt"><i class="arg">...</i></span>&#93;</span>&#93;</dt>
<dd class="list-ohang">
Defines a file-system name. It is no more than a regular option, as defined by <b class="cmd">defflag</b>, but it allows the user to select the file-systems to be compiled in the kernel with the <b class="cmd">file-system</b> statement instead of the <b class="cmd">options</b> statement.</dd>
<dt class="list-ohang" style="margin-top: 1.00em;">
<b class="cmd">obsolete defflag</b> &#91;<span class="opt"><i class="arg">file</i></span>&#93; <i class="arg">option</i> &#91;<span class="opt"><i class="arg">option</i> &#91;<span class="opt"><i class="arg">...</i></span>&#93;</span>&#93;</dt>
<dd class="list-ohang">
</dd>
<dt class="list-ohang" style="margin-top: 1.00em;">
<b class="cmd">obsolete defparam</b> &#91;<span class="opt"><i class="arg">file</i></span>&#93; <i class="arg">option</i> &#91;<span class="opt"><i class="arg">option</i> &#91;<span class="opt"><i class="arg">...</i></span>&#93;</span>&#93;</dt>
<dd class="list-ohang">
Those two statements are identical and mark the listed option names as obsolete. If the user selects one of the listed options in the kernel configuration file, <a class="link-man" href="../1/config">config(1)</a> will emit a warning and ignore the option. The optional <i class="arg">file</i> argument should match the original definition of the option.</dd>
<dt class="list-ohang" style="margin-top: 1.00em;">
<b class="cmd">define</b> <i class="arg">attribute</i> &#91;<span class="opt">&#123;<i class="arg">locators</i>&#125;</span>&#93; &#91;<span class="opt">: <i class="arg">dependencies</i></span>&#93;</dt>
<dd class="list-ohang">
Defines an <i class="arg">attribute</i>. The <i class="arg">locators</i> list is optional, and can be empty. If the pair of brackets are present, the locator list is defined and the declared attribute becomes an <span class="emph">interface attribute</span>, on which devices can attach.</dd>
<dt class="list-ohang" style="margin-top: 1.00em;">
<b class="cmd">maxpartitions</b> <i class="arg">number</i></dt>
<dd class="list-ohang">
Defines the maximum number of partitions the disklabels for the considered architecture can hold. This statement cannot be repeated and should only appear in the <i class="file">std.${ARCH}</i> file.</dd>
<dt class="list-ohang" style="margin-top: 1.00em;">
<b class="cmd">maxusers</b> <i class="arg">min default max</i></dt>
<dd class="list-ohang">
Indicates the range of values that will later be accepted by <a class="link-man" href="../1/config">config(1)</a> for the <b class="cmd">maxusers</b> statement in the options selection part of the configuration file. In case the user doesn't include a <b class="cmd">maxusers</b> statement in the configuration file, the value <i class="arg">default</i> is used instead.</dd>
<dt class="list-ohang" style="margin-top: 1.00em;">
<b class="cmd">device</b> <i class="arg">base</i> &#91;<span class="opt">&#123;<i class="arg">locators</i>&#125;</span>&#93; &#91;<span class="opt">: dependencies</span>&#93;</dt>
<dd class="list-ohang">
Declares a device of name <i class="arg">base</i>. The optional list of <i class="arg">locators</i>, which can also be empty, indicates the device can have children attached directly to it. Internally, that means <i class="arg">base</i> becomes an <i class="arg">interface attribute</i>. For every device the user selects, <a class="link-man" href="../1/config">config(1)</a> will add the matching <b class="fname">CFDRIVER_DECL</b>() statement to <i class="file">ioconf.c</i>. However, it is the responsibility of the developer to add the relevant <b class="fname">CFATTACH_DECL</b>() line to the source of the device's driver.</dd>
<dt class="list-ohang" style="margin-top: 1.00em;">
<b class="cmd">attach</b> <i class="arg">base</i> <b class="cmd">at</b> <i class="arg">attr</i> &#91;<span class="opt">, <i class="arg">attr</i> &#91;<span class="opt">, <i class="arg">...</i></span>&#93;</span>&#93; &#91;<span class="opt"><b class="cmd">with</b> <i class="arg">name</i></span>&#93; &#91;<span class="opt">: dependencies</span>&#93;</dt>
<dd class="list-ohang">
All devices must have at least one declared attachment. Otherwise, they will never be found in the <a class="link-man" href="../9/autoconf">autoconf(9)</a> process. The attributes on which an instance of device <i class="arg">base</i> can attach must be <i class="arg">interface attributes</i>, or <b class="cmd">root</b> in case the device is at the top-level, which is usually the case of e.g., <a class="link-man" href="../4/mainbus">mainbus(4)</a>. The instances of device <i class="arg">base</i> will later attach to one interface attribute from the specified list.<p>
Different <b class="cmd">attach</b> definitions must use different names using the <b class="cmd">with</b> option. It is then possible to use the associated <i class="arg">name</i> as a conditional element in a <b class="cmd">file</b> statement.</dd>
<dt class="list-ohang" style="margin-top: 1.00em;">
<b class="cmd">defpseudo</b> <i class="arg">base</i> &#91;<span class="opt">: dependencies</span>&#93;</dt>
<dd class="list-ohang">
Declares a pseudo-device. Those devices don't need an attachment to be declared, they will always be attached if they were selected by the user.</dd>
<dt class="list-ohang" style="margin-top: 1.00em;">
<b class="cmd">defpseudodev</b> <i class="arg">base</i> &#91;<span class="opt">&#123;<i class="arg">locators</i>&#125;</span>&#93; &#91;<span class="opt">: dependencies</span>&#93;</dt>
<dd class="list-ohang">
Declares a pseudo-device. Those devices don't need an attachment to be declared, they will always be attached if they were selected by the user. This declaration should be used if the pseudodevice uses <a class="link-man" href="../9/autoconf">autoconf(9)</a> functions to manage its instances or attach children. As for normal devices, an optional list of <i class="arg">locators</i> can be defined, which implies an interface attribute named <i class="arg">base</i>, allowing the pseudo-device to have children. Interface attributes can also be defined in the <i class="arg">dependencies</i> list.</dd>
<dt class="list-ohang" style="margin-top: 1.00em;">
<b class="cmd">file</b> <i class="arg">path</i> &#91;<span class="opt"><i class="arg">condition</i></span>&#93; &#91;<span class="opt"><b class="cmd">needs-count</b></span>&#93; &#91;<span class="opt"><b class="cmd">needs-flag</b></span>&#93; &#91;<span class="opt"><b class="cmd">compile with</b> <i class="arg">rule</i></span>&#93;</dt>
<dd class="list-ohang">
Adds a source file to the list of files to be compiled into the kernel, if the <i class="arg">conditions</i> are met. The <b class="cmd">needs-count</b> option indicates that the source file requires the number of all the countable objects it depends on (through the <i class="arg">conditions</i>) to be defined. It is usually used for <i class="arg">pseudo-devices</i> whose number can be specified by the user in the <b class="cmd">pseudo-device</b> statement. Countable objects are devices and pseudo-devices. For the former, the count is the number of declared instances. For the latter, it is the number specified by the user, defaulting to 1. The <b class="cmd">needs-flag</b> options requires that a flag indicating the selection of an attribute to be created, but the precise number isn't needed. This is useful for source files that only partly depend on the attribute, and thus need to add pre-processor statements for it.<p>
<b class="cmd">needs-count</b> and <b class="cmd">needs-flag</b> both produce a header file for each of the considered attributes. The name of that file is <i class="file">&lt;attribute&gt;.h</i>. It contains one pre-processor definition of <span class="define">NATTRIBUTE</span> set to 0 if the attribute was not selected by the user, or to the number of instances of the device in the <b class="cmd">needs-count</b> case, or to 1 in all the other cases.<p>
The <i class="arg">rule</i> argument specifies the <a class="link-man" href="../1/make">make(1)</a> rule that will be used to compile the source file. If it is not given, the default rule for the type of the file will be used. For a given file, there can be more than one <b class="cmd">file</b> statement, but not from the same configuration source file, and all later statements can only specify a <i class="arg">rule</i> argument, and no <i class="arg">conditions</i> or flags. This is useful when a file needs special consideration from one particular architecture.</dd>
<dt class="list-ohang" style="margin-top: 1.00em;">
<b class="cmd">object</b> <i class="arg">path</i> &#91;<span class="opt"><i class="arg">condition</i></span>&#93;</dt>
<dd class="list-ohang">
Adds an object file to the list of objects to be linked into the kernel, if the <i class="arg">conditions</i> are met. This is most useful for third parties providing binary-only components.</dd>
<dt class="list-ohang" style="margin-top: 1.00em;">
<b class="cmd">device-major</b> <i class="arg">base</i> &#91;<span class="opt"><b class="cmd">char</b> <i class="arg">number</i></span>&#93; &#91;<span class="opt"><b class="cmd">block</b> <i class="arg">number</i></span>&#93; &#91;<span class="opt"><i class="arg">condition</i></span>&#93;</dt>
<dd class="list-ohang">
Associates a major device number with the device <i class="arg">base</i>. A device can be a character device, a block device, or both, and can have different numbers for each. The <i class="arg">condition</i> indicates when the relevant line should be added to <i class="file">ioconf.c</i>, and works just like the <b class="cmd">file</b> statement.</dd>
<dt class="list-ohang" style="margin-top: 1.00em;">
<b class="cmd">makeoptions</b> <i class="arg">condition name</i>+=<i class="arg">value</i> &#91;<span class="opt">, <i class="arg">condition name</i>+=<i class="arg">value</i></span>&#93;</dt>
<dd class="list-ohang">
Appends to a definition in the generated <i class="file">Makefile</i>.</dd>
</dl>
</div>
<div class="subsection">
<h2 id="x4f5054494f4e532053454c454354494f4e">OPTIONS SELECTION</h2><dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-ohang">
<dt class="list-ohang" style="margin-top: 1.00em;">
<b class="cmd">machine</b> <i class="arg">machine</i> &#91;<span class="opt"><i class="arg">arch</i> &#91;<span class="opt"><i class="arg">subarch</i> &#91;<span class="opt"><i class="arg">...</i></span>&#93;</span>&#93;</span>&#93;</dt>
<dd class="list-ohang">
The <b class="cmd">machine</b> statement should appear first in the kernel configuration file, with the exception of context-neutral statements. It makes <a class="link-man" href="../1/config">config(1)</a> include, in that order, the following files:<ol style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 5.00ex;" class="list list-enum">
<li class="list-enum" style="margin-top: 0.00em;">
<i class="file">conf/files</i></li>
<li class="list-enum" style="margin-top: 0.00em;">
<i class="file">arch/${ARCH}/conf/files.${ARCH}</i> if defined</li>
<li class="list-enum" style="margin-top: 0.00em;">
<i class="file">arch/${SUBARCH}/conf/files.${SUBARCH}</i> for each defined sub-architecture</li>
<li class="list-enum" style="margin-top: 0.00em;">
<i class="file">arch/${MACHINE}/conf/files.${MACHINE}</i></li>
</ol>
It also defines an attribute for the <i class="arg">machine</i>, the <i class="arg">arch</i> and each of the <i class="arg">subarch</i>.</dd>
<dt class="list-ohang" style="margin-top: 1.00em;">
<b class="cmd">package</b> <i class="arg">path</i></dt>
<dd class="list-ohang">
Simpler version of:<p>
<pre style="margin-left: 5.00ex;" class="lit display">
prefix PATH 
include FILE 
prefix</pre>
</dd>
<dt class="list-ohang" style="margin-top: 1.00em;">
<b class="cmd">ident</b> <i class="arg">string</i></dt>
<dd class="list-ohang">
Defines the indentification string of the kernel. This statement is optional, and the name of the main configuration file will be used as a default value.</dd>
<dt class="list-ohang" style="margin-top: 1.00em;">
<b class="cmd">no ident</b></dt>
<dd class="list-ohang">
Deletes any pre-existing indentification string of the kernel.</dd>
<dt class="list-ohang" style="margin-top: 1.00em;">
<b class="cmd">maxusers</b> <i class="arg">number</i></dt>
<dd class="list-ohang">
Despite its name, this statement does not limit the maximum number of users on the system. There is no such limit, actually. However, some kernel structures need to be adjusted to accommodate with more users, and the <b class="cmd">maxusers</b> parameter is used for example to compute the maximum number of opened files, and the maximum number of processes, which itself is used to adjust a few other parameters.</dd>
<dt class="list-ohang" style="margin-top: 1.00em;">
<b class="cmd">options</b> <i class="arg">name</i> &#91;<span class="opt">= <i class="arg">value</i></span>&#93; &#91;<span class="opt">, <i class="arg">name</i> &#91;<span class="opt">= <i class="arg">value</i></span>&#93;, <i class="arg">...</i></span>&#93;</dt>
<dd class="list-ohang">
Selects the option <i class="arg">name</i>, affecting it a <i class="arg">value</i> if the options requires it (see the <b class="cmd">defflag</b> and <b class="cmd">defparam</b> statements).<p>
If the option has not been declared in the options description part of the kernel configuration machinery, it will be added as a pre-processor definition when source files are compiled.</dd>
<dt class="list-ohang" style="margin-top: 1.00em;">
<b class="cmd">no options</b> <i class="arg">name</i> &#91;<span class="opt">, <i class="arg">name</i> &#91;<span class="opt">, <i class="arg">...</i></span>&#93;</span>&#93;</dt>
<dd class="list-ohang">
Un-selects the option <i class="arg">name</i>. If option <i class="arg">name</i> has not been previously selected, the statement produces an error.</dd>
<dt class="list-ohang" style="margin-top: 1.00em;">
<b class="cmd">file-system</b> <i class="arg">name</i> &#91;<span class="opt">, <i class="arg">name</i> &#91;<span class="opt">, <i class="arg">...</i></span>&#93;</span>&#93;</dt>
<dd class="list-ohang">
Adds support for all the listed file-systems.</dd>
<dt class="list-ohang" style="margin-top: 1.00em;">
<b class="cmd">no file-system</b> <i class="arg">name</i> &#91;<span class="opt">, <i class="arg">name</i> &#91;<span class="opt">, <i class="arg">...</i></span>&#93;</span>&#93;</dt>
<dd class="list-ohang">
Removes support for all the listed file-systems.</dd>
<dt class="list-ohang" style="margin-top: 1.00em;">
<b class="cmd">config</b> <i class="arg">name</i> <b class="cmd">root on</b> <i class="arg">device</i> &#91;<span class="opt"><b class="cmd">type</b> <i class="arg">fs</i></span>&#93; &#91;<span class="opt"><b class="cmd">dumps on</b> <i class="arg">device</i></span>&#93;</dt>
<dd class="list-ohang">
Adds <i class="arg">name</i> to the list of kernel binaries to compile from the configuration file, using the specified root and dump devices information.<p>
Any of the <i class="arg">device</i> and <i class="arg">fs</i> parameters can be wildcarded with &#8220;?&#8221; to let the kernel automatically discover those values.<p>
At least one <b class="cmd">config</b> statement must appear in the configuration file.</dd>
<dt class="list-ohang" style="margin-top: 1.00em;">
<b class="cmd">no config</b> <i class="arg">name</i></dt>
<dd class="list-ohang">
Removes <i class="arg">name</i> from the list of kernel binaries to compile from the configuration file.</dd>
<dt class="list-ohang" style="margin-top: 1.00em;">
<i class="arg">instance</i> <b class="cmd">at</b> <i class="arg">attachment</i> &#91;<span class="opt"><i class="arg">locator specification</i></span>&#93;</dt>
<dd class="list-ohang">
Configures an instance of a device attaching at a specific location in the device tree. All parameters can be wildcarded, with a &#8220;*&#8221; for <i class="arg">instance</i>, and a &#8220;?&#8221; for <i class="arg">attachment</i> and the locators.</dd>
<dt class="list-ohang" style="margin-top: 1.00em;">
<b class="cmd">no</b> <i class="arg">instance</i> &#91;<span class="opt"><b class="cmd">at</b> <i class="arg">attachment</i></span>&#93;</dt>
<dd class="list-ohang">
Removes the previously configured instances of a device that exactly match the given specification. If two instances differ only by their locators, both are removed. If no <i class="arg">attachment</i> is specified, all matching instances are removed.<p>
If <i class="arg">instance</i> is a bare device name, all the previously defined instances of that device, regardless of the numbers or wildcard, are removed.</dd>
<dt class="list-ohang" style="margin-top: 1.00em;">
<b class="cmd">no device at</b> <i class="arg">attachment</i></dt>
<dd class="list-ohang">
Removes all previously configured instances that attach to the specified attachment. If <i class="arg">attachment</i> ends with a &#8220;*&#8221;, all instances attaching to all the variants of <i class="arg">attachment</i> are removed.</dd>
<dt class="list-ohang" style="margin-top: 1.00em;">
<b class="cmd">pseudo-device</b> <i class="arg">device</i> &#91;<span class="opt"><i class="arg">number</i></span>&#93;</dt>
<dd class="list-ohang">
Adds support for the specified pseudo-device. The parameter <i class="arg">number</i> is passed to the initialisation function of the pseudo-device, usually to indicate how many instances should be created. It defaults to 1, and some pseudo-devices ignore that parameter.</dd>
<dt class="list-ohang" style="margin-top: 1.00em;">
<b class="cmd">no pseudo-device</b> <i class="arg">name</i></dt>
<dd class="list-ohang">
Removes support for the specified pseudo-device.</dd>
<dt class="list-ohang" style="margin-top: 1.00em;">
<b class="cmd">makeoptions</b> <i class="arg">name</i>=value &#91;<span class="opt">, <i class="arg">name</i>+=value &#91;<span class="opt">, <i class="arg">...</i></span>&#93;</span>&#93;</dt>
<dd class="list-ohang">
Adds or appends to a definition in the generated <i class="file">Makefile</i>. A definition cannot be overriden, it must be removed before it can be added again.</dd>
<dt class="list-ohang" style="margin-top: 1.00em;">
<b class="cmd">no makeoptions</b> <i class="arg">name</i> &#91;<span class="opt">, <i class="arg">name</i> &#91;<span class="opt">, <i class="arg">...</i></span>&#93;</span>&#93;</dt>
<dd class="list-ohang">
Removes one or more definitions from the generated <i class="file">Makefile</i>.</dd>
<dt class="list-ohang" style="margin-top: 1.00em;">
<b class="cmd">select</b> <i class="arg">name</i></dt>
<dd class="list-ohang">
Adds the specified attribute and its dependencies.</dd>
<dt class="list-ohang" style="margin-top: 1.00em;">
<b class="cmd">no select</b> <i class="arg">name</i></dt>
<dd class="list-ohang">
Removes the specified attribute and all the attributes which depend on it.</dd>
</dl>
</div>
</div>
<div class="section">
<h1 id="x46494c4553">FILES</h1> The files are relative to the kernel source top directory (e.g., <i class="file">/usr/src/sys</i>).<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="file">arch/${MACHINE}/conf/std.${MACHINE}</i></dt>
<dd class="list-tag" style="margin-left: 35.00ex;">
Standard configuration for the given architecture. This file should always be included.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="file">arch/${MACHINE}/conf/GENERIC</i></dt>
<dd class="list-tag" style="margin-left: 35.00ex;">
Standard options selection file for the given architecture. Users should always start changing their main kernel configuration file by editing a copy of this file.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="file">conf/files</i></dt>
<dd class="list-tag" style="margin-left: 35.00ex;">
Main options description file.</dd>
</dl>
</div>
<div class="section">
<h1 id="x4558414d504c4553">EXAMPLES</h1> <a class="link-man" href="../5/config.samples">config.samples(5)</a> uses several examples to cover all the practical aspects of writing or modifying a kernel configuration file.</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../1/config">config(1)</a>, <a class="link-man" href="../4/options">options(4)</a>, <a class="link-man" href="../5/config.samples">config.samples(5)</a>, <a class="link-man" href="../9/config">config(9)</a></div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
October 30, 2014</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
<>

