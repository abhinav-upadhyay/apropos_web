<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/../4/strict.dtd">
>
<head>
<meta http-equiv="Content-Type" content="te../; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="../style.css" type="text/css" media="all">
<title>
NSSWITCH.CONF(5)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
NSSWITCH.CONF(5)</td>
<td class="head-vol" align="center">
File Formats Manual</td>
<td class="head-rtitle" align="right">
NSSWITCH.CONF(5)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">nsswitch.conf</b> &#8212; <span class="desc">name-service switch configuration file</span></div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> The <b class="name">nsswitch.conf</b> file specifies how the <a class="link-man" href="../3/nsdispatch">nsdispatch(3)</a> (name-service switch dispatcher) routines in the C library should operate.<p>
The configuration file controls how a process looks up various databases containing information regarding hosts, users (passwords), groups, netgroups, etc. Each database comes from a source (such as local files, DNS, and NIS), and the order to look up the sources is specified in <b class="name">nsswitch.conf</b>.<p>
Each entry in <b class="name">nsswitch.conf</b> consists of a database name, and a space separated list of sources. Each source can have an optional trailing criterion that determines whether the next listed source is used, or the search terminates at the current source. Each criterion consists of one or more status codes, and actions to take if that status code occurs.<div class="subsection">
<h2 id="x536f7572636573">Sources</h2> The following sources are implemented:<table style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 5.00ex;" class="list list-col">
<col style="min-width: 13.00ex;">
<tbody>
<tr class="list-col">
<td class="list-col" style="margin-top: 0.00em;">
<span class="symb">Source</span></td>
<td class="list-col" style="margin-top: 0.00em;">
Description</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 0.00em;">
files</td>
<td class="list-col" style="margin-top: 0.00em;">
Local files, such as <i class="file">/etc/hosts</i>, and <i class="file">/etc/passwd</i>.</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 0.00em;">
dns</td>
<td class="list-col" style="margin-top: 0.00em;">
Internet Domain Name System. &#8220;hosts&#8221; and &#8220;networks&#8221; use <span class="symb">IN</span> class entries, all other databases use <span class="symb">HS</span> class (Hesiod) entries.</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 0.00em;">
mdnsd</td>
<td class="list-col" style="margin-top: 0.00em;">
Use <a class="link-man" href="../8/mdnsd">mdnsd(8)</a> for &#8220;hosts&#8221; lookups, acting as both a system-wide cache for normal unicast DNS as well as providing multicast DNS (&#8220;zeroconf&#8221;) lookups.</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 0.00em;">
multicast_dns</td>
<td class="list-col" style="margin-top: 0.00em;">
Use <a class="link-man" href="../8/mdnsd">mdnsd(8)</a> only for multicast DNS &#8220;hosts&#8221; lookups. This would normally be used in conjunction with &#8220;dns&#8221;, which would then provide unicast DNS resolver functions.</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 0.00em;">
nis</td>
<td class="list-col" style="margin-top: 0.00em;">
NIS (formerly YP)</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 0.00em;">
compat</td>
<td class="list-col" style="margin-top: 0.00em;">
support &#8216;+/-&#8217; in the &#8220;passwd&#8221; and &#8220;group&#8221; databases. If this is present, it must be the only source for that entry.</td>
</tr>
</tbody>
</table>
</div>
<div class="subsection">
<h2 id="x446174616261736573">Databases</h2> The following databases are used by the following C library functions:<table style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 5.00ex;" class="list list-col">
<col style="min-width: 8.00ex;">
<tbody>
<tr class="list-col">
<td class="list-col" style="margin-top: 0.00em;">
<span class="symb">Database</span></td>
<td class="list-col" style="margin-top: 0.00em;">
Used by</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 0.00em;">
group</td>
<td class="list-col" style="margin-top: 0.00em;">
<a class="link-man" href="../3/getgrent">getgrent(3)</a></td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 0.00em;">
hosts</td>
<td class="list-col" style="margin-top: 0.00em;">
<a class="link-man" href="../3/gethostbyname">gethostbyname(3)</a></td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 0.00em;">
netgroup</td>
<td class="list-col" style="margin-top: 0.00em;">
<a class="link-man" href="../3/getnetgrent">getnetgrent(3)</a></td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 0.00em;">
networks</td>
<td class="list-col" style="margin-top: 0.00em;">
<a class="link-man" href="../3/getnetbyname">getnetbyname(3)</a></td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 0.00em;">
passwd</td>
<td class="list-col" style="margin-top: 0.00em;">
<a class="link-man" href="../3/getpwent">getpwent(3)</a></td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 0.00em;">
shells</td>
<td class="list-col" style="margin-top: 0.00em;">
<a class="link-man" href="../3/getusershell">getusershell(3)</a></td>
</tr>
</tbody>
</table>
</div>
<div class="subsection">
<h2 id="x53746174757320636f646573">Status codes</h2> The following status codes are available:<table style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 5.00ex;" class="list list-col">
<col style="min-width: 8.00ex;">
<tbody>
<tr class="list-col">
<td class="list-col" style="margin-top: 0.00em;">
<span class="symb">Status</span></td>
<td class="list-col" style="margin-top: 0.00em;">
Description</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 0.00em;">
success</td>
<td class="list-col" style="margin-top: 0.00em;">
The requested entry was found.</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 0.00em;">
notfound</td>
<td class="list-col" style="margin-top: 0.00em;">
The entry is not present at this source.</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 0.00em;">
tryagain</td>
<td class="list-col" style="margin-top: 0.00em;">
The source is busy, and may respond to retries.</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 0.00em;">
unavail</td>
<td class="list-col" style="margin-top: 0.00em;">
The source is not responding, or entry is corrupt.</td>
</tr>
</tbody>
</table>
</div>
<div class="subsection">
<h2 id="x416374696f6e73">Actions</h2> For each of the status codes, one of two actions is possible:<table style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 5.00ex;" class="list list-col">
<col style="min-width: 8.00ex;">
<tbody>
<tr class="list-col">
<td class="list-col" style="margin-top: 0.00em;">
<span class="symb">Action</span></td>
<td class="list-col" style="margin-top: 0.00em;">
Description</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 0.00em;">
continue</td>
<td class="list-col" style="margin-top: 0.00em;">
Try the next source</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 0.00em;">
return</td>
<td class="list-col" style="margin-top: 0.00em;">
Return with the current result</td>
</tr>
</tbody>
</table>
</div>
<div class="subsection">
<h2 id="x466f726d6174206f662066696c65">Format of file</h2> A BNF description of the syntax of <b class="name">nsswitch.conf</b> is:<table style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 5.00ex;" class="list list-col">
<col style="min-width: 11.00ex;">
<tbody>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
&lt;entry&gt;</td>
<td class="list-col" style="margin-top: 1.00em;">
::= &lt;database&gt; ":" [&lt;source&gt; [&lt;criteria&gt;]]*</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
&lt;criteria&gt;</td>
<td class="list-col" style="margin-top: 1.00em;">
::= "[" &lt;criterion&gt;+ "]"</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
&lt;criterion&gt;</td>
<td class="list-col" style="margin-top: 1.00em;">
::= &lt;status&gt; "=" &lt;action&gt;</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
&lt;status&gt;</td>
<td class="list-col" style="margin-top: 1.00em;">
::= "success" | "notfound" | "unavail" | "tryagain"</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
&lt;action&gt;</td>
<td class="list-col" style="margin-top: 1.00em;">
::= "return" | "continue"</td>
</tr>
</tbody>
</table>
<p>
Each entry starts on a new line in the file. A &#8216;#&#8217; delimits a comment to end of line. Blank lines are ignored. A &#8216;&#92;&#8217; at the end of a line escapes the newline, and causes the next line to be a continuation of the current line. All entries are case-insensitive.<p>
The default criteria is to return on &#8220;success&#8221;, and continue on anything else (i.e, <code class="lit">[success=return notfound=continue unavail=continue tryagain=continue]</code> ).</div>
<div class="subsection">
<h2 id="x436f6d706174206d6f64653a202b2f2d2073796e746178">Compat mode: +/- syntax</h2> In historical multi-source implementations, the &#8216;+&#8217; and &#8216;-&#8217; characters are used to specify the importing of user password and group information from NIS. Although <b class="name">nsswitch.conf</b> provides alternative methods of accessing distributed sources such as NIS, specifying a sole source of &#8220;compat&#8221; will provide the historical behaviour.<p>
An alternative source for the information accessed via &#8216;+/-&#8217; can be used by specifying &#8220;passwd_compat: source&#8221;. &#8220;source&#8221; in this case can be &#8216;dns&#8217;, &#8216;nis&#8217;, or any other source except for &#8216;files&#8217; and &#8216;compat&#8217;.</div>
<div class="subsection">
<h2 id="x4e6f746573">Notes</h2> Historically, many of the databases had enumeration functions, often of the form <b class="fname">getXXXent</b>(). These made sense when the databases were in local files, but don't make sense or have lesser relevance when there are possibly multiple sources, each of an unknown size. The interfaces are still provided for compatibility, but the source may not be able to provide complete entries, or duplicate entries may be retrieved if multiple sources that contain similar information are specified.<p>
To ensure compatibility with previous and current implementations, the &#8220;compat&#8221; source must appear alone for a given database.</div>
<div class="subsection">
<h2 id="x44656661756c7420736f75726365206c69737473">Default source lists</h2> If, for any reason, <b class="name">nsswitch.conf</b> doesn't exist, or it has missing or corrupt entries, <a class="link-man" href="../3/nsdispatch">nsdispatch(3)</a> will default to an entry of &#8220;files&#8221; for the requested database. Exceptions are:<table style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 5.00ex;" class="list list-col">
<col style="width: 13.00ex;">
<col style="min-width: 9.00ex;">
<tbody>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
<span class="symb">Database</span></td>
<td class="list-col" style="margin-top: 1.00em;">
Default source list</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
group</td>
<td class="list-col" style="margin-top: 1.00em;">
compat</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
group_compat</td>
<td class="list-col" style="margin-top: 1.00em;">
nis</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
hosts</td>
<td class="list-col" style="margin-top: 1.00em;">
files dns</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
netgroup</td>
<td class="list-col" style="margin-top: 1.00em;">
files [notfound=return] nis</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
passwd</td>
<td class="list-col" style="margin-top: 1.00em;">
compat</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
passwd_compat</td>
<td class="list-col" style="margin-top: 1.00em;">
nis</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section">
<h1 id="x46494c4553">FILES</h1><dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/etc/nsswitch.conf</i></dt>
<dd class="list-tag" style="margin-left: 18.00ex;">
The file <b class="name">nsswitch.conf</b> resides in <i class="file">/etc</i>.</dd>
</dl>
</div>
<div class="section">
<h1 id="x4558414d504c4553">EXAMPLES</h1> To lookup hosts in <i class="file">/etc/hosts</i> and then from the DNS, and lookup user information from NIS then files, use:<table style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 5.00ex;" class="list list-col">
<col style="min-width: 7.00ex;">
<tbody>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
hosts:</td>
<td class="list-col" style="margin-top: 1.00em;">
files dns</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
passwd:</td>
<td class="list-col" style="margin-top: 1.00em;">
nis [notfound=return] files</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
group:</td>
<td class="list-col" style="margin-top: 1.00em;">
nis [notfound=return] files</td>
</tr>
</tbody>
</table>
<p>
The criteria &#8220;[notfound=return]&#8221; sets a policy of "if the user is notfound in nis, don't try files." This treats nis as the authoritative source of information, except when the server is down.</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../1/getent">getent(1)</a>, <a class="link-man" href="../3/nsdispatch">nsdispatch(3)</a>, <a class="link-man" href="../5/resolv.conf">resolv.conf(5)</a>, <a class="link-man" href="../8/named">named(8)</a>, <a class="link-man" href="../8/ypbind">ypbind(8)</a></div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> The <b class="name">nsswitch.conf</b> file format first appeared in <span class="unix">NetBSD&#160;1.4</span>.</div>
<div class="section">
<h1 id="x415554484f5253">AUTHORS</h1> <span class="author">Luke Mewburn</span> &#60;lukem@NetBSD.org&#62; wrote this freely distributable name-service switch implementation, using ideas from the ULTRIX <a class="link-man" href="../5/svc.conf">svc.conf(5)</a> and Solaris <a class="link-man" href="../4/nsswitch.conf">nsswitch.conf(4)</a> manual pages.</div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
October 25, 2009</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
<>

