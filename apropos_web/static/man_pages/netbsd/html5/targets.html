<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="../style.css" type="text/css" media="all">
<title>
TARGETS(5)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
TARGETS(5)</td>
<td class="head-vol" align="center">
File Formats Manual</td>
<td class="head-rtitle" align="right">
TARGETS(5)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">targets</b> &#8212; <span class="desc">configuration file for iSCSI targets</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1><table class="synopsis">
<col style="width: 7.00ex;">
<col>
<tbody>
<tr>
<td>
targets</td>
<td>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> The <b class="name">targets</b> file describes the iSCSI storage which is presented to iSCSI initiators by the <a class="link-man" href="../8/iscsi-target">iscsi-target(8)</a> service. A description of the iSCSI protocol can be found in <span class="ref-title">Internet Small Computer Systems Interface RFC 3720.</span><p>
Each line in the file (other than comment lines that begin with a &#8216;#&#8217;) specifies an extent, a device (made up of extents or other devices), or a target to present to the initiator.<p>
Each definition, an extent, a device, and a target, is specified on a single whitespace delimited line.<p>
The <i class="arg">extent</i> definition specifies a piece of storage that will be used as storage, and presented to initiators. It is the basic definition for an iSCSI target. Each target must contain at least one extent definition. The first field in the definition is the extent name, which must begin with the word &#8220;extent&#8221; and be followed by a number. The next field is the file or <span class="unix">NetBSD</span> device which will be used as persistent storage. The next field is the offset (in bytes) of the start of the extent. This field is usually 0. The fourth field in the definition is the size of the extent. The basic unit is bytes, and the shorthand <i class="arg">KB</i>, <i class="arg">MB</i>, <i class="arg">GB</i>, and <i class="arg">TB</i> can be used for kilobytes (1024 bytes), megabytes (1024 kilobytes), gigabytes (1024 megabytes), and terabytes (1024 gigabytes) respectively. It is possible to use the word &#8220;size&#8221; to use the full size of the pre-existing regular file given in the extent name.<p>
The <i class="arg">device</i> definition specifies a LUN or device, and is made up of extents and other devices. It is possible to create hierarchies of devices using the device definition. The first field in the definition is the device name, which must begin with the word &#8220;device&#8221; and be followed by a number. The next field is the type of resilience that is to be provided by the device. For simple devices, <i class="arg">RAID0</i> suffices. Greater resilience can be gained by using the <i class="arg">RAID1</i> resilience field. Following the resilience field is a list of extents or other devices. Large devices can be created by using multiple RAID0 extents, in which case each extent will be concatenated. Resilient devices can be created by using multiple RAID1 devices or extents, in which case data will be written to each of the devices or extents in turn. If RAID1 resilience is used, all the extents or sub-devices must be the same size. Please note that RAID1 recovery is not yet supported by the <a class="link-man" href="../8/iscsi-target">iscsi-target(8)</a> utility. An extent or sub-device may only be used once.<p>
The <i class="arg">target</i> definition specifies an iSCSI target, which is presented to the iSCSI initiator. Multiple targets can be specified. The first field in the definition is the target name, which must begin with either of the words &#8220;target&#8221; or &#8220;lun&#8221; and be followed by a number. Optionally, if a target is followed by an &#8220;=&#8221; sign and some text, the text is taken to be that of the iSCSI Qualified Name of the target. This IQN is used by the initiator to connect to the appropriate target. The next field is a selector for whether the storage should be presented as writable, or merely as read-only storage. The field of &#8220;rw&#8221; denotes read-write storage, whilst &#8220;ro&#8221; denotes read-only storage. The next field is the device or extent name that will be used as persistent storage for this target. The fourth field is a slash-notation netmask which will be used, during the discovery phase, to control the network addresses to which targets will be presented. The magic values &#8220;any&#8221; and &#8220;all&#8221; will expand to be the same as &#8220;0/0&#8221;. If an attempt is made to discover a target which is not allowed by the netmask, a warning will be issued using <a class="link-man" href="../3/syslog">syslog(3)</a> to make administrators aware of this attempt. The administrator can still use tcp wrapper functionality, as found in <a class="link-man" href="../5/hosts_access">hosts_access(5)</a> and <a class="link-man" href="../5/hosts.deny">hosts.deny(5)</a> to allow or deny discovery attempts from initiators as well as using the inbuilt netmask functionality.</div>
<div class="section">
<h1 id="x46494c4553">FILES</h1><dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/etc/iscsi/targets</i></dt>
<dd class="list-tag" style="margin-left: 18.00ex;">
the list of exported storage <b class="name">targets</b></dd>
</dl>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../3/syslog">syslog(3)</a>, <a class="link-man" href="../5/hosts.deny">hosts.deny(5)</a>, <a class="link-man" href="../5/hosts_access">hosts_access(5)</a>, <a class="link-man" href="../8/iscsi-target">iscsi-target(8)</a></div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> The <b class="name">targets</b> file first appeared in <span class="unix">NetBSD&#160;4.0</span>.</div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
December 18, 2007</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
</html>

