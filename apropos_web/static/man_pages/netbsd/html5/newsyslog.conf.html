<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/../4/strict.dtd">
>
<head>
<meta http-equiv="Content-Type" content="te../; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="../style.css" type="text/css" media="all">
<title>
NEWSYSLOG(8)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
NEWSYSLOG(8)</td>
<td class="head-vol" align="center">
System Manager's Manual</td>
<td class="head-rtitle" align="right">
NEWSYSLOG(8)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">newsyslog</b> &#8212; <span class="desc">maintain system log files to manageable sizes</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1><table class="synopsis">
<col style="width: 9.00ex;">
<col>
<tbody>
<tr>
<td>
newsyslog</td>
<td>
&#91;<span class="opt"><b class="flag">&#45;nrsvF</b></span>&#93; &#91;<span class="opt"><b class="flag">&#45;f</b> <i class="arg">config_file</i></span>&#93; &#91;<span class="opt"><i class="file">file ...</i></span>&#93;</td>
</tr>
</tbody>
</table>
</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> <b class="name">newsyslog</b> is a program that should be scheduled to run periodically by <a class="link-man" href="../8/cron">cron(8)</a>. When it is executed it archives log files if necessary. If a log file is determined to require archiving, <b class="name">newsyslog</b> rearranges the files so that &#8220;<b class="var">logfile</b>&#8221; is empty, &#8220;<b class="var">logfile</b><code class="lit">.0</code>&#8221; has the last period's logs in it, &#8220;<b class="var">logfile</b><code class="lit">.1</code>&#8221; has the next to last period's logs in it and so on, up to a user-specified number of archived logs. Optionally the archived logs can be compressed to save space.<p>
A log can be archived for three reasons:<ol style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 5.00ex;" class="list list-enum">
<li class="list-enum" style="margin-top: 1.00em;">
It is larger than the configured size (in kilobytes).</li>
<li class="list-enum" style="margin-top: 1.00em;">
A configured number of hours have elapsed since the log was last archived.</li>
<li class="list-enum" style="margin-top: 1.00em;">
The configured time for rotation of the log occurred within the last 60 minutes.</li>
</ol>
<p>
The granularity of <b class="name">newsyslog</b> is dependent on how often it is scheduled to run by <a class="link-man" href="../8/cron">cron(8)</a>. It is recommended that <b class="name">newsyslog</b> be run once hourly.<p>
When starting up, <b class="name">newsyslog</b> reads in a configuration file to determine which logs may potentially be archived. By default, this configuration file is <i class="file">/etc/newsyslog.conf</i>. Each line of the file contains information about a particular log file that should be handled by <b class="name">newsyslog</b>. Each line has six mandatory fields and three optional fields, with whitespace separating each field. Blank lines or lines beginning with &#8220;#&#8221; are ignored. The fields of the configuration file are as follows:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="arg">logfile_name</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Name of the system log file to be archived.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="arg">owner:group</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
This optional field specifies the owner and group for the archive file. The &#8220;:&#8221; is essential, even if the <i class="arg">owner</i> or <i class="arg">group</i> field is left blank. The field may be numeric, or a name which is present in <i class="file">/etc/passwd</i> or <i class="file">/etc/group</i>. For backward compatibility, &#8220;&#46;&#8221; is usable in lieu of &#8220;:&#8221;, however use of this feature is discouraged.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="arg">mode</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Specify the mode of the log file and archives.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="arg">ngen</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Specify the number of archive files to be kept besides the log file itself.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="arg">size</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
When the size of the log file reaches <i class="arg">size</i> kilobytes, the log file will be trimmed as described above. If this field is replaced by an asterisk (&#8216;<code class="lit">*</code>&#8217;), then the size of the log file is not taken into account when determining when to trim the log file.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="arg">when</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
The <i class="arg">when</i> field can consist of an interval, a specific time, or both. If the <i class="arg">when</i> field is an asterisk (&#8216;<code class="lit">*</code>&#8217;) log rotation will depend only on the contents of the <i class="arg">size</i> field. Otherwise, the <i class="arg">when</i> field consists of an optional interval in hours, optionally followed by an &#8216;<code class="lit">@</code>&#8217;-sign and a time in a restricted ISO 8601 format or by an &#8216;<code class="lit">$</code>&#8217;-sign and a time specification for logfile rotation at a fixed time once per day, per week or per month.<p>
If a time is specified, the log file will only be trimmed if <b class="name">newsyslog</b> is run within one hour of the specified time. If an interval is specified, the log file will be trimmed if that many hours have passed since the last rotation. When both a time and an interval are specified, the log will be trimmed if either condition is met.<p>
There is no provision for specification of a timezone. There is little point in specifying an explicit minutes or seconds component in the current implementation, since the only comparison is `within the hour'.<p>
<span class="emph">ISO 8601 restricted time format</span><p>
The lead-in character for a restricted ISO 8601 time is an &#8216;<code class="lit">@</code>&#8217;-sign. The particular format of the time in restricted ISO 8601 is: &#91;<span class="opt">&#91;<span class="opt">&#91;<span class="opt">&#91;<span class="opt">&#91;<span class="opt"><b class="var">cc</b></span>&#93;<b class="var">yy</b></span>&#93;<b class="var">mm</b></span>&#93;<b class="var">dd</b></span>&#93;&#91;<span class="opt"><code class="lit">T</code>&#91;<span class="opt"><b class="var">hh</b>&#91;<span class="opt"><b class="var">mm</b>&#91;<span class="opt"><b class="var">ss</b></span>&#93;</span>&#93;</span>&#93;</span>&#93;</span>&#93;. Optional date fields default to the appropriate component of the current date; optional time fields default to midnight; hence if today is January 22, 1999, the following date specifications are all equivalent:<p>
<ul style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 5.00ex;" class="list list-item">
<li class="list-item" style="margin-top: 0.00em;">
&#8216;<code class="lit">19990122T000000</code>&#8217;</li>
<li class="list-item" style="margin-top: 0.00em;">
&#8216;<code class="lit">990122T000000</code>&#8217;</li>
<li class="list-item" style="margin-top: 0.00em;">
&#8216;<code class="lit">0122T000000</code>&#8217;</li>
<li class="list-item" style="margin-top: 0.00em;">
&#8216;<code class="lit">22T000000</code>&#8217;</li>
<li class="list-item" style="margin-top: 0.00em;">
&#8216;<code class="lit">T000000</code>&#8217;</li>
<li class="list-item" style="margin-top: 0.00em;">
&#8216;<code class="lit">T0000</code>&#8217;</li>
<li class="list-item" style="margin-top: 0.00em;">
&#8216;<code class="lit">T00</code>&#8217;</li>
<li class="list-item" style="margin-top: 0.00em;">
&#8216;<code class="lit">22T</code>&#8217;</li>
<li class="list-item" style="margin-top: 0.00em;">
&#8216;<code class="lit">T</code>&#8217;</li>
<li class="list-item" style="margin-top: 0.00em;">
&#8216;<code class="lit"></code>&#8217;</li>
</ul>
<p>
<span class="emph">Day, week and month time format</span><p>
The lead-in character for day, week and month specification is a &#8216;<code class="lit">$</code>&#8217;-sign. The particular format of day, week and month specification is: &#91;<span class="opt"><b class="var">Dhh</b></span>&#93;, &#91;<span class="opt"><b class="var">Ww</b>&#91;<span class="opt"><b class="var">Dhh</b></span>&#93;</span>&#93; and &#91;<span class="opt"><b class="var">Mdd</b>&#91;<span class="opt"><b class="var">Dhh</b></span>&#93;</span>&#93; respectively. Optional time fields default to midnight. The ranges for day and hour specifications are:<p>
<dl style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 5.00ex;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="arg">hh</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
hours, range 0 ... 23</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="arg">w</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
day of week, range 0 ... 6, 0 = Sunday</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="arg">dd</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
day of month, range 1 ... 31, or the letter <span class="emph">L</span> or <span class="emph">l</span> to specify the last day of the month.</dd>
</dl>
<p>
Some examples:<p>
<dl style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 5.00ex;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="arg">$D0</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
rotate every night at midnight</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="arg">$D23</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
rotate every day at 23:00 hr</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="arg">$W0D23</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
rotate every week on Sunday at 23:00 hr</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="arg">$W5D16</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
rotate every week on Friday at 16:00 hr</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="arg">$MLD0</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
rotate at the last day of every month at midnight</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="arg">$M5D6</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
rotate on every 5th day of month at 6:00 hr</dd>
</dl>
</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="arg">flags</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
This field specifies any special processing that is required. These flags are parsed in a case insensitive manner. Individual flags and their meanings:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">-</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
This flag means nothing - it is used as a spacer when no flags are set.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">b</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
The file is a binary file or is not in <a class="link-man" href="../8/syslogd">syslogd(8)</a> format: the ASCII message which <b class="name">newsyslog</b> inserts to indicate that the logs have been trimmed should not be included.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">c</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Create an empty log file if none currently exists.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">n</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
No signal should be sent when the log is trimmed.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">p</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
The first historical log file (i.e. the historical log file with the suffix &#8220;&#46;0&#8221;) should not be compressed.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">j</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Archived log files should be compressed with <a class="link-man" href="../1/bzip2">bzip2(1)</a> to save space.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">x</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Archived log files should be compressed with <a class="link-man" href="../1/xz">xz(1)</a> to save space.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">z</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Archived log files should be compressed with <a class="link-man" href="../1/gzip">gzip(1)</a> to save space.</dd>
</dl>
</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="arg">path_to_pid_file</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
This optional field specifies the file name to read to find the daemon process id. If this field is missing, it defaults to the <i class="file">/var/run/syslogd.pid</i> file. A signal of type <i class="arg">sigtype</i> is sent to the process id contained in this <i class="arg">path_to_pid_file</i> file. This field must start with &#8216;/&#8217; in order to be recognized properly.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="arg">sigtype</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
This optional field specifies the type of signal to be sent to the daemon process. This may be a numeric or symbolic value. By default a SIGHUP (hang-up) will be sent.</dd>
</dl>
</div>
<div class="section">
<h1 id="x4f5054494f4e53">OPTIONS</h1> The following options can be used with newsyslog:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;f</b> <i class="arg">config_file</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Use <i class="arg">config_file</i> instead of <i class="file">/etc/newsyslog.conf</i> as the configuration file.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;n</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Do not trim the logs, but print out what would be done if this option were not specified: <b class="flag">&#45;n</b> implies <b class="flag">&#45;v</b>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;r</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Remove the restriction that <b class="name">newsyslog</b> must be running as root. When running as a regular user, <b class="name">newsyslog</b> will not be able to send a HUP signal to <a class="link-man" href="../8/syslogd">syslogd(8)</a>, so this option should be used only when debugging or trimming user generated logs.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;s</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Do not signal daemon processes.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;v</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Run in verbose mode. In this mode each action that is taken will be printed.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;F</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Force trimming of the logs, even if the trim conditions have not been met. This option is useful for diagnosing system problems by providing you with fresh logs.</dd>
</dl>
<p>
If additional command line arguments are given, <b class="name">newsyslog</b> will only examine log files that match those arguments; otherwise, it will examine all files listed in the configuration file.</div>
<div class="section">
<h1 id="x46494c4553">FILES</h1><dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/etc/newsyslog.conf</i></dt>
<dd class="list-tag" style="margin-left: 23.00ex;">
<b class="name">newsyslog</b> configuration file.</dd>
</dl>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../1/bzip2">bzip2(1)</a>, <a class="link-man" href="../1/gzip">gzip(1)</a>, <a class="link-man" href="../3/syslog">syslog(3)</a>, <a class="link-man" href="../8/syslogd">syslogd(8)</a></div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
June 16, 2012</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
<>

