<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="/static/man_pages/netbsd/style.css" type="text/css" media="all">
<title>
AMD.CONF(5)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
AMD.CONF(5)</td>
<td class="head-vol" align="center">
File Formats Manual</td>
<td class="head-rtitle" align="right">
AMD.CONF(5)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>NAME</h1> amd.conf &#45; Amd configuration file</div>
<div class="section">
<h1>SYNOPSIS</h1> <b>amd.conf</b></div>
<div class="section">
<h1>DESCRIPTION</h1> The <b>amd.conf</b> file is the configuration file for Amd, as part of the am-utils suite.<p>
<b>amd.conf</b> contains runtime configuration information for the <b>Amd</b> automounter program.</div>
<div class="section">
<h1>FILE FORMAT</h1> The file consists of sections and parameters.  A section begins with the name of the section in square brackets and continues until the next section begins or the end the file is reached.  Sections contain parameters of the form 'name = value'.<p>
The file is line-based - that is, each newline-terminated line represents either a comment, a section name or a parameter.  No line-continuation syntax is available.<p>
Section, parameter names and their values are case sensitive.<p>
Only the first equals sign in a parameter is significant.  Whitespace before or after the first equals sign is discarded.  Leading, trailing and internal whitespace in section and parameter names is irrelevant.  Leading and trailing whitespace in a parameter value is discarded.  Internal whitespace within a parameter value is not allowed, unless the whole parameter value is quoted with double quotes as in 'name = "some value"'.<p>
Any line beginning with a pound sign (#) is ignored, as are lines containing only whitespace.<p>
The values following the equals sign in parameters are all either a string (no quotes needed if string does not include spaces) or a boolean, which may be given as yes/no.  Case is significant in all values.  Some items such as cache timeouts are numeric.</div>
<div class="section">
<h1>SECTIONS</h1><div class="subsection">
<h2>The [global] section</h2> Parameters in this section either apply to Amd as a whole, or to all other regular map sections which follow.  There should be only one global section defined in one configuration file.<p>
It is highly recommended that this section be specified first in the configuration file.  If it is not, then regular map sections which precede it will not use global values defined later.<div style="height: 1.00em;">
&#160;</div>
</div>
<div class="subsection">
<h2>Regular [/map] sections</h2> Parameters in regular (non-global) sections apply to a single map entry. For example, if the map section <b>[/homes]</b> is defined, then all parameters following it will be applied to the <i>/homes</i> Amd-managed mount point.</div>
</div>
<div class="section">
<h1>PARAMETERS</h1><div class="subsection">
<h2>Parameters common to all sections</h2> These parameters can be specified either in the global or a map specific section.  Entries specified in a map-specific section override the default value or one defined in the global section.   If such a common parameter is specified only in the global section, it is applicable to all regular map sections that follow.<dl>
<dt>
<b>browsable_dirs</b> (string, default=no)</dt>
<dd>
If "yes," then Amd's top-level mount points will be browsable to <b>readdir</b>(3) calls.  This means you could run for example <b>ls</b>(1) and see what keys are available to mount in that directory.  Not all entries are made visible to readdir(3): the "/default" entry, wildcard entries, and those with a "/" in them are not included.  If you specify "full" to this option, all but "/default" will be visible. Note that if you run a command which will attempt to <b>stat</b>(2) the entries, such as often done by "ls -l" or "ls -F," Amd will attempt to mount <i>every</i> entry in that map.  This is often called a ``mount storm.''<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
<b>map_defaults</b> (string, default to empty)</dt>
<dd>
This option sets a string to be used as the map's /defaults entry, overriding any /defaults specified in the map.  This allows local users to override map defaults without modifying maps globally.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
<b>map_options</b> (string, default no options)</dt>
<dd>
This option is the same as specifying map options on the command line to Amd, such as "cache:=all".<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
<b>map_type</b> (string, default search all map types)</dt>
<dd>
If specified, Amd will initialize the map only for the type given.  This is useful to avoid the default map search type used by Amd which takes longer and can have undesired side-effects such as initializing NIS even if not used.  Possible values are<div style="height: 1.00em;">
&#160;</div>
<br>
<b>exec</b>      executable maps<br>
<b>file</b>      plain files<br>
<b>hesiod</b>    Hesiod name service from MIT<br>
<b>ldap</b>      Lightweight Directory Access Protocol<br>
<b>ndbm</b>      (New) dbm style hash files<br>
<b>nis</b>       Network Information Services (version 2)<br>
<b>nisplus</b>   Network Information Services Plus (version 3)<br>
<b>passwd</b>    local password files<br>
<b>union</b>     union maps<br>
<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
<b>mount_type</b> (string, default=nfs)</dt>
<dd>
All Amd mount types default to NFS.  That is, Amd is an NFS server on the map mount points, for the local host it is running on.  If "autofs" is specified, Amd will be an autofs server for those mount points.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
<b>autofs_use_lofs</b> (string, default=yes)</dt>
<dd>
When set to "yes" and using Autofs, Amd will use lofs-type (loopback) mounts for type:=link mounts.  This has the advantage of mounting in place, and users get to the see the same pathname that they chdir'ed into.  If this option is set to "no," then Amd will use symlinks instead: that code is more tested, but negates autofs's big advantage of in-place mounts.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
<b>search_path</b> (string, default no search path)</dt>
<dd>
This provides a (colon-delimited) search path for file maps.  Using a search path, sites can allow for local map customizations and overrides, and can distributed maps in several locations as needed.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
<b>selectors_in_defaults</b> (boolean, default=no)</dt>
<dd>
If "yes," then the /defaults entry of maps will search for and process any selectors before setting defaults for all other keys in that map.  Useful when you want to set different options for a complete map based on some parameters.  For example, you may want to better the NFS performance over slow slip-based networks as follows:<div style="height: 1.00em;">
&#160;</div>
<br>
/defaults \<br>
    wire==slip-net;opts:=intr,rsize=1024,wsize=1024 \<br>
    wire!=slip-net;opts:=intr,rsize=8192,wsize=8192<br>
<div style="height: 1.00em;">
&#160;</div>
Deprecated form: selectors_on_default<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
<b>sun_map_syntax</b> (boolean, default=no)</dt>
<dd>
If "yes," then Amd will parse the map according to the Sun Automount syntax.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
</div>
<div class="subsection">
<h2>Parameters applicable to the global section only</h2><dl>
<dt>
<b>arch</b> (string, default to compiled in value)</dt>
<dd>
Same as the <b>&#45;A</b> option to Amd.  Allows you to override the value of the <i>arch</i> Amd variable.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
<b>auto_attrcache</b> (numeric, default=0)</dt>
<dd>
Specify in seconds (or units of 0.1 seconds, depending on the OS), what is the (kernel-side) NFS attribute cache timeout for @i{Amd}'s own automount points.  A value of 0 is supposed to turn off attribute caching, meaning that @i{Amd} will be consulted via a kernel-RPC each time someone stat()'s the mount point (which could be abused as a denial-of-service attack). Warning: some OSs are incapable of turning off the NFS attribute cache reliably.  On such systems, Amd may not work reliably under heavy load.  See the README.attrcache document in the Am-utils distribution for more details.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
<b>auto_dir</b> (string, default=/a)</dt>
<dd>
Same as the <b>&#45;a</b> option to Amd.  This sets the private directory where Amd will create sub-directories for its real mount points.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
<b>cache_duration</b> (numeric, default=300)</dt>
<dd>
Same as the <b>&#45;c</b> option to Amd.  Sets the duration in seconds that looked-up or mounted map entries remain in the cache.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
<b>cluster</b> (string, default no cluster)</dt>
<dd>
Same as the <b>&#45;C</b> option to Amd.  Specifies the alternate HP-UX cluster to use.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
<b>debug_mtab_file</b> (string, default=/tmp/mnttab)</dt>
<dd>
Path to mtab file that is used by Amd to store a list of mounted file systems during debug-mtab mode.  This option only applies to systems that store mtab information on disk.</dd>
</dl>
<dl>
<dt>
<b>debug_options</b> (string, default no debug options)</dt>
<dd>
Same as the <b>&#45;D</b> option to Amd.  Specify any debugging options for Amd.  Works only if am-utils was configured for debugging using the --enable-debug option.  The "mem" option, as well as all other options, can be turned on via --enable-debug=mem.  Otherwise debugging options are ignored.  Options are comma delimited, and can be preceded by the string "no" to negate their meaning.  You can get the list of supported debugging options by running Amd &#45;H.  Possible values are:<div style="height: 1.00em;">
&#160;</div>
<br>
<b>all</b>       all options (excludes hrtime and mtab)<br>
<b>defaults</b>  "sensible" default options (all--excluding hrtime, mtab, and xdrtrace)<br>
<b>test</b>      full debug options plus mtab,nodaemon,nofork,noamq<br>
<b>amq</b>       register for amq<br>
<b>daemon</b>    enter daemon mode<br>
<b>fork</b>      fork server<br>
<b>full</b>      program trace<br>
<b>hrtime</b>    print high resolution time stamps (only if syslog(3) is not used)<br>
<b>info</b>      info service specific debugging (hesiod, nis, etc.)<br>
<b>mem</b>       trace memory allocations<br>
<b>mtab</b>      use local "/tmp/mtab" file<br>
<b>readdir</b>   show browsable_dirs progress<br>
<b>str</b>       debug string munging<br>
<b>trace</b>     trace protocol and NFS mount arguments<br>
<b>xdrtrace</b>  trace XDR routines<br>
<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
<b>dismount_interval</b> (numeric, default=120)</dt>
<dd>
Same as the <b>&#45;w</b> option to Amd.  Specify in seconds, the time between attempts to dismount file systems that have exceeded their cached times.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
<b>domain_strip</b> (boolean, default=yes)</dt>
<dd>
If "yes," then the domain name part referred to by ${rhost} is stripped off.  This is useful to keep logs and smaller.  If "no," then the domain name part is left changed.  This is useful when using multiple domains with the same maps (as you may have hosts whose domain-stripped name is identical).<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
<b>exec_map_timeout</b> (numeric, default=10)</dt>
<dd>
The timeout in seconds that <i>Amd</i> will wait for an executable map program before an answer is returned from that program (or script).  This value should be set to as small as possible while still allowing normal replies to be returned before the timer expires, because during the time that the executable map program is queried, <i>Amd</i> is essentially waiting and is thus not responding to any other queries.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
<b>forced_unmounts</b> (boolean, default=no)</dt>
<dd>
If set to "yes," and the client OS supports forced or lazy unmounts, then <i>Amd</i> will attempt to use them if it gets any of three serious error conditions when trying to unmount an existing mount point or mount on top of one: EIO, ESTALE, or EBUSY.<div style="height: 1.00em;">
&#160;</div>
This could be useful to recover from serious conditions such as hardware failure of mounted disks, or NFS servers which are down permanently, were migrated, or changed their IP address.  Only "type:=toplvl" mounts hung with EBUSY are forcibly unmounted using this option, which is useful to recover from a hung <i>Amd</i>).<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
<b>full_os</b> (string, default to compiled in value)</dt>
<dd>
The full name of the operating system, along with its version.  Allows you to override the compiled-in full name and version of the operating system. Useful when the compiled-in name is not desired.  For example, the full operating system name on linux comes up as ``linux'', but you can override it to ``linux-2.2.5.''<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
<b>fully_qualified_hosts</b> (string, default=no)</dt>
<dd>
If "yes," <i>Amd</i> will perform RPC authentication using fully-qualified host names.  This is necessary for some systems, and especially when performing cross-domain mounting.  For this function to work, the <i>Amd</i> variable ${hostd} is used, requiring that ${domain} not be null.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
<b>hesiod_base</b> (string, default=automount)</dt>
<dd>
Specify the base name for hesiod maps.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
<b>karch</b> (string, default to karch of the system)</dt>
<dd>
Same as the <b>&#45;k</b> option to Amd.  Allows you to override the kernel-architecture of your system.  Useful for example on Sun (Sparc) machines, where you can build one Amd binary, and run it on multiple machines, yet you want each one to get the correct <i>karch</i> variable set (for example, sun4c, sun4m, sun4u, etc.)  Note that if not specified, Amd will use uname(3) to figure out the kernel architecture of the machine.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
<b>ldap_base</b> (string, default not set)</dt>
<dd>
Specify the base name for LDAP.  This often includes LDAP-specific values such as country and organization.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
<b>ldap_cache_maxmem</b> (numeric, default=131072)</dt>
<dd>
Specify the maximum memory Amd should use to cache LDAP entries.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
<b>ldap_cache_seconds</b> (numeric, default=0)</dt>
<dd>
Specify the number of seconds to keep entries in the cache.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
<b>ldap_hostports</b> (string, default not set)</dt>
<dd>
Specify the LDAP host and port values.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
<b>ldap_proto_version</b> (numeric, default=2)</dt>
<dd>
Specify the version of the LDAP protocol to use.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
<b>local_domain</b> (string, default no sub-domain)</dt>
<dd>
Same as the <b>&#45;d</b> option to Amd.  Specify the local domain name.  If this option is not given the domain name is determined from the hostname, by removing the first component of the fully-qualified host name.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
<b>localhost_address</b> (string, default to localhost or 127.0.0.1)</dt>
<dd>
Specify the name or IP address for Amd to use when connecting the sockets for the local NFS server and the RPC server.  This defaults to 127.0.0.1 or whatever the host reports as its local address.  This parameter is useful on hosts with multiple addresses where you want to force Amd to connect to a specific address.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
<b>log_file</b> (string, default=/dev/stderr)</dt>
<dd>
Same as the <b>&#45;l</b> option to Amd.  Specify a file name to log Amd events to. If the string <b>/dev/stderr</b> is specified, Amd will send its events to the standard error file descriptor. If the string <b>syslog</b> is given, Amd will record its events with the system logger <b>syslogd</b>(8). The default syslog facility used is LOG_DAEMON.  If you wish to change it, append its name to the log file name, delimited by a single colon.  For example, if <i>logfile</i> is the string <b>syslog:local7</b> then Amd will log messages via <i>syslog</i>(3) using the LOG_LOCAL7 facility (if it exists on the system).<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
<b>log_options</b> (string, default=defaults)</dt>
<dd>
Same as the <b>&#45;x</b> option to Amd.  Specify any logging options for Amd.  Options are comma delimited, and can be preceded by the string "no" to negate their meaning. The "debug" logging option is only available if am-utils was configured with --enable-debug.  You can get the list of supported debugging and logging options by running <b>amd</b> <b>&#45;H</b>. Possible values are:<div style="height: 1.00em;">
&#160;</div>
<br>
<b>all</b>       all messages<br>
<b>defaults</b>  default messages (fatal,error,user,warning,info)<br>
<b>debug</b>     debug messages<br>
<b>error</b>     non-fatal system errors (cannot be turned off)<br>
<b>fatal</b>     fatal errors (cannot be turned off)<br>
<b>info</b>      information<br>
<b>map</b>       map errors<br>
<b>stats</b>     additional statistical information<br>
<b>user</b>      non-fatal user errors<br>
<b>warn</b>      warnings<br>
<b>warning</b>   warnings<br>
<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
<b>map_reload_interval</b> (numeric, default=3600)</dt>
<dd>
The number of seconds that Amd will wait before it checks to see if any maps have changed at their source (NIS servers, LDAP servers, files, etc.).  Amd will reload only those maps that have changed.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
<b>nfs_allow_any_interface</b> (string, default=no)</dt>
<dd>
Normally Amd accepts local NFS packets only from 127.0.0.1.  If this parameter is set to "yes" then Amd will accept local NFS packets from any local interface; this is useful on hosts that may have multiple interfaces where the system is forced to send all outgoing packets (even those bound to the same host) via an address other than 127.0.0.1.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
<b>nfs_allow_insecure_port</b> (string, default=no)</dt>
<dd>
Normally Amd will refuse requests coming from unprivileged ports (i.e. ports &gt;= 1024 on Unix systems), so that only privileged users and the kernel can send NFS requests to it.  However, some kernels (certain versions of Darwin, MacOS X, and Linux) have bugs that cause them to use unprivileged ports in certain situations, which causes Amd to stop dead in its tracks. This parameter allows Amd to operate normally even on such systems, at the expense of a slight decrease in the security of its operations.  If you see messages like "ignoring request from foo:1234, port not reserved" in your Amd log, try enabling this parameter and give it another go.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
<b>nfs_proto</b> (string, default to trying version tcp then udp)</dt>
<dd>
By default, Amd tries TCP and then UDP.  This option forces the overall NFS protocol used to TCP or UDP.  It overrides what is in the Amd maps, and is useful when Amd is compiled with NFSv3 support that may not be stable.  With this option you can turn off the complete usage of NFSv3 dynamically (without having to recompile Amd) until such time as NFSv3 support is desired again.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
<b>nfs_retransmit_counter</b> (numeric, default=11)</dt>
<dd>
Same as the <i>retransmit</i> part of the <b>&#45;t</b><i> timeout.retransmit</i> option to Amd. Specifies the number of NFS retransmissions that the kernel will use to communicate with Amd.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
<b>nfs_retransmit_counter_udp</b> (numeric, default=11)</dt>
<dd>
Same as the <b>nfs_retransmit_counter</b> option, but for all UDP mounts only.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
<b>nfs_retransmit_counter_tcp</b> (numeric, default=11)</dt>
<dd>
Same as the <b>nfs_retransmit_counter</b> option, but for all TCP mounts only.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
<b>nfs_retransmit_counter_toplvl</b> (numeric, default=11)</dt>
<dd>
Same as the <b>nfs_retransmit_counter</b> option, but only for Amd's top-level UDP mounts.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
<b>nfs_retry_interval</b> (numeric, default=8)</dt>
<dd>
Same as the <i>timeout</i> part of the <b>&#45;t</b><i> timeout.retransmit</i> option to Amd.  Specifies the NFS timeout interval, in <i>tenths</i> of seconds, between NFS/RPC retries (for UDP and TCP). This is the value that the kernel will use to communicate with Amd.<div style="height: 1.00em;">
&#160;</div>
Amd relies on the kernel RPC retransmit mechanism to trigger mount retries. The values of the <b>nfs_retransmit_counter</b> and the <b>nfs_retry_interval</b> parameters change the overall retry interval.  Too long an interval gives poor interactive response; too short an interval causes excessive retries.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
<b>nfs_retry_interval_udp</b> (numeric, default=8)</dt>
<dd>
Same as the <b>nfs_retry_interval</b> option, but for all UDP mounts only.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
<b>nfs_retry_interval_tcp</b> (numeric, default=8)</dt>
<dd>
Same as the <b>nfs_retry_interval</b> option, but for all TCP mounts only.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
<b>nfs_retry_interval_toplvl</b> (numeric, default=8)</dt>
<dd>
Same as the <b>nfs_retry_interval</b> option, but only for Amd's top-level UDP mounts.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
<b>nfs_vers</b> (numeric, default to trying version 3 then 2)</dt>
<dd>
By default, Amd tries version 3 and then version 2.  This option forces the overall NFS protocol used to version 3 or 2.  It overrides what is in the Amd maps, and is useful when Amd is compiled with NFSv3 support that may not be stable.  With this option you can turn off the complete usage of NFSv3 dynamically (without having to recompile Amd) until such time as NFSv3 support is desired again.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
<b>nis_domain</b> (string, default to local NIS domain name)</dt>
<dd>
Same as the <b>&#45;y</b> option to Amd.  Specify an alternative NIS domain from which to fetch the NIS maps.  The default is the system domain name.  This option is ignored if NIS support is not available.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
<b>normalize_hostnames</b> (boolean, default=no)</dt>
<dd>
Same as the <b>&#45;n</b> option to Amd.  If "yes," then the name refereed to by ${rhost} is normalized relative to the host database before being used.  The effect is to translate aliases into ``official'' names.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
<b>normalize_slashes</b> (boolean, default=yes)</dt>
<dd>
<div style="height: 1.00em;">
&#160;</div>
If "yes," then Amd will condense all multiple ``/'' (slash) characters into one and remove all trailing slashes.  If "no," then Amd will not touch strings that may contain repeated or trailing slashes.  The latter is sometimes useful with SMB mounts, which often require multiple slash characters in pathnames.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
<b>os</b> (string, default to compiled in value)</dt>
<dd>
Same as the <b>&#45;O</b> option to Amd.  Allows you to override the compiled-in name of the operating system.  Useful when the built-in name is not desired for backward compatibility reasons.  For example, if the build in name is ``sunos5'', you can override it to ``sos5'', and use older maps which were written with the latter in mind.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
<b>osver</b> (string, default to compiled in value)</dt>
<dd>
Same as the <b>&#45;o</b> option to Amd.  Overrides the compiled-in version number of the operating system.  Useful when the built in version is not desired for backward compatibility reasons.  For example, if the build in version is ``2.5.1'', you can override it to ``5.5.1'', and use older maps that were written with the latter in mind.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
<b>pid_file</b> (string, default=/dev/stdout)</dt>
<dd>
Specify a file to store the process ID of the running daemon into.  If not specified, Amd will print its process id onto the standard output.  Useful for killing Amd after it had run.  Note that the PID of a running Amd can also be retrieved via <b>amq</b> <b>&#45;p</b>. This file is used only if the print_pid option is on.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
<b>plock</b> (boolean, default=yes)</dt>
<dd>
Same as the <b>&#45;S</b> option to Amd. If "yes," lock the running executable pages of Amd into memory.  To improve Amd's performance, systems that support the <b>plock</b>(3) or <b>mlockall</b>(2) call can lock the Amd process into memory.  This way there is less chance it the operating system will schedule, page out, and swap the Amd process as needed.  This improves Amd's performance, at the cost of reserving the memory used by the Amd process (making it unavailable for other processes).<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
<b>portmap_program</b> (numeric, default=300019)</dt>
<dd>
Specify an alternate Port-mapper RPC program number, other than the official number.  This is useful when running multiple Amd processes.  For example, you can run another Amd in "test" mode, without affecting the primary Amd process in any way.  For safety reasons, the alternate program numbers that can be specified must be in the range 300019-300029, inclusive. Amq has an option <b>-P</b> which can be used to specify an alternate program number of an Amd to contact.  In this way, amq can fully control any number of Amd processes running on the same host.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
<b>preferred_amq_port</b> (numeric, default=0)</dt>
<dd>
Specify an alternate Port-mapper RPC port number for Amd's Amq service.  This is used for both UDP and TCP.  Setting this value to 0 (or not defining it) will cause Amd to select an arbitrary port number.  Setting the Amq RPC service port to a specific number is useful in firewalled or NAT'ed environments, where you need to know which port Amd will listen on.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
<b>print_pid</b> (boolean, default=no)</dt>
<dd>
Same as the <b>&#45;p</b> option to Amd.  If "yes," Amd will print its process ID upon starting.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
<b>print_version</b> (boolean, default=no)</dt>
<dd>
Same as the <b>&#45;v</b> option to Amd, but the version prints and Amd continues to run.  If "yes," Amd will print its version information string, which includes some configuration and compilation values.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
<b>restart_mounts</b> (boolean, default=no)</dt>
<dd>
Same as the <b>&#45;r</b> option to Amd.  If "yes" Amd will scan the mount table to determine which file systems are currently mounted.  Whenever one of these would have been auto-mounted, Amd inherits it.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
<b>show_statfs_entries</b> (boolean), default=no)</dt>
<dd>
If "yes," then all maps which are browsable will also show the number of entries (keys) they have when "df" runs. (This is accomplished by returning non-zero values to the statfs(2) system call).<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
<b>truncate_log</b> (boolean), default=no)</dt>
<dd>
If "yes," then the log file (if it is a regular file), will be truncated upon startup.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
<b>unmount_on_exit</b> (boolean), default=no)</dt>
<dd>
If "yes," then Amd will attempt to unmount all file systems which it knows about.  Normally Amd leaves all (esp. NFS) mounted file systems intact. Note that Amd does not know about file systems mounted before it starts up, unless the restart_mounts option or <b>&#45;r</b> flag are used.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
<b>use_tcpwrappers</b> (boolean), default=yes)</dt>
<dd>
If "yes," then Amd will use the tcpd/librwap tcpwrappers library (if available) to control access to Amd via the /etc/hosts.allow and /etc/hosts.deny files.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
<b>vendor</b> (string, default to compiled in value)</dt>
<dd>
The name of the vendor of the operating system.  Overrides the compiled-in vendor name.  Useful when the compiled-in name is not desired.  For example, most Intel based systems set the vendor name to ``unknown'', but you can set it to ``redhat.''<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
</div>
<div class="subsection">
<h2>Parameters applicable to regular map sections</h2><dl>
<dt>
<b>map_name</b> (string, must be specified)</dt>
<dd>
Name of the map where the keys are located.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
<b>tag</b> (string, default no tag)</dt>
<dd>
Each map entry in the configuration file can be tagged.  If no tag is specified, that map section will always be processed by Amd.  If it is specified, then Amd will process the map if the <b>-T</b> option was given to Amd, and the value given to that command-line option matches that in the map section.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
</div>
</div>
<div class="section">
<h1>EXAMPLES</h1> Here is a real Amd configuration file I use daily.<p>
<br>
# GLOBAL OPTIONS SECTION<br>
[ global ]<br>
normalize_hostnames =    no<br>
print_pid =              no<br>
restart_mounts =         yes<br>
auto_dir =               /n<br>
log_file =               /var/log/amd<br>
log_options =            all<br>
#debug_options =         all<br>
plock =                  no<br>
selectors_in_defaults =  yes<br>
# config.guess picks up "sunos5" and I don't want to edit my maps yet<br>
os =                     sos5<br>
# if you print_version after setting up "os," it will show it.<br>
print_version =          no<br>
map_type =               file<br>
search_path =            /etc/amdmaps:/usr/lib/amd:/usr/local/AMD/lib<br>
browsable_dirs =         yes<p>
<br>
# DEFINE AN AMD MOUNT POINT<br>
[ /u ]<br>
map_name =               amd.u<p>
<br>
[ /proj ]<br>
map_name =               amd.proj<p>
<br>
[ /src ]<br>
map_name =               amd.src<p>
<br>
[ /misc ]<br>
map_name =               amd.misc<p>
<br>
[ /import ]<br>
map_name =               amd.import<p>
<br>
[ /tftpboot/.amd ]<br>
tag =                    tftpboot<br>
map_name =               amd.tftpboot<br>
</div>
<div class="section">
<h1>SEE ALSO</h1> <b>amd</b>(8), <b>amq</b>(8), <b>ctl-amd</b>(8), <b>automount</b>(8), <b>hosts_access</b>(5).<p>
``am-utils'' <b>info</b>(1) entry.<p>
<i>Linux NFS and Automounter Administration</i> by Erez Zadok, ISBN 0-7821-2739-8, (Sybex, 2001).<p>
<i>http://www.am-utils.org</i><p>
<i>Amd &#45; The 4.4 BSD Automounter</i></div>
<div class="section">
<h1>AUTHORS</h1> Erez Zadok &lt;ezk@cs.sunysb.edu&gt;, Computer Science Department, Stony Brook University, Stony Brook, New York, USA.<p>
Other authors and contributors to am-utils are listed in the <b>AUTHORS</b> file distributed with am-utils.</div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tr>
<td class="foot-date">
7 August 1997</td>
<td class="foot-os" align="right">
</td>
</tr>
</table>
</div>
</body>
</html>

