<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="../style.css" type="text/css" media="all">
<title>
BOOT.CFG(5)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
BOOT.CFG(5)</td>
<td class="head-vol" align="center">
File Formats Manual</td>
<td class="head-rtitle" align="right">
BOOT.CFG(5)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">boot.cfg</b> &#8212; <span class="desc">configuration file for /boot</span></div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> The file <i class="file">/boot.cfg</i> is used to alter the behaviour of the standard boot loader described in <a class="link-man" href="../html8/boot.html">boot(8)</a>. Configuration changes include setting the timeout, choosing a console device, altering the banner text and displaying a menu allowing boot commands to be easily chosen. If a <b class="name">boot.cfg</b> file is not present, the system will boot as normal.<div class="subsection">
<h2 id="x46494c4520464f524d4154">FILE FORMAT</h2> The format of the file is a series of lines containing keyword/value pairs separated by an equals sign (&#8216;=&#8217;). There should be no whitespace surrounding the equals sign. Lines beginning with a hash (&#8216;#&#8217;) are comments and will be ignored.<p>
Some keywords can be present multiple times in the file to define additional items. Such keywords are noted below.<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">banner</span></dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
(may be present multiple times) The text from banner lines is displayed instead of the standard welcome text by the boot loader. Up to 10 lines can be defined. No special character sequences are recognised, so to specify a blank line, a banner line with no value should be given.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">clear</span></dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
If nonzero, clear the screen before printing the banner. If zero, do not clear the screen (the default).</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">consdev</span></dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
Changes the console device to that specified in the value. Valid values are any of those that could be specified at the normal boot prompt with the consdev command.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">default</span></dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
Used to specify the default menu item  which will be chosen in the case of Return being pressed or the timeout timer reaching zero. The value is the number of the menu item as displayed. As described above, the menu items are counted from 1 in the order listed in <b class="name">boot.cfg</b>. If not specified, the default value will be option 1, i.e. the first item.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">format</span></dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
Changes how the menu options are displayed. Should be set to one of &#8216;a&#8217; for automatic, &#8216;l&#8217; for letters and &#8216;n&#8217; for numbers. If set to automatic (the default), menu options will be displayed numerically unless there are more than 9 options and the timeout is greater than zero. If there are more than 9 options with a timeout greater than zero and the format is set to number, only the first 9 options will be available.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">load</span></dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
Used to load kernel modules, which will be passed on to the kernel for initialization during early boot. The argument is either the complete path and file name of the module to be loaded, or a symbolic module name. When the argument is not an absolute path, the boot loader will first attempt to load <i class="file">/stand/&lt;machine&gt;/&lt;kernel_version&gt;/modules/&lt;name&gt;/&lt;name&gt;.kmod</i>. If that file does not exist, it will then attempt to load <i class="file">/&lt;name&gt;</i>. May be used as many times as needed.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">menu</span></dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
(may be present multiple times) Used to define a menu item to be displayed to the end-user at boot time which allows a series of boot commands to be run without further typing. The value consists of the required menu text, followed by a colon (&#8216;:&#8217;) and then the desired command(s). Multiple commands can be specified separated by a semi-colon. If the specified menu text is empty (the colon appears immediately after the equals sign), then the displayed menu text is the same as the command. For example:<p>
<pre style="margin-left: 0.00ex;" class="lit display">
menu=Boot normally:boot 
menu=Boot single-user:boot -s 
menu=Boot with module foo:load /foo.kmod;boot 
menu=Boot with serial console:consdev com0;boot 
menu=:boot hd1a:netbsd -as</pre>
<p>
Each menu item will be prefixed by an ascending number when displayed, i.e. the order in the <b class="name">boot.cfg</b> file is important.<p>
Each command is executed just as though the user had typed it in and so can be any valid command that would be accepted at the normal boot prompt. In addition, &#8220;<b class="cmd">prompt</b>&#8221; can be used to drop to the normal boot prompt.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">rndseed</span></dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
Takes the path to a random-seed file as written by the <b class="flag">&#45;S</b> flag to <a class="link-man" href="../html8/rndctl.html">rndctl(8)</a> as an argument. This file is used to seed the kernel entropy pool <a class="link-man" href="../html9/rnd.html">rnd(9)</a> very early in kernel startup, so that high quality randomness is available to all kernel modules. This argument should be supplied before any &#8220;<b class="cmd">load</b>&#8221; commands that may load executable modules.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">timeout</span></dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
If the value is greater than zero, this specifies the time in seconds that the boot loader will wait for the end-user to choose a menu item. During the countdown period, they may press Return to choose the default option or press a number key corresponding to a menu option. If any other key is pressed, the countdown will stop and the user will be prompted to choose a menu option with no further time limit. If the timeout value is set to zero, the default option will be booted immediately. If the timeout value is negative or is not a number, there will be no time limit for the user to choose an option.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">userconf</span></dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
Passes a <a class="link-man" href="../html4/userconf.html">userconf(4)</a> command to the kernel at boot time.</dd>
</dl>
</div>
</div>
<div class="section">
<h1 id="x4558414d504c4553">EXAMPLES</h1> Here is an example <b class="name">boot.cfg</b> file:<p>
<pre style="margin-left: 5.00ex;" class="lit display">
banner=Welcome to NetBSD 
banner================== 
banner= 
banner=Please choose an option from the following menu: 
menu=Boot normally:boot 
menu=Boot single-user:boot -s 
menu=Boot from second disk:boot hd1a: 
menu=Boot with module foo:load /foo.kmod;boot 
menu=Boot with modules foo and bar:load /foo.kmod;load /bar.kmod;boot 
menu=Boot Xen with 256MB for dom0:load /netbsd-XEN3_DOM0 console=pc;multiboot /usr/pkg/xen3-kernel/xen.gz dom0_mem=256M 
menu=Boot Xen with 256MB for dom0 (serial):load /netbsd-XEN3_DOM0 console=com0;multiboot /usr/pkg/xen3-kernel/xen.gz dom0_mem=256M console=com1 com1=115200,8n1 
menu=Boot Xen with dom0 in single-user mode:load /netbsd-XEN3_DOM0 -s;multiboot /usr/pkg/xen3-kernel/xen.gz dom0_mem=256M 
menu=Go to command line (advanced users only):prompt 
clear=1 
timeout=-1 
default=1 
userconf=disable ehci* 
# Always load ramdisk module 
load=/miniroot.kmod</pre>
<p>
N.B. Xen counts serial ports from com1 upwards, but <span class="unix">NetBSD</span> counts from com0, so the appropriate device name must be used. Please see the Xen with serial console example above.<p>
This will clear the screen and display:<p>
<pre style="margin-left: 5.00ex;" class="lit display">
Welcome to NetBSD 
================= 
 
Please choose an option from the following menu: 
 
      1. Boot normally 
      2. Boot single-user 
      3. Boot from second disk 
      4. Boot with module foo 
      5. Boot with modules foo and bar 
      6. Boot Xen with 256 MB for dom0 
      7. Boot Xen with 256 MB for dom0 (serial) 
      8. Boot Xen with dom0 in single-user mode 
      9. Go to command line (advanced users only) 
 
Option [1]:</pre>
<p>
It will then wait for the user to type 1, 2, 3, 4, 5, 6, 7, 8 or 9 followed by Return. Pressing Return by itself will run option 1. There will be no timeout.</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../html8/boot.html">boot(8)</a>, <a class="link-man" href="../html9/boothowto.html">boothowto(9)</a></div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> The <b class="name">boot.cfg</b> file appeared in <span class="unix">NetBSD&#160;5.0</span>.</div>
<div class="section">
<h1 id="x415554484f5253">AUTHORS</h1> The <b class="name">boot.cfg</b> extensions to <a class="link-man" href="../html8/boot.html">boot(8)</a> were written by <span class="author">Stephen Borrill</span> &#60;sborrill@NetBSD.org&#62;.</div>
<div class="section">
<h1 id="x42554753">BUGS</h1> Support for <b class="name">boot.cfg</b> is currently for <span class="unix">NetBSD</span>/i386 and <span class="unix">NetBSD</span>/amd64 only. It is hoped that its use will be extended to other appropriate ports that use the <a class="link-man" href="../html8/boot.html">boot(8)</a> interface.</div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
April 25, 2014</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
</html>

