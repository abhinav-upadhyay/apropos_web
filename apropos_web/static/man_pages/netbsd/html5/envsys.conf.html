<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="/static/man_pages/netbsd/style.css" type="text/css" media="all">
<title>
ENVSYS.CONF(5)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
ENVSYS.CONF(5)</td>
<td class="head-vol" align="center">
File Formats Manual</td>
<td class="head-rtitle" align="right">
ENVSYS.CONF(5)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">envsys.conf</b> &#8212; <span class="desc">configuration file for the <a class="link-man" href="../4/envsys">envsys(4)</a> framework</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1><table class="synopsis">
<col style="width: 11.00ex;">
<col>
<tbody>
<tr>
<td>
envstat</td>
<td>
&#91;<span class="opt"><b class="flag">&#45;S</b></span>&#93; &#91;<span class="opt"><b class="flag">&#45;c</b> <i class="arg">/etc/envsys.conf</i></span>&#93;</td>
</tr>
</tbody>
</table>
</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> The <b class="name">envsys.conf</b> file configures all the features provided by the <a class="link-man" href="../4/envsys">envsys(4)</a> framework. It consists of a series of device and sensor blocks. Each sensor block defines a group of <span class="emph">properties</span>. The file format is free-form: new line markers and indentation are ignored. Comments start with a &#8216;#&#8217; sign and extend until the end of line.<p>
A <span class="emph">property</span> is like a variable assignment. It has a name, which goes to the left of the equal sign, and a value, which goes to the right. The assignment ends with a semicolon. It looks like:<p>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit">name = value;</code></div>
</blockquote>
<p>
There is no difference between string or integer values when defining them. The value must be surrounded by double quotes if it contains whitespace.<p>
There can be multiple groups of devices and multiple groups of sensors in the configuration file.<p>
A device block consists of one or more sensor blocks and one or more global properties. It has the following syntax:<p>
<pre style="margin-left: 5.00ex;" class="lit display">
	device_name { 
		prop = value; 
		... 
        	sensor0 { 
			prop = value; 
        		... 
		} 
		... 
		sensorN { 
			prop = value; 
			... 
		} 
	} 
	...</pre>
<p>
Device names are those shown by the &#8216;<code class="lit">envstat -D</code>&#8217; command; sensor blocks are named by the index position in which they are shown.<p>
For example, if we have the following output from the <a class="link-man" href="../8/envstat">envstat(8)</a> command:<p>
<pre style="margin-left: 5.00ex;" class="lit display">
  CPU Temperature:     32.000 degC 
   MB Temperature:     37.000 degC 
    Vcore Voltage:      1.232 V 
     +3.3 Voltage:      3.248 V 
       +5 Voltage:      4.992 V 
      +12 Voltage:     11.985 V 
    CPU FAN Speed:       1250 RPM</pre>
<p>
&#8216;<code class="lit">sensor0</code>&#8217; corresponds to the <span class="emph">CPU Temperature</span> sensor and &#8216;<code class="lit">sensor6</code>&#8217; corresponds to the <span class="emph">CPU FAN Speed</span> sensor.<p>
There is another way that will give you the correct index sensor; the &#8216;<code class="lit">envstat -x</code>&#8217; command will print the raw XML property list. You only have to find the <span class="emph">index</span> object in the appropriate dictionary. The object will be shown as:<p>
<pre style="margin-left: 5.00ex;" class="lit display">
	&lt;key&gt;index&lt;/key&gt; 
	&lt;string&gt;sensor2&lt;/string&gt;</pre>
<p>
Invalid sensors and devices will be detected by the <a class="link-man" href="../8/envstat">envstat(8)</a> parser and will be reported as errors.<p>
The following properties are provided for sensor blocks (please note that not all properties apply to all type of sensors):<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
critical-capacity = 10;</dt>
<dd class="list-tag" style="margin-left: 5.00ex;">
<p>
Sets a critical capacity limit property of 10 percent in a battery sensor. Battery sensors are those that report a percentage from the <a class="link-man" href="../8/envstat">envstat(8)</a> output.<p>
It is possible to find out if the sensor accepts this property by running &#8216;<code class="lit">envstat -x</code>&#8217; and looking if the <span class="emph">want-percentage</span> object is defined as <span class="emph">true</span> on its dictionary. For example:<p>
<pre style="margin-left: 5.00ex;" class="lit display">
	&lt;key&gt;want-percentage&lt;/key&gt; 
	&lt;true/&gt;</pre>
<p>
Only a value between 0 and 100 is allowed. When the limit is reached in the sensor, a <span class="emph">critical-capacity</span> event will be sent to the <a class="link-man" href="../8/powerd">powerd(8)</a> daemon (if running) and will execute the block for this event in <i class="file">/etc/powerd/scripts/sensor_battery</i>.<p>
If this property is set, its value will be shown in the <a class="link-man" href="../8/envstat">envstat(8)</a> display output with a column named <i class="arg">CritMin</i>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
warning-capacity = 20;</dt>
<dd class="list-tag" style="margin-left: 5.00ex;">
<p>
Sets a warning capacity limit property of 20 percent in a battery sensor. Battery sensors are those that report a percentage from the <a class="link-man" href="../8/envstat">envstat(8)</a> output.<p>
It is possible to find out if the sensor accepts this property by running &#8216;<code class="lit">envstat -x</code>&#8217; and looking if the <span class="emph">want-percentage</span> object is defined as <span class="emph">true</span> on its dictionary. For example:<p>
<pre style="margin-left: 5.00ex;" class="lit display">
	&lt;key&gt;want-percentage&lt;/key&gt; 
	&lt;true/&gt;</pre>
<p>
Only a value between 0 and 100 is allowed. When the limit is reached in the sensor, a <span class="emph">warning-capacity</span> event will be sent to the <a class="link-man" href="../8/powerd">powerd(8)</a> daemon (if running) and will execute the block for this event in <i class="file">/etc/powerd/scripts/sensor_battery</i>.<p>
If this property is set, its value will be shown in the <a class="link-man" href="../8/envstat">envstat(8)</a> display output with a column named <i class="arg">WarnMin</i>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
high-capacity = 90;</dt>
<dd class="list-tag" style="margin-left: 5.00ex;">
<p>
Sets a high capacity limit property of 90 percent in a battery sensor. Battery sensors are those that report a percentage from the <a class="link-man" href="../8/envstat">envstat(8)</a> output.<p>
It is possible to find out if the sensor accepts this property by running &#8216;<code class="lit">envstat -x</code>&#8217; and looking if the <span class="emph">want-percentage</span> object is defined as <span class="emph">true</span> on its dictionary. For example:<p>
<pre style="margin-left: 5.00ex;" class="lit display">
	&lt;key&gt;want-percentage&lt;/key&gt; 
	&lt;true/&gt;</pre>
<p>
Only a value between 0 and 100 is allowed. When the limit is reached in the sensor, a <span class="emph">high-capacity</span> event will be sent to the <a class="link-man" href="../8/powerd">powerd(8)</a> daemon (if running) and will execute the block for this event in <i class="file">/etc/powerd/scripts/sensor_battery</i>.<p>
If this property is set, its value will be shown in the <a class="link-man" href="../8/envstat">envstat(8)</a> display output with a column named <i class="arg">WarnMax</i>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
maximum-capacity = 99;</dt>
<dd class="list-tag" style="margin-left: 5.00ex;">
<p>
Sets a warning capacity limit property of 99 percent in a battery sensor. Battery sensors are those that report a percentage from the <a class="link-man" href="../8/envstat">envstat(8)</a> output.<p>
It is possible to find out if the sensor accepts this property by running &#8216;<code class="lit">envstat -x</code>&#8217; and looking if the <span class="emph">want-percentage</span> object is defined as <span class="emph">true</span> on its dictionary. For example:<p>
<pre style="margin-left: 5.00ex;" class="lit display">
	&lt;key&gt;want-percentage&lt;/key&gt; 
	&lt;true/&gt;</pre>
<p>
Only a value between 0 and 100 is allowed. When the limit is reached in the sensor, a <span class="emph">warning-capacity</span> event will be sent to the <a class="link-man" href="../8/powerd">powerd(8)</a> daemon (if running) and will execute the block for this event in <i class="file">/etc/powerd/scripts/sensor_battery</i>.<p>
If this property is set, its value will be shown in the <a class="link-man" href="../8/envstat">envstat(8)</a> display output with a column named <i class="arg">WarnMin</i>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
critical-max = 70C;</dt>
<dd class="list-tag" style="margin-left: 5.00ex;">
<p>
Sets a critical maximum limit property in a sensor. Note that in this example, we are specifying the &#8216;<code class="lit">C</code>&#8217; keyword at the end; that means that this will only be valid for <span class="emph">temperature</span> sensors and that the value is specified as degrees <span class="emph">Celsius</span>. If degrees Fahrenheit are wanted, just use the letter <span class="emph">F</span>, as in:<p>
<pre style="margin-left: 5.00ex;" class="lit display">
critical-max = 140F;</pre>
<p>
To know sensor type, you have to look at the <span class="emph">type</span> object in the XML property list. Remember: the XML property list has all the information that the application uses to print the values!<p>
Other sensors that are not of <span class="emph">temperature</span> type must not include the final character for the unit. A dot is allowed in the value, if it corresponds to the range that the sensor is reporting. When the limit has been reached in the sensor, a <span class="emph">critical-over</span> event will be sent to the <a class="link-man" href="../8/powerd">powerd(8)</a> daemon (if running) and will execute the block for this event in the appropriate <i class="file">/etc/powerd/scripts/sensor_foo</i> script (depending on the sensor's type).<p>
Please note that this property cannot be set in battery capacity sensors (those that have the <span class="emph">want-percentage</span> object in their dictionary). This rule applies for the &#8216;<code class="lit">critical-min</code>&#8217;, &#8216;<code class="lit">warning-max</code>&#8217;, and &#8216;<code class="lit">warning-min</code>&#8217; properties too.<p>
If this property is set, its value will be shown in the <a class="link-man" href="../8/envstat">envstat(8)</a> display output with a column named <i class="arg">CritMax</i>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
critical-min = 1.230;</dt>
<dd class="list-tag" style="margin-left: 5.00ex;">
<p>
Sets a critical minimum limit property in a sensor. The rules for <span class="emph">critical-max</span>, <span class="emph">critical-min</span>, <span class="emph">warning-max</span>, and <span class="emph">warning-min</span> are the same. When the limit has been reached in the sensor, a <span class="emph">critical-under</span> event will be sent to the <a class="link-man" href="../8/powerd">powerd(8)</a> daemon (if running) and will execute the block for this event in the appropriate <i class="file">/etc/powerd/scripts/sensor_foo</i> script (depending on the sensor's type).<p>
If this property is set, its value will be shown in the <a class="link-man" href="../8/envstat">envstat(8)</a> display output with a column named <i class="arg">CritMin</i>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
warning-max = 70C;</dt>
<dd class="list-tag" style="margin-left: 5.00ex;">
<p>
Sets a warning maximum limit property in a sensor. The rules for <span class="emph">critical-max</span>, <span class="emph">critical-min</span>, <span class="emph">warning-max</span>, and <span class="emph">warning-min</span> are the same. When the limit has been reached in the sensor, a <span class="emph">warning-over</span> event will be sent to the <a class="link-man" href="../8/powerd">powerd(8)</a> daemon (if running) and will execute the block for this event in the appropriate <i class="file">/etc/powerd/scripts/sensor_foo</i> script (depending on the sensor's type).<p>
Please note that this property cannot be set in battery capacity sensors (those that have the <span class="emph">want-percentage</span> object in their dictionary). This rule applies for the &#8216;<code class="lit">warning-min</code>&#8217; property too.<p>
If this property is set, its value will be shown in the <a class="link-man" href="../8/envstat">envstat(8)</a> display output with a column named <i class="arg">WarnMax</i>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
warning-min = 1.230;</dt>
<dd class="list-tag" style="margin-left: 5.00ex;">
<p>
Sets a critical minimum limit property in a sensor. The rules for <span class="emph">critical-max</span>, <span class="emph">critical-min</span>, <span class="emph">warning-max</span>, and <span class="emph">warning-min</span> are the same. When the limit has been reached in the sensor, a <span class="emph">warning-under</span> event will be sent to the <a class="link-man" href="../8/powerd">powerd(8)</a> daemon (if running) and will execute the block for this event in the appropriate <i class="file">/etc/powerd/scripts/sensor_foo</i> script (depending on the sensor's type).<p>
If this property is set, its value will be shown in the <a class="link-man" href="../8/envstat">envstat(8)</a> display output with a column named <i class="arg">WarnMin</i>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
description = string</dt>
<dd class="list-tag" style="margin-left: 5.00ex;">
<p>
Sets a new description in a sensor. You can set this property in all sensors, except that you won't be able to set a description that is currently used for the specified device.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
rfact = 56000</dt>
<dd class="list-tag" style="margin-left: 5.00ex;">
<p>
Sets a new resistor factor property in a sensor. This property is only allowed in <span class="emph">Voltage</span> sensors and <span class="emph">only</span> if the device has enabled the appropriate flag for the mentioned sensor. The resistor factor may be used to change the behavior of the value returned by the device.<p>
If a sensor supports this, the <span class="emph">allow-rfact</span> object appears enabled (true) in the dictionary.</dd>
</dl>
<p>
The following properties are available for device blocks:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
refresh-timeout = 10s</dt>
<dd class="list-tag" style="margin-left: 5.00ex;">
<p>
This property sets the refresh timeout value in a device, and will be used to refresh data and check for critical conditions any time the timeout is met. The value may be specified in seconds, minutes or hours. To specify the value in seconds, the <span class="emph">s</span> character must be appended last, if minutes is desired, a <span class="emph">m</span> and a <span class="emph">h</span> for hours. For example <span class="emph">10s</span> for 10 seconds or <span class="emph">1h</span> for one hour.</dd>
</dl>
</div>
<div class="section">
<h1 id="x46494c4553">FILES</h1><dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/etc/envsys.conf</i></dt>
<dd class="list-tag" style="margin-left: 16.00ex;">
Default configuration file.</dd>
</dl>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../3/proplib">proplib(3)</a>, <a class="link-man" href="../4/envsys">envsys(4)</a>, <a class="link-man" href="../8/envstat">envstat(8)</a>, <a class="link-man" href="../8/powerd">powerd(8)</a></div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> The <b class="name">envsys.conf</b> configuration file first appeared in <span class="unix">NetBSD&#160;5.0</span>.</div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
February 15, 2010</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
</html>

