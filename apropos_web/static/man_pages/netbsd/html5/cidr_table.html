<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/../4/strict.dtd">
>
<head>
<meta http-equiv="Content-Type" content="te../; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="../style.css" type="text/css" media="all">
<title>
CIDR_TABLE(5)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
CIDR_TABLE(5)</td>
<td class="head-vol" align="center">
File Formats Manual</td>
<td class="head-rtitle" align="right">
CIDR_TABLE(5)</td>
</tr>
</tbody>
</table>
<br>
<div class="section">
<h1>NAME</h1> cidr_table &#45; format of Postfix CIDR tables</div>
<div class="section">
<h1>SYNOPSIS</h1><br>
<b>postmap -q "</b><i>string</i><b>" cidr:/etc/postfix/</b><i>filename</i><p>
<br>
<b>postmap -q - cidr:/etc/postfix/</b><i>filename</i><b> &lt;</b><i>inputfile</i></div>
<div class="section">
<h1>DESCRIPTION</h1><br>
The Postfix mail system uses optional lookup tables. These tables are usually in  <b>dbm</b> or <b>db</b> format. Alternatively, lookup tables can be specified in CIDR (Classless Inter-Domain Routing) form. In this case, each input is compared against a list of patterns. When a match is found, the corresponding result is returned and the search is terminated.<div style="height: 1.00em;">
&#160;</div>
To find out what types of lookup tables your Postfix system supports use the " <b>postconf -m</b>" command.<div style="height: 1.00em;">
&#160;</div>
To test lookup tables, use the "<b>postmap -q</b>" command as described in the SYNOPSIS above.</div>
<div class="section">
<h1>TABLE FORMAT</h1><br>
The general form of a Postfix CIDR table is:<dl>
<dt>
<i>network_address</i><b>/</b><i>network_mask     result</i></dt>
<dd>
When a search string matches the specified network block, use the corresponding  <i>result</i> value. Specify 0.0.0.0/0 to match every IPv4 address, and ::/0 to match every IPv6 address.<div style="height: 1.00em;">
&#160;</div>
An IPv4 network address is a sequence of four decimal octets separated by ".", and an IPv6 network address is a sequence of three to eight hexadecimal octet pairs separated by ":".<div style="height: 1.00em;">
&#160;</div>
The <i>network_mask</i> is the number of high-order bits in the  <i>network_address</i> that the search string must match.<div style="height: 1.00em;">
&#160;</div>
Before comparisons are made, lookup keys and table entries are converted from string to binary. Therefore table entries will be matched regardless of redundant zero characters.<div style="height: 1.00em;">
&#160;</div>
Note: address information may be enclosed inside "[]" but this form is not required.<div style="height: 1.00em;">
&#160;</div>
IPv6 support is available in Postfix 2.2 and later.</dd>
</dl>
<dl>
<dt>
<i>network_address     result</i></dt>
<dd>
When a search string matches the specified network address, use the corresponding  <i>result</i> value.</dd>
</dl>
<dl>
<dt>
blank lines and comments</dt>
<dd>
Empty lines and whitespace-only lines are ignored, as are lines whose first non-whitespace character is a `#'.</dd>
</dl>
<dl>
<dt>
multi-line text</dt>
<dd>
A logical line starts with non-whitespace text. A line that starts with whitespace continues a logical line.</dd>
</dl>
</div>
<div class="section">
<h1>TABLE SEARCH ORDER</h1><br>
Patterns are applied in the order as specified in the table, until a pattern is found that matches the search string.</div>
<div class="section">
<h1>EXAMPLE SMTPD ACCESS MAP</h1><br>
/etc/postfix/main.cf:<br>
    smtpd_client_restrictions = ... cidr:/etc/postfix/client.cidr ...<p>
<br>
/etc/postfix/client.cidr:<br>
    # Rule order matters. Put more specific whitelist entries<br>
    # before more general blacklist entries.<br>
    192.168.1.1             OK<br>
    192.168.0.0/16          REJECT<br>
</div>
<div class="section">
<h1>SEE ALSO</h1><br>
postmap(1), Postfix lookup table manager<br>
regexp_table(5), format of regular expression tables<br>
pcre_table(5), format of PCRE tables</div>
<div class="section">
<h1>README FILES</h1><br>
Use "<b>postconf readme_directory</b>" or " <b>postconf_directory</b>" to locate this information.<br>
DATABASE_README, Postfix lookup table overview</div>
<div class="section">
<h1>HISTORY</h1><br>
CIDR table support was introduced with Postfix version 2.1.</div>
<div class="section">
<h1>AUTHOR(S)</h1><br>
The CIDR table lookup code was originally written by:<br>
Jozsef Kadlecsik<br>
KFKI Research Institute for Particle and Nuclear Physics<br>
POB. 49<br>
1525 Budapest, Hungary<p>
<br>
Adopted and adapted by:<br>
Wietse Venema<br>
IBM T.J. Watson Research<br>
P.O. Box 704<br>
Yorktown Heights, NY 10598, USA</div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tr>
<td class="foot-date">
</td>
<td class="foot-os" align="right">
</td>
</tr>
</table>
</div>
</body>
<>

