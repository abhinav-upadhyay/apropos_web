<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/../4/strict.dtd">
>
<head>
<meta http-equiv="Content-Type" content="te../; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="../style.css" type="text/css" media="all">
<title>
SUNLABEL(8)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
SUNLABEL(8)</td>
<td class="head-vol" align="center">
System Manager's Manual</td>
<td class="head-rtitle" align="right">
SUNLABEL(8)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">sunlabel</b> &#8212; <span class="desc">read or modify a SunOS disk label</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1><table class="synopsis">
<col style="width: 8.00ex;">
<col>
<tbody>
<tr>
<td>
sunlabel</td>
<td>
&#91;<span class="opt"><b class="flag">&#45;mnqs</b></span>&#93; <i class="arg">device</i></td>
</tr>
</tbody>
</table>
</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> <b class="name">sunlabel</b> reads or modifies a SunOS disk label on <i class="arg">device</i>, which is used by the PROM on <span class="unix">NetBSD</span>/sparc hardware to find partitions to boot from. <b class="name">sunlabel</b> only reads/writes the first 512 bytes of <i class="arg">device</i>.<p>
The supported options are:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 5.00ex;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;m</b></dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
Ignore an incorrect magic number in the disk label.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;n</b></dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
Synthesize a new label rather than reading what is there.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;q</b></dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
Quiet mode - don't print unnecessary babble (currently this suppresses the &#8220;sunlabel&gt;&#8221; prompt).</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;s</b></dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
Ignore checksum errors when reading the label.</dd>
</dl>
<p>
Note that <b class="flag">&#45;m</b> is dangerous, especially when combined with <b class="flag">&#45;s</b>, since it will then happily believe whatever garbage it may find in the label.  When using these flags, all values should be checked carefully, both those printed by <b class="cmd">L</b> and the partition table printed by <b class="cmd">P</b>.<p>
<b class="name">sunlabel</b> prints a prompt &#8220;sunlabel&gt;&#8221; and expects commands. The following commands are understood:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 5.00ex;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
?</dt>
<dd class="list-tag" style="margin-left: 16.00ex;">
Show a short help message.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">[abcdefghijklmnop]</b> <i class="arg">&lt;cylno&gt;</i> <i class="arg">&lt;size&gt;</i></dt>
<dd class="list-tag" style="margin-left: 16.00ex;">
Change partition (see below).</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">L</b></dt>
<dd class="list-tag" style="margin-left: 16.00ex;">
Print label, except for the partition table.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">P</b></dt>
<dd class="list-tag" style="margin-left: 16.00ex;">
Print the partition table.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">Q</b></dt>
<dd class="list-tag" style="margin-left: 16.00ex;">
Quit program (error if no write since last change).</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">Q!</b></dt>
<dd class="list-tag" style="margin-left: 16.00ex;">
Quit program (unconditionally) [EOF also quits].</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">S</b></dt>
<dd class="list-tag" style="margin-left: 16.00ex;">
Set label in the kernel (orthogonal to <b class="cmd">W</b>).</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">V</b> <i class="arg">&lt;name&gt;</i> <i class="arg">&lt;value&gt;</i></dt>
<dd class="list-tag" style="margin-left: 16.00ex;">
Change a non-partition label value.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">W</b></dt>
<dd class="list-tag" style="margin-left: 16.00ex;">
Write (possibly modified) label out.</dd>
</dl>
<p>
The <b class="cmd">a</b> through <b class="cmd">p</b> commands will accept, for the <i class="arg">&lt;size&gt;</i> parameter, the <i class="arg">nnn/nnn/nnn</i> syntax used by SunOS 4.x <b class="cmd">format</b>. (For those not familiar with this syntax, <i class="arg">a/b/c</i> means <i class="arg">a</i> cylinders + <i class="arg">b</i> tracks + <i class="arg">c</i> sectors.  For example, if the disk has 16 tracks of 32 sectors, <i class="arg">3/4/5</i> means (3*16*32)+(4*32)+5=1669.  This calculation always uses the <i class="arg">nsect</i> and <i class="arg">ntrack</i> values as printed by the <b class="cmd">L</b> command; in particular, if they are zero (which they will initially be if <b class="flag">&#45;n</b> is used), this syntax is not very useful.  Some additional strings are accepted.  For the <i class="arg">&lt;cylno&gt;</i> parameter, &#8220;end-X&#8221; (where <i class="arg">X</i> is a partition letter) indicates that the partition should start with the first free cylinder after partition <i class="arg">X</i>; &#8220;start-X&#8221; indicates that the partition should start at the same place as partition <i class="arg">X</i>. For the <i class="arg">&lt;size&gt;</i> parameter, &#8220;end-X&#8221; indicates that the partition should end at the same place as partition <i class="arg">X</i> (even if partition <i class="arg">X</i> ends partway through a cylinder); &#8220;start-X&#8221; indicates that the partition should end with the last cylinder before partition <i class="arg">X</i>; and &#8220;size-X&#8221; means that the partition's size should exactly match partition <i class="arg">X</i>'s size.<p>
Note that <b class="name">sunlabel</b> supports 16 partitions. SunOS supports only 8. Labels written by <b class="name">sunlabel</b>, when partitions <i class="arg">i</i> through <i class="arg">p</i> are all set <i class="arg">offset=0 size=0</i>, are identical to Sun labels.  If any of the &#8220;extended&#8221; partitions are nontrivial, information about them is tucked into some otherwise unused space in the Sun label format.<p>
The <b class="cmd">V</b> command changes fields printed by the <b class="cmd">L</b> command. For example, if the <b class="cmd">L</b> command prints<p>
<pre style="margin-left: 5.00ex;" class="lit display">
ascii: ST15230N cyl 5657 alt 2 hd 19 sec 78 
rpm: 0          pcyl: 0         apc: 0          obs1: 0 
obs2: 0         intrlv: 1       ncyl: 5657      acyl: 0 
nhead: 19       nsect: 78       obs3: 0         obs4: 0</pre>
<p>
then <b class="cmd">V</b> <i class="arg">ncyl 6204</i> would set the <i class="arg">ncyl</i> value to 6204, or <b class="cmd">V</b> <i class="arg">ascii Seagate ST15230N cyl 5657 hd 19 sec varying</i> would set the ascii-label string to that string. <b class="name">sunlabel</b> performs very few consistency checks on the values you supply, and the ones it does perform never generate errors, only warnings.</div>
<div class="section">
<h1 id="x415554484f5253">AUTHORS</h1> <span class="author">der Mouse</span> &#60;<a class="link-mail" href="mailto:mouse@rodents.montreal.qc.ca">mouse@rodents.montreal.qc.ca</a>&#62;</div>
<div class="section">
<h1 id="x42554753">BUGS</h1> It may be that the space in the label where the information for the extended partitions is saved is used by SunOS.<p>
Not very many consistency checks are done on the <b class="cmd">V</b> arguments, and those only produce warnings.<p>
<span class="unix">NetBSD</span> doesn't support 16 partitions in a Sun disk label yet.</div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
December 21, 2002</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
<>

