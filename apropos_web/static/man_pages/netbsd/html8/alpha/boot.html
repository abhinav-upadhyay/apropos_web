<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="/static/man_pages/netbsd/style.css" type="text/css" media="all">
<title>
BOOT(8) (Alpha)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
BOOT(8)</td>
<td class="head-vol" align="center">
System Manager's Manual (Alpha)</td>
<td class="head-rtitle" align="right">
BOOT(8)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">boot</b> &#8212; <span class="desc">Alpha system bootstrapping procedures</span></div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> DEC Alpha systems can have either of two different firmware systems: ARC (a.k.a. AlphaBIOS), and SRM. Some Alpha systems have both in their flash RAM and can switch between them on command. ARC is used to bootstrap Microsoft Windows NT for Alpha. SRM is used to bootstrap OpenVMS and Ultrix. <span class="unix">NetBSD</span> requires SRM.<p>
SRM can bootstrap from supported local storage devices, e.g., IDE disks or CD-ROM drives, SCSI disks or CD-ROM drives, and floppy drives. SRM can also network bootstrap via supported Ethernet interfaces, using BOOTP or MOP. The particular capabilities of SRM will vary from system to system.<p>
When SRM boots the system, it performs a Power On Self Test (POST), probes the system busses to identify devices, and initializes them. SRM includes an x86 instruction emulator in order to run the BIOS initialization routines found in the PROM of any video cards found. In this way, most generic PCI video cards can work in Alpha systems that have PCI bus slots.<p>
SRM then examines the state of one of several variables: <span class="env">auto_action</span>. If the value of <span class="env">auto_action</span> is &#8220;halt&#8221; then SRM will stop, print its prompt: &#8220;&gt;&gt;&gt;&#8221; and wait for commands to be entered on the console. If the value of <span class="env">auto_action</span> is &#8220;boot&#8221; then SRM will automatically bootstrap the operating system specified by various non-volatile environment variables.<p>
SRM device names are not the same as in <span class="unix">NetBSD</span>, e.g., <span class="symb">ewa0</span> is a DEC &#8220;tulip&#8221; Ethernet interface, <span class="symb">dka0</span> is a SCSI disk on a recognized controller, <span class="symb">dqa0</span> is an IDE disk on a recognized controller. The <b class="cmd">show device</b> command will list all the devices that SRM can bootstrap from.<div class="subsection">
<h2 id="x53524d20436f6d6d616e6473">SRM Commands</h2> SRM is somewhat <span class="unix">UNIX</span>-like in that it incorporates a simple pipe and I/O redirection, which allows command sequences like:<p>
<pre style="margin-left: 5.00ex;" class="lit display">
show config | more 
show * | more</pre>
<p>
An essential but incomplete list of SRM commands follows:<p>
<b class="cmd">boot</b> &#91;<span class="opt"><b class="flag">&#45;file</b> <i class="arg">filename</i></span>&#93; &#91;<span class="opt"><b class="flag">&#45;flags</b> <i class="arg">value</i></span>&#93; &#91;<span class="opt"><i class="arg">device</i></span>&#93;<p>
Boot an operating system. The default arguments for this command are taken from the SRM environment variables:<p>
<dl style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 5.00ex;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
<span class="env">boot_file</span></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
file name to bootstrap.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<span class="env">boot_osflags</span></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
flags to pass to the secondary bootstrap program.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<span class="env">bootdef_dev</span></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
default bootstrap device.</dd>
</dl>
<p>
<b class="cmd">help</b> &#91;<span class="opt"><i class="arg">command</i></span>&#93;<p>
Invoke the SRM help system.<p>
<b class="cmd">init</b><p>
Reset the SRM console, and take actions as specified by SRM variables.<p>
<b class="cmd">set</b> <i class="arg">variable</i> <i class="arg">value</i> &#91;<span class="opt"><b class="flag">&#45;default</b></span>&#93;<p>
Set an SRM variable, e.g.,<p>
<pre style="margin-left: 5.00ex;" class="lit display">
set auto_action boot 
set bootdef_dev dka0 
set ewa0_mode auto</pre>
<p>
If the <b class="flag">&#45;default</b> flag is used, the variable will be set to its default value.<p>
<b class="cmd">show</b> <i class="arg">variable or subsystem</i><p>
Show SRM variables and values, or show system state or configuration. If a wildcard is used, then all matching SRM variables are shown, e.g.,<p>
<dl style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 5.00ex;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="cmd">show *</b></dt>
<dd class="list-tag" style="margin-left: 11.00ex;">
will display all SRM variables.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="cmd">show b*</b></dt>
<dd class="list-tag" style="margin-left: 11.00ex;">
will display all variables whose names begin with <span class="emph">b</span>.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="cmd">show config</b></dt>
<dd class="list-tag" style="margin-left: 11.00ex;">
will display the complete system configuration.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="cmd">show device</b></dt>
<dd class="list-tag" style="margin-left: 11.00ex;">
will display all bootable devices.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="cmd">show memory</b></dt>
<dd class="list-tag" style="margin-left: 11.00ex;">
will display the system's memory configuration.</dd>
</dl>
</div>
<div class="subsection">
<h2 id="x53524d205661726961626c6573">SRM Variables</h2><dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">auto_action</span></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
What SRM will do at system startup or reset:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="arg">boot</i></dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
automatically bootstrap the operating system.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="arg">halt</i></dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
after POST, prompt the user on the console for commands to execute.</dd>
</dl>
<p>
Some Alpha systems (e.g., AlphaServer 800) have a &#8220;halt&#8221; switch, which if set, will override the action of this variable, and cause SRM to stop after POST and prompt the user for commands to execute.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">bootdef_dev</span></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
The default bootstrap device, e.g., <span class="symb">dka0</span>, <span class="symb">dqa0</span>, <span class="symb">ewa0</span>. The <b class="cmd">show device</b> command will list the available and recognized bootable devices.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">boot_file</span></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
The file to bootstrap from; this is a null string by default.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">boot_osflags</span></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
The flag passed to the secondary bootstrap program, and the <span class="unix">NetBSD</span> kernel:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">a</span></dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
(automatic) multi-user mode bootstrap.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">c</span></dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
crash dump immediately after <a class="link-man" href="../../4/autoconf">autoconf(4)</a>, if the <span class="unix">NetBSD</span> kernel is compiled with <span class="define">DEBUG</span>; See <a class="link-man" href="../../4/options">options(4)</a>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">d</span></dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
break into the debugger ASAP, if the <span class="unix">NetBSD</span> kernel is compiled with <span class="define">DDB</span> or <span class="define">KGDB</span>; See <a class="link-man" href="../../4/options">options(4)</a>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">h</span></dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
on a reboot request from the <span class="unix">NetBSD</span> kernel, halt the system instead of rebooting.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">i</span></dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
the <span class="unix">NetBSD</span> secondary bootstrap program will stop and prompt for the <span class="unix">NetBSD</span> kernel file name to bootstrap.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">n</span></dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
the <span class="unix">NetBSD</span> kernel will ask for the root file system's device, the kernel core dump device, and the path to <a class="link-man" href="../../8/init">init(8)</a>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">q</span></dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
bootstrap quietly.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">s</span></dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
single-user mode bootstrap.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">v</span></dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
bootstrap verbosely.</dd>
</dl>
<p>
These may be used in combinations that are not mutually exclusive. These options are case-insensitive to be compatible with DEC operating systems.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">console</span></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
What type of console device SRM and <span class="unix">NetBSD</span> will use:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="arg">graphics</i></dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
use a video card for output, and a PC keyboard for input.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="arg">serial</i></dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
use the first serial port for console.</dd>
</dl>
<p>
Just as with Sun systems, Alpha systems will use the first serial port as a console if there is no keyboard plugged into the keyboard port, even if <span class="env">console</span> is set to &#8220;graphics&#8221;.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">ew*0_mode</span></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
The media and speed for DEC &#8220;tulip&#8221; Ethernet interfaces (e.g., DECchip 21040, 21140, 21143); possible values are: <b class="cmd">auto</b> (IEEE 802.3u &#8220;Nway&#8221; negotiation), <b class="cmd">BNC</b>, <b class="cmd">AUI</b>, <b class="cmd">Twisted-Pair</b>, <b class="cmd">FastFD</b> (Fast Full Duplex).</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">ew*0_protocols</span></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
The protocol to use when netbooting, i.e., MOP (Maintenance Operations Protocol), or BOOTP (Bootstrap Protocol).<p>
The Alpha SRM firmware is picky about BOOTP responses; the <a class="link-man" href="../../5/dhcpd.conf">dhcpd.conf(5)</a> on the server needs the<p>
<pre style="margin-left: 5.00ex;" class="lit display">
always-reply-rfc1048 on;</pre>
<p>
directive in the section for netbooting Alpha systems.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">os_type</span></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
This determines which system firmware will be used after the next power-cycle, if both ARC and SRM are present in Flash RAM. This should be set to any of &#8220;<span class="unix">UNIX</span>&#8221;, &#8220;osf&#8221;, or &#8220;vms&#8221; to select the SRM console required for <span class="unix">NetBSD</span>. OSF refers to the Open Software Foundation.</dd>
</dl>
</div>
<div class="subsection">
<h2 id="x416674657220626f6f747374726170">After bootstrap</h2> Once the <span class="unix">NetBSD</span>/alpha kernel is booted normally it initializes itself and proceeds to start the system. An automatic consistency check of the file systems takes place, and unless this fails, the system comes up to multi-user operation.<p>
The proper way to shut the system down is with the <a class="link-man" href="../../8/shutdown">shutdown(8)</a> command.<p>
If the system crashes, it will enter the kernel debugger, <a class="link-man" href="../../4/ddb">ddb(4)</a>, if it is configured in the kernel. If the crash occurred during initialization and the debugger is not present or is exited, the kernel will halt the system.<p>
If the crash occurred during normal operation and the debugger is not present or is exited, the system will attempt a dump to the configured dump device (which will be automatically recovered with <a class="link-man" href="../../8/savecore">savecore(8)</a> during the next bootstrap cycle), and after the dump is complete (successful or not) the kernel will attempt a reboot.</div>
</div>
<div class="section">
<h1 id="x46494c4553">FILES</h1><dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/boot</i></dt>
<dd class="list-tag" style="margin-left: 23.00ex;">
<span class="unix">NetBSD</span> secondary bootstrap program (installed)</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/netbsd</i></dt>
<dd class="list-tag" style="margin-left: 23.00ex;">
default <span class="unix">NetBSD</span> system kernel</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/usr/mdec/bootxx_cd9660</i></dt>
<dd class="list-tag" style="margin-left: 23.00ex;">
primary bootstrap for &#8220;cd9660&#8221; (ISO 9660) file system</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/usr/mdec/bootxx_ffs</i></dt>
<dd class="list-tag" style="margin-left: 23.00ex;">
primary bootstrap for &#8220;ffs&#8221; file system (Berkeley Fast File System)</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/usr/mdec/boot</i></dt>
<dd class="list-tag" style="margin-left: 23.00ex;">
secondary bootstrap</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/usr/mdec/netboot</i></dt>
<dd class="list-tag" style="margin-left: 23.00ex;">
network bootstrap</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/usr/mdec/ustarboot</i></dt>
<dd class="list-tag" style="margin-left: 23.00ex;">
&#8220;ustar&#8221; disk and tape bootstrap</dd>
</dl>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../../4/ddb">ddb(4)</a>, <a class="link-man" href="../../8/diskless">diskless(8)</a>, <a class="link-man" href="../../8/init">init(8)</a>, <a class="link-man" href="../../8/installboot">installboot(8)</a>, <a class="link-man" href="../../8/mkbootimage">mkbootimage(8)</a>, <a class="link-man" href="../../8/rc">rc(8)</a>, <a class="link-man" href="../../8/reboot">reboot(8)</a>, <a class="link-man" href="../../8/savecore">savecore(8)</a>, <a class="link-man" href="../../8/setnetbootinfo">setnetbootinfo(8)</a>, <a class="link-man" href="../../8/shutdown">shutdown(8)</a><p>
<span class="ref"><span class="ref-title">Alpha Architecture Reference Manual Third Edition</span>, <i class="ref-issue">Digital Press</i>, <span class="ref-corp">Alpha Architecture Committee</span>, <span class="ref-date">1998</span>.</span></div>
<div class="section">
<h1 id="x42554753">BUGS</h1> The device names used by <span class="unix">NetBSD</span>/alpha and the SRM Console often have no relation to each other.</div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
May 29, 2003</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
</html>

