<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="../style.css" type="text/css" media="all">
<title>
QUOTACHECK(8)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
QUOTACHECK(8)</td>
<td class="head-vol" align="center">
System Manager's Manual</td>
<td class="head-rtitle" align="right">
QUOTACHECK(8)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">quotacheck</b> &#8212; <span class="desc">filesystem quota consistency checker</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1><table class="synopsis">
<col style="width: 10.00ex;">
<col>
<tbody>
<tr>
<td>
quotacheck</td>
<td>
&#91;<span class="opt"><b class="flag">&#45;gquv</b></span>&#93; <i class="arg">filesystem</i> <i class="arg">...</i></td>
</tr>
</tbody>
</table>
<br>
<table class="synopsis">
<col style="width: 10.00ex;">
<col>
<tbody>
<tr>
<td>
quotacheck</td>
<td>
&#91;<span class="opt"><b class="flag">&#45;gquv</b></span>&#93; &#91;<span class="opt"><b class="flag">&#45;l</b> <i class="arg">maxparallel</i></span>&#93; <b class="flag">&#45;a</b></td>
</tr>
</tbody>
</table>
</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> <b class="name">quotacheck</b> examines each filesystem, builds a table of current disk usage, and compares this table against that recorded in the disk quota file for the filesystem. If any inconsistencies are detected, both the quota file and the current system copy of the incorrect quotas are updated (the latter only occurs if an active filesystem is checked). By default both user and group quotas are checked.<p>
Available options:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;a</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
If the <b class="flag">&#45;a</b> flag is supplied in place of any filesystem names, <b class="name">quotacheck</b> will check all the filesystems indicated in <i class="file">/etc/fstab</i> to be read-write with disk quotas. By default only the types of quotas listed in <i class="file">/etc/fstab</i> are checked. See also <b class="flag">&#45;l</b>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;g</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Only group quotas listed in <i class="file">/etc/fstab</i> are to be checked. See also <b class="flag">&#45;u</b>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;l</b> <i class="arg">maxparallel</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Limit the number of parallel checks to the number specified in the following argument. By default, the limit is the number of disks, running one process per disk. If a smaller limit is given, the disks are checked round-robin, one file system at a time. This option is only valid with <b class="flag">&#45;a</b>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;q</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
<b class="name">quotacheck</b> runs more quickly, particularly on systems with sparse user id usage, but fails to correct quotas for users [groups] not in the system user [group] database, and owning no files on the filesystem, if the quota file incorrectly believes that they do.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;u</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Only user quotas listed in <i class="file">/etc/fstab</i> are to be checked. See also <b class="flag">&#45;g</b>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;v</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
<b class="name">quotacheck</b> is more verbose, and reports corrected discrepancies between the calculated and recorded disk quotas.</dd>
</dl>
<p>
Specifying both <b class="flag">&#45;g</b> and <b class="flag">&#45;u</b> is equivalent to the default. Parallel passes are run on the filesystems required, using the pass numbers in <i class="file">/etc/fstab</i> in an identical fashion to <a class="link-man" href="../8/fsck">fsck(8)</a>.<p>
Normally <b class="name">quotacheck</b> operates silently.<p>
<b class="name">quotacheck</b> expects each filesystem to be checked to have a quota files named <i class="file">quota.user</i> and <i class="file">quota.group</i> which are located at the root of the associated file system. These defaults may be overridden in <i class="file">/etc/fstab</i>. If a file is not present, <b class="name">quotacheck</b> will create it.<p>
<b class="name">quotacheck</b> is normally run at boot time from the <i class="file">/etc/rc</i> file, see <a class="link-man" href="../8/rc">rc(8)</a>, before enabling disk quotas with <a class="link-man" href="../8/quotaon">quotaon(8)</a>.<p>
<b class="name">quotacheck</b> accesses the raw device in calculating the actual disk usage for each user. Thus, the filesystems checked should be quiescent while <b class="name">quotacheck</b> is running.<p>
If <b class="name">quotacheck</b> receives a <span class="define">SIGINFO</span> signal (see the <span class="symb">status</span> argument for <a class="link-man" href="../1/stty">stty(1)</a>), a line will be written to the standard error output indicating the name of the device currently being checked and progress information.</div>
<div class="section">
<h1 id="x46494c4553">FILES</h1><dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">quota.user</i></dt>
<dd class="list-tag" style="margin-left: 11.00ex;">
at the filesystem root with user quotas</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">quota.group</i></dt>
<dd class="list-tag" style="margin-left: 11.00ex;">
at the filesystem root with group quotas</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/etc/fstab</i></dt>
<dd class="list-tag" style="margin-left: 11.00ex;">
default filesystems</dd>
</dl>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../1/quota">quota(1)</a>, <a class="link-man" href="../3/libquota">libquota(3)</a>, <a class="link-man" href="../5/fstab">fstab(5)</a>, <a class="link-man" href="../8/edquota">edquota(8)</a>, <a class="link-man" href="../8/fsck">fsck(8)</a>, <a class="link-man" href="../8/quotaon">quotaon(8)</a>, <a class="link-man" href="../8/repquota">repquota(8)</a></div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> The <b class="name">quotacheck</b> command appeared in <span class="unix">4.2BSD</span>.</div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
January 5, 2004</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
</html>

