<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="/static/man_pages/netbsd/style.css" type="text/css" media="all">
<title>
ATACTL(8)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
ATACTL(8)</td>
<td class="head-vol" align="center">
System Manager's Manual</td>
<td class="head-rtitle" align="right">
ATACTL(8)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">atactl</b> &#8212; <span class="desc">a program to manipulate ATA (IDE) devices and busses</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1><table class="synopsis">
<col style="width: 6.00ex;">
<col>
<tbody>
<tr>
<td>
atactl</td>
<td>
<i class="arg">device</i> <i class="arg">command</i> &#91;<span class="opt"><i class="arg">arg</i> &#91;<span class="opt">...</span>&#93;</span>&#93;</td>
</tr>
</tbody>
</table>
</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> <b class="name">atactl</b> allows a user or system administrator to issue commands to and otherwise control devices which reside on standard IDE and ATA controllers, or the ATA bus itself. It is used by specifying a device or bus to manipulate, the command to perform, and any arguments the command may require.</div>
<div class="section">
<h1 id="x44455649434520434f4d4d414e4453">DEVICE COMMANDS</h1> The following commands may be used on IDE and ATA devices. Note that not all devices support all commands.<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">identify</b></dt>
<dd class="list-tag" style="margin-left: 9.00ex;">
Identify the specified device, displaying the device's vendor, product, revision strings, and the device's capabilities.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">idle</b></dt>
<dd class="list-tag" style="margin-left: 9.00ex;">
Place the specified device into Idle mode. This mode may consume less power than Active mode.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">standby</b></dt>
<dd class="list-tag" style="margin-left: 9.00ex;">
Place the specified device into Standby mode. This mode will consume less power than Idle mode.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">sleep</b></dt>
<dd class="list-tag" style="margin-left: 9.00ex;">
Place the specified device into Sleep mode. This mode will consume less power than Standby mode, but requires a device reset to resume operation. Typically the <a class="link-man" href="../4/wd">wd(4)</a> driver performs this reset automatically, but this should still be used with caution.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">setidle</b> <i class="arg">idle-timer</i></dt>
<dd class="list-tag" style="margin-left: 9.00ex;">
Places the specified device into Idle mode, and sets the Idle timer to <i class="arg">idle-timer</i> seconds. A value of 0 will disable the Idle timer.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">setstandby</b> <i class="arg">standby-timer</i></dt>
<dd class="list-tag" style="margin-left: 9.00ex;">
Places the specified device into Standby mode, and sets the Standby timer to <i class="arg">standby-timer</i> seconds. A value of 0 will disable the Standby timer.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">checkpower</b></dt>
<dd class="list-tag" style="margin-left: 9.00ex;">
Will print out if the device is in Active, Idle, or Standby power management mode.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">apm</b> &#91;<i class="arg">disable</i> | <i class="arg">set #</i>&#93;</dt>
<dd class="list-tag" style="margin-left: 9.00ex;">
Controls the Advanced Power Management feature of the specified device. Advanced Power Management is an optional feature used to specify a power management level to balance between device performance and power consumption.<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="arg">disable</i></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
Disable the Advanced Power Management.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="arg">set #</i></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
Enable the Advanced Power Management feature and set its level to the value #, where # is an integer within the scale 0-253; being 0 the mode with the lowest power consumption (and thus the worse performance) and 253 the mode which provides the better performance at a cost of more power consumption.<p>
It should be noted that the effect of the value need not be continous. For example, a device might provide only two modes: one from 0 to 126 and other from 127 to 253. Per the specification, values of 127 and higher do not permit the device to spin down to save power.</dd>
</dl>
</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">smart</b> &#91;<i class="arg">enable</i> | <i class="arg">disable</i> | <i class="arg">status</i> | <i class="arg">offline #</i> | <i class="arg">error-log</i> | <i class="arg">selftest-log</i>&#93;</dt>
<dd class="list-tag" style="margin-left: 9.00ex;">
Controls SMART feature set of the specified device. SMART stands for Self-Monitoring, Analysis, and Reporting Technology. It provides an early warning system by comparing subtle operation characteristics to those determined in vendor testing to precede device failures.<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="arg">enable</i></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
Enables access to SMART capabilities within the device. Prior to being enabled, a SMART capable device neither monitors nor saves SMART attribute values. The state of SMART, either enabled or disabled, will be preserved by the device across power cycles.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="arg">disable</i></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
Disables access to SMART capabilities within the device. Attribute values will be saved, and will no longer be monitored.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="arg">status</i></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
Reports whether SMART is supported by the device, and whether SMART is enabled on the device (can only be determined on ATA6 or better devices). If SMART is enabled, then a table of attribute information is printed. Attributes are the specific performance or calibration parameters that are used in analyzing the status of the device. The specific set of attributes being used and the identity of these attributes is vendor specific and proprietary.<p>
Attribute values are used to represent the relative reliability of individual performance or calibration parameters. The valid range of attribute values is from 1 to 253 decimal. Lower values indicate that the analysis algorithms being used by the device are predicting a higher probability of a degrading or faulty condition.<p>
Each attribute value has a corresponding threshold limit which is used for direct comparison to the attribute value to indicate the existence of a degrading or faulty condition. The numerical value of the attribute thresholds are determined by the device manufacturer through design and reliability testing and analysis. Each attribute threshold represents the lowest limit to which its corresponding attribute value can equal while still retaining a positive reliability status.<p>
If the crit field is &#8220;yes&#8221; then negative reliability of this attribute predicts imminent data loss. Otherwise it merely indicates that the intended design life period of usage or age has been exceeded. The collect field indicates whether this attribute is updated while the device is online. The reliability field indicates whether the attribute value is within the acceptable threshold.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="arg">offline #</i></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
Runs the numbered offline self-test on the drive.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="arg">error-log</i></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
Prints the error log.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="arg">selftest-log</i></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
Prints the self-test log.</dd>
</dl>
</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">security</b> &#91;<i class="arg">status</i> | <i class="arg">freeze</i> | <i class="arg">setpass</i> | <i class="arg">unlock</i> | <i class="arg">disable</i> | <i class="arg">erase</i>&#93;</dt>
<dd class="list-tag" style="margin-left: 9.00ex;">
Controls &#8220;security&#8221; (password protection) features of modern ATA drives. The security commands are intended to be issued by low-level software (firmware / BIOS) only. Generally, the security status should be &#8220;frozen&#8221; before the operating system is started so that misbehaving or malicious software cannot set or change a password. Older and buggy BIOSes neglect to do so; in these cases it might make sense to issue the &#8220;freeze&#8221; command early in the boot process.<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="arg">status</i></dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
displays the drive's security status</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="arg">freeze</i></dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
freezes the drive's security status</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="arg">setpass</i> &#91;user | master&#93;</dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
sets the drive's user or master password</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="arg">unlock</i> &#91;user | master&#93;</dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
unlocks a password-protected drive</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="arg">disable</i> &#91;user | master&#93;</dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
disables password protection</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="arg">erase</i> &#91;user | master&#93;</dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
erases the device and clears security state, using enhanced erasure if the drive supports it; may take a long time to run</dd>
</dl>
<p>
Note that to erase a drive, it must have a password set and be unfrozen. If you can't persuade your firmware to leave the drive unfrozen on boot, but it is a SATA drive, say <i class="file">wd2</i> at <i class="file">atabus3</i>, that you can safely physically disconnect and reconnect, then you may be able to use SATA hot-plug to work around this: first run<p>
<pre style="margin-left: 5.00ex;" class="lit display">
# drvctl -d wd2</pre>
<p>
Then physically disconnect and reconnect the drive, and run<p>
<pre style="margin-left: 5.00ex;" class="lit display">
# drvctl -r -a ata_hl atabus3</pre>
<p>
After this, check that the security status does not list &#8220;frozen&#8221;:<p>
<pre style="margin-left: 5.00ex;" class="lit display">
# atactl wd2 security status 
	supported 
#</pre>
</dd>
</dl>
</div>
<div class="section">
<h1 id="x42555320434f4d4d414e4453">BUS COMMANDS</h1> The following commands may be used on IDE and ATA busses. Note that not all devices support all commands.<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">reset</b></dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
Reset the bus. This will reset all ATA devices present on the bus. Any ATAPI device with pending commands will also be reset.</dd>
</dl>
</div>
<div class="section">
<h1 id="x4558414d504c4553">EXAMPLES</h1> To erase <i class="file">wd2</i> which is currently unfrozen and has no password set:<p>
<pre style="margin-left: 5.00ex;" class="lit display">
# atactl wd2 security status 
	supported 
# atactl wd2 security setpass user 
Password: 
Confirm password: 
# atactl wd2 security status 
	supported 
	enabled 
# atactl wd2 security erase user 
Password: 
Erasing may take up to 0h 2m 0s... 
#</pre>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../2/ioctl">ioctl(2)</a>, <a class="link-man" href="../4/wd">wd(4)</a>, <a class="link-man" href="../8/dkctl">dkctl(8)</a>, <a class="link-man" href="../8/drvctl">drvctl(8)</a>, <a class="link-man" href="../8/scsictl">scsictl(8)</a></div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> The <b class="name">atactl</b> command first appeared in <span class="unix">NetBSD&#160;1.4</span>.</div>
<div class="section">
<h1 id="x415554484f5253">AUTHORS</h1> The <b class="name">atactl</b> command was written by Ken Hornstein. It was based heavily on the <a class="link-man" href="../8/scsictl">scsictl(8)</a> command written by Jason R. Thorpe.</div>
<div class="section">
<h1 id="x42554753">BUGS</h1> The output from the <b class="flag">identify</b> command is rather ugly.<p>
Support for master passwords is not implemented.<p>
The <span class="unix">NetBSD</span> kernel behaves poorly with drives that have passwords set and are locked.</div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
January 9, 2013</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
</html>

