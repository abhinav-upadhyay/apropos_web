<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/../4/strict.dtd">
>
<head>
<meta http-equiv="Content-Type" content="te../; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="../style.css" type="text/css" media="all">
<title>
SPAWN(8)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
SPAWN(8)</td>
<td class="head-vol" align="center">
System Manager's Manual</td>
<td class="head-rtitle" align="right">
SPAWN(8)</td>
</tr>
</tbody>
</table>
<br>
<div class="section">
<h1>NAME</h1> spawn &#45; Postfix external command spawner</div>
<div class="section">
<h1>SYNOPSIS</h1><br>
<b>spawn</b> [generic Postfix daemon options] command_attributes...</div>
<div class="section">
<h1>DESCRIPTION</h1><br>
The <b>spawn</b>(8) daemon provides the Postfix equivalent of  <b>inetd</b>. It listens on a port as specified in the Postfix  <b>master.cf</b> file and spawns an external command whenever a connection is established. The connection can be made over local IPC (such as UNIX-domain sockets) or over non-local IPC (such as TCP sockets). The command&#769;s standard input, output and error streams are connected directly to the communication endpoint.<div style="height: 1.00em;">
&#160;</div>
This daemon expects to be run from the <b>master</b>(8) process manager.</div>
<div class="section">
<h1>COMMAND ATTRIBUTE SYNTAX</h1><br>
The external command attributes are given in the <b>master.cf</b> file at the end of a service definition.  The syntax is as follows:<dl>
<dt>
<b>user</b>=<i>username</i> (required)</dt>
<dd>
</dd>
</dl>
<dl>
<dt>
<b>user</b>=<i>username</i>:<i>groupname</i></dt>
<dd>
The external command is executed with the rights of the specified  <i>username</i>.  The software refuses to execute commands with root privileges, or with the privileges of the mail system owner. If  <i>groupname</i> is specified, the corresponding group ID is used instead of the group ID of  <i>username</i>.</dd>
</dl>
<dl>
<dt>
<b>argv</b>=<i>command</i>... (required)</dt>
<dd>
The command to be executed. This must be specified as the last command attribute. The command is executed directly, i.e. without interpretation of shell meta characters by a shell command interpreter.</dd>
</dl>
</div>
<div class="section">
<h1>BUGS</h1><br>
In order to enforce standard Postfix process resource controls, the  <b>spawn</b>(8) daemon runs only one external command at a time. As such, it presents a noticeable overhead by wasting precious process resources. The  <b>spawn</b>(8) daemon is expected to be replaced by a more structural solution.</div>
<div class="section">
<h1>DIAGNOSTICS</h1><br>
The <b>spawn</b>(8) daemon reports abnormal child exits. Problems are logged to  <b>syslogd</b>(8).</div>
<div class="section">
<h1>SECURITY</h1><br>
This program needs root privilege in order to execute external commands as the specified user. It is therefore security sensitive. However the  <b>spawn</b>(8) daemon does not talk to the external command and thus is not vulnerable to data-driven attacks.</div>
<div class="section">
<h1>CONFIGURATION PARAMETERS</h1><br>
Changes to <b>main.cf</b> are picked up automatically as <b>spawn</b>(8) processes run for only a limited amount of time. Use the command " <b>postfix reload</b>" to speed up a change.<div style="height: 1.00em;">
&#160;</div>
The text below provides only a parameter summary. See  <b>postconf</b>(5) for more details including examples.<div style="height: 1.00em;">
&#160;</div>
In the text below, <i>transport</i> is the first field of the entry in the  <b>master.cf</b> file.</div>
<div class="section">
<h1>RESOURCE AND RATE CONTROL</h1><br>
<dl>
<dt>
<i>transport</i><b>_time_limit ($command_time_limit)</b></dt>
<dd>
The amount of time the command is allowed to run before it is terminated.<div style="height: 1.00em;">
&#160;</div>
Postfix 2.4 and later support a suffix that specifies the time unit: s (seconds), m (minutes), h (hours), d (days), w (weeks). The default time unit is seconds.</dd>
</dl>
</div>
<div class="section">
<h1>MISCELLANEOUS</h1><br>
<dl>
<dt>
<b>config_directory (see 'postconf -d' output)</b></dt>
<dd>
The default location of the Postfix main.cf and master.cf configuration files.</dd>
</dl>
<dl>
<dt>
<b>daemon_timeout (18000s)</b></dt>
<dd>
How much time a Postfix daemon process may take to handle a request before it is terminated by a built-in watchdog timer.</dd>
</dl>
<dl>
<dt>
<b>export_environment (see 'postconf -d' output)</b></dt>
<dd>
The list of environment variables that a Postfix process will export to non-Postfix processes.</dd>
</dl>
<dl>
<dt>
<b>ipc_timeout (3600s)</b></dt>
<dd>
The time limit for sending or receiving information over an internal communication channel.</dd>
</dl>
<dl>
<dt>
<b>mail_owner (postfix)</b></dt>
<dd>
The UNIX system account that owns the Postfix queue and most Postfix daemon processes.</dd>
</dl>
<dl>
<dt>
<b>max_idle (100s)</b></dt>
<dd>
The maximum amount of time that an idle Postfix daemon process waits for an incoming connection before terminating voluntarily.</dd>
</dl>
<dl>
<dt>
<b>max_use (100)</b></dt>
<dd>
The maximal number of incoming connections that a Postfix daemon process will service before terminating voluntarily.</dd>
</dl>
<dl>
<dt>
<b>process_id (read-only)</b></dt>
<dd>
The process ID of a Postfix command or daemon process.</dd>
</dl>
<dl>
<dt>
<b>process_name (read-only)</b></dt>
<dd>
The process name of a Postfix command or daemon process.</dd>
</dl>
<dl>
<dt>
<b>queue_directory (see 'postconf -d' output)</b></dt>
<dd>
The location of the Postfix top-level queue directory.</dd>
</dl>
<dl>
<dt>
<b>syslog_facility (mail)</b></dt>
<dd>
The syslog facility of Postfix logging.</dd>
</dl>
<dl>
<dt>
<b>syslog_name (see 'postconf -d' output)</b></dt>
<dd>
The mail system name that is prepended to the process name in syslog records, so that "smtpd" becomes, for example, "postfix/smtpd".</dd>
</dl>
</div>
<div class="section">
<h1>SEE ALSO</h1><br>
postconf(5), configuration parameters<br>
master(8), process manager<br>
syslogd(8), system logging</div>
<div class="section">
<h1>LICENSE</h1><br>
The Secure Mailer license must be distributed with this software.</div>
<div class="section">
<h1>AUTHOR(S)</h1><br>
Wietse Venema<br>
IBM T.J. Watson Research<br>
P.O. Box 704<br>
Yorktown Heights, NY 10598, USA</div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tr>
<td class="foot-date">
</td>
<td class="foot-os" align="right">
</td>
</tr>
</table>
</div>
</body>
<>

