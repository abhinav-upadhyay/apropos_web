<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/../4/strict.dtd">
>
<head>
<meta http-equiv="Content-Type" content="te../; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="../style.css" type="text/css" media="all">
<title>
TLSMGR(8)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
TLSMGR(8)</td>
<td class="head-vol" align="center">
System Manager's Manual</td>
<td class="head-rtitle" align="right">
TLSMGR(8)</td>
</tr>
</tbody>
</table>
<br>
<div class="section">
<h1>NAME</h1> tlsmgr &#45; Postfix TLS session cache and PRNG manager</div>
<div class="section">
<h1>SYNOPSIS</h1><br>
<b>tlsmgr</b> [generic Postfix daemon options]</div>
<div class="section">
<h1>DESCRIPTION</h1><br>
The <b>tlsmgr</b>(8) manages the Postfix TLS session caches. It stores and retrieves cache entries on request by  <b>smtpd</b>(8) and <b>smtp</b>(8) processes, and periodically removes entries that have expired.<div style="height: 1.00em;">
&#160;</div>
The <b>tlsmgr</b>(8) also manages the PRNG (pseudo random number generator) pool. It answers queries by the  <b>smtpd</b>(8) and  <b>smtp</b>(8) processes to seed their internal PRNG pools.<div style="height: 1.00em;">
&#160;</div>
The <b>tlsmgr</b>(8)'s PRNG pool is initially seeded from an external source (EGD, /dev/urandom, or regular file). It is updated at configurable pseudo-random intervals with data from the external source. It is updated periodically with data from TLS session cache entries and with the time of day, and is updated with the time of day whenever a process requests  <b>tlsmgr</b>(8) service.<div style="height: 1.00em;">
&#160;</div>
The <b>tlsmgr</b>(8) saves the PRNG state to an exchange file periodically and when the process terminates, and reads the exchange file when initializing its PRNG.</div>
<div class="section">
<h1>SECURITY</h1><br>
The <b>tlsmgr</b>(8) is not security-sensitive. The code that maintains the external and internal PRNG pools does not "trust" the data that it manipulates, and the code that maintains the TLS session cache does not touch the contents of the cached entries, except for seeding its internal PRNG pool.<div style="height: 1.00em;">
&#160;</div>
The <b>tlsmgr</b>(8) can be run chrooted and with reduced privileges. At process startup it connects to the entropy source and exchange file, and creates or truncates the optional TLS session cache files.<div style="height: 1.00em;">
&#160;</div>
With Postfix version 2.5 and later, the <b>tlsmgr</b>(8) no longer uses root privileges when opening cache files. These files should now be stored under the Postfix-owned  <b>data_directory</b>.  As a migration aid, an attempt to open a cache file under a non-Postfix directory is redirected to the Postfix-owned  <b>data_directory</b>, and a warning is logged.</div>
<div class="section">
<h1>DIAGNOSTICS</h1><br>
Problems and transactions are logged to the syslog daemon.</div>
<div class="section">
<h1>BUGS</h1><br>
There is no automatic means to limit the number of entries in the TLS session caches and/or the size of the TLS cache files.</div>
<div class="section">
<h1>CONFIGURATION PARAMETERS</h1><br>
Changes to <b>main.cf</b> are not picked up automatically, because  <b>tlsmgr</b>(8) is a persistent processes.  Use the command " <b>postfix reload</b>" after a configuration change.<div style="height: 1.00em;">
&#160;</div>
The text below provides only a parameter summary. See  <b>postconf</b>(5) for more details including examples.</div>
<div class="section">
<h1>TLS SESSION CACHE</h1><br>
<dl>
<dt>
<b>lmtp_tls_loglevel (0)</b></dt>
<dd>
The LMTP-specific version of the smtp_tls_loglevel configuration parameter.</dd>
</dl>
<dl>
<dt>
<b>lmtp_tls_session_cache_database (empty)</b></dt>
<dd>
The LMTP-specific version of the smtp_tls_session_cache_database configuration parameter.</dd>
</dl>
<dl>
<dt>
<b>lmtp_tls_session_cache_timeout (3600s)</b></dt>
<dd>
The LMTP-specific version of the smtp_tls_session_cache_timeout configuration parameter.</dd>
</dl>
<dl>
<dt>
<b>smtp_tls_loglevel (0)</b></dt>
<dd>
Enable additional Postfix SMTP client logging of TLS activity.</dd>
</dl>
<dl>
<dt>
<b>smtp_tls_session_cache_database (empty)</b></dt>
<dd>
Name of the file containing the optional Postfix SMTP client TLS session cache.</dd>
</dl>
<dl>
<dt>
<b>smtp_tls_session_cache_timeout (3600s)</b></dt>
<dd>
The expiration time of Postfix SMTP client TLS session cache information.</dd>
</dl>
<dl>
<dt>
<b>smtpd_tls_loglevel (0)</b></dt>
<dd>
Enable additional Postfix SMTP server logging of TLS activity.</dd>
</dl>
<dl>
<dt>
<b>smtpd_tls_session_cache_database (empty)</b></dt>
<dd>
Name of the file containing the optional Postfix SMTP server TLS session cache.</dd>
</dl>
<dl>
<dt>
<b>smtpd_tls_session_cache_timeout (3600s)</b></dt>
<dd>
The expiration time of Postfix SMTP server TLS session cache information.</dd>
</dl>
</div>
<div class="section">
<h1>PSEUDO RANDOM NUMBER GENERATOR</h1><br>
<dl>
<dt>
<b>tls_random_source (see 'postconf -d' output)</b></dt>
<dd>
The external entropy source for the in-memory <b>tlsmgr</b>(8) pseudo random number generator (PRNG) pool.</dd>
</dl>
<dl>
<dt>
<b>tls_random_bytes (32)</b></dt>
<dd>
The number of bytes that <b>tlsmgr</b>(8) reads from $tls_random_source when (re)seeding the in-memory pseudo random number generator (PRNG) pool.</dd>
</dl>
<dl>
<dt>
<b>tls_random_exchange_name (see 'postconf -d' output)</b></dt>
<dd>
Name of the pseudo random number generator (PRNG) state file that is maintained by  <b>tlsmgr</b>(8).</dd>
</dl>
<dl>
<dt>
<b>tls_random_prng_update_period (3600s)</b></dt>
<dd>
The time between attempts by <b>tlsmgr</b>(8) to save the state of the pseudo random number generator (PRNG) to the file specified with $tls_random_exchange_name.</dd>
</dl>
<dl>
<dt>
<b>tls_random_reseed_period (3600s)</b></dt>
<dd>
The maximal time between attempts by <b>tlsmgr</b>(8) to re-seed the in-memory pseudo random number generator (PRNG) pool from external sources.</dd>
</dl>
</div>
<div class="section">
<h1>MISCELLANEOUS CONTROLS</h1><br>
<dl>
<dt>
<b>config_directory (see 'postconf -d' output)</b></dt>
<dd>
The default location of the Postfix main.cf and master.cf configuration files.</dd>
</dl>
<dl>
<dt>
<b>data_directory (see 'postconf -d' output)</b></dt>
<dd>
The directory with Postfix-writable data files (for example: caches, pseudo-random numbers).</dd>
</dl>
<dl>
<dt>
<b>daemon_timeout (18000s)</b></dt>
<dd>
How much time a Postfix daemon process may take to handle a request before it is terminated by a built-in watchdog timer.</dd>
</dl>
<dl>
<dt>
<b>process_id (read-only)</b></dt>
<dd>
The process ID of a Postfix command or daemon process.</dd>
</dl>
<dl>
<dt>
<b>process_name (read-only)</b></dt>
<dd>
The process name of a Postfix command or daemon process.</dd>
</dl>
<dl>
<dt>
<b>syslog_facility (mail)</b></dt>
<dd>
The syslog facility of Postfix logging.</dd>
</dl>
<dl>
<dt>
<b>syslog_name (see 'postconf -d' output)</b></dt>
<dd>
The mail system name that is prepended to the process name in syslog records, so that "smtpd" becomes, for example, "postfix/smtpd".</dd>
</dl>
</div>
<div class="section">
<h1>SEE ALSO</h1><br>
smtp(8), Postfix SMTP client<br>
smtpd(8), Postfix SMTP server<br>
postconf(5), configuration parameters<br>
master(5), generic daemon options<br>
master(8), process manager<br>
syslogd(8), system logging</div>
<div class="section">
<h1>README FILES</h1><br>
Use "<b>postconf readme_directory</b>" or " <b>postconf_directory</b>" to locate this information.<br>
TLS_README, Postfix TLS configuration and operation</div>
<div class="section">
<h1>LICENSE</h1><br>
The Secure Mailer license must be distributed with this software.</div>
<div class="section">
<h1>HISTORY</h1><br>
This service was introduced with Postfix version 2.2.</div>
<div class="section">
<h1>AUTHOR(S)</h1><br>
Lutz Jaenicke<br>
BTU Cottbus<br>
Allgemeine Elektrotechnik<br>
Universitaetsplatz 3-4<br>
D-03044 Cottbus, Germany<p>
<br>
Adapted by:<br>
Wietse Venema<br>
IBM T.J. Watson Research<br>
P.O. Box 704<br>
Yorktown Heights, NY 10598, USA</div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tr>
<td class="foot-date">
</td>
<td class="foot-os" align="right">
</td>
</tr>
</table>
</div>
</body>
<>

