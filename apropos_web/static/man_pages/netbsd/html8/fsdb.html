<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/../4/strict.dtd">
>
<head>
<meta http-equiv="Content-Type" content="te../; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="../style.css" type="text/css" media="all">
<title>
FSDB(8)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
FSDB(8)</td>
<td class="head-vol" align="center">
System Manager's Manual</td>
<td class="head-rtitle" align="right">
FSDB(8)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">fsdb</b> &#8212; <span class="desc">FFS debugging/editing tool</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1><table class="synopsis">
<col style="width: 4.00ex;">
<col>
<tbody>
<tr>
<td>
fsdb</td>
<td>
&#91;<span class="opt"><b class="flag">&#45;dFn</b></span>&#93; <b class="flag">&#45;f</b> <i class="arg">fsname</i></td>
</tr>
</tbody>
</table>
</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> <b class="name">fsdb</b> opens <i class="arg">fsname</i> (usually a raw disk partition) and runs a command loop allowing manipulation of the file system's inode data. You are prompted to enter a command with &#8220;fsdb (inum X)&gt;&#8221; where <b class="var">X</b> is the currently selected i-number. The initial selected inode is the root of the filesystem (i-number 2). The command processor uses the <a class="link-man" href="../3/editline">editline(3)</a> library, so you can use command line editing to reduce typing if desired. When you exit the command loop, the file system superblock is marked dirty and any buffered blocks are written to the file system.<p>
The <b class="flag">&#45;d</b> option enables additional debugging output (which comes primarily from <a class="link-man" href="../8/fsck">fsck(8)</a>-derived code).<p>
The <b class="flag">&#45;F</b> option indicates that <i class="arg">filesystem</i> is a file system image, rather than a raw character device. It will be accessed &#8216;as-is&#8217;, and no attempts will be made to read a disklabel.<p>
The <b class="flag">&#45;n</b> option disables writing to the device, preventing any changes from being made to the filesystem.</div>
<div class="section">
<h1 id="x434f4d4d414e4453">COMMANDS</h1> Besides the built-in <a class="link-man" href="../3/editline">editline(3)</a> commands, <b class="name">fsdb</b> supports these commands:<p>
<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">help</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Print out the list of accepted commands.<p>
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">inode</b> <i class="arg">i-number</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Select inode <i class="arg">i-number</i> as the new current inode.<p>
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">back</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Revert to the previously current inode.<p>
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">clri</b> <i class="arg">i-number</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Clear the inode <i class="arg">i-number</i>.<p>
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">lookup</b> <i class="arg">name</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">cd</b> <i class="arg">name</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Find <i class="arg">name</i> in the current directory and make its inode the current inode. <i class="arg">Name</i> may be a multi-component name or may begin with slash to indicate that the root inode should be used to start the lookup. If some component along the pathname is not found, the last valid directory encountered is left as the active inode.<div style="height: 0.00em;">
&#160;</div>
This command is valid only if the starting inode is a directory.<p>
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">active</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">print</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Print out the active inode.<p>
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">uplink</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Increment the active inode's link count.<p>
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">downlink</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Decrement the active inode's link count.<p>
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">linkcount</b> <i class="arg">number</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Set the active inode's link count to <i class="arg">number</i>.<p>
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">ls</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
List the current inode's directory entries. This command is valid only if the current inode is a directory.<p>
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">blks</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
List the current inode's blocks numbers.<p>
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">findblk</b> <i class="arg">disk block number ...</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Find the inode(s) owning the specified disk block(s) number(s). Note that these are not absolute disk blocks numbers, but offsets from the start of the partition.<p>
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">rm</b> <i class="arg">name</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">del</b> <i class="arg">name</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Remove the entry <i class="arg">name</i> from the current directory inode. This command is valid only if the current inode is a directory.<p>
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">ln</b> <i class="arg">ino</i> <i class="arg">name</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Create a link to inode <i class="arg">ino</i> under the name <i class="arg">name</i> in the current directory inode. This command is valid only if the current inode is a directory.<p>
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">chinum</b> <i class="arg">dirslot</i> <i class="arg">inum</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Change the i-number in directory entry <i class="arg">dirslot</i> to <i class="arg">inum</i>.<p>
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">chname</b> <i class="arg">dirslot</i> <i class="arg">name</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Change the name in directory entry <i class="arg">dirslot</i> to <i class="arg">name</i>. This command cannot expand a directory entry. You can only rename an entry if the name will fit into the existing directory slot.<p>
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">chtype</b> <i class="arg">type</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Change the type of the current inode to <i class="arg">type</i>. <i class="arg">type</i> may be one of: <span class="emph">file</span>, <span class="emph">dir</span>, <span class="emph">socket</span>, or <span class="emph">fifo</span>.<p>
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">chmod</b> <i class="arg">mode</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Change the mode bits of the current inode to <i class="arg">mode</i>. You cannot change the file type with this subcommand; use <b class="cmd">chtype</b> to do that.<p>
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">chflags</b> <i class="arg">flags</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Change the file flags of the current inode to <i class="arg">flags</i>.<p>
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">chown</b> <i class="arg">uid</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Change the owner of the current inode to <i class="arg">uid</i>.<p>
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">chgrp</b> <i class="arg">gid</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Change the group of the current inode to <i class="arg">gid</i>.<p>
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">chgen</b> <i class="arg">gen</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Change the generation number of the current inode to <i class="arg">gen</i>.<p>
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">mtime</b> <i class="arg">time</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">ctime</b> <i class="arg">time</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">atime</b> <i class="arg">time</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Change the modification, change, or access time (respectively) on the current inode to <i class="arg">time</i>. <i class="arg">Time</i> should be in the format <span class="emph">YYYYMMDDHHMMSS[.nsec]</span> where <span class="emph">nsec</span> is an optional nanosecond specification. If no nanoseconds are specified, the <b class="var">mtimensec</b>, <b class="var">ctimensec</b>, or <b class="var">atimensec</b> field will be set to zero.<p>
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">quit,</b> <b class="flag">q,</b> <b class="flag">exit,</b> &#60;<span class="emph">EOF</span>&#62;</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Exit the program.</dd>
</dl>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../3/editline">editline(3)</a>, <a class="link-man" href="../5/fs">fs(5)</a>, <a class="link-man" href="../8/clri">clri(8)</a>, <a class="link-man" href="../8/fsck">fsck(8)</a></div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> <b class="name">fsdb</b> uses the source code for <a class="link-man" href="../8/fsck">fsck(8)</a> to implement most of the file system manipulation code. The remainder of <b class="name">fsdb</b> first appeared in <span class="unix">NetBSD&#160;1.1</span>.</div>
<div class="section">
<h1 id="x5741524e494e47">WARNING</h1> Use this tool with extreme caution -- you can damage an FFS file system beyond what <a class="link-man" href="../8/fsck">fsck(8)</a> can repair.</div>
<div class="section">
<h1 id="x42554753">BUGS</h1> Manipulation of &#8220;short&#8221; symlinks doesn't work (in particular, don't try changing a symlink's type).<div style="height: 0.00em;">
&#160;</div>
You must specify modes as numbers rather than symbolic names.<div style="height: 0.00em;">
&#160;</div>
There are a bunch of other things that you might want to do which <b class="name">fsdb</b> doesn't implement.</div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
January 3, 2004</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
<>

