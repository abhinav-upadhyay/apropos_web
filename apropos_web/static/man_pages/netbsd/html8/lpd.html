<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="../style.css" type="text/css" media="all">
<title>
LPD(8)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
LPD(8)</td>
<td class="head-vol" align="center">
System Manager's Manual</td>
<td class="head-rtitle" align="right">
LPD(8)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">lpd</b> &#8212; <span class="desc">line printer spooler daemon</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1><table class="synopsis">
<col style="width: 3.00ex;">
<col>
<tbody>
<tr>
<td>
lpd</td>
<td>
&#91;<span class="opt"><b class="flag">&#45;dlsrW</b></span>&#93; &#91;<span class="opt"><b class="flag">&#45;b</b> <i class="arg">bind-address</i></span>&#93; &#91;<span class="opt"><b class="flag">&#45;n</b> <i class="arg">maxchild</i></span>&#93; &#91;<span class="opt"><b class="flag">&#45;w</b> <i class="arg">maxwait</i></span>&#93; &#91;<span class="opt">port</span>&#93;</td>
</tr>
</tbody>
</table>
</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> <b class="name">lpd</b> is the line printer daemon (spool area handler) and is normally invoked at boot time from the <a class="link-man" href="../8/rc">rc(8)</a> file. It makes a single pass through the <a class="link-man" href="../5/printcap">printcap(5)</a> file to find out about the existing printers and prints any files left after a crash. It then uses the system calls <a class="link-man" href="../2/listen">listen(2)</a> and <a class="link-man" href="../2/accept">accept(2)</a> to receive requests to print files in the queue, transfer files to the spooling area, display the queue, or remove jobs from the queue. In each case, it forks a child to handle the request so the parent can continue to listen for more requests.<p>
Available options:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;b</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Normally, if the <b class="flag">&#45;s</b> option is not specified, <b class="name">lpd</b> will listen on all network interfaces for incoming TCP connections. The <b class="flag">&#45;b</b> option, followed by a <i class="arg">bind-address</i> specifies that <b class="name">lpd</b> should listen on that address instead of INADDR_ANY. Multiple <b class="flag">&#45;b</b> options are permitted, allowing a list of addresses to be specified. Use of this option silently overrides the <b class="flag">&#45;s</b> option if it is also present on the command line. <i class="arg">bind-address</i> can be a numeric host name in IPv4 or IPv6 notation, or a symbolic host name which will be looked up in the normal way.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;d</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
The <b class="flag">&#45;d</b> option turns on the <span class="define">SO_DEBUG</span> <a class="link-man" href="../2/socket">socket(2)</a> option. See <a class="link-man" href="../2/setsockopt">setsockopt(2)</a> for more details.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;l</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
The <b class="flag">&#45;l</b> flag causes <b class="name">lpd</b> to log valid requests received from the network. This can be useful for debugging purposes.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;n</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
The <b class="flag">&#45;n</b> flag sets <i class="arg">maxchild</i> as the maximum number of child processes that <b class="name">lpd</b> will spawn. The default is 32.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;r</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
The <b class="flag">&#45;r</b> flag allows the &#8220;of&#8221; and &#8220;if&#8221; filters to be used if specified for a remote printer. Traditionally, <b class="name">lpd</b> would not use filters for remote printers.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;s</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
The <b class="flag">&#45;s</b> flag selects &#8220;secure&#8221; mode, in which <b class="name">lpd</b> does not listen on a TCP socket but only takes commands from a <span class="unix">UNIX</span> domain socket. This is valuable when the machine on which <b class="name">lpd</b> runs is subject to attack over the network and it is desired that the machine be protected from attempts to remotely fill spools and similar attacks.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;w</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
The <b class="flag">&#45;w</b> flag sets <i class="arg">maxwait</i> as the wait time (in seconds) for dead remote server detection. If no response is returned from a connected server within this period, the connection is closed and a message logged. The default is 120 seconds.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;W</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
The <b class="flag">&#45;W</b> option will instruct lpd not to verify a remote tcp connection comes from a reserved port (&lt;1024).</dd>
</dl>
<p>
If the &#91;<span class="opt">port</span>&#93; parameter is passed, <b class="name">lpd</b> listens on this port instead of the usual &#8220;printer/tcp&#8221; port from <i class="file">/etc/services</i>.<p>
Access control is provided by three means. First, <i class="file">/etc/hosts.allow</i> and <i class="file">/etc/hosts.deny</i> are consulted as described in <a class="link-man" href="../5/hosts_access">hosts_access(5)</a> with daemon name <b class="name">lpd</b>. Second, all requests must come from one of the machines listed in the file <i class="file">/etc/hosts.equiv</i> or <i class="file">/etc/hosts.lpd</i> unless there is a line consisting of &#8216;+&#8217;, in which case any host will be accepted that passes the <a class="link-man" href="../5/hosts_access">hosts_access(5)</a> test and has reverse resolving set up. Lastly, if the <code class="lit">rs</code> capability is specified in the <a class="link-man" href="../5/printcap">printcap(5)</a> entry for the printer being accessed, <span class="emph">lpr</span> requests will only be honored for those users with accounts on the machine with the printer. Requests must pass all three tests.<p>
The file <span class="emph">minfree</span> in each spool directory contains the number of disk blocks to leave free so that the line printer queue won't completely fill the disk. The <span class="emph">minfree</span> file can be edited with your favorite text editor.<p>
The daemon begins processing files after it has successfully set the lock for exclusive access (described a bit later), and scans the spool directory for files beginning with <span class="emph">cf</span>. Lines in each <span class="emph">cf</span> file specify files to be printed or non-printing actions to be performed. Each such line begins with a key character to specify what to do with the remainder of the line.<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
J</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Job Name. String to be used for the job name on the burst page.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
C</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Classification. String to be used for the classification line on the burst page.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
L</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Literal. The line contains identification info from the password file and causes the banner page to be printed.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
T</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Title. String to be used as the title for <a class="link-man" href="../1/pr">pr(1)</a>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
H</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Host Name. Name of the machine where <a class="link-man" href="../1/lpr">lpr(1)</a> was invoked.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
P</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Person. Login name of the person who invoked <a class="link-man" href="../1/lpr">lpr(1)</a>. This is used to verify ownership by <a class="link-man" href="../1/lprm">lprm(1)</a>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
M</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Send mail to the specified user when the current print job completes.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
f</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Formatted File. Name of a file to print which is already formatted.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
l</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Like &#8220;f&#8221; but passes control characters and does not make page breaks.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
p</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Name of a file to print using <a class="link-man" href="../1/pr">pr(1)</a> as a filter.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
t</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Troff File. The file contains <a class="link-man" href="../1/troff">troff(1)</a> output (cat phototypesetter commands).</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
n</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Ditroff File. The file contains device independent troff output.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
d</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
DVI File. The file contains Tex l output DVI format from Stanford.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
g</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Graph File. The file contains data produced by <b class="cmd">plot</b>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
c</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Cifplot File. The file contains data produced by <b class="cmd">cifplot</b>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
v</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
The file contains a raster image.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
o</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
The file contains PostScript data.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
r</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
The file contains text data with FORTRAN carriage control characters.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
1</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Troff Font R. Name of the font file to use instead of the default.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
2</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Troff Font I. Name of the font file to use instead of the default.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
3</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Troff Font B. Name of the font file to use instead of the default.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
4</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Troff Font S. Name of the font file to use instead of the default.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
W</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Width. Changes the page width (in characters) used by <a class="link-man" href="../1/pr">pr(1)</a> and the text filters.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
I</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Indent. The number of characters to indent the output by (in ascii).</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
U</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Unlink. Name of file to remove upon completion of printing.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
N</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
File name. The name of the file which is being printed, or a blank for the standard input (when <a class="link-man" href="../1/lpr">lpr(1)</a> is invoked in a pipeline).</dd>
</dl>
<p>
If a file cannot be opened, a message will be logged via <a class="link-man" href="../3/syslog">syslog(3)</a> using the <span class="emph">LOG_LPR</span> facility. <b class="name">lpd</b> will try up to 20 times to reopen a file it expects to be there, after which it will skip the file to be printed.<p>
<b class="name">lpd</b> uses <a class="link-man" href="../2/flock">flock(2)</a> to provide exclusive access to the lock file and to prevent multiple daemons from becoming active simultaneously. If the daemon should be killed or die unexpectedly, the lock file need not be removed. The lock file is kept in a readable ASCII form and contains two lines. The first is the process id of the daemon and the second is the control file name of the current job being printed. The second line is updated to reflect the current status of <b class="name">lpd</b> for the programs <a class="link-man" href="../1/lpq">lpq(1)</a> and <a class="link-man" href="../1/lprm">lprm(1)</a>.</div>
<div class="section">
<h1 id="x46494c4553">FILES</h1><dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/etc/printcap</i></dt>
<dd class="list-tag" style="margin-left: 27.00ex;">
printer description file</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/var/spool/output/*</i></dt>
<dd class="list-tag" style="margin-left: 27.00ex;">
spool directories</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/var/spool/output/*/minfree</i></dt>
<dd class="list-tag" style="margin-left: 27.00ex;">
minimum free space to leave</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/dev/lp*</i></dt>
<dd class="list-tag" style="margin-left: 27.00ex;">
line printer devices</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/var/run/printer</i></dt>
<dd class="list-tag" style="margin-left: 27.00ex;">
socket for local requests</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/etc/hosts.allow</i></dt>
<dd class="list-tag" style="margin-left: 27.00ex;">
explicit remote host access list.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/etc/hosts.deny</i></dt>
<dd class="list-tag" style="margin-left: 27.00ex;">
explicit remote host denial of service list.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/etc/hosts.equiv</i></dt>
<dd class="list-tag" style="margin-left: 27.00ex;">
lists machine names allowed printer access</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/etc/hosts.lpd</i></dt>
<dd class="list-tag" style="margin-left: 27.00ex;">
lists machine names allowed printer access, but not under same administrative control.</dd>
</dl>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../1/lpq">lpq(1)</a>, <a class="link-man" href="../1/lpr">lpr(1)</a>, <a class="link-man" href="../1/lprm">lprm(1)</a>, <a class="link-man" href="../2/setsockopt">setsockopt(2)</a>, <a class="link-man" href="../3/syslog">syslog(3)</a>, <a class="link-man" href="../5/hosts.equiv">hosts.equiv(5)</a>, <a class="link-man" href="../5/hosts_access">hosts_access(5)</a>, <a class="link-man" href="../5/hosts_options">hosts_options(5)</a>, <a class="link-man" href="../5/printcap">printcap(5)</a>, <a class="link-man" href="../8/lpc">lpc(8)</a>, <a class="link-man" href="../8/pac">pac(8)</a><p>
<span class="ref"><span class="ref-title">4.3 BSD Line Printer Spooler Manual</span>.</span></div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> An <b class="name">lpd</b> daemon appeared in Version 6 AT&amp;T UNIX.</div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
January 20, 2006</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
</html>

