<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="..//static/man_pages/netbsd/style.css" type="text/css" media="all">
<title>
BOOT(8) (X68k)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
BOOT(8)</td>
<td class="head-vol" align="center">
System Manager's Manual (X68k)</td>
<td class="head-rtitle" align="right">
BOOT(8)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">boot</b> &#8212; <span class="desc">system bootstrapping procedures</span></div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1><div class="subsection">
<h2 id="x506f776572206661696c20616e64206372617368207265636f76657279">Power fail and crash recovery</h2> Normally, the system will reboot itself at power-up or after crashes. An automatic consistency check of the file systems will be performed, and unless this fails, the system will resume multi-user operations.</div>
<div class="subsection">
<h2 id="x436f6c6420737461727473">Cold starts</h2> The X68000/X68030 system boots from the device which is determined by the configuration of battery-backuped SRAM. By default, the boot ROM attempts to boot from floppy disk drives (from 0 to 3) first, and then attempts to boot from hard disk (SASI or SCSI). On the <span class="unix">NetBSD</span>/x68k, booting from SCSI disks (sd??) and 2HD floppy disks (fd?a, fd?c) is currently supported.</div>
<div class="subsection">
<h2 id="x426f6f74737472617070696e672066726f6d206120666c6f707079">Bootstrapping from a floppy</h2> When the floppy disk is selected as the boot device, the initial program loader of the IOCS (firmware) reads the <i class="file">fdboot_ufs</i> program at the top of the disk, and then the fdboot_ufs program loads the <i class="file">/boot</i> program from the FFS or LFS file system. Normally, the <i class="file">/boot</i> program then loads the <span class="unix">NetBSD</span> kernel <i class="file">/netbsd</i> from the same floppy. In addition, the <i class="file">/boot</i> program has abilities to uncompress gzip'ed kernels, to read the kernel from other disks of other file systems etc (see below).<p>
For floppy disks, <i class="file">fdboot_ustar</i> is also provided to read large kernels which do not fit one a single floppy.</div>
<div class="subsection">
<h2 id="x426f6f74737472617070696e672066726f6d206120534353492068617264206469736b">Bootstrapping from a SCSI hard disk</h2> When a SCSI hard disk is selected as the boot device, the initial program loader on the SCSI host adapter's ROM reads the operating system-independent IPL menu program at the top of the disk. The IPL menu program recognizes the partition table, and selects the partition to read the operating system kernel. During this phase, when the HELP key on the keyboard is pressed, the IPL menu program displays the partition menu of that disk to prompt the user to select the boot partition (although the <span class="unix">NetBSD</span> implementation of the IPL menu, <i class="file">/usr/mdec/mboot</i>, does not have this functionality).<p>
Next, the IPL menu reads the OS-dependent boot program from the top of the selected partition. For <span class="unix">NetBSD</span> FFS/LFS file systems <i class="file">sdboot_ufs</i> is used. The <i class="file">sdboot_ufs</i> program then loads the <i class="file">/boot</i> program from that partition.</div>
<div class="subsection">
<h2 id="x4e6f726d616c204f7065726174696f6e">Normal Operation</h2> Once running, a banner similar to the following will appear:<p>
<pre style="margin-left: 5.00ex;" class="lit display">
NetBSD Multi-boot, Revision 1.1 
(user@buildhost, builddate) 
Press return to boot now, any other key for boot menu 
booting sd0a:netbsd - starting in 5</pre>
<p>
After a countdown, the system image listed will be loaded. (In the example above, it will be &#8220;<code class="lit">sd0a:netbsd</code>&#8221; which is the file <b class="name">netbsd</b> on partition &#8220;a&#8221; of the <span class="unix">NetBSD</span> SCSI hard disk of ID 0. Pressing a key within the time limit will enter interactive mode.</div>
<div class="subsection">
<h2 id="x496e746572616374697665206d6f6465">Interactive mode</h2> In interactive mode, the boot loader will present a prompt, allowing input of these commands:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 5.00ex;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">boot</b> &#91;<span class="opt"><i class="arg">device</i>:</span>&#93;&#91;<span class="opt"><i class="arg">filename</i></span>&#93; &#91;<span class="opt"><b class="flag">&#45;adqsv</b></span>&#93;</dt>
<dd class="list-tag" style="margin-left: 5.00ex;">
The default <i class="arg">device</i> will be set to the disk that the boot loader was loaded from. To boot from an alternate disk, the full name of the device should be given at the prompt. <i class="arg">device</i> is of the form <i class="arg">xd</i>&#91;<span class="opt"><i class="arg">N</i>&#91;<span class="opt"><i class="arg">x</i></span>&#93;</span>&#93; where <i class="arg">xd</i> is the device from which to boot, <i class="arg">N</i> is the unit number, and <i class="arg">x</i> is the partition letter.<p>
The following list of supported devices may vary from installation to installation:<p>
<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-hang">
<dt class="list-hang" style="margin-top: 0.00em;">
sd</dt>
<dd class="list-hang">
SCSI disks on a controller recognized by the IOCS. The unit number is the SCSI ID.</dd>
<dt class="list-hang" style="margin-top: 0.00em;">
fd</dt>
<dd class="list-hang">
Floppy drives as numbered by the IOCS.</dd>
</dl>
<p>
The default <i class="arg">filename</i> is <i class="file">netbsd</i>; if the boot loader fails to successfully open that image, it then tries <i class="file">netbsd.gz</i> (expected to be a kernel image compressed by <a class="link-man" href="../../1/gzip">gzip(1)</a>). Alternate system images can be loaded by just specifying the name of the image.<p>
Options are:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;a</b></dt>
<dd class="list-tag" style="margin-left: 3.00ex;">
Prompt for the root file system device, the system crash dump device, and the path to <a class="link-man" href="../../8/init">init(8)</a>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;d</b></dt>
<dd class="list-tag" style="margin-left: 3.00ex;">
Bring the system up in debug mode. Here it waits for a kernel debugger connect; see <a class="link-man" href="../../4/ddb">ddb(4)</a>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;q</b></dt>
<dd class="list-tag" style="margin-left: 3.00ex;">
Boot the system in quiet mode.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;s</b></dt>
<dd class="list-tag" style="margin-left: 3.00ex;">
Bring the system up in single-user mode.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;v</b></dt>
<dd class="list-tag" style="margin-left: 3.00ex;">
Boot the system in verbose mode.</dd>
</dl>
</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">help</b></dt>
<dd class="list-tag" style="margin-left: 5.00ex;">
Print an overview about commands and arguments.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">ls</b> &#91;<span class="opt"><i class="file">path</i></span>&#93;</dt>
<dd class="list-tag" style="margin-left: 5.00ex;">
Print a directory listing of <i class="file">path</i>, containing inode number, filename and file type. <i class="file">path</i> can contain a device specification.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">halt</b></dt>
<dd class="list-tag" style="margin-left: 5.00ex;">
Reboot the system.</dd>
</dl>
</div>
<div class="subsection">
<h2 id="x4d6f64656c1e7370656369666963206e6f746573">Model-specific notes</h2> Note for X68030+MC68030 systems: Nothing special to be attended to; you can boot <span class="unix">NetBSD</span> just like as other operating systems such as Human68k and OS-9.<p>
Note for X68030/040turbo(68040 accelerator by BEEPs) systems: <span class="unix">NetBSD</span> can boot under 040 mode. It can also boot under 030 mode if you have MC68030 on the board.<p>
Note for X68000/Xellent30(68030 accelerator by TSR)+MC68030 systems: In order to boot <span class="unix">NetBSD</span>, you must choose 030 mode by using <i class="file">CH30.SYS</i>, which must reside in the battery-backuped SRAM.<p>
Note for X68000/Jupiter-X(68040/060 accelerator by FTZ-net) systems: The system must be in 040/060 processor mode.</div>
</div>
<div class="section">
<h1 id="x46494c4553">FILES</h1><dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/netbsd</i></dt>
<dd class="list-tag" style="margin-left: 20.00ex;">
system code</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/netbsd.gz</i></dt>
<dd class="list-tag" style="margin-left: 20.00ex;">
gzip-compressed system code</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/usr/mdec/xxboot_ufs</i></dt>
<dd class="list-tag" style="margin-left: 20.00ex;">
boot block (read by installboot), xx is disktype</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/usr/mdec/boot</i></dt>
<dd class="list-tag" style="margin-left: 20.00ex;">
source of /boot (can be just copied to the root directory)</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/boot</i></dt>
<dd class="list-tag" style="margin-left: 20.00ex;">
main part of the boot program</dd>
</dl>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../../2/reboot">reboot(2)</a>, <a class="link-man" href="../../8/disklabel">disklabel(8)</a>, <a class="link-man" href="../../8/halt">halt(8)</a>, <a class="link-man" href="../../8/reboot">reboot(8)</a>, <a class="link-man" href="../../8/shutdown">shutdown(8)</a></div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
August 16, 2014</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
</html>

