<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="/static/man_pages/netbsd/style.css" type="text/css" media="all">
<title>
IPFS(8)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
IPFS(8)</td>
<td class="head-vol" align="center">
System Manager's Manual</td>
<td class="head-rtitle" align="right">
IPFS(8)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>NAME</h1> ipfs &#45; saves and restores information for NAT and state tables.</div>
<div class="section">
<h1>SYNOPSIS</h1> <b>ipfs</b> [-nv] -l<p>
<b>ipfs</b> [-nv] -u<p>
<b>ipfs</b> [-nv] [ <b>&#45;d</b> &lt; <i>dirname</i>&gt; ] -R<p>
<b>ipfs</b> [-nv] [ <b>&#45;d</b> &lt; <i>dirname</i>&gt; ] -W<p>
<b>ipfs</b> [-nNSv] [ <b>&#45;f</b> &lt; <i>filename</i>&gt; ] -r<p>
<b>ipfs</b> [-nNSv] [ <b>&#45;f</b> &lt; <i>filename</i>&gt; ] -w<p>
<b>ipfs</b> [-nNSv] <b>&#45;f</b> &lt; <i>filename</i>&gt; <b>&#45;i</b> &lt;if1&gt;,&lt;if2&gt;</div>
<div class="section">
<h1>DESCRIPTION</h1>  <b>ipfs</b> allows state information created for NAT entries and rules using  <i>keep state</i> to be locked (modification prevented) and then saved to disk, allowing for the system to experience a reboot, followed by the restoration of that information, resulting in connections not being interrupted.</div>
<div class="section">
<h1>OPTIONS</h1><dl>
<dt>
<b>&#45;d</b></dt>
<dd>
Change the default directory used with <b>&#45;R</b> and <b>&#45;W</b> options for saving state information.</dd>
</dl>
<dl>
<dt>
<b>&#45;n</b></dt>
<dd>
Don't actually take any action that would affect information stored in the kernel or on disk.</dd>
</dl>
<dl>
<dt>
<b>&#45;v</b></dt>
<dd>
Provides a verbose description of what's being done.</dd>
</dl>
<dl>
<dt>
<b>&#45;i &lt;ifname1&gt;,&lt;ifname2&gt;</b></dt>
<dd>
Change all instances of interface name ifname1 in the state save file to ifname2.  Useful if you're restoring state information after a hardware reconfiguration or change.</dd>
</dl>
<dl>
<dt>
<b>&#45;N</b></dt>
<dd>
Operate on NAT information.</dd>
</dl>
<dl>
<dt>
<b>&#45;S</b></dt>
<dd>
Operate on filtering state information.</dd>
</dl>
<dl>
<dt>
<b>&#45;u</b></dt>
<dd>
Unlock state tables in the kernel.</dd>
</dl>
<dl>
<dt>
<b>&#45;l</b></dt>
<dd>
Lock state tables in the kernel.</dd>
</dl>
<dl>
<dt>
<b>&#45;r</b></dt>
<dd>
Read information in from the specified file and load it into the kernel.  This requires the state tables to have already been locked and does not change the lock once complete.</dd>
</dl>
<dl>
<dt>
<b>&#45;w</b></dt>
<dd>
Write information out to the specified file and from the kernel. This requires the state tables to have already been locked and does not change the lock once complete.</dd>
</dl>
<dl>
<dt>
<b>&#45;R</b></dt>
<dd>
Restores all saved state information, if any, from two files,  <i>ipstate.ipf</i> and <i>ipnat.ipf</i>, stored in the <i>/var/db/ipf</i> directory unless otherwise specified by the <b>&#45;d</b> option.  The state tables are locked at the beginning of this operation and unlocked once complete.</dd>
</dl>
<dl>
<dt>
<b>&#45;W</b></dt>
<dd>
Saves in-kernel state information, if any, out to two files,  <i>ipstate.ipf</i> and <i>ipnat.ipf</i>, stored in the <i>/var/db/ipf</i> directory unless otherwise specified by the <b>&#45;d</b> option.  The state tables are locked at the beginning of this operation and unlocked once complete.</dd>
</dl>
</div>
<div class="section">
<h1>FILES</h1> /var/db/ipf/ipstate.ipf<div style="height: 0.00em;">
&#160;</div>
/var/db/ipf/ipnat.ipf<div style="height: 0.00em;">
&#160;</div>
/dev/ipl<div style="height: 0.00em;">
&#160;</div>
/dev/ipstate<div style="height: 0.00em;">
&#160;</div>
/dev/ipnat</div>
<div class="section">
<h1>SEE ALSO</h1> ipf(8), ipl(4), ipmon(8), ipnat(8)</div>
<div class="section">
<h1>DIAGNOSTICS</h1> Perhaps the -W and -R operations should set the locking but rather than undo it, restore it to what it was previously.  Fragment table information is currently not saved.</div>
<div class="section">
<h1>BUGS</h1> If you find any, please send email to me at darrenr@pobox.com</div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tr>
<td class="foot-date">
</td>
<td class="foot-os" align="right">
</td>
</tr>
</table>
</div>
</body>
</html>

