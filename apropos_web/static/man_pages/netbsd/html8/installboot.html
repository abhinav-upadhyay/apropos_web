<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="../style.css" type="text/css" media="all">
<title>
INSTALLBOOT(8)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
INSTALLBOOT(8)</td>
<td class="head-vol" align="center">
System Manager's Manual</td>
<td class="head-rtitle" align="right">
INSTALLBOOT(8)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">installboot</b> &#8212; <span class="desc">install disk bootstrap software</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1><table class="synopsis">
<col style="width: 11.00ex;">
<col>
<tbody>
<tr>
<td>
installboot</td>
<td>
&#91;<span class="opt"><b class="flag">&#45;fnv</b></span>&#93; &#91;<span class="opt"><b class="flag">&#45;B</b> <i class="arg">s2bno</i></span>&#93; &#91;<span class="opt"><b class="flag">&#45;b</b> <i class="arg">s1bno</i></span>&#93; &#91;<span class="opt"><b class="flag">&#45;m</b> <i class="arg">machine</i></span>&#93; &#91;<span class="opt"><b class="flag">&#45;o</b> <i class="arg">options</i></span>&#93; &#91;<span class="opt"><b class="flag">&#45;t</b> <i class="arg">fstype</i></span>&#93; <i class="arg">filesystem</i> <i class="arg">primary</i> &#91;<span class="opt"><i class="arg">secondary</i></span>&#93;</td>
</tr>
</tbody>
</table>
<br>
<table class="synopsis">
<col style="width: 11.00ex;">
<col>
<tbody>
<tr>
<td>
installboot</td>
<td>
<b class="flag">&#45;c</b> &#91;<span class="opt"><b class="flag">&#45;fnv</b></span>&#93; &#91;<span class="opt"><b class="flag">&#45;m</b> <i class="arg">machine</i></span>&#93; &#91;<span class="opt"><b class="flag">&#45;o</b> <i class="arg">options</i></span>&#93; &#91;<span class="opt"><b class="flag">&#45;t</b> <i class="arg">fstype</i></span>&#93; <i class="arg">filesystem</i></td>
</tr>
</tbody>
</table>
<br>
<table class="synopsis">
<col style="width: 11.00ex;">
<col>
<tbody>
<tr>
<td>
installboot</td>
<td>
<b class="flag">&#45;e</b> &#91;<span class="opt"><b class="flag">&#45;fnv</b></span>&#93; &#91;<span class="opt"><b class="flag">&#45;m</b> <i class="arg">machine</i></span>&#93; &#91;<span class="opt"><b class="flag">&#45;o</b> <i class="arg">options</i></span>&#93; <i class="arg">bootstrap</i></td>
</tr>
</tbody>
</table>
</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> The <b class="name">installboot</b> utility installs and removes <span class="unix">NetBSD</span> disk bootstrap software into a file system. <b class="name">installboot</b> can install <i class="arg">primary</i> into <i class="arg">filesystem</i>, or disable an existing bootstrap in <i class="arg">filesystem</i>.<p>
On some architectures the options of an existing installed bootstrap, or those of a bootstrap file can be changed. Installing a new primary bootstrap will reset those options to default values.<p>
Generally, <span class="unix">NetBSD</span> disk bootstrap software consists of two parts: a &#8220;primary&#8221; bootstrap program usually written into the disklabel area of the file system by <b class="name">installboot</b>, and a &#8220;secondary&#8221; bootstrap program that usually resides as an ordinary file in the file system.<p>
When booting, the primary bootstrap program is loaded and invoked by the machine's PROM or BIOS. After receiving control of the system it loads and runs the secondary bootstrap program, which in turn loads and runs the kernel. The secondary bootstrap may allow control over various boot parameters passed to the kernel.<p>
Perform the following steps to make a file system bootable:<ol style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-enum">
<li class="list-enum" style="margin-top: 1.00em;">
Copy the secondary bootstrap (usually <i class="file">/usr/mdec/boot.</i><span class="symb">MACHINE</span> or <i class="file">/usr/mdec/boot</i>) to the root directory of the target file system.</li>
<li class="list-enum" style="margin-top: 1.00em;">
Use <b class="name">installboot</b> to install the primary bootstrap program (usually <i class="file">/usr/mdec/bootxx_</i><span class="symb">FSTYPE</span>) into <i class="arg">filesystem</i>.<p>
The following platforms do not require this step if the primary bootstrap already exists and the secondary bootstrap file is just being updated: <span class="symb">alpha</span>, <span class="symb">amd64</span>, <span class="symb">amiga</span>, <span class="symb">i386</span>, <span class="symb">pmax</span>, <span class="symb">sparc64</span>, and <span class="symb">vax</span>.<p>
The following platform does not require the first step since a single bootstrap file is used. The single bootstrap is installed like the primary bootstrap on other platforms: <span class="symb">next68k</span>.</li>
</ol>
<p>
The options and arguments recognized by <b class="name">installboot</b> are as follows:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;B</b> <i class="arg">s2bno</i></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
When hard-coding the blocks of <i class="arg">secondary</i> into <i class="arg">primary</i>, start from block <i class="arg">s2bno</i> instead of trying to determine the block numbers occupied by <i class="arg">secondary</i> by examining <i class="arg">filesystem</i>. If this option is supplied, <i class="arg">secondary</i> should refer to an actual secondary bootstrap (rather than the file name of the one present in <i class="arg">filesystem</i>) so that its size can be determined.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;b</b> <i class="arg">s1bno</i></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
Install <i class="arg">primary</i> at block number <i class="arg">s1bno</i> instead of the default location for the machine and file system type. [<span class="symb">alpha</span>, <span class="symb">i386/amd64 (bootxx_fat16 only)</span>, <span class="symb">pmax</span>, <span class="symb">vax</span>]</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;c</b></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
Clear (remove) any existing bootstrap instead of installing one.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;e</b></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
Edit the options of an existing bootstrap. This can be use to change the options in bootxx_xxxfs files, raw disk partitions, and the <i class="file">pxeboot_ia32.bin</i> file. With <b class="flag">&#45;v</b> and without <b class="flag">&#45;o</b>, show the current options. [<span class="symb">amd64</span>, <span class="symb">i386</span>]</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;f</b></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
Forces <b class="name">installboot</b> to ignore some errors.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;m</b> <i class="arg">machine</i></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
Use <i class="arg">machine</i> as the target machine type. The default machine is determined from <a class="link-man" href="../3/uname">uname(3)</a> and then <span class="env">MACHINE</span>. The following machines are currently supported by <b class="name">installboot</b>:<p>
<div style="margin-left: 5.00ex;" class="display">
<span class="symb">alpha</span>, <span class="symb">amd64</span>, <span class="symb">amiga</span>, <span class="symb">ews4800mips</span>, <span class="symb">hp300</span>, <span class="symb">hppa</span>, <span class="symb">i386</span>, <span class="symb">landisk</span>, <span class="symb">macppc</span>, <span class="symb">news68k</span>, <span class="symb">newsmips</span>, <span class="symb">next68k</span>, <span class="symb">pmax</span>, <span class="symb">sparc</span>, <span class="symb">sparc64</span>, <span class="symb">sun2</span>, <span class="symb">sun3</span>, <span class="symb">vax</span>, <span class="symb">x68k</span></div>
</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;n</b></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
Do not write to <i class="arg">filesystem</i>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;o</b> <i class="arg">options</i></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
Machine specific <b class="name">installboot</b> options, comma separated.<p>
Supported options are (with the machines for they are valid in brackets):<dl style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 5.00ex;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">alphasum</span></dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
[<span class="symb">alpha</span>] Recalculate and restore the Alpha checksum. This is the default for <span class="unix">NetBSD</span>/alpha.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">append</span></dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
[<span class="symb">alpha</span>, <span class="symb">pmax</span>, <span class="symb">vax</span>] Append <i class="arg">primary</i> to the end of <i class="arg">filesystem</i>, which must be a regular file in this case.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">bootconf</span></dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
[<span class="symb">amd64</span>, <span class="symb">i386</span>] (Don't) read a &#8220;boot.cfg&#8221; file.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">command=&lt;boot command&gt;</span></dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
[<span class="symb">amiga</span>] Modify the default boot command line.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">console=&lt;console name&gt;</span></dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
[<span class="symb">amd64</span>, <span class="symb">i386</span>] Set the console device, &lt;console name&gt; must be one of: pc, com0, com1, com2, com3, com0kbd, com1kbd, com2kbd or com3kbd.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">ioaddr=&lt;ioaddr&gt;</span></dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
[<span class="symb">amd64</span>, <span class="symb">i386</span>] Set the IO address to be used for the console serial port. Defaults to the IO address used by the system BIOS for the specified port.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">keymap=&lt;keymap&gt;</span></dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
[<span class="symb">amd64</span>, <span class="symb">i386</span>] Set a boot time keyboard translation map. Each character in &lt;keymap&gt; will be replaced by the one following it. For example, an argument of &#8220;zyz&#8221; would swap the lowercase letters &#8216;y&#8217; and &#8216;z&#8217;.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">modules</span></dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
[<span class="symb">amd64</span>, <span class="symb">i386</span>] (Don't) load kernel modules.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">password=&lt;password&gt;</span></dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
[<span class="symb">amd64</span>, <span class="symb">i386</span>] Set the password which must be entered before the boot menu can be accessed.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">resetvideo</span></dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
[<span class="symb">amd64</span>, <span class="symb">i386</span>] Reset the video before booting.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">speed=&lt;baud rate&gt;</span></dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
[<span class="symb">amd64</span>, <span class="symb">i386</span>] Set the baud rate for the serial console. If a value of zero is specified, then the current baud rate (set by the BIOS) will be used.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">sunsum</span></dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
[<span class="symb">alpha</span>, <span class="symb">pmax</span>, <span class="symb">vax</span>] Recalculate and restore the Sun and <span class="unix">NetBSD</span>/sparc compatible checksum. <span class="emph">Note</span>: The existing <span class="unix">NetBSD</span>/sparc disklabel should use no more than 4 partitions.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">timeout=&lt;seconds&gt;</span></dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
[<span class="symb">amd64</span>, <span class="symb">i386</span>] Set the timeout before the automatic boot begins to the given number of seconds.</dd>
</dl>
</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;t</b> <i class="arg">fstype</i></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
Use <i class="arg">fstype</i> as the type of <i class="arg">filesystem</i>. The default operation is to attempt to auto-detect this setting. The following file system types are currently supported by <b class="name">installboot</b>:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 5.00ex;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">ffs</span></dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
<span class="unix">BSD</span> Fast File System.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">raid</span></dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
Mirrored RAIDframe File System.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">raw</span></dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
&#8216;Raw&#8217; image. Note: if a platform needs to hard-code the block offset of the secondary bootstrap, it cannot be searched for on this file system type, and must be provided with <b class="flag">&#45;B</b> <i class="arg">s2bno</i>.</dd>
</dl>
</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;v</b></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
Verbose operation.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="arg">filesystem</i></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
The path name of the device or file system image that <b class="name">installboot</b> is to operate on. It is not necessary for <i class="arg">filesystem</i> to be a currently mounted file system.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="arg">primary</i></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
The path name of the &#8220;primary&#8221; boot block to install. The path name must refer to a file in a file system that is currently mounted.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="arg">secondary</i></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
The path name of the &#8220;secondary&#8221; boot block, relative to the root of the file system in the device or image specified by the <i class="arg">filesystem</i> argument. Note that this may refer to a file in a file system that is not mounted. Most systems require <i class="arg">secondary</i> to be in the &#8220;root&#8221; directory of the file system, so the leading &#8220;<i class="file">/</i>&#8221; is not necessary on <i class="arg">secondary</i>.<p>
Only certain combinations of platform (<b class="flag">&#45;m</b> <i class="arg">machine</i>) and file system type (<b class="flag">&#45;t</b> <i class="arg">fstype</i>) require that the name of the secondary bootstrap is supplied as <i class="arg">secondary</i>, so that information such as the disk block numbers occupied by the secondary bootstrap can be stored in the primary bootstrap. These are:<table style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 5.00ex;" class="list list-col">
<col style="width: 8.00ex;">
<col style="min-width: 12.00ex;">
<tbody>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
<span class="symb">Platform</span></td>
<td class="list-col" style="margin-top: 1.00em;">
<span class="symb">File systems</span></td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
macppc</td>
<td class="list-col" style="margin-top: 1.00em;">
ffs, raw</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
news68k</td>
<td class="list-col" style="margin-top: 1.00em;">
ffs, raw</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
newsmips</td>
<td class="list-col" style="margin-top: 1.00em;">
ffs, raw</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
sparc</td>
<td class="list-col" style="margin-top: 1.00em;">
ffs, raid, raw</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
sun2</td>
<td class="list-col" style="margin-top: 1.00em;">
ffs, raw</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
sun3</td>
<td class="list-col" style="margin-top: 1.00em;">
ffs, raw</td>
</tr>
</tbody>
</table>
</dd>
</dl>
<p>
<b class="name">installboot</b> exits 0 on success, and &gt;0 if an error occurs.</div>
<div class="section">
<h1 id="x454e5649524f4e4d454e54">ENVIRONMENT</h1> <b class="name">installboot</b> uses the following environment variables:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">MACHINE</span></dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
Default value for <i class="arg">machine</i>, overriding the result from <a class="link-man" href="../3/uname">uname(3)</a>.</dd>
</dl>
</div>
<div class="section">
<h1 id="x46494c4553">FILES</h1> Most <span class="unix">NetBSD</span> ports will contain variations of the following files:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="file">/usr/mdec/bootxx_</i><span class="symb">FSTYPE</span></dt>
<dd class="list-tag" style="margin-left: 24.00ex;">
Primary bootstrap for file system type <span class="symb">FSTYPE</span>. Installed into the bootstrap area of the file system by <b class="name">installboot</b>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="file">/usr/mdec/bootxx_fat16</i></dt>
<dd class="list-tag" style="margin-left: 24.00ex;">
Primary bootstrap for MS-DOS <span class="symb">FAT16</span> file systems. This differs from <b class="name">bootxx_msdos</b> in that it doesn't require the filesystem to have been initialised with any &#8216;<code class="lit">reserved sectors</code>&#8217;. It also uses the information in the &#8216;<code class="lit">Boot Parameter Block</code>&#8217; to get the media and filesytem properties. The &#8216;<code class="lit">hidden sectors</code>&#8217; field of the BPB must be the offset of the partition in the disk. This can be set using the <b class="flag">&#45;b</b> <i class="arg">s1bno</i> option.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="file">/usr/mdec/bootxx_ffsv1</i></dt>
<dd class="list-tag" style="margin-left: 24.00ex;">
Primary bootstrap for <span class="symb">FFSv1</span> file systems (the &#8216;<code class="lit">traditional</code>&#8217; file system prior to <span class="unix">NetBSD&#160;6.0</span>). Use <a class="link-man" href="../8/dumpfs">dumpfs(8)</a> to confirm the file system format is <span class="symb">FFSv1</span>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="file">/usr/mdec/bootxx_ffsv2</i></dt>
<dd class="list-tag" style="margin-left: 24.00ex;">
Primary bootstrap for <span class="symb">FFSv2</span> file systems (the default file system for some platforms as of <span class="unix">NetBSD&#160;6.0</span>). Use <a class="link-man" href="../8/dumpfs">dumpfs(8)</a> to confirm the file system format is <span class="symb">FFSv2</span>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="file">/usr/mdec/bootxx_lfsv1</i></dt>
<dd class="list-tag" style="margin-left: 24.00ex;">
Primary bootstrap for <span class="symb">LFSv1</span> file systems.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="file">/usr/mdec/bootxx_lfsv2</i></dt>
<dd class="list-tag" style="margin-left: 24.00ex;">
Primary bootstrap for <span class="symb">LFSv2</span> file systems (the default LFS version).</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="file">/usr/mdec/bootxx_msdos</i></dt>
<dd class="list-tag" style="margin-left: 24.00ex;">
Primary bootstrap for MS-DOS <span class="symb">FAT</span> file systems.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="file">/usr/mdec/bootxx_ustarfs</i></dt>
<dd class="list-tag" style="margin-left: 24.00ex;">
Primary bootstrap for <span class="symb">TARFS</span> boot images. This is used by various install media.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="file">/usr/mdec/boot.</i><span class="symb">MACHINE</span></dt>
<dd class="list-tag" style="margin-left: 24.00ex;">
Secondary bootstrap for machine type <span class="symb">MACHINE</span>. This should be installed into the file system before <b class="name">installboot</b> is run.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="file">/usr/mdec/boot</i></dt>
<dd class="list-tag" style="margin-left: 24.00ex;">
Synonym for <i class="file">/usr/mdec/boot.</i><span class="symb">MACHINE</span></dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="file">/boot.</i><span class="symb">MACHINE</span></dt>
<dd class="list-tag" style="margin-left: 24.00ex;">
Installed copy of secondary bootstrap for machine type <span class="symb">MACHINE</span>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="file">/boot</i></dt>
<dd class="list-tag" style="margin-left: 24.00ex;">
Installed copy of secondary bootstrap. Searched for by the primary bootstrap if <i class="file">/boot.</i><span class="symb">MACHINE</span> is not found.</dd>
</dl>
<div class="subsection">
<h2><span class="unix">NetBSD</span>/hppa files</h2><dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="file">/usr/mdec/xxboot</i></dt>
<dd class="list-tag" style="margin-left: 24.00ex;">
<span class="unix">NetBSD</span>/hppa primary bootstrap for <span class="symb">FFSv1</span>, <span class="symb">FFSv2</span>, <span class="symb">LFSv1</span>, and <span class="symb">LFSv2</span>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="file">/usr/mdec/cdboot</i></dt>
<dd class="list-tag" style="margin-left: 24.00ex;">
<span class="unix">NetBSD</span>/hppa primary bootstrap for ISO 9660 file system.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="file">/usr/mdec/sdboot</i></dt>
<dd class="list-tag" style="margin-left: 24.00ex;">
Synonym for <i class="file">/usr/mdec/xxboot</i></dd>
</dl>
</div>
<div class="subsection">
<h2><span class="unix">NetBSD</span>/macppc files</h2><dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="file">/usr/mdec/bootxx</i></dt>
<dd class="list-tag" style="margin-left: 24.00ex;">
<span class="unix">NetBSD</span>/macppc primary bootstrap.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="file">/usr/mdec/ofwboot</i></dt>
<dd class="list-tag" style="margin-left: 24.00ex;">
<span class="unix">NetBSD</span>/macppc secondary bootstrap.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="file">/ofwboot</i></dt>
<dd class="list-tag" style="margin-left: 24.00ex;">
Installed copy of <span class="unix">NetBSD</span>/macppc secondary bootstrap.</dd>
</dl>
</div>
<div class="subsection">
<h2><span class="unix">NetBSD</span>/next68k files</h2><dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="file">/usr/mdec/boot</i></dt>
<dd class="list-tag" style="margin-left: 24.00ex;">
<span class="unix">NetBSD</span>/next68k bootstrap.</dd>
</dl>
</div>
<div class="subsection">
<h2><span class="unix">NetBSD</span>/sparc64 files</h2><dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="file">/usr/mdec/bootblk</i></dt>
<dd class="list-tag" style="margin-left: 24.00ex;">
<span class="unix">NetBSD</span>/sparc64 primary bootstrap.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="file">/usr/mdec/ofwboot</i></dt>
<dd class="list-tag" style="margin-left: 24.00ex;">
<span class="unix">NetBSD</span>/sparc64 secondary bootstrap.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="file">/ofwboot</i></dt>
<dd class="list-tag" style="margin-left: 24.00ex;">
Installed copy of <span class="unix">NetBSD</span>/sparc64 secondary bootstrap.</dd>
</dl>
</div>
</div>
<div class="section">
<h1 id="x4558414d504c4553">EXAMPLES</h1><div class="subsection">
<h2 id="x636f6d6d6f6e">common</h2> Verbosely install the Berkeley Fast File System primary bootstrap on to disk &#8216;sd0&#8217;:<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit"><b class="cmd">installboot -v /dev/rsd0c /usr/mdec/bootxx_ffs</b></code></div>
</blockquote>
Note: the &#8220;whole disk&#8221; partition (c on some ports, d on others) is used here, since the a partition probably is already opened (mounted as <i class="file">/</i>), so <b class="name">installboot</b> would not be able to access it.<p>
Remove the primary bootstrap from disk &#8216;sd1&#8217;:<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit"><b class="cmd">installboot -c /dev/rsd1c</b></code></div>
</blockquote>
</div>
<div class="subsection">
<h2><span class="unix">NetBSD</span>/amiga</h2> Modify the command line to change the default from "netbsd -ASn2" to "netbsd -S":<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit"><b class="cmd">installboot -m amiga -o command="netbsd -S" /dev/rsd0a /usr/mdec/bootxx_ffs</b></code></div>
</blockquote>
</div>
<div class="subsection">
<h2><span class="unix">NetBSD</span>/ews4800mips</h2> Install the System V Boot File System primary bootstrap on to disk &#8216;sd0&#8217;, with the secondary bootstrap &#8216;<i class="file">/boot</i>&#8217; already present in the SysVBFS partition on the disk:<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit"><b class="cmd">installboot /dev/rsd0c /usr/mdec/bootxx_bfs</b></code></div>
</blockquote>
</div>
<div class="subsection">
<h2><span class="unix">NetBSD</span>/i386 and <span class="unix">NetBSD</span>/amd64</h2> Install new boot blocks on an existing <span class="symb">FFSv2</span> mounted root file system on &#8216;wd0&#8217;, setting the timeout to five seconds, after copying a new secondary bootstrap:<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit"><b class="cmd">cp /usr/mdec/boot /boot</b></code></div>
</blockquote>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit"><b class="cmd">installboot -v -o timeout=5 /dev/rwd0a /usr/mdec/bootxx_ffsv2</b></code></div>
</blockquote>
<div style="margin-left: 10.00ex;" class="display">
<span class="emph">Note</span>: Pre <span class="unix">NetBSD&#160;6.0</span> systems used <span class="symb">FFSv1</span> file systems on these platforms; double check with <a class="link-man" href="../8/dumpfs">dumpfs(8)</a> to be sure to use the correct secondary bootstrap.</div>
<p>
Create a bootable CD-ROM with an ISO 9660 file system for an i386 system with a serial console:<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit"><b class="cmd">mkdir cdrom</b></code></div>
</blockquote>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit"><b class="cmd">cp sys/arch/i386/compile/mykernel/netbsd cdrom/netbsd</b></code></div>
</blockquote>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit"><b class="cmd">cp /usr/mdec/boot cdrom/boot</b></code></div>
</blockquote>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit"><b class="cmd">cp /usr/mdec/bootxx_cd9660 bootxx</b></code></div>
</blockquote>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit"><b class="cmd">installboot -o console=com0,speed=19200 -m i386 -e bootxx</b></code></div>
</blockquote>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit"><b class="cmd">makefs -t cd9660 -o 'bootimage=i386;bootxx,no-emul-boot' boot.iso 	cdrom</b></code></div>
</blockquote>
<p>
Create a bootable floppy disk with an FFSv1 file system for a small custom kernel (note: bigger kernels needing multiple disks are handled with the ustarfs file system):<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit"><b class="cmd">newfs -s 1440k /dev/rfd0a</b></code></div>
</blockquote>
<div style="margin-left: 10.00ex;" class="display">
<span class="emph">Note</span>: Ignore the warnings that <a class="link-man" href="../8/newfs">newfs(8)</a> displays; it can not write a disklabel, which is not a problem for a floppy disk.</div>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit"><b class="cmd">mount /dev/fd0a /mnt</b></code></div>
</blockquote>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit"><b class="cmd">cp /usr/mdec/boot /mnt/boot</b></code></div>
</blockquote>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit"><b class="cmd">gzip -9 &lt; sys/arch/i386/compile/mykernel/netbsd &gt; /mnt/netbsd.gz</b></code></div>
</blockquote>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit"><b class="cmd">umount /mnt</b></code></div>
</blockquote>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit"><b class="cmd">installboot -v /dev/rfd0a /usr/mdec/bootxx_ffsv1</b></code></div>
</blockquote>
<p>
Create a bootable FAT file system on &#8216;wd1a&#8217;, which should have the same offset and size as a FAT primary partition in the Master Boot Record (MBR):<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit"><b class="cmd">newfs_msdos -r 16 /dev/rwd1a</b></code></div>
</blockquote>
<div style="margin-left: 10.00ex;" class="display">
<span class="emph">Notes</span>: The <b class="flag">&#45;r</b> <i class="arg">16</i> is to reserve space for the primary bootstrap. <a class="link-man" href="../8/newfs_msdos">newfs_msdos(8)</a> will display an &#8220;MBR type&#8221; such as &#8216;<code class="lit">1</code>&#8217;, &#8216;<code class="lit">4</code>&#8217;, or &#8216;<code class="lit">6</code>&#8217;; the MBR partition type of the appropriate primary partition should be changed to this value.</div>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit"><b class="cmd">mount -t msdos /dev/wd1a /mnt</b></code></div>
</blockquote>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit"><b class="cmd">cp /usr/mdec/boot /mnt/boot</b></code></div>
</blockquote>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit"><b class="cmd">cp path/to/kernel /mnt/netbsd</b></code></div>
</blockquote>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit"><b class="cmd">umount /mnt</b></code></div>
</blockquote>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit"><b class="cmd">installboot -t raw /dev/rwd1a /usr/mdec/bootxx_msdos</b></code></div>
</blockquote>
<p>
Make the existing FAT16 filesystem on &#8216;sd0e&#8217; bootable. This can be used to make USB memory bootable provided it has 512 byte sectors and that the manufacturer correctly initialised the file system.<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit"><b class="cmd">mount -t msdos /dev/sd0e /mnt</b></code></div>
</blockquote>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit"><b class="cmd">cp /usr/mdec/boot /mnt/boot</b></code></div>
</blockquote>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit"><b class="cmd">cp path/to/kernel /mnt/netbsd</b></code></div>
</blockquote>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit"><b class="cmd">umount /mnt</b></code></div>
</blockquote>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit"><b class="cmd">installboot /dev/rsd0e /usr/mdec/bootxx_fat16</b></code></div>
</blockquote>
It may also be necessary to use <b class="name">fdisk</b> to make the device itself bootable.<p>
Switch the existing installed bootstrap to use a serial console without reinstalling or altering other options such as timeout.<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit"><b class="cmd">installboot -e -o console=com0 /dev/rwd0a</b></code></div>
</blockquote>
</div>
<div class="subsection">
<h2><span class="unix">NetBSD</span>/macppc</h2> Note the <b class="name">installboot</b> utility is only required for macppc machines with OpenFirmware version 2 to boot. OpenFirmware 3 cannot load bootblocks specified in the Apple partition map.<p>
Install the Berkeley Fast File System primary bootstrap on to disk &#8216;wd0&#8217;:<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit"><b class="cmd">installboot /dev/rwd0c /usr/mdec/bootxx /ofwboot</b></code></div>
</blockquote>
<p>
The secondary <span class="unix">NetBSD</span>/macppc bootstrap is located in <i class="file">/usr/mdec/ofwboot</i>.<p>
The primary bootstrap requires the raw <i class="file">ofwboot</i> for the secondary bootstrap, not <i class="file">ofwboot.xcf</i>, which is used for the OpenFirmware to load kernels.</div>
<div class="subsection">
<h2><span class="unix">NetBSD</span>/next68k</h2> Install the bootstrap on to disk &#8216;sd0&#8217;:<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit"><b class="cmd">installboot /dev/rsd0c /usr/mdec/boot</b></code></div>
</blockquote>
</div>
<div class="subsection">
<h2><span class="unix">NetBSD</span>/pmax</h2> Install the Berkeley Fast File System primary bootstrap on to disk &#8216;sd0&#8217;:<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit"><b class="cmd">installboot /dev/rsd0c /usr/mdec/bootxx_ffs</b></code></div>
</blockquote>
<p>
<span class="unix">NetBSD</span>/pmax requires that this file system starts at block 0 of the disk.<p>
Install the ISO 9660 primary bootstrap in the file <i class="file">/tmp/cd-image</i>:<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit"><b class="cmd">installboot -m pmax /tmp/cd-image /usr/mdec/bootxx_cd9660</b></code></div>
</blockquote>
<p>
Make an ISO 9660 filesystem in the file <i class="file">/tmp/cd-image</i> and install the ISO 9660 primary bootstrap in the filesystem, where the source directory for the ISO 9660 filesystem contains a kernel, the primary bootstrap <i class="file">bootxx_cd9660</i> and the secondary bootstrap <i class="file">boot.pmax</i>:<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit"><b class="cmd">mkisofs -o /tmp/cd-image -a -l -v iso-source-dir</b></code></div>
</blockquote>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit">...</code></div>
</blockquote>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit">48 51 iso-source-dir/bootxx_cd9660</code></div>
</blockquote>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit">...</code></div>
</blockquote>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit"><b class="cmd">installboot -b `expr 48 &#92;* 4` /tmp/cd-image /usr/mdec/bootxx_cd9660</b></code></div>
</blockquote>
</div>
<div class="subsection">
<h2><span class="unix">NetBSD</span>/sparc</h2> Install the Berkeley Fast File System primary bootstrap on to disk &#8216;sd0&#8217;, with the secondary bootstrap &#8216;<i class="file">/boot</i>&#8217; already present:<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit"><b class="cmd">installboot /dev/rsd0c /usr/mdec/bootxx /boot</b></code></div>
</blockquote>
</div>
<div class="subsection">
<h2><span class="unix">NetBSD</span>/sparc64</h2> Install the primary bootstrap on to disk &#8216;sd0&#8217;:<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit"><b class="cmd">installboot /dev/rsd0c /usr/mdec/bootblk</b></code></div>
</blockquote>
<p>
The secondary <span class="unix">NetBSD</span>/sparc64 bootstrap is located in <i class="file">/usr/mdec/ofwboot</i>.</div>
<div class="subsection">
<h2><span class="unix">NetBSD</span>/sun2 and <span class="unix">NetBSD</span>/sun3</h2> Install the Berkeley Fast File System primary bootstrap on to disk &#8216;sd0&#8217;, with the secondary bootstrap &#8216;<i class="file">/boot</i>&#8217; already present:<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit"><b class="cmd">installboot /dev/rsd0c /usr/mdec/bootxx /boot</b></code></div>
</blockquote>
</div>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../3/uname">uname(3)</a>, <a class="link-man" href="../8/boot">boot(8)</a>, <a class="link-man" href="../8/disklabel">disklabel(8)</a>, <a class="link-man" href="../8/dumpfs">dumpfs(8)</a>, <a class="link-man" href="../8/fdisk">fdisk(8)</a>, <a class="link-man" href="../8/pxeboot">pxeboot(8)</a></div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> This implementation of <b class="name">installboot</b> appeared in <span class="unix">NetBSD&#160;1.6</span>.</div>
<div class="section">
<h1 id="x415554484f5253">AUTHORS</h1> <span class="author"></span>The machine independent portion of this implementation of <b class="name">installboot</b> was written by <span class="author">Luke Mewburn</span>. The following people contributed to the various machine dependent back-ends: <span class="author">Simon Burge</span> (pmax), <span class="author">Chris Demetriou</span> (alpha), <span class="author">Matthew Fredette</span> (sun2, sun3), <span class="author">Matthew Green</span> (sparc64), <span class="author">Ross Harvey</span> (alpha), <span class="author">Michael Hitch</span> (amiga), <span class="author">Paul Kranenburg</span> (sparc), <span class="author">David Laight</span> (i386), <span class="author">Christian Limpach</span> (next68k), <span class="author">Luke Mewburn</span> (macppc), <span class="author">Matt Thomas</span> (vax), <span class="author">Izumi Tsutsui</span> (news68k, newsmips), and <span class="author">UCHIYAMA Yasushi</span> (ews4800mips).</div>
<div class="section">
<h1 id="x42554753">BUGS</h1> There are not currently primary bootstraps to support all file systems types which are capable of being the root file system.<p>
If a disk has been converted from <span class="symb">FFS</span> to <span class="symb">RAID</span> without the contents of the disk erased, then the original <span class="symb">FFS</span> installation may be auto-detected instead of the <span class="symb">RAID</span> installation. In this case, the <b class="flag">&#45;t</b> <i class="arg">raid</i> option must be provided.<div class="subsection">
<h2><span class="unix">NetBSD</span>/alpha</h2> The <span class="unix">NetBSD</span>/alpha primary bootstrap program can only load the secondary bootstrap program from file systems starting at the beginning (block 0) of disks. Similarly, the secondary bootstrap program can only load kernels from file systems starting at the beginning of disks.<p>
The size of primary bootstrap programs is restricted to 7.5KB, even though some file systems (e.g., ISO 9660) are able to accommodate larger ones.</div>
<div class="subsection">
<h2><span class="unix">NetBSD</span>/hp300</h2> The disk must have a boot partition large enough to hold the bootstrap code. Currently the primary bootstrap must be a LIF format file.</div>
<div class="subsection">
<h2><span class="unix">NetBSD</span>/i386 and <span class="unix">NetBSD</span>/amd64</h2> The bootstrap must be installed in the <span class="unix">NetBSD</span> partition that starts at the beginning of the mbr partition. If that is a valid filesystem and contains the <i class="file">/boot</i> program then it will be used as the root filesystem, otherwise the &#8216;a&#8217; partition will be booted.<p>
The size of primary bootstrap programs is restricted to 8KB, even though some file systems (e.g., ISO 9660) are able to accommodate larger ones.</div>
<div class="subsection">
<h2><span class="unix">NetBSD</span>/macppc</h2> Due to restrictions in <b class="name">installboot</b> and the secondary bootstrap implementation, file systems where kernels exist must start at the beginning of disks.<p>
Currently, <b class="name">installboot</b> doesn't recognize an existing Apple partition map on the disk and always writes a faked map to make disks bootable.<p>
The <span class="unix">NetBSD</span>/macppc bootstrap program can't load kernels from <span class="symb">FFSv2</span> partitions.</div>
<div class="subsection">
<h2><span class="unix">NetBSD</span>/next68k</h2> The size of bootstrap programs is restricted to the free space before the file system at the beginning of the disk minus 8KB.</div>
<div class="subsection">
<h2><span class="unix">NetBSD</span>/pmax</h2> The <span class="unix">NetBSD</span>/pmax secondary bootstrap program can only load kernels from file systems starting at the beginning of disks.<p>
The size of primary bootstrap programs is restricted to 7.5KB, even though some file systems (e.g., ISO 9660) are able to accommodate larger ones.</div>
<div class="subsection">
<h2><span class="unix">NetBSD</span>/sun2 and <span class="unix">NetBSD</span>/sun3</h2> The <span class="unix">NetBSD</span>/sun2 and <span class="unix">NetBSD</span>/sun3 secondary bootstrap program can only load kernels from file systems starting at the beginning of disks.</div>
<div class="subsection">
<h2><span class="unix">NetBSD</span>/vax</h2> The <span class="unix">NetBSD</span>/vax secondary bootstrap program can only load kernels from file systems starting at the beginning of disks.<p>
The size of primary bootstrap programs is restricted to 7.5KB, even though some file systems (e.g., ISO 9660) are able to accommodate larger ones.</div>
</div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
March 10, 2012</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
</html>

