<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="../style.css" type="text/css" media="all">
<title>
COMPAT_SUNOS(8)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
COMPAT_SUNOS(8)</td>
<td class="head-vol" align="center">
System Manager's Manual</td>
<td class="head-rtitle" align="right">
COMPAT_SUNOS(8)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">compat_sunos</b> &#8212; <span class="desc">setup procedure for m68k, sparc and sparc64 architectures</span></div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> <span class="unix">NetBSD</span>/sparc64, <span class="unix">NetBSD</span>/sparc and some of the <span class="unix">NetBSD</span>/m68k architectures can run SunOS executables. Most executables will work.<p>
The exceptions include programs that use the SunOS kvm library, and various system calls, <b class="fname">ioctl</b>()'s, or kernel semantics that are difficult to emulate. The number of reasons why a program might fail to work is (thankfully) longer than the number of programs that fail to run.<p>
Static executables will normally run without any extra setup. This procedure details the directories and files that must be set up to allow dynamically linked executables to work.<p>
The files you need are on your SunOS machine. You need to worry about the legal issues of ensuring that you have a right to use the required files on your machine. On your <span class="unix">NetBSD</span> machine, do the following:<ol style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 3.00ex;" class="list list-enum">
<li class="list-enum" style="margin-top: 1.00em;">
<code class="lit">mkdir -p /emul/sunos/usr/lib /emul/sunos/usr/5lib</code></li>
<li class="list-enum" style="margin-top: 1.00em;">
<code class="lit">cp SunOS:/usr/lib/lib*.so.*.* NetBSD:/emul/sunos/usr/lib</code></li>
<li class="list-enum" style="margin-top: 1.00em;">
<code class="lit">cp SunOS:/usr/5lib/lib*.so.*.* NetBSD:/emul/sunos/usr/5lib</code></li>
<li class="list-enum" style="margin-top: 1.00em;">
<code class="lit">cp SunOS:/usr/lib/ld.so NetBSD:/emul/sunos/usr/lib/ld.so</code></li>
<li class="list-enum" style="margin-top: 1.00em;">
If you ever expect to use YP, you will want to create a link:<pre style="margin-left: 0.00ex;" class="lit display">
ln -s /var/run/ypbind.lock /etc/ypbind.lock</pre>
</li>
</ol>
<p>
Alternatively, you can use an NFS mount to accomplish the same effect. On your <span class="unix">NetBSD</span> machine, do the following:<ol style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 3.00ex;" class="list list-enum">
<li class="list-enum" style="margin-top: 1.00em;">
<code class="lit">mkdir -p /emul/sunos/usr</code></li>
<li class="list-enum" style="margin-top: 1.00em;">
<code class="lit">mount SunOS:/usr /emul/sunos/usr</code></li>
</ol>
<p>
This will place the SunOS libraries on your <span class="unix">NetBSD</span> machine in a location where the SunOS compatibility code will look for first, where they do not conflict with the standard libraries.</div>
<div class="section">
<h1 id="x4e4f544553">NOTES</h1> When using <b class="name">compat_sunos</b> on <span class="unix">NetBSD</span>/sparc64, the <span class="define">COMPAT_NETBSD32</span> option must also be used.</div>
<div class="section">
<h1 id="x42554753">BUGS</h1> A list of things which fail to work in compatibility mode should be here.<p>
SunOS executables can not handle directory offset cookies &gt; 32 bits. Should such an offset occur, you will see the message &#8220;sunos_getdents: dir offset too large for emulated program&#8221;. Currently, this can only happen on NFS mounted filesystems, mounted from servers that return offsets with information in the upper 32 bits. These errors should rarely happen, but can be avoided by mounting this filesystem with offset translation enabled. See the <b class="flag">&#45;X</b> option to <a class="link-man" href="../8/mount_nfs">mount_nfs(8)</a>. The <b class="flag">&#45;2</b> option to <a class="link-man" href="../8/mount_nfs">mount_nfs(8)</a> will also have the desired effect, but is less preferable.<p>
The <span class="unix">NetBSD</span>/sparc64 support is less complete than the other ports.</div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
February 3, 2001</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
</html>

