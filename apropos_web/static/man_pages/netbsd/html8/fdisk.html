<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="../style.css" type="text/css" media="all">
<title>
FDISK(8)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
FDISK(8)</td>
<td class="head-vol" align="center">
System Manager's Manual</td>
<td class="head-rtitle" align="right">
FDISK(8)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">fdisk</b> &#8212; <span class="desc">MS-DOS partition maintenance program</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1><table class="synopsis">
<col style="width: 5.00ex;">
<col>
<tbody>
<tr>
<td>
fdisk</td>
<td>
&#91;<span class="opt"><b class="flag">&#45;aBFfIiSuv</b></span>&#93; &#91;<span class="opt"><b class="flag">&#45;0</b> | <b class="flag">&#45;1</b> | <b class="flag">&#45;2</b> | <b class="flag">&#45;3</b> | <b class="flag">&#45;E</b> <i class="arg">number</i> &#91;<span class="opt"><b class="flag">&#45;s</b> &#91;<span class="opt"><i class="arg">id</i></span>&#93;&#91;<span class="opt">/&#91;<span class="opt"><i class="arg">start</i></span>&#93;&#91;<span class="opt">/&#91;<span class="opt"><i class="arg">size</i></span>&#93;&#91;<span class="opt">/&#91;<span class="opt"><i class="arg">bootmenu</i></span>&#93;</span>&#93;</span>&#93;</span>&#93;</span>&#93;</span>&#93; &#91;<span class="opt"><b class="flag">&#45;r</b> <i class="arg">file</i> | <b class="flag">&#45;w</b> <i class="arg">file</i></span>&#93; &#91;<span class="opt"><b class="flag">&#45;A</b> <i class="arg">ptn_alignment</i>&#91;<i class="arg">/ptn_0_offset</i>&#93;</span>&#93; &#91;<span class="opt"><b class="flag">&#45;b</b> <i class="arg">cylinders/heads/sectors</i></span>&#93; &#91;<span class="opt"><b class="flag">&#45;c</b> <i class="arg">bootcode</i></span>&#93; &#91;<span class="opt"><b class="flag">&#45;T</b> <i class="arg">disktype</i></span>&#93; &#91;<span class="opt"><b class="flag">&#45;t</b> <i class="arg">disktab</i></span>&#93; &#91;<span class="opt"><b class="flag">&#45;z</b> <i class="arg">sectorsize</i></span>&#93; &#91;<span class="opt"><i class="arg">device</i></span>&#93;</td>
</tr>
</tbody>
</table>
<br>
<table class="synopsis">
<col style="width: 5.00ex;">
<col>
<tbody>
<tr>
<td>
fdisk</td>
<td>
<b class="flag">&#45;l</b></td>
</tr>
</tbody>
</table>
</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> The <b class="name">fdisk</b> program is used to display or update the <span class="emph">master boot record</span> or <span class="emph">MBR</span> in the first sector (sector 0) of a disk that uses the MBR style of partitioning. The following <span class="unix">NetBSD</span> ports use this style of disk partitioning: amd64, arc, bebox, cobalt, hpcarm, hpcmips, hpcsh, i386, macppc, mvmeppc, netwinder, ofppc, playstation2, and prep.<p>
The MBR contains bootable code, a partition table, an indication of which partition is &#8216;active&#8217;, and (optionally, depending on the boot code) a menu for selecting a partition to be booted. There can be at most 4 partitions defined in sector 0, one of which can be an extended partition which can be split into any number of sub-partitions (then called logical partitions).<p>
The boot code in the MBR is usually invoked by the BIOS or firmware, and the MBR passes control to the next stage boot code stored in the first sector of the partition to be booted (the <span class="emph">partition boot record</span> or <span class="emph">PBR</span>).<p>
After booting, <span class="unix">NetBSD</span> does not use the partitioning done by <b class="name">fdisk</b>, instead it uses a <span class="unix">NetBSD</span> disklabel saved in sector 1 of the <span class="unix">NetBSD</span> partition. See <a class="link-man" href="../8/mbrlabel">mbrlabel(8)</a> for a way of using information from the MBR to construct a <span class="unix">NetBSD</span> disklabel.<p>
The standard MBR boot code will only boot the &#8216;active&#8217; partition. However, <span class="unix">NetBSD</span> contains additional boot programs which allow the user to interactively select which of the partitions to boot. The &#8216;mbr_ext&#8217; code will also boot <span class="unix">NetBSD</span> from an extended partition but will not work on old systems that do not support LBA reads, the &#8216;mbr_com0&#8217; and &#8216;mbr_com0_9600&#8217; will read and write from a serial port. At the start the <b class="name">fdisk</b> program will determine whether the disk sector 0 is valid as a boot sector. (This is determined by checking the magic number.) If not, <b class="name">fdisk</b> will initialise the boot code as well as the partition table. During this, all four partitions will be marked empty.<p>
The flags <b class="flag">&#45;a</b>, <b class="flag">&#45;i</b> or <b class="flag">&#45;u</b> are used to indicate that the partition data is to be updated. The <b class="name">fdisk</b> program will enter an interactive conversational mode. This mode is designed not to change any data unless you explicitly tell it to; <b class="name">fdisk</b> selects defaults for its questions to guarantee that behaviour.<p>
If partition data is going to be updated and the disk carries GUID Partition Tables, <b class="name">fdisk</b> will remove both primary and backup GPT headers from the disk. See <a class="link-man" href="../8/gpt">gpt(8)</a> for information on how to manipulate GUID Partition Tables.<p>
<b class="name">fdisk</b> will calculate the correct <span class="emph">cylinder</span>, <span class="emph">head</span>, and <span class="emph">sector</span> values for any partition you edit. If you specify <b class="flag">&#45;v</b> you will be asked whether you want to specify them yourself.<p>
Finally, when all the data for the first sector has been accumulated, <b class="name">fdisk</b> will ask if you really want to write the new partition table. Only if you reply affirmatively to this question will <b class="name">fdisk</b> write anything to the disk.<p>
Available options:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;0</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Specify partition slot 0 to be printed or updated.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;1</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Specify partition slot 1 to be printed or updated.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;2</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Specify partition slot 2 to be printed or updated.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;3</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Specify partition slot 3 to be printed or updated.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;A</b> <i class="arg">ptn_alignment</i>&#91;<i class="arg">/ptn_0_offset</i>&#93;</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Specify the alignment for all partitions and optionally the offset for the first partition of the disk and of logical partitions. If <i class="arg">ptn_alignment</i> is specified and <i class="arg">ptn_0_offset</i> is not specified, then the offset is set to the alignment. If <b class="flag">&#45;A</b> isn't specified, then the alignment of the first partition is inspected. If it ends on a 2048 sector boundary, then the alignment is set to 2048, if the start is a power of 2 less than, or equal to 2048 then the offset is set to the start sector. If the first partition isn't defined then the alignment and offset for disks larger than 128GB is set to 2048 (1MB). In all other cases the alignment default to a cylinder and the offset to a track (both using the BIOS geometry). The 1MB alignment is the same as that used by recent windows versions.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;a</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Change the active partition. In interactive mode this question will be asked after the partitions have been processed.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;B</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
On an i386 or amd64 system, interactively update the boot selector settings. (The boot selector permits the user to interactively select the boot partition, and thus which operating system is run, at system boot time; see <a class="link-man" href="../8/mbr">mbr(8)</a> for more information.)</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;b</b> <i class="arg">cylinders/heads/sectors</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Specify the BIOS geometry parameters for <i class="arg">cylinders</i>, <i class="arg">heads</i>, and <i class="arg">sectors</i>. It is used only in conjunction with the <b class="flag">&#45;u</b> flag. If not specified the BIOS geometry will be obtained using sysctl (i386 and amd64) or by solving the simultaenous equations from the existing partition information. If that fails then either the geometry from the disklabel or 63 sectors and 16 heads is used. For modern disks larger than about 8GB, and where the BIOS is configured to use LBA-Assisted translation, a setting of <b class="flag">&#45;b</b> <i class="arg">1023/255/63</i> is likely to work.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;c</b> <i class="arg">bootcode</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Specify the filename that <b class="name">fdisk</b> should read the bootcode from. If the name of a directory is specified, then <b class="name">fdisk</b> will look for files with the default names in that directory. The default is to read from <i class="file">/usr/mdec/mbr</i>, <i class="file">/usr/mdec/mbr_bootsel</i> or <i class="file">/usr/mdec/mbr_ext</i> depending on whether <i class="arg">bootmenu</i> was specified for any partitions on an i386 machine, and leave the bootcode empty for other machines.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;E</b> <i class="arg">number</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Specify logical partition <i class="arg">number</i> to be printed or updated. If the specified logical partition doesn't exist on updating partition data an additional logical partition will be created.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;F</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Indicate that <i class="arg">device</i> is a regular file. Unless the geometry of <i class="arg">device</i> is told to <b class="name">fdisk</b> by <b class="flag">&#45;T</b> <i class="arg">disktype</i>, <b class="name">fdisk</b> will count the 512-byte sectors in <i class="arg">device</i> and produce a fake geometry. If <i class="arg">device</i> is a regular file, <b class="flag">&#45;F</b> will be used implicitly.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;f</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Run <b class="name">fdisk</b> in a non-interactive mode. In this mode, you can only change the disk parameters by using the <b class="flag">&#45;b</b> flag. This is provided only so scripts or other programs may use <b class="name">fdisk</b> as part of an automatic installation process.<p>
Using the <b class="flag">&#45;f</b> flag with <b class="flag">&#45;u</b> makes it impossible to specify the starting and ending <i class="arg">cylinder</i>, <i class="arg">head</i>, and <i class="arg">sector</i> fields (only <i class="arg">start</i> and <i class="arg">size</i> can be specified by <b class="flag">&#45;s</b> option). They will be automatically computed using the BIOS geometry.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;I</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Ignore errors from overlapping partitions. Some devices (cameras CHDK) require overlapping partitions to support bigger than 4GB cards. The <b class="flag">&#45;I</b> flag ignores overlapping error checks and does not fix them, allowing these incorrect configurations to be used.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;i</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Explicitly request initialisation of the master boot code (similar to what <b class="cmd">fdisk /mbr</b> does under MS-DOS), even if the magic number in the first sector is ok. The partition table is left alone by this (but see above).</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;l</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Lists known <span class="emph">sysid</span> values and exit.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;r</b> <i class="arg">file</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Read the boot record from file <i class="arg">file</i> instead of the specified disk. The geometry information used is still that of the disk volume. Any changes are written back to the file.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;S</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
When used with no other flags print a series of <i class="file">/bin/sh</i> commands for setting variables to the partition information. This could be used by installation scripts.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;s</b> &#91;<span class="opt"><i class="arg">id</i></span>&#93;&#91;<span class="opt">/&#91;<span class="opt"><i class="arg">start</i></span>&#93;&#91;<span class="opt">/&#91;<span class="opt"><i class="arg">size</i></span>&#93;&#91;<span class="opt">/&#91;<span class="opt"><i class="arg">bootmenu</i></span>&#93;</span>&#93;</span>&#93;</span>&#93;</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Specify the partition <i class="arg">id</i>, <i class="arg">start</i>, <i class="arg">size</i>, and <i class="arg">bootmenu</i>. If the optional arguments are not provided, they stay as before or use the same defaults as the interactive mode, if new. This flag requires the use of a partition selection flag (<b class="flag">&#45;0</b>, <b class="flag">&#45;1</b>, <b class="flag">&#45;2</b>, <b class="flag">&#45;3</b>, or <b class="flag">&#45;E</b> <i class="arg">number</i>).</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;T</b> <i class="arg">disktype</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Use the disklabel <i class="arg">disktype</i> instead of the disklabel on <i class="arg">device</i>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;t</b> <i class="arg">disktab</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Read <i class="arg">disktype</i> from the named <a class="link-man" href="../5/disktab">disktab(5)</a> file instead of from <i class="file">/etc/disktab</i>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;u</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Update partition data, including <span class="emph">id</span>, <span class="emph">start</span>, and <span class="emph">size</span>. Unless <b class="flag">&#45;f</b> option (non-interactive mode) is specified, <b class="name">fdisk</b> will display the partitions and interactively ask which one you want to edit. <b class="name">fdisk</b> will step through each field showing the old value and asking for a new one. The <span class="emph">start</span> and <span class="emph">size</span> can be specified in blocks (NN), cylinders (NNc or NNcyl), megabytes (NNm or NNMB), or gigabytes (NNg or NNGB), values in megabytes and gigabytes will be rounded to the nearest cylinder boundary. The <span class="emph">size</span> may be specified as <span class="emph">$</span> in which case the partition will extend to the end of the available free space.<p>
In a non-interactive mode (specified by <b class="flag">&#45;f</b> option), partition data should be specified by <b class="flag">&#45;s</b> option. A partition selection option (<b class="flag">&#45;0</b>, <b class="flag">&#45;1</b>, <b class="flag">&#45;2</b>, <b class="flag">&#45;3</b>, or <b class="flag">&#45;E</b> <i class="arg">number</i>) should also be specified to select a partition slot to be updated.<p>
<b class="name">fdisk</b> will not allow you to create partitions which overlap. If <b class="flag">&#45;u</b> and <b class="flag">&#45;s</b> are specified in a non-interactive mode then the details of the specified partition will be changed. Any other partitions which overlap the requested part of the disk will be silently deleted.<p>
If <span class="emph">bootmenu</span> is specified for any partition <b class="name">fdisk</b> will determine whether the installed boot code supports the bootselect code, if it doesn't you will be asked whether you want to install the required boot code. To remove a <span class="emph">bootmenu</span> label, simply press &#60;space&#62; followed by &#60;return&#62;.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;v</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Be more verbose, specifying <b class="flag">&#45;v</b> more than once may increase the amount of output.<p>
Using <b class="flag">&#45;v</b> with <b class="flag">&#45;u</b> allows the user to change more parameters than normally permitted.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;w</b> <i class="arg">file</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Write the modified partition table to file <i class="arg">file</i> instead of the disk.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;z</b> <i class="arg">sectorsize</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Specify a sector size other than 512, for devices that only support larger sector sizes. The sector size needs to be a power of two greater than 512.</dd>
</dl>
<p>
When called with no arguments, it prints the partition table. An example follows:<p>
<pre style="margin-left: 0.00ex;" class="lit display">
    Disk: /dev/rwd0d 
    NetBSD disklabel disk geometry: 
    cylinders: 16383, heads: 16, sectors/track: 63 (1008 sectors/cylinder) 
    total sectors: 40032696 
 
    BIOS disk geometry: 
    cylinders: 1023, heads: 255, sectors/track: 63 (16065 sectors/cylinder) 
    total sectors: 40032696 
 
    Partition table: 
    0: NetBSD (sysid 169) 
	bootmenu: net 1.5. 
	start 4209030, size 8289540 (4048 MB, Cyls 262-778), Active 
    1: Primary DOS with 32 bit FAT (sysid 11) 
	bootmenu: win98 
	start 63, size 4208967 (2055 MB, Cyls 0-262) 
    2: NetBSD (sysid 169) 
	bootmenu: current 
	start 32515560, size 7517136 (3670 MB, Cyls 2024-2491/234/40) 
    3: Ext. partition - LBA (sysid 15) 
	start 12498570, size 20016990 (9774 MB, Cyls 778-2024) 
    Extended partition table: 
    E0: NetBSD (sysid 169) 
	bootmenu: test 
	start 12498633, size 12305727 (6009 MB, Cyls 778-1544) 
    E1: Primary DOS with 32 bit FAT (sysid 11) 
	start 24804423, size 4096512 (2000 MB, Cyls 1544-1799) 
    E2: Primary DOS with 32 bit FAT (sysid 11) 
	start 28900998, size 3614562 (1765 MB, Cyls 1799-2024) 
    Bootselector enabled, infinite timeout. 
    First active partition: 0</pre>
<p>
This example disk is divided into four partitions, the last of which is an extended partition. The logical partitions of the extended partition are also shown. In this case there is no free space in either the disk or in the extended partition.<p>
The various fields in each partition entry are:<div style="margin-left: 4.00ex;" class="display">
<span class="emph">ptn_number</span>: <span class="emph">id_name</span> (sysid <span class="emph">id_number</span>)</div>
<div style="margin-left: 8.00ex;" class="display">
bootmenu: <span class="emph">bootmenu</span><div style="height: 0.00em;">
&#160;</div>
start <span class="emph">start</span>, size <span class="emph">size</span> (<span class="emph">MB</span> MB, Cyls <span class="emph">first</span>-<span class="emph">next</span>) &#91;<span class="opt">, Active</span>&#93;</div>
<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="emph">ptn_number</span></dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
is the number of the partition.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="emph">id_name</span></dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
is the name of the filesystem type or operating system that uses this partition.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="emph">id_number</span></dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
is the number that identifies the partition type. 169 decimal is used for <span class="unix">NetBSD</span> partitions, 15 decimal to create an extended partition and 0 to mark a partition as unused. Use <b class="name">fdisk</b> <b class="flag">&#45;l</b> to list the known partition types.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="emph">bootmenu</span></dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
is the menu prompt output by the interactive boot code for this partition. This line is omitted if the prompt is not defined.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="emph">start</span>, <span class="emph">size</span></dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
are the start address and size of the partition in sectors.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="emph">MB</span></dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
is the size of the partition in megabytes.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="emph">first</span>, <span class="emph">next</span></dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
are the bounds of this partition displayed as cylinder/head/sector. If the partition starts (or ends) on a cylinder boundary the head and sector values are omitted. If <b class="flag">&#45;v</b> is not specified the start of logical partitions and the first partition on the disk are rounded down to include the mandatory red tape in the preceding track.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
Active</dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
is output if this is the active partition.</dd>
</dl>
<p>
If the <b class="flag">&#45;v</b> flag is specified, the beginning and end of each partition are also displayed as follows:<div style="margin-left: 4.00ex;" class="display">
beg: cylinder <span class="emph">cylinder</span>, head <span class="emph">head</span>, sector <span class="emph">sector</span><div style="height: 0.00em;">
&#160;</div>
end: cylinder <span class="emph">cylinder</span>, head <span class="emph">head</span>, sector <span class="emph">sector</span></div>
<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="emph">cylinder</span>, <span class="emph">head</span>, <span class="emph">sector</span></dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
are the beginning or ending address of a partition.<p>
<span class="emph">Note:</span> these numbers are read from the bootblock, so are the values calculated by a previous run of <b class="name">fdisk</b>.</dd>
</dl>
<p>
<b class="name">fdisk</b> attempts to check whether each partition is bootable, by checking the magic number and some other characteristics of the first sector of each partition (the PBR). If the partition does not appear to be bootable, <b class="name">fdisk</b> will print a line containing &#8220;PBR is not bootable&#8221; followed by an error message. If the partition is bootable, and if the <b class="flag">&#45;v</b> flag is specified, <b class="name">fdisk</b> will print &#8220;PBR appears to be bootable&#8221;. If the <b class="flag">&#45;v</b> flag is specified more than once, <b class="name">fdisk</b> will print the heading &#8220;Information from PBR:&#8221; followed by one or more lines of information gleaned from the PBR; this additional information may be incorrect or misleading, because different operating systems use different PBR formats. Note that, even if no errors are reported, an attempt to boot from the partition might fail. <span class="unix">NetBSD</span> partitions may be made bootable using <a class="link-man" href="../8/installboot">installboot(8)</a>.</div>
<div class="section">
<h1 id="x4e4f544553">NOTES</h1> This program is only available (and useful) on systems with PC-platform-style MBR partitioning.<p>
Traditionally the partition boundaries should be on cylinder boundaries using the BIOS geometry, with the exception of the first partition, which traditionally begins in the second track of the first cylinder (cylinder 0, head 1, sector 1). Although the BIOS geometry is typically different from the geometry reported by the drive, neither will match the actual physical geometry for modern disks (the actual geometry will vary across the disk). Keeping the partition boundaries on cylinder boundaries makes partitioning a driver easier as only relatively small numbers need be entered.<p>
The automatic calculation of the starting cylinder and other parameters uses a set of figures that represent what the BIOS thinks is the geometry of the drive. The default values should be correct for the system on which <b class="name">fdisk</b> is run; however, if you move the disk to a different system, the BIOS of that system might use a different geometry translation.<p>
If you run the equivalent of <b class="name">fdisk</b> on a different operating system then the <i class="arg">bootmenu</i> strings associated with extended partitions may be lost.<p>
Editing an existing partition is risky, and may cause you to lose all the data in that partition.<p>
You should run this program interactively once or twice to see how it works. This is completely safe as long as you answer the last question in the negative. You can also specify <b class="flag">&#45;w</b> <i class="arg">file</i> to write the output to a file and later specify <b class="flag">&#45;r</b> <i class="arg">file</i> to read back the updated information. This can be done without having write access to the disk volume.</div>
<div class="section">
<h1 id="x46494c4553">FILES</h1><dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/usr/mdec/mbr</i></dt>
<dd class="list-tag" style="margin-left: 21.00ex;">
Default location of i386 bootcode</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/usr/mdec/mbr_bootsel</i></dt>
<dd class="list-tag" style="margin-left: 21.00ex;">
Default location of i386 bootselect code</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/usr/mdec/mbr_ext</i></dt>
<dd class="list-tag" style="margin-left: 21.00ex;">
Default location of i386 bootselect for extended partitions (i.e., NetBSD on logical partitions)</dd>
</dl>
</div>
<div class="section">
<h1 id="x4558414d504c4553">EXAMPLES</h1> Update MBR partition data of <i class="file">/dev/rwd0d</i> in interactive mode:<p>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit"><b class="cmd">fdisk -u /dev/rwd0d</b></code></div>
</blockquote>
<p>
Change active MBR partition of <i class="file">/dev/rwd0d</i> in interactive mode:<p>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit"><b class="cmd">fdisk -a /dev/rwd0d</b></code></div>
</blockquote>
<p>
Install MBR bootcode <i class="file">/usr/mdec/mbr_bootsel</i> into <i class="file">/dev/rwd0d</i>:<p>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit"><b class="cmd">fdisk -c /usr/mdec/mbr_bootsel /dev/rwd0d</b></code></div>
</blockquote>
<p>
Set MBR partition data for slot 0 of <i class="file">/dev/rwd0d</i> specifying values without prompt:<p>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit"><b class="cmd">fdisk -f -u -0 -s 169/63/2097089 /dev/rwd0d</b></code></div>
</blockquote>
<p>
Make partition slot 0 of <i class="file">/dev/rwd0d</i> active without prompt:<p>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit"><b class="cmd">fdisk -f -a -0 /dev/rwd0d</b></code></div>
</blockquote>
<p>
Initialize and create MBR partition data using bootcode <i class="file">destdir/usr/mdec/mbr</i> without prompt against 1GB disk image file <i class="file">diskimg</i>:<p>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit"><b class="cmd">fdisk -f -i -b 130/255/63 -c destdir/usr/mdec/mbr -F diskimg</b></code></div>
</blockquote>
<p>
Create MBR partition data for slot 0 which has an active <span class="unix">NetBSD</span> partition using whole disk without prompt against 1GB disk image file <i class="file">diskimg</i>:<p>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit"><b class="cmd">fdisk -f -a -u -0 -s 169/63/2097089 -F diskimg</b></code></div>
</blockquote>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../5/disktab">disktab(5)</a>, <a class="link-man" href="../8/boot">boot(8)</a>, <a class="link-man" href="../8/disklabel">disklabel(8)</a>, <a class="link-man" href="../8/gpt">gpt(8)</a>, <a class="link-man" href="../8/installboot">installboot(8)</a>, <a class="link-man" href="../8/mbr">mbr(8)</a>, <a class="link-man" href="../8/mbrlabel">mbrlabel(8)</a></div>
<div class="section">
<h1 id="x42554753">BUGS</h1> The word &#8216;partition&#8217; is used to mean both an MBR partition and a <span class="unix">NetBSD</span> partition, sometimes in the same sentence.<p>
There are subtleties that the program detects that are not explained in this manual page.</div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
April 3, 2014</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
</html>

