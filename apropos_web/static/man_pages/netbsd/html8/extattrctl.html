<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="../style.css" type="text/css" media="all">
<title>
EXTATTRCTL(8)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
EXTATTRCTL(8)</td>
<td class="head-vol" align="center">
System Manager's Manual</td>
<td class="head-rtitle" align="right">
EXTATTRCTL(8)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">extattrctl</b> &#8212; <span class="desc">manage UFS1 extended attributes</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1><table class="synopsis">
<col style="width: 10.00ex;">
<col>
<tbody>
<tr>
<td>
extattrctl</td>
<td>
<b class="flag">start</b> <i class="arg">path</i></td>
</tr>
</tbody>
</table>
<br>
<table class="synopsis">
<col style="width: 10.00ex;">
<col>
<tbody>
<tr>
<td>
extattrctl</td>
<td>
<b class="flag">stop</b> <i class="arg">path</i></td>
</tr>
</tbody>
</table>
<br>
<table class="synopsis">
<col style="width: 10.00ex;">
<col>
<tbody>
<tr>
<td>
extattrctl</td>
<td>
<b class="flag">initattr</b> &#91;<span class="opt"><b class="flag">&#45;f</b></span>&#93; &#91;<span class="opt"><b class="flag">&#45;p</b> <i class="arg">path</i></span>&#93; <i class="arg">attrsize</i> <i class="arg">attrfile</i></td>
</tr>
</tbody>
</table>
<br>
<table class="synopsis">
<col style="width: 10.00ex;">
<col>
<tbody>
<tr>
<td>
extattrctl</td>
<td>
<b class="flag">showattr</b> <i class="arg">attrfile</i></td>
</tr>
</tbody>
</table>
<br>
<table class="synopsis">
<col style="width: 10.00ex;">
<col>
<tbody>
<tr>
<td>
extattrctl</td>
<td>
<b class="flag">enable</b> <i class="arg">path</i> <i class="arg">attrnamespace</i> <i class="arg">attrname</i> <i class="arg">attrfile</i></td>
</tr>
</tbody>
</table>
<br>
<table class="synopsis">
<col style="width: 10.00ex;">
<col>
<tbody>
<tr>
<td>
extattrctl</td>
<td>
<b class="flag">disable</b> <i class="arg">path</i> <i class="arg">attrnamespace</i> <i class="arg">attrname</i></td>
</tr>
</tbody>
</table>
</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> The <b class="name">extattrctl</b> utility is the management utility for extended attributes over the UFS1 file system. It allows the starting and stopping of extended attributes on a file system, as well as initialization of attribute backing files, and enabling and disabling of specific extended attributes on a file system.<p>
The first argument on the command line indicates the operation to be performed. Operation must be one of the following:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">start</b> <i class="arg">path</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Start extended attribute support on the file system named using <i class="arg">path</i>. The file system must be a UFS1 file system, and the <span class="define">UFS_EXTATTR</span> kernel option must have been enabled. If <i class="file">.attribute/user</i> and <i class="file">.attribute/system</i> exist at the filesystem root, extended attributes backed by files in these directories will be automatically enabled. Note that extended attributes can be automatically started at mount time by using the <b class="flag">-o extattr</b> option to <a class="link-man" href="../8/mount">mount(8)</a>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">stop</b> <i class="arg">path</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Stop extended attribute support on the file system named using <i class="arg">path</i>. Extended attribute support must previously have been started.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">initattr</b> &#91;<span class="opt"><b class="flag">&#45;f</b></span>&#93; &#91;<span class="opt"><b class="flag">&#45;p</b> <i class="arg">path</i></span>&#93; <i class="arg">attrsize attrfile</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Create and initialize a file to use as an attribute backing file. You must specify a maximum per-inode size for the attribute in bytes in <i class="arg">attrsize</i>, as well as the file where the attribute will be stored, using <i class="arg">attrfile</i>.<p>
The <b class="flag">&#45;f</b> argument may be used to indicate that it is alright to overwrite an existing attribute backing file; otherwise, if the target file exists, an error will be returned.<p>
The <b class="flag">&#45;p</b> <i class="arg">path</i> argument may be used to preallocate space for all attributes rather than relying on sparse files to conserve space. This has the advantage of guaranteeing that space will be available for attributes when they are written, preventing low disk space conditions from denying attribute service.<p>
This file should not exist before running <b class="flag">initattr</b>.<p>
When a user attempts to set a &#8220;user&#8221; or &#8220;system&#8221; extended attribute that lacks a backing file, the kernel will attempt to automatically create it, provided <i class="file">.attribute/user</i> or <i class="file">.attribute/system</i> exist and are writable by the requesting user.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">showattr</b> <i class="arg">attrfile</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Show the attribute header values in the attribute file named by <i class="arg">attrfile</i>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">enable</b> <i class="arg">path attrnamespace attrname attrfile</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Enable an attribute named <i class="arg">attrname</i> in the namespace <i class="arg">attrnamespace</i> on the file system identified using <i class="arg">path</i>, and backed by initialized attribute file <i class="arg">attrfile</i>. Available namespaces are &#8220;user&#8221; and &#8220;system&#8221;. The backing file must have been initialized using <b class="flag">initattr</b> before its first use. Attributes must have been started on the file system prior to the enabling of any attributes.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">disable</b> <i class="arg">path attrnamespace attrname</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Disable the attributed named <i class="arg">attrname</i> in namespace <i class="arg">attrnamespace</i> on the file system identified by <i class="arg">path</i>. Available namespaces are &#8220;user&#8221; and &#8220;system&#8221;. The file system must have attributes started on it, and the attribute most have been enabled using <b class="flag">enable</b>.</dd>
</dl>
</div>
<div class="section">
<h1 id="x4558414d504c4553">EXAMPLES</h1><blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit">extattrctl start /</code></div>
</blockquote>
<p>
Start extended attributes on the root file system.<p>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit">extattrctl initattr 17 /.attribute/system/md5</code></div>
</blockquote>
<p>
Create an attribute backing file in <i class="file">/.attribute/system/md5</i>, and set the maximum size of each attribute to 17 bytes, with a sparse file used for storing the attributes.<p>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit">extattrctl enable / system md5 /.attribute/system/md5</code></div>
</blockquote>
<p>
Enable an attribute named md5 on the root file system, backed from the file <i class="file">/.attribute/system/md5</i>.<p>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit">extattrctl disable / md5</code></div>
</blockquote>
<p>
Disable the attribute named md5 on the root file system.<p>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit">extattrctl stop /</code></div>
</blockquote>
<p>
Stop extended attributes on the root file system.</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../1/getextattr">getextattr(1)</a>, <a class="link-man" href="../2/extattr_get_file">extattr_get_file(2)</a>, <a class="link-man" href="../9/extattr">extattr(9)</a></div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> Extended attribute support was developed as part of the TrustedBSD Project, and introduced in <span class="unix">FreeBSD&#160;5.0</span> and <span class="unix">NetBSD&#160;4.0</span>. It was developed to support security extensions requiring additional labels to be associated with each file or directory. Backing file autocreation was added in <span class="unix">NetBSD&#160;6.0</span>.</div>
<div class="section">
<h1 id="x415554484f5253">AUTHORS</h1> <span class="author">Robert N M Watson</span></div>
<div class="section">
<h1 id="x42554753">BUGS</h1> <b class="name">extattrctl</b> works only on UFS1 file systems. The kernel support for extended attribute backing files and this control program should be generalized for any file system that lacks native extended attribute support.</div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
June 17, 2011</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
</html>

