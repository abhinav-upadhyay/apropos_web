<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/../4/strict.dtd">
>
<head>
<meta http-equiv="Content-Type" content="te../; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="../style.css" type="text/css" media="all">
<title>
MOUNT_UMAP(8)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
MOUNT_UMAP(8)</td>
<td class="head-vol" align="center">
System Manager's Manual</td>
<td class="head-rtitle" align="right">
MOUNT_UMAP(8)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">mount_umap</b> &#8212; <span class="desc">user and group ID remapping file system layer</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1><table class="synopsis">
<col style="width: 10.00ex;">
<col>
<tbody>
<tr>
<td>
mount_umap</td>
<td>
&#91;<span class="opt"><b class="flag">&#45;o</b> <i class="arg">options</i></span>&#93; <b class="flag">&#45;g</b> <i class="arg">gid-mapfile</i> <b class="flag">&#45;u</b> <i class="arg">uid-mapfile</i> <i class="arg">target</i> <i class="arg">mount-point</i></td>
</tr>
</tbody>
</table>
</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> The <b class="name">mount_umap</b> command is used to mount a sub-tree of an existing file system that uses a different set of uids and gids than the local system. Such a file system could be mounted from a remote site via NFS, a local file system on removable media brought from some foreign location that uses a different user/group database, or could be a local file system for another operating system which does not support Unix-style user/group IDs, or which uses a different numbering scheme.<p>
Both <i class="arg">target</i> and <i class="arg">mount-point</i> are converted to absolute paths before use.<p>
The options are as follows:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;g</b> <i class="arg">gid-mapfile</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Use the group ID mapping specified in <i class="arg">gid-mapfile</i>. This flag is required.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;o</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Options are specified with a <b class="flag">&#45;o</b> flag followed by a comma separated string of options. See the <a class="link-man" href="../8/mount">mount(8)</a> man page for possible options and their meanings.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;u</b> <i class="arg">uid-mapfile</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Use the user ID mapping specified in <i class="arg">uid-mapfile</i>. This flag is required.</dd>
</dl>
<p>
The <b class="name">mount_umap</b> command uses a set of files provided by the user to make correspondences between uids and gids in the sub-tree's original environment and some other set of ids in the local environment. For instance, user smith might have uid 1000 in the original environment, while having uid 2000 in the local environment. The <b class="name">mount_umap</b> command allows the subtree from smith's original environment to be mapped in such a way that all files with owning uid 1000 look like they are actually owned by uid 2000.<p>
<span class="emph">target</span> should be the current location of the sub-tree in the local system's name space. <span class="emph">mount-point</span> should be a directory where the mapped subtree is to be placed. <span class="emph">uid-mapfile</span> and <span class="emph">gid-mapfile</span> describe the mappings to be made between identifiers.<p>
The format of the user and group ID mapping files is very simple. The first line of the file is the total number of mappings present in the file. The remaining lines each consist of two numbers: the ID in the mapped subtree and the ID in the original subtree.<p>
For example, to map uid 1000 in the original subtree to uid 2000 in the mapped subtree:<p>
<pre style="margin-left: 5.00ex;" class="lit display">
1 
2000 1000</pre>
<p>
For user IDs in the original subtree for which no mapping exists, the user ID will be mapped to the user &#8220;nobody&#8221;. For group IDs in the original subtree for which no mapping exists, the group ID will be mapped to the group &#8220;nobody&#8221;.<p>
There is a limit of 64 user ID mappings and 16 group ID mappings.<p>
The mapfiles can be located anywhere in the file hierarchy, but they must be owned by root, and they must be writable only by root. <b class="name">mount_umap</b> will refuse to map the sub-tree if the ownership or permissions on these files are improper. It will also report an error if the count of mappings in the first line of the map files is not correct.</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../8/mount">mount(8)</a>, <a class="link-man" href="../8/mount_null">mount_null(8)</a></div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> The <b class="name">mount_umap</b> utility first appeared in <span class="unix">4.4BSD</span>.</div>
<div class="section">
<h1 id="x42554753">BUGS</h1> The implementation is not very sophisticated.</div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
March 6, 2001</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
<>

