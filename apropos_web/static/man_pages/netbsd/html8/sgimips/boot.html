<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="../../style.css" type="text/css" media="all">
<title>
BOOT(8) (SGIMIPS)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
BOOT(8)</td>
<td class="head-vol" align="center">
System Manager's Manual (SGIMIPS)</td>
<td class="head-rtitle" align="right">
BOOT(8)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">boot</b> &#8212; <span class="desc">sgimips system bootstrapping procedures</span></div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> Silicon Graphics MIPS-based computers all feature essentially similar firmware systems. However, as of the Indigo R4x00 series (IP20), quasi- ARCS (Advanced RISC Computing Specification) compatible features are also present. All known PROM implementations support loading executables from disk devices, as well as from the network via BOOTP and TFTP.</div>
<div class="section">
<h1 id="x4469736b20426f6f74696e67">Disk Booting</h1> SGI provides a small filesystem at the beginning of each bootable disk called a Volume Header, which contains a boot loader and other standalone utilities. Booting <span class="unix">NetBSD</span> requires that we write our bootloader into to the volume header using <a class="link-man" href="../../8/sgivol">sgivol(8)</a>.<p>
Once a bootloader is present in the volume header, it may be executed directly by the PROM either manually, or at boot time using the &#8220;OSLoader&#8221; PROM environment variable. The <span class="unix">NetBSD</span> bootloader will obtain the kernel filename to boot from the PROM or EEPROM. This is specified by setting the PROM environment variable &#8220;OSLoadFilename&#8221; to an appropriate value. For instance, &#8220;/netbsd.ecoff&#8221;.<p>
For example, the following will configure the PROM to use the bootloader &#8220;aoutboot&#8221; to load the kernel &#8220;netbsd.old&#8221;<p>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit"><b class="cmd">setenv OSLoader aoutboot</b></code></div>
</blockquote>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit"><b class="cmd">setenv OSLoadFilename netbsd.old</b></code></div>
</blockquote>
</div>
<div class="section">
<h1 id="x4e6574776f726b20426f6f74696e67">Network Booting</h1> The system firmware will obtain an IP address, TFTP server address, and an optional filename from the BOOTP server and download it via TFTP. The PROM's configurable network address environment variable &#8220;netaddr&#8221; must match the address provided by the BOOTP server.<p>
An example BOOTP entry for <a class="link-man" href="../../8/dhcpd">dhcpd(8)</a> follows:<p>
<pre style="margin-left: 5.00ex;" class="lit display">
	host indigo3k { 
		hardware ethernet 08:00:69:42:42:42; 
		fixed-address 192.168.0.2; 
		option host-name "indigo3k.foo"; 
		#filename "/netbsd.ecoff"; 
		next-server 192.168.0.1; 
		option root-path "/export/indigo3k/root"; 
		server-name "192.168.0.1"; 
	}</pre>
<p>
To boot a kernel named &#8220;netbsd.ecoff&#8221; the user would type:<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit"><b class="cmd">boot -f bootp():/netbsd.ecoff</b></code></div>
</blockquote>
<p>
See <a class="link-man" href="../../5/dhcpd.conf">dhcpd.conf(5)</a> for more information on configuring <a class="link-man" href="../../8/dhcpd">dhcpd(8)</a> as a BOOTP server.</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../../5/dhcpd.conf">dhcpd.conf(5)</a>, <a class="link-man" href="../../8/dhcpd">dhcpd(8)</a>, <a class="link-man" href="../../8/sgivol">sgivol(8)</a></div>
<div class="section">
<h1 id="x43415645415453">CAVEATS</h1> Some older PROM revisions do not support loading of ELF images. The build system automatically prepares ECOFF versions, which are correctly interpreted.</div>
<div class="section">
<h1 id="x42554753">BUGS</h1> <span class="unix">NetBSD</span> does not support booting from disk on systems lacking an ARCS-compatible firmware (presently supported systems include Personal Iris and Indigo R3000). It is possible to work around this by creating a sufficiently large volume header and placing the kernel in it, or by network booting.<p>
Some firmware revisions have a bug, which precludes them from communicating with TFTP servers using ports above 32767. When using <span class="unix">NetBSD</span> as the TFTP server, this problem may be worked around as follows:<p>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit"><b class="cmd">sysctl -w net.inet.ip.anonportmin=20000</b></code></div>
</blockquote>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit"><b class="cmd">sysctl -w net.inet.ip.anonportmax=32767</b></code></div>
</blockquote>
<p>
Another bug exists in some firmware revisions, which precludes the PROM from communicating with TFTP servers that employ PMTU (Path MTU) discovery. This bug may be worked around by disabling PMTU on the TFTP server. This does not presently affect <span class="unix">NetBSD</span> servers.<p>
This man page is horribly incomplete.</div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
August 11, 2007</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
</html>

