<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/../4/strict.dtd">
>
<head>
<meta http-equiv="Content-Type" content="te../; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="../style.css" type="text/css" media="all">
<title>
CPUCTL(8)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
CPUCTL(8)</td>
<td class="head-vol" align="center">
System Manager's Manual</td>
<td class="head-rtitle" align="right">
CPUCTL(8)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">cpuctl</b> &#8212; <span class="desc">program to control CPUs</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1><table class="synopsis">
<col style="width: 6.00ex;">
<col>
<tbody>
<tr>
<td>
cpuctl</td>
<td>
&#91;<span class="opt"><b class="flag">&#45;v</b></span>&#93; <i class="arg">command</i> &#91;<span class="opt"><i class="arg">arguments</i></span>&#93;</td>
</tr>
</tbody>
</table>
</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> The <b class="name">cpuctl</b> command can be used to control and inspect the state of CPUs in the system.<p>
The first argument, <i class="arg">command</i>, specifies the action to take. Valid commands are:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
identify <i class="arg">cpu</i></dt>
<dd class="list-tag" style="margin-left: 15.00ex;">
Output information on the specified CPU's features and capabilities. Not available on all architectures.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
list</dt>
<dd class="list-tag" style="margin-left: 15.00ex;">
For each CPU in the system, display the current state and time of the last state change.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
offline <i class="arg">cpuno</i></dt>
<dd class="list-tag" style="margin-left: 15.00ex;">
Set the specified CPU off line.<p>
Unbound LWPs (lightweight processes) will not be executed on the CPU while it is off line. Bound LWPs will continue to be executed on the CPU, and device interrupts routed to the CPU will continue to be handled. A future release of the system may allow device interrupts to be re-routed away from individual CPUs.<p>
At least one CPU in the system must remain on line.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
online <i class="arg">cpuno</i></dt>
<dd class="list-tag" style="margin-left: 15.00ex;">
Set the specified CPU on line, making it available to run unbound LWPs.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
ucode &#91;<span class="opt"><i class="arg">cpuno</i></span>&#93; &#91;<span class="opt"><i class="arg">file</i></span>&#93;</dt>
<dd class="list-tag" style="margin-left: 15.00ex;">
This applies the microcode patch to CPUs. If <i class="arg">cpuno</i> is not specified or &#45;1, all CPUs are updated. If <i class="arg">cpuno</i> is &#45;2, the current CPUs are updated. The default filename is used if no filename is specified. The <b class="flag">identify</b> command prints the installed version on that CPU. On success the <b class="flag">identify</b> command show different ucode versions before and after this command.</dd>
</dl>
<p>
Valid flags are:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;v</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Be more verbose.</dd>
</dl>
</div>
<div class="section">
<h1 id="x46494c4553">FILES</h1><dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/dev/cpuctl</i></dt>
<dd class="list-tag" style="margin-left: 11.00ex;">
control device</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/libdata/firmware/x86/amd/</i></dt>
<dd class="list-tag" style="margin-left: 11.00ex;">
The directory to install the microcode file for AMD CPUs into. The default filename is <i class="file">microcode_amd.bin</i> for CPU families 0x10 to 0x14. The default filename is <i class="file">microcode_amd_famXXh.bin</i> where <span class="define">XX</span> is the CPU family starting with 15 (hex). Get it from <a class="link-ext" href="http://www.amd64.org/microcode">http://www.amd64.org/microcode</a></dd>
</dl>
</div>
<div class="section">
<h1 id="x4558414d504c4553">EXAMPLES</h1> Run<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit">cpuctl identify 0</code></div>
</blockquote>
and you should see something like this:<p>
<pre style="margin-left: 5.00ex;" class="lit display">
cpu0: UCode version: 0x1000080</pre>
<p>
After applying the microcode patch with<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit">cpuctl ucode</code></div>
</blockquote>
you can see with<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit">cpuctl identify 0</code></div>
</blockquote>
that the patch got applied:<p>
<pre style="margin-left: 5.00ex;" class="lit display">
cpu0: UCode version: 0x1000083</pre>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../8/psrset">psrset(8)</a>, <a class="link-man" href="../8/schedctl">schedctl(8)</a></div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> The <b class="name">cpuctl</b> command first appeared in <span class="unix">NetBSD&#160;5.0</span>.</div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
November 20, 2014</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
<>

