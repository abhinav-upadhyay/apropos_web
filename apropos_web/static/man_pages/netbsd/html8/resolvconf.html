<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/../4/strict.dtd">
>
<head>
<meta http-equiv="Content-Type" content="te../; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="../style.css" type="text/css" media="all">
<title>
RESOLVCONF(8)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
RESOLVCONF(8)</td>
<td class="head-vol" align="center">
System Manager's Manual</td>
<td class="head-rtitle" align="right">
RESOLVCONF(8)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">resolvconf</b> &#8212; <span class="desc">a framework for managing multiple DNS configurations</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1><table class="synopsis">
<col style="width: 10.00ex;">
<col>
<tbody>
<tr>
<td>
resolvconf</td>
<td>
<b class="flag">&#45;I</b></td>
</tr>
</tbody>
</table>
<br>
<table class="synopsis">
<col style="width: 10.00ex;">
<col>
<tbody>
<tr>
<td>
resolvconf</td>
<td>
&#91;<span class="opt"><b class="flag">&#45;m</b> <i class="arg">metric</i></span>&#93; &#91;<span class="opt"><b class="flag">&#45;p</b></span>&#93; &#91;<span class="opt"><b class="flag">&#45;x</b></span>&#93; <b class="flag">&#45;a</b> <i class="arg">interface</i>&#91;<span class="opt"><i class="arg">.protocol</i></span>&#93; &lt;<i class="file">file</i></td>
</tr>
</tbody>
</table>
<br>
<table class="synopsis">
<col style="width: 10.00ex;">
<col>
<tbody>
<tr>
<td>
resolvconf</td>
<td>
&#91;<span class="opt"><b class="flag">&#45;f</b></span>&#93; <b class="flag">&#45;d</b> <i class="arg">interface</i>&#91;<span class="opt"><i class="arg">.protocol</i></span>&#93;</td>
</tr>
</tbody>
</table>
<br>
<table class="synopsis">
<col style="width: 10.00ex;">
<col>
<tbody>
<tr>
<td>
resolvconf</td>
<td>
&#91;<span class="opt"><b class="flag">&#45;x</b></span>&#93; <b class="flag">&#45;il</b> <i class="arg">pattern</i></td>
</tr>
</tbody>
</table>
<br>
<table class="synopsis">
<col style="width: 10.00ex;">
<col>
<tbody>
<tr>
<td>
resolvconf</td>
<td>
<b class="flag">&#45;u</b></td>
</tr>
</tbody>
</table>
</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> <b class="name">resolvconf</b> manages <a class="link-man" href="../5/resolv.conf">resolv.conf(5)</a> files from multiple sources, such as DHCP and VPN clients. Traditionally, the host runs just one client and that updates <i class="file">/etc/resolv.conf</i>. More modern systems frequently have wired and wireless interfaces and there is no guarantee both are on the same network. With the advent of VPN and other types of networking daemons, many things now contend for the contents of <i class="file">/etc/resolv.conf</i>.<p>
<b class="name">resolvconf</b> solves this by letting the daemon send their <a class="link-man" href="../5/resolv.conf">resolv.conf(5)</a> file to <b class="name">resolvconf</b> via <a class="link-man" href="../3/stdin">stdin(3)</a> with the argument <b class="flag">&#45;a</b> <i class="arg">interface</i>&#91;<span class="opt"><i class="arg">.protocol</i></span>&#93; instead of the filesystem. <b class="name">resolvconf</b> then updates <i class="file">/etc/resolv.conf</i> as it thinks best. When a local resolver other than libc is installed, such as <a class="link-man" href="../8/dnsmasq">dnsmasq(8)</a> or <a class="link-man" href="../8/named">named(8)</a>, then <b class="name">resolvconf</b> will supply files that the resolver should be configured to include.<p>
<b class="name">resolvconf</b> assumes it has a job to do. In some situations <b class="name">resolvconf</b> needs to act as a deterrent to writing to <i class="file">/etc/resolv.conf</i>. Where this file cannot be made immutable or you just need to toggle this behaviour, <b class="name">resolvconf</b> can be disabled by adding <span class="symb">resolvconf</span>=NO to <a class="link-man" href="../5/resolvconf.conf">resolvconf.conf(5)</a>.<p>
<b class="name">resolvconf</b> can mark an interfaces <i class="file">resolv.conf</i> as private. This means that the name servers listed in that <i class="file">resolv.conf</i> are only used for queries against the domain/search listed in the same file. This only works when a local resolver other than libc is installed. See <a class="link-man" href="../5/resolvconf.conf">resolvconf.conf(5)</a> for how to configure <b class="name">resolvconf</b> to use a local name server.<p>
<b class="name">resolvconf</b> can mark an interfaces <i class="file">resolv.conf</i> as exclusive. Only the latest exclusive interface is used for processing, otherwise all are.<p>
When an interface goes down, it should then call <b class="name">resolvconf</b> with <b class="flag">&#45;d</b> <i class="arg">interface.*</i> arguments to delete the <i class="file">resolv.conf</i> file(s) for all the <i class="arg">protocols</i> on the <i class="arg">interface</i>.<p>
Here are some more options that <b class="name">resolvconf</b> has:-<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;I</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Initialise the state directory <i class="file">/var/run/resolvconf</i>. This only needs to be called if the initial system boot sequence does not automatically clean it out; for example the state directory is moved somewhere other than <i class="file">/var/run</i>. If used, it should only be called once as early in the system boot sequence as possible and before <b class="name">resolvconf</b> is used to add interfaces.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;f</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Ignore non existant interfaces. Only really useful for deleting interfaces.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;i</b> <i class="arg">pattern</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
List the interfaces and protocols, optionally matching <i class="arg">pattern</i>, we have <i class="file">resolv.conf</i> files for.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;l</b> <i class="arg">pattern</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
List the <i class="file">resolv.conf</i> files we have. If <i class="arg">pattern</i> is specified then we list the files for the interfaces and protocols that match it.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;m</b> <i class="arg">metric</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Set the metric of the interface when adding it, default of 0. Lower metrics take precedence. This affects the default order of interfaces when listed.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;p</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Marks the interface <i class="file">resolv.conf</i> as private.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;u</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Force <b class="name">resolvconf</b> to update all its subscribers. <b class="name">resolvconf</b> does not update the subscribers when adding a resolv.conf that matches what it already has for that interface.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;x</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Mark the interface <i class="file">resolv.conf</i> as exclusive when adding, otherwise only use the latest exclusive interface.</dd>
</dl>
<p>
<b class="name">resolvconf</b> also has some options designed to be used by its subscribers:-<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;v</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Echo variables DOMAINS, SEARCH and NAMESERVERS so that the subscriber can configure the resolver easily.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;V</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Same as <b class="flag">&#45;v</b> except that only the information configured in <a class="link-man" href="../5/resolvconf.conf">resolvconf.conf(5)</a> is set.</dd>
</dl>
</div>
<div class="section">
<h1 id="x494e54455246414345204f52444552494e47">INTERFACE ORDERING</h1> For <b class="name">resolvconf</b> to work effectively, it has to process the resolv.confs for the interfaces in the correct order. <b class="name">resolvconf</b> first processes interfaces from the <span class="symb">interface_order</span> list, then interfaces without a metic and that match the <span class="symb">dynamic_order</span> list, then interfaces with a metric in order and finally the rest in the operating systems lexical order. See <a class="link-man" href="../5/resolvconf.conf">resolvconf.conf(5)</a> for details on these lists.</div>
<div class="section">
<h1 id="x50524f544f434f4c53">PROTOCOLS</h1> Here are some suggested protocol tags to use for each <i class="file">resolv.conf</i> file registered on an <i class="arg">interface</i>:-<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
dhcp</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Dynamic Host Configuration Protocol. Initial versions of <b class="name">resolvconf</b> did not recommend a <i class="arg">protocol</i> tag be appended to the <i class="arg">interface</i> name. When the protocol is absent, it is assumed to be the DHCP protocol.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
ppp</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Point-to-Point Protocol.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
ra</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
IPv6 Router Advertisement.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
dhcp6</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Dynamic Host Configuration Protocol, version 6.</dd>
</dl>
</div>
<div class="section">
<h1 id="x494d504c454d454e544154494f4e204e4f544553">IMPLEMENTATION NOTES</h1> If a subscriber has the executable bit then it is executed otherwise it is assumed to be a shell script and sourced into the current environment in a subshell. This is done so that subscribers can remain fast, but are also not limited to the shell language.<p>
Portable subscribers should not use anything outside of <i class="file">/bin</i> and <i class="file">/sbin</i> because <i class="file">/usr</i> and others may not be available when booting. Also, it would be unwise to assume any shell specific features.</div>
<div class="section">
<h1 id="x454e5649524f4e4d454e54">ENVIRONMENT</h1><dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-ohang">
<dt class="list-ohang" style="margin-top: 1.00em;">
<b class="var">IF_METRIC</b></dt>
<dd class="list-ohang">
If the <b class="flag">&#45;m</b> option is not present then we use <b class="var">IF_METRIC</b> for the metric.</dd>
<dt class="list-ohang" style="margin-top: 1.00em;">
<b class="var">IF_PRIVATE</b></dt>
<dd class="list-ohang">
Marks the interface <i class="file">resolv.conf</i> as private.</dd>
<dt class="list-ohang" style="margin-top: 1.00em;">
<b class="var">IF_EXCLUSIVE</b></dt>
<dd class="list-ohang">
Marks the interface <i class="file">resolv.conf</i> as exclusive.</dd>
</dl>
</div>
<div class="section">
<h1 id="x46494c4553">FILES</h1><dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-ohang">
<dt class="list-ohang" style="margin-top: 1.00em;">
<i class="file">/etc/resolv.conf.bak</i></dt>
<dd class="list-ohang">
Backup file of the original resolv.conf.</dd>
<dt class="list-ohang" style="margin-top: 1.00em;">
<i class="file">/etc/resolvconf.conf</i></dt>
<dd class="list-ohang">
Configuration file for <b class="name">resolvconf</b>.</dd>
<dt class="list-ohang" style="margin-top: 1.00em;">
<i class="file">/libexec/resolvconf</i></dt>
<dd class="list-ohang">
Directory of subscribers which are run every time <b class="name">resolvconf</b> adds, deletes or updates.</dd>
<dt class="list-ohang" style="margin-top: 1.00em;">
<i class="file">/libexec/resolvconf/libc.d</i></dt>
<dd class="list-ohang">
Directory of subscribers which are run after the libc subscriber is run.</dd>
<dt class="list-ohang" style="margin-top: 1.00em;">
<i class="file">/var/run/resolvconf</i></dt>
<dd class="list-ohang">
State directory for <b class="name">resolvconf</b>.</dd>
</dl>
</div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> This implementation of <b class="name">resolvconf</b> is called openresolv and is fully command line compatible with Debian's resolvconf, as written by Thomas Hood.</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../5/resolv.conf">resolv.conf(5)</a>, <a class="link-man" href="../5/resolvconf.conf">resolvconf.conf(5)</a>, <a class="link-man" href="../3/resolver">resolver(3)</a>, <a class="link-man" href="../3/stdin">stdin(3)</a></div>
<div class="section">
<h1 id="x415554484f5253">AUTHORS</h1> <span class="author">Roy Marples</span> &#60;<a class="link-mail" href="mailto:roy@marples.name">roy@marples.name</a>&#62;</div>
<div class="section">
<h1 id="x42554753">BUGS</h1> Please report them to <a class="link-ext" href="http://roy.marples.name/projects/openresolv">http://roy.marples.name/projects/openresolv</a><p>
<b class="name">resolvconf</b> does not validate any of the files given to it.<p>
When running a local resolver other than libc, you will need to configure it to include files that <b class="name">resolvconf</b> will generate. You should consult <a class="link-man" href="../5/resolvconf.conf">resolvconf.conf(5)</a> for instructions on how to configure your resolver.</div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
April 27, 2014</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
<>

