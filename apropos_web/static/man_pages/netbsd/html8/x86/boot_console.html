<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="../../style.css" type="text/css" media="all">
<title>
BOOT_CONSOLE(8) (x86)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
BOOT_CONSOLE(8)</td>
<td class="head-vol" align="center">
System Manager's Manual (x86)</td>
<td class="head-rtitle" align="right">
BOOT_CONSOLE(8)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">boot_console</b> &#8212; <span class="desc">selection of a console device in the x86 bootloader</span></div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> The <span class="unix">NetBSD</span> x86 bootloader selects a console device for its user interaction and passes information about it to the <span class="unix">NetBSD</span> kernel. When booting from the system BIOS, the console device and properties are saved in the primary bootstrap by <a class="link-man" href="../../html8/installboot.html">installboot(8)</a>. For other boot procedures (such as <a class="link-man" href="../../html8/dosboot.html">dosboot(8)</a>) the selection process is controlled by bootloader compile-time options and system setup at the bootloader startup time. The selection may be changed on-the-fly from within the bootloader.<div class="subsection">
<h2 id="x53657269616c20436f6e736f6c65204f7074696f6e73">Serial Console Options</h2> The compile-time options (to be set in the booter's &#8220;Makefile&#8221;) are:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-ohang">
<dt class="list-ohang" style="margin-top: 1.00em;">
<span class="symb">SUPPORT_SERIAL=</span><i class="farg">policy</i></dt>
<dd class="list-ohang">
enables support for serial input/output. By default this option is not set and the standard PC keyboard and display are always used as the console device. See <i class="link-sec"><a class="link-sec" href="#x436f6e736f6c652053656c656374696f6e20506f6c696379">Console Selection Policy</a></i> below for valid values of <i class="farg">policy</i>.</dd>
<dt class="list-ohang" style="margin-top: 1.00em;">
<span class="symb">DIRECT_SERIAL</span></dt>
<dd class="list-ohang">
causes direct hardware access to be used for serial input / output. With this option, software handshake (XON/XOFF) is used for flow control. Without this option, BIOS functions are employed for serial port handling, which require hardware handshake lines to be completely wired.</dd>
<dt class="list-ohang" style="margin-top: 1.00em;">
<span class="symb">CONSPEED=</span><i class="farg">integer</i></dt>
<dd class="list-ohang">
sets the baud-rate for the serial console. This option has only an effect when used in combination with the &#8220;<span class="define">DIRECT_SERIAL</span>&#8221; option above, otherwise, the default setting of 9600 baud is used. The value of <i class="farg">integer</i> must be something that makes sense as a serial port baud rate.</dd>
<dt class="list-ohang" style="margin-top: 1.00em;">
<span class="symb">COMCONS_KEYPRESS</span></dt>
<dd class="list-ohang">
Require a character input within seven (7) seconds from serial console device to be selected.</dd>
</dl>
</div>
<div class="subsection">
<h2 id="x436f6e736f6c652053656c656374696f6e20506f6c696379">Console Selection Policy</h2> The actual policy for the console selection is determined by the value of &#8220;<span class="define">SUPPORT_SERIAL</span>&#8221; The following options are available:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-ohang">
<dt class="list-ohang" style="margin-top: 1.00em;">
<span class="emph">CONSDEV_PC</span></dt>
<dd class="list-ohang">
Force use of the standard PC keyboard and display as the console.</dd>
<dt class="list-ohang" style="margin-top: 1.00em;">
<span class="emph">CONSDEV_COM0</span> <code class="lit">...</code> <span class="emph">CONSDEV_COM3</span></dt>
<dd class="list-ohang">
Use the serial port with the corresponding BIOS number as the console. No attempt is made to verify connectivity on the selected port. If the port is not known to the BIOS, it falls back to &#8220;<span class="define">CONSDEV_PC</span>&#8221;. (Note: This feature can be deliberately used for console selection if the serial ports have been disabled in the BIOS.)</dd>
<dt class="list-ohang" style="margin-top: 1.00em;">
<span class="emph">CONSDEV_COM0KBD</span> <code class="lit">...</code> <span class="emph">CONSDEV_COM3KBD</span></dt>
<dd class="list-ohang">
If the port is known to the BIOS, and output of a character to the port succeeds (and if &#8220;<span class="define">DIRECT_SERIAL</span>&#8221; is defined the RS-232 &#8220;modem ready&#8221; status is on after the character is output), the port is used as console. If the port is not known to the BIOS, or the test output fails, it falls back to &#8220;<span class="define">CONSDEV_PC</span>&#8221;.</dd>
<dt class="list-ohang" style="margin-top: 1.00em;">
<span class="emph">CONSDEV_AUTO</span></dt>
<dd class="list-ohang">
Auto-select the console. All serial ports known to the BIOS are probed in sequence. If output of a character to the port succeeds (and if &#8220;<span class="define">DIRECT_SERIAL</span>&#8221; is defined the RS-232 &#8220;modem ready&#8221; status is on after the character is output), the port is used as console. If no serial port passes the check, &#8220;<span class="define">CONSDEV_PC</span>&#8221; is used. The progress of the selection process is shown at the PC display as digits corresponding to the serial port number currently probed.</dd>
</dl>
</div>
</div>
<div class="section">
<h1 id="x46494c4553">FILES</h1><dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="file">src/sys/arch/i386/stand/{boot,pxeboot}/Makefile</i></dt>
<dd class="list-tag" style="margin-left: 47.00ex;">
compile time options for the boot programs.</dd>
</dl>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../../html4/console.html">console(4)</a>, <a class="link-man" href="../../html8/boot.html">boot(8)</a>, <a class="link-man" href="../../html8/installboot.html">installboot(8)</a></div>
<div class="section">
<h1 id="x42554753">BUGS</h1> The serial communication parameters (byte-size, parity, stop-bits) are not settable (either at compile time or run time). The default parameters are &#8220;8 N 1&#8221;.<p>
The baud rate is not settable when using BIOS I/O. It should be settable at compile time with &#8220;<span class="define">CONSPEED</span>&#8221; just as it is when using &#8220;<span class="define">DIRECT_SERIAL</span>&#8221;. The default speed is 9600 baud (the maximum for BIOS I/O).</div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
July 3, 2004</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
</html>

