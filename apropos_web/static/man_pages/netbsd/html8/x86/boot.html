<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/../4/strict.dtd">
>
<head>
<meta http-equiv="Content-Type" content="te../; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="../../style.css" type="text/css" media="all">
<title>
BOOT(8) (x86)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
BOOT(8)</td>
<td class="head-vol" align="center">
System Manager's Manual (x86)</td>
<td class="head-rtitle" align="right">
BOOT(8)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">boot</b> &#8212; <span class="desc">system bootstrapping procedures</span></div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> IA-32 computers (the IBM PC and its clones) that can run <span class="unix">NetBSD</span>/i386 or <span class="unix">NetBSD</span>/amd64 can use any of the following boot procedures, depending on what the hardware and BIOS support:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
boot</dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
bootstrap <span class="unix">NetBSD</span> from the system BIOS</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<a class="link-man" href="../../8/dosboot">dosboot(8)</a></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
bootstrap <span class="unix">NetBSD</span> from MS-DOS</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<a class="link-man" href="../../8/pxeboot">pxeboot(8)</a></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
network bootstrap <span class="unix">NetBSD</span> from a TCP/IP LAN with DHCP, TFTP, and NFS.</dd>
</dl>
<div class="subsection">
<h2 id="x506f776572206661696c20616e64206372617368207265636f76657279">Power fail and crash recovery</h2> Normally, the system will reboot itself at power-up or after crashes. An automatic consistency check of the file systems will be performed, and unless this fails, the system will resume multi-user operations.</div>
<div class="subsection">
<h2 id="x436f6c6420737461727473">Cold starts</h2> The 386 PC AT clones attempt to boot the floppy disk drive A (otherwise known as drive 0) first, and failing that, attempt to boot the hard disk C (otherwise known as hard disk controller 1, drive 0). The <span class="unix">NetBSD</span> bootblocks are loaded and started either by the BIOS, or by a boot selector program (such as OS-BS, BOOTEASY, the OS/2 Boot Menu or <span class="unix">NetBSD</span>'s boot-selecting master boot record - see <a class="link-man" href="../../8/mbr">mbr(8)</a>).</div>
<div class="subsection">
<h2 id="x4e6f726d616c204f7065726174696f6e">Normal Operation</h2> Once running, a banner similar to the following will appear:<p>
<pre style="margin-left: 5.00ex;" class="lit display">
&gt;&gt; NetBSD BIOS Boot, revision 3.0 
&gt;&gt; (user@buildhost, builddate) 
&gt;&gt; Memory: 637/15360 k 
Press return to boot now, any other key for boot menu 
booting hd0a:netbsd - starting in 5</pre>
<p>
After a countdown, the system image listed will be loaded. In the example above, it will be &#8220;<code class="lit">hd0a:netbsd</code>&#8221; which is the file <i class="file">/netbsd</i> on partition &#8220;a&#8221; of the <span class="unix">NetBSD</span> MBR partition of the first hard disk known to the BIOS (which is an IDE or similar device - see the <i class="link-sec"><a class="link-sec" href="#x42554753">BUGS</a></i> section).<p>
Pressing a key within the time limit, or before the boot program starts, will enter interactive mode. When using a short or 0 timeout, it is often useful to interrupt the boot by holding down a shift key, as some BIOSes and BIOS extensions will drain the keystroke buffer at various points during POST.<p>
If present, the file <i class="file">/boot.cfg</i> will be used to configure the behaviour of the boot loader including setting the timeout, choosing a console device, altering the banner text and displaying a menu allowing boot commands to be easily chosen. See <a class="link-man" href="../../5/boot.cfg">boot.cfg(5)</a>.</div>
<div class="subsection">
<h2 id="x426f6f742050726f746f636f6c">Boot Protocol</h2> The <span class="unix">NetBSD</span>/x86 boot loader can boot a kernel using either the native <span class="unix">NetBSD</span> boot protocol, or the &#8220;multiboot&#8221; protocol (which is compatible with some other operating systems). In the native <span class="unix">NetBSD</span> boot protocol, options are passed from the boot loader to the kernel via flag bits in the <b class="var">boothowto</b> variable (see <a class="link-man" href="../../9/boothowto">boothowto(9)</a>). In the multiboot protocol, options are passed from the boot loader to the kernel as strings.</div>
<div class="subsection">
<h2 id="x446961676e6f73746963204f7574707574">Diagnostic Output</h2> If the first stage boot fails to load the boot, it will print a terse message indicating the reason for the failure. The possible error messages and their cause are listed in <a class="link-man" href="../../8/mbr">mbr(8)</a>.<p>
If the first stage boot succeeds, the banner will be shown and the error messages should be self-explanatory.</div>
<div class="subsection">
<h2 id="x496e746572616374697665206d6f6465">Interactive mode</h2> In interactive mode, the boot loader will present a prompt, allowing input of these commands:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 4.00ex;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">boot</b> &#91;<span class="opt"><b class="var">device</b>:</span>&#93;&#91;<span class="opt"><b class="var">filename</b></span>&#93; &#91;<span class="opt"><b class="flag">&#45;1234abcdmqsvxz</b></span>&#93;</dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
The default <b class="var">device</b> will be set to the disk that the boot loader was loaded from. To boot from an alternate disk, the full name of the device should be given at the prompt. <b class="var">device</b> is of the form <b class="var">xd</b> &#91;<span class="opt"><b class="var">N</b>&#91;<span class="opt"><b class="var">x</b></span>&#93;</span>&#93; where <b class="var">xd</b> is the device from which to boot, <b class="var">N</b> is the unit number, and <b class="var">x</b> is the partition letter.<p>
The following list of supported devices may vary from installation to installation:<p>
<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-hang">
<dt class="list-hang" style="margin-top: 0.00em;">
hd</dt>
<dd class="list-hang">
Hard disks as numbered by the BIOS. This includes ST506, IDE, ESDI, RLL disks on a WD100[2367] or lookalike controller(s), and SCSI disks on SCSI controllers recognized by the BIOS.</dd>
<dt class="list-hang" style="margin-top: 0.00em;">
fd</dt>
<dd class="list-hang">
Floppy drives as numbered by the BIOS.</dd>
</dl>
<p>
The default <b class="var">filename</b> is <i class="file">netbsd</i>; if the boot loader fails to successfully open that image, it then tries <i class="file">netbsd.gz</i> (expected to be a kernel image compressed by gzip), followed by <i class="file">netbsd.old</i>, <i class="file">netbsd.old.gz</i>, <i class="file">onetbsd</i>, and finally <i class="file">onetbsd.gz</i>. Alternate system images can be loaded by just specifying the name of the image.<p>
Options are:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;1</b></dt>
<dd class="list-tag" style="margin-left: 3.00ex;">
Sets the machine-dependent flag <span class="symb">RB_MD1</span> in <b class="var">boothowto</b>. In <span class="unix">NetBSD</span>/x86, this disables multiprocessor boot; the kernel will boot in uniprocessor mode.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;2</b></dt>
<dd class="list-tag" style="margin-left: 3.00ex;">
Sets the machine-dependent flag <span class="symb">RB_MD2</span> in <b class="var">boothowto</b>. In <span class="unix">NetBSD</span>/x86, this disables ACPI.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;3</b></dt>
<dd class="list-tag" style="margin-left: 3.00ex;">
Sets the machine-dependent flag <span class="symb">RB_MD3</span> in <b class="var">boothowto</b>. In <span class="unix">NetBSD</span>/x86, this has no effect.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;4</b></dt>
<dd class="list-tag" style="margin-left: 3.00ex;">
Sets the machine-dependent flag <span class="symb">RB_MD4</span> in <b class="var">boothowto</b>. In <span class="unix">NetBSD</span>/x86, this has no effect.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;a</b></dt>
<dd class="list-tag" style="margin-left: 3.00ex;">
Sets the <span class="symb">RB_ASKNAME</span> flag in <b class="var">boothowto</b>. This causes the kernel to prompt for the root file system device, the system crash dump device, and the path to <a class="link-man" href="../../8/init">init(8)</a>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;b</b></dt>
<dd class="list-tag" style="margin-left: 3.00ex;">
Sets the <span class="symb">RB_HALT</span> flag in <b class="var">boothowto</b>. This causes subsequent reboot attempts to halt instead of rebooting.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;c</b></dt>
<dd class="list-tag" style="margin-left: 3.00ex;">
Sets the <span class="symb">RB_USERCONF</span> flag in <b class="var">boothowto</b>. This causes the kernel to enter the <a class="link-man" href="../../4/userconf">userconf(4)</a> device configuration manager as soon as possible during the boot. <a class="link-man" href="../../4/userconf">userconf(4)</a> allows devices to be enabled or disabled, and allows device locators (such as hardware addresses or bus numbers) to be modified before the kernel attempts to attach the devices.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;d</b></dt>
<dd class="list-tag" style="margin-left: 3.00ex;">
Sets the <span class="symb">RB_KDB</span> flag in <b class="var">boothowto</b>. Requests the kernel to enter debug mode, in which it waits for a connection from a kernel debugger; see <a class="link-man" href="../../4/ddb">ddb(4)</a>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;m</b></dt>
<dd class="list-tag" style="margin-left: 3.00ex;">
Sets the <span class="symb">RB_MINIROOT</span> flag in <b class="var">boothowto</b>. Informs the kernel that a mini-root file system is present in memory.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;q</b></dt>
<dd class="list-tag" style="margin-left: 3.00ex;">
Sets the <span class="symb">AB_QUIET</span> flag in <b class="var">boothowto</b>. Boot the system in quiet mode.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;s</b></dt>
<dd class="list-tag" style="margin-left: 3.00ex;">
Sets the <span class="symb">RB_SINGLE</span> flag in <b class="var">boothowto</b>. Boot the system in single-user mode.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;v</b></dt>
<dd class="list-tag" style="margin-left: 3.00ex;">
Sets the <span class="symb">AB_VERBOSE</span> flag in <b class="var">boothowto</b>. Boot the system in verbose mode.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;x</b></dt>
<dd class="list-tag" style="margin-left: 3.00ex;">
Sets the <span class="symb">AB_DEBUG</span> flag in <b class="var">boothowto</b>. Boot the system with debug messages enabled.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;z</b></dt>
<dd class="list-tag" style="margin-left: 3.00ex;">
Sets the <span class="symb">AB_SILENT</span> flag in <b class="var">boothowto</b>. Boot the system in silent mode.</dd>
</dl>
</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">consdev</b> <b class="var">dev</b></dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
Immediately switch the console to the specified device <b class="var">dev</b> and reprint the banner. <b class="var">dev</b> must be one of <i class="arg">pc</i>, <i class="arg">com0</i>, <i class="arg">com1</i>, <i class="arg">com2</i>, <i class="arg">com3</i>, <i class="arg">com0kbd</i>, <i class="arg">com1kbd</i>, <i class="arg">com2kbd</i>, <i class="arg">com3kbd</i>, or <i class="arg">auto</i>. See <i class="link-sec"><a class="link-sec" href="#x436f6e736f6c652053656c656374696f6e20506f6c696379">Console Selection Policy</a></i> in <a class="link-man" href="../../8/boot_console">boot_console(8)</a>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">dev</b> &#91;<span class="opt"><b class="var">device</b></span>&#93;</dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
Set the default drive and partition for subsequent file system operations. Without an argument, print the current setting. <b class="var">device</b> is of the form specified in <b class="flag">boot</b>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">fs</b> <b class="var">file</b></dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
Load a file system image from the specified <i class="arg">file</i>, and request the kernel to use it as the root file system. The <a class="link-man" href="../../8/makefs">makefs(8)</a> utility may be used to create suitable file system images.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">help</b></dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
Print an overview about commands and arguments.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">load</b> <b class="var">module</b> &#91;<span class="opt"><i class="arg">arguments</i></span>&#93;</dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
Load the specified kernel <b class="var">module</b>, and pass it the specified <i class="arg">arguments</i>. If the module name is not an absolute path, <i class="file">/stand/</i>&#60;<span class="symb">arch</span>&#62;<i class="file">/</i>&#60;<span class="symb">osversion</span>&#62;<i class="file">/modules/</i>&#60;<span class="symb">module</span>&#62;<i class="file">/</i>&#60;<span class="symb">module</span>&#62;<i class="file">.kmod</i> is used. Possible used of the <b class="cmd">load</b> command include loading a memory disk image before booting a kernel, or loading a Xen DOM0 kernel before booting the Xen hypervisor. See <a class="link-man" href="../../5/boot.cfg">boot.cfg(5)</a> for examples.<p>
In addition to the <b class="flag">boot</b> options specified above, the Xen DOM0 kernel accepts (<i class="arg">arguments</i> being separated with spaces):<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">bootdev</b>=<i class="arg">dev</i> (or <b class="cmd">root</b>=<i class="arg">dev</i>)</dt>
<dd class="list-tag" style="margin-left: 3.00ex;">
Override the default boot device. <i class="arg">dev</i> can be a unit name (&#8220;wd0&#8221;), or an interface name (&#8220;bge0&#8221;, &#8220;wm0&#8221;, ...) for cases where the root file system has to be loaded from network (see the <i class="link-sec"><a class="link-sec" href="#x42554753">BUGS</a></i> section in <a class="link-man" href="../../8/pxeboot">pxeboot(8)</a>).</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">console</b>=<i class="arg">dev</i></dt>
<dd class="list-tag" style="margin-left: 3.00ex;">
Console used by DOM0 kernel during boot. <i class="arg">dev</i> accepts the same values as the ones given for the <b class="flag">consdev</b> command. See <i class="link-sec"><a class="link-sec" href="#x436f6e736f6c652053656c656374696f6e20506f6c696379">Console Selection Policy</a></i> in <a class="link-man" href="../../8/boot_console">boot_console(8)</a>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">ip</b>=<i class="arg">my_ip</i>:<i class="arg">serv_ip</i>:<i class="arg">gw_ip</i>:<i class="arg">mask</i>:<i class="arg">host</i>:<i class="arg">iface</i></dt>
<dd class="list-tag" style="margin-left: 3.00ex;">
Specify various parameters for a network boot (IPs are in dot notation), each one separated by a colon:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="var">my_ip</b></dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
address of the host</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="var">serv_ip</b></dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
address of the NFS server</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="var">gw_ip</b></dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
address of the gateway</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="var">mask</b></dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
network mask</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="var">host</b></dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
address of the host</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="var">iface</b></dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
interface (e.g., &#8220;xennet0&#8221; or &#8220;eth0&#8221;)</dd>
</dl>
</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">nfsroot</b>=<i class="arg">address</i>:<i class="arg">rootpath</i></dt>
<dd class="list-tag" style="margin-left: 3.00ex;">
Boot the system with root on NFS. <i class="arg">address</i> is the address of the NFS server, and <i class="arg">rootpath</i> is the remote mount point for the root file system.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">pciback.hide</b>=<i class="arg">pcidevs</i></dt>
<dd class="list-tag" style="margin-left: 3.00ex;">
Pass a list of PCI IDs for use with the PCI backend driver, <a class="link-man" href="../../4/pciback">pciback(4)</a>. <i class="arg">pcidevs</i> is formed of multiple IDs (in bus:device.function notation), each ID being surrounded with brackets. PCI domain IDs are currently ignored. See <a class="link-man" href="../../4/pciback">pciback(4)</a>.</dd>
</dl>
</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">ls</b> &#91;<span class="opt"><i class="file">path</i></span>&#93;</dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
Print a directory listing of <i class="file">path</i>, containing inode number, filename, and file type. <i class="file">path</i> can contain a device specification.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">menu</b></dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
Display the boot menu and initiate a countdown, similarly to what would have happened if interactive mode had not been entered.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">modules</b> &#123;<i class="arg">on</i> | <i class="arg">off</i> | <i class="arg">enabled</i> | <i class="arg">disabled</i>&#125;</dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
The values <i class="arg">enabled</i>, <i class="arg">on</i> will enable module loading for <b class="flag">boot</b> and <b class="flag">multiboot</b>, whereas <i class="arg">disabled</i>, <i class="arg">off</i> will turn off the feature.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">multiboot</b> <b class="var">kernel</b> &#91;<span class="opt"><i class="arg">arguments</i></span>&#93;</dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
Boot the specified <b class="var">kernel</b>, using the &#8220;multiboot&#8221; protocol instead of the native <span class="unix">NetBSD</span> boot protocol. The <b class="var">kernel</b> is specified in the same way as with the <b class="cmd">boot</b> command.<p>
The multiboot protocol may be used in the following cases:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="unix">NetBSD</span>/Xen kernels</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
The Xen DOM0 kernel must be loaded as a module using the <b class="cmd">load</b> command, and the Xen hypervisor must be booted using the <b class="cmd">multiboot</b> command. Options for the DOM0 kernel (such as &#8220;-s&#8221; for single user mode) must be passed as options to the <b class="cmd">load</b> command. Options for the hypervisor (such as &#8220;dom0_mem=256M&#8221; to reserve 256 MB of memory for DOM0) must be passed as options to the <b class="cmd">multiboot</b> command. See <a class="link-man" href="../../5/boot.cfg">boot.cfg(5)</a> for examples on how to boot <span class="unix">NetBSD</span>/Xen.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="unix">NetBSD</span> multiboot kernels</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
A <span class="unix">NetBSD</span> kernel that was built with <b class="config">options MULTIBOOT</b> (see <a class="link-man" href="../../8/multiboot">multiboot(8)</a>) may be booted with either the <b class="cmd">boot</b> or <b class="cmd">multiboot</b> command, passing the same <i class="arg">arguments</i> in either case.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
Non-<span class="unix">NetBSD</span> kernels</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
A kernel for a non-<span class="unix">NetBSD</span> operating system that expects to be booted using the multiboot protocol (such as by the GNU &#8220;GRUB&#8221; boot loader) may be booted using the <b class="cmd">multiboot</b> command. See the foreign operating system's documentation for the available <i class="arg">arguments</i>.</dd>
</dl>
</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">quit</b></dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
Reboot the system.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">rndseed</b> <i class="arg">file</i></dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
Load the specified <i class="arg">file</i> and request the kernel to use it as a seed for the <a class="link-man" href="../../4/rnd">rnd(4)</a> random number generator. The <i class="arg">file</i> should be in the private format used by <a class="link-man" href="../../8/rndctl">rndctl(8)</a>, and should have been saved by &#8216;<code class="lit">rndctl -S</code>&#8217; shortly before the previous shutdown. See the <b class="var">random_seed</b> and <b class="var">random_file</b> variables in <a class="link-man" href="../../5/rc.conf">rc.conf(5)</a>, and the <i class="file">/etc/rc.d/random_seed</i> script, for a way to manage the seed file. Using the same seed file on more then one host, or for more than one boot on the same host, will reduce the quality of random numbers and may impact system security.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">userconf</b> <b class="var">command</b></dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
Pass command <b class="var">command</b> to <a class="link-man" href="../../4/userconf">userconf(4)</a> at boot time. These commands are processed before the interactive <a class="link-man" href="../../4/userconf">userconf(4)</a> shell is executed, if requested.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">splash</b> <i class="arg">file</i></dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
Load a graphical image from the specified <i class="arg">file</i> and request the kernel to use it as a splash screen. The <i class="arg">file</i> should contain an image in one of these formats: JPEG (baseline only, not progressive), PNG (8-bit only), TGA, BMP (non-1bpp, non-RLE), GIF, PSD (composited view only), or PIC.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">vesa</b> &#123;<b class="var">modenum</b> | <i class="arg">on</i> | <i class="arg">off</i> | <i class="arg">enabled</i> | <i class="arg">disabled</i> | <i class="arg">list</i>&#125;</dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
Initialise the video card to the specified resolution and bit depth. The <b class="var">modenum</b> should be in the form of <i class="arg">0x100</i>, <i class="arg">800x600</i>, <i class="arg">800x600x32</i>. The values <i class="arg">enabled</i>, <i class="arg">on</i> put the display into the default mode, and <i class="arg">disabled</i>, <i class="arg">off</i> returns the display into standard vga mode. The value <i class="arg">list</i> lists all supported modes.</dd>
</dl>
<p>
In an emergency, the bootstrap methods described in the <span class="unix">NetBSD</span> installation notes for the x86 architectures can be used to boot from floppy or other media, or over the network.</div>
<div class="subsection">
<h2 id="x4c6f636174696e672074686520726f6f742066696c652073797374656d">Locating the root file system</h2> The kernel uses information from the bootloader to locate the file system to mount as root. There are three methods:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 4.00ex;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">BTINFO_ROOTDEVICE</b> <b class="var">from</b></dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
<a class="link-man" href="../../5/boot.cfg">boot.cfg(5)</a> or multiboot. The bootloader passes the root device name as driver, unit, and partition (like sd0a). This will be automatically substituted by a <a class="link-man" href="../../4/dk">dk(4)</a> wedge if one is discovered.<p>
The bootloader passes a wedge name as "wedge:" followed by the name. The kernel will search for a <a class="link-man" href="../../4/dk">dk(4)</a> device with that name.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">BTINFO_BOOTWEDGE</b> <b class="var">determined by bootblock</b></dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
The bootloader passes start offset and length of a hard disk partition and a offset, size and hash of a "boot area". Then kernel searches all disks and wedges for a block sequence at that offset with a matching hash. If one is found, the kernel will look for a wedge on that device at the same offset.<p>
An additional partition number is provided if the bootloader also passed a BTINFO_BOOTDISK record. This (or partition 'a') will be used by the kernel as a fallback if there is no matching wedge.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">BTINFO_BOOTDISK</b> <b class="var">determined by bootblock</b></dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
This uses the device number passed by the BIOS that distinguishes between floppy, hard drive and CD-ROM boot.<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">Floppy</b></dt>
<dd class="list-tag" style="margin-left: 3.00ex;">
The kernel searches for the <a class="link-man" href="../../4/fd">fd(4)</a> device with the correct unit, the partition number is used to select a specific disk format. See <a class="link-man" href="../../4/fd">fd(4)</a> for details.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">Hard drive</b></dt>
<dd class="list-tag" style="margin-left: 3.00ex;">
The bootloader passed a partition number and disklabel data (offset, type, checksum, packname). The kernel searches all disks for a matching disklabel. If one is found, the kernel will use that device and partition number.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">CDROM</b></dt>
<dd class="list-tag" style="margin-left: 3.00ex;">
The BIOS does not distinguish between multiple CD devices. The kernel searches for the first <a class="link-man" href="../../4/cd">cd(4)</a> device. So you can only boot from unit 0.</dd>
</dl>
</dd>
</dl>
</div>
</div>
<div class="section">
<h1 id="x46494c4553">FILES</h1><dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/boot</i></dt>
<dd class="list-tag" style="margin-left: 23.00ex;">
boot program code loaded by the primary bootstrap</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/boot.cfg</i></dt>
<dd class="list-tag" style="margin-left: 23.00ex;">
optional configuration file</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/netbsd</i></dt>
<dd class="list-tag" style="margin-left: 23.00ex;">
system code</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/netbsd.gz</i></dt>
<dd class="list-tag" style="margin-left: 23.00ex;">
gzip-compressed system code</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/usr/mdec/boot</i></dt>
<dd class="list-tag" style="margin-left: 23.00ex;">
master copy of the boot program (copy to /boot)</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/usr/mdec/bootxx_fstype</i></dt>
<dd class="list-tag" style="margin-left: 23.00ex;">
primary bootstrap for file system type fstype, copied to the start of the <span class="unix">NetBSD</span> partition by <a class="link-man" href="../../8/installboot">installboot(8)</a>.</dd>
</dl>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../../4/ddb">ddb(4)</a>, <a class="link-man" href="../../4/fd">fd(4)</a>, <a class="link-man" href="../../4/pciback">pciback(4)</a>, <a class="link-man" href="../../4/userconf">userconf(4)</a>, <a class="link-man" href="../../5/boot.cfg">boot.cfg(5)</a>, <a class="link-man" href="../../8/boot_console">boot_console(8)</a>, <a class="link-man" href="../../8/dosboot">dosboot(8)</a>, <a class="link-man" href="../../8/halt">halt(8)</a>, <a class="link-man" href="../../8/installboot">installboot(8)</a>, <a class="link-man" href="../../8/mbr">mbr(8)</a>, <a class="link-man" href="../../8/multiboot">multiboot(8)</a>, <a class="link-man" href="../../8/pxeboot">pxeboot(8)</a>, <a class="link-man" href="../../8/reboot">reboot(8)</a>, <a class="link-man" href="../../8/rescue">rescue(8)</a>, <a class="link-man" href="../../8/shutdown">shutdown(8)</a>, <a class="link-man" href="../../9/boothowto">boothowto(9)</a></div>
<div class="section">
<h1 id="x42554753">BUGS</h1> The kernel file name must be specified before, not after, the boot options. Any <i class="arg">filename</i> specified after the boot options, e.g.:<p>
<pre style="margin-left: 5.00ex;" class="lit display">
<b class="flag">boot -d netbsd.test</b></pre>
<p>
is ignored, and the default kernel is booted.<p>
Hard disks are always accessed by BIOS functions. Unit numbers are BIOS device numbers which might differ from numbering in the <span class="unix">NetBSD</span> kernel or physical parameters (e.g., SCSI slave numbers). There isn't any distinction between &#8220;sd&#8221; and &#8220;wd&#8221; devices at the bootloader level. This is less a bug of the bootloader code than a shortcoming of the PC architecture. The default disk device's name printed in the starting message is derived from the &#8220;type&#8221; field of the <span class="unix">NetBSD</span> disklabel (if it is a hard disk).</div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
April 25, 2015</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
<>

