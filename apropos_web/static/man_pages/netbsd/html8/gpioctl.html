<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="../style.css" type="text/css" media="all">
<title>
GPIOCTL(8)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
GPIOCTL(8)</td>
<td class="head-vol" align="center">
System Manager's Manual</td>
<td class="head-rtitle" align="right">
GPIOCTL(8)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">gpioctl</b> &#8212; <span class="desc">control GPIO devices</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1><table class="synopsis">
<col style="width: 7.00ex;">
<col>
<tbody>
<tr>
<td>
gpioctl</td>
<td>
&#91;<span class="opt"><b class="flag">&#45;qs</b></span>&#93; <i class="arg">device</i></td>
</tr>
</tbody>
</table>
<br>
<table class="synopsis">
<col style="width: 7.00ex;">
<col>
<tbody>
<tr>
<td>
gpioctl</td>
<td>
&#91;<span class="opt"><b class="flag">&#45;q</b></span>&#93; <i class="arg">device</i> <b class="flag">attach</b> <i class="arg">device</i> <i class="arg">offset</i> <i class="arg">mask</i> &#91;<span class="opt"><i class="arg">flag</i></span>&#93;</td>
</tr>
</tbody>
</table>
<br>
<table class="synopsis">
<col style="width: 7.00ex;">
<col>
<tbody>
<tr>
<td>
gpioctl</td>
<td>
&#91;<span class="opt"><b class="flag">&#45;qs</b></span>&#93; <i class="arg">device</i> <i class="arg">pin</i> &#91;<span class="opt"><i class="arg">0</i> | <i class="arg">1</i> | <i class="arg">2</i></span>&#93;</td>
</tr>
</tbody>
</table>
<br>
<table class="synopsis">
<col style="width: 7.00ex;">
<col>
<tbody>
<tr>
<td>
gpioctl</td>
<td>
&#91;<span class="opt"><b class="flag">&#45;qs</b></span>&#93; <i class="arg">device</i> <i class="arg">pin</i> &#91;<span class="opt"><i class="arg">on</i> | <i class="arg">off</i> | <i class="arg">toggle</i></span>&#93;</td>
</tr>
</tbody>
</table>
<br>
<table class="synopsis">
<col style="width: 7.00ex;">
<col>
<tbody>
<tr>
<td>
gpioctl</td>
<td>
&#91;<span class="opt"><b class="flag">&#45;q</b></span>&#93; <i class="arg">device</i> <i class="arg">pin</i> <b class="flag">set</b> &#91;<span class="opt"><i class="arg">flags</i></span>&#93; &#91;<span class="opt"><i class="arg">name</i></span>&#93;</td>
</tr>
</tbody>
</table>
<br>
<table class="synopsis">
<col style="width: 7.00ex;">
<col>
<tbody>
<tr>
<td>
gpioctl</td>
<td>
&#91;<span class="opt"><b class="flag">&#45;q</b></span>&#93; <i class="arg">device</i> <i class="arg">pin</i> <b class="flag">unset</b></td>
</tr>
</tbody>
</table>
</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> The <b class="name">gpioctl</b> program allows manipulation of GPIO (General Purpose Input/Output) device pins. Such devices can be either part of the chipset or embedded CPU, or a separate chip. The usual way of using GPIO is to connect some simple devices such as LEDs and 1-wire thermal sensors to its pins.<p>
Each GPIO device has an associated device file in the <i class="file">/dev</i> directory. <i class="arg">device</i> can be specified with or without the <i class="file">/dev</i> prefix. For example, <i class="file">/dev/gpio0</i> or <i class="file">gpio0</i>.<p>
GPIO pins can be either &#8220;read&#8221; or &#8220;written&#8221; with the values of logical 0 or 1. If only a <i class="arg">pin</i> number is specified on the command line, the pin state will be read from the GPIO controller and displayed. To write to a pin, a value must be specified after the <i class="arg">pin</i> number. Values can be either 0 or 1. A value of 2 &#8220;toggles&#8221; the pin, i.e. changes its state to the opposite. Instead of the numerical values, the word <i class="arg">on</i>, <i class="arg">off</i>, or <i class="arg">toggle</i> can be used.<p>
Only pins that have been configured at securelevel 0, typically during system startup, are accessible once the securelevel has been raised. Pins can be given symbolic names for easier use. Besides using individual pins, device drivers that use GPIO pins can be attached to a <a class="link-man" href="../4/gpio">gpio(4)</a> device using the <b class="name">gpioctl</b> command. Such drivers can be detached at runtime using the <a class="link-man" href="../8/drvctl">drvctl(8)</a> command.<p>
The following configuration <i class="arg">flags</i> are supported by the GPIO framework:<p>
<dl style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 5.00ex;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
in</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
input direction</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
out</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
output direction</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
inout</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
bi-directional</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
od</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
open-drain output</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
pp</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
push-pull output</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
tri</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
tri-state (output disabled)</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
pu</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
internal pull-up enabled</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
pd</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
internal pull-down enabled</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
iin</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
invert input</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
iout</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
invert output</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
pulsate</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
pulsate output at a hardware-defined frequency and duty cycle</dd>
</dl>
<p>
Note that not all the flags may be supported by the particular GPIO controller.<p>
When executed with only the <a class="link-man" href="../4/gpio">gpio(4)</a> device name as argument, <b class="name">gpioctl</b> reads information about the GPIO device and displays it. At securelevel 0 the number of physically available pins is displayed, at higher securelevels the number of configured (set) pins is displayed.<p>
The options are as follows:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;q</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Operate quietly i.e. nothing is printed to stdout.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;s</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Only output a single number on stdout, representing either the state of the pin or the number of available pins if no pin number was passed as argument. This option is useful e.g. when <b class="name">gpioctl</b> is used in shell scripts to query the state of a pin.</dd>
</dl>
</div>
<div class="section">
<h1 id="x46494c4553">FILES</h1><dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
/dev/gpio<i class="arg">u</i></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
GPIO device unit <i class="arg">u</i> file.</dd>
</dl>
</div>
<div class="section">
<h1 id="x4558414d504c4553">EXAMPLES</h1> Configure pin 20 to have push-pull output:<p>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit"># gpioctl gpio0 20 set out pp</code></div>
</blockquote>
<p>
Write logical 1 to pin 20:<p>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit"># gpioctl gpio0 20 1</code></div>
</blockquote>
<p>
Attach a <a class="link-man" href="../4/onewire">onewire(4)</a> bus on a <a class="link-man" href="../4/gpioow">gpioow(4)</a> device on pin 4:<p>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit"># gpioctl gpio0 attach gpioow 4 0x01</code></div>
</blockquote>
<p>
Detach the gpioow0 device:<p>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit"># drvctl -d gpioow0</code></div>
</blockquote>
<p>
Configure pin 5 as output and name it error_led:<p>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit"># gpioctl gpio0 5 set out error_led</code></div>
</blockquote>
<p>
Toggle the error_led:<p>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit"># gpioctl gpio0 error_led 2</code></div>
</blockquote>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../4/gpio">gpio(4)</a>, <a class="link-man" href="../8/drvctl">drvctl(8)</a></div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> The <b class="name">gpioctl</b> command first appeared in <span class="unix">OpenBSD&#160;3.6</span> and <span class="unix">NetBSD&#160;4.0</span>.</div>
<div class="section">
<h1 id="x415554484f5253">AUTHORS</h1> <span class="author"></span>The <b class="name">gpioctl</b> program was written by <span class="author">Alexander Yurchenko</span> &#60;<a class="link-mail" href="mailto:grange@openbsd.org">grange@openbsd.org</a>&#62;. Device attachment was added by <span class="author">Marc Balmer</span> &#60;<a class="link-mail" href="mailto:marc@msys.ch">marc@msys.ch</a>&#62;.</div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
May 19, 2013</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
</html>

