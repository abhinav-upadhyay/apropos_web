<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="/static/man_pages/netbsd/style.css" type="text/css" media="all">
<title>
PDISK(8)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
PDISK(8)</td>
<td class="head-vol" align="center">
System Manager's Manual</td>
<td class="head-rtitle" align="right">
PDISK(8)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">pdisk</b> &#8212; <span class="desc">Apple partition table editor</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1><table class="synopsis">
<col style="width: 5.00ex;">
<col>
<tbody>
<tr>
<td>
pdisk</td>
<td>
&#91;<span class="opt"><b class="flag">&#45;acdfhilLrv</b></span>&#93; &#91;<span class="opt"><b class="flag">&#45;-abbr</b></span>&#93; &#91;<span class="opt"><b class="flag">&#45;-compute_size</b></span>&#93; &#91;<span class="opt"><b class="flag">&#45;-debug</b></span>&#93; &#91;<span class="opt"><b class="flag">&#45;-fname</b></span>&#93; &#91;<span class="opt"><b class="flag">&#45;-help</b></span>&#93; &#91;<span class="opt"><b class="flag">&#45;-interactive</b></span>&#93; &#91;<span class="opt"><b class="flag">&#45;-list</b> <i class="arg">device</i></span>&#93; &#91;<span class="opt"><b class="flag">&#45;-logical</b></span>&#93; &#91;<span class="opt"><b class="flag">&#45;-readonly</b></span>&#93; &#91;<span class="opt"><b class="flag">&#45;-version</b></span>&#93; &#91;<span class="opt"><i class="arg">device ...</i></span>&#93;</td>
</tr>
</tbody>
</table>
</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> <b class="name">pdisk</b> is a menu driven program which partitions disks using the standard Apple disk partitioning scheme described in "Inside Macintosh: Devices". It does not support the Intel/DOS partitioning scheme supported by <a class="link-man" href="../8/fdisk">fdisk(8)</a>.<p>
Supported options are:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">&#45;a</b></dt>
<dd class="list-tag" style="margin-left: 16.00ex;">
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">&#45;-abbr</b></dt>
<dd class="list-tag" style="margin-left: 16.00ex;">
Abbreviate the partition types shown in the partition list.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">&#45;c</b></dt>
<dd class="list-tag" style="margin-left: 16.00ex;">
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">&#45;-compute_size</b></dt>
<dd class="list-tag" style="margin-left: 16.00ex;">
Causes <b class="name">pdisk</b> to always ignore the device size listed in the partition table and compute the device size by other means.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">&#45;d</b></dt>
<dd class="list-tag" style="margin-left: 16.00ex;">
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">&#45;-debug</b></dt>
<dd class="list-tag" style="margin-left: 16.00ex;">
Turns on debugging. Doesn't add that much output, but does add a new command &#8216;x&#8217; to the editing commands that accesses an eclectic bunch of undocumented functionality.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">&#45;f</b></dt>
<dd class="list-tag" style="margin-left: 16.00ex;">
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">&#45;-fname</b></dt>
<dd class="list-tag" style="margin-left: 16.00ex;">
Show HFS volume names instead of partition name when available.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">&#45;h</b></dt>
<dd class="list-tag" style="margin-left: 16.00ex;">
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">&#45;-help</b></dt>
<dd class="list-tag" style="margin-left: 16.00ex;">
Prints a short help message.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">&#45;i</b></dt>
<dd class="list-tag" style="margin-left: 16.00ex;">
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">&#45;-interactive</b></dt>
<dd class="list-tag" style="margin-left: 16.00ex;">
Causes <b class="name">pdisk</b> to go into an interactive mode similar to the MacOS version of the program.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">&#45;l</b></dt>
<dd class="list-tag" style="margin-left: 16.00ex;">
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">&#45;-list</b> <i class="arg">device</i></dt>
<dd class="list-tag" style="margin-left: 16.00ex;">
List the partition tables for the specified <i class="arg">devices</i>.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">&#45;L</b></dt>
<dd class="list-tag" style="margin-left: 16.00ex;">
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">&#45;-logical</b></dt>
<dd class="list-tag" style="margin-left: 16.00ex;">
Show partition limits in logical blocks. Default is physical blocks.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">&#45;r</b></dt>
<dd class="list-tag" style="margin-left: 16.00ex;">
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">&#45;-readonly</b></dt>
<dd class="list-tag" style="margin-left: 16.00ex;">
Prevents <b class="name">pdisk</b> from writing to the device.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">&#45;v</b></dt>
<dd class="list-tag" style="margin-left: 16.00ex;">
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">&#45;-version</b></dt>
<dd class="list-tag" style="margin-left: 16.00ex;">
Prints the version number of <b class="name">pdisk</b>.</dd>
</dl>
<div class="subsection">
<h2 id="x45646974696e6720506172746974696f6e205461626c6573">Editing Partition Tables</h2> An argument which is simply the name of a <i class="arg">device</i> indicates that <b class="name">pdisk</b> should edit the partition table of that device.<p>
The current top level editing commands are:<p>
<pre style="margin-left: 5.00ex;" class="lit display">
C    (create with type also specified) 
c    create new partition 
d    delete a partition 
h    command help 
i    initialize partition map 
n    (re)name a partition 
P    (print ordered by base address) 
p    print the partition table 
q    quit editing (don't save changes) 
r    reorder partition entry in map 
s    change size of partition map 
t    change the type of an existing partition 
w    write the partition table</pre>
<p>
Commands which take arguments prompt for each argument in turn. You can also type any number of the arguments separated by spaces and those prompts will be skipped. The only exception to typeahead are the confirmation prompts on the <b class="cmd">i</b> and <b class="cmd">w</b> commands, since if we expect you to confirm the decision, we shouldn't undermine that by allowing you to be precipitate about it.<p>
Partitions are always specified by their number, which is the index of the partition entry in the partition map. Most of the commands will change the index numbers of all partitions after the affected partition. You are advised to print the table as frequently as necessary.<p>
The <b class="cmd">c</b> (create new partition) command is the only one with complicated arguments. The first argument is the base address (in blocks) of the partition. Besides a raw number, you can also specify a partition number followed by the letter &#8216;p&#8217; to indicate that the first block of the new partition should be the same as the first block of that existing free space partition. The second argument is the length of the partition in blocks. This can be a raw number or can be a partition number followed by the letter &#8216;p&#8217; to use the size of that partition or can be a number followed by &#8216;k&#8217;, &#8216;m&#8217;, or &#8216;g&#8217; to indicate the size in kilobytes, megabytes, or gigabytes respectively. (These are powers of 1024, of course, not powers of 1000.) The third argument is the name of the partition. This can be a single word without quotes, or a string surrounded by single or double quotes. The type of the created partition will be Apple_UNIX_SVR2, which is the correct type for use with <span class="unix">NetBSD</span>. This command will prompt for the unix filesystem slice to set in the Block Zero Block bits.<p>
The <b class="cmd">C</b> command is similar to the <b class="cmd">c</b> command, with the addition of a partition type argument after the other arguments. Choosing a type of Apple_UNIX_SVR2 will prompt for the unix filesystem slice to set in the Block Zero Block bits.<p>
The <b class="cmd">i</b> (initalize) command prompts for the size of the device.<p>
The <b class="cmd">n</b> (name) command allows the name of a partition to be changed. Note that the various "Apple_Driver" partitions depend on the name field for proper functioning. We are not aware of any other partition types with this limitation.<p>
The <b class="cmd">r</b> (reorder) command allows the index number of partitions to be changed. The index numbers are constrained to be a contiguous sequence.<p>
The <b class="cmd">t</b> (change partition type) command allows the type of a partition to be changed. Changing the type to Apple_UNIX_SVR2 will prompt for the unix filesystem slice to set in the Block Zero Block bits.<p>
The <b class="cmd">w</b> (write) command writes the partition map out. In order to use the new partition map you must reboot.</div>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../8/fdisk">fdisk(8)</a>, <a class="link-man" href="../8/newfs">newfs(8)</a></div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> The <b class="name">pdisk</b> utility was originally developed for MkLinux.</div>
<div class="section">
<h1 id="x415554484f5253">AUTHORS</h1> <span class="author">Eryk Vershen</span></div>
<div class="section">
<h1 id="x42554753">BUGS</h1> Some people believe there should really be just one disk partitioning utility.<p>
Filesystem volume names are out of place in a partition utility. This utility supports HFS volume names, but not volume names of any other filesystem types.<p>
The <b class="flag">&#45;-logical</b> option has not been heavily tested.<p>
<b class="name">pdisk</b> will first try to use <a class="link-man" href="../2/lseek">lseek(2)</a> with <span class="define">SEEK_END</span> to compute the size of the device. If this fails, it will try a binary search using <a class="link-man" href="../2/lseek">lseek(2)</a> and <a class="link-man" href="../2/read">read(2)</a> to find the end of the device. This has been observed to fail on some raw disk devices. As a workaround, try using the block device instead. <b class="name">pdisk</b> should probably read the disklabel using the <span class="define">DIOCGDINFO</span> <a class="link-man" href="../2/ioctl">ioctl(2)</a> to get the device size instead.</div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
April 24, 2003</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
</html>

