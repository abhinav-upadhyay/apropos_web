<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="/static/man_pages/netbsd/style.css" type="text/css" media="all">
<title>
BOOT(8)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
BOOT(8)</td>
<td class="head-vol" align="center">
System Manager's Manual</td>
<td class="head-rtitle" align="right">
BOOT(8)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">boot</b> &#8212; <span class="desc">system bootstrapping procedures</span></div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> This document provides information on using common features in the <span class="unix">NetBSD</span> boot loader. Additional information may be found in architecture-specific <a class="link-man" href="../8/boot">boot(8)</a> manual pages.<div class="subsection">
<h2 id="x426f6f742050726f746f636f6c">Boot Protocol</h2> In the native <span class="unix">NetBSD</span> boot protocol, options are passed from the boot loader to the kernel via flag bits in the <b class="var">boothowto</b> variable (see <a class="link-man" href="../9/boothowto">boothowto(9)</a>). Some boot loaders may also support other boot protocols.</div>
<div class="subsection">
<h2 id="x4d656e75">Menu</h2> Some boot loaders may present a menu, which may be configured via <a class="link-man" href="../5/boot.cfg">boot.cfg(5)</a>.</div>
<div class="subsection">
<h2 id="x496e746572616374697665206d6f6465">Interactive mode</h2> In interactive mode, the boot loader will present a prompt, allowing input of these commands:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 4.00ex;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">boot</b> &#91;<span class="opt"><b class="var">device</b>:</span>&#93;&#91;<span class="opt"><b class="var">filename</b></span>&#93; &#91;<span class="opt"><b class="flag">&#45;1234abcdmqsvxz</b></span>&#93;</dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
The default <b class="var">device</b> will be set to the disk that the boot loader was loaded from. To boot from an alternate disk, the full name of the device should be given at the prompt. <b class="var">device</b> is of the form <b class="var">xd</b> &#91;<span class="opt"><b class="var">N</b>&#91;<span class="opt"><b class="var">x</b></span>&#93;</span>&#93; where <b class="var">xd</b> is the device from which to boot, <b class="var">N</b> is the unit number, and <b class="var">x</b> is the partition letter.<p>
The following list of supported devices may vary from installation to installation:<p>
<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-hang">
<dt class="list-hang" style="margin-top: 0.00em;">
hd</dt>
<dd class="list-hang">
Hard disks.</dd>
<dt class="list-hang" style="margin-top: 0.00em;">
fd</dt>
<dd class="list-hang">
Floppy drives.</dd>
</dl>
<p>
The default <b class="var">filename</b> is <i class="file">netbsd</i>; if the boot loader fails to successfully open that image, it then tries <i class="file">netbsd.gz</i> (expected to be a kernel image compressed by gzip), followed by <i class="file">netbsd.old</i>, <i class="file">netbsd.old.gz</i>, <i class="file">onetbsd</i>, and finally <i class="file">onetbsd.gz</i>. Alternate system images can be loaded by just specifying the name of the image.<p>
Options are:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;1</b></dt>
<dd class="list-tag" style="margin-left: 3.00ex;">
Sets the machine-dependent flag <span class="symb">RB_MD1</span> in <b class="var">boothowto</b>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;2</b></dt>
<dd class="list-tag" style="margin-left: 3.00ex;">
Sets the machine-dependent flag <span class="symb">RB_MD2</span> in <b class="var">boothowto</b>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;3</b></dt>
<dd class="list-tag" style="margin-left: 3.00ex;">
Sets the machine-dependent flag <span class="symb">RB_MD3</span> in <b class="var">boothowto</b>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;4</b></dt>
<dd class="list-tag" style="margin-left: 3.00ex;">
Sets the machine-dependent flag <span class="symb">RB_MD4</span> in <b class="var">boothowto</b>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;a</b></dt>
<dd class="list-tag" style="margin-left: 3.00ex;">
Sets the <span class="symb">RB_ASKNAME</span> flag in <b class="var">boothowto</b>. This causes the kernel to prompt for the root file system device, the system crash dump device, and the path to <a class="link-man" href="../8/init">init(8)</a>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;b</b></dt>
<dd class="list-tag" style="margin-left: 3.00ex;">
Sets the <span class="symb">RB_HALT</span> flag in <b class="var">boothowto</b>. This causes subsequent reboot attempts to halt instead of rebooting.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;c</b></dt>
<dd class="list-tag" style="margin-left: 3.00ex;">
Sets the <span class="symb">RB_USERCONF</span> flag in <b class="var">boothowto</b>. This causes the kernel to enter the <a class="link-man" href="../4/userconf">userconf(4)</a> device configuration manager as soon as possible during the boot. <a class="link-man" href="../4/userconf">userconf(4)</a> allows devices to be enabled or disabled, and allows device locators (such as hardware addresses or bus numbers) to be modified before the kernel attempts to attach the devices.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;d</b></dt>
<dd class="list-tag" style="margin-left: 3.00ex;">
Sets the <span class="symb">RB_KDB</span> flag in <b class="var">boothowto</b>. Requests the kernel to enter debug mode, in which it waits for a connection from a kernel debugger; see <a class="link-man" href="../4/ddb">ddb(4)</a>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;m</b></dt>
<dd class="list-tag" style="margin-left: 3.00ex;">
Sets the <span class="symb">RB_MINIROOT</span> flag in <b class="var">boothowto</b>. Informs the kernel that a mini-root file system is present in memory.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;q</b></dt>
<dd class="list-tag" style="margin-left: 3.00ex;">
Sets the <span class="symb">AB_QUIET</span> flag in <b class="var">boothowto</b>. Boot the system in quiet mode.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;s</b></dt>
<dd class="list-tag" style="margin-left: 3.00ex;">
Sets the <span class="symb">RB_SINGLE</span> flag in <b class="var">boothowto</b>. Boot the system in single-user mode.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;v</b></dt>
<dd class="list-tag" style="margin-left: 3.00ex;">
Sets the <span class="symb">AB_VERBOSE</span> flag in <b class="var">boothowto</b>. Boot the system in verbose mode.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;x</b></dt>
<dd class="list-tag" style="margin-left: 3.00ex;">
Sets the <span class="symb">AB_DEBUG</span> flag in <b class="var">boothowto</b>. Boot the system with debug messages enabled.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;z</b></dt>
<dd class="list-tag" style="margin-left: 3.00ex;">
Sets the <span class="symb">AB_SILENT</span> flag in <b class="var">boothowto</b>. Boot the system in silent mode.</dd>
</dl>
</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">consdev</b> <b class="var">dev</b></dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
Immediately switch the console to the specified device <b class="var">dev</b> and reprint the banner. <b class="var">dev</b> must be one of <i class="arg">pc</i>, <i class="arg">com0</i>, <i class="arg">com1</i>, <i class="arg">com2</i>, <i class="arg">com3</i>, <i class="arg">com0kbd</i>, <i class="arg">com1kbd</i>, <i class="arg">com2kbd</i>, <i class="arg">com3kbd</i>, or <i class="arg">auto</i>. See <i class="link-sec"><a class="link-sec" href="#x436f6e736f6c652053656c656374696f6e20506f6c696379">Console Selection Policy</a></i> in <a class="link-man" href="../8/boot_console">boot_console(8)</a>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">dev</b> &#91;<span class="opt"><b class="var">device</b></span>&#93;</dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
Set the default drive and partition for subsequent filesystem operations. Without an argument, print the current setting. <b class="var">device</b> is of the form specified in <b class="flag">boot</b>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">help</b></dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
Print an overview about commands and arguments.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">ls</b> &#91;<span class="opt"><i class="file">path</i></span>&#93;</dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
Print a directory listing of <i class="file">path</i>, containing inode number, filename, and file type. <i class="file">path</i> can contain a device specification.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">quit</b></dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
Reboot the system.</dd>
</dl>
<p>
In an emergency, the bootstrap methods described in the <span class="unix">NetBSD</span> installation notes for the specific architecture can be used.</div>
</div>
<div class="section">
<h1 id="x46494c4553">FILES</h1><dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/boot</i></dt>
<dd class="list-tag" style="margin-left: 23.00ex;">
boot program code loaded by the primary bootstrap</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/netbsd</i></dt>
<dd class="list-tag" style="margin-left: 23.00ex;">
system code</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/netbsd.gz</i></dt>
<dd class="list-tag" style="margin-left: 23.00ex;">
gzip-compressed system code</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/usr/mdec/boot</i></dt>
<dd class="list-tag" style="margin-left: 23.00ex;">
master copy of the boot program (copy to /boot)</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/usr/mdec/bootxx_fstype</i></dt>
<dd class="list-tag" style="margin-left: 23.00ex;">
primary bootstrap for filesystem type fstype, copied to the start of the <span class="unix">NetBSD</span> partition by <a class="link-man" href="../8/installboot">installboot(8)</a>.</dd>
</dl>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> Architecture-specific <a class="link-man" href="../8/boot">boot(8)</a> manual pages (such as <a class="link-man" href="../8/emips/boot">emips/boot(8)</a>, <a class="link-man" href="../8/sparc64/boot">sparc64/boot(8)</a>, <a class="link-man" href="../8/x86/boot">x86/boot(8)</a>), <a class="link-man" href="../4/ddb">ddb(4)</a>, <a class="link-man" href="../4/userconf">userconf(4)</a>, <a class="link-man" href="../8/halt">halt(8)</a>, <a class="link-man" href="../8/installboot">installboot(8)</a>, <a class="link-man" href="../8/reboot">reboot(8)</a>, <a class="link-man" href="../8/rescue">rescue(8)</a>, <a class="link-man" href="../8/shutdown">shutdown(8)</a>, <a class="link-man" href="../9/boothowto">boothowto(9)</a></div>
<div class="section">
<h1 id="x42554753">BUGS</h1> The kernel file name must be specified before, not after, the boot options. Any <i class="arg">filename</i> specified after the boot options, e.g.:<p>
<pre style="margin-left: 5.00ex;" class="lit display">
<b class="flag">boot -d netbsd.test</b></pre>
<p>
is ignored, and the default kernel is booted.</div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
August 16, 2014</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
</html>

