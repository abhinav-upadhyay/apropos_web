<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="/static/man_pages/netbsd/style.css" type="text/css" media="all">
<title>
POSTINSTALL(8)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
POSTINSTALL(8)</td>
<td class="head-vol" align="center">
System Manager's Manual</td>
<td class="head-rtitle" align="right">
POSTINSTALL(8)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">postinstall</b> &#8212; <span class="desc">check and fix installation after system upgrades</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1><table class="synopsis">
<col style="width: 11.00ex;">
<col>
<tbody>
<tr>
<td>
postinstall</td>
<td>
&#91;<span class="opt"><b class="flag">&#45;a</b> <i class="arg">arch</i></span>&#93; &#91;<span class="opt"><b class="flag">&#45;d</b> <i class="arg">destdir</i></span>&#93; &#91;<span class="opt"><b class="flag">&#45;m</b> <i class="arg">machine</i></span>&#93; &#91;<span class="opt"><b class="flag">&#45;s</b> &#123;<i class="arg">srcdir</i> | <i class="arg">tgzdir</i> | <i class="arg">tgzfile</i>&#125;</span>&#93; &#91;<span class="opt"><b class="flag">&#45;x</b> <i class="arg">xsrcdir</i></span>&#93; <i class="arg">operation</i> &#91;<span class="opt"><i class="arg">item</i> &#91;<span class="opt">...</span>&#93;</span>&#93;</td>
</tr>
</tbody>
</table>
</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> The <b class="name">postinstall</b> utility performs post-installation checks and/or fixes on a system's configuration files. It is especially useful after system upgrades, e.g. after updating from <span class="unix">NetBSD&#160;1.6.2</span> to <span class="unix">NetBSD&#160;2.0</span>. The items to check or fix are divided in two groups: enabled by default and disabled by default. The latter are items that are dangerous for some reason, for example because they remove files which may be still in use. If no <i class="arg">items</i> are provided, the default checks or fixes are applied. Those which are disabled by default must be provided explicitly.<p>
Supported options:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 5.00ex;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;a</b> <i class="arg">arch</i></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
MACHINE_ARCH. Defaults to machine of the host operating system.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;d</b> <i class="arg">destdir</i></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
Destination directory to check. Defaults to <i class="file">/</i>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;m</b> <i class="arg">machine</i></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
MACHINE. Defaults to machine of the host operating system.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;s</b> &#123;<i class="arg">srcdir</i> | <i class="arg">tgzdir</i> | <i class="arg">tgzfile</i>&#125;</dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
The location of the reference files, or the <span class="unix">NetBSD</span> source files used to create the reference files. This may be specified in one of three ways:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;s</b> <i class="arg">srcdir</i></dt>
<dd class="list-tag" style="margin-left: 13.00ex;">
The top level directory of the <span class="unix">NetBSD</span> source tree. By default this is <i class="file">/usr/src</i>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;s</b> <i class="arg">tgzdir</i></dt>
<dd class="list-tag" style="margin-left: 13.00ex;">
A directory in which reference files have been extracted from a binary distribution of <span class="unix">NetBSD</span>. The files that are distributed in the &#8220;<i class="file">etc.tgz</i>&#8221; set file must be present. The files that are distributed in the &#8220;<i class="file">xetc.tgz</i>&#8221; set file are optional.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;s</b> <i class="arg">tgzfile</i></dt>
<dd class="list-tag" style="margin-left: 13.00ex;">
The location of a set file (or &#8220;tgz file&#8221;) such as &#8220;<i class="file">etc.tgz</i>&#8221; or &#8220;<i class="file">xetc.tgz</i>&#8221; from a binary distribution of <span class="unix">NetBSD</span>. Each set file is a compressed archive containing reference files, which will be extracted to the <i class="file">temproot</i> directory. Multiple <b class="flag">&#45;s</b> options may be used to specify multiple set files. The &#8220;<i class="file">etc.tgz</i>&#8221; set file must be specified. The &#8220;<i class="file">xetc.tgz</i>&#8221; set file is optional.</dd>
</dl>
</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;x</b> <i class="arg">xsrcdir</i></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
Location of the X11 source files. This must be a directory that contains a <span class="unix">NetBSD</span> xsrc tree.</dd>
</dl>
<p>
The <i class="arg">operation</i> argument may be one of:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 5.00ex;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">check</b></dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
Perform post-installation checks on items.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">diff</b> &#91;<span class="opt"><a class="link-man" href="../1/diff">diff(1)</a> <code class="lit">options</code></span>&#93;</dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
Similar to <b class="flag">check</b>, but also show the differences between the files.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">fix</b></dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
Apply fixes that <b class="flag">check</b> determines need to be applied. Not all items can be automatically fixed by <b class="name">postinstall</b>, and in some cases an error will be reported, after which manual intervention will be required.<p>
Conflicts between existing files in the target file system and new files from the <span class="unix">NetBSD</span> distribution are resolved by replacing the existing file with the new file; there is no attempt to merge the files. See <a class="link-man" href="../8/etcupdate">etcupdate(8)</a> for an alternative update method that is able to merge files.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">help</b></dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
Display a short help.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">list</b></dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
List available <i class="arg">items</i>, showing if they are enabled or disabled by default.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">usage</b></dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
Same as <b class="flag">help</b>.</dd>
</dl>
</div>
<div class="section">
<h1 id="x4558495420535441545553">EXIT STATUS</h1> The <b class="name">postinstall</b> utility exits 0 on success, and &gt;0 if an error occurs or a problem was found.</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../8/etcupdate">etcupdate(8)</a></div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> The <b class="name">postinstall</b> utility first appeared in <span class="unix">NetBSD&#160;1.6</span>.<p>
In <span class="unix">NetBSD&#160;4.0</span>, the <b class="flag">&#45;s</b> <i class="arg">tgzfile</i> option was added.<p>
In <span class="unix">NetBSD&#160;5.0</span>, the ability to specify multiple colon-separated files with a single <b class="flag">&#45;s</b> option was deprecated.<p>
In <span class="unix">NetBSD&#160;7.0</span>, the ability to specify multiple colon-separated files with a single <b class="flag">&#45;s</b> option was removed. Multiple <b class="flag">&#45;s</b> options must be used instead.</div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
December 21, 2014</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
</html>

