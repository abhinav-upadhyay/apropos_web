<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="..//static/man_pages/netbsd/style.css" type="text/css" media="all">
<title>
BOOT(8) (PMAX)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
BOOT(8)</td>
<td class="head-vol" align="center">
System Manager's Manual (PMAX)</td>
<td class="head-rtitle" align="right">
BOOT(8)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">boot</b> &#8212; <span class="desc">system bootstrapping procedures</span></div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> The <span class="unix">NetBSD</span> kernel is started by placing it near the beginning of physical memory and transferring to the entry point. Since the system is not reenterable, it is necessary to read it in from disk or tape each time it is to be bootstrapped.<div class="subsection">
<h2 id="x506f776572206661696c20616e64206372617368207265636f76657279">Power fail and crash recovery</h2> Normally, the system will boot itself at power-up or after crashes. An automatic consistency check of the file systems will be performed, and unless this fails, the system will resume multi-user operations.</div>
<div class="subsection">
<h2 id="x436f6c6420737461727473">Cold starts</h2> At power up, all DECstation ROMs consult the <b class="name">haltaction</b> environment variable in EEPROM to determine whether or not to attempt to boot automatically. If this variable is set to &#8216;h&#8217;, the ROM prints a prompt on the console and waits for user commands. If set to &#8216;b&#8217;, the ROM attempts to autoboot.</div>
</div>
<div class="section">
<h1 id="x44454353544154494f4e203231303020616e642033313030">DECSTATION 2100 and 3100</h1> On the DECstation 2100 and 3100, the path used for automatic booting is stored in the <b class="name">bootpath</b> environment variable.<br>
 The path is made up of a device type specifier (e.g., rz, tz, mop or tftp) followed by a triplet in the form (x,y,z), followed by a filename to load.<p>
Within the triplet, x is the controller (always 0), y is the SCSI id of the drive to boot from or 0 for net boots, and z is the partition to boot from (usually 0 for SCSI devices, always zero for network booting). For both disk and network boots, () may be specified instead of (0,0,0).<p>
The filename is optional for bootp/tftp and mop booting, since in these cases the network protocol can be used to determine which file to boot. When booting off the tape, no filename should be specified. When booting off of disk, the filename is optional but is usually specified. If no filename is specified when booting off disk, the following filenames are tried in order: <b class="name">netbsd.pmax</b>, <b class="name">netbsd</b>, <b class="name">netbsd.gz</b>, <b class="name">netbsd.bak</b>, <b class="name">netbsd.old</b>, <b class="name">onetbsd</b>, <b class="name">gennetbsd</b>. Generally, the kernel is named <b class="name">netbsd</b>.<p>
An example bootpath setting would be:<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit"><b class="cmd">setenv bootpath rz(0,1,0)netbsd</b></code></div>
</blockquote>
<p>
At the PROM prompt, the user may boot <span class="unix">NetBSD</span> with either the <b class="name">auto</b> or the <b class="name">boot</b> command. If the <b class="name">auto</b> command is used, the <b class="flag">&#45;a</b> argument is passed to the kernel, requesting a multi-user boot; otherwise the <b class="flag">&#45;s</b> argument is passed, requesting that <span class="unix">NetBSD</span> boot to single user mode.<p>
When either the <b class="name">boot</b> or the <b class="name">auto</b> command is issued with no arguments, the kernel specified in the bootpath environment variable is booted. With the <b class="name">boot</b> command, an alternative kernel may be specified with the <b class="flag">&#45;f</b> flag, followed by the path of the kernel to boot, as described above. For example:<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit"><b class="cmd">boot -f rz(0,4,0)netbsd.new</b></code></div>
</blockquote>
</div>
<div class="section">
<h1 id="x545552424f4348414e4e454c2044454373746174696f6e73">TURBOCHANNEL DECstations</h1> On TurboChannel machines (all DECstation 5000 models), the boot path is specified in the boot environment variable, along with any arguments to be passed to the kernel. Note that to specify boot arguments (e.g., <b class="flag">&#45;a</b>) when setting the <b class="name">boot</b> environment variable, the filename and arguments must be enclosed in quotes. For example:<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit"><b class="cmd">setenv boot</b> &#8220;<b class="cmd">3/rz4/netbsd -a</b>&#8221;</code></div>
</blockquote>
<p>
The device from which to boot is specified as the TurboChannel slot number, a TurboChannel-option-specific device name, and a path to the file to load, all separated by slashes. You can get a list of the devices installed in your TurboChannel slots (as well as any built-in devices which appear as TurboChannel slots) by typing the <b class="name">cnfg</b> command at the boot prompt. You can get more detailed information about a specific TurboChannel option by typing <b class="name">cnfg</b> followed by the slot number of that option.<p>
For SCSI devices, the option-specific device identifier is either rz# for disks or tz# for tapes, where # is the SCSI id of the device. For network devices, the option-specific protocol identifier is either mop or tftp. Filename requirements are as for the DECstation 2100 and 3100.<p>
To start <span class="unix">NetBSD</span> from the boot prompt, the <b class="name">boot</b> command must be used. With no arguments, this simply boots the default kernel with the default arguments as set with <b class="name">setenv</b> <b class="name">boot</b>. If no boot environment variable is set or if an alternative kernel is to be booted, the path of that kernel may be specified after the boot command as described above, and any arguments may be passed similarly. For example:<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit"><b class="cmd">boot 3/rz4/netbsd.new -a</b></code></div>
</blockquote>
</div>
<div class="section">
<h1 id="x4b45524e454c20415247554d454e5453">KERNEL ARGUMENTS</h1> The kernel supports the following arguments:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 5.00ex;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<code class="lit">a</code></dt>
<dd class="list-tag" style="margin-left: 3.00ex;">
Autoboot -- try and boot to multi-user mode without further input.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<code class="lit">m</code></dt>
<dd class="list-tag" style="margin-left: 3.00ex;">
Use a miniroot already present in memory.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<code class="lit">n</code></dt>
<dd class="list-tag" style="margin-left: 3.00ex;">
Prompt for the root file system device, the system crash dump device, and the path to <a class="link-man" href="../../8/init">init(8)</a>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<code class="lit">N</code></dt>
<dd class="list-tag" style="margin-left: 3.00ex;">
Do not prompt for the root file system device, the system crash dump device, and the path to <a class="link-man" href="../../8/init">init(8)</a>. If the configured-in devices are present, use them.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<code class="lit">s</code></dt>
<dd class="list-tag" style="margin-left: 3.00ex;">
Boot only to single-user mode.</dd>
</dl>
<p>
Since DECstation PROMs also parse any arguments with a leading "-", and reject unrecognized options, arguments other than "a" or "s" should be specified after the kernel name with no leading "-". For example:<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit"><b class="cmd">boot 3/rz4/netbsd ns</b></code></div>
</blockquote>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../../4/ddb">ddb(4)</a>, <a class="link-man" href="../../8/halt">halt(8)</a>, <a class="link-man" href="../../8/init">init(8)</a>, <a class="link-man" href="../../8/installboot">installboot(8)</a>, <a class="link-man" href="../../8/rc">rc(8)</a>, <a class="link-man" href="../../8/reboot">reboot(8)</a>, <a class="link-man" href="../../8/savecore">savecore(8)</a>, <a class="link-man" href="../../8/shutdown">shutdown(8)</a></div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> The <b class="name">boot</b> command is currently under development.</div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
April 8, 2003</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
</html>

