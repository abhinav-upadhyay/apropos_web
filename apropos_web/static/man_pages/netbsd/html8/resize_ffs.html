<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="../style.css" type="text/css" media="all">
<title>
RESIZE_FFS(8)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
RESIZE_FFS(8)</td>
<td class="head-vol" align="center">
System Manager's Manual</td>
<td class="head-rtitle" align="right">
RESIZE_FFS(8)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">resize_ffs</b> &#8212; <span class="desc">resize a file system on disk or in a file</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1><table class="synopsis">
<col style="width: 10.00ex;">
<col>
<tbody>
<tr>
<td>
resize_ffs</td>
<td>
&#91;<span class="opt"><b class="flag">&#45;cpvy</b></span>&#93; &#91;<span class="opt"><b class="flag">&#45;s</b> <i class="arg">size</i></span>&#93; <i class="arg">special</i></td>
</tr>
</tbody>
</table>
</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> <b class="name">resize_ffs</b> resizes a file system. <i class="arg">special</i> is the name of the raw disk device or file where the file system resides. <b class="name">resize_ffs</b> can both grow and shrink file systems. When growing, the disk device must of course be large enough to contain the new file system; <b class="name">resize_ffs</b> simply extends the file system data structures into the new space. When shrinking, <b class="name">resize_ffs</b> assumes this. <b class="name">resize_ffs</b> has to copy anything that currently resides in the space being shrunk away; there must be enough space free on the file system for this to succeed. If there isn't, <b class="name">resize_ffs</b> will complain and exit; when this happens, it attempts to always leave the file system in a consistent state, but it is probably a good idea to check the file system with <a class="link-man" href="../8/fsck">fsck(8)</a>.<p>
If no <b class="flag">&#45;s</b> option is provided, <b class="name">resize_ffs</b> will grow the file system to the underlying device size which is determined from <i class="arg">special</i>.<p>
The options are as follows:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;c</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Check to see if the new size would change the file system. No changes will be made to the file system.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;p</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Display a progress meter during the resize process.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;s</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Specify the file system size to which the file system should be resized. The size is given as the count of disk sectors, usually 512 bytes. It will not work correctly for file systems with other sector sizes. To see the exact value, have a look at the disk specification or the disklabel. Mostly used to shrink file systems.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;v</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Be more verbose.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;y</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Disable sanity questions made by <b class="name">resize_ffs</b>.</dd>
</dl>
</div>
<div class="section">
<h1 id="x5741524e494e47">WARNING</h1> <span class="emph">Interrupting</span> <b class="name">resize_ffs</b> <span class="emph">may leave your file system in an inconsistent state and require a</span> <span class="emph">restore from backup.</span> It attempts to write in the proper order to avoid problems, but as it is still considered experimental, you should take great care when using it.<p>
When <b class="name">resize_ffs</b> is applied to a consistent file system, it should always produce a consistent file system; if the file system is not consistent to start with, <b class="name">resize_ffs</b> may misbehave, anything from dumping core to completely curdling the data. It's probably wise to <a class="link-man" href="../8/fsck">fsck(8)</a> the file system before and after, just to be safe. You should be aware that just because <a class="link-man" href="../8/fsck">fsck(8)</a> is happy with the file system does not mean it is intact.</div>
<div class="section">
<h1 id="x4558495420535441545553">EXIT STATUS</h1> <b class="name">resize_ffs</b> exits with 0 on success. Any major problems will cause <b class="name">resize_ffs</b> to exit with the non-zero <a class="link-man" href="../3/exit">exit(3)</a> codes, so as to alert any invoking program or script that human intervention is required.</div>
<div class="section">
<h1 id="x4558414d504c4553">EXAMPLES</h1><blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit">resize_ffs <b class="flag">/dev/vg00/rlv1</b></code></div>
</blockquote>
<p>
will enlarge the file system on the Logical Volume <i class="file">/dev/vg00/lv1</i> from Volume Group vg00 to the current device size.</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../5/fs">fs(5)</a>, <a class="link-man" href="../8/fsck">fsck(8)</a>, <a class="link-man" href="../8/newfs">newfs(8)</a></div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> The <b class="name">resize_ffs</b> command first appeared in <span class="unix">NetBSD&#160;2.0</span>.</div>
<div class="section">
<h1 id="x415554484f5253">AUTHORS</h1> <span class="author">der Mouse</span> &#60;mouse@rodents.montreal.qc.ca&#62; (primary author) <span class="author">Jeff Rizzo</span> &#60;riz@NetBSD.org&#62; (Byteswapped file system and UFS2 support)<p>
A big bug-finding kudos goes to John Kohl for finding the rotational layout bug referred to in the <i class="link-sec"><a class="link-sec" href="#x5741524e494e47">WARNING</a></i> section above.</div>
<div class="section">
<h1 id="x42554753">BUGS</h1> Can fail to shrink a file system when there actually is enough space, because it does not distinguish between a block allocated as a block and a block fully occupied by two or more frags. This is unlikely to occur in practice; except for pathological cases, it can happen only when the new size is extremely close to the minimum possible.<p>
Has no intelligence whatever when it comes to allocating blocks to copy data into when shrinking.<p>
Doesn't currently support shrinking FFSv2 file systems.</div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
April 6, 2015</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
</html>

