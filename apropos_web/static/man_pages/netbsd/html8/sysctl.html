<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="/static/man_pages/netbsd/style.css" type="text/css" media="all">
<title>
SYSCTL(8)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
SYSCTL(8)</td>
<td class="head-vol" align="center">
System Manager's Manual</td>
<td class="head-rtitle" align="right">
SYSCTL(8)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">sysctl</b> &#8212; <span class="desc">get or set kernel state</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1><table class="synopsis">
<col style="width: 6.00ex;">
<col>
<tbody>
<tr>
<td>
sysctl</td>
<td>
&#91;<span class="opt"><b class="flag">&#45;AdeMnq</b></span>&#93; &#91;<span class="opt"><b class="flag">&#45;r</b> | <b class="flag">&#45;x</b></span>&#93; &#91;<span class="opt"><i class="arg">name ...</i></span>&#93;</td>
</tr>
</tbody>
</table>
<br>
<table class="synopsis">
<col style="width: 6.00ex;">
<col>
<tbody>
<tr>
<td>
sysctl</td>
<td>
&#91;<span class="opt"><b class="flag">&#45;nq</b></span>&#93; &#91;<span class="opt"><b class="flag">&#45;r</b> | <b class="flag">&#45;x</b></span>&#93; <b class="flag">&#45;w</b> <i class="arg">name</i><code class="lit">[?]=</code><i class="arg">value ...</i></td>
</tr>
</tbody>
</table>
<br>
<table class="synopsis">
<col style="width: 6.00ex;">
<col>
<tbody>
<tr>
<td>
sysctl</td>
<td>
&#91;<span class="opt"><b class="flag">&#45;en</b></span>&#93; &#91;<span class="opt"><b class="flag">&#45;r</b> | <b class="flag">&#45;x</b></span>&#93; <b class="flag">&#45;a</b></td>
</tr>
</tbody>
</table>
<br>
<table class="synopsis">
<col style="width: 6.00ex;">
<col>
<tbody>
<tr>
<td>
sysctl</td>
<td>
&#91;<span class="opt"><b class="flag">&#45;nq</b></span>&#93; &#91;<span class="opt"><b class="flag">&#45;r</b> | <b class="flag">&#45;x</b></span>&#93; <b class="flag">&#45;f</b> <i class="arg">file</i></td>
</tr>
</tbody>
</table>
</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> The <b class="name">sysctl</b> utility retrieves kernel state and allows processes with appropriate privilege to set kernel state. The state to be retrieved or set is described using a ``Management Information Base'' (``MIB'') style name, described as a dotted set of components. The &#8216;/&#8217; character may also be used as a separator and a leading separator character is accepted. If <i class="arg">name</i> specifies a non-leaf node in the MIB, all the nodes underneath <i class="arg">name</i> will be printed.<p>
The following options are available:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;A</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
List all the known MIB names including tables, unless any MIB arguments or <b class="flag">&#45;f</b> <i class="arg">file</i> are given. Those with string or integer values will be printed as with the <b class="flag">&#45;a</b> flag; for table or structure values that <b class="name">sysctl</b> is not able to print, the name of the utility to retrieve them is given. Errors in retrieving or setting values will be directed to stdout instead of stderr.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;a</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
List all the currently available string or integer values. The use of a solitary separator character (either &#8216;.&#8217; or &#8216;/&#8217;) by itself has the same effect. Any given <i class="arg">name</i> arguments are ignored if this option is specified.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;d</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Descriptions of each of the nodes selected will be printed instead of their values.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;e</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Separate the name and the value of the variable(s) with &#8216;<code class="lit">=</code>&#8217;. This is useful for producing output which can be fed back to the <b class="name">sysctl</b> utility. This option is ignored if <b class="flag">&#45;n</b> is specified or a variable is being set.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;f</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Specifies the name of a file to read and process. Blank lines and comments (beginning with &#8216;<code class="lit">#</code>&#8217;) are ignored. Line continuations with &#8216;<code class="lit">&#92;</code>&#8217; are permitted. Remaining lines are processed similarly to command line arguments of the form <i class="arg">name</i> or <i class="arg">name</i><code class="lit">=</code><i class="arg">value</i>. The <b class="flag">&#45;w</b> flag is implied by <b class="flag">&#45;f</b>. Any <i class="arg">name</i> arguments are ignored.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;M</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Makes <b class="name">sysctl</b> print the MIB instead of any of the actual values contained in the MIB. This causes the entire MIB to be printed unless specific MIB arguments or <b class="flag">&#45;f</b> <i class="arg">file</i> are also given.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;n</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Specifies that the printing of the field name should be suppressed and that only its value should be output. This flag is useful for setting shell variables. For example, to save the pagesize in variable psize, use:<pre style="margin-left: 5.00ex;" class="lit display">
set psize=`sysctl -n hw.pagesize`</pre>
</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;q</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Used to indicate that nothing should be printed for reads or writes unless an error is detected. For reads, not finding a variable does not print an error, but exits with an error code. This is useful just for testing that a variable exists.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;r</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Raw output form. Values printed are in their raw binary forms as retrieved directly from the kernel. Some additional nodes that <b class="name">sysctl</b> cannot print directly can be retrieved with this flag. This option conflicts with the <b class="flag">&#45;x</b> option.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;w</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Sets the MIB style name given to the value given. The MIB style name and value must be separated by &#8216;<code class="lit">=</code>&#8217; with no whitespace. To prevent an error if the MIB style name does not exist (as would be the case with optional kernel components), one can separate the MIB style name and the value with &#8216;<code class="lit">?=</code>&#8217;. Only integral and string values can be set via this method.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;x</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Makes <b class="name">sysctl</b> print the requested value in a hexadecimal representation instead of its regular form. If specified more than once, the output for each value resembles that of <a class="link-man" href="../1/hexdump">hexdump(1)</a> when given the <b class="flag">&#45;C</b> flag. This option conflicts with the <b class="flag">&#45;r</b> option.</dd>
</dl>
<p>
The &#8216;<code class="lit">proc</code>&#8217; top-level MIB has a special semantic: it represent per-process values and as such may differ from one process to another. The second-level name is the pid of the process (in decimal form), or the special word &#8216;<code class="lit">curproc</code>&#8217;. For variables below &#8216;<code class="lit">proc.&#60;pid&#62;.rlimit</code>&#8217;, the integer value may be replaced with the string &#8216;<code class="lit">unlimited</code>&#8217; if it matches the magic value used to disable a limit.<p>
The information available from <b class="name">sysctl</b> consists of integers, strings, and tables. The tabular information can only be retrieved by special purpose programs such as <b class="name">ps</b>, <b class="name">systat</b>, and <b class="name">netstat</b>. See <a class="link-man" href="../7/sysctl">sysctl(7)</a> for description of available MIBs.</div>
<div class="section">
<h1 id="x4352454154494f4e20414e442044454c4554494f4e">CREATION AND DELETION</h1> New nodes are allowed to be created by the superuser when the kernel is running at security level 0. These new nodes may refer to existing kernel data or to new data that is only instrumented by <a class="link-man" href="../3/sysctl">sysctl(3)</a> itself.<p>
The syntax for creating new nodes is &#8220;//create=new.node.path&#8221; followed by one or more of the following attributes separated by commas. The use of a double separator (both &#8216;/&#8217; and &#8216;.&#8217; can be used as separators) as the prefix tells sysctl that the first series of tokens is not a MIB name, but a command. It is recommended that the double separator preceding the command not be the same as the separator used in naming the MIB entry so as to avoid possible parse conflicts. The &#8220;value&#8221; assigned, if one is given, must be last.<p>
<ul style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-bul">
<li class="list-bul" style="margin-top: 0.00em;">
<i class="arg">type=</i>&#60;<i class="arg">T</i>&#62; where <i class="arg">T</i> must be one of &#8220;node&#8221;, &#8220;int&#8221;, &#8220;string&#8221;, &#8220;quad&#8221;, or &#8220;struct&#8221;. If the type is omitted, the &#8220;node&#8221; type is assumed.</li>
<li class="list-bul" style="margin-top: 0.00em;">
<i class="arg">size=</i>&#60;<i class="arg">S</i>&#62; here, <i class="arg">S</i> asserts the size of the new node. Nodes of type &#8220;node&#8221; should not have a size set. The size may be omitted for nodes of types &#8220;int&#8221; or &#8220;quad&#8221;. If the size is omitted for a node of type &#8220;string&#8221;, the size will be determined by the length of the given value, or by the kernel for kernel strings. Nodes of type &#8220;struct&#8221; must have their size explicitly set.</li>
<li class="list-bul" style="margin-top: 0.00em;">
<i class="arg">addr=</i>&#60;<i class="arg">A</i>&#62; or <i class="arg">symbol=</i>&#60;<i class="arg">A</i>&#62; The kernel address of the data being instrumented. If &#8220;symbol&#8221; is used, the symbol must be globally visible to the in-kernel <a class="link-man" href="../4/ksyms">ksyms(4)</a> driver.</li>
<li class="list-bul" style="margin-top: 0.00em;">
<i class="arg">n=</i>&#60;<i class="arg">N</i>&#62; The MIB number to be assigned to the new node. If no number is specified, the kernel will assign a value.</li>
<li class="list-bul" style="margin-top: 0.00em;">
<i class="arg">flags=</i>&#60;<i class="arg">F</i>&#62; A concatenated string of single letters that govern the behavior of the node. Flags currently available are:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
a</dt>
<dd class="list-tag" style="margin-left: 3.00ex;">
Allow anyone to write to the node, if it is writable.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
h</dt>
<dd class="list-tag" style="margin-left: 3.00ex;">
&#8220;Hidden&#8221;. <b class="name">sysctl</b> must be invoked with <b class="flag">&#45;A</b> or the hidden node must be specifically requested in order to see it</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
i</dt>
<dd class="list-tag" style="margin-left: 3.00ex;">
&#8220;Immediate&#8221;. Makes the node store data in itself, rather than allocating new space for it. This is the default for nodes of type &#8220;int&#8221; and &#8220;quad&#8221;. This is the opposite of owning data.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
o</dt>
<dd class="list-tag" style="margin-left: 3.00ex;">
&#8220;Own&#8221;. When the node is created, separate space will be allocated to store the data to be instrumented. This is the default for nodes of type &#8220;string&#8221; and &#8220;struct&#8221; where it is not possible to guarantee sufficient space to store the data in the node itself.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
p</dt>
<dd class="list-tag" style="margin-left: 3.00ex;">
&#8220;Private&#8221;. Nodes that are marked private, and children of nodes so marked, are only viewable by the superuser. Be aware that the immediate data that some nodes may store is not necessarily protected by this.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
x</dt>
<dd class="list-tag" style="margin-left: 3.00ex;">
&#8220;Hexadecimal&#8221;. Make <b class="name">sysctl</b> default to hexadecimal display of the retrieved value</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
r</dt>
<dd class="list-tag" style="margin-left: 3.00ex;">
&#8220;Read-only&#8221;. The data instrumented by the given node is read-only. Note that other mechanisms may still exist for changing the data. This is the default for nodes that instrument data.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
w</dt>
<dd class="list-tag" style="margin-left: 3.00ex;">
&#8220;Writable&#8221;. The data instrumented by the given node is writable at any time. This is the default for nodes that can have children.</dd>
</dl>
<p>
</li>
<li class="list-bul" style="margin-top: 0.00em;">
<i class="arg">value=</i>&#60;<i class="arg">V</i>&#62; An initial starting value for a new node that does not reference existing kernel data. Initial values can only be assigned for nodes of the &#8220;int&#8221;, &#8220;quad&#8221;, and &#8220;string&#8221; types.</li>
</ul>
<p>
New nodes must fit the following set of criteria:<p>
<ul style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-bul">
<li class="list-bul" style="margin-top: 0.00em;">
If the new node is to address an existing kernel object, only one of the &#8220;symbol&#8221; or &#8220;addr&#8221; arguments may be given.</li>
<li class="list-bul" style="margin-top: 0.00em;">
The size for a &#8220;struct&#8221; type node must be specified; no initial value is expected or permitted.</li>
<li class="list-bul" style="margin-top: 0.00em;">
Either the size or the initial value for a &#8220;string&#8221; node must be given.</li>
<li class="list-bul" style="margin-top: 0.00em;">
The node which will be the parent of the new node must be writable.</li>
</ul>
<p>
If any of the given parameters describes an invalid configuration, <b class="name">sysctl</b> will emit a diagnostic message to the standard error and exit.<p>
Descriptions can be added by the super-user to any node that does not have one, provided that the node is not marked with the &#8220;PERMANENT&#8221; flag. The syntax is similar to the syntax for creating new nodes with the exception of the keyword that follows the double separator at the start of the command: &#8220;//describe=new.node.path=new node description&#8221;. Once a description has been added, it cannot be changed or removed.<p>
When destroying nodes, only the path to the node is necessary, i.e., &#8220;//destroy=old.node.path&#8221;. No other parameters are expected or permitted. Nodes being destroyed must have no children, and their parent must be writable. Nodes that are marked with the &#8220;<span class="define">PERMANENT</span>&#8221; flag (as assigned by the kernel) may not be deleted.<p>
In all cases, the initial &#8216;=&#8217; that follows the command (eg, &#8220;create&#8221;, &#8220;destroy&#8221;, or &#8220;describe&#8221;) may be replaced with another instance of the separator character, provided that the same separator character is used for the length of the name specification.</div>
<div class="section">
<h1 id="x46494c4553">FILES</h1><dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/etc/sysctl.conf</i></dt>
<dd class="list-tag" style="margin-left: 16.00ex;">
<b class="name">sysctl</b> variables set at boot time</dd>
</dl>
</div>
<div class="section">
<h1 id="x4558414d504c4553">EXAMPLES</h1> For example, to retrieve the maximum number of processes allowed in the system, one would use the following request:<pre style="margin-left: 5.00ex;" class="lit display">
sysctl kern.maxproc</pre>
<p>
To set the maximum number of processes allowed in the system to 1000, one would use the following request:<pre style="margin-left: 5.00ex;" class="lit display">
sysctl -w kern.maxproc=1000</pre>
<p>
Information about the system clock rate may be obtained with:<pre style="margin-left: 5.00ex;" class="lit display">
sysctl kern.clockrate</pre>
<p>
Information about the load average history may be obtained with:<pre style="margin-left: 5.00ex;" class="lit display">
sysctl vm.loadavg</pre>
<p>
To view the values of the per-process variables of the current shell, the request:<pre style="margin-left: 5.00ex;" class="lit display">
sysctl proc.$$</pre>
can be used if the shell interpreter replaces $$ with its pid (this is true for most shells).<p>
To redirect core dumps to the <i class="file">/var/tmp/</i>&#60;username&#62; directory,<pre style="margin-left: 5.00ex;" class="lit display">
sysctl -w proc.$$.corename=/var/tmp/%u/%n.core</pre>
should be used.<pre style="margin-left: 5.00ex;" class="lit display">
sysctl -w proc.curproc.corename=/var/tmp/%u/%n.core</pre>
changes the value for the sysctl process itself, and will not have the desired effect.<p>
To create the root of a new sub-tree called &#8220;local&#8221; add some children to the new node, and some descriptions:<pre style="margin-left: 5.00ex;" class="lit display">
sysctl -w //create=local 
sysctl -w //describe=local=my local sysctl tree 
sysctl -w //create=local.esm_debug,type=int,symbol=esm_debug,flags=w 
sysctl -w //describe=local.esm_debug=esm driver debug knob 
sysctl -w //create=local.audiodebug,type=int,symbol=audiodebug,flags=w 
sysctl -w //describe=local.audiodebug=generic audio debug knob</pre>
Note that the children are made writable so that the two debug settings in question can be tuned arbitrarily.<p>
To destroy that same subtree:<pre style="margin-left: 5.00ex;" class="lit display">
sysctl -w //destroy=local.esm_debug 
sysctl -w //destroy=local.audiodebug 
sysctl -w //destroy=local</pre>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../3/sysctl">sysctl(3)</a>, <a class="link-man" href="../4/ksyms">ksyms(4)</a>, <a class="link-man" href="../7/sysctl">sysctl(7)</a></div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> <b class="name">sysctl</b> first appeared in <span class="unix">4.4BSD</span>.</div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
August 2, 2011</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
</html>

