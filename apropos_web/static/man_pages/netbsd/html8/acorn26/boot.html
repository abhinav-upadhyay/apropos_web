<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="../../style.css" type="text/css" media="all">
<title>
BOOT26(8) (Acorn26)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
BOOT26(8)</td>
<td class="head-vol" align="center">
System Manager's Manual (Acorn26)</td>
<td class="head-rtitle" align="right">
BOOT26(8)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">boot26</b> &#8212; <span class="desc">Bootloader for <span class="unix">NetBSD</span>/acorn26</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1><table class="synopsis">
<col style="width: 6.00ex;">
<col>
<tbody>
<tr>
<td>
*boot26</td>
<td>
&#91;<span class="opt"><b class="flag">&#45;acdqsv</b></span>&#93; &#91;<span class="opt"><i class="arg">file</i></span>&#93;</td>
</tr>
</tbody>
</table>
</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> <b class="name">boot26</b> is a program that runs under RISC OS and launches the <span class="unix">NetBSD</span>/acorn26 kernel.  It needs to be installed in a RISC OS filesystem and given file type FFA (Module).  The kernel it is to load also needs to be stored in a RISC OS filesystem.<p>
It takes the following options, which set flags in the <b class="var">boothowto</b> variable in the booted kernel (see <a class="link-man" href="../../9/boothowto">boothowto(9)</a>):<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;a</b></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
(<span class="define">RB_ASKNAME</span>) Cause the kernel to prompt the user for the name of the device containing the root filesystem.  This also causes <b class="name">boot26</b> to prompt for the name of the kernel to be loaded.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;s</b></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
(<span class="define">RB_SINGLE</span>) Cause the kernel to ask <b class="name">init</b> to boot into single-user mode.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;d</b></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
(<span class="define">RB_KDB</span>) Cause the kernel to enter the kernel debugger as soon as possible.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;c</b></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
(<span class="define">RB_USERCONF</span>) Enter the in-kernel device configuration manager before attaching any devices.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;q</b></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
(<span class="define">RB_QUIET</span>) Cause the kernel to emit fewer messages than normal while starting up.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;v</b></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
(<span class="define">RB_VERBOSE</span>) Cause the kernel to emit more messages than normal while starting up.</dd>
</dl>
<p>
<b class="name">boot26</b> attempts to load the kernel from the RISC OS file specified as <i class="arg">file</i>, or from <i class="file">netbsd</i> if <i class="arg">file</i> is not specified.  The file must be an ELF image, and may have been compressed using <a class="link-man" href="../../1/gzip">gzip(1)</a>.<div class="subsection">
<h2 id="x5573652061732061206d6f64756c65">Use as a module</h2> <b class="name">boot26</b> is implemented as a RISC OS relocatable module.  It can be loaded into memory by running &#8216;<code class="lit">*RMLoad boot26</code>&#8217;. After this, <span class="unix">NetBSD</span> can be booted by running &#8216;<code class="lit">*boot26</code>&#8217; as usual, but the command will be handled by the module.<p>
It should also be possible to arrange for <b class="name">boot26</b> to be loaded from ROM (e.g. from the ROM on an expansion card), in which case <span class="unix">NetBSD</span> could be made to boot automatically by making <b class="name">boot26</b> the configured language using &#8216;<code class="lit">*Configure Language</code>&#8217;.</div>
<div class="subsection">
<h2 id="x53637265656e20646973706c6179">Screen display</h2> When it starts up, <b class="name">boot26</b> displays the current memory map. Each character in the map represents one page of (physical) RAM.  The ticks along the top are to stop you getting lost.  The characters in the map indicate what the memory's being used for (actually where it's logically mapped):<p>
<pre style="margin-left: 5.00ex;" class="lit display">
0 -&gt; zero-page 
+ -&gt; boot26 workspace 
* -&gt; Free space (boot26 wants to put the kernel here) 
d -&gt; RAM disc 
s -&gt; System sprite area 
m -&gt; RMA 
h -&gt; System heap/stack 
f -&gt; Font cache 
S -&gt; Screen memory</pre>
<p>
On a machine with 32k pages (which is all <span class="unix">NetBSD</span>/acorn26 supports), the left half of the first line is potential screen memory, and hence not used by <b class="name">boot26</b>. The next page is usually zero page under RISC OS, and is used for zero page under <span class="unix">NetBSD</span> as well.  The next is usually the system heap under RISC OS, and is used for process 0's kernel stack under <span class="unix">NetBSD</span>. The next is used for the message buffer under <span class="unix">NetBSD</span>. Pages from there on are used to load the kernel, and must be free if <b class="name">boot26</b> is to do so successfully.  Future bootloaders should load the kernel into whatever pages are free, then kick out RISC OS and shuffle them into the right shape.  This is left as an exercise for the enthusiastic reader.</div>
</div>
<div class="section">
<h1 id="x46494c4553">FILES</h1><dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="file">/usr/mdec/boot26,ffa</i></dt>
<dd class="list-tag" style="margin-left: 32.00ex;">
The location of <b class="name">boot26</b> in the <span class="unix">NetBSD</span> filesystem.</dd>
</dl>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../../1/gzip">gzip(1)</a>, <a class="link-man" href="../../2/reboot">reboot(2)</a>, <a class="link-man" href="../../4/ddb">ddb(4)</a>, <a class="link-man" href="../../4/userconf">userconf(4)</a>, <a class="link-man" href="../../8/init">init(8)</a>, <a class="link-man" href="../../9/boothowto">boothowto(9)</a></div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> <b class="name">boot26</b> was introduced in <span class="unix">NetBSD&#160;1.6</span> as a replacement for the original <span class="unix">NetBSD</span>/arm26 bootloader, which was written in BBC BASIC.</div>
<div class="section">
<h1 id="x42554753">BUGS</h1> <b class="name">boot26</b> cannot load kernels from a <span class="unix">NetBSD</span> filesystem.</div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
September 4, 2009</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
</html>

