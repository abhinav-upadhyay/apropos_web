<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="..//static/man_pages/netbsd/style.css" type="text/css" media="all">
<title>
NDISCVT(8) (i386)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
NDISCVT(8)</td>
<td class="head-vol" align="center">
System Manager's Manual (i386)</td>
<td class="head-rtitle" align="right">
NDISCVT(8)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">ndiscvt</b> &#8212; <span class="desc">convert Windows&#174; NDIS drivers for use with <span class="unix">NetBSD</span></span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1><table class="synopsis">
<col style="width: 7.00ex;">
<col>
<tbody>
<tr>
<td>
ndiscvt</td>
<td>
&#91;<span class="opt"><b class="flag">&#45;O</b></span>&#93; &#91;<span class="opt"><b class="flag">&#45;i</b> <i class="arg">inffile</i></span>&#93; &#91;<span class="opt"><b class="flag">&#45;n</b> <i class="arg">devname</i></span>&#93; &#91;<span class="opt"><b class="flag">&#45;o</b> <i class="arg">outfile</i></span>&#93; <b class="flag">&#45;s</b> <i class="arg">sysfile</i></td>
</tr>
</tbody>
</table>
</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> The <b class="name">ndiscvt</b> utility transforms a Windows&#174; NDIS driver into a data file which is used to build an ndis compatibility driver module. Windows&#174; drivers consist of two main parts: a <i class="file">.SYS</i> file, which contains the actual driver executable code, and an <i class="file">.INF</i> file, which provides the Windows&#174; installer with device identifier information and a list of driver-specific registry keys. The <b class="name">ndiscvt</b> utility can convert these files into a header file that is compiled into <i class="file">if_ndis.c</i> to create an object code module that can be linked into the <span class="unix">NetBSD</span> kernel.<p>
The <i class="file">.INF</i> file is typically required since only it contains device identification data such as PCI vendor and device IDs or PCMCIA indentifier strings. The <i class="file">.INF</i> file may be optionally omitted however, in which case the <b class="name">ndiscvt</b> utility will only perform the conversion of the <i class="file">.SYS</i> file. This is useful for debugging purposes only.</div>
<div class="section">
<h1 id="x4f5054494f4e53">OPTIONS</h1> The options are as follows:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 5.00ex;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;i</b> <i class="arg">inffile</i></dt>
<dd class="list-tag" style="margin-left: 13.00ex;">
Open and parse the specified <i class="file">.INF</i> file when performing conversion. The <b class="name">ndiscvt</b> utility will parse this file and emit a device identification structure and registry key configuration structures which will be used by the ndis driver and ndisapi kernel subsystem. If this is omitted, <b class="name">ndiscvt</b> will emit a dummy configuration structure only.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;n</b> <i class="arg">devname</i></dt>
<dd class="list-tag" style="margin-left: 13.00ex;">
Specify an alternate name for the network device/interface which will be created when the driver is instantiated. If you need to load more than one NDIS driver into your system (i.e., if you have two different network cards in your system which require NDIS driver support), each module you create must have a unique name. Device can not be larger than <span class="define">IFNAMSIZ</span>. If no name is specified, the driver will use the default a default name (&#8220;<code class="lit">ndis</code>&#8221;).</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;O</b></dt>
<dd class="list-tag" style="margin-left: 13.00ex;">
Generate both an <i class="file">ndis_driver_data.h</i> file and an <i class="file">ndis_driver.data.o</i> file. The latter file will contain a copy of the Windows&#174; <i class="file">.SYS</i> driver image encoded as a <span class="unix">NetBSD</span> ELF object file (created with <a class="link-man" href="../../1/objcopy">objcopy(1)</a>). Turning the Windows&#174; driver image directly into an object code file saves disk space and compilation time.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;o</b> <i class="arg">outfile</i></dt>
<dd class="list-tag" style="margin-left: 13.00ex;">
Specify the output file in which to place the resulting data. This can be any file pathname. If <i class="arg">outfile</i> is a single dash (&#8216;<b class="flag">&#45;</b>&#8217;), the data will be written to the standard output. The <i class="file">if_ndis.c</i> module expects to find the driver data in a file called <i class="file">ndis_driver_data.h</i>, so it is recommended that this name be used.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;s</b> <i class="arg">sysfile</i></dt>
<dd class="list-tag" style="margin-left: 13.00ex;">
Open and parse the specified <i class="file">.SYS</i> file. This file must contain a Windows&#174; driver image. The <b class="name">ndiscvt</b> utility will perform some manipulation of the sections within the executable file to make runtime linking within the kernel a little easier and then convert the image into a data array.</dd>
</dl>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../../1/ld">ld(1)</a>, <a class="link-man" href="../../1/objcopy">objcopy(1)</a>, <a class="link-man" href="../../4/ndis">ndis(4)</a></div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> The <b class="name">ndiscvt</b> utility first appeared in <span class="unix">FreeBSD&#160;5.3</span>.</div>
<div class="section">
<h1 id="x415554484f5253">AUTHORS</h1> <span class="author"></span>The <b class="name">ndiscvt</b> utility was written by <span class="author">Bill Paul</span> &#60;<a class="link-mail" href="mailto:wpaul@windriver.com">wpaul@windriver.com</a>&#62;. The <a class="link-man" href="../../1/lex">lex(1)</a> and <a class="link-man" href="../../1/yacc">yacc(1)</a> <i class="file">.INF</i> file parser was written by <span class="author">Matthew Dodd</span> &#60;<a class="link-mail" href="mailto:mdodd@FreeBSD.org">mdodd@FreeBSD.org</a>&#62;.</div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
December 24, 2007</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
</html>

