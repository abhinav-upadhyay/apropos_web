<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="..//static/man_pages/netbsd/style.css" type="text/css" media="all">
<title>
CRASH(8) (VAX)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
CRASH(8)</td>
<td class="head-vol" align="center">
System Manager's Manual (VAX)</td>
<td class="head-rtitle" align="right">
CRASH(8)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">crash</b> &#8212; <span class="desc">UNIX system failures</span></div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> This section explains what happens when the system crashes and (very briefly) how to analyze crash dumps.<p>
When the system crashes voluntarily it prints a message of the form<p>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit">panic: why i gave up the ghost</code></div>
</blockquote>
<p>
on the console, takes a dump on a mass storage peripheral, and then invokes an automatic reboot procedure as described in <a class="link-man" href="../../8/reboot">reboot(8)</a>. (If auto-reboot is disabled on the front panel of the machine the system will simply halt at this point.) Unless some unexpected inconsistency is encountered in the state of the file systems due to hardware or software failure, the system will then resume multi-user operations.<p>
The system has a large number of internal consistency checks; if one of these fails, then it will panic with a very short message indicating which one failed. In many instances, this will be the name of the routine which detected the error, or a two-word description of the inconsistency. A full understanding of most panic messages requires perusal of the source code for the system.<p>
The most common cause of system failures is hardware failure, which can reflect itself in different ways.  Here are the messages which are most likely, with some hints as to causes. Left unstated in all cases is the possibility that hardware or software error produced the message in some unexpected way.<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
iinit</dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
This cryptic panic message results from a failure to mount the root filesystem during the bootstrap process. Either the root filesystem has been corrupted, or the system is attempting to use the wrong device as root filesystem. Usually, an alternative copy of the system binary or an alternative root filesystem can be used to bring up the system to investigate.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
Can't exec /sbin/init</dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
This is not a panic message, as reboots are likely to be futile. Late in the bootstrap procedure, the system was unable to locate and execute the initialization process, <a class="link-man" href="../../8/init">init(8)</a>. The root filesystem is incorrect or has been corrupted, or the mode or type of /sbin/init forbids execution.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
IO err in push</dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
hard IO err in swap</dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
The system encountered an error trying to write to the paging device or an error in reading critical information from a disk drive. The offending disk should be fixed if it is broken or unreliable.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
realloccg: bad optim</dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
ialloc: dup alloc</dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
alloccgblk: cyl groups corrupted</dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
ialloccg: map corrupted</dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
free: freeing free block</dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
free: freeing free frag</dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
ifree: freeing free inode</dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
alloccg: map corrupted</dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
These panic messages are among those that may be produced when filesystem inconsistencies are detected. The problem generally results from a failure to repair damaged filesystems after a crash, hardware failures, or other condition that should not normally occur. A filesystem check will normally correct the problem.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
timeout table overflow</dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
This really shouldn't be a panic, but until the data structure involved is made to be extensible, running out of entries causes a crash. If this happens, make the timeout table bigger.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
KSP not valid</dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
SBI fault</dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
CHM? in kernel</dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
These indicate either a serious bug in the system or, more often, a glitch or failing hardware. If SBI faults recur, check out the hardware or call field service.  If the other faults recur, there is likely a bug somewhere in the system, although these can be caused by a flakey processor. Run processor microdiagnostics.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
machine check %x: <span class="emph">description</span></dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
&#8194;&#8194;&#8194;machine dependent machine-check information</dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
Machine checks are different on each type of CPU. Most of the internal processor registers are saved at the time of the fault and are printed on the console. For most processors, there is one line that summarizes the type of machine check. Often, the nature of the problem is apparent from this message and/or the contents of key registers. The VAX Hardware Handbook should be consulted, and, if necessary, your friendly field service people should be informed of the problem.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
trap type %d, code=%x, pc=%x</dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
A unexpected trap has occurred within the system; the trap types are:<p>
<pre style="margin-left: 5.00ex;" class="lit display">
0	reserved addressing fault 
1	privileged instruction fault 
2	reserved operand fault 
3	bpt instruction fault 
4	xfc instruction fault 
5	system call trap 
6	arithmetic trap 
7	ast delivery trap 
8	segmentation fault 
9	protection fault 
10	trace trap 
11	compatibility mode fault 
12	page fault 
13	page table fault</pre>
<p>
The favorite trap types in system crashes are trap types 8 and 9, indicating a wild reference.  The code is the referenced address, and the pc at the time of the fault is printed.  These problems tend to be easy to track down if they are kernel bugs since the processor stops cold, but random flakiness seems to cause this sometimes. The debugger can be used to locate the instruction and subroutine corresponding to the PC value. If that is insufficient to suggest the nature of the problem, more detailed examination of the system status at the time of the trap usually can produce an explanation.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
init died</dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
The system initialization process has exited.  This is bad news, as no new users will then be able to log in.  Rebooting is the only fix, so the system just does it right away.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
out of mbufs: map full</dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
The network has exhausted its private page map for network buffers. This usually indicates that buffers are being lost, and rather than allow the system to slowly degrade, it reboots immediately. The map may be made larger if necessary.</dd>
</dl>
<p>
That completes the list of panic types you are likely to see.<p>
When the system crashes it writes (or at least attempts to write) an image of memory into the back end of the dump device, usually the same as the primary swap area.  After the system is rebooted, the program <a class="link-man" href="../../8/savecore">savecore(8)</a> runs and preserves a copy of this core image and the current system in a specified directory for later perusal.  See <a class="link-man" href="../../8/savecore">savecore(8)</a> for details.<p>
To analyze a dump you should begin by running <b class="cmd">adb</b> with the <b class="flag">&#45;k</b> flag on the system load image and core dump. If the core image is the result of a panic, the panic message is printed. Normally the command &#8220;$c&#8221; will provide a stack trace from the point of the crash and this will provide a clue as to what went wrong. For more detail see &#8220;Using ADB to Debug the UNIX Kernel&#8221;.</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../../1/gdb">gdb(1)</a>, <a class="link-man" href="../../8/reboot">reboot(8)</a><div style="height: 0.00em;">
&#160;</div>
&#8220;VAX 11/780 System Maintenance Guide&#8221; and &#8220;VAX Hardware Handbook&#8221; for more information about machine checks.<div style="height: 0.00em;">
&#160;</div>
&#8220;Using ADB to Debug the UNIX Kernel&#8221;</div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
June 5, 1993</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
</html>

