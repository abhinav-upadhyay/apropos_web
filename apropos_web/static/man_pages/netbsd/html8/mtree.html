<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/../4/strict.dtd">
>
<head>
<meta http-equiv="Content-Type" content="te../; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="../style.css" type="text/css" media="all">
<title>
MTREE(8)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
MTREE(8)</td>
<td class="head-vol" align="center">
System Manager's Manual</td>
<td class="head-rtitle" align="right">
MTREE(8)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">mtree</b> &#8212; <span class="desc">map a directory hierarchy</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1><table class="synopsis">
<col style="width: 5.00ex;">
<col>
<tbody>
<tr>
<td>
mtree</td>
<td>
&#91;<span class="opt"><b class="flag">&#45;bCcDdejLlMnPqrStUuWx</b></span>&#93; &#91;<span class="opt"><b class="flag">&#45;i</b> | <b class="flag">&#45;m</b></span>&#93; &#91;<span class="opt"><b class="flag">&#45;E</b> <i class="arg">tags</i></span>&#93; &#91;<span class="opt"><b class="flag">&#45;F</b> <i class="arg">flavor</i></span>&#93; &#91;<span class="opt"><b class="flag">&#45;f</b> <i class="arg">spec</i></span>&#93; &#91;<span class="opt"><b class="flag">&#45;I</b> <i class="arg">tags</i></span>&#93; &#91;<span class="opt"><b class="flag">&#45;K</b> <i class="arg">keywords</i></span>&#93; &#91;<span class="opt"><b class="flag">&#45;k</b> <i class="arg">keywords</i></span>&#93; &#91;<span class="opt"><b class="flag">&#45;N</b> <i class="arg">dbdir</i></span>&#93; &#91;<span class="opt"><b class="flag">&#45;O</b> <i class="arg">onlyfile</i></span>&#93; &#91;<span class="opt"><b class="flag">&#45;p</b> <i class="arg">path</i></span>&#93; &#91;<span class="opt"><b class="flag">&#45;R</b> <i class="arg">keywords</i></span>&#93; &#91;<span class="opt"><b class="flag">&#45;s</b> <i class="arg">seed</i></span>&#93; &#91;<span class="opt"><b class="flag">&#45;X</b> <i class="arg">exclude-file</i></span>&#93;</td>
</tr>
</tbody>
</table>
</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> The <b class="name">mtree</b> utility compares a file hierarchy against a specification, creates a specification for a file hierarchy, or modifies a specification.<p>
The default action, if not overridden by command line options, is to compare the file hierarchy rooted in the current directory against a specification read from the standard input. Messages are written to the standard output for any files whose characteristics do not match the specification, or which are missing from either the file hierarchy or the specification.<p>
The options are as follows:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;b</b></dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
Suppress blank lines before entering and after exiting directories.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;C</b></dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
Convert a specification into a format that's easier to parse with various tools. The input specification is read from standard input or from the file given by <b class="flag">&#45;f</b> <i class="arg">spec</i>. In the output, each file or directory is represented using a single line (which might be very long). The full path name (beginning with &#8220;./&#8221;) is always printed as the first field; <b class="flag">&#45;K</b>, <b class="flag">&#45;k</b>, and <b class="flag">&#45;R</b> can be used to control which other keywords are printed; <b class="flag">&#45;E</b> and <b class="flag">&#45;I</b> can be used to control which files are printed; and the <b class="flag">&#45;S</b> option can be used to sort the output.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;c</b></dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
Print a specification for the file hierarchy originating at the current working directory (or the directory provided by <b class="flag">&#45;p</b> <i class="arg">path</i>) to the standard output. The output is in a style using relative path names.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;D</b></dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
As per <b class="flag">&#45;C</b>, except that the path name is always printed as the last field instead of the first.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;d</b></dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
Ignore everything except directory type files.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;E</b> <i class="arg">tags</i></dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
Add the comma separated tags to the &#8220;exclusion&#8221; list. Non-directories with tags which are in the exclusion list are not printed with <b class="flag">&#45;C</b> and <b class="flag">&#45;D</b>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;e</b></dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
Don't complain about files that are in the file hierarchy, but not in the specification.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;F</b> <i class="arg">flavor</i></dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
Set the compatibility flavor of the <b class="name">mtree</b> utility. The <i class="arg">flavor</i> can be one of <span class="symb">mtree</span>, <span class="symb">freebsd9</span>, or <span class="symb">netbsd6</span>. The default is <span class="symb">mtree</span>. The <span class="symb">freebsd9</span> and <span class="symb">netbsd6</span> flavors attempt to preserve output compatiblity and command line option backward compatibility with <span class="unix">FreeBSD&#160;9.0</span> and <span class="unix">NetBSD&#160;6.0</span> respectively.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;f</b> <i class="arg">spec</i></dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
Read the specification from <i class="arg">file</i>, instead of from the standard input.<p>
If this option is specified twice, the two specifications are compared to each other rather than to the file hierarchy. The specifications will be sorted like output generated using <b class="flag">&#45;c</b>. The output format in this case is somewhat reminiscent of <a class="link-man" href="../1/comm">comm(1)</a>, having "in first spec only", "in second spec only", and "different" columns, prefixed by zero, one and two TAB characters respectively. Each entry in the "different" column occupies two lines, one from each specification.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;I</b> <i class="arg">tags</i></dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
Add the comma separated tags to the &#8220;inclusion&#8221; list. Non-directories with tags which are in the inclusion list are printed with <b class="flag">&#45;C</b> and <b class="flag">&#45;D</b>. If no inclusion list is provided, the default is to display all files.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;i</b></dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
If specified, set the schg and/or sappnd flags.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;j</b></dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
Indent the output 4 spaces each time a directory level is descended when creating a specification with the <b class="flag">&#45;c</b> option. This does not affect either the /set statements or the comment before each directory. It does however affect the comment before the close of each directory. This is the equivalent of the <b class="flag">&#45;i</b> option in the <span class="unix">FreeBSD</span> version of <b class="name">mtree</b>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;K</b> <i class="arg">keywords</i></dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
Add the specified (whitespace or comma separated) keywords to the current set of keywords. If &#8216;<code class="lit">all</code>&#8217; is specified, add all of the other keywords.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;k</b> <i class="arg">keywords</i></dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
Use the <span class="symb">type</span> keyword plus the specified (whitespace or comma separated) keywords instead of the current set of keywords. If &#8216;<code class="lit">all</code>&#8217; is specified, use all of the other keywords. If the <span class="symb">type</span> keyword is not desired, suppress it with <b class="flag">&#45;R</b> <i class="arg">type</i>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;L</b></dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
Follow all symbolic links in the file hierarchy.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;l</b></dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
Do &#8220;loose&#8221; permissions checks, in which more stringent permissions will match less stringent ones. For example, a file marked mode 0444 will pass a check for mode 0644. &#8220;Loose&#8221; checks apply only to read, write and execute permissions -- in particular, if other bits like the sticky bit or suid/sgid bits are set either in the specification or the file, exact checking will be performed. This option may not be set at the same time as the <b class="flag">&#45;U</b> or <b class="flag">&#45;u</b> option.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;M</b></dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
Permit merging of specification entries with different types, with the last entry taking precedence.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;m</b></dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
If the schg and/or sappnd flags are specified, reset these flags. Note that this is only possible with securelevel less than 1 (i.e., in single user mode or while the system is running in insecure mode). See <a class="link-man" href="../8/init">init(8)</a> for information on security levels.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;n</b></dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
Do not emit pathname comments when creating a specification. Normally a comment is emitted before each directory and before the close of that directory when using the <b class="flag">&#45;c</b> option.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;N</b> <i class="arg">dbdir</i></dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
Use the user database text file <i class="file">master.passwd</i> and group database text file <i class="file">group</i> from <i class="arg">dbdir</i>, rather than using the results from the system's <a class="link-man" href="../3/getpwnam">getpwnam(3)</a> and <a class="link-man" href="../3/getgrnam">getgrnam(3)</a> (and related) library calls.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;O</b> <i class="arg">onlypaths</i></dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
Only include files included in this list of pathnames.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;P</b></dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
Don't follow symbolic links in the file hierarchy, instead consider the symbolic link itself in any comparisons. This is the default.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;p</b> <i class="arg">path</i></dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
Use the file hierarchy rooted in <i class="arg">path</i>, instead of the current directory.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;q</b></dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
Quiet mode. Do not complain when a &#8220;missing&#8221; directory cannot be created because it already exists. This occurs when the directory is a symbolic link.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;R</b> <i class="arg">keywords</i></dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
Remove the specified (whitespace or comma separated) keywords from the current set of keywords. If &#8216;<code class="lit">all</code>&#8217; is specified, remove all of the other keywords.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;r</b></dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
Remove any files in the file hierarchy that are not described in the specification. Repeating the flag more than once will attempt to reset all the file flags via <a class="link-man" href="../2/lchflags">lchflags(2)</a> before attempting to remove the file in case the file was immutable.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;S</b></dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
When reading a specification into an internal data structure, sort the entries. Sorting will affect the order of the output produced by the <b class="flag">&#45;C</b> or <b class="flag">&#45;D</b> options, and will also affect the order in which missing entries are created or reported when a directory tree is checked against a specification.<p>
The sort order is the same as that used by the <b class="flag">&#45;c</b> option, which is that entries within the same directory are sorted in the order used by <a class="link-man" href="../3/strcmp">strcmp(3)</a>, except that entries for subdirectories sort after other entries. By default, if the <b class="flag">&#45;S</b> option is not used, entries within the same directory are collected together (separated from entries for other directories), but not sorted.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;s</b> <i class="arg">seed</i></dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
Display a single checksum to the standard error output that represents all of the files for which the keyword <span class="symb">cksum</span> was specified. The checksum is seeded with the specified value.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;t</b></dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
Modify the modified time of existing files, the device type of devices, and symbolic link targets, to match the specification.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;U</b></dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
Same as <b class="flag">&#45;u</b> except that a mismatch is not considered to be an error if it was corrected.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;u</b></dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
Modify the owner, group, permissions, and flags of existing files, the device type of devices, and symbolic link targets, to match the specification. Create any missing directories, devices or symbolic links. User, group, and permissions must all be specified for missing directories to be created. Note that unless the <b class="flag">&#45;i</b> option is given, the schg and sappnd flags will not be set, even if specified. If <b class="flag">&#45;m</b> is given, these flags will be reset. Exit with a status of 0 on success, 2 if the file hierarchy did not match the specification, and 1 if any other error occurred.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;W</b></dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
Don't attempt to set various file attributes such as the ownership, mode, flags, or time when creating new directories or changing existing entries. This option will be most useful when used in conjunction with <b class="flag">&#45;U</b> or <b class="flag">&#45;u</b>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;X</b> <i class="arg">exclude-file</i></dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The specified file contains <a class="link-man" href="../3/fnmatch">fnmatch(3)</a> patterns matching files to be excluded from the specification, one to a line. If the pattern contains a &#8216;<code class="lit">/</code>&#8217; character, it will be matched against entire pathnames (relative to the starting directory); otherwise, it will be matched against basenames only. Comments are permitted in the <i class="arg">exclude-list</i> file.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;x</b></dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
Don't descend below mount points in the file hierarchy.</dd>
</dl>
<p>
Specifications are mostly composed of &#8220;keywords&#8221;, i.e. strings that that specify values relating to files. No keywords have default values, and if a keyword has no value set, no checks based on it are performed.<p>
Currently supported keywords are as follows:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">cksum</span></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
The checksum of the file using the default algorithm specified by the <a class="link-man" href="../1/cksum">cksum(1)</a> utility.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">device</span></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
The device number to use for <span class="symb">block</span> or <span class="symb">char</span> file types. The argument must be one of the following forms:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="arg">format</i>,<i class="arg">major</i>,<i class="arg">minor</i></dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
A device with <i class="arg">major</i> and <i class="arg">minor</i> fields, for an operating system specified with <i class="arg">format</i>. See below for valid formats.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="arg">format</i>,<i class="arg">major</i>,<i class="arg">unit</i>,<i class="arg">subunit</i></dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
A device with <i class="arg">major</i>, <i class="arg">unit</i>, and <i class="arg">subunit</i> fields, for an operating system specified with <i class="arg">format</i>. (Currently this is only supported by the <span class="symb">bsdos</span> format.)</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="arg">number</i></dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
Opaque number (as stored on the file system).</dd>
</dl>
<p>
The following values for <i class="arg">format</i> are recognized: <span class="symb">native</span>, <span class="symb">386bsd</span>, <span class="symb">4bsd</span>, <span class="symb">bsdos</span>, <span class="symb">freebsd</span>, <span class="symb">hpux</span>, <span class="symb">isc</span>, <span class="symb">linux</span>, <span class="symb">netbsd</span>, <span class="symb">osf1</span>, <span class="symb">sco</span>, <span class="symb">solaris</span>, <span class="symb">sunos</span>, <span class="symb">svr3</span>, <span class="symb">svr4</span>, and <span class="symb">ultrix</span>.<p>
See <a class="link-man" href="../8/mknod">mknod(8)</a> for more details.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">flags</span></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
The file flags as a symbolic name. See <a class="link-man" href="../1/chflags">chflags(1)</a> for information on these names. If no flags are to be set the string &#8216;<code class="lit">none</code>&#8217; may be used to override the current default. Note that the schg and sappnd flags are treated specially (see the <b class="flag">&#45;i</b> and <b class="flag">&#45;m</b> options).</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">ignore</span></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
Ignore any file hierarchy below this file.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">gid</span></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
The file group as a numeric value.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">gname</span></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
The file group as a symbolic name.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">link</span></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
The file the symbolic link is expected to reference.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">md5</span></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
The MD5 cryptographic message digest of the file.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">md5digest</span></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
Synonym for <span class="symb">md5</span>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">mode</span></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
The current file's permissions as a numeric (octal) or symbolic value.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">nlink</span></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
The number of hard links the file is expected to have.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">nochange</span></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
Make sure this file or directory exists but otherwise ignore all attributes.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">optional</span></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
The file is optional; don't complain about the file if it's not in the file hierarchy.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">ripemd160digest</span></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
Synonym for <span class="symb">rmd160</span>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">rmd160</span></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
The RMD-160 cryptographic message digest of the file.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">rmd160digest</span></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
Synonym for <span class="symb">rmd160</span>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">sha1</span></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
The SHA-1 cryptographic message digest of the file.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">sha1digest</span></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
Synonym for <span class="symb">sha1</span>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">sha256</span></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
The 256-bits SHA-2 cryptographic message digest of the file.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">sha256digest</span></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
Synonym for <span class="symb">sha256</span>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">sha384</span></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
The 384-bits SHA-2 cryptographic message digest of the file.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">sha384digest</span></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
Synonym for <span class="symb">sha384</span>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">sha512</span></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
The 512-bits SHA-2 cryptographic message digest of the file.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">sha512digest</span></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
Synonym for <span class="symb">sha512</span>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">size</span></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
The size, in bytes, of the file.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">tags</span></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
Comma delimited tags to be matched with <b class="flag">&#45;E</b> and <b class="flag">&#45;I</b>. These may be specified without leading or trailing commas, but will be stored internally with them.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">time</span></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
The last modification time of the file, in second and nanoseconds. The value should include a period character and exactly nine digits after the period.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">type</span></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
The type of the file; may be set to any one of the following:<p>
<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
<span class="symb">block</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
block special device</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<span class="symb">char</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
character special device</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<span class="symb">dir</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
directory</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<span class="symb">fifo</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
fifo</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<span class="symb">file</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
regular file</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<span class="symb">link</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
symbolic link</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<span class="symb">socket</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
socket</dd>
</dl>
</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">uid</span></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
The file owner as a numeric value.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">uname</span></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
The file owner as a symbolic name.</dd>
</dl>
<p>
The default set of keywords are <span class="symb">flags</span>, <span class="symb">gid</span>, <span class="symb">link</span>, <span class="symb">mode</span>, <span class="symb">nlink</span>, <span class="symb">size</span>, <span class="symb">time</span>, <span class="symb">type</span>, and <span class="symb">uid</span>.<p>
There are four types of lines in a specification:<ol style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-enum">
<li class="list-enum" style="margin-top: 1.00em;">
Set global values for a keyword. This consists of the string &#8216;<code class="lit">/set</code>&#8217; followed by whitespace, followed by sets of keyword/value pairs, separated by whitespace. Keyword/value pairs consist of a keyword, followed by an equals sign (&#8216;<code class="lit">=</code>&#8217;), followed by a value, without whitespace characters. Once a keyword has been set, its value remains unchanged until either reset or unset.</li>
<li class="list-enum" style="margin-top: 1.00em;">
Unset global values for a keyword. This consists of the string &#8216;<code class="lit">/unset</code>&#8217;, followed by whitespace, followed by one or more keywords, separated by whitespace. If &#8216;<code class="lit">all</code>&#8217; is specified, unset all of the keywords.</li>
<li class="list-enum" style="margin-top: 1.00em;">
A file specification, consisting of a path name, followed by whitespace, followed by zero or more whitespace separated keyword/value pairs.<p>
The path name may be preceded by whitespace characters. The path name may contain any of the standard path name matching characters (&#8216;<code class="lit">[</code>&#8217;, &#8216;<code class="lit">]</code>&#8217;, &#8216;<code class="lit">?</code>&#8217; or &#8216;<code class="lit">*</code>&#8217;), in which case files in the hierarchy will be associated with the first pattern that they match. <b class="name">mtree</b> uses <a class="link-man" href="../3/strsvis">strsvis(3)</a> (in VIS_CSTYLE format) to encode path names containing non-printable characters. Whitespace characters are encoded as &#8216;<code class="lit">&#92;s</code>&#8217; (space), &#8216;<code class="lit">&#92;t</code>&#8217; (tab), and &#8216;<code class="lit">&#92;n</code>&#8217; (new line). &#8216;<code class="lit">#</code>&#8217; characters in path names are escaped by a preceding backslash &#8216;<code class="lit">&#92;</code>&#8217; to distinguish them from comments.<p>
Each of the keyword/value pairs consist of a keyword, followed by an equals sign (&#8216;<code class="lit">=</code>&#8217;), followed by the keyword's value, without whitespace characters. These values override, without changing, the global value of the corresponding keyword.<p>
The first path name entry listed must be a directory named &#8216;<code class="lit">.</code>&#8217;, as this ensures that intermixing full and relative path names will work consistently and correctly. Multiple entries for a directory named &#8216;<code class="lit">.</code>&#8217; are permitted; the settings for the last such entry override those of the existing entry.<p>
A path name that contains a slash (&#8216;<code class="lit">/</code>&#8217;) that is not the first character will be treated as a full path (relative to the root of the tree). All parent directories referenced in the path name must exist. The current directory path used by relative path names will be updated appropriately. Multiple entries for the same full path are permitted if the types are the same (unless <b class="flag">&#45;M</b> is given, in which case the types may differ); in this case the settings for the last entry take precedence.<p>
A path name that does not contain a slash will be treated as a relative path. Specifying a directory will cause subsequent files to be searched for in that directory hierarchy.</li>
<li class="list-enum" style="margin-top: 1.00em;">
A line containing only the string &#8216;<code class="lit">..</code>&#8217; which causes the current directory path (used by relative paths) to ascend one level.</li>
</ol>
<p>
Empty lines and lines whose first non-whitespace character is a hash mark (&#8216;<code class="lit">#</code>&#8217;) are ignored.<p>
The <b class="name">mtree</b> utility exits with a status of 0 on success, 1 if any error occurred, and 2 if the file hierarchy did not match the specification.</div>
<div class="section">
<h1 id="x46494c4553">FILES</h1><dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/etc/mtree</i></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
system specification directory</dd>
</dl>
</div>
<div class="section">
<h1 id="x4558414d504c4553">EXAMPLES</h1> To detect system binaries that have been &#8220;trojan horsed&#8221;, it is recommended that <b class="name">mtree</b> be run on the file systems, and a copy of the results stored on a different machine, or, at least, in encrypted form. The seed for the <b class="flag">&#45;s</b> option should not be an obvious value and the final checksum should not be stored on-line under any circumstances! Then, periodically, <b class="name">mtree</b> should be run against the on-line specifications and the final checksum compared with the previous value. While it is possible for the bad guys to change the on-line specifications to conform to their modified binaries, it shouldn't be possible for them to make it produce the same final checksum value. If the final checksum value changes, the off-line copies of the specification can be used to detect which of the binaries have actually been modified.<p>
The <b class="flag">&#45;d</b> option can be used in combination with <b class="flag">&#45;U</b> or <b class="flag">&#45;u</b> to create directory hierarchies for, for example, distributions.</div>
<div class="section">
<h1 id="x434f4d5041544942494c495459">COMPATIBILITY</h1> The compatibility shims provided by the <b class="flag">&#45;F</b> option are incomplete by design. Known limitations are described below.<p>
The <span class="symb">freebsd9</span> flavor retains the default handling of lookup failures for the <span class="symb">uname</span> and <span class="symb">group</span> keywords by replacing them with appropriate <span class="symb">uid</span> and <span class="symb">gid</span> keywords rather than failing and reporting an error. The related <b class="flag">&#45;w</b> flag is a no-op rather than causing a warning to be printed and no keyword to be emitted. The latter behavior is not emulated as it is potentially dangerous in the face of /set statements.<p>
The <span class="symb">netbsd6</span> flavor does not replicate the historical bug that reported time as seconds.nanoseconds without zero padding nanosecond values less than 100000000.</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../1/chflags">chflags(1)</a>, <a class="link-man" href="../1/chgrp">chgrp(1)</a>, <a class="link-man" href="../1/chmod">chmod(1)</a>, <a class="link-man" href="../1/cksum">cksum(1)</a>, <a class="link-man" href="../2/stat">stat(2)</a>, <a class="link-man" href="../3/fnmatch">fnmatch(3)</a>, <a class="link-man" href="../3/fts">fts(3)</a>, <a class="link-man" href="../3/strsvis">strsvis(3)</a>, <a class="link-man" href="../8/chown">chown(8)</a>, <a class="link-man" href="../8/mknod">mknod(8)</a></div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> The <b class="name">mtree</b> utility appeared in <span class="unix">4.3BSD-Reno</span>. The <span class="symb">optional</span> keyword appeared in <span class="unix">NetBSD&#160;1.2</span>. The <b class="flag">&#45;U</b> option appeared in <span class="unix">NetBSD&#160;1.3</span>. The <span class="symb">flags</span> and <span class="symb">md5</span> keywords, and <b class="flag">&#45;i</b> and <b class="flag">&#45;m</b> options appeared in <span class="unix">NetBSD&#160;1.4</span>. The <span class="symb">device</span>, <span class="symb">rmd160</span>, <span class="symb">sha1</span>, <span class="symb">tags</span>, and <span class="symb">all</span> keywords, <b class="flag">&#45;D</b>, <b class="flag">&#45;E</b>, <b class="flag">&#45;I</b>, <b class="flag">&#45;L</b>, <b class="flag">&#45;l</b>, <b class="flag">&#45;N</b>, <b class="flag">&#45;P</b>, <b class="flag">&#45;R</b>, <b class="flag">&#45;W</b>, and <b class="flag">&#45;X</b> options, and support for full paths appeared in <span class="unix">NetBSD&#160;1.6</span>. The <span class="symb">sha256</span>, <span class="symb">sha384</span>, and <span class="symb">sha512</span> keywords appeared in <span class="unix">NetBSD&#160;3.0</span>. The <b class="flag">&#45;S</b> option appeared in <span class="unix">NetBSD&#160;6.0</span>.</div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
January 22, 2015</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
<>

