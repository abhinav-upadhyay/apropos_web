<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="/static/man_pages/netbsd/style.css" type="text/css" media="all">
<title>
BOOT(8) (Amiga)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
BOOT(8)</td>
<td class="head-vol" align="center">
System Manager's Manual (Amiga)</td>
<td class="head-rtitle" align="right">
BOOT(8)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">boot</b> &#8212; <span class="desc">system bootstrapping procedures</span></div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1><div class="subsection">
<h2 id="x506f776572206661696c20616e64206372617368207265636f76657279">Power fail and crash recovery</h2> When the <span class="unix">NetBSD</span> kernel is booted normally (using one of the two methods discussed below), it initializes itself and proceeds to boot the system. An automatic consistency check of the file systems takes place, and unless this fails, the system comes up to multi-user operations. The proper way to shut the system down is with the <a class="link-man" href="../../8/shutdown">shutdown(8)</a> command.<p>
If the system crashes, it will enter the kernel debugger, <a class="link-man" href="../../4/ddb">ddb(4)</a>, if it is configured in the kernel. If the debugger is not present, or the debugger is exited, the system will attempt a dump to the configured dump device (which will be automatically recovered with <a class="link-man" href="../../8/savecore">savecore(8)</a> during the next boot cycle). After the dump is complete (successful or not), the system will attempt a reboot.</div>
<div class="subsection">
<h2 id="x426f6f74696e67204e6574425344207573696e672074686520626f6f746c6f61646572">Booting NetBSD using the bootloader</h2> When a bootable <span class="unix">NetBSD</span> partition is created by means of HDTOOLBOX or another RDB editing program and a bootblock has been copied there by <a class="link-man" href="../../8/installboot">installboot(8)</a> and the boot priority of the <span class="unix">NetBSD</span> partition is either the highest or the <span class="unix">NetBSD</span> partition is selected by means of the boot menu, the Amiga ROM will automatically start the <span class="unix">NetBSD</span> bootloader. By default it will, after a short timeout, load the kernel image <i class="file">/netbsd</i> and attempt to boot it into multi-user mode. This behaviour can be changed by typing in an alternate command sequence. The command line looks like:<p>
<div style="margin-left: 5.00ex;" class="display">
<i class="arg">kernel-path</i> &#91;<span class="opt"><b class="flag">&#45;abknpqstvADZ</b></span>&#93; &#91;<span class="opt"><b class="flag">&#45;c</b> <i class="arg">model</i></span>&#93; &#91;<span class="opt"><b class="flag">&#45;m</b> <i class="arg">memsize</i></span>&#93; &#91;<span class="opt"><b class="flag">&#45;n</b> <i class="arg">memsegments</i></span>&#93; &#91;<span class="opt"><b class="flag">&#45;I</b> <i class="arg">mask</i></span>&#93; &#91;<span class="opt"><b class="flag">&#45;S</b> <i class="arg">amount</i></span>&#93; &#91;<span class="opt"><b class="flag">&#45;T</b> <i class="arg">amount</i></span>&#93;</div>
<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
kernel-path</dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
This gives you the opportunity to boot another kernel, say: <i class="file">/netbsd.old</i>. The default is <i class="file">/netbsd</i>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;a</b></dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
Autoboot into multi-user mode (default).</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;b</b></dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
Prompt for the root file system device, the system crash dump device, and the path to <a class="link-man" href="../../8/init">init(8)</a>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;c</b> <i class="arg">model</i></dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
force machine <i class="arg">model</i>. Use 32000+(Qlogic chip revision) for the DraCo.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;k</b></dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
Reserve the first 4M of fastmem.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;m</b> <i class="arg">memsize</i></dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
Force fastmem size to be <i class="arg">memsize</i> kBytes.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;n</b></dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
maximum number of <i class="arg">segments</i> of memory to use, encoded as follows: 0 (default): 1 segment, 1: 2 segments, 2: 3 or more segments.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;p</b></dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
Select kernel load segment by priority instead of size.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;q</b></dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
Boot in quiet mode.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;s</b></dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
Boot into single-user mode.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;v</b></dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
Boot in verbose mode.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;D</b></dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
Enter the kernel debugger (best used with -S)</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;I</b> <i class="arg">mask</i></dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
inhibit sync negotiation as follows: The <i class="arg">mask</i> is a bitmap expressed in C notation (e.g., 0xff) with 4*8bits, each bit, if set to 1, disabling sync negotiation for the corresponding target. Note that this only applies to (some of the) real SCSI busses, but not, e.g., to internal IDE. The bytes are used up from right to left by SCSI bus drivers using this convention.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;S</b></dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
Load the  kernel symbols</dd>
</dl>
</div>
<div class="subsection">
<h2 id="x426f6f74696e67204e6574425344207573696e6720746865206c6f61646273642070726f6772616d">Booting NetBSD using the loadbsd program</h2> When you want (or have to) start <span class="unix">NetBSD</span> from AmigaOS, you have to use the <b class="cmd">loadbsd</b> program that is supplied in the utils directory of the distribution. The loadbsd command line specification is:<p>
<div style="margin-left: 5.00ex;" class="display">
<b class="name">loadbsd</b> &#91;<span class="opt"><b class="flag">&#45;abknpstADZ</b></span>&#93; &#91;<span class="opt"><b class="flag">&#45;c</b> <i class="arg">model</i></span>&#93; &#91;<span class="opt"><b class="flag">&#45;m</b> <i class="arg">memsize</i></span>&#93; &#91;<span class="opt"><b class="flag">&#45;n</b> <i class="arg">memsegments</i></span>&#93; &#91;<span class="opt"><b class="flag">&#45;I</b> <i class="arg">mask</i></span>&#93; &#91;<span class="opt"><b class="flag">&#45;S</b> <i class="arg">amount</i></span>&#93; &#91;<span class="opt"><b class="flag">&#45;T</b> <i class="arg">amount</i></span>&#93; <i class="arg">kernel-path</i></div>
<p>
Description of options:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;a</b></dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
Autoboot into multi-user mode.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;b</b></dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
Prompt for the root file system device, the system crash dump device, and the path to <a class="link-man" href="../../8/init">init(8)</a>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;c</b></dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
force machine model.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;k</b></dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
Reserve the first 4M of fastmem.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;m</b></dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
Force fastmem size to be <i class="arg">memsize</i> kBytes.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;n</b></dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
maximum number of <i class="arg">segments</i> of memory to use, encoded as follows: 0 (default): 1 segment, 1: 2 segments, 2: 3 or more segments.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;p</b></dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
Select kernel load segment by priority instead of size.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;s</b></dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
Boot into single-user mode.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;t</b></dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
Test loading of the kernel but don't start <span class="unix">NetBSD</span>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;A</b></dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
enable AGA modes.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;D</b></dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
Enter the kernel debugger after booting. Best with <b class="flag">&#45;S</b>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;I</b> <i class="arg">mask</i></dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
inhibit sync negotiation as follows: The <i class="arg">mask</i> is a bitmap expressed in hexadecimal (e.g., ff) with 4*8bits, each bit, if set to 1, disabling sync negotiation for the corresponding target. Note that this only applies to (some of the) real SCSI busses, but not, e.g., to internal IDE. The bytes are used up from right to left by SCSI bus drivers using this convention.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;S</b></dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
include kernel debug symbols (for use by -D).</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;Z</b></dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
Force load via chip memory. Won't work if kernel is larger than the chip memory size or on the DraCo.</dd>
</dl>
<p>
Note: Because the loadbsd program can only read kernels from a AmigaOS filesystem, the file <i class="arg">/netbsd</i> is often not the same as the actual kernel booted. This can cause some programs to fail. However, note that you can use third-party Berkeley filesystems such as bffs to access the <span class="unix">NetBSD</span> root partition from AmigaOS.</div>
</div>
<div class="section">
<h1 id="x46494c4553">FILES</h1><dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/netbsd</i></dt>
<dd class="list-tag" style="margin-left: 20.00ex;">
system kernel</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/usr/mdec/bootxx_ffs</i></dt>
<dd class="list-tag" style="margin-left: 20.00ex;">
RDB device primary boot block</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/usr/mdec/bootxx_fd</i></dt>
<dd class="list-tag" style="margin-left: 20.00ex;">
floppy disk primary boot block</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/usr/mdec/boot.amiga</i></dt>
<dd class="list-tag" style="margin-left: 20.00ex;">
secondary bootstrap</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/boot.amiga</i></dt>
<dd class="list-tag" style="margin-left: 20.00ex;">
secondary bootstrap (installed)</dd>
</dl>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../../4/ddb">ddb(4)</a>, <a class="link-man" href="../../8/fsck_ffs">fsck_ffs(8)</a>, <a class="link-man" href="../../8/installboot">installboot(8)</a>, <a class="link-man" href="../../8/newfs">newfs(8)</a>, <a class="link-man" href="../../8/savecore">savecore(8)</a>, <a class="link-man" href="../../8/shutdown">shutdown(8)</a></div>
<div class="section">
<h1 id="x42554753">BUGS</h1> Due to code size restrictions, you can't currently use an old-style file system (created with <a class="link-man" href="../../8/newfs">newfs(8)</a> -O or with <span class="unix">NetBSD&#160;0.9</span>) with the boot block. You can use <b class="cmd">loadbsd</b> to boot from AmigaOS, or upgrade the file system with <i class="arg">fsck_ffs -c 2</i>.</div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
April 8, 2003</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
</html>

