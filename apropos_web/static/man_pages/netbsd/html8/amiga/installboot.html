<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="../../style.css" type="text/css" media="all">
<title>
INSTALLBOOT(8) (Amiga)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
INSTALLBOOT(8)</td>
<td class="head-vol" align="center">
System Manager's Manual (Amiga)</td>
<td class="head-rtitle" align="right">
INSTALLBOOT(8)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">installboot</b> &#8212; <span class="desc">install a bootstrap on an FFS filesystem partition</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1><table class="synopsis">
<col style="width: 11.00ex;">
<col>
<tbody>
<tr>
<td>
/usr/mdec/installboot</td>
<td>
&#91;<span class="opt"><b class="flag">&#45;l</b> <i class="arg">newcommandline</i></span>&#93; <i class="arg">bootblock</i> <i class="arg">device</i></td>
</tr>
</tbody>
</table>
</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> <b class="name">installboot</b> copies the bootblock to a bootable partition. The bootstrap is written into the bootblock area on the partition, right in front of the superblock, and hence limited in size to 8192 bytes.<p>
The bootstrap resides in the first few blocks on the partition (as specified by Commodore-Amiga Inc.) The bootstrap is loaded into memory by the ROM from bootable devices: RDB devices, where the partition is marked as bootable, or (not on the DraCo) floppy disks in Amiga format (880K/1760k).<p>
In the presence of more than one bootable partition/floppy disk, the partition is chosen by the bootpriority (from the RDB), which can be overridden by the operator from the boot menu (on Amiga machines, hold down the outer mouse buttons during boot; on DraCo machines, press the left mouse button when prompted).<p>
On RDB devices, the whole bootblock is loaded by the ROM. The number of boot blocks in the RDB partition entry must be correct.<p>
On floppy disks, the ROM always loads the first two blocks (1024 bytes), and the bootblock allocates memory and loads the whole bootblock on startup.<p>
After receiving control, the bootblock uses the stand-alone filesystem code in &#8220;libsa.a&#8221; to load the kernel from the filesystem on the partition it was started from. The code for the boot program can be found in <i class="file">/usr/mdec/bootxx_fd</i> (floppy disk code) or <i class="file">/usr/mdec/bootxx_ffs</i> (generic RDB disk code).<p>
The arguments are:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;l</b> <i class="arg">newcommandline</i></dt>
<dd class="list-tag" style="margin-left: 9.00ex;">
Specify a different command line to replace the default.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="arg">bootblock</i></dt>
<dd class="list-tag" style="margin-left: 9.00ex;">
The file containing the bootblock (normally /usr/mdec/bootxx_ffs for RDB devices).</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="arg">device</i></dt>
<dd class="list-tag" style="margin-left: 9.00ex;">
The name of the character special device specifying the partition on which the bootstrap is to be installed.</dd>
</dl>
</div>
<div class="section">
<h1 id="x4558414d504c4553">EXAMPLES</h1> The following command will install the boot program in the bootblock area on &#8220;sd0a&#8221;:<p>
<pre style="margin-left: 5.00ex;" class="lit display">
installboot /usr/mdec/bootxx_ffs /dev/rsd0a</pre>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../../1/dd">dd(1)</a>, <a class="link-man" href="../../8/boot">boot(8)</a></div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> The <b class="name">installboot</b> command first appeared in <span class="unix">NetBSD&#160;1.3</span>.</div>
<div class="section">
<h1 id="x42554753">BUGS</h1> If <b class="name">installboot</b> is accidentally used on the whole disk partition, the RDB will be overwritten, making your system unusable after the next reboot.<p>
Some third-party accelerator boards are not autoconfiguring. You won't be able to use their memory when booting from the bootblock after a cold start.<p>
Some third-party disk controllers don't support bootblock booting.<p>
DraCo ROMs don't support bootblock booting from floppy disks.<p>
Most 68060 boards, unlike the DraCo, don't set the SysBase-&gt;AttnFlags bit for the 68060 CPU (a patch program which is called during AmigaOS startup does this). You need to add options BB060STUPIDROM to your kernel to boot on such a machine.<p>
There is currently no easy way to edit the RDB from within <span class="unix">NetBSD</span>. Therefore, you have to use HDTOOLBOX or a similar tool to set the partition to bootable, "use custom bootblocks" and the number of bootblocks to 16 (for bootxx_ffs) or 2 (for bootxx_fd), at least the first time you install the bootblock.<p>
As normal dd is used to install the bootblock, you can only install onto your currently used root (or any other mounted) partition from single-user mode, or while otherwise running in insecure mode.</div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
November 29, 1996</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
</html>

