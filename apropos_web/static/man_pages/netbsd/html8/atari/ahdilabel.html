<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="/static/man_pages/netbsd/style.css" type="text/css" media="all">
<title>
AHDILABEL(8) (ATARI)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
AHDILABEL(8)</td>
<td class="head-vol" align="center">
System Manager's Manual (ATARI)</td>
<td class="head-rtitle" align="right">
AHDILABEL(8)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">ahdilabel</b> &#8212; <span class="desc">modify AHDI partitions</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1><table class="synopsis">
<col style="width: 9.00ex;">
<col>
<tbody>
<tr>
<td>
ahdilabel</td>
<td>
<i class="arg">disk</i></td>
</tr>
</tbody>
</table>
</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> <b class="name">ahdilabel</b> allows you to modify the AHDI partition table on a disk partitioned with AHDI or an AHDI compatible formatter.  The AHDI partition format is usually only present on disks shared between <span class="unix">NetBSD</span> and some other OS. The partition identifiers are used by <span class="unix">NetBSD</span> as a guideline to emulate a disklabel on such a disk.<p>
<b class="name">ahdilabel</b> supports the following options:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="arg">disk</i></dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
The name of the disk you want to edit. <b class="name">ahdilabel</b> will first try to open a disk of this name.  If this cannot be opened, it will attempt to open <i class="arg">r</i>&lt;disk&gt;<i class="arg">c</i>. Finally, if this also cannot be opened, it will attempt to open <i class="arg">/dev/r</i>&lt;disk&gt;<i class="arg">c</i>.</dd>
</dl>
<p>
<b class="name">ahdilabel</b> will display information about the number of sectors, tracks and sectors on the disk, as well as the current AHDI partition information. It will then prompt for input.  The input choices are:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="arg">a-p</i></dt>
<dd class="list-tag" style="margin-left: 3.00ex;">
Modify a partition.  You will be prompted for a partition id, root, start and size. <span class="unix">NetBSD</span> recognises the following partition id's:<p>
<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
NBD</dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
Partition is reserved for <span class="unix">NetBSD</span>. This can be either a root or an user partition. The first NBD partition on a disk will be mapped to <span class="unix">NetBSD</span> partition letter <span class="emph">a</span>. The following NBD partitions will be mapped from letter <span class="emph">d</span> up. The filesystem type is ffs by default.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
SWP</dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
The first SWP partition is mapped to partition <span class="emph">b</span>.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
GEM or BGM</dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
These partitions are mapped from <span class="emph">d</span> up. The filesystem type is msdos.</dd>
</dl>
<p>
The root, start and size parameters can be entered using sector, cylinder/track/sector or megabyte notations.  Whole numbers of cylinders can be entered using the shorthand &lt;cylinder&gt;/.  Likewise, whole numbers of tracks can be entered using the shorthand &lt;cylinder&gt;/&lt;track&gt;/.  Megabytes are entered using the suffix <span class="emph">M</span>.<p>
The following can also be used to enter partition parameters:<p>
<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
&#45;N (root)</dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
Position the root sector for this partition immediately after partition N.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
&#45;N (start)</dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
Make this partition start after partition N (leaving a gap of 1 sector for a root sector, if necessary).</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
&#45;N (size)</dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
Make this partition end immediately before partition N.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
-1 (size)</dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
Make this partition extend to the end of the disk.</dd>
</dl>
<p>
The sector holding the primary AHDI partition table only has space for four partitions.  Thus, if a disk has more than four partitions, the extra partition information is held in auxiliary root sectors.  There is one auxiliary root for each additional partition (and also for the fourth partition, if the disk has more than four partitions).</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="arg">r</i></dt>
<dd class="list-tag" style="margin-left: 3.00ex;">
Recalculate the root sectors.  This will automatically assign auxiliary root sectors if the disk has more than 4 partitions.  The auxiliary root sectors will be positioned in a default location preceding the relevant partition.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="arg">s</i></dt>
<dd class="list-tag" style="margin-left: 3.00ex;">
Show the current partition information.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="arg">u</i></dt>
<dd class="list-tag" style="margin-left: 3.00ex;">
Toggle the unit display between sector and cylinder/track/sector notation.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="arg">w</i></dt>
<dd class="list-tag" style="margin-left: 3.00ex;">
Write the AHDI partition table to the disk.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="arg">z</i></dt>
<dd class="list-tag" style="margin-left: 3.00ex;">
Options for zero'ing the boot sector and bad sector lists.  The default is to preserve them both.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="arg">q</i></dt>
<dd class="list-tag" style="margin-left: 3.00ex;">
Quit</dd>
</dl>
</div>
<div class="section">
<h1 id="x4558414d504c4553">EXAMPLES</h1><blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit">ahdilabel sd0</code></div>
</blockquote>
Edit the AHDI label for disk sd0.</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../../8/bootpref">bootpref(8)</a>, <a class="link-man" href="../../8/disklabel">disklabel(8)</a>, <a class="link-man" href="../../8/installboot">installboot(8)</a></div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> The <b class="name">ahdilabel</b> command first appeared in <span class="unix">NetBSD&#160;1.5</span>.</div>
<div class="section">
<h1 id="x42554753">BUGS</h1> The changes made to the AHDI partitions will become active on the next <span class="emph">first open</span> of the disk. You are advised to use <b class="name">ahdilabel</b> only on a disk without any mounted or otherwise active partitions. This is not enforced by <b class="name">ahdilabel</b>.<p>
Because of way <span class="unix">NetBSD</span> interprets AHDI partition tables to create the <span class="unix">NetBSD</span> disklabel, the <span class="unix">NetBSD</span> partition ordering may change if partitions labelled NBD are created or removed.<p>
Creating an AHDI partition table on a disk that previously did not have one will almost certainly overwrite any existing partition information and/or data on that disk.  This is especially the case if auxiliary root sectors are needed for the AHDI partition table.<p>
As soon as a disk contains at least one NBD partition, you are allowed to write <span class="unix">NetBSD</span> disklabels and install bootstraps.</div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
July 29, 2000</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
</html>

