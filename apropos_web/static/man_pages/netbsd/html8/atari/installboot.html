<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="../../style.css" type="text/css" media="all">
<title>
INSTALLBOOT(8) (ATARI)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
INSTALLBOOT(8)</td>
<td class="head-vol" align="center">
System Manager's Manual (ATARI)</td>
<td class="head-rtitle" align="right">
INSTALLBOOT(8)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">installboot</b> &#8212; <span class="desc">install a bootstrap on an FFS filesystem partition</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1><table class="synopsis">
<col style="width: 11.00ex;">
<col>
<tbody>
<tr>
<td>
/usr/mdec/installboot</td>
<td>
&#91;<span class="opt"><b class="flag">&#45;Nmtuv</b></span>&#93; <i class="arg">device</i></td>
</tr>
</tbody>
</table>
</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> <b class="name">installboot</b> prepares the (physically) first partition on a device for boot-strapping from the TOS-ROM. The bootstrap is written into the bootblock area on the partition, right in front of the disk pack label, and hence limited in size to <span class="define">LABELOFFSET</span> bytes. A disk pack label should be created (see <a class="link-man" href="../../8/disklabel">disklabel(8)</a>) before installing the bootstrap.<p>
The bootstrap is split into three parts: a small first-stage program that resides in the (physically) first 512 bytes on the device (as specified by Atari Corp.), a second-stage program that immediately follows the first-stage program, and a third-stage program that resides on the root filesystem. The first-stage program is loaded into memory by the ROM. After receiving control, it loads the second-stage program and the disk label. The second-stage boot program uses the stand-alone filesystem code in &#8220;libsa.a&#8221; to load the third-stage boot program from the root-filesystem on the device. The third-stage boot program then loads the kernel. The prototype code for the first-stage boot program can be found in <i class="file">/usr/mdec/std/fdboot</i> (floppy disk code), <i class="file">/usr/mdec/std/sdboot</i> (SCSI disk code) and <i class="file">/usr/mdec/std/wdboot</i> (IDE disk code). The second-stage boot program is stored in <i class="file">/usr/mdec/std/bootxx</i>. and the third-stage boot program is stored in <i class="file">/usr/mdec/std/boot.atari</i>. The boot code for Milan machines is different from the other machines and the files for the Milan can be found in the directory <i class="file">/usr/mdec/milan</i>. Note that the Milan uses the SCSI disk code for both SCSI and IDE disks.<p>
For backwards compatibility with the vendor specific AHDI disk label, a&#160;special first-stage boot program is provided in <i class="file">/usr/mdec/std/xxboot.ahdi</i>. Together with the general second-stage boot program, it is installed in the AHDI partition where the <span class="unix">NetBSD</span> disk label lives. Furthermore, the AHDI specifications require an additional bootstrap, which is written into the AHDI root sector (disk block zero). The prototype code for this AHDI compliant bootstrap can be found in <i class="file">/usr/mdec/std/sdb00t.ahdi</i> and <i class="file">/usr/mdec/std/wdb00t.ahdi</i>, or the equivalents in <i class="file">/usr/mdec/milan</i>.<p>
Perform the following steps to make a file system bootable:<ol style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-enum">
<li class="list-enum" style="margin-top: 1.00em;">
Copy the secondary bootstrap (either <i class="file">/usr/mdec/std/boot.atari</i> or <i class="file">/usr/mdec/milan/boot.atari</i>) to the root directory of the target file system.</li>
<li class="list-enum" style="margin-top: 1.00em;">
Use <b class="name">installboot</b> to install the primary and secondary bootstrap programs (from <i class="file">/usr/mdec/std</i> or <i class="file">/usr/mdec/milan</i>) into the <i class="arg">filesystem</i>.</li>
</ol>
<p>
The options are as follows:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;N</b></dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
Do not actually write anything on the disk.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;m</b></dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
Use Milan boot code.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;t</b></dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
Number of tracks per cylinder (IDE disk).</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;u</b></dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
Number of sectors per track (IDE disk).</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&#45;v</b></dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
Verbose mode.</dd>
</dl>
<p>
The arguments are:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="arg">device</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
The name of the device on which the bootstrap is to be installed.</dd>
</dl>
</div>
<div class="section">
<h1 id="x4558414d504c4553">EXAMPLES</h1> The following command will install the first-stage and second-stage boot programs in the bootblock area on &#8220;sd0c&#8221;:<p>
<pre style="margin-left: 5.00ex;" class="lit display">
installboot sd0</pre>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../../8/bootpref">bootpref(8)</a>, <a class="link-man" href="../../8/disklabel">disklabel(8)</a></div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> The <b class="name">installboot</b> command first appeared in <span class="unix">NetBSD&#160;1.1</span></div>
<div class="section">
<h1 id="x42554753">BUGS</h1> <b class="name">installboot</b> knows too much about kernel internal details, forcing it to check the running kernel's release and revision.<p>
Because neither the floppy disk driver nor <a class="link-man" href="../../8/disklabel">disklabel(8)</a> are capable of creating a disk pack label on a floppy disk, <b class="name">installboot</b> has to create a&#160;fictitious label, that is not used by the kernel.<p>
Except for installation of the bootcode on floppy, <b class="name">installboot</b> automatically sets the boot preference in NVRAM to <span class="unix">NetBSD</span>.</div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
March 9, 2004</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
</html>

