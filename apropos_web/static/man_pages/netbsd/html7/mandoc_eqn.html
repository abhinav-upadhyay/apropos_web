<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="../style.css" type="text/css" media="all">
<title>
EQN(7)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
EQN(7)</td>
<td class="head-vol" align="center">
Miscellaneous Information Manual</td>
<td class="head-rtitle" align="right">
EQN(7)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">eqn</b> &#8212; <span class="desc">eqn language reference for mandoc</span></div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> The <b class="name">eqn</b> language is an equation-formatting language. It is used within <a class="link-man" href="../7/mdoc">mdoc(7)</a> and <a class="link-man" href="../7/man">man(7)</a> <span class="unix">UNIX</span> manual pages. It describes the <span class="emph">structure</span> of an equation, not its mathematical meaning. This manual describes the <b class="name">eqn</b> language accepted by the <a class="link-man" href="../1/mandoc">mandoc(1)</a> utility, which corresponds to the Second Edition eqn specification (see <i class="link-sec"><a class="link-sec" href="#x53454520414c534f">SEE ALSO</a></i> for references).<p>
Equations within <a class="link-man" href="../7/mdoc">mdoc(7)</a> or <a class="link-man" href="../7/man">man(7)</a> documents are enclosed by the standalone &#8216;.EQ&#8217; and &#8216;.EN&#8217; tags. Equations are multi-line blocks consisting of formulas and control statements.</div>
<div class="section">
<h1 id="x4551554154494f4e20535452554354555245">EQUATION STRUCTURE</h1> Each equation is bracketed by &#8216;.EQ&#8217; and &#8216;.EN&#8217; strings. <span class="emph">Note</span>: these are not the same as <a class="link-man" href="../7/roff">roff(7)</a> macros, and may only be invoked as &#8216;.EQ&#8217;.<p>
The equation grammar is as follows, where quoted strings are case-sensitive literals in the input:<p>
<pre style="margin-left: 5.00ex;" class="lit display">
eqn     : box | eqn box 
box     : text 
        | &#34;{&#34; eqn &#34;}&#34; 
        | &#34;define&#34; text text 
        | &#34;ndefine&#34; text text 
        | &#34;tdefine&#34; text text 
        | &#34;gfont&#34; text 
        | &#34;gsize&#34; text 
        | &#34;set&#34; text text 
        | &#34;undef&#34; text 
        | box pos box 
        | box mark 
        | &#34;matrix&#34; &#34;{&#34; [col &#34;{&#34; list &#34;}&#34; ]* 
        | pile &#34;{&#34; list &#34;}&#34; 
        | font box 
        | &#34;size&#34; text box 
        | &#34;left&#34; text eqn [&#34;right&#34; text] 
col     : &#34;lcol&#34; | &#34;rcol&#34; | &#34;ccol&#34; | &#34;col&#34; 
text    : [^space&#92;&#34;]+ | &#92;&#34;.*&#92;&#34; 
pile    : &#34;lpile&#34; | &#34;cpile&#34; | &#34;rpile&#34; | &#34;pile&#34; 
pos     : &#34;over&#34; | &#34;sup&#34; | &#34;sub&#34; | &#34;to&#34; | &#34;from&#34; 
mark	: &#34;dot&#34; | &#34;dotdot&#34; | &#34;hat&#34; | &#34;tilde&#34; | &#34;vec&#34; 
        | &#34;dyad&#34; | &#34;bar&#34; | &#34;under&#34; 
font    : &#34;roman&#34; | &#34;italic&#34; | &#34;bold&#34; | &#34;fat&#34; 
list    : eqn 
        | list &#34;above&#34; eqn 
space   : [&#92;^~ &#92;t]</pre>
<p>
White-space consists of the space, tab, circumflex, and tilde characters. If within a quoted string, these space characters are retained. Quoted strings are also not scanned for replacement definitions.<p>
The following text terms are translated into a rendered glyph, if available: alpha, beta, chi, delta, epsilon, eta, gamma, iota, kappa, lambda, mu, nu, omega, omicron, phi, pi, psi, rho, sigma, tau, theta, upsilon, xi, zeta, DELTA, GAMMA, LAMBDA, OMEGA, PHI, PI, PSI, SIGMA, THETA, UPSILON, XI, inter (intersection), union (union), prod (product), int (integral), sum (summation), grad (gradient), del (vector differential), times (multiply), cdot (centre-dot), nothing (zero-width space), approx (approximately equals), prime (prime), half (one-half), partial (partial differential), inf (infinity), &gt;&gt; (much greater), &lt;&lt; (much less), &#45;&gt; (left arrow), &lt;&#45; (right arrow), += (plus-minus), != (not equal), == (equivalence), &lt;= (less-than-equal), and &gt;= (more-than-equal).<p>
The following control statements are available:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">define</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Replace all occurrences of a key with a value. Its syntax is as follows:<p>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
define <i class="arg">key cvalc</i></div>
</blockquote>
<p>
The first character of the value string, <i class="arg">c</i>, is used as the delimiter for the value <i class="arg">val</i>. This allows for arbitrary enclosure of terms (not just quotes), such as<p>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
define <i class="arg">foo 'bar baz'</i></div>
</blockquote>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
define <i class="arg">foo cbar bazc</i></div>
</blockquote>
<p>
It is an error to have an empty <i class="arg">key</i> or <i class="arg">val</i>. Note that a quoted <i class="arg">key</i> causes errors in some <b class="name">eqn</b> implementations and should not be considered portable. It is not expanded for replacements. Definitions may refer to other definitions; these are evaluated recursively when text replacement occurs and not when the definition is created.<p>
Definitions can create arbitrary strings, for example, the following is a legal construction.<p>
<pre style="margin-left: 5.00ex;" class="lit display">
define foo 'define' 
foo bar 'baz'</pre>
<p>
Self-referencing definitions will raise an error. The <b class="flag">ndefine</b> statement is a synonym for <b class="flag">define</b>, while <b class="flag">tdefine</b> is discarded.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">gfont</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Set the default font of subsequent output. Its syntax is as follows:<p>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
gfont <i class="arg">font</i></div>
</blockquote>
<p>
In mandoc, this value is discarded.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">gsize</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Set the default size of subsequent output. Its syntax is as follows:<p>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
gsize <i class="arg">size</i></div>
</blockquote>
<p>
The <i class="arg">size</i> value should be an integer.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">set</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Set an equation mode. In mandoc, both arguments are thrown away. Its syntax is as follows:<p>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
set <i class="arg">key val</i></div>
</blockquote>
<p>
The <i class="arg">key</i> and <i class="arg">val</i> are not expanded for replacements. This statement is a GNU extension.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">undef</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Unset a previously-defined key. Its syntax is as follows:<p>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
define <i class="arg">key</i></div>
</blockquote>
<p>
Once invoked, the definition for <i class="arg">key</i> is discarded. The <i class="arg">key</i> is not expanded for replacements. This statement is a GNU extension.</dd>
</dl>
</div>
<div class="section">
<h1 id="x434f4d5041544942494c495459">COMPATIBILITY</h1> This section documents the compatibility of mandoc <b class="name">eqn</b> and the troff <b class="name">eqn</b> implementation (including GNU troff).<p>
<ul style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-dash">
<li class="list-dash" style="margin-top: 0.00em;">
The text string &#8216;&#92;&#34;&#8217; is interpreted as a literal quote in troff. In mandoc, this is interpreted as a comment.</li>
<li class="list-dash" style="margin-top: 0.00em;">
In troff, The circumflex and tilde white-space symbols map to fixed-width spaces. In mandoc, these characters are synonyms for the space character.</li>
<li class="list-dash" style="margin-top: 0.00em;">
The troff implementation of <b class="name">eqn</b> allows for equation alignment with the <b class="flag">mark</b> and <b class="flag">lineup</b> tokens. mandoc discards these tokens. The <b class="flag">back</b> <i class="arg">n</i>, <b class="flag">fwd</b> <i class="arg">n</i>, <b class="flag">up</b> <i class="arg">n</i>, and <b class="flag">down</b> <i class="arg">n</i> commands are also ignored.</li>
</ul>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../1/mandoc">mandoc(1)</a>, <a class="link-man" href="../7/man">man(7)</a>, <a class="link-man" href="../7/mandoc_char">mandoc_char(7)</a>, <a class="link-man" href="../7/mdoc">mdoc(7)</a>, <a class="link-man" href="../7/roff">roff(7)</a><p>
<span class="ref"><span class="ref-auth">Brian W. Kernighan</span> and <span class="ref-auth">Lorinda L. Cherry</span>, <span class="ref-title">System for Typesetting Mathematics</span>, <i class="ref-jrnl">Communications of the ACM</i>, <span class="ref-vol">18</span>, <span class="ref-page">151&#8211;157</span>, <span class="ref-date">March, 1975</span>.</span><p>
<span class="ref"><span class="ref-auth">Brian W. Kernighan</span> and <span class="ref-auth">Lorinda L. Cherry</span>, <span class="ref-title">Typesetting Mathematics, User's Guide</span>, <span class="ref-date">1976</span>.</span><p>
<span class="ref"><span class="ref-auth">Brian W. Kernighan</span> and <span class="ref-auth">Lorinda L. Cherry</span>, <span class="ref-title">Typesetting Mathematics, User's Guide (Second Edition)</span>, <span class="ref-date">1978</span>.</span></div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> The eqn utility, a preprocessor for troff, was originally written by Brian W. Kernighan and Lorinda L. Cherry in 1975. The GNU reimplementation of eqn, part of the GNU troff package, was released in 1989 by James Clark. The eqn component of <a class="link-man" href="../1/mandoc">mandoc(1)</a> was added in 2011.</div>
<div class="section">
<h1 id="x415554484f5253">AUTHORS</h1> This <b class="name">eqn</b> reference was written by <span class="author">Kristaps Dzonsons</span> &#60;<a class="link-mail" href="mailto:kristaps@bsd.lv">kristaps@bsd.lv</a>&#62;.</div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
July 13, 2013</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
</html>

