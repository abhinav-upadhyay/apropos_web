<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/../4/strict.dtd">
>
<head>
<meta http-equiv="Content-Type" content="te../; charset=utf-8">
<meta name="resource-type" content="document">
<link rel="stylesheet" href="../style.css" type="text/css" media="all">
<title>
STICKY(7)</title>
</head>
<body>
<div class="mandoc">
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
STICKY(7)</td>
<td class="head-vol" align="center">
Miscellaneous Information Manual</td>
<td class="head-rtitle" align="right">
STICKY(7)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">sticky</b> &#8212; <span class="desc">Description of the `sticky' (S_ISVTX) bit functionality</span></div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> A special file mode, called the <span class="emph">sticky bit</span> (mode <span class="define">S_ISVTX</span>), is used to indicate special treatment for directories. See <a class="link-man" href="../2/chmod">chmod(2)</a> or the file <i class="file">/usr/include/sys/stat.h</i><div class="subsection">
<h2 id="x537469636b792066696c6573">Sticky files</h2> For regular files, the use of mode <span class="define">S_ISVTX</span> is reserved and can be set only by the super-user. <span class="unix">NetBSD</span> does not currently treat regular files that have the sticky bit set specially, but this behavior might change in the future.</div>
<div class="subsection">
<h2 id="x537469636b79206469726563746f72696573">Sticky directories</h2> A directory whose &#8220;sticky bit&#8221; is set becomes a directory in which the deletion of files is restricted. A file in a sticky directory may only be removed or renamed by a user if the user has write permission for the directory and the user is the owner of the file, the owner of the directory, or the super-user. This feature is usefully applied to directories such as <i class="file">/tmp</i> which must be publicly writable but should deny users the license to arbitrarily delete or rename each others' files.<p>
Any user may create a sticky directory. See <a class="link-man" href="../1/chmod">chmod(1)</a> for details about modifying file modes.</div>
</div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> The sticky bit first appeared in V7, and this manual page appeared in section 8. Its initial use was to mark sharable executables that were frequently used so that they would stay in swap after the process exited. Sharable executables were compiled in a special way so their text and read-only data could be shared amongst processes. <a class="link-man" href="../1/vi">vi(1)</a> and <a class="link-man" href="../1/sh">sh(1)</a> were such executables. This is where the term &#8220;sticky&#8221; comes from - the program would stick around in swap, and it would not have to be fetched again from the file system. Of course as long as there was a copy in the swap area, the file was marked busy so it could not be overwritten. On V7 this meant that the file could not be removed either, because busy executables could not be removed, but this restriction was lifted in BSD releases.<p>
To replace such executables was a cumbersome process. One had first to remove the sticky bit, then execute the binary so that the copy from swap was flushed, overwrite the executable, and finally reset the sticky bit.<p>
Later, on SunOS 4, the sticky bit got an additional meaning for files that had the bit set and were not executable: read and write operations from and to those files would go directly to the disk and bypass the buffer cache. This was typically used on swap files for NFS clients on an NFS server, so that swap I/O generated by the clients on the servers would not evict useful data from the server's buffer cache.</div>
<div class="section">
<h1 id="x42554753">BUGS</h1> Neither <a class="link-man" href="../2/open">open(2)</a> nor <a class="link-man" href="../2/mkdir">mkdir(2)</a> will create a file with the sticky bit set.</div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
May 10, 2011</td>
<td class="foot-os" align="right">
NetBSD 7.99</td>
</tr>
</tbody>
</table>
</div>
</body>
<>

