<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/posix/style.css" type="text/css" media="all"/>
<title>
LINK(3P)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
LINK(3P)</td>
<td class="head-vol">
POSIX Programmer's Manual</td>
<td class="head-rtitle">
LINK(3P)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>PROLOG</h1> This manual page is part of the POSIX Programmer's Manual. The Linux implementation of this interface may differ (consult the corresponding Linux manual page for details of Linux behavior), or the interface may not be implemented on Linux.</div>
<div class="section">
<h1>NAME</h1> link - link to a file</div>
<div class="section">
<h1>SYNOPSIS</h1>  <b>#include &lt;unistd.h&gt;</b><div style="height: 0.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
int link(const char *<b></b><i>path1</i><b></b><b>, const char *</b><b></b><i>path2</i><b></b><b>);</b><div style="height: 0.00em;">
&#160;</div>
<b></b></div>
<div class="section">
<h1>DESCRIPTION</h1> The  <i>link</i>() function shall create a new link (directory entry) for the existing file,  <i>path1</i>.<div class="spacer">
</div>
The <i>path1</i> argument points to a pathname naming an existing file. The  <i>path2</i> argument points to a pathname naming the new directory entry to be created. The  <i>link</i>() function shall atomically create a new link for the existing file and the link count of the file shall be incremented by one.<div class="spacer">
</div>
If <i>path1</i> names a directory, <i>link</i>() shall fail unless the process has appropriate privileges and the implementation supports using  <i>link</i>() on directories.<div class="spacer">
</div>
Upon successful completion, <i>link</i>() shall mark for update the  <i>st_ctime</i> field of the file. Also, the <i>st_ctime</i> and  <i>st_mtime</i> fields of the directory that contains the new entry shall be marked for update.<div class="spacer">
</div>
If <i>link</i>() fails, no link shall be created and the link count of the file shall remain unchanged.<div class="spacer">
</div>
The implementation may require that the calling process has permission to access the existing file.</div>
<div class="section">
<h1>RETURN VALUE</h1> Upon successful completion, 0 shall be returned. Otherwise, -1 shall be returned and  <i>errno</i> set to indicate the error.</div>
<div class="section">
<h1>ERRORS</h1> The  <i>link</i>() function shall fail if:<dl>
<dt>
<b>EACCES</b></dt>
<dd>
A component of either path prefix denies search permission, or the requested link requires writing in a directory that denies write permission, or the calling process does not have permission to access the existing file and this is required by the implementation.</dd>
</dl>
<dl>
<dt>
<b>EEXIST</b></dt>
<dd>
The <i>path2</i> argument resolves to an existing file or refers to a symbolic link.</dd>
</dl>
<dl>
<dt>
<b>ELOOP</b></dt>
<dd>
A loop exists in symbolic links encountered during resolution of the  <i>path1</i> or <i>path2</i> argument.</dd>
</dl>
<dl>
<dt>
<b>EMLINK</b></dt>
<dd>
The number of links to the file named by <i>path1</i> would exceed {LINK_MAX}.</dd>
</dl>
<dl>
<dt>
<b>ENAMETOOLONG</b></dt>
<dd>
The length of the <i>path1</i> or <i>path2</i> argument exceeds {PATH_MAX} or a pathname component is longer than {NAME_MAX}.</dd>
</dl>
<dl>
<dt>
<b>ENOENT</b></dt>
<dd>
A component of either path prefix does not exist; the file named by  <i>path1</i> does not exist; or <i>path1</i> or  <i>path2</i> points to an empty string.</dd>
</dl>
<dl>
<dt>
<b>ENOSPC</b></dt>
<dd>
The directory to contain the link cannot be extended.</dd>
</dl>
<dl>
<dt>
<b>ENOTDIR</b></dt>
<dd>
A component of either path prefix is not a directory.</dd>
</dl>
<dl>
<dt>
<b>EPERM</b></dt>
<dd>
The file named by <i>path1</i> is a directory and either the calling process does not have appropriate privileges or the implementation prohibits using  <i>link</i>() on directories.</dd>
</dl>
<dl>
<dt>
<b>EROFS</b></dt>
<dd>
The requested link requires writing in a directory on a read-only file system.</dd>
</dl>
<dl>
<dt>
<b>EXDEV</b></dt>
<dd>
The link named by <i>path2</i> and the file named by <i>path1</i> are on different file systems and the implementation does not support links between file systems.</dd>
</dl>
<dl>
<dt>
<b>EXDEV</b></dt>
<dd>
<i>path1</i> refers to a named STREAM.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<div class="spacer">
</div>
The <i>link</i>() function may fail if:<dl>
<dt>
<b>ELOOP</b></dt>
<dd>
More than {SYMLOOP_MAX} symbolic links were encountered during resolution of the  <i>path1</i> or <i>path2</i> argument.</dd>
</dl>
<dl>
<dt>
<b>ENAMETOOLONG</b></dt>
<dd>
As a result of encountering a symbolic link in resolution of the <i>path1</i> or  <i>path2</i> argument, the length of the substituted pathname string exceeded {PATH_MAX}.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<div class="spacer">
</div>
<i>The following sections are informative.</i></div>
<div class="section">
<h1>EXAMPLES</h1><div class="subsection">
<h2>Creating a Link to a File</h2> The following example shows how to create a link to a file named  <b>/home/cnd/mod1</b> by creating a new directory entry named  <b>/modules/pass1</b>.<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 5.00ex;">
<div class="spacer">
</div>
<br/>
<b>#include &lt;unistd.h&gt;</b><div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
<br/>
char *path1 = &quot;/home/cnd/mod1&quot;;<br/>
char *path2 = &quot;/modules/pass1&quot;;<br/>
int   status;<br/>
...<br/>
status = link (path1, path2);<br/>
<b></b><br/>
</div>
</div>
<div class="subsection">
<h2>Creating a Link to a File Within a Program</h2> In the following program example, the  <i>link</i>() function links the  <b>/etc/passwd</b> file (defined as <b>PASSWDFILE</b>) to a file named  <b>/etc/opasswd</b> (defined as <b>SAVEFILE</b>), which is used to save the current password file. Then, after removing the current password file (defined as  <b>PASSWDFILE</b>), the new password file is saved as the current password file using the  <i>link</i>() function again.<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 5.00ex;">
<div class="spacer">
</div>
<br/>
<b>#include &lt;unistd.h&gt;</b><div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
<br/>
#define LOCKFILE &quot;/etc/ptmp&quot;<br/>
#define PASSWDFILE &quot;/etc/passwd&quot;<br/>
#define SAVEFILE &quot;/etc/opasswd&quot;<br/>
...<br/>
/* Save current password file */<br/>
link (PASSWDFILE, SAVEFILE);<div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
<br/>
/* Remove current password file. */<br/>
unlink (PASSWDFILE);<div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
<br/>
/* Save new password file as current password file. */<br/>
link (LOCKFILE,PASSWDFILE);<br/>
<b></b><br/>
</div>
</div>
</div>
<div class="section">
<h1>APPLICATION USAGE</h1> Some implementations do allow links between file systems.</div>
<div class="section">
<h1>RATIONALE</h1> Linking to a directory is restricted to the superuser in most historical implementations because this capability may produce loops in the file hierarchy or otherwise corrupt the file system. This volume of IEEE&#160;Std&#160;1003.1-2001 continues that philosophy by prohibiting  <i>link</i>() and <i>unlink</i>() from doing this. Other functions could do it if the implementor designed such an extension.<div class="spacer">
</div>
Some historical implementations allow linking of files on different file systems. Wording was added to explicitly allow this optional behavior.<div class="spacer">
</div>
The exception for cross-file system links is intended to apply only to links that are programmatically indistinguishable from &quot;hard&quot; links.</div>
<div class="section">
<h1>FUTURE DIRECTIONS</h1> None.</div>
<div class="section">
<h1>SEE ALSO</h1>  <i>symlink</i>(), <i>unlink</i>(), the Base Definitions volume of IEEE&#160;Std&#160;1003.1-2001,  <i>&lt;unistd.h&gt;</i></div>
<div class="section">
<h1>COPYRIGHT</h1> Portions of this text are reprinted and reproduced in electronic form from IEEE Std 1003.1, 2003 Edition, Standard for Information Technology -- Portable Operating System Interface (POSIX), The Open Group Base Specifications Issue 6, Copyright (C) 2001-2003 by the Institute of Electrical and Electronics Engineers, Inc and The Open Group. In the event of any discrepancy between this version and the original IEEE and The Open Group Standard, the original IEEE and The Open Group Standard is the referee document. The original Standard can be obtained online at http://www.opengroup.org/unix/online.html .</div>
<table class="foot">
<tr>
<td class="foot-date">
2003</td>
<td class="foot-os">
IEEE/The Open Group</td>
</tr>
</table>
</div>
</body>
</html>

