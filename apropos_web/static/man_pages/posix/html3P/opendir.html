<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/posix/style.css" type="text/css" media="all"/>
<title>
OPENDIR(3P)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
OPENDIR(3P)</td>
<td class="head-vol">
POSIX Programmer's Manual</td>
<td class="head-rtitle">
OPENDIR(3P)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>PROLOG</h1> This manual page is part of the POSIX Programmer's Manual. The Linux implementation of this interface may differ (consult the corresponding Linux manual page for details of Linux behavior), or the interface may not be implemented on Linux.</div>
<div class="section">
<h1>NAME</h1> opendir - open a directory</div>
<div class="section">
<h1>SYNOPSIS</h1>  <b>#include &lt;dirent.h&gt;</b><div style="height: 0.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
DIR *opendir(const char *<b></b><i>dirname</i><b></b><b>);</b><div style="height: 0.00em;">
&#160;</div>
<b></b></div>
<div class="section">
<h1>DESCRIPTION</h1> The  <i>opendir</i>() function shall open a directory stream corresponding to the directory named by the  <i>dirname</i> argument. The directory stream is positioned at the first entry. If the type  <b>DIR</b> is implemented using a file descriptor, applications shall only be able to open up to a total of {OPEN_MAX} files and directories.</div>
<div class="section">
<h1>RETURN VALUE</h1> Upon successful completion,  <i>opendir</i>() shall return a pointer to an object of type  <b>DIR</b>. Otherwise, a null pointer shall be returned and  <i>errno</i> set to indicate the error.</div>
<div class="section">
<h1>ERRORS</h1> The  <i>opendir</i>() function shall fail if:<dl>
<dt>
<b>EACCES</b></dt>
<dd>
Search permission is denied for the component of the path prefix of  <i>dirname</i> or read permission is denied for  <i>dirname</i>.</dd>
</dl>
<dl>
<dt>
<b>ELOOP</b></dt>
<dd>
A loop exists in symbolic links encountered during resolution of the  <i>dirname</i> argument.</dd>
</dl>
<dl>
<dt>
<b>ENAMETOOLONG</b></dt>
<dd>
The length of the <i>dirname</i> argument exceeds {PATH_MAX} or a pathname component is longer than {NAME_MAX}.</dd>
</dl>
<dl>
<dt>
<b>ENOENT</b></dt>
<dd>
A component of <i>dirname</i> does not name an existing directory or  <i>dirname</i> is an empty string.</dd>
</dl>
<dl>
<dt>
<b>ENOTDIR</b></dt>
<dd>
A component of <i>dirname</i> is not a directory.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<div class="spacer">
</div>
The <i>opendir</i>() function may fail if:<dl>
<dt>
<b>ELOOP</b></dt>
<dd>
More than {SYMLOOP_MAX} symbolic links were encountered during resolution of the  <i>dirname</i> argument.</dd>
</dl>
<dl>
<dt>
<b>EMFILE</b></dt>
<dd>
{OPEN_MAX} file descriptors are currently open in the calling process.</dd>
</dl>
<dl>
<dt>
<b>ENAMETOOLONG</b></dt>
<dd>
As a result of encountering a symbolic link in resolution of the <i>dirname</i> argument, the length of the substituted pathname string exceeded {PATH_MAX}.</dd>
</dl>
<dl>
<dt>
<b>ENFILE</b></dt>
<dd>
Too many files are currently open in the system.<div style="height: 1.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<div class="spacer">
</div>
<i>The following sections are informative.</i></div>
<div class="section">
<h1>EXAMPLES</h1><div class="subsection">
<h2>Open a Directory Stream</h2> The following program fragment demonstrates how the  <i>opendir</i>() function is used.<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 5.00ex;">
<div class="spacer">
</div>
<br/>
<b>#include &lt;sys/types.h&gt;</b><br/>
<b>#include &lt;dirent.h&gt;</b><br/>
<b>#include &lt;libgen.h&gt;</b><br/>
<b>...</b><br/>
<b>    DIR *dir;</b><br/>
<b>    struct dirent *dp;</b><br/>
<b>...</b><br/>
<b>    if ((dir = opendir (&quot;.&quot;)) == NULL) {</b><br/>
<b>        perror (&quot;Cannot open .&quot;);</b><br/>
<b>        exit (1);</b><br/>
<b>    }</b><div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
<br/>
    while ((dp = readdir (dir)) != NULL) {<br/>
...<br/>
<b></b><br/>
</div>
</div>
</div>
<div class="section">
<h1>APPLICATION USAGE</h1> The  <i>opendir</i>() function should be used in conjunction with <i>readdir</i>(),  <i>closedir</i>(), and <i>rewinddir</i>() to examine the contents of the directory (see the EXAMPLES section in  <i>readdir</i>()). This method is recommended for portability.</div>
<div class="section">
<h1>RATIONALE</h1> Based on historical implementations, the rules about file descriptors apply to directory streams as well. However, this volume of IEEE&#160;Std&#160;1003.1-2001 does not mandate that the directory stream be implemented using file descriptors. The description of  <i>closedir</i>() clarifies that if a file descriptor is used for the directory stream, it is mandatory that  <i>closedir</i>() deallocate the file descriptor. When a file descriptor is used to implement the directory stream, it behaves as if the FD_CLOEXEC had been set for the file descriptor.<div class="spacer">
</div>
The directory entries for dot and dot-dot are optional. This volume of IEEE&#160;Std&#160;1003.1-2001 does not provide a way to test  <i>a priori</i> for their existence because an application that is portable must be written to look for (and usually ignore) those entries. Writing code that presumes that they are the first two entries does not always work, as many implementations permit them to be other than the first two entries, with a &quot;normal&quot; entry preceding them. There is negligible value in providing a way to determine what the implementation does because the code to deal with dot and dot-dot must be written in any case and because such a flag would add to the list of those flags (which has proven in itself to be objectionable) and might be abused.<div class="spacer">
</div>
Since the structure and buffer allocation, if any, for directory operations are defined by the implementation, this volume of IEEE&#160;Std&#160;1003.1-2001 imposes no portability requirements for erroneous program constructs, erroneous data, or the use of unspecified values such as the use or referencing of a  <i>dirp</i> value or a  <b>dirent</b> structure value after a directory stream has been closed or after a  <i>fork</i>() or one of the <i>exec</i> function calls.</div>
<div class="section">
<h1>FUTURE DIRECTIONS</h1> None.</div>
<div class="section">
<h1>SEE ALSO</h1>  <i>closedir</i>(), <i>lstat</i>(), <i>readdir</i>(), <i>rewinddir</i>(),  <i>symlink</i>(), the Base Definitions volume of IEEE&#160;Std&#160;1003.1-2001,  <i>&lt;dirent.h&gt;</i>,  <i>&lt;limits.h&gt;</i>, <i>&lt;sys/types.h&gt;</i></div>
<div class="section">
<h1>COPYRIGHT</h1> Portions of this text are reprinted and reproduced in electronic form from IEEE Std 1003.1, 2003 Edition, Standard for Information Technology -- Portable Operating System Interface (POSIX), The Open Group Base Specifications Issue 6, Copyright (C) 2001-2003 by the Institute of Electrical and Electronics Engineers, Inc and The Open Group. In the event of any discrepancy between this version and the original IEEE and The Open Group Standard, the original IEEE and The Open Group Standard is the referee document. The original Standard can be obtained online at http://www.opengroup.org/unix/online.html .</div>
<table class="foot">
<tr>
<td class="foot-date">
2003</td>
<td class="foot-os">
IEEE/The Open Group</td>
</tr>
</table>
</div>
</body>
</html>

