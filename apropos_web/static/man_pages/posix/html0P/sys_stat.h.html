<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/posix/style.css" type="text/css" media="all"/>
<title>
&lt;sys/stat.h&gt;(0P)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
&lt;sys/stat.h&gt;(0P)</td>
<td class="head-vol">
POSIX Programmer's Manual</td>
<td class="head-rtitle">
&lt;sys/stat.h&gt;(0P)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>NAME</h1> sys/stat.h - data returned by the stat() function</div>
<div class="section">
<h1>SYNOPSIS</h1>  <b>#include &lt;sys/stat.h&gt;</b></div>
<div class="section">
<h1>DESCRIPTION</h1> The  <i>&lt;sys/stat.h&gt;</i> header shall define the structure of the data returned by the functions  <i>fstat</i>(), <i>lstat</i>(), and <i>stat</i>().<div class="spacer">
</div>
The <b>stat</b> structure shall contain at least the following members:<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 5.00ex;">
<div class="spacer">
</div>
<br/>
<b>dev_t     st_dev    </b> Device ID of device containing file. <b></b><br/>
<b>ino_t     st_ino    </b> File serial number. <b></b><br/>
<b>mode_t    st_mode   </b> Mode of file (see below). <b></b><br/>
<b>nlink_t   st_nlink  </b> Number of hard links to the file. <b></b><br/>
<b>uid_t     st_uid    </b> User ID of file. <b></b><br/>
<b>gid_t     st_gid    </b> Group ID of file. <b></b><div class="spacer">
</div>
<br/>
<b>dev_t     st_rdev   </b> Device ID (if file is character or block special). <b></b><div class="spacer">
</div>
<br/>
<b>off_t     st_size   </b> For regular files, the file size in bytes. <b></b><br/>
<b>                    </b> For symbolic links, the length in bytes of the <b></b><br/>
<b>                    </b> pathname contained in the symbolic link. <b></b><div class="spacer">
</div>
<br/>
<b>                    </b> For a shared memory object, the length in bytes. <b></b><div class="spacer">
</div>
<div class="spacer">
</div>
<br/>
<b>                    </b> For a typed memory object, the length in bytes. <b></b><div class="spacer">
</div>
<br/>
<b>                    </b> For other file types, the use of this field is <b></b><br/>
<b>                    </b> unspecified. <b></b><br/>
<b>time_t    st_atime  </b> Time of last access. <b></b><br/>
<b>time_t    st_mtime  </b> Time of last data modification. <b></b><br/>
<b>time_t    st_ctime  </b> Time of last status change. <b></b><div class="spacer">
</div>
<br/>
<b>blksize_t st_blksize</b> A file system-specific preferred I/O block size for <b></b><br/>
<b>                    </b> this object. In some file system types, this may <b></b><br/>
<b>                    </b> vary from file to file. <b></b><br/>
<b>blkcnt_t  st_blocks </b> Number of blocks allocated for this object. <b></b><div class="spacer">
</div>
<br/>
<b></b><br/>
</div>
<div class="spacer">
</div>
The <i>st_ino</i> and <i>st_dev</i> fields taken together uniquely identify the file within the system. The  <b>blkcnt_t</b>,  <b>blksize_t</b>, <b>dev_t</b>, <b>ino_t</b>, <b>mode_t</b>, <b>nlink_t</b>,  <b>uid_t</b>, <b>gid_t</b>, <b>off_t</b>, and  <b>time_t</b> types shall be defined as described in <i>&lt;sys/types.h&gt;</i> . Times shall be given in seconds since the Epoch.<div class="spacer">
</div>
Unless otherwise specified, the structure members <i>st_mode</i>, <i>st_ino</i>,  <i>st_dev</i>, <i>st_uid</i>, <i>st_gid</i>,  <i>st_atime</i>, <i>st_ctime</i>, and <i>st_mtime</i> shall have meaningful values for all file types defined in IEEE&#160;Std&#160;1003.1-2001.<div class="spacer">
</div>
For symbolic links, the <i>st_mode</i> member shall contain meaningful information, which can be used with the file type macros described below, that take a  <i>mode</i> argument. The <i>st_size</i> member shall contain the length, in bytes, of the pathname contained in the symbolic link. File mode bits and the contents of the remaining members of the  <b>stat</b> structure are unspecified. The value returned in the  <i>st_size</i> field shall be the length of the contents of the symbolic link, and shall not count a trailing null if one is present.<div class="spacer">
</div>
The following symbolic names for the values of type <b>mode_t</b> shall also be defined.<div class="spacer">
</div>
File type:<dl>
<dt>
S_IFMT</dt>
<dd>
Type of file.</dd>
</dl>
<dl>
<dt>
S_IFBLK</dt>
<dd>
</dd>
</dl>
<div style="margin-left: 5.00ex;">
Block special.</div>
<dl>
<dt>
S_IFCHR</dt>
<dd>
</dd>
</dl>
<div style="margin-left: 5.00ex;">
Character special.</div>
<dl>
<dt>
S_IFIFO</dt>
<dd>
</dd>
</dl>
<div style="margin-left: 5.00ex;">
FIFO special.</div>
<dl>
<dt>
S_IFREG</dt>
<dd>
</dd>
</dl>
<div style="margin-left: 5.00ex;">
Regular.</div>
<dl>
<dt>
S_IFDIR</dt>
<dd>
</dd>
</dl>
<div style="margin-left: 5.00ex;">
Directory.</div>
<dl>
<dt>
S_IFLNK</dt>
<dd>
</dd>
</dl>
<div style="margin-left: 5.00ex;">
Symbolic link.</div>
<dl>
<dt>
S_IFSOCK</dt>
<dd>
</dd>
</dl>
<div style="margin-left: 5.00ex;">
Socket.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
File mode bits:<dl>
<dt>
S_IRWXU</dt>
<dd>
Read, write, execute/search by owner.</dd>
</dl>
<dl>
<dt>
S_IRUSR</dt>
<dd>
</dd>
</dl>
<div style="margin-left: 5.00ex;">
Read permission, owner.</div>
<dl>
<dt>
S_IWUSR</dt>
<dd>
</dd>
</dl>
<div style="margin-left: 5.00ex;">
Write permission, owner.</div>
<dl>
<dt>
S_IXUSR</dt>
<dd>
</dd>
</dl>
<div style="margin-left: 5.00ex;">
Execute/search permission, owner.</div>
<div style="height: 1.00em;">
&#160;</div>
<dl>
<dt>
S_IRWXG</dt>
<dd>
Read, write, execute/search by group.</dd>
</dl>
<dl>
<dt>
S_IRGRP</dt>
<dd>
</dd>
</dl>
<div style="margin-left: 5.00ex;">
Read permission, group.</div>
<dl>
<dt>
S_IWGRP</dt>
<dd>
</dd>
</dl>
<div style="margin-left: 5.00ex;">
Write permission, group.</div>
<dl>
<dt>
S_IXGRP</dt>
<dd>
</dd>
</dl>
<div style="margin-left: 5.00ex;">
Execute/search permission, group.</div>
<div style="height: 1.00em;">
&#160;</div>
<dl>
<dt>
S_IRWXO</dt>
<dd>
Read, write, execute/search by others.</dd>
</dl>
<dl>
<dt>
S_IROTH</dt>
<dd>
</dd>
</dl>
<div style="margin-left: 5.00ex;">
Read permission, others.</div>
<dl>
<dt>
S_IWOTH</dt>
<dd>
</dd>
</dl>
<div style="margin-left: 5.00ex;">
Write permission, others.</div>
<dl>
<dt>
S_IXOTH</dt>
<dd>
</dd>
</dl>
<div style="margin-left: 5.00ex;">
Execute/search permission, others.</div>
<div style="height: 1.00em;">
&#160;</div>
<dl>
<dt>
S_ISUID</dt>
<dd>
Set-user-ID on execution.</dd>
</dl>
<dl>
<dt>
S_ISGID</dt>
<dd>
Set-group-ID on execution.</dd>
</dl>
<dl>
<dt>
S_ISVTX</dt>
<dd>
On directories, restricted deletion flag.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<div class="spacer">
</div>
The bits defined by S_IRUSR, S_IWUSR, S_IXUSR, S_IRGRP, S_IWGRP, S_IXGRP, S_IROTH, S_IWOTH, S_IXOTH, S_ISUID, S_ISGID,  and S_ISVTX shall be unique.<div class="spacer">
</div>
S_IRWXU is the bitwise-inclusive OR of S_IRUSR, S_IWUSR, and S_IXUSR.<div class="spacer">
</div>
S_IRWXG is the bitwise-inclusive OR of S_IRGRP, S_IWGRP, and S_IXGRP.<div class="spacer">
</div>
S_IRWXO is the bitwise-inclusive OR of S_IROTH, S_IWOTH, and S_IXOTH.<div class="spacer">
</div>
Implementations may OR other implementation-defined bits into S_IRWXU, S_IRWXG, and S_IRWXO, but they shall not overlap any of the other bits defined in this volume of IEEE&#160;Std&#160;1003.1-2001. The  <i>file permission bits</i> are defined to be those corresponding to the bitwise-inclusive OR of S_IRWXU, S_IRWXG, and S_IRWXO.<div class="spacer">
</div>
The following macros shall be provided to test whether a file is of the specified type. The value  <i>m</i> supplied to the macros is the value of  <i>st_mode</i> from a <b>stat</b> structure. The macro shall evaluate to a non-zero value if the test is true; 0 if the test is false.<dl>
<dt>
S_ISBLK(<i>m</i>)</dt>
<dd>
Test for a block special file.</dd>
</dl>
<dl>
<dt>
S_ISCHR(<i>m</i>)</dt>
<dd>
Test for a character special file.</dd>
</dl>
<dl>
<dt>
S_ISDIR(<i>m</i>)</dt>
<dd>
Test for a directory.</dd>
</dl>
<dl>
<dt>
S_ISFIFO(<i>m</i>)</dt>
<dd>
Test for a pipe or FIFO special file.</dd>
</dl>
<dl>
<dt>
S_ISREG(<i>m</i>)</dt>
<dd>
Test for a regular file.</dd>
</dl>
<dl>
<dt>
S_ISLNK(<i>m</i>)</dt>
<dd>
Test for a symbolic link.</dd>
</dl>
<dl>
<dt>
S_ISSOCK(<i>m</i>)</dt>
<dd>
Test for a socket.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<div class="spacer">
</div>
The implementation may implement message queues, semaphores, or shared memory objects as distinct file types. The following macros shall be provided to test whether a file is of the specified type. The value of the  <i>buf</i> argument supplied to the macros is a pointer to a  <b>stat</b> structure. The macro shall evaluate to a non-zero value if the specified object is implemented as a distinct file type and the specified file type is contained in the  <b>stat</b> structure referenced by <i>buf</i>. Otherwise, the macro shall evaluate to zero.<dl>
<dt>
S_TYPEISMQ(<i>buf</i>)</dt>
<dd>
Test for a message queue.</dd>
</dl>
<dl>
<dt>
S_TYPEISSEM(<i>buf</i>)</dt>
<dd>
Test for a semaphore.</dd>
</dl>
<dl>
<dt>
S_TYPEISSHM(<i>buf</i>)</dt>
<dd>
Test for a shared memory object.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<div class="spacer">
</div>
The implementation may implement typed memory objects as distinct file types, and the following macro shall test whether a file is of the specified type. The value of the  <i>buf</i> argument supplied to the macros is a pointer to a  <b>stat</b> structure. The macro shall evaluate to a non-zero value if the specified object is implemented as a distinct file type and the specified file type is contained in the  <b>stat</b> structure referenced by <i>buf</i>. Otherwise, the macro shall evaluate to zero.<dl>
<dt>
S_TYPEISTMO(<i>buf</i>)</dt>
<dd>
Test macro for a typed memory object.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<div class="spacer">
</div>
The following shall be declared as functions and may also be defined as macros. Function prototypes shall be provided.<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 5.00ex;">
<div class="spacer">
</div>
<br/>
<b>int    chmod(const char *, mode_t);</b><br/>
<b>int    fchmod(int, mode_t);</b><br/>
<b>int    fstat(int, struct stat *);</b><br/>
<b>int    lstat(const char *restrict, struct stat *restrict);</b><br/>
<b>int    mkdir(const char *, mode_t);</b><br/>
<b>int    mkfifo(const char *, mode_t);</b><div class="spacer">
</div>
<br/>
<b>int    mknod(const char *, mode_t, dev_t);</b><div class="spacer">
</div>
<br/>
<b>int    stat(const char *restrict, struct stat *restrict);</b><br/>
<b>mode_t umask(mode_t);</b><br/>
<b></b><br/>
</div>
<div class="spacer">
</div>
<i>The following sections are informative.</i></div>
<div class="section">
<h1>APPLICATION USAGE</h1> Use of the macros is recommended for determining the type of a file.</div>
<div class="section">
<h1>RATIONALE</h1> A conforming C-language application must include  <i>&lt;sys/stat.h&gt;</i> for functions that have arguments or return values of type  <b>mode_t</b>, so that symbolic values for that type can be used. An alternative would be to require that these constants are also defined by including  <i>&lt;sys/types.h&gt;</i>.<div class="spacer">
</div>
The S_ISUID and S_ISGID bits may be cleared on any write, not just on  <i>open</i>(), as some historical implementations do.<div class="spacer">
</div>
System calls that update the time entry fields in the <b>stat</b> structure must be documented by the implementors. POSIX-conforming systems should not update the time entry fields for functions listed in the System Interfaces volume of IEEE&#160;Std&#160;1003.1-2001 unless the standard requires that they do, except in the case of documented extensions to the standard.<div class="spacer">
</div>
Note that <i>st_dev</i> must be unique within a Local Area Network (LAN) in a ``system'' made up of multiple computers' file systems connected by a LAN.<div class="spacer">
</div>
Networked implementations of a POSIX-conforming system must guarantee that all files visible within the file tree (including parts of the tree that may be remotely mounted from other machines on the network) on each individual processor are uniquely identified by the combination of the  <i>st_ino</i> and <i>st_dev</i> fields.<div class="spacer">
</div>
The unit for the <i>st_blocks</i> member of the <b>stat</b> structure is not defined within IEEE&#160;Std&#160;1003.1-2001. In some implementations it is 512 bytes. It may differ on a file system basis. There is no correlation between values of the  <i>st_blocks</i> and <i>st_blksize</i>, and the <i>f_bsize</i> (from  <i>&lt;sys/statvfs.h&gt;</i>) structure members.<div class="spacer">
</div>
Traditionally, some implementations defined the multiplier for <i>st_blocks</i> in  <i>&lt;sys/param.h&gt;</i> as the symbol DEV_BSIZE.</div>
<div class="section">
<h1>FUTURE DIRECTIONS</h1> No new S_IFMT symbolic names for the file type values of  <b>mode_t</b> will be defined by IEEE&#160;Std&#160;1003.1-2001; if new file types are required, they will only be testable through  <i>S_ISxx</i>() or  <i>S_TYPEISxxx</i>() macros instead.</div>
<div class="section">
<h1>SEE ALSO</h1>  <i>&lt;sys/statvfs.h&gt;</i>, <i>&lt;sys/types.h&gt;</i>, the System Interfaces volume of IEEE&#160;Std&#160;1003.1-2001,  <i>chmod</i>(), <i>fchmod</i>(), <i>fstat</i>(),  <i>lstat</i>(), <i>mkdir</i>(), <i>mkfifo</i>(), <i>mknod</i>(), <i>stat</i>(),  <i>umask</i>()</div>
<div class="section">
<h1>COPYRIGHT</h1> Portions of this text are reprinted and reproduced in electronic form from IEEE Std 1003.1, 2003 Edition, Standard for Information Technology -- Portable Operating System Interface (POSIX), The Open Group Base Specifications Issue 6, Copyright (C) 2001-2003 by the Institute of Electrical and Electronics Engineers, Inc and The Open Group. In the event of any discrepancy between this version and the original IEEE and The Open Group Standard, the original IEEE and The Open Group Standard is the referee document. The original Standard can be obtained online at http://www.opengroup.org/unix/online.html .</div>
<table class="foot">
<tr>
<td class="foot-date">
2003</td>
<td class="foot-os">
IEEE/The Open Group</td>
</tr>
</table>
</div>
</body>
</html>

