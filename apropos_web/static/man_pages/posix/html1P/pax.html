<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/posix/style.css" type="text/css" media="all"/>
<title>
PAX(1P)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
PAX(1P)</td>
<td class="head-vol">
POSIX Programmer's Manual</td>
<td class="head-rtitle">
PAX(1P)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>PROLOG</h1> This manual page is part of the POSIX Programmer's Manual. The Linux implementation of this interface may differ (consult the corresponding Linux manual page for details of Linux behavior), or the interface may not be implemented on Linux.</div>
<div class="section">
<h1>NAME</h1> pax - portable archive interchange</div>
<div class="section">
<h1>SYNOPSIS</h1>  <b>pax</b> <b>[</b><b>-cdnv</b><b>][</b><b>-H|-L</b><b>][</b><b>-f</b> <i>archive</i><b>][</b><b>-s</b>  <i>replstr</i><b>]</b><b>...</b><b>[</b><i>pattern</i><b>...</b><b>]</b><b></b><div style="height: 0.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
pax -r<b></b><b>[</b><b></b><b>-cdiknuv</b><b></b><b>][</b><b></b><b>-H|-L</b><b></b><b>][</b><b></b><b>-f</b><b></b>  <b></b><i>archive</i><b></b><b>][</b><b></b><b>-o</b><b></b>  <b></b><i>options</i><b></b><b>]</b><b></b><b>...</b><b></b><b>[</b><b></b><b>-p</b><b> </b><i>string</i><b></b><b>]</b><b></b><b>...</b><div style="height: 0.00em;">
&#160;</div>
&#160;&#160;&#160;&#160;&#160;&#160;<b> </b><b>[</b><b></b><b>-s</b><b></b>  <b></b><i>replstr</i><b></b><b>]</b><b></b><b>...</b><b></b><b>[</b><b></b><i>pattern</i><b></b><b>...</b><b></b><b>]</b><b></b><b></b><div style="height: 0.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
pax -w<b></b><b>[</b><b></b><b>-dituvX</b><b></b><b>][</b><b></b><b>-H|-L</b><b></b><b>][</b><b></b><b>-b</b><b></b>  <b></b><i>blocksize</i><b></b><b>][[</b><b></b><b>-a</b><b></b><b>][</b><b></b><b>-f</b><b> </b><i>archive</i><b></b><b>][</b><b></b><b>-o</b><b></b>  <b></b><i>options</i><b></b><b>]</b><b></b><b>...</b><div style="height: 0.00em;">
&#160;</div>
&#160;&#160;&#160;&#160;&#160;&#160;<b> </b><b>[</b><b></b><b>-s</b><b> </b><i>replstr</i><b></b><b>]</b><b></b><b>...</b><b></b><b>[</b><b></b><b>-x</b><b></b>  <b></b><i>format</i><b></b><b>][</b><b></b><i>file</i><b></b><b>...</b><b></b><b>]</b><b></b><b></b><div style="height: 0.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
pax -r -w<b></b><b>[</b><b></b><b>-diklntuvX</b><b></b><b>][</b><b></b><b>-H|-L</b><b></b><b>][</b><b></b><b>-p</b><b></b>  <b></b><i>string</i><b></b><b>]</b><b></b><b>...</b><b></b><b>[</b><b></b><b>-s</b><b> </b><i>replstr</i><b></b><b>]</b><b></b><b>...</b><div style="height: 0.00em;">
&#160;</div>
&#160;&#160;&#160;&#160;&#160;&#160;<b> </b><b>[</b><b></b><i>file</i><b></b><b>...</b><b></b><b>]</b><b> </b><i>directory</i><b></b><b></b><div style="height: 0.00em;">
&#160;</div>
<b></b></div>
<div class="section">
<h1>DESCRIPTION</h1> The  <i>pax</i> utility shall read, write, and write lists of the members of archive files and copy directory hierarchies. A variety of archive formats shall be supported; see the  <b>-x</b> <i>format</i> option.<div class="spacer">
</div>
The action to be taken depends on the presence of the <b>-r</b> and  <b>-w</b> options. The four combinations of <b>-r</b> and  <b>-w</b> are referred to as the four modes of operation: <b>list</b>,  <b>read</b>, <b>write</b>, and <b>copy</b> modes, corresponding respectively to the four forms shown in the SYNOPSIS section.<dl>
<dt>
<b>list</b></dt>
<dd>
In <b>list</b> mode (when neither <b>-r</b> nor <b>-w</b> are specified),  <i>pax</i> shall write the names of the members of the archive file read from the standard input, with pathnames matching the specified patterns, to standard output. If a named file is of type directory, the file hierarchy rooted at that file shall be listed as well.</dd>
</dl>
<dl>
<dt>
<b>read</b></dt>
<dd>
In <b>read</b> mode (when <b>-r</b> is specified, but <b>-w</b> is not),  <i>pax</i> shall extract the members of the archive file read from the standard input, with pathnames matching the specified patterns. If an extracted file is of type directory, the file hierarchy rooted at that file shall be extracted as well. The extracted files shall be created performing pathname resolution with the directory in which  <i>pax</i> was invoked as the current working directory.</dd>
</dl>
<div class="spacer">
</div>
If an attempt is made to extract a directory when the directory already exists, this shall not be considered an error. If an attempt is made to extract a FIFO when the FIFO already exists, this shall not be considered an error.<div class="spacer">
</div>
The ownership, access, and modification times, and file mode of the restored files are discussed under the  <b>-p</b> option.<dl>
<dt>
<b>write</b></dt>
<dd>
In <b>write</b> mode (when <b>-w</b> is specified, but <b>-r</b> is not),  <i>pax</i> shall write the contents of the  <i>file</i> operands to the standard output in an archive format. If no  <i>file</i> operands are specified, a list of files to copy, one per line, shall be read from the standard input. A file of type directory shall include all of the files in the file hierarchy rooted at the file.</dd>
</dl>
<dl>
<dt>
<b>copy</b></dt>
<dd>
In <b>copy</b> mode (when both <b>-r</b> and <b>-w</b> are specified),  <i>pax</i> shall copy the <i>file</i> operands to the destination directory.</dd>
</dl>
<div class="spacer">
</div>
If no <i>file</i> operands are specified, a list of files to copy, one per line, shall be read from the standard input. A file of type directory shall include all of the files in the file hierarchy rooted at the file.<div class="spacer">
</div>
The effect of the <b>copy</b> shall be as if the copied files were written to an archive file and then subsequently extracted, except that there may be hard links between the original and the copied files. If the destination directory is a subdirectory of one of the files to be copied, the results are unspecified. If the destination directory is a file of a type not defined by the System Interfaces volume of IEEE&#160;Std&#160;1003.1-2001, the results are implementation-defined; otherwise, it shall be an error for the file named by the  <i>directory</i> operand not to exist, not be writable by the user, or not be a file of type directory.<div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
In <b>read</b> or <b>copy</b> modes, if intermediate directories are necessary to extract an archive member,  <i>pax</i> shall perform actions equivalent to the  <i>mkdir</i>() function defined in the System Interfaces volume of IEEE&#160;Std&#160;1003.1-2001, called with the following arguments:<dl>
<dt>
 *</dt>
<dd>
The intermediate directory used as the <i>path</i> argument</dd>
</dl>
<dl>
<dt>
 *</dt>
<dd>
The value of the bitwise-inclusive OR of S_IRWXU, S_IRWXG, and S_IRWXO as the  <i>mode</i> argument</dd>
</dl>
<div class="spacer">
</div>
If any specified <i>pattern</i> or <i>file</i> operands are not matched by at least one file or archive member,  <i>pax</i> shall write a diagnostic message to standard error for each one that did not match and exit with a non-zero exit status.<div class="spacer">
</div>
The archive formats described in the EXTENDED DESCRIPTION section shall be automatically detected on input. The default output archive format shall be implementation-defined.<div class="spacer">
</div>
A single archive can span multiple files. The <i>pax</i> utility shall determine, in an implementation-defined manner, what file to read or write as the next file.<div class="spacer">
</div>
If the selected archive format supports the specification of linked files, it shall be an error if these files cannot be linked when the archive is extracted. For archive formats that do not store file contents with each name that causes a hard link, if the file that contains the data is not extracted during this  <i>pax</i> session, either the data shall be restored from the original file, or a diagnostic message shall be displayed with the name of a file that can be used to extract the data. In traversing directories,  <i>pax</i> shall detect infinite loops; that is, entering a previously visited directory that is an ancestor of the last file visited. When it detects an infinite loop,  <i>pax</i> shall write a diagnostic message to standard error and shall terminate.</div>
<div class="section">
<h1>OPTIONS</h1> The  <i>pax</i> utility shall conform to the Base Definitions volume of IEEE&#160;Std&#160;1003.1-2001, Section 12.2, Utility Syntax Guidelines, except that the order of presentation of the  <b>-o</b>, <b>-p</b>, and <b>-s</b> options is significant.<div class="spacer">
</div>
The following options shall be supported:<dl>
<dt>
<b>-r</b></dt>
<dd>
Read an archive file from standard input.</dd>
</dl>
<dl>
<dt>
<b>-w</b></dt>
<dd>
Write files to the standard output in the specified archive format.</dd>
</dl>
<dl>
<dt>
<b>-a</b></dt>
<dd>
Append files to the end of the archive. It is implementation-defined which devices on the system support appending. Additional file formats unspecified by this volume of IEEE&#160;Std&#160;1003.1-2001 may impose restrictions on appending.</dd>
</dl>
<dl>
<dt>
<b>-b&#160;</b> <i>blocksize</i></dt>
<dd>
Block the output at a positive decimal integer number of bytes per write to the archive file. Devices and archive formats may impose restrictions on blocking. Blocking shall be automatically determined on input. Conforming applications shall not specify a  <i>blocksize</i> value larger than 32256. Default blocking when creating archives depends on the archive format. (See the  <b>-x</b> option below.)</dd>
</dl>
<dl>
<dt>
<b>-c</b></dt>
<dd>
Match all file or archive members except those specified by the <i>pattern</i> or  <i>file</i> operands.</dd>
</dl>
<dl>
<dt>
<b>-d</b></dt>
<dd>
Cause files of type directory being copied or archived or archive members of type directory being extracted or listed to match only the file or archive member itself and not the file hierarchy rooted at the file.</dd>
</dl>
<dl>
<dt>
<b>-f&#160;</b> <i>archive</i></dt>
<dd>
Specify the pathname of the input or output archive, overriding the default standard input (in  <b>list</b> or <b>read</b> modes) or standard output (  <b>write</b> mode).</dd>
</dl>
<dl>
<dt>
<b>-H</b></dt>
<dd>
If a symbolic link referencing a file of type directory is specified on the command line,  <i>pax</i> shall archive the file hierarchy rooted in the file referenced by the link, using the name of the link as the root of the file hierarchy. Otherwise, if a symbolic link referencing a file of any other file type which  <i>pax</i> can normally archive is specified on the command line, then  <i>pax</i> shall archive the file referenced by the link, using the name of the link. The default behavior shall be to archive the symbolic link itself.</dd>
</dl>
<dl>
<dt>
<b>-i</b></dt>
<dd>
Interactively rename files or archive members. For each archive member matching a  <i>pattern</i> operand or file matching a  <i>file</i> operand, a prompt shall be written to the file <b>/dev/tty</b>. The prompt shall contain the name of the file or archive member, but the format is otherwise unspecified. A line shall then be read from  <b>/dev/tty</b>. If this line is blank, the file or archive member shall be skipped. If this line consists of a single period, the file or archive member shall be processed with no modification to its name. Otherwise, its name shall be replaced with the contents of the line. The  <i>pax</i> utility shall immediately exit with a non-zero exit status if end-of-file is encountered when reading a response or if  <b>/dev/tty</b> cannot be opened for reading and writing.</dd>
</dl>
<div class="spacer">
</div>
The results of extracting a hard link to a file that has been renamed during extraction are unspecified.<dl>
<dt>
<b>-k</b></dt>
<dd>
Prevent the overwriting of existing files.</dd>
</dl>
<dl>
<dt>
<b>-l</b></dt>
<dd>
(The letter ell.) In <b>copy</b> mode, hard links shall be made between the source and destination file hierarchies whenever possible. If specified in conjunction with  <b>-H</b> or <b>-L</b>, when a symbolic link is encountered, the hard link created in the destination file hierarchy shall be to the file referenced by the symbolic link. If specified when neither  <b>-H</b> nor  <b>-L</b> is specified, when a symbolic link is encountered, the implementation shall create a hard link to the symbolic link in the source file hierarchy or copy the symbolic link to the destination.</dd>
</dl>
<dl>
<dt>
<b>-L</b></dt>
<dd>
If a symbolic link referencing a file of type directory is specified on the command line or encountered during the traversal of a file hierarchy,  <i>pax</i> shall archive the file hierarchy rooted in the file referenced by the link, using the name of the link as the root of the file hierarchy. Otherwise, if a symbolic link referencing a file of any other file type which  <i>pax</i> can normally archive is specified on the command line or encountered during the traversal of a file hierarchy,  <i>pax</i> shall archive the file referenced by the link, using the name of the link. The default behavior shall be to archive the symbolic link itself.</dd>
</dl>
<dl>
<dt>
<b>-n</b></dt>
<dd>
Select the first archive member that matches each <i>pattern</i> operand. No more than one archive member shall be matched for each pattern (although members of type directory shall still match the file hierarchy rooted at that file).</dd>
</dl>
<dl>
<dt>
<b>-o&#160;</b> <i>options</i></dt>
<dd>
Provide information to the implementation to modify the algorithm for extracting or writing files. The value of  <i>options</i> shall consist of one or more comma-separated keywords of the form:<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<div style="margin-left: 5.00ex;">
<div class="spacer">
</div>
<br/>
<i>keyword</i><b>[[</b><b>:</b><b>]</b><b>=</b><i>value</i><b>][</b><b>,</b><i>keyword</i><b>[[</b><b>:</b><b>]</b><b>=</b><i>value</i><b>]</b><b>, ...</b><b>]</b><br/>
</div>
<div class="spacer">
</div>
Some keywords apply only to certain file formats, as indicated with each description. Use of keywords that are inapplicable to the file format being processed produces undefined results.<div class="spacer">
</div>
Keywords in the <i>options</i> argument shall be a string that would be a valid portable filename as described in the Base Definitions volume of IEEE&#160;Std&#160;1003.1-2001, Section 3.276, Portable Filename Character Set.<dl>
<dt>
<b>Note:</b></dt>
<dd>
</dd>
</dl>
<div style="margin-left: 5.00ex;">
Keywords are not expected to be filenames, merely to follow the same character composition rules as portable filenames.</div>
<div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
Keywords can be preceded with white space. The <i>value</i> field shall consist of zero or more characters; within  <i>value</i>, the application shall precede any literal comma with a backslash, which shall be ignored, but preserves the comma as part of  <i>value</i>. A comma as the final character, or a comma followed solely by white space as the final characters, in  <i>options</i> shall be ignored. Multiple  <b>-o</b> options can be specified; if keywords given to these multiple  <b>-o</b> options conflict, the keywords and values appearing later in command line sequence shall take precedence and the earlier shall be silently ignored. The following keyword values of  <i>options</i> shall be supported for the file formats as indicated:<dl>
<dt>
<b>delete</b>=<i>pattern</i></dt>
<dd>
</dd>
</dl>
<div style="margin-left: 5.00ex;">
<div style="height: 1.00em;">
&#160;</div>
(Applicable only to the <b>-x</b> <b>pax</b> format.) When used in <b>write</b> or  <b>copy</b> mode, <i>pax</i> shall omit from extended header records that it produces any keywords matching the string pattern. When used in  <b>read</b> or <b>list</b> mode,  <i>pax</i> shall ignore any keywords matching the string pattern in the extended header records. In both cases, matching shall be performed using the pattern matching notation described in  <i>Patterns</i>  <i>Matching a Single</i>  <i>Character</i> and <i>Patterns Matching Multiple Characters</i> . For example:<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 5.00ex;">
<div class="spacer">
</div>
<br/>
<b>-o</b> <b>delete</b><b>=</b><i>security</i><b>.*</b><br/>
<b></b><br/>
</div>
<div class="spacer">
</div>
would suppress security-related information. See pax Extended Header for extended header record keyword usage.</div>
<dl>
<dt>
<b>exthdr.name</b>=<i>string</i></dt>
<dd>
</dd>
</dl>
<div style="margin-left: 5.00ex;">
<div style="height: 1.00em;">
&#160;</div>
(Applicable only to the <b>-x</b> <b>pax</b> format.) This keyword allows user control over the name that is written into the  <b>ustar</b> header blocks for the extended header produced under the circumstances described in pax Header Block . The name shall be the contents of  <i>string</i>, after the following character substitutions have been made:<table class="tbl">
<col style="width: 18.00ex;"/>
<col style="width: 113.00ex;"/>
<tbody>
<tr>
<td>
<b></b><i>string</i><b></b><i></i></td>
<td>
<i></i><b>&#160;</b><i></i></td>
</tr>
<tr>
<td>
<i></i><b>Includes:</b><i></i></td>
<td>
<i></i><b>Replaced By:</b><i></i></td>
</tr>
<tr>
<td>
<i>%d</i></td>
<td>
<i>The directory name of the file, equivalent to the result of the </i><i>dirname</i><i> utility on the translated pathname.</i></td>
</tr>
<tr>
<td>
<i>%f</i></td>
<td>
<i>The filename of the file, equivalent to the result of the </i><i>basename</i><i> utility on the translated pathname.</i></td>
</tr>
<tr>
<td>
<i>%p</i></td>
<td>
<i>The process ID of the </i><i>pax</i><i> process.</i></td>
</tr>
<tr>
<td>
<i>%%</i></td>
<td>
<i>A </i><b>'%'</b><i> character.</i></td>
</tr>
</tbody>
</table>
<div class="spacer">
</div>
Any other <b>'%'</b> characters in <i>string</i> produce undefined results.<div class="spacer">
</div>
If no <b>-o</b> <b>exthdr.name=</b> <i>string</i> is specified, <i>pax</i> shall use the following default value:<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 5.00ex;">
<div class="spacer">
</div>
<br/>
<b>%d/PaxHeaders.%p/%f</b><br/>
<b></b><br/>
</div>
</div>
<dl>
<dt>
<b>globexthdr.name</b>=<i>string</i></dt>
<dd>
</dd>
</dl>
<div style="margin-left: 5.00ex;">
<div style="height: 1.00em;">
&#160;</div>
(Applicable only to the <b>-x</b> <b>pax</b> format.) When used in <b>write</b> or  <b>copy</b> mode with the appropriate options,  <i>pax</i> shall create global extended header records with <b>ustar</b> header blocks that will be treated as regular files by previous versions of  <i>pax</i>. This keyword allows user control over the name that is written into the  <b>ustar</b> header blocks for global extended header records. The name shall be the contents of string, after the following character substitutions have been made:<table class="tbl">
<col style="width: 18.00ex;"/>
<col style="width: 114.00ex;"/>
<tbody>
<tr>
<td>
<b></b><i>string</i><b></b><i></i></td>
<td>
<i></i><b>&#160;</b><i></i></td>
</tr>
<tr>
<td>
<i></i><b>Includes:</b><i></i></td>
<td>
<i></i><b>Replaced By:</b><i></i></td>
</tr>
<tr>
<td>
<i>%n</i></td>
<td>
<i>An integer that represents the sequence number of the global extended header record in the archive, starting at 1.</i></td>
</tr>
<tr>
<td>
<i>%p</i></td>
<td>
<i>The process ID of the </i><i>pax</i><i> process.</i></td>
</tr>
<tr>
<td>
<i>%%</i></td>
<td>
<i>A </i><b>'%'</b><i> character.</i></td>
</tr>
</tbody>
</table>
<div class="spacer">
</div>
Any other <b>'%'</b> characters in <i>string</i> produce undefined results.<div class="spacer">
</div>
If no <b>-o</b> <b>globexthdr.name=</b> <i>string</i> is specified, <i>pax</i> shall use the following default value:<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 5.00ex;">
<div class="spacer">
</div>
<br/>
<b>$TMPDIR/GlobalHead.%p.%n</b><br/>
<b></b><br/>
</div>
<div class="spacer">
</div>
where $ <i>TMPDIR</i> represents the value of the <i>TMPDIR</i> environment variable. If  <i>TMPDIR</i> is not set, <i>pax</i> shall use  <b>/tmp</b>.</div>
<dl>
<dt>
<b>invalid</b>=<i>action</i></dt>
<dd>
</dd>
</dl>
<div style="margin-left: 5.00ex;">
<div style="height: 1.00em;">
&#160;</div>
(Applicable only to the <b>-x</b> <b>pax</b> format.) This keyword allows user control over the action  <i>pax</i> takes upon encountering values in an extended header record that, in  <b>read</b> or  <b>copy</b> mode, are invalid in the destination hierarchy or, in  <b>list</b> mode, cannot be written in the codeset and current locale of the implementation. The following are invalid values that shall be recognized by  <i>pax</i>:<div style="margin-left: 5.00ex;">
<dl>
<dt>
 *</dt>
<dd>
In <b>read</b> or <b>copy</b> mode, a filename or link name that contains character encodings invalid in the destination hierarchy. (For example, the name may contain embedded NULs.)</dd>
</dl>
<dl>
<dt>
 *</dt>
<dd>
In <b>read</b> or <b>copy</b> mode, a filename or link name that is longer than the maximum allowed in the destination hierarchy (for either a pathname component or the entire pathname).</dd>
</dl>
<dl>
<dt>
 *</dt>
<dd>
In <b>list</b> mode, any character string value (filename, link name, user name, and so on) that cannot be written in the codeset and current locale of the implementation.</dd>
</dl>
</div>
<div class="spacer">
</div>
The following mutually-exclusive values of the <i>action</i> argument are supported:<dl>
<dt>
<b>bypass</b></dt>
<dd>
<div style="margin-left: 5.00ex;">
In <b>read</b> or <b>copy</b> mode, <i>pax</i> shall bypass the file, causing no change to the destination hierarchy. In  <b>list</b> mode, <i>pax</i> shall write all requested valid values for the file, but its method for writing invalid values is unspecified.</div>
</dd>
</dl>
<dl>
<dt>
<b>rename</b></dt>
<dd>
<div style="margin-left: 5.00ex;">
In <b>read</b> or <b>copy</b> mode, <i>pax</i> shall act as if the <b>-i</b> option were in effect for each file with invalid filename or link name values, allowing the user to provide a replacement name interactively. In  <b>list</b> mode, <i>pax</i> shall behave identically to the  <b>bypass</b> action.</div>
</dd>
</dl>
<dl>
<dt>
<b>UTF-8</b></dt>
<dd>
<div style="margin-left: 5.00ex;">
When used in <b>read</b>, <b>copy</b>, or <b>list</b> mode and a filename, link name, owner name, or any other field in an extended header record cannot be translated from the  <b>pax</b> UTF-8 codeset format to the codeset and current locale of the implementation,  <i>pax</i> shall use the actual UTF-8 encoding for the name.</div>
</dd>
</dl>
<dl>
<dt>
<b>write</b></dt>
<dd>
<div style="margin-left: 5.00ex;">
In <b>read</b> or <b>copy</b> mode, <i>pax</i> shall write the file, translating or truncating the name, regardless of whether this may overwrite an existing file with a valid name. In  <b>list</b> mode,  <i>pax</i> shall behave identically to the  <b>bypass</b> action.</div>
<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<div class="spacer">
</div>
If no <b>-o</b> <b>invalid=</b> option is specified, <i>pax</i> shall act as if  <b>-o</b> <b>invalid=</b> <b>bypass</b> were specified. Any overwriting of existing files that may be allowed by the  <b>-o</b> <b>invalid=</b> actions shall be subject to permission (  <b>-p</b>) and modification time ( <b>-u</b>) restrictions, and shall be suppressed if the  <b>-k</b> option is also specified.</div>
<dl>
<dt>
<b>linkdata</b></dt>
<dd>
</dd>
</dl>
<div style="margin-left: 5.00ex;">
<div style="height: 1.00em;">
&#160;</div>
(Applicable only to the <b>-x</b> <b>pax</b> format.) In <b>write</b> mode,  <i>pax</i> shall write the contents of a file to the archive even when that file is merely a hard link to a file whose contents have already been written to the archive.</div>
<dl>
<dt>
<b>listopt</b>=<i>format</i></dt>
<dd>
</dd>
</dl>
<div style="margin-left: 5.00ex;">
<div style="height: 1.00em;">
&#160;</div>
This keyword specifies the output format of the table of contents produced when the  <b>-v</b> option is specified in <b>list</b> mode. See List Mode Format Specifications . To avoid ambiguity, the  <b>listopt=</b> <i>format</i> shall be the only or final  <b>keyword=</b> <i>value</i> pair in a <b>-o</b> option-argument; all characters in the remainder of the option-argument shall be considered part of the format string. When multiple  <b>-o</b> <b>listopt=</b> <i>format</i> options are specified, the format strings shall be considered a single, concatenated string, evaluated in command line order.</div>
<dl>
<dt>
<b>times</b></dt>
<dd>
</dd>
</dl>
<div style="margin-left: 5.00ex;">
<div style="height: 1.00em;">
&#160;</div>
(Applicable only to the <b>-x</b> <i>pax</i> format.) When used in <b>write</b> or  <b>copy</b> mode, <i>pax</i> shall include  <b>atime</b>, <b>ctime</b>, and <b>mtime</b> extended header records for each file. See pax Extended Header File Times .</div>
<div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
In addition to these keywords, if the <b>-x</b> <i>pax</i> format is specified, any of the keywords and values defined in pax Extended Header, including implementation extensions, can be used in  <b>-o</b> option-arguments, in either of two modes:<dl>
<dt>
<b>keyword</b>=<i>value</i></dt>
<dd>
</dd>
</dl>
<div style="margin-left: 5.00ex;">
<div style="height: 1.00em;">
&#160;</div>
When used in <b>write</b> or <b>copy</b> mode, these keyword/value pairs shall be included at the beginning of the archive as  <b>typeflag</b> <b>g</b> global extended header records. When used in  <b>read</b> or <b>list</b> mode, these keyword/value pairs shall act as if they had been at the beginning of the archive as  <b>typeflag</b>  <b>g</b> global extended header records.</div>
<dl>
<dt>
<b>keyword</b>:=<i>value</i></dt>
<dd>
</dd>
</dl>
<div style="margin-left: 5.00ex;">
<div style="height: 1.00em;">
&#160;</div>
When used in <b>write</b> or <b>copy</b> mode, these keyword/value pairs shall be included as records at the beginning of a  <b>typeflag</b> <b>x</b> extended header for each file. (This shall be equivalent to the equal-sign form except that it creates no  <b>typeflag</b> <b>g</b> global extended header records.) When used in  <b>read</b> or <b>list</b> mode, these keyword/value pairs shall act as if they were included as records at the end of each extended header; thus, they shall override any global or file-specific extended header record keywords of the same names. For example, in the command:<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 5.00ex;">
<div class="spacer">
</div>
<br/>
<b>pax -r -o &quot;</b><br/>
<b>gname:=mygroup,</b><br/>
<b>&quot; &lt;archive</b><br/>
<b></b><br/>
</div>
<div class="spacer">
</div>
the group name will be forced to a new value for all files read from the archive.</div>
<div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
The precedence of <b>-o</b> keywords over various fields in the archive is described in pax Extended Header Keyword Precedence .<dl>
<dt>
<b>-p&#160;</b> <i>string</i></dt>
<dd>
Specify one or more file characteristic options (privileges). The  <i>string</i> option-argument shall be a string specifying file characteristics to be retained or discarded on extraction. The string shall consist of the specification characters  <b>a</b>,  <b>e</b>, <b>m</b>, <b>o</b>, and <b>p</b> . Other implementation-defined characters can be included. Multiple characteristics can be concatenated within the same string and multiple  <b>-p</b> options can be specified. The meaning of the specification characters are as follows:</dd>
</dl>
<dl>
<dt>
<b>a</b></dt>
<dd>
</dd>
</dl>
<div style="margin-left: 5.00ex;">
Do not preserve file access times.</div>
<dl>
<dt>
<b>e</b></dt>
<dd>
</dd>
</dl>
<div style="margin-left: 5.00ex;">
Preserve the user ID, group ID, file mode bits (see the Base Definitions volume of IEEE&#160;Std&#160;1003.1-2001, Section 3.168, File Mode Bits), access time, modification time, and any other implementation-defined file characteristics.</div>
<dl>
<dt>
<b>m</b></dt>
<dd>
</dd>
</dl>
<div style="margin-left: 5.00ex;">
Do not preserve file modification times.</div>
<dl>
<dt>
<b>o</b></dt>
<dd>
</dd>
</dl>
<div style="margin-left: 5.00ex;">
Preserve the user ID and group ID.</div>
<dl>
<dt>
<b>p</b></dt>
<dd>
</dd>
</dl>
<div style="margin-left: 5.00ex;">
Preserve the file mode bits. Other implementation-defined file mode attributes may be preserved.</div>
<div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
In the preceding list, &quot;preserve&quot; indicates that an attribute stored in the archive shall be given to the extracted file, subject to the permissions of the invoking process. The access and modification times of the file shall be preserved unless otherwise specified with the  <b>-p</b> option or not stored in the archive. All attributes that are not preserved shall be determined as part of the normal file creation action (see  <i>File</i>  <i>Read, Write, and</i>  <i>Creation</i> ).<div class="spacer">
</div>
If neither the <b>e</b> nor the <b>o</b> specification character is specified, or the user ID and group ID are not preserved for any reason,  <i>pax</i> shall not set the S_ISUID and S_ISGID bits of the file mode.<div class="spacer">
</div>
If the preservation of any of these items fails for any reason, <i>pax</i> shall write a diagnostic message to standard error. Failure to preserve these items shall affect the final exit status, but shall not cause the extracted file to be deleted.<div class="spacer">
</div>
If file characteristic letters in any of the <i>string</i> option-arguments are duplicated or conflict with each other, the ones given last shall take precedence. For example, if  <b>-p</b> <b>eme</b> is specified, file modification times are preserved.<dl>
<dt>
<b>-s&#160;</b> <i>replstr</i></dt>
<dd>
Modify file or archive member names named by <i>pattern</i> or <i>file</i> operands according to the substitution expression  <i>replstr</i>, using the syntax of the <i>ed</i> utility. The concepts of &quot;address&quot; and &quot;line&quot; are meaningless in the context of the  <i>pax</i> utility, and shall not be supplied. The format shall be:<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<div style="margin-left: 5.00ex;">
<div class="spacer">
</div>
<br/>
<b>-s /</b><i>old</i><b>/</b><i>new</i><b>/</b><b>[</b><b>gp</b><b>]</b><br/>
</div>
<div class="spacer">
</div>
where as in <i>ed</i>, <i>old</i> is a basic regular expression and  <i>new</i> can contain an ampersand,  <b>'\n'</b> (where <i>n</i> is a digit) backreferences, or subexpression matching. The  <i>old</i> string shall also be permitted to contain &lt;newline&gt;s.<div class="spacer">
</div>
Any non-null character can be used as a delimiter ( <b>'/'</b> shown here). Multiple  <b>-s</b> expressions can be specified; the expressions shall be applied in the order specified, terminating with the first successful substitution. The optional trailing  <b>'g'</b> is as defined in the <i>ed</i> utility. The optional trailing  <b>'p'</b> shall cause successful substitutions to be written to standard error. File or archive member names that substitute to the empty string shall be ignored when reading and writing archives.<dl>
<dt>
<b>-t</b></dt>
<dd>
When reading files from the file system, and if the user has the permissions required by  <i>utime</i>() to do so, set the access time of each file read to the access time that it had before being read by  <i>pax</i>.</dd>
</dl>
<dl>
<dt>
<b>-u</b></dt>
<dd>
Ignore files that are older (having a less recent file modification time) than a pre-existing file or archive member with the same name. In  <b>read</b> mode, an archive member with the same name as a file in the file system shall be extracted if the archive member is newer than the file. In  <b>write</b> mode, an archive file member with the same name as a file in the file system shall be superseded if the file is newer than the archive member. If  <b>-a</b> is also specified, this is accomplished by appending to the archive; otherwise, it is unspecified whether this is accomplished by actual replacement in the archive or by appending to the archive. In  <b>copy</b> mode, the file in the destination hierarchy shall be replaced by the file in the source hierarchy or by a link to the file in the source hierarchy if the file in the source hierarchy is newer.</dd>
</dl>
<dl>
<dt>
<b>-v</b></dt>
<dd>
In <b>list</b> mode, produce a verbose table of contents (see the STDOUT section). Otherwise, write archive member pathnames to standard error (see the STDERR section).</dd>
</dl>
<dl>
<dt>
<b>-x&#160;</b> <i>format</i></dt>
<dd>
Specify the output archive format. The <i>pax</i> utility shall support the following formats:</dd>
</dl>
<dl>
<dt>
<b>cpio</b></dt>
<dd>
</dd>
</dl>
<div style="margin-left: 5.00ex;">
The <b>cpio</b> interchange format; see the EXTENDED DESCRIPTION section. The default  <i>blocksize</i> for this format for character special archive files shall be 5120. Implementations shall support all  <i>blocksize</i> values less than or equal to 32256 that are multiples of 512.</div>
<dl>
<dt>
<b>pax</b></dt>
<dd>
</dd>
</dl>
<div style="margin-left: 5.00ex;">
The <b>pax</b> interchange format; see the EXTENDED DESCRIPTION section. The default  <i>blocksize</i> for this format for character special archive files shall be 5120. Implementations shall support all  <i>blocksize</i> values less than or equal to 32256 that are multiples of 512.</div>
<dl>
<dt>
<b>ustar</b></dt>
<dd>
</dd>
</dl>
<div style="margin-left: 5.00ex;">
The <b>tar</b> interchange format; see the EXTENDED DESCRIPTION section. The default  <i>blocksize</i> for this format for character special archive files shall be 10240. Implementations shall support all  <i>blocksize</i> values less than or equal to 32256 that are multiples of 512.</div>
<div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
Implementation-defined formats shall specify a default block size as well as any other block sizes supported for character special archive files.<div class="spacer">
</div>
Any attempt to append to an archive file in a format different from the existing archive format shall cause  <i>pax</i> to exit immediately with a non-zero exit status.<div class="spacer">
</div>
In <b>copy</b> mode, if no <b>-x</b> format is specified, <i>pax</i> shall behave as if  <b>-x</b> <i>pax</i> were specified.<dl>
<dt>
<b>-X</b></dt>
<dd>
When traversing the file hierarchy specified by a pathname, <i>pax</i> shall not descend into directories that have a different device ID (  <i>st_dev</i>; see the System Interfaces volume of IEEE&#160;Std&#160;1003.1-2001,  <i>stat</i>()).<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<div class="spacer">
</div>
The options that operate on the names of files or archive members (  <b>-c</b>, <b>-i</b>, <b>-n</b>, <b>-s</b>, <b>-u</b>, and  <b>-v</b>) shall interact as follows. In <b>read</b> mode, the archive members shall be selected based on the user-specified  <i>pattern</i> operands as modified by the <b>-c</b>, <b>-n</b>, and  <b>-u</b> options. Then, any <b>-s</b> and <b>-i</b> options shall modify, in that order, the names of the selected files. The  <b>-v</b> option shall write names resulting from these modifications.<div class="spacer">
</div>
In <b>write</b> mode, the files shall be selected based on the user-specified pathnames as modified by the  <b>-n</b> and  <b>-u</b> options. Then, any <b>-s</b> and <b>-i</b> options shall modify, in that order, the names of these selected files. The  <b>-v</b> option shall write names resulting from these modifications.<div class="spacer">
</div>
If both the <b>-u</b> and <b>-n</b> options are specified, <i>pax</i> shall not consider a file selected unless it is newer than the file to which it is compared.<div class="subsection">
<h2>List Mode Format Specifications</h2> In  <b>list</b> mode with the <b>-o</b> <b>listopt=</b> <i>format</i> option, the  <i>format</i> argument shall be applied for each selected file. The  <i>pax</i> utility shall append a &lt;newline&gt; to the  <b>listopt</b> output for each selected file. The  <i>format</i> argument shall be used as the <i>format</i> string described in the Base Definitions volume of IEEE&#160;Std&#160;1003.1-2001, Chapter 5, File Format Notation, with the exceptions 1. through 5. defined in the EXTENDED DESCRIPTION section of  <i>printf</i>, plus the following exceptions:<dl>
<dt>
6.</dt>
<dd>
The sequence ( <i>keyword</i>) can occur before a format conversion specifier. The conversion argument is defined by the value of  <i>keyword</i>. The implementation shall support the following keywords:</dd>
</dl>
<div style="margin-left: 5.00ex;">
<dl>
<dt>
 *</dt>
<dd>
Any of the Field Name entries in ustar Header Block and Octet-Oriented cpio Archive Entry . The implementation may support the  <i>cpio</i> keywords without the leading  <b>c_</b> in addition to the form required by Values for cpio c_mode Field .</dd>
</dl>
<dl>
<dt>
 *</dt>
<dd>
Any keyword defined for the extended header in pax Extended Header .</dd>
</dl>
<dl>
<dt>
 *</dt>
<dd>
Any keyword provided as an implementation-defined extension within the extended header defined in pax Extended Header .</dd>
</dl>
</div>
<div class="spacer">
</div>
For example, the sequence <b>&quot;%(charset)s&quot;</b> is the string value of the name of the character set in the extended header.<div class="spacer">
</div>
The result of the keyword conversion argument shall be the value from the applicable header field or extended header, without any trailing NULs.<div class="spacer">
</div>
All keyword values used as conversion arguments shall be translated from the UTF-8 encoding to the character set appropriate for the local file system, user database, and so on, as applicable.<dl>
<dt>
7.</dt>
<dd>
An additional conversion specifier character, <b>T</b>, shall be used to specify time formats. The  <b>T</b> conversion specifier character can be preceded by the sequence (  <i>keyword=</i>  <i>subformat</i>), where <i>subformat</i> is a date format as defined by  <i>date</i> operands. The default <i>keyword</i> shall be  <b>mtime</b> and the default subformat shall be:<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<div style="margin-left: 5.00ex;">
<div class="spacer">
</div>
<br/>
<b>%b %e %H:%M %Y</b><br/>
<b></b><br/>
</div>
<dl>
<dt>
8.</dt>
<dd>
An additional conversion specifier character, <b>M</b>, shall be used to specify the file mode string as defined in  <i>ls</i> Standard Output. If (  <i>keyword</i>) is omitted, the <b>mode</b> keyword shall be used. For example,  <b>%.1M</b> writes the single character corresponding to the &lt; <i>entry&#160;type</i>&gt; field of the <i>ls</i> <b>-l</b> command.</dd>
</dl>
<dl>
<dt>
9.</dt>
<dd>
An additional conversion specifier character, <b>D</b>, shall be used to specify the device for block or special files, if applicable, in an implementation-defined format. If not applicable, and (  <i>keyword</i>) is specified, then this conversion shall be equivalent to  <b>%(</b><i>keyword</i><b>)u</b>. If not applicable, and (  <i>keyword</i>) is omitted, then this conversion shall be equivalent to &lt;space&gt;.</dd>
</dl>
<dl>
<dt>
10.</dt>
<dd>
An additional conversion specifier character, <b>F</b>, shall be used to specify a pathname. The  <b>F</b> conversion character can be preceded by a sequence of comma-separated keywords:<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<div style="margin-left: 5.00ex;">
<div class="spacer">
</div>
<br/>
<b>(</b><i>keyword</i><b>[</b><b>,</b><i>keyword</i><b>]</b> <b>... )</b><br/>
<b></b><br/>
</div>
<div class="spacer">
</div>
The values for all the keywords that are non-null shall be concatenated together, each separated by a  <b>'/'</b> . The default shall be (  <b>path</b>) if the keyword <b>path</b> is defined; otherwise, the default shall be (  <b>prefix</b>, <b>name</b>).<dl>
<dt>
11.</dt>
<dd>
An additional conversion specifier character, <b>L</b>, shall be used to specify a symbolic line expansion. If the current file is a symbolic link, then  <b>%L</b> shall expand to:<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<div style="margin-left: 5.00ex;">
<div class="spacer">
</div>
<br/>
<b>&quot;%s -&gt; %s&quot;, &lt;</b><i>value of keyword</i><b>&gt;, &lt;</b><i>contents of link</i><b>&gt;</b><br/>
<b></b><br/>
</div>
<div class="spacer">
</div>
Otherwise, the <b>%L</b> conversion specification shall be the equivalent of  <b>%F</b> .<div style="height: 1.00em;">
&#160;</div>
</div>
</div>
<div class="section">
<h1>OPERANDS</h1> The following operands shall be supported:<dl>
<dt>
<i>directory</i></dt>
<dd>
The destination directory pathname for <b>copy</b> mode.</dd>
</dl>
<dl>
<dt>
<i>file</i></dt>
<dd>
A pathname of a file to be copied or archived.</dd>
</dl>
<dl>
<dt>
<i>pattern</i></dt>
<dd>
A pattern matching one or more pathnames of archive members. A pattern must be given in the name-generating notation of the pattern matching notation in  <i>Pattern Matching Notation</i>, including the filename expansion rules in  <i>Patterns Used for Filename Expansion</i> . The default, if no  <i>pattern</i> is specified, is to select all members in the archive.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
</div>
<div class="section">
<h1>STDIN</h1> In  <b>write</b> mode, the standard input shall be used only if no <i>file</i> operands are specified. It shall be a text file containing a list of pathnames, one per line, without leading or trailing &lt;blank&gt;s.<div class="spacer">
</div>
In <b>list</b> and <b>read</b> modes, if <b>-f</b> is not specified, the standard input shall be an archive file.<div class="spacer">
</div>
Otherwise, the standard input shall not be used.</div>
<div class="section">
<h1>INPUT FILES</h1> The input file named by the  <i>archive</i> option-argument, or standard input when the archive is read from there, shall be a file formatted according to one of the specifications in the EXTENDED DESCRIPTION section or some other implementation-defined format.<div class="spacer">
</div>
The file <b>/dev/tty</b> shall be used to write prompts and read responses.</div>
<div class="section">
<h1>ENVIRONMENT VARIABLES</h1> The following environment variables shall affect the execution of  <i>pax</i>:<dl>
<dt>
<i>LANG</i></dt>
<dd>
Provide a default value for the internationalization variables that are unset or null. (See the Base Definitions volume of IEEE&#160;Std&#160;1003.1-2001, Section 8.2, Internationalization Variables for the precedence of internationalization variables used to determine the values of locale categories.)</dd>
</dl>
<dl>
<dt>
<i>LC_ALL</i></dt>
<dd>
If set to a non-empty string value, override the values of all the other internationalization variables.</dd>
</dl>
<dl>
<dt>
<i>LC_COLLATE</i></dt>
<dd>
<div style="height: 1.00em;">
&#160;</div>
Determine the locale for the behavior of ranges, equivalence classes, and multi-character collating elements used in the pattern matching expressions for the  <i>pattern</i> operand, the basic regular expression for the  <b>-s</b> option, and the extended regular expression defined for the  <b>yesexpr</b> locale keyword in the  <i>LC_MESSAGES</i> category.</dd>
</dl>
<dl>
<dt>
<i>LC_CTYPE</i></dt>
<dd>
Determine the locale for the interpretation of sequences of bytes of text data as characters (for example, single-byte as opposed to multi-byte characters in arguments and input files), the behavior of character classes used in the extended regular expression defined for the  <b>yesexpr</b> locale keyword in the <i>LC_MESSAGES</i> category, and pattern matching.</dd>
</dl>
<dl>
<dt>
<i>LC_MESSAGES</i></dt>
<dd>
Determine the locale for the processing of affirmative responses that should be used to affect the format and contents of diagnostic messages written to standard error.</dd>
</dl>
<dl>
<dt>
<i>LC_TIME</i></dt>
<dd>
Determine the format and contents of date and time strings when the  <b>-v</b> option is specified.</dd>
</dl>
<dl>
<dt>
<i>NLSPATH</i></dt>
<dd>
Determine the location of message catalogs for the processing of <i>LC_MESSAGES</i>  <i>.</i></dd>
</dl>
<dl>
<dt>
<i>TMPDIR</i></dt>
<dd>
Determine the pathname that provides part of the default global extended header record file, as described for the  <b>-o</b>  <b>globexthdr=</b> keyword in the OPTIONS section.</dd>
</dl>
<dl>
<dt>
<i>TZ</i></dt>
<dd>
Determine the timezone used to calculate date and time strings when the  <b>-v</b> option is specified. If <i>TZ</i> is unset or null, an unspecified default timezone shall be used.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
</div>
<div class="section">
<h1>ASYNCHRONOUS EVENTS</h1> Default.</div>
<div class="section">
<h1>STDOUT</h1> In  <b>write</b> mode, if <b>-f</b> is not specified, the standard output shall be the archive formatted according to one of the specifications in the EXTENDED DESCRIPTION section, or some other implementation-defined format (see  <b>-x</b> <i>format</i>).<div class="spacer">
</div>
In <b>list</b> mode, when the <b>-o</b> <b>listopt</b>= <i>format</i> has been specified, the selected archive members shall be written to standard output using the format described under List Mode Format Specifications . In  <b>list</b> mode without the <b>-o</b> <b>listopt</b>= <i>format</i> option, the table of contents of the selected archive members shall be written to standard output using the following format:<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 5.00ex;">
<div class="spacer">
</div>
<br/>
<b>&quot;%s\n&quot;, &lt;</b><i>pathname</i><b>&gt;</b><br/>
<b></b><br/>
</div>
<div class="spacer">
</div>
If the <b>-v</b> option is specified in <b>list</b> mode, the table of contents of the selected archive members shall be written to standard output using the following formats.<div class="spacer">
</div>
For pathnames representing hard links to previous members of the archive:<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 5.00ex;">
<div class="spacer">
</div>
<br/>
<b>&quot;%s == %s\n&quot;, &lt;</b><i>ls</i> <b>-l</b> <i>listing</i><b>&gt;, &lt;</b><i>linkname</i><b>&gt;</b><br/>
<b></b><br/>
</div>
<div class="spacer">
</div>
For all other pathnames:<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 5.00ex;">
<div class="spacer">
</div>
<br/>
<b>&quot;%s\n&quot;, &lt;</b><i>ls</i> <b>-l</b> <i>listing</i><b>&gt;</b><br/>
<b></b><br/>
</div>
<div class="spacer">
</div>
where &lt;<i>ls&#160;</i> -l&#160;<i>listing</i>&gt; shall be the format specified by the  <i>ls</i> utility with the <b>-l</b> option. When writing pathnames in this format, it is unspecified what is written for fields for which the underlying archive format does not have the correct information, although the correct number of &lt;blank&gt;-separated fields shall be written.<div class="spacer">
</div>
In <b>list</b> mode, standard output shall not be buffered more than a line at a time.</div>
<div class="section">
<h1>STDERR</h1> If  <b>-v</b> is specified in <b>read</b>, <b>write</b>, or <b>copy</b> modes,  <i>pax</i> shall write the pathnames it processes to the standard error output using the following format:<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 5.00ex;">
<div class="spacer">
</div>
<br/>
<b>&quot;%s\n&quot;, &lt;</b><i>pathname</i><b>&gt;</b><br/>
<b></b><br/>
</div>
<div class="spacer">
</div>
These pathnames shall be written as soon as processing is begun on the file or archive member, and shall be flushed to standard error. The trailing &lt;newline&gt;, which shall not be buffered, is written when the file has been read or written.<div class="spacer">
</div>
If the <b>-s</b> option is specified, and the replacement string has a trailing  <b>'p'</b>, substitutions shall be written to standard error in the following format:<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 5.00ex;">
<div class="spacer">
</div>
<br/>
<b>&quot;%s &gt;&gt; %s\n&quot;, &lt;</b><i>original pathname</i><b>&gt;, &lt;</b><i>new pathname</i><b>&gt;</b><br/>
<b></b><br/>
</div>
<div class="spacer">
</div>
In all operating modes of <i>pax</i>, optional messages of unspecified format concerning the input archive format and volume number, the number of files, blocks, volumes, and media parts as well as other diagnostic messages may be written to standard error.<div class="spacer">
</div>
In all formats, for both standard output and standard error, it is unspecified how non-printable characters in pathnames or link names are written.<div class="spacer">
</div>
When <i>pax</i> is in <b>read</b> mode or <b>list</b> mode, using the  <b>-x</b> <b>pax</b> archive format, and a filename, link name, owner name, or any other field in an extended header record cannot be translated from the  <b>pax</b> UTF-8 codeset format to the codeset and current locale of the implementation,  <i>pax</i> shall write a diagnostic message to standard error, shall process the file as described for the  <b>-o</b> <b>invalid=</b> option, and then shall process the next file in the archive.</div>
<div class="section">
<h1>OUTPUT FILES</h1> In  <b>read</b> mode, the extracted output files shall be of the archived file type. In  <b>copy</b> mode, the copied output files shall be the type of the file being copied. In either mode, existing files in the destination hierarchy shall be overwritten only when all permission (  <b>-p</b>), modification time ( <b>-u</b>), and invalid-value (  <b>-o</b> <b>invalid</b>=) tests allow it.<div class="spacer">
</div>
In <b>write</b> mode, the output file named by the <b>-f</b> option-argument shall be a file formatted according to one of the specifications in the EXTENDED DESCRIPTION section, or some other implementation-defined format.</div>
<div class="section">
<h1>EXTENDED DESCRIPTION</h1><div class="subsection">
<h2>pax Interchange Format</h2> A  <i>pax</i> archive tape or file produced in the <b>-x</b> <b>pax</b> format shall contain a series of blocks. The physical layout of the archive shall be identical to the  <b>ustar</b> format described in ustar Interchange Format . Each file archived shall be represented by the following sequence:<dl>
<dt>
 *</dt>
<dd>
An optional header block with extended header records. This header block is of the form described in pax Header Block, with a  <i>typeflag</i> value of  <b>x</b> or <b>g</b>. The extended header records, described in pax Extended Header, shall be included as the data for this header block.</dd>
</dl>
<dl>
<dt>
 *</dt>
<dd>
A header block that describes the file. Any fields in the preceding optional extended header shall override the associated fields in this header block for this file.</dd>
</dl>
<dl>
<dt>
 *</dt>
<dd>
Zero or more blocks that contain the contents of the file.</dd>
</dl>
<div class="spacer">
</div>
At the end of the archive file there shall be two 512-byte blocks filled with binary zeros, interpreted as an end-of-archive indicator.<div class="spacer">
</div>
A schematic of an example archive with global extended header records and two actual files is shown in pax Format Archive Example . In the example, the second file in the archive has no extended header preceding it, presumably because it has no need for extended attributes.<dl>
<dt>
<div style="height: 1.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
<b>Figure: pax Format Archive Example</b></dt>
<dd>
</dd>
</dl>
</div>
<div class="subsection">
<h2>pax Header Block</h2> The  <b>pax</b> header block shall be identical to the <b>ustar</b> header block described in ustar Interchange Format, except that two additional  <i>typeflag</i> values are defined:<dl>
<dt>
<b>x</b></dt>
<dd>
Represents extended header records for the following file in the archive (which shall have its own  <b>ustar</b> header block). The format of these extended header records shall be as described in pax Extended Header .</dd>
</dl>
<dl>
<dt>
<b>g</b></dt>
<dd>
Represents global extended header records for the following files in the archive. The format of these extended header records shall be as described in pax Extended Header . Each value shall affect all subsequent files that do not override that value in their own extended header record and until another global extended header record is reached that provides another value for the same field. The  <i>typeflag</i> <b>g</b> global headers should not be used with interchange media that could suffer partial data loss in transporting the archive.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<div class="spacer">
</div>
For both of these types, the <i>size</i> field shall be the size of the extended header records in octets. The other fields in the header block are not meaningful to this version of the  <i>pax</i> utility. However, if this archive is read by a  <i>pax</i> utility conforming to the ISO&#160;POSIX-2:1993 standard, the header block fields are used to create a regular file that contains the extended header records as data. Therefore, header block field values should be selected to provide reasonable file access to this regular file.<div class="spacer">
</div>
A further difference from the <b>ustar</b> header block is that data blocks for files of  <i>typeflag</i> 1 (the digit one) (hard link) may be included, which means that the size field may be greater than zero. Archives created by  <i>pax</i> <b>-o</b>  <b>linkdata</b> shall include these data blocks with the hard links.</div>
<div class="subsection">
<h2>pax Extended Header</h2> A  <b>pax</b> extended header contains values that are inappropriate for the  <b>ustar</b> header block because of limitations in that format: fields requiring a character encoding other than that described in the ISO/IEC&#160;646:1991 standard, fields representing file attributes not described in the  <b>ustar</b> header, and fields whose format or length do not fit the requirements of the  <b>ustar</b> header. The values in an extended header add attributes to the following file (or files; see the description of the  <i>typeflag</i> <b>g</b> header block) or override values in the following header block(s), as indicated in the following list of keywords.<div class="spacer">
</div>
An extended header shall consist of one or more records, each constructed as follows:<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 5.00ex;">
<div class="spacer">
</div>
<br/>
<b>&quot;%d %s=%s\n&quot;, &lt;</b><i>length</i><b>&gt;, &lt;</b><i>keyword</i><b>&gt;, &lt;</b><i>value</i><b>&gt;</b><br/>
<b></b><br/>
</div>
<div class="spacer">
</div>
The extended header records shall be encoded according to the ISO/IEC&#160;10646-1:2000 standard (UTF-8). The &lt; <i>length</i>&gt; field, &lt;blank&gt;, equals sign, and &lt;newline&gt; shown shall be limited to the portable character set, as encoded in UTF-8. The &lt; <i>keyword</i>&gt; and &lt;<i>value</i>&gt; fields can be any UTF-8 characters. The &lt; <i>length</i>&gt; field shall be the decimal length of the extended header record in octets, including the trailing &lt;newline&gt;.<div class="spacer">
</div>
The &lt;<i>keyword</i>&gt; field shall be one of the entries from the following list or a keyword provided as an implementation extension. Keywords consisting entirely of lowercase letters, digits, and periods are reserved for future standardization. A keyword shall not include an equals sign. (In the following list, the notations &quot;file(s)&quot; or &quot;block(s)&quot; is used to acknowledge that a keyword affects the following single file after a  <i>typeflag</i>  <b>x</b> extended header, but possibly multiple files after  <i>typeflag</i> <b>g</b>. Any requirements in the list for <i>pax</i> to include a record when in  <b>write</b> or <b>copy</b> mode shall apply only when such a record has not already been provided through the use of the  <b>-o</b> option. When used in  <b>copy</b> mode, <i>pax</i> shall behave as if an archive had been created with applicable extended header records and then extracted.)<dl>
<dt>
<b>atime</b></dt>
<dd>
The file access time for the following file(s), equivalent to the value of the  <i>st_atime</i> member of the <b>stat</b> structure for a file, as described by the  <i>stat</i>() function. The access time shall be restored if the process has the appropriate privilege required to do so. The format of the &lt; <i>value</i>&gt; shall be as described in pax Extended Header File Times .</dd>
</dl>
<dl>
<dt>
<b>charset</b></dt>
<dd>
The name of the character set used to encode the data in the following file(s). The entries in the following table are defined to refer to known standards; additional names may be agreed on between the originator and recipient.<table class="tbl">
<col style="width: 23.00ex;"/>
<col style="width: 29.00ex;"/>
<tbody>
<tr>
<td>
<b>&lt;value&gt;</b></td>
<td>
<b>Formal Standard</b></td>
</tr>
<tr>
<td>
ISO-IR 646 1990</td>
<td>
ISO/IEC 646:1990</td>
</tr>
<tr>
<td>
ISO-IR 8859 1 1998</td>
<td>
ISO/IEC 8859-1:1998</td>
</tr>
<tr>
<td>
ISO-IR 8859 2 1999</td>
<td>
ISO/IEC 8859-2:1999</td>
</tr>
<tr>
<td>
ISO-IR 8859 3 1999</td>
<td>
ISO/IEC 8859-3:1999</td>
</tr>
<tr>
<td>
ISO-IR 8859 4 1998</td>
<td>
ISO/IEC 8859-4:1998</td>
</tr>
<tr>
<td>
ISO-IR 8859 5 1999</td>
<td>
ISO/IEC 8859-5:1999</td>
</tr>
<tr>
<td>
ISO-IR 8859 6 1999</td>
<td>
ISO/IEC 8859-6:1999</td>
</tr>
<tr>
<td>
ISO-IR 8859 7 1987</td>
<td>
ISO/IEC 8859-7:1987</td>
</tr>
<tr>
<td>
ISO-IR 8859 8 1999</td>
<td>
ISO/IEC 8859-8:1999</td>
</tr>
<tr>
<td>
ISO-IR 8859 9 1999</td>
<td>
ISO/IEC 8859-9:1999</td>
</tr>
<tr>
<td>
ISO-IR 8859 10 1998</td>
<td>
ISO/IEC 8859-10:1998</td>
</tr>
<tr>
<td>
ISO-IR 8859 13 1998</td>
<td>
ISO/IEC 8859-13:1998</td>
</tr>
<tr>
<td>
ISO-IR 8859 14 1998</td>
<td>
ISO/IEC 8859-14:1998</td>
</tr>
<tr>
<td>
ISO-IR 8859 15 1999</td>
<td>
ISO/IEC 8859-15:1999</td>
</tr>
<tr>
<td>
ISO-IR 10646 2000</td>
<td>
ISO/IEC 10646:2000</td>
</tr>
<tr>
<td>
ISO-IR 10646 2000 UTF-8</td>
<td>
ISO/IEC 10646, UTF-8 encoding</td>
</tr>
<tr>
<td>
BINARY</td>
<td>
None.</td>
</tr>
</tbody>
</table>
</dd>
</dl>
<div class="spacer">
</div>
The encoding is included in an extended header for information only; when  <i>pax</i> is used as described in IEEE&#160;Std&#160;1003.1-2001, it shall not translate the file data into any other encoding. The  <b>BINARY</b> entry indicates unencoded binary data.<div class="spacer">
</div>
When used in <b>write</b> or <b>copy</b> mode, it is implementation-defined whether  <i>pax</i> includes a <b>charset</b> extended header record for a file.<dl>
<dt>
<b>comment</b></dt>
<dd>
A series of characters used as a comment. All characters in the &lt;<i>value</i>&gt; field shall be ignored by  <i>pax</i>.</dd>
</dl>
<dl>
<dt>
<b>ctime</b></dt>
<dd>
The file creation time for the following file(s), equivalent to the value of the  <i>st_ctime</i> member of the <b>stat</b> structure for a file, as described by the  <i>stat</i>() function. The creation time shall be restored if the process has the appropriate privilege required to do so. The format of the &lt; <i>value</i>&gt; shall be as described in pax Extended Header File Times .</dd>
</dl>
<dl>
<dt>
<b>gid</b></dt>
<dd>
The group ID of the group that owns the file, expressed as a decimal number using digits from the ISO/IEC&#160;646:1991 standard. This record shall override the  <i>gid</i> field in the following header block(s). When used in  <b>write</b> or  <b>copy</b> mode, <i>pax</i> shall include a <i>gid</i> extended header record for each file whose group ID is greater than 2097151 (octal 7777777).</dd>
</dl>
<dl>
<dt>
<b>gname</b></dt>
<dd>
The group of the file(s), formatted as a group name in the group database. This record shall override the  <i>gid</i> and  <i>gname</i> fields in the following header block(s), and any <i>gid</i> extended header record. When used in  <b>read</b>,  <b>copy</b>, or <b>list</b> mode, <i>pax</i> shall translate the name from the UTF-8 encoding in the header record to the character set appropriate for the group database on the receiving system. If any of the UTF-8 characters cannot be translated, and if the  <b>-o</b> <b>invalid=</b> UTF-8 option is not specified, the results are implementation-defined. When used in  <b>write</b> or  <b>copy</b> mode, <i>pax</i> shall include a <b>gname</b> extended header record for each file whose group name cannot be represented entirely with the letters and digits of the portable character set.</dd>
</dl>
<dl>
<dt>
<b>linkpath</b></dt>
<dd>
The pathname of a link being created to another file, of any type, previously archived. This record shall override the  <i>linkname</i> field in the following <b>ustar</b> header block(s). The following  <b>ustar</b> header block shall determine the type of link created. If  <i>typeflag</i> of the following header block is 1, it shall be a hard link. If  <i>typeflag</i> is 2, it shall be a symbolic link and the  <b>linkpath</b> value shall be the contents of the symbolic link. The  <i>pax</i> utility shall translate the name of the link (contents of the symbolic link) from the UTF-8 encoding to the character set appropriate for the local file system. When used in  <b>write</b> or <b>copy</b> mode, <i>pax</i> shall include a  <b>linkpath</b> extended header record for each link whose pathname cannot be represented entirely with the members of the portable character set other than NUL.</dd>
</dl>
<dl>
<dt>
<b>mtime</b></dt>
<dd>
The file modification time of the following file(s), equivalent to the value of the  <i>st_mtime</i> member of the <b>stat</b> structure for a file, as described in the  <i>stat</i>() function. This record shall override the  <i>mtime</i> field in the following header block(s). The modification time shall be restored if the process has the appropriate privilege required to do so. The format of the &lt; <i>value</i>&gt; shall be as described in pax Extended Header File Times .</dd>
</dl>
<dl>
<dt>
<b>path</b></dt>
<dd>
The pathname of the following file(s). This record shall override the  <i>name</i> and <i>prefix</i> fields in the following header block(s). The  <i>pax</i> utility shall translate the pathname of the file from the UTF-8 encoding to the character set appropriate for the local file system.</dd>
</dl>
<div class="spacer">
</div>
When used in <b>write</b> or <b>copy</b> mode, <i>pax</i> shall include a  <i>path</i> extended header record for each file whose pathname cannot be represented entirely with the members of the portable character set other than NUL.<dl>
<dt>
<b>realtime.</b><i>any</i></dt>
<dd>
The keywords prefixed by &quot;realtime.&quot; are reserved for future standardization.</dd>
</dl>
<dl>
<dt>
<b>security.</b><i>any</i></dt>
<dd>
The keywords prefixed by &quot;security.&quot; are reserved for future standardization.</dd>
</dl>
<dl>
<dt>
<b>size</b></dt>
<dd>
The size of the file in octets, expressed as a decimal number using digits from the ISO/IEC&#160;646:1991 standard. This record shall override the  <i>size</i> field in the following header block(s). When used in  <b>write</b> or <b>copy</b> mode, <i>pax</i> shall include a  <i>size</i> extended header record for each file with a size value greater than 8589934591 (octal 77777777777).</dd>
</dl>
<dl>
<dt>
<b>uid</b></dt>
<dd>
The user ID of the file owner, expressed as a decimal number using digits from the ISO/IEC&#160;646:1991 standard. This record shall override the  <i>uid</i> field in the following header block(s). When used in  <b>write</b> or <b>copy</b> mode, <i>pax</i> shall include a  <i>uid</i> extended header record for each file whose owner ID is greater than 2097151 (octal 7777777).</dd>
</dl>
<dl>
<dt>
<b>uname</b></dt>
<dd>
The owner of the following file(s), formatted as a user name in the user database. This record shall override the  <i>uid</i> and  <i>uname</i> fields in the following header block(s), and any <i>uid</i> extended header record. When used in  <b>read</b>,  <b>copy</b>, or <b>list</b> mode, <i>pax</i> shall translate the name from the UTF-8 encoding in the header record to the character set appropriate for the user database on the receiving system. If any of the UTF-8 characters cannot be translated, and if the  <b>-o</b> <b>invalid=</b> UTF-8 option is not specified, the results are implementation-defined. When used in  <b>write</b> or  <b>copy</b> mode, <i>pax</i> shall include a <b>uname</b> extended header record for each file whose user name cannot be represented entirely with the letters and digits of the portable character set.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<div class="spacer">
</div>
If the &lt;<i>value</i>&gt; field is zero length, it shall delete any header block field, previously entered extended header value, or global extended header value of the same name.<div class="spacer">
</div>
If a keyword in an extended header record (or in a <b>-o</b> option-argument) overrides or deletes a corresponding field in the  <b>ustar</b> header block, <i>pax</i> shall ignore the contents of that header block field.<div class="spacer">
</div>
Unlike the <b>ustar</b> header block fields, NULs shall not delimit &lt; <i>value</i>&gt;s; all characters within the &lt; <i>value</i>&gt; field shall be considered data for the field. None of the length limitations of the  <b>ustar</b> header block fields in ustar Header Block shall apply to the extended header records.</div>
<div class="subsection">
<h2>pax Extended Header Keyword Precedence</h2> This section describes the precedence in which the various header records and fields and command line options are selected to apply to a file in the archive. When  <i>pax</i> is used in <b>read</b> or  <b>list</b> modes, it shall determine a file attribute in the following sequence:<dl>
<dt>
 1.</dt>
<dd>
If <b>-o</b> <b>delete=</b> <i>keyword-prefix</i> is used, the affected attributes shall be determined from step 7., if applicable, or ignored otherwise.</dd>
</dl>
<dl>
<dt>
 2.</dt>
<dd>
If <b>-o</b> <i>keyword</i>:= is used, the affected attributes shall be ignored.</dd>
</dl>
<dl>
<dt>
 3.</dt>
<dd>
If <b>-o</b> <i>keyword</i> <b>:=</b> <i>value</i> is used, the affected attribute shall be assigned the value.</dd>
</dl>
<dl>
<dt>
 4.</dt>
<dd>
If there is a <i>typeflag</i> <b>x</b> extended header record, the affected attribute shall be assigned the &lt; <i>value</i>&gt;. When extended header records conflict, the last one given in the header shall take precedence.</dd>
</dl>
<dl>
<dt>
 5.</dt>
<dd>
If <b>-o</b> <i>keyword</i> <b>=</b> <i>value</i> is used, the affected attribute shall be assigned the value.</dd>
</dl>
<dl>
<dt>
 6.</dt>
<dd>
If there is a <i>typeflag</i> <b>g</b> global extended header record, the affected attribute shall be assigned the &lt; <i>value</i>&gt;. When global extended header records conflict, the last one given in the global header shall take precedence.</dd>
</dl>
<dl>
<dt>
 7.</dt>
<dd>
Otherwise, the attribute shall be determined from the <b>ustar</b> header block.</dd>
</dl>
</div>
<div class="subsection">
<h2>pax Extended Header File Times</h2> The  <i>pax</i> utility shall write an <b>mtime</b> record for each file in  <b>write</b> or <b>copy</b> modes if the file's modification time cannot be represented exactly in the  <b>ustar</b> header logical record described in ustar Interchange Format . This can occur if the time is out of  <b>ustar</b> range, or if the file system of the underlying implementation supports non-integer time granularities and the time is not an integer. All of these time records shall be formatted as a decimal representation of the time in seconds since the Epoch. If a period (  <b>'.'</b> ) decimal point character is present, the digits to the right of the point shall represent the units of a subsecond timing granularity, where the first digit is tenths of a second and each subsequent digit is a tenth of the previous digit. In  <b>read</b> or <b>copy</b> mode, the  <i>pax</i> utility shall truncate the time of a file to the greatest value that is not greater than the input header file time. In  <b>write</b> or <b>copy</b> mode, the <i>pax</i> utility shall output a time exactly if it can be represented exactly as a decimal number, and otherwise shall generate only enough digits so that the same time shall be recovered if the file is extracted on a system whose underlying implementation supports the same time granularity.</div>
<div class="subsection">
<h2>ustar Interchange Format</h2> A  <b>ustar</b> archive tape or file shall contain a series of logical records. Each logical record shall be a fixed-size logical record of 512 octets (see below). Although this format may be thought of as being stored on 9-track industry-standard 12.7 mm (0.5 in) magnetic tape, other types of transportable media are not excluded. Each file archived shall be represented by a header logical record that describes the file, followed by zero or more logical records that give the contents of the file. At the end of the archive file there shall be two 512-octet logical records filled with binary zeros, interpreted as an end-of-archive indicator.<div class="spacer">
</div>
The logical records may be grouped for physical I/O operations, as described under the  <b>-b</b> <i>blocksize</i> and <b>-x</b>  <b>ustar</b> options. Each group of logical records may be written with a single operation equivalent to the  <i>write</i>() function. On magnetic tape, the result of this write shall be a single tape physical block. The last physical block shall always be the full size, so logical records after the two zero logical records may contain undefined data.<div class="spacer">
</div>
The header logical record shall be structured as shown in the following table. All lengths and offsets are in decimal.<div style="height: 0.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
<b>Table: ustar Header Block</b><table class="tbl">
<col style="width: 16.00ex;"/>
<col style="width: 18.00ex;"/>
<col style="width: 24.00ex;"/>
<tbody>
<tr>
<td>
<b>Field Name</b></td>
<td>
<b>Octet Offset</b></td>
<td>
<b>Length (in Octets)</b></td>
</tr>
<tr>
<td>
<i>name</i></td>
<td>
0</td>
<td>
100</td>
</tr>
<tr>
<td>
<i>mode</i></td>
<td>
100</td>
<td>
8</td>
</tr>
<tr>
<td>
<i>uid</i></td>
<td>
108</td>
<td>
8</td>
</tr>
<tr>
<td>
<i>gid</i></td>
<td>
116</td>
<td>
8</td>
</tr>
<tr>
<td>
<i>size</i></td>
<td>
124</td>
<td>
12</td>
</tr>
<tr>
<td>
<i>mtime</i></td>
<td>
136</td>
<td>
12</td>
</tr>
<tr>
<td>
<i>chksum</i></td>
<td>
148</td>
<td>
8</td>
</tr>
<tr>
<td>
<i>typeflag</i></td>
<td>
156</td>
<td>
1</td>
</tr>
<tr>
<td>
<i>linkname</i></td>
<td>
157</td>
<td>
100</td>
</tr>
<tr>
<td>
<i>magic</i></td>
<td>
257</td>
<td>
6</td>
</tr>
<tr>
<td>
<i>version</i></td>
<td>
263</td>
<td>
2</td>
</tr>
<tr>
<td>
<i>uname</i></td>
<td>
265</td>
<td>
32</td>
</tr>
<tr>
<td>
<i>gname</i></td>
<td>
297</td>
<td>
32</td>
</tr>
<tr>
<td>
<i>devmajor</i></td>
<td>
329</td>
<td>
8</td>
</tr>
<tr>
<td>
<i>devminor</i></td>
<td>
337</td>
<td>
8</td>
</tr>
<tr>
<td>
<i>prefix</i></td>
<td>
345</td>
<td>
155</td>
</tr>
</tbody>
</table>
<div class="spacer">
</div>
All characters in the header logical record shall be represented in the coded character set of the ISO/IEC&#160;646:1991 standard. For maximum portability between implementations, names should be selected from characters represented by the portable filename character set as octets with the most significant bit zero. If an implementation supports the use of characters outside of slash and the portable filename character set in names for files, users, and groups, one or more implementation-defined encodings of these characters shall be provided for interchange purposes.<div class="spacer">
</div>
However, the <i>pax</i> utility shall never create filenames on the local system that cannot be accessed via the procedures described in IEEE&#160;Std&#160;1003.1-2001. If a filename is found on the medium that would create an invalid filename, it is implementation-defined whether the data from the file is stored on the file hierarchy and under what name it is stored. The  <i>pax</i> utility may choose to ignore these files as long as it produces an error indicating that the file is being ignored.<div class="spacer">
</div>
Each field within the header logical record is contiguous; that is, there is no padding used. Each character on the archive medium shall be stored contiguously.<div class="spacer">
</div>
The fields <i>magic</i>, <i>uname</i>, and <i>gname</i> are character strings each terminated by a NUL character. The fields  <i>name</i>, <i>linkname</i>, and <i>prefix</i> are NUL-terminated character strings except when all characters in the array contain non-NUL characters including the last character. The  <i>version</i> field is two octets containing the characters  <b>&quot;00&quot;</b> (zero-zero). The <i>typeflag</i> contains a single character. All other fields are leading zero-filled octal numbers using digits from the ISO/IEC&#160;646:1991 standard IRV. Each numeric field is terminated by one or more &lt;space&gt; or NUL characters.<div class="spacer">
</div>
The <i>name</i> and the <i>prefix</i> fields shall produce the pathname of the file. A new pathname shall be formed, if  <i>prefix</i> is not an empty string (its first character is not NUL), by concatenating  <i>prefix</i> (up to the first NUL character), a slash character, and  <i>name</i>; otherwise, <i>name</i> is used alone. In either case,  <i>name</i> is terminated at the first NUL character. If  <i>prefix</i> begins with a NUL character, it shall be ignored. In this manner, pathnames of at most 256 characters can be supported. If a pathname does not fit in the space provided,  <i>pax</i> shall notify the user of the error, and shall not store any part of the file-header or data-on the medium.<div class="spacer">
</div>
The <i>linkname</i> field, described below, shall not use the <i>prefix</i> to produce a pathname. As such, a  <i>linkname</i> is limited to 100 characters. If the name does not fit in the space provided,  <i>pax</i> shall notify the user of the error, and shall not attempt to store the link on the medium.<div class="spacer">
</div>
The <i>mode</i> field provides 12 bits encoded in the ISO/IEC&#160;646:1991 standard octal digit representation. The encoded bits shall represent the following values:<div style="height: 0.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
<b>Table: ustar </b><i>mode</i><b> Field</b><i></i><table class="tbl">
<col style="width: 15.00ex;"/>
<col style="width: 32.00ex;"/>
<col style="width: 47.00ex;"/>
<tbody>
<tr>
<td>
<i></i><b>Bit Value</b><i></i></td>
<td>
<i></i><b>IEEE&#160;Std&#160;1003.1-2001 Bit</b><i></i></td>
<td>
<i></i><b>Description</b><i></i></td>
</tr>
<tr>
<td>
<i>04000</i></td>
<td>
<i>S_ISUID</i></td>
<td>
<i>Set UID on execution.</i></td>
</tr>
<tr>
<td>
<i>02000</i></td>
<td>
<i>S_ISGID</i></td>
<td>
<i>Set GID on execution.</i></td>
</tr>
<tr>
<td>
<i>01000</i></td>
<td>
<i>&lt;reserved&gt;</i></td>
<td>
<i>Reserved for future standardization.</i></td>
</tr>
<tr>
<td>
<i>00400</i></td>
<td>
<i>S_IRUSR</i></td>
<td>
<i>Read permission for file owner class.</i></td>
</tr>
<tr>
<td>
<i>00200</i></td>
<td>
<i>S_IWUSR</i></td>
<td>
<i>Write permission for file owner class.</i></td>
</tr>
<tr>
<td>
<i>00100</i></td>
<td>
<i>S_IXUSR</i></td>
<td>
<i>Execute/search permission for file owner class.</i></td>
</tr>
<tr>
<td>
<i>00040</i></td>
<td>
<i>S_IRGRP</i></td>
<td>
<i>Read permission for file group class.</i></td>
</tr>
<tr>
<td>
<i>00020</i></td>
<td>
<i>S_IWGRP</i></td>
<td>
<i>Write permission for file group class.</i></td>
</tr>
<tr>
<td>
<i>00010</i></td>
<td>
<i>S_IXGRP</i></td>
<td>
<i>Execute/search permission for file group class.</i></td>
</tr>
<tr>
<td>
<i>00004</i></td>
<td>
<i>S_IROTH</i></td>
<td>
<i>Read permission for file other class.</i></td>
</tr>
<tr>
<td>
<i>00002</i></td>
<td>
<i>S_IWOTH</i></td>
<td>
<i>Write permission for file other class.</i></td>
</tr>
<tr>
<td>
<i>00001</i></td>
<td>
<i>S_IXOTH</i></td>
<td>
<i>Execute/search permission for file other class.</i></td>
</tr>
</tbody>
</table>
<div class="spacer">
</div>
When appropriate privilege is required to set one of these mode bits, and the user restoring the files from the archive does not have the appropriate privilege, the mode bits for which the user does not have appropriate privilege shall be ignored. Some of the mode bits in the archive format are not mentioned elsewhere in this volume of IEEE&#160;Std&#160;1003.1-2001. If the implementation does not support those bits, they may be ignored.<div class="spacer">
</div>
The <i>uid</i> and <i>gid</i> fields are the user and group ID of the owner and group of the file, respectively.<div class="spacer">
</div>
The <i>size</i> field is the size of the file in octets. If the <i>typeflag</i> field is set to specify a file to be of type 1 (a link) or 2 (a symbolic link), the  <i>size</i> field shall be specified as zero. If the  <i>typeflag</i> field is set to specify a file of type 5 (directory), the  <i>size</i> field shall be interpreted as described under the definition of that record type. No data logical records are stored for types 1, 2, or 5. If the  <i>typeflag</i> field is set to 3 (character special file), 4 (block special file), or 6 (FIFO), the meaning of the  <i>size</i> field is unspecified by this volume of IEEE&#160;Std&#160;1003.1-2001, and no data logical records shall be stored on the medium. Additionally, for type 6, the  <i>size</i> field shall be ignored when reading. If the  <i>typeflag</i> field is set to any other value, the number of logical records written following the header shall be (  <i>size</i>+511)/512, ignoring any fraction in the result of the division.<div class="spacer">
</div>
The <i>mtime</i> field shall be the modification time of the file at the time it was archived. It is the ISO/IEC&#160;646:1991 standard representation of the octal value of the modification time obtained from the  <i>stat</i>() function.<div class="spacer">
</div>
The <i>chksum</i> field shall be the ISO/IEC&#160;646:1991 standard IRV representation of the octal value of the simple sum of all octets in the header logical record. Each octet in the header shall be treated as an unsigned value. These values shall be added to an unsigned integer, initialized to zero, the precision of which is not less than 17 bits. When calculating the checksum, the  <i>chksum</i> field is treated as if it were all spaces.<div class="spacer">
</div>
The <i>typeflag</i> field specifies the type of file archived. If a particular implementation does not recognize the type, or the user does not have appropriate privilege to create that type, the file shall be extracted as if it were a regular file if the file type is defined to have a meaning for the  <i>size</i> field that could cause data logical records to be written on the medium (see the previous description for  <i>size</i>). If conversion to a regular file occurs, the  <i>pax</i> utility shall produce an error indicating that the conversion took place. All of the  <i>typeflag</i> fields shall be coded in the ISO/IEC&#160;646:1991 standard IRV:<dl>
<dt>
<b>0</b></dt>
<dd>
Represents a regular file. For backwards-compatibility, a <i>typeflag</i> value of binary zero (  <b>'\0'</b> ) should be recognized as meaning a regular file when extracting files from the archive. Archives written with this version of the archive file format create regular files with a  <i>typeflag</i> value of the ISO/IEC&#160;646:1991 standard IRV  <b>'0'</b> .</dd>
</dl>
<dl>
<dt>
<b>1</b></dt>
<dd>
Represents a file linked to another file, of any type, previously archived. Such files are identified by each file having the same device and file serial number. The linked-to name is specified in the  <i>linkname</i> field with a NUL-character terminator if it is less than 100 octets in length.</dd>
</dl>
<dl>
<dt>
<b>2</b></dt>
<dd>
Represents a symbolic link. The contents of the symbolic link shall be stored in the  <i>linkname</i> field.</dd>
</dl>
<dl>
<dt>
<b>3,4</b></dt>
<dd>
Represent character special files and block special files respectively. In this case the  <i>devmajor</i> and <i>devminor</i> fields shall contain information defining the device, the format of which is unspecified by this volume of IEEE&#160;Std&#160;1003.1-2001. Implementations may map the device specifications to their own local specification or may ignore the entry.</dd>
</dl>
<dl>
<dt>
<b>5</b></dt>
<dd>
Specifies a directory or subdirectory. On systems where disk allocation is performed on a directory basis, the  <i>size</i> field shall contain the maximum number of octets (which may be rounded to the nearest disk block allocation unit) that the directory may hold. A  <i>size</i> field of zero indicates no such limiting. Systems that do not support limiting in this manner should ignore the  <i>size</i> field.</dd>
</dl>
<dl>
<dt>
<b>6</b></dt>
<dd>
Specifies a FIFO special file. Note that the archiving of a FIFO file archives the existence of this file and not its contents.</dd>
</dl>
<dl>
<dt>
<b>7</b></dt>
<dd>
Reserved to represent a file to which an implementation has associated some high-performance attribute. Implementations without such extensions should treat this file as a regular file (type 0).</dd>
</dl>
<dl>
<dt>
<b>A-Z</b></dt>
<dd>
The letters <b>'A'</b> to <b>'Z'</b>, inclusive, are reserved for custom implementations. All other values are reserved for future versions of IEEE&#160;Std&#160;1003.1-2001.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<div class="spacer">
</div>
Attempts to archive a socket using <b>ustar</b> interchange format shall produce a diagnostic message. Handling of other file types is implementation-defined.<div class="spacer">
</div>
The <i>magic</i> field is the specification that this archive was output in this archive format. If this field contains  <b>ustar</b> (the five characters from the ISO/IEC&#160;646:1991 standard IRV shown followed by NUL), the  <i>uname</i> and  <i>gname</i> fields shall contain the ISO/IEC&#160;646:1991 standard IRV representation of the owner and group of the file, respectively (truncated to fit, if necessary). When the file is restored by a privileged, protection-preserving version of the utility, the user and group databases shall be scanned for these names. If found, the user and group IDs contained within these files shall be used rather than the values contained within the  <i>uid</i> and  <i>gid</i> fields.</div>
<div class="subsection">
<h2>cpio Interchange Format</h2> The octet-oriented  <b>cpio</b> archive format shall be a series of entries, each comprising a header that describes the file, the name of the file, and then the contents of the file.<div class="spacer">
</div>
An archive may be recorded as a series of fixed-size blocks of octets. This blocking shall be used only to make physical I/O more efficient. The last group of blocks shall always be at the full size.<div class="spacer">
</div>
For the octet-oriented <b>cpio</b> archive format, the individual entry information shall be in the order indicated and described by the following table; see also the  <i>&lt;cpio.h&gt;</i> header.<div style="height: 0.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
<b>Table: Octet-Oriented cpio Archive Entry</b><table class="tbl">
<col style="width: 26.00ex;"/>
<col style="width: 24.00ex;"/>
<col style="width: 20.00ex;"/>
<tbody>
<tr>
<td>
<b>Header Field Name</b></td>
<td>
<b>Length (in Octets)</b></td>
<td>
<b>Interpreted as</b></td>
</tr>
<tr>
<td>
<i>c_magic</i></td>
<td>
6</td>
<td>
Octal number</td>
</tr>
<tr>
<td>
<i>c_dev</i></td>
<td>
6</td>
<td>
Octal number</td>
</tr>
<tr>
<td>
<i>c_ino</i></td>
<td>
6</td>
<td>
Octal number</td>
</tr>
<tr>
<td>
<i>c_mode</i></td>
<td>
6</td>
<td>
Octal number</td>
</tr>
<tr>
<td>
<i>c_uid</i></td>
<td>
6</td>
<td>
Octal number</td>
</tr>
<tr>
<td>
<i>c_gid</i></td>
<td>
6</td>
<td>
Octal number</td>
</tr>
<tr>
<td>
<i>c_nlink</i></td>
<td>
6</td>
<td>
Octal number</td>
</tr>
<tr>
<td>
<i>c_rdev</i></td>
<td>
6</td>
<td>
Octal number</td>
</tr>
<tr>
<td>
<i>c_mtime</i></td>
<td>
11</td>
<td>
Octal number</td>
</tr>
<tr>
<td>
<i>c_namesize</i></td>
<td>
6</td>
<td>
Octal number</td>
</tr>
<tr>
<td>
<i>c_filesize</i></td>
<td>
11</td>
<td>
Octal number</td>
</tr>
<tr>
<td>
<b>Filename Field Name</b></td>
<td>
<b>Length</b></td>
<td>
<b>Interpreted as</b></td>
</tr>
<tr>
<td>
<i>c_name</i></td>
<td>
<i>c_namesize</i></td>
<td>
Pathname string</td>
</tr>
<tr>
<td>
<b>File Data Field Name</b></td>
<td>
<b>Length</b></td>
<td>
<b>Interpreted as</b></td>
</tr>
<tr>
<td>
<i>c_filedata</i></td>
<td>
<i>c_filesize</i></td>
<td>
Data</td>
</tr>
</tbody>
</table>
</div>
<div class="subsection">
<h2>cpio Header</h2> For each file in the archive, a header as defined previously shall be written. The information in the header fields is written as streams of the ISO/IEC&#160;646:1991 standard characters interpreted as octal numbers. The octal numbers shall be extended to the necessary length by appending the ISO/IEC&#160;646:1991 standard IRV zeros at the most-significant-digit end of the number; the result is written to the most-significant digit of the stream of octets first. The fields shall be interpreted as follows:<dl>
<dt>
<i>c_magic</i></dt>
<dd>
Identify the archive as being a transportable archive by containing the identifying value  <b>&quot;070707&quot;</b> .</dd>
</dl>
<dl>
<dt>
<i>c_dev</i>,&#160;<i>c_ino</i></dt>
<dd>
Contains values that uniquely identify the file within the archive (that is, no files contain the same pair of  <i>c_dev</i> and  <i>c_ino</i> values unless they are links to the same file). The values shall be determined in an unspecified manner.</dd>
</dl>
<dl>
<dt>
<i>c_mode</i></dt>
<dd>
Contains the file type and access permissions as defined in the following table.<div style="height: 0.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
<b>Table: Values for cpio c_mode Field</b><table class="tbl">
<col style="width: 27.00ex;"/>
<col style="width: 11.00ex;"/>
<col style="width: 22.00ex;"/>
<tbody>
<tr>
<td>
<b>File Permissions Name</b></td>
<td>
<b>Value</b></td>
<td>
<b>Indicates</b></td>
</tr>
<tr>
<td>
C_IRUSR</td>
<td>
000400</td>
<td>
Read by owner</td>
</tr>
<tr>
<td>
C_IWUSR</td>
<td>
000200</td>
<td>
Write by owner</td>
</tr>
<tr>
<td>
C_IXUSR</td>
<td>
000100</td>
<td>
Execute by owner</td>
</tr>
<tr>
<td>
C_IRGRP</td>
<td>
000040</td>
<td>
Read by group</td>
</tr>
<tr>
<td>
C_IWGRP</td>
<td>
000020</td>
<td>
Write by group</td>
</tr>
<tr>
<td>
C_IXGRP</td>
<td>
000010</td>
<td>
Execute by group</td>
</tr>
<tr>
<td>
C_IROTH</td>
<td>
000004</td>
<td>
Read by others</td>
</tr>
<tr>
<td>
C_IWOTH</td>
<td>
000002</td>
<td>
Write by others</td>
</tr>
<tr>
<td>
C_IXOTH</td>
<td>
000001</td>
<td>
Execute by others</td>
</tr>
<tr>
<td>
C_ISUID</td>
<td>
004000</td>
<td>
Set <i>uid</i></td>
</tr>
<tr>
<td>
C_ISGID</td>
<td>
002000</td>
<td>
Set <i>gid</i></td>
</tr>
<tr>
<td>
C_ISVTX</td>
<td>
001000</td>
<td>
Reserved</td>
</tr>
<tr>
<td>
<b>File Type Name</b></td>
<td>
<b>Value</b></td>
<td>
<b>Indicates</b></td>
</tr>
<tr>
<td>
C_ISDIR</td>
<td>
040000</td>
<td>
Directory</td>
</tr>
<tr>
<td>
C_ISFIFO</td>
<td>
010000</td>
<td>
FIFO</td>
</tr>
<tr>
<td>
C_ISREG</td>
<td>
0100000</td>
<td>
Regular file</td>
</tr>
<tr>
<td>
C_ISLNK</td>
<td>
0120000</td>
<td>
Symbolic link</td>
</tr>
<tr>
<td>
C_ISBLK</td>
<td>
060000</td>
<td>
Block special file</td>
</tr>
<tr>
<td>
C_ISCHR</td>
<td>
020000</td>
<td>
Character special file</td>
</tr>
<tr>
<td>
C_ISSOCK</td>
<td>
0140000</td>
<td>
Socket</td>
</tr>
<tr>
<td>
C_ISCTG</td>
<td>
0110000</td>
<td>
Reserved</td>
</tr>
</tbody>
</table>
</dd>
</dl>
<div class="spacer">
</div>
Directories, FIFOs, symbolic links, and regular files shall be supported on a system conforming to this volume of IEEE&#160;Std&#160;1003.1-2001; additional values defined previously are reserved for compatibility with existing systems. Additional file types may be supported; however, such files should not be written to archives intended to be transported to other systems.<dl>
<dt>
<i>c_uid</i></dt>
<dd>
Contains the user ID of the owner.</dd>
</dl>
<dl>
<dt>
<i>c_gid</i></dt>
<dd>
Contains the group ID of the group.</dd>
</dl>
<dl>
<dt>
<i>c_nlink</i></dt>
<dd>
Contains the number of links referencing the file at the time the archive was created.</dd>
</dl>
<dl>
<dt>
<i>c_rdev</i></dt>
<dd>
Contains implementation-defined information for character or block special files.</dd>
</dl>
<dl>
<dt>
<i>c_mtime</i></dt>
<dd>
Contains the latest time of modification of the file at the time the archive was created.</dd>
</dl>
<dl>
<dt>
<i>c_namesize</i></dt>
<dd>
Contains the length of the pathname, including the terminating NUL character.</dd>
</dl>
<dl>
<dt>
<i>c_filesize</i></dt>
<dd>
Contains the length of the file in octets. This shall be the length of the data section following the header structure.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
</div>
<div class="subsection">
<h2>cpio Filename</h2> The  <i>c_name</i> field shall contain the pathname of the file. The length of this field in octets is the value of  <i>c_namesize</i>.<div class="spacer">
</div>
If a filename is found on the medium that would create an invalid pathname, it is implementation-defined whether the data from the file is stored on the file hierarchy and under what name it is stored.<div class="spacer">
</div>
All characters shall be represented in the ISO/IEC&#160;646:1991 standard IRV. For maximum portability between implementations, names should be selected from characters represented by the portable filename character set as octets with the most significant bit zero. If an implementation supports the use of characters outside the portable filename character set in names for files, users, and groups, one or more implementation-defined encodings of these characters shall be provided for interchange purposes. However, the  <i>pax</i> utility shall never create filenames on the local system that cannot be accessed via the procedures described previously in this volume of IEEE&#160;Std&#160;1003.1-2001. If a filename is found on the medium that would create an invalid filename, it is implementation-defined whether the data from the file is stored on the local file system and under what name it is stored. The  <i>pax</i> utility may choose to ignore these files as long as it produces an error indicating that the file is being ignored.</div>
<div class="subsection">
<h2>cpio File Data</h2> Following  <i>c_name</i>, there shall be <i>c_filesize</i> octets of data. Interpretation of such data occurs in a manner dependent on the file. If  <i>c_filesize</i> is zero, no data shall be contained in  <i>c_filedata</i>.<div class="spacer">
</div>
When restoring from an archive:<dl>
<dt>
 *</dt>
<dd>
If the user does not have the appropriate privilege to create a file of the specified type,  <i>pax</i> shall ignore the entry and write an error message to standard error.</dd>
</dl>
<dl>
<dt>
 *</dt>
<dd>
Only regular files have data to be restored. Presuming a regular file meets any selection criteria that might be imposed on the format-reading utility by the user, such data shall be restored.</dd>
</dl>
<dl>
<dt>
 *</dt>
<dd>
If a user does not have appropriate privilege to set a particular mode flag, the flag shall be ignored. Some of the mode flags in the archive format are not mentioned elsewhere in this volume of IEEE&#160;Std&#160;1003.1-2001. If the implementation does not support those flags, they may be ignored.</dd>
</dl>
</div>
<div class="subsection">
<h2>cpio Special Entries</h2> FIFO special files, directories, and the trailer shall be recorded with  <i>c_filesize</i> equal to zero. For other special files,  <i>c_filesize</i> is unspecified by this volume of IEEE&#160;Std&#160;1003.1-2001. The header for the next file entry in the archive shall be written directly after the last octet of the file entry preceding it. A header denoting the filename  <b>TRAILER!!!</b> shall indicate the end of the archive; the contents of octets in the last block of the archive following such a header are undefined.</div>
</div>
<div class="section">
<h1>EXIT STATUS</h1> The following exit values shall be returned:<dl>
<dt>
&#160;0</dt>
<dd>
All files were processed successfully.</dd>
</dl>
<dl>
<dt>
&gt;0</dt>
<dd>
An error occurred.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
</div>
<div class="section">
<h1>CONSEQUENCES OF ERRORS</h1> If  <i>pax</i> cannot create a file or a link when reading an archive or cannot find a file when writing an archive, or cannot preserve the user ID, group ID, or file mode when the  <b>-p</b> option is specified, a diagnostic message shall be written to standard error and a non-zero exit status shall be returned, but processing shall continue. In the case where  <i>pax</i> cannot create a link to a file,  <i>pax</i> shall not, by default, create a second copy of the file.<div class="spacer">
</div>
If the extraction of a file from an archive is prematurely terminated by a signal or error,  <i>pax</i> may have only partially extracted the file or (if the  <b>-n</b> option was not specified) may have extracted a file of the same name as that specified by the user, but which is not the file the user wanted. Additionally, the file modes of extracted directories may have additional bits from the S_IRWXU mask set as well as incorrect modification and access times.<div class="spacer">
</div>
<i>The following sections are informative.</i></div>
<div class="section">
<h1>APPLICATION USAGE</h1> The  <b>-p</b> (privileges) option was invented to reconcile differences between historical  <i>tar</i> and <i>cpio</i> implementations. In particular, the two utilities use  <b>-m</b> in diametrically opposed ways. The  <b>-p</b> option also provides a consistent means of extending the ways in which future file attributes can be addressed, such as for enhanced security systems or high-performance files. Although it may seem complex, there are really two modes that are most commonly used:<dl>
<dt>
<b>-p&#160;e</b></dt>
<dd>
``Preserve everything&quot;. This would be used by the historical superuser, someone with all the appropriate privileges, to preserve all aspects of the files as they are recorded in the archive. The  <b>e</b> flag is the sum of <b>o</b> and <b>p</b>, and other implementation-defined attributes.</dd>
</dl>
<dl>
<dt>
<b>-p&#160;p</b></dt>
<dd>
``Preserve&quot; the file mode bits. This would be used by the user with regular privileges who wished to preserve aspects of the file other than the ownership. The file times are preserved by default, but two other flags are offered to disable these and use the time of extraction.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<div class="spacer">
</div>
The one pathname per line format of standard input precludes pathnames containing &lt;newline&gt;s. Although such pathnames violate the portable filename guidelines, they may exist and their presence may inhibit usage of  <i>pax</i> within shell scripts. This problem is inherited from historical archive programs. The problem can be avoided by listing filename arguments on the command line instead of on standard input.<div class="spacer">
</div>
It is almost certain that appropriate privileges are required for  <i>pax</i> to accomplish parts of this volume of IEEE&#160;Std&#160;1003.1-2001. Specifically, creating files of type block special or character special, restoring file access times unless the files are owned by the user (the  <b>-t</b> option), or preserving file owner, group, and mode (the  <b>-p</b> option) all probably require appropriate privileges.<div class="spacer">
</div>
In <b>read</b> mode, implementations are permitted to overwrite files when the archive has multiple members with the same name. This may fail if permissions on the first version of the file do not permit it to be overwritten.<div class="spacer">
</div>
The <b>cpio</b> and <b>ustar</b> formats can only support files up to 8589934592 bytes (8 * 2^30) in size.</div>
<div class="section">
<h1>EXAMPLES</h1> The following command:<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 5.00ex;">
<div class="spacer">
</div>
<br/>
<b>pax -w -f /dev/rmt/1m .</b><br/>
<b></b><br/>
</div>
<div class="spacer">
</div>
copies the contents of the current directory to tape drive 1, medium density (assuming historical System V device naming procedures-the historical BSD device name would be  <b>/dev/rmt9</b>).<div class="spacer">
</div>
The following commands:<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 5.00ex;">
<div class="spacer">
</div>
<br/>
<b>mkdir</b> <i>newdir</i><b>pax -rw</b> <i>olddir newdir</i><br/>
</div>
<div class="spacer">
</div>
copy the <i>olddir</i> directory hierarchy to <i>newdir</i>.<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 5.00ex;">
<div class="spacer">
</div>
<br/>
<b>pax -r -s ',^//*usr//*,,' -f a.pax</b><br/>
<b></b><br/>
</div>
<div class="spacer">
</div>
reads the archive <b>a.pax</b>, with all files rooted in <b>/usr</b> in the archive extracted relative to the current directory.<div class="spacer">
</div>
Using the option:<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 5.00ex;">
<div class="spacer">
</div>
<br/>
<b>-o listopt=&quot;%M %(atime)T %(size)D %(name)s&quot;</b><br/>
<b></b><br/>
</div>
<div class="spacer">
</div>
overrides the default output description in Standard Output and instead writes:<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 5.00ex;">
<div class="spacer">
</div>
<br/>
<b>-rw-rw--- Jan 12 15:53 1492 /usr/foo/bar</b><br/>
<b></b><br/>
</div>
<div class="spacer">
</div>
Using the options:<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 5.00ex;">
<div class="spacer">
</div>
<br/>
<b>-o listopt='%L\t%(size)D\n%.7' \</b><br/>
<b>-o listopt='(name)s\n%(ctime)T\n%T'</b><br/>
<b></b><br/>
</div>
<div class="spacer">
</div>
overrides the default output description in Standard Output and instead writes:<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 5.00ex;">
<div class="spacer">
</div>
<br/>
<b>/usr/foo/bar -&gt; /tmp   1492</b><br/>
<b>/usr/fo</b><br/>
<b>Jan 12 1991</b><br/>
<b>Jan 31 15:53</b><br/>
<b></b><br/>
</div>
</div>
<div class="section">
<h1>RATIONALE</h1> The  <i>pax</i> utility was new for the ISO&#160;POSIX-2:1993 standard. It represents a peaceful compromise between advocates of the historical  <i>tar</i> and <i>cpio</i> utilities.<div class="spacer">
</div>
A fundamental difference between <i>cpio</i> and <i>tar</i> was in the way directories were treated. The  <i>cpio</i> utility did not treat directories differently from other files, and to select a directory and its contents required that each file in the hierarchy be explicitly specified. For  <i>tar</i>, a directory matched every file in the file hierarchy it rooted.<div class="spacer">
</div>
The <i>pax</i> utility offers both interfaces; by default, directories map into the file hierarchy they root. The  <b>-d</b> option causes  <i>pax</i> to skip any file not explicitly referenced, as  <i>cpio</i> historically did. The <i>tar</i> <b>-</b>  <i>style</i> behavior was chosen as the default because it was believed that this was the more common usage and because  <i>tar</i> is the more commonly available interface, as it was historically provided on both System V and BSD implementations.<div class="spacer">
</div>
The data interchange format specification in this volume of IEEE&#160;Std&#160;1003.1-2001 requires that processes with &quot;appropriate privileges&quot; shall always restore the ownership and permissions of extracted files exactly as archived. If viewed from the historic equivalence between superuser and &quot;appropriate privileges&quot;, there are two problems with this requirement. First, users running as superusers may unknowingly set dangerous permissions on extracted files. Second, it is needlessly limiting, in that superusers cannot extract files and own them as superuser unless the archive was created by the superuser. (It should be noted that restoration of ownerships and permissions for the superuser, by default, is historical practice in  <i>cpio</i>, but not in  <i>tar</i>.) In order to avoid these two problems, the <i>pax</i> specification has an additional &quot;privilege&quot; mechanism, the  <b>-p</b> option. Only a <i>pax</i> invocation with the privileges needed, and which has the  <b>-p</b> option set using the  <b>e</b> specification character, has the &quot;appropriate privilege&quot; to restore full ownership and permission information.<div class="spacer">
</div>
Note also that this volume of IEEE&#160;Std&#160;1003.1-2001 requires that the file ownership and access permissions shall be set, on extraction, in the same fashion as the  <i>creat</i>() function when provided with the mode stored in the archive. This means that the file creation mask of the user is applied to the file permissions.<div class="spacer">
</div>
Users should note that directories may be created by <i>pax</i> while extracting files with permissions that are different from those that existed at the time the archive was created. When extracting sensitive information into a directory hierarchy that no longer exists, users are encouraged to set their file creation mask appropriately to protect these files during extraction.<div class="spacer">
</div>
The table of contents output is written to standard output to facilitate pipeline processing.<div class="spacer">
</div>
An early proposal had hard links displaying for all pathnames. This was removed because it complicates the output of the case where  <b>-v</b> is not specified and does not match historical <i>cpio</i> usage. The hard-link information is available in the  <b>-v</b> display.<div class="spacer">
</div>
The description of the <b>-l</b> option allows implementations to make hard links to symbolic links. IEEE&#160;Std&#160;1003.1-2001 does not specify any way to create a hard link to a symbolic link, but many implementations provide this capability as an extension. If there are hard links to symbolic links when an archive is created, the implementation is required to archive the hard link in the archive (unless  <b>-H</b> or  <b>-L</b> is specified). When in <b>read</b> mode and in  <b>copy</b> mode, implementations supporting hard links to symbolic links should use them when appropriate.<div class="spacer">
</div>
The archive formats inherited from the POSIX.1-1990 standard have certain restrictions that have been brought along from historical usage. For example, there are restrictions on the length of pathnames stored in the archive. When  <i>pax</i> is used in  <b>copy</b>( <b>-rw</b>) mode (copying directory hierarchies), the ability to use extensions from the  <b>-x</b> <b>pax</b> format overcomes these restrictions.<div class="spacer">
</div>
The default <i>blocksize</i> value of 5120 bytes for <i>cpio</i> was selected because it is one of the standard block-size values for  <i>cpio</i>, set when the <b>-B</b> option is specified. (The other default block-size value for  <i>cpio</i> is 512 bytes, and this was considered to be too small.) The default block value of 10240 bytes for  <i>tar</i> was selected because that is the standard block-size value for BSD  <i>tar</i>. The maximum block size of 32256 bytes (2**15-512 bytes) is the largest multiple of 512 bytes that fits into a signed 16-bit tape controller transfer register. There are known limitations in some historical systems that would prevent larger blocks from being accepted. Historical values were chosen to improve compatibility with historical scripts using  <i>dd</i> or similar utilities to manipulate archives. Also, default block sizes for any file type other than character special file has been deleted from this volume of IEEE&#160;Std&#160;1003.1-2001 as unimportant and not likely to affect the structure of the resulting archive.<div class="spacer">
</div>
Implementations are permitted to modify the block-size value based on the archive format or the device to which the archive is being written. This is to provide implementations with the opportunity to take advantage of special types of devices, and it should not be used without a great deal of consideration as it almost certainly decreases archive portability.<div class="spacer">
</div>
The intended use of the <b>-n</b> option was to permit extraction of one or more files from the archive without processing the entire archive. This was viewed by the standard developers as offering significant performance advantages over historical implementations. The  <b>-n</b> option in early proposals had three effects; the first was to cause special characters in patterns to not be treated specially. The second was to cause only the first file that matched a pattern to be extracted. The third was to cause  <i>pax</i> to write a diagnostic message to standard error when no file was found matching a specified pattern. Only the second behavior is retained by this volume of IEEE&#160;Std&#160;1003.1-2001, for many reasons. First, it is in general not acceptable for a single option to have multiple effects. Second, the ability to make pattern matching characters act as normal characters is useful for parts of  <i>pax</i> other than file extraction. Third, a finer degree of control over the special characters is useful because users may wish to normalize only a single special character in a single filename. Fourth, given a more general escape mechanism, the previous behavior of the  <b>-n</b> option can be easily obtained using the  <b>-s</b> option or a <i>sed</i> script. Finally, writing a diagnostic message when a pattern specified by the user is unmatched by any file is useful behavior in all cases.<div class="spacer">
</div>
In this version, the <b>-n</b> was removed from the <b>copy</b> mode synopsis of  <i>pax</i>; it is inapplicable because there are no pattern operands specified in this mode.<div class="spacer">
</div>
There is another method than <i>pax</i> for copying subtrees in IEEE&#160;Std&#160;1003.1-2001 described as part of the  <i>cp</i> utility. Both methods are historical practice:  <i>cp</i> provides a simpler, more intuitive interface, while  <i>pax</i> offers a finer granularity of control. Each provides additional functionality to the other; in particular,  <i>pax</i> maintains the hard-link structure of the hierarchy while  <i>cp</i> does not. It is the intention of the standard developers that the results be similar (using appropriate option combinations in both utilities). The results are not required to be identical; there seemed insufficient gain to applications to balance the difficulty of implementations having to guarantee that the results would be exactly identical.<div class="spacer">
</div>
A single archive may span more than one file. It is suggested that implementations provide informative messages to the user on standard error whenever the archive file is changed.<div class="spacer">
</div>
The <b>-d</b> option (do not create intermediate directories not listed in the archive) found in early proposals was originally provided as a complement to the historic  <b>-d</b> option of <i>cpio</i>. It has been deleted.<div class="spacer">
</div>
The <b>-s</b> option in early proposals specified a subset of the substitution command from the  <i>ed</i> utility. As there was no reason for only a subset to be supported, the  <b>-s</b> option is now compatible with the current  <i>ed</i> specification. Since the delimiter can be any non-null character, the following usage with single spaces is valid:<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 5.00ex;">
<div class="spacer">
</div>
<br/>
<b>pax -s &quot; foo bar &quot; ...</b><br/>
<b></b><br/>
</div>
<div class="spacer">
</div>
The <b>-t</b> description is worded so as to note that this may cause the access time update caused by some other activity (which occurs while the file is being read) to be overwritten.<div class="spacer">
</div>
The default behavior of <i>pax</i> with regard to file modification times is the same as historical implementations of  <i>tar</i>. It is not the historical behavior of <i>cpio</i>.<div class="spacer">
</div>
Because the <b>-i</b> option uses <b>/dev/tty</b>, utilities without a controlling terminal are not able to use this option.<div class="spacer">
</div>
The <b>-y</b> option, found in early proposals, has been deleted because a line containing a single period for the  <b>-i</b> option has equivalent functionality. The special lines for the  <b>-i</b> option (a single period and the empty line) are historical practice in  <i>cpio</i>.<div class="spacer">
</div>
In early drafts, a <b>-e</b> <i>charmap</i> option was included to increase portability of files between systems using different coded character sets. This option was omitted because it was apparent that consensus could not be formed for it. In this version, the use of UTF-8 should be an adequate substitute.<div class="spacer">
</div>
The <b>-k</b> option was added to address international concerns about the dangers involved in the character set transformations of  <b>-e</b> (if the target character set were different from the source, the filenames might be transformed into names matching existing files) and also was made more general to protect files transferred between file systems with different {NAME_MAX} values (truncating a filename on a smaller system might also inadvertently overwrite existing files). As stated, it prevents any overwriting, even if the target file is older than the source. This version adds more granularity of options to solve this problem by introducing the  <b>-o</b> <b>invalid=</b> option-specifically the UTF-8 action. (Note that an existing file that is named with a UTF-8 encoding is still subject to overwriting in this case. The  <b>-k</b> option closes that loophole.)<div class="spacer">
</div>
Some of the file characteristics referenced in this volume of IEEE&#160;Std&#160;1003.1-2001 might not be supported by some archive formats. For example, neither the  <b>tar</b> nor <b>cpio</b> formats contain the file access time. For this reason, the  <b>e</b> specification character has been provided, intended to cause all file characteristics specified in the archive to be retained.<div class="spacer">
</div>
It is required that extracted directories, by default, have their access and modification times and permissions set to the values specified in the archive. This has obvious problems in that the directories are almost certainly modified after being extracted and that directory permissions may not permit file creation. One possible solution is to create directories with the mode specified in the archive, as modified by the  <i>umask</i> of the user, with sufficient permissions to allow file creation. After all files have been extracted,  <i>pax</i> would then reset the access and modification times and permissions as necessary.<div class="spacer">
</div>
The list-mode formatting description borrows heavily from the one defined by the  <i>printf</i> utility. However, since there is no separate operand list to get conversion arguments, the format was extended to allow specifying the name of the conversion argument as part of the conversion specification.<div class="spacer">
</div>
The <b>T</b> conversion specifier allows time fields to be displayed in any of the date formats. Unlike the  <i>ls</i> utility, <i>pax</i> does not adjust the format when the date is less than six months in the past. This makes parsing the output more predictable.<div class="spacer">
</div>
The <b>D</b> conversion specifier handles the ability to display the major/minor or file size, as with  <i>ls</i>, by using <b>%-8(</b><i>size</i><b>)D</b>.<div class="spacer">
</div>
The <b>L</b> conversion specifier handles the <i>ls</i> display for symbolic links.<div class="spacer">
</div>
Conversion specifiers were added to generate existing known types used for  <i>ls</i>.<div class="subsection">
<h2>pax Interchange Format</h2> The new POSIX data interchange format was developed primarily to satisfy international concerns that the  <b>ustar</b> and  <b>cpio</b> formats did not provide for file, user, and group names encoded in characters outside a subset of the ISO/IEC&#160;646:1991 standard. The standard developers realized that this new POSIX data interchange format should be very extensible because there were other requirements they foresaw in the near future:<dl>
<dt>
 *</dt>
<dd>
Support international character encodings and locale information</dd>
</dl>
<dl>
<dt>
 *</dt>
<dd>
Support security information (ACLs, and so on)</dd>
</dl>
<dl>
<dt>
 *</dt>
<dd>
Support future file types, such as realtime or contiguous files</dd>
</dl>
<dl>
<dt>
 *</dt>
<dd>
Include data areas for implementation use</dd>
</dl>
<dl>
<dt>
 *</dt>
<dd>
Support systems with words larger than 32 bits and timers with subsecond granularity</dd>
</dl>
<div class="spacer">
</div>
The following were not goals for this format because these are better handled by separate utilities or are inappropriate for a portable format:<dl>
<dt>
 *</dt>
<dd>
Encryption</dd>
</dl>
<dl>
<dt>
 *</dt>
<dd>
Compression</dd>
</dl>
<dl>
<dt>
 *</dt>
<dd>
Data translation between locales and codesets</dd>
</dl>
<dl>
<dt>
 *</dt>
<dd>
<i>inode</i> storage</dd>
</dl>
<div class="spacer">
</div>
The format chosen to support the goals is an extension of the <b>ustar</b> format. Of the two formats previously available, only the  <b>ustar</b> format was selected for extensions because:<dl>
<dt>
 *</dt>
<dd>
It was easier to extend in an upwards-compatible way. It offered version flags and header block type fields with room for future standardization. The  <b>cpio</b> format, while possessing a more flexible file naming methodology, could not be extended without breaking some theoretical implementation or using a dummy filename that could be a legitimate filename.</dd>
</dl>
<dl>
<dt>
 *</dt>
<dd>
Industry experience since the original &quot; <i>tar</i> wars&quot; fought in developing the ISO&#160;POSIX-1 standard has clearly been in favor of the  <b>ustar</b> format, which is generally the default output format selected for  <i>pax</i> implementations on new systems.</dd>
</dl>
<div class="spacer">
</div>
The new format was designed with one additional goal in mind: reasonable behavior when an older  <i>tar</i> or <i>pax</i> utility happened to read an archive. Since the POSIX.1-1990 standard mandated that a &quot;format-reading utility&quot; had to treat unrecognized  <i>typeflag</i> values as regular files, this allowed the format to include all the extended information in a pseudo-regular file that preceded each real file. An option is given that allows the archive creator to set up reasonable names for these files on the older systems. Also, the normative text suggests that reasonable file access values be used for this  <b>ustar</b> header block. Making these header files inaccessible for convenient reading and deleting would not be reasonable. File permissions of 600 or 700 are suggested.<div class="spacer">
</div>
The <b>ustar</b> <i>typeflag</i> field was used to accommodate the additional functionality of the new format rather than magic or version because the POSIX.1-1990 standard (and, by reference, the previous version of  <i>pax</i>), mandated the behavior of the format-reading utility when it encountered an unknown  <i>typeflag</i>, but was silent about the other two fields.<div class="spacer">
</div>
Early proposals of the first revision to IEEE&#160;Std&#160;1003.1-2001 contained a proposed archive format that was based on compatibility with the standard for tape files (ISO&#160;1001, similar to the format used historically on many mainframes and minicomputers). This format was overly complex and required considerable overhead in volume and header records. Furthermore, the standard developers felt that it would not be acceptable to the community of POSIX developers, so it was later changed to be a format more closely related to historical practice on POSIX systems.<div class="spacer">
</div>
The prefix and name split of pathnames in <b>ustar</b> was replaced by the single path extended header record for simplicity.<div class="spacer">
</div>
The concept of a global extended header ( <i>typeflag</i> <b>g</b>) was controversial. If this were applied to an archive being recorded on magnetic tape, a few unreadable blocks at the beginning of the tape could be a serious problem; a utility attempting to extract as many files as possible from a damaged archive could lose a large percentage of file header information in this case. However, if the archive were on a reliable medium, such as a CD-ROM, the global extended header offers considerable potential size reductions by eliminating redundant information. Thus, the text warns against using the global method for unreliable media and provides a method for implanting global information in the extended header for each file, rather than in the  <i>typeflag</i>  <b>g</b> records.<div class="spacer">
</div>
No facility for data translation or filtering on a per-file basis is included because the standard developers could not invent an interface that would allow this in an efficient manner. If a filter, such as encryption or compression, is to be applied to all the files, it is more efficient to apply the filter to the entire archive as a single file. The standard developers considered interfaces that would invoke a shell script for each file going into or out of the archive, but the system overhead in this approach was considered to be too high.<div class="spacer">
</div>
One such approach would be to have <b>filter=</b> records that give a pathname for an executable. When the program is invoked, the file and archive would be open for standard input/output and all the header fields would be available as environment variables or command-line arguments. The standard developers did discuss such schemes, but they were omitted from IEEE&#160;Std&#160;1003.1-2001 due to concerns about excessive overhead. Also, the program itself would need to be in the archive if it were to be used portably.<div class="spacer">
</div>
There is currently no portable means of identifying the character set(s) used for a file in the file system. Therefore,  <i>pax</i> has not been given a mechanism to generate charset records automatically. The only portable means of doing this is for the user to write the archive using the  <b>-o</b> <b>charset=</b> <i>string</i> command line option. This assumes that all of the files in the archive use the same encoding. The &quot;implementation-defined&quot; text is included to allow for a system that can identify the encodings used for each of its files.<div class="spacer">
</div>
The table of standards that accompanies the charset record description is acknowledged to be very limited. Only a limited number of character set standards is reasonable for maximal interchange. Any character set is, of course, possible by prior agreement. It was suggested that EBCDIC be listed, but it was omitted because it is not defined by a formal standard. Formal standards, and then only those with reasonably large followings, can be included here, simply as a matter of practicality. The &lt; <i>value</i>&gt;s represent names of officially registered character sets in the format required by the ISO&#160;2375:1985 standard.<div class="spacer">
</div>
The normal comma or &lt;blank&gt;-separated list rules are not followed in the case of keyword options to allow ease of argument parsing for  <i>getopts</i>.<div class="spacer">
</div>
Further information on character encodings is in pax Archive Character Set Encoding/Decoding .<div class="spacer">
</div>
The standard developers have reserved keyword name space for vendor extensions. It is suggested that the format to be used is:<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 5.00ex;">
<div class="spacer">
</div>
<br/>
<i>VENDOR.keyword</i><br/>
</div>
<div class="spacer">
</div>
where <i>VENDOR</i> is the name of the vendor or organization in all uppercase letters. It is further suggested that the keyword following the period be named differently than any of the standard keywords so that it could be used for future standardization, if appropriate, by omitting the  <i>VENDOR</i> prefix.<div class="spacer">
</div>
The &lt;<i>length</i>&gt; field in the extended header record was included to make it simpler to step through the records, even if a record contains an unknown format (to a particular  <i>pax</i>) with complex interactions of special characters. It also provides a minor integrity checkpoint within the records to aid a program attempting to recover files from a damaged archive.<div class="spacer">
</div>
There are no extended header versions of the <i>devmajor</i> and <i>devminor</i> fields because the unspecified format  <b>ustar</b> header field should be sufficient. If they are not, vendor-specific extended keywords (such as  <i>VENDOR.devmajor</i>) should be used.<div class="spacer">
</div>
Device and <i>i</i>-number labeling of files was not adopted from <i>cpio</i>; files are interchanged strictly on a symbolic name basis, as in  <b>ustar</b>.<div class="spacer">
</div>
Just as with the <b>ustar</b> format descriptions, the new format makes no special arrangements for multi-volume archives. Each of the  <i>pax</i> archive types is assumed to be inside a single POSIX file and splitting that file over multiple volumes (diskettes, tape cartridges, and so on), processing their labels, and mounting each in the proper sequence are considered to be implementation details that cannot be described portably.<div class="spacer">
</div>
The <b>pax</b> format is intended for interchange, not only for backup on a single (family of) systems. It is not as densely packed as might be possible for backup:<dl>
<dt>
 *</dt>
<dd>
It contains information as coded characters that could be coded in binary.</dd>
</dl>
<dl>
<dt>
 *</dt>
<dd>
It identifies extended records with name fields that could be omitted in favor of a fixed-field layout.</dd>
</dl>
<dl>
<dt>
 *</dt>
<dd>
It translates names into a portable character set and identifies locale-related information, both of which are probably unnecessary for backup.</dd>
</dl>
<div class="spacer">
</div>
The requirements on restoring from an archive are slightly different from the historical wording, allowing for non-monolithic privilege to bring forward as much as possible. In particular, attributes such as &quot;high performance file&quot; might be broadly but not universally granted while set-user-ID or  <i>chown</i>() might be much more restricted. There is no implication in IEEE&#160;Std&#160;1003.1-2001 that the security information be honored after it is restored to the file hierarchy, in spite of what might be improperly inferred by the silence on that topic. That is a topic for another standard.<div class="spacer">
</div>
Links are recorded in the fashion described here because a link can be to any file type. It is desirable in general to be able to restore part of an archive selectively and restore all of those files completely. If the data is not associated with each link, it is not possible to do this. However, the data associated with a file can be large, and when selective restoration is not needed, this can be a significant burden. The archive is structured so that files that have no associated data can always be restored by the name of any link name of any link, and the user may choose whether data is recorded with each instance of a file that contains data. The format permits mixing of both types of links in a single archive; this can be done for special needs, and  <i>pax</i> is expected to interpret such archives on input properly, despite the fact that there is no  <i>pax</i> option that would force this mixed case on output. (When  <b>-o</b> <b>linkdata</b> is used, the output must contain the duplicate data, but the implementation is free to include it or omit it when  <b>-o</b> <b>linkdata</b> is not used.)<div class="spacer">
</div>
The time values are included as extended header records for those implementations needing more than the eleven octal digits allowed by the  <b>ustar</b> format. Portable file timestamps cannot be negative. If  <i>pax</i> encounters a file with a negative timestamp in  <b>copy</b> or <b>write</b> mode, it can reject the file, substitute a non-negative timestamp, or generate a non-portable timestamp with a leading  <b>'-'</b> . Even though some implementations can support finer file-time granularities than seconds, the normative text requires support only for seconds since the Epoch because the ISO&#160;POSIX-1 standard states them that way. The  <b>ustar</b> format includes only <i>mtime</i>; the new format adds  <i>atime</i> and <i>ctime</i> for symmetry. The  <i>atime</i> access time restored to the file system will be affected by the  <b>-p</b> <b>a</b> and <b>-p</b> <b>e</b> options. The  <i>ctime</i> creation time (actually <i>inode</i> modification time) is described with &quot;appropriate privilege&quot; so that it can be ignored when writing to the file system. POSIX does not provide a portable means to change file creation time. Nothing is intended to prevent a non-portable implementation of  <i>pax</i> from restoring the value.<div class="spacer">
</div>
The <i>gid</i>, <i>size</i>, and <i>uid</i> extended header records were included to allow expansion beyond the sizes specified in the regular  <i>tar</i> header. New file system architectures are emerging that will exhaust the 12-digit size field. There are probably not many systems requiring more than 8 digits for user and group IDs, but the extended header values were included for completeness, allowing overrides for all of the decimal values in the  <i>tar</i> header.<div class="spacer">
</div>
The standard developers intended to describe the effective results of  <i>pax</i> with regard to file ownerships and permissions; implementations are not restricted in timing or sequencing the restoration of such, provided the results are as specified.<div class="spacer">
</div>
Much of the text describing the extended headers refers to use in &quot;  <b>write</b> or <b>copy</b> modes&quot;. The <b>copy</b> mode references are due to the normative text: &quot;The effect of the copy shall be as if the copied files were written to an archive file and then subsequently extracted ...&quot;. There is certainly no way to test whether  <i>pax</i> is actually generating the extended headers in  <b>copy</b> mode, but the effects must be as if it had.</div>
<div class="subsection">
<h2>pax Archive Character Set Encoding/Decoding</h2> There is a need to exchange archives of files between systems of different native codesets. Filenames, group names, and user names must be preserved to the fullest extent possible when an archive is read on the receiving platform. Translation of the contents of files is not within the scope of the  <i>pax</i> utility.<div class="spacer">
</div>
There will also be the need to represent characters that are not available on the receiving platform. These unsupported characters cannot be automatically folded to the local set of characters due to the chance of collisions. This could result in overwriting previous extracted files from the archive or pre-existing files on the system.<div class="spacer">
</div>
For these reasons, the codeset used to represent characters within the extended header records of the  <i>pax</i> archive must be sufficiently rich to handle all commonly used character sets. The fields requiring translation include, at a minimum, filenames, user names, group names, and link pathnames. Implementations may wish to have localized extended keywords that use non-portable characters.<div class="spacer">
</div>
The standard developers considered the following options:<dl>
<dt>
 *</dt>
<dd>
The archive creator specifies the well-defined name of the source codeset. The receiver must then recognize the codeset name and perform the appropriate translations to the destination codeset.</dd>
</dl>
<dl>
<dt>
 *</dt>
<dd>
The archive creator includes within the archive the character mapping table for the source codeset used to encode extended header records. The receiver must then read the character mapping table and perform the appropriate translations to the destination codeset.</dd>
</dl>
<dl>
<dt>
 *</dt>
<dd>
The archive creator translates the extended header records in the source codeset into a canonical form. The receiver must then perform the appropriate translations to the destination codeset.</dd>
</dl>
<div class="spacer">
</div>
The approach that incorporates the name of the source codeset poses the problem of codeset name registration, and makes the archive useless to  <i>pax</i> archive decoders that do not recognize that codeset.<div class="spacer">
</div>
Because parts of an archive may be corrupted, the standard developers felt that including the character map of the source codeset was too fragile. The loss of this one key component could result in making the entire archive useless. (The difference between this and the global extended header decision was that the latter has a workaround-duplicating extended header records on unreliable media-but this would be too burdensome for large character set maps.)<div class="spacer">
</div>
Both of the above approaches also put an undue burden on the <i>pax</i> archive receiver to handle the cross-product of all source and destination codesets.<div class="spacer">
</div>
To simplify the translation from the source codeset to the canonical form and from the canonical form to the destination codeset, the standard developers decided that the internal representation should be a stateless encoding. A stateless encoding is one where each codepoint has the same meaning, without regard to the decoder being in a specific state. An example of a stateful encoding would be the Japanese Shift-JIS; an example of a stateless encoding would be the ISO/IEC&#160;646:1991 standard (equivalent to 7-bit ASCII).<div class="spacer">
</div>
For these reasons, the standard developers decided to adopt a canonical format for the representation of file information strings. The obvious, well-endorsed candidate is the ISO/IEC&#160;10646-1:2000 standard (based in part on Unicode), which can be used to represent the characters of virtually all standardized character sets. The standard developers initially agreed upon using UCS2 (16-bit Unicode) as the internal representation. This repertoire of characters provides a sufficiently rich set to represent all commonly-used codesets.<div class="spacer">
</div>
However, the standard developers found that the 16-bit Unicode representation had some problems. It forced the issue of standardizing byte ordering. The 2-byte length of each character made the extended header records twice as long for the case of strings coded entirely from historical 7-bit ASCII. For these reasons, the standard developers chose the UTF-8 defined in the ISO/IEC&#160;10646-1:2000 standard. This multi-byte representation encodes UCS2 or UCS4 characters reliably and deterministically, eliminating the need for a canonical byte ordering. In addition, NUL octets and other characters possibly confusing to POSIX file systems do not appear, except to represent themselves. It was realized that certain national codesets take up more space after the encoding, due to their placement within the UCS range; it was felt that the usefulness of the encoding of the names outweighs the disadvantage of size increase for file, user, and group names.<div class="spacer">
</div>
The encoding of UTF-8 is as follows:<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 5.00ex;">
<div class="spacer">
</div>
<br/>
<b>UCS4 Hex Encoding  UTF-8 Binary Encoding</b><div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
<br/>
00000000-0000007F  0xxxxxxx<br/>
00000080-000007FF  110xxxxx 10xxxxxx<br/>
00000800-0000FFFF  1110xxxx 10xxxxxx 10xxxxxx<br/>
00010000-001FFFFF  11110xxx 10xxxxxx 10xxxxxx 10xxxxxx<br/>
00200000-03FFFFFF  111110xx 10xxxxxx 10xxxxxx 10xxxxxx 10xxxxxx<br/>
04000000-7FFFFFFF  1111110x 10xxxxxx 10xxxxxx 10xxxxxx 10xxxxxx 10xxxxxx<br/>
<b></b><br/>
</div>
<div class="spacer">
</div>
where each <b>'x'</b> represents a bit value from the character being translated.</div>
<div class="subsection">
<h2>ustar Interchange Format</h2> The description of the  <b>ustar</b> format reflects numerous enhancements over pre-1988 versions of the historical  <i>tar</i> utility. The goal of these changes was not only to provide the functional enhancements desired, but also to retain compatibility between new and old versions. This compatibility has been retained. Archives written using the old archive format are compatible with the new format.<div class="spacer">
</div>
Implementors should be aware that the previous file format did not include a mechanism to archive directory type files. For this reason, the convention of using a filename ending with slash was adopted to specify a directory on the archive.<div class="spacer">
</div>
The total size of the <i>name</i> and <i>prefix</i> fields have been set to meet the minimum requirements for {PATH_MAX}. If a pathname will fit within the  <i>name</i> field, it is recommended that the pathname be stored there without the use of the  <i>prefix</i> field. Although the name field is known to be too small to contain {PATH_MAX} characters, the value was not changed in this version of the archive file format to retain backwards-compatibility, and instead the prefix was introduced. Also, because of the earlier version of the format, there is no way to remove the restriction on the  <i>linkname</i> field being limited in size to just that of the  <i>name</i> field.<div class="spacer">
</div>
The <i>size</i> field is required to be meaningful in all implementation extensions, although it could be zero. This is required so that the data blocks can always be properly counted.<div class="spacer">
</div>
It is suggested that if device special files need to be represented that cannot be represented in the standard format, that one of the extension types (  <b>A</b>- <b>Z</b>) be used, and that the additional information for the special file be represented as data and be reflected in the  <i>size</i> field.<div class="spacer">
</div>
Attempting to restore a special file type, where it is converted to ordinary data and conflicts with an existing filename, need not be specially detected by the utility. If run as an ordinary user,  <i>pax</i> should not be able to overwrite the entries in, for example,  <b>/dev</b> in any case (whether the file is converted to another type or not). If run as a privileged user, it should be able to do so, and it would be considered a bug if it did not. The same is true of ordinary data files and similarly named special files; it is impossible to anticipate the needs of the user (who could really intend to overwrite the file), so the behavior should be predictable (and thus regular) and rely on the protection system as required.<div class="spacer">
</div>
The value 7 in the <i>typeflag</i> field is intended to define how contiguous files can be stored in a  <b>ustar</b> archive. IEEE&#160;Std&#160;1003.1-2001 does not require the contiguous file extension, but does define a standard way of archiving such files so that all conforming systems can interpret these file types in a meaningful and consistent manner. On a system that does not support extended file types, the  <i>pax</i> utility should do the best it can with the file and go on to the next.<div class="spacer">
</div>
The file protection modes are those conventionally used by the <i>ls</i> utility. This is extended beyond the usage in the ISO&#160;POSIX-2 standard to support the &quot;shared text&quot; or &quot;sticky&quot; bit. It is intended that the conformance document should not document anything beyond the existence of and support of such a mode. Further extensions are expected to these bits, particularly with overloading the set-user-ID and set-group-ID flags.</div>
<div class="subsection">
<h2>cpio Interchange Format</h2> The reference to appropriate privilege in the  <b>cpio</b> format refers to an error on standard output; the  <b>ustar</b> format does not make comparable statements.<div class="spacer">
</div>
The model for this format was the historical System V <i>cpio</i> <b>-c</b> data interchange format. This model documents the portable version of the  <b>cpio</b> format and not the binary version. It has the flexibility to transfer data of any type described within IEEE&#160;Std&#160;1003.1-2001, yet is extensible to transfer data types specific to extensions beyond IEEE&#160;Std&#160;1003.1-2001 (for example, contiguous files). Because it describes existing practice, there is no question of maintaining upwards-compatibility.</div>
<div class="subsection">
<h2>cpio Header</h2> There has been some concern that the size of the  <i>c_ino</i> field of the header is too small to handle those systems that have very large  <i>inode</i> numbers. However, the <i>c_ino</i> field in the header is used strictly as a hard-link resolution mechanism for archives. It is not necessarily the same value as the  <i>inode</i> number of the file in the location from which that file is extracted.<div class="spacer">
</div>
The name <i>c_magic</i> is based on historical usage.</div>
<div class="subsection">
<h2>cpio Filename</h2> For most historical implementations of the  <i>cpio</i> utility, {PATH_MAX} octets can be used to describe the pathname without the addition of any other header fields (the NUL character would be included in this count). {PATH_MAX} is the minimum value for pathname size, documented as 256 bytes. However, an implementation may use  <i>c_namesize</i> to determine the exact length of the pathname. With the current description of the  <i>&lt;cpio.h&gt;</i> header, this pathname size can be as large as a number that is described in six octal digits.<div class="spacer">
</div>
Two values are documented under the <i>c_mode</i> field values to provide for extensibility for known file types:<dl>
<dt>
<b>0110&#160;000</b></dt>
<dd>
Reserved for contiguous files. The implementation may treat the rest of the information for this archive like a regular file. If this file type is undefined, the implementation may create the file as a regular file.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<div class="spacer">
</div>
This provides for extensibility of the <b>cpio</b> format while allowing for the ability to read old archives. Files of an unknown type may be read as &quot;regular files&quot; on some implementations. On a system that does not support extended file types, the  <i>pax</i> utility should do the best it can with the file and go on to the next.</div>
</div>
<div class="section">
<h1>FUTURE DIRECTIONS</h1> None.</div>
<div class="section">
<h1>SEE ALSO</h1>  <i>Shell Command Language</i>, <i>cp</i>, <i>ed</i>, <i>getopts</i>,  <i>ls</i>, <i>printf</i>(), the Base Definitions volume of IEEE&#160;Std&#160;1003.1-2001,  <i>&lt;cpio.h&gt;</i>, the System Interfaces volume of IEEE&#160;Std&#160;1003.1-2001,  <i>chown</i>(), <i>creat</i>(), <i>mkdir</i>(), <i>mkfifo</i>(), <i>stat</i>(),  <i>utime</i>(), <i>write</i>()</div>
<div class="section">
<h1>COPYRIGHT</h1> Portions of this text are reprinted and reproduced in electronic form from IEEE Std 1003.1, 2003 Edition, Standard for Information Technology -- Portable Operating System Interface (POSIX), The Open Group Base Specifications Issue 6, Copyright (C) 2001-2003 by the Institute of Electrical and Electronics Engineers, Inc and The Open Group. In the event of any discrepancy between this version and the original IEEE and The Open Group Standard, the original IEEE and The Open Group Standard is the referee document. The original Standard can be obtained online at http://www.opengroup.org/unix/online.html .</div>
<table class="foot">
<tr>
<td class="foot-date">
2003</td>
<td class="foot-os">
IEEE/The Open Group</td>
</tr>
</table>
</div>
</body>
</html>

