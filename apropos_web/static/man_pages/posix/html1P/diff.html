<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/posix/style.css" type="text/css" media="all"/>
<title>
DIFF(1P)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
DIFF(1P)</td>
<td class="head-vol">
POSIX Programmer's Manual</td>
<td class="head-rtitle">
DIFF(1P)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>PROLOG</h1> This manual page is part of the POSIX Programmer's Manual. The Linux implementation of this interface may differ (consult the corresponding Linux manual page for details of Linux behavior), or the interface may not be implemented on Linux.</div>
<div class="section">
<h1>NAME</h1> diff - compare two files</div>
<div class="section">
<h1>SYNOPSIS</h1>  <b>diff</b> <b>[</b><b>-c| -e| -f| -C</b> <i>n</i><b>][</b><b>-br</b><b>]</b>  <i>file1 file2</i></div>
<div class="section">
<h1>DESCRIPTION</h1> The  <i>diff</i> utility shall compare the contents of <i>file1</i> and  <i>file2</i> and write to standard output a list of changes necessary to convert  <i>file1</i> into <i>file2</i>. This list should be minimal. No output shall be produced if the files are identical.</div>
<div class="section">
<h1>OPTIONS</h1> The  <i>diff</i> utility shall conform to the Base Definitions volume of IEEE&#160;Std&#160;1003.1-2001, Section 12.2, Utility Syntax Guidelines.<div class="spacer">
</div>
The following options shall be supported:<dl>
<dt>
<b>-b</b></dt>
<dd>
Cause any amount of white space at the end of a line to be treated as a single &lt;newline&gt; (that is, the white-space characters preceding the &lt;newline&gt; are ignored) and other strings of white-space characters, not including &lt;newline&gt;s, to compare equal.</dd>
</dl>
<dl>
<dt>
<b>-c</b></dt>
<dd>
Produce output in a form that provides three lines of context.</dd>
</dl>
<dl>
<dt>
<b>-C&#160;n</b></dt>
<dd>
Produce output in a form that provides <i>n</i> lines of context (where  <i>n</i> shall be interpreted as a positive decimal integer).</dd>
</dl>
<dl>
<dt>
<b>-e</b></dt>
<dd>
Produce output in a form suitable as input for the <i>ed</i> utility, which can then be used to convert  <i>file1</i> into <i>file2</i>.</dd>
</dl>
<dl>
<dt>
<b>-f</b></dt>
<dd>
Produce output in an alternative form, similar in format to <b>-e</b>, but not intended to be suitable as input for the  <i>ed</i> utility, and in the opposite order.</dd>
</dl>
<dl>
<dt>
<b>-r</b></dt>
<dd>
Apply <i>diff</i> recursively to files and directories of the same name when  <i>file1</i> and <i>file2</i> are both directories.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
</div>
<div class="section">
<h1>OPERANDS</h1> The following operands shall be supported:<dl>
<dt>
<i>file1</i>,&#160;<i>file2</i></dt>
<dd>
A pathname of a file to be compared. If either the <i>file1</i> or  <i>file2</i> operand is <b>'-'</b>, the standard input shall be used in its place.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<div class="spacer">
</div>
If both <i>file1</i> and <i>file2</i> are directories, <i>diff</i> shall not compare block special files, character special files, or FIFO special files to any files and shall not compare regular files to directories. Further details are as specified in Diff Directory Comparison Format . The behavior of  <i>diff</i> on other file types is implementation-defined when found in directories.<div class="spacer">
</div>
If only one of <i>file1</i> and <i>file2</i> is a directory, <i>diff</i> shall be applied to the non-directory file and the file contained in the directory file with a filename that is the same as the last component of the non-directory file.</div>
<div class="section">
<h1>STDIN</h1> The standard input shall be used only if one of the  <i>file1</i> or  <i>file2</i> operands references standard input. See the INPUT FILES section.</div>
<div class="section">
<h1>INPUT FILES</h1> The input files may be of any type.</div>
<div class="section">
<h1>ENVIRONMENT VARIABLES</h1> The following environment variables shall affect the execution of  <i>diff</i>:<dl>
<dt>
<i>LANG</i></dt>
<dd>
Provide a default value for the internationalization variables that are unset or null. (See the Base Definitions volume of IEEE&#160;Std&#160;1003.1-2001, Section 8.2, Internationalization Variables for the precedence of internationalization variables used to determine the values of locale categories.)</dd>
</dl>
<dl>
<dt>
<i>LC_ALL</i></dt>
<dd>
If set to a non-empty string value, override the values of all the other internationalization variables.</dd>
</dl>
<dl>
<dt>
<i>LC_CTYPE</i></dt>
<dd>
Determine the locale for the interpretation of sequences of bytes of text data as characters (for example, single-byte as opposed to multi-byte characters in arguments and input files).</dd>
</dl>
<dl>
<dt>
<i>LC_MESSAGES</i></dt>
<dd>
Determine the locale that should be used to affect the format and contents of diagnostic messages written to standard error and informative messages written to standard output.</dd>
</dl>
<dl>
<dt>
<i>LC_TIME</i></dt>
<dd>
Determine the locale for affecting the format of file timestamps written with the  <b>-C</b> and <b>-c</b> options.</dd>
</dl>
<dl>
<dt>
<i>NLSPATH</i></dt>
<dd>
Determine the location of message catalogs for the processing of <i>LC_MESSAGES</i>  <i>.</i></dd>
</dl>
<dl>
<dt>
<i>TZ</i></dt>
<dd>
Determine the timezone used for calculating file timestamps written with the  <b>-C</b> and <b>-c</b> options. If <i>TZ</i> is unset or null, an unspecified default timezone shall be used.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
</div>
<div class="section">
<h1>ASYNCHRONOUS EVENTS</h1> Default.</div>
<div class="section">
<h1>STDOUT</h1><div class="subsection">
<h2>Diff Directory Comparison Format</h2> If both  <i>file1</i> and <i>file2</i> are directories, the following output formats shall be used.<div class="spacer">
</div>
In the POSIX locale, each file that is present in only one directory shall be reported using the following format:<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 5.00ex;">
<div class="spacer">
</div>
<br/>
<b>&quot;Only in %s: %s\n&quot;, &lt;</b><i>directory pathname</i><b>&gt;, &lt;</b><i>filename</i><b>&gt;</b><br/>
<b></b><br/>
</div>
<div class="spacer">
</div>
In the POSIX locale, subdirectories that are common to the two directories may be reported with the following format:<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 5.00ex;">
<div class="spacer">
</div>
<br/>
<b>&quot;Common subdirectories: %s and %s\n&quot;, &lt;</b><i>directory1 pathname</i><b>&gt;,</b><br/>
<b>    &lt;</b><i>directory2 pathname</i><b>&gt;</b><br/>
<b></b><br/>
</div>
<div class="spacer">
</div>
For each file common to the two directories if the two files are not to be compared, the following format shall be used in the POSIX locale:<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 5.00ex;">
<div class="spacer">
</div>
<br/>
<b>&quot;File %s is a %s while file %s is a %s\n&quot;, &lt;</b><i>directory1 pathname</i><b>&gt;,</b><br/>
<b>    &lt;</b><i>file type of directory1 pathname</i><b>&gt;, &lt;</b><i>directory2 pathname</i><b>&gt;,</b><br/>
<b>    &lt;</b><i>file type of directory2 pathname</i><b>&gt;</b><br/>
<b></b><br/>
</div>
<div class="spacer">
</div>
For each file common to the two directories, if the files are compared and are identical, no output shall be written. If the two files differ, the following format is written:<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 5.00ex;">
<div class="spacer">
</div>
<br/>
<b>&quot;diff %s %s %s\n&quot;, &lt;</b><i>diff_options</i><b>&gt;, &lt;</b><i>filename1</i><b>&gt;, &lt;</b><i>filename2</i><b>&gt;</b><br/>
<b></b><br/>
</div>
<div class="spacer">
</div>
where &lt;<i>diff_options</i>&gt; are the options as specified on the command line.<div class="spacer">
</div>
All directory pathnames listed in this section shall be relative to the original command line arguments. All other names of files listed in this section shall be filenames (pathname components).</div>
<div class="subsection">
<h2>Diff Binary Output Format</h2> In the POSIX locale, if one or both of the files being compared are not text files, an unspecified format shall be used that contains the pathnames of two files being compared and the string  <b>&quot;differ&quot;</b> .<div class="spacer">
</div>
If both files being compared are text files, depending on the options specified, one of the following formats shall be used to write the differences.</div>
<div class="subsection">
<h2>Diff Default Output Format</h2> The default (without  <b>-e</b>, <b>-f</b>, <b>-c</b>, or <b>-C</b> options)  <i>diff</i> utility output shall contain lines of these forms:<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 5.00ex;">
<div class="spacer">
</div>
<br/>
<b>&quot;%da%d\n&quot;, &lt;</b><i>num1</i><b>&gt;, &lt;</b><i>num2</i><b>&gt;</b><div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
<br/>
&quot;%da%d,%d\n&quot;, &lt;<b></b><i>num1</i><b></b><b>&gt;, &lt;</b><b></b><i>num2</i><b></b><b>&gt;, &lt;</b><b></b><i>num3</i><b></b><b>&gt;</b><div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
<br/>
&quot;%dd%d\n&quot;, &lt;<b></b><i>num1</i><b></b><b>&gt;, &lt;</b><b></b><i>num2</i><b></b><b>&gt;</b><div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
<br/>
&quot;%d,%dd%d\n&quot;, &lt;<b></b><i>num1</i><b></b><b>&gt;, &lt;</b><b></b><i>num2</i><b></b><b>&gt;, &lt;</b><b></b><i>num3</i><b></b><b>&gt;</b><div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
<br/>
&quot;%dc%d\n&quot;, &lt;<b></b><i>num1</i><b></b><b>&gt;, &lt;</b><b></b><i>num2</i><b></b><b>&gt;</b><div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
<br/>
&quot;%d,%dc%d\n&quot;, &lt;<b></b><i>num1</i><b></b><b>&gt;, &lt;</b><b></b><i>num2</i><b></b><b>&gt;, &lt;</b><b></b><i>num3</i><b></b><b>&gt;</b><div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
<br/>
&quot;%dc%d,%d\n&quot;, &lt;<b></b><i>num1</i><b></b><b>&gt;, &lt;</b><b></b><i>num2</i><b></b><b>&gt;, &lt;</b><b></b><i>num3</i><b></b><b>&gt;</b><div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
<br/>
&quot;%d,%dc%d,%d\n&quot;, &lt;<b></b><i>num1</i><b></b><b>&gt;, &lt;</b><b></b><i>num2</i><b></b><b>&gt;, &lt;</b><b></b><i>num3</i><b></b><b>&gt;, &lt;</b><b></b><i>num4</i><b></b><b>&gt;</b><br/>
<b></b><b></b><br/>
</div>
<div class="spacer">
</div>
These lines resemble <i>ed</i> subcommands to convert <i>file1</i> into  <i>file2</i>. The line numbers before the action letters shall pertain to  <i>file1</i>; those after shall pertain to  <i>file2</i>. Thus, by exchanging  <i>a</i> for <i>d</i> and reading the line in reverse order, one can also determine how to convert  <i>file2</i> into  <i>file1</i>. As in <i>ed</i>, identical pairs (where <i>num1</i>= <i>num2</i>) are abbreviated as a single number.<div class="spacer">
</div>
Following each of these lines, <i>diff</i> shall write to standard output all lines affected in the first file using the format:<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 5.00ex;">
<div class="spacer">
</div>
<br/>
<b>&quot;&lt; %s&quot;, &lt;</b><i>line</i><b>&gt;</b><br/>
<b></b><br/>
</div>
<div class="spacer">
</div>
and all lines affected in the second file using the format:<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 5.00ex;">
<div class="spacer">
</div>
<br/>
<b>&quot;&gt; %s&quot;, &lt;</b><i>line</i><b>&gt;</b><br/>
<b></b><br/>
</div>
<div class="spacer">
</div>
If there are lines affected in both <i>file1</i> and <i>file2</i> (as with the  <b>c</b> subcommand), the changes are separated with a line consisting of three hyphens:<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 5.00ex;">
<div class="spacer">
</div>
<br/>
<b>&quot;---\n&quot;</b><br/>
<b></b><br/>
</div>
</div>
<div class="subsection">
<h2>Diff -e Output Format</h2> With the  <b>-e</b> option, a script shall be produced that shall, when provided as input to  <i>ed</i>, along with an appended <b>w</b> (write) command, convert  <i>file1</i> into <i>file2</i>. Only the  <b>a</b> (append), <b>c</b> (change), <b>d</b> (delete), <b>i</b> (insert), and  <b>s</b> (substitute) commands of <i>ed</i> shall be used in this script. Text lines, except those consisting of the single character period (  <b>'.'</b> ), shall be output as they appear in the file.</div>
<div class="subsection">
<h2>Diff -f Output Format</h2> With the  <b>-f</b> option, an alternative format of script shall be produced. It is similar to that produced by  <b>-e</b>, with the following differences:<dl>
<dt>
 1.</dt>
<dd>
It is expressed in reverse sequence; the output of <b>-e</b> orders changes from the end of the file to the beginning; the  <b>-f</b> from beginning to end.</dd>
</dl>
<dl>
<dt>
 2.</dt>
<dd>
The command form &lt;<i>lines</i>&gt; &lt;<i>command-letter</i>&gt; used by <b>-e</b> is reversed. For example, 10 <i>c</i> with  <b>-e</b> would be <i>c</i>10 with <b>-f</b>.</dd>
</dl>
<dl>
<dt>
 3.</dt>
<dd>
The form used for ranges of line numbers is &lt;space&gt;-separated, rather than comma-separated.</dd>
</dl>
</div>
<div class="subsection">
<h2>Diff -c or -C Output Format</h2> With the  <b>-c</b> or <b>-C</b> option, the output format shall consist of affected lines along with surrounding lines of context. The affected lines shall show which ones need to be deleted or changed in  <i>file1</i>, and those added from <i>file2</i>. With the  <b>-c</b> option, three lines of context, if available, shall be written before and after the affected lines. With the  <b>-C</b> option, the user can specify how many lines of context are written. The exact format follows.<div class="spacer">
</div>
The name and last modification time of each file shall be output in the following format:<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 5.00ex;">
<div class="spacer">
</div>
<br/>
<b>&quot;*** %s %s\n&quot;,</b> <i>file1</i><b>, &lt;</b><i>file1 timestamp</i><b>&gt;</b><br/>
<b>&quot;--- %s %s\n&quot;,</b> <i>file2</i><b>, &lt;</b><i>file2 timestamp</i><b>&gt;</b><br/>
<b></b><br/>
</div>
<div class="spacer">
</div>
Each &lt;<i>file</i>&gt; field shall be the pathname of the corresponding file being compared. The pathname written for standard input is unspecified.<div class="spacer">
</div>
In the POSIX locale, each &lt;<i>timestamp</i>&gt; field shall be equivalent to the output from the following command:<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 5.00ex;">
<div class="spacer">
</div>
<br/>
<b>date &quot;+%a %b %e %T %Y&quot;</b><br/>
<b></b><br/>
</div>
<div class="spacer">
</div>
without the trailing &lt;newline&gt;, executed at the time of last modification of the corresponding file (or the current time, if the file is standard input).<div class="spacer">
</div>
Then, the following output formats shall be applied for every set of changes.<div class="spacer">
</div>
First, a line shall be written in the following format:<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 5.00ex;">
<div class="spacer">
</div>
<br/>
<b>&quot;***************\n&quot;</b><br/>
<b></b><br/>
</div>
<div class="spacer">
</div>
Next, the range of lines in <i>file1</i> shall be written in the following format if the range contains two or more lines:<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 5.00ex;">
<div class="spacer">
</div>
<br/>
<b>&quot;*** %d,%d ****\n&quot;, &lt;</b><i>beginning line number</i><b>&gt;, &lt;</b><i>ending line number</i><b>&gt;</b><br/>
<b></b><br/>
</div>
<div class="spacer">
</div>
and the following format otherwise:<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 5.00ex;">
<div class="spacer">
</div>
<br/>
<b>&quot;*** %d ****\n&quot;, &lt;</b><i>ending line number</i><b>&gt;</b><br/>
<b></b><br/>
</div>
<div class="spacer">
</div>
The ending line number of an empty range shall be the number of the preceding line, or 0 if the range is at the start of the file.<div class="spacer">
</div>
Next, the affected lines along with lines of context (unaffected lines) shall be written. Unaffected lines shall be written in the following format:<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 5.00ex;">
<div class="spacer">
</div>
<br/>
<b>&quot;  %s&quot;, &lt;</b><i>unaffected_line</i><b>&gt;</b><br/>
<b></b><br/>
</div>
<div class="spacer">
</div>
Deleted lines shall be written as:<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 5.00ex;">
<div class="spacer">
</div>
<br/>
<b>&quot;- %s&quot;, &lt;</b><i>deleted_line</i><b>&gt;</b><br/>
<b></b><br/>
</div>
<div class="spacer">
</div>
Changed lines shall be written as:<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 5.00ex;">
<div class="spacer">
</div>
<br/>
<b>&quot;! %s&quot;, &lt;</b><i>changed_line</i><b>&gt;</b><br/>
<b></b><br/>
</div>
<div class="spacer">
</div>
Next, the range of lines in <i>file2</i> shall be written in the following format if the range contains two or more lines:<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 5.00ex;">
<div class="spacer">
</div>
<br/>
<b>&quot;--- %d,%d ----\n&quot;, &lt;</b><i>beginning line number</i><b>&gt;, &lt;</b><i>ending line number</i><b>&gt;</b><br/>
<b></b><br/>
</div>
<div class="spacer">
</div>
and the following format otherwise:<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 5.00ex;">
<div class="spacer">
</div>
<br/>
<b>&quot;--- %d ----\n&quot;, &lt;</b><i>ending line number</i><b>&gt;</b><br/>
<b></b><br/>
</div>
<div class="spacer">
</div>
Then, lines of context and changed lines shall be written as described in the previous formats. Lines added from  <i>file2</i> shall be written in the following format:<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 5.00ex;">
<div class="spacer">
</div>
<br/>
<b>&quot;+ %s&quot;, &lt;</b><i>added_line</i><b>&gt;</b><br/>
<b></b><br/>
</div>
</div>
</div>
<div class="section">
<h1>STDERR</h1> The standard error shall be used only for diagnostic messages.</div>
<div class="section">
<h1>OUTPUT FILES</h1> None.</div>
<div class="section">
<h1>EXTENDED DESCRIPTION</h1> None.</div>
<div class="section">
<h1>EXIT STATUS</h1> The following exit values shall be returned:<dl>
<dt>
&#160;0</dt>
<dd>
No differences were found.</dd>
</dl>
<dl>
<dt>
&#160;1</dt>
<dd>
Differences were found.</dd>
</dl>
<dl>
<dt>
&gt;1</dt>
<dd>
An error occurred.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
</div>
<div class="section">
<h1>CONSEQUENCES OF ERRORS</h1> Default.<div class="spacer">
</div>
<i>The following sections are informative.</i></div>
<div class="section">
<h1>APPLICATION USAGE</h1> If lines at the end of a file are changed and other lines are added,  <i>diff</i> output may show this as a delete and add, as a change, or as a change and add;  <i>diff</i> is not expected to know which happened and users should not care about the difference in output as long as it clearly shows the differences between the files.</div>
<div class="section">
<h1>EXAMPLES</h1> If  <b>dir1</b> is a directory containing a directory named <b>x</b>,  <b>dir2</b> is a directory containing a directory named  <b>x</b>, <b>dir1/x</b> and <b>dir2/x</b> both contain files named <b>date.out</b>, and  <b>dir2/x</b> contains a file named  <b>y</b>, the command:<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 5.00ex;">
<div class="spacer">
</div>
<br/>
<b>diff -r dir1 dir2</b><br/>
<b></b><br/>
</div>
<div class="spacer">
</div>
could produce output similar to:<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 5.00ex;">
<div class="spacer">
</div>
<br/>
<b>Common subdirectories: dir1/x and dir2/x</b><br/>
<b>Only in dir2/x: y</b><br/>
<b>diff -r dir1/x/date.out dir2/x/date.out</b><br/>
<b>1c1</b><br/>
<b>&lt; Mon Jul  2 13:12:16 PDT 1990</b><br/>
<b>---</b><br/>
<b>&gt; Tue Jun 19 21:41:39 PDT 1990</b><br/>
<b></b><br/>
</div>
</div>
<div class="section">
<h1>RATIONALE</h1> The  <b>-h</b> option was omitted because it was insufficiently specified and does not add to applications portability.<div class="spacer">
</div>
Historical implementations employ algorithms that do not always produce a minimum list of differences; the current language about making every effort is the best this volume of IEEE&#160;Std&#160;1003.1-2001 can do, as there is no metric that could be employed to judge the quality of implementations against any and all file contents. The statement &quot;This list should be minimal'' clearly implies that implementations are not expected to provide the following output when comparing two 100-line files that differ in only one character on a single line:<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 5.00ex;">
<div class="spacer">
</div>
<br/>
<b>1,100c1,100</b><br/>
<b>all 100 lines from file1 preceded with &quot;&lt; &quot;</b><br/>
<b>---</b><br/>
<b>all 100 lines from file2 preceded with &quot;&gt; &quot;</b><br/>
<b></b><br/>
</div>
<div class="spacer">
</div>
The &quot;Only in&quot; messages required when the <b>-r</b> option is specified are not used by most historical implementations if the  <b>-e</b> option is also specified. It is required here because it provides useful information that must be provided to update a target directory hierarchy to match a source hierarchy. The &quot;Common subdirectories&quot; messages are written by System V and 4.3 BSD when the  <b>-r</b> option is specified. They are allowed here but are not required because they are reporting on something that is the same, not reporting a difference, and are not needed to update a target hierarchy.<div class="spacer">
</div>
The <b>-c</b> option, which writes output in a format using lines of context, has been included. The format is useful for a variety of reasons, among them being much improved readability and the ability to understand difference changes when the target file has line numbers that differ from another similar, but slightly different, copy. The  <i>patch</i> utility is most valuable when working with difference listings using the context format. The BSD version of  <b>-c</b> takes an optional argument specifying the amount of context. Rather than overloading  <b>-c</b> and breaking the Utility Syntax Guidelines for  <i>diff</i>, the standard developers decided to add a separate option for specifying a context diff with a specified amount of context (  <b>-C</b>). Also, the format for context  <i>diff</i>s was extended slightly in 4.3 BSD to allow multiple changes that are within context lines from each other to be merged together. The output format contains an additional four asterisks after the range of affected lines in the first filename. This was to provide a flag for old programs (like old versions of  <i>patch</i>) that only understand the old context format. The version of context described here does not require that multiple changes within context lines be merged, but it does not prohibit it either. The extension is upwards-compatible, so any vendors that wish to retain the old version of  <i>diff</i> can do so by adding the extra four asterisks (that is, utilities that currently use  <i>diff</i> and understand the new merged format will also understand the old unmerged format, but not  <i>vice versa</i>).<div class="spacer">
</div>
The substitute command was added as an additional format for the <b>-e</b> option. This was added to provide implementations with a way to fix the classic &quot;dot alone on a line&quot; bug present in many versions of  <i>diff</i>. Since many implementations have fixed this bug, the standard developers decided not to standardize broken behavior, but rather to provide the necessary tool for fixing the bug. One way to fix this bug is to output two periods whenever a lone period is needed, then terminate the append command with a period, and then use the substitute command to convert the two periods into one period.<div class="spacer">
</div>
The BSD-derived <b>-r</b> option was added to provide a mechanism for using  <i>diff</i> to compare two file system trees. This behavior is useful, is standard practice on all BSD-derived systems, and is not easily reproducible with the  <i>find</i> utility.<div class="spacer">
</div>
The requirement that <i>diff</i> not compare files in some circumstances, even though they have the same name, is based on the actual output of historical implementations. The message specified here is already in use when a directory is being compared to a non-directory. It is extended here to preclude the problems arising from running into FIFOs and other files that would cause  <i>diff</i> to hang waiting for input with no indication to the user that  <i>diff</i> was hung. In most common usage, <i>diff</i>  <b>-r</b> should indicate differences in the file hierarchies, not the difference of contents of devices pointed to by the hierarchies.<div class="spacer">
</div>
Many early implementations of <i>diff</i> require seekable files. Since the System Interfaces volume of IEEE&#160;Std&#160;1003.1-2001 supports named pipes, the standard developers decided that such a restriction was unreasonable. Note also that the allowed filename  <b>-</b> almost always refers to a pipe.<div class="spacer">
</div>
No directory search order is specified for <i>diff</i>. The historical ordering is, in fact, not optimal, in that it prints out all of the differences at the current level, including the statements about all common subdirectories before recursing into those subdirectories.<div class="spacer">
</div>
The message:<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 5.00ex;">
<div class="spacer">
</div>
<br/>
<b>&quot;diff %s %s %s\n&quot;, &lt;</b><i>diff_options</i><b>&gt;, &lt;</b><i>filename1</i><b>&gt;, &lt;</b><i>filename2</i><b>&gt;</b><br/>
<b></b><br/>
</div>
<div class="spacer">
</div>
does not vary by locale because it is the representation of a command, not an English sentence.</div>
<div class="section">
<h1>FUTURE DIRECTIONS</h1> None.</div>
<div class="section">
<h1>SEE ALSO</h1>  <i>cmp</i>, <i>comm</i>, <i>ed</i>, <i>find</i></div>
<div class="section">
<h1>COPYRIGHT</h1> Portions of this text are reprinted and reproduced in electronic form from IEEE Std 1003.1, 2003 Edition, Standard for Information Technology -- Portable Operating System Interface (POSIX), The Open Group Base Specifications Issue 6, Copyright (C) 2001-2003 by the Institute of Electrical and Electronics Engineers, Inc and The Open Group. In the event of any discrepancy between this version and the original IEEE and The Open Group Standard, the original IEEE and The Open Group Standard is the referee document. The original Standard can be obtained online at http://www.opengroup.org/unix/online.html .</div>
<table class="foot">
<tr>
<td class="foot-date">
2003</td>
<td class="foot-os">
IEEE/The Open Group</td>
</tr>
</table>
</div>
</body>
</html>

