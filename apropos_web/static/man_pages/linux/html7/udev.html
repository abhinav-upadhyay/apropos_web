<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/linux/style.css" type="text/css" media="all"/>
<title>
UDEV(7)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
UDEV(7)</td>
<td class="head-vol">
udev</td>
<td class="head-rtitle">
UDEV(7)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>NAME</h1> udev - Linux dynamic device management</div>
<div class="section">
<h1>DESCRIPTION</h1> udev supplies the system software with device events, manages permissions of device nodes and may create additional symlinks in the /dev directory, or renames network interfaces. The kernel usually just assigns unpredictable device names based on the order of discovery. Meaningful symlinks or network device names provide a way to reliably identify devices based on their properties or current configuration.<div class="spacer">
</div>
The udev daemon,  <b>udevd</b>(8), receives device uevents directly from the kernel whenever a device is added or removed from the system, or it changes its state. When udev receives a device event, it matches its configured set of rules against various device attributes to identify the device. Rules that match may provide additional device information to be stored in the udev database or to be used to create meaningful symlink names.<div class="spacer">
</div>
All device information udev processes is stored in the udev database and sent out to possible event subscribers. Access to all stored data and the event sources is provided by the library libudev.</div>
<div class="section">
<h1>CONFIGURATION</h1> udev configuration files are placed in /etc/udev/ and /lib/udev/. All empty lines or lines beginning with '#' are ignored.<div class="subsection">
<h2>Configuration file</h2> udev expects its main configuration file at /etc/udev/udev.conf. It consists of a set of variables allowing the user to override default udev values. The following variables can be set:<div class="spacer">
</div>
<b>udev_root</b><div style="margin-left: 4.00ex;">
Specifies where to place the device nodes in the filesystem. The default value is /dev.</div>
<div class="spacer">
</div>
<b>udev_log</b><div style="margin-left: 4.00ex;">
The logging priority. Valid values are the numerical syslog priorities or their textual representations:  <b>err</b>,  <b>info</b> and  <b>debug</b>.</div>
</div>
<div class="subsection">
<h2>Rules files</h2> The udev rules are read from the files located in the default rules directory /lib/udev/rules.d/, the custom rules directory /etc/udev/rules.d/ and the temporary rules directory /run/udev/rules.d/. All rule files are collectively sorted and processed in lexical order, regardless of the directories in which they live. However, files in /etc/udev/rules.d/ take precedence over files with the same name in /lib/udev/rules.d/; this can be used to ignore a default rules file if needed.<div class="spacer">
</div>
Rule files must have the extension .rules; other extensions are ignored.<div class="spacer">
</div>
Every line in the rules file contains at least one key-value pair. There are two kind of keys: match and assignment. If all match keys are matching against its value, the rule gets applied and the assignment keys get the specified value assigned.<div class="spacer">
</div>
A matching rule may rename a network interface, add symlinks pointing to the device node, or run a specified program as part of the event handling.<div class="spacer">
</div>
A rule consists of a comma-separated list of one or more key-value pairs. Each key has a distinct operation, depending on the used operator. Valid operators are:<div class="spacer">
</div>
<b>==</b><div style="margin-left: 4.00ex;">
Compare for equality.</div>
<div class="spacer">
</div>
<b>!=</b><div style="margin-left: 4.00ex;">
Compare for inequality.</div>
<div class="spacer">
</div>
<b>=</b><div style="margin-left: 4.00ex;">
Assign a value to a key. Keys that represent a list are reset and only this single value is assigned.</div>
<div class="spacer">
</div>
<b>+=</b><div style="margin-left: 4.00ex;">
Add the value to a key that holds a list of entries.</div>
<div class="spacer">
</div>
<b>:=</b><div style="margin-left: 4.00ex;">
Assign a value to a key finally; disallow any later changes.</div>
<div class="spacer">
</div>
The following key names can be used to match against device properties. Some of the keys also match against properties of the parent devices in sysfs, not only the device that has generated the event. If multiple keys that match a parent device are specified in a single rule, all these keys must match at one and the same parent device.<div class="spacer">
</div>
<b>ACTION</b><div style="margin-left: 4.00ex;">
Match the name of the event action.</div>
<div class="spacer">
</div>
<b>DEVPATH</b><div style="margin-left: 4.00ex;">
Match the devpath of the event device.</div>
<div class="spacer">
</div>
<b>KERNEL</b><div style="margin-left: 4.00ex;">
Match the name of the event device.</div>
<div class="spacer">
</div>
<b>NAME</b><div style="margin-left: 4.00ex;">
Match the name of the node or network interface. It can be used once the NAME key has been set in one of the preceding rules.</div>
<div class="spacer">
</div>
<b>SYMLINK</b><div style="margin-left: 4.00ex;">
Match the name of a symlink targeting the node. It can be used once a SYMLINK key has been set in one of the preceding rules. There may be multiple symlinks; only one needs to match.</div>
<div class="spacer">
</div>
<b>SUBSYSTEM</b><div style="margin-left: 4.00ex;">
Match the subsystem of the event device.</div>
<div class="spacer">
</div>
<b>DRIVER</b><div style="margin-left: 4.00ex;">
Match the driver name of the event device. Only set this key for devices which are bound to a driver at the time the event is generated.</div>
<div class="spacer">
</div>
<b>ATTR{</b><b></b><i>filename</i><b>}</b><div style="margin-left: 4.00ex;">
Match sysfs attribute values of the event device. Trailing whitespace in the attribute values is ignored unless the specified match value itself contains trailing whitespace.</div>
<div class="spacer">
</div>
<b>KERNELS</b><div style="margin-left: 4.00ex;">
Search the devpath upwards for a matching device name.</div>
<div class="spacer">
</div>
<b>SUBSYSTEMS</b><div style="margin-left: 4.00ex;">
Search the devpath upwards for a matching device subsystem name.</div>
<div class="spacer">
</div>
<b>DRIVERS</b><div style="margin-left: 4.00ex;">
Search the devpath upwards for a matching device driver name.</div>
<div class="spacer">
</div>
<b>ATTRS{</b><b></b><i>filename</i><b>}</b><div style="margin-left: 4.00ex;">
Search the devpath upwards for a device with matching sysfs attribute values. If multiple  <b>ATTRS</b> matches are specified, all of them must match on the same device. Trailing whitespace in the attribute values is ignored unless the specified match value itself contains trailing whitespace.</div>
<div class="spacer">
</div>
<b>TAGS</b><div style="margin-left: 4.00ex;">
Search the devpath upwards for a device with matching tag.</div>
<div class="spacer">
</div>
<b>ENV{</b><b></b><i>key</i><b>}</b><div style="margin-left: 4.00ex;">
Match against a device property value.</div>
<div class="spacer">
</div>
<b>TAG</b><div style="margin-left: 4.00ex;">
Match against a device tag.</div>
<div class="spacer">
</div>
<b>TEST{</b><b></b><i>octal mode mask</i><b>}</b><div style="margin-left: 4.00ex;">
Test the existence of a file. An octal mode mask can be specified if needed.</div>
<div class="spacer">
</div>
<b>PROGRAM</b><div style="margin-left: 4.00ex;">
Execute a program to determine whether there is a match; the key is true if the program returns successfully. The device properties are made available to the executed program in the environment. The program's stdout is available in the RESULT key.</div>
<div class="spacer">
</div>
<b>RESULT</b><div style="margin-left: 4.00ex;">
Match the returned string of the last PROGRAM call. This key can be used in the same or in any later rule after a PROGRAM call.</div>
<div class="spacer">
</div>
Most of the fields support shell-style pattern matching. The following pattern characters are supported:<div class="spacer">
</div>
<b>*</b><div style="margin-left: 4.00ex;">
Matches zero or more characters.</div>
<div class="spacer">
</div>
<b>?</b><div style="margin-left: 4.00ex;">
Matches any single character.</div>
<div class="spacer">
</div>
<b>[]</b><div style="margin-left: 4.00ex;">
Matches any single character specified within the brackets. For example, the pattern string 'tty[SR]' would match either 'ttyS' or 'ttyR'. Ranges are also supported via the '-' character. For example, to match on the range of all digits, the pattern [0-9] could be used. If the first character following the '[' is a '!', any characters not enclosed are matched.</div>
<div class="spacer">
</div>
The following keys can get values assigned:<div class="spacer">
</div>
<b>NAME</b><div style="margin-left: 4.00ex;">
What a network interface should be named.<div style="height: 1.00em;">
&#160;</div>
Also, as a temporary workaround, this is what a device node should be named; usually the kernel provides the defined node name or creates and removes the node before udev even receives any event. Changing the node name from the kernel's default creates inconsistencies and is not supported. If the kernel and NAME specify different names, an error is logged. udev is only expected to handle device node permissions and to create additional symlinks, not to change kernel-provided device node names. Instead of renaming a device node, SYMLINK should be used. However, symlink names must never conflict with device node names, as that would result in unpredictable behavior.</div>
<div class="spacer">
</div>
<b>SYMLINK</b><div style="margin-left: 4.00ex;">
The name of a symlink targeting the node. Every matching rule adds this value to the list of symlinks to be created. Multiple symlinks may be specified by separating the names by the space character. In case multiple devices claim the same name, the link always points to the device with the highest link_priority. If the current device goes away, the links are re-evaluated and the device with the next highest link_priority becomes the owner of the link. If no link_priority is specified, the order of the devices (and which one of them owns the link) is undefined. Also, symlink names must never conflict with the kernel's default device node names, as that would result in unpredictable behavior.</div>
<div class="spacer">
</div>
<b>OWNER, GROUP, MODE</b><div style="margin-left: 4.00ex;">
The permissions for the device node. Every specified value overwrites the compiled-in default value.</div>
<div class="spacer">
</div>
<b>ATTR{</b><b></b><i>key</i><b>}</b><div style="margin-left: 4.00ex;">
The value that should be written to a sysfs attribute of the event device.</div>
<div class="spacer">
</div>
<b>ENV{</b><b></b><i>key</i><b>}</b><div style="margin-left: 4.00ex;">
Set a device property value. Property names with a leading '.' are neither stored in the database nor exported to events or external tools (run by, say, the PROGRAM match key).</div>
<div class="spacer">
</div>
<b>TAG</b><div style="margin-left: 4.00ex;">
Attach a tag to a device. This is used to filter events for users of libudev's monitor functionality, or to enumerate a group of tagged devices. The implementation can only work efficiently if only a few tags are attached to a device. It is only meant to be used in contexts with specific device filter requirements, and not as a general-purpose flag. Excessive use might result in inefficient event handling.</div>
<div class="spacer">
</div>
<b>RUN</b><div style="margin-left: 4.00ex;">
Add a program to the list of programs to be executed for a specific device. This can only be used for very short running tasks. Running an event process for a long period of time may block all further events for this or a dependent device. Long running tasks need to be immediately detached from the event process itself.<div style="height: 1.00em;">
&#160;</div>
If no absolute path is given, the program is expected to live in the directory provided at compile-time to configure via --libexecdir (this is usually /lib/udev), otherwise the absolute path must be specified. The program name and following arguments are separated by spaces. Single quotes can be used to specify arguments with spaces.</div>
<div class="spacer">
</div>
<b>LABEL</b><div style="margin-left: 4.00ex;">
A named label to which a GOTO may jump.</div>
<div class="spacer">
</div>
<b>GOTO</b><div style="margin-left: 4.00ex;">
Jumps to the next LABEL with a matching name.</div>
<div class="spacer">
</div>
<b>IMPORT{</b><b></b><i>type</i><b>}</b><div style="margin-left: 4.00ex;">
Import a set of variables as device properties, depending on  <i>type</i>:<div class="spacer">
</div>
<b>program</b><div style="margin-left: 4.00ex;">
Execute an external program specified as the assigned value and import its output, which must be in environment key format. Path specification, command/argument separation, and quoting work like in  <b>RUN</b>.</div>
<div class="spacer">
</div>
<b>file</b><div style="margin-left: 4.00ex;">
Import a text file specified as the assigned value, the content of which must be in environment key format.</div>
<div class="spacer">
</div>
<b>db</b><div style="margin-left: 4.00ex;">
Import a single property specified as the assigned value from the current device database. This works only if the database is already populated by an earlier event.</div>
<div class="spacer">
</div>
<b>cmdline</b><div style="margin-left: 4.00ex;">
Import a single property from the kernel command line. For simple flags the value of the property is set to '1'.</div>
<div class="spacer">
</div>
<b>parent</b><div style="margin-left: 4.00ex;">
Import the stored keys from the parent device by reading the database entry of the parent device. The value assigned to  <b>IMPORT{parent}</b> is used as a filter of key names to import (with the same shell-style pattern matching used for comparisons).</div>
</div>
<div class="spacer">
</div>
<b>WAIT_FOR</b><div style="margin-left: 4.00ex;">
Wait for a file to become available or until a timeout of 10 seconds expires. The path is relative to the sysfs device; if no path is specified, this waits for an attribute to appear.</div>
<div class="spacer">
</div>
<b>OPTIONS</b><div style="margin-left: 4.00ex;">
Rule and device options:<div class="spacer">
</div>
<b>link_priority=</b><b></b><i>value</i><div style="margin-left: 4.00ex;">
Specify the priority of the created symlinks. Devices with higher priorities overwrite existing symlinks of other devices. The default is 0.</div>
<div class="spacer">
</div>
<b>event_timeout=</b><div style="margin-left: 4.00ex;">
Number of seconds an event waits for operations to finish before giving up and terminating itself.</div>
<div class="spacer">
</div>
<b>string_escape=</b><b></b><i>none|replace</i><div style="margin-left: 4.00ex;">
Usually control and other possibly unsafe characters are replaced in strings used for device naming. The mode of replacement can be specified with this option.</div>
<div class="spacer">
</div>
<b>static_node=</b><div style="margin-left: 4.00ex;">
Apply the permissions specified in this rule to the static device node with the specified name. Static device nodes might be provided by kernel modules or copied from /lib/udev/devices. These nodes might not have a corresponding kernel device at the time udevd is started; they can trigger automatic kernel module loading.</div>
<div class="spacer">
</div>
<b>watch</b><div style="margin-left: 4.00ex;">
Watch the device node with inotify; when the node is closed after being opened for writing, a change uevent is synthesized.</div>
<div class="spacer">
</div>
<b>nowatch</b><div style="margin-left: 4.00ex;">
Disable the watching of a device node with inotify.</div>
</div>
<div class="spacer">
</div>
The  <b>NAME</b>,  <b>SYMLINK</b>,  <b>PROGRAM</b>,  <b>OWNER</b>,  <b>GROUP</b>,  <b>MODE</b> and  <b>RUN</b> fields support simple string substitutions. The  <b>RUN</b> substitutions are performed after all rules have been processed, right before the program is executed, allowing for the use of device properties set by earlier matching rules. For all other fields, substitutions are performed while the individual rule is being processed. The available substitutions are:<div class="spacer">
</div>
<b>$kernel</b>, <b>%k</b><div style="margin-left: 4.00ex;">
The kernel name for this device.</div>
<div class="spacer">
</div>
<b>$number</b>, <b>%n</b><div style="margin-left: 4.00ex;">
The kernel number for this device. For example, 'sda3' has kernel number of '3'</div>
<div class="spacer">
</div>
<b>$devpath</b>, <b>%p</b><div style="margin-left: 4.00ex;">
The devpath of the device.</div>
<div class="spacer">
</div>
<b>$id</b>, <b>%b</b><div style="margin-left: 4.00ex;">
The name of the device matched while searching the devpath upwards for  <b>SUBSYSTEMS</b>,  <b>KERNELS</b>,  <b>DRIVERS</b> and  <b>ATTRS</b>.</div>
<div class="spacer">
</div>
<b>$driver</b><div style="margin-left: 4.00ex;">
The driver name of the device matched while searching the devpath upwards for  <b>SUBSYSTEMS</b>,  <b>KERNELS</b>,  <b>DRIVERS</b> and  <b>ATTRS</b>.</div>
<div class="spacer">
</div>
<b>$attr{</b><b></b><i>file</i><b>}</b>, <b>%s{</b><b></b><i>file</i><b>}</b><div style="margin-left: 4.00ex;">
The value of a sysfs attribute found at the device where all keys of the rule have matched. If the matching device does not have such an attribute, and a previous KERNELS, SUBSYSTEMS, DRIVERS, or ATTRS test selected a parent device, then the attribute from that parent device is used.<div style="height: 1.00em;">
&#160;</div>
If the attribute is a symlink, the last element of the symlink target is returned as the value.</div>
<div class="spacer">
</div>
<b>$env{</b><b></b><i>key</i><b>}</b>, <b>%E{</b><b></b><i>key</i><b>}</b><div style="margin-left: 4.00ex;">
A device property value.</div>
<div class="spacer">
</div>
<b>$major</b>, <b>%M</b><div style="margin-left: 4.00ex;">
The kernel major number for the device.</div>
<div class="spacer">
</div>
<b>$minor</b>, <b>%m</b><div style="margin-left: 4.00ex;">
The kernel minor number for the device.</div>
<div class="spacer">
</div>
<b>$result</b>, <b>%c</b><div style="margin-left: 4.00ex;">
The string returned by the external program requested with PROGRAM. A single part of the string, separated by a space character, may be selected by specifying the part number as an attribute:  <b>%c{N}</b>. If the number is followed by the '+' character, this part plus all remaining parts of the result string are substituted:  <b>%c{N+}</b></div>
<div class="spacer">
</div>
<b>$parent</b>, <b>%P</b><div style="margin-left: 4.00ex;">
The node name of the parent device.</div>
<div class="spacer">
</div>
<b>$name</b><div style="margin-left: 4.00ex;">
The current name of the device node. If not changed by a rule, it is the name of the kernel device.</div>
<div class="spacer">
</div>
<b>$links</b><div style="margin-left: 4.00ex;">
A space-separated list of the current symlinks. The value is only set during a remove event or if an earlier rule assigned a value.</div>
<div class="spacer">
</div>
<b>$root</b>, <b>%r</b><div style="margin-left: 4.00ex;">
The udev_root value.</div>
<div class="spacer">
</div>
<b>$sys</b>, <b>%S</b><div style="margin-left: 4.00ex;">
The sysfs mount point.</div>
<div class="spacer">
</div>
<b>$tempnode</b>, <b>%N</b><div style="margin-left: 4.00ex;">
The name of a temporary device node created to provide access to the device from a external program before the real node is created.</div>
<div class="spacer">
</div>
<b>%%</b><div style="margin-left: 4.00ex;">
The '%' character itself.</div>
<div class="spacer">
</div>
<b>$$</b><div style="margin-left: 4.00ex;">
The '$' character itself.</div>
</div>
</div>
<div class="section">
<h1>AUTHOR</h1> Written by Greg Kroah-Hartman greg@kroah.com and Kay Sievers kay.sievers@vrfy.org. With much help from Dan Stekloff and many others.</div>
<div class="section">
<h1>SEE ALSO</h1>  <b>udevd</b>(8),  <b>udevadm</b>(8)</div>
<table class="foot">
<tr>
<td class="foot-date">
11/07/2011</td>
<td class="foot-os">
udev</td>
</tr>
</table>
</div>
</body>
</html>

