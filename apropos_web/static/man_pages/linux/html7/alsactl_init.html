<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/linux/style.css" type="text/css" media="all"/>
<title>
ALSACTL_INIT(7)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
ALSACTL_INIT(7)</td>
<td class="head-vol">
alsactl init</td>
<td class="head-rtitle">
ALSACTL_INIT(7)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>NAME</h1> alsactl_init - alsa control management - initialization</div>
<div class="section">
<h1>DESCRIPTION</h1> &quot;alsactl init&quot; provides soundcard specific initialization.</div>
<div class="section">
<h1>CONFIGURATION</h1> All &quot;alsactl init&quot; configuration files are placed in /usr/share/alsa/init/ directory. The top level configuration file is /usr/share/alsa/init/00main. The default top-level file can be also specified using -i or --initfile parameter for the alsactl tool. Every file consists of a set of lines of text. All empty lines or lines beginning with '#' will be ignored.<div class="subsection">
<h2>Rules files</h2> The &quot;alsactl init&quot; rules are read from the files located in the /usr/share/alsa/init/*. The top level configuration file is /usr/share/alsa/init/00main. Every line in the rules file contains at least one key value pair. There are two kind of keys, match and assignment keys. If all match keys are matching against its value, the rule gets applied and the assign keys get the specified value assigned.<div class="spacer">
</div>
A rule may consists of a list of one or more key value pairs separated by a comma. Each key has a distinct operation, depending on the used operator. Valid operators are:<div class="spacer">
</div>
<b>==</b><div style="margin-left: 4.00ex;">
Compare for equality.</div>
<div class="spacer">
</div>
<b>!=</b><div style="margin-left: 4.00ex;">
Compare for non-equality.</div>
<div class="spacer">
</div>
<b>=</b><div style="margin-left: 4.00ex;">
Assign a value to a key. Keys that represent a list, are reset and only this single value is assigned.</div>
<div class="spacer">
</div>
<b>+=</b><div style="margin-left: 4.00ex;">
Add the value to a key that holds a list of entries.</div>
<div class="spacer">
</div>
<b>:=</b><div style="margin-left: 4.00ex;">
Assign a value to a key finally; disallow any later changes, which may be used to prevent changes by any later rules.</div>
<div class="spacer">
</div>
The following key names can be used to match against device properties:<div class="spacer">
</div>
<b>CARDINDEX</b><div style="margin-left: 4.00ex;">
Match the card index of the ALSA driver.</div>
<div class="spacer">
</div>
<b>CTL{</b><b></b><i>attribute</i><b>}</b><div style="margin-left: 4.00ex;">
Set or test universal control attribute. Possible attributes:<div class="spacer">
</div>
<b>numid</b><div style="margin-left: 4.00ex;">
Numeric control identification.</div>
<div class="spacer">
</div>
<b>iface</b>, <b>interface</b><div style="margin-left: 4.00ex;">
Control interface name (CARD, HWEDEP, MIXER, PCM, RAWMIDI, TIMER, SEQUENCER)</div>
<div class="spacer">
</div>
<b>subdev</b>, <b>subdevice</b><div style="margin-left: 4.00ex;">
Subdevice number.</div>
<div class="spacer">
</div>
<b>name</b><div style="margin-left: 4.00ex;">
Control name</div>
<div class="spacer">
</div>
<b>index</b><div style="margin-left: 4.00ex;">
Control index</div>
<div class="spacer">
</div>
<b>type</b><div style="margin-left: 4.00ex;">
Control type (BOOLEAN, INTEGER, INTEGER64, ENUMERATED, BYTES, IEC958)</div>
<div class="spacer">
</div>
<b>attr</b>, <b>attribute</b><div style="margin-left: 4.00ex;">
Attributes (stored in a string - use match characters * and ?):<div class="spacer">
</div>
<b>r</b><div style="margin-left: 4.00ex;">
control is readable</div>
<div class="spacer">
</div>
<b>w</b><div style="margin-left: 4.00ex;">
control is writable</div>
<div class="spacer">
</div>
<b>v</b><div style="margin-left: 4.00ex;">
control is volatile</div>
<div class="spacer">
</div>
<b>i</b><div style="margin-left: 4.00ex;">
control is inactive</div>
<div class="spacer">
</div>
<b>l</b><div style="margin-left: 4.00ex;">
control is locked</div>
<div class="spacer">
</div>
<b>R</b><div style="margin-left: 4.00ex;">
control is TLV readable</div>
<div class="spacer">
</div>
<b>W</b><div style="margin-left: 4.00ex;">
control is TLV writable</div>
<div class="spacer">
</div>
<b>C</b><div style="margin-left: 4.00ex;">
control is TLV commandable</div>
<div class="spacer">
</div>
<b>o</b><div style="margin-left: 4.00ex;">
process is owner of this control</div>
<div class="spacer">
</div>
<b>u</b><div style="margin-left: 4.00ex;">
control created in user space</div>
</div>
<div class="spacer">
</div>
<b>owner</b><div style="margin-left: 4.00ex;">
Control owner process PID number</div>
<div class="spacer">
</div>
<b>count</b><div style="margin-left: 4.00ex;">
Control count of values</div>
<div class="spacer">
</div>
<b>min</b><div style="margin-left: 4.00ex;">
Value range - minimum value</div>
<div class="spacer">
</div>
<b>max</b><div style="margin-left: 4.00ex;">
Value range - maximum value</div>
<div class="spacer">
</div>
<b>step</b><div style="margin-left: 4.00ex;">
Value range - step value</div>
<div class="spacer">
</div>
<b>dBmin</b><div style="margin-left: 4.00ex;">
Value range - minimum dB value</div>
<div class="spacer">
</div>
<b>dBmax</b><div style="margin-left: 4.00ex;">
Value range - maximum dB value</div>
<div class="spacer">
</div>
<b>items</b><div style="margin-left: 4.00ex;">
Enumerated value - number of text items</div>
<div class="spacer">
</div>
<b>enums</b><div style="margin-left: 4.00ex;">
Enumerated value - list of text names stored between '|' character</div>
<div class="spacer">
</div>
<b>value</b><div style="margin-left: 4.00ex;">
Value of control stored to a string delimited by comma (,).</div>
<div class="spacer">
</div>
<b>do_search</b><div style="margin-left: 4.00ex;">
Search for a control. Value &quot;1&quot; is returned if a control was found. The CTL{name} key might contain match characters * and ?. An control index might be specified as first argument starting from zero (e.g. CTL{do_search 2}=&quot;1&quot;).</div>
<div class="spacer">
</div>
<b>do_count</b><div style="margin-left: 4.00ex;">
Search for a controls and return total count of matched ones. The CTL{name} key might contain match characters * and ?.</div>
</div>
<div class="spacer">
</div>
<b>CONFIG{sysfs_device}</b><div style="margin-left: 4.00ex;">
The relative path to sysfs subsystem specifying the root directory of a soundcard device. Usually, it should be set to &quot;/class/sound/card$cardinfo{card}/device&quot;.</div>
<div class="spacer">
</div>
<b>ATTR{</b><b></b><i>filename</i><b>}</b><div style="margin-left: 4.00ex;">
Match sysfs attribute values of the soundcard device. The relative path to sysfs tree must be defined by CONFIG{sysfs_device} key. Trailing whitespace in the attribute values is ignored, if the specified match value does not contain trailing whitespace itself. Depending on the type of operator, this key is also used to set the value of a sysfs attribute.</div>
<div class="spacer">
</div>
<b>ENV{</b><b></b><i>key</i><b>}</b><div style="margin-left: 4.00ex;">
Match against the value of an environment variable. Up to five  <b>ENV</b> keys can be specified per rule. Depending on the type of operator, this key is also used to export a variable to the environment.</div>
<div class="spacer">
</div>
<b>PROGRAM</b><div style="margin-left: 4.00ex;">
Execute external program. The key is true, if the program returns without exit code zero. The whole event environment is available to the executed program. The program's output printed to stdout is available for the RESULT key.<div style="height: 1.00em;">
&#160;</div>
Several buildin commands are available:<div class="spacer">
</div>
<b>__ctl_search</b><div style="margin-left: 4.00ex;">
Search for a control. The CTL{name} key might contain match characters * and ?. An control index might be specified as first argument starting from zero (e.g. PROGRAM=&quot;__ctl_search 2&quot;).</div>
<div class="spacer">
</div>
<b>__ctl_count</b><div style="margin-left: 4.00ex;">
Search for a controls and return total count of matched ones. The CTL{name} key might contain match characters * and ?.</div>
</div>
<div class="spacer">
</div>
<b>RESULT</b><div style="margin-left: 4.00ex;">
Match the returned string of the last PROGRAM call. This key can be used in the same or in any later rule after a PROGRAM call.</div>
<div class="spacer">
</div>
Most of the fields support a shell style pattern matching. The following pattern characters are supported:<div class="spacer">
</div>
<b>*</b><div style="margin-left: 4.00ex;">
Matches zero, or any number of characters.</div>
<div class="spacer">
</div>
<b>?</b><div style="margin-left: 4.00ex;">
Matches any single character.</div>
<div class="spacer">
</div>
<b>[]</b><div style="margin-left: 4.00ex;">
Matches any single character specified within the brackets. For example, the pattern string 'tty[SR]' would match either 'ttyS' or 'ttyR'. Ranges are also supported within this match with the '-' character. For example, to match on the range of all digits, the pattern [0-9] would be used. If the first character following the '[' is a '!', any characters not enclosed are matched.</div>
<div class="spacer">
</div>
The following keys can get values assigned:<div class="spacer">
</div>
<b>CTL{numid}</b>, <b>CTL{iface}</b>, <b>CTL{device}</b>, <b>CTL{subdev}</b>, <b>CTL{name}</b>, <b>CTL{index}</b>,<div style="margin-left: 4.00ex;">
Select universal control element.</div>
<div class="spacer">
</div>
<b>CTL{value}</b><div style="margin-left: 4.00ex;">
Value is set (written) also to soundcard's control device and RESULT key is set to errno code. The result of set operation is always true (it means continue with next key on line).</div>
<div class="spacer">
</div>
<b>CTL{values}</b><div style="margin-left: 4.00ex;">
Value is set (written) also to soundcard's control device (all control values are set to specified value) and RESULT key is set to errno code. The result of set operation is always true (it means continue with next key on line).</div>
<div class="spacer">
</div>
<b>CTL{write}</b><div style="margin-left: 4.00ex;">
Value is set (written) also to soundcard's control device (all control values are set to specified value). The result of set operation is true when operation succeed (it means continue with next key on line).</div>
<div class="spacer">
</div>
<b>ENV{</b><b></b><i>key</i><b>}</b><div style="margin-left: 4.00ex;">
Export a variable to the environment. Depending on the type of operator, this key is also to match against an environment variable.</div>
<div class="spacer">
</div>
<b>RESULT</b><div style="margin-left: 4.00ex;">
Set RESULT variable. Note that PROGRAM also sets this variable, but setting this variable manually might be useful to change code execution order (included files).</div>
<div class="spacer">
</div>
<b>LABEL</b><div style="margin-left: 4.00ex;">
Named label where a GOTO can jump to.</div>
<div class="spacer">
</div>
<b>GOTO</b><div style="margin-left: 4.00ex;">
Jumps to the next LABEL with a matching name. The goto cannot jump backward.</div>
<div class="spacer">
</div>
<b>INCLUDE</b><div style="margin-left: 4.00ex;">
Include specified filename or all files in specified directory</div>
<div class="spacer">
</div>
<b>ACCESS</b><div style="margin-left: 4.00ex;">
Check if specified file or directory exists</div>
<div class="spacer">
</div>
<b>CONFIG{sysfs_device}</b><div style="margin-left: 4.00ex;">
The relative path to sysfs subsystem specifying the root directory of a soundcard device. Usually, it should be set to &quot;/class/sound/card$cardinfo{card}/device&quot;.</div>
<div class="spacer">
</div>
<b>PRINT</b><div style="margin-left: 4.00ex;">
PRINT value to stdout.</div>
<div class="spacer">
</div>
<b>ERROR</b><div style="margin-left: 4.00ex;">
PRINT value to stderr.</div>
<div class="spacer">
</div>
<b>EXIT</b><div style="margin-left: 4.00ex;">
Exit immediately and set program exit code to value (should be integer). If value is &quot;return&quot; string, parser leaves current included file and returns to parent configuration file.</div>
<div class="spacer">
</div>
The  <b>PROGRAM</b>,  <b>RESULT</b>,  <b>CTL{value}</b>,  <b>PRINT</b>,  <b>ERROR</b>,  <b>EXIT</b>,  <b>CONFIG{}</b> fields support simple printf-like string substitutions. It allows the use of the complete environment set by earlier matching rules. For all other fields, substitutions are applied while the individual rule is being processed. The available substitutions are:<div class="spacer">
</div>
<b>$cardinfo{</b><b></b><i>attribute</i><b>}</b>, <b>%i{</b><b></b><i>attribute</i><b>}</b><div style="margin-left: 4.00ex;">
See CARDINFO{} for more details.</div>
<div class="spacer">
</div>
<b>$ctl{</b><b></b><i>attribute</i><b>}</b>, <b>%C{</b><b></b><i>attribute</i><b>}</b><div style="margin-left: 4.00ex;">
See CTL{} for more details.</div>
<div class="spacer">
</div>
<b>$attr{</b><b></b><i>file</i><b>}</b>, <b>%s{</b><b></b><i>file</i><b>}</b><div style="margin-left: 4.00ex;">
The value of a sysfs attribute found at the device, where all keys of the rule have matched. If the attribute is a symlink, the last element of the symlink target is returned as the value.</div>
<div class="spacer">
</div>
<b>$env{</b><b></b><i>key</i><b>}</b>, <b>%E{</b><b></b><i>key</i><b>}</b><div style="margin-left: 4.00ex;">
The value of an environment variable.</div>
<div class="spacer">
</div>
<b>$result</b>, <b>%c</b><div style="margin-left: 4.00ex;">
The string returned by the external program requested with PROGRAM. A single part of the string, separated by a space character may be selected by specifying the part number as an attribute:  <b>%c{N}</b>. If the number is followed by the '+' char this part plus all remaining parts of the result string are substituted:  <b>%c{N+}</b></div>
<div class="spacer">
</div>
<b>$sysfsroot</b>, <b>%r</b><div style="margin-left: 4.00ex;">
Root directory where sysfs file-system is mounted. Ususally, this value is just &quot;/sys&quot;.</div>
<div class="spacer">
</div>
<b>$config{</b><b></b><i>key</i><b>}</b>, <b>%g{</b><b></b><i>key</i><b>}</b><div style="margin-left: 4.00ex;">
The value of a configuration variable. See CONFIG{} for more details.</div>
<div class="spacer">
</div>
<b>%%</b><div style="margin-left: 4.00ex;">
The '%' character itself.</div>
<div class="spacer">
</div>
<b>$$</b><div style="margin-left: 4.00ex;">
The '$' character itself.</div>
<div class="spacer">
</div>
The count of characters to be substituted may be limited by specifying the format length value. For example, '%3s{file}' will only insert the first three characters of the sysfs attribute</div>
</div>
<div class="section">
<h1>AUTHOR</h1> Written by Jaroslav Kysela perex@perex.cz<div class="spacer">
</div>
Some portions are written by Greg Kroah-Hartman greg@kroah.com and Kay Sievers kay.sievers@vrfy.org.</div>
<div class="section">
<h1>SEE ALSO</h1>  <b>alsactl</b>(1)</div>
<table class="foot">
<tr>
<td class="foot-date">
July 2008</td>
<td class="foot-os">
alsactl</td>
</tr>
</table>
</div>
</body>
</html>

