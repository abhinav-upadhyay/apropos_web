<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/linux/style.css" type="text/css" media="all"/>
<title>
PERF-SCRIPT(1)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
PERF-SCRIPT(1)</td>
<td class="head-vol">
perf Manual</td>
<td class="head-rtitle">
PERF-SCRIPT(1)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>NAME</h1> perf-script - Read perf.data (created by perf record) and display trace output</div>
<div class="section">
<h1>SYNOPSIS</h1><br/>
<i>perf script</i> [&lt;options&gt;]<br/>
<i>perf script</i> [&lt;options&gt;] record &lt;script&gt; [&lt;record-options&gt;] &lt;command&gt;<br/>
<i>perf script</i> [&lt;options&gt;] report &lt;script&gt; [script-args]<br/>
<i>perf script</i> [&lt;options&gt;] &lt;script&gt; &lt;required-script-args&gt; [&lt;record-options&gt;] &lt;command&gt;<br/>
<i>perf script</i> [&lt;options&gt;] &lt;top-script&gt; [script-args]<br/>
</div>
<div class="section">
<h1>DESCRIPTION</h1> This command reads the input file and displays the trace recorded.<div style="height: 1.00em;">
&#160;</div>
There are several variants of perf script:<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
'perf script' to see a detailed trace of the workload that was<br/>
recorded.<br/>
</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
You can also run a set of pre-canned scripts that aggregate and<br/>
summarize the raw trace data in various ways (the list of scripts is<br/>
available via 'perf script -l').  The following variants allow you to<br/>
record and run those scripts:<br/>
</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
'perf script record &lt;script&gt; &lt;command&gt;' to record the events required<br/>
for 'perf script report'.  &lt;script&gt; is the name displayed in the<br/>
output of 'perf script --list' i.e. the actual script name minus any<br/>
language extension.  If &lt;command&gt; is not specified, the events are<br/>
recorded using the -a (system-wide) 'perf record' option.<br/>
</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
'perf script report &lt;script&gt; [args]' to run and display the results<br/>
of &lt;script&gt;.  &lt;script&gt; is the name displayed in the output of 'perf<br/>
trace --list' i.e. the actual script name minus any language<br/>
extension.  The perf.data output from a previous run of 'perf script<br/>
record &lt;script&gt;' is used and should be present for this command to<br/>
succeed.  [args] refers to the (mainly optional) args expected by<br/>
the script.<br/>
</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
'perf script &lt;script&gt; &lt;required-script-args&gt; &lt;command&gt;' to both<br/>
record the events required for &lt;script&gt; and to run the &lt;script&gt;<br/>
using 'live-mode' i.e. without writing anything to disk.  &lt;script&gt;<br/>
is the name displayed in the output of 'perf script --list' i.e. the<br/>
actual script name minus any language extension.  If &lt;command&gt; is<br/>
not specified, the events are recorded using the -a (system-wide)<br/>
'perf record' option.  If &lt;script&gt; has any required args, they<br/>
should be specified before &lt;command&gt;.  This mode doesn't allow for<br/>
optional script args to be specified; if optional script args are<br/>
desired, they can be specified using separate 'perf script record'<br/>
and 'perf script report' commands, with the stdout of the record step<br/>
piped to the stdin of the report script, using the '-o -' and '-i -'<br/>
options of the corresponding commands.<br/>
</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
'perf script &lt;top-script&gt;' to both record the events required for<br/>
&lt;top-script&gt; and to run the &lt;top-script&gt; using 'live-mode'<br/>
i.e. without writing anything to disk.  &lt;top-script&gt; is the name<br/>
displayed in the output of 'perf script --list' i.e. the actual<br/>
script name minus any language extension; a &lt;top-script&gt; is defined<br/>
as any script name ending with the string 'top'.<br/>
</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
[&lt;record-options&gt;] can be passed to the record steps of 'perf script<br/>
record' and 'live-mode' variants; this isn't possible however for<br/>
&lt;top-script&gt; 'live-mode' or 'perf script report' variants.<br/>
</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
See the 'SEE ALSO' section for links to language-specific<br/>
information on how to write and run your own trace scripts.<br/>
</div>
</div>
<div class="section">
<h1>OPTIONS</h1> &lt;command&gt;...<div style="margin-left: 4.00ex;">
Any command you can specify in a shell.</div>
<div class="spacer">
</div>
-D, --dump-raw-script=<div style="margin-left: 4.00ex;">
Display verbose dump of the trace data.</div>
<div class="spacer">
</div>
-L, --Latency=<div style="margin-left: 4.00ex;">
Show latency attributes (irqs/preemption disabled, etc).</div>
<div class="spacer">
</div>
-l, --list=<div style="margin-left: 4.00ex;">
Display a list of available trace scripts.</div>
<div class="spacer">
</div>
-s [<i>lang</i>], --script=<div style="margin-left: 4.00ex;">
Process trace data with the given script ([lang]:script[.ext]). If the string  <i>lang</i> is specified in place of a script name, a list of supported languages will be displayed instead.</div>
<div class="spacer">
</div>
-g, --gen-script=<div style="margin-left: 4.00ex;">
Generate perf-script.[ext] starter script for given language, using current perf.data.</div>
<div class="spacer">
</div>
-a<div style="margin-left: 4.00ex;">
Force system-wide collection. Scripts run without a &lt;command&gt; normally use -a by default, while scripts run with a &lt;command&gt; normally don&#8217;t - this option allows the latter to be run in system-wide mode.</div>
<div class="spacer">
</div>
-i, --input=<div style="margin-left: 4.00ex;">
Input file name.</div>
<div class="spacer">
</div>
-d, --debug-mode<div style="margin-left: 4.00ex;">
Do various checks like samples ordering and lost events.</div>
<div class="spacer">
</div>
-f, --fields<div style="margin-left: 4.00ex;">
Comma separated list of fields to print. Options are: comm, tid, pid, time, cpu, event, trace, ip, sym, dso, addr. Field list can be prepended with the type, trace, sw or hw, to indicate to which event type the field list applies. e.g., -f sw:comm,tid,time,ip,sym and -f trace:time,cpu,trace<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
perf script -f &lt;fields&gt;<br/>
</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
is equivalent to:<br/>
</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
perf script -f trace:&lt;fields&gt; -f sw:&lt;fields&gt; -f hw:&lt;fields&gt;<br/>
</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
i.e., the specified fields apply to all event types if the type string<br/>
is not given.<br/>
</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
The arguments are processed in the order received. A later usage can<br/>
reset a prior request. e.g.:<br/>
</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
-f trace: -f comm,tid,time,ip,sym<br/>
</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
The first -f suppresses trace events (field list is &quot;&quot;), but then the<br/>
second invocation sets the fields to comm,tid,time,ip,sym. In this case a<br/>
warning is given to the user:<br/>
</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
&quot;Overriding previous field request for all events.&quot;<br/>
</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
Alternativey, consider the order:<br/>
</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
-f comm,tid,time,ip,sym -f trace:<br/>
</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
The first -f sets the fields for all events and the second -f<br/>
suppresses trace events. The user is given a warning message about<br/>
the override, and the result of the above is that only S/W and H/W<br/>
events are displayed with the given fields.<br/>
</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
For the 'wildcard' option if a user selected field is invalid for an<br/>
event type, a message is displayed to the user that the option is<br/>
ignored for that type. For example:<br/>
</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
$ perf script -f comm,tid,trace<br/>
'trace' not valid for hardware events. Ignoring.<br/>
'trace' not valid for software events. Ignoring.<br/>
</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
Alternatively, if the type is given an invalid field is specified it<br/>
is an error. For example:<br/>
</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
perf script -v -f sw:comm,tid,trace<br/>
'trace' not valid for software events.<br/>
</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
At this point usage is displayed, and perf-script exits.<br/>
</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
Finally, a user may not set fields to none for all event types.<br/>
i.e., -f &quot;&quot; is not allowed.<br/>
</div>
</div>
<div class="spacer">
</div>
-k, --vmlinux=&lt;file&gt;<div style="margin-left: 4.00ex;">
vmlinux pathname</div>
<div class="spacer">
</div>
--kallsyms=&lt;file&gt;<div style="margin-left: 4.00ex;">
kallsyms pathname</div>
<div class="spacer">
</div>
--symfs=&lt;directory&gt;<div style="margin-left: 4.00ex;">
Look for files with symbols relative to this directory.</div>
<div class="spacer">
</div>
-G, --hide-call-graph<div style="margin-left: 4.00ex;">
When printing symbols do not display call chain.</div>
<div class="spacer">
</div>
-c, --cpu<div style="margin-left: 4.00ex;">
Only report samples for the list of CPUs provided. Multiple CPUs can be provided as a comma-separated list with no space: 0,1. Ranges of CPUs are specified with -: 0-2. Default is to report samples on all CPUs.</div>
<div class="spacer">
</div>
-I, --show-info<div style="margin-left: 4.00ex;">
Display extended information about the perf.data file. This adds information which may be very large and thus may clutter the display. It currently includes: cpu and numa topology of the host system. It can only be used with the perf script report mode.</div>
</div>
<div class="section">
<h1>SEE ALSO</h1>  <b>perf-record</b>(1), <b>perf-script-perl</b>(1), <b>perf-script-python</b>(1)</div>
<table class="foot">
<tr>
<td class="foot-date">
03/10/2016</td>
<td class="foot-os">
perf 3.2.76</td>
</tr>
</table>
</div>
</body>
</html>

