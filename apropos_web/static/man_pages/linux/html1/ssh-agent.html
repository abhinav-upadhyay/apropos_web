<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/linux/style.css" type="text/css" media="all"/>
<title>
SSH-AGENT(1)</title>
</head>
<body>
<div class="mandoc">
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">ssh-agent</b> &#8212; <span class="desc">authentication agent</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1><table class="synopsis">
<col style="width: 9.00ex;"/>
<col/>
<tbody>
<tr>
<td>
ssh-agent</td>
<td>
[<span class="opt"><b class="flag">-c</b> | <b class="flag">-s</b></span>] [<span class="opt"><b class="flag">-d</b></span>] [<span class="opt"><b class="flag">-a</b> <i class="arg">bind_address</i></span>] [<span class="opt"><b class="flag">-t</b> <i class="arg">life</i></span>] [<span class="opt"><i class="arg">command</i> [<span class="opt"><i class="arg">arg ...</i></span>]</span>]</td>
</tr>
</tbody>
</table>
<br/>
<table class="synopsis">
<col style="width: 9.00ex;"/>
<col/>
<tbody>
<tr>
<td>
ssh-agent</td>
<td>
[<span class="opt"><b class="flag">-c</b> | <b class="flag">-s</b></span>] <b class="flag">-k</b></td>
</tr>
</tbody>
</table>
</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> <b class="name">ssh-agent</b> is a program to hold private keys used for public key authentication (RSA, DSA, ECDSA). The idea is that <b class="name">ssh-agent</b> is started in the beginning of an X-session or a login session, and all other windows or programs are started as clients to the ssh-agent program. Through use of environment variables the agent can be located and automatically used for authentication when logging in to other machines using <a class="link-man" href="/man/linux/1/ssh">ssh(1)</a>.<div class="spacer">
</div>
The options are as follows:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-a</b> <i class="arg">bind_address</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Bind the agent to the <span class="unix">UNIX</span>-domain socket <i class="arg">bind_address</i>. The default is <i class="file">$TMPDIR/ssh-XXXXXXXXXX/agent.&lt;ppid&gt;</i>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-c</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Generate C-shell commands on <span class="define">stdout</span>. This is the default if <span class="env">SHELL</span> looks like it's a csh style of shell.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-d</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Debug mode. When this option is specified <b class="name">ssh-agent</b> will not fork.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-k</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Kill the current agent (given by the <span class="env">SSH_AGENT_PID</span> environment variable).</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-s</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Generate Bourne shell commands on <span class="define">stdout</span>. This is the default if <span class="env">SHELL</span> does not look like it's a csh style of shell.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-t</b> <i class="arg">life</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Set a default value for the maximum lifetime of identities added to the agent. The lifetime may be specified in seconds or in a time format specified in <a class="link-man" href="/man/linux/5/sshd_config">sshd_config(5)</a>. A lifetime specified for an identity with <a class="link-man" href="/man/linux/1/ssh-add">ssh-add(1)</a> overrides this value. Without this option the default maximum lifetime is forever.</dd>
</dl>
<div class="spacer">
</div>
If a commandline is given, this is executed as a subprocess of the agent. When the command dies, so does the agent.<div class="spacer">
</div>
The agent initially does not have any private keys. Keys are added using <a class="link-man" href="/man/linux/1/ssh-add">ssh-add(1)</a>. When executed without arguments, <a class="link-man" href="/man/linux/1/ssh-add">ssh-add(1)</a> adds the files <i class="file">~/.ssh/id_rsa</i>, <i class="file">~/.ssh/id_dsa</i>, <i class="file">~/.ssh/id_ecdsa</i> and <i class="file">~/.ssh/identity</i>. If the identity has a passphrase, <a class="link-man" href="/man/linux/1/ssh-add">ssh-add(1)</a> asks for the passphrase on the terminal if it has one or from a small X11 program if running under X11. If neither of these is the case then the authentication will fail. It then sends the identity to the agent. Several identities can be stored in the agent; the agent can automatically use any of these identities. <b class="cmd">ssh-add -l</b> displays the identities currently held by the agent.<div class="spacer">
</div>
The idea is that the agent is run in the user's local PC, laptop, or terminal. Authentication data need not be stored on any other machine, and authentication passphrases never go over the network. However, the connection to the agent is forwarded over SSH remote logins, and the user can thus use the privileges given by the identities anywhere in the network in a secure way.<div class="spacer">
</div>
There are two main ways to get an agent set up: The first is that the agent starts a new subcommand into which some environment variables are exported, eg <b class="flag">ssh-agent xterm &amp;</b>. The second is that the agent prints the needed shell commands (either <a class="link-man" href="/man/linux/1/sh">sh(1)</a> or <a class="link-man" href="/man/linux/1/csh">csh(1)</a> syntax can be generated) which can be evaluated in the calling shell, eg <b class="flag">eval `ssh-agent -s`</b> for Bourne-type shells such as <a class="link-man" href="/man/linux/1/sh">sh(1)</a> or <a class="link-man" href="/man/linux/1/ksh">ksh(1)</a> and <b class="flag">eval `ssh-agent -c`</b> for <a class="link-man" href="/man/linux/1/csh">csh(1)</a> and derivatives.<div class="spacer">
</div>
Later <a class="link-man" href="/man/linux/1/ssh">ssh(1)</a> looks at these variables and uses them to establish a connection to the agent.<div class="spacer">
</div>
The agent will never send a private key over its request channel. Instead, operations that require a private key will be performed by the agent, and the result will be returned to the requester. This way, private keys are not exposed to clients using the agent.<div class="spacer">
</div>
A <span class="unix">UNIX</span>-domain socket is created and the name of this socket is stored in the <span class="env">SSH_AUTH_SOCK</span> environment variable. The socket is made accessible only to the current user. This method is easily abused by root or another instance of the same user.<div class="spacer">
</div>
The <span class="env">SSH_AGENT_PID</span> environment variable holds the agent's process ID.<div class="spacer">
</div>
The agent exits automatically when the command given on the command line terminates.</div>
<div class="section">
<h1 id="x46494c4553">FILES</h1><dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="file">~/.ssh/identity</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Contains the protocol version 1 RSA authentication identity of the user.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="file">~/.ssh/id_dsa</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Contains the protocol version 2 DSA authentication identity of the user.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="file">~/.ssh/id_ecdsa</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Contains the protocol version 2 ECDSA authentication identity of the user.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="file">~/.ssh/id_rsa</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Contains the protocol version 2 RSA authentication identity of the user.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="file">$TMPDIR/ssh-XXXXXXXXXX/agent.&lt;ppid&gt;</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
<span class="unix">UNIX</span>-domain sockets used to contain the connection to the authentication agent. These sockets should only be readable by the owner. The sockets should get automatically removed when the agent exits.</dd>
</dl>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="/man/linux/1/ssh">ssh(1)</a>, <a class="link-man" href="/man/linux/1/ssh-add">ssh-add(1)</a>, <a class="link-man" href="/man/linux/1/ssh-keygen">ssh-keygen(1)</a>, <a class="link-man" href="/man/linux/8/sshd">sshd(8)</a></div>
<div class="section">
<h1 id="x415554484f5253">AUTHORS</h1> OpenSSH is a derivative of the original and free ssh 1.2.12 release by Tatu Ylonen. Aaron Campbell, Bob Beck, Markus Friedl, Niels Provos, Theo de Raadt and Dug Song removed many bugs, re-added newer features and created OpenSSH. Markus Friedl contributed the support for SSH protocol versions 1.5 and 2.0.</div>
</div>
</body>
</html>

