<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/linux/style.css" type="text/css" media="all"/>
<title>
PERL593DELTA(1)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
PERL593DELTA(1)</td>
<td class="head-vol">
Perl Programmers Reference Guide</td>
<td class="head-rtitle">
PERL593DELTA(1)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>NAME</h1> perl593delta - what is new for perl v5.9.3</div>
<div class="section">
<h1>DESCRIPTION</h1> This document describes differences between the 5.9.2 and the 5.9.3 development releases. See perl590delta, perl591delta and perl592delta for the differences between 5.8.0 and 5.9.2.</div>
<div class="section">
<h1>Incompatible Changes</h1><div class="subsection">
<h2>Parsing of &quot;-f _&quot;</h2> The identifier &quot;_&quot; is now forced to be a bareword after a filetest operator. This solves a number of misparsing issues when a global &quot;_&quot; subroutine is defined.</div>
<div class="subsection">
<h2>&quot;mkdir()&quot;</h2> &quot;mkdir()&quot; without arguments now defaults to $_.</div>
<div class="subsection">
<h2>Magic goto and eval</h2> The construct &quot;eval { goto &amp;foo }&quot; is now disallowed. (Note that the similar construct, but with &quot;eval(&quot;&quot;)&quot; instead, was already forbidden.)</div>
<div class="subsection">
<h2>$# has been removed</h2> The deprecated $# variable (output format for numbers) has been removed. A new warning, &quot;$# is no longer supported&quot;, has been added.</div>
<div class="subsection">
<h2>&quot;:unique&quot;</h2> The &quot;:unique&quot; attribute has been made a no-op, since its current implementation was fundamentally flawed and not threadsafe.</div>
<div class="subsection">
<h2>Scoping of the &quot;sort&quot; pragma</h2> The &quot;sort&quot; pragma is now lexically scoped. Its effect used to be global.</div>
</div>
<div class="section">
<h1>Core Enhancements</h1><div class="subsection">
<h2>The &quot;feature&quot; pragma</h2> The &quot;feature&quot; pragma is used to enable new syntax that would break Perl's backwards-compatibility with older releases of the language. It's a lexical pragma, like &quot;strict&quot; or &quot;warnings&quot;.<div class="spacer">
</div>
Currently the following new features are available: &quot;switch&quot; (adds a switch statement), &quot;~~&quot; (adds a Perl 6-like smart match operator), &quot;say&quot; (adds a &quot;say&quot; built-in function), and &quot;err&quot; (adds an &quot;err&quot; keyword). Those features are described below.<div class="spacer">
</div>
Note that &quot;err&quot; low-precedence defined-or operator used to be enabled by default (although as a weak keyword, meaning that any function would override it). It's now only recognized when explicitly turned on (and is then a regular keyword).<div class="spacer">
</div>
Those features, and the &quot;feature&quot; pragma itself, have been contributed by Robin Houston.</div>
<div class="subsection">
<h2>Switch and Smart Match operator</h2> Perl 5 now has a switch statement. It's available when &quot;use feature 'switch'&quot; is in effect. This feature introduces three new keywords, &quot;given&quot;, &quot;when&quot;, and &quot;default&quot;:<div class="spacer">
</div>
<br/>
    given ($foo) {<br/>
        when (/^abc/) { $abc = 1; }<br/>
        when (/^def/) { $def = 1; }<br/>
        when (/^xyz/) { $xyz = 1; }<br/>
        default { $nothing = 1; }<br/>
    }<br/>
<div class="spacer">
</div>
A more complete description of how Perl matches the switch variable against the &quot;when&quot; conditions is given in &quot;Switch statements&quot; in perlsyn.<div class="spacer">
</div>
This kind of match is called <i>smart match</i>, and it's also possible to use it outside of switch statements, via the new &quot;~~&quot; operator (enabled via the &quot;use feature '~~'&quot; directive). See &quot;Smart matching in detail&quot; in perlsyn.</div>
<div class="subsection">
<h2>&quot;say()&quot;</h2>  <i>say()</i> is a new built-in, only available when &quot;use feature 'say'&quot; is in effect, that is similar to  <i>print()</i>, but that implicitly appends a newline to the printed string. See &quot;say&quot; in perlfunc.</div>
<div class="subsection">
<h2>&quot;CLONE_SKIP()&quot;</h2> Perl has now support for the &quot;CLONE_SKIP&quot; special subroutine. Like &quot;CLONE&quot;, &quot;CLONE_SKIP&quot; is called once per package; however, it is called just before cloning starts, and in the context of the parent thread. If it returns a true value, then no objects of that class will be cloned. See perlmod for details. (Contributed by Dave Mitchell.)</div>
<div class="subsection">
<h2>&quot;${^CHILD_ERROR_NATIVE}&quot;</h2> A new internal variable, &quot;${^CHILD_ERROR_NATIVE}&quot;, gives the native status returned by the last pipe close, backtick command, successful call to  <i>wait()</i> or <i>waitpid()</i>, or from the <i>system()</i> operator. See perlrun for details. (Contributed by Gisle Aas.)</div>
<div class="subsection">
<h2>Assertions</h2> The support for assertions, introduced in perl 5.9.0, has been improved. The syntax for the &quot;-A&quot; command-line switch has changed; it now accepts an optional module name, defaulting to &quot;assertions::activate&quot;. See assertions and perlrun. (Contributed by Salvador Fandin~o Garcia.)</div>
<div class="subsection">
<h2>Unicode Character Database 4.1.0</h2> The copy of the Unicode Character Database included in Perl 5.9 has been updated to 4.1.0.</div>
<div class="subsection">
<h2>&quot;no VERSION&quot;</h2> You can now use &quot;no&quot; followed by a version number to specify that you want to use a version of perl older than the specified one.</div>
<div class="subsection">
<h2>Recursive sort subs</h2> You can now use recursive subroutines with  <i>sort()</i>, thanks to Robin Houston.</div>
<div class="subsection">
<h2>Effect of pragmas in eval</h2> The compile-time value of the &quot;%^H&quot; hint variable can now propagate into eval(&quot;&quot;)uated code. This makes it more useful to implement lexical pragmas.<div class="spacer">
</div>
As a side-effect of this, the overloaded-ness of constants now propagates into eval(&quot;&quot;).</div>
<div class="subsection">
<h2>New <b>-E</b> command-line switch</h2>  <b>-E</b> is equivalent to <b>-e</b>, but it implicitly enables all optional features (like &quot;use feature &quot;:5.10&quot;&quot;).</div>
<div class="subsection">
<h2>&quot;chdir&quot;, &quot;chmod&quot; and &quot;chown&quot; on filehandles</h2> &quot;chdir&quot;, &quot;chmod&quot; and &quot;chown&quot; can now work on filehandles as well as filenames, if the system supports respectively &quot;fchdir&quot;, &quot;fchmod&quot; and &quot;fchown&quot;, thanks to a patch provided by Gisle Aas.</div>
<div class="subsection">
<h2>OS groups</h2> $( and $) now return groups in the order where the OS returns them, thanks to Gisle Aas. This wasn't previously the case.</div>
</div>
<div class="section">
<h1>Modules and Pragmata</h1><div class="subsection">
<h2>New Core Modules</h2><dl>
<dt>
&#8226;</dt>
<dd>
A new pragma, &quot;feature&quot;, has been added; see above in &quot;Core Enhancements&quot;.</dd>
</dl>
<dl>
<dt>
&#8226;</dt>
<dd>
&quot;assertions::compat&quot;, also available on CPAN, allows the use of assertions on perl versions prior to 5.9.0 (that is the first one to natively support them).</dd>
</dl>
<dl>
<dt>
&#8226;</dt>
<dd>
&quot;Math::BigInt::FastCalc&quot; is an XS-enabled, and thus faster, version of &quot;Math::BigInt::Calc&quot;.</dd>
</dl>
<dl>
<dt>
&#8226;</dt>
<dd>
&quot;Compress::Zlib&quot; is an interface to the zlib compression library. It comes with a bundled version of zlib, so having a working zlib is not a prerequisite to install it. It's used by &quot;Archive::Tar&quot; (see below).</dd>
</dl>
<dl>
<dt>
&#8226;</dt>
<dd>
&quot;IO::Zlib&quot; is an &quot;IO::&quot;-style interface to &quot;Compress::Zlib&quot;.</dd>
</dl>
<dl>
<dt>
&#8226;</dt>
<dd>
&quot;Archive::Tar&quot; is a module to manipulate &quot;tar&quot; archives.</dd>
</dl>
<dl>
<dt>
&#8226;</dt>
<dd>
&quot;Digest::SHA&quot; is a module used to calculate many types of SHA digests, has been included for SHA support in the CPAN module.</dd>
</dl>
<dl>
<dt>
&#8226;</dt>
<dd>
&quot;ExtUtils::CBuilder&quot; and &quot;ExtUtils::ParseXS&quot; have been added.</dd>
</dl>
</div>
</div>
<div class="section">
<h1>Utility Changes</h1><div class="subsection">
<h2>&quot;ptar&quot;</h2> &quot;ptar&quot; is a pure perl implementation of &quot;tar&quot;, that comes with &quot;Archive::Tar&quot;.</div>
<div class="subsection">
<h2>&quot;ptardiff&quot;</h2> &quot;ptardiff&quot; is a small script used to generate a diff between the contents of a tar archive and a directory tree. Like &quot;ptar&quot;, it comes with &quot;Archive::Tar&quot;.</div>
<div class="subsection">
<h2>&quot;shasum&quot;</h2> This command-line utility, used to print or to check SHA digests, comes with the new &quot;Digest::SHA&quot; module.</div>
<div class="subsection">
<h2>&quot;h2xs&quot; enhancements</h2> &quot;h2xs&quot; implements a new option &quot;--use-xsloader&quot; to force use of &quot;XSLoader&quot; even in backwards compatible modules.<div class="spacer">
</div>
The handling of authors' names that had apostrophes has been fixed.<div class="spacer">
</div>
Any enums with negative values are now skipped.</div>
<div class="subsection">
<h2>&quot;perlivp&quot; enhancements</h2> &quot;perlivp&quot; no longer checks for  <i>*.ph</i> files by default.  Use the new &quot;-a&quot; option to run  <i>all</i> tests.</div>
</div>
<div class="section">
<h1>Documentation</h1><div class="subsection">
<h2>Perl Glossary</h2> The perlglossary manpage is a glossary of terms used in the Perl documentation, technical and otherwise, kindly provided by O'Reilly Media, Inc.<div class="spacer">
</div>
perltodo now lists a rough roadmap to Perl 5.10.</div>
</div>
<div class="section">
<h1>Performance Enhancements</h1><div class="subsection">
<h2>XS-assisted SWASHGET</h2> Some pure-perl code that perl was using to retrieve Unicode properties and transliteration mappings has been reimplemented in XS.</div>
<div class="subsection">
<h2>Constant subroutines</h2> The interpreter internals now support a far more memory efficient form of inlineable constants. Storing a reference to a constant value in a symbol table is equivalent to a full typeglob referencing a constant subroutine, but using about 400 bytes less memory. This proxy constant subroutine is automatically upgraded to a real typeglob with subroutine if necessary. The approach taken is analogous to the existing space optimisation for subroutine stub declarations, which are stored as plain scalars in place of the full typeglob.<div class="spacer">
</div>
Several of the core modules have been converted to use this feature for their system dependent constants - as a result &quot;use POSIX;&quot; now takes about 200K less memory.</div>
<div class="subsection">
<h2>&quot;PERL_DONT_CREATE_GVSV&quot;</h2> The new compilation flag &quot;PERL_DONT_CREATE_GVSV&quot;, introduced as an option in perl 5.8.8, is turned on by default in perl 5.9.3. It prevents perl from creating an empty scalar with every new typeglob. See perl589delta for details.</div>
<div class="subsection">
<h2>Weak references are cheaper</h2> Weak reference creation is now  <i>O(1)</i> rather than <i>O(n)</i>, courtesy of Nicholas Clark. Weak reference deletion remains  <i>O(n)</i>, but if deletion only happens at program exit, it may be skipped completely.</div>
<div class="subsection">
<h2><i>sort()</i> enhancements</h2> Salvador Fandin~o provided improvements to reduce the memory usage of &quot;sort&quot; and to speed up some cases.</div>
</div>
<div class="section">
<h1>Installation and Configuration Improvements</h1><div class="subsection">
<h2>Compilation improvements</h2> Parallel makes should work properly now, although there may still be problems if &quot;make test&quot; is instructed to run in parallel.<div class="spacer">
</div>
Building with Borland's compilers on Win32 should work more smoothly. In particular Steve Hay has worked to side step many warnings emitted by their compilers and at least one C compiler internal error.<div class="spacer">
</div>
Perl extensions on Windows now can be statically built into the Perl DLL, thanks to a work by Vadim Konovalov.</div>
<div class="subsection">
<h2>New Or Improved Platforms</h2> Perl is being ported to Symbian OS. See perlsymbian for more information.<div class="spacer">
</div>
The VMS port has been improved. See perlvms.<div class="spacer">
</div>
<i>DynaLoader::dl_unload_file()</i> now works on Windows.<div class="spacer">
</div>
Portability of Perl on various recent compilers on Windows has been improved (Borland C++, Visual C++ 7.0).</div>
<div class="subsection">
<h2>New probes</h2> &quot;Configure&quot; will now detect &quot;clearenv&quot; and &quot;unsetenv&quot;, thanks to a patch from Alan Burlison. It will also probe for &quot;futimes&quot; (and use it internally if available), and whether &quot;sprintf&quot; correctly returns the length of the formatted string.</div>
<div class="subsection">
<h2>Module auxiliary files</h2> README files and changelogs for CPAN modules bundled with perl are no longer installed.</div>
</div>
<div class="section">
<h1>Selected Bug Fixes</h1><div class="subsection">
<h2>&quot;defined $$x&quot;</h2> &quot;use strict &quot;refs&quot;&quot; was ignoring taking a hard reference in an argument to  <i>defined()</i>, as in :<div class="spacer">
</div>
<br/>
    use strict &quot;refs&quot;;<br/>
    my $x = &quot;foo&quot;;<br/>
    if (defined $$x) {...}<br/>
<div class="spacer">
</div>
This now correctly produces the run-time error &quot;Can't use string as a SCALAR ref while &quot;strict refs&quot; in use&quot;. (However, &quot;defined @$foo&quot; and &quot;defined %$foo&quot; are still allowed. Those constructs are discouraged anyway.)</div>
<div class="subsection">
<h2>Calling <i>CORE::require()</i></h2>  <i>CORE::require()</i> and <i>CORE::do()</i> were always parsed as <i>require()</i> and <i>do()</i> when they were overridden. This is now fixed.</div>
<div class="subsection">
<h2>Subscripts of slices</h2> You can now use a non-arrowed form for chained subscripts after a list slice, like in:<div class="spacer">
</div>
<br/>
    ({foo =&gt; &quot;bar&quot;})[0]{foo}<br/>
<div class="spacer">
</div>
This used to be a syntax error; a &quot;-&gt;&quot; was required.</div>
<div class="subsection">
<h2>Remove over-optimisation</h2> Perl 5.9.2 introduced a change so that assignments of &quot;undef&quot; to a scalar, or of an empty list to an array or a hash, were optimised out. As this could cause problems when &quot;goto&quot; jumps were involved, this change was backed out.</div>
<div class="subsection">
<h2><i>sprintf()</i> fixes</h2> Using the  <i>sprintf()</i> function with some formats could lead to a buffer overflow in some specific cases. This has been fixed, along with several other bugs, notably in bounds checking.<div class="spacer">
</div>
In related fixes, it was possible for badly written code that did not follow the documentation of &quot;Sys::Syslog&quot; to have formatting vulnerabilities. &quot;Sys::Syslog&quot; has been changed to protect people from poor quality third party code.</div>
<div class="subsection">
<h2>no warnings 'category' works correctly with -w</h2> Previously when running with warnings enabled globally via &quot;-w&quot;, selective disabling of specific warning categories would actually turn off all warnings. This is now fixed; now &quot;no warnings 'io';&quot; will only turn off warnings in the &quot;io&quot; class. Previously it would erroneously turn off all warnings.</div>
<div class="subsection">
<h2>Smaller fixes</h2><dl>
<dt>
&#8226;</dt>
<dd>
&quot;FindBin&quot; now works better with directories where access rights are more restrictive than usual.</dd>
</dl>
<dl>
<dt>
&#8226;</dt>
<dd>
Several memory leaks in ithreads were closed. Also, ithreads were made less memory-intensive.</dd>
</dl>
<dl>
<dt>
&#8226;</dt>
<dd>
Trailing spaces are now trimmed from $! and $^E.</dd>
</dl>
<dl>
<dt>
&#8226;</dt>
<dd>
Operations that require perl to read a process's list of groups, such as reads of $( and $), now dynamically allocate memory rather than using a fixed sized array. The fixed size array could cause C stack exhaustion on systems configured to use large numbers of groups.</dd>
</dl>
<dl>
<dt>
&#8226;</dt>
<dd>
&quot;PerlIO::scalar&quot; now works better with non-default $/ settings.</dd>
</dl>
<dl>
<dt>
&#8226;</dt>
<dd>
The &quot;x&quot; repetition operator is now able to operate on &quot;qw//&quot; lists. This used to raise a syntax error.</dd>
</dl>
<dl>
<dt>
&#8226;</dt>
<dd>
The debugger now traces correctly execution in eval(&quot;&quot;)uated code that contains #line directives.</dd>
</dl>
<dl>
<dt>
&#8226;</dt>
<dd>
The value of the &quot;open&quot; pragma is no longer ignored for three-argument opens.</dd>
</dl>
<dl>
<dt>
&#8226;</dt>
<dd>
Perl will now use the C library calls &quot;unsetenv&quot; and &quot;clearenv&quot; if present to delete keys from %ENV and delete %ENV entirely, thanks to a patch from Alan Burlison.</dd>
</dl>
</div>
<div class="subsection">
<h2>More Unicode Fixes</h2><dl>
<dt>
&#8226;</dt>
<dd>
<i>chr()</i> on a negative value now gives &quot;\x{FFFD}&quot;, the Unicode replacement character, unless when the &quot;bytes&quot; pragma is in effect, where the low eight bytes of the value are used.</dd>
</dl>
<dl>
<dt>
&#8226;</dt>
<dd>
Some case insensitive matches between UTF-8 encoded data and 8 bit regexps, and vice versa, could give malformed character warnings. These have been fixed by Dave Mitchell and Yves Orton.</dd>
</dl>
<dl>
<dt>
&#8226;</dt>
<dd>
&quot;lcfirst&quot; and &quot;ucfirst&quot; could corrupt the string for certain cases where the length UTF-8 encoding of the string in lower case, upper case or title case differed. This was fixed by Nicholas Clark.</dd>
</dl>
</div>
</div>
<div class="section">
<h1>New or Changed Diagnostics</h1><div class="subsection">
<h2>Attempt to set length of freed array</h2> This is a new warning, produced in situations like the following one:<div class="spacer">
</div>
<br/>
    $r = do {my @a; \$#a};<br/>
    $$r = 503;<br/>
</div>
<div class="subsection">
<h2>Non-string passed as bitmask</h2> This is a new warning, produced when number has been passed as a argument to  <i>select()</i>, instead of a bitmask.<div class="spacer">
</div>
<br/>
    # Wrong, will now warn<br/>
    $rin = fileno(STDIN);<br/>
    ($nfound,$timeleft) = select($rout=$rin, undef, undef, $timeout);<br/>
    <br/>
    # Should be<br/>
    $rin = '';<br/>
    vec($rin,fileno(STDIN),1) = 1;<br/>
    ($nfound,$timeleft) = select($rout=$rin, undef, undef, $timeout);<br/>
</div>
<div class="subsection">
<h2>Search pattern not terminated or ternary operator parsed as search pattern</h2> This syntax error indicates that the lexer couldn't find the final delimiter of a &quot;?PATTERN?&quot; construct. Mentioning the ternary operator in this error message makes syntax diagnostic easier.</div>
<div class="subsection">
<h2>&quot;%s&quot; variable %s masks earlier declaration</h2> This warning is now emitted in more consistent cases; in short, when one of the declarations involved is a &quot;my&quot; variable:<div class="spacer">
</div>
<br/>
    my $x;   my $x;     # warns<br/>
    my $x;  our $x;     # warns<br/>
    our $x;  my $x;     # warns<br/>
<div class="spacer">
</div>
On the other hand, the following:<div class="spacer">
</div>
<br/>
    our $x; our $x;<br/>
<div class="spacer">
</div>
now gives a &quot;&quot;our&quot; variable %s redeclared&quot; warning.</div>
<div class="subsection">
<h2><i>readdir()</i>/<i>closedir()</i>/etc. attempted on invalid dirhandle</h2> These new warnings are now emitted when a dirhandle is used but is either closed or not really a dirhandle.</div>
</div>
<div class="section">
<h1>Changed Internals</h1> In general, the source code of perl has been refactored, tied up, and optimized in many places. Also, memory management and allocation has been improved in a couple of points.<div class="spacer">
</div>
Andy Lester supplied many improvements to determine which function parameters and local variables could actually be declared &quot;const&quot; to the C compiler. Steve Peters provided new *_set macros and reworked the core to use these rather than assigning to macros in LVALUE context.<div class="spacer">
</div>
Dave Mitchell improved the lexer debugging output under &quot;-DT&quot;.<div class="spacer">
</div>
A new file, <i>mathoms.c</i>, has been added. It contains functions that are no longer used in the perl core, but that remain available for binary or source compatibility reasons. However, those functions will not be compiled in if you add &quot;-DNO_MATHOMS&quot; in the compiler flags.<div class="spacer">
</div>
The &quot;AvFLAGS&quot; macro has been removed.<div class="spacer">
</div>
The &quot;av_*()&quot; functions, used to manipulate arrays, no longer accept null &quot;AV*&quot; parameters.<div class="subsection">
<h2>B:: modules inheritance changed</h2> The inheritance hierarchy of &quot;B::&quot; modules has changed; &quot;B::NV&quot; now inherits from &quot;B::SV&quot; (it used to inherit from &quot;B::IV&quot;).</div>
</div>
<div class="section">
<h1>Reporting Bugs</h1> If you find what you think is a bug, you might check the articles recently posted to the comp.lang.perl.misc newsgroup and the perl bug database at http://bugs.perl.org/ .  There may also be information at http://www.perl.org/ , the Perl Home Page.<div class="spacer">
</div>
If you believe you have an unreported bug, please run the <b>perlbug</b> program included with your release.  Be sure to trim your bug down to a tiny but sufficient test case.  Your bug report, along with the output of &quot;perl -V&quot;, will be sent off to perlbug@perl.org to be analysed by the Perl porting team.</div>
<div class="section">
<h1>SEE ALSO</h1> The  <i>Changes</i> file for exhaustive details on what changed.<div class="spacer">
</div>
The <i>INSTALL</i> file for how to build Perl.<div class="spacer">
</div>
The <i>README</i> file for general stuff.<div class="spacer">
</div>
The <i>Artistic</i> and <i>Copying</i> files for copyright information.</div>
<table class="foot">
<tr>
<td class="foot-date">
2011-09-26</td>
<td class="foot-os">
perl v5.14.2</td>
</tr>
</table>
</div>
</body>
</html>

