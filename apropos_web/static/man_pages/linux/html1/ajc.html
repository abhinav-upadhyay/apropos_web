<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/linux/style.css" type="text/css" media="all"/>
<title>
ajc(1)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
ajc(1)</td>
<td class="head-vol">
General Commands Manual</td>
<td class="head-rtitle">
ajc(1)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>NAME</h1> ajc &#8212; compiler and bytecode weaver for the AspectJ and Java languages</div>
<div class="section">
<h1>SYNOPSIS</h1>  <b>ajc</b> [<i>Options</i>]  [<i>file...</i>  | @<i>file...</i>  | -argfile <i>file...</i> ]</div>
<div class="section">
<h1>Description</h1> The  <b>ajc</b> command compiles and weaves AspectJ and Java source and .class files, producing .class files compliant with any Java VM (1.1 or later).  It combines compilation and bytecode weaving and supports incremental builds; you can also weave bytecode at run-time using  <i>&quot;&quot;</i> &gt;.<div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
The arguments after the options specify the source file(s) to compile. To specify source classes, use  <b>-inpath</b> (below). Files may be listed directly on the command line or in a file. The  <b>-argfile </b><i>file</i> and  <b>@</b><i>file</i> forms are equivalent, and are interpreted as meaning all the arguments listed in the specified file.<div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
<div style="height: 1.00em;">
&#160;</div>
<b>Note:</b> You must explicitly pass  <b>ajc</b> all necessary sources. Be sure to include the source not only for the aspects or pointcuts but also for any affected types. Specifying all sources is necessary because, unlike javac, ajc does not search the sourcepath for classes. (For a discussion of what affected types might be required, see  <i>The AspectJ</i>  <i>Programming Guide, Implementation Appendix ../progguide/implementation.html) </i>.<div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
To specify sources, you can list source files as arguments or use the options  <b>-sourceroots</b> or <b>-inpath</b>. If there are multiple sources for any type, the result is undefined since ajc has no way to determine which source is correct.  (This happens most often when users include the destination directory on the inpath and rebuild.)<div style="height: 1.00em;">
&#160;</div>
<div class="subsection">
<h2>Options</h2><dl>
<dt>
-injars <i>JarList</i></dt>
<dd>
deprecated: since 1.2, use -inpath, which also takes directories.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
-inpath <i>Path</i></dt>
<dd>
Accept as source bytecode any .class files in the The output will include these classes, possibly as woven with any applicable aspects. Path is a single argument containing a list of paths to zip files or directories, delimited by the platform-specific path delimiter.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
-aspectpath <i>Path</i></dt>
<dd>
Weave binary aspects from jar files and directories on path into all sources. The aspects should have been output by the same version of the compiler. When running the output classes, the run classpath should contain all aspectpath entries. Path, like classpath, is a single argument containing a list of paths to jar files, delimited by the platform- specific classpath delimiter.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
-argfile <i>File</i></dt>
<dd>
The file contains a line-delimited list of arguments. Each line in the file should contain one option, filename, or argument string (e.g., a classpath or inpath). Arguments read from the file are inserted into the argument list for the command.  Relative paths in the file are calculated from the directory containing the file (not the current working directory). Comments, as in Java, start with  <b>//</b> and extend to the end of the line.  Options specified in argument files may override rather than extending existing option values, so avoid specifying options like  <i>-classpath</i>           in argument files unlike the argument file is the only build specification.  The form  <i>@file</i> is the same as specifying  <i>-argfile file</i>.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
-outjar <i>output.jar</i></dt>
<dd>
Put output classes in zip file output.jar.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
-outxml</dt>
<dd>
Generate aop.xml file for load-time weaving with default name.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
-outxmlfile <i>custom/aop.xml</i></dt>
<dd>
Generate aop.xml file for load-time weaving with custom name.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
-incremental</dt>
<dd>
Run the compiler continuously. After the initial compilation, the compiler will wait to recompile until it reads a newline from the standard input, and will quit when it reads a 'q'. It will only recompile necessary components, so a recompile should be much faster than doing a second compile. This requires -sourceroots.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
-sourceroots <i>DirPaths</i></dt>
<dd>
Find and build all .java or .aj source files under any directory listed in DirPaths. DirPaths, like classpath, is a single argument containing a list of paths to directories, delimited by the platform- specific classpath delimiter. Required by -incremental.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
-crossrefs</dt>
<dd>
Generate a build .ajsym file into the output directory.  Used for viewing crosscutting references by tools like the AspectJ Browser.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
-emacssym</dt>
<dd>
Generate .ajesym symbol files for emacs support (deprecated).<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
-Xlint</dt>
<dd>
Same as -Xlint:warning (enabled by default)<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
-Xlint:{level}</dt>
<dd>
Set default level for messages about potential programming mistakes in crosscutting code. {level} may be ignore, warning, or error. This overrides entries in org/aspectj/weaver/XlintDefault.properties from aspectjtools.jar, but does not override levels set using the -Xlintfile option.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
-Xlintfile <i>PropertyFile</i></dt>
<dd>
Specify properties file to set levels for specific crosscutting messages. PropertyFile is a path to a Java .properties file that takes the same property names and values as org/aspectj/weaver/XlintDefault.properties from aspectjtools.jar, which it also overrides.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
-help</dt>
<dd>
Emit information on compiler options and usage<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
-version</dt>
<dd>
Emit the version of the AspectJ compiler<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
-classpath <i>Path</i></dt>
<dd>
Specify where to find user class files. Path is a single argument containing a list of paths to zip files or directories, delimited by the platform-specific path delimiter.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
-bootclasspath <i>Path</i></dt>
<dd>
Override location of VM's bootclasspath for purposes of evaluating types when compiling. Path is a single argument containing a list of paths to zip files or directories, delimited by the platform-specific path delimiter.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
-extdirs <i>Path</i></dt>
<dd>
Override location of VM's extension directories for purposes of evaluating types when compiling. Path is a single argument containing a list of paths to directories, delimited by the platform-specific path delimiter.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
-d <i>Directory</i></dt>
<dd>
Specify where to place generated .class files. If not specified,  <i>Directory</i> defaults to the current working dir.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
-target <i>[1.1 to 1.5]</i></dt>
<dd>
Specify classfile target setting (1.1 to 1.5, default is 1.2)<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
-1.3</dt>
<dd>
Set compliance level to 1.3 This implies -source 1.3 and -target 1.1.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
-1.4</dt>
<dd>
Set compliance level to 1.4 (default) This implies -source 1.4 and -target 1.2.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
-1.5</dt>
<dd>
Set compliance level to 1.5. This implies -source 1.5 and -target 1.5.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
-source <i>[1.3|1.4|1.5]</i></dt>
<dd>
Toggle assertions (1.3, 1.4, or 1.5 - default is 1.4). When using -source 1.3, an assert() statement valid under Java 1.4 will result in a compiler error. When using -source 1.4, treat  <b>assert</b> as a keyword and implement assertions according to the 1.4 language spec. When using -source 1.5, Java 5 language features are permitted.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
-nowarn</dt>
<dd>
Emit no warnings (equivalent to '-warn:none') This does not suppress messages generated by  <b>declare warning</b> or  <b>Xlint</b>.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
-warn: <i>items</i></dt>
<dd>
Emit warnings for any instances of the comma-delimited list of questionable code (eg '-warn:unusedLocals,deprecation'):<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<div class="spacer">
</div>
<br/>
constructorName        method with constructor name <br/>
packageDefaultMethod   attempt to override package-default method <br/>
deprecation            usage of deprecated type or member <br/>
maskedCatchBlocks      hidden catch block <br/>
unusedLocals           local variable never read <br/>
unusedArguments        method argument never read <br/>
unusedImports          import statement not used by code in file <br/>
none                   suppress all compiler warnings <br/>
 <br/>
<div class="spacer">
</div>
<b>-warn:none</b> does not suppress messages generated by  <b>declare warning</b> or  <b>Xlint</b>.<div style="height: 1.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
<dl>
<dt>
-deprecation</dt>
<dd>
Same as -warn:deprecation<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
-noImportError</dt>
<dd>
Emit no errors for unresolved imports<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
-proceedOnError</dt>
<dd>
Keep compiling after error, dumping class files with problem methods<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
-g<i>:[lines,vars,source]</i></dt>
<dd>
debug attributes level, that may take three forms:<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<div class="spacer">
</div>
<br/>
-g         all debug info ('-g:lines,vars,source') <br/>
-g:none    no debug info <br/>
-g:{items} debug info for any/all of [lines, vars, source], e.g., <br/>
-g:lines,source <br/>
 <br/>
<div class="spacer">
</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
<dl>
<dt>
-preserveAllLocals</dt>
<dd>
Preserve all local variables during code generation (to facilitate debugging).<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
-referenceInfo</dt>
<dd>
Compute reference information.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
-encoding <i>format</i></dt>
<dd>
Specify default source encoding format. Specify custom encoding on a per file basis by suffixing each input source file/folder name with '[encoding]'.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
-verbose</dt>
<dd>
Emit messages about accessed/processed compilation units<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
-showWeaveInfo</dt>
<dd>
Emit messages about weaving<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
-log <i>file</i></dt>
<dd>
Specify a log file for compiler messages.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
-progress</dt>
<dd>
Show progress (requires -log mode).<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
-time</dt>
<dd>
Display speed information.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
-noExit</dt>
<dd>
Do not call System.exit(n) at end of compilation (n=0 if no error)<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
-repeat <i>N</i></dt>
<dd>
Repeat compilation process N times (typically to do performance analysis).<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
-XterminateAfterCompilation</dt>
<dd>
Causes compiler to terminate before weaving<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
-XaddSerialVersionUID</dt>
<dd>
Causes the compiler to calculate and add the SerialVersionUID field to any type implementing Serializable that is affected by an aspect.  The field is calculated based on the class before weaving has taken place.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
-Xreweavable[:compress]</dt>
<dd>
(Experimental - deprecated as now default) Runs weaver in reweavable mode which causes it to create woven classes that can be rewoven, subject to the restriction that on attempting a reweave all the types that advised the woven type must be accessible.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
-XnoInline</dt>
<dd>
(Experimental) do not inline around advice<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
-XincrementalFile <i>file</i></dt>
<dd>
(Experimental) This works like incremental mode, but using a file rather than standard input to control the compiler. It will recompile each time file is changed and and halt when file is deleted.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
-XserializableAspects</dt>
<dd>
(Experimental) Normally it is an error to declare aspects Serializable.  This option removes that restriction.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
-XnotReweavable</dt>
<dd>
(Experimental) Create class files that can't be subsequently rewoven by AspectJ.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
-Xajruntimelevel:1.2, ajruntimelevel:1.5</dt>
<dd>
(Experimental) Allows code to be generated that targets a 1.2 or a 1.5 level AspectJ runtime (default 1.5)<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
</div>
<div class="subsection">
<h2>File names</h2> ajc accepts source files with either the  <b>.java</b>     extension or the <b>.aj</b> extension.  We normally use  <b>.java</b> for all of our files in an AspectJ system -- files that contain aspects as well as files that contain classes.  However, if you have a need to mechanically distinguish files that use AspectJ's additional functionality from those that are pure Java we recommend using the  <b>.aj</b> extension for those files.<div class="spacer">
</div>
We'd like to discourage other means of mechanical distinction such as naming conventions or sub-packages in favor of the  <b>.aj</b>     extension.<dl>
<dt>
   &#8226;</dt>
<dd>
Filename conventions are hard to enforce and lead to awkward names for your aspects.  Instead of  <b>TracingAspect.java</b> we recommend using  <b>Tracing.aj</b> (or just  <b>Tracing.java</b>) instead.</dd>
</dl>
<dl>
<dt>
   &#8226;</dt>
<dd>
Sub-packages move aspects out of their natural place in a system and can create an artificial need for privileged aspects.  Instead of adding a sub-package like  <b>aspects</b> we recommend using the  <b>.aj</b> extension and including these files in your existing packages instead.</dd>
</dl>
</div>
<div class="subsection">
<h2>Compatibility</h2> AspectJ is a compatible extension to the Java programming language. The AspectJ compiler adheres to the  <i> </i><i>The Java Language Specfication, Second</i>  <i>Edition</i><i> (BOOK)  http://java.sun.com/docs/books/jls/index.html</i> and to the <i></i><i>The Java Virtual Machine Specification, Second</i>  <i>Edition</i><i> (BOOK)  http://java.sun.com/docs/books/vmspec/index.html</i> and runs on any Java 2 compatible platform. The code it generates runs on any Java 1.1 or later compatible platform. For more information on compatibility with Java and with previous releases of AspectJ, see  <i>&quot;&quot;</i> &gt;.<div style="height: 1.00em;">
&#160;</div>
</div>
<div class="subsection">
<h2>Examples</h2>  <b>A simple example</b><div class="spacer">
</div>
Compile two files:<div class="spacer">
</div>
<br/>
ajc HelloWorld.java Trace.java <br/>
 <br/>
<div class="spacer">
</div>
<b>An example using -argfile/@</b><div class="spacer">
</div>
To avoid specifying file names on the command line, list source files in a line-delimited text argfile. Source file paths may be absolute or relative to the argfile, and may include other argfiles by @-reference. The following file  <b>sources.lst</b>           contains absolute and relative files and @-references:<div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
<br/>
Gui.java <br/>
/home/user/src/Library.java <br/>
data/Repository.java <br/>
data/Access.java <br/>
@../../common/common.lst <br/>
@/home/user/src/lib.lst <br/>
view/body/ArrayView.java <br/>
<div class="spacer">
</div>
Compile the files using either the -argfile or @ form:<div class="spacer">
</div>
<br/>
ajc -argfile sources.lst <br/>
ajc @sources.lst <br/>
<div class="spacer">
</div>
Argfiles are also supported by jikes and javac, so you can use the files in hybrid builds.  However, the support varies:<div style="height: 1.00em;">
&#160;</div>
<dl>
<dt>
   &#8226;</dt>
<dd>
Only ajc accepts command-line options</dd>
</dl>
<dl>
<dt>
   &#8226;</dt>
<dd>
Jikes and Javac do not accept internal @argfile references.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
   &#8226;</dt>
<dd>
Jikes and Javac only accept the @file form on the command line.</dd>
</dl>
<div class="spacer">
</div>
<b>An example using -inpath and -aspectpath</b><div class="spacer">
</div>
Bytecode weaving using -inpath: AspectJ 1.2 supports weaving .class files in input zip/jar files and directories. Using input jars is like compiling the corresponding source files, and all binaries are emitted to output.  Although Java-compliant compilers may differ in their output, ajc should take as input any class files produced by javac, jikes, eclipse, and, of course, ajc.  Aspects included in -inpath will be woven into like other .class files, and they will affect other types as usual.<div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
Aspect libraries using -aspectpath: AspectJ 1.1 supports weaving from read-only libraries containing aspects.  Like input jars, they affect all input; unlike input jars, they themselves are not affected or emitted as output. Sources compiled with aspect libraries must be run with the same aspect libraries on their classpath.<div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
The following example builds the tracing example in a command-line environment; it creates a read-only aspect library, compiles some classes for use as input bytecode, and compiles the classes and other sources with the aspect library.<div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
The tracing example is in the AspectJ distribution ({aspectj}/doc/examples/tracing).  This uses the following files:<div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
<br/>
aspectj1.1/  <br/>
bin/  <br/>
ajc  <br/>
lib/  <br/>
aspectjrt.jar  <br/>
examples/  <br/>
tracing/  <br/>
Circle.java  <br/>
ExampleMain.java  <br/>
lib/  <br/>
AbstractTrace.java  <br/>
TraceMyClasses.java  <br/>
notrace.lst  <br/>
Square.java  <br/>
tracelib.lst  <br/>
tracev3.lst  <br/>
TwoDShape.java  <br/>
version3/  <br/>
Trace.java  <br/>
TraceMyClasses.java  <br/>
 <br/>
<div class="spacer">
</div>
Below, the path separator is taken as &quot;;&quot;, but file separators are &quot;/&quot;.  All commands are on one line.  Adjust paths and commands to your environment as needed.<div class="spacer">
</div>
Setup the path, classpath, and current directory:<div class="spacer">
</div>
<br/>
cd examples  <br/>
export ajrt=../lib/aspectjrt.jar  <br/>
export CLASSPATH=&quot;$ajrt&quot;  <br/>
export PATH=&quot;../bin:$PATH&quot;  <br/>
 <br/>
<div class="spacer">
</div>
Build a read-only tracing library:<div class="spacer">
</div>
<br/>
ajc -argfile tracing/tracelib.lst -outjar tracelib.jar  <br/>
 <br/>
<div class="spacer">
</div>
Build the application with tracing in one step:<div class="spacer">
</div>
<br/>
ajc -aspectpath tracelib.jar -argfile tracing/notrace.lst -outjar tracedapp.jar  <br/>
 <br/>
<div class="spacer">
</div>
Run the application with tracing:<div class="spacer">
</div>
<br/>
java -classpath &quot;$ajrt;tracedapp.jar;tracelib.jar&quot; tracing.ExampleMain  <br/>
 <br/>
<div class="spacer">
</div>
Build the application with tracing from binaries in two steps:<dl>
<dt>
   &#8226;</dt>
<dd>
(a) Build the application classes (using javac for demonstration's sake):</dd>
</dl>
<div class="spacer">
</div>
<br/>
mkdir classes  <br/>
javac -d classes tracing/*.java  <br/>
jar cfM app.jar -C classes .  <br/>
 <br/>
<dl>
<dt>
   &#8226;</dt>
<dd>
(b) Build the application with tracing:</dd>
</dl>
<div class="spacer">
</div>
<br/>
ajc -inpath app.jar -aspectpath tracelib.jar -outjar tracedapp.jar  <br/>
 <br/>
<div class="spacer">
</div>
Run the application with tracing (same as above):<div class="spacer">
</div>
<br/>
java -classpath &quot;$ajrt;tracedapp.jar;tracelib.jar&quot; tracing.ExampleMain  <br/>
 <br/>
<div class="spacer">
</div>
Run the application without tracing:<div class="spacer">
</div>
<br/>
java -classpath &quot;app.jar&quot; tracing.ExampleMain <br/>
 <br/>
</div>
<div class="subsection">
<h2>The AspectJ compiler API</h2> The AspectJ compiler is implemented completely in Java and can be called as a Java class.  The only interface that should be considered public are the public methods in  <b>org.aspectj.tools.ajc.Main</b>. E.g.,  <b>main(String[] args)</b> takes the the standard  <b>ajc</b> command line arguments. This means that an alternative way to run the compiler is<div class="spacer">
</div>
<b></b><b>java org.aspectj.tools.ajc.Main</b><b></b> [<i>option...</i>]  [<i>file...</i>]<div class="spacer">
</div>
To access compiler messages programmatically, use the methods  <b>setHolder(IMessageHolder holder)</b> and/or  <b>run(String[] args, IMessageHolder holder)</b>.  <b>ajc</b> reports each message to the holder using  <b>IMessageHolder.handleMessage(..)</b>. If you just want to collect the messages, use  <b>MessageHandler</b> as your		  <b>IMessageHolder</b>. For example, compile and run the following with  <b>aspectjtools.jar</b> on the classpath:<div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
<br/>
import org.aspectj.bridge.*; <br/>
import org.aspectj.tools.ajc.Main; <br/>
import java.util.Arrays; <br/>
 <br/>
public class WrapAjc { <br/>
public static void main(String[] args) { <br/>
Main compiler = new Main(); <br/>
MessageHandler m = new MessageHandler(); <br/>
compiler.run(args, m); <br/>
IMessage[] ms = m.getMessages(null, true); <br/>
System.out.println(&quot;messages: &quot; + Arrays.asList(ms)); <br/>
} <br/>
} <br/>
 <br/>
</div>
<div class="subsection">
<h2>Stack Traces and the SourceFile attribute</h2> Unlike traditional java compilers, the AspectJ compiler may in certain cases generate classfiles from multiple source files. Unfortunately, the original Java class file format does not support multiple SourceFile attributes.  In order to make sure all source file information is available, the AspectJ compiler may in some cases encode multiple filenames in the SourceFile attribute. When the Java VM generates stack traces, it uses this attribute to specify the source file.<div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
(The AspectJ 1.0 compiler also supports the .class file extensions of JSR-45. These permit compliant debuggers (such as jdb in Java 1.4.1) to identify the right file and line even given many source files for a single class. JSR-45 support is planned for ajc in AspectJ 1.1, but is not in the initial release.  To get fully debuggable .class files, use the -XnoInline option.)<div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
Probably the only time you may see this format is when you view stack traces, where you may encounter traces of the format<div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
<br/>
java.lang.NullPointerException <br/>
at Main.new$constructor_call37(Main.java;SynchAspect.java[1k]:1030) <br/>
<div class="spacer">
</div>
where instead of the usual<div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
<br/>
File:LineNumber <br/>
<div class="spacer">
</div>
format, you see<div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
<br/>
File0;File1[Number1];File2[Number2] ... :LineNumber <br/>
<div class="spacer">
</div>
In this case, LineNumber is the usual offset in lines plus the &quot;start line&quot; of the actual source file.  That means you use LineNumber both to identify the source file and to find the line at issue. The number in [brackets] after each file tells you the virtual &quot;start line&quot; for that file (the first file has a start of 0).<div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
In our example from the null pointer exception trace, the virtual start line is 1030.  Since the file SynchAspect.java &quot;starts&quot; at line 1000 [1k], the LineNumber points to line 30 of SynchAspect.java.<div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
So, when faced with such stack traces, the way to find the actual source location is to look through the list of &quot;start line&quot; numbers to find the one just under the shown line number.  That is the file where the source location can actually be found.  Then, subtract that &quot;start line&quot; from the shown line number to find the actual line number within that file.<div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
In a class file that comes from only a single source file, the AspectJ compiler generates SourceFile attributes consistent with traditional Java compilers.<div style="height: 1.00em;">
&#160;</div>
</div>
</div>
<table class="foot">
<tr>
<td class="foot-date">
</td>
<td class="foot-os">
</td>
</tr>
</table>
</div>
</body>
</html>

