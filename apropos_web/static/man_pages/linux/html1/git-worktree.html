<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/linux/style.css" type="text/css" media="all"/>
<title>
GIT-WORKTREE(1)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
GIT-WORKTREE(1)</td>
<td class="head-vol">
Git Manual</td>
<td class="head-rtitle">
GIT-WORKTREE(1)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>NAME</h1> git-worktree - Manage multiple working trees</div>
<div class="section">
<h1>SYNOPSIS</h1><br/>
<i>git worktree add</i> [-f] [--detach] [-b &lt;new-branch&gt;] &lt;path&gt; [&lt;branch&gt;]<br/>
<i>git worktree prune</i> [-n] [-v] [--expire &lt;expire&gt;]<br/>
<i>git worktree list</i> [--porcelain]<br/>
<div style="height: 1.00em;">
&#160;</div>
</div>
<div class="section">
<h1>DESCRIPTION</h1> Manage multiple working trees attached to the same repository.<div style="height: 1.00em;">
&#160;</div>
A git repository can support multiple working trees, allowing you to check out more than one branch at a time. With git worktree add a new working tree is associated with the repository. This new working tree is called a &quot;linked working tree&quot; as opposed to the &quot;main working tree&quot; prepared by &quot;git init&quot; or &quot;git clone&quot;. A repository has one main working tree (if it&#8217;s not a bare repository) and zero or more linked working trees.<div style="height: 1.00em;">
&#160;</div>
When you are done with a linked working tree you can simply delete it. The working tree&#8217;s administrative files in the repository (see &quot;DETAILS&quot; below) will eventually be removed automatically (see gc.worktreePruneExpire in <b>git-config</b>(1)), or you can run git worktree prune in the main or any linked working tree to clean up any stale administrative files.<div style="height: 1.00em;">
&#160;</div>
If you move a linked working tree, you need to manually update the administrative files so that they do not get pruned automatically. See section &quot;DETAILS&quot; for more information.<div style="height: 1.00em;">
&#160;</div>
If a linked working tree is stored on a portable device or network share which is not always mounted, you can prevent its administrative files from being pruned by creating a file named <i>locked</i> alongside the other administrative files, optionally containing a plain text reason that pruning should be suppressed. See section &quot;DETAILS&quot; for more information.</div>
<div class="section">
<h1>COMMANDS</h1> add &lt;path&gt; [&lt;branch&gt;]<div style="margin-left: 4.00ex;">
Create &lt;path&gt; and checkout &lt;branch&gt; into it. The new working directory is linked to the current repository, sharing everything except working directory specific files such as HEAD, index, etc.<div style="height: 1.00em;">
&#160;</div>
If &lt;branch&gt; is omitted and neither -b nor -B nor --detached used, then, as a convenience, a new branch based at HEAD is created automatically, as if -b $(basename &lt;path&gt;) was specified.</div>
<div class="spacer">
</div>
prune<div style="margin-left: 4.00ex;">
Prune working tree information in $GIT_DIR/worktrees.</div>
<div class="spacer">
</div>
list<div style="margin-left: 4.00ex;">
List details of each worktree. The main worktree is listed first, followed by each of the linked worktrees. The output details include if the worktree is bare, the revision currently checked out, and the branch currently checked out (or  <i>detached HEAD</i> if none).</div>
</div>
<div class="section">
<h1>OPTIONS</h1> -f, --force<div style="margin-left: 4.00ex;">
By default, add refuses to create a new working tree when &lt;branch&gt; is already checked out by another working tree. This option overrides that safeguard.</div>
<div class="spacer">
</div>
-b &lt;new-branch&gt;, -B &lt;new-branch&gt;<div style="margin-left: 4.00ex;">
With add, create a new branch named &lt;new-branch&gt; starting at &lt;branch&gt;, and check out &lt;new-branch&gt; into the new working tree. If &lt;branch&gt; is omitted, it defaults to HEAD. By default, -b refuses to create a new branch if it already exists. -B overrides this safeguard, resetting &lt;new-branch&gt; to &lt;branch&gt;.</div>
<div class="spacer">
</div>
--detach<div style="margin-left: 4.00ex;">
With add, detach HEAD in the new working tree. See &quot;DETACHED HEAD&quot; in  <b>git-checkout</b>(1).</div>
<div class="spacer">
</div>
-n, --dry-run<div style="margin-left: 4.00ex;">
With prune, do not remove anything; just report what it would remove.</div>
<div class="spacer">
</div>
--porcelain<div style="margin-left: 4.00ex;">
With list, output in an easy-to-parse format for scripts. This format will remain stable across Git versions and regardless of user configuration. See below for details.</div>
<div class="spacer">
</div>
-v, --verbose<div style="margin-left: 4.00ex;">
With prune, report all removals.</div>
<div class="spacer">
</div>
--expire &lt;time&gt;<div style="margin-left: 4.00ex;">
With prune, only expire unused working trees older than &lt;time&gt;.</div>
</div>
<div class="section">
<h1>DETAILS</h1> Each linked working tree has a private sub-directory in the repository&#8217;s $GIT_DIR/worktrees directory. The private sub-directory&#8217;s name is usually the base name of the linked working tree&#8217;s path, possibly appended with a number to make it unique. For example, when $GIT_DIR=/path/main/.git the command git worktree add /path/other/test-next next creates the linked working tree in /path/other/test-next and also creates a $GIT_DIR/worktrees/test-next directory (or $GIT_DIR/worktrees/test-next1 if test-next is already taken).<div style="height: 1.00em;">
&#160;</div>
Within a linked working tree, $GIT_DIR is set to point to this private directory (e.g. /path/main/.git/worktrees/test-next in the example) and $GIT_COMMON_DIR is set to point back to the main working tree&#8217;s $GIT_DIR (e.g. /path/main/.git). These settings are made in a .git file located at the top directory of the linked working tree.<div style="height: 1.00em;">
&#160;</div>
Path resolution via git rev-parse --git-path uses either $GIT_DIR or $GIT_COMMON_DIR depending on the path. For example, in the linked working tree git rev-parse --git-path HEAD returns /path/main/.git/worktrees/test-next/HEAD (not /path/other/test-next/.git/HEAD or /path/main/.git/HEAD) while git rev-parse --git-path refs/heads/master uses $GIT_COMMON_DIR and returns /path/main/.git/refs/heads/master, since refs are shared across all working trees.<div style="height: 1.00em;">
&#160;</div>
See <b>gitrepository-layout</b>(5) for more information. The rule of thumb is do not make any assumption about whether a path belongs to $GIT_DIR or $GIT_COMMON_DIR when you need to directly access something inside $GIT_DIR. Use git rev-parse --git-path to get the final path.<div style="height: 1.00em;">
&#160;</div>
If you move a linked working tree, you need to update the <i>gitdir</i> file in the entry&#8217;s directory. For example, if a linked working tree is moved to /newpath/test-next and its .git file points to /path/main/.git/worktrees/test-next, then update /path/main/.git/worktrees/test-next/gitdir to reference /newpath/test-next instead.<div style="height: 1.00em;">
&#160;</div>
To prevent a $GIT_DIR/worktrees entry from being pruned (which can be useful in some situations, such as when the entry&#8217;s working tree is stored on a portable device), add a file named <i>locked</i> to the entry&#8217;s directory. The file contains the reason in plain text. For example, if a linked working tree&#8217;s .git file points to /path/main/.git/worktrees/test-next then a file named /path/main/.git/worktrees/test-next/locked will prevent the test-next entry from being pruned. See <b>gitrepository-layout</b>(5) for details.</div>
<div class="section">
<h1>LIST OUTPUT FORMAT</h1> The worktree list command has two output formats. The default format shows the details on a single line with columns. For example:<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
S git worktree list<br/>
/path/to/bare-source            (bare)<br/>
/path/to/linked-worktree        abcd1234 [master]<br/>
/path/to/other-linked-worktree  1234abc  (detached HEAD)<br/>
</div>
<div style="height: 1.00em;">
&#160;</div>
<div class="subsection">
<h2>Porcelain Format</h2> The porcelain format has a line per attribute. Attributes are listed with a label and value separated by a single space. Boolean attributes (like  <i>bare</i> and <i>detached</i>) are listed as a label only, and are only present if and only if the value is true. An empty line indicates the end of a worktree. For example:<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
S git worktree list --porcelain<br/>
worktree /path/to/bare-source<br/>
bare<div class="spacer">
</div>
<br/>
worktree /path/to/linked-worktree<br/>
HEAD abcd1234abcd1234abcd1234abcd1234abcd1234<br/>
branch refs/heads/master<div class="spacer">
</div>
<br/>
worktree /path/to/other-linked-worktree<br/>
HEAD 1234abc1234abc1234abc1234abc1234abc1234a<br/>
detached<br/>
</div>
<div style="height: 1.00em;">
&#160;</div>
</div>
</div>
<div class="section">
<h1>EXAMPLES</h1> You are in the middle of a refactoring session and your boss comes in and demands that you fix something immediately. You might typically use  <b>git-stash</b>(1) to store your changes away temporarily, however, your working tree is in such a state of disarray (with new, moved, and removed files, and other bits and pieces strewn around) that you don&#8217;t want to risk disturbing any of it. Instead, you create a temporary linked working tree to make the emergency fix, remove it when done, and then resume your earlier refactoring session.<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
$ git worktree add -b emergency-fix ../temp master<br/>
$ pushd ../temp<br/>
# ... hack hack hack ...<br/>
$ git commit -a -m 'emergency fix for boss'<br/>
$ popd<br/>
$ rm -rf ../temp<br/>
$ git worktree prune<br/>
</div>
<div style="height: 1.00em;">
&#160;</div>
</div>
<div class="section">
<h1>BUGS</h1> Multiple checkout in general is still experimental, and the support for submodules is incomplete. It is NOT recommended to make multiple checkouts of a superproject.<div style="height: 1.00em;">
&#160;</div>
git-worktree could provide more automation for tasks currently performed manually, such as:<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;<div style="height: 1.00em;">
&#160;</div>
remove to remove a linked working tree and its administrative files (and warn if the working tree is dirty)</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;<div style="height: 1.00em;">
&#160;</div>
mv to move or rename a working tree and update its administrative files</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;<div style="height: 1.00em;">
&#160;</div>
lock to prevent automatic pruning of administrative files (for instance, for a working tree on a portable device)</div>
</div>
<div class="section">
<h1>GIT</h1> Part of the  <b>git</b>(1) suite</div>
<table class="foot">
<tr>
<td class="foot-date">
04/03/2016</td>
<td class="foot-os">
Git 2.8.1</td>
</tr>
</table>
</div>
</body>
</html>

