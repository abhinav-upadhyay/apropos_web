<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/linux/style.css" type="text/css" media="all"/>
<title>
PERL594DELTA(1)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
PERL594DELTA(1)</td>
<td class="head-vol">
Perl Programmers Reference Guide</td>
<td class="head-rtitle">
PERL594DELTA(1)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>NAME</h1> perl594delta - what is new for perl v5.9.4</div>
<div class="section">
<h1>DESCRIPTION</h1> This document describes differences between the 5.9.3 and the 5.9.4 development releases. See perl590delta, perl591delta, perl592delta and perl593delta for the differences between 5.8.0 and 5.9.3.</div>
<div class="section">
<h1>Incompatible Changes</h1><div class="subsection">
<h2>chdir FOO</h2> A bareword argument to  <i>chdir()</i> is now recognized as a file handle. Earlier releases interpreted the bareword as a directory name. (Gisle Aas)</div>
<div class="subsection">
<h2>Handling of pmc files</h2> An old feature of perl was that before &quot;require&quot; or &quot;use&quot; look for a file with a  <i>.pm</i> extension, they will first look for a similar filename with a  <i>.pmc</i> extension. If this file is found, it will be loaded in place of any potentially existing file ending in a  <i>.pm</i> extension.<div class="spacer">
</div>
Previously, <i>.pmc</i> files were loaded only if more recent than the matching  <i>.pm</i> file. Starting with 5.9.4, they'll be always loaded if they exist. (This trick is used by Pugs.)</div>
<div class="subsection">
<h2>@- and @+ in patterns</h2> The special arrays &quot;@-&quot; and &quot;@+&quot; are no longer interpolated in regular expressions. (Sadahiro Tomoyuki)</div>
<div class="subsection">
<h2>$AUTOLOAD can now be tainted</h2> If you call a subroutine by a tainted name, and if it defers to an AUTOLOAD function, then $AUTOLOAD will be (correctly) tainted. (Rick Delaney)</div>
</div>
<div class="section">
<h1>Core Enhancements</h1><div class="subsection">
<h2><i>state()</i> variables</h2> A new class of variables has been introduced. State variables are similar to &quot;my&quot; variables, but are declared with the &quot;state&quot; keyword in place of &quot;my&quot;. They're visible only in their lexical scope, but their value is persistent: unlike &quot;my&quot; variables, they're not undefined at scope entry, but retain their previous value. (Rafael Garcia-Suarez)<div class="spacer">
</div>
To use state variables, one needs to enable them by using<div class="spacer">
</div>
<br/>
    use feature &quot;state&quot;;<br/>
<div class="spacer">
</div>
or by using the &quot;-E&quot; command-line switch in one-liners.<div class="spacer">
</div>
See &quot;Persistent variables via <i>state()</i>&quot; in perlsub.</div>
<div class="subsection">
<h2><i>UNIVERSAL::DOES()</i></h2> The &quot;UNIVERSAL&quot; class has a new method, &quot;DOES()&quot;. It has been added to solve semantic problems with the &quot;isa()&quot; method. &quot;isa()&quot; checks for inheritance, while &quot;DOES()&quot; has been designed to be overridden when module authors use other types of relations between classes (in addition to inheritance). (chromatic)<div class="spacer">
</div>
See &quot;$obj-&gt;DOES( ROLE )&quot; in UNIVERSAL.</div>
<div class="subsection">
<h2>Exceptions in constant folding</h2> The constant folding routine is now wrapped in an exception handler, and if folding throws an exception (such as attempting to evaluate 0/0), perl now retains the current optree, rather than aborting the whole program. (Nicholas Clark, Dave Mitchell)</div>
<div class="subsection">
<h2>Source filters in @INC</h2> It's possible to enhance the mechanism of subroutine hooks in @INC by adding a source filter on top of the filehandle opened and returned by the hook. This feature was planned a long time ago, but wasn't quite working until now. See &quot;require&quot; in perlfunc for details. (Nicholas Clark)</div>
<div class="subsection">
<h2>MAD</h2> MAD, which stands for  <i>Misc Attribute Decoration</i>, is a still-in-development work leading to a Perl 5 to Perl 6 converter. To enable it, it's necessary to pass the argument &quot;-Dmad&quot; to Configure. The obtained perl isn't binary compatible with a regular perl 5.9.4, and has space and speed penalties; moreover not all regression tests still pass with it. (Larry Wall, Nicholas Clark)</div>
</div>
<div class="section">
<h1>Modules and Pragmas</h1><dl>
<dt>
&#8226;</dt>
<dd>
&quot;encoding::warnings&quot; is now a lexical pragma. (Although on older perls, which don't have support for lexical pragmas, it keeps its global behaviour.) (Audrey Tang)</dd>
</dl>
<dl>
<dt>
&#8226;</dt>
<dd>
&quot;threads&quot; is now a dual-life module, also available on CPAN. It has been expanded in many ways. A  <i>kill()</i> method is available for thread signalling. One can get thread status, or the list of running or joinable threads.<div style="height: 1.00em;">
&#160;</div>
A new &quot;threads-&gt;exit()&quot; method is used to exit from the application (this is the default for the main thread) or from the current thread only (this is the default for all other threads). On the other hand, the  <i>exit()</i> built-in now always causes the whole application to terminate. (Jerry D. Hedden)</dd>
</dl>
<div class="subsection">
<h2>New Core Modules</h2><dl>
<dt>
&#8226;</dt>
<dd>
&quot;Hash::Util::FieldHash&quot;, by Anno Siegel, has been added. This module provides support for  <i>field hashes</i>: hashes that maintain an association of a reference with a value, in a thread-safe garbage-collected way. Such hashes are useful to implement inside-out objects.</dd>
</dl>
<dl>
<dt>
&#8226;</dt>
<dd>
&quot;Module::Build&quot;, by Ken Williams, has been added. It's an alternative to &quot;ExtUtils::MakeMaker&quot; to build and install perl modules.</dd>
</dl>
<dl>
<dt>
&#8226;</dt>
<dd>
&quot;Module::Load&quot;, by Jos Boumans, has been added. It provides a single interface to load Perl modules and  <i>.pl</i> files.</dd>
</dl>
<dl>
<dt>
&#8226;</dt>
<dd>
&quot;Module::Loaded&quot;, by Jos Boumans, has been added. It's used to mark modules as loaded or unloaded.</dd>
</dl>
<dl>
<dt>
&#8226;</dt>
<dd>
&quot;Package::Constants&quot;, by Jos Boumans, has been added. It's a simple helper to list all constants declared in a given package.</dd>
</dl>
<dl>
<dt>
&#8226;</dt>
<dd>
&quot;Win32API::File&quot;, by Tye McQueen, has been added (for Windows builds). This module provides low-level access to Win32 system API calls for files/dirs.</dd>
</dl>
</div>
</div>
<div class="section">
<h1>Utility Changes</h1><div class="subsection">
<h2>config_data</h2> &quot;config_data&quot; is a new utility that comes with &quot;Module::Build&quot;. It provides a command-line interface to the configuration of Perl modules that use Module::Build's framework of configurability (that is, *::ConfigData modules that contain local configuration information for their parent modules.)</div>
</div>
<div class="section">
<h1>Documentation</h1><div class="subsection">
<h2>New manpage, perlpragma</h2> The perlpragma manpage documents how to write one's own lexical pragmas in pure Perl (something that is possible starting with 5.9.4).</div>
<div class="subsection">
<h2>New manpage, perlreguts</h2> The perlreguts manpage, courtesy of Yves Orton, describes internals of the Perl regular expression engine.</div>
<div class="subsection">
<h2>New manpage, perlunitut</h2> The perlunitut manpage is an tutorial for programming with Unicode and string encodings in Perl, courtesy of Juerd Waalboer.</div>
</div>
<div class="section">
<h1>Performance Enhancements</h1><div class="subsection">
<h2>Memory optimisations</h2> Several internal data structures (typeglobs, GVs, CVs, formats) have been restructured to use less memory. (Nicholas Clark)</div>
<div class="subsection">
<h2>UTF-8 cache optimisation</h2> The UTF-8 caching code is now more efficient, and used more often. (Nicholas Clark)</div>
<div class="subsection">
<h2>Regular expressions</h2><dl>
<dt>
Engine de-recursivised</dt>
<dd>
The regular expression engine is no longer recursive, meaning that patterns that used to overflow the stack will either die with useful explanations, or run to completion, which, since they were able to blow the stack before, will likely take a very long time to happen. If you were experiencing the occasional stack overflow (or segfault) and upgrade to discover that now perl apparently hangs instead, look for a degenerate regex. (Dave Mitchell)</dd>
</dl>
<dl>
<dt>
Single char char-classes treated as literals</dt>
<dd>
Classes of a single character are now treated the same as if the character had been used as a literal, meaning that code that uses char-classes as an escaping mechanism will see a speedup. (Yves Orton)</dd>
</dl>
<dl>
<dt>
Trie optimisation of literal string alternations</dt>
<dd>
Alternations, where possible, are optimised into more efficient matching structures. String literal alternations are merged into a trie and are matched simultaneously.  This means that instead of O(N) time for matching N alternations at a given point the new code performs in O(1) time. (Yves Orton)<div style="height: 1.00em;">
&#160;</div>
<b>Note:</b> Much code exists that works around perl's historic poor performance on alternations. Often the tricks used to do so will disable the new optimisations. Hopefully the utility modules used for this purpose will be educated about these new optimisations by the time 5.10 is released.</dd>
</dl>
<dl>
<dt>
Aho-Corasick start-point optimisation</dt>
<dd>
When a pattern starts with a trie-able alternation and there aren't better optimisations available the regex engine will use Aho-Corasick matching to find the start point. (Yves Orton)</dd>
</dl>
</div>
<div class="subsection">
<h2>Sloppy stat on Windows</h2> On Windows, perl's  <i>stat()</i> function normally opens the file to determine the link count and update attributes that may have been changed through hard links. Setting ${^WIN32_SLOPPY_STAT} to a true value speeds up  <i>stat()</i> by not performing this operation. (Jan Dubois)</div>
</div>
<div class="section">
<h1>Installation and Configuration Improvements</h1><div class="subsection">
<h2>Relocatable installations</h2> There is now Configure support for creating a relocatable perl tree. If you Configure with &quot;-Duserelocatableinc&quot;, then the paths in @INC (and everything else in %Config) can be optionally located via the path of the perl executable.<div class="spacer">
</div>
That means that, if the string &quot;.../&quot; is found at the start of any path, it's substituted with the directory of $^X. So, the relocation can be configured on a per-directory basis, although the default with &quot;-Duserelocatableinc&quot; is that everything is relocated. The initial install is done to the original configured prefix.</div>
<div class="subsection">
<h2>Ports</h2> Many improvements have been made towards making Perl work correctly on z/OS.<div class="spacer">
</div>
Perl has been reported to work on DragonFlyBSD.</div>
<div class="subsection">
<h2>Compilation improvements</h2> All  <i>ppport.h</i> files in the XS modules bundled with perl are now autogenerated at build time. (Marcus Holland-Moritz)</div>
<div class="subsection">
<h2>New probes</h2> The configuration process now detects whether  <i>strlcat()</i> and <i>strlcpy()</i> are available.  When they are not available, perl's own version is used (from Russ Allbery's public domain implementation).  Various places in the perl interpreter now use them. (Steve Peters)</div>
<div class="subsection">
<h2>Windows build improvements</h2><dl>
<dt>
Building XS extensions</dt>
<dd>
Support for building XS extension modules with the free MinGW compiler has been improved in the case where perl itself was built with the Microsoft VC++ compiler. (ActiveState)</dd>
</dl>
<dl>
<dt>
Support for 64-bit compiler</dt>
<dd>
Support for building perl with Microsoft's 64-bit compiler has been improved. (ActiveState)</dd>
</dl>
</div>
</div>
<div class="section">
<h1>Selected Bug Fixes</h1><div class="subsection">
<h2>PERL5SHELL and tainting</h2> On Windows, the PERL5SHELL environment variable is now checked for taintedness. (Rafael Garcia-Suarez)</div>
<div class="subsection">
<h2>Using *FILE{IO}</h2> &quot;stat()&quot; and &quot;-X&quot; filetests now treat *FILE{IO} filehandles like *FILE filehandles. (Steve Peters)</div>
<div class="subsection">
<h2>Overloading and reblessing</h2> Overloading now works when references are reblessed into another class. Internally, this has been implemented by moving the flag for &quot;overloading&quot; from the reference to the referent, which logically is where it should always have been. (Nicholas Clark)</div>
<div class="subsection">
<h2>Overloading and UTF-8</h2> A few bugs related to UTF-8 handling with objects that have stringification overloaded have been fixed. (Nicholas Clark)</div>
<div class="subsection">
<h2>eval memory leaks fixed</h2> Traditionally, &quot;eval 'syntax error'&quot; has leaked badly. Many (but not all) of these leaks have now been eliminated or reduced. (Dave Mitchell)</div>
<div class="subsection">
<h2>Random device on Windows</h2> In previous versions, perl would read the file  <i>/dev/urandom</i> if it existed when seeding its random number generator.  That file is unlikely to exist on Windows, and if it did would probably not contain appropriate data, so perl no longer tries to read it on Windows. (Alex Davies)</div>
</div>
<div class="section">
<h1>New or Changed Diagnostics</h1><dl>
<dt>
State variable %s will be reinitialized</dt>
<dd>
One can assign initial values to state variables, but not when they're declared as a sub-part of a list assignment. See perldiag.</dd>
</dl>
</div>
<div class="section">
<h1>Changed Internals</h1> A new file,  <i>mathoms.c</i>, contains functions that aren't used anymore in the perl core, but remain around because modules out there might still use them. They come from a factorization effort: for example, many PP functions are now shared for several ops.<div class="spacer">
</div>
The implementation of the special variables $^H and %^H has changed, to allow implementing lexical pragmas in pure perl.</div>
<div class="section">
<h1>Known Problems</h1> One warning test (number 263 in  <i>lib/warnings.t</i>) fails under UTF-8 locales.<div class="spacer">
</div>
Bytecode tests fail under several platforms. We are considering removing support for byteloader and compiler before the 5.10.0 release.</div>
<div class="section">
<h1>Reporting Bugs</h1> If you find what you think is a bug, you might check the articles recently posted to the comp.lang.perl.misc newsgroup and the perl bug database at http://rt.perl.org/rt3/ .  There may also be information at http://www.perl.org/ , the Perl Home Page.<div class="spacer">
</div>
If you believe you have an unreported bug, please run the <b>perlbug</b> program included with your release.  Be sure to trim your bug down to a tiny but sufficient test case.  Your bug report, along with the output of &quot;perl -V&quot;, will be sent off to perlbug@perl.org to be analysed by the Perl porting team.</div>
<div class="section">
<h1>SEE ALSO</h1> The  <i>Changes</i> file for exhaustive details on what changed.<div class="spacer">
</div>
The <i>INSTALL</i> file for how to build Perl.<div class="spacer">
</div>
The <i>README</i> file for general stuff.<div class="spacer">
</div>
The <i>Artistic</i> and <i>Copying</i> files for copyright information.</div>
<table class="foot">
<tr>
<td class="foot-date">
2011-09-26</td>
<td class="foot-os">
perl v5.14.2</td>
</tr>
</table>
</div>
</body>
</html>

