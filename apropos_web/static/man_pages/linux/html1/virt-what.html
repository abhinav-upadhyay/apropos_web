<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/linux/style.css" type="text/css" media="all"/>
<title>
VIRT-WHAT(1)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
VIRT-WHAT(1)</td>
<td class="head-vol">
Virtualization Support</td>
<td class="head-rtitle">
VIRT-WHAT(1)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>NAME</h1> virt-what - detect if we are running in a virtual machine</div>
<div class="section">
<h1>SUMMARY</h1> virt-what [options]</div>
<div class="section">
<h1>DESCRIPTION</h1> &quot;virt-what&quot; is a shell script which can be used to detect if the program is running in a virtual machine.<div class="spacer">
</div>
The program prints out a list of &quot;facts&quot; about the virtual machine, derived from heuristics.  One fact is printed per line.<div class="spacer">
</div>
If nothing is printed and the script exits with code 0 (no error), then it can mean  <i>either</i> that the program is running on bare-metal  <i>or</i> the program is running inside a type of virtual machine which we don't know about or cannot detect.</div>
<div class="section">
<h1>FACTS</h1><dl>
<dt>
<b>hyperv</b></dt>
<dd>
This is Microsoft Hyper-V hypervisor.<div style="height: 1.00em;">
&#160;</div>
Status: confirmed by RWMJ</dd>
</dl>
<dl>
<dt>
<b>ibm_systemz</b></dt>
<dd>
This is an IBM SystemZ (or other S/390) hardware partitioning system. Additional facts listed below may also be printed.</dd>
</dl>
<dl>
<dt>
<b>ibm_systemz-direct</b></dt>
<dd>
This is Linux running directly on a IBM SystemZ hardware partitioning system.<div style="height: 1.00em;">
&#160;</div>
This is expected to be a highly unusual configuration - if you see this result you should treat it with suspicion.<div style="height: 1.00em;">
&#160;</div>
Status: not confirmed</dd>
</dl>
<dl>
<dt>
<b>ibm_systemz-lpar</b></dt>
<dd>
This is Linux running directly on an LPAR on an IBM SystemZ hardware partitioning system.<div style="height: 1.00em;">
&#160;</div>
Status: not confirmed</dd>
</dl>
<dl>
<dt>
<b>ibm_systemz-zvm</b></dt>
<dd>
This is a z/VM guest running in an LPAR on an IBM SystemZ hardware partitioning system.<div style="height: 1.00em;">
&#160;</div>
Status: confirmed by RWMJ using a Fedora guest running in z/VM</dd>
</dl>
<dl>
<dt>
<b>linux_vserver</b></dt>
<dd>
This process is running in a Linux VServer container.<div style="height: 1.00em;">
&#160;</div>
Status: contributed by BarXX Metin</dd>
</dl>
<dl>
<dt>
<b>kvm</b></dt>
<dd>
This guest is running on the KVM hypervisor using hardware acceleration.<div style="height: 1.00em;">
&#160;</div>
Note that if the hypervisor is using software acceleration you should  <i>not</i> see this, but should see the &quot;qemu&quot; fact instead.<div style="height: 1.00em;">
&#160;</div>
Status: confirmed by RWMJ.</dd>
</dl>
<dl>
<dt>
<b>openvz</b></dt>
<dd>
The guest appears to be running inside an OpenVZ or Virtuozzo container.<div style="height: 1.00em;">
&#160;</div>
Status: contributed by Evgeniy Sokolov</dd>
</dl>
<dl>
<dt>
<b>parallels</b></dt>
<dd>
The guest is running inside Parallels Virtual Platform (Parallels Desktop, Parallels Server).<div style="height: 1.00em;">
&#160;</div>
Status: contributed by Justin Clift</dd>
</dl>
<dl>
<dt>
<b>powervm_lx86</b></dt>
<dd>
The guest is running inside IBM PowerVM Lx86 Linux/x86 emulator.<div style="height: 1.00em;">
&#160;</div>
Status: data originally supplied by Jeffrey Scheel, confimed by Yufang Zhang and RWMJ</dd>
</dl>
<dl>
<dt>
<b>qemu</b></dt>
<dd>
This is QEMU hypervisor using software emulation.<div style="height: 1.00em;">
&#160;</div>
Note that for KVM (hardware accelerated) guests you should <i>not</i> see this.<div style="height: 1.00em;">
&#160;</div>
Status: confirmed by RWMJ.</dd>
</dl>
<dl>
<dt>
<b>uml</b></dt>
<dd>
This is a User-Mode Linux (UML) guest.<div style="height: 1.00em;">
&#160;</div>
Status: contributed by Laurent Leonard</dd>
</dl>
<dl>
<dt>
<b>virt</b></dt>
<dd>
Some sort of virtualization appears to be present, but we are not sure what it is.  In some very rare corner cases where we know that virtualization is hard to detect, we will try a timing attack to see if certain machine instructions are running much more slowly than they should be, which would indicate virtualization.  In this case, the generic fact &quot;virt&quot; is printed.</dd>
</dl>
<dl>
<dt>
<b>virtage</b></dt>
<dd>
This is Hitachi Virtualization Manager (HVM) Virtage hardware partitioning system.<div style="height: 1.00em;">
&#160;</div>
Status: data supplied by Bhavna Sarathy, not confirmed</dd>
</dl>
<dl>
<dt>
<b>virtualbox</b></dt>
<dd>
This is a VirtualBox guest.<div style="height: 1.00em;">
&#160;</div>
Status: contributed by Laurent Leonard</dd>
</dl>
<dl>
<dt>
<b>virtualpc</b></dt>
<dd>
The guest appears to be running on Microsoft VirtualPC.<div style="height: 1.00em;">
&#160;</div>
Status: not confirmed</dd>
</dl>
<dl>
<dt>
<b>vmware</b></dt>
<dd>
The guest appears to be running on VMware hypervisor.<div style="height: 1.00em;">
&#160;</div>
Status: confirmed by RWMJ</dd>
</dl>
<dl>
<dt>
<b>xen</b></dt>
<dd>
The guest appears to be running on Xen hypervisor.<div style="height: 1.00em;">
&#160;</div>
Status: confirmed by RWMJ</dd>
</dl>
<dl>
<dt>
<b>xen-dom0</b></dt>
<dd>
This is the Xen dom0 (privileged domain).<div style="height: 1.00em;">
&#160;</div>
Status: confirmed by RWMJ</dd>
</dl>
<dl>
<dt>
<b>xen-domU</b></dt>
<dd>
This is a Xen domU (paravirtualized guest domain).<div style="height: 1.00em;">
&#160;</div>
Status: confirmed by RWMJ</dd>
</dl>
<dl>
<dt>
<b>xen-hvm</b></dt>
<dd>
This is a Xen guest fully virtualized (HVM).<div style="height: 1.00em;">
&#160;</div>
Status: confirmed by RWMJ</dd>
</dl>
</div>
<div class="section">
<h1>EXIT STATUS</h1> Programs that use or wrap &quot;virt-what&quot; should check that the exit status is 0 before they attempt to parse the output of the command.<div class="spacer">
</div>
A non-zero exit status indicates some error, for example, an unrecognized command line argument.  If the exit status is non-zero then the output &quot;facts&quot; (if any were printed) cannot be guaranteed and should be ignored.<div class="spacer">
</div>
The exit status does <i>not</i> have anything to do with whether the program is running on baremetal or under virtualization, nor with whether &quot;virt-what&quot; managed detection &quot;correctly&quot; (which is basically unknowable given the large variety of virtualization systems out there and that some systems deliberately emulate others).</div>
<div class="section">
<h1>RUNNING VIRT-WHAT FROM OTHER PROGRAMS</h1> &quot;virt-what&quot; is designed so that you can easily run it from other programs or wrap it up in a library.<div class="spacer">
</div>
Your program should check the exit status (see the section above).<div class="spacer">
</div>
Some programming languages (notably Python: issue 1652) erroneously mask the &quot;SIGPIPE&quot; signal and do not restore it when executing subprocesses.  &quot;virt-what&quot; is a shell script and some shell commands do not work correctly when you do this.  You may see warnings from &quot;virt-what&quot; similar to this:<div class="spacer">
</div>
<br/>
 echo: write error: Broken pipe<br/>
<div class="spacer">
</div>
The solution is to set the &quot;SIGPIPE&quot; signal handler back to &quot;SIG_DFL&quot; before running &quot;virt-what&quot;.</div>
<div class="section">
<h1>IMPORTANT NOTE</h1> Most of the time, using this program is the  <i>wrong</i> thing to do. Instead you should detect the specific features you actually want to use.  (As an example, if you wanted to issue Xen hypervisor commands you would look for the &quot;/proc/xen/privcmd&quot; file).<div class="spacer">
</div>
However people keep asking for this, so we provide it.  There are a few legitimate uses:<dl>
<dt>
Bug reporting tool</dt>
<dd>
If you think that virtualization could affect how your program runs, then you might use &quot;virt-what&quot; to report this in a bug reporting tool.</dd>
</dl>
<dl>
<dt>
Status display and monitoring tools</dt>
<dd>
You might include this information in status and monitoring programs.</dd>
</dl>
</div>
<div class="section">
<h1>SEE ALSO</h1> http://people.redhat.com/~rjones/virt-what/ &lt;http://people.redhat.com/~rjones/virt-what/&gt;, &lt;http://www.vmware.com/&gt;, &lt;http://www.microsoft.com/windows/products/winfamily/virtualpc&gt;, &lt;http://xensource.com/&gt;, &lt;http://bellard.org/qemu/&gt;, &lt;http://kvm.qumranet.com/&gt;, &lt;http://openvz.org/&gt;</div>
<div class="section">
<h1>AUTHORS</h1> Richard W.M. Jones &lt;rjones @ redhat . com&gt;</div>
<div class="section">
<h1>COPYRIGHT</h1> (C) Copyright 2008-2011 Red Hat Inc., http://people.redhat.com/~rjones/virt-what/ &lt;http://people.redhat.com/~rjones/virt-what/&gt;<div class="spacer">
</div>
This program is free software; you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation; either version 2 of the License, or (at your option) any later version.<div class="spacer">
</div>
This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License for more details.<div class="spacer">
</div>
You should have received a copy of the GNU General Public License along with this program; if not, write to the Free Software Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.</div>
<div class="section">
<h1>REPORTING BUGS</h1> Bugs can be viewed on the Red Hat Bugzilla page: &lt;https://bugzilla.redhat.com/&gt;.<div class="spacer">
</div>
If you find a bug in virt-what, please follow these steps to report it:<dl>
<dt>
1. Check for existing bug reports</dt>
<dd>
Go to &lt;https://bugzilla.redhat.com/&gt; and search for similar bugs. Someone may already have reported the same bug, and they may even have fixed it.</dd>
</dl>
<dl>
<dt>
2. Capture debug and error messages</dt>
<dd>
Run<div style="height: 1.00em;">
&#160;</div>
<br/>
 virt-what &gt; virt-what.log 2&gt;&amp;1<br/>
<div style="height: 1.00em;">
&#160;</div>
and keep <i>virt-what.log</i>.  It may contain error messages which you should submit with your bug report.</dd>
</dl>
<dl>
<dt>
3. Get version of virt-what.</dt>
<dd>
Run<div style="height: 1.00em;">
&#160;</div>
<br/>
 virt-what --version<br/>
</dd>
</dl>
<dl>
<dt>
4. Submit a bug report.</dt>
<dd>
Go to &lt;https://bugzilla.redhat.com/&gt; and enter a new bug. Please describe the problem in as much detail as possible.<div style="height: 1.00em;">
&#160;</div>
Remember to include the version numbers (step 3) and the debug messages file (step 2) and as much other detail as possible.</dd>
</dl>
<dl>
<dt>
5. Assign the bug to rjones @ redhat.com</dt>
<dd>
Assign or reassign the bug to <b>rjones @ redhat.com</b> (without the spaces).  You can also send me an email with the bug number if you want a faster response.</dd>
</dl>
</div>
<table class="foot">
<tr>
<td class="foot-date">
2011-05-26</td>
<td class="foot-os">
virt-what-1.11</td>
</tr>
</table>
</div>
</body>
</html>

