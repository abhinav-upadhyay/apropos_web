<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/linux/style.css" type="text/css" media="all"/>
<title>
ecryptfs-setup-private(1)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
ecryptfs-setup-private(1)</td>
<td class="head-vol">
eCryptfs</td>
<td class="head-rtitle">
ecryptfs-setup-private(1)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>NAME</h1> ecryptfs-setup-private - setup an eCryptfs private directory.<div style="height: 1.00em;">
&#160;</div>
</div>
<div class="section">
<h1>SYNOPSIS</h1> <b>ecryptfs-setup-private [-f|--force] [-w|--wrapping] [-b|--bootstrap] [-n|--no-fnek] [--nopwcheck] [-u|--username USER] [-l|--loginpass LOGINPASS] [-m|--mountpass MOUNTPASS]</b><div style="height: 1.00em;">
&#160;</div>
</div>
<div class="section">
<h1>OPTIONS</h1> Options available for the  <b>ecryptfs-setup-private</b> command:<dl>
<dt>
<b>-f, --force</b></dt>
<dd>
Force overwriting of an existing setup</dd>
</dl>
<dl>
<dt>
<b>-w, --wrapping</b></dt>
<dd>
Use an independent wrapping passphrase, different from the login passphrase</dd>
</dl>
<dl>
<dt>
<b>-u, --username USER</b></dt>
<dd>
User to setup, default is current user if omitted</dd>
</dl>
<dl>
<dt>
<b>-l, --loginpass LOGINPASS</b></dt>
<dd>
System passphrase for USER, used to wrap MOUNTPASS, will interactively prompt if omitted</dd>
</dl>
<dl>
<dt>
<b>-m, --mountpass MOUNTPASS</b></dt>
<dd>
Passphrase for mounting the ecryptfs directory, default is 16 bytes from /dev/urandom if omitted</dd>
</dl>
<dl>
<dt>
<b>-b, --bootstrap</b></dt>
<dd>
Bootstrap a new user's entire home directory</dd>
</dl>
<dl>
<dt>
<b>--undo</b></dt>
<dd>
Display instructions on how to undo an encrypted private setup</dd>
</dl>
<dl>
<dt>
<b>-n, --no-fnek</b></dt>
<dd>
Do not encrypt filenames; otherwise, filenames will be encrypted on systems which support filename encryption</dd>
</dl>
<dl>
<dt>
<b>--nopwcheck</b></dt>
<dd>
Do not check the validity of the specified login password (useful for LDAP user accounts)</dd>
</dl>
<dl>
<dt>
<b>--noautomount</b></dt>
<dd>
Setup this user such that the encrypted private directory is not automatically mounted on login</dd>
</dl>
<dl>
<dt>
<b>--noautoumount</b></dt>
<dd>
Setup this user such that the encrypted private directory is not automatically unmounted at logout<div style="height: 1.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
</div>
<div class="section">
<h1>DESCRIPTION</h1>  <b>ecryptfs-setup-private</b> is a program that sets up a private cryptographic mountpoint for a non-root user.<div style="height: 1.00em;">
&#160;</div>
Be sure to properly escape your parameters according to your shell's special character nuances, and also surround the parameters by double quotes, if necessary. Any of the parameters may be:<div style="height: 1.00em;">
&#160;</div>
<br/>
  1) exported as environment variables<br/>
  2) specified on the command line<br/>
  3) left empty and interactively prompted<div style="height: 1.00em;">
&#160;</div>
<b>The user SHOULD ABSOLUTELY RECORD THE MOUNT PASSPHRASE AND STORE IN A SAFE LOCATION.  If the mount passphase file is lost, or the mount passphrase is forgotten, THERE IS NO WAY TO RECOVER THE ENCRYPTED DATA.</b><div style="height: 1.00em;">
&#160;</div>
Using the values of USER, MOUNTPASS, and LOGINPASS, <b>ecryptfs-setup-private</b> will:<br/>
  - Create ~/.Private (permission 700)<br/>
  - Create ~/Private (permission 500)<br/>
  - Backup any existing wrapped passphrases<br/>
  - Use LOGINPASS to wrap and encrypt MOUNTPASS<br/>
  - Write to ~/.ecryptfs/wrapped-passphrase<br/>
  - Add the passphrase to the current keyring<br/>
  - Write the passphrase signature to ~/.ecryptfs/Private.sig<br/>
  - Test the cryptographic mount with a few reads and writes<div style="height: 1.00em;">
&#160;</div>
The system administrator can add the pam_ecryptfs.so module to the PAM stack which will automatically use the login passphrase to unwrap the mount passphrase, add the passphrase to the user's kernel keyring, and automatically perform the mount. See <b>pam_ecryptfs</b>(8).<div style="height: 1.00em;">
&#160;</div>
</div>
<div class="section">
<h1>FILES</h1>  <i>~/.ecryptfs/auto-mount</i><div style="height: 1.00em;">
&#160;</div>
<i>~/.Private</i> - underlying directory containing encrypted data<div style="height: 1.00em;">
&#160;</div>
<i>~/Private</i> - mountpoint containing decrypted data (when mounted)<div style="height: 1.00em;">
&#160;</div>
<i>~/.ecryptfs/Private.sig</i> - file containing signature of mountpoint passphrase<div style="height: 1.00em;">
&#160;</div>
<i>~/.ecryptfs/Private.mnt</i> - file containing path of the private directory mountpoint<div style="height: 1.00em;">
&#160;</div>
<i>~/.ecryptfs/wrapped-passphrase</i> - file containing the mount passphrase, wrapped with the login passphrase<div style="height: 1.00em;">
&#160;</div>
<i>~/.ecryptfs/wrapping-independent</i> - this file exists if the wrapping passphrase is independent from login passphrase<div style="height: 1.00em;">
&#160;</div>
</div>
<div class="section">
<h1>SEE ALSO</h1><dl>
<dt>
<b>ecryptfs-rewrap-passphrase</b>(1), <b>mount.ecryptfs_private</b>(1), <b>pam_ecryptfs</b>(8), <b>umount.ecryptfs_private</b>(1)</dt>
<dd>
<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
<i>/usr/share/doc/ecryptfs-utils/ecryptfs-faq.html</i></dt>
<dd>
<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
<i>http://launchpad.net/ecryptfs/</i></dt>
<dd>
<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
</div>
<div class="section">
<h1>AUTHOR</h1> This manpage and the  <b>ecryptfs-setup-private</b> utility was written by Dustin Kirkland &lt;kirkland@ubuntu.com&gt; for Ubuntu systems (but may be used by others).  Permission is granted to copy, distribute and/or modify this document under the terms of the GNU General Public License, Version 2 or any later version published by the Free Software Foundation.<div style="height: 1.00em;">
&#160;</div>
On Debian systems, the complete text of the GNU General Public License can be found in /usr/share/common-licenses/GPL.</div>
<table class="foot">
<tr>
<td class="foot-date">
2008-11-17</td>
<td class="foot-os">
ecryptfs-utils</td>
</tr>
</table>
</div>
</body>
</html>

