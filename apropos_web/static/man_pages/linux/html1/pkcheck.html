<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/linux/style.css" type="text/css" media="all"/>
<title>
PKCHECK(1)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
PKCHECK(1)</td>
<td class="head-vol">
pkcheck</td>
<td class="head-rtitle">
PKCHECK(1)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>NAME</h1> pkcheck - Check whether a process is authorized</div>
<div class="section">
<h1>SYNOPSIS</h1><div style="margin-left: 8.00ex;text-indent: -8.00ex;" class="spacer">
<b>pkcheck</b> [<b>--version</b>] [<b>--help</b>]</div>
<div class="spacer">
</div>
<div style="margin-left: 8.00ex;text-indent: -8.00ex;" class="spacer">
<b>pkcheck</b> [<b>--list-temp</b>]</div>
<div class="spacer">
</div>
<div style="margin-left: 8.00ex;text-indent: -8.00ex;" class="spacer">
<b>pkcheck</b> [<b>--revoke-temp</b>]</div>
<div class="spacer">
</div>
<div style="margin-left: 8.00ex;text-indent: -8.00ex;" class="spacer">
<b>pkcheck</b> <b>--action-id</b>&#160;<i>action</i> {<b>--process</b>&#160;{&#160;<i>pid</i>&#160;|&#160;<i>pid,pid-start-time</i>&#160;|&#160;<i>pid,pid-start-time,uid</i>&#160;} | <b>--system-bus-name</b>&#160;<i>busname</i>} [<b>--allow-user-interaction</b>] [<b>--enable-internal-agent</b>] [<b>--detail</b>&#160;<i>key</i>&#160;<i>value</i>...]</div>
</div>
<div class="section">
<h1>DESCRIPTION</h1><div style="height: 1.00em;">
&#160;</div>
<b>pkcheck</b> is used to check whether a process, specified by either  <b>--process</b> (see below) or  <b>--system-bus-name</b>, is authorized for  <i>action</i>. The  <b>--detail</b> option can be used zero or more times to pass details about  <i>action</i>. If  <b>--allow-user-interaction</b> is passed,  <b>pkcheck</b> blocks while waiting for authentication.<div class="spacer">
</div>
The invocation  <b>pkcheck --list-temp</b> will list all temporary authorizations for the current session and  <b>pkcheck --revoke-temp</b> will revoke all temporary authorizations for the current session.<div class="spacer">
</div>
This command is a simple wrapper around the PolicyKit D-Bus interface; see the D-Bus interface documentation for details.</div>
<div class="section">
<h1>RETURN VALUE</h1> If the specified process is authorized,  <b>pkcheck</b> exits with a return value of 0. If the authorization result contains any details, these are printed on standard output as key/value pairs using environment style reporting, e.g. first the key followed by a an equal sign, then the value followed by a newline.<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
KEY1=VALUE1<br/>
KEY2=VALUE2<br/>
KEY3=VALUE3<br/>
...<br/>
</div>
<div style="height: 1.00em;">
&#160;</div>
Octects that are not in [a-zA-Z0-9_] are escaped using octal codes prefixed with  <i>\</i>. For example, the UTF-8 string  <i>f&#248;l,&#20320;&#22909;</i> will be printed as  <i>f\303\270l\54\344\275\240\345\245\275</i>.<div class="spacer">
</div>
If the specificied process is not authorized,  <b>pkcheck</b> exits with a return value of 1 and a diagnostic message is printed on standard error. Details are printed on standard output.<div class="spacer">
</div>
If the specificied process is not authorized because no suitable authentication agent is available or if the  <b>--allow-user-interaction</b> wasn't passed,  <b>pkcheck</b> exits with a return value of 2 and a diagnostic message is printed on standard error. Details are printed on standard output.<div class="spacer">
</div>
If the specificied process is not authorized because the authentication dialog / request was dismissed by the user,  <b>pkcheck</b> exits with a return value of 3 and a diagnostic message is printed on standard error. Details are printed on standard output.<div class="spacer">
</div>
If an error occured while checking for authorization,  <b>pkcheck</b> exits with a return value of 127 with a diagnostic message printed on standard error.<div class="spacer">
</div>
If one or more of the options passed are malformed,  <b>pkcheck</b> exits with a return value of 126. If stdin is a tty, then this manual page is also shown.</div>
<div class="section">
<h1>NOTES</h1> Do not use either the bare  <i>pid</i> or  <i>pid,start-time</i> syntax forms for  <b>--process</b>. There are race conditions in both. New code should always use  <i>pid,pid-start-time,uid</i>. The value of  <i>start-time</i> can be determined by consulting e.g. the  <b>proc</b>(5) file system depending on the operating system. If fewer than 3 arguments are passed,  <b>pkcheck</b> will attempt to look up them up internally, but note that this may be racy.<div class="spacer">
</div>
If your program is a daemon with e.g. a custom Unix domain socket, you should determine the  <i>uid</i> parameter via operating system mechanisms such as PEERCRED.</div>
<div class="section">
<h1>AUTHENTICATION AGENT</h1><div style="height: 1.00em;">
&#160;</div>
<b>pkcheck</b>, like any other PolicyKit application, will use the authentication agent registered for the process in question. However, if no authentication agent is available, then  <b>pkcheck</b> can register its own textual authentication agent if the option  <b>--enable-internal-agent</b> is passed.</div>
<div class="section">
<h1>AUTHOR</h1> Written by David Zeuthen davidz@redhat.com with a lot of help from many others.</div>
<div class="section">
<h1>BUGS</h1> Please send bug reports to either the distribution or the polkit-devel mailing list, see the link  <b>http://lists.freedesktop.org/mailman/listinfo/polkit-devel</b> on how to subscribe.</div>
<div class="section">
<h1>SEE ALSO</h1><div style="height: 1.00em;">
&#160;</div>
<b>polkit</b>(8),  <b>pkaction</b>(1),  <b>pkexec</b>(1)</div>
<table class="foot">
<tr>
<td class="foot-date">
May 2009</td>
<td class="foot-os">
polkit</td>
</tr>
</table>
</div>
</body>
</html>

