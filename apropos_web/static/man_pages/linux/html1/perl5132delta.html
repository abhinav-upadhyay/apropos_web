<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/linux/style.css" type="text/css" media="all"/>
<title>
PERL5132DELTA(1)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
PERL5132DELTA(1)</td>
<td class="head-vol">
Perl Programmers Reference Guide</td>
<td class="head-rtitle">
PERL5132DELTA(1)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>NAME</h1> perl5132delta - what is new for perl v5.13.2</div>
<div class="section">
<h1>DESCRIPTION</h1> This document describes differences between the 5.13.2 release and the 5.13.1 release.<div class="spacer">
</div>
If you are upgrading from an earlier release such as 5.10, first read perl5120delta, which describes differences between 5.10 and 5.12.</div>
<div class="section">
<h1>Incompatible Changes</h1><div class="subsection">
<h2>localised tied scalars are tied again.</h2> The change in behaviour in 5.13.1 of localising tied scalar values has been reverted to the existing 5.12.0 and earlier behaviour (the change for arrays and hashes remains).</div>
<div class="subsection">
<h2>Naming fixes in Policy_sh.SH may invalidate Policy.sh</h2> Several long-standing typos and naming confusions in Policy_sh.SH have been fixed, standardizing on the variable names used in config.sh.<div class="spacer">
</div>
This will change the behavior of Policy.sh if you happen to have been accidentally relying on the Policy.sh incorrect behavior. We'd appreciate feedback from anyone using Policy.sh to be sure nothing is broken by this change (c1bd23).</div>
<div class="subsection">
<h2>Stashes are now always defined</h2> &quot;defined %Foo::&quot; now always returns true, even when no symbols have yet been defined in that package.<div class="spacer">
</div>
This is a side effect of removing a special case kludge in the tokeniser, added for 5.10.0, to hide side effects of changes to the internal storage of hashes that to drastically reduce their memory usage overhead.<div class="spacer">
</div>
Calling defined on a stash has been deprecated since 5.6.0, warned on lexicals since 5.6.0, and has warned for stashes (and other package variables) since 5.12.0. &quot;defined %hash&quot; has always exposed an implementation detail - emptying a hash by deleting all entries from it does not make &quot;defined %hash&quot; false, hence &quot;defined %hash&quot; is not valid code to determine whether an arbitrary hash is empty. Instead, use the behaviour that an empty %hash always returns false in a scalar context.</div>
</div>
<div class="section">
<h1>Core Enhancements</h1><div class="subsection">
<h2>Non-destructive substitution</h2> The substitution operator now supports a &quot;/r&quot; option that copies the input variable, carries out the substitution on the copy and returns the result.  The original remains unmodified.<div class="spacer">
</div>
<br/>
  my $old = 'cat';<br/>
  my $new = $old =~ s/cat/dog/r;<br/>
  # $old is 'cat' and $new is 'dog'<br/>
<div class="spacer">
</div>
This is particularly useful with &quot;map&quot;.  See perlop for more examples (4f4d75, 000c65).</div>
<div class="subsection">
<h2>package block syntax</h2> A package declaration can now contain a code block, in which case the declaration is in scope only inside that block.  So &quot;package Foo { ... }&quot; is precisely equivalent to &quot;{ package Foo; ... }&quot;.  It also works with a version number in the declaration, as in &quot;package Foo 1.2 { ... }&quot;. See perlfunc (434da3..36f77d, 702646).</div>
<div class="subsection">
<h2>CLONE_PARAMS structure added to ease correct thread creation</h2> Modules that create threads should now create &quot;CLONE_PARAMS&quot; structures by calling the new function &quot;Perl_clone_params_new()&quot;, and free them with &quot;Perl_clone_params_del()&quot;. This will ensure compatibility with any future changes to the internals of the &quot;CLONE_PARAMS&quot; structure layout, and that it is correctly allocated and initialised.</div>
<div class="subsection">
<h2>perl -h no longer recommends -w</h2> perl -h used to mark the -w option as recommended; since this option is far less useful than it used to be due to lexical 'use warnings' and since perl -h is primary a list and brief explanation of the command line switches, the recommendation has now been removed (60eaec).</div>
</div>
<div class="section">
<h1>Modules and Pragmata</h1><div class="subsection">
<h2>Updated Modules</h2>  <i>Locale-Codes 3.13</i><div class="spacer">
</div>
Locale::Country, Locale::Language and Locale::Currency were updated from 3.12 to 3.13 of the Locale-Codes distribution to include locale code changes (e1137b).<div class="spacer">
</div>
<i>Thread-Semaphore 2.11</i><div class="spacer">
</div>
Added new methods -&gt;<i>down_nb()</i> and -&gt;<i>down_force()</i> at the suggestion of Rick Garlick.<div class="spacer">
</div>
Refactored methods to skip argument validation when no argument is supplied.<div class="spacer">
</div>
(04febe, f06daa)<div class="spacer">
</div>
<i>CPAN.pm 1.94_57</i><dl>
<dt>
&#8226;</dt>
<dd>
release 1.94_57</dd>
</dl>
<dl>
<dt>
&#8226;</dt>
<dd>
bugfix: treat modules correctly that are deprecated in perl 5.12.</dd>
</dl>
<dl>
<dt>
&#8226;</dt>
<dd>
bugfix: RT #57482 and #57788 revealed that configure_requires implicitly assumed build_requires instead of normal requires. (Reported by Andrew Whatson and Father Chrysostomos respectively)</dd>
</dl>
<dl>
<dt>
&#8226;</dt>
<dd>
testfix: solaris should run the tests without expect because (some?) solaris have a broken expect</dd>
</dl>
<dl>
<dt>
&#8226;</dt>
<dd>
testfix: run tests with cache_metadata off to prevent spill over effects from previous test runs</dd>
</dl>
<div class="spacer">
</div>
(742adb)<div class="spacer">
</div>
<i>Hash::Util warning fix</i><div class="spacer">
</div>
Hash::Util now enables &quot;no warnings 'uninitialized'&quot; to suppress spurious warnings from undefined hash values (RT #74280).<div class="spacer">
</div>
<i>B::Deparse now handles 'no VERSION'</i><div class="spacer">
</div>
The 'no 5.13.2' or similar form is now correctly handled by B::Deparse.<div class="spacer">
</div>
<i>IO::Socket doc additions</i><div class="spacer">
</div>
getsockopt and setsockopt are now documented.<div class="spacer">
</div>
<i>B::Concise updated for OPpDEREF</i><div class="spacer">
</div>
B::Concise marks rv2sv, rv2av and rv2hv ops with the new OPpDEREF flag as &quot;DREFed&quot;.<div class="spacer">
</div>
<i>File::Copy doc clarification</i><div class="spacer">
</div>
An extra stanza was added explaining behaviours when the copy destination already exists and is a directory.<div class="spacer">
</div>
<i>Multiple POD spelling fixes.</i><div class="spacer">
</div>
Fixes were made to VMS::DCLsym, mro, Search::Dist, B::t::OptreeCheck and UNIVERSAL.</div>
</div>
<div class="section">
<h1>Changes to Existing Documentation</h1><div class="subsection">
<h2>Replace wrong tr/// table in perlebcdic.pod</h2> perlebcdic.pod contains a helpful table to use in tr/// to convert between EBCDIC and Latin1/ASCII.  Unfortunately, the table was the inverse of the one it describes, though the code that used the table worked correctly for the specific example given.<div class="spacer">
</div>
The table has been changed to its inverse, and the sample code changed to correspond, as this is easier for the person trying to follow the instructions since deriving the old table is somewhat more complicated.<div class="spacer">
</div>
The table has also been changed to hex from octal, as that is more the norm these days, and the recipes in the pod altered to print out leading zeros to make all the values the same length, as the table that they can generate has them (5f26d5).</div>
<div class="subsection">
<h2>Document tricks for user-defined casing</h2> perlunicode.pod now contains an explanation of how to override, mangle and otherwise tweak the way perl handles upper, lower and other case conversions on unicode data, and how to provide scoped changes to alter one's own code's behaviour without stomping on anybody else (71648f).</div>
<div class="subsection">
<h2>Document $# and $* as removed and clarify $#array usage</h2> $# and $* were both disabled as of perl5 version 10; this release adds documentation to that effect, a description of the results of continuing to try and use them, and a note explaining that $# can also function as a sigil in the $#array form (7f315d2).</div>
<div class="subsection">
<h2>INSTALL explicitly states the requirement for C89</h2> This was already true but it's now Officially Stated For The Record (51eec7).</div>
<div class="subsection">
<h2>No longer advertise Math::TrulyRandom</h2> This module hasn't been updated since 1996 so we can't recommend it any more (83918a).</div>
<div class="subsection">
<h2>perlfaq synchronised to upstream</h2> The FAQ has been updated to commit 37550b8f812e591bcd0dd869d61677dac5bda92c from the perlfaq repository at git@github.com:briandfoy/perlfaq.git</div>
</div>
<div class="section">
<h1>Performance Enhancements</h1> Only allocate entries for @_ on demand - this not only saves memory per subroutine defined but should hopefully improve COW behaviour (77bac2).<div class="subsection">
<h2>Multiple small improvements to threads</h2> The internal structures of threading now make fewer API calls and fewer allocations, resulting in noticeably smaller object code. Additionally, many thread context checks have been deferred so that they're only done when required (although this is only possible for non-debugging builds).</div>
<div class="subsection">
<h2>Size optimisations to SV and HV structures</h2> xhv_fill has been eliminated from struct xpvhv, saving 1 IV per hash and on some systems will cause struct xpvhv to become cache aligned. To avoid this memory saving causing a slowdown elsewhere, boolean use of HvFILL now calls HvTOTALKEYS instead (which is equivalent) - so while the fill data when actually required is now calculated on demand, the cases when this needs to be done should be few and far between (f4431c .. fcd245).<div class="spacer">
</div>
The order of structure elements in SV bodies has changed. Effectively, the NV slot has swapped location with STASH and MAGIC. As all access to SV members is via macros, this should be completely transparent. This change allows the space saving for PVHVs documented above, and may reduce the memory allocation needed for PVIVs on some architectures.</div>
<div class="subsection">
<h2>Optimisation of regexp engine string comparison work</h2> The foldEQ_utf8 API function for case-insensitive comparison of strings (which is used heavily by the regexp engine) was substantially refactored and optimised - and its documentation much improved as a free bonus gift (8b3587, e6226b).</div>
<div class="subsection">
<h2>Memory consumption improvements to Exporter</h2> The @EXPORT_FAIL AV is no longer created unless required, hence neither is the typeglob backing it - this saves about 200 bytes per Exporter using package that doesn't use this functionality.</div>
</div>
<div class="section">
<h1>Installation and Configuration Improvements</h1><div class="subsection">
<h2>Compilation improvements</h2> Fix CCINCDIR and CCLIBDIR for mingw64 cross compiler to correctly be under $(CCHOME)\mingw\include and \lib rather than immediately below $(CCHOME).<div class="spacer">
</div>
This means the 'incpath', 'libpth', 'ldflags', 'lddlflags' and 'ldflags_nolargefiles' values in Config.pm and Config_heavy.pl are now set correctly (23ae7f).</div>
</div>
<div class="section">
<h1>Selected Bug Fixes</h1><dl>
<dt>
&#8226;</dt>
<dd>
Timely cleanup of SVs that are cloned into a new thread but then discovered to be orphaned (i.e. their owners are -not- cloned) (e42956)</dd>
</dl>
<dl>
<dt>
&#8226;</dt>
<dd>
Don't accidentally clone lexicals in scope within active stack frames in the parent when creating a child thread (RT #73086) (05d04d).</dd>
</dl>
<dl>
<dt>
&#8226;</dt>
<dd>
Avoid loading feature.pm when 'no 5.13.2;' or similar is encountered (faee19).</dd>
</dl>
<dl>
<dt>
&#8226;</dt>
<dd>
Trap invalid use of SvIVX on SVt_REGEXP when assertions are on (e77da3)</dd>
</dl>
<dl>
<dt>
&#8226;</dt>
<dd>
Don't stamp on $DB::single, $DB::trace and $DB::signal if they already have values when $^P is assigned to (RT #72422) (4c0f30).</dd>
</dl>
<dl>
<dt>
&#8226;</dt>
<dd>
chop now correctly handles perl's extended UTF-8 (RT #73246) (65ab92)</dd>
</dl>
<dl>
<dt>
&#8226;</dt>
<dd>
Defer signal handling when shared SV locks are held to avoid deadlocks (RT #74868) (65c742).</dd>
</dl>
<dl>
<dt>
&#8226;</dt>
<dd>
<i>glob()</i> no longer crashes when %File::Glob:: is empty and CORE::GLOBAL::glob isn't present (4984aa).</dd>
</dl>
<dl>
<dt>
&#8226;</dt>
<dd>
perlbug now always permits the sender address to be changed before sending - if you were having trouble sending bug reports before now, this should fix it, we hope (e6eb90).</dd>
</dl>
<dl>
<dt>
&#8226;</dt>
<dd>
Overloading now works properly in conjunction with tied variables. What formerly happened was that most ops checked their arguments for overloading  <i>before</i> checking for magic, so for example an overloaded object returned by a tied array access would usually be treated as not overloaded (RT #57012) (6f1401, ed3b9b, 6a5f8c .. 24328f).</dd>
</dl>
<dl>
<dt>
&#8226;</dt>
<dd>
Independently, a bug was fixed that prevented $tied-&gt;() from always calling FETCH correctly (RT #8438) (7c7501)</dd>
</dl>
</div>
<div class="section">
<h1>Changed Internals</h1><dl>
<dt>
&#8226;</dt>
<dd>
The implementation of <i>sv_dup_inc()</i> has changed from a macro to a function.</dd>
</dl>
<dl>
<dt>
&#8226;</dt>
<dd>
The &quot;find_rundefsvoffset&quot; function has been deprecated. It appeared that its design was insufficient to reliably get the lexical $_ at run-time.<div style="height: 1.00em;">
&#160;</div>
Use the new &quot;find_rundefsv&quot; function or the &quot;UNDERBAR&quot; macro instead. They directly return the right SV representing $_, whether it's lexical or dynamic (789bd8 .. 03d5bc).</dd>
</dl>
<dl>
<dt>
&#8226;</dt>
<dd>
The following new functions or macros have been added to the public API: &quot;SvNV_nomg&quot;,  &quot;sv_2nv_flags&quot;, &quot;find_rundefsv&quot;.</dd>
</dl>
<dl>
<dt>
&#8226;</dt>
<dd>
The &quot;UNDERBAR&quot; macro now calls &quot;find_rundefsv&quot;. &quot;dUNDERBAR&quot; is now a noop but should still be used to ensure past and future compatibility.</dd>
</dl>
<dl>
<dt>
&#8226;</dt>
<dd>
The ibcmp_* functions have been renamed and are now called foldEQ, foldEQ_locale and foldEQ_utf8 (e6226b).</dd>
</dl>
</div>
<div class="section">
<h1>Deprecations</h1> The following items are now deprecated.<dl>
<dt>
&#8226;</dt>
<dd>
Omitting a space between a regex pattern or pattern modifiers and the following word is deprecated.  For example, &quot;m/foo/sand $bar&quot; will still be parsed as &quot;m/foo/s and $bar&quot; but will issue a warning.</dd>
</dl>
</div>
<div class="section">
<h1>Platform Specific Notes</h1><div class="subsection">
<h2>Recent OpenBSDs now use perl's malloc</h2> OpenBSD &gt; 3.7 has a new malloc implementation which is mmap based and as such can release memory back to the OS; however for perl using this malloc causes a substantial slowdown so we now default to using perl's malloc instead (RT #75742) (9b58b5).</div>
</div>
<div class="section">
<h1>Acknowledgements</h1> Perl 5.13.2 represents thirty days of development since Perl 5.13.1 (and two days of waiting around while the release manager remembered where he left his brain) and contains 3685 lines of changes across 194 files from 30 authors and committers.<div class="spacer">
</div>
Thank you to the following for contributing to this release:<div class="spacer">
</div>
Abigail, Andreas J. Koenig, Chas. Owens, Chris 'BinGOs' Williams, Craig A. Berry, David Caldwell, David Golden, David Mitchell, Father Chrysostomos, George Greer, H.Merijn Brand, Jerry D. Hedden, Karl Williamson, Maik Hentsche, Matt S Trout, Nicholas Clark, Rafael Garcia-Suarez, Ricardo Signes, Salvador Fandino, Salvador Ortiz Garcia, Shlomi Fish, Sinan Unur, Sisyphus, Slaven Rezic, Sullivan Beck, Tony Cook, Vincent Pit, Zefram, brian d foy, var Arnfjoerd` Bjarmason<div class="spacer">
</div>
Your humble release manager would like to specifically call out Karl Williamson for making the tests a better place to be, and Shlomi Fish for a passel of tiny incremental docfixes of the sort that don't get made often enough.</div>
<div class="section">
<h1>Reporting Bugs</h1> If you find what you think is a bug, you might check the articles recently posted to the comp.lang.perl.misc newsgroup and the perl bug database at http://rt.perl.org/perlbug/ .  There may also be information at http://www.perl.org/ , the Perl Home Page.<div class="spacer">
</div>
If you believe you have an unreported bug, please run the <b>perlbug</b> program included with your release.  Be sure to trim your bug down to a tiny but sufficient test case.  Your bug report, along with the output of &quot;perl -V&quot;, will be sent off to perlbug@perl.org to be analysed by the Perl porting team.<div class="spacer">
</div>
If the bug you are reporting has security implications, which make it inappropriate to send to a publicly archived mailing list, then please send it to perl5-security-report@perl.org. This points to a closed subscription unarchived mailing list, which includes all the core committers, who be able to help assess the impact of issues, figure out a resolution, and help co-ordinate the release of patches to mitigate or fix the problem across all platforms on which Perl is supported. Please only use this address for security issues in the Perl core, not for modules independently distributed on CPAN.</div>
<div class="section">
<h1>SEE ALSO</h1> The  <i>Changes</i> file for an explanation of how to view exhaustive details on what changed.<div class="spacer">
</div>
The <i>INSTALL</i> file for how to build Perl.<div class="spacer">
</div>
The <i>README</i> file for general stuff.<div class="spacer">
</div>
The <i>Artistic</i> and <i>Copying</i> files for copyright information.</div>
<table class="foot">
<tr>
<td class="foot-date">
2011-09-26</td>
<td class="foot-os">
perl v5.14.2</td>
</tr>
</table>
</div>
</body>
</html>

