<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/linux/style.css" type="text/css" media="all"/>
<title>
dpkg-buildpackage(1)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
dpkg-buildpackage(1)</td>
<td class="head-vol">
dpkg utilities</td>
<td class="head-rtitle">
dpkg-buildpackage(1)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>NAME</h1> dpkg-buildpackage - build binary or source packages from sources</div>
<div class="section">
<h1>SYNOPSIS</h1> <b>dpkg-buildpackage</b> [<i>option</i>...]</div>
<div class="section">
<h1>DESCRIPTION</h1> <b>dpkg-buildpackage</b> is a program that automates the process of building a Debian package. It consists of the following steps:<dl>
<dt>
<b>1.</b></dt>
<dd>
It prepares the build environment by setting various environment variables (see  <b>ENVIRONMENT</b>) and calls <b>dpkg-source</b>  <b>--before-build</b> (unless <b>-T</b> or <b>--target</b> has been used).</dd>
</dl>
<dl>
<dt>
<b>2.</b></dt>
<dd>
It checks that the build-dependencies and build-conflicts are satisfied (unless  <b>-d</b> is specified).</dd>
</dl>
<dl>
<dt>
<b>3.</b></dt>
<dd>
If a specific target has been selected with the <b>-T</b> or <b>--target</b> option, it calls that target and stops here. Otherwise it calls  <b>fakeroot debian/rules clean</b> to clean the build-tree (unless  <b>-nc</b> is specified).</dd>
</dl>
<dl>
<dt>
<b>4.</b></dt>
<dd>
It calls <b>dpkg-source -b</b> to generate the source package (unless a binary-only build has been requested with  <b>-b</b>, <b>-B</b> or  <b>-A</b>).</dd>
</dl>
<dl>
<dt>
<b>5.</b></dt>
<dd>
It calls <b>debian/rules</b> <b>build</b> followed by  <b>fakeroot debian/rules</b> <i>binary-target</i> (unless a source-only build has been requested with  <b>-S</b>). Note that <i>binary-target</i> is either  <b>binary</b> (default case, or if <b>-b</b> is specified) or  <b>binary-arch</b> (if <b>-B</b> is specified) or <b>binary-indep</b> (if  <b>-A</b> is specified).</dd>
</dl>
<dl>
<dt>
<b>6.</b></dt>
<dd>
It calls <b>gpg</b> to sign the <b>.dsc</b> file (if any, unless  <b>-us</b> is specified).</dd>
</dl>
<dl>
<dt>
<b>7.</b></dt>
<dd>
It calls <b>dpkg-genchanges</b> to generate a <b>.changes</b> file. Many  <b>dpkg-buildpackage</b> options are forwarded to  <b>dpkg-genchanges</b>.</dd>
</dl>
<dl>
<dt>
<b>8.</b></dt>
<dd>
It calls <b>gpg</b> to sign the <b>.changes</b> file (unless <b>-uc</b> is specified).</dd>
</dl>
<dl>
<dt>
<b>9.</b></dt>
<dd>
If <b>-tc</b> is specified, it will call <b>fakeroot debian/rules clean</b> again. Finally it calls  <b>dpkg-source --after-build</b>.</dd>
</dl>
</div>
<div class="section">
<h1>OPTIONS</h1><dl>
<dt>
<b>-b</b></dt>
<dd>
Specifies a binary-only build, no source files are to be built and/or distributed. Passed to  <b>dpkg-genchanges</b>.</dd>
</dl>
<dl>
<dt>
<b>-B</b></dt>
<dd>
Specifies a binary-only build, limited to architecture dependent packages. Passed to  <b>dpkg-genchanges</b>.</dd>
</dl>
<dl>
<dt>
<b>-A</b></dt>
<dd>
Specifies a binary-only build, limited to architecture independent packages. Passed to  <b>dpkg-genchanges</b>.</dd>
</dl>
<dl>
<dt>
<b>-S</b></dt>
<dd>
Specifies a source-only build, no binary packages need to be made. Passed to  <b>dpkg-genchanges</b>.</dd>
</dl>
<dl>
<dt>
<b>-F</b></dt>
<dd>
Specifies a normal full build, binary and source packages will be built. This is the same as the default case when no build option is specified.</dd>
</dl>
<div class="spacer">
</div>
<b>--target=</b><i>target</i><div style="height: 0.00em;">
&#160;</div>
<b>--target </b><i>target</i><div style="height: 0.00em;">
&#160;</div>
<b>-T</b><i>target</i><div style="margin-left: 5.00ex;">
Calls <b>debian/rules</b> <i>target</i> after having setup the build environment and stops the package build process here. If  <b>--as-root</b> is also given, then the command is executed as root (see  <b>-r</b>). Note that official targets that are required to be run as root by the Debian policy do not need this option.</div>
<dl>
<dt>
<b>--as-root</b></dt>
<dd>
Only meaningful together with <b>--target</b>. Requires that the target be run with root rights.</dd>
</dl>
<div class="spacer">
</div>
<b>-si</b><div style="height: 0.00em;">
&#160;</div>
<b>-sa</b><div style="height: 0.00em;">
&#160;</div>
<b>-sd</b><div style="height: 0.00em;">
&#160;</div>
<b>-v</b><i>version</i><div style="height: 0.00em;">
&#160;</div>
<b>-C</b><i>changesdescription</i><div style="height: 0.00em;">
&#160;</div>
<b>-m</b><i>maintaineraddress</i><div style="height: 0.00em;">
&#160;</div>
<b>-e</b><i>maintaineraddress</i><div style="margin-left: 5.00ex;">
Passed unchanged to <b>dpkg-genchanges</b>. See its manual page.</div>
<dl>
<dt>
<b>-a</b><i>architecture</i></dt>
<dd>
Specify the Debian architecture we build for. The architecture of the machine we build on is determined automatically, and is also the default for the host machine.</dd>
</dl>
<dl>
<dt>
<b>-t</b><i>gnu-system-type</i></dt>
<dd>
Specify the GNU system type we build for. It can be used in place of -a or as a complement to override the default GNU system type of the target Debian architecture.</dd>
</dl>
<dl>
<dt>
<b>-j</b><i>jobs</i></dt>
<dd>
Number of jobs allowed to be run simultaneously, equivalent to the <b>make</b>(1) option of the same name. Will add itself to the MAKEFLAGS environment variable, which should cause all subsequent make invocations to inherit the option. Also adds  <b>parallel=</b><i>jobs</i> to the DEB_BUILD_OPTIONS environment variable which allows debian/rules files to use this information for their own purposes. The  <b>parallel=</b><i>jobs</i> in DEB_BUILD_OPTIONS environment variable will override the  <b>-j</b> value if this option is given.</dd>
</dl>
<dl>
<dt>
<b>-D</b></dt>
<dd>
Check build dependencies and conflicts; abort if unsatisfied. This is the default behavior.</dd>
</dl>
<dl>
<dt>
<b>-d</b></dt>
<dd>
Do not check build dependencies and conflicts.</dd>
</dl>
<dl>
<dt>
<b>-nc</b></dt>
<dd>
Do not clean the source tree (implies <b>-b</b> if nothing else has been selected among  <b>-B</b>, <b>-A</b> or <b>-S</b>).</dd>
</dl>
<dl>
<dt>
<b>-tc</b></dt>
<dd>
Clean the source tree (using <i>gain-root-command</i> <b>debian/rules clean</b>) after the package has been built.</dd>
</dl>
<dl>
<dt>
<b>-r</b><i>gain-root-command</i></dt>
<dd>
When <b>dpkg-buildpackage</b> needs to execute part of the build process as root, it prefixes the command it executes with <i>gain-root-command</i> if one has been specified. Otherwise, if none has been specified,  <b>fakeroot</b> will be used by default, if the command is present. <i>gain-root-command</i> should start with the name of a program on the <b>PATH</b> and will get as arguments the name of the real command to run and the arguments it should take. <i>gain-root-command</i> can include parameters (they must be space-separated) but no shell metacharacters. <i>gain-root-command</i> might typically be <b>fakeroot</b>, <b>sudo</b>, <b>super</b> or <b>really</b>. <b>su</b> is not suitable, since it can only invoke the user's shell with <b>-c</b> instead of passing arguments individually to the command to be run.</dd>
</dl>
<dl>
<dt>
<b>-R</b><i>rules-file</i></dt>
<dd>
Building a Debian package usually involves invoking <b>debian/rules</b> as a command with several standard parameters. With this option it's possible to use another program invocation to build the package (it can include space separated parameters). Alternatively it can be used to execute the standard rules file with another make program (for example by using <b>/usr/local/bin/make -f debian/rules</b> as  <i>rules-file</i>).</dd>
</dl>
<dl>
<dt>
<b>-p</b><i>sign-command</i></dt>
<dd>
When <b>dpkg-buildpackage</b> needs to execute GPG or PGP to sign a source control ( <b>.dsc</b>) file or a <b>.changes</b> file it will run  <i>sign-command</i> (searching the <b>PATH</b> if necessary) instead of  <b>gpg</b>. <i>sign-command</i> will get all the arguments that  <b>pgp</b> would have gotten. If <i>sign-command</i> takes its arguments in GPG rather than PGP style, you should give the  <b>-sgpg</b> option. <i>sign-command</i> should not contain spaces or any other shell metacharacters.</dd>
</dl>
<dl>
<dt>
<b>-k</b><i>key-id</i></dt>
<dd>
Specify a key-ID to use when signing packages.</dd>
</dl>
<dl>
<dt>
<b>-us</b></dt>
<dd>
Do not sign the source package.</dd>
</dl>
<dl>
<dt>
<b>-uc</b></dt>
<dd>
Do not sign the <b>.changes</b> file.</dd>
</dl>
<div class="spacer">
</div>
<b>-i</b>[<i>regexp</i>]<div style="height: 0.00em;">
&#160;</div>
<b>-I</b><i>[<i>pattern</i>]</i><div style="height: 0.00em;">
&#160;</div>
<b>-s</b>[<b>nsAkurKUR</b>]<div style="height: 0.00em;">
&#160;</div>
<b>-z</b>, <b>-Z</b><div style="height: 0.00em;">
&#160;</div>
<div style="margin-left: 5.00ex;">
Passed unchanged to <b>dpkg-source</b>. See its manual page.</div>
<dl>
<dt>
<b>--source-option=</b><i>opt</i></dt>
<dd>
Pass option <i>opt</i> to <b>dpkg-source</b>.</dd>
</dl>
<dl>
<dt>
<b>--changes-option=</b><i>opt</i></dt>
<dd>
Pass option <i>opt</i> to <b>dpkg-genchanges</b>.</dd>
</dl>
<div class="spacer">
</div>
<b>--admindir=</b><i>dir</i><div style="height: 0.00em;">
&#160;</div>
<b>--admindir </b><i>dir</i><div style="margin-left: 5.00ex;">
Change the location of the <b>dpkg</b> database. The default location is  <i>/var/lib/dpkg</i>.</div>
<dl>
<dt>
<b>-h</b>, <b>--help</b></dt>
<dd>
Show the usage message and exit.</dd>
</dl>
<dl>
<dt>
<b>--version</b></dt>
<dd>
Show the version and exit.</dd>
</dl>
</div>
<div class="section">
<h1>ENVIRONMENT</h1> Even if  <b>dpkg-buildpackage</b> exports some variables, <b>debian/rules</b> should not rely on their presence and should instead use the respective interface to retrieve the needed values.<div class="subsection">
<h2>Variables set by dpkg-architecture</h2>  <b>dpkg-architecture</b> is called with the <b>-a</b> and <b>-t</b> parameters forwarded. Any variable that is output by its  <b>-s</b> option is integrated in the build environment.</div>
<div class="subsection">
<h2>Compiler flags</h2> The  <b>CFLAGS</b>, <b>CXXFLAGS</b>, <b>FFLAGS</b>, <b>CPPFLAGS</b> and  <b>LDFLAGS</b> environment variables are set to the values that  <b>dpkg-buildflags</b> returned. See its manual page for more information.</div>
</div>
<div class="section">
<h1>BUGS</h1> It should be possible to specify spaces and shell metacharacters in and initial arguments for <i>gain-root-command</i> and <i>sign-command</i>.</div>
<div class="section">
<h1>SEE ALSO</h1> <b>dpkg-source</b>(1), <b>dpkg-architecture</b>(1), <b>dpkg-buildflags</b>(1), <b>dpkg-genchanges</b>(1), <b>fakeroot</b>(1), <b>gpg</b>(1).</div>
<div class="section">
<h1>AUTHORS</h1> Copyright &#169; 1995-1996 Ian Jackson<div style="height: 0.00em;">
&#160;</div>
Copyright &#169; 2000 Wichert Akkerman<div style="height: 0.00em;">
&#160;</div>
Copyright &#169; 2007 Frank Lichtenheld<div style="height: 0.00em;">
&#160;</div>
Copyright &#169; 2008-2010 Rapha&#235;l Hertzog<div style="height: 1.00em;">
&#160;</div>
This is free software; see the GNU General Public Licence version 2 or later for copying conditions. There is NO WARRANTY.</div>
<table class="foot">
<tr>
<td class="foot-date">
2011-08-14</td>
<td class="foot-os">
Debian Project</td>
</tr>
</table>
</div>
</body>
</html>

