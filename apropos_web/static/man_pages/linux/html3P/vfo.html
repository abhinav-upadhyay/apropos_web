<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/linux/style.css" type="text/css" media="all"/>
<title>
VFORK(3P)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
VFORK(3P)</td>
<td class="head-vol">
POSIX Programmer's Manual</td>
<td class="head-rtitle">
VFORK(3P)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>PROLOG</h1> This manual page is part of the POSIX Programmer's Manual. The Linux implementation of this interface may differ (consult the corresponding Linux manual page for details of Linux behavior), or the interface may not be implemented on Linux.</div>
<div class="section">
<h1>NAME</h1> vfork - create a new process; share virtual memory</div>
<div class="section">
<h1>SYNOPSIS</h1>  <b>#include &lt;unistd.h&gt;</b><div style="height: 0.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
pid_t vfork(void); <b></b>  <b></b><b></b><div style="height: 0.00em;">
&#160;</div>
<b></b></div>
<div class="section">
<h1>DESCRIPTION</h1> The  <i>vfork</i>() function shall be equivalent to <i>fork</i>(), except that the behavior is undefined if the process created by  <i>vfork</i>() either modifies any data other than a variable of type  <b>pid_t</b> used to store the return value from  <i>vfork</i>(), or returns from the function in which  <i>vfork</i>() was called, or calls any other function before successfully calling  <i>_exit</i>() or one of the <i>exec</i> family of functions.</div>
<div class="section">
<h1>RETURN VALUE</h1> Upon successful completion,  <i>vfork</i>() shall return 0 to the child process and return the process ID of the child process to the parent process. Otherwise, -1 shall be returned to the parent, no child process shall be created, and  <i>errno</i> shall be set to indicate the error.</div>
<div class="section">
<h1>ERRORS</h1> The  <i>vfork</i>() function shall fail if:<dl>
<dt>
<b>EAGAIN</b></dt>
<dd>
The system-wide limit on the total number of processes under execution would be exceeded, or the system-imposed limit on the total number of processes under execution by a single user would be exceeded.</dd>
</dl>
<dl>
<dt>
<b>ENOMEM</b></dt>
<dd>
There is insufficient swap space for the new process.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<div class="spacer">
</div>
<i>The following sections are informative.</i></div>
<div class="section">
<h1>EXAMPLES</h1> None.</div>
<div class="section">
<h1>APPLICATION USAGE</h1> Conforming applications are recommended not to depend on  <i>vfork</i>(), but to use  <i>fork</i>() instead. The <i>vfork</i>() function may be withdrawn in a future version.<div class="spacer">
</div>
On some implementations, <i>vfork</i>() is equivalent to <i>fork</i>().<div class="spacer">
</div>
The <i>vfork</i>() function differs from <i>fork</i>() only in that the child process can share code and data with the calling process (parent process). This speeds cloning activity significantly at a risk to the integrity of the parent process if  <i>vfork</i>() is misused.<div class="spacer">
</div>
The use of <i>vfork</i>() for any purpose except as a prelude to an immediate call to a function from the  <i>exec</i> family, or to <i>_exit</i>(), is not advised.<div class="spacer">
</div>
The <i>vfork</i>() function can be used to create new processes without fully copying the address space of the old process. If a forked process is simply going to call  <i>exec</i>, the data space copied from the parent to the child by  <i>fork</i>() is not used. This is particularly inefficient in a paged environment, making  <i>vfork</i>() particularly useful. Depending upon the size of the parent's data space,  <i>vfork</i>() can give a significant performance improvement over  <i>fork</i>().<div class="spacer">
</div>
The <i>vfork</i>() function can normally be used just like <i>fork</i>(). It does not work, however, to return while running in the child's context from the caller of  <i>vfork</i>() since the eventual return from  <i>vfork</i>() would then return to a no longer existent stack frame. Care should be taken, also, to call  <i>_exit</i>() rather than <i>exit</i>() if  <i>exec</i> cannot be used, since <i>exit</i>() flushes and closes standard I/O channels, thereby damaging the parent process' standard I/O data structures. (Even with  <i>fork</i>(), it is wrong to call  <i>exit</i>(), since buffered data would then be flushed twice.)<div class="spacer">
</div>
If signal handlers are invoked in the child process after <i>vfork</i>(), they must follow the same rules as other code in the child process.</div>
<div class="section">
<h1>RATIONALE</h1> None.</div>
<div class="section">
<h1>FUTURE DIRECTIONS</h1> This function may be withdrawn in a future version.</div>
<div class="section">
<h1>SEE ALSO</h1>  <i>exec</i>(), <i>exit</i>(), <i>fork</i>(), <i>wait</i>(), the Base Definitions volume of IEEE&#160;Std&#160;1003.1-2001,  <i>&lt;unistd.h&gt;</i></div>
<div class="section">
<h1>COPYRIGHT</h1> Portions of this text are reprinted and reproduced in electronic form from IEEE Std 1003.1, 2003 Edition, Standard for Information Technology -- Portable Operating System Interface (POSIX), The Open Group Base Specifications Issue 6, Copyright (C) 2001-2003 by the Institute of Electrical and Electronics Engineers, Inc and The Open Group. In the event of any discrepancy between this version and the original IEEE and The Open Group Standard, the original IEEE and The Open Group Standard is the referee document. The original Standard can be obtained online at http://www.opengroup.org/unix/online.html .</div>
<table class="foot">
<tr>
<td class="foot-date">
2003</td>
<td class="foot-os">
IEEE/The Open Group</td>
</tr>
</table>
</div>
</body>
</html>

