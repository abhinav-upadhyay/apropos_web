<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/linux/style.css" type="text/css" media="all"/>
<title>
FSTATAT(2)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
FSTATAT(2)</td>
<td class="head-vol">
Linux Programmer's Manual</td>
<td class="head-rtitle">
FSTATAT(2)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>NAME</h1> fstatat - get file status relative to a directory file descriptor</div>
<div class="section">
<h1>SYNOPSIS</h1> <b>#include &lt;fcntl.h&gt; /* Definition of AT_* constants */</b> <b>#include &lt;sys/stat.h&gt;</b><div style="height: 1.00em;">
&#160;</div>
<br/>
<b>int fstatat(int </b><i>dirfd</i><b>, const char *</b><i>pathname</i><b>, struct stat *</b><i>buf</i><b>,</b><br/>
<b>            int </b><i>flags</i><b>);</b><br/>
<div style="height: 1.00em;">
&#160;</div>
<br/>
Feature Test Macro Requirements for glibc (see <b>feature_test_macros</b>(7)):<br/>
<div style="height: 1.00em;">
&#160;</div>
<b>fstatat</b>():<div style="margin-left: 4.00ex;">
<dl>
<dt>
Since glibc 2.10:</dt>
<dd>
_XOPEN_SOURCE&#160;&gt;=&#160;700 || _POSIX_C_SOURCE&#160;&gt;=&#160;200809L</dd>
</dl>
<dl>
<dt>
Before glibc 2.10:</dt>
<dd>
_ATFILE_SOURCE</dd>
</dl>
</div>
</div>
<div class="section">
<h1>DESCRIPTION</h1> The <b>fstatat</b>() system call operates in exactly the same way as <b>stat</b>(2), except for the differences described in this manual page.<div style="height: 1.00em;">
&#160;</div>
If the pathname given in <i>pathname</i> is relative, then it is interpreted relative to the directory referred to by the file descriptor <i>dirfd</i> (rather than relative to the current working directory of the calling process, as is done by <b>stat</b>(2) for a relative pathname).<div style="height: 1.00em;">
&#160;</div>
If <i>pathname</i> is relative and <i>dirfd</i> is the special value <b>AT_FDCWD</b>, then <i>pathname</i> is interpreted relative to the current working directory of the calling process (like <b>stat</b>(2)).<div style="height: 1.00em;">
&#160;</div>
If <i>pathname</i> is absolute, then <i>dirfd</i> is ignored.<div style="height: 1.00em;">
&#160;</div>
<i>flags</i> can either be 0, or include one or more of the following flags ORed:<dl>
<dt>
<b>AT_NO_AUTOMOUNT</b> (since Linux 2.6.38)</dt>
<dd>
Don't automount the terminal (&quot;basename&quot;) component of <i>pathname</i> if it is a directory that is an automount point. This allows the caller to gather attributes of an automount point (rather than the location it would mount). This flag can be used in tools that scan directories to prevent mass-automounting of a directory of automount points. The <b>AT_NO_AUTOMOUNT</b> flag has no effect if the mount point has already been mounted over.</dd>
</dl>
<dl>
<dt>
<b>AT_SYMLINK_NOFOLLOW</b></dt>
<dd>
If <i>pathname</i> is a symbolic link, do not dereference it: instead return information about the link itself, like <b>lstat</b>(2). (By default, <b>fstatat</b>() dereferences symbolic links, like <b>stat</b>(2).)</dd>
</dl>
</div>
<div class="section">
<h1>RETURN VALUE</h1> On success, <b>fstatat</b>() returns 0. On error, -1 is returned and <i>errno</i> is set to indicate the error.</div>
<div class="section">
<h1>ERRORS</h1> The same errors that occur for <b>stat</b>(2) can also occur for <b>fstatat</b>(). The following additional errors can occur for <b>fstatat</b>():<dl>
<dt>
<b>EBADF</b></dt>
<dd>
<i>dirfd</i> is not a valid file descriptor.</dd>
</dl>
<dl>
<dt>
<b>EINVAL</b></dt>
<dd>
Invalid flag specified in <i>flags</i>.</dd>
</dl>
<dl>
<dt>
<b>ENOTDIR</b></dt>
<dd>
<i>pathname</i> is relative and <i>dirfd</i> is a file descriptor referring to a file other than a directory.</dd>
</dl>
</div>
<div class="section">
<h1>VERSIONS</h1> <b>fstatat</b>() was added to Linux in kernel 2.6.16.</div>
<div class="section">
<h1>CONFORMING TO</h1> POSIX.1-2008. A similar system call exists on Solaris.</div>
<div class="section">
<h1>NOTES</h1> See <b>openat</b>(2) for an explanation of the need for <b>fstatat</b>().<div style="height: 1.00em;">
&#160;</div>
The underlying system call employed by the glibc <b>fstatat</b>() wrapper function is actually called <b>fstatat64</b>().</div>
<div class="section">
<h1>SEE ALSO</h1> <b>openat</b>(2), <b>stat</b>(2), <b>path_resolution</b>(7), <b>symlink</b>(7)</div>
<div class="section">
<h1>COLOPHON</h1> This page is part of release 3.35 of the Linux <i>man-pages</i> project. A description of the project, and information about reporting bugs, can be found at http://man7.org/linux/man-pages/.</div>
<table class="foot">
<tr>
<td class="foot-date">
2011-09-19</td>
<td class="foot-os">
Linux</td>
</tr>
</table>
</div>
</body>
</html>

