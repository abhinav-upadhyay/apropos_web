<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/linux/style.css" type="text/css" media="all"/>
<title>
NTFS-3G(8)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
NTFS-3G(8)</td>
<td class="head-vol">
System Manager's Manual</td>
<td class="head-rtitle">
NTFS-3G(8)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>NAME</h1> ntfs-3g - Third Generation Read/Write NTFS Driver</div>
<div class="section">
<h1>SYNOPSIS</h1> <b>ntfs-3g</b>  <b>[-o </b><i>option</i><b></b><b>[,...]]</b> <i>volume mount_point</i><div style="height: 0.00em;">
&#160;</div>
<b>mount -t ntfs-3g</b>  <b>[-o </b><i>option</i><b></b><b>[,...]]</b> <i>volume mount_point</i><div style="height: 0.00em;">
&#160;</div>
<b>lowntfs-3g</b>  <b>[-o </b><i>option</i><b></b><b>[,...]]</b> <i>volume mount_point</i><div style="height: 0.00em;">
&#160;</div>
<b>mount -t lowntfs-3g</b>  <b>[-o </b><i>option</i><b></b><b>[,...]]</b> <i>volume mount_point</i></div>
<div class="section">
<h1>DESCRIPTION</h1>  <b>ntfs-3g</b> is an NTFS driver, which can create, remove, rename, move files, directories, hard links, and streams; it can read and write files, including streams, sparse files and transparently compressed files; it can handle special files like symbolic links, devices, and FIFOs; moreover it provides standard management of file ownership and permissions, including POSIX ACLs.<div class="spacer">
</div>
It comes in two variants <b>ntfs-3g</b> and <b>lowntfs-3g</b> with a few differences mentioned below in relevant options descriptions.<div class="spacer">
</div>
The <i>volume</i> to be mounted can be either a block device or an image file.<div class="subsection">
<h2>Access Handling and Security</h2> By default, files and directories are owned by the effective user and group of the mounting process, and everybody has full read, write, execution and directory browsing permissions. You can also assign permissions to a single user by using the <b>uid</b> and/or the <b>gid</b> options together with the <b>umask,</b> or <b>fmask</b> and <b>dmask</b> options.<div class="spacer">
</div>
Doing so, Windows users have full access to the files created by <b>ntfs-3g.</b><div class="spacer">
</div>
But, by setting the <b>permissions</b> option, you can benefit from the full ownership and permissions features as defined by POSIX. Moreover, by defining a Windows-to-Linux user mapping, the ownerships and permissions are even applied to Windows users and conversely.<div class="spacer">
</div>
If <b>ntfs-3g</b> is set setuid-root then non-root users will be also able to mount volumes.</div>
<div class="subsection">
<h2>Windows Filename Compatibility</h2> NTFS supports several filename namespaces: DOS, Win32 and POSIX. While the  <b>ntfs-3g</b> driver handles all of them, it always creates new files in the POSIX namespace for maximum portability and interoperability reasons. This means that filenames are case sensitive and all characters are allowed except '/' and '\0'. This is perfectly legal on Windows, though some application may get confused. The option  <b>windows_names</b> may be used to apply Windows restrictions to new file names.</div>
<div class="subsection">
<h2>Alternate Data Streams (ADS)</h2> NTFS stores all data in streams. Every file has exactly one unnamed data stream and can have many named data streams.  The size of a file is the size of its unnamed data stream.  By default,  <b>ntfs-3g</b> will only read the unnamed data stream.<div class="spacer">
</div>
By using the options &quot;streams_interface=windows&quot;, with the ntfs-3g driver (not possible with lowntfs-3g), you will be able to read any named data streams, simply by specifying the stream's name after a colon. For example:<div style="margin-left: 5.00ex;">
<div style="height: 1.00em;">
&#160;</div>
cat some.mp3:artist<div style="height: 1.00em;">
&#160;</div>
</div>
Named data streams act like normal files, so you can read from them, write to them and even delete them (using rm).  You can list all the named data streams a file has by getting the &quot;ntfs.streams.list&quot; extended attribute.</div>
</div>
<div class="section">
<h1>OPTIONS</h1> Below is a summary of the options that  <b>ntfs-3g</b> accepts.<dl>
<dt>
<b>uid=</b><i>value</i> and <b>gid=</b><i>value</i></dt>
<dd>
Set the owner and the group of files and directories. The values are numerical. The defaults are the uid and gid of the current process.</dd>
</dl>
<dl>
<dt>
<b>umask=</b><i>value</i></dt>
<dd>
Set the  bitmask of the file and directory permissions that are not present. The value is given in octal. The default value is 0 which means full access to everybody.</dd>
</dl>
<dl>
<dt>
<b>fmask=</b><i>value</i></dt>
<dd>
Set the  bitmask of the file permissions that are not present. The value is given in octal. The default value is 0 which means full access to everybody.</dd>
</dl>
<dl>
<dt>
<b>dmask=</b><i>value</i></dt>
<dd>
Set the  bitmask of the directory permissions that are not present. The value is given in octal. The default value is 0 which means full access to everybody.</dd>
</dl>
<dl>
<dt>
<b>usermapping=</b><i>file-name</i></dt>
<dd>
Use file <i>file-name</i> as the user mapping file instead of the default  <b>.NTFS-3G/UserMapping</b>. If <i>file-name</i> defines a full path, the file must be located on a partition previously mounted. If it defines a relative path, it is interpreted relative to the root of NTFS partition being mounted.</dd>
</dl>
<div class="spacer">
</div>
<div style="margin-left: 5.00ex;">
When a user mapping file is defined, the options <b>uid=</b>, <b>gid=</b>,  <b>umask=</b>, <b>fmask=</b>, <b>dmask=</b> and <b>silent</b> are ignored.</div>
<dl>
<dt>
<b>permissions</b></dt>
<dd>
Set standard permissions on created files and use standard access control. This option is set by default when a user mapping file is present.</dd>
</dl>
<dl>
<dt>
<b>acl</b></dt>
<dd>
Enable setting Posix ACLs on created files and use them for access control. This option is only available on specific builds. It is set by default when a user mapping file is present and the <b>permissions</b> mount option is not set.</dd>
</dl>
<dl>
<dt>
<b>inherit</b></dt>
<dd>
When creating a new file, set its initial protections according to inheritance rules defined in parent directory. These rules deviate from Posix specifications, but yield a better Windows compatibility. The  <b>compression</b> option or a valid user mapping file is required for this option to be effective.</dd>
</dl>
<dl>
<dt>
<b>ro</b></dt>
<dd>
Mount filesystem read-only. Useful if Windows is hibernated or the NTFS journal file is unclean.</dd>
</dl>
<dl>
<dt>
<b>locale=</b><i>value</i></dt>
<dd>
This option can be useful when wanting a language specific locale environment. It is however discouraged as it leads to files with untranslatable chars to not be visible.</dd>
</dl>
<dl>
<dt>
<b>force</b></dt>
<dd>
This option is obsolete. It has been superseded by the <b>recover</b> and  <b>norecover</b> options.</dd>
</dl>
<dl>
<dt>
<b>recover</b></dt>
<dd>
Recover and try to mount a partition which was not unmounted properly by Windows. The Windows logfile is cleared, which may cause inconsistencies. Currently this is the default option.</dd>
</dl>
<dl>
<dt>
<b>norecover</b></dt>
<dd>
Do not try to mount a partition which was not unmounted properly by Windows.</dd>
</dl>
<dl>
<dt>
<b>ignore_case <b>(only with lowntfs-3g)</b></b></dt>
<dd>
Ignore character case when accessing a file (<b>FOO</b>, <b>Foo</b>, <b>foo</b>, etc. designate the same file). All files are displayed with lower case in directory listings.</dd>
</dl>
<dl>
<dt>
<b>remove_hiberfile</b></dt>
<dd>
Unlike in case of read-only mount, the read-write mount is denied if the NTFS volume is hibernated. One needs either to resume Windows and shutdown it properly, or use this option which will remove the Windows hibernation file. Please note, this means that the saved Windows session will be completely lost. Use this option under your own responsibility.</dd>
</dl>
<dl>
<dt>
<b>atime, noatime, relatime</b></dt>
<dd>
The <b>atime</b> option updates inode access time for each access.<div style="height: 1.00em;">
&#160;</div>
The <b>noatime</b> option disables inode access time updates which can speed up file operations and prevent sleeping (notebook) disks spinning up too often thus saving energy and disk lifetime.<div style="height: 1.00em;">
&#160;</div>
The <b>relatime</b> option is very similar to <b>noatime.</b> It updates inode access times relative to modify or change time. The access time is only updated if the previous access time was earlier than the current modify or change time. Unlike <b>noatime</b> this option doesn't break applications that need to know if a file has been read since the last time it was modified. This is the default behaviour.</dd>
</dl>
<dl>
<dt>
<b>delay_mtime</b></dt>
<dd>
Delay the updating of file modification time and file change time until the file is closed. This is mainly useful for files which are written to without changing their size, such as databases or file system images mounted as loop.</dd>
</dl>
<dl>
<dt>
<b>show_sys_files</b></dt>
<dd>
Show the metafiles in directory listings. Otherwise the default behaviour is to hide the metafiles, which are special files used to store the NTFS structure. Please note that even when this option is specified, &quot;$MFT&quot; may not be visible due to a glibc bug. Furthermore, irrespectively of show_sys_files, all files are accessible by name, for example you can always do &quot;ls -l '$UpCase'&quot;.</dd>
</dl>
<dl>
<dt>
<b>hide_hid_files</b></dt>
<dd>
Hide the hidden files and directories in directory listings, the hidden files and directories being the ones whose NTFS attribute have the hidden flag set. The hidden files will not be selected when using wildcards in commands, but all files and directories remain accessible by full name, for example you can always display the Windows trash bin directory by : &quot;ls -ld '$RECYCLE.BIN'&quot;.</dd>
</dl>
<dl>
<dt>
<b>hide_dot_files</b></dt>
<dd>
Set the hidden flag in the NTFS attribute for created files and directories whose first character of the name is a dot. Such files and directories normally do not appear in directory listings, and when the flag is set they do not appear in Windows directory displays either.</dd>
</dl>
<dl>
<dt>
<b>windows_names</b></dt>
<dd>
This option prevents files, directories and extended attributes to be created with a name not allowed by windows, either because it contains some not allowed character (which are the nine characters &quot; * / : &lt; &gt; ? \ | and those whose code is less than 0x20) or because the last character is a space or a dot. Existing such files can still be read (and renamed).</dd>
</dl>
<dl>
<dt>
<b>allow_other</b></dt>
<dd>
This option overrides the security measure restricting file access to the user mounting the filesystem. This option is only allowed to root, but this restriction can be overridden by the 'user_allow_other' option in the /etc/fuse.conf file.</dd>
</dl>
<dl>
<dt>
<b>max_read=</b><i>value</i></dt>
<dd>
With this option the maximum size of read operations can be set. The default is infinite.  Note that the size of read requests is limited anyway to 32 pages (which is 128kbyte on i386).</dd>
</dl>
<dl>
<dt>
<b>silent</b></dt>
<dd>
Do nothing, without returning any error, on chmod and chown operations, when the  <b>permissions</b> option is not set and no user mapping file is defined. This option is on by default.</dd>
</dl>
<dl>
<dt>
<b>no_def_opts</b></dt>
<dd>
By default ntfs-3g acts as if &quot;silent&quot; (ignore errors on chmod and chown), &quot;allow_other&quot; (allow any user to access files) and &quot;nonempty&quot; (allow mounting on non-empty directories) were set, and &quot;no_def_opts&quot; cancels these default options.</dd>
</dl>
<dl>
<dt>
<b>streams_interface=</b><i>value</i></dt>
<dd>
This option controls how the user can access Alternate Data Streams (ADS) or in other words, named data streams. It can be set to, one of  <b>none</b>,  <b>windows</b> or <b>xattr</b>. If the option is set to <b>none</b>, the user will have no access to the named data streams. If it is set to  <b>windows</b> (not possible with lowntfs-3g), then the user can access them just like in Windows (eg. cat file:stream). If it's set to  <b>xattr</b>, then the named data streams are mapped to xattrs and user can manipulate them using  <b>{get,set}fattr</b> utilities. The default is <b>xattr</b>.</dd>
</dl>
<dl>
<dt>
<b>user_xattr</b></dt>
<dd>
Same as <b>streams_interface=</b><i>xattr</i>.</dd>
</dl>
<dl>
<dt>
<b>efs_raw</b></dt>
<dd>
This option should only be used in backup or restore situation. It changes the apparent size of files and the behavior of read and write operation so that encrypted files can be saved and restored without being decrypted. The  <b>user.ntfs.efsinfo</b> extended attribute has also to be saved and restored for the file to be decrypted.</dd>
</dl>
<dl>
<dt>
<b>compression</b></dt>
<dd>
This option enables creating new transparently compressed files in directories marked for compression. A directory is marked for compression by setting the bit 11 (value 0x00000800) in its Windows attribute. In such a directory, new files are created compressed and new subdirectories are themselves marked for compression. The option and the flag have no effect on existing files.</dd>
</dl>
<dl>
<dt>
<b>nocompression</b></dt>
<dd>
This option disables creating new transparently compressed files in directories marked for compression. Existing compressed files can still be read and updated. Currently this is the default option.</dd>
</dl>
<dl>
<dt>
<b>big_writes</b></dt>
<dd>
This option prevents fuse from splitting write buffers into 4K chunks, enabling big write buffers to be transferred from the application in a single step (up to some system limit, generally 128K bytes).</dd>
</dl>
<dl>
<dt>
<b>debug</b></dt>
<dd>
Makes ntfs-3g to print a lot of debug output from libntfs-3g and FUSE.</dd>
</dl>
<dl>
<dt>
<b>no_detach</b></dt>
<dd>
Makes ntfs-3g to not detach from terminal and print some debug output.</dd>
</dl>
</div>
<div class="section">
<h1>USER MAPPING</h1> NTFS uses specific ids to record the ownership of files instead of the  <b>uid</b> and <b>gid</b> used by Linux. As a consequence a mapping between the ids has to be defined for ownerships to be recorded into NTFS and recognized.<div class="spacer">
</div>
By default, this mapping is fetched from the file <b>.NTFS-3G/UserMapping</b> located in the NTFS partition. The option  <b>usermapping=</b> may be used to define another location. When the option permissions is set and no mapping file is found, a default mapping is used.<div class="spacer">
</div>
Each line in the user mapping file defines a mapping. It is organized in three fields separated by colons. The first field identifies a  <b>uid</b>, the second field identifies a  <b>gid</b> and the third one identifies the corresponding NTFS id, known as a  <b>SID</b>. The <b>uid</b> and the <b>gid</b> are optional and defining both of them for the same  <b>SID</b> is not recommended.<div class="spacer">
</div>
If no interoperation with Windows is needed, you can use the option  <b>permissions</b> to define a standard mapping. Alternately, you may define your own mapping by setting a single default mapping with no uid and gid. In both cases, files created on Linux will appear to Windows as owned by a foreign user, and files created on Windows will appear to Linux as owned by root. Just copy the example below and replace the 9 and 10-digit numbers by any number not greater than 4294967295. The resulting behavior is the same as the one with the option permission set with no ownership option and no user mapping file available.<div style="margin-left: 5.00ex;">
<div style="height: 1.00em;">
&#160;</div>
<b>::S-1-5-21-3141592653-589793238-462643383-10000</b><div style="height: 1.00em;">
&#160;</div>
</div>
If a strong interoperation with Windows is needed, the mapping has to be defined for each user and group known in both system, and the  <b>SID</b>s used by Windows has to be collected. This will lead to a user mapping file like :<div style="margin-left: 5.00ex;">
<div style="height: 1.00em;">
&#160;</div>
<b>john::S-1-5-21-3141592653-589793238-462643383-1008</b> <b>mary::S-1-5-21-3141592653-589793238-462643383-1009</b> <b>:smith:S-1-5-21-3141592653-589793238-462643383-513</b> <b>::S-1-5-21-3141592653-589793238-462643383-10000</b><div style="height: 1.00em;">
&#160;</div>
</div>
<div class="spacer">
</div>
The utility <b>ntfs-3g.usermap</b> may be used to create such a user mapping file.</div>
<div class="section">
<h1>EXAMPLES</h1> Mount /dev/sda1 to /mnt/windows:<div style="margin-left: 5.00ex;">
<div style="height: 1.00em;">
&#160;</div>
<b>ntfs-3g /dev/sda1 /mnt/windows</b></div>
or<div style="margin-left: 5.00ex;">
<b>mount -t ntfs-3g /dev/sda1 /mnt/windows</b><div style="height: 1.00em;">
&#160;</div>
</div>
Mount the ntfs data partition /dev/sda3 to /mnt/data with standard Linux permissions applied :<div style="margin-left: 5.00ex;">
<div style="height: 1.00em;">
&#160;</div>
<b>ntfs-3g -o permissions /dev/sda3 /mnt/data</b></div>
or<div style="margin-left: 5.00ex;">
<b>mount -t ntfs-3g -o permissions /dev/sda3 /mnt/data</b><div style="height: 1.00em;">
&#160;</div>
</div>
Read-only mount /dev/sda5 to /home/user/mnt and make user with uid 1000 to be the owner of all files:<div style="margin-left: 5.00ex;">
<div style="height: 1.00em;">
&#160;</div>
<b>ntfs-3g /dev/sda5 /home/user/mnt -o ro,uid=1000</b><div style="height: 1.00em;">
&#160;</div>
</div>
/etc/fstab entry for the above (the sixth and last field has to be zero to avoid a file system check at boot time) :<div style="margin-left: 5.00ex;">
<div style="height: 1.00em;">
&#160;</div>
<b>/dev/sda5 /home/user/mnt ntfs-3g ro,uid=1000 0 0</b><div style="height: 1.00em;">
&#160;</div>
</div>
Unmount /mnt/windows:<div style="margin-left: 5.00ex;">
<div style="height: 1.00em;">
&#160;</div>
<b>umount /mnt/windows</b><div style="height: 1.00em;">
&#160;</div>
</div>
</div>
<div class="section">
<h1>EXIT CODES</h1> To facilitate the use of the <b>ntfs-3g</b> driver in scripts, an exit code is returned to give an indication of the mountability status of a volume. Value 0 means success, and all other ones mean an error. The unique error codes are documented in the <b>ntfs-3g.probe</b>(8) manual page.</div>
<div class="section">
<h1>KNOWN ISSUES</h1> Please see<div style="margin-left: 5.00ex;">
<div style="height: 1.00em;">
&#160;</div>
http://www.tuxera.com/support/<div style="height: 1.00em;">
&#160;</div>
</div>
for common questions and known issues. If you would find a new one in the latest release of the software then please send an email describing it in detail. You can contact the development team on the ntfs-3g-devel@lists.sf.net address.</div>
<div class="section">
<h1>AUTHORS</h1> <b>ntfs-3g</b> was based on and a major improvement to ntfsmount and libntfs which were written by Yura Pakhuchiy and the Linux-NTFS team. The improvements were made, the ntfs-3g project was initiated and currently led by long time Linux-NTFS team developer Szabolcs Szakacsits (szaka@tuxera.com).</div>
<div class="section">
<h1>THANKS</h1> Several people made heroic efforts, often over five or more years which resulted the ntfs-3g driver. Most importantly they are Anton Altaparmakov, Jean-Pierre Andr&#233;, Richard Russon, Szabolcs Szakacsits, Yura Pakhuchiy, Yuval Fledel, and the author of the groundbreaking FUSE filesystem development framework, Miklos Szeredi.</div>
<div class="section">
<h1>SEE ALSO</h1> <b>ntfs-3g.probe</b>(8), <b>ntfsprogs</b>(8), <b>attr</b>(5), <b>getfattr</b>(1)</div>
<table class="foot">
<tr>
<td class="foot-date">
February 2010</td>
<td class="foot-os">
ntfs-3g 2012.1.15AR.1</td>
</tr>
</table>
</div>
</body>
</html>

