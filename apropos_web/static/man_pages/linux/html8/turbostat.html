<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/linux/style.css" type="text/css" media="all"/>
<title>
TURBOSTAT(8)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
TURBOSTAT(8)</td>
<td class="head-vol">
System Manager's Manual</td>
<td class="head-rtitle">
TURBOSTAT(8)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>NAME</h1> turbostat - Report processor frequency and idle statistics</div>
<div class="section">
<h1>SYNOPSIS</h1> <b>turbostat</b> [<b>-v</b>] [<b>-M MSR#</b>] command<div style="height: 0.00em;">
&#160;</div>
<b>turbostat</b> [<b>-v</b>] [<b>-M MSR#</b>] [<b>-i interval_sec</b>]</div>
<div class="section">
<h1>DESCRIPTION</h1>  <b>turbostat </b> reports processor topology, frequency and idle power state statistics on modern X86 processors. Either  <b>command</b> is forked and statistics are printed upon its completion, or statistics are printed periodically.<div style="height: 1.00em;">
&#160;</div>
<b>turbostat </b> requires that the processor supports an &quot;invariant&quot; TSC, plus the APERF and MPERF MSRs.  <b>turbostat </b> will report idle cpu power state residency on processors that additionally support C-state residency counters.<div style="height: 1.00em;">
&#160;</div>
<div class="subsection">
<h2>Options</h2> The  <b>-v</b> option increases verbosity.<div class="spacer">
</div>
The <b>-M MSR#</b> option dumps the specified MSR, in addition to the usual frequency and idle statistics.<div class="spacer">
</div>
The <b>-i interval_sec</b> option prints statistics every interval_sec seconds. The default is 5 seconds.<div class="spacer">
</div>
The <b>command</b> parameter forks <b>command</b> and upon its exit, displays the statistics gathered since it was forked.</div>
</div>
<div class="section">
<h1>FIELD DESCRIPTIONS</h1><br/>
<b>pkg</b> processor package number.<br/>
<b>core</b> processor core number.<br/>
<b>CPU</b> Linux CPU (logical processor) number.<br/>
<b>%c0</b> percent of the interval that the CPU retired instructions.<br/>
<b>GHz</b> average clock rate while the CPU was in c0 state.<br/>
<b>TSC</b> average GHz that the TSC ran during the entire interval.<br/>
<b>%c1, %c3, %c6</b> show the percentage residency in hardware core idle states.<br/>
<b>%pc3, %pc6</b> percentage residency in hardware package idle states.<br/>
</div>
<div class="section">
<h1>EXAMPLE</h1> Without any parameters, turbostat prints out counters ever 5 seconds. (override interval with &quot;-i sec&quot; option, or specify a command for turbostat to fork).<div style="height: 1.00em;">
&#160;</div>
The first row of statistics reflect the average for the entire system. Subsequent rows show per-CPU statistics.<div style="height: 1.00em;">
&#160;</div>
<br/>
[root@x980]# ./turbostat<br/>
core CPU   %c0   GHz  TSC   %c1    %c3    %c6   %pc3   %pc6<br/>
          0.04 1.62 3.38   0.11   0.00  99.85   0.00  95.07<br/>
  0   0   0.04 1.62 3.38   0.06   0.00  99.90   0.00  95.07<br/>
  0   6   0.02 1.62 3.38   0.08   0.00  99.90   0.00  95.07<br/>
  1   2   0.10 1.62 3.38   0.29   0.00  99.61   0.00  95.07<br/>
  1   8   0.11 1.62 3.38   0.28   0.00  99.61   0.00  95.07<br/>
  2   4   0.01 1.62 3.38   0.01   0.00  99.98   0.00  95.07<br/>
  2  10   0.01 1.61 3.38   0.02   0.00  99.98   0.00  95.07<br/>
  8   1   0.07 1.62 3.38   0.15   0.00  99.78   0.00  95.07<br/>
  8   7   0.03 1.62 3.38   0.19   0.00  99.78   0.00  95.07<br/>
  9   3   0.01 1.62 3.38   0.02   0.00  99.98   0.00  95.07<br/>
  9   9   0.01 1.62 3.38   0.02   0.00  99.98   0.00  95.07<br/>
 10   5   0.01 1.62 3.38   0.13   0.00  99.86   0.00  95.07<br/>
 10  11   0.08 1.62 3.38   0.05   0.00  99.86   0.00  95.07<br/>
</div>
<div class="section">
<h1>VERBOSE EXAMPLE</h1> The &quot;-v&quot; option adds verbosity to the output:<div style="height: 1.00em;">
&#160;</div>
<br/>
GenuineIntel 11 CPUID levels; family:model:stepping 0x6:2c:2 (6:44:2)<br/>
12 * 133 = 1600 MHz max efficiency<br/>
25 * 133 = 3333 MHz TSC frequency<br/>
26 * 133 = 3467 MHz max turbo 4 active cores<br/>
26 * 133 = 3467 MHz max turbo 3 active cores<br/>
27 * 133 = 3600 MHz max turbo 2 active cores<br/>
27 * 133 = 3600 MHz max turbo 1 active cores<div class="spacer">
</div>
<br/>
The <b>max efficiency</b> frequency, a.k.a. Low Frequency Mode, is the frequency available at the minimum package voltage.  The  <b>TSC frequency</b> is the nominal maximum frequency of the processor if turbo-mode were not available.  This frequency should be sustainable on all CPUs indefinitely, given nominal power and cooling. The remaining rows show what maximum turbo frequency is possible depending on the number of idle cores.  Note that this information is not available on all processors.</div>
<div class="section">
<h1>FORK EXAMPLE</h1> If turbostat is invoked with a command, it will fork that command and output the statistics gathered when the command exits. eg. Here a cycle soaker is run on 1 CPU (see %c0) for a few seconds until ^C while the other CPUs are mostly idle:<div style="height: 1.00em;">
&#160;</div>
<br/>
[root@x980 lenb]# ./turbostat cat /dev/zero &gt; /dev/null<div class="spacer">
</div>
<br/>
^Ccore CPU   %c0   GHz  TSC   %c1    %c3    %c6   %pc3   %pc6<br/>
           8.49 3.63 3.38  16.23   0.66  74.63   0.00   0.00<br/>
   0   0   1.22 3.62 3.38  32.18   0.00  66.60   0.00   0.00<br/>
   0   6   0.40 3.61 3.38  33.00   0.00  66.60   0.00   0.00<br/>
   1   2   0.11 3.14 3.38   0.19   3.95  95.75   0.00   0.00<br/>
   1   8   0.05 2.88 3.38   0.25   3.95  95.75   0.00   0.00<br/>
   2   4   0.00 3.13 3.38   0.02   0.00  99.98   0.00   0.00<br/>
   2  10   0.00 3.09 3.38   0.02   0.00  99.98   0.00   0.00<br/>
   8   1   0.04 3.50 3.38  14.43   0.00  85.54   0.00   0.00<br/>
   8   7   0.03 2.98 3.38  14.43   0.00  85.54   0.00   0.00<br/>
   9   3   0.00 3.16 3.38 100.00   0.00   0.00   0.00   0.00<br/>
   9   9  99.93 3.63 3.38   0.06   0.00   0.00   0.00   0.00<br/>
  10   5   0.01 2.82 3.38   0.08   0.00  99.91   0.00   0.00<br/>
  10  11   0.02 3.36 3.38   0.06   0.00  99.91   0.00   0.00<br/>
6.950866 sec<div class="spacer">
</div>
<br/>
Above the cycle soaker drives cpu9 up 3.6 Ghz turbo limit while the other processors are generally in various states of idle.<div style="height: 1.00em;">
&#160;</div>
Note that cpu3 is an HT sibling sharing core9 with cpu9, and thus it is unable to get to an idle state deeper than c1 while cpu9 is busy.<div style="height: 1.00em;">
&#160;</div>
Note that turbostat reports average GHz of 3.61, while the arithmetic average of the GHz column above is 3.24. This is a weighted average, where the weight is %c0.  ie. it is the total number of un-halted cycles elapsed per time divided by the number of CPUs.</div>
<div class="section">
<h1>NOTES</h1> <b>turbostat </b> must be run as root.<div style="height: 1.00em;">
&#160;</div>
<b>turbostat </b> reads hardware counters, but doesn't write them. So it will not interfere with the OS or other programs, including multiple invocations of itself.<div style="height: 1.00em;">
&#160;</div>
<b>turbostat </b> may work poorly on Linux-2.6.20 through 2.6.29, as  <b>acpi-cpufreq </b>periodically cleared the APERF and MPERF in those kernels.<div style="height: 1.00em;">
&#160;</div>
The APERF, MPERF MSRs are defined to count non-halted cycles. Although it is not guaranteed by the architecture, turbostat assumes that they count at TSC rate, which is true on all processors tested to date.<div style="height: 1.00em;">
&#160;</div>
</div>
<div class="section">
<h1>REFERENCES</h1> &quot;Intel&#174; Turbo Boost Technology in Intel&#174; Core&#8482; Microarchitecture (Nehalem) Based Processors&quot; http://download.intel.com/design/processor/applnots/320354.pdf<div style="height: 1.00em;">
&#160;</div>
&quot;Intel&#174; 64 and IA-32 Architectures Software Developer's Manual Volume 3B: System Programming Guide&quot; http://www.intel.com/products/processor/manuals/<div style="height: 1.00em;">
&#160;</div>
</div>
<div class="section">
<h1>FILES</h1><br/>
/dev/cpu/*/msr<br/>
<div style="height: 1.00em;">
&#160;</div>
</div>
<div class="section">
<h1>SEE ALSO</h1> msr(4), vmstat(8)</div>
<div class="section">
<h1>AUTHORS</h1><br/>
Written by Len Brown &lt;len.brown@intel.com&gt;</div>
<table class="foot">
<tr>
<td class="foot-date">
</td>
<td class="foot-os">
</td>
</tr>
</table>
</div>
</body>
</html>

