<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/linux/style.css" type="text/css" media="all"/>
<title>
RESOLVCONF(8)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
RESOLVCONF(8)</td>
<td class="head-vol">
resolvconf</td>
<td class="head-rtitle">
RESOLVCONF(8)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>NAME</h1> resolvconf - manage nameserver information</div>
<div class="section">
<h1>SYNOPSIS</h1> cat  <i>FILE</i> | <b>resolvconf</b>  <b>-a</b> <i>IFACE.PROG</i><div class="spacer">
</div>
<b>resolvconf</b>  <b>-d</b> <i>IFACE.PROG</i><div class="spacer">
</div>
<b>resolvconf</b>  <b>-u</b><div class="spacer">
</div>
<b>resolvconf</b> <b>--enable-updates</b> | <b>--disable-updates</b> | <b>--updates-are-enabled</b> | <b>--create-runtime-directories</b> | <b>--wipe-runtime-directories</b></div>
<div class="section">
<h1>DESCRIPTION</h1> Overwrite ( <b>-a</b>) or delete (<b>-d</b>) the nameserver information record  <i>IFACE.PROG</i>. Also run the update scripts in  <i>/etc/resolvconf/update.d/</i> if the nameserver information has changed and updating is enabled.<div class="spacer">
</div>
With <b>-u</b>, just run the update scripts if updating is enabled.<div class="spacer">
</div>
With <b>-a</b>, <b>-d</b> or <b>-u</b> schedule a delayed update if updating is not currently enabled.</div>
<div class="section">
<h1>PUBLICATION</h1> Normally <b>resolvconf</b> is run only by hook scripts attached to network interface configurers such as <b>pppd</b>(8) (for ppp interfaces), to DHCP clients such as <b>dhclient</b>(8), to <b>ifup</b>(8) and <b>ifdown</b>, and to DNS caches such as <b>dnsmasq</b>(8) (for the loopback interface). These hook scripts furnish <b>resolvconf</b> with information about nameservers. For example, <b>dhclient</b> receives one or more nameserver addresses during its negotiation with the DHCP server; its hook script <i>/etc/dhcp/dhclient-enter-hooks.d/resolvconf</i> pushes this information to <b>resolvconf.</b><div class="spacer">
</div>
The <b>ifup</b>(8) program can be used to configure network interfaces according to settings in <i>/etc/network/interfaces</i>(5). To make <b>ifup</b> push nameserver information to <b>resolvconf</b> when it configures an interface, add <b>dns-</b> lines to the relevant <b>iface</b> stanza in <i>/etc/network/interfaces</i>. To add nameserver addresses add a line beginning with <b>dns-nameservers</b>.<div class="spacer">
</div>
<br/>
    dns-nameservers 11.22.33.44 55.66.77.88<br/>
<div class="spacer">
</div>
Note that one or more addresses can be given, and note the `s' at the end of the option name. (Contrast with the <b>resolv.conf</b>(5) option <b>nameserver</b>.) For each other valid <b>resolv.conf</b>(5) configuration option, you can include, in the stanza, one line beginning with that option name with a <b>dns-</b> prefix. The resulting stanza might look like the following example.<div class="spacer">
</div>
<br/>
    iface eth0 inet static<br/>
        address 192.168.3.3<br/>
        netmask 255.255.255.0<br/>
        gateway 192.168.3.1<br/>
        dns-nameservers 192.168.3.45 192.168.8.10<br/>
        dns-search foo.org bar.com<br/>
<div class="spacer">
</div>
See the resolvconf package's <i>README</i> file for more detailed information. For more information about the dns-* options, e.g., <b>dns-search</b>, see <b>resolv.conf</b>(5).<div class="spacer">
</div>
The administrator <i>can</i> run <b>resolvconf</b> from the command line to add or delete nameserver information, but this is not normally necessary.</div>
<div class="section">
<h1>SUBSCRIPTION</h1> Nameserver information provided to <b>resolvconf</b> is stored for use by subscribers to  <b>resolvconf</b>'s notification service. Subscribers that need to know when nameserver information has changed should install a script in <i>/etc/resolvconf/update.d/</i> (or in <i>/etc/resolvconf/update-libc.d/</i>: see below). For example, DNS caches such as <b>dnsmasq</b>(8) and <b>pdnsd</b>(8) subscribe to the notification service so that they know whither to forward queries.<div class="spacer">
</div>
The most important piece of software that subscribes to the notification service is the set of functions that make up the GNU C Library <i>resolver</i>(3). When nameserver information is updated, the script <i>/etc/resolvconf/update.d/libc</i> writes a new resolver configuration file to <i>/run/resolvconf/resolv.conf</i> and then runs the scripts in <i>/etc/resolvconf/update-libc.d/</i>. To make the resolver use the dynamically generated resolver configuration file the administrator should ensure that <i>/etc/resolv.conf</i> is a symbolic link to <i>/run/resolvconf/resolv.conf</i>. This link is never modified by <b>resolvconf</b>(8). If you find that  <i>/etc/resolv.conf</i> is not being updated, check to make sure that the link is intact.<div class="spacer">
</div>
The GNU C Library resolver library isn't the only resolver library available. However, any resolver library that reads <i>/etc/resolv.conf</i> (and most of them do, in order to be compatible with the GNU C Library resolver) should work with <b>resolvconf</b>(8).<div class="spacer">
</div>
Subscribers that need to know only when the resolver configuration file has changed should install a script in <i>/etc/resolvconf/update-libc.d/</i> rather than in <i>/etc/resolvconf/update.d/</i>. This is important for synchronization purposes: scripts in <i>update-libc.d/</i> are run  <i>after</i> <i>resolv.conf</i> has been updated; the same is not necessarily true of scripts in <i>update.d/</i>. Examples of packages that do this are <b>fetchmail</b>(1) and <b>squid</b>(8).<div class="spacer">
</div>
Client hook scripts will find the files containing nameserver information in the current directory.</div>
<div class="section">
<h1>OPTIONS</h1><dl>
<dt>
<b>-a</b> <i>IFACE.PROG</i></dt>
<dd>
Add or overwrite the record <i>IFACE.PROG</i>. When this option is used the information must be provided to <b>resolvconf</b> on its standard input in the format of the <b>resolv.conf</b>(5) file. Each line in the file must be terminated by a newline.</dd>
</dl>
<dl>
<dt>
<b>-d</b> <i>IFACE.PROG</i></dt>
<dd>
Delete the record <i>IFACE.PROG</i>.</dd>
</dl>
<div class="spacer">
</div>
The string <i>IFACE.PROG</i> name may not contain spaces, slashes, an initial dot, an initial hyphen or an initial tilde. It is conventionally formed from  <i>IFACE</i>, the name of the interface involved, a dot, and  <i>PROG</i>, the name of the interface configuration program, e.g., `eth0.dhclient'.<div class="spacer">
</div>
Following the addition or deletion of the record, run the update scripts (if updating is enabled).<dl>
<dt>
<b>-u</b></dt>
<dd>
Just run the update scripts (if updating is enabled).</dd>
</dl>
<dl>
<dt>
<b>--enable-updates</b></dt>
<dd>
Set the flag indicating that <b>resolvconf</b> should run update scripts when invoked in the future with  <b>-a</b>, <b>-d</b> or <b>-u</b>. If a delayed update was scheduled then run update scripts.</dd>
</dl>
<dl>
<dt>
<b>--disable-updates</b></dt>
<dd>
Clear the flag.</dd>
</dl>
<dl>
<dt>
<b>--updates-are-enabled</b></dt>
<dd>
Return 0 if the flag is set, otherwise return 1.</dd>
</dl>
<dl>
<dt>
<b>--create-runtime-directories</b></dt>
<dd>
Create the directories where resolver information records and other run-time files are stored.</dd>
</dl>
<dl>
<dt>
<b>--wipe-runtime-directories</b></dt>
<dd>
Delete everything in the directories where resolver information records and other run-time files are stored.</dd>
</dl>
</div>
<div class="section">
<h1>ENVIRONMENT VARIABLES</h1> The following variables can be set in the default-override file <i>/etc/default/resolvconf</i>. If the file does not exist you will have to create it.<dl>
<dt>
<b>REPORT_ABSENT_SYMLINK</b></dt>
<dd>
If set to &quot;yes&quot; then <b>resolvconf</b> will print a message when <i>/etc/resolv.conf</i> is not a symbolic link to the <b>resolvconf</b>(8)-generated <i>resolv.conf</i> file. Set to &quot;no&quot; to prevent the printing of this message. The default is &quot;yes&quot;.</dd>
</dl>
<dl>
<dt>
<b>TRUNCATE_NAMESERVER_LIST_AFTER_LOOPBACK_ADDRESS</b></dt>
<dd>
If set to &quot;yes&quot; then the <i>update.d/libc</i> script will include no more nameserver addresses after the first loopback address. In IPv4 a loopback address is an address that starts with &quot;127.&quot; This is usually the preferable behavior if the nameserver at 127.* is a local caching nameserver since it inhibits unnecessary changes to <i>resolv.conf</i>. When an interface is brought up the local caching nameserver is informed by <b>resolvconf</b>(8) of any new nameserver addresses and the additional name service is made available to applications that make use of the resolver and the local caching nameserver; the applications themselves do not need to be notified of the change. A disadvantage of this mode of operation is that applications have no secondary or tertiary nameserver address to fall back on should the local caching nameserver crash. Insofar as a local nameserver crash can be regarded as an unlikely event, this is a relatively minor disadvantage. Set to &quot;no&quot; to disable this truncation feature. The default is &quot;yes&quot;. A deprecated synonym for this variable is <b>TRUNCATE_NAMESERVER_LIST_AFTER_127</b>.</dd>
</dl>
</div>
<div class="section">
<h1>FILES</h1><dl>
<dt>
<i>/etc/default/resolvconf</i></dt>
<dd>
See the ENVIRONMENT VARIABLES section.</dd>
</dl>
<dl>
<dt>
<i>/run/resolvconf</i></dt>
<dd>
This is the location where nameserver information is stored. It will be created if <b>resolvconf</b> is called with the  <b>--create-runtime-directories</b> option. Clients should not make any assumptions about the hierarchy that is constructed under this directory.</dd>
</dl>
<dl>
<dt>
<i>/etc/resolvconf/interface-order</i></dt>
<dd>
Determines the order in which nameserver information records are processed. See <b>interface-order</b>(5).</dd>
</dl>
<dl>
<dt>
<i>/etc/resolvconf/resolv.conf.d/base</i></dt>
<dd>
File containing basic resolver information. The lines in this file are included in the resolver configuration file even when no interfaces are configured.</dd>
</dl>
<dl>
<dt>
<i>/etc/resolvconf/resolv.conf.d/head</i></dt>
<dd>
File to be prepended to the dynamically generated resolver configuration file. Normally this is just a comment line.</dd>
</dl>
<dl>
<dt>
<i>/etc/resolvconf/resolv.conf.d/tail</i></dt>
<dd>
File to be appended to the dynamically generated resolver configuration file. To append nothing, make this an empty file. This file is a good place to put a resolver <b>options</b> line if one is needed, e.g.,<div style="height: 1.00em;">
&#160;</div>
<br/>
    options inet6<br/>
</dd>
</dl>
<dl>
<dt>
<i>/etc/resolvconf/resolv.conf.d/original</i></dt>
<dd>
Copy of the <i>/etc/resolv.conf</i> file before the resolvconf package was installed. This file has no effect on the functioning of resolvconf; it is retained so that  <i>/etc/resolv.conf</i> can be restored to its original state if the resolvconf package if removed.<div style="height: 1.00em;">
&#160;</div>
Note also that a copy of this file is included in the database until the first reboot after installation of the resolvconf package; this ensures that nameservers reachable before installation of resolvconf are still reachable after installation of resolvconf even though at that point not all suppliers of nameserver information may have supplied their information to <b>resolvconf</b>(8).<div style="height: 1.00em;">
&#160;</div>
Note also that the administrator can choose to create a symbolic link in  <i>/etc/resolvconf/resolv.conf.d/</i> from <i>tail</i> to <i>original</i> so that the contents of the latter are always added to the end of the dynamically generated  <i>resolv.conf</i>.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
</div>
<div class="section">
<h1>BUGS</h1> Currently <b>resolvconf</b> does not check the sanity of the information provided to it.</div>
<div class="section">
<h1>AUTHOR</h1> Written by Thomas Hood &lt;jdthood@gmail.com&gt;.</div>
<div class="section">
<h1>COPYRIGHT</h1> Copyright &#169; 2004, 2011 Thomas Hood<div style="height: 0.00em;">
&#160;</div>
This is free software; see the source for copying conditions.</div>
<div class="section">
<h1>SEE ALSO</h1> <b>interface-order</b>(5), <b>resolv.conf</b>(5), <b>resolver</b>(3).</div>
<table class="foot">
<tr>
<td class="foot-date">
6 Dec 2011</td>
<td class="foot-os">
resolvconf</td>
</tr>
</table>
</div>
</body>
</html>

