<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/linux/style.css" type="text/css" media="all"/>
<title>
VISUDO(8)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
VISUDO(8)</td>
<td class="head-vol">
MAINTENANCE COMMANDS</td>
<td class="head-rtitle">
VISUDO(8)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>NAME</h1> visudo - edit the sudoers file</div>
<div class="section">
<h1>SYNOPSIS</h1>  <b>visudo</b> [<b>-chqsV</b>] [<b>-f</b> <i>sudoers</i>]</div>
<div class="section">
<h1>DESCRIPTION</h1>  <b>visudo</b> edits the <i>sudoers</i> file in a safe fashion, analogous to  <i>vipw</i>(8).  <b>visudo</b> locks the <i>sudoers</i> file against multiple simultaneous edits, provides basic sanity checks, and checks for parse errors.  If the  <i>sudoers</i> file is currently being edited you will receive a message to try again later.<div class="spacer">
</div>
There is a hard-coded list of one or more editors that <b>visudo</b> will use set at compile-time that may be overridden via the  <i>editor</i> <i>sudoers</i> Default variable.  This list defaults to &quot;/usr/local/bin/vi&quot;.  Normally,  <b>visudo</b> does not honor the VISUAL or EDITOR environment variables unless they contain an editor in the aforementioned editors list.  However, if  <b>visudo</b> is configured with the <i>--with-env-editor</i> option or the  <i>env_editor</i> Default variable is set in <i>sudoers</i>,  <b>visudo</b> will use any the editor defines by VISUAL or EDITOR. Note that this can be a security hole since it allows the user to execute any program they wish simply by setting VISUAL or EDITOR.<div class="spacer">
</div>
<b>visudo</b> parses the <i>sudoers</i> file after the edit and will not save the changes if there is a syntax error.  Upon finding an error,  <b>visudo</b> will print a message stating the line number(s) where the error occurred and the user will receive the &quot;What now?&quot; prompt.  At this point the user may enter &quot;e&quot; to re-edit the  <i>sudoers</i> file, &quot;x&quot; to exit without saving the changes, or &quot;Q&quot; to quit and save changes.  The &quot;Q&quot; option should be used with extreme care because if  <b>visudo</b> believes there to be a parse error, so will  <b>sudo</b> and no one will be able to  <b>sudo</b> again until the error is fixed. If &quot;e&quot; is typed to edit the   <i>sudoers</i> file after a parse error has been detected, the cursor will be placed on the line where the error occurred (if the editor supports this feature).</div>
<div class="section">
<h1>OPTIONS</h1>  <b>visudo</b> accepts the following command line options:<dl>
<dt>
-c</dt>
<dd>
Enable <b>check-only</b> mode.  The existing <i>sudoers</i> file will be checked for syntax and a message will be printed to the standard output detailing the status of  <i>sudoers</i>. If the syntax check completes successfully,  <b>visudo</b> will exit with a value of 0.  If a syntax error is encountered,  <b>visudo</b> will exit with a value of 1.</dd>
</dl>
<dl>
<dt>
-f <i>sudoers</i></dt>
<dd>
Specify and alternate <i>sudoers</i> file location.  With this option  <b>visudo</b> will edit (or check) the <i>sudoers</i> file of your choice, instead of the default,  <i>/etc/sudoers</i>.  The lock file used is the specified  <i>sudoers</i> file with &quot;.tmp&quot; appended to it. In  <b>check-only</b> mode only, the argument to <b>-f</b> may be &quot;-&quot;, indicating that  <i>sudoers</i> will be read from the standard input.</dd>
</dl>
<dl>
<dt>
-h</dt>
<dd>
The <b>-h</b> (<i>help</i>) option causes <b>visudo</b> to print a short help message to the standard output and exit.</dd>
</dl>
<dl>
<dt>
-q</dt>
<dd>
Enable <b>quiet</b> mode.  In this mode details about syntax errors are not printed.  This option is only useful when combined with the  <b>-c</b> option.</dd>
</dl>
<dl>
<dt>
-s</dt>
<dd>
Enable <b>strict</b> checking of the <i>sudoers</i> file.  If an alias is used before it is defined,  <b>visudo</b> will consider this a parse error.  Note that it is not possible to differentiate between an alias and a host name or user name that consists solely of uppercase letters, digits, and the underscore ('_') character.</dd>
</dl>
<dl>
<dt>
-V</dt>
<dd>
The <b>-V</b> (version) option causes <b>visudo</b> to print its version number and exit.</dd>
</dl>
</div>
<div class="section">
<h1>ENVIRONMENT</h1> The following environment variables may be consulted depending on the value of the  <i>editor</i> and <i>env_editor</i> <i>sudoers</i> variables:<dl>
<dt>
VISUAL</dt>
<dd>
Invoked by visudo as the editor to use</dd>
</dl>
<dl>
<dt>
EDITOR</dt>
<dd>
Used by visudo if VISUAL is not set</dd>
</dl>
</div>
<div class="section">
<h1>FILES</h1><dl>
<dt>
<i>/etc/sudoers</i></dt>
<dd>
List of who can run what</dd>
</dl>
<dl>
<dt>
<i>/etc/sudoers.tmp</i></dt>
<dd>
Lock file for visudo</dd>
</dl>
</div>
<div class="section">
<h1>DIAGNOSTICS</h1><dl>
<dt>
sudoers file busy, try again later.</dt>
<dd>
Someone else is currently editing the <i>sudoers</i> file.</dd>
</dl>
<dl>
<dt>
/etc/sudoers.tmp: Permission denied</dt>
<dd>
You didn't run <b>visudo</b> as root.</dd>
</dl>
<dl>
<dt>
Can't find you in the passwd database</dt>
<dd>
Your userid does not appear in the system passwd file.</dd>
</dl>
<dl>
<dt>
Warning: {User,Runas,Host,Cmnd}_Alias referenced but not defined</dt>
<dd>
Either you are trying to use an undeclare {User,Runas,Host,Cmnd}_Alias or you have a user or host name listed that consists solely of uppercase letters, digits, and the underscore ('_') character.  In the latter case, you can ignore the warnings ( <b>sudo</b> will not complain).  In  <b>-s</b> (strict) mode these are errors, not warnings.</dd>
</dl>
<dl>
<dt>
Warning: unused {User,Runas,Host,Cmnd}_Alias</dt>
<dd>
The specified {User,Runas,Host,Cmnd}_Alias was defined but never used.  You may wish to comment out or remove the unused alias.  In  <b>-s</b> (strict) mode this is an error, not a warning.</dd>
</dl>
<dl>
<dt>
Warning: cycle in {User,Runas,Host,Cmnd}_Alias</dt>
<dd>
The specified {User,Runas,Host,Cmnd}_Alias includes a reference to itself, either directly or through an alias it includes.  This is only a warning by default as  <b>sudo</b> will ignore cycles when parsing the  <i>sudoers</i> file.</dd>
</dl>
</div>
<div class="section">
<h1>SEE ALSO</h1>  <i>vi</i>(1), <i>sudoers</i>(5), <i>sudo</i>(8), <i>vipw</i>(8)</div>
<div class="section">
<h1>AUTHOR</h1> Many people have worked on  <i>sudo</i> over the years; this version of  <b>visudo</b> was written by:<div class="spacer">
</div>
<br/>
 Todd Miller<br/>
<div class="spacer">
</div>
See the HISTORY file in the sudo distribution or visit http://www.sudo.ws/sudo/history.html for more details.</div>
<div class="section">
<h1>CAVEATS</h1> There is no easy way to prevent a user from gaining a root shell if the editor used by  <b>visudo</b> allows shell escapes.</div>
<div class="section">
<h1>BUGS</h1> If you feel you have found a bug in  <b>visudo</b>, please submit a bug report at http://www.sudo.ws/sudo/bugs/</div>
<div class="section">
<h1>SUPPORT</h1> Limited free support is available via the sudo-users mailing list, see http://www.sudo.ws/mailman/listinfo/sudo-users to subscribe or search the archives.</div>
<div class="section">
<h1>DISCLAIMER</h1>  <b>visudo</b> is provided ``AS IS'' and any express or implied warranties, including, but not limited to, the implied warranties of merchantability and fitness for a particular purpose are disclaimed.  See the LICENSE file distributed with  <b>sudo</b> or http://www.sudo.ws/sudo/license.html for complete details.</div>
<table class="foot">
<tr>
<td class="foot-date">
September 16, 2011</td>
<td class="foot-os">
1.8.3</td>
</tr>
</table>
</div>
</body>
</html>

