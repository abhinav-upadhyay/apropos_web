<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/linux/style.css" type="text/css" media="all"/>
<title>
TUNELP(8)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
TUNELP(8)</td>
<td class="head-vol">
System Administration</td>
<td class="head-rtitle">
TUNELP(8)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>NAME</h1> tunelp - set various parameters for the lp device</div>
<div class="section">
<h1>SYNOPSIS</h1> <b>tunelp</b> <i>device</i> [<b>-i</b> <i>IRQ</i>] [<b>-t</b> <i>TIME</i>] [<b>-c</b> <i>CHARS</i>] [<b>-w</b> <i>WAIT</i>] [<b>-a</b> {<b>on</b>|<b>off</b>}] [<b>-o</b> {<b>on</b>|<b>off</b>}] [<b>-C</b> {<b>on</b>|<b>off</b>}] [<b>-r</b>] [<b>-s</b>] [<b>-q</b> {<b>on</b>|<b>off</b>}] [<b>-T</b> {<b>on</b>|<b>off</b>}]</div>
<div class="section">
<h1>DESCRIPTION</h1>  <b>tunelp</b> sets several parameters for the /dev/lp<i>?</i> devices, for better performance (or for any performance at all, if your printer won't work without it...)  Without parameters, it tells whether the device is using interrupts, and if so, which one.  With parameters, it sets the device characteristics accordingly.  The parameters are as follows:<div style="height: 1.00em;">
&#160;</div>
<dl>
<dt>
<b>-i</b><i> IRQ</i></dt>
<dd>
specifies the IRQ to use for the parallel port in question.  If this is set to something non-zero, -t and -c have no effect.  If your port does not use interrupts, this option will make printing stop. The command <b>tunelp -i 0</b> restores non-interrupt driven (polling) action, and your printer should work again.  If your parallel port does support interrupts, interrupt-driven printing should be somewhat faster and efficient, and will probably be desirable.<div style="height: 1.00em;">
&#160;</div>
NOTE: This option will have no effect with kernel 2.1.131 or later since the irq is handled by the parport driver. You can change the parport irq for example via <i>/proc/parport/*/irq</i>. Read <i>/usr/src/linux/Documentation/parport.txt</i> for more details on parport.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
<b>-t</b><i> TIME</i></dt>
<dd>
is the amount of time in jiffies that the driver waits if the printer doesn't take a character for the number of tries dictated by the -c parameter.  10 is the default value.  If you want fastest possible printing, and don't care about system load, you may set this to 0.  If you don't care how fast your printer goes, or are printing text on a slow printer with a buffer, then 500 (5 seconds) should be fine, and will give you very low system load.  This value generally should be lower for printing graphics than text, by a factor of approximately 10, for best performance.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
<b>-c</b><i> CHARS</i></dt>
<dd>
is the number of times to try to output a character to the printer before sleeping for -t  <i>TIME</i>.  It is the number of times around a loop that tries to send a character to the printer.  120 appears to be a good value for most printers in polling mode.  1000 is the default, because there are some printers that become jerky otherwise, but you  <i>must</i> set this to `1' to handle the maximal CPU efficiency if you are using interrupts. If you have a very fast printer, a value of 10 might make more sense even if in polling mode. If you have a  <i>really</i> old printer, you can increase this further.<div style="height: 1.00em;">
&#160;</div>
Setting -t <i>TIME</i> to 0 is equivalent to setting -c <i>CHARS</i> to infinity.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
<b>-w</b><i> WAIT</i></dt>
<dd>
is the number of usec we wait while playing with the strobe signal. While most printers appear to be able to deal with an extremely short strobe, some printers demand a longer one.  Increasing this from the default 1 may make it possible to print with those printers.  This may also make it possible to use longer cables. It's also possible to decrease this value to 0 if your printer is fast enough or your machine is slow enough.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
<b>-a</b> {<b>on</b>|<b>off</b>}</dt>
<dd>
This is whether to abort on printer error - the default is not to.  If you are sitting at your computer, you probably want to be able to see an error and fix it, and have the printer go on printing.  On the other hand, if you aren't, you might rather that your printer spooler find out that the printer isn't ready, quit trying, and send you mail about it.  The choice is yours.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
<b>-o</b> {<b>on</b>|<b>off</b>}</dt>
<dd>
This option is much like -a.  It makes any <i>open()</i> of this device check to see that the device is on-line and not reporting any out of paper or other errors.  This is the correct setting for most versions of lpd.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
<b>-C</b> {<b>on</b>|<b>off</b>}</dt>
<dd>
This option adds extra (&quot;careful&quot;) error checking.  When this option is on, the printer driver will ensure that the printer is on-line and not reporting any out of paper or other errors before sending data.  This is particularly useful for printers that normally appear to accept data when turned off.<div style="height: 1.00em;">
&#160;</div>
NOTE: This option is obsolete because it's the default in 2.1.131 kernel or later.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
<b>-s</b></dt>
<dd>
This option returns the current printer status, both as a decimal number from 0..255, and as a list of active flags.  When this option is specified, -q off, turning off the display of the current IRQ, is implied.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
<b>-T</b> {<b>on</b>|<b>off</b>}</dt>
<dd>
This option is obsolete. It was added in Linux 2.1.131, and removed again in Linux 2.3.10. The below is for these old kernels only.<div style="height: 1.00em;">
&#160;</div>
This option tells the lp driver to trust or not the IRQ. This option makes sense only if you are using interrupts. If you tell the lp driver to trust the irq, then, when the lp driver will get an irq, it will send the next pending character to the printer unconditionally, even if the printer still claims to be BUSY. This is the only way to sleep on interrupt (and so the handle the irq printing efficiently) at least on Epson Stylus Color Printers. The lp driver automagically detects if you could get improved performance by setting this flag, and in such case it will warn you with a kernel message.<div style="height: 1.00em;">
&#160;</div>
NOTE: Trusting the irq is reported to corrupt the printing on some hardware, you must try to know if your printer will work or not...<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
<b>-r</b></dt>
<dd>
This option resets the port.  It requires a Linux kernel version of 1.1.80 or later.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
<b>-q</b> {<b>on</b>|<b>off</b>}</dt>
<dd>
This option sets printing the display of the current IRQ setting.<div style="height: 1.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
</div>
<div class="section">
<h1>NOTES</h1> <b>-o</b>, <b>-C</b>, and <b>-s</b> all require a Linux kernel version of 1.1.76 or later.<div style="height: 1.00em;">
&#160;</div>
<b>-C</b> requires a Linux version prior to 2.1.131.<div style="height: 1.00em;">
&#160;</div>
<b>-T</b> requires a Linux version of 2.1.131 or later.<div style="height: 1.00em;">
&#160;</div>
</div>
<div class="section">
<h1>BUGS</h1> By some unfortunate coincidence the ioctl LPSTRICT of 2.0.36 has the same number as the ioctl LPTRUSTIRQ introduced in 2.1.131. So, use of the -T option on a 2.0.36 kernel with an tunelp compiled under 2.1.131 or later may have unexpected effects.<div style="height: 1.00em;">
&#160;</div>
</div>
<div class="section">
<h1>FILES</h1> <i>/dev/lp?</i><div style="height: 0.00em;">
&#160;</div>
<i>/proc/parport/*/*</i><div style="height: 1.00em;">
&#160;</div>
</div>
<div class="section">
<h1>AVAILABILITY</h1> The tunelp  command is part of the util-linux package and is available from ftp://ftp.kernel.org/pub/linux/utils/util-linux/.</div>
<table class="foot">
<tr>
<td class="foot-date">
May 1999</td>
<td class="foot-os">
util-linux</td>
</tr>
</table>
</div>
</body>
</html>

