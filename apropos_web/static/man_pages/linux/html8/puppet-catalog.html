<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/linux/style.css" type="text/css" media="all"/>
<title>
PUPPET-CATALOG(8)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
PUPPET-CATALOG(8)</td>
<td class="head-vol">
Puppet manual</td>
<td class="head-rtitle">
PUPPET-CATALOG(8)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>NAME</h1>  <b>puppet-catalog</b> - Compile, save, view, and convert catalogs.</div>
<div class="section">
<h1>SYNOPSIS</h1> puppet catalog  <i>action</i> [--terminus TERMINUS] [--extra HASH]</div>
<div class="section">
<h1>DESCRIPTION</h1> This subcommand deals with catalogs, which are compiled per-node artifacts generated from a set of Puppet manifests. By default, it interacts with the compiling subsystem and compiles a catalog using the default manifest and  <b>certname</b>, but you can change the source of the catalog with the <b>--terminus</b> option. You can also choose to print any catalog in &#180;dot&#180; format (for easy graph viewing with OmniGraffle or Graphviz) with &#180;--render-as dot&#180;.</div>
<div class="section">
<h1>OPTIONS</h1> Note that any configuration parameter that&#180;s valid in the configuration file is also a valid long argument, although it may or may not be relevant to the present action. For example,  <b>server</b> and <b>run_mode</b> are valid configuration parameters, so you can specify <b>--server &lt;servername&gt;</b>, or <b>--run_mode &lt;runmode&gt;</b> as an argument.<div class="spacer">
</div>
See the configuration file documentation at <i>http://docs.puppetlabs.com/references/stable/configuration.html</i> for the full list of acceptable parameters. A commented list of all configuration options can also be generated by running puppet with <b>--genconfig</b>.<dl>
<dt>
--render-as FORMAT</dt>
<dd>
The format in which to render output. The most common formats are <b>json</b>, <b>s</b> (string), <b>yaml</b>, and <b>console</b>, but other options such as <b>dot</b> are sometimes available.</dd>
</dl>
<dl>
<dt>
--verbose</dt>
<dd>
Whether to log verbosely.</dd>
</dl>
<dl>
<dt>
--debug</dt>
<dd>
Whether to log debug information.</dd>
</dl>
<dl>
<dt>
--extra HASH</dt>
<dd>
A terminus can take additional arguments to refine the operation, which are passed as an arbitrary hash to the back-end. Anything passed as the extra value is just send direct to the back-end.</dd>
</dl>
<dl>
<dt>
--terminus TERMINUS</dt>
<dd>
Indirector faces expose indirected subsystems of Puppet. These subsystems are each able to retrieve and alter a specific type of data (with the familiar actions of <b>find</b>, <b>search</b>, <b>save</b>, and <b>destroy</b>) from an arbitrary number of pluggable backends. In Puppet parlance, these backends are called terminuses.</dd>
</dl>
<dl>
<dt>
</dt>
<dd>
Almost all indirected subsystems have a <b>rest</b> terminus that interacts with the puppet master&#180;s data. Most of them have additional terminuses for various local data models, which are in turn used by the indirected subsystem on the puppet master whenever it receives a remote request.</dd>
</dl>
<dl>
<dt>
</dt>
<dd>
The terminus for an action is often determined by context, but occasionally needs to be set explicitly. See the &quot;Notes&quot; section of this face&#180;s manpage for more details.</dd>
</dl>
</div>
<div class="section">
<h1>ACTIONS</h1><dl>
<dt>
<b>apply</b> - Find and apply a catalog.</dt>
<dd>
<b>SYNOPSIS</b></dd>
</dl>
<dl>
<dt>
</dt>
<dd>
puppet catalog apply [--terminus TERMINUS] [--extra HASH]</dd>
</dl>
<dl>
<dt>
</dt>
<dd>
<b>DESCRIPTION</b></dd>
</dl>
<dl>
<dt>
</dt>
<dd>
Finds and applies a catalog. This action takes no arguments, but the source of the catalog can be managed with the <b>--terminus</b> option.</dd>
</dl>
<dl>
<dt>
</dt>
<dd>
<b>RETURNS</b></dd>
</dl>
<dl>
<dt>
</dt>
<dd>
Nothing. When used from the Ruby API, returns a Puppet::Transaction::Report object.</dd>
</dl>
<dl>
<dt>
<b>destroy</b> - Invalid for this subcommand.</dt>
<dd>
<b>SYNOPSIS</b></dd>
</dl>
<dl>
<dt>
</dt>
<dd>
puppet catalog destroy [--terminus TERMINUS] [--extra HASH] <i>key</i></dd>
</dl>
<dl>
<dt>
</dt>
<dd>
<b>DESCRIPTION</b></dd>
</dl>
<dl>
<dt>
</dt>
<dd>
Invalid for this subcommand.</dd>
</dl>
<dl>
<dt>
<b>download</b> - Download this node&#180;s catalog from the puppet master server.</dt>
<dd>
<b>SYNOPSIS</b></dd>
</dl>
<dl>
<dt>
</dt>
<dd>
puppet catalog download [--terminus TERMINUS] [--extra HASH]</dd>
</dl>
<dl>
<dt>
</dt>
<dd>
<b>DESCRIPTION</b></dd>
</dl>
<dl>
<dt>
</dt>
<dd>
Retrieves a catalog from the puppet master and saves it to the local yaml cache. This action always contacts the puppet master and will ignore alternate termini.</dd>
</dl>
<dl>
<dt>
</dt>
<dd>
The saved catalog can be used in any subsequent catalog action by specifying &#180;--terminus yaml&#180; for that action.</dd>
</dl>
<dl>
<dt>
</dt>
<dd>
<b>RETURNS</b></dd>
</dl>
<dl>
<dt>
</dt>
<dd>
Nothing.</dd>
</dl>
<dl>
<dt>
</dt>
<dd>
<b>NOTES</b></dd>
</dl>
<dl>
<dt>
</dt>
<dd>
When used from the Ruby API, this action has a side effect of leaving Puppet::Resource::Catalog.indirection.terminus_class set to yaml. The terminus must be explicitly re-set for subsequent catalog actions.</dd>
</dl>
<dl>
<dt>
<b>find</b> - Retrieve the catalog for a node.</dt>
<dd>
<b>SYNOPSIS</b></dd>
</dl>
<dl>
<dt>
</dt>
<dd>
puppet catalog find [--terminus TERMINUS] [--extra HASH] <i>certname</i></dd>
</dl>
<dl>
<dt>
</dt>
<dd>
<b>DESCRIPTION</b></dd>
</dl>
<dl>
<dt>
</dt>
<dd>
Retrieve the catalog for a node.</dd>
</dl>
<dl>
<dt>
</dt>
<dd>
<b>RETURNS</b></dd>
</dl>
<dl>
<dt>
</dt>
<dd>
A serialized catalog. When used from the Ruby API, returns a Puppet::Resource::Catalog object.</dd>
</dl>
<dl>
<dt>
<b>info</b> - Print the default terminus class for this face.</dt>
<dd>
<b>SYNOPSIS</b></dd>
</dl>
<dl>
<dt>
</dt>
<dd>
puppet catalog info [--terminus TERMINUS] [--extra HASH]</dd>
</dl>
<dl>
<dt>
</dt>
<dd>
<b>DESCRIPTION</b></dd>
</dl>
<dl>
<dt>
</dt>
<dd>
Prints the default terminus class for this subcommand. Note that different run modes may have different default termini; when in doubt, specify the run mode with the &#180;--run_mode&#180; option.</dd>
</dl>
<dl>
<dt>
<b>save</b> - API only: create or overwrite an object.</dt>
<dd>
<b>SYNOPSIS</b></dd>
</dl>
<dl>
<dt>
</dt>
<dd>
puppet catalog save [--terminus TERMINUS] [--extra HASH] <i>key</i></dd>
</dl>
<dl>
<dt>
</dt>
<dd>
<b>DESCRIPTION</b></dd>
</dl>
<dl>
<dt>
</dt>
<dd>
API only: create or overwrite an object. As the Faces framework does not currently accept data from STDIN, save actions cannot currently be invoked from the command line.</dd>
</dl>
<dl>
<dt>
<b>search</b> - Invalid for this subcommand.</dt>
<dd>
<b>SYNOPSIS</b></dd>
</dl>
<dl>
<dt>
</dt>
<dd>
puppet catalog search [--terminus TERMINUS] [--extra HASH] <i>query</i></dd>
</dl>
<dl>
<dt>
</dt>
<dd>
<b>DESCRIPTION</b></dd>
</dl>
<dl>
<dt>
</dt>
<dd>
Invalid for this subcommand.</dd>
</dl>
<dl>
<dt>
<b>select</b> - Retrieve a catalog and filter it for resources of a given type.</dt>
<dd>
<b>SYNOPSIS</b></dd>
</dl>
<dl>
<dt>
</dt>
<dd>
puppet catalog select [--terminus TERMINUS] [--extra HASH] <i>host</i> <i>resource_type</i></dd>
</dl>
<dl>
<dt>
</dt>
<dd>
<b>DESCRIPTION</b></dd>
</dl>
<dl>
<dt>
</dt>
<dd>
Retrieves a catalog for the specified host, then searches it for all resources of the requested type.</dd>
</dl>
<dl>
<dt>
</dt>
<dd>
<b>RETURNS</b></dd>
</dl>
<dl>
<dt>
</dt>
<dd>
A list of resource references (&quot;Type[title]&quot;). When used from the API, returns an array of Puppet::Resource objects excised from a catalog.</dd>
</dl>
<dl>
<dt>
</dt>
<dd>
<b>NOTES</b></dd>
</dl>
<dl>
<dt>
</dt>
<dd>
By default, this action will retrieve a catalog from Puppet&#180;s compiler subsystem; you must call the action with <b>--terminus rest</b> if you wish to retrieve a catalog from the puppet master.</dd>
</dl>
<dl>
<dt>
</dt>
<dd>
FORMATTING ISSUES: This action cannot currently render useful yaml; instead, it returns an entire catalog. Use json instead.</dd>
</dl>
</div>
<div class="section">
<h1>EXAMPLES</h1>  <b>apply</b><div class="spacer">
</div>
Apply the locally cached catalog:<div class="spacer">
</div>
$ puppet catalog apply --terminus yaml<div class="spacer">
</div>
Retrieve a catalog from the master and apply it, in one step:<div class="spacer">
</div>
$ puppet catalog apply --terminus rest<div class="spacer">
</div>
From <b>secret_agent.rb</b> (API example):<dl>
<dt>
<div class="spacer">
</div>
</dt>
<dd>
<div class="spacer">
</div>
<br/>
# ...<br/>
Puppet::Face[:catalog, &#180;0.0.1&#180;].download<br/>
# (Termini are singletons; catalog.download has a side effect of<br/>
# setting the catalog terminus to yaml)<br/>
report  = Puppet::Face[:catalog, &#180;0.0.1&#180;].apply<br/>
# ...<br/>
</dd>
</dl>
<dl>
<dt>
<div class="spacer">
</div>
</dt>
<dd>
</dd>
</dl>
<div class="spacer">
</div>
<b>download</b><div class="spacer">
</div>
Retrieve and store a catalog:<div class="spacer">
</div>
$ puppet catalog download<div class="spacer">
</div>
From <b>secret_agent.rb</b> (API example):<dl>
<dt>
<div class="spacer">
</div>
</dt>
<dd>
<div class="spacer">
</div>
<br/>
Puppet::Face[:plugin, &#180;0.0.1&#180;].download<br/>
Puppet::Face[:facts, &#180;0.0.1&#180;].upload<br/>
Puppet::Face[:catalog, &#180;0.0.1&#180;].download<br/>
# ...<br/>
</dd>
</dl>
<dl>
<dt>
<div class="spacer">
</div>
</dt>
<dd>
</dd>
</dl>
<div class="spacer">
</div>
<b>select</b><div class="spacer">
</div>
Ask the puppet master for a list of managed file resources for a node:<div class="spacer">
</div>
$ puppet catalog select --terminus rest somenode.magpie.lan file</div>
<div class="section">
<h1>NOTES</h1> This subcommand is an indirector face, which exposes  <b>find</b>, <b>search</b>, <b>save</b>, and <b>destroy</b> actions for an indirected subsystem of Puppet. Valid termini for this face include:<dl>
<dt>
&#8226;</dt>
<dd>
<b>active_record</b></dd>
</dl>
<dl>
<dt>
&#8226;</dt>
<dd>
<b>compiler</b></dd>
</dl>
<dl>
<dt>
&#8226;</dt>
<dd>
<b>json</b></dd>
</dl>
<dl>
<dt>
&#8226;</dt>
<dd>
<b>queue</b></dd>
</dl>
<dl>
<dt>
&#8226;</dt>
<dd>
<b>rest</b></dd>
</dl>
<dl>
<dt>
&#8226;</dt>
<dd>
<b>static_compiler</b></dd>
</dl>
<dl>
<dt>
&#8226;</dt>
<dd>
<b>store_configs</b></dd>
</dl>
<dl>
<dt>
&#8226;</dt>
<dd>
<b>yaml</b></dd>
</dl>
<dl>
<dt>
<div class="spacer">
</div>
</dt>
<dd>
</dd>
</dl>
</div>
<div class="section">
<h1>COPYRIGHT AND LICENSE</h1> Copyright 2011 by Puppet Labs Apache 2 license; see COPYING</div>
<table class="foot">
<tr>
<td class="foot-date">
January 2013</td>
<td class="foot-os">
Puppet Labs, LLC</td>
</tr>
</table>
</div>
</body>
</html>

