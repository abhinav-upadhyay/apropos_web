<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/linux/style.css" type="text/css" media="all"/>
<title>
CRYPTSETUP(8)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
CRYPTSETUP(8)</td>
<td class="head-vol">
Maintenance Commands</td>
<td class="head-rtitle">
CRYPTSETUP(8)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>NAME</h1> cryptsetup - setup cryptographic volumes for dm-crypt (including LUKS extension)</div>
<div class="section">
<h1>SYNOPSIS</h1> <b>cryptsetup &lt;options&gt; &lt;action&gt; &lt;action args&gt;</b></div>
<div class="section">
<h1>DESCRIPTION</h1> cryptsetup is used to conveniently setup dm-crypt managed device-mapper mappings.</div>
<div class="section">
<h1>PLAIN MODE</h1> For basic (plain) dm-crypt mappings, there are four operations.<div style="height: 1.00em;">
&#160;</div>
<i>create</i> &lt;name&gt; &lt;device&gt;<dl>
<dt>
</dt>
<dd>
creates a mapping with &lt;name&gt; backed by device &lt;device&gt;.<div style="height: 1.00em;">
&#160;</div>
<b>&lt;options&gt;</b> can be [--hash, --cipher, --verify-passphrase, --key-file, --key-size, --offset, --skip, --size, --readonly, --shared, --allow-discards]</dd>
</dl>
<div class="spacer">
</div>
<i>remove</i> &lt;name&gt;<dl>
<dt>
</dt>
<dd>
removes an existing mapping &lt;name&gt;.</dd>
</dl>
<div class="spacer">
</div>
<i>status</i> &lt;name&gt;<dl>
<dt>
</dt>
<dd>
reports the status for the mapping &lt;name&gt;.</dd>
</dl>
<div class="spacer">
</div>
<i>resize</i> &lt;name&gt;<dl>
<dt>
</dt>
<dd>
resizes an active mapping &lt;name&gt;.<div style="height: 1.00em;">
&#160;</div>
If --size (in sectors) is not specified, the size of the underlying block device is used.</dd>
</dl>
</div>
<div class="section">
<h1>LUKS EXTENSION</h1> LUKS, Linux Unified Key Setup, is a standard for hard disk encryption. It standardizes a partition header as well as the format of the bulk data. LUKS can manage multiple passwords that can be individually revoked and effectively scrubbed from persistent media, and that are protected against dictionary attacks with PBKDF2.<div style="height: 1.00em;">
&#160;</div>
Each password, usually called a <b>key</b> in this document, is associated with a slot, of which there are typically 8. Key operations that do not specify a slot affect the first slot matching the supplied key.<div style="height: 1.00em;">
&#160;</div>
These are valid LUKS actions:<div style="height: 1.00em;">
&#160;</div>
<i>luksFormat</i> &lt;device&gt; [&lt;key file&gt;]<dl>
<dt>
</dt>
<dd>
initializes a LUKS partition and sets the initial key, either via prompting or via &lt;key file&gt;.<div style="height: 1.00em;">
&#160;</div>
<b>&lt;options&gt;</b> can be [--cipher, --verify-passphrase, --key-size, --key-slot, --key-file (takes precedence over optional second argument), --keyfile-size, --use-random | --use-urandom, --uuid].</dd>
</dl>
<div class="spacer">
</div>
<i>luksOpen</i> &lt;device&gt; &lt;name&gt;<dl>
<dt>
</dt>
<dd>
opens the LUKS partition &lt;device&gt; and sets up a mapping &lt;name&gt; after successful verification of the supplied key material (either via key file by --key-file, or via prompting).<div style="height: 1.00em;">
&#160;</div>
<b>&lt;options&gt;</b> can be [--key-file, --keyfile-size, --readonly, --allow-discards, --header, --key-slot].</dd>
</dl>
<div class="spacer">
</div>
<i>luksClose</i> &lt;name&gt;<dl>
<dt>
</dt>
<dd>
identical to <i>remove</i>.</dd>
</dl>
<div class="spacer">
</div>
<i>luksSuspend</i> &lt;name&gt;<dl>
<dt>
</dt>
<dd>
suspends active device (all IO operations are frozen) and wipes encryption key from kernel. Kernel version 2.6.19 or later is required.<div style="height: 1.00em;">
&#160;</div>
After that operation you have to use <i>luksResume</i> to reinstate encryption key (and resume device) or  <i>luksClose</i> to remove mapped device.<div style="height: 1.00em;">
&#160;</div>
<b>WARNING:</b> never try to suspend device where is the cryptsetup binary itself.<div style="height: 1.00em;">
&#160;</div>
<b>&lt;options&gt;</b> can be [--header].</dd>
</dl>
<div class="spacer">
</div>
<i>luksResume</i> &lt;name&gt;<dl>
<dt>
</dt>
<dd>
Resumes suspended device and reinstates encryption key. You will need provide passphrase identical to  <i>luksOpen</i> command (using prompting or key file).<div style="height: 1.00em;">
&#160;</div>
<b>&lt;options&gt;</b> can be [--key-file, --keyfile-size, --header]</dd>
</dl>
<div class="spacer">
</div>
<i>luksAddKey</i> &lt;device&gt; [&lt;new key file&gt;]<dl>
<dt>
</dt>
<dd>
add a new key file/passphrase. An existing passphrase or key file (via --key-file) must be supplied. The key file with the new material is supplied as a positional argument.<div style="height: 1.00em;">
&#160;</div>
<b>&lt;options&gt;</b> can be [--key-file, --keyfile-size, --new-keyfile-size, --key-slot].</dd>
</dl>
<div class="spacer">
</div>
<i>luksRemoveKey</i> &lt;device&gt; [&lt;key file&gt;]<dl>
<dt>
</dt>
<dd>
remove supplied key or key file from LUKS device in the manner of <i>luksKillSlot</i>.</dd>
</dl>
<div class="spacer">
</div>
<i>luksChangeKey</i> &lt;device&gt; [&lt;new key file&gt;]<dl>
<dt>
</dt>
<dd>
change existing key file or passphrase. An existing passphrase or key file (via --key-file) must be supplied. The key file with the new material is supplied as a positional argument.<div style="height: 1.00em;">
&#160;</div>
If no key slot is specified (and there is still free key slot on device) new slot is allocated before the old is purged.<div style="height: 1.00em;">
&#160;</div>
If <b>--key-slot</b> option is specified (or there is no free slot) command will overwrite existing slot.<div style="height: 1.00em;">
&#160;</div>
<b>WARNING:</b> Be sure you have another slot active or header backup when using explicit key slot (so you can unlock the device even after possible media failure during slot swap).<div style="height: 1.00em;">
&#160;</div>
<b>&lt;options&gt;</b> can be [--key-file, --keyfile-size,--new-keyfile-size, --key-slot].</dd>
</dl>
<div class="spacer">
</div>
<i>luksKillSlot</i> &lt;device&gt; &lt;key slot number&gt;<dl>
<dt>
</dt>
<dd>
wipe key with number &lt;key slot&gt; from LUKS device. A remaining passphrase or key file (via --key-file) must be supplied.<div style="height: 1.00em;">
&#160;</div>
<b>&lt;options&gt;</b> can be [--key-file, --keyfile-size].</dd>
</dl>
<div class="spacer">
</div>
<i>luksUUID</i> &lt;device&gt;<dl>
<dt>
</dt>
<dd>
print UUID, if &lt;device&gt; has a LUKS header.<div style="height: 1.00em;">
&#160;</div>
set new UUID if <i>--uuid</i> option is specified.</dd>
</dl>
<div class="spacer">
</div>
<i>isLuks</i> &lt;device&gt;<dl>
<dt>
</dt>
<dd>
returns true, if &lt;device&gt; is a LUKS partition. Otherwise, false.</dd>
</dl>
<div class="spacer">
</div>
<i>luksDump</i> &lt;device&gt;<dl>
<dt>
</dt>
<dd>
dumps the header information of a LUKS partition.<div style="height: 1.00em;">
&#160;</div>
If --dump-master-key option is used, the volume (master) key is dumped instead of keyslot info.<div style="height: 1.00em;">
&#160;</div>
Because this information can be used to access encrypted device without passphrase knowledge (even without LUKS header) use this option very carefully.<div style="height: 1.00em;">
&#160;</div>
Dump with volume key (either printed or stored to file) should be always stored encrypted and on safe place.<div style="height: 1.00em;">
&#160;</div>
LUKS passphrase or key file is required for volume key dump.<div style="height: 1.00em;">
&#160;</div>
<b>&lt;options&gt;</b> can be [--dump-master-key, --key-file, --keyfile-size].</dd>
</dl>
<div class="spacer">
</div>
<i>luksHeaderBackup</i> &lt;device&gt; --header-backup-file &lt;file&gt;<dl>
<dt>
</dt>
<dd>
Stores binary backup of LUKS header and keyslot areas.<div style="height: 1.00em;">
&#160;</div>
<b>WARNING:</b> Please note that with this backup file (and old passphrase knowledge) you can decrypt data even if old passphrase was wiped from real device.<div style="height: 1.00em;">
&#160;</div>
Also note that anti-forensic splitter is not used during manipulation with backup file.</dd>
</dl>
<div class="spacer">
</div>
<i>luksHeaderRestore</i> &lt;device&gt; --header-backup-file &lt;file&gt;<dl>
<dt>
</dt>
<dd>
Restores binary backup of LUKS header and keyslot areas from specified file.<div style="height: 1.00em;">
&#160;</div>
<b>WARNING:</b> All the keyslot areas are overwritten, only active keyslots form backup file are available after issuing this command.<div style="height: 1.00em;">
&#160;</div>
This command allows restoring header if device do not contain LUKS header or if the master key size and data offset in LUKS header on device match the backup file.</dd>
</dl>
<div class="spacer">
</div>
For more information about LUKS, see  <b>http://code.google.com/p/cryptsetup/wiki/Specification</b></div>
<div class="section">
<h1>loop-AES EXTENSION</h1> cryptsetup supports mapping of loop-AES encrypted partition using compatible dm-crypt mode.<div class="spacer">
</div>
<i>loopaesOpen</i> &lt;device&gt; &lt;name&gt; --key-file &lt;keyfile&gt;<dl>
<dt>
</dt>
<dd>
opens the loop-AES &lt;device&gt; and sets up a mapping &lt;name&gt;.<div style="height: 1.00em;">
&#160;</div>
N.B. If key file is in GPG encrypted format, you have to use --key-file=- and decrypt it before use. gpg --decrypt &lt;keyfile&gt; | cryptsetup loopaesOpen --key-file=- &lt;device&gt; &lt;name&gt;<div style="height: 1.00em;">
&#160;</div>
Use <b>--key-file</b> to specify proper key length, default compiled-in parameters are visible in  <b>--help</b> output.<div style="height: 1.00em;">
&#160;</div>
Use <b>--offset</b> to specify device offset. Note the units need to be specified in 512 bytes sectors.<div style="height: 1.00em;">
&#160;</div>
Use <b>--skip</b> to specify IV offset. If original device used offset and not used it in IV sector calculations, you have to explicitly use  <b>--skip 0</b> in addition to offset parameter.<div style="height: 1.00em;">
&#160;</div>
Use <b>--hash</b> to override hash function for password hashing (otherwise it is detected according to key size).<div style="height: 1.00em;">
&#160;</div>
<b>&lt;options&gt;</b> can be [--key-file, --key-size, --offset, --skip, --hash, --readonly, --allow-discards].</dd>
</dl>
<div class="spacer">
</div>
<i>loopaesClose</i> &lt;name&gt;<dl>
<dt>
</dt>
<dd>
identical to <i>remove</i>.</dd>
</dl>
<div class="spacer">
</div>
For more information about loop-AES, see <b>http://loop-aes.sourceforge.net</b></div>
<div class="section">
<h1>OPTIONS</h1><dl>
<dt>
<b>--verbose, -v</b></dt>
<dd>
Print more verbose messages.</dd>
</dl>
<dl>
<dt>
<b>--debug</b></dt>
<dd>
Run in debug mode with full diagnostic logs.</dd>
</dl>
<dl>
<dt>
<b>--hash, -h</b></dt>
<dd>
For <i>create</i> and <i>loopaesOpen</i> action specifies hash to use for password hashing.<div style="height: 1.00em;">
&#160;</div>
For <i>luksFormat</i> action specifies hash used in LUKS key setup scheme and volume key digest.<div style="height: 1.00em;">
&#160;</div>
<b>WARNING:</b> setting hash other than <b>sha1</b> causes LUKS device incompatible with older version of cryptsetup.<div style="height: 1.00em;">
&#160;</div>
The hash string is passed to libgcrypt, so all hash algorithms are supported (for  <i>luksFormat</i> algorithm must provide at least 20 byte long hash). Default is set during compilation, compatible values with old version of cryptsetup are  <b>&quot;ripemd160&quot;</b> for <i>create</i> action and <b>&quot;sha1&quot;</b> for <i>luksFormat</i>.<div style="height: 1.00em;">
&#160;</div>
Use <i>cryptsetup --help</i> to show defaults.</dd>
</dl>
<dl>
<dt>
<b>--cipher, -c</b></dt>
<dd>
set cipher specification string.<div style="height: 1.00em;">
&#160;</div>
Default mode is configurable during compilation, you can see compiled-in default using  <i>cryptsetup --help</i>. If not changed, the default is for plain dm-crypt and LUKS mappings &quot;aes-cbc-essiv:sha256&quot;.<div style="height: 1.00em;">
&#160;</div>
For XTS mode, kernel version 2.6.24 or more recent is required. Use &quot;aes-xts-plain64&quot; cipher specification and set key size to 256 (or 512) bits (see -s option). Note that plain64 IV (Initialization Vector) is available since kernel version 2.6.33 and it is full 64bit version of plain IV. For more info please see FAQ.</dd>
</dl>
<dl>
<dt>
<b>--verify-passphrase, -y</b></dt>
<dd>
query for passwords twice. Useful when creating a (regular) mapping for the first time, or when running  <i>luksFormat</i>.</dd>
</dl>
<dl>
<dt>
<b>--key-file, -d</b></dt>
<dd>
use file as key material.<div style="height: 1.00em;">
&#160;</div>
With LUKS, key material supplied in key files via -d are always used for existing passphrases, except in  <i>luksFormat</i> action where -d is equivalent to positional key file argument.<div style="height: 1.00em;">
&#160;</div>
If you want to set a new key via a key file, you have to use a positional arg to  <i>luksAddKey</i>.<div style="height: 1.00em;">
&#160;</div>
If the key file is &quot;-&quot;, stdin will be used. With the &quot;-&quot; key file reading will not stop when new line character is detected.<div style="height: 1.00em;">
&#160;</div>
See section <b>NOTES ON PASSWORD PROCESSING</b> for more information.</dd>
</dl>
<dl>
<dt>
<b>--keyfile-size, -l <i>value</i></b></dt>
<dd>
Limits read from key file to <i>value</i> bytes. Usable together with all commands using key file.</dd>
</dl>
<dl>
<dt>
<b>--new-keyfile-size  <i>value</i></b></dt>
<dd>
Limits read from new key file to <i>value</i> bytes in <i>luksAddKey</i> when adding new key file. Default is exhaustive read from key file.</dd>
</dl>
<dl>
<dt>
<b>--master-key-file</b></dt>
<dd>
Use pre-generated master key stored in file. For <i>luksFormat</i> it allows LUKS header reformatting with the same master key (if all other parameters are the same existing encrypted data remains intact).<div style="height: 1.00em;">
&#160;</div>
For <i>luksAddKey</i> it allows adding new passphrase with only master key knowledge.</dd>
</dl>
<dl>
<dt>
<b>--dump-master-key</b></dt>
<dd>
For <i>luksDump</i> it allows LUKS header dump including volume (master) key. Use with care (this information allows access to device without passphrase knowledge).<div style="height: 1.00em;">
&#160;</div>
See <i>luksDump</i> for more info.</dd>
</dl>
<dl>
<dt>
<b>--use-random</b></dt>
<dd>
</dd>
</dl>
<dl>
<dt>
<b>--use-urandom</b></dt>
<dd>
For <i>luksFormat</i> it defines which kernel random number generator will be used for long-term key (volume key).<div style="height: 1.00em;">
&#160;</div>
See <b>NOTES ON RNG</b> for more information. Use <i>cryptsetup --help</i> to show default RNG.</dd>
</dl>
<dl>
<dt>
<b>--key-slot, -S</b></dt>
<dd>
For LUKS operations that add key material, this options allows you to specify which key slot is selected for the new key. This option can be used for  <i>luksFormat</i>, <i>luksOpen</i> and <i>luksAddKey</i>.</dd>
</dl>
<dl>
<dt>
<b>--key-size, -s</b></dt>
<dd>
set key size in bits.<div style="height: 1.00em;">
&#160;</div>
Has to be a multiple of 8 bits. The key size is limited by the used cipher.<div style="height: 1.00em;">
&#160;</div>
See output of /proc/crypto for more information.<div style="height: 1.00em;">
&#160;</div>
Can be used for <i>create</i> or <i>luksFormat</i>, all other LUKS actions will use key-size specified by the LUKS header. Default is set during compilation, if not changed it is 256 bits.<div style="height: 1.00em;">
&#160;</div>
Use <i>cryptsetup --help</i> to show defaults.</dd>
</dl>
<dl>
<dt>
<b>--size, -b</b></dt>
<dd>
force the size of the underlying device in sectors. This option is only relevant for  <i>create</i> and <i>resize</i> action.</dd>
</dl>
<dl>
<dt>
<b>--offset, -o</b></dt>
<dd>
start offset in the backend device (in 512-byte sectors). This option is only relevant for  <i>create</i> and <i>loopaesOpen</i> action.</dd>
</dl>
<dl>
<dt>
<b>--skip, -p</b></dt>
<dd>
how many sectors of the encrypted data to skip at the beginning. This is different from the --offset options with respect to IV calculations. Using --offset will shift the IV calculation by the same negative amount. Hence, if --offset  <i>n</i>, sector <i>n</i> will be the first sector on the mapping with IV  <i>0</i>. Using --skip would have resulted in sector  <i>n</i> being the first sector also, but with IV <i>n</i>. This option is only relevant for  <i>create</i> and <i>loopaesOpen</i> action.</dd>
</dl>
<dl>
<dt>
<b>--readonly</b></dt>
<dd>
set up a read-only mapping.</dd>
</dl>
<dl>
<dt>
<b>--shared</b></dt>
<dd>
create another non-overlapping mapping to one common ciphertext device, e.g. to create hidden device inside another encrypted device. This option is only relevant for  <i>create</i> action. Use --offset, --size and --skip to specify mapped area.</dd>
</dl>
<dl>
<dt>
<b>--iter-time, -i</b></dt>
<dd>
The number of milliseconds to spend with PBKDF2 password processing. This option is only relevant to the LUKS operations as  <i>luksFormat</i> or <i>luksAddKey</i>. Note that 0 means default.</dd>
</dl>
<dl>
<dt>
<b>--batch-mode, -q</b></dt>
<dd>
Do not ask for confirmation. Use with care! This option is only relevant for  <i>luksFormat</i>, <i>luksAddKey</i>, <i>luksRemoveKey</i> or <i>luksKillSlot</i>.</dd>
</dl>
<dl>
<dt>
<b>--timeout, -t</b></dt>
<dd>
The number of seconds to wait before timeout. This option is relevant every time a password is asked, like  <i>create</i>, <i>luksOpen</i>, <i>luksFormat</i> or  <i>luksAddKey</i>. It has no effect if used in conjunction with --key-file.</dd>
</dl>
<dl>
<dt>
<b>--tries, -T</b></dt>
<dd>
How often the input of the passphrase shall be retried. This option is relevant every time a password is asked, like  <i>create</i>, <i>luksOpen</i>, <i>luksFormat</i> or  <i>luksAddKey</i>. The default is 3 tries.</dd>
</dl>
<dl>
<dt>
<b>--align-payload=<i>value</i></b></dt>
<dd>
Align payload at a boundary of <i>value</i> 512-byte sectors. This option is relevant for  <i>luksFormat</i>.<div style="height: 1.00em;">
&#160;</div>
If not specified, cryptsetup tries to use topology info provided by kernel for underlying device to get optimal alignment. If not available (or calculated value is multiple of default) data is by default aligned to 1 MiB boundary (2048 512-byte sectors).<div style="height: 1.00em;">
&#160;</div>
For detached LUKS header it specifies offset on data device. See also --header option.</dd>
</dl>
<dl>
<dt>
<b>--uuid=<i>UUID</i></b></dt>
<dd>
Use provided <i>UUID</i> in <i>luksFormat</i> command instead of generating new one or change existing UUID in  <i>luksUUID</i> command.<div style="height: 1.00em;">
&#160;</div>
The UUID must be provided in standard UUID format (e.g. 12345678-1234-1234-1234-123456789abc).</dd>
</dl>
<dl>
<dt>
<b>--allow-discards</b></dt>
<dd>
Allow using of discards (TRIM) requests for device. This option is only relevant for  <i>create</i>, <i>luksOpen</i> or <i>loopaesOpen</i>.<div style="height: 1.00em;">
&#160;</div>
<b>WARNING:</b> Assess the specific security risks carefully before enabling this option.  For example, allowing discards on encrypted devices may lead to the leak of information about the ciphertext device (filesystem type, used space etc.) if the discarded blocks can be located easily on the device later.<div style="height: 1.00em;">
&#160;</div>
Kernel version 3.1 or more recent is required. For older versions is the option ignored.</dd>
</dl>
<dl>
<dt>
<b>--header</b></dt>
<dd>
Set detached (separated) metadata device or file with LUKS header.<div style="height: 1.00em;">
&#160;</div>
This options allows separation of ciphertext device and on-disk metadata header.<div style="height: 1.00em;">
&#160;</div>
This option is only relevant for LUKS devices and can be used in <i>luksFormat</i>,  <i>luksOpen</i>, <i>luksSuspend</i>, <i>luksResume</i> and <i>resize</i> commands.<div style="height: 1.00em;">
&#160;</div>
If used with <i>luksFormat</i> the --align-payload option is taken as absolute sector alignment on ciphertext device and can be zero.<div style="height: 1.00em;">
&#160;</div>
For other commands with separated metadata device you have to always specify path to metadata device (not to the ciphertext device).<div style="height: 1.00em;">
&#160;</div>
<b>WARNING:</b> There is no possible check that specified ciphertext device is correct if on-disk header is detached. Use with care.</dd>
</dl>
<dl>
<dt>
<b>--version</b></dt>
<dd>
Show the version.</dd>
</dl>
</div>
<div class="section">
<h1>RETURN CODES</h1> Crypsetup returns 0 on success or non-zero on error.<div style="height: 1.00em;">
&#160;</div>
Error codes are: 1 wrong parameters, 2 no permission (bad passphrase), 3 out of memory, 4 wrong device specified, 5 device already exists or device is busy.</div>
<div class="section">
<h1>NOTES ON PASSWORD PROCESSING FOR PLAIN MODE</h1>  <b>From a terminal</b>: Password processing is new-line sensitive, meaning the reading will stop after encountering \n. It will process the read material (without newline) with the default hash or the hash given by --hash. After hashing, it will be cropped to the key size given by -s.<div style="height: 1.00em;">
&#160;</div>
<b>From stdin</b>: Reading will continue until EOF (or until maximum input size is reached), with the trailing newline stripped. The maximum input size is defined by the same compiled-in default as for the maximum key file size or can be overwrittten using --keysfile-size option.<div style="height: 1.00em;">
&#160;</div>
After that the read data will be hashed with the default hash or the hash given by --hash and the result will be cropped to the keysize given by -s.<div style="height: 1.00em;">
&#160;</div>
If &quot;plain&quot; is used as an argument to the hash option, the input data will not be hashed. Instead, it will be zero padded (if shorter than the keysize) or truncated (if longer than the keysize) and used directly as the key. No warning will be given if the amount of data read from stdin is less than the keysize.<div style="height: 1.00em;">
&#160;</div>
<b>From a key file</b>: It will be cropped to the size given by -s. If there is insufficient key material in the key file, cryptsetup will quit with an error.<div style="height: 1.00em;">
&#160;</div>
If --key-file=- is used for reading the key from stdin, no trailing newline is stripped from the input. Without that option, cryptsetup strips trailing newlines from stdin input.</div>
<div class="section">
<h1>NOTES ON PASSWORD PROCESSING FOR LUKS</h1> LUKS uses PBKDF2 to protect against dictionary attacks (see RFC 2898).<div style="height: 1.00em;">
&#160;</div>
LUKS will always do an exhaustive password reading. Hence, password can not be read from /dev/random, /dev/zero or any other stream that does not terminate. To prevent exhausting of system memory, cryptsetup limits maximum key file size. Compiled-in default is displayed in --help output. You can limit reads from key file using --key-size option, this option takes precedence over compiled-in default.<div style="height: 1.00em;">
&#160;</div>
For any password creation action (luksAddKey, or luksFormat), the user may specify how much the time the password processing should consume. Increasing the time will lead to a more secure password, but also will take luksOpen longer to complete. The default setting of one second is sufficient for good security.</div>
<div class="section">
<h1>INCOHERENT BEHAVIOUR FOR INVALID PASSWORDS/KEYS</h1> LUKS checks for a valid password or key when an encrypted partition is unlocked. Thus the luksOpen action fails with invalid password or key, contrary to the plain dm-crypt create action.<div style="height: 1.00em;">
&#160;</div>
Please also be sure that you are using the same keyboard and language setting as during device format.</div>
<div class="section">
<h1>NOTES ON SUPPORTED CIPHERS, MODES, HASHES AND KEY SIZES</h1> The available combinations of ciphers, modes, hashes and key sizes depend on kernel support. See /proc/crypto for a list of available options. You might need to load additional kernel crypto modules in order to get more options.<div style="height: 1.00em;">
&#160;</div>
For --hash option all algorithms supported by gcrypt library are available.</div>
<div class="section">
<h1>NOTES ON PASSWORDS</h1> Mathematics can't be bribed. Make sure you keep your passwords safe. There are a few nice tricks for constructing a fallback, when suddenly out of (or after being) blue, your brain refuses to cooperate. These fallbacks are possible with LUKS, as it's only possible with LUKS to have multiple passwords.</div>
<div class="section">
<h1>NOTES ON RNG</h1> Random Number Generator (RNG) used in cryptsetup always uses kernel RNG without any modifications or additions to data stream procudes by kernel (like internal random pool operations or mixing with the other random sources).<div style="height: 1.00em;">
&#160;</div>
There are two types of randomness cryptsetup/LUKS needs. One type (which always uses /dev/urandom) is used for salt, AF splitter and for wiping removed keyslot.<div style="height: 1.00em;">
&#160;</div>
Second type is used for volume (master) key. You can switch between using /dev/random and /dev/urandom  here, see  <b>--use-random</b> and <b>--use-urandom</b> options. Using /dev/random on system without enough entropy sources can cause  <b>luksFormat</b> to block until the requested amount of random data is gathered. See  <b>urandom(4)</b> for more information.</div>
<div class="section">
<h1>NOTES ON LOOPBACK DEVICE USE</h1> Cryptsetup is usually used directly over block device (like disk partition or LVM volume). However if the device argument is file, cryptsetup tries to allocate loopback device and map it into this file. This mode requires Linux kernel 2.6.25 or more recent which supports loop autoclear flag (loop device is cleared on last close automatically).<div style="height: 1.00em;">
&#160;</div>
When device mapping is active, you can see loop backing file in status command output. Also see losetup(8).</div>
<div class="section">
<h1>AUTHORS</h1> cryptsetup is written by Christophe Saout &lt;christophe@saout.de&gt;<div style="height: 0.00em;">
&#160;</div>
LUKS extensions, and man page by Clemens Fruhwirth &lt;clemens@endorphin.org&gt;</div>
<div class="section">
<h1>DEPRECATED ACTIONS</h1> The  <i>reload</i> action is no longer supported. Please use  <i>dmsetup(8)</i> if you need to directly manipulate with the device mapping table.<div class="spacer">
</div>
The <i>luksDelKey</i> was replaced with <i>luksKillSlot</i>.</div>
<div class="section">
<h1>REPORTING BUGS</h1> Report bugs to &lt;dm-crypt@saout.de&gt; or Issues section on LUKS website. Please attach output of failed command with added --debug option.</div>
<div class="section">
<h1>COPYRIGHT</h1> Copyright &#169; 2004 Christophe Saout<div style="height: 0.00em;">
&#160;</div>
Copyright &#169; 2004-2006 Clemens Fruhwirth<div style="height: 0.00em;">
&#160;</div>
Copyright &#169; 2009-2011 Red Hat, Inc.<div style="height: 1.00em;">
&#160;</div>
This is free software; see the source for copying conditions.  There is NO warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.</div>
<div class="section">
<h1>SEE ALSO</h1> LUKS website,  <b>http://code.google.com/p/cryptsetup/</b></div>
<table class="foot">
<tr>
<td class="foot-date">
</td>
<td class="foot-os">
cryptsetup</td>
</tr>
</table>
</div>
</body>
</html>

