<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/linux/style.css" type="text/css" media="all"/>
<title>
modprobe(8)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
modprobe(8)</td>
<td class="head-vol">
System Manager's Manual</td>
<td class="head-rtitle">
modprobe(8)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>NAME</h1> modprobe &#8212; program to add and remove modules from the Linux Kernel</div>
<div class="section">
<h1>SYNOPSIS</h1>  <b>modprobe</b> [<b>-v</b>]  [<b>-V</b>]  [<b>-C </b><i>config-file</i><i>]  [</i><b>-n</b><i>]  [</i><b>-i</b><i>]  [</i><b>-q</b><i>]  [</i><b>-b</b><i>]  [</i><i>modulename</i>]  [<b></b><i>module parameters</i><i> ...]</i><div class="spacer">
</div>
<b>modprobe</b> [-r]  [<b>-v</b>]  [<b>-n</b>]  [<b>-i</b>]  [<b></b><i>modulename</i><i> ...]</i><div class="spacer">
</div>
<b>modprobe</b> [-l]  [-t <i>dirname</i>]  [<b></b><i>wildcard</i><i>]</i><div class="spacer">
</div>
<b>modprobe</b> [-c]<div class="spacer">
</div>
<b>modprobe</b> [--dump-modversions]  [<i>filename</i>]</div>
<div class="section">
<h1>Description</h1>  <b>modprobe</b> intelligently adds or removes a module from the Linux kernel: note that for convenience, there is no difference between _ and - in module names (automatic underscore conversion is performed).  <b>modprobe</b> looks in the module directory  <b>/lib/modules/`uname -r`</b> for all the modules and other files, except for the optional  <b>/etc/modprobe.conf</b> configuration file and  <b>/etc/modprobe.d</b> directory (see  <b>modprobe.conf</b><b>(5)</b>). <b>modprobe</b> will also use module options specified on the kernel command line in the form of &lt;module&gt;.&lt;option&gt;.<div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
Note that unlike in 2.4 series Linux kernels (which are not supported by this tool) this version of  <b>modprobe</b> does not do anything to the module itself: the work of resolving symbols and understanding parameters is done inside the kernel.  So module failure is sometimes accompanied by a kernel message: see  <b>dmesg</b><b>(8)</b>.<div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
<b>modprobe</b> expects an up-to-date  <b>modules.dep.bin</b> file (or fallback human readable  <b>modules.dep</b> file), as generated by the corresponding  <b>depmod</b> utility shipped along with  <b>modprobe</b> (see  <b>depmod</b><b>(8)</b>).  This file lists what other modules each module needs (if any), and  <b>modprobe</b> uses this to add or remove these dependencies automatically.<div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
If any arguments are given after the  <i>modulename</i>, they are passed to the kernel (in addition to any options listed in the configuration file).<div style="height: 1.00em;">
&#160;</div>
</div>
<div class="section">
<h1>OPTIONS</h1><dl>
<dt>
<b>-a</b> <b>--all</b>         </dt>
<dd>
Insert all module names on the command line.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
<b>-b</b> <b>--use-blacklist</b>         </dt>
<dd>
This option causes <b>modprobe</b> to apply the  <b>blacklist</b> commands in the configuration files (if any) to module names as well.  It is usually used by  <b>udev</b><b>(7)</b>.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
<b>-C</b> <b>--config</b>         </dt>
<dd>
This option overrides the default configuration directory/file ( <b>/etc/modprobe.d</b> or  <b>/etc/modprobe.conf</b>).<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
<div class="spacer">
</div>
</dt>
<dd>
This option is passed through <b>install</b> 	    or <b>remove</b> commands to other  <b>modprobe</b> commands in the MODPROBE_OPTIONS environment variable.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
<b>-c</b> <b>--showconfig</b>         </dt>
<dd>
Dump out the effective configuration from the config directory and exit.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
<b>--dump-modversions</b>         </dt>
<dd>
Print out a list of module versioning information required by a module. This option is commonly used by distributions in order to package up a Linux kernel module using module versioning deps.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
<b>-d</b> <b>--dirname</b>         </dt>
<dd>
Directory where modules can be found,  <b>/lib/modules/</b><i>RELEASE</i><i>             by default.</i><div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
<b>--first-time</b>         </dt>
<dd>
Normally, <b>modprobe</b> will succeed (and do nothing) if told to insert a module which is already present or to remove a module which isn't present.  This is ideal for simple scripts; however, more complicated scripts often want to know whether  <b>modprobe</b> really did something: this option makes modprobe fail in the case that it actually didn't do anything.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
<b>--force-vermagic</b>         </dt>
<dd>
Every module contains a small string containing important information, such as the kernel and compiler versions.  If a module fails to load and the kernel complains that the &quot;version magic&quot; doesn't match, you can use this option to remove it.  Naturally, this check is there for your protection, so this using option is dangerous unless you know what you're doing.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
<div class="spacer">
</div>
</dt>
<dd>
This applies to any modules inserted: both the module (or alias) on the command line and any modules on which it depends.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
<b>--force-modversion</b>         </dt>
<dd>
When modules are compiled with CONFIG_MODVERSIONS set, a section detailing the versions of every interfaced used by (or supplied by) the module is created.  If a module fails to load and the kernel complains that the module disagrees about a version of some interface, you can use &quot;--force-modversion&quot; to remove the version information altogether.  Naturally, this check is there for your protection, so using this option is dangerous unless you know what you're doing.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
<div class="spacer">
</div>
</dt>
<dd>
This applies any modules inserted: both the module (or alias) on the command line and any modules on which it depends.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
<b>-f</b> <b>--force</b>         </dt>
<dd>
Try to strip any versioning information from the module which might otherwise stop it from loading: this is the same as using both  <b>--force-vermagic</b> and  <b>--force-modversion</b>.  Naturally, these checks are there for your protection, so using this option is dangerous unless you know what you are doing.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
<div class="spacer">
</div>
</dt>
<dd>
This applies to any modules inserted: both the module (or alias) on the command line and any modules it on which it depends.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
<b>-i</b> <b>--ignore-install</b> <b>--ignore-remove</b>         </dt>
<dd>
This option causes <b>modprobe</b> to ignore  <b>install</b> and  <b>remove</b> commands in the configuration file (if any) for the module specified on the command line (any dependent modules are still subject to commands set for them in the configuration file). Both  <b>install</b> and <b>remove</b> 		commands will currently be ignored when this option is used regardless of whether the request was more specifically made with only one or other (and not both) of  <b>--ignore-install</b> or  <b>--ignore-remove</b>. See  <b>modprobe.conf</b><b>(5)</b>.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
<b>-l</b> <b>--list</b>         </dt>
<dd>
List all modules matching the given wildcard (or &quot;*&quot; if no wildcard is given).  This option is provided for backwards compatibility and may go away in future: see  <b>find</b><b>(1)</b> and  <b>basename</b><b>(1)</b> for a more flexible alternative.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
<b>-n</b> <b>--dry-run</b>         <b>--show</b>         </dt>
<dd>
This option does everything but actually insert or delete the modules (or run the install or remove commands).  Combined with  <b>-v</b>, it is useful for debugging problems. For historical reasons both  <b>--dry-run</b> and <b>--show</b> 		actually mean the same thing and are interchangeable.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
<b>-q</b> <b>--quiet</b>         </dt>
<dd>
With this flag, <b>modprobe</b> won't print an error message if you try to remove or insert a module it can't find (and isn't an alias or  <b>install</b>/<b>remove</b> command). However, it will still return with a non-zero exit status. The kernel uses this to opportunistically probe for modules which might exist using request_module.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
<b>-R</b> <b>--resolve-alias</b>         </dt>
<dd>
Print all module names matching an alias. This can be useful for debugging module alias problems.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
<b>-r</b> <b>--remove</b>         </dt>
<dd>
This option causes <b>modprobe</b> to remove rather than insert a module.  If the modules it depends on are also unused,  <b>modprobe</b> will try to remove them too.  Unlike insertion, more than one module can be specified on the command line (it does not make sense to specify module parameters when removing modules).<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
<div class="spacer">
</div>
</dt>
<dd>
There is usually no reason to remove modules, but some buggy modules require it.  Your distribution kernel may not have been built to support removal of modules at all.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
<b>-S</b> <b>--set-version</b>         </dt>
<dd>
Set the kernel version, rather than using  <b>uname</b><b>(2)</b> to decide on the kernel version (which dictates where to find the modules).<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
<b>--show-depends</b>         </dt>
<dd>
List the dependencies of a module (or alias), including the module itself.  This produces a (possibly empty) set of module filenames, one per line, each starting with &quot;insmod&quot; and is typically used by distributions to determine which modules to include when generating initrd/initramfs images.  <b>Install</b> commands which apply are shown prefixed by &quot;install&quot;.  It does not run any of the install commands.  Note that  <b>modinfo</b><b>(8)</b> 	    can be used to extract dependencies of a module from the module itself, but knows nothing of aliases or install commands.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
<b>-s</b> <b>--syslog</b>         </dt>
<dd>
This option causes any error messages to go through the syslog mechanism (as LOG_DAEMON with level LOG_NOTICE) rather than to standard error.  This is also automatically enabled when stderr is unavailable.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
<div class="spacer">
</div>
</dt>
<dd>
This option is passed through <b>install</b> 	    or <b>remove</b> commands to other  <b>modprobe</b> commands in the MODPROBE_OPTIONS environment variable.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
<b>-t</b> <b>--type</b>         </dt>
<dd>
Restrict <b>-l</b> to modules in directories matching the  <i>dirname</i> given.  This option is provided for backwards compatibility and may go away in future: see  <b>find</b><b>(1)</b> 	    and  <b>basename</b><b>(1)</b> for a more flexible alternative.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
<b>-V</b> <b>--version</b>         </dt>
<dd>
Show version of program and exit.</dd>
</dl>
<dl>
<dt>
<b>-v</b> <b>--verbose</b>         </dt>
<dd>
Print messages about what the program is doing.  Usually  <b>modprobe</b> only prints messages if something goes wrong.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
<div class="spacer">
</div>
</dt>
<dd>
This option is passed through <b>install</b> 	    or <b>remove</b> commands to other  <b>modprobe</b> commands in the MODPROBE_OPTIONS environment variable.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
</div>
<div class="section">
<h1>ENVIRONMENT</h1> The MODPROBE_OPTIONS environment variable can also be used to pass arguments to  <b>modprobe</b>.<div style="height: 1.00em;">
&#160;</div>
</div>
<div class="section">
<h1>COPYRIGHT</h1> This manual page originally Copyright 2002, Rusty Russell, IBM Corporation. Maintained by Jon Masters and others.<div style="height: 1.00em;">
&#160;</div>
</div>
<div class="section">
<h1>SEE ALSO</h1>  <b>modprobe.conf</b><b>(5)</b>,  <b>modprobe.d</b><b>(5)</b>,  <b>insmod</b><b>(8)</b>,  <b>rmmod</b><b>(8)</b>,  <b>lsmod</b><b>(8)</b>,  <b>modinfo</b><b>(8)</b></div>
<table class="foot">
<tr>
<td class="foot-date">
</td>
<td class="foot-os">
</td>
</tr>
</table>
</div>
</body>
</html>

