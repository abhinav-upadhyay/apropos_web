<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/linux/style.css" type="text/css" media="all"/>
<title>
start-stop-daemon(8)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
start-stop-daemon(8)</td>
<td class="head-vol">
dpkg utilities</td>
<td class="head-rtitle">
start-stop-daemon(8)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>NAME</h1> start-stop-daemon - start and stop system daemon programs</div>
<div class="section">
<h1>SYNOPSIS</h1> <b>start-stop-daemon</b> [<i>option</i>...] <i>command</i></div>
<div class="section">
<h1>DESCRIPTION</h1> <b>start-stop-daemon</b> is used to control the creation and termination of system-level processes. Using one of the matching options,  <b>start-stop-daemon</b> can be configured to find existing instances of a running process.<div class="spacer">
</div>
Note: unless <b>--pidfile</b> is specified, <b>start-stop-daemon</b> behaves similar to <b>killall</b>(1). <b>start-stop-daemon</b> will scan the process table looking for any processes which match the process name, uid, and/or gid (if specified). Any matching process will prevent <b>--start</b> from starting the daemon. All matching processes will be sent the TERM signal (or the one specified via  <b>--signal</b> or <b>--retry</b>) if <b>--stop</b> is specified. For daemons which have long-lived children which need to live through a <b>--stop</b>, you must specify a pidfile.</div>
<div class="section">
<h1>COMMANDS</h1><dl>
<dt>
<b>-S</b>, <b>--start</b> [<b>--</b>] <i>arguments</i></dt>
<dd>
Check for the existence of a specified process. If such a process exists, <b>start-stop-daemon</b> does nothing, and exits with error status 1 (0 if <b>--oknodo</b> is specified). If such a process does not exist, it starts an instance, using either the executable specified by <b>--exec</b> or, if specified, by <b>--startas</b>. Any arguments given after <b>--</b> on the command line are passed unmodified to the program being started.</dd>
</dl>
<dl>
<dt>
<b>-K</b>, <b>--stop</b></dt>
<dd>
Checks for the existence of a specified process. If such a process exists, <b>start-stop-daemon</b> sends it the signal specified by <b>--signal</b>, and exits with error status 0. If such a process does not exist, <b>start-stop-daemon</b> exits with error status 1 (0 if <b>--oknodo</b> is specified). If <b>--retry</b> is specified, then <b>start-stop-daemon</b> will check that the process(es) have terminated.</dd>
</dl>
<dl>
<dt>
<b>-T</b>, <b>--status</b></dt>
<dd>
Check for the existence of a specified process, and returns an exit status code, according to the LSB Init Script Actions.</dd>
</dl>
<dl>
<dt>
<b>-H</b>, <b>--help</b></dt>
<dd>
Show usage information and exit.</dd>
</dl>
<dl>
<dt>
<b>-V</b>, <b>--version</b></dt>
<dd>
Show the program version and exit.</dd>
</dl>
</div>
<div class="section">
<h1>MATCHING OPTIONS</h1><dl>
<dt>
<b>-p</b>, <b>--pidfile</b> <i>pid-file</i></dt>
<dd>
Check whether a process has created the file <i>pid-file</i>.</dd>
</dl>
<dl>
<dt>
<b>-x</b>, <b>--exec</b> <i>executable</i></dt>
<dd>
Check for processes that are instances of this executable (according to  <b>/proc/</b><i>pid</i><b>/exe</b>).</dd>
</dl>
<dl>
<dt>
<b>-n</b>, <b>--name</b> <i>process-name</i></dt>
<dd>
Check for processes with the name <i>process-name</i> (according to <b>/proc/<i>pid</i><b>/stat</b><i></i></b><i>).</i></dd>
</dl>
<dl>
<dt>
<b>-u</b>, <b>--user</b> <i>username</i>|<i>uid</i></dt>
<dd>
Check for processes owned by the user specified by <i>username</i> or <i>uid</i>.</dd>
</dl>
</div>
<div class="section">
<h1>OPTIONS</h1><dl>
<dt>
<b>-g</b>, <b>--group</b> <i>group</i>|<i>gid</i></dt>
<dd>
Change to <i>group</i> or <i>gid</i> when starting the process.</dd>
</dl>
<dl>
<dt>
<b>-s</b>, <b>--signal</b> <i>signal</i></dt>
<dd>
With <b>--stop</b>, specifies the signal to send to processes being stopped (default TERM).</dd>
</dl>
<dl>
<dt>
<b>-R</b>, <b>--retry</b> <i>timeout</i>|<i>schedule</i></dt>
<dd>
With <b>--stop</b>, specifies that <b>start-stop-daemon</b> is to check whether the process(es) do finish. It will check repeatedly whether any matching processes are running, until none are. If the processes do not exit it will then take further action as determined by the schedule.<div style="height: 1.00em;">
&#160;</div>
If <i>timeout</i> is specified instead of <i>schedule</i>, then the schedule <i>signal</i><b>/</b><i>timeout</i><b>/KILL/</b><i>timeout</i> is used, where <i>signal</i> is the signal specified with <b>--signal</b>.<div style="height: 1.00em;">
&#160;</div>
<i>schedule</i> is a list of at least two items separated by slashes (<b>/</b>); each item may be <b>-</b><i>signal-number</i> or [ <b>-</b>]<i>signal-name</i>, which means to send that signal, or <i>timeout</i>, which means to wait that many seconds for processes to exit, or <b>forever</b>, which means to repeat the rest of the schedule forever if necessary.<div style="height: 1.00em;">
&#160;</div>
If the end of the schedule is reached and <b>forever</b> is not specified, then <b>start-stop-daemon</b> exits with error status 2. If a schedule is specified, then any signal specified with <b>--signal</b> is ignored.</dd>
</dl>
<dl>
<dt>
<b>-a</b>, <b>--startas</b> <i>pathname</i></dt>
<dd>
With <b>--start</b>, start the process specified by <i>pathname</i>. If not specified, defaults to the argument given to <b>--exec</b>.</dd>
</dl>
<dl>
<dt>
<b>-t</b>, <b>--test</b></dt>
<dd>
Print actions that would be taken and set appropriate return value, but take no action.</dd>
</dl>
<dl>
<dt>
<b>-o</b>, <b>--oknodo</b></dt>
<dd>
Return exit status 0 instead of 1 if no actions are (would be) taken.</dd>
</dl>
<dl>
<dt>
<b>-q</b>, <b>--quiet</b></dt>
<dd>
Do not print informational messages; only display error messages.</dd>
</dl>
<dl>
<dt>
<b>-c</b>, <b>--chuid</b> <i>username</i>|<i>uid</i>[<b>:</b><i>group</i>|<i>gid</i>]</dt>
<dd>
Change to this username/uid before starting the process. You can also specify a group by appending a <b>:</b>, then the group or gid in the same way as you would for the `chown' command ( <i>user</i><b>:</b><i>group</i>). If a user is specified without a group, the primary GID for that user is used. When using this option you must realize that the primary and supplemental groups are set as well, even if the <b>--group</b> option is not specified. The <b>--group</b> option is only for groups that the user isn't normally a member of (like adding per process group membership for generic users like <b>nobody</b>).</dd>
</dl>
<dl>
<dt>
<b>-r</b>, <b>--chroot</b> <i>root</i></dt>
<dd>
Chdir and chroot to <i>root</i> before starting the process. Please note that the pidfile is also written after the chroot.</dd>
</dl>
<dl>
<dt>
<b>-d</b>, <b>--chdir</b> <i>path</i></dt>
<dd>
Chdir to <i>path</i> before starting the process. This is done after the chroot if the  <b>-r</b>|<b>--chroot</b> option is set. When not specified, start-stop-daemon will chdir to the root directory before starting the process.</dd>
</dl>
<dl>
<dt>
<b>-b</b>, <b>--background</b></dt>
<dd>
Typically used with programs that don't detach on their own. This option will force <b>start-stop-daemon</b> to fork before starting the process, and force it into the background. <b>WARNING: start-stop-daemon</b> cannot check the exit status if the process fails to execute for <b>any</b> reason. This is a last resort, and is only meant for programs that either make no sense forking on their own, or where it's not feasible to add the code for them to do this themselves.</dd>
</dl>
<dl>
<dt>
<b>-N</b>, <b>--nicelevel</b> <i>int</i></dt>
<dd>
This alters the priority of the process before starting it.</dd>
</dl>
<dl>
<dt>
<b>-P</b>, <b>--procsched</b> <i>policy</i><b>:</b><i>priority</i></dt>
<dd>
This alters the process scheduler policy and priority of the process before starting it. The priority can be optionally specified by appending a  <b>:</b> followed by the value. The default  <i>priority</i> is 0. The currently supported policy values are  <b>other</b>, <b>fifo</b> and <b>rr</b>.</dd>
</dl>
<dl>
<dt>
<b>-I</b>, <b>--iosched</b> <i>class</i><b>:</b><i>priority</i></dt>
<dd>
This alters the IO scheduler class and priority of the process before starting it. The priority can be optionally specified by appending a  <b>:</b> followed by the value. The default  <i>priority</i> is 4, unless <i>class</i> is <b>idle</b>, then  <i>priority</i> will always be 7. The currently supported values for  <i>class</i> are <b>idle</b>, <b>best-effort</b> and <b>real-time</b>.</dd>
</dl>
<dl>
<dt>
<b>-k</b>, <b>--umask</b> <i>mask</i></dt>
<dd>
This sets the umask of the process before starting it.</dd>
</dl>
<dl>
<dt>
<b>-m</b>, <b>--make-pidfile</b></dt>
<dd>
Used when starting a program that does not create its own pid file. This option will make <b>start-stop-daemon</b> create the file referenced with <b>--pidfile</b> and place the pid into it just before executing the process. Note, the file will not be removed when stopping the program. <b>NOTE:</b> This feature may not work in all cases. Most notably when the program being executed forks from its main process. Because of this, it is usually only useful when combined with the <b>--background</b> option.</dd>
</dl>
<dl>
<dt>
<b>-v</b>, <b>--verbose</b></dt>
<dd>
Print verbose informational messages.</dd>
</dl>
</div>
<div class="section">
<h1>EXIT STATUS</h1><dl>
<dt>
<b>0</b></dt>
<dd>
The requested action was performed. If <b>--oknodo</b> was specified, it's also possible that nothing had to be done. This can happen when <b>--start</b> was specified and a matching process was already running, or when <b>--stop</b> was specified and there were no matching processes.</dd>
</dl>
<dl>
<dt>
<b>1</b></dt>
<dd>
If <b>--oknodo</b> was not specified and nothing was done.</dd>
</dl>
<dl>
<dt>
<b>2</b></dt>
<dd>
If <b>--stop</b> and <b>--retry</b> were specified, but the end of the schedule was reached and the processes were still running.</dd>
</dl>
<dl>
<dt>
<b>3</b></dt>
<dd>
Any other error.</dd>
</dl>
<div class="spacer">
</div>
When using the <b>--status</b> command, the following status codes are returned:<dl>
<dt>
<b>0</b></dt>
<dd>
Program is running.</dd>
</dl>
<dl>
<dt>
<b>1</b></dt>
<dd>
Program is not running and the pid file exists.</dd>
</dl>
<dl>
<dt>
<b>3</b></dt>
<dd>
Program is not running.</dd>
</dl>
<dl>
<dt>
<b>4</b></dt>
<dd>
Unable to determine program status.</dd>
</dl>
</div>
<div class="section">
<h1>EXAMPLE</h1> Start the  <b>food</b> daemon, unless one is already running (a process named food, running as user food, with pid in food.pid):<dl>
<dt>
</dt>
<dd>
<br/>
start-stop-daemon --start --oknodo --user food --name food --pidfile /var/run/food.pid --startas /usr/sbin/food --chuid food -- --daemon<br/>
</dd>
</dl>
<div class="spacer">
</div>
Send <b>SIGTERM</b> to <b>food</b> and wait up to 5 seconds for it to stop:<dl>
<dt>
</dt>
<dd>
<br/>
start-stop-daemon --stop --oknodo --user food --name food --pidfile /var/run/food.pid --retry 5<br/>
</dd>
</dl>
<div class="spacer">
</div>
Demonstration of a custom schedule for stopping <b>food</b>:<dl>
<dt>
</dt>
<dd>
<br/>
start-stop-daemon --stop --oknodo --user food --name food --pidfile /var/run/food.pid --retry=TERM/30/KILL/5<br/>
</dd>
</dl>
</div>
<div class="section">
<h1>AUTHORS</h1> Marek Michalkiewicz &lt;marekm@i17linuxb.ists.pwr.wroc.pl&gt; based on a previous version by Ian Jackson &lt;ian@chiark.greenend.org.uk&gt;.<div style="height: 1.00em;">
&#160;</div>
Manual page by Klee Dienes &lt;klee@mit.edu&gt;, partially reformatted by Ian Jackson.</div>
<table class="foot">
<tr>
<td class="foot-date">
2011-07-04</td>
<td class="foot-os">
Debian Project</td>
</tr>
</table>
</div>
</body>
</html>

