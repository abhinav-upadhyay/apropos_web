<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/linux/style.css" type="text/css" media="all"/>
<title>
cupsaddsmb(8)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
cupsaddsmb(8)</td>
<td class="head-vol">
Apple Inc.</td>
<td class="head-rtitle">
cupsaddsmb(8)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>NAME</h1> cupsaddsmb - export printers to samba for windows clients<div style="height: 1.00em;">
&#160;</div>
</div>
<div class="section">
<h1>SYNOPSIS</h1> <b>cupsaddsmb</b> [ -H <i>samba-server</i> ] [ -U <i>samba-user[%samba-password]</i> ] [ -h <i>cups-server[:port]</i> ] [ -v ] -a<div style="height: 0.00em;">
&#160;</div>
<b>cupsaddsmb</b> [ -H <i>samba-server</i> ] [ -U <i>samba-user[%samba-password]</i> ] [ -h <i>cups-server[:port]</i> ] [ -v ] printer [ ... printer ]<div style="height: 1.00em;">
&#160;</div>
</div>
<div class="section">
<h1>DESCRIPTION</h1>  <i>cupsaddsmb</i> exports printers to the SAMBA software (version 2.2.0 or higher) for use with Windows clients. Depending on the SAMBA configuration, you may need to provide a password to export the printers. This program requires the Windows printer driver files described below.<div style="height: 1.00em;">
&#160;</div>
</div>
<div class="section">
<h1>OPTIONS</h1>  <i>cupsaddsmb</i> supports the following options:<dl>
<dt>
-H samba-server</dt>
<dd>
<div style="height: 0.00em;">
&#160;</div>
Specifies the SAMBA server which defaults to the CUPS server.</dd>
</dl>
<dl>
<dt>
-U samba-user[%samba-password]</dt>
<dd>
<div style="height: 0.00em;">
&#160;</div>
Specifies the SAMBA print admin username which defaults to your current username. If the username contains a percent (%) character, then the text following the percent is treated as the SAMBA password to use.</dd>
</dl>
<dl>
<dt>
-a</dt>
<dd>
<div style="height: 0.00em;">
&#160;</div>
Exports all known printers. Otherwise only the named printers are exported.</dd>
</dl>
<dl>
<dt>
-h cups-server[:port]</dt>
<dd>
<div style="height: 0.00em;">
&#160;</div>
Specifies a different CUPS server to use.</dd>
</dl>
<dl>
<dt>
-v</dt>
<dd>
<div style="height: 0.00em;">
&#160;</div>
Specifies that verbose information should be shown. This is useful for debugging SAMBA configuration problems.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
</div>
<div class="section">
<h1>SAMBA CONFIGURATION</h1>  <i>cupsaddsmb</i> uses the new RPC-based printing support in SAMBA 2.2.x to provide printer drivers and PPD files to Windows client machines. In order to use this functionality, you must first configure the SAMBA  <i>smb.conf(5)</i> file to support printing through CUPS and provide a printer driver download share, as follows:<div class="spacer">
</div>
<br/>
    [global]<br/>
	load printers = yes<br/>
	printing = cups<br/>
	printcap name = cups<div class="spacer">
</div>
<br/>
    [printers]<br/>
	comment = All Printers<br/>
	path = /var/spool/samba<br/>
	browseable = no<br/>
	public = yes<br/>
	guest ok = yes<br/>
	writable = no<br/>
	printable = yes<div class="spacer">
</div>
<br/>
    [print$]<br/>
	comment = Printer Drivers<br/>
	path = /etc/samba/drivers<br/>
	browseable = yes<br/>
	guest ok = no<br/>
	read only = yes<br/>
	write list = root<br/>
<div class="spacer">
</div>
This configuration assumes a FHS-compliant installation of SAMBA; adjust the [printers] and [print$] share paths accordingly on your system as needed.<div style="height: 1.00em;">
&#160;</div>
</div>
<div class="section">
<h1>MICROSOFT POSTSCRIPT DRIVERS FOR WINDOWS</h1> The base driver for Windows 2000 and higher is the Microsoft PostScript driver, which is available on any system running Windows 2000 or higher in the %WINDIR%\SYSTEM32\SPOOL\DRIVERS\W32X86\3 folder for 32-bit drivers and %WINDIR%\SYSTEM32\SPOOL\DRIVERS\X64\3 folder for 64-bit drivers.<div class="spacer">
</div>
The CUPS printer driver is preferred over the Microsoft driver since it supports the page-label, job-billing, and job-hold-until options fully on all printers. However, currently only Windows 2000 and higher is supported by the Microsoft driver, so you will also need to get the Adobe driver to support Windows 95, 98, and Me clients. The Adobe and Microsoft drivers for Windows 2000 are identical.<div class="spacer">
</div>
Once you have extracted the driver files, copy the 32-bit drivers to the  <i>/usr/share/cups/drivers</i> directory and the 64-bit drivers to the  <i>/usr/share/cups/drivers/x64</i> directory exactly as named below:<div class="spacer">
</div>
<br/>
    [Windows 2000 and higher]<br/>
    ps5ui.dll<br/>
    pscript.hlp<br/>
    pscript.ntf<br/>
    pscript5.dll<br/>
<div class="spacer">
</div>
<b>Note:</b> Unlike Windows, case is significant - make sure that you use the lowercase filenames shown above, otherwise  <i>cupsaddsmb</i> will fail to export the drivers.<div style="height: 1.00em;">
&#160;</div>
</div>
<div class="section">
<h1>CUPS POSTSCRIPT DRIVERS FOR WINDOWS</h1>  <i>cupsaddsmb</i> can use the CUPS v6 PostScript printer driver for Windows, which is available for download from the CUPS web site.<div class="spacer">
</div>
The CUPS printer driver is preferred over the Adobe and Microsoft drivers since it supports the page-label, job-billing, and job-hold-until options fully on all printers. However, currently only Windows 2000 and higher is supported by the CUPS driver, so you will also need to get the Adobe driver to support Windows 95, 98, and Me clients.<div class="spacer">
</div>
Once you have extracted the driver files, copy the 32-bit drivers to the  <i>/usr/share/cups/drivers</i> directory and the 64-bit drivers to the  <i>/usr/share/cups/drivers/x64</i> directory exactly as named below:<div class="spacer">
</div>
<br/>
    [Windows 2000 and higher]<br/>
    cups6.inf (from www.cups.org)<br/>
    cups6.ini (from www.cups.org)<br/>
    cupsps6.dll (from www.cups.org)<br/>
    cupsui6.dll (from www.cups.org)<br/>
    ps5ui.dll (from your Windows system)<br/>
    pscript.hlp (from your Windows system)<br/>
    pscript.ntf (from your Windows system)<br/>
    pscript5.dll (from your Windows system)<br/>
<div class="spacer">
</div>
<b>Note:</b> Unlike Windows, case is significant - make sure that you use the lowercase filenames shown above, otherwise  <i>cupsaddsmb</i> will fail to export the drivers.<div style="height: 1.00em;">
&#160;</div>
</div>
<div class="section">
<h1>ADOBE POSTSCRIPT DRIVERS FOR WINDOWS 95, 98, AND ME</h1>  <i>cupsaddsmb</i> can use the Adobe PostScript printer driver for Windows 95, 98, and ME, which are available for download from the Adobe web site (http://www.adobe.com).<div class="spacer">
</div>
The Adobe driver does not support the page-label, job-billing, or job-hold-until options.<div class="spacer">
</div>
Once you have installed the driver on a Windows system, copy the following files to the  <i>/usr/share/cups/drivers</i> directory exactly as named below:<div class="spacer">
</div>
<br/>
    [Windows 95, 98, and Me]<br/>
    ADFONTS.MFM<br/>
    ADOBEPS4.DRV<br/>
    ADOBEPS4.HLP<br/>
    ICONLIB.DLL<br/>
    PSMON.DLL<br/>
<div class="spacer">
</div>
<b>Note:</b> Unlike Windows, case is significant - make sure that you use the UPPERCASE filenames shown above, otherwise  <i>cupsaddsmb</i> will fail to export the drivers.<div style="height: 1.00em;">
&#160;</div>
</div>
<div class="section">
<h1>KNOWN ISSUES</h1> Getting the full set of Windows driver files should be easier.<div style="height: 1.00em;">
&#160;</div>
</div>
<div class="section">
<h1>SEE ALSO</h1>  <i>smbd(8)</i>, <i>smb.conf(5)</i>, http://localhost:631/help<div style="height: 0.00em;">
&#160;</div>
http://www.cups.org/windows/<div style="height: 1.00em;">
&#160;</div>
</div>
<div class="section">
<h1>COPYRIGHT</h1> Copyright 2007-2011 by Apple Inc.</div>
<table class="foot">
<tr>
<td class="foot-date">
CUPS</td>
<td class="foot-os">
25 July 2007</td>
</tr>
</table>
</div>
</body>
</html>

