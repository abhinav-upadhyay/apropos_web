<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/linux/style.css" type="text/css" media="all"/>
<title>
LOSETUP(8)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
LOSETUP(8)</td>
<td class="head-vol">
System Administration</td>
<td class="head-rtitle">
LOSETUP(8)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>NAME</h1> losetup - set up and control loop devices</div>
<div class="section">
<h1>SYNOPSIS</h1> Get info:<div style="height: 1.00em;">
&#160;</div>
<br/>
<b>losetup</b> <i>loopdev</i><div style="height: 1.00em;">
&#160;</div>
<b>losetup -a</b><div style="height: 1.00em;">
&#160;</div>
<b>losetup -j</b> <i>file</i> [<b>-o</b> <i>offset</i>]<div style="height: 1.00em;">
&#160;</div>
<br/>
Delete loop:<div style="height: 1.00em;">
&#160;</div>
<br/>
<b>losetup -d</b> <i>loopdev</i>...<div style="height: 1.00em;">
&#160;</div>
<br/>
Print name of first unused loop device:<div style="height: 1.00em;">
&#160;</div>
<br/>
<b>losetup -f</b><div style="height: 1.00em;">
&#160;</div>
<br/>
Setup loop device:<div style="height: 1.00em;">
&#160;</div>
<br/>
<b>losetup</b> [{<b>-e</b>|<b>-E</b>} <i>encryption</i>] [<b>-o</b> <i>offset</i>] [<b>--sizelimit</b> <i>size</i>]<br/>
[<b>-p</b> <i>pfd</i>] [<b>-r</b>] {<b>-f</b>[<b>--show</b>]|<b><i>loopdev</i></b>} <i>file</i><div style="height: 1.00em;">
&#160;</div>
<br/>
Resize loop device:<div style="height: 1.00em;">
&#160;</div>
<br/>
<b>losetup -c</b> <i>loopdev</i><br/>
</div>
<div class="section">
<h1>DESCRIPTION</h1> <b>losetup</b> is used to associate loop devices with regular files or block devices, to detach loop devices and to query the status of a loop device. If only the  <i>loopdev</i> argument is given, the status of the corresponding loop device is shown.<div style="height: 1.00em;">
&#160;</div>
<div class="subsection">
<h2>Encryption</h2> It is possible to specify transfer functions (for encryption/decryption or other purposes) using one of the <b>-E</b> and <b>-e</b> options. There are two mechanisms to specify the desired encryption: by number and by name. If an encryption is specified by number then one has to make sure that the Linux kernel knows about the encryption with that number, probably by patching the kernel. Standard numbers that are always present are 0 (no encryption) and 1 (XOR encryption). When the cryptoloop module is loaded (or compiled in), it uses number 18. This cryptoloop module will take the name of an arbitrary encryption type and find the module that knows how to perform that encryption.</div>
</div>
<div class="section">
<h1>OPTIONS</h1> The  <i>size</i> and <i>offset</i> arguments may be followed by binary (2^N) suffixes KiB, MiB, GiB, TiB, PiB and EiB (the &quot;iB&quot; is optional, e.g. &quot;K&quot; has the same meaning as &quot;KiB&quot;) or decimal (10^N) suffixes KB, MB, GB, PB and EB.<div style="height: 1.00em;">
&#160;</div>
<dl>
<dt>
<b>-a, --all</b></dt>
<dd>
show status of all loop devices</dd>
</dl>
<dl>
<dt>
<b>-c, --set-capacity</b> <i>loopdev</i></dt>
<dd>
force loop driver to reread size of the file associated with the specified loop device</dd>
</dl>
<dl>
<dt>
<b>-d, --detach</b> <i>loopdev</i>...</dt>
<dd>
detach the file or device associated with the specified loop device(s)</dd>
</dl>
<dl>
<dt>
<b>-e, -E, --encryption </b><i>encryption_type</i><b></b></dt>
<dd>
enable data encryption with specified name or number</dd>
</dl>
<dl>
<dt>
<b>-f, --find</b></dt>
<dd>
find the first unused loop device. If a <i>file</i> argument is present, use this device. Otherwise, print its name</dd>
</dl>
<dl>
<dt>
<b>-h, --help</b></dt>
<dd>
print help</dd>
</dl>
<dl>
<dt>
<b>-j, --associated </b><i>file</i><b></b></dt>
<dd>
show status of all loop devices associated with given <i>file</i></dd>
</dl>
<dl>
<dt>
<b>-k, --keybits </b><i>num</i><b></b></dt>
<dd>
set the number of bits to use in key to <i>num</i>.</dd>
</dl>
<dl>
<dt>
<b>-N, --nohashpass</b></dt>
<dd>
Do not hash the password.  By default, Debian systems run the password through a hash function, non-Debian systems tend not to.</dd>
</dl>
<dl>
<dt>
<b>-o, --offset </b><i>offset</i><b></b></dt>
<dd>
the data start is moved <i>offset</i> bytes into the specified file or device</dd>
</dl>
<dl>
<dt>
<b>--sizelimit </b><i>size</i><b></b></dt>
<dd>
the data end is set to no more than <i>size</i> bytes after the data start</dd>
</dl>
<dl>
<dt>
<b>-p, --pass-fd </b><i>num</i><b></b></dt>
<dd>
read the passphrase from file descriptor with number <i>num</i> instead of from the terminal</dd>
</dl>
<dl>
<dt>
<b>-r, --read-only</b></dt>
<dd>
setup read-only loop device</dd>
</dl>
<dl>
<dt>
<b>--show</b></dt>
<dd>
print device name if the <i>-f</i> option and a <i>file</i> argument are present.<div style="height: 1.00em;">
&#160;</div>
The short form of this option (<b>-s</b>) is deprecated.  This short form could be in collision with Loop-AES implementation where the same option is used for  <b>--sizelimit</b>.</dd>
</dl>
<dl>
<dt>
<b>-v, --verbose</b></dt>
<dd>
verbose mode<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
</div>
<div class="section">
<h1>RETURN VALUE</h1> <b>losetup</b> returns 0 on success, nonzero on failure. When <b>losetup</b> displays the status of a loop device, it returns 1 if the device is not configured and 2 if an error occurred which prevented <b>losetup</b> from determining the status of the device.<div style="height: 1.00em;">
&#160;</div>
</div>
<div class="section">
<h1>FILES</h1><br/>
/dev/loop0, /dev/loop1, ...   loop devices (major=7)<br/>
</div>
<div class="section">
<h1>EXAMPLE</h1> If you are using the loadable module you must have the module loaded first with the command<dl>
<dt>
</dt>
<dd>
# modprobe loop</dd>
</dl>
<div class="spacer">
</div>
Maybe also encryption modules are needed.<dl>
<dt>
</dt>
<dd>
# modprobe des # modprobe cryptoloop</dd>
</dl>
<div class="spacer">
</div>
The following commands can be used as an example of using the loop device.<dl>
<dt>
</dt>
<dd>
# dd if=/dev/zero of=/file bs=1k count=100<br/>
# losetup -e des /dev/loop0 /file<br/>
Password:<br/>
Init (up to 16 hex digits):<br/>
# mkfs -t ext2 /dev/loop0 100<br/>
# mount -t ext2 /dev/loop0 /mnt<br/>
 ...<br/>
# umount /dev/loop0<br/>
# losetup -d /dev/loop0<br/>
</dd>
</dl>
<div class="spacer">
</div>
If you are using the loadable module you may remove the module with the command<dl>
<dt>
</dt>
<dd>
# rmmod loop</dd>
</dl>
<div class="spacer">
</div>
<br/>
</div>
<div class="section">
<h1>RESTRICTION</h1> DES encryption is painfully slow. On the other hand, XOR is terribly weak. Both are insecure nowadays. Some ciphers may require a licence for you to be allowed to use them.<div style="height: 1.00em;">
&#160;</div>
Cryptoloop is deprecated in favor of dm-crypt. For more details see <b>cryptsetup</b>(8).</div>
<div class="section">
<h1>AVAILABILITY</h1> The losetup command is part of the util-linux package and is available from ftp://ftp.kernel.org/pub/linux/utils/util-linux/.</div>
<table class="foot">
<tr>
<td class="foot-date">
July 2003</td>
<td class="foot-os">
util-linux</td>
</tr>
</table>
</div>
</body>
</html>

