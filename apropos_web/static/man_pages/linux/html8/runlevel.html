<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/linux/style.css" type="text/css" media="all"/>
<title>
runlevel(8)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
runlevel(8)</td>
<td class="head-vol">
System Manager's Manual</td>
<td class="head-rtitle">
runlevel(8)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>NAME</h1> runlevel - output previous and current runlevel</div>
<div class="section">
<h1>SYNOPSIS</h1> <b>runlevel</b> [<i>OPTION</i>]... [<i>UTMP</i>]</div>
<div class="section">
<h1>DESCRIPTION</h1> <b>runlevel</b> reads the system <i>UTMP</i> file, which defaults to <i>/var/run/utmp</i> when no alternate filename is given, to locate the most recent runlevel record.<div style="height: 1.00em;">
&#160;</div>
The previous and current runlevel from that record are output separated by a single space.  If there is no previous runlevel in the record, the letter <i>N</i> will be substituted.<div style="height: 1.00em;">
&#160;</div>
If no runlevel record can be found, <b>runlevel</b> outputs the word <b>unknown</b> and exits with an error.<div style="height: 1.00em;">
&#160;</div>
During system boot, the environment variables <b>RUNLEVEL</b> and <b>PREVLEVEL</b> will be set by the <b>init</b>(8) daemon, these come from the <b>runlevel</b>(7) event generated by <b>telinit</b>(8) or <b>shutdown</b>(8).<div style="height: 1.00em;">
&#160;</div>
When these environment variables are set, <b>runlevel</b> will output the values from these instead.  Thus <b>runlevel</b> can be used in <i>rc</i> scripts as a replacement for the System-V <b>who(1)</b> <b>-r</b> command.</div>
<div class="section">
<h1>OPTIONS</h1><dl>
<dt>
<b>--quiet</b></dt>
<dd>
Does not output the current and previous runlevel, nor does it output <b>unknown</b> in the case of error (but it will exit with an error code).<div style="height: 1.00em;">
&#160;</div>
This may be used to test for the presence of a runlevel entry, or to check for errors reading from the file.</dd>
</dl>
</div>
<div class="section">
<h1>EXIT STATUS</h1> <b>runlevel</b> will exit with status <i>0</i> if a <i>UTMP</i> record was found, otherwise it will exit with status <i>1</i>.</div>
<div class="section">
<h1>ENVIRONMENT</h1><dl>
<dt>
<b>RUNLEVEL</b></dt>
<dd>
<b>runlevel</b> will read the current runlevel from this environment variable if set in preference to reading from <i>/var/run/utmp</i></dd>
</dl>
<dl>
<dt>
<b>PREVLEVEL</b></dt>
<dd>
<b>runlevel</b> will read the previous runlevel from this environment variable if <b>RUNLEVEL</b><br/>
 was given, in preference to reading from <i>/var/run/utmp</i></dd>
</dl>
</div>
<div class="section">
<h1>FILES</h1><dl>
<dt>
<i>/var/run/utmp</i></dt>
<dd>
Where the current and previous runlevels will be read from.</dd>
</dl>
</div>
<div class="section">
<h1>NOTES</h1> The Upstart <b>init</b>(8) daemon does not keep track of runlevels itself, instead they are implemented entirely by its userspace tools.<div style="height: 1.00em;">
&#160;</div>
A change of runlevel is signalled by the <b>runlevel</b>(7) event, generated by either the <b>telinit</b>(8) or <b>shutdown</b>(8) tools.  This event includes the new runlevel in the <b>RUNLEVEL</b> environment variable, as well as the previous runlevel (obtained from their own environment or from <i>/var/run/utmp</i>) in the <b>PREVLEVEL</b> variable.<div style="height: 1.00em;">
&#160;</div>
As well as generating the event, both tools write the new runlevel back to <i>/var/run/utmp</i> and append a new entry to <i>/var/log/wtmp.</i></div>
<div class="section">
<h1>AUTHOR</h1> Written by Scott James Remnant &lt;<b>scott@netsplit.com</b>&gt;</div>
<div class="section">
<h1>REPORTING BUGS</h1> Report bugs at &lt;<b>https://launchpad.net/upstart/+bugs</b>&gt;</div>
<div class="section">
<h1>COPYRIGHT</h1> Copyright &#169; 2009 Canonical Ltd.<div style="height: 0.00em;">
&#160;</div>
This is free software; see the source for copying conditions.  There is NO warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.</div>
<div class="section">
<h1>SEE ALSO</h1> <b>runlevel</b>(7) <b>init</b>(8) <b>telinit</b>(8) <b>shutdown</b>(8) <b>who</b>(1)</div>
<table class="foot">
<tr>
<td class="foot-date">
2009-07-09</td>
<td class="foot-os">
Upstart</td>
</tr>
</table>
</div>
</body>
</html>

