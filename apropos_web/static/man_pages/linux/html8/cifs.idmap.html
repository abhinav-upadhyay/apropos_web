<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/linux/style.css" type="text/css" media="all"/>
<title>
CIFS.IDMAP(8)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
CIFS.IDMAP(8)</td>
<td class="head-vol">
System Administration tools</td>
<td class="head-rtitle">
CIFS.IDMAP(8)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>NAME</h1> cifs.idmap - Userspace helper for mapping ids for Common Internet File System (CIFS)</div>
<div class="section">
<h1>SYNOPSIS</h1><div style="margin-left: 1.00ex;text-indent: -1.00ex;" class="spacer">
cifs.idmap [--version|-v] {keyid}</div>
</div>
<div class="section">
<h1>DESCRIPTION</h1> This tool is part of the cifs-utils suite.<div class="spacer">
</div>
cifs.idmap is a userspace helper program for the linux CIFS client filesystem. There are a number of activities that the kernel cannot easily do itself. This program is a callout program that does these things for the kernel and then returns the result.<div class="spacer">
</div>
cifs.idmap is generally intended to be run when the kernel calls request-key(8) for a particular key type. While it can be run directly from the command-line, it is not generally intended to be run that way.<div class="spacer">
</div>
cifs.idmap works in conjuction with winbind facility of Samba suite to map owner and group SIDs to uids and gids respectively.  It is best utilized when<div style="height: 0.00em;">
&#160;</div>
- a mount option of cifsacl is specified when mounting a cifs share<div style="height: 0.00em;">
&#160;</div>
- winbind is specified as one of the search entries for passwd and group databases in file /etc/nsswitch.conf<div style="height: 0.00em;">
&#160;</div>
- file smb.conf has winbind specific entries<div style="height: 0.00em;">
&#160;</div>
- winbind daemon program is running<div style="height: 0.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
In case winbind and cifs.idmap facilities are unavailable, file objects in a mounted share are assigned uid and gid of the credentials of the process that mounted the share. So it is strongly recomemended to use mount options of uid and gid to specify a default uid and gid to map owner SIDs and group SIDs respectively in case services of winbind and cifs.idmap facility are unavailable.</div>
<div class="section">
<h1>OPTIONS</h1> --version|-v<div style="margin-left: 4.00ex;">
Print version number and exit.</div>
</div>
<div class="section">
<h1>CONFIGURATION FOR KEYCTL</h1> cifs.idmap is designed to be called from the kernel via the request-key callout program. This requires that request-key be told where and how to call this program. Currently cifs.idmap handles a key type of:<div class="spacer">
</div>
cifs.idmap<div style="margin-left: 4.00ex;">
This keytype is for mapping a SID to either an uid or a gid</div>
<div class="spacer">
</div>
To make this program useful for CIFS, you will need to set up entry for it in request-key.conf(5). Here is an example of an entry for this key type:<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
#OPERATION  TYPE           D C PROGRAM ARG1 ARG2...<br/>
#=========  =============  = = ================================<br/>
create      cifs.idmap     * * /usr/sbin/cifs.idmap %k<br/>
</div>
<div class="spacer">
</div>
See  <b>request-key.conf</b>(5) for more info on each field.</div>
<div class="section">
<h1>SEE ALSO</h1><div style="height: 1.00em;">
&#160;</div>
<b>request-key.conf</b>(5),  <b>mount.cifs</b>(8)</div>
<div class="section">
<h1>AUTHOR</h1> Shirish Pargaonkar wrote the cifs.idmap program.<div class="spacer">
</div>
The Linux CIFS Mailing list is the preferred place to ask questions regarding these programs.</div>
<table class="foot">
<tr>
<td class="foot-date">
05/26/2011</td>
<td class="foot-os">
cifs-utils 4.0</td>
</tr>
</table>
</div>
</body>
</html>

