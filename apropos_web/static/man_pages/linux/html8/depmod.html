<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/linux/style.css" type="text/css" media="all"/>
<title>
depmod(8)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
depmod(8)</td>
<td class="head-vol">
System Manager's Manual</td>
<td class="head-rtitle">
depmod(8)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>NAME</h1> depmod &#8212; program to generate  <b>modules.dep</b> and map files.</div>
<div class="section">
<h1>SYNOPSIS</h1>  <b>depmod</b> [<b>-b </b><i>basedir</i><i>]  [</i><b>-e</b><i>]  [</i><b>-E </b><i>Module.symvers</i><i>]  [</i><b>-F </b><i>System.map</i><i>]  [</i><b>-m</b><i>]  [</i><b>-n</b><i>]  [</i><b>-v</b><i>]  [</i><b>-A</b><i>]  [</i><b>-P </b><i>prefix</i><i>]  [</i><b>-w</b><i>]  [</i><b></b><i>version</i><i>]</i><div class="spacer">
</div>
<b>depmod</b> [<b>-e</b>]  [<b>-E </b><i>Module.symvers</i><i>]  [</i><b>-F </b><i>System.map</i><i>]  [</i><b>-m</b><i>]  [</i><b>-n</b><i>]  [</i><b>-v</b><i>]  [</i><b>-P </b><i>prefix</i><i>]  [</i><b>-w</b><i> [       [</i><b></b><i>version</i><i>]         [</i><b></b><i>filename</i><i> ...]      ] ]</i></div>
<div class="section">
<h1>DESCRIPTION</h1> Linux kernel modules can provide services (called &quot;symbols&quot;) for other modules to use (using one of the EXPORT_SYMBOL variants in the code).  If a second module uses this symbol, that second module clearly depends on the first module.  These dependencies can get quite complex.<div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
<b>depmod</b> creates a list of module dependencies by reading each module under  <b>/lib/modules/</b><i>version</i> and determining what symbols it exports and what symbols it needs.  By default, this list is written to  <b>modules.dep</b>, and a binary hashed version named  <b>modules.dep.bin</b>, in the same directory.  If filenames are given on the command line, only those modules are examined (which is rarely useful unless all modules are listed).  <b>depmod</b> also creates a list of symbols provided by modules in the file named  <b>modules.symbols</b>       and its binary hashed version, <b>modules.symbols.bin</b>. Finally,  <b>depmod</b> will output a file named  <b>modules.devname</b> if modules supply special device names (devname) that should be populated in /dev on boot (by a utility such as udev).<div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
If a <i>version</i> is provided, then that kernel version's module directory is used rather than the current kernel version (as returned by  <b>uname -r</b>).<div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
<b>depmod</b> will also generate various legacy map files in the output directory for use by the older hotplug infrastructure. These map files are largely deprecated.<div style="height: 1.00em;">
&#160;</div>
</div>
<div class="section">
<h1>OPTIONS</h1><dl>
<dt>
<b>-a</b> <b>--all</b>           </dt>
<dd>
Probe all modules. This option is enabled by default if no file names are given in the command-line.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
<b>-A</b> <b>--quick</b>           </dt>
<dd>
This option scans to see if any modules are newer than the  <b>modules.dep</b> file before any work is done: if not, it silently exits rather than regenerating the files.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
<b>-b </b><i>basedir</i><i> </i><b>--basedir </b><i>basedir</i><i> 	  </i></dt>
<dd>
If your modules are not currently in the (normal) directory  <b>/lib/modules/</b><i>version</i>, but in a staging area, you can specify a  <i>basedir</i> which is prepended to the directory name.  This  <i>basedir</i> is stripped from the resulting  <b>modules.dep</b> file, so it is ready to be moved into the normal location. Use this option if you are a distribution vendor who needs to pre-generate the meta-data files rather than running depmod again later.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
<b>-C</b> <b>--config </b><i>file or directory</i><i>         </i></dt>
<dd>
This option overrides the default configuration file at  <b>/etc/depmod.conf</b> (or the  <b>/etc/depmod.d/</b> directory if that is not found).<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
<b>-e</b> <b>--errsyms</b>         </dt>
<dd>
When combined with the <b>-F</b> option, this reports any symbols which a module needs which are not supplied by other modules or the kernel.  Normally, any symbols not provided by modules are assumed to be provided by the kernel (which should be true in a perfect world), but this assumption can break espencially when additionally updated third party drivers are not correctly installed or were built incorrectly.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
<b>-E</b> <b>--symvers</b>         </dt>
<dd>
When combined with the <b>-e</b> option, this reports any symbol versions supplied by modules that do not match with the symbol versions provided by the kernel in its  <b>Module.symvers</b>. This option is mutually incompatible with  <b>-F</b>.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
<b>-F</b> <b>--filesyms </b><i>System.map</i><i>         </i></dt>
<dd>
Supplied with the <b>System.map</b> produced when the kernel was built, this allows the  <b>-e</b> option to report unresolved symbols. This option is mutually incompatible with  <b>-E</b>.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
<b>-h</b> <b>--help</b>         </dt>
<dd>
Print the help message and exit.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
<b>-m</b>         </dt>
<dd>
This overrides any possible configuration file setting of  <b>make_map_files</b> and forces the generation of legacy map files, such as  <b>modules.pcimap</b>.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
<b>-n</b> <b>--dry-run</b>         </dt>
<dd>
This sends the resulting modules.dep and the various map files to standard output rather than writing them into the module directory.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
<b>-P</b>         </dt>
<dd>
Some architectures prefix symbols with an extraneous character. This specifies a prefix character (for example '_') to ignore.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
<b>-v</b> <b>--verbose</b>         </dt>
<dd>
In verbose mode, <b>depmod</b> will print (to stdout) all the symbols each module depends on and the module's file name which provides that symbol.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
<b>-V</b> <b>--version</b>         </dt>
<dd>
Show version of program and exit. See below for caveats when run on older kernels.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
<b>-w</b>         </dt>
<dd>
Warn on duplicate dependencies, aliases, symbol versions, etc.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
</div>
<div class="section">
<h1>COPYRIGHT</h1> This manual page originally Copyright 2002, Rusty Russell, IBM Corporation. Portions Copyright Jon Masters, and others.<div style="height: 1.00em;">
&#160;</div>
</div>
<div class="section">
<h1>SEE ALSO</h1>  <b>depmod.conf</b><b>(5)</b>,  <b>depmod.d</b><b>(5)</b>,  <b>modprobe</b><b>(8)</b>,  <b>modules.dep</b><b>(5)</b></div>
<table class="foot">
<tr>
<td class="foot-date">
</td>
<td class="foot-os">
</td>
</tr>
</table>
</div>
</body>
</html>

