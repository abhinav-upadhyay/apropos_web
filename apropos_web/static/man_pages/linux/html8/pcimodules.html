<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/linux/style.css" type="text/css" media="all"/>
<title>
pcimodules(8)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
pcimodules(8)</td>
<td class="head-vol">
Linux PCI Utilities</td>
<td class="head-rtitle">
pcimodules(8)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>NAME</h1> pcimodules - List kernel driver modules available for all currently plugged in PCI devices</div>
<div class="section">
<h1>SYNOPSIS</h1> <b>pcimodules</b> [<b>--class</b>class_id<b>]</b> [<b>--classmask</b>mask<b>]</b> [<b>--help</b>]</div>
<div class="section">
<h1>DESCRIPTION</h1> <b>pcimodules</b> lists all driver modules for all currently plugged in PCI devices. <b>pcimodules</b> should be run at boot time, and whenever a PCI device is &quot;hot plugged&quot; into the system.  This can be done by the following Bourne shell syntax:<dl>
<dt>
</dt>
<dd>
	for module in $(pcimodules) ; do</dd>
</dl>
<dl>
<dt>
</dt>
<dd>
		modprobe -s -k &quot;$module&quot;</dd>
</dl>
<dl>
<dt>
</dt>
<dd>
	done</dd>
</dl>
<div class="spacer">
</div>
When a PCI device is removed from the system, the Linux kernel will decrement a usage count on PCI driver module.  If this count drops to zero (i.e., there are no PCI drivers), then the <b>modprobe -r</b> process that is normally configured to run from cron every few minutes will eventually remove the unneeded module.<div class="spacer">
</div>
The --class and --classmask arguments can be used to limit the search to certain classes of PCI devices.  This is useful, for example, to generate a list of ethernet card drivers to be loaded when the kernel has indicated that it is trying to resolve an unknown network interface.<div class="spacer">
</div>
Modules are listed in the order in which the PCI devices are physically arranged so that the computer owner can arrange things like having scsi device 0 be on a controller that is not alphabetically the first scsi controller.</div>
<div class="section">
<h1>OPTIONS</h1><dl>
<dt>
<b>--class class --classmask mask</b></dt>
<dd>
</dd>
</dl>
<div class="spacer">
</div>
--class and --classmask limit the search to PCI cards in particular classes.  These arguments are always used together. The arguments to --class and --classmask can be given as hexadecimal numbers by prefixing a leading &quot;0x&quot;. Note that the classes used by pcimodules are in &quot;Linux&quot; format, meaning the class value that you see with lspci would be shifted left eight bits, with the new low eight bits programming interface ID. An examples of how to use class and classmask is provided below. <b>--help, -h</b> Print a help message and exit.</div>
<div class="section">
<h1>EXAMPLES</h1><dl>
<dt>
pcimodules</dt>
<dd>
lists all modules corresponding to currently plugged in PCI devices.</dd>
</dl>
<dl>
<dt>
pcimodules --class 0x20000 --classmask 0xffff00</dt>
<dd>
lists all modules corresponding to currently plugged in ethernet PCI devices.</dd>
</dl>
</div>
<div class="section">
<h1>FILES</h1><dl>
<dt>
<b>/lib/modules/&lt;kernel-version&gt;/modules.pcimap</b></dt>
<dd>
This file is automatically generated by <b>depmod,</b> and used by <b>pcimodules</b> to determine which modules correspond to which PCI ID's.</dd>
</dl>
<dl>
<dt>
<b>/proc/bus/pci</b></dt>
<dd>
An interface to PCI bus configuration space provided by the post-2.1.82 Linux kernels. Contains per-bus subdirectories with per-card config space files and a <i>devices</i> file containing a list of all PCI devices.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
</div>
<div class="section">
<h1>SEE ALSO</h1> <b>lspci</b>(8)<div style="height: 1.00em;">
&#160;</div>
</div>
<div class="section">
<h1>MAINTAINER</h1> The Linux PCI Utilities are maintained by Martin Mares &lt;mj@suse.cz&gt;.<div style="height: 1.00em;">
&#160;</div>
</div>
<div class="section">
<h1>AUTHOR</h1> <b>pcimodules</b> was written by Adam J. Richter &lt;adam@yggdrasil.com&gt;, based on public domain example code by Martin Mares &lt;mj@suse.cz&gt;.<div style="height: 1.00em;">
&#160;</div>
</div>
<div class="section">
<h1>COPYRIGHT</h1> <b>pcimodules</b> is copyright 2000, Yggdrasil Computing, Incorporated, and may be copied under the terms and conditions of version 2 of the GNU General Public License as published by the Free Software Foundation (Cambridge, Massachusetts, United States of America).</div>
<table class="foot">
<tr>
<td class="foot-date">
02 October 2011</td>
<td class="foot-os">
pciutils-3.1.8</td>
</tr>
</table>
</div>
</body>
</html>

