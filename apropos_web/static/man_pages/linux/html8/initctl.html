<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/linux/style.css" type="text/css" media="all"/>
<title>
initctl(8)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
initctl(8)</td>
<td class="head-vol">
System Manager's Manual</td>
<td class="head-rtitle">
initctl(8)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>NAME</h1> initctl - init daemon control tool</div>
<div class="section">
<h1>SYNOPSIS</h1> <b>initctl</b> [<i>OPTION</i>]... <i>COMMAND</i> [<i>OPTION</i>]... <i>ARG</i>...</div>
<div class="section">
<h1>DESCRIPTION</h1> <b>initctl</b> allows a system administrator to communicate and interact with the Upstart <b>init</b>(8) daemon.<div style="height: 1.00em;">
&#160;</div>
If D-Bus has been configured to allow non-privileged users to invoke all Upstart D-Bus methods, this command is also able to manage user jobs. See <b>init</b>(5) for further details.<div style="height: 1.00em;">
&#160;</div>
When run as <b>initctl</b>, the first non-option argument is the <i>COMMAND</i>. Global options may be specified before or after the command.<div style="height: 1.00em;">
&#160;</div>
You may also create symbolic or hard links to <b>initctl</b> named after commands.  When invoked through these links the tool will behave only as that command, with global and command-specific options intermixed.  The default installation supplies such links for the <b>start</b>, <b>stop</b>, <b>restart</b>, <b>reload</b> and <b>status</b> commands.</div>
<div class="section">
<h1>OPTIONS</h1><dl>
<dt>
<b>--session</b></dt>
<dd>
Connect to <b>init</b>(8) daemon using the D-Bus session bus (for testing purposes only).</dd>
</dl>
<dl>
<dt>
<b>--system</b></dt>
<dd>
Communication with the <b>init</b>(8) daemon is normally performed over a private socket connection.  This has the advantage of speed and robustness, when issuing commands to start or stop services or even reboot the system you do not want to be affected by changes to the D-Bus system bus daemon.<div style="height: 1.00em;">
&#160;</div>
The disadvantage to using the private socket however is security, <b>init</b>(8) only permits the root user to communicate over this socket which means that read-only commands such as <b>status</b> and <b>list</b> cannot be made by other users.<div style="height: 1.00em;">
&#160;</div>
The <b>--system</b> option instructs <b>initctl</b> to communicate via the D-Bus system bus rather than over the private socket.<div style="height: 1.00em;">
&#160;</div>
This is only possible if the system bus daemon is running and if <b>init</b>(8) is connected to it.  The advantage is that the default security configuration allows non-root users to use read-only commands.</dd>
</dl>
<dl>
<dt>
<b>--dest</b></dt>
<dd>
Specifies the well-known name of the <b>init</b>(8) daemon when using <b>--system</b>.<div style="height: 1.00em;">
&#160;</div>
There is normally no need to use this option since the <b>init</b>(8) daemon uses the default <b>com.ubuntu.Upstart</b> name.  However it may be useful for debugging.</dd>
</dl>
<dl>
<dt>
<b>--no-wait</b></dt>
<dd>
Applies to the <b>start</b>, <b>stop</b>, <b>restart</b> and <b>emit</b> commands.<div style="height: 1.00em;">
&#160;</div>
Normally <b>initctl</b> will wait for the command to finish before returning.<div style="height: 1.00em;">
&#160;</div>
For the <b>start</b>, <b>stop</b> and <b>restart</b> commands, finishing means that the named job is running (or has finished for tasks) or has been fully stopped.<div style="height: 1.00em;">
&#160;</div>
For the <b>emit</b> command, finishing means that all of the jobs affected by the event are running (or have finished for tasks) or have been fully stopped.<div style="height: 1.00em;">
&#160;</div>
This option instead causes these commands to only wait for the goal change or event to be queued.</dd>
</dl>
<dl>
<dt>
<b>--quiet</b></dt>
<dd>
Reduces output of all commands to errors only.</dd>
</dl>
</div>
<div class="section">
<h1>COMMANDS</h1><dl>
<dt>
<b>start</b></dt>
<dd>
<i>JOB</i> [<i>KEY=VALUE</i>]...<div style="height: 1.00em;">
&#160;</div>
Requests that a new instance of the named <i>JOB</i> be started, outputting the status of the job to standard output when the command completes.<div style="height: 1.00em;">
&#160;</div>
See <b>status</b> for a description of the output format.<div style="height: 1.00em;">
&#160;</div>
The optional <i>KEY=VALUE</i> arguments specify environment variables to be passed to the starting job, and placed in its environment.  They also serve to specify which instance of multi-instance jobs should be started.<div style="height: 1.00em;">
&#160;</div>
Most jobs only permit a single instance; those that use the <b>instance</b> stanza in their configuration define a string expanded from environment variables to name the instance.  As many unique instances may be started as unique names may be generated by the stanza.  Thus the environment variables also serve to select which instance of <i>JOB</i> is to be acted upon.<div style="height: 1.00em;">
&#160;</div>
If the job is already running, <b>start</b> will return an error.</dd>
</dl>
<dl>
<dt>
<b>stop</b></dt>
<dd>
<i>JOB</i> [<i>KEY=VALUE</i>]...<div style="height: 1.00em;">
&#160;</div>
Requests that an instance of the named <i>JOB</i> be stopped, outputting the status of the job to standard output when the command completes.<div style="height: 1.00em;">
&#160;</div>
See <b>status</b> for a description of the output format and <b>start</b> for a discussion on instances.</dd>
</dl>
<dl>
<dt>
<b>restart</b></dt>
<dd>
<i>JOB</i> [<i>KEY=VALUE</i>]...<div style="height: 1.00em;">
&#160;</div>
Requests that an instance of the named <i>JOB</i> be restarted, outputting the status of the job to standard output when the command completes.<div style="height: 1.00em;">
&#160;</div>
The job instance being restarted will retain its original configuration. To have the new instance run with the latest job configuration, <b>stop</b> the job and then <b>start</b> it again instead.<div style="height: 1.00em;">
&#160;</div>
See <b>status</b> for a description of the output format and <b>start</b> for a discussion on instances.<div style="height: 1.00em;">
&#160;</div>
Note that this command can only be used when there is an instance of <i>JOB</i>, if there is none then it returns an error instead of starting a new one.</dd>
</dl>
<dl>
<dt>
<b>reload</b></dt>
<dd>
<i>JOB</i> [<i>KEY=VALUE</i>]...<div style="height: 1.00em;">
&#160;</div>
Sends the <i>SIGHUP</i> signal to running process of the named <i>JOB</i> instance.<div style="height: 1.00em;">
&#160;</div>
See <b>start</b> for a discussion on instances.</dd>
</dl>
<dl>
<dt>
<b>status</b></dt>
<dd>
<i>JOB</i> [<i>KEY=VALUE</i>]...<div style="height: 1.00em;">
&#160;</div>
Requests the status an instance of the named <i>JOB</i>, outputting to standard output.<div style="height: 1.00em;">
&#160;</div>
See <b>start</b> for a discusson on instances.<div style="height: 1.00em;">
&#160;</div>
For a single-instance job a line like the following is output:<div style="height: 1.00em;">
&#160;</div>
<br/>
  job start/running, process 1234<br/>
<div style="height: 1.00em;">
&#160;</div>
The job name is given first followed by the current goal and state of the selected instance.  The goal is either <i>start</i> or <i>stop</i>, the status may be one of <i>waiting</i>, <i>starting</i>, <i>pre-start</i>, <i>spawned</i>, <i>post-start</i>,  <i>running</i>, <i>pre-stop</i>, <i>stopping</i>, <i>killed</i> or <i>post-stop</i>.<div style="height: 1.00em;">
&#160;</div>
If the job has an active process, the process id will follow on the same line.  If the state is <i>pre-start</i> or <i>post-stop</i> this will be the process id of the equivalent process, otherwise it will be the process id of the main process.<div style="height: 1.00em;">
&#160;</div>
<br/>
  job start/pre-start, process 902<br/>
<div style="height: 1.00em;">
&#160;</div>
The <i>post-start</i> and <i>pre-stop</i> states may have multiple processes attached, the extra processes will follow on consecutive lines indented by a tab:<div style="height: 1.00em;">
&#160;</div>
<br/>
  job start/post-start, process 1234<br/>
          post-start process 1357<br/>
<div style="height: 1.00em;">
&#160;</div>
If there is no main process, they may follow on the same line but will be prefixed to indicate that it is not the main process id being given:<div style="height: 1.00em;">
&#160;</div>
<br/>
  job start/post-start, (post-start) process 1357<br/>
<div style="height: 1.00em;">
&#160;</div>
Jobs that permit multiple instances have names for each instance, the output is otherwise identical to the above except that the instance name follows the job name in parentheses:<div style="height: 1.00em;">
&#160;</div>
<br/>
  job (tty1) start/post-start, process 1234<br/>
          post-start process 1357<br/>
</dd>
</dl>
<dl>
<dt>
<b>list</b></dt>
<dd>
<div style="height: 1.00em;">
&#160;</div>
Requests a list of the known jobs and instances, outputs the status of each to standard output.<div style="height: 1.00em;">
&#160;</div>
Note that this command includes in the enumeration as-yet-to-run jobs (in other words configuration files for which no job instances have yet been created) in the output with status &quot;stop/waiting&quot;. In effect such entries denote configuration files which represent potential future jobs.<div style="height: 1.00em;">
&#160;</div>
See <b>status</b> for a description of the output format and <b>start</b> for a discussion on instances.<div style="height: 1.00em;">
&#160;</div>
No particular order is used for the output, and there is no difference in the output (other than the instance name appearing in parentheses) between single-instance and multiple-instance jobs.</dd>
</dl>
<dl>
<dt>
<b>emit</b></dt>
<dd>
<i>EVENT</i> [<i>KEY=VALUE</i>]...<div style="height: 1.00em;">
&#160;</div>
Requests that the named <i>EVENT</i> be emitted, potentially causing jobs to be started and stopped depending on their use of the <b>start on</b> and <b>stop on</b> stanzas in their configuration.<div style="height: 1.00em;">
&#160;</div>
The optional <i>KEY=VALUE</i> arguments specify environment variables to be included with the event and thus exported into the environment of any jobs started and stopped by the event.<div style="height: 1.00em;">
&#160;</div>
The environment may also serve to specify which instance of multi-instance jobs should be started or stopped.  See <b>start</b> for a discussion on instances.<div style="height: 1.00em;">
&#160;</div>
There is no limitation on the event names that may be emitted with this command, you are free to invent new events and use them in your job configurations.<div style="height: 1.00em;">
&#160;</div>
The most well-known event used by the default Upstart configuration is the <b>runlevel</b>(7) event.  This is normally emitted by the <b>telinit</b>(8) and <b>shutdown</b>(8) tools.</dd>
</dl>
<dl>
<dt>
<b>reload-configuration</b></dt>
<dd>
<div style="height: 1.00em;">
&#160;</div>
Requests that the <b>init</b>(8) daemon reloads its configuration.<div style="height: 1.00em;">
&#160;</div>
This command is generally not necessary since <b>init</b>(8) watches its configuration directories with <b>inotify</b>(7) and automatically reloads in cases of changes.<div style="height: 1.00em;">
&#160;</div>
No jobs will be started by this command.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
<b>version</b></dt>
<dd>
<div style="height: 1.00em;">
&#160;</div>
Requests and outputs the version of the running init daemon.</dd>
</dl>
<dl>
<dt>
<b>log-priority</b></dt>
<dd>
[<i>PRIORITY</i>]<div style="height: 1.00em;">
&#160;</div>
When called with a <i>PRIORITY</i> argument, it requests that the <b>init</b>(8) daemon log all messages with that priority or greater.  This may be used to both increase and decrease the volume of logged messages.<div style="height: 1.00em;">
&#160;</div>
<i>PRIORITY</i> may be one of <i>debug</i>, <i>info</i>, <i>message</i>, <i>warn</i>, <i>error</i> or <i>fatal</i>.<div style="height: 1.00em;">
&#160;</div>
When called without argument, it requests the current minimum message priority that the <b>init</b>(8) daemon will log and ouputs to standard output.</dd>
</dl>
<dl>
<dt>
<b>show-config</b></dt>
<dd>
[<i>OPTIONS</i>] [<i>CONF</i>]<div style="height: 1.00em;">
&#160;</div>
Display emits, start on and stop on job configuration details (in that order) for specified job configuration,  <i>CONF</i>. If <i>CONF</i> is not specified, list information for all valid job configurations.<div style="height: 1.00em;">
&#160;</div>
Note that a job configuration is the name of a job configuration file, without the extension. Note too that this information is static: it does not refer to any running job.<div style="height: 1.00em;">
&#160;</div>
For each event emitted, a separate line is displayed beginning with two space characters followed by, 'emits  <i>event</i>' where ' <i>event</i>' denotes a single emitted event.<div style="height: 1.00em;">
&#160;</div>
The <b>start on</b> and <b>stop on</b> conditions are listed on separate lines beginning with two space characters and followed by 'start on' and 'stop on' respectively and ending with the appropriate condition.<div style="height: 1.00em;">
&#160;</div>
If a job configuration has no emits, start on, or stop on conditions, the name of the job configuration will be displayed with no further details.<div style="height: 1.00em;">
&#160;</div>
Note that the <b>start on</b> and <b>stop on</b> conditions will be fully bracketed, regardless of whether they appear like this in the job configuration file. This is useful to see how the <b>init</b>(8) daemon perceives the condition.<div style="height: 1.00em;">
&#160;</div>
Example output:<div style="height: 1.00em;">
&#160;</div>
<br/>
foo<br/>
  emits boing<br/>
  emits blip<br/>
  start on (starting A and (B or C var=2)) <br/>
  stop on (bar HELLO=world testing=123 or stopping wibble)<br/>
<div style="height: 1.00em;">
&#160;</div>
<b>OPTIONS</b></dd>
</dl>
<div style="margin-left: 5.00ex;">
<dl>
<dt>
<b>-e</b>, <b>--enumerate</b></dt>
<dd>
<div style="height: 1.00em;">
&#160;</div>
If specified, rather than listing the precise <b>start on</b> and <b>stop</b>  <b>on</b> conditions, outputs the emits lines along with one line for each event or job the  <i>CONF</i> in question <i>may</i> be started or stopped by if it were to become a job. If the start on condition specifies a non-job event, this will be listed verbatim, whereas for a job event, the name of the  <i>job</i> as opposed to the event the job emits will be listed.<div style="height: 1.00em;">
&#160;</div>
The type of entity, its triggering event (if appropriate) and its full environment is displayed in brackets following its name for clarity.<div style="height: 1.00em;">
&#160;</div>
This option is useful for tools which generate graphs of relationships between jobs and events. It is also instructive since it shows how the <b>init</b>(8) daemon has parsed the job configuration file.<div style="height: 1.00em;">
&#160;</div>
Example output (an analog of the default output format above):<div style="height: 1.00em;">
&#160;</div>
<br/>
foo<br/>
  emits boing<br/>
  emits blip<br/>
  start on starting (job: A, env:)<br/>
  start on B (job:, env:)<br/>
  start on C (job:, env: var=2)<br/>
  stop on bar (job:, env: HELLO=world testing=123)<br/>
  stop on stopping (job: wibble, event: stopping, env:)<br/>
</dd>
</dl>
</div>
<dl>
<dt>
<b>check-config</b></dt>
<dd>
[<i>OPTIONS</i>] [<i>CONF</i>]<div style="height: 1.00em;">
&#160;</div>
Considers all job configurations looking for jobs that cannot be started or stopped, given the currently available job configurations. This is achieved by considering the start on, stop on and emits stanzas for each job configuration and identifying unreachable scenarios.<div style="height: 1.00em;">
&#160;</div>
This option is useful for determining the impact of adding or removing job configuration files.<div style="height: 1.00em;">
&#160;</div>
Note that to use this command, it is necessary to ensure that all job configuration files advertise the events they emit correctly.<div style="height: 1.00em;">
&#160;</div>
If errors are identified, the name of the job configuration will be displayed. Subsequent lines will show the failed conditions for the job configuration, one per line. Condition lines begin with two spaces and are followed with either &quot;start on: &quot; or &quot;stop on: &quot;, the word &quot;unknown&quot;, the type of entity that is not known and finally its name.<div style="height: 1.00em;">
&#160;</div>
Note that only job configurations that are logically in error (those with unsatisfiable conditions) will be displayed. Note too that job configurations that are syntactically invalid may trigger an error if they would cause a condition to be in error.<div style="height: 1.00em;">
&#160;</div>
Assuming job configuration file <i>/etc/init/foo.conf</i> contains the following:<div style="height: 1.00em;">
&#160;</div>
<br/>
  start on starting grape<br/>
  stop on peach<br/>
<div style="height: 1.00em;">
&#160;</div>
The check-config command might display:<div style="height: 1.00em;">
&#160;</div>
<br/>
  foo<br/>
    start on: unknown job grape<br/>
    stop on: unknown event peach<br/>
<div style="height: 1.00em;">
&#160;</div>
If any errors are detected, the exit code will be 1 (one). If all checks pass, the exit code will be 0 (zero).<div style="height: 1.00em;">
&#160;</div>
Note that for complex start on and stop on conditions, this command may give what appears to be misleading output when an error condition is found since all expressions in the failing condition that are in error will generate error output. For example, if job configuration  <i>/etc/init/bar.conf</i> contains the following:<div style="height: 1.00em;">
&#160;</div>
<br/>
  start on (A and (started B or (starting C or D)))<br/>
<div style="height: 1.00em;">
&#160;</div>
And only event A can be satisfied, the output will be:<div style="height: 1.00em;">
&#160;</div>
<br/>
  bar<br/>
    start on: unknown job B<br/>
    start on: unknown job C<br/>
    start on: unknown event D<br/>
<div style="height: 1.00em;">
&#160;</div>
<b>OPTIONS</b></dd>
</dl>
<div style="margin-left: 5.00ex;">
<dl>
<dt>
<b>-i</b> <i>[EVENTS]</i>, <b>--ignore-events</b> <i>[EVENTS]</i></dt>
<dd>
<div style="height: 1.00em;">
&#160;</div>
If specified, the argument should be a list of comma-separated events to ignore when checking the job configuration files.<div style="height: 1.00em;">
&#160;</div>
This option may be useful to ignore errors if a particular job configuration file does not advertise it emits an event.<div style="height: 1.00em;">
&#160;</div>
Note that internal events (such as <b>startup</b>(7) and  <b>starting</b>(7)) are automatically ignored.</dd>
</dl>
<dl>
<dt>
<b>-w</b>, <b>--warn</b></dt>
<dd>
If specified, treat <i>any</i> unknown jobs and events as errors.</dd>
</dl>
</div>
<dl>
<dt>
<b>notify-disk-writeable</b></dt>
<dd>
Notify the <b>init</b>(8) daemon that the disk is now writeable. This currently causes the <b>init</b>(8) daemon to flush its internal cache of 'early job' output data. An early job is any job which <i>finishes</i> before the log disk becomes writeable. If job logging is not disabled, this command should be called once the log disk becomes writeable to ensure that output from all early jobs is flushed. If the data is written successfully to disk, the internal cache is deleted.</dd>
</dl>
<dl>
<dt>
<b>usage</b></dt>
<dd>
<i>JOB</i> [<i>KEY=VALUE</i>]...<div style="height: 1.00em;">
&#160;</div>
Show usage information an instance of the named <i>JOB</i> defined with <b>usage</b> stanza.<div style="height: 1.00em;">
&#160;</div>
For job with <b>usage</b> stanza a line like the following is output, see <b>init</b>(5) :<div style="height: 1.00em;">
&#160;</div>
<br/>
  Usage: tty DEV=ttyX - where X is console id<br/>
</dd>
</dl>
</div>
<div class="section">
<h1>AUTHOR</h1> Written by Scott James Remnant &lt;<b>scott@netsplit.com</b>&gt; and James Hunt &lt;<b>james.hunt@canonical.com</b>&gt;<b>.</b></div>
<div class="section">
<h1>REPORTING BUGS</h1> Report bugs at &lt;<b>https://launchpad.net/upstart/+bugs</b>&gt;</div>
<div class="section">
<h1>COPYRIGHT</h1> Copyright &#169; 2009-2011 Canonical Ltd.<div style="height: 0.00em;">
&#160;</div>
This is free software; see the source for copying conditions.  There is NO warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.</div>
<div class="section">
<h1>SEE ALSO</h1> <b>init</b>(8) <b>telinit</b>(8) <b>shutdown</b>(8)</div>
<table class="foot">
<tr>
<td class="foot-date">
2011-06-02</td>
<td class="foot-os">
Upstart</td>
</tr>
</table>
</div>
</body>
</html>

