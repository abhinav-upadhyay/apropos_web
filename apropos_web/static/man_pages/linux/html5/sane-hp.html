<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/linux/style.css" type="text/css" media="all"/>
<title>
sane-hp(5)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
sane-hp(5)</td>
<td class="head-vol">
SANE Scanner Access Now Easy</td>
<td class="head-rtitle">
sane-hp(5)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>NAME</h1> sane-hp - SANE backend for HP ScanJet scanners</div>
<div class="section">
<h1>DESCRIPTION</h1> The <b>sane-hp</b> library implements a SANE (Scanner Access Now Easy) backend that provides access to HP ScanJet scanners which support SCL (Scanner Control Language by HP).  The following scanners are known positively to work with this backend:<div class="spacer">
</div>
<div style="margin-left: 5.00ex;">
<br/>
Model:         Product id:     Interface:<br/>
----------     -----------     ----------<br/>
ScanJet Plus   C9195A          HP Parallel Interface Card<br/>
ScanJet IIc    C1750A 3226     SCSI<br/>
ScanJet IIcx   C2500A 3332     SCSI<br/>
ScanJet IIp    C1790A          SCSI<br/>
ScanJet 3C     C2520A 3503     SCSI<br/>
ScanJet 3P     C2570A 3406     SCSI<br/>
ScanJet 4C     C2520A          SCSI<br/>
ScanJet 4P     C1130A 3540     SCSI<br/>
ScanJet 4100C  C6290A          USB<br/>
ScanJet 5P     C5110A          SCSI<br/>
ScanJet 5100C  C5190A          parallel port<br/>
ScanJet 5200C  C7190A 3846     parallel port/USB<br/>
ScanJet 6100C  C2520A 3644     SCSI<br/>
ScanJet 6200C  C6270A 3828     SCSI/USB<br/>
ScanJet 6250C  C6270A 3828     SCSI/USB<br/>
ScanJet 6300C  C7670A          SCSI/USB<br/>
ScanJet 6350C  C7670A          SCSI/USB<br/>
ScanJet 6390C  C7670A          SCSI/USB<br/>
PhotoSmart     C5100A R029,R030,R032    SCSI<br/>
</div>
<div class="spacer">
</div>
Support for models 5100C/5200C connected to the parallel port requires the ppSCSI driver available at <i>http://cyberelk.net/tim/parport/ppscsi.html</i> and <i>http://penguin-breeder.org/kernel/download/</i>.<div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
Support for models 5200C/62X0C/63X0C connected to the USB require the kernel scanner driver or libusb. See <b>sane-usb</b>(5) for more details.<div class="spacer">
</div>
The &quot;hp&quot; backend no longer supports OfficeJet multi-function peripherals. For these devices use the external &quot;hpoj&quot; backend in version 0.90 and later of the &quot;HP OfficeJet Linux driver&quot;, available at<div style="height: 0.00em;">
&#160;</div>
<i>http://hpoj.sourceforge.net</i><div class="spacer">
</div>
Because Hewlett-Packard does no longer produce scanners that support SCL (beside the OfficeJets), the above list of supported scanners is complete. Other HP scanners are not supported by the &quot;hp&quot; backend, but might be supported by another one. See <i>http://www.sane-project.org/</i>. You can also watch the sane-devel mailing list at <i>http://www.sane-project.org/mailing-lists.html</i>.<div class="spacer">
</div>
More details about the hp backend can be found on its homepage <i>http://www.kirchgessner.net/sane.html</i>.</div>
<div class="section">
<h1>DEVICE NAMES</h1> This backend expects device names of the form:<div class="spacer">
</div>
<div style="margin-left: 5.00ex;">
<i>special</i></div>
<div class="spacer">
</div>
Where <i>special</i> is the UNIX path-name for the special device that corresponds to the scanner.  For SCSI scanners the special device name must be a generic SCSI device or a symlink to such a device.  Under Linux, such a device name could be <i>/dev/sga</i> or <i>/dev/sg2</i>, for example. If the special device name contains &quot;usb&quot;, &quot;uscanner&quot; or &quot;ugen&quot;, it is assumed that the scanner is connected by USB. For the HP ScanJet Plus the special device name must be the device that corresponds to the parallel interface card that was shipped with the scanner. That is <i>/dev/hpscan</i>. A special driver is required for this card. See ftp://rvs.ctrl-c.liu.se/pub/wingel/hpscan for details. If the link does not work, try ftp://sunsite.unc.edu/pub/Linux/kernel/patches/scanners.</div>
<div class="section">
<h1>CONFIGURATION</h1> The contents of the <i>hp.conf</i> file is a list of options and device names that correspond to HP ScanJet scanners.  Empty lines and lines starting with a hash mark (#) are ignored. See <b>sane-scsi</b>(5) and <b>sane-usb</b>(5) on details of what constitutes a valid device name.<div class="spacer">
</div>
Options specified in front of the first line that contains a device name are defaults for all devices. Options specified below a line that contains a device name apply just to the most recently mentioned device.<div class="spacer">
</div>
Supported options are <b>connect-scsi</b>, <b>connect-device</b>, <b>enable-image-buffering</b>, and <b>dumb-read</b>.<div style="height: 1.00em;">
&#160;</div>
Option <b>connect-scsi</b> specifies that the scanner is connected to the system by SCSI. Input/output is performed using SCSI-commands. This is the default. But if your SCSI device name contains &quot;usb&quot;, &quot;uscanner&quot; or &quot;ugen&quot;, option connect-scsi must be specified. Otherwise it is assumed that the scanner is connected by USB.<div style="height: 1.00em;">
&#160;</div>
Option <b>connect-device</b> specifies that the scanner is connected to the system by a special device. Input/output is performed by read()/write()-operations on the device. This option must be used for HP ScanJet Plus or scanners connected to USB which are accessed through a named device (e.g. /dev/usb/scanner0). For device names that contain &quot;usb&quot;, &quot;uscanner&quot; or &quot;ugen&quot;, it is not necessary to specify option connect-device.<div style="height: 1.00em;">
&#160;</div>
Option <b>enable-image-buffering</b> stores the scanned image in memory before passing it to the frontend. Could be used in case of forward/backward moving scanner lamp.<div style="height: 1.00em;">
&#160;</div>
Option <b>dumb-read</b> can be used to work around problems with &quot;Error during device I/O&quot;. These problems may occur with certain SCSI-to-USB converters or Buslogic SCSI cards. The option should not be used for SCSI devices which are working correctly. Otherwise startup of frontends and changing parameters might be slower.<div class="spacer">
</div>
A sample configuration file is shown below:<div class="spacer">
</div>
<div style="margin-left: 5.00ex;">
<br/>
/dev/scanner<br/>
# this is a comment<br/>
/dev/hpscan<br/>
  option connect-device<br/>
</div>
<div class="spacer">
</div>
/dev/scanner is typically a symlink to the actual SCSI scanner device.</div>
<div class="section">
<h1>FILES</h1><dl>
<dt>
<i>/etc/sane.d/hp.conf</i></dt>
<dd>
The backend configuration file (see also description of <b>SANE_CONFIG_DIR</b> below).</dd>
</dl>
<dl>
<dt>
<i>/usr/lib/arch_triplet/sane/libsane-hp.a</i></dt>
<dd>
The static library implementing this backend.</dd>
</dl>
<dl>
<dt>
<i>/usr/lib/arch_triplet/sane/libsane-hp.so</i></dt>
<dd>
The shared library implementing this backend (present on systems that support dynamic loading).</dd>
</dl>
<dl>
<dt>
<i>$HOME/.sane/calib-hp:&lt;device&gt;.dat</i></dt>
<dd>
Calibration data for HP PhotoSmart PhotoScanner that is retrieved from the scanner after calibration. The data is uploaded to the scanner at start of the backend if it is in media mode 'print media' or if the media mode is changed to 'print media'.</dd>
</dl>
</div>
<div class="section">
<h1>ENVIRONMENT</h1><dl>
<dt>
<b>SANE_CONFIG_DIR</b></dt>
<dd>
This environment variable specifies the list of directories that may contain the configuration file.  Under UNIX, the directories are separated by a colon (`:'), under OS/2, they are separated by a semi-colon (`;').  If this variable is not set, the configuration file is searched in two default directories: first, the current working directory (&quot;.&quot;) and then in /etc/sane.d.  If the value of the environment variable ends with the directory separator character, then the default directories are searched after the explicitly specified directories.  For example, setting <b>SANE_CONFIG_DIR</b> to &quot;/tmp/config:&quot; would result in directories &quot;tmp/config&quot;, &quot;.&quot;, and &quot;/etc/sane.d&quot; being searched (in this order).</dd>
</dl>
<dl>
<dt>
<b>SANE_DEBUG_HP</b></dt>
<dd>
If the library was compiled with debug support enabled, this environment variable controls the debug level for this backend.  E.g., a value of 128 requests all debug output to be printed.  Smaller levels reduce verbosity.</dd>
</dl>
<dl>
<dt>
<b>SANE_HOME_HP</b></dt>
<dd>
Only used for OS/2 and along with use of HP PhotoSmart PhotoScanner. Must be set to the directory where the directory .sane is located. Is used to save and read the calibration file.</dd>
</dl>
<dl>
<dt>
<b>SANE_HP_KEEPOPEN_SCSI</b></dt>
<dd>
</dd>
</dl>
<dl>
<dt>
<b>SANE_HP_KEEPOPEN_USB</b></dt>
<dd>
</dd>
</dl>
<dl>
<dt>
<b>SANE_HP_KEEPOPEN_DEVICE</b></dt>
<dd>
For each type of connection (connect-scsi, connect-usb, connect-device) it can be specified if the connection to the device should be kept open (&quot;1&quot;) or not (&quot;0&quot;). Usually the connections are closed after an operation is performed. Keeping connection open to SCSI-devices can result in errors during device IO when the scanner has not been used for some time. By default, USB-connections are kept open. Other connections are closed.</dd>
</dl>
<dl>
<dt>
<b>SANE_HP_RDREDO</b></dt>
<dd>
Specifies number of retries for read operation before returning an EOF error. Only supported for non-SCSI devices. Default: 1 retry. Time between retries is 0.1 seconds.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
</div>
<div class="section">
<h1>BUGS</h1><dl>
<dt>
<b>HP PhotoSmart PhotoScanner</b></dt>
<dd>
In media mode 'slide' and 'negative', scan resolutions are rounded to multiple of 300 dpi. The scanner does not scale the data correctly on other resolutions. Some newer models (firmware code R030 and later) do not support adjustment of contrast/intensity level and tone map. The backend will simulate this by software, but only for gray and 24 bit color.</dd>
</dl>
<dl>
<dt>
<b>Automatic Document Feeder (ADF)</b></dt>
<dd>
For use of the ADF with xscanimage(1), first place paper in the ADF and then change option scan source to 'ADF'. Press 'change document' to load a sheet. Then press 'scan' to start a scan. Maybe it is sufficient to press 'scan' without 'change document' for repeated scans. The use of the preview window is not recommended when working with the ADF. Setting a window to scan from ADF is not supported with xscanimage(1). Try xsane(1).</dd>
</dl>
<dl>
<dt>
<b>Immediate actions</b></dt>
<dd>
Some actions in xscanimage(1) (i.e. unload, select media, calibrate) have an immediate effect on the scanner without starting a scan. These options can not be used with scanimage.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
</div>
<div class="section">
<h1>TODO</h1><dl>
<dt>
<b>HP PhotoSmart PhotoScanner</b></dt>
<dd>
PhotoScanners with firmware release R030 and up have no firmware support for contrast/brightness/gamma table. In the current backend this is simulated by software on 24 bits data. Simulation on 30 bits should give better results.</dd>
</dl>
<dl>
<dt>
<b>Data widths greater than 8 bits</b></dt>
<dd>
Custom gamma table does not work.</dd>
</dl>
<dl>
<dt>
<b>Parallel scanner support</b></dt>
<dd>
Beside the ScanJet Plus which came with its own parallel interface card, currently only the HP ScanJet 5100C/5200C are supported. These scanners are using an internal parallel-to-SCSI converter which is supported by the ppSCSI-driver (see above).<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
</div>
<div class="section">
<h1>SEE ALSO</h1> sane(7), sane-scsi(5), sane-usb(5)</div>
<div class="section">
<h1>AUTHOR</h1> The sane-hp backend was written by Geoffrey T. Dairiki. HP PhotoSmart PhotoScanner support by Peter Kirchgessner.</div>
<table class="foot">
<tr>
<td class="foot-date">
13 Jul 2008</td>
<td class="foot-os">
</td>
</tr>
</table>
</div>
</body>
</html>

