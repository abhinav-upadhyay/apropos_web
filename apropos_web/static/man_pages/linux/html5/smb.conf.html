<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/linux/style.css" type="text/css" media="all"/>
<title>
SMB.CONF(5)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
SMB.CONF(5)</td>
<td class="head-vol">
File Formats and Conventions</td>
<td class="head-rtitle">
SMB.CONF(5)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>NAME</h1> smb.conf - The configuration file for the Samba suite</div>
<div class="section">
<h1>SYNOPSIS</h1> The smb.conf file is a configuration file for the Samba suite. smb.conf contains runtime configuration information for the Samba programs. The smb.conf file is designed to be configured and administered by the  <b>swat</b>(8) program. The complete description of the file format and possible parameters held within are here for reference purposes.</div>
<div class="section">
<h1>FILE FORMAT</h1> The file consists of sections and parameters. A section begins with the name of the section in square brackets and continues until the next section begins. Sections contain parameters of the form:<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
<i>name</i> = <i>value </i><br/>
</div>
<div class="spacer">
</div>
The file is line-based - that is, each newline-terminated line represents either a comment, a section name or a parameter.<div class="spacer">
</div>
Section and parameter names are not case sensitive.<div class="spacer">
</div>
Only the first equals sign in a parameter is significant. Whitespace before or after the first equals sign is discarded. Leading, trailing and internal whitespace in section and parameter names is irrelevant. Leading and trailing whitespace in a parameter value is discarded. Internal whitespace within a parameter value is retained verbatim.<div class="spacer">
</div>
Any line beginning with a semicolon (&#8220;;&#8221;) or a hash (&#8220;#&#8221;) character is ignored, as are lines containing only whitespace.<div class="spacer">
</div>
Any line ending in a &#8220;\&#8221; is continued on the next line in the customary UNIX fashion.<div class="spacer">
</div>
The values following the equals sign in parameters are all either a string (no quotes needed) or a boolean, which may be given as yes/no, 1/0 or true/false. Case is not significant in boolean values, but is preserved in string values. Some items such as create masks are numeric.</div>
<div class="section">
<h1>SECTION DESCRIPTIONS</h1> Each section in the configuration file (except for the [global] section) describes a shared resource (known as a &#8220;share&#8221;). The section name is the name of the shared resource and the parameters within the section define the shares attributes.<div class="spacer">
</div>
There are three special sections, [global], [homes] and [printers], which are described under  <i>special sections</i>. The following notes apply to ordinary section descriptions.<div class="spacer">
</div>
A share consists of a directory to which access is being given plus a description of the access rights which are granted to the user of the service. Some housekeeping options are also specifiable.<div class="spacer">
</div>
Sections are either file share services (used by the client as an extension of their native file systems) or printable services (used by the client to access print services on the host running the server).<div class="spacer">
</div>
Sections may be designated  <i>guest</i> services, in which case no password is required to access them. A specified UNIX  <i>guest account</i> is used to define access privileges in this case.<div class="spacer">
</div>
Sections other than guest services will require a password to access them. The client provides the username. As older clients only provide passwords and not usernames, you may specify a list of usernames to check against the password using the user = option in the share definition. For modern clients such as Windows 95/98/ME/NT/2000, this should not be necessary.<div class="spacer">
</div>
The access rights granted by the server are masked by the access rights granted to the specified or guest UNIX user by the host system. The server does not grant more access than the host system grants.<div class="spacer">
</div>
The following sample section defines a file space share. The user has write access to the path /home/bar. The share is accessed via the share name foo:<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
	<i>[foo]</i><br/>
	<b>path = /home/bar</b><br/>
	<b>read only = no</b><br/>
</div>
<div class="spacer">
</div>
The following sample section defines a printable share. The share is read-only, but printable. That is, the only write access permitted is via calls to open, write to and close a spool file. The  <i>guest ok</i> parameter means access will be permitted as the default guest user (specified elsewhere):<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
	<i>[aprinter]</i><br/>
	<b>path = /usr/spool/public</b><br/>
	<b>read only = yes</b><br/>
	<b>printable = yes</b><br/>
	<b>guest ok = yes</b><br/>
</div>
<div style="height: 1.00em;">
&#160;</div>
</div>
<div class="section">
<h1>SPECIAL SECTIONS</h1><div class="subsection">
<h2>The [global] section</h2> Parameters in this section apply to the server as a whole, or are defaults for sections that do not specifically define certain items. See the notes under PARAMETERS for more information.</div>
<div class="subsection">
<h2>The [homes] section</h2> If a section called [homes] is included in the configuration file, services connecting clients to their home directories can be created on the fly by the server.<div class="spacer">
</div>
When the connection request is made, the existing sections are scanned. If a match is found, it is used. If no match is found, the requested section name is treated as a username and looked up in the local password file. If the name exists and the correct password has been given, a share is created by cloning the [homes] section.<div class="spacer">
</div>
Some modifications are then made to the newly created share:<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;The share name is changed from homes to the located username.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;If no path was given, the path is set to the user's home directory.</div>
<div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
If you decide to use a  <i>path =</i> line in your [homes] section, it may be useful to use the %S macro. For example:<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
<b>path = /data/pchome/%S</b><br/>
</div>
<div style="height: 1.00em;">
&#160;</div>
is useful if you have different home directories for your PCs than for UNIX access.<div class="spacer">
</div>
This is a fast and simple way to give a large number of clients access to their home directories with a minimum of fuss.<div class="spacer">
</div>
A similar process occurs if the requested section name is &#8220;homes&#8221;, except that the share name is not changed to that of the requesting user. This method of using the [homes] section works well if different users share a client PC.<div class="spacer">
</div>
The [homes] section can specify all the parameters a normal service section can specify, though some make more sense than others. The following is a typical and suitable [homes] section:<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
<i>[homes]</i><br/>
<b>read only = no</b><br/>
</div>
<div class="spacer">
</div>
An important point is that if guest access is specified in the [homes] section, all home directories will be visible to all clients  <i>without a password</i>. In the very unlikely event that this is actually desirable, it is wise to also specify  <i>read only access</i>.<div class="spacer">
</div>
The  <i>browseable</i> flag for auto home directories will be inherited from the global browseable flag, not the [homes] browseable flag. This is useful as it means setting  <i>browseable = no</i> in the [homes] section will hide the [homes] share but make any auto home directories visible.</div>
<div class="subsection">
<h2>The [printers] section</h2> This section works like [homes], but for printers.<div class="spacer">
</div>
If a [printers] section occurs in the configuration file, users are able to connect to any printer specified in the local host's printcap file.<div class="spacer">
</div>
When a connection request is made, the existing sections are scanned. If a match is found, it is used. If no match is found, but a [homes] section exists, it is used as described above. Otherwise, the requested section name is treated as a printer name and the appropriate printcap file is scanned to see if the requested section name is a valid printer share name. If a match is found, a new printer share is created by cloning the [printers] section.<div class="spacer">
</div>
A few modifications are then made to the newly created share:<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;The share name is set to the located printer name</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;If no printer name was given, the printer name is set to the located printer name</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;If the share does not permit guest access and no username was given, the username is set to the located printer name.</div>
<div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
The [printers] service MUST be printable - if you specify otherwise, the server will refuse to load the configuration file.<div class="spacer">
</div>
Typically the path specified is that of a world-writeable spool directory with the sticky bit set on it. A typical [printers] entry looks like this:<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
<i>[printers]</i><br/>
<b>path = /usr/spool/public</b><br/>
<b>guest ok = yes</b><br/>
<b>printable = yes</b><br/>
</div>
<div class="spacer">
</div>
All aliases given for a printer in the printcap file are legitimate printer names as far as the server is concerned. If your printing subsystem doesn't work like that, you will have to set up a pseudo-printcap. This is a file consisting of one or more lines like this:<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
alias|alias|alias|alias...    <br/>
</div>
<div class="spacer">
</div>
Each alias should be an acceptable printer name for your printing subsystem. In the [global] section, specify the new file as your printcap. The server will only recognize names found in your pseudo-printcap, which of course can contain whatever aliases you like. The same technique could be used simply to limit access to a subset of your local printers.<div class="spacer">
</div>
An alias, by the way, is defined as any component of the first entry of a printcap record. Records are separated by newlines, components (if there are more than one) are separated by vertical bar symbols (|).<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 0.00em;">
&#160;</div>
<b>Note</b><div style="height: 0.00em;">
&#160;</div>
<div style="height: 0.00em;">
&#160;</div>
<div class="spacer">
</div>
On SYSV systems which use lpstat to determine what printers are defined on the system you may be able to use printcap name = lpstat to automatically obtain a list of printers. See the printcap name option for more details.<div style="height: 0.50em;">
&#160;</div>
</div>
</div>
</div>
<div class="section">
<h1>USERSHARES</h1> Starting with Samba version 3.0.23 the capability for non-root users to add, modify, and delete their own share definitions has been added. This capability is called  <i>usershares</i> and is controlled by a set of parameters in the [global] section of the smb.conf. The relevant parameters are :<div class="spacer">
</div>
usershare allow guests<div style="margin-left: 4.00ex;">
Controls if usershares can permit guest access.</div>
<div class="spacer">
</div>
usershare max shares<div style="margin-left: 4.00ex;">
Maximum number of user defined shares allowed.</div>
<div class="spacer">
</div>
usershare owner only<div style="margin-left: 4.00ex;">
If set only directories owned by the sharing user can be shared.</div>
<div class="spacer">
</div>
usershare path<div style="margin-left: 4.00ex;">
Points to the directory containing the user defined share definitions. The filesystem permissions on this directory control who can create user defined shares.</div>
<div class="spacer">
</div>
usershare prefix allow list<div style="margin-left: 4.00ex;">
Comma-separated list of absolute pathnames restricting what directories can be shared. Only directories below the pathnames in this list are permitted.</div>
<div class="spacer">
</div>
usershare prefix deny list<div style="margin-left: 4.00ex;">
Comma-separated list of absolute pathnames restricting what directories can be shared. Directories below the pathnames in this list are prohibited.</div>
<div class="spacer">
</div>
usershare template share<div style="margin-left: 4.00ex;">
Names a pre-existing share used as a template for creating new usershares. All other share parameters not specified in the user defined share definition are copied from this named share.</div>
<div class="spacer">
</div>
To allow members of the UNIX group foo to create user defined shares, create the directory to contain the share definitions as follows:<div class="spacer">
</div>
Become root:<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
mkdir /usr/local/samba/lib/usershares<br/>
chgrp foo /usr/local/samba/lib/usershares<br/>
chmod 1770 /usr/local/samba/lib/usershares<br/>
</div>
<div class="spacer">
</div>
Then add the parameters<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
	<b>usershare path = /usr/local/samba/lib/usershares</b><br/>
	<b>usershare max shares = 10</b> # (or the desired number of shares)<br/>
</div>
<div style="height: 1.00em;">
&#160;</div>
to the global section of your smb.conf. Members of the group foo may then manipulate the user defined shares using the following commands.<div class="spacer">
</div>
net usershare add sharename path [comment] [acl] [guest_ok=[y|n]]<div style="margin-left: 4.00ex;">
To create or modify (overwrite) a user defined share.</div>
<div class="spacer">
</div>
net usershare delete sharename<div style="margin-left: 4.00ex;">
To delete a user defined share.</div>
<div class="spacer">
</div>
net usershare list wildcard-sharename<div style="margin-left: 4.00ex;">
To list user defined shares.</div>
<div class="spacer">
</div>
net usershare info wildcard-sharename<div style="margin-left: 4.00ex;">
To print information about user defined shares.</div>
</div>
<div class="section">
<h1>PARAMETERS</h1> Parameters define the specific attributes of sections.<div class="spacer">
</div>
Some parameters are specific to the [global] section (e.g.,  <i>security</i>). Some parameters are usable in all sections (e.g.,  <i>create mask</i>). All others are permissible only in normal sections. For the purposes of the following descriptions the [homes] and [printers] sections will be considered normal. The letter  <i>G</i> in parentheses indicates that a parameter is specific to the [global] section. The letter  <i>S</i> indicates that a parameter can be specified in a service specific section. All  <i>S</i> parameters can also be specified in the [global] section - in which case they will define the default behavior for all services.<div class="spacer">
</div>
Parameters are arranged here in alphabetical order - this may not create best bedfellows, but at least you can find them! Where there are synonyms, the preferred synonym is described, others refer to the preferred synonym.</div>
<div class="section">
<h1>VARIABLE SUBSTITUTIONS</h1> Many of the strings that are settable in the config file can take substitutions. For example the option &#8220;path = /tmp/%u&#8221; is interpreted as &#8220;path = /tmp/john&#8221; if the user connected with the username john.<div class="spacer">
</div>
These substitutions are mostly noted in the descriptions below, but there are some general substitutions which apply whenever they might be relevant. These are:<div class="spacer">
</div>
%U<div style="margin-left: 4.00ex;">
session username (the username that the client wanted, not necessarily the same as the one they got).</div>
<div class="spacer">
</div>
%G<div style="margin-left: 4.00ex;">
primary group name of %U.</div>
<div class="spacer">
</div>
%h<div style="margin-left: 4.00ex;">
the Internet hostname that Samba is running on.</div>
<div class="spacer">
</div>
%m<div style="margin-left: 4.00ex;">
the NetBIOS name of the client machine (very useful).<div style="height: 1.00em;">
&#160;</div>
This parameter is not available when Samba listens on port 445, as clients no longer send this information. If you use this macro in an include statement on a domain that has a Samba domain controller be sure to set in the [global] section  <i>smb ports = 139</i>. This will cause Samba to not listen on port 445 and will permit include functionality to function as it did with Samba 2.x.</div>
<div class="spacer">
</div>
%L<div style="margin-left: 4.00ex;">
the NetBIOS name of the server. This allows you to change your config based on what the client calls you. Your server can have a &#8220;dual personality&#8221;.</div>
<div class="spacer">
</div>
%M<div style="margin-left: 4.00ex;">
the Internet name of the client machine.</div>
<div class="spacer">
</div>
%R<div style="margin-left: 4.00ex;">
the selected protocol level after protocol negotiation. It can be one of CORE, COREPLUS, LANMAN1, LANMAN2 or NT1.</div>
<div class="spacer">
</div>
%d<div style="margin-left: 4.00ex;">
the process id of the current server process.</div>
<div class="spacer">
</div>
%a<div style="margin-left: 4.00ex;">
The architecture of the remote machine. It currently recognizes Samba (<b>Samba</b>), the Linux CIFS file system (<b>CIFSFS</b>), OS/2, (<b>OS2</b>), Mac OS X (<b>OSX</b>), Windows for Workgroups (<b>WfWg</b>), Windows 9x/ME (<b>Win95</b>), Windows NT (<b>WinNT</b>), Windows 2000 (<b>Win2K</b>), Windows XP (<b>WinXP</b>), Windows XP 64-bit(<b>WinXP64</b>), Windows 2003 including 2003R2 (<b>Win2K3</b>), and Windows Vista (<b>Vista</b>). Anything else will be known as  <b>UNKNOWN</b>.</div>
<div class="spacer">
</div>
%I<div style="margin-left: 4.00ex;">
the IP address of the client machine.<div style="height: 1.00em;">
&#160;</div>
Before 3.6.0 it could contain IPv4 mapped IPv6 addresses, now it only contains IPv4 or IPv6 addresses.</div>
<div class="spacer">
</div>
%i<div style="margin-left: 4.00ex;">
the local IP address to which a client connected.<div style="height: 1.00em;">
&#160;</div>
Before 3.6.0 it could contain IPv4 mapped IPv6 addresses, now it only contains IPv4 or IPv6 addresses.</div>
<div class="spacer">
</div>
%T<div style="margin-left: 4.00ex;">
the current date and time.</div>
<div class="spacer">
</div>
%D<div style="margin-left: 4.00ex;">
name of the domain or workgroup of the current user.</div>
<div class="spacer">
</div>
%w<div style="margin-left: 4.00ex;">
the winbind separator.</div>
<div class="spacer">
</div>
%$(<i>envvar</i>)<div style="margin-left: 4.00ex;">
the value of the environment variable  <i>envar</i>.</div>
<div class="spacer">
</div>
The following substitutes apply only to some configuration options (only those that are used when a connection has been established):<div class="spacer">
</div>
%S<div style="margin-left: 4.00ex;">
the name of the current service, if any.</div>
<div class="spacer">
</div>
%P<div style="margin-left: 4.00ex;">
the root directory of the current service, if any.</div>
<div class="spacer">
</div>
%u<div style="margin-left: 4.00ex;">
username of the current service, if any.</div>
<div class="spacer">
</div>
%g<div style="margin-left: 4.00ex;">
primary group name of %u.</div>
<div class="spacer">
</div>
%H<div style="margin-left: 4.00ex;">
the home directory of the user given by %u.</div>
<div class="spacer">
</div>
%N<div style="margin-left: 4.00ex;">
the name of your NIS home directory server. This is obtained from your NIS auto.map entry. If you have not compiled Samba with the  <i>--with-automount</i> option, this value will be the same as %L.</div>
<div class="spacer">
</div>
%p<div style="margin-left: 4.00ex;">
the path of the service's home directory, obtained from your NIS auto.map entry. The NIS auto.map entry is split up as %N:%p.</div>
<div class="spacer">
</div>
There are some quite creative things that can be done with these substitutions and other smb.conf options.</div>
<div class="section">
<h1>NAME MANGLING</h1> Samba supports name mangling so that DOS and Windows clients can use files that don't conform to the 8.3 format. It can also be set to adjust the case of 8.3 format filenames.<div class="spacer">
</div>
There are several options that control the way mangling is performed, and they are grouped here rather than listed separately. For the defaults look at the output of the testparm program.<div class="spacer">
</div>
These options can be set separately for each service.<div class="spacer">
</div>
The options are:<div class="spacer">
</div>
case sensitive = yes/no/auto<div style="margin-left: 4.00ex;">
controls whether filenames are case sensitive. If they aren't, Samba must do a filename search and match on passed names. The default setting of auto allows clients that support case sensitive filenames (Linux CIFSVFS and smbclient 3.0.5 and above currently) to tell the Samba server on a per-packet basis that they wish to access the file system in a case-sensitive manner (to support UNIX case sensitive semantics). No Windows or DOS system supports case-sensitive filename so setting this option to auto is that same as setting it to no for them. Default  <i>auto</i>.</div>
<div class="spacer">
</div>
default case = upper/lower<div style="margin-left: 4.00ex;">
controls what the default case is for new filenames (ie. files that don't currently exist in the filesystem). Default  <i>lower</i>. IMPORTANT NOTE: As part of the optimizations for directories containing large numbers of files, the following special case applies. If the options  <b>case sensitive = yes</b>,  <b>preserve case = No</b>, and  <b>short preserve case = No</b> are set, then the case of  <i>all</i> incoming client filenames, not just new filenames, will be modified. See additional notes below.</div>
<div class="spacer">
</div>
preserve case = yes/no<div style="margin-left: 4.00ex;">
controls whether new files (ie. files that don't currently exist in the filesystem) are created with the case that the client passes, or if they are forced to be the default case. Default  <i>yes</i>.</div>
<div class="spacer">
</div>
short preserve case = yes/no<div style="margin-left: 4.00ex;">
controls if new files (ie. files that don't currently exist in the filesystem) which conform to 8.3 syntax, that is all in upper case and of suitable length, are created upper case, or if they are forced to be the default case. This option can be used with preserve case = yes to permit long filenames to retain their case, while short names are lowercased. Default  <i>yes</i>.</div>
<div class="spacer">
</div>
By default, Samba 3.0 has the same semantics as a Windows NT server, in that it is case insensitive but case preserving. As a special case for directories with large numbers of files, if the case options are set as follows, &quot;case sensitive = yes&quot;, &quot;case preserve = no&quot;, &quot;short preserve case = no&quot; then the &quot;default case&quot; option will be applied and will modify all filenames sent from the client when accessing this share.</div>
<div class="section">
<h1>NOTE ABOUT USERNAME/PASSWORD VALIDATION</h1> There are a number of ways in which a user can connect to a service. The server uses the following steps in determining if it will allow a connection to a specified service. If all the steps fail, the connection request is rejected. However, if one of the steps succeeds, the following steps are not checked.<div class="spacer">
</div>
If the service is marked &#8220;guest only = yes&#8221; and the server is running with share-level security (&#8220;security = share&#8221;, steps 1 to 5 are skipped.<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
 1.If the client has passed a username/password pair and that username/password pair is validated by the UNIX system's password programs, the connection is made as that username. This includes the \\server\service% <i>username</i> method of passing a username.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
 2.If the client has previously registered a username with the system and now supplies a correct password for that username, the connection is allowed.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
 3.The client's NetBIOS name and any previously used usernames are checked against the supplied password. If they match, the connection is allowed as the corresponding user.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
 4.If the client has previously validated a username/password pair with the server and the client has passed the validation token, that username is used.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
 5.If a user = field is given in the smb.conf file for the service and the client has supplied a password, and that password matches (according to the UNIX system's password checking) with one of the usernames from the user = field, the connection is made as the username in the user = line. If one of the usernames in the user = list begins with a @, that name expands to a list of names in the group of the same name.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
 6.If the service is a guest service, a connection is made as the username given in the guest account = for the service, irrespective of the supplied password.</div>
</div>
<div class="section">
<h1>REGISTRY-BASED CONFIGURATION</h1> Starting with Samba version 3.2.0, the capability to store Samba configuration in the registry is available. The configuration is stored in the registry key  <i>HKLM\Software\Samba\smbconf</i>. There are two levels of registry configuration:<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
 1.Share definitions stored in registry are used. This is triggered by setting the global parameter  <i>registry shares</i> to &#8220;yes&#8221; in  <i>smb.conf</i>.<div style="height: 1.00em;">
&#160;</div>
The registry shares are loaded not at startup but on demand at runtime by  <i>smbd</i>. Shares defined in  <i>smb.conf</i> take priority over shares of the same name defined in registry.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
 2.Global  <i>smb.conf</i> options stored in registry are used. This can be activated in two different ways:<div style="height: 1.00em;">
&#160;</div>
Firstly, a registry only configuration is triggered by setting  <b>config backend = registry</b> in the [global] section of  <i>smb.conf</i>. This resets everything that has been read from config files to this point and reads the content of the global configuration section from the registry. This is the recommended method of using registry based configuration.<div style="height: 1.00em;">
&#160;</div>
Secondly, a mixed configuration can be activated by a special new meaning of the parameter  <b>include = registry</b> in the [global] section of  <i>smb.conf</i>. This reads the global options from registry with the same priorities as for an include of a text file. This may be especially useful in cases where an initial configuration is needed to access the registry.<div style="height: 1.00em;">
&#160;</div>
Activation of global registry options automatically activates registry shares. So in the registry only case, shares are loaded on demand only.</div>
<div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
Note: To make registry-based configurations foolproof at least to a certain extent, the use of  <i>lock directory</i> and  <i>config backend</i> inside the registry configuration has been disabled: Especially by changing the  <i>lock directory</i> inside the registry configuration, one would create a broken setup where the daemons do not see the configuration they loaded once it is active.<div class="spacer">
</div>
The registry configuration can be accessed with tools like  <i>regedit</i> or  <i>net (rpc) registry</i> in the key  <i>HKLM\Software\Samba\smbconf</i>. More conveniently, the  <i>conf</i> subcommand of the  <b>net</b>(8) utility offers a dedicated interface to read and write the registry based configuration locally, i.e. directly accessing the database file, circumventing the server.</div>
<div class="section">
<h1>EXPLANATION OF EACH PARAMETER</h1> abort shutdown script (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This a full path name to a script called by  <b>smbd</b>(8) that should stop a shutdown procedure issued by the  <b>shutdown script</b>.<div style="height: 1.00em;">
&#160;</div>
If the connected user posseses the  <b>SeRemoteShutdownPrivilege</b>, right, this command will be run as root.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>abort shutdown script</i><i> = </i><i>&quot;&quot;</i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>abort shutdown script</i><i> = </i><i>/sbin/shutdown -c</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
access based share enum (S)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
If this parameter is  <b>yes</b> for a service, then the share hosted by the service will only be visible to users who have read or write access to the share during share enumeration (for example net view \\sambaserver). This has parallels to access based enumeration, the main difference being that only share permissions are evaluated, and security descriptors on files contained on the share are not used in computing enumeration access rights.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>access based share enum</i><i> = </i><i>no</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
acl check permissions (S)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This boolean parameter controls what  <b>smbd</b>(8)does on receiving a protocol request of &quot;open for delete&quot; from a Windows client. If a Windows client doesn't have permissions to delete a file then they expect this to be denied at open time. POSIX systems normally only detect restrictions on delete by actually attempting to delete the file or directory. As Windows clients can (and do) &quot;back out&quot; a delete request by unsetting the &quot;delete on close&quot; bit Samba cannot delete the file immediately on &quot;open for delete&quot; request as we cannot restore such a deleted file. With this parameter set to true (the default) then smbd checks the file system permissions directly on &quot;open for delete&quot; and denies the request without actually deleting the file if the file system permissions would seem to deny it. This is not perfect, as it's possible a user could have deleted a file without Samba being able to check the permissions correctly, but it is close enough to Windows semantics for mostly correct behaviour. Samba will correctly check POSIX ACL semantics in this case.<div style="height: 1.00em;">
&#160;</div>
If this parameter is set to &quot;false&quot; Samba doesn't check permissions on &quot;open for delete&quot; and allows the open. If the user doesn't have permission to delete the file this will only be discovered at close time, which is too late for the Windows user tools to display an error message to the user. The symptom of this is files that appear to have been deleted &quot;magically&quot; re-appearing on a Windows explorer refresh. This is an extremely advanced protocol option which should not need to be changed. This parameter was introduced in its final form in 3.0.21, an earlier version with slightly different semantics was introduced in 3.0.20. That older version is not documented here.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>acl check permissions</i><i> = </i><i>True</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
acl compatibility (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameter specifies what OS ACL semantics should be compatible with. Possible values are  <i>winnt</i> for Windows NT 4,  <i>win2k</i> for Windows 2000 and above and  <i>auto</i>. If you specify  <i>auto</i>, the value for this parameter will be based upon the version of the client. There should be no reason to change this parameter from the default.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>acl compatibility</i><i> = </i><i>Auto</i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>acl compatibility</i><i> = </i><i>win2k</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
acl group control (S)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
In a POSIX filesystem, only the owner of a file or directory and the superuser can modify the permissions and ACLs on a file. If this parameter is set, then Samba overrides this restriction, and also allows the  <i>primary group owner</i> of a file or directory to modify the permissions and ACLs on that file.<div style="height: 1.00em;">
&#160;</div>
On a Windows server, groups may be the owner of a file or directory - thus allowing anyone in that group to modify the permissions on it. This allows the delegation of security controls on a point in the filesystem to the group owner of a directory and anything below it also owned by that group. This means there are multiple people with permissions to modify ACLs on a file or directory, easing managability.<div style="height: 1.00em;">
&#160;</div>
This parameter allows Samba to also permit delegation of the control over a point in the exported directory hierarchy in much the same way as Windows. This allows all members of a UNIX group to control the permissions on a file or directory they have group ownership on.<div style="height: 1.00em;">
&#160;</div>
This parameter is best used with the  <b>inherit owner</b> option and also on on a share containing directories with the UNIX  <i>setgid bit</i> set on them, which causes new files and directories created within it to inherit the group ownership from the containing directory.<div style="height: 1.00em;">
&#160;</div>
This is parameter has been was deprecated in Samba 3.0.23, but re-activated in Samba 3.0.31 and above, as it now only controls permission changes if the user is in the owning primary group. It is now no longer equivalent to the  <i>dos filemode</i> option.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>acl group control</i><i> = </i><i>no</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
acl map full control (S)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This boolean parameter controls whether  <b>smbd</b>(8) maps a POSIX ACE entry of &quot;rwx&quot; (read/write/execute), the maximum allowed POSIX permission set, into a Windows ACL of &quot;FULL CONTROL&quot;. If this parameter is set to true any POSIX ACE entry of &quot;rwx&quot; will be returned in a Windows ACL as &quot;FULL CONTROL&quot;, is this parameter is set to false any POSIX ACE entry of &quot;rwx&quot; will be returned as the specific Windows ACL bits representing read, write and execute.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>acl map full control</i><i> = </i><i>True</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
add group script (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This is the full pathname to a script that will be run  <i>AS ROOT</i> by  <b>smbd</b>(8) when a new group is requested. It will expand any  <i>%g</i> to the group name passed. This script is only useful for installations using the Windows NT domain administration tools. The script is free to create a group with an arbitrary name to circumvent unix group name restrictions. In that case the script must print the numeric gid of the created group on stdout.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>add group script</i><i> = </i><i></i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>add group script</i><i> = </i><i>/usr/sbin/groupadd %g</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
add machine script (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This is the full pathname to a script that will be run by  <b>smbd</b>(8) when a machine is added to Samba's domain and a Unix account matching the machine's name appended with a &quot;$&quot; does not already exist.<div style="height: 1.00em;">
&#160;</div>
This option is very similar to the  <b>add user script</b>, and likewise uses the %u substitution for the account name. Do not use the %m substitution.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>add machine script</i><i> = </i><i></i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>add machine script</i><i> = </i><i>/usr/sbin/adduser -n -g machines -c Machine -d /var/lib/nobody -s /bin/false %u</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
add port command (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
Samba 3.0.23 introduced support for adding printer ports remotely using the Windows &quot;Add Standard TCP/IP Port Wizard&quot;. This option defines an external program to be executed when smbd receives a request to add a new Port to the system. The script is passed two parameters:<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;<i>port name</i></div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;<i>device URI</i></div>
<div style="height: 1.00em;">
&#160;</div>
</div>
The deviceURI is in the format of socket://&lt;hostname&gt;[:&lt;portnumber&gt;] or lpd://&lt;hostname&gt;/&lt;queuename&gt;.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>add port command</i><i> = </i><i></i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>add port command</i><i> = </i><i>/etc/samba/scripts/addport.sh</i><i> </i><div style="height: 1.00em;">
&#160;</div>
addprinter command (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
With the introduction of MS-RPC based printing support for Windows NT/2000 clients in Samba 2.2, The MS Add Printer Wizard (APW) icon is now also available in the &quot;Printers...&quot; folder displayed a share listing. The APW allows for printers to be add remotely to a Samba or Windows NT/2000 print server.<div style="height: 1.00em;">
&#160;</div>
For a Samba host this means that the printer must be physically added to the underlying printing system. The  <i>addprinter command</i> defines a script to be run which will perform the necessary operations for adding the printer to the print system and to add the appropriate service definition to the smb.conf file in order that it can be shared by  <b>smbd</b>(8).<div style="height: 1.00em;">
&#160;</div>
The  <i>addprinter command</i> is automatically invoked with the following parameter (in order):<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;<i>printer name</i></div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;<i>share name</i></div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;<i>port name</i></div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;<i>driver name</i></div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;<i>location</i></div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;<i>Windows 9x driver location</i></div>
<div style="height: 1.00em;">
&#160;</div>
</div>
All parameters are filled in from the PRINTER_INFO_2 structure sent by the Windows NT/2000 client with one exception. The &quot;Windows 9x driver location&quot; parameter is included for backwards compatibility only. The remaining fields in the structure are generated from answers to the APW questions.<div style="height: 1.00em;">
&#160;</div>
Once the  <i>addprinter command</i> has been executed, smbd will reparse the smb.conf to determine if the share defined by the APW exists. If the sharename is still invalid, then smbd will return an ACCESS_DENIED error to the client.<div style="height: 1.00em;">
&#160;</div>
The  <i>addprinter command</i> program can output a single line of text, which Samba will set as the port the new printer is connected to. If this line isn't output, Samba won't reload its printer shares.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>addprinter command</i><i> = </i><i></i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>addprinter command</i><i> = </i><i>/usr/bin/addprinter</i><i> </i><div style="height: 1.00em;">
&#160;</div>
add share command (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
Samba 2.2.0 introduced the ability to dynamically add and delete shares via the Windows NT 4.0 Server Manager. The  <i>add share command</i> is used to define an external program or script which will add a new service definition to smb.conf.<div style="height: 1.00em;">
&#160;</div>
In order to successfully execute the  <i>add share command</i>, smbd requires that the administrator connects using a root account (i.e. uid == 0) or has the SeDiskOperatorPrivilege. Scripts defined in the  <i>add share command</i> parameter are executed as root.<div style="height: 1.00em;">
&#160;</div>
When executed, smbd will automatically invoke the  <i>add share command</i> with five parameters.<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;<i>configFile</i> - the location of the global smb.conf file.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;<i>shareName</i> - the name of the new share.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;<i>pathName</i> - path to an **existing** directory on disk.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;<i>comment</i> - comment string to associate with the new share.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;<i>max connections</i> Number of maximum simultaneous connections to this share.</div>
<div style="height: 1.00em;">
&#160;</div>
</div>
This parameter is only used to add file shares. To add printer shares, see the  <b>addprinter command</b>.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>add share command</i><i> = </i><i></i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>add share command</i><i> = </i><i>/usr/local/bin/addshare</i><i> </i><div style="height: 1.00em;">
&#160;</div>
add user script (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This is the full pathname to a script that will be run  <i>AS ROOT</i> by  <b>smbd</b>(8) under special circumstances described below.<div style="height: 1.00em;">
&#160;</div>
Normally, a Samba server requires that UNIX users are created for all users accessing files on this server. For sites that use Windows NT account databases as their primary user database creating these users and keeping the user list in sync with the Windows NT PDC is an onerous task. This option allows smbd to create the required UNIX users  <i>ON DEMAND</i> when a user accesses the Samba server.<div style="height: 1.00em;">
&#160;</div>
In order to use this option,  <b>smbd</b>(8) must  <i>NOT</i> be set to  <b>security = share</b> and  <b>add user script</b> must be set to a full pathname for a script that will create a UNIX user given one argument of  <i>%u</i>, which expands into the UNIX user name to create.<div style="height: 1.00em;">
&#160;</div>
When the Windows user attempts to access the Samba server, at login (session setup in the SMB protocol) time,  <b>smbd</b>(8) contacts the  <b>password server</b> and attempts to authenticate the given user with the given password. If the authentication succeeds then smbd attempts to find a UNIX user in the UNIX password database to map the Windows user into. If this lookup fails, and  <b>add user script</b> is set then smbd will call the specified script  <i>AS ROOT</i>, expanding any  <i>%u</i> argument to be the user name to create.<div style="height: 1.00em;">
&#160;</div>
If this script successfully creates the user then smbd will continue on as though the UNIX user already existed. In this way, UNIX users are dynamically created to match existing Windows NT accounts.<div style="height: 1.00em;">
&#160;</div>
See also  <b>security</b>,  <b>password server</b>,  <b>delete user script</b>.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>add user script</i><i> = </i><i></i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>add user script</i><i> = </i><i>/usr/local/samba/bin/add_user %u</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
add user to group script (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
Full path to the script that will be called when a user is added to a group using the Windows NT domain administration tools. It will be run by  <b>smbd</b>(8)  <i>AS ROOT</i>. Any  <i>%g</i> will be replaced with the group name and any  <i>%u</i> will be replaced with the user name.<div style="height: 1.00em;">
&#160;</div>
Note that the adduser command used in the example below does not support the used syntax on all systems.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>add user to group script</i><i> = </i><i></i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>add user to group script</i><i> = </i><i>/usr/sbin/adduser %u %g</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
administrative share (S)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
If this parameter is set to  <b>yes</b> for a share, then the share will be an administrative share. The Administrative Shares are the default network shares created by all Windows NT-based operating systems. These are shares like C$, D$ or ADMIN$. The type of these shares is STYPE_DISKTREE_HIDDEN.<div style="height: 1.00em;">
&#160;</div>
See the section below on  <b>security</b> for more information about this option.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>administrative share</i><i> = </i><i>no</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
admin users (S)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This is a list of users who will be granted administrative privileges on the share. This means that they will do all file operations as the super-user (root).<div style="height: 1.00em;">
&#160;</div>
You should use this option very carefully, as any user in this list will be able to do anything they like on the share, irrespective of file permissions.<div style="height: 1.00em;">
&#160;</div>
This parameter will not work with the  <b>security = share</b> in Samba 3.0. This is by design.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>admin users</i><i> = </i><i></i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>admin users</i><i> = </i><i>jason</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
afs share (S)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameter controls whether special AFS features are enabled for this share. If enabled, it assumes that the directory exported via the  <i>path</i> parameter is a local AFS import. The special AFS features include the attempt to hand-craft an AFS token if you enabled --with-fake-kaserver in configure.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>afs share</i><i> = </i><i>no</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
afs username map (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
If you are using the fake kaserver AFS feature, you might want to hand-craft the usernames you are creating tokens for. For example this is necessary if you have users from several domain in your AFS Protection Database. One possible scheme to code users as DOMAIN+User as it is done by winbind with the + as a separator.<div style="height: 1.00em;">
&#160;</div>
The mapped user name must contain the cell name to log into, so without setting this parameter there will be no token.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>afs username map</i><i> = </i><i></i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>afs username map</i><i> = </i><i>%u@afs.samba.org</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
aio read size (S)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
If Samba has been built with asynchronous I/O support and this integer parameter is set to non-zero value, Samba will read from file asynchronously when size of request is bigger than this value. Note that it happens only for non-chained and non-chaining reads and when not using write cache.<div style="height: 1.00em;">
&#160;</div>
Current implementation of asynchronous I/O in Samba 3.0 does support only up to 10 outstanding asynchronous requests, read and write combined.<div style="height: 1.00em;">
&#160;</div>
Related command:  <b>write cache size</b><div style="height: 1.00em;">
&#160;</div>
Related command:  <b>aio write size</b><div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>aio read size</i><i> = </i><i>0</i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>aio read size</i><i> = </i><i>16384 # Use asynchronous I/O for reads bigger than 16KB request size</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
aio write behind (S)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
If Samba has been built with asynchronous I/O support, Samba will not wait until write requests are finished before returning the result to the client for files listed in this parameter. Instead, Samba will immediately return that the write request has been finished successfully, no matter if the operation will succeed or not. This might speed up clients without aio support, but is really dangerous, because data could be lost and files could be damaged.<div style="height: 1.00em;">
&#160;</div>
The syntax is identical to the  <b>veto files</b> parameter.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>aio write behind</i><i> = </i><i></i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>aio write behind</i><i> = </i><i>/*.tmp/</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
aio write size (S)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
If Samba has been built with asynchronous I/O support and this integer parameter is set to non-zero value, Samba will write to file asynchronously when size of request is bigger than this value. Note that it happens only for non-chained and non-chaining reads and when not using write cache.<div style="height: 1.00em;">
&#160;</div>
Current implementation of asynchronous I/O in Samba 3.0 does support only up to 10 outstanding asynchronous requests, read and write combined.<div style="height: 1.00em;">
&#160;</div>
Related command:  <b>write cache size</b><div style="height: 1.00em;">
&#160;</div>
Related command:  <b>aio read size</b><div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>aio write size</i><i> = </i><i>0</i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>aio write size</i><i> = </i><i>16384 # Use asynchronous I/O for writes bigger than 16KB request size</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
algorithmic rid base (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This determines how Samba will use its algorithmic mapping from uids/gid to the RIDs needed to construct NT Security Identifiers.<div style="height: 1.00em;">
&#160;</div>
Setting this option to a larger value could be useful to sites transitioning from WinNT and Win2k, as existing user and group rids would otherwise clash with sytem users etc.<div style="height: 1.00em;">
&#160;</div>
All UIDs and GIDs must be able to be resolved into SIDs for the correct operation of ACLs on the server. As such the algorithmic mapping can't be 'turned off', but pushing it 'out of the way' should resolve the issues. Users and groups can then be assigned 'low' RIDs in arbitrary-rid supporting backends.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>algorithmic rid base</i><i> = </i><i>1000</i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>algorithmic rid base</i><i> = </i><i>100000</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
allocation roundup size (S)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameter allows an administrator to tune the allocation size reported to Windows clients. The default size of 1Mb generally results in improved Windows client performance. However, rounding the allocation size may cause difficulties for some applications, e.g. MS Visual Studio. If the MS Visual Studio compiler starts to crash with an internal error, set this parameter to zero for this share.<div style="height: 1.00em;">
&#160;</div>
The integer parameter specifies the roundup size in bytes.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>allocation roundup size</i><i> = </i><i>1048576</i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>allocation roundup size</i><i> = </i><i>0 # (to disable roundups)</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
allow insecure wide links (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
In normal operation the option  <b>wide links</b> which allows the server to follow symlinks outside of a share path is automatically disabled when  <b>unix extensions</b> are enabled on a Samba server. This is done for security purposes to prevent UNIX clients creating symlinks to areas of the server file system that the administrator does not wish to export.<div style="height: 1.00em;">
&#160;</div>
Setting  <b>allow insecure wide links</b> to true disables the link between these two parameters, removing this protection and allowing a site to configure the server to follow symlinks (by setting  <b>wide links</b> to &quot;true&quot;) even when  <b>unix extensions</b> is turned on.<div style="height: 1.00em;">
&#160;</div>
If is not recommended to enable this option unless you fully understand the implications of allowing the server to follow symbolic links created by UNIX clients. For most normal Samba configurations this would be considered a security hole and setting this parameter is not recommended.<div style="height: 1.00em;">
&#160;</div>
This option was added at the request of sites who had deliberately set Samba up in this way and needed to continue supporting this functionality without having to patch the Samba code.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>allow insecure wide links</i><i> = </i><i>no</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
allow trusted domains (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This option only takes effect when the  <b>security</b> option is set to  <b>server</b>,  <b>domain</b> or  <b>ads</b>. If it is set to no, then attempts to connect to a resource from a domain or workgroup other than the one which smbd is running in will fail, even if that domain is trusted by the remote server doing the authentication.<div style="height: 1.00em;">
&#160;</div>
This is useful if you only want your Samba server to serve resources to users in the domain it is a member of. As an example, suppose that there are two domains DOMA and DOMB. DOMB is trusted by DOMA, which contains the Samba server. Under normal circumstances, a user with an account in DOMB can then access the resources of a UNIX account with the same account name on the Samba server even if they do not have an account in DOMA. This can make implementing a security boundary difficult.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>allow trusted domains</i><i> = </i><i>yes</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
announce as (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This specifies what type of server  <b>nmbd</b>(8) will announce itself as, to a network neighborhood browse list. By default this is set to Windows NT. The valid options are : &quot;NT Server&quot; (which can also be written as &quot;NT&quot;), &quot;NT Workstation&quot;, &quot;Win95&quot; or &quot;WfW&quot; meaning Windows NT Server, Windows NT Workstation, Windows 95 and Windows for Workgroups respectively. Do not change this parameter unless you have a specific need to stop Samba appearing as an NT server as this may prevent Samba servers from participating as browser servers correctly.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>announce as</i><i> = </i><i>NT Server</i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>announce as</i><i> = </i><i>Win95</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
announce version (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This specifies the major and minor version numbers that nmbd will use when announcing itself as a server. The default is 4.9. Do not change this parameter unless you have a specific need to set a Samba server to be a downlevel server.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>announce version</i><i> = </i><i>4.9</i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>announce version</i><i> = </i><i>2.0</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
async smb echo handler (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameter specifies whether Samba should fork the async smb echo handler. It can be beneficial if your file system can block syscalls for a very long time. In some circumstances, it prolongs the timeout that Windows uses to determine whether a connection is dead.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>async smb echo handler</i><i> = </i><i>no</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
auth methods (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This option allows the administrator to chose what authentication methods smbd will use when authenticating a user. This option defaults to sensible values based on  <b>security</b>. This should be considered a developer option and used only in rare circumstances. In the majority (if not all) of production servers, the default setting should be adequate.<div style="height: 1.00em;">
&#160;</div>
Each entry in the list attempts to authenticate the user in turn, until the user authenticates. In practice only one method will ever actually be able to complete the authentication.<div style="height: 1.00em;">
&#160;</div>
Possible options include  <b>guest</b> (anonymous access),  <b>sam</b> (lookups in local list of accounts based on netbios name or domain name),  <b>winbind</b> (relay authentication requests for remote users through winbindd),  <b>ntdomain</b> (pre-winbindd method of authentication for remote domain users; deprecated in favour of winbind method),  <b>trustdomain</b> (authenticate trusted users by contacting the remote DC directly from smbd; deprecated in favour of winbind method).<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>auth methods</i><i> = </i><i></i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>auth methods</i><i> = </i><i>guest sam winbind</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
available (S)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameter lets you &quot;turn off&quot; a service. If  <i>available = no</i>, then  <i>ALL</i> attempts to connect to the service will fail. Such failures are logged.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>available</i><i> = </i><i>yes</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
bind interfaces only (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This global parameter allows the Samba admin to limit what interfaces on a machine will serve SMB requests. It affects file service  <b>smbd</b>(8) and name service  <b>nmbd</b>(8) in a slightly different ways.<div style="height: 1.00em;">
&#160;</div>
For name service it causes nmbd to bind to ports 137 and 138 on the interfaces listed in the  <b>interfaces</b> parameter. nmbd also binds to the &quot;all addresses&quot; interface (0.0.0.0) on ports 137 and 138 for the purposes of reading broadcast messages. If this option is not set then nmbd will service name requests on all of these sockets. If  <b>bind interfaces only</b> is set then nmbd will check the source address of any packets coming in on the broadcast sockets and discard any that don't match the broadcast addresses of the interfaces in the  <b>interfaces</b> parameter list. As unicast packets are received on the other sockets it allows nmbd to refuse to serve names to machines that send packets that arrive through any interfaces not listed in the  <b>interfaces</b> list. IP Source address spoofing does defeat this simple check, however, so it must not be used seriously as a security feature for nmbd.<div style="height: 1.00em;">
&#160;</div>
For file service it causes  <b>smbd</b>(8) to bind only to the interface list given in the  <b>interfaces</b> parameter. This restricts the networks that smbd will serve, to packets coming in on those interfaces. Note that you should not use this parameter for machines that are serving PPP or other intermittent or non-broadcast network interfaces as it will not cope with non-permanent interfaces.<div style="height: 1.00em;">
&#160;</div>
If  <b>bind interfaces only</b> is set and the network address  <i>127.0.0.1</i> is not added to the  <b>interfaces</b> parameter list  <b>smbpasswd</b>(8) and  <b>swat</b>(8) may not work as expected due to the reasons covered below.<div style="height: 1.00em;">
&#160;</div>
To change a users SMB password, the smbpasswd by default connects to the  <i>localhost - 127.0.0.1</i> address as an SMB client to issue the password change request. If  <b>bind interfaces only</b> is set then unless the network address  <i>127.0.0.1</i> is added to the  <b>interfaces</b> parameter list then smbpasswd will fail to connect in it's default mode. smbpasswd can be forced to use the primary IP interface of the local host by using its  <b>smbpasswd</b>(8)  <i>-r </i><i></i><i>remote machine</i> parameter, with  <i>remote machine</i> set to the IP name of the primary interface of the local host.<div style="height: 1.00em;">
&#160;</div>
The swat status page tries to connect with smbd and nmbd at the address  <i>127.0.0.1</i> to determine if they are running. Not adding  <i>127.0.0.1</i> will cause smbd and nmbd to always show &quot;not running&quot; even if they really are. This can prevent swat from starting/stopping/restarting smbd and nmbd.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>bind interfaces only</i><i> = </i><i>no</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
blocking locks (S)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameter controls the behavior of  <b>smbd</b>(8) when given a request by a client to obtain a byte range lock on a region of an open file, and the request has a time limit associated with it.<div style="height: 1.00em;">
&#160;</div>
If this parameter is set and the lock range requested cannot be immediately satisfied, samba will internally queue the lock request, and periodically attempt to obtain the lock until the timeout period expires.<div style="height: 1.00em;">
&#160;</div>
If this parameter is set to  <b>no</b>, then samba will behave as previous versions of Samba would and will fail the lock request immediately if the lock range cannot be obtained.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>blocking locks</i><i> = </i><i>yes</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
block size (S)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameter controls the behavior of  <b>smbd</b>(8) when reporting disk free sizes. By default, this reports a disk block size of 1024 bytes.<div style="height: 1.00em;">
&#160;</div>
Changing this parameter may have some effect on the efficiency of client writes, this is not yet confirmed. This parameter was added to allow advanced administrators to change it (usually to a higher value) and test the effect it has on client write performance without re-compiling the code. As this is an experimental option it may be removed in a future release.<div style="height: 1.00em;">
&#160;</div>
Changing this option does not change the disk free reporting size, just the block size unit reported to the client.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>block size</i><i> = </i><i>1024</i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>block size</i><i> = </i><i>4096</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
browsable<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameter is a synonym for browseable.</div>
<div style="height: 1.00em;">
&#160;</div>
browseable (S)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This controls whether this share is seen in the list of available shares in a net view and in the browse list.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>browseable</i><i> = </i><i>yes</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
browse list (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This controls whether  <b>smbd</b>(8) will serve a browse list to a client doing a NetServerEnum call. Normally set to  <b>yes</b>. You should never need to change this.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>browse list</i><i> = </i><i>yes</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
cache directory (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
Usually, most of the TDB files are stored in the  <i>lock directory</i>. Since Samba 3.4.0, it is possible to differentiate between TDB files with persistent data and TDB files with non-persistent data using the  <i>state directory</i> and the  <i>cache directory</i> options.<div style="height: 1.00em;">
&#160;</div>
This option specifies the directory where TDB files containing non-persistent data will be stored.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>cache directory</i><i> = </i><i>${prefix}/var/locks</i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>cache directory</i><i> = </i><i>/var/run/samba/locks/cache</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
casesignames<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameter is a synonym for case sensitive.</div>
<div style="height: 1.00em;">
&#160;</div>
case sensitive (S)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
See the discussion in the section  <b>name mangling</b>.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>case sensitive</i><i> = </i><i>auto</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
change notify (S)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameter specifies whether Samba should reply to a client's file change notify requests.<div style="height: 1.00em;">
&#160;</div>
You should never need to change this parameter<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>change notify</i><i> = </i><i>yes</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
change share command (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
Samba 2.2.0 introduced the ability to dynamically add and delete shares via the Windows NT 4.0 Server Manager. The  <i>change share command</i> is used to define an external program or script which will modify an existing service definition in smb.conf.<div style="height: 1.00em;">
&#160;</div>
In order to successfully execute the  <i>change share command</i>, smbd requires that the administrator connects using a root account (i.e. uid == 0) or has the SeDiskOperatorPrivilege. Scripts defined in the  <i>change share command</i> parameter are executed as root.<div style="height: 1.00em;">
&#160;</div>
When executed, smbd will automatically invoke the  <i>change share command</i> with five parameters.<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;<i>configFile</i> - the location of the global smb.conf file.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;<i>shareName</i> - the name of the new share.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;<i>pathName</i> - path to an **existing** directory on disk.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;<i>comment</i> - comment string to associate with the new share.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;<i>max connections</i> Number of maximum simultaneous connections to this share.</div>
<div style="height: 1.00em;">
&#160;</div>
</div>
This parameter is only used to modify existing file share definitions. To modify printer shares, use the &quot;Printers...&quot; folder as seen when browsing the Samba host.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>change share command</i><i> = </i><i></i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>change share command</i><i> = </i><i>/usr/local/bin/changeshare</i><i> </i><div style="height: 1.00em;">
&#160;</div>
check password script (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
The name of a program that can be used to check password complexity. The password is sent to the program's standard input.<div style="height: 1.00em;">
&#160;</div>
The program must return 0 on a good password, or any other value if the password is bad. In case the password is considered weak (the program does not return 0) the user will be notified and the password change will fail.<div style="height: 1.00em;">
&#160;</div>
Note: In the example directory is a sample program called crackcheck that uses cracklib to check the password quality.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>check password script</i><i> = </i><i>Disabled</i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>check password script</i><i> = </i><i>/usr/local/sbin/crackcheck</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
client lanman auth (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameter determines whether or not  <b>smbclient</b>(8) and other samba client tools will attempt to authenticate itself to servers using the weaker LANMAN password hash. If disabled, only server which support NT password hashes (e.g. Windows NT/2000, Samba, etc... but not Windows 95/98) will be able to be connected from the Samba client.<div style="height: 1.00em;">
&#160;</div>
The LANMAN encrypted response is easily broken, due to its case-insensitive nature, and the choice of algorithm. Clients without Windows 95/98 servers are advised to disable this option.<div style="height: 1.00em;">
&#160;</div>
Disabling this option will also disable the client plaintext auth option.<div style="height: 1.00em;">
&#160;</div>
Likewise, if the client ntlmv2 auth parameter is enabled, then only NTLMv2 logins will be attempted.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>client lanman auth</i><i> = </i><i>no</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
client ldap sasl wrapping (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
The  <b>client ldap sasl wrapping</b> defines whether ldap traffic will be signed or signed and encrypted (sealed). Possible values are  <i>plain</i>,  <i>sign</i> and  <i>seal</i>.<div style="height: 1.00em;">
&#160;</div>
The values  <i>sign</i> and  <i>seal</i> are only available if Samba has been compiled against a modern OpenLDAP version (2.3.x or higher).<div style="height: 1.00em;">
&#160;</div>
This option is needed in the case of Domain Controllers enforcing the usage of signed LDAP connections (e.g. Windows 2000 SP3 or higher). LDAP sign and seal can be controlled with the registry key &quot;HKLM\System\CurrentControlSet\Services\ NTDS\Parameters\LDAPServerIntegrity&quot; on the Windows server side.<div style="height: 1.00em;">
&#160;</div>
Depending on the used KRB5 library (MIT and older Heimdal versions) it is possible that the message &quot;integrity only&quot; is not supported. In this case,  <i>sign</i> is just an alias for  <i>seal</i>.<div style="height: 1.00em;">
&#160;</div>
The default value is  <i>plain</i> which is not irritable to KRB5 clock skew errors. That implies synchronizing the time with the KDC in the case of using  <i>sign</i> or  <i>seal</i>.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>client ldap sasl wrapping</i><i> = </i><i>plain</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
client ntlmv2 auth (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameter determines whether or not  <b>smbclient</b>(8) will attempt to authenticate itself to servers using the NTLMv2 encrypted password response.<div style="height: 1.00em;">
&#160;</div>
If enabled, only an NTLMv2 and LMv2 response (both much more secure than earlier versions) will be sent. Older servers (including NT4 &lt; SP4, Win9x and Samba 2.2) are not compatible with NTLMv2 when not in an NTLMv2 supporting domain<div style="height: 1.00em;">
&#160;</div>
Similarly, if enabled, NTLMv1, client lanman auth and client plaintext auth authentication will be disabled. This also disables share-level authentication.<div style="height: 1.00em;">
&#160;</div>
If disabled, an NTLM response (and possibly a LANMAN response) will be sent by the client, depending on the value of client lanman auth.<div style="height: 1.00em;">
&#160;</div>
Note that Windows Vista and later versions already use NTLMv2 by default, and some sites (particularly those following 'best practice' security polices) only allow NTLMv2 responses, and not the weaker LM or NTLM.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>client ntlmv2 auth</i><i> = </i><i>yes</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
client plaintext auth (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
Specifies whether a client should send a plaintext password if the server does not support encrypted passwords.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>client plaintext auth</i><i> = </i><i>no</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
client schannel (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This controls whether the client offers or even demands the use of the netlogon schannel.  <b>client schannel = no</b> does not offer the schannel,  <b>client schannel = auto</b> offers the schannel but does not enforce it, and  <b>client schannel = yes</b> denies access if the server is not able to speak netlogon schannel.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>client schannel</i><i> = </i><i>auto</i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>client schannel</i><i> = </i><i>yes</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
client signing (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This controls whether the client is allowed or required to use SMB signing. Possible values are  <i>auto</i>,  <i>mandatory</i> and  <i>disabled</i>.<div style="height: 1.00em;">
&#160;</div>
When set to auto, SMB signing is offered, but not enforced. When set to mandatory, SMB signing is required and if set to disabled, SMB signing is not offered either.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>client signing</i><i> = </i><i>auto</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
client use spnego principal (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameter determines whether or not  <b>smbclient</b>(8) and other samba components acting as a client will attempt to use the server-supplied principal sometimes given in the SPNEGO exchange.<div style="height: 1.00em;">
&#160;</div>
If enabled, Samba can attempt to use Kerberos to contact servers known only by IP address. Kerberos relies on names, so ordinarily cannot function in this situation.<div style="height: 1.00em;">
&#160;</div>
If disabled, Samba will use the name used to look up the server when asking the KDC for a ticket. This avoids situations where a server may impersonate another, soliciting authentication as one principal while being known on the network as another.<div style="height: 1.00em;">
&#160;</div>
Note that Windows XP SP2 and later versions already follow this behaviour, and Windows Vista and later servers no longer supply this 'rfc4178 hint' principal on the server side.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>client use spnego principal</i><i> = </i><i>no</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
client use spnego (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This variable controls whether Samba clients will try to use Simple and Protected NEGOciation (as specified by rfc2478) with supporting servers (including WindowsXP, Windows2000 and Samba 3.0) to agree upon an authentication mechanism. This enables Kerberos authentication in particular.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>client use spnego</i><i> = </i><i>yes</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
cluster addresses (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
With this parameter you can add additional addresses nmbd will register with a WINS server. These addresses are not necessarily present on all nodes simultaneously, but they will be registered with the WINS server so that clients can contact any of the nodes.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>cluster addresses</i><i> = </i><i></i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>cluster addresses</i><i> = </i><i>10.0.0.1 10.0.0.2 10.0.0.3</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
clustering (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameter specifies whether Samba should contact ctdb for accessing its tdb files and use ctdb as a backend for its messaging backend.<div style="height: 1.00em;">
&#160;</div>
Set this parameter to yes only if you have a cluster setup with ctdb running.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>clustering</i><i> = </i><i>no</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
comment (S)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This is a text field that is seen next to a share when a client does a queries the server, either via the network neighborhood or via net view to list what shares are available.<div style="height: 1.00em;">
&#160;</div>
If you want to set the string that is displayed next to the machine name then see the  <b>server string</b> parameter.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>comment</i><i> = </i><i> # No comment</i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>comment</i><i> = </i><i>Fred's Files</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
config backend (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This controls the backend for storing the configuration. Possible values are  <i>file</i> (the default) and  <i>registry</i>. When  <b>config backend = registry</b> is encountered while loading  <i>smb.conf</i>, the configuration read so far is dropped and the global options are read from registry instead. So this triggers a registry only configuration. Share definitions are not read immediately but instead  <i>registry shares</i> is set to  <i>yes</i>.<div style="height: 1.00em;">
&#160;</div>
Note: This option can not be set inside the registry configuration itself.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>config backend</i><i> = </i><i>file</i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>config backend</i><i> = </i><i>registry</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
config file (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This allows you to override the config file to use, instead of the default (usually smb.conf). There is a chicken and egg problem here as this option is set in the config file!<div style="height: 1.00em;">
&#160;</div>
For this reason, if the name of the config file has changed when the parameters are loaded then it will reload them from the new config file.<div style="height: 1.00em;">
&#160;</div>
This option takes the usual substitutions, which can be very useful.<div style="height: 1.00em;">
&#160;</div>
If the config file doesn't exist then it won't be loaded (allowing you to special case the config files of just a few clients).<div style="height: 1.00em;">
&#160;</div>
<i>No default</i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>config file</i><i> = </i><i>/usr/local/samba/lib/smb.conf.%m</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
copy (S)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameter allows you to &quot;clone&quot; service entries. The specified service is simply duplicated under the current service's name. Any parameters specified in the current section will override those in the section being copied.<div style="height: 1.00em;">
&#160;</div>
This feature lets you set up a 'template' service and create similar services easily. Note that the service being copied must occur earlier in the configuration file than the service doing the copying.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>copy</i><i> = </i><i></i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>copy</i><i> = </i><i>otherservice</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
create krb5 conf (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
Setting this paramter to no prevents winbind from creating custom krb5.conf files. Winbind normally does this because the krb5 libraries are not AD-site-aware and thus would pick any domain controller out of potentially very many. Winbind is site-aware and makes the krb5 libraries use a local DC by creating its own krb5.conf files.<div style="height: 1.00em;">
&#160;</div>
Preventing winbind from doing this might become necessary if you have to add special options into your system-krb5.conf that winbind does not see.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>create krb5 conf</i><i> = </i><i>yes</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
create mode<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameter is a synonym for create mask.</div>
<div style="height: 1.00em;">
&#160;</div>
create mask (S)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
When a file is created, the necessary permissions are calculated according to the mapping from DOS modes to UNIX permissions, and the resulting UNIX mode is then bit-wise 'AND'ed with this parameter. This parameter may be thought of as a bit-wise MASK for the UNIX modes of a file. Any bit  <i>not</i> set here will be removed from the modes set on a file when it is created.<div style="height: 1.00em;">
&#160;</div>
The default value of this parameter removes the group and other write and execute bits from the UNIX modes.<div style="height: 1.00em;">
&#160;</div>
Following this Samba will bit-wise 'OR' the UNIX mode created from this parameter with the value of the  <b>force create mode</b> parameter which is set to 000 by default.<div style="height: 1.00em;">
&#160;</div>
This parameter does not affect directory masks. See the parameter  <b>directory mask</b> for details.<div style="height: 1.00em;">
&#160;</div>
Note that this parameter does not apply to permissions set by Windows NT/2000 ACL editors. If the administrator wishes to enforce a mask on access control lists also, they need to set the  <b>security mask</b>.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>create mask</i><i> = </i><i>0744</i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>create mask</i><i> = </i><i>0775</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
csc policy (S)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This stands for  <i>client-side caching policy</i>, and specifies how clients capable of offline caching will cache the files in the share. The valid values are: manual, documents, programs, disable.<div style="height: 1.00em;">
&#160;</div>
These values correspond to those used on Windows servers.<div style="height: 1.00em;">
&#160;</div>
For example, shares containing roaming profiles can have offline caching disabled using  <b>csc policy = disable</b>.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>csc policy</i><i> = </i><i>manual</i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>csc policy</i><i> = </i><i>programs</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
ctdbd socket (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
If you set clustering=yes, you need to tell Samba where ctdbd listens on its unix domain socket. The default path as of ctdb 1.0 is /tmp/ctdb.socket which you have to explicitly set for Samba in smb.conf.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>ctdbd socket</i><i> = </i><i></i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>ctdbd socket</i><i> = </i><i>/tmp/ctdb.socket</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
ctdb locktime warn threshold (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
In a cluster environment using Samba and ctdb it is critical that locks on central ctdb-hosted databases like locking.tdb are not held for long. With the current Samba architecture it happens that Samba takes a lock and while holding that lock makes file system calls into the shared cluster file system. This option makes Samba warn if it detects that it has held locks for the specified number of milliseconds. If this happens,  <i>smbd</i> will emit a debug level 0 message into its logs and potentially into syslog. The most likely reason for such a log message is that an operation of the cluster file system Samba exports is taking longer than expected. The messages are meant as a debugging aid for potential cluster problems.<div style="height: 1.00em;">
&#160;</div>
The default value of 0 disables this logging.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>ctdb locktime warn threshold</i><i> = </i><i>0</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
ctdb timeout (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameter specifies a timeout in seconds for the connection between Samba and ctdb. It is only valid if you have compiled Samba with clustering and if you have set  <i>clustering=yes</i>.<div style="height: 1.00em;">
&#160;</div>
When something in the cluster blocks, it can happen that we wait indefinitely long for ctdb, just adding to the blocking condition. In a well-running cluster this should never happen, but there are too many components in a cluster that might have hickups. Choosing the right balance for this value is very tricky, because on a busy cluster long service times to transfer something across the cluster might be valid. Setting it too short will degrade the service your cluster presents, setting it too long might make the cluster itself not recover from something severely broken for too long.<div style="height: 1.00em;">
&#160;</div>
Be aware that if you set this parameter, this needs to be in the file smb.conf, it is not really helpful to put this into a registry configuration (typical on a cluster), because to access the registry contact to ctdb is requred.<div style="height: 1.00em;">
&#160;</div>
Setting  <i>ctdb timeout</i> to n makes any process waiting longer than n seconds for a reply by the cluster panic. Setting it to 0 (the default) makes Samba block forever, which is the highly recommended default.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>ctdb timeout</i><i> = </i><i>0</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
cups connection timeout (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameter is only applicable if  <b>printing</b> is set to  <b>cups</b>.<div style="height: 1.00em;">
&#160;</div>
If set, this option specifies the number of seconds that smbd will wait whilst trying to contact to the CUPS server. The connection will fail if it takes longer than this number of seconds.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>cups connection timeout</i><i> = </i><i>30</i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>cups connection timeout</i><i> = </i><i>60</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
cups encrypt (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameter is only applicable if  <b>printing</b> is set to  <b>cups</b> and if you use CUPS newer than 1.0.x.It is used to define whether or not Samba should use encryption when talking to the CUPS server. Possible values are  <i>auto</i>,  <i>yes</i> and  <i>no</i><div style="height: 1.00em;">
&#160;</div>
When set to auto we will try to do a TLS handshake on each CUPS connection setup. If that fails, we will fall back to unencrypted operation.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>cups encrypt</i><i> = </i><i>&quot;no&quot;</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
cups options (S)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameter is only applicable if  <b>printing</b> is set to  <b>cups</b>. Its value is a free form string of options passed directly to the cups library.<div style="height: 1.00em;">
&#160;</div>
You can pass any generic print option known to CUPS (as listed in the CUPS &quot;Software Users' Manual&quot;). You can also pass any printer specific option (as listed in &quot;lpoptions -d printername -l&quot;) valid for the target queue. Multiple parameters should be space-delimited name/value pairs according to the PAPI text option ABNF specification. Collection values (&quot;name={a=... b=... c=...}&quot;) are stored with the curley brackets intact.<div style="height: 1.00em;">
&#160;</div>
You should set this parameter to  <b>raw</b> if your CUPS server error_log file contains messages such as &quot;Unsupported format 'application/octet-stream'&quot; when printing from a Windows client through Samba. It is no longer necessary to enable system wide raw printing in /etc/cups/mime.{convs,types}.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>cups options</i><i> = </i><i>&quot;&quot;</i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>cups options</i><i> = </i><i>&quot;raw media=a4&quot;</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
cups server (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameter is only applicable if  <b>printing</b> is set to  <b>cups</b>.<div style="height: 1.00em;">
&#160;</div>
If set, this option overrides the ServerName option in the CUPS client.conf. This is necessary if you have virtual samba servers that connect to different CUPS daemons.<div style="height: 1.00em;">
&#160;</div>
Optionally, a port can be specified by separating the server name and port number with a colon. If no port was specified, the default port for IPP (631) will be used.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>cups server</i><i> = </i><i>&quot;&quot;</i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>cups server</i><i> = </i><i>mycupsserver</i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>cups server</i><i> = </i><i>mycupsserver:1631</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
deadtime (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
The value of the parameter (a decimal integer) represents the number of minutes of inactivity before a connection is considered dead, and it is disconnected. The deadtime only takes effect if the number of open files is zero.<div style="height: 1.00em;">
&#160;</div>
This is useful to stop a server's resources being exhausted by a large number of inactive connections.<div style="height: 1.00em;">
&#160;</div>
Most clients have an auto-reconnect feature when a connection is broken so in most cases this parameter should be transparent to users.<div style="height: 1.00em;">
&#160;</div>
Using this parameter with a timeout of a few minutes is recommended for most systems.<div style="height: 1.00em;">
&#160;</div>
A deadtime of zero indicates that no auto-disconnection should be performed.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>deadtime</i><i> = </i><i>0</i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>deadtime</i><i> = </i><i>15</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
debug class (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
With this boolean parameter enabled, the debug class (DBGC_CLASS) will be displayed in the debug header.<div style="height: 1.00em;">
&#160;</div>
For more information about currently available debug classes, see section about  <b>log level</b>.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>debug class</i><i> = </i><i>no</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
debug hires timestamp (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
Sometimes the timestamps in the log messages are needed with a resolution of higher that seconds, this boolean parameter adds microsecond resolution to the timestamp message header when turned on.<div style="height: 1.00em;">
&#160;</div>
Note that the parameter  <b>debug timestamp</b> must be on for this to have an effect.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>debug hires timestamp</i><i> = </i><i>yes</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
debug pid (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
When using only one log file for more then one forked  <b>smbd</b>(8)-process there may be hard to follow which process outputs which message. This boolean parameter is adds the process-id to the timestamp message headers in the logfile when turned on.<div style="height: 1.00em;">
&#160;</div>
Note that the parameter  <b>debug timestamp</b> must be on for this to have an effect.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>debug pid</i><i> = </i><i>no</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
debug prefix timestamp (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
With this option enabled, the timestamp message header is prefixed to the debug message without the filename and function information that is included with the  <b>debug timestamp</b> parameter. This gives timestamps to the messages without adding an additional line.<div style="height: 1.00em;">
&#160;</div>
Note that this parameter overrides the  <b>debug timestamp</b> parameter.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>debug prefix timestamp</i><i> = </i><i>no</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
timestamp logs<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameter is a synonym for debug timestamp.</div>
<div style="height: 1.00em;">
&#160;</div>
debug timestamp (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
Samba debug log messages are timestamped by default. If you are running at a high  <b>debug level</b> these timestamps can be distracting. This boolean parameter allows timestamping to be turned off.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>debug timestamp</i><i> = </i><i>yes</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
debug uid (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
Samba is sometimes run as root and sometime run as the connected user, this boolean parameter inserts the current euid, egid, uid and gid to the timestamp message headers in the log file if turned on.<div style="height: 1.00em;">
&#160;</div>
Note that the parameter  <b>debug timestamp</b> must be on for this to have an effect.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>debug uid</i><i> = </i><i>no</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
dedicated keytab file (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
Specifies the path to the kerberos keytab file when  <b>kerberos method</b> is set to &quot;dedicated keytab&quot;.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>dedicated keytab file</i><i> = </i><i></i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>dedicated keytab file</i><i> = </i><i>/usr/local/etc/krb5.keytab</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
default case (S)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
See the section on  <b>name mangling</b>. Also note the  <b>short preserve case</b> parameter.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>default case</i><i> = </i><i>lower</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
default devmode (S)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameter is only applicable to  <b>printable</b> services. When smbd is serving Printer Drivers to Windows NT/2k/XP clients, each printer on the Samba server has a Device Mode which defines things such as paper size and orientation and duplex settings. The device mode can only correctly be generated by the printer driver itself (which can only be executed on a Win32 platform). Because smbd is unable to execute the driver code to generate the device mode, the default behavior is to set this field to NULL.<div style="height: 1.00em;">
&#160;</div>
Most problems with serving printer drivers to Windows NT/2k/XP clients can be traced to a problem with the generated device mode. Certain drivers will do things such as crashing the client's Explorer.exe with a NULL devmode. However, other printer drivers can cause the client's spooler service (spoolsv.exe) to die if the devmode was not created by the driver itself (i.e. smbd generates a default devmode).<div style="height: 1.00em;">
&#160;</div>
This parameter should be used with care and tested with the printer driver in question. It is better to leave the device mode to NULL and let the Windows client set the correct values. Because drivers do not do this all the time, setting default devmode = yes will instruct smbd to generate a default one.<div style="height: 1.00em;">
&#160;</div>
For more information on Windows NT/2k printing and Device Modes, see the MSDN documentation.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>default devmode</i><i> = </i><i>yes</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
default<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameter is a synonym for default service.</div>
<div style="height: 1.00em;">
&#160;</div>
default service (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameter specifies the name of a service which will be connected to if the service actually requested cannot be found. Note that the square brackets are  <i>NOT</i> given in the parameter value (see example below).<div style="height: 1.00em;">
&#160;</div>
There is no default value for this parameter. If this parameter is not given, attempting to connect to a nonexistent service results in an error.<div style="height: 1.00em;">
&#160;</div>
Typically the default service would be a  <b>guest ok</b>,  <b>read-only</b> service.<div style="height: 1.00em;">
&#160;</div>
Also note that the apparent service name will be changed to equal that of the requested service, this is very useful as it allows you to use macros like  <i>%S</i> to make a wildcard service.<div style="height: 1.00em;">
&#160;</div>
Note also that any &quot;_&quot; characters in the name of the service used in the default service will get mapped to a &quot;/&quot;. This allows for interesting things.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>default service</i><i> = </i><i></i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>default service</i><i> = </i><i>pub</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
defer sharing violations (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
Windows allows specifying how a file will be shared with other processes when it is opened. Sharing violations occur when a file is opened by a different process using options that violate the share settings specified by other processes. This parameter causes smbd to act as a Windows server does, and defer returning a &quot;sharing violation&quot; error message for up to one second, allowing the client to close the file causing the violation in the meantime.<div style="height: 1.00em;">
&#160;</div>
UNIX by default does not have this behaviour.<div style="height: 1.00em;">
&#160;</div>
There should be no reason to turn off this parameter, as it is designed to enable Samba to more correctly emulate Windows.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>defer sharing violations</i><i> = </i><i>True</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
delete group script (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This is the full pathname to a script that will be run  <i>AS ROOT</i>  <b>smbd</b>(8) when a group is requested to be deleted. It will expand any  <i>%g</i> to the group name passed. This script is only useful for installations using the Windows NT domain administration tools.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>delete group script</i><i> = </i><i></i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
deleteprinter command (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
With the introduction of MS-RPC based printer support for Windows NT/2000 clients in Samba 2.2, it is now possible to delete a printer at run time by issuing the DeletePrinter() RPC call.<div style="height: 1.00em;">
&#160;</div>
For a Samba host this means that the printer must be physically deleted from the underlying printing system. The  <b>deleteprinter command</b> defines a script to be run which will perform the necessary operations for removing the printer from the print system and from smb.conf.<div style="height: 1.00em;">
&#160;</div>
The  <b>deleteprinter command</b> is automatically called with only one parameter:  <b>printer name</b>.<div style="height: 1.00em;">
&#160;</div>
Once the  <b>deleteprinter command</b> has been executed, smbd will reparse the smb.conf to check that the associated printer no longer exists. If the sharename is still valid, then smbd will return an ACCESS_DENIED error to the client.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>deleteprinter command</i><i> = </i><i></i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>deleteprinter command</i><i> = </i><i>/usr/bin/removeprinter</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
delete readonly (S)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameter allows readonly files to be deleted. This is not normal DOS semantics, but is allowed by UNIX.<div style="height: 1.00em;">
&#160;</div>
This option may be useful for running applications such as rcs, where UNIX file ownership prevents changing file permissions, and DOS semantics prevent deletion of a read only file.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>delete readonly</i><i> = </i><i>no</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
delete share command (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
Samba 2.2.0 introduced the ability to dynamically add and delete shares via the Windows NT 4.0 Server Manager. The  <i>delete share command</i> is used to define an external program or script which will remove an existing service definition from smb.conf.<div style="height: 1.00em;">
&#160;</div>
In order to successfully execute the  <i>delete share command</i>, smbd requires that the administrator connects using a root account (i.e. uid == 0) or has the SeDiskOperatorPrivilege. Scripts defined in the  <i>delete share command</i> parameter are executed as root.<div style="height: 1.00em;">
&#160;</div>
When executed, smbd will automatically invoke the  <i>delete share command</i> with two parameters.<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;<i>configFile</i> - the location of the global smb.conf file.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;<i>shareName</i> - the name of the existing service.</div>
<div style="height: 1.00em;">
&#160;</div>
</div>
This parameter is only used to remove file shares. To delete printer shares, see the  <b>deleteprinter command</b>.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>delete share command</i><i> = </i><i></i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>delete share command</i><i> = </i><i>/usr/local/bin/delshare</i><i> </i><div style="height: 1.00em;">
&#160;</div>
delete user from group script (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
Full path to the script that will be called when a user is removed from a group using the Windows NT domain administration tools. It will be run by  <b>smbd</b>(8)  <i>AS ROOT</i>. Any  <i>%g</i> will be replaced with the group name and any  <i>%u</i> will be replaced with the user name.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>delete user from group script</i><i> = </i><i></i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>delete user from group script</i><i> = </i><i>/usr/sbin/deluser %u %g</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
delete user script (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This is the full pathname to a script that will be run by  <b>smbd</b>(8) when managing users with remote RPC (NT) tools.<div style="height: 1.00em;">
&#160;</div>
This script is called when a remote client removes a user from the server, normally using 'User Manager for Domains' or rpcclient.<div style="height: 1.00em;">
&#160;</div>
This script should delete the given UNIX username.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>delete user script</i><i> = </i><i></i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>delete user script</i><i> = </i><i>/usr/local/samba/bin/del_user %u</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
delete veto files (S)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This option is used when Samba is attempting to delete a directory that contains one or more vetoed directories (see the  <b>veto files</b> option). If this option is set to  <b>no</b> (the default) then if a vetoed directory contains any non-vetoed files or directories then the directory delete will fail. This is usually what you want.<div style="height: 1.00em;">
&#160;</div>
If this option is set to  <b>yes</b>, then Samba will attempt to recursively delete any files and directories within the vetoed directory. This can be useful for integration with file serving systems such as NetAtalk which create meta-files within directories you might normally veto DOS/Windows users from seeing (e.g. .AppleDouble)<div style="height: 1.00em;">
&#160;</div>
Setting  <b>delete veto files = yes</b> allows these directories to be transparently deleted when the parent directory is deleted (so long as the user has permissions to do so).<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>delete veto files</i><i> = </i><i>no</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
dfree cache time (S)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
The  <i>dfree cache time</i> should only be used on systems where a problem occurs with the internal disk space calculations. This has been known to happen with Ultrix, but may occur with other operating systems. The symptom that was seen was an error of &quot;Abort Retry Ignore&quot; at the end of each directory listing.<div style="height: 1.00em;">
&#160;</div>
This is a new parameter introduced in Samba version 3.0.21. It specifies in seconds the time that smbd will cache the output of a disk free query. If set to zero (the default) no caching is done. This allows a heavily loaded server to prevent rapid spawning of  <b>dfree command</b> scripts increasing the load.<div style="height: 1.00em;">
&#160;</div>
By default this parameter is zero, meaning no caching will be done.<div style="height: 1.00em;">
&#160;</div>
<i>No default</i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>dfree cache time</i><i> = </i><i>dfree cache time = 60</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
dfree command (S)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
The  <i>dfree command</i> setting should only be used on systems where a problem occurs with the internal disk space calculations. This has been known to happen with Ultrix, but may occur with other operating systems. The symptom that was seen was an error of &quot;Abort Retry Ignore&quot; at the end of each directory listing.<div style="height: 1.00em;">
&#160;</div>
This setting allows the replacement of the internal routines to calculate the total disk space and amount available with an external routine. The example below gives a possible script that might fulfill this function.<div style="height: 1.00em;">
&#160;</div>
In Samba version 3.0.21 this parameter has been changed to be a per-share parameter, and in addition the parameter  <b>dfree cache time</b> was added to allow the output of this script to be cached for systems under heavy load.<div style="height: 1.00em;">
&#160;</div>
The external program will be passed a single parameter indicating a directory in the filesystem being queried. This will typically consist of the string ./. The script should return two integers in ASCII. The first should be the total disk space in blocks, and the second should be the number of available blocks. An optional third return value can give the block size in bytes. The default blocksize is 1024 bytes.<div style="height: 1.00em;">
&#160;</div>
Note: Your script should  <i>NOT</i> be setuid or setgid and should be owned by (and writeable only by) root!<div style="height: 1.00em;">
&#160;</div>
Where the script dfree (which must be made executable) could be:<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
 <br/>
#!/bin/sh<br/>
df $1 | tail -1 | awk '{print $(NF-4),$(NF-2)}'<br/>
</div>
<div style="height: 1.00em;">
&#160;</div>
or perhaps (on Sys V based systems):<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
 <br/>
#!/bin/sh<br/>
/usr/bin/df -k $1 | tail -1 | awk '{print $3&quot; &quot;$5}'<br/>
</div>
<div style="height: 1.00em;">
&#160;</div>
Note that you may have to replace the command names with full path names on some systems.<div style="height: 1.00em;">
&#160;</div>
By default internal routines for determining the disk capacity and remaining space will be used.<div style="height: 1.00em;">
&#160;</div>
<i>No default</i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>dfree command</i><i> = </i><i>/usr/local/samba/bin/dfree</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
directory mode<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameter is a synonym for directory mask.</div>
<div style="height: 1.00em;">
&#160;</div>
directory mask (S)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameter is the octal modes which are used when converting DOS modes to UNIX modes when creating UNIX directories.<div style="height: 1.00em;">
&#160;</div>
When a directory is created, the necessary permissions are calculated according to the mapping from DOS modes to UNIX permissions, and the resulting UNIX mode is then bit-wise 'AND'ed with this parameter. This parameter may be thought of as a bit-wise MASK for the UNIX modes of a directory. Any bit  <i>not</i> set here will be removed from the modes set on a directory when it is created.<div style="height: 1.00em;">
&#160;</div>
The default value of this parameter removes the 'group' and 'other' write bits from the UNIX mode, allowing only the user who owns the directory to modify it.<div style="height: 1.00em;">
&#160;</div>
Following this Samba will bit-wise 'OR' the UNIX mode created from this parameter with the value of the  <b>force directory mode</b> parameter. This parameter is set to 000 by default (i.e. no extra mode bits are added).<div style="height: 1.00em;">
&#160;</div>
Note that this parameter does not apply to permissions set by Windows NT/2000 ACL editors. If the administrator wishes to enforce a mask on access control lists also, they need to set the  <b>directory security mask</b>.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>directory mask</i><i> = </i><i>0755</i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>directory mask</i><i> = </i><i>0775</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
directory name cache size (S)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameter specifies the the size of the directory name cache. It will be needed to turn this off for *BSD systems.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>directory name cache size</i><i> = </i><i>100</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
directory security mask (S)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameter controls what UNIX permission bits will be set when a Windows NT client is manipulating the UNIX permission on a directory using the native NT security dialog box.<div style="height: 1.00em;">
&#160;</div>
This parameter is applied as a mask (AND'ed with) to the incoming permission bits, thus resetting any bits not in this mask. Make sure not to mix up this parameter with  <b>force directory security mode</b>, which works similar like this one but uses logical OR instead of AND. Essentially, zero bits in this mask are a set of bits that will always be set to zero.<div style="height: 1.00em;">
&#160;</div>
Essentially, all bits set to zero in this mask will result in setting to zero the corresponding bits on the file permissions regardless of the previous status of this bits on the file.<div style="height: 1.00em;">
&#160;</div>
If not set explicitly this parameter is set to 0777 meaning a user is allowed to set all the user/group/world permissions on a directory.<div style="height: 1.00em;">
&#160;</div>
<i>Note</i> that users who can access the Samba server through other means can easily bypass this restriction, so it is primarily useful for standalone &quot;appliance&quot; systems. Administrators of most normal systems will probably want to leave it as the default of  <b>0777</b>.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>directory security mask</i><i> = </i><i>0777</i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>directory security mask</i><i> = </i><i>0700</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
disable netbios (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
Enabling this parameter will disable netbios support in Samba. Netbios is the only available form of browsing in all windows versions except for 2000 and XP.<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 0.00em;">
&#160;</div>
<b>Note</b><div style="height: 0.00em;">
&#160;</div>
<div style="height: 0.00em;">
&#160;</div>
Clients that only support netbios won't be able to see your samba server when netbios support is disabled.<div style="height: 0.50em;">
&#160;</div>
</div>
Default:  <i></i><i>disable netbios</i><i> = </i><i>no</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
disable spoolss (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
Enabling this parameter will disable Samba's support for the SPOOLSS set of MS-RPC's and will yield identical behavior as Samba 2.0.x. Windows NT/2000 clients will downgrade to using Lanman style printing commands. Windows 9x/ME will be unaffected by the parameter. However, this will also disable the ability to upload printer drivers to a Samba server via the Windows NT Add Printer Wizard or by using the NT printer properties dialog window. It will also disable the capability of Windows NT/2000 clients to download print drivers from the Samba host upon demand.  <i>Be very careful about enabling this parameter.</i><div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>disable spoolss</i><i> = </i><i>no</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
display charset (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
Specifies the charset that samba will use to print messages to stdout and stderr. The default value is &quot;LOCALE&quot;, which means automatically set, depending on the current locale. The value should generally be the same as the value of the parameter  <b>unix charset</b>.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>display charset</i><i> = </i><i>&quot;LOCALE&quot; or &quot;ASCII&quot; (depending on the system)</i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>display charset</i><i> = </i><i>UTF8</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
dmapi support (S)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameter specifies whether Samba should use DMAPI to determine whether a file is offline or not. This would typically be used in conjunction with a hierarchical storage system that automatically migrates files to tape.<div style="height: 1.00em;">
&#160;</div>
Note that Samba infers the status of a file by examining the events that a DMAPI application has registered interest in. This heuristic is satisfactory for a number of hierarchical storage systems, but there may be system for which it will fail. In this case, Samba may erroneously report files to be offline.<div style="height: 1.00em;">
&#160;</div>
This parameter is only available if a supported DMAPI implementation was found at compilation time. It will only be used if DMAPI is found to enabled on the system at run time.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>dmapi support</i><i> = </i><i>no</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
dns proxy (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
Specifies that  <b>nmbd</b>(8) when acting as a WINS server and finding that a NetBIOS name has not been registered, should treat the NetBIOS name word-for-word as a DNS name and do a lookup with the DNS server for that name on behalf of the name-querying client.<div style="height: 1.00em;">
&#160;</div>
Note that the maximum length for a NetBIOS name is 15 characters, so the DNS name (or DNS alias) can likewise only be 15 characters, maximum.<div style="height: 1.00em;">
&#160;</div>
nmbd spawns a second copy of itself to do the DNS name lookup requests, as doing a name lookup is a blocking action.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>dns proxy</i><i> = </i><i>yes</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
domain logons (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
If set to  <b>yes</b>, the Samba server will provide the netlogon service for Windows 9X network logons for the  <b>workgroup</b> it is in. This will also cause the Samba server to act as a domain controller for NT4 style domain services. For more details on setting up this feature see the Domain Control chapter of the Samba HOWTO Collection.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>domain logons</i><i> = </i><i>no</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
domain master (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
Tell  <b>smbd</b>(8) to enable WAN-wide browse list collation. Setting this option causes nmbd to claim a special domain specific NetBIOS name that identifies it as a domain master browser for its given  <b>workgroup</b>. Local master browsers in the same  <b>workgroup</b> on broadcast-isolated subnets will give this nmbd their local browse lists, and then ask  <b>smbd</b>(8) for a complete copy of the browse list for the whole wide area network. Browser clients will then contact their local master browser, and will receive the domain-wide browse list, instead of just the list for their broadcast-isolated subnet.<div style="height: 1.00em;">
&#160;</div>
Note that Windows NT Primary Domain Controllers expect to be able to claim this  <b>workgroup</b> specific special NetBIOS name that identifies them as domain master browsers for that  <b>workgroup</b> by default (i.e. there is no way to prevent a Windows NT PDC from attempting to do this). This means that if this parameter is set and nmbd claims the special name for a  <b>workgroup</b> before a Windows NT PDC is able to do so then cross subnet browsing will behave strangely and may fail.<div style="height: 1.00em;">
&#160;</div>
If  <b>domain logons = yes</b>, then the default behavior is to enable the  <b>domain master</b> parameter. If  <b>domain logons</b> is not enabled (the default setting), then neither will  <b>domain master</b> be enabled by default.<div style="height: 1.00em;">
&#160;</div>
When  <b>domain logons = Yes</b> the default setting for this parameter is Yes, with the result that Samba will be a PDC. If  <b>domain master = No</b>, Samba will function as a BDC. In general, this parameter should be set to 'No' only on a BDC.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>domain master</i><i> = </i><i>auto</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
dont descend (S)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
There are certain directories on some systems (e.g., the /proc tree under Linux) that are either not of interest to clients or are infinitely deep (recursive). This parameter allows you to specify a comma-delimited list of directories that the server should always show as empty.<div style="height: 1.00em;">
&#160;</div>
Note that Samba can be very fussy about the exact format of the &quot;dont descend&quot; entries. For example you may need ./proc instead of just /proc. Experimentation is the best policy :-)<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>dont descend</i><i> = </i><i></i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>dont descend</i><i> = </i><i>/proc,/dev</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
dos charset (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
DOS SMB clients assume the server has the same charset as they do. This option specifies which charset Samba should talk to DOS clients.<div style="height: 1.00em;">
&#160;</div>
The default depends on which charsets you have installed. Samba tries to use charset 850 but falls back to ASCII in case it is not available. Run  <b>testparm</b>(1) to check the default on your system.<div style="height: 1.00em;">
&#160;</div>
<i>No default</i></div>
<div style="height: 1.00em;">
&#160;</div>
dos filemode (S)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
The default behavior in Samba is to provide UNIX-like behavior where only the owner of a file/directory is able to change the permissions on it. However, this behavior is often confusing to DOS/Windows users. Enabling this parameter allows a user who has write access to the file (by whatever means, including an ACL permission) to modify the permissions (including ACL) on it. Note that a user belonging to the group owning the file will not be allowed to change permissions if the group is only granted read access. Ownership of the file/directory may also be changed. Note that using the VFS modules acl_xattr or acl_tdb which store native Windows as meta-data will automatically turn this option on for any share for which they are loaded, as they require this option to emulate Windows ACLs correctly.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>dos filemode</i><i> = </i><i>no</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
dos filetime resolution (S)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
Under the DOS and Windows FAT filesystem, the finest granularity on time resolution is two seconds. Setting this parameter for a share causes Samba to round the reported time down to the nearest two second boundary when a query call that requires one second resolution is made to  <b>smbd</b>(8).<div style="height: 1.00em;">
&#160;</div>
This option is mainly used as a compatibility option for Visual C++ when used against Samba shares. If oplocks are enabled on a share, Visual C++ uses two different time reading calls to check if a file has changed since it was last read. One of these calls uses a one-second granularity, the other uses a two second granularity. As the two second call rounds any odd second down, then if the file has a timestamp of an odd number of seconds then the two timestamps will not match and Visual C++ will keep reporting the file has changed. Setting this option causes the two timestamps to match, and Visual C++ is happy.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>dos filetime resolution</i><i> = </i><i>no</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
dos filetimes (S)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
Under DOS and Windows, if a user can write to a file they can change the timestamp on it. Under POSIX semantics, only the owner of the file or root may change the timestamp. By default, Samba emulates the DOS semantics and allows to change the timestamp on a file if the user smbd is acting on behalf has write permissions. Due to changes in Microsoft Office 2000 and beyond, the default for this parameter has been changed from &quot;no&quot; to &quot;yes&quot; in Samba 3.0.14 and above. Microsoft Excel will display dialog box warnings about the file being changed by another user if this parameter is not set to &quot;yes&quot; and files are being shared between users.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>dos filetimes</i><i> = </i><i>yes</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
ea support (S)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This boolean parameter controls whether  <b>smbd</b>(8) will allow clients to attempt to store OS/2 style Extended attributes on a share. In order to enable this parameter the underlying filesystem exported by the share must support extended attributes (such as provided on XFS and EXT3 on Linux, with the correct kernel patches). On Linux the filesystem must have been mounted with the mount option user_xattr in order for extended attributes to work, also extended attributes must be compiled into the Linux kernel.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>ea support</i><i> = </i><i>no</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
enable asu support (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
Hosts running the &quot;Advanced Server for Unix (ASU)&quot; product require some special accomodations such as creating a builtin [ADMIN$] share that only supports IPC connections. The has been the default behavior in smbd for many years. However, certain Microsoft applications such as the Print Migrator tool require that the remote server support an [ADMIN$} file share. Disabling this parameter allows for creating an [ADMIN$] file share in smb.conf.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>enable asu support</i><i> = </i><i>no</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
enable core files (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameter specifies whether core dumps should be written on internal exits. Normally set to  <b>yes</b>. You should never need to change this.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>enable core files</i><i> = </i><i>yes</i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>enable core files</i><i> = </i><i>no</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
enable privileges (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This deprecated parameter controls whether or not smbd will honor privileges assigned to specific SIDs via either net rpc rights or one of the Windows user and group manager tools. This parameter is enabled by default. It can be disabled to prevent members of the Domain Admins group from being able to assign privileges to users or groups which can then result in certain smbd operations running as root that would normally run under the context of the connected user.<div style="height: 1.00em;">
&#160;</div>
An example of how privileges can be used is to assign the right to join clients to a Samba controlled domain without providing root access to the server via smbd.<div style="height: 1.00em;">
&#160;</div>
Please read the extended description provided in the Samba HOWTO documentation.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>enable privileges</i><i> = </i><i>yes</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
enable spoolss (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
Inverted synonym for  <b>disable spoolss</b>.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>enable spoolss</i><i> = </i><i>yes</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
encrypt passwords (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This boolean controls whether encrypted passwords will be negotiated with the client. Note that Windows NT 4.0 SP3 and above and also Windows 98 will by default expect encrypted passwords unless a registry entry is changed. To use encrypted passwords in Samba see the chapter &quot;User Database&quot; in the Samba HOWTO Collection.<div style="height: 1.00em;">
&#160;</div>
MS Windows clients that expect Microsoft encrypted passwords and that do not have plain text password support enabled will be able to connect only to a Samba server that has encrypted password support enabled and for which the user accounts have a valid encrypted password. Refer to the smbpasswd command man page for information regarding the creation of encrypted passwords for user accounts.<div style="height: 1.00em;">
&#160;</div>
The use of plain text passwords is NOT advised as support for this feature is no longer maintained in Microsoft Windows products. If you want to use plain text passwords you must set this parameter to no.<div style="height: 1.00em;">
&#160;</div>
In order for encrypted passwords to work correctly  <b>smbd</b>(8) must either have access to a local  <b>smbpasswd</b>(5) file (see the  <b>smbpasswd</b>(8) program for information on how to set up and maintain this file), or set the  <b>security = [server|domain|ads]</b> parameter which causes smbd to authenticate against another server.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>encrypt passwords</i><i> = </i><i>yes</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
enhanced browsing (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This option enables a couple of enhancements to cross-subnet browse propagation that have been added in Samba but which are not standard in Microsoft implementations.<div style="height: 1.00em;">
&#160;</div>
The first enhancement to browse propagation consists of a regular wildcard query to a Samba WINS server for all Domain Master Browsers, followed by a browse synchronization with each of the returned DMBs. The second enhancement consists of a regular randomised browse synchronization with all currently known DMBs.<div style="height: 1.00em;">
&#160;</div>
You may wish to disable this option if you have a problem with empty workgroups not disappearing from browse lists. Due to the restrictions of the browse protocols, these enhancements can cause a empty workgroup to stay around forever which can be annoying.<div style="height: 1.00em;">
&#160;</div>
In general you should leave this option enabled as it makes cross-subnet browse propagation much more reliable.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>enhanced browsing</i><i> = </i><i>yes</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
enumports command (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
The concept of a &quot;port&quot; is fairly foreign to UNIX hosts. Under Windows NT/2000 print servers, a port is associated with a port monitor and generally takes the form of a local port (i.e. LPT1:, COM1:, FILE:) or a remote port (i.e. LPD Port Monitor, etc...). By default, Samba has only one port defined--<b>&quot;Samba Printer Port&quot;</b>. Under Windows NT/2000, all printers must have a valid port name. If you wish to have a list of ports displayed (smbd does not use a port name for anything) other than the default  <b>&quot;Samba Printer Port&quot;</b>, you can define  <i>enumports command</i> to point to a program which should generate a list of ports, one per line, to standard output. This listing will then be used in response to the level 1 and 2 EnumPorts() RPC.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>enumports command</i><i> = </i><i></i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>enumports command</i><i> = </i><i>/usr/bin/listports</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
eventlog list (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This option defines a list of log names that Samba will report to the Microsoft EventViewer utility. The listed eventlogs will be associated with tdb file on disk in the $(lockdir)/eventlog.<div style="height: 1.00em;">
&#160;</div>
The administrator must use an external process to parse the normal Unix logs such as /var/log/messages and write then entries to the eventlog tdb files. Refer to the eventlogadm(8) utility for how to write eventlog entries.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>eventlog list</i><i> = </i><i></i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>eventlog list</i><i> = </i><i>Security Application Syslog Apache</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
fake directory create times (S)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
NTFS and Windows VFAT file systems keep a create time for all files and directories. This is not the same as the ctime - status change time - that Unix keeps, so Samba by default reports the earliest of the various times Unix does keep. Setting this parameter for a share causes Samba to always report midnight 1-1-1980 as the create time for directories.<div style="height: 1.00em;">
&#160;</div>
This option is mainly used as a compatibility option for Visual C++ when used against Samba shares. Visual C++ generated makefiles have the object directory as a dependency for each object file, and a make rule to create the directory. Also, when NMAKE compares timestamps it uses the creation time when examining a directory. Thus the object directory will be created if it does not exist, but once it does exist it will always have an earlier timestamp than the object files it contains.<div style="height: 1.00em;">
&#160;</div>
However, Unix time semantics mean that the create time reported by Samba will be updated whenever a file is created or or deleted in the directory. NMAKE finds all object files in the object directory. The timestamp of the last one built is then compared to the timestamp of the object directory. If the directory's timestamp if newer, then all object files will be rebuilt. Enabling this option ensures directories always predate their contents and an NMAKE build will proceed as expected.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>fake directory create times</i><i> = </i><i>no</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
fake oplocks (S)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
Oplocks are the way that SMB clients get permission from a server to locally cache file operations. If a server grants an oplock (opportunistic lock) then the client is free to assume that it is the only one accessing the file and it will aggressively cache file data. With some oplock types the client may even cache file open/close operations. This can give enormous performance benefits.<div style="height: 1.00em;">
&#160;</div>
When you set fake oplocks = yes,  <b>smbd</b>(8) will always grant oplock requests no matter how many clients are using the file.<div style="height: 1.00em;">
&#160;</div>
It is generally much better to use the real  <b>oplocks</b> support rather than this parameter.<div style="height: 1.00em;">
&#160;</div>
If you enable this option on all read-only shares or shares that you know will only be accessed from one client at a time such as physically read-only media like CDROMs, you will see a big performance improvement on many operations. If you enable this option on shares where multiple clients may be accessing the files read-write at the same time you can get data corruption. Use this option carefully!<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>fake oplocks</i><i> = </i><i>no</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
follow symlinks (S)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameter allows the Samba administrator to stop  <b>smbd</b>(8) from following symbolic links in a particular share. Setting this parameter to  <b>no</b> prevents any file or directory that is a symbolic link from being followed (the user will get an error). This option is very useful to stop users from adding a symbolic link to /etc/passwd in their home directory for instance. However it will slow filename lookups down slightly.<div style="height: 1.00em;">
&#160;</div>
This option is enabled (i.e. smbd will follow symbolic links) by default.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>follow symlinks</i><i> = </i><i>yes</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
force create mode (S)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameter specifies a set of UNIX mode bit permissions that will  <i>always</i> be set on a file created by Samba. This is done by bitwise 'OR'ing these bits onto the mode bits of a file that is being created. The default for this parameter is (in octal) 000. The modes in this parameter are bitwise 'OR'ed onto the file mode after the mask set in the  <i>create mask</i> parameter is applied.<div style="height: 1.00em;">
&#160;</div>
The example below would force all newly created files to have read and execute permissions set for 'group' and 'other' as well as the read/write/execute bits set for the 'user'.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>force create mode</i><i> = </i><i>000</i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>force create mode</i><i> = </i><i>0755</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
force directory mode (S)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameter specifies a set of UNIX mode bit permissions that will  <i>always</i> be set on a directory created by Samba. This is done by bitwise 'OR'ing these bits onto the mode bits of a directory that is being created. The default for this parameter is (in octal) 0000 which will not add any extra permission bits to a created directory. This operation is done after the mode mask in the parameter  <i>directory mask</i> is applied.<div style="height: 1.00em;">
&#160;</div>
The example below would force all created directories to have read and execute permissions set for 'group' and 'other' as well as the read/write/execute bits set for the 'user'.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>force directory mode</i><i> = </i><i>000</i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>force directory mode</i><i> = </i><i>0755</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
force directory security mode (S)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameter controls what UNIX permission bits can be modified when a Windows NT client is manipulating the UNIX permission on a directory using the native NT security dialog box.<div style="height: 1.00em;">
&#160;</div>
This parameter is applied as a mask (OR'ed with) to the changed permission bits, thus forcing any bits in this mask that the user may have modified to be on. Make sure not to mix up this parameter with  <b>directory security mask</b>, which works in a similar manner to this one, but uses a logical AND instead of an OR.<div style="height: 1.00em;">
&#160;</div>
Essentially, this mask may be treated as a set of bits that, when modifying security on a directory, to will enable (1) any flags that are off (0) but which the mask has set to on (1).<div style="height: 1.00em;">
&#160;</div>
If not set explicitly this parameter is 0000, which allows a user to modify all the user/group/world permissions on a directory without restrictions.<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 0.00em;">
&#160;</div>
<b>Note</b><div style="height: 0.00em;">
&#160;</div>
<div style="height: 0.00em;">
&#160;</div>
Users who can access the Samba server through other means can easily bypass this restriction, so it is primarily useful for standalone &quot;appliance&quot; systems. Administrators of most normal systems will probably want to leave it set as 0000.<div style="height: 0.50em;">
&#160;</div>
</div>
Default:  <i></i><i>force directory security mode</i><i> = </i><i>0</i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>force directory security mode</i><i> = </i><i>700</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
group<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameter is a synonym for force group.</div>
<div style="height: 1.00em;">
&#160;</div>
force group (S)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This specifies a UNIX group name that will be assigned as the default primary group for all users connecting to this service. This is useful for sharing files by ensuring that all access to files on service will use the named group for their permissions checking. Thus, by assigning permissions for this group to the files and directories within this service the Samba administrator can restrict or allow sharing of these files.<div style="height: 1.00em;">
&#160;</div>
In Samba 2.0.5 and above this parameter has extended functionality in the following way. If the group name listed here has a '+' character prepended to it then the current user accessing the share only has the primary group default assigned to this group if they are already assigned as a member of that group. This allows an administrator to decide that only users who are already in a particular group will create files with group ownership set to that group. This gives a finer granularity of ownership assignment. For example, the setting force group = +sys means that only users who are already in group sys will have their default primary group assigned to sys when accessing this Samba share. All other users will retain their ordinary primary group.<div style="height: 1.00em;">
&#160;</div>
If the  <b>force user</b> parameter is also set the group specified in  <i>force group</i> will override the primary group set in  <i>force user</i>.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>force group</i><i> = </i><i></i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>force group</i><i> = </i><i>agroup</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
force printername (S)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
When printing from Windows NT (or later), each printer in smb.conf has two associated names which can be used by the client. The first is the sharename (or shortname) defined in smb.conf. This is the only printername available for use by Windows 9x clients. The second name associated with a printer can be seen when browsing to the &quot;Printers&quot; (or &quot;Printers and Faxes&quot;) folder on the Samba server. This is referred to simply as the printername (not to be confused with the  <i>printer name</i> option).<div style="height: 1.00em;">
&#160;</div>
When assigning a new driver to a printer on a remote Windows compatible print server such as Samba, the Windows client will rename the printer to match the driver name just uploaded. This can result in confusion for users when multiple printers are bound to the same driver. To prevent Samba from allowing the printer's printername to differ from the sharename defined in smb.conf, set  <i>force printername = yes</i>.<div style="height: 1.00em;">
&#160;</div>
Be aware that enabling this parameter may affect migrating printers from a Windows server to Samba since Windows has no way to force the sharename and printername to match.<div style="height: 1.00em;">
&#160;</div>
It is recommended that this parameter's value not be changed once the printer is in use by clients as this could cause a user not be able to delete printer connections from their local Printers folder.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>force printername</i><i> = </i><i>no</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
force security mode (S)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameter controls what UNIX permission bits can be modified when a Windows NT client is manipulating the UNIX permission on a file using the native NT security dialog box.<div style="height: 1.00em;">
&#160;</div>
This parameter is applied as a mask (OR'ed with) to the changed permission bits, thus forcing any bits in this mask that the user may have modified to be on. Make sure not to mix up this parameter with  <b>security mask</b>, which works similar like this one but uses logical AND instead of OR.<div style="height: 1.00em;">
&#160;</div>
Essentially, one bits in this mask may be treated as a set of bits that, when modifying security on a file, the user has always set to be on.<div style="height: 1.00em;">
&#160;</div>
If not set explicitly this parameter is set to 0, and allows a user to modify all the user/group/world permissions on a file, with no restrictions.<div style="height: 1.00em;">
&#160;</div>
<i> Note</i> that users who can access the Samba server through other means can easily bypass this restriction, so it is primarily useful for standalone &quot;appliance&quot; systems. Administrators of most normal systems will probably want to leave this set to 0000.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>force security mode</i><i> = </i><i>0</i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>force security mode</i><i> = </i><i>700</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
force unknown acl user (S)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
If this parameter is set, a Windows NT ACL that contains an unknown SID (security descriptor, or representation of a user or group id) as the owner or group owner of the file will be silently mapped into the current UNIX uid or gid of the currently connected user.<div style="height: 1.00em;">
&#160;</div>
This is designed to allow Windows NT clients to copy files and folders containing ACLs that were created locally on the client machine and contain users local to that machine only (no domain users) to be copied to a Samba server (usually with XCOPY /O) and have the unknown userid and groupid of the file owner map to the current connected user. This can only be fixed correctly when winbindd allows arbitrary mapping from any Windows NT SID to a UNIX uid or gid.<div style="height: 1.00em;">
&#160;</div>
Try using this parameter when XCOPY /O gives an ACCESS_DENIED error.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>force unknown acl user</i><i> = </i><i>no</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
force user (S)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This specifies a UNIX user name that will be assigned as the default user for all users connecting to this service. This is useful for sharing files. You should also use it carefully as using it incorrectly can cause security problems.<div style="height: 1.00em;">
&#160;</div>
This user name only gets used once a connection is established. Thus clients still need to connect as a valid user and supply a valid password. Once connected, all file operations will be performed as the &quot;forced user&quot;, no matter what username the client connected as. This can be very useful.<div style="height: 1.00em;">
&#160;</div>
In Samba 2.0.5 and above this parameter also causes the primary group of the forced user to be used as the primary group for all file activity. Prior to 2.0.5 the primary group was left as the primary group of the connecting user (this was a bug).<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>force user</i><i> = </i><i></i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>force user</i><i> = </i><i>auser</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
fstype (S)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameter allows the administrator to configure the string that specifies the type of filesystem a share is using that is reported by  <b>smbd</b>(8) when a client queries the filesystem type for a share. The default type is  <b>NTFS</b> for compatibility with Windows NT but this can be changed to other strings such as  <b>Samba</b> or  <b>FAT</b> if required.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>fstype</i><i> = </i><i>NTFS</i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>fstype</i><i> = </i><i>Samba</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
get quota command (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
The get quota command should only be used whenever there is no operating system API available from the OS that samba can use.<div style="height: 1.00em;">
&#160;</div>
This option is only available you have compiled Samba with the --with-sys-quotas option or on Linux with --with-quotas and a working quota api was found in the system.<div style="height: 1.00em;">
&#160;</div>
This parameter should specify the path to a script that queries the quota information for the specified user/group for the partition that the specified directory is on.<div style="height: 1.00em;">
&#160;</div>
Such a script should take 3 arguments:<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;directory</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;type of query</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;uid of user or gid of group</div>
<div style="height: 1.00em;">
&#160;</div>
</div>
The type of query can be one of :<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;1 - user quotas</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;2 - user default quotas (uid = -1)</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;3 - group quotas</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;4 - group default quotas (gid = -1)</div>
<div style="height: 1.00em;">
&#160;</div>
This script should print one line as output with spaces between the arguments. The arguments are:<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;Arg 1 - quota flags (0 = no quotas, 1 = quotas enabled, 2 = quotas enabled and enforced)</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;Arg 2 - number of currently used blocks</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;Arg 3 - the softlimit number of blocks</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;Arg 4 - the hardlimit number of blocks</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;Arg 5 - currently used number of inodes</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;Arg 6 - the softlimit number of inodes</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;Arg 7 - the hardlimit number of inodes</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;Arg 8(optional) - the number of bytes in a block(default is 1024)</div>
<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>get quota command</i><i> = </i><i></i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>get quota command</i><i> = </i><i>/usr/local/sbin/query_quota</i><i> </i><div style="height: 1.00em;">
&#160;</div>
getwd cache (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This is a tuning option. When this is enabled a caching algorithm will be used to reduce the time taken for getwd() calls. This can have a significant impact on performance, especially when the  <b>wide smbconfoptions</b> parameter is set to  <b>no</b>.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>getwd cache</i><i> = </i><i>yes</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
guest account (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This is a username which will be used for access to services which are specified as  <b>guest ok</b> (see below). Whatever privileges this user has will be available to any client connecting to the guest service. This user must exist in the password file, but does not require a valid login. The user account &quot;ftp&quot; is often a good choice for this parameter.<div style="height: 1.00em;">
&#160;</div>
On some systems the default guest account &quot;nobody&quot; may not be able to print. Use another account in this case. You should test this by trying to log in as your guest user (perhaps by using the su - command) and trying to print using the system print command such as lpr(1) or lp(1).<div style="height: 1.00em;">
&#160;</div>
This parameter does not accept % macros, because many parts of the system require this value to be constant for correct operation.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>guest account</i><i> = </i><i>nobody # default can be changed at compile-time</i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>guest account</i><i> = </i><i>ftp</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
public<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameter is a synonym for guest ok.</div>
<div style="height: 1.00em;">
&#160;</div>
guest ok (S)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
If this parameter is  <b>yes</b> for a service, then no password is required to connect to the service. Privileges will be those of the  <b>guest account</b>.<div style="height: 1.00em;">
&#160;</div>
This parameter nullifies the benefits of setting  <b>restrict anonymous = 2</b><div style="height: 1.00em;">
&#160;</div>
See the section below on  <b>security</b> for more information about this option.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>guest ok</i><i> = </i><i>no</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
only guest<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameter is a synonym for guest only.</div>
<div style="height: 1.00em;">
&#160;</div>
guest only (S)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
If this parameter is  <b>yes</b> for a service, then only guest connections to the service are permitted. This parameter will have no effect if  <b>guest ok</b> is not set for the service.<div style="height: 1.00em;">
&#160;</div>
See the section below on  <b>security</b> for more information about this option.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>guest only</i><i> = </i><i>no</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
hide dot files (S)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This is a boolean parameter that controls whether files starting with a dot appear as hidden files.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>hide dot files</i><i> = </i><i>yes</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
hide files (S)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This is a list of files or directories that are not visible but are accessible. The DOS 'hidden' attribute is applied to any files or directories that match.<div style="height: 1.00em;">
&#160;</div>
Each entry in the list must be separated by a '/', which allows spaces to be included in the entry. '*' and '?' can be used to specify multiple files or directories as in DOS wildcards.<div style="height: 1.00em;">
&#160;</div>
Each entry must be a Unix path, not a DOS path and must not include the Unix directory separator '/'.<div style="height: 1.00em;">
&#160;</div>
Note that the case sensitivity option is applicable in hiding files.<div style="height: 1.00em;">
&#160;</div>
Setting this parameter will affect the performance of Samba, as it will be forced to check all files and directories for a match as they are scanned.<div style="height: 1.00em;">
&#160;</div>
The example shown above is based on files that the Macintosh SMB client (DAVE) available from Thursby creates for internal use, and also still hides all files beginning with a dot.<div style="height: 1.00em;">
&#160;</div>
An example of us of this parameter is:<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
hide files = /.*/DesktopFolderDB/TrashFor%m/resource.frk/<br/>
</div>
<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>hide files</i><i> = </i><i> # no file are hidden</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
hide special files (S)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameter prevents clients from seeing special files such as sockets, devices and fifo's in directory listings.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>hide special files</i><i> = </i><i>no</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
hide unreadable (S)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameter prevents clients from seeing the existance of files that cannot be read. Defaults to off.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>hide unreadable</i><i> = </i><i>no</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
hide unwriteable files (S)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameter prevents clients from seeing the existance of files that cannot be written to. Defaults to off. Note that unwriteable directories are shown as usual.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>hide unwriteable files</i><i> = </i><i>no</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
homedir map (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
If  <b>nis homedir</b> is  <b>yes</b>, and  <b>smbd</b>(8) is also acting as a Win95/98  <i>logon server</i> then this parameter specifies the NIS (or YP) map from which the server for the user's home directory should be extracted. At present, only the Sun auto.home map format is understood. The form of the map is:<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
username server:/some/file/system<br/>
</div>
<div style="height: 1.00em;">
&#160;</div>
and the program will extract the servername from before the first ':'. There should probably be a better parsing system that copes with different map formats and also Amd (another automounter) maps.<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 0.00em;">
&#160;</div>
<b>Note</b><div style="height: 0.00em;">
&#160;</div>
<div style="height: 0.00em;">
&#160;</div>
A working NIS client is required on the system for this option to work.<div style="height: 0.50em;">
&#160;</div>
</div>
Default:  <i></i><i>homedir map</i><i> = </i><i></i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>homedir map</i><i> = </i><i>amd.homedir</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
host msdfs (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
If set to  <b>yes</b>, Samba will act as a Dfs server, and allow Dfs-aware clients to browse Dfs trees hosted on the server.<div style="height: 1.00em;">
&#160;</div>
See also the  <b>msdfs root</b> share level parameter. For more information on setting up a Dfs tree on Samba, refer to the MSFDS chapter in the book Samba3-HOWTO.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>host msdfs</i><i> = </i><i>yes</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
hostname lookups (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
Specifies whether samba should use (expensive) hostname lookups or use the ip addresses instead. An example place where hostname lookups are currently used is when checking the hosts deny and hosts allow.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>hostname lookups</i><i> = </i><i>no</i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>hostname lookups</i><i> = </i><i>yes</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
allow hosts<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameter is a synonym for hosts allow.</div>
<div style="height: 1.00em;">
&#160;</div>
hosts allow (S)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
A synonym for this parameter is  <b>allow hosts</b>.<div style="height: 1.00em;">
&#160;</div>
This parameter is a comma, space, or tab delimited set of hosts which are permitted to access a service.<div style="height: 1.00em;">
&#160;</div>
If specified in the [global] section then it will apply to all services, regardless of whether the individual service has a different setting.<div style="height: 1.00em;">
&#160;</div>
You can specify the hosts by name or IP number. For example, you could restrict access to only the hosts on a Class C subnet with something like allow hosts = 150.203.5.. The full syntax of the list is described in the man page hosts_access(5). Note that this man page may not be present on your system, so a brief description will be given here also.<div style="height: 1.00em;">
&#160;</div>
Note that the localhost address 127.0.0.1 will always be allowed access unless specifically denied by a  <b>hosts deny</b> option.<div style="height: 1.00em;">
&#160;</div>
You can also specify hosts by network/netmask pairs and by netgroup names if your system supports netgroups. The  <i>EXCEPT</i> keyword can also be used to limit a wildcard list. The following examples may provide some help:<div style="height: 1.00em;">
&#160;</div>
Example 1: allow all IPs in 150.203.*.*; except one<div style="height: 1.00em;">
&#160;</div>
hosts allow = 150.203. EXCEPT 150.203.6.66<div style="height: 1.00em;">
&#160;</div>
Example 2: allow hosts that match the given network/netmask<div style="height: 1.00em;">
&#160;</div>
hosts allow = 150.203.15.0/255.255.255.0<div style="height: 1.00em;">
&#160;</div>
Example 3: allow a couple of hosts<div style="height: 1.00em;">
&#160;</div>
hosts allow = lapland, arvidsjaur<div style="height: 1.00em;">
&#160;</div>
Example 4: allow only hosts in NIS netgroup &quot;foonet&quot;, but deny access from one particular host<div style="height: 1.00em;">
&#160;</div>
hosts allow = @foonet<div style="height: 1.00em;">
&#160;</div>
hosts deny = pirate<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 0.00em;">
&#160;</div>
<b>Note</b><div style="height: 0.00em;">
&#160;</div>
<div style="height: 0.00em;">
&#160;</div>
Note that access still requires suitable user-level passwords.<div style="height: 0.50em;">
&#160;</div>
</div>
See  <b>testparm</b>(1) for a way of testing your host access to see if it does what you expect.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>hosts allow</i><i> = </i><i> # none (i.e., all hosts permitted access)</i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>hosts allow</i><i> = </i><i>150.203.5. myhost.mynet.edu.au</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
deny hosts<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameter is a synonym for hosts deny.</div>
<div style="height: 1.00em;">
&#160;</div>
hosts deny (S)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
The opposite of  <i>hosts allow</i> - hosts listed here are  <i>NOT</i> permitted access to services unless the specific services have their own lists to override this one. Where the lists conflict, the  <i>allow</i> list takes precedence.<div style="height: 1.00em;">
&#160;</div>
In the event that it is necessary to deny all by default, use the keyword ALL (or the netmask 0.0.0.0/0) and then explicitly specify to the  <b>hosts allow = hosts allow</b> parameter those hosts that should be permitted access.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>hosts deny</i><i> = </i><i> # none (i.e., no hosts specifically excluded)</i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>hosts deny</i><i> = </i><i>150.203.4. badhost.mynet.edu.au</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
idmap backend (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
The idmap backend provides a plugin interface for Winbind to use varying backends to store SID/uid/gid mapping tables.<div style="height: 1.00em;">
&#160;</div>
This option specifies the default backend that is used when no special configuration set, but it is now deprecated in favour of the new spelling  <b>idmap config * : backend</b>.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>idmap backend</i><i> = </i><i>tdb</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
idmap cache time (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameter specifies the number of seconds that Winbind's idmap interface will cache positive SID/uid/gid query results.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>idmap cache time</i><i> = </i><i>604800 (one week)</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
idmap config (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
ID mapping in Samba is the mapping between Windows SIDs and Unix user and group IDs. This is performed by Winbindd with a configurable plugin interface. Samba's ID mapping is configured by options starting with the  <b>idmap config</b> prefix. An idmap option consists of the  <b>idmap config</b> prefix, followed by a domain name or the asterisk character (*), a colon, and the name of an idmap setting for the chosen domain.<div style="height: 1.00em;">
&#160;</div>
The idmap configuration is hence divided into groups, one group for each domain to be configured, and one group with the the asterisk instead of a proper domain name, which speifies the default configuration that is used to catch all domains that do not have an explicit idmap configuration of their own.<div style="height: 1.00em;">
&#160;</div>
There are three general options available:<div class="spacer">
</div>
backend = backend_name<div style="margin-left: 4.00ex;">
This specifies the name of the idmap plugin to use as the SID/uid/gid backend for this domain. The standard backends are tdb (<b>idmap_tdb</b>(8)), tdb2 (<b>idmap_tdb2</b>(8)), ldap (<b>idmap_ldap</b>(8)), , rid (<b>idmap_rid</b>(8)), , hash (<b>idmap_hash</b>(8)), , autorid (<b>idmap_autorid</b>(8)), , ad (<b>idmap_ad</b>(8)), , adex (<b>idmap_adex</b>(8)), , and nss. (<b>idmap_nss</b>(8)), The corresponding manual pages contain the details, but here is a summary.<div style="height: 1.00em;">
&#160;</div>
The first three of these create mappings of their own using internal unixid counters and store the mappings in a database. These are suitable for use in the default idmap configuration. The rid and hash backends use a pure algorithmic calculation to determine the unixid for a SID. The autorid module is a mixture of the tdb and rid backend. It creates ranges for each domain encountered and then uses the rid algorithm for each of these automatically configured domains individually. The ad and adex backends both use unix IDs stored in Active Directory via the standard schema extensions. The nss backend reverses the standard winbindd setup and gets the unixids via names from nsswitch which can be useful in an ldap setup.</div>
<div class="spacer">
</div>
range = low - high<div style="margin-left: 4.00ex;">
Defines the available matching uid and gid range for which the backend is authoritative. For allocating backends, this also defines the start and the end of the range for allocating new unid IDs.<div style="height: 1.00em;">
&#160;</div>
winbind uses this parameter to find the backend that is authoritative for a unix ID to SID mapping, so it must be set for each individually configured domain and for the default configuration. The configured ranges must be mutually disjoint.</div>
<div class="spacer">
</div>
read only = yes|no<div style="margin-left: 4.00ex;">
This option can be used to turn the writing backends tdb, tdb2, and ldap into read only mode. This can be useful e.g. in cases where a pre-filled database exists that should not be extended automatically.</div>
<div style="height: 1.00em;">
&#160;</div>
The following example illustrates how to configure the  <b>idmap_ad</b>(8) backend for the CORP domain and the  <b>idmap_tdb</b>(8) backend for all other domains. This configuration assumes that the admin of CORP assigns unix ids below 1000000 via the SFU extensions, and winbind is supposed to use the next million entries for its own mappings from trusted domains and for local groups for example.<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
	idmap config * : backend = tdb<br/>
	idmap config * : range = 1000000-1999999<div class="spacer">
</div>
<br/>
	idmap config CORP : backend  = ad<br/>
	idmap config CORP : range = 1000-999999<br/>
	<br/>
</div>
<div style="height: 1.00em;">
&#160;</div>
<i>No default</i></div>
<div style="height: 1.00em;">
&#160;</div>
winbind gid<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameter is a synonym for idmap gid.</div>
<div style="height: 1.00em;">
&#160;</div>
idmap gid (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
The idmap gid parameter specifies the range of group ids for the default idmap configuration. It is now deprecated in favour of  <b>idmap config * : range</b>.<div style="height: 1.00em;">
&#160;</div>
See the  <b>idmap config</b> option.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>idmap gid</i><i> = </i><i></i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>idmap gid</i><i> = </i><i>10000-20000</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
idmap negative cache time (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameter specifies the number of seconds that Winbind's idmap interface will cache negative SID/uid/gid query results.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>idmap negative cache time</i><i> = </i><i>120</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
winbind uid<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameter is a synonym for idmap uid.</div>
<div style="height: 1.00em;">
&#160;</div>
idmap uid (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
The idmap uid parameter specifies the range of user ids for the default idmap configuration. It is now deprecated in favour of  <b>idmap config * : range</b>.<div style="height: 1.00em;">
&#160;</div>
See the  <b>idmap config</b> option.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>idmap uid</i><i> = </i><i></i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>idmap uid</i><i> = </i><i>10000-20000</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
include (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This allows you to include one config file inside another. The file is included literally, as though typed in place.<div style="height: 1.00em;">
&#160;</div>
It takes the standard substitutions, except  <i>%u</i>,  <i>%P</i> and  <i>%S</i>.<div style="height: 1.00em;">
&#160;</div>
The parameter  <i>include = registry</i> has a special meaning: It does  <i>not</i> include a file named  <i>registry</i> from the current working directory, but instead reads the global configuration options from the registry. See the section on registry-based configuration for details. Note that this option automatically activates registry shares.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>include</i><i> = </i><i></i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>include</i><i> = </i><i>/usr/local/samba/lib/admin_smb.conf</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
inherit acls (S)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameter can be used to ensure that if default acls exist on parent directories, they are always honored when creating a new file or subdirectory in these parent directories. The default behavior is to use the unix mode specified when creating the directory. Enabling this option sets the unix mode to 0777, thus guaranteeing that default directory acls are propagated. Note that using the VFS modules acl_xattr or acl_tdb which store native Windows as meta-data will automatically turn this option on for any share for which they are loaded, as they require this option to emulate Windows ACLs correctly.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>inherit acls</i><i> = </i><i>no</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
inherit owner (S)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
The ownership of new files and directories is normally governed by effective uid of the connected user. This option allows the Samba administrator to specify that the ownership for new files and directories should be controlled by the ownership of the parent directory.<div style="height: 1.00em;">
&#160;</div>
Common scenarios where this behavior is useful is in implementing drop-boxes where users can create and edit files but not delete them and to ensure that newly create files in a user's roaming profile directory are actually owner by the user.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>inherit owner</i><i> = </i><i>no</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
inherit permissions (S)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
The permissions on new files and directories are normally governed by  <b>create mask</b>,  <b>directory mask</b>,  <b>force create mode</b> and  <b>force directory mode</b> but the boolean inherit permissions parameter overrides this.<div style="height: 1.00em;">
&#160;</div>
New directories inherit the mode of the parent directory, including bits such as setgid.<div style="height: 1.00em;">
&#160;</div>
New files inherit their read/write bits from the parent directory. Their execute bits continue to be determined by  <b>map archive</b>,  <b>map hidden</b> and  <b>map system</b> as usual.<div style="height: 1.00em;">
&#160;</div>
Note that the setuid bit is  <i>never</i> set via inheritance (the code explicitly prohibits this).<div style="height: 1.00em;">
&#160;</div>
This can be particularly useful on large systems with many users, perhaps several thousand, to allow a single [homes] share to be used flexibly by each user.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>inherit permissions</i><i> = </i><i>no</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
init logon delayed hosts (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameter takes a list of host names, addresses or networks for which the initial samlogon reply should be delayed (so other DCs get preferred by XP workstations if there are any).<div style="height: 1.00em;">
&#160;</div>
The length of the delay can be specified with the  <b>init logon delay</b> parameter.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>init logon delayed hosts</i><i> = </i><i></i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>init logon delayed hosts</i><i> = </i><i>150.203.5. myhost.mynet.de</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
init logon delay (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameter specifies a delay in milliseconds for the hosts configured for delayed initial samlogon with  <b>init logon delayed hosts</b>.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>init logon delay</i><i> = </i><i>100</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
interfaces (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This option allows you to override the default network interfaces list that Samba will use for browsing, name registration and other NetBIOS over TCP/IP (NBT) traffic. By default Samba will query the kernel for the list of all active interfaces and use any interfaces except 127.0.0.1 that are broadcast capable.<div style="height: 1.00em;">
&#160;</div>
The option takes a list of interface strings. Each string can be in any of the following forms:<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;a network interface name (such as eth0). This may include shell-like wildcards so eth* will match any interface starting with the substring &quot;eth&quot;</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;an IP address. In this case the netmask is determined from the list of interfaces obtained from the kernel</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;an IP/mask pair.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;a broadcast/mask pair.</div>
<div style="height: 1.00em;">
&#160;</div>
</div>
The &quot;mask&quot; parameters can either be a bit length (such as 24 for a C class network) or a full netmask in dotted decimal form.<div style="height: 1.00em;">
&#160;</div>
The &quot;IP&quot; parameters above can either be a full dotted decimal IP address or a hostname which will be looked up via the OS's normal hostname resolution mechanisms.<div style="height: 1.00em;">
&#160;</div>
By default Samba enables all active interfaces that are broadcast capable except the loopback adaptor (IP address 127.0.0.1).<div style="height: 1.00em;">
&#160;</div>
The example below configures three network interfaces corresponding to the eth0 device and IP addresses 192.168.2.10 and 192.168.3.10. The netmasks of the latter two interfaces would be set to 255.255.255.0.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>interfaces</i><i> = </i><i></i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>interfaces</i><i> = </i><i>eth0 192.168.2.10/24 192.168.3.10/255.255.255.0</i><i> </i><div style="height: 1.00em;">
&#160;</div>
invalid users (S)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This is a list of users that should not be allowed to login to this service. This is really a  <i>paranoid</i> check to absolutely ensure an improper setting does not breach your security.<div style="height: 1.00em;">
&#160;</div>
A name starting with a '@' is interpreted as an NIS netgroup first (if your system supports NIS), and then as a UNIX group if the name was not found in the NIS netgroup database.<div style="height: 1.00em;">
&#160;</div>
A name starting with '+' is interpreted only by looking in the UNIX group database via the NSS getgrnam() interface. A name starting with '&amp;' is interpreted only by looking in the NIS netgroup database (this requires NIS to be working on your system). The characters '+' and '&amp;' may be used at the start of the name in either order so the value  <i>+&amp;group</i> means check the UNIX group database, followed by the NIS netgroup database, and the value  <i>&amp;+group</i> means check the NIS netgroup database, followed by the UNIX group database (the same as the '@' prefix).<div style="height: 1.00em;">
&#160;</div>
The current servicename is substituted for  <i>%S</i>. This is useful in the [homes] section.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>invalid users</i><i> = </i><i> # no invalid users</i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>invalid users</i><i> = </i><i>root fred admin @wheel</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
iprint server (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameter is only applicable if  <b>printing</b> is set to  <b>iprint</b>.<div style="height: 1.00em;">
&#160;</div>
If set, this option overrides the ServerName option in the CUPS client.conf. This is necessary if you have virtual samba servers that connect to different CUPS daemons.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>iprint server</i><i> = </i><i>&quot;&quot;</i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>iprint server</i><i> = </i><i>MYCUPSSERVER</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
keepalive (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
The value of the parameter (an integer) represents the number of seconds between  <i>keepalive</i> packets. If this parameter is zero, no keepalive packets will be sent. Keepalive packets, if sent, allow the server to tell whether a client is still present and responding.<div style="height: 1.00em;">
&#160;</div>
Keepalives should, in general, not be needed if the socket has the SO_KEEPALIVE attribute set on it by default. (see  <b>socket options</b>). Basically you should only use this option if you strike difficulties.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>keepalive</i><i> = </i><i>300</i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>keepalive</i><i> = </i><i>600</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
kerberos method (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
Controls how kerberos tickets are verified.<div style="height: 1.00em;">
&#160;</div>
Valid options are:<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;secrets only - use only the secrets.tdb for ticket verification (default)</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;system keytab - use only the system keytab for ticket verification</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;dedicated keytab - use a dedicated keytab for ticket verification</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;secrets and keytab - use the secrets.tdb first, then the system keytab</div>
<div style="height: 1.00em;">
&#160;</div>
</div>
The major difference between &quot;system keytab&quot; and &quot;dedicated keytab&quot; is that the latter method relies on kerberos to find the correct keytab entry instead of filtering based on expected principals.<div style="height: 1.00em;">
&#160;</div>
When the kerberos method is in &quot;dedicated keytab&quot; mode,  <b>dedicated keytab file</b> must be set to specify the location of the keytab file.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>kerberos method</i><i> = </i><i>secrets only</i><i> </i><div style="height: 1.00em;">
&#160;</div>
kernel change notify (S)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameter specifies whether Samba should ask the kernel for change notifications in directories so that SMB clients can refresh whenever the data on the server changes.<div style="height: 1.00em;">
&#160;</div>
This parameter is only used when your kernel supports change notification to user programs using the inotify interface.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>kernel change notify</i><i> = </i><i>yes</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
kernel oplocks (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
For UNIXes that support kernel based  <b>oplocks</b> (currently only IRIX and the Linux 2.4 kernel), this parameter allows the use of them to be turned on or off.<div style="height: 1.00em;">
&#160;</div>
Kernel oplocks support allows Samba  <i>oplocks </i> to be broken whenever a local UNIX process or NFS operation accesses a file that  <b>smbd</b>(8) has oplocked. This allows complete data consistency between SMB/CIFS, NFS and local file access (and is a  <i>very</i> cool feature :-).<div style="height: 1.00em;">
&#160;</div>
This parameter defaults to  <b>on</b>, but is translated to a no-op on systems that no not have the necessary kernel support. You should never need to touch this parameter.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>kernel oplocks</i><i> = </i><i>yes</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
lanman auth (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameter determines whether or not  <b>smbd</b>(8) will attempt to authenticate users or permit password changes using the LANMAN password hash. If disabled, only clients which support NT password hashes (e.g. Windows NT/2000 clients, smbclient, but not Windows 95/98 or the MS DOS network client) will be able to connect to the Samba host.<div style="height: 1.00em;">
&#160;</div>
The LANMAN encrypted response is easily broken, due to its case-insensitive nature, and the choice of algorithm. Servers without Windows 95/98/ME or MS DOS clients are advised to disable this option.<div style="height: 1.00em;">
&#160;</div>
When this parameter is set to no this will also result in sambaLMPassword in Samba's passdb being blanked after the next password change. As a result of that lanman clients won't be able to authenticate, even if lanman auth is reenabled later on.<div style="height: 1.00em;">
&#160;</div>
Unlike the encrypt passwords option, this parameter cannot alter client behaviour, and the LANMAN response will still be sent over the network. See the client lanman auth to disable this for Samba's clients (such as smbclient)<div style="height: 1.00em;">
&#160;</div>
If this option, and ntlm auth are both disabled, then only NTLMv2 logins will be permited. Not all clients support NTLMv2, and most will require special configuration to use it.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>lanman auth</i><i> = </i><i>no</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
large readwrite (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameter determines whether or not  <b>smbd</b>(8) supports the new 64k streaming read and write variant SMB requests introduced with Windows 2000. Note that due to Windows 2000 client redirector bugs this requires Samba to be running on a 64-bit capable operating system such as IRIX, Solaris or a Linux 2.4 kernel. Can improve performance by 10% with Windows 2000 clients. Defaults to on. Not as tested as some other Samba code paths.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>large readwrite</i><i> = </i><i>yes</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
ldap admin dn (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
The  <b>ldap admin dn</b> defines the Distinguished Name (DN) name used by Samba to contact the ldap server when retreiving user account information. The  <b>ldap admin dn</b> is used in conjunction with the admin dn password stored in the private/secrets.tdb file. See the  <b>smbpasswd</b>(8) man page for more information on how to accomplish this.<div style="height: 1.00em;">
&#160;</div>
The  <b>ldap admin dn</b> requires a fully specified DN. The  <b>ldap suffix</b> is not appended to the  <b>ldap admin dn</b>.<div style="height: 1.00em;">
&#160;</div>
<i>No default</i></div>
<div style="height: 1.00em;">
&#160;</div>
ldap connection timeout (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameter tells the LDAP library calls which timeout in seconds they should honor during initial connection establishments to LDAP servers. It is very useful in failover scenarios in particular. If one or more LDAP servers are not reachable at all, we do not have to wait until TCP timeouts are over. This feature must be supported by your LDAP library.<div style="height: 1.00em;">
&#160;</div>
This parameter is different from  <b>ldap timeout</b> which affects operations on LDAP servers using an existing connection and not establishing an initial connection.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>ldap connection timeout</i><i> = </i><i>2</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
ldap debug level (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameter controls the debug level of the LDAP library calls. In the case of OpenLDAP, it is the same bit-field as understood by the server and documented in the  <b>slapd.conf</b>(5) manpage. A typical useful value will be  <i>1</i> for tracing function calls.<div style="height: 1.00em;">
&#160;</div>
The debug ouput from the LDAP libraries appears with the prefix [LDAP] in Samba's logging output. The level at which LDAP logging is printed is controlled by the parameter  <i>ldap debug threshold</i>.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>ldap debug level</i><i> = </i><i>0</i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>ldap debug level</i><i> = </i><i>1</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
ldap debug threshold (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameter controls the Samba debug level at which the ldap library debug output is printed in the Samba logs. See the description of  <i>ldap debug level</i> for details.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>ldap debug threshold</i><i> = </i><i>10</i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>ldap debug threshold</i><i> = </i><i>5</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
ldap delete dn (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameter specifies whether a delete operation in the ldapsam deletes the complete entry or only the attributes specific to Samba.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>ldap delete dn</i><i> = </i><i>no</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
ldap deref (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This option controls whether Samba should tell the LDAP library to use a certain alias dereferencing method. The default is  <i>auto</i>, which means that the default setting of the ldap client library will be kept. Other possible values are  <i>never</i>,  <i>finding</i>,  <i>searching</i> and  <i>always</i>. Grab your LDAP manual for more information.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>ldap deref</i><i> = </i><i>auto</i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>ldap deref</i><i> = </i><i>searching</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
ldap follow referral (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This option controls whether to follow LDAP referrals or not when searching for entries in the LDAP database. Possible values are  <i>on</i> to enable following referrals,  <i>off</i> to disable this, and  <i>auto</i>, to use the libldap default settings. libldap's choice of following referrals or not is set in /etc/openldap/ldap.conf with the REFERRALS parameter as documented in ldap.conf(5).<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>ldap follow referral</i><i> = </i><i>auto</i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>ldap follow referral</i><i> = </i><i>off</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
ldap group suffix (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameter specifies the suffix that is used for groups when these are added to the LDAP directory. If this parameter is unset, the value of  <b>ldap suffix</b> will be used instead. The suffix string is pre-pended to the  <b>ldap suffix</b> string so use a partial DN.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>ldap group suffix</i><i> = </i><i></i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>ldap group suffix</i><i> = </i><i>ou=Groups</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
ldap idmap suffix (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameters specifies the suffix that is used when storing idmap mappings. If this parameter is unset, the value of  <b>ldap suffix</b> will be used instead. The suffix string is pre-pended to the  <b>ldap suffix</b> string so use a partial DN.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>ldap idmap suffix</i><i> = </i><i></i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>ldap idmap suffix</i><i> = </i><i>ou=Idmap</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
ldap machine suffix (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
It specifies where machines should be added to the ldap tree. If this parameter is unset, the value of  <b>ldap suffix</b> will be used instead. The suffix string is pre-pended to the  <b>ldap suffix</b> string so use a partial DN.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>ldap machine suffix</i><i> = </i><i></i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>ldap machine suffix</i><i> = </i><i>ou=Computers</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
ldap page size (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameter specifies the number of entries per page.<div style="height: 1.00em;">
&#160;</div>
If the LDAP server supports paged results, clients can request subsets of search results (pages) instead of the entire list. This parameter specifies the size of these pages.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>ldap page size</i><i> = </i><i>1024</i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>ldap page size</i><i> = </i><i>512</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
ldap passwd sync (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This option is used to define whether or not Samba should sync the LDAP password with the NT and LM hashes for normal accounts (NOT for workstation, server or domain trusts) on a password change via SAMBA.<div style="height: 1.00em;">
&#160;</div>
The  <b>ldap passwd sync</b> can be set to one of three values:<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;<i>Yes</i> = Try to update the LDAP, NT and LM passwords and update the pwdLastSet time.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;<i>No</i> = Update NT and LM passwords and update the pwdLastSet time.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;<i>Only</i> = Only update the LDAP password and let the LDAP server do the rest.</div>
<div style="height: 1.00em;">
&#160;</div>
</div>
Default:  <i></i><i>ldap passwd sync</i><i> = </i><i>no</i><i> </i><div style="height: 1.00em;">
&#160;</div>
ldap replication sleep (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
When Samba is asked to write to a read-only LDAP replica, we are redirected to talk to the read-write master server. This server then replicates our changes back to the 'local' server, however the replication might take some seconds, especially over slow links. Certain client activities, particularly domain joins, can become confused by the 'success' that does not immediately change the LDAP back-end's data.<div style="height: 1.00em;">
&#160;</div>
This option simply causes Samba to wait a short time, to allow the LDAP server to catch up. If you have a particularly high-latency network, you may wish to time the LDAP replication with a network sniffer, and increase this value accordingly. Be aware that no checking is performed that the data has actually replicated.<div style="height: 1.00em;">
&#160;</div>
The value is specified in milliseconds, the maximum value is 5000 (5 seconds).<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>ldap replication sleep</i><i> = </i><i>1000</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
ldapsam:editposix (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
Editposix is an option that leverages ldapsam:trusted to make it simpler to manage a domain controller eliminating the need to set up custom scripts to add and manage the posix users and groups. This option will instead directly manipulate the ldap tree to create, remove and modify user and group entries. This option also requires a running winbindd as it is used to allocate new uids/gids on user/group creation. The allocation range must be therefore configured.<div style="height: 1.00em;">
&#160;</div>
To use this option, a basic ldap tree must be provided and the ldap suffix parameters must be properly configured. On virgin servers the default users and groups (Administrator, Guest, Domain Users, Domain Admins, Domain Guests) can be precreated with the command net sam provision. To run this command the ldap server must be running, Winindd must be running and the smb.conf ldap options must be properly configured. The typical ldap setup used with the  <b>ldapsam:trusted = yes</b> option is usually sufficient to use  <b>ldapsam:editposix = yes</b> as well.<div style="height: 1.00em;">
&#160;</div>
An example configuration can be the following:<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
	encrypt passwords = true<br/>
	passdb backend = ldapsam<div class="spacer">
</div>
<br/>
	ldapsam:trusted=yes<br/>
	ldapsam:editposix=yes<div class="spacer">
</div>
<br/>
	ldap admin dn = cn=admin,dc=samba,dc=org<br/>
	ldap delete dn = yes<br/>
	ldap group suffix = ou=groups<br/>
	ldap idmap suffix = ou=idmap<br/>
	ldap machine suffix = ou=computers<br/>
	ldap user suffix = ou=users<br/>
	ldap suffix = dc=samba,dc=org<div class="spacer">
</div>
<br/>
	idmap backend = ldap:&quot;ldap://localhost&quot;<div class="spacer">
</div>
<br/>
	idmap uid = 5000-50000<br/>
	idmap gid = 5000-50000<br/>
	<br/>
</div>
<div style="height: 1.00em;">
&#160;</div>
This configuration assumes a directory layout like described in the following ldif:<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
	dn: dc=samba,dc=org<br/>
	objectClass: top<br/>
	objectClass: dcObject<br/>
	objectClass: organization<br/>
	o: samba.org<br/>
	dc: samba<div class="spacer">
</div>
<br/>
	dn: cn=admin,dc=samba,dc=org<br/>
	objectClass: simpleSecurityObject<br/>
	objectClass: organizationalRole<br/>
	cn: admin<br/>
	description: LDAP administrator<br/>
	userPassword: secret<div class="spacer">
</div>
<br/>
	dn: ou=users,dc=samba,dc=org<br/>
	objectClass: top<br/>
	objectClass: organizationalUnit<br/>
	ou: users<div class="spacer">
</div>
<br/>
	dn: ou=groups,dc=samba,dc=org<br/>
	objectClass: top<br/>
	objectClass: organizationalUnit<br/>
	ou: groups<div class="spacer">
</div>
<br/>
	dn: ou=idmap,dc=samba,dc=org<br/>
	objectClass: top<br/>
	objectClass: organizationalUnit<br/>
	ou: idmap<div class="spacer">
</div>
<br/>
	dn: ou=computers,dc=samba,dc=org<br/>
	objectClass: top<br/>
	objectClass: organizationalUnit<br/>
	ou: computers<br/>
	<br/>
</div>
<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>ldapsam:editposix</i><i> = </i><i>no</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
ldapsam:trusted (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
By default, Samba as a Domain Controller with an LDAP backend needs to use the Unix-style NSS subsystem to access user and group information. Due to the way Unix stores user information in /etc/passwd and /etc/group this inevitably leads to inefficiencies. One important question a user needs to know is the list of groups he is member of. The plain UNIX model involves a complete enumeration of the file /etc/group and its NSS counterparts in LDAP. UNIX has optimized functions to enumerate group membership. Sadly, other functions that are used to deal with user and group attributes lack such optimization.<div style="height: 1.00em;">
&#160;</div>
To make Samba scale well in large environments, the  <b>ldapsam:trusted = yes</b> option assumes that the complete user and group database that is relevant to Samba is stored in LDAP with the standard posixAccount/posixGroup attributes. It further assumes that the Samba auxiliary object classes are stored together with the POSIX data in the same LDAP object. If these assumptions are met,  <b>ldapsam:trusted = yes</b> can be activated and Samba can bypass the NSS system to query user group memberships. Optimized LDAP queries can greatly speed up domain logon and administration tasks. Depending on the size of the LDAP database a factor of 100 or more for common queries is easily achieved.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>ldapsam:trusted</i><i> = </i><i>no</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
ldap ssl ads (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This option is used to define whether or not Samba should use SSL when connecting to the ldap server using  <i>ads</i> methods. Rpc methods are not affected by this parameter. Please note, that this parameter won't have any effect if  <b>ldap ssl</b> is set to  <i>no</i>.<div style="height: 1.00em;">
&#160;</div>
See smb.conf(5) for more information on  <b>ldap ssl</b>.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>ldap ssl ads</i><i> = </i><i>no</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
ldap ssl (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This option is used to define whether or not Samba should use SSL when connecting to the ldap server This is  <i>NOT</i> related to Samba's previous SSL support which was enabled by specifying the --with-ssl option to the configure script.<div style="height: 1.00em;">
&#160;</div>
LDAP connections should be secured where possible. This may be done setting  <i>either</i> this parameter to  <i>Start_tls</i>  <i>or</i> by specifying  <i>ldaps://</i> in the URL argument of  <b>passdb backend</b>.<div style="height: 1.00em;">
&#160;</div>
The  <b>ldap ssl</b> can be set to one of two values:<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;<i>Off</i> = Never use SSL when querying the directory.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;<i>start tls</i> = Use the LDAPv3 StartTLS extended operation (RFC2830) for communicating with the directory server.</div>
<div style="height: 1.00em;">
&#160;</div>
</div>
Please note that this parameter does only affect  <i>rpc</i> methods. To enable the LDAPv3 StartTLS extended operation (RFC2830) for  <i>ads</i>, set  <b>ldap ssl = yes</b>  <i>and</i>  <b>ldap ssl ads = yes</b>. See smb.conf(5) for more information on  <b>ldap ssl ads</b>.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>ldap ssl</i><i> = </i><i>start tls</i><i> </i><div style="height: 1.00em;">
&#160;</div>
ldap suffix (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
Specifies the base for all ldap suffixes and for storing the sambaDomain object.<div style="height: 1.00em;">
&#160;</div>
The ldap suffix will be appended to the values specified for the  <b>ldap user suffix</b>,  <b>ldap group suffix</b>,  <b>ldap machine suffix</b>, and the  <b>ldap idmap suffix</b>. Each of these should be given only a DN relative to the  <b>ldap suffix</b>.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>ldap suffix</i><i> = </i><i></i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>ldap suffix</i><i> = </i><i>dc=samba,dc=org</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
ldap timeout (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameter defines the number of seconds that Samba should use as timeout for LDAP operations.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>ldap timeout</i><i> = </i><i>15</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
ldap user suffix (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameter specifies where users are added to the tree. If this parameter is unset, the value of  <b>ldap suffix</b> will be used instead. The suffix string is pre-pended to the  <b>ldap suffix</b> string so use a partial DN.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>ldap user suffix</i><i> = </i><i></i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>ldap user suffix</i><i> = </i><i>ou=people</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
level2 oplocks (S)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameter controls whether Samba supports level2 (read-only) oplocks on a share.<div style="height: 1.00em;">
&#160;</div>
Level2, or read-only oplocks allow Windows NT clients that have an oplock on a file to downgrade from a read-write oplock to a read-only oplock once a second client opens the file (instead of releasing all oplocks on a second open, as in traditional, exclusive oplocks). This allows all openers of the file that support level2 oplocks to cache the file for read-ahead only (ie. they may not cache writes or lock requests) and increases performance for many accesses of files that are not commonly written (such as application .EXE files).<div style="height: 1.00em;">
&#160;</div>
Once one of the clients which have a read-only oplock writes to the file all clients are notified (no reply is needed or waited for) and told to break their oplocks to &quot;none&quot; and delete any read-ahead caches.<div style="height: 1.00em;">
&#160;</div>
It is recommended that this parameter be turned on to speed access to shared executables.<div style="height: 1.00em;">
&#160;</div>
For more discussions on level2 oplocks see the CIFS spec.<div style="height: 1.00em;">
&#160;</div>
Currently, if  <b>kernel oplocks</b> are supported then level2 oplocks are not granted (even if this parameter is set to  <b>yes</b>). Note also, the  <b>oplocks</b> parameter must be set to  <b>yes</b> on this share in order for this parameter to have any effect.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>level2 oplocks</i><i> = </i><i>yes</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
lm announce (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameter determines if  <b>nmbd</b>(8) will produce Lanman announce broadcasts that are needed by OS/2 clients in order for them to see the Samba server in their browse list. This parameter can have three values,  <b>yes</b>,  <b>no</b>, or  <b>auto</b>. The default is  <b>auto</b>. If set to  <b>no</b> Samba will never produce these broadcasts. If set to  <b>yes</b> Samba will produce Lanman announce broadcasts at a frequency set by the parameter  <b>lm interval</b>. If set to  <b>auto</b> Samba will not send Lanman announce broadcasts by default but will listen for them. If it hears such a broadcast on the wire it will then start sending them at a frequency set by the parameter  <b>lm interval</b>.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>lm announce</i><i> = </i><i>auto</i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>lm announce</i><i> = </i><i>yes</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
lm interval (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
If Samba is set to produce Lanman announce broadcasts needed by OS/2 clients (see the  <b>lm announce</b> parameter) then this parameter defines the frequency in seconds with which they will be made. If this is set to zero then no Lanman announcements will be made despite the setting of the  <b>lm announce</b> parameter.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>lm interval</i><i> = </i><i>60</i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>lm interval</i><i> = </i><i>120</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
load printers (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
A boolean variable that controls whether all printers in the printcap will be loaded for browsing by default. See the  <b>printers</b> section for more details.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>load printers</i><i> = </i><i>yes</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
local master (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This option allows  <b>nmbd</b>(8) to try and become a local master browser on a subnet. If set to  <b>no</b> then nmbd will not attempt to become a local master browser on a subnet and will also lose in all browsing elections. By default this value is set to  <b>yes</b>. Setting this value to  <b>yes</b> doesn't mean that Samba will  <i>become</i> the local master browser on a subnet, just that nmbd will  <i>participate</i> in elections for local master browser.<div style="height: 1.00em;">
&#160;</div>
Setting this value to  <b>no</b> will cause nmbd  <i>never</i> to become a local master browser.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>local master</i><i> = </i><i>yes</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
lock dir<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameter is a synonym for lock directory.</div>
<div style="height: 1.00em;">
&#160;</div>
lock directory (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This option specifies the directory where lock files will be placed. The lock files are used to implement the  <b>max connections</b> option.<div style="height: 1.00em;">
&#160;</div>
Note: This option can not be set inside registry configurations.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>lock directory</i><i> = </i><i>${prefix}/var/locks</i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>lock directory</i><i> = </i><i>/var/run/samba/locks</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
locking (S)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This controls whether or not locking will be performed by the server in response to lock requests from the client.<div style="height: 1.00em;">
&#160;</div>
If locking = no, all lock and unlock requests will appear to succeed and all lock queries will report that the file in question is available for locking.<div style="height: 1.00em;">
&#160;</div>
If locking = yes, real locking will be performed by the server.<div style="height: 1.00em;">
&#160;</div>
This option  <i>may</i> be useful for read-only filesystems which  <i>may</i> not need locking (such as CDROM drives), although setting this parameter of  <b>no</b> is not really recommended even in this case.<div style="height: 1.00em;">
&#160;</div>
Be careful about disabling locking either globally or in a specific service, as lack of locking may result in data corruption. You should never need to set this parameter.<div style="height: 1.00em;">
&#160;</div>
<i>No default</i></div>
<div style="height: 1.00em;">
&#160;</div>
lock spin count (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameter has been made inoperative in Samba 3.0.24. The functionality it contolled is now controlled by the parameter  <b>lock spin time</b>.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>lock spin count</i><i> = </i><i>0</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
lock spin time (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
The time in milliseconds that smbd should keep waiting to see if a failed lock request can be granted. This parameter has changed in default value from Samba 3.0.23 from 10 to 200. The associated  <b>lock spin count</b> parameter is no longer used in Samba 3.0.24. You should not need to change the value of this parameter.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>lock spin time</i><i> = </i><i>200</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
log file (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This option allows you to override the name of the Samba log file (also known as the debug file).<div style="height: 1.00em;">
&#160;</div>
This option takes the standard substitutions, allowing you to have separate log files for each user or machine.<div style="height: 1.00em;">
&#160;</div>
<i>No default</i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>log file</i><i> = </i><i>/usr/local/samba/var/log.%m</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
debuglevel<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameter is a synonym for log level.</div>
<div style="height: 1.00em;">
&#160;</div>
log level (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
The value of the parameter (a astring) allows the debug level (logging level) to be specified in the smb.conf file.<div style="height: 1.00em;">
&#160;</div>
This parameter has been extended since the 2.2.x series, now it allows to specify the debug level for multiple debug classes. This is to give greater flexibility in the configuration of the system. The following debug classes are currently implemented:<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;<i>all</i></div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;<i>tdb</i></div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;<i>printdrivers</i></div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;<i>lanman</i></div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;<i>smb</i></div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;<i>rpc_parse</i></div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;<i>rpc_srv</i></div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;<i>rpc_cli</i></div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;<i>passdb</i></div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;<i>sam</i></div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;<i>auth</i></div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;<i>winbind</i></div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;<i>vfs</i></div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;<i>idmap</i></div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;<i>quota</i></div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;<i>acls</i></div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;<i>locking</i></div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;<i>msdfs</i></div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;<i>dmapi</i></div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;<i>registry</i></div>
<div style="height: 1.00em;">
&#160;</div>
</div>
Default:  <i></i><i>log level</i><i> = </i><i>0</i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>log level</i><i> = </i><i>3 passdb:5 auth:10 winbind:2</i><i> </i><div style="height: 1.00em;">
&#160;</div>
logon drive (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameter specifies the local path to which the home directory will be connected (see  <b>logon home</b>) and is only used by NT Workstations.<div style="height: 1.00em;">
&#160;</div>
Note that this option is only useful if Samba is set up as a logon server.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>logon drive</i><i> = </i><i></i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>logon drive</i><i> = </i><i>h:</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
logon home (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameter specifies the home directory location when a Win95/98 or NT Workstation logs into a Samba PDC. It allows you to do<div style="height: 1.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
C:\&gt;<b>NET USE H: /HOME</b><div style="height: 1.00em;">
&#160;</div>
from a command prompt, for example.<div style="height: 1.00em;">
&#160;</div>
This option takes the standard substitutions, allowing you to have separate logon scripts for each user or machine.<div style="height: 1.00em;">
&#160;</div>
This parameter can be used with Win9X workstations to ensure that roaming profiles are stored in a subdirectory of the user's home directory. This is done in the following way:<div style="height: 1.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
logon home = \\%N\%U\profile<div style="height: 1.00em;">
&#160;</div>
This tells Samba to return the above string, with substitutions made when a client requests the info, generally in a NetUserGetInfo request. Win9X clients truncate the info to \\server\share when a user does net use /home but use the whole string when dealing with profiles.<div style="height: 1.00em;">
&#160;</div>
Note that in prior versions of Samba, the  <b>logon path</b> was returned rather than  <i>logon home</i>. This broke net use /home but allowed profiles outside the home directory. The current implementation is correct, and can be used for profiles if you use the above trick.<div style="height: 1.00em;">
&#160;</div>
Disable this feature by setting  <b>logon home = &quot;&quot;</b> - using the empty string.<div style="height: 1.00em;">
&#160;</div>
This option is only useful if Samba is set up as a logon server.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>logon home</i><i> = </i><i>\\%N\%U</i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>logon home</i><i> = </i><i>\\remote_smb_server\%U</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
logon path (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameter specifies the directory where roaming profiles (Desktop, NTuser.dat, etc) are stored. Contrary to previous versions of these manual pages, it has nothing to do with Win 9X roaming profiles. To find out how to handle roaming profiles for Win 9X system, see the  <b>logon home</b> parameter.<div style="height: 1.00em;">
&#160;</div>
This option takes the standard substitutions, allowing you to have separate logon scripts for each user or machine. It also specifies the directory from which the &quot;Application Data&quot;, desktop, start menu, network neighborhood, programs and other folders, and their contents, are loaded and displayed on your Windows NT client.<div style="height: 1.00em;">
&#160;</div>
The share and the path must be readable by the user for the preferences and directories to be loaded onto the Windows NT client. The share must be writeable when the user logs in for the first time, in order that the Windows NT client can create the NTuser.dat and other directories. Thereafter, the directories and any of the contents can, if required, be made read-only. It is not advisable that the NTuser.dat file be made read-only - rename it to NTuser.man to achieve the desired effect (a  <i>MAN</i>datory profile).<div style="height: 1.00em;">
&#160;</div>
Windows clients can sometimes maintain a connection to the [homes] share, even though there is no user logged in. Therefore, it is vital that the logon path does not include a reference to the homes share (i.e. setting this parameter to \\%N\homes\profile_path will cause problems).<div style="height: 1.00em;">
&#160;</div>
This option takes the standard substitutions, allowing you to have separate logon scripts for each user or machine.<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 0.00em;">
&#160;</div>
<b>Warning</b><div style="height: 0.00em;">
&#160;</div>
<div style="height: 0.00em;">
&#160;</div>
Do not quote the value. Setting this as &#8220;\\%N\profile\%U&#8221; will break profile handling. Where the tdbsam or ldapsam passdb backend is used, at the time the user account is created the value configured for this parameter is written to the passdb backend and that value will over-ride the parameter value present in the smb.conf file. Any error present in the passdb backend account record must be editted using the appropriate tool (pdbedit on the command-line, or any other locally provided system tool).<div style="height: 0.50em;">
&#160;</div>
</div>
Note that this option is only useful if Samba is set up as a domain controller.<div style="height: 1.00em;">
&#160;</div>
Disable the use of roaming profiles by setting the value of this parameter to the empty string. For example,  <b>logon path = &quot;&quot;</b>. Take note that even if the default setting in the smb.conf file is the empty string, any value specified in the user account settings in the passdb backend will over-ride the effect of setting this parameter to null. Disabling of all roaming profile use requires that the user account settings must also be blank.<div style="height: 1.00em;">
&#160;</div>
An example of use is:<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
logon path = \\PROFILESERVER\PROFILE\%U<br/>
</div>
<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>logon path</i><i> = </i><i>\\%N\%U\profile</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
logon script (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameter specifies the batch file (.bat) or NT command file (.cmd) to be downloaded and run on a machine when a user successfully logs in. The file must contain the DOS style CR/LF line endings. Using a DOS-style editor to create the file is recommended.<div style="height: 1.00em;">
&#160;</div>
The script must be a relative path to the  <i>[netlogon]</i> service. If the [netlogon] service specifies a  <b>path</b> of /usr/local/samba/netlogon, and  <b>logon script = STARTUP.BAT</b>, then the file that will be downloaded is:<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
	/usr/local/samba/netlogon/STARTUP.BAT<br/>
</div>
<div style="height: 1.00em;">
&#160;</div>
The contents of the batch file are entirely your choice. A suggested command would be to add NET TIME \\SERVER /SET /YES, to force every machine to synchronize clocks with the same time server. Another use would be to add NET USE U: \\SERVER\UTILS for commonly used utilities, or<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
<b>NET USE Q: \\SERVER\ISO9001_QA</b><br/>
</div>
<div style="height: 1.00em;">
&#160;</div>
for example.<div style="height: 1.00em;">
&#160;</div>
Note that it is particularly important not to allow write access to the [netlogon] share, or to grant users write permission on the batch files in a secure environment, as this would allow the batch files to be arbitrarily modified and security to be breached.<div style="height: 1.00em;">
&#160;</div>
This option takes the standard substitutions, allowing you to have separate logon scripts for each user or machine.<div style="height: 1.00em;">
&#160;</div>
This option is only useful if Samba is set up as a logon server.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>logon script</i><i> = </i><i></i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>logon script</i><i> = </i><i>scripts\%U.bat</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
log writeable files on exit (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
When the network connection between a CIFS client and Samba dies, Samba has no option but to simply shut down the server side of the network connection. If this happens, there is a risk of data corruption because the Windows client did not complete all write operations that the Windows application requested. Setting this option to &quot;yes&quot; makes smbd log with a level 0 message a list of all files that have been opened for writing when the network connection died. Those are the files that are potentially corrupted. It is meant as an aid for the administrator to give him a list of files to do consistency checks on.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>log writeable files on exit</i><i> = </i><i>no</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
lppause command (S)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameter specifies the command to be executed on the server host in order to stop printing or spooling a specific print job.<div style="height: 1.00em;">
&#160;</div>
This command should be a program or script which takes a printer name and job number to pause the print job. One way of implementing this is by using job priorities, where jobs having a too low priority won't be sent to the printer.<div style="height: 1.00em;">
&#160;</div>
If a  <i>%p</i> is given then the printer name is put in its place. A  <i>%j</i> is replaced with the job number (an integer). On HPUX (see  <i>printing=hpux </i>), if the  <i>-p%p</i> option is added to the lpq command, the job will show up with the correct status, i.e. if the job priority is lower than the set fence priority it will have the PAUSED status, whereas if the priority is equal or higher it will have the SPOOLED or PRINTING status.<div style="height: 1.00em;">
&#160;</div>
Note that it is good practice to include the absolute path in the lppause command as the PATH may not be available to the server.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>lppause command</i><i> = </i><i> # Currently no default value is given to this string, unless the value of the </i><b>printing</b> parameter is <b>SYSV</b>, in which case the default is : lp -i %p-%j -H hold or if the value of the <i>printing</i> parameter is <b>SOFTQ</b>, then the default is: qstat -s -j%j -h. <i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>lppause command</i><i> = </i><i>/usr/bin/lpalt %p-%j -p0</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
lpq cache time (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This controls how long lpq info will be cached for to prevent the lpq command being called too often. A separate cache is kept for each variation of the lpq command used by the system, so if you use different lpq commands for different users then they won't share cache information.<div style="height: 1.00em;">
&#160;</div>
The cache files are stored in /tmp/lpq.xxxx where xxxx is a hash of the lpq command in use.<div style="height: 1.00em;">
&#160;</div>
The default is 30 seconds, meaning that the cached results of a previous identical lpq command will be used if the cached data is less than 30 seconds old. A large value may be advisable if your lpq command is very slow.<div style="height: 1.00em;">
&#160;</div>
A value of 0 will disable caching completely.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>lpq cache time</i><i> = </i><i>30</i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>lpq cache time</i><i> = </i><i>10</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
lpq command (S)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameter specifies the command to be executed on the server host in order to obtain lpq-style printer status information.<div style="height: 1.00em;">
&#160;</div>
This command should be a program or script which takes a printer name as its only parameter and outputs printer status information.<div style="height: 1.00em;">
&#160;</div>
Currently nine styles of printer status information are supported; BSD, AIX, LPRNG, PLP, SYSV, HPUX, QNX, CUPS, and SOFTQ. This covers most UNIX systems. You control which type is expected using the  <i>printing =</i> option.<div style="height: 1.00em;">
&#160;</div>
Some clients (notably Windows for Workgroups) may not correctly send the connection number for the printer they are requesting status information about. To get around this, the server reports on the first printer service connected to by the client. This only happens if the connection number sent is invalid.<div style="height: 1.00em;">
&#160;</div>
If a  <i>%p</i> is given then the printer name is put in its place. Otherwise it is placed at the end of the command.<div style="height: 1.00em;">
&#160;</div>
Note that it is good practice to include the absolute path in the  <i>lpq command</i> as the  <b>$PATH </b> may not be available to the server. When compiled with the CUPS libraries, no  <i>lpq command</i> is needed because smbd will make a library call to obtain the print queue listing.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>lpq command</i><i> = </i><i></i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>lpq command</i><i> = </i><i>/usr/bin/lpq -P%p</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
lpresume command (S)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameter specifies the command to be executed on the server host in order to restart or continue printing or spooling a specific print job.<div style="height: 1.00em;">
&#160;</div>
This command should be a program or script which takes a printer name and job number to resume the print job. See also the  <b>lppause command</b> parameter.<div style="height: 1.00em;">
&#160;</div>
If a  <i>%p</i> is given then the printer name is put in its place. A  <i>%j</i> is replaced with the job number (an integer).<div style="height: 1.00em;">
&#160;</div>
Note that it is good practice to include the absolute path in the  <i>lpresume command</i> as the PATH may not be available to the server.<div style="height: 1.00em;">
&#160;</div>
See also the  <b>printing</b> parameter.<div style="height: 1.00em;">
&#160;</div>
Default: Currently no default value is given to this string, unless the value of the  <i>printing</i> parameter is  <b>SYSV</b>, in which case the default is:<div style="height: 1.00em;">
&#160;</div>
lp -i %p-%j -H resume<div style="height: 1.00em;">
&#160;</div>
or if the value of the  <i>printing</i> parameter is  <b>SOFTQ</b>, then the default is:<div style="height: 1.00em;">
&#160;</div>
qstat -s -j%j -r<div style="height: 1.00em;">
&#160;</div>
<i>No default</i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>lpresume command</i><i> = </i><i>/usr/bin/lpalt %p-%j -p2</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
lprm command (S)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameter specifies the command to be executed on the server host in order to delete a print job.<div style="height: 1.00em;">
&#160;</div>
This command should be a program or script which takes a printer name and job number, and deletes the print job.<div style="height: 1.00em;">
&#160;</div>
If a  <i>%p</i> is given then the printer name is put in its place. A  <i>%j</i> is replaced with the job number (an integer).<div style="height: 1.00em;">
&#160;</div>
Note that it is good practice to include the absolute path in the  <i>lprm command</i> as the PATH may not be available to the server.<div style="height: 1.00em;">
&#160;</div>
Examples of use are:<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
lprm command = /usr/bin/lprm -P%p %j<div class="spacer">
</div>
<br/>
or<div class="spacer">
</div>
<br/>
lprm command = /usr/bin/cancel %p-%j<br/>
</div>
<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>lprm command</i><i> = </i><i> determined by printing parameter</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
machine password timeout (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
If a Samba server is a member of a Windows NT Domain (see the  <b>security = domain</b> parameter) then periodically a running smbd process will try and change the MACHINE ACCOUNT PASSWORD stored in the TDB called private/secrets.tdb. This parameter specifies how often this password will be changed, in seconds. The default is one week (expressed in seconds), the same as a Windows NT Domain member server.<div style="height: 1.00em;">
&#160;</div>
See also  <b>smbpasswd</b>(8), and the  <b>security = domain</b> parameter.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>machine password timeout</i><i> = </i><i>604800</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
magic output (S)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameter specifies the name of a file which will contain output created by a magic script (see the  <b>magic script</b> parameter below).<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 0.00em;">
&#160;</div>
<b>Warning</b><div style="height: 0.00em;">
&#160;</div>
<div style="height: 0.00em;">
&#160;</div>
If two clients use the same  <i>magic script </i> in the same directory the output file content is undefined.<div style="height: 0.50em;">
&#160;</div>
</div>
Default:  <i></i><i>magic output</i><i> = </i><i>&lt;magic script name&gt;.out</i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>magic output</i><i> = </i><i>myfile.txt</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
magic script (S)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameter specifies the name of a file which, if opened, will be executed by the server when the file is closed. This allows a UNIX script to be sent to the Samba host and executed on behalf of the connected user.<div style="height: 1.00em;">
&#160;</div>
Scripts executed in this way will be deleted upon completion assuming that the user has the appropriate level of privilege and the file permissions allow the deletion.<div style="height: 1.00em;">
&#160;</div>
If the script generates output, output will be sent to the file specified by the  <b>magic output</b> parameter (see above).<div style="height: 1.00em;">
&#160;</div>
Note that some shells are unable to interpret scripts containing CR/LF instead of CR as the end-of-line marker. Magic scripts must be executable  <i>as is</i> on the host, which for some hosts and some shells will require filtering at the DOS end.<div style="height: 1.00em;">
&#160;</div>
Magic scripts are  <i>EXPERIMENTAL</i> and should  <i>NOT</i> be relied upon.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>magic script</i><i> = </i><i></i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>magic script</i><i> = </i><i>user.csh</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
mangled names (S)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This controls whether non-DOS names under UNIX should be mapped to DOS-compatible names (&quot;mangled&quot;) and made visible, or whether non-DOS names should simply be ignored.<div style="height: 1.00em;">
&#160;</div>
See the section on  <b>name mangling</b> for details on how to control the mangling process.<div style="height: 1.00em;">
&#160;</div>
If mangling is used then the mangling method is as follows:<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;The first (up to) five alphanumeric characters before the rightmost dot of the filename are preserved, forced to upper case, and appear as the first (up to) five characters of the mangled name.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;A tilde &quot;~&quot; is appended to the first part of the mangled name, followed by a two-character unique sequence, based on the original root name (i.e., the original filename minus its final extension). The final extension is included in the hash calculation only if it contains any upper case characters or is longer than three characters.<div style="height: 1.00em;">
&#160;</div>
Note that the character to use may be specified using the  <b>mangling char</b> option, if you don't like '~'.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;Files whose UNIX name begins with a dot will be presented as DOS hidden files. The mangled name will be created as for other filenames, but with the leading dot removed and &quot;___&quot; as its extension regardless of actual original extension (that's three underscores).</div>
<div style="height: 1.00em;">
&#160;</div>
</div>
The two-digit hash value consists of upper case alphanumeric characters.<div style="height: 1.00em;">
&#160;</div>
This algorithm can cause name collisions only if files in a directory share the same first five alphanumeric characters. The probability of such a clash is 1/1300.<div style="height: 1.00em;">
&#160;</div>
The name mangling (if enabled) allows a file to be copied between UNIX directories from Windows/DOS while retaining the long UNIX filename. UNIX files can be renamed to a new extension from Windows/DOS and will retain the same basename. Mangled names do not change between sessions.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>mangled names</i><i> = </i><i>yes</i><i> </i><div style="height: 1.00em;">
&#160;</div>
mangle prefix (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
controls the number of prefix characters from the original name used when generating the mangled names. A larger value will give a weaker hash and therefore more name collisions. The minimum value is 1 and the maximum value is 6.<div style="height: 1.00em;">
&#160;</div>
mangle prefix is effective only when mangling method is hash2.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>mangle prefix</i><i> = </i><i>1</i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>mangle prefix</i><i> = </i><i>4</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
mangling char (S)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This controls what character is used as the  <i>magic</i> character in  <b>name mangling</b>. The default is a '~' but this may interfere with some software. Use this option to set it to whatever you prefer. This is effective only when mangling method is hash.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>mangling char</i><i> = </i><i>~</i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>mangling char</i><i> = </i><i>^</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
mangling method (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
controls the algorithm used for the generating the mangled names. Can take two different values, &quot;hash&quot; and &quot;hash2&quot;. &quot;hash&quot; is the algorithm that was used used in Samba for many years and was the default in Samba 2.2.x &quot;hash2&quot; is now the default and is newer and considered a better algorithm (generates less collisions) in the names. Many Win32 applications store the mangled names and so changing to algorithms must not be done lightly as these applications may break unless reinstalled.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>mangling method</i><i> = </i><i>hash2</i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>mangling method</i><i> = </i><i>hash</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
map acl inherit (S)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This boolean parameter controls whether  <b>smbd</b>(8) will attempt to map the 'inherit' and 'protected' access control entry flags stored in Windows ACLs into an extended attribute called user.SAMBA_PAI. This parameter only takes effect if Samba is being run on a platform that supports extended attributes (Linux and IRIX so far) and allows the Windows 2000 ACL editor to correctly use inheritance with the Samba POSIX ACL mapping code.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>map acl inherit</i><i> = </i><i>no</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
map archive (S)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This controls whether the DOS archive attribute should be mapped to the UNIX owner execute bit. The DOS archive bit is set when a file has been modified since its last backup. One motivation for this option is to keep Samba/your PC from making any file it touches from becoming executable under UNIX. This can be quite annoying for shared source code, documents, etc...<div style="height: 1.00em;">
&#160;</div>
Note that this requires the  <b>create mask</b> parameter to be set such that owner execute bit is not masked out (i.e. it must include 100). See the parameter  <b>create mask</b> for details.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>map archive</i><i> = </i><i>yes</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
map hidden (S)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This controls whether DOS style hidden files should be mapped to the UNIX world execute bit.<div style="height: 1.00em;">
&#160;</div>
Note that this requires the  <b>create mask</b> to be set such that the world execute bit is not masked out (i.e. it must include 001). See the parameter  <b>create mask</b> for details.<div style="height: 1.00em;">
&#160;</div>
<i>No default</i></div>
<div style="height: 1.00em;">
&#160;</div>
map readonly (S)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This controls how the DOS read only attribute should be mapped from a UNIX filesystem.<div style="height: 1.00em;">
&#160;</div>
This parameter can take three different values, which tell  <b>smbd</b>(8) how to display the read only attribute on files, where either  <b>store dos attributes</b> is set to  <b>No</b>, or no extended attribute is present. If  <b>store dos attributes</b> is set to  <b>yes</b> then this parameter is  <i>ignored</i>. This is a new parameter introduced in Samba version 3.0.21.<div style="height: 1.00em;">
&#160;</div>
The three settings are :<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;<div style="height: 1.00em;">
&#160;</div>
<b>Yes</b> - The read only DOS attribute is mapped to the inverse of the user or owner write bit in the unix permission mode set. If the owner write bit is not set, the read only attribute is reported as being set on the file. If the read only DOS attribute is set, Samba sets the owner, group and others write bits to zero. Write bits set in an ACL are ignored by Samba. If the read only DOS attribute is unset, Samba simply sets the write bit of the owner to one.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;<div style="height: 1.00em;">
&#160;</div>
<b>Permissions</b> - The read only DOS attribute is mapped to the effective permissions of the connecting user, as evaluated by  <b>smbd</b>(8) by reading the unix permissions and POSIX ACL (if present). If the connecting user does not have permission to modify the file, the read only attribute is reported as being set on the file.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;<div style="height: 1.00em;">
&#160;</div>
<b>No</b> - The read only DOS attribute is unaffected by permissions, and can only be set by the  <b>store dos attributes</b> method. This may be useful for exporting mounted CDs.</div>
<div style="height: 1.00em;">
&#160;</div>
</div>
Default:  <i></i><i>map readonly</i><i> = </i><i>yes</i><i> </i><div style="height: 1.00em;">
&#160;</div>
map system (S)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This controls whether DOS style system files should be mapped to the UNIX group execute bit.<div style="height: 1.00em;">
&#160;</div>
Note that this requires the  <b>create mask</b> to be set such that the group execute bit is not masked out (i.e. it must include 010). See the parameter  <b>create mask</b> for details.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>map system</i><i> = </i><i>no</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
map to guest (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameter is only useful in  <b>SECURITY = security</b> modes other than  <i>security = share</i> and  <i>security = server</i> - i.e.  <b>user</b>, and  <b>domain</b>.<div style="height: 1.00em;">
&#160;</div>
This parameter can take four different values, which tell  <b>smbd</b>(8) what to do with user login requests that don't match a valid UNIX user in some way.<div style="height: 1.00em;">
&#160;</div>
The four settings are :<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;<b>Never</b> - Means user login requests with an invalid password are rejected. This is the default.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;<b>Bad User</b> - Means user logins with an invalid password are rejected, unless the username does not exist, in which case it is treated as a guest login and mapped into the  <b>guest account</b>.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;<b>Bad Password</b> - Means user logins with an invalid password are treated as a guest login and mapped into the  <b>guest account</b>. Note that this can cause problems as it means that any user incorrectly typing their password will be silently logged on as &quot;guest&quot; - and will not know the reason they cannot access files they think they should - there will have been no message given to them that they got their password wrong. Helpdesk services will  <i>hate</i> you if you set the  <i>map to guest</i> parameter this way :-).</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;<b>Bad Uid</b> - Is only applicable when Samba is configured in some type of domain mode security (security = {domain|ads}) and means that user logins which are successfully authenticated but which have no valid Unix user account (and smbd is unable to create one) should be mapped to the defined guest account. This was the default behavior of Samba 2.x releases. Note that if a member server is running winbindd, this option should never be required because the nss_winbind library will export the Windows domain users and groups to the underlying OS via the Name Service Switch interface.</div>
<div style="height: 1.00em;">
&#160;</div>
</div>
Note that this parameter is needed to set up &quot;Guest&quot; share services when using  <i>security</i> modes other than share and server. This is because in these modes the name of the resource being requested is  <i>not</i> sent to the server until after the server has successfully authenticated the client so the server cannot make authentication decisions at the correct time (connection to the share) for &quot;Guest&quot; shares. This parameter is not useful with  <i>security = server</i> as in this security mode no information is returned about whether a user logon failed due to a bad username or bad password, the same error is returned from a modern server in both cases.<div style="height: 1.00em;">
&#160;</div>
For people familiar with the older Samba releases, this parameter maps to the old compile-time setting of the  <b> GUEST_SESSSETUP</b> value in local.h.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>map to guest</i><i> = </i><i>Never</i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>map to guest</i><i> = </i><i>Bad User</i><i> </i><div style="height: 1.00em;">
&#160;</div>
map untrusted to domain (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
If a client connects to smbd using an untrusted domain name, such as BOGUS\user, smbd replaces the BOGUS domain with it's SAM name before attempting to authenticate that user. In the case where smbd is acting as a PDC this will be DOMAIN\user. In the case where smbd is acting as a domain member server or a standalone server this will be WORKSTATION\user.<div style="height: 1.00em;">
&#160;</div>
In previous versions of Samba (pre 3.4), if smbd was acting as a domain member server, the BOGUS domain name would instead be replaced by the primary domain which smbd was a member of. In this case authentication would be deferred off to a DC using the credentials DOMAIN\user.<div style="height: 1.00em;">
&#160;</div>
When this parameter is set to  <b>yes</b> smbd provides the legacy behavior of mapping untrusted domain names to the primary domain. When smbd is not acting as a domain member server, this parameter has no effect.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>map untrusted to domain</i><i> = </i><i>no</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
max connections (S)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This option allows the number of simultaneous connections to a service to be limited. If  <i>max connections</i> is greater than 0 then connections will be refused if this number of connections to the service are already open. A value of zero mean an unlimited number of connections may be made.<div style="height: 1.00em;">
&#160;</div>
Record lock files are used to implement this feature. The lock files will be stored in the directory specified by the  <b>lock directory</b> option.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>max connections</i><i> = </i><i>0</i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>max connections</i><i> = </i><i>10</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
max disk size (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This option allows you to put an upper limit on the apparent size of disks. If you set this option to 100 then all shares will appear to be not larger than 100 MB in size.<div style="height: 1.00em;">
&#160;</div>
Note that this option does not limit the amount of data you can put on the disk. In the above case you could still store much more than 100 MB on the disk, but if a client ever asks for the amount of free disk space or the total disk size then the result will be bounded by the amount specified in  <i>max disk size</i>.<div style="height: 1.00em;">
&#160;</div>
This option is primarily useful to work around bugs in some pieces of software that can't handle very large disks, particularly disks over 1GB in size.<div style="height: 1.00em;">
&#160;</div>
A  <i>max disk size</i> of 0 means no limit.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>max disk size</i><i> = </i><i>0</i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>max disk size</i><i> = </i><i>1000</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
max log size (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This option (an integer in kilobytes) specifies the max size the log file should grow to. Samba periodically checks the size and if it is exceeded it will rename the file, adding a .old extension.<div style="height: 1.00em;">
&#160;</div>
A size of 0 means no limit.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>max log size</i><i> = </i><i>5000</i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>max log size</i><i> = </i><i>1000</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
max mux (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This option controls the maximum number of outstanding simultaneous SMB operations that Samba tells the client it will allow. You should never need to set this parameter.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>max mux</i><i> = </i><i>50</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
max open files (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameter limits the maximum number of open files that one  <b>smbd</b>(8) file serving process may have open for a client at any one time. The This parameter can be set very high (16404) as Samba uses only one bit per unopened file. Setting this parameter lower than 16404 will cause Samba to complain and set this value back to the minimum of 16404, as Windows 7 depends on this number of open file handles being available.<div style="height: 1.00em;">
&#160;</div>
The limit of the number of open files is usually set by the UNIX per-process file descriptor limit rather than this parameter so you should never need to touch this parameter.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>max open files</i><i> = </i><i>16404</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
max print jobs (S)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameter limits the maximum number of jobs allowable in a Samba printer queue at any given moment. If this number is exceeded,  <b>smbd</b>(8) will remote &quot;Out of Space&quot; to the client.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>max print jobs</i><i> = </i><i>1000</i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>max print jobs</i><i> = </i><i>5000</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
protocol<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameter is a synonym for max protocol.</div>
<div style="height: 1.00em;">
&#160;</div>
max protocol (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
The value of the parameter (a string) is the highest protocol level that will be supported by the server.<div style="height: 1.00em;">
&#160;</div>
Possible values are :<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;<b>CORE</b>: Earliest version. No concept of user names.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;<b>COREPLUS</b>: Slight improvements on CORE for efficiency.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;<b>LANMAN1</b>: First  <i> modern</i> version of the protocol. Long filename support.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;<b>LANMAN2</b>: Updates to Lanman1 protocol.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;<b>NT1</b>: Current up to date version of the protocol. Used by Windows NT. Known as CIFS.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;<b>SMB2</b>: Re-implementation of the SMB protocol. Used by Windows Vista and newer.</div>
<div style="height: 1.00em;">
&#160;</div>
</div>
Normally this option should not be set as the automatic negotiation phase in the SMB protocol takes care of choosing the appropriate protocol.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>max protocol</i><i> = </i><i>NT1</i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>max protocol</i><i> = </i><i>LANMAN1</i><i> </i><div style="height: 1.00em;">
&#160;</div>
max reported print jobs (S)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameter limits the maximum number of jobs displayed in a port monitor for Samba printer queue at any given moment. If this number is exceeded, the excess jobs will not be shown. A value of zero means there is no limit on the number of print jobs reported.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>max reported print jobs</i><i> = </i><i>0</i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>max reported print jobs</i><i> = </i><i>1000</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
max smbd processes (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameter limits the maximum number of  <b>smbd</b>(8) processes concurrently running on a system and is intended as a stopgap to prevent degrading service to clients in the event that the server has insufficient resources to handle more than this number of connections. Remember that under normal operating conditions, each user will have an  <b>smbd</b>(8) associated with him or her to handle connections to all shares from a given host.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>max smbd processes</i><i> = </i><i>0</i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>max smbd processes</i><i> = </i><i>1000</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
max stat cache size (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameter limits the size in memory of any  <i>stat cache</i> being used to speed up case insensitive name mappings. It represents the number of kilobyte (1024) units the stat cache can use. A value of zero, meaning unlimited, is not advisable due to increased memory usage. You should not need to change this parameter.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>max stat cache size</i><i> = </i><i>256</i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>max stat cache size</i><i> = </i><i>100</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
max ttl (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This option tells  <b>nmbd</b>(8) what the default 'time to live' of NetBIOS names should be (in seconds) when nmbd is requesting a name using either a broadcast packet or from a WINS server. You should never need to change this parameter. The default is 3 days.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>max ttl</i><i> = </i><i>259200</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
max wins ttl (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This option tells  <b>smbd</b>(8) when acting as a WINS server ( <b>wins support = yes</b>) what the maximum 'time to live' of NetBIOS names that nmbd will grant will be (in seconds). You should never need to change this parameter. The default is 6 days (518400 seconds).<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>max wins ttl</i><i> = </i><i>518400</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
max xmit (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This option controls the maximum packet size that will be negotiated by Samba. The default is 16644, which matches the behavior of Windows 2000. A value below 2048 is likely to cause problems. You should never need to change this parameter from its default value.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>max xmit</i><i> = </i><i>16644</i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>max xmit</i><i> = </i><i>8192</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
message command (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This specifies what command to run when the server receives a WinPopup style message.<div style="height: 1.00em;">
&#160;</div>
This would normally be a command that would deliver the message somehow. How this is to be done is up to your imagination.<div style="height: 1.00em;">
&#160;</div>
An example is:<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
message command = csh -c 'xedit %s;rm %s' &amp;<br/>
</div>
<div style="height: 1.00em;">
&#160;</div>
This delivers the message using xedit, then removes it afterwards.  <i>NOTE THAT IT IS VERY IMPORTANT THAT THIS COMMAND RETURN IMMEDIATELY</i>. That's why I have the '&amp;' on the end. If it doesn't return immediately then your PCs may freeze when sending messages (they should recover after 30 seconds, hopefully).<div style="height: 1.00em;">
&#160;</div>
All messages are delivered as the global guest user. The command takes the standard substitutions, although  <i> %u</i> won't work ( <i>%U</i> may be better in this case).<div style="height: 1.00em;">
&#160;</div>
Apart from the standard substitutions, some additional ones apply. In particular:<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;<i>%s</i> = the filename containing the message.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;<i>%t</i> = the destination that the message was sent to (probably the server name).</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;<i>%f</i> = who the message is from.</div>
<div style="height: 1.00em;">
&#160;</div>
</div>
You could make this command send mail, or whatever else takes your fancy. Please let us know of any really interesting ideas you have.<div style="height: 1.00em;">
&#160;</div>
Here's a way of sending the messages as mail to root:<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
message command = /bin/mail -s 'message from %f on %m' root &lt; %s; rm %s<br/>
</div>
<div style="height: 1.00em;">
&#160;</div>
If you don't have a message command then the message won't be delivered and Samba will tell the sender there was an error. Unfortunately WfWg totally ignores the error code and carries on regardless, saying that the message was delivered.<div style="height: 1.00em;">
&#160;</div>
If you want to silently delete it then try:<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
message command = rm %s<br/>
</div>
<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>message command</i><i> = </i><i></i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>message command</i><i> = </i><i>csh -c 'xedit %s; rm %s' &amp;</i><i> </i><div style="height: 1.00em;">
&#160;</div>
min print space (S)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This sets the minimum amount of free disk space that must be available before a user will be able to spool a print job. It is specified in kilobytes. The default is 0, which means a user can always spool a print job.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>min print space</i><i> = </i><i>0</i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>min print space</i><i> = </i><i>2000</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
min protocol (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
The value of the parameter (a string) is the lowest SMB protocol dialect than Samba will support. Please refer to the  <b>max protocol</b> parameter for a list of valid protocol names and a brief description of each. You may also wish to refer to the C source code in source/smbd/negprot.c for a listing of known protocol dialects supported by clients.<div style="height: 1.00em;">
&#160;</div>
If you are viewing this parameter as a security measure, you should also refer to the  <b>lanman auth</b> parameter. Otherwise, you should never need to change this parameter.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>min protocol</i><i> = </i><i>CORE</i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>min protocol</i><i> = </i><i>NT1</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
min receivefile size (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This option changes the behavior of  <b>smbd</b>(8) when processing SMBwriteX calls. Any incoming SMBwriteX call on a non-signed SMB/CIFS connection greater than this value will not be processed in the normal way but will be passed to any underlying kernel recvfile or splice system call (if there is no such call Samba will emulate in user space). This allows zero-copy writes directly from network socket buffers into the filesystem buffer cache, if available. It may improve performance but user testing is recommended. If set to zero Samba processes SMBwriteX calls in the normal way. To enable POSIX large write support (SMB/CIFS writes up to 16Mb) this option must be nonzero. The maximum value is 128k. Values greater than 128k will be silently set to 128k.<div style="height: 1.00em;">
&#160;</div>
Note this option will have NO EFFECT if set on a SMB signed connection.<div style="height: 1.00em;">
&#160;</div>
The default is zero, which diables this option.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>min receivefile size</i><i> = </i><i>0</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
min wins ttl (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This option tells  <b>nmbd</b>(8) when acting as a WINS server ( <b>wins support = yes</b>) what the minimum 'time to live' of NetBIOS names that nmbd will grant will be (in seconds). You should never need to change this parameter. The default is 6 hours (21600 seconds).<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>min wins ttl</i><i> = </i><i>21600</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
msdfs proxy (S)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameter indicates that the share is a stand-in for another CIFS share whose location is specified by the value of the parameter. When clients attempt to connect to this share, they are redirected to the proxied share using the SMB-Dfs protocol.<div style="height: 1.00em;">
&#160;</div>
Only Dfs roots can act as proxy shares. Take a look at the  <b>msdfs root</b> and  <b>host msdfs</b> options to find out how to set up a Dfs root share.<div style="height: 1.00em;">
&#160;</div>
<i>No default</i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>msdfs proxy</i><i> = </i><i>\otherserver\someshare</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
msdfs root (S)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
If set to  <b>yes</b>, Samba treats the share as a Dfs root and allows clients to browse the distributed file system tree rooted at the share directory. Dfs links are specified in the share directory by symbolic links of the form msdfs:serverA\\shareA,serverB\\shareB and so on. For more information on setting up a Dfs tree on Samba, refer to the MSDFS chapter in the Samba3-HOWTO book.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>msdfs root</i><i> = </i><i>no</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
multicast dns register (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
If compiled with proper support for it, Samba will announce itself with multicast DNS services like for example provided by the Avahi daemon.<div style="height: 1.00em;">
&#160;</div>
This parameter allows disabling Samba to register itself.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>multicast dns register</i><i> = </i><i>yes</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
name cache timeout (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
Specifies the number of seconds it takes before entries in samba's hostname resolve cache time out. If the timeout is set to 0. the caching is disabled.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>name cache timeout</i><i> = </i><i>660</i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>name cache timeout</i><i> = </i><i>0</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
name resolve order (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This option is used by the programs in the Samba suite to determine what naming services to use and in what order to resolve host names to IP addresses. Its main purpose to is to control how netbios name resolution is performed. The option takes a space separated string of name resolution options.<div style="height: 1.00em;">
&#160;</div>
The options are: &quot;lmhosts&quot;, &quot;host&quot;, &quot;wins&quot; and &quot;bcast&quot;. They cause names to be resolved as follows:<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;<div style="height: 1.00em;">
&#160;</div>
<b>lmhosts</b> : Lookup an IP address in the Samba lmhosts file. If the line in lmhosts has no name type attached to the NetBIOS name (see the manpage for lmhosts for details) then any name type matches for lookup.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;<div style="height: 1.00em;">
&#160;</div>
<b>host</b> : Do a standard host name to IP address resolution, using the system /etc/hosts, NIS, or DNS lookups. This method of name resolution is operating system depended for instance on IRIX or Solaris this may be controlled by the /etc/nsswitch.conf file. Note that this method is used only if the NetBIOS name type being queried is the 0x20 (server) name type or 0x1c (domain controllers). The latter case is only useful for active directory domains and results in a DNS query for the SRV RR entry matching _ldap._tcp.domain.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;<b>wins</b> : Query a name with the IP address listed in the  <b>WINSSERVER</b> parameter. If no WINS server has been specified this method will be ignored.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;<b>bcast</b> : Do a broadcast on each of the known local interfaces listed in the  <b>interfaces</b> parameter. This is the least reliable of the name resolution methods as it depends on the target host being on a locally connected subnet.</div>
<div style="height: 1.00em;">
&#160;</div>
</div>
The example below will cause the local lmhosts file to be examined first, followed by a broadcast attempt, followed by a normal system hostname lookup.<div style="height: 1.00em;">
&#160;</div>
When Samba is functioning in ADS security mode (security = ads) it is advised to use following settings for  <i>name resolve order</i>:<div style="height: 1.00em;">
&#160;</div>
name resolve order = wins bcast<div style="height: 1.00em;">
&#160;</div>
DC lookups will still be done via DNS, but fallbacks to netbios names will not inundate your DNS servers with needless querys for DOMAIN&lt;0x1c&gt; lookups.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>name resolve order</i><i> = </i><i>lmhosts wins host bcast</i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>name resolve order</i><i> = </i><i>lmhosts bcast host</i><i> </i><div style="height: 1.00em;">
&#160;</div>
ncalrpc dir (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This directory will hold a series of named pipes to allow RPC over inter-process communication.<div style="height: 1.00em;">
&#160;</div>
. 	This will allow Samba and other unix processes to interact over DCE/RPC without using TCP/IP. Additionally a sub-directory 'np' has restricted permissions, and allows a trusted communication channel between Samba processes<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>ncalrpc dir</i><i> = </i><i>${prefix}/var/ncalrpc</i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>ncalrpc dir</i><i> = </i><i>/var/run/samba/ncalrpc</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
netbios aliases (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This is a list of NetBIOS names that nmbd will advertise as additional names by which the Samba server is known. This allows one machine to appear in browse lists under multiple names. If a machine is acting as a browse server or logon server none of these names will be advertised as either browse server or logon servers, only the primary name of the machine will be advertised with these capabilities.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>netbios aliases</i><i> = </i><i> # empty string (no additional names)</i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>netbios aliases</i><i> = </i><i>TEST TEST1 TEST2</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
netbios name (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This sets the NetBIOS name by which a Samba server is known. By default it is the same as the first component of the host's DNS name. If a machine is a browse server or logon server this name (or the first component of the hosts DNS name) will be the name that these services are advertised under.<div style="height: 1.00em;">
&#160;</div>
There is a bug in Samba-3 that breaks operation of browsing and access to shares if the netbios name is set to the literal name PIPE. To avoid this problem, do not name your Samba-3 server PIPE.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>netbios name</i><i> = </i><i> # machine DNS name</i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>netbios name</i><i> = </i><i>MYNAME</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
netbios scope (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This sets the NetBIOS scope that Samba will operate under. This should not be set unless every machine on your LAN also sets this value.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>netbios scope</i><i> = </i><i></i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
nis homedir (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
Get the home share server from a NIS map. For UNIX systems that use an automounter, the user's home directory will often be mounted on a workstation on demand from a remote server.<div style="height: 1.00em;">
&#160;</div>
When the Samba logon server is not the actual home directory server, but is mounting the home directories via NFS then two network hops would be required to access the users home directory if the logon server told the client to use itself as the SMB server for home directories (one over SMB and one over NFS). This can be very slow.<div style="height: 1.00em;">
&#160;</div>
This option allows Samba to return the home share as being on a different server to the logon server and as long as a Samba daemon is running on the home directory server, it will be mounted on the Samba client directly from the directory server. When Samba is returning the home share to the client, it will consult the NIS map specified in  <b>homedir map</b> and return the server listed there.<div style="height: 1.00em;">
&#160;</div>
Note that for this option to work there must be a working NIS system and the Samba server with this option must also be a logon server.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>nis homedir</i><i> = </i><i>no</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
nmbd bind explicit broadcast (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This option causes  <b>nmbd</b>(8) to explicitly bind to the broadcast address of the local subnets. This is needed to make nmbd work correctly in combination with the  <b>socket address</b> option. You should not need to unset this option.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>nmbd bind explicit broadcast</i><i> = </i><i>yes</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
nt acl support (S)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This boolean parameter controls whether  <b>smbd</b>(8) will attempt to map UNIX permissions into Windows NT access control lists. The UNIX permissions considered are the the traditional UNIX owner and group permissions, as well as POSIX ACLs set on any files or directories. This parameter was formally a global parameter in releases prior to 2.2.2.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>nt acl support</i><i> = </i><i>yes</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
ntlm auth (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameter determines whether or not  <b>smbd</b>(8) will attempt to authenticate users using the NTLM encrypted password response. If disabled, either the lanman password hash or an NTLMv2 response will need to be sent by the client.<div style="height: 1.00em;">
&#160;</div>
If this option, and lanman auth are both disabled, then only NTLMv2 logins will be permited. Not all clients support NTLMv2, and most will require special configuration to use it.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>ntlm auth</i><i> = </i><i>yes</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
nt pipe support (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This boolean parameter controls whether  <b>smbd</b>(8) will allow Windows NT clients to connect to the NT SMB specific  <b>IPC$</b> pipes. This is a developer debugging option and can be left alone.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>nt pipe support</i><i> = </i><i>yes</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
nt status support (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This boolean parameter controls whether  <b>smbd</b>(8) will negotiate NT specific status support with Windows NT/2k/XP clients. This is a developer debugging option and should be left alone. If this option is set to  <b>no</b> then Samba offers exactly the same DOS error codes that versions prior to Samba 2.2.3 reported.<div style="height: 1.00em;">
&#160;</div>
You should not need to ever disable this parameter.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>nt status support</i><i> = </i><i>yes</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
null passwords (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
Allow or disallow client access to accounts that have null passwords.<div style="height: 1.00em;">
&#160;</div>
See also  <b>smbpasswd</b>(5).<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>null passwords</i><i> = </i><i>no</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
obey pam restrictions (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
When Samba 3.0 is configured to enable PAM support (i.e. --with-pam), this parameter will control whether or not Samba should obey PAM's account and session management directives. The default behavior is to use PAM for clear text authentication only and to ignore any account or session management. Note that Samba always ignores PAM for authentication in the case of  <b>encrypt passwords = yes</b>. The reason is that PAM modules cannot support the challenge/response authentication mechanism needed in the presence of SMB password encryption.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>obey pam restrictions</i><i> = </i><i>no</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
only user (S)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This is a boolean option that controls whether connections with usernames not in the  <i>user</i> list will be allowed. By default this option is disabled so that a client can supply a username to be used by the server. Enabling this parameter will force the server to only use the login names from the  <i>user</i> list and is only really useful in  <b>security = share</b> level security.<div style="height: 1.00em;">
&#160;</div>
Note that this also means Samba won't try to deduce usernames from the service name. This can be annoying for the [homes] section. To get around this you could use user = %S which means your  <i>user</i> list will be just the service name, which for home directories is the name of the user.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>only user</i><i> = </i><i>no</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
oplock break wait time (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This is a tuning parameter added due to bugs in both Windows 9x and WinNT. If Samba responds to a client too quickly when that client issues an SMB that can cause an oplock break request, then the network client can fail and not respond to the break request. This tuning parameter (which is set in milliseconds) is the amount of time Samba will wait before sending an oplock break request to such (broken) clients.<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 0.00em;">
&#160;</div>
<b>Warning</b><div style="height: 0.00em;">
&#160;</div>
<div style="height: 0.00em;">
&#160;</div>
DO NOT CHANGE THIS PARAMETER UNLESS YOU HAVE READ AND UNDERSTOOD THE SAMBA OPLOCK CODE.<div style="height: 0.50em;">
&#160;</div>
</div>
Default:  <i></i><i>oplock break wait time</i><i> = </i><i>0</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
oplock contention limit (S)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This is a  <i>very</i> advanced  <b>smbd</b>(8) tuning option to improve the efficiency of the granting of oplocks under multiple client contention for the same file.<div style="height: 1.00em;">
&#160;</div>
In brief it specifies a number, which causes  <b>smbd</b>(8)not to grant an oplock even when requested if the approximate number of clients contending for an oplock on the same file goes over this limit. This causes smbd to behave in a similar way to Windows NT.<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 0.00em;">
&#160;</div>
<b>Warning</b><div style="height: 0.00em;">
&#160;</div>
<div style="height: 0.00em;">
&#160;</div>
DO NOT CHANGE THIS PARAMETER UNLESS YOU HAVE READ AND UNDERSTOOD THE SAMBA OPLOCK CODE.<div style="height: 0.50em;">
&#160;</div>
</div>
Default:  <i></i><i>oplock contention limit</i><i> = </i><i>2</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
oplocks (S)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This boolean option tells smbd whether to issue oplocks (opportunistic locks) to file open requests on this share. The oplock code can dramatically (approx. 30% or more) improve the speed of access to files on Samba servers. It allows the clients to aggressively cache files locally and you may want to disable this option for unreliable network environments (it is turned on by default in Windows NT Servers).<div style="height: 1.00em;">
&#160;</div>
Oplocks may be selectively turned off on certain files with a share. See the  <b>veto oplock files</b> parameter. On some systems oplocks are recognized by the underlying operating system. This allows data synchronization between all access to oplocked files, whether it be via Samba or NFS or a local UNIX process. See the  <b>kernel oplocks</b> parameter for details.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>oplocks</i><i> = </i><i>yes</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
os2 driver map (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
The parameter is used to define the absolute path to a file containing a mapping of Windows NT printer driver names to OS/2 printer driver names. The format is:<div style="height: 1.00em;">
&#160;</div>
&lt;nt driver name&gt; = &lt;os2 driver name&gt;.&lt;device name&gt;<div style="height: 1.00em;">
&#160;</div>
For example, a valid entry using the HP LaserJet 5 printer driver would appear as HP LaserJet 5L = LASERJET.HP LaserJet 5L.<div style="height: 1.00em;">
&#160;</div>
The need for the file is due to the printer driver namespace problem described in the chapter on Classical Printing in the Samba3-HOWTO book. For more details on OS/2 clients, please refer to chapter on other clients in the Samba3-HOWTO book.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>os2 driver map</i><i> = </i><i></i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
os level (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This integer value controls what level Samba advertises itself as for browse elections. The value of this parameter determines whether  <b>nmbd</b>(8) has a chance of becoming a local master browser for the  <b>workgroup</b> in the local broadcast area.<div style="height: 1.00em;">
&#160;</div>
<i> Note:</i> By default, Samba will win a local master browsing election over all Microsoft operating systems except a Windows NT 4.0/2000 Domain Controller. This means that a misconfigured Samba host can effectively isolate a subnet for browsing purposes. This parameter is largely auto-configured in the Samba-3 release series and it is seldom necessary to manually override the default setting. Please refer to the chapter on Network Browsing in the Samba-3 HOWTO document for further information regarding the use of this parameter.  <i>Note:</i> The maximum value for this parameter is 255. If you use higher values, counting will start at 0!<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>os level</i><i> = </i><i>20</i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>os level</i><i> = </i><i>65</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
pam password change (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
With the addition of better PAM support in Samba 2.2, this parameter, it is possible to use PAM's password change control flag for Samba. If enabled, then PAM will be used for password changes when requested by an SMB client instead of the program listed in  <b>passwd program</b>. It should be possible to enable this without changing your  <b>passwd chat</b> parameter for most setups.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>pam password change</i><i> = </i><i>no</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
panic action (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This is a Samba developer option that allows a system command to be called when either  <b>smbd</b>(8) or  <b>nmbd</b>(8) crashes. This is usually used to draw attention to the fact that a problem occurred.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>panic action</i><i> = </i><i></i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>panic action</i><i> = </i><i>&quot;/bin/sleep 90000&quot;</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
paranoid server security (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
Some version of NT 4.x allow non-guest users with a bad passowrd. When this option is enabled, samba will not use a broken NT 4.x server as password server, but instead complain to the logs and exit.<div style="height: 1.00em;">
&#160;</div>
Disabling this option prevents Samba from making this check, which involves deliberatly attempting a bad logon to the remote server.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>paranoid server security</i><i> = </i><i>yes</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
passdb backend (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This option allows the administrator to chose which backend will be used for storing user and possibly group information. This allows you to swap between different storage mechanisms without recompile.<div style="height: 1.00em;">
&#160;</div>
The parameter value is divided into two parts, the backend's name, and a 'location' string that has meaning only to that particular backed. These are separated by a : character.<div style="height: 1.00em;">
&#160;</div>
Available backends can include:<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;smbpasswd - The old plaintext passdb backend. Some Samba features will not work if this passdb backend is used. Takes a path to the smbpasswd file as an optional argument.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;tdbsam - The TDB based password storage backend. Takes a path to the TDB as an optional argument (defaults to passdb.tdb in the  <b>private dir</b> directory.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;ldapsam - The LDAP based passdb backend. Takes an LDAP URL as an optional argument (defaults to ldap://localhost)<div style="height: 1.00em;">
&#160;</div>
LDAP connections should be secured where possible. This may be done using either Start-TLS (see  <b>ldap ssl</b>) or by specifying  <i>ldaps://</i> in the URL argument.<div style="height: 1.00em;">
&#160;</div>
Multiple servers may also be specified in double-quotes. Whether multiple servers are supported or not and the exact syntax depends on the LDAP library you use.</div>
<div style="height: 1.00em;">
&#160;</div>
</div>
<div style="height: 1.00em;">
&#160;</div>
	Examples of use are:<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
passdb backend = tdbsam:/etc/samba/private/passdb.tdb <div class="spacer">
</div>
<br/>
or multi server LDAP URL with OpenLDAP library:<div class="spacer">
</div>
<br/>
passdb backend = ldapsam:&quot;ldap://ldap-1.example.com ldap://ldap-2.example.com&quot;<div class="spacer">
</div>
<br/>
or multi server LDAP URL with Netscape based LDAP library:<div class="spacer">
</div>
<br/>
passdb backend = ldapsam:&quot;ldap://ldap-1.example.com ldap-2.example.com&quot;<br/>
</div>
<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>passdb backend</i><i> = </i><i>tdbsam</i><i> </i><div style="height: 1.00em;">
&#160;</div>
passdb expand explicit (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameter controls whether Samba substitutes %-macros in the passdb fields if they are explicitly set. We used to expand macros here, but this turned out to be a bug because the Windows client can expand a variable %G_osver% in which %G would have been substituted by the user's primary group.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>passdb expand explicit</i><i> = </i><i>no</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
passwd chat debug (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This boolean specifies if the passwd chat script parameter is run in  <i>debug</i> mode. In this mode the strings passed to and received from the passwd chat are printed in the  <b>smbd</b>(8) log with a  <b>debug level</b> of 100. This is a dangerous option as it will allow plaintext passwords to be seen in the smbd log. It is available to help Samba admins debug their  <i>passwd chat</i> scripts when calling the  <i>passwd program</i> and should be turned off after this has been done. This option has no effect if the  <b>pam password change</b> parameter is set. This parameter is off by default.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>passwd chat debug</i><i> = </i><i>no</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
passwd chat timeout (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This integer specifies the number of seconds smbd will wait for an initial answer from a passwd chat script being run. Once the initial answer is received the subsequent answers must be received in one tenth of this time. The default it two seconds.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>passwd chat timeout</i><i> = </i><i>2</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
passwd chat (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This string controls the  <i>&quot;chat&quot;</i> conversation that takes places between  <b>smbd</b>(8) and the local password changing program to change the user's password. The string describes a sequence of response-receive pairs that  <b>smbd</b>(8) uses to determine what to send to the  <b>passwd program</b> and what to expect back. If the expected output is not received then the password is not changed.<div style="height: 1.00em;">
&#160;</div>
This chat sequence is often quite site specific, depending on what local methods are used for password control (such as NIS etc).<div style="height: 1.00em;">
&#160;</div>
Note that this parameter only is used if the  <b>unix password sync</b> parameter is set to  <b>yes</b>. This sequence is then called  <i>AS ROOT</i> when the SMB password in the smbpasswd file is being changed, without access to the old password cleartext. This means that root must be able to reset the user's password without knowing the text of the previous password. In the presence of NIS/YP, this means that the  <b>passwd program</b> must be executed on the NIS master.<div style="height: 1.00em;">
&#160;</div>
The string can contain the macro  <i>%n</i> which is substituted for the new password. The old passsword ( <i>%o</i>) is only available when  <b>encrypt passwords</b> has been disabled. The chat sequence can also contain the standard macros \n, \r, \t and \s to give line-feed, carriage-return, tab and space. The chat sequence string can also contain a '*' which matches any sequence of characters. Double quotes can be used to collect strings with spaces in them into a single string.<div style="height: 1.00em;">
&#160;</div>
If the send string in any part of the chat sequence is a full stop &quot;.&quot;, then no string is sent. Similarly, if the expect string is a full stop then no string is expected.<div style="height: 1.00em;">
&#160;</div>
If the  <b>pam password change</b> parameter is set to  <b>yes</b>, the chat pairs may be matched in any order, and success is determined by the PAM result, not any particular output. The \n macro is ignored for PAM conversions.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>passwd chat</i><i> = </i><i>*new*password* %n\n*new*password* %n\n *changed*</i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>passwd chat</i><i> = </i><i>&quot;*Enter NEW password*&quot; %n\n &quot;*Reenter NEW password*&quot; %n\n &quot;*Password changed*&quot;</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
passwd program (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
The name of a program that can be used to set UNIX user passwords. Any occurrences of  <i>%u</i> will be replaced with the user name. The user name is checked for existence before calling the password changing program.<div style="height: 1.00em;">
&#160;</div>
Also note that many passwd programs insist in  <i>reasonable </i> passwords, such as a minimum length, or the inclusion of mixed case chars and digits. This can pose a problem as some clients (such as Windows for Workgroups) uppercase the password before sending it.<div style="height: 1.00em;">
&#160;</div>
<i>Note</i> that if the  <i>unix password sync</i> parameter is set to  <b>yes </b> then this program is called  <i>AS ROOT</i> before the SMB password in the smbpasswd file is changed. If this UNIX password change fails, then smbd will fail to change the SMB password also (this is by design).<div style="height: 1.00em;">
&#160;</div>
If the  <i>unix password sync</i> parameter is set this parameter  <i>MUST USE ABSOLUTE PATHS</i> for  <i>ALL</i> programs called, and must be examined for security implications. Note that by default  <i>unix password sync</i> is set to  <b>no</b>.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>passwd program</i><i> = </i><i></i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>passwd program</i><i> = </i><i>/bin/passwd %u</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
password level (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
Some client/server combinations have difficulty with mixed-case passwords. One offending client is Windows for Workgroups, which for some reason forces passwords to upper case when using the LANMAN1 protocol, but leaves them alone when using COREPLUS! Another problem child is the Windows 95/98 family of operating systems. These clients upper case clear text passwords even when NT LM 0.12 selected by the protocol negotiation request/response.<div style="height: 1.00em;">
&#160;</div>
This deprecated parameter defines the maximum number of characters that may be upper case in passwords.<div style="height: 1.00em;">
&#160;</div>
For example, say the password given was &quot;FRED&quot;. If  <i> password level</i> is set to 1, the following combinations would be tried if &quot;FRED&quot; failed:<div style="height: 1.00em;">
&#160;</div>
&quot;Fred&quot;, &quot;fred&quot;, &quot;fRed&quot;, &quot;frEd&quot;,&quot;freD&quot;<div style="height: 1.00em;">
&#160;</div>
If  <i>password level</i> was set to 2, the following combinations would also be tried:<div style="height: 1.00em;">
&#160;</div>
&quot;FRed&quot;, &quot;FrEd&quot;, &quot;FreD&quot;, &quot;fREd&quot;, &quot;fReD&quot;, &quot;frED&quot;, ..<div style="height: 1.00em;">
&#160;</div>
And so on.<div style="height: 1.00em;">
&#160;</div>
The higher value this parameter is set to the more likely it is that a mixed case password will be matched against a single case password. However, you should be aware that use of this parameter reduces security and increases the time taken to process a new connection.<div style="height: 1.00em;">
&#160;</div>
A value of zero will cause only two attempts to be made - the password as is and the password in all-lower case.<div style="height: 1.00em;">
&#160;</div>
This parameter is used only when using plain-text passwords. It is not at all used when encrypted passwords as in use (that is the default since samba-3.0.0). Use this only when  <b>encrypt passwords = No</b>.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>password level</i><i> = </i><i>0</i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>password level</i><i> = </i><i>4</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
password server (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
By specifying the name of another SMB server or Active Directory domain controller with this option, and using security = [ads|domain|server] it is possible to get Samba to do all its username/password validation using a specific remote server.<div style="height: 1.00em;">
&#160;</div>
If the  <i>security</i> parameter is set to  <b>domain</b> or  <b>ads</b>, then this option  <i>should not</i> be used, as the default '*' indicates to Samba to determine the best DC to contact dynamically, just as all other hosts in an AD domain do. This allows the domain to be maintained without modification to the smb.conf file. The cryptograpic protection on the authenticated RPC calls used to verify passwords ensures that this default is safe.<div style="height: 1.00em;">
&#160;</div>
<i>It is strongly recommended that you use the default of '*'</i>, however if in your particular environment you have reason to specify a particular DC list, then the list of machines in this option must be a list of names or IP addresses of Domain controllers for the Domain. If you use the default of '*', or list several hosts in the  <i>password server</i> option then smbd will try each in turn till it finds one that responds. This is useful in case your primary server goes down.<div style="height: 1.00em;">
&#160;</div>
If the list of servers contains both names/IP's and the '*' character, the list is treated as a list of preferred domain controllers, but an auto lookup of all remaining DC's will be added to the list as well. Samba will not attempt to optimize this list by locating the closest DC.<div style="height: 1.00em;">
&#160;</div>
If parameter is a name, it is looked up using the parameter  <b>name resolve order</b> and so may resolved by any method and order described in that parameter.<div style="height: 1.00em;">
&#160;</div>
If the  <i>security</i> parameter is set to  <b>server</b>, these additional restrictions apply:<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;You may list several password servers in the  <i>password server</i> parameter, however if an smbd makes a connection to a password server, and then the password server fails, no more users will be able to be authenticated from this smbd. This is a restriction of the SMB/CIFS protocol when in security = server mode and cannot be fixed in Samba.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;You will have to ensure that your users are able to login from the Samba server, as when in security = server mode the network logon will appear to come from the Samba server rather than from the users workstation.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;The client must not select NTLMv2 authentication.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;The password server must be a machine capable of using the &quot;LM1.2X002&quot; or the &quot;NT LM 0.12&quot; protocol, and it must be in user level security mode.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;Using a password server means your UNIX box (running Samba) is only as secure as (a host masqurading as) your password server.  <i>DO NOT CHOOSE A PASSWORD SERVER THAT YOU DON'T COMPLETELY TRUST</i>.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;Never point a Samba server at itself for password serving. This will cause a loop and could lock up your Samba server!</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;The name of the password server takes the standard substitutions, but probably the only useful one is  <i>%m </i>, which means the Samba server will use the incoming client as the password server. If you use this then you better trust your clients, and you had better restrict them with hosts allow!</div>
<div style="height: 1.00em;">
&#160;</div>
</div>
Default:  <i></i><i>password server</i><i> = </i><i>*</i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>password server</i><i> = </i><i>NT-PDC, NT-BDC1, NT-BDC2, *</i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>password server</i><i> = </i><i>windc.mydomain.com:389 192.168.1.101 *</i><i> </i><div style="height: 1.00em;">
&#160;</div>
directory<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameter is a synonym for path.</div>
<div style="height: 1.00em;">
&#160;</div>
path (S)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameter specifies a directory to which the user of the service is to be given access. In the case of printable services, this is where print data will spool prior to being submitted to the host for printing.<div style="height: 1.00em;">
&#160;</div>
For a printable service offering guest access, the service should be readonly and the path should be world-writeable and have the sticky bit set. This is not mandatory of course, but you probably won't get the results you expect if you do otherwise.<div style="height: 1.00em;">
&#160;</div>
Any occurrences of  <i>%u</i> in the path will be replaced with the UNIX username that the client is using on this connection. Any occurrences of  <i>%m</i> will be replaced by the NetBIOS name of the machine they are connecting from. These replacements are very useful for setting up pseudo home directories for users.<div style="height: 1.00em;">
&#160;</div>
Note that this path will be based on  <b>root dir</b> if one was specified.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>path</i><i> = </i><i></i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>path</i><i> = </i><i>/home/fred</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
perfcount module (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameter specifies the perfcount backend to be used when monitoring SMB operations. Only one perfcount module may be used, and it must implement all of the apis contained in the smb_perfcount_handler structure defined in smb.h.<div style="height: 1.00em;">
&#160;</div>
<i>No default</i></div>
<div style="height: 1.00em;">
&#160;</div>
pid directory (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This option specifies the directory where pid files will be placed.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>pid directory</i><i> = </i><i>${prefix}/var/locks</i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>pid directory</i><i> = </i><i>pid directory = /var/run/</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
posix locking (S)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
The  <b>smbd</b>(8) daemon maintains an database of file locks obtained by SMB clients. The default behavior is to map this internal database to POSIX locks. This means that file locks obtained by SMB clients are consistent with those seen by POSIX compliant applications accessing the files via a non-SMB method (e.g. NFS or local file access). It is very unlikely that you need to set this parameter to &quot;no&quot;, unless you are sharing from an NFS mount, which is not a good idea in the first place.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>posix locking</i><i> = </i><i>yes</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
postexec (S)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This option specifies a command to be run whenever the service is disconnected. It takes the usual substitutions. The command may be run as the root on some systems.<div style="height: 1.00em;">
&#160;</div>
An interesting example may be to unmount server resources:<div style="height: 1.00em;">
&#160;</div>
postexec = /etc/umount /cdrom<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>postexec</i><i> = </i><i></i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>postexec</i><i> = </i><i>echo \&quot;%u disconnected from %S from %m (%I)\&quot; &gt;&gt; /tmp/log</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
preexec close (S)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This boolean option controls whether a non-zero return code from  <b>preexec</b> should close the service being connected to.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>preexec close</i><i> = </i><i>no</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
exec<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameter is a synonym for preexec.</div>
<div style="height: 1.00em;">
&#160;</div>
preexec (S)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This option specifies a command to be run whenever the service is connected to. It takes the usual substitutions.<div style="height: 1.00em;">
&#160;</div>
An interesting example is to send the users a welcome message every time they log in. Maybe a message of the day? Here is an example:<div style="height: 1.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
preexec = csh -c 'echo \&quot;Welcome to %S!\&quot; | /usr/local/samba/bin/smbclient -M %m -I %I' &amp;<div style="height: 1.00em;">
&#160;</div>
Of course, this could get annoying after a while :-)<div style="height: 1.00em;">
&#160;</div>
See also  <b>preexec close</b> and  <b>postexec</b>.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>preexec</i><i> = </i><i></i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>preexec</i><i> = </i><i>echo \&quot;%u connected to %S from %m (%I)\&quot; &gt;&gt; /tmp/log</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
prefered master<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameter is a synonym for preferred master.</div>
<div style="height: 1.00em;">
&#160;</div>
preferred master (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This boolean parameter controls if  <b>nmbd</b>(8) is a preferred master browser for its workgroup.<div style="height: 1.00em;">
&#160;</div>
If this is set to  <b>yes</b>, on startup, nmbd will force an election, and it will have a slight advantage in winning the election. It is recommended that this parameter is used in conjunction with  <b>domain master = yes</b>, so that nmbd can guarantee becoming a domain master.<div style="height: 1.00em;">
&#160;</div>
Use this option with caution, because if there are several hosts (whether Samba servers, Windows 95 or NT) that are preferred master browsers on the same subnet, they will each periodically and continuously attempt to become the local master browser. This will result in unnecessary broadcast traffic and reduced browsing capabilities.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>preferred master</i><i> = </i><i>auto</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
preload modules (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This is a list of paths to modules that should be loaded into smbd before a client connects. This improves the speed of smbd when reacting to new connections somewhat.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>preload modules</i><i> = </i><i></i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>preload modules</i><i> = </i><i>/usr/lib/samba/passdb/mysql.so</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
auto services<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameter is a synonym for preload.</div>
<div style="height: 1.00em;">
&#160;</div>
preload (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This is a list of services that you want to be automatically added to the browse lists. This is most useful for homes and printers services that would otherwise not be visible.<div style="height: 1.00em;">
&#160;</div>
Note that if you just want all printers in your printcap file loaded then the  <b>load printers</b> option is easier.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>preload</i><i> = </i><i></i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>preload</i><i> = </i><i>fred lp colorlp</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
preserve case (S)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This controls if new filenames are created with the case that the client passes, or if they are forced to be the  <b>default case</b>.<div style="height: 1.00em;">
&#160;</div>
See the section on NAME MANGLING for a fuller discussion.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>preserve case</i><i> = </i><i>yes</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
print ok<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameter is a synonym for printable.</div>
<div style="height: 1.00em;">
&#160;</div>
printable (S)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
If this parameter is  <b>yes</b>, then clients may open, write to and submit spool files on the directory specified for the service.<div style="height: 1.00em;">
&#160;</div>
Note that a printable service will ALWAYS allow writing to the service path (user privileges permitting) via the spooling of print data. The  <b>read only</b> parameter controls only non-printing access to the resource.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>printable</i><i> = </i><i>no</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
printcap cache time (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This option specifies the number of seconds before the printing subsystem is again asked for the known printers.<div style="height: 1.00em;">
&#160;</div>
Setting this parameter to 0 disables any rescanning for new or removed printers after the initial startup.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>printcap cache time</i><i> = </i><i>750</i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>printcap cache time</i><i> = </i><i>600</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
printcap<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameter is a synonym for printcap name.</div>
<div style="height: 1.00em;">
&#160;</div>
printcap name (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameter may be used to override the compiled-in default printcap name used by the server (usually /etc/printcap). See the discussion of the [printers] section above for reasons why you might want to do this.<div style="height: 1.00em;">
&#160;</div>
To use the CUPS printing interface set printcap name = cups. This should be supplemented by an addtional setting  <b>printing = cups</b> in the [global] section. printcap name = cups will use the &quot;dummy&quot; printcap created by CUPS, as specified in your CUPS configuration file.<div style="height: 1.00em;">
&#160;</div>
On System V systems that use lpstat to list available printers you can use printcap name = lpstat to automatically obtain lists of available printers. This is the default for systems that define SYSV at configure time in Samba (this includes most System V based systems). If  <i> printcap name</i> is set to lpstat on these systems then Samba will launch lpstat -v and attempt to parse the output to obtain a printer list.<div style="height: 1.00em;">
&#160;</div>
A minimal printcap file would look something like this:<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
print1|My Printer 1<br/>
print2|My Printer 2<br/>
print3|My Printer 3<br/>
print4|My Printer 4<br/>
print5|My Printer 5<br/>
</div>
<div style="height: 1.00em;">
&#160;</div>
where the '|' separates aliases of a printer. The fact that the second alias has a space in it gives a hint to Samba that it's a comment.<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 0.00em;">
&#160;</div>
<b>Note</b><div style="height: 0.00em;">
&#160;</div>
<div style="height: 0.00em;">
&#160;</div>
Under AIX the default printcap name is /etc/qconfig. Samba will assume the file is in AIX qconfig format if the string qconfig appears in the printcap filename.<div style="height: 0.50em;">
&#160;</div>
</div>
Default:  <i></i><i>printcap name</i><i> = </i><i>/etc/printcap</i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>printcap name</i><i> = </i><i>/etc/myprintcap</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
print command (S)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
After a print job has finished spooling to a service, this command will be used via a system() call to process the spool file. Typically the command specified will submit the spool file to the host's printing subsystem, but there is no requirement that this be the case. The server will not remove the spool file, so whatever command you specify should remove the spool file when it has been processed, otherwise you will need to manually remove old spool files.<div style="height: 1.00em;">
&#160;</div>
The print command is simply a text string. It will be used verbatim after macro substitutions have been made:<div style="height: 1.00em;">
&#160;</div>
%s, %f - the path to the spool file name<div style="height: 1.00em;">
&#160;</div>
%p - the appropriate printer name<div style="height: 1.00em;">
&#160;</div>
%J - the job name as transmitted by the client.<div style="height: 1.00em;">
&#160;</div>
%c - The number of printed pages of the spooled job (if known).<div style="height: 1.00em;">
&#160;</div>
%z - the size of the spooled print job (in bytes)<div style="height: 1.00em;">
&#160;</div>
The print command  <i>MUST</i> contain at least one occurrence of  <i>%s</i> or  <i>%f </i> - the  <i>%p</i> is optional. At the time a job is submitted, if no printer name is supplied the  <i>%p </i> will be silently removed from the printer command.<div style="height: 1.00em;">
&#160;</div>
If specified in the [global] section, the print command given will be used for any printable service that does not have its own print command specified.<div style="height: 1.00em;">
&#160;</div>
If there is neither a specified print command for a printable service nor a global print command, spool files will be created but not processed and (most importantly) not removed.<div style="height: 1.00em;">
&#160;</div>
Note that printing may fail on some UNIXes from the  <b>nobody</b> account. If this happens then create an alternative guest account that can print and set the  <b>guest account</b> in the [global] section.<div style="height: 1.00em;">
&#160;</div>
You can form quite complex print commands by realizing that they are just passed to a shell. For example the following will log a print job, print the file, then remove it. Note that ';' is the usual separator for command in shell scripts.<div style="height: 1.00em;">
&#160;</div>
print command = echo Printing %s &gt;&gt; /tmp/print.log; lpr -P %p %s; rm %s<div style="height: 1.00em;">
&#160;</div>
You may have to vary this command considerably depending on how you normally print files on your system. The default for the parameter varies depending on the setting of the  <b>printing</b> parameter.<div style="height: 1.00em;">
&#160;</div>
Default: For printing = BSD, AIX, QNX, LPRNG or PLP :<div style="height: 1.00em;">
&#160;</div>
print command = lpr -r -P%p %s<div style="height: 1.00em;">
&#160;</div>
For printing = SYSV or HPUX :<div style="height: 1.00em;">
&#160;</div>
print command = lp -c -d%p %s; rm %s<div style="height: 1.00em;">
&#160;</div>
For printing = SOFTQ :<div style="height: 1.00em;">
&#160;</div>
print command = lp -d%p -s %s; rm %s<div style="height: 1.00em;">
&#160;</div>
For printing = CUPS : If SAMBA is compiled against libcups, then  <b>printcap = cups</b> uses the CUPS API to submit jobs, etc. Otherwise it maps to the System V commands with the -oraw option for printing, i.e. it uses lp -c -d%p -oraw; rm %s. With printing = cups, and if SAMBA is compiled against libcups, any manually set print command will be ignored.<div style="height: 1.00em;">
&#160;</div>
<i>No default</i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>print command</i><i> = </i><i>/usr/local/samba/bin/myprintscript %p %s</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
printer admin (S)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This lists users who can do anything to printers via the remote administration interfaces offered by MS-RPC (usually using a NT workstation). This parameter can be set per-share or globally. Note: The root user always has admin rights. Use caution with use in the global stanza as this can cause side effects.<div style="height: 1.00em;">
&#160;</div>
This parameter has been marked deprecated in favor of using the SePrintOperatorPrivilege and individual print security descriptors. It will be removed in a future release.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>printer admin</i><i> = </i><i></i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>printer admin</i><i> = </i><i>admin, @staff</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
printer<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameter is a synonym for printer name.</div>
<div style="height: 1.00em;">
&#160;</div>
printer name (S)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameter specifies the name of the printer to which print jobs spooled through a printable service will be sent.<div style="height: 1.00em;">
&#160;</div>
If specified in the [global] section, the printer name given will be used for any printable service that does not have its own printer name specified.<div style="height: 1.00em;">
&#160;</div>
The default value of the  <b>printer name</b> may be lp on many systems.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>printer name</i><i> = </i><i>none</i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>printer name</i><i> = </i><i>laserwriter</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
printing (S)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameters controls how printer status information is interpreted on your system. It also affects the default values for the  <i>print command</i>,  <i>lpq command</i>,  <i>lppause command </i>,  <i>lpresume command</i>, and  <i>lprm command</i> if specified in the [global] section.<div style="height: 1.00em;">
&#160;</div>
Currently nine printing styles are supported. They are  <b>BSD</b>,  <b>AIX</b>,  <b>LPRNG</b>,  <b>PLP</b>,  <b>SYSV</b>,  <b>HPUX</b>,  <b>QNX</b>,  <b>SOFTQ</b>, and  <b>CUPS</b>.<div style="height: 1.00em;">
&#160;</div>
To see what the defaults are for the other print commands when using the various options use the  <b>testparm</b>(1) program.<div style="height: 1.00em;">
&#160;</div>
This option can be set on a per printer basis. Please be aware however, that you must place any of the various printing commands (e.g. print command, lpq command, etc...) after defining the value for the  <i>printing</i> option since it will reset the printing commands to default values.<div style="height: 1.00em;">
&#160;</div>
See also the discussion in the [printers] section.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>printing</i><i> = </i><i>Depends on the operating system, see testparm -v.</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
printjob username (S)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameter specifies which user information will be passed to the printing system. Usually, the username is sent, but in some cases, e.g. the domain prefix is useful, too.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>printjob username</i><i> = </i><i>%U</i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>printjob username</i><i> = </i><i>%D\%U</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
print notify backchannel (S)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
Windows print clients can update print queue status by expecting the server to open a backchannel SMB connection to them. Due to client firewall settings this can cause considerable timeouts and will often fail, as there is no guarantee the client is even running an SMB server. By setting this parameter to  <b>no</b> the Samba print server will not try to connect back to clients and treat corresponding requests as if the connection back to the client failed. The default setting of  <b>yes</b> causes smbd to attempt this connection.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>print notify backchannel</i><i> = </i><i>yes</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
private dir (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameters defines the directory smbd will use for storing such files as smbpasswd and secrets.tdb.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>private dir</i><i> = </i><i>${prefix}/private</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
profile acls (S)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This boolean parameter was added to fix the problems that people have been having with storing user profiles on Samba shares from Windows 2000 or Windows XP clients. New versions of Windows 2000 or Windows XP service packs do security ACL checking on the owner and ability to write of the profile directory stored on a local workstation when copied from a Samba share.<div style="height: 1.00em;">
&#160;</div>
When not in domain mode with winbindd then the security info copied onto the local workstation has no meaning to the logged in user (SID) on that workstation so the profile storing fails. Adding this parameter onto a share used for profile storage changes two things about the returned Windows ACL. Firstly it changes the owner and group owner of all reported files and directories to be BUILTIN\\Administrators, BUILTIN\\Users respectively (SIDs S-1-5-32-544, S-1-5-32-545). Secondly it adds an ACE entry of &quot;Full Control&quot; to the SID BUILTIN\\Users to every returned ACL. This will allow any Windows 2000 or XP workstation user to access the profile.<div style="height: 1.00em;">
&#160;</div>
Note that if you have multiple users logging on to a workstation then in order to prevent them from being able to access each others profiles you must remove the &quot;Bypass traverse checking&quot; advanced user right. This will prevent access to other users profile directories as the top level profile directory (named after the user) is created by the workstation profile code and has an ACL restricting entry to the directory tree to the owning user.<div style="height: 1.00em;">
&#160;</div>
Note that this parameter should be set to yes on dedicated profile shares only. On other shares, it might cause incorrect file ownerships.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>profile acls</i><i> = </i><i>no</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
queuepause command (S)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameter specifies the command to be executed on the server host in order to pause the printer queue.<div style="height: 1.00em;">
&#160;</div>
This command should be a program or script which takes a printer name as its only parameter and stops the printer queue, such that no longer jobs are submitted to the printer.<div style="height: 1.00em;">
&#160;</div>
This command is not supported by Windows for Workgroups, but can be issued from the Printers window under Windows 95 and NT.<div style="height: 1.00em;">
&#160;</div>
If a  <i>%p</i> is given then the printer name is put in its place. Otherwise it is placed at the end of the command.<div style="height: 1.00em;">
&#160;</div>
Note that it is good practice to include the absolute path in the command as the PATH may not be available to the server.<div style="height: 1.00em;">
&#160;</div>
<i>No default</i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>queuepause command</i><i> = </i><i>disable %p</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
queueresume command (S)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameter specifies the command to be executed on the server host in order to resume the printer queue. It is the command to undo the behavior that is caused by the previous parameter (<b>queuepause command</b>).<div style="height: 1.00em;">
&#160;</div>
This command should be a program or script which takes a printer name as its only parameter and resumes the printer queue, such that queued jobs are resubmitted to the printer.<div style="height: 1.00em;">
&#160;</div>
This command is not supported by Windows for Workgroups, but can be issued from the Printers window under Windows 95 and NT.<div style="height: 1.00em;">
&#160;</div>
If a  <i>%p</i> is given then the printer name is put in its place. Otherwise it is placed at the end of the command.<div style="height: 1.00em;">
&#160;</div>
Note that it is good practice to include the absolute path in the command as the PATH may not be available to the server.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>queueresume command</i><i> = </i><i></i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>queueresume command</i><i> = </i><i>enable %p</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
read list (S)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This is a list of users that are given read-only access to a service. If the connecting user is in this list then they will not be given write access, no matter what the  <b>read only</b> option is set to. The list can include group names using the syntax described in the  <b>invalid users</b> parameter.<div style="height: 1.00em;">
&#160;</div>
This parameter will not work with the  <b>security = share</b> in Samba 3.0. This is by design.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>read list</i><i> = </i><i></i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>read list</i><i> = </i><i>mary, @students</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
read only (S)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
An inverted synonym is  <b>writeable</b>.<div style="height: 1.00em;">
&#160;</div>
If this parameter is  <b>yes</b>, then users of a service may not create or modify files in the service's directory.<div style="height: 1.00em;">
&#160;</div>
Note that a printable service (printable = yes) will  <i>ALWAYS</i> allow writing to the directory (user privileges permitting), but only via spooling operations.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>read only</i><i> = </i><i>yes</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
read raw (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameter controls whether or not the server will support the raw read SMB requests when transferring data to clients.<div style="height: 1.00em;">
&#160;</div>
If enabled, raw reads allow reads of 65535 bytes in one packet. This typically provides a major performance benefit.<div style="height: 1.00em;">
&#160;</div>
However, some clients either negotiate the allowable block size incorrectly or are incapable of supporting larger block sizes, and for these clients you may need to disable raw reads.<div style="height: 1.00em;">
&#160;</div>
In general this parameter should be viewed as a system tuning tool and left severely alone.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>read raw</i><i> = </i><i>yes</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
realm (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This option specifies the kerberos realm to use. The realm is used as the ADS equivalent of the NT4 domain. It is usually set to the DNS name of the kerberos server.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>realm</i><i> = </i><i></i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>realm</i><i> = </i><i>mysambabox.mycompany.com</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
registry shares (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This turns on or off support for share definitions read from registry. Shares defined in  <i>smb.conf</i> take precedence over shares with the same name defined in registry. See the section on registry-based configuration for details.<div style="height: 1.00em;">
&#160;</div>
Note that this parameter defaults to  <i>no</i>, but it is set to  <i>yes</i> when  <i>config backend</i> is set to  <i>registry</i>.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>registry shares</i><i> = </i><i>no</i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>registry shares</i><i> = </i><i>yes</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
remote announce (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This option allows you to setup  <b>nmbd</b>(8) to periodically announce itself to arbitrary IP addresses with an arbitrary workgroup name.<div style="height: 1.00em;">
&#160;</div>
This is useful if you want your Samba server to appear in a remote workgroup for which the normal browse propagation rules don't work. The remote workgroup can be anywhere that you can send IP packets to.<div style="height: 1.00em;">
&#160;</div>
For example:<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
remote announce = 192.168.2.255/SERVERS 192.168.4.255/STAFF<br/>
</div>
<div style="height: 1.00em;">
&#160;</div>
the above line would cause nmbd to announce itself to the two given IP addresses using the given workgroup names. If you leave out the workgroup name, then the one given in the  <b>workgroup</b> parameter is used instead.<div style="height: 1.00em;">
&#160;</div>
The IP addresses you choose would normally be the broadcast addresses of the remote networks, but can also be the IP addresses of known browse masters if your network config is that stable.<div style="height: 1.00em;">
&#160;</div>
See the chapter on Network Browsing in the Samba-HOWTO book.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>remote announce</i><i> = </i><i></i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
remote browse sync (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This option allows you to setup  <b>nmbd</b>(8) to periodically request synchronization of browse lists with the master browser of a Samba server that is on a remote segment. This option will allow you to gain browse lists for multiple workgroups across routed networks. This is done in a manner that does not work with any non-Samba servers.<div style="height: 1.00em;">
&#160;</div>
This is useful if you want your Samba server and all local clients to appear in a remote workgroup for which the normal browse propagation rules don't work. The remote workgroup can be anywhere that you can send IP packets to.<div style="height: 1.00em;">
&#160;</div>
For example:<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
<i>remote browse sync = 192.168.2.255 192.168.4.255</i><br/>
</div>
<div style="height: 1.00em;">
&#160;</div>
the above line would cause nmbd to request the master browser on the specified subnets or addresses to synchronize their browse lists with the local server.<div style="height: 1.00em;">
&#160;</div>
The IP addresses you choose would normally be the broadcast addresses of the remote networks, but can also be the IP addresses of known browse masters if your network config is that stable. If a machine IP address is given Samba makes NO attempt to validate that the remote machine is available, is listening, nor that it is in fact the browse master on its segment.<div style="height: 1.00em;">
&#160;</div>
The  <b>remote browse sync</b> may be used on networks where there is no WINS server, and may be used on disjoint networks where each network has its own WINS server.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>remote browse sync</i><i> = </i><i></i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
rename user script (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This is the full pathname to a script that will be run as root by  <b>smbd</b>(8) under special circumstances described below.<div style="height: 1.00em;">
&#160;</div>
When a user with admin authority or SeAddUserPrivilege rights renames a user (e.g.: from the NT4 User Manager for Domains), this script will be run to rename the POSIX user. Two variables, %uold and %unew, will be substituted with the old and new usernames, respectively. The script should return 0 upon successful completion, and nonzero otherwise.<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 0.00em;">
&#160;</div>
<b>Note</b><div style="height: 0.00em;">
&#160;</div>
<div style="height: 0.00em;">
&#160;</div>
The script has all responsibility to rename all the necessary data that is accessible in this posix method. This can mean different requirements for different backends. The tdbsam and smbpasswd backends will take care of the contents of their respective files, so the script is responsible only for changing the POSIX username, and other data that may required for your circumstances, such as home directory. Please also consider whether or not you need to rename the actual home directories themselves. The ldapsam backend will not make any changes, because of the potential issues with renaming the LDAP naming attribute. In this case the script is responsible for changing the attribute that samba uses (uid) for locating users, as well as any data that needs to change for other applications using the same directory.<div style="height: 0.50em;">
&#160;</div>
</div>
Default:  <i></i><i>rename user script</i><i> = </i><i>no</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
reset on zero vc (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This boolean option controls whether an incoming session setup should kill other connections coming from the same IP. This matches the default Windows 2003 behaviour. Setting this parameter to yes becomes necessary when you have a flaky network and windows decides to reconnect while the old connection still has files with share modes open. These files become inaccessible over the new connection. The client sends a zero VC on the new connection, and Windows 2003 kills all other connections coming from the same IP. This way the locked files are accessible again. Please be aware that enabling this option will kill connections behind a masquerading router.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>reset on zero vc</i><i> = </i><i>no</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
restrict anonymous (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
The setting of this parameter determines whether user and group list information is returned for an anonymous connection. and mirrors the effects of the<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\<br/>
           Control\LSA\RestrictAnonymous<br/>
</div>
<div style="height: 1.00em;">
&#160;</div>
registry key in Windows 2000 and Windows NT. When set to 0, user and group list information is returned to anyone who asks. When set to 1, only an authenticated user can retrive user and group list information. For the value 2, supported by Windows 2000/XP and Samba, no anonymous connections are allowed at all. This can break third party and Microsoft applications which expect to be allowed to perform operations anonymously.<div style="height: 1.00em;">
&#160;</div>
The security advantage of using restrict anonymous = 1 is dubious, as user and group list information can be obtained using other means.<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 0.00em;">
&#160;</div>
<b>Note</b><div style="height: 0.00em;">
&#160;</div>
<div style="height: 0.00em;">
&#160;</div>
The security advantage of using restrict anonymous = 2 is removed by setting  <b>guest ok = yes</b> on any share.<div style="height: 0.50em;">
&#160;</div>
</div>
Default:  <i></i><i>restrict anonymous</i><i> = </i><i>0</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
root<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameter is a synonym for root directory.</div>
<div style="height: 1.00em;">
&#160;</div>
root dir<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameter is a synonym for root directory.</div>
<div style="height: 1.00em;">
&#160;</div>
root directory (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
The server will chroot() (i.e. Change its root directory) to this directory on startup. This is not strictly necessary for secure operation. Even without it the server will deny access to files not in one of the service entries. It may also check for, and deny access to, soft links to other parts of the filesystem, or attempts to use &quot;..&quot; in file names to access other directories (depending on the setting of the  <b>wide smbconfoptions</b> parameter).<div style="height: 1.00em;">
&#160;</div>
Adding a  <i>root directory</i> entry other than &quot;/&quot; adds an extra level of security, but at a price. It absolutely ensures that no access is given to files not in the sub-tree specified in the  <i>root directory</i> option,  <i>including</i> some files needed for complete operation of the server. To maintain full operability of the server you will need to mirror some system files into the  <i>root directory</i> tree. In particular you will need to mirror /etc/passwd (or a subset of it), and any binaries or configuration files needed for printing (if required). The set of files that must be mirrored is operating system dependent.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>root directory</i><i> = </i><i>/</i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>root directory</i><i> = </i><i>/homes/smb</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
root postexec (S)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This is the same as the  <i>postexec</i> parameter except that the command is run as root. This is useful for unmounting filesystems (such as CDROMs) after a connection is closed.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>root postexec</i><i> = </i><i></i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
root preexec close (S)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This is the same as the  <i>preexec close </i> parameter except that the command is run as root.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>root preexec close</i><i> = </i><i>no</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
root preexec (S)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This is the same as the  <i>preexec</i> parameter except that the command is run as root. This is useful for mounting filesystems (such as CDROMs) when a connection is opened.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>root preexec</i><i> = </i><i></i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
rpc_server (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
Defines what kind of rpc server to use for a named pipe. The rpc_server prefix must be followed by the pipe name, and a value.<div style="height: 1.00em;">
&#160;</div>
Three possible values are currently supported: embedded daemon external<div style="height: 1.00em;">
&#160;</div>
The classic method is to run every pipe as an internal function  <i>embedded</i> in smbd.<div style="height: 1.00em;">
&#160;</div>
An alternative method is to fork a  <i>daemon</i> early on at smbd startup time. This is supported only for selected pipes.<div style="height: 1.00em;">
&#160;</div>
Choosing the  <i>external</i> option allows to run a completely independent (3rd party) server capable of interfacing with samba via the MS-RPC interface over named pipes.<div style="height: 1.00em;">
&#160;</div>
Currently only the spoolss pipe can be configured in  <i>daemon</i> mode like this:<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
	rpc_server:spoolss = daemon<br/>
	<br/>
</div>
<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>rpc_server</i><i> = </i><i>none</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
security mask (S)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameter controls what UNIX permission bits will be set when a Windows NT client is manipulating the UNIX permission on a file using the native NT security dialog box.<div style="height: 1.00em;">
&#160;</div>
This parameter is applied as a mask (AND'ed with) to the incoming permission bits, thus resetting any bits not in this mask. Make sure not to mix up this parameter with  <b>force security mode</b>, which works in a manner similar to this one but uses a logical OR instead of an AND.<div style="height: 1.00em;">
&#160;</div>
Essentially, all bits set to zero in this mask will result in setting to zero the corresponding bits on the file permissions regardless of the previous status of this bits on the file.<div style="height: 1.00em;">
&#160;</div>
If not set explicitly this parameter is 0777, allowing a user to set all the user/group/world permissions on a file.<div style="height: 1.00em;">
&#160;</div>
<i> Note</i> that users who can access the Samba server through other means can easily bypass this restriction, so it is primarily useful for standalone &quot;appliance&quot; systems. Administrators of most normal systems will probably want to leave it set to  <b>0777</b>.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>security mask</i><i> = </i><i>0777</i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>security mask</i><i> = </i><i>0770</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
security (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This option affects how clients respond to Samba and is one of the most important settings in the smb.conf file.<div style="height: 1.00em;">
&#160;</div>
The option sets the &quot;security mode bit&quot; in replies to protocol negotiations with  <b>smbd</b>(8) to turn share level security on or off. Clients decide based on this bit whether (and how) to transfer user and password information to the server.<div style="height: 1.00em;">
&#160;</div>
The default is security = user, as this is the most common setting needed when talking to Windows 98 and Windows NT.<div style="height: 1.00em;">
&#160;</div>
The alternatives are security = ads or security = domain, which support joining Samba to a Windows domain, along with security = share and security = server, both of which are deprecated.<div style="height: 1.00em;">
&#160;</div>
In versions of Samba prior to 2.0.0, the default was security = share mainly because that was the only option at one stage.<div style="height: 1.00em;">
&#160;</div>
You should use security = user and  <b>map to guest</b> if you want to mainly setup shares without a password (guest shares). This is commonly used for a shared printer server.<div style="height: 1.00em;">
&#160;</div>
It is possible to use smbd in a  <i> hybrid mode</i> where it is offers both user and share level security under different  <b>NetBIOS aliases</b>.<div style="height: 1.00em;">
&#160;</div>
The different settings will now be explained.<div style="height: 1.00em;">
&#160;</div>
<i>SECURITY = USER</i><div style="height: 1.00em;">
&#160;</div>
This is the default security setting in Samba. With user-level security a client must first &quot;log-on&quot; with a valid username and password (which can be mapped using the  <b>username map</b> parameter). Encrypted passwords (see the  <b>encrypted passwords</b> parameter) can also be used in this security mode. Parameters such as  <b>user</b> and  <b>guest only</b> if set are then applied and may change the UNIX user to use on this connection, but only after the user has been successfully authenticated.<div style="height: 1.00em;">
&#160;</div>
<i>Note</i> that the name of the resource being requested is  <i>not</i> sent to the server until after the server has successfully authenticated the client. This is why guest shares don't work in user level security without allowing the server to automatically map unknown users into the  <b>guest account</b>. See the  <b>map to guest</b> parameter for details on doing this.<div style="height: 1.00em;">
&#160;</div>
See also the section NOTE ABOUT USERNAME/PASSWORD VALIDATION.<div style="height: 1.00em;">
&#160;</div>
<i>SECURITY = DOMAIN</i><div style="height: 1.00em;">
&#160;</div>
This mode will only work correctly if  <b>net</b>(8) has been used to add this machine into a Windows NT Domain. It expects the  <b>encrypted passwords</b> parameter to be set to  <b>yes</b>. In this mode Samba will try to validate the username/password by passing it to a Windows NT Primary or Backup Domain Controller, in exactly the same way that a Windows NT Server would do.<div style="height: 1.00em;">
&#160;</div>
<i>Note</i> that a valid UNIX user must still exist as well as the account on the Domain Controller to allow Samba to have a valid UNIX account to map file access to.<div style="height: 1.00em;">
&#160;</div>
<i>Note</i> that from the client's point of view security = domain is the same as security = user. It only affects how the server deals with the authentication, it does not in any way affect what the client sees.<div style="height: 1.00em;">
&#160;</div>
<i>Note</i> that the name of the resource being requested is  <i>not</i> sent to the server until after the server has successfully authenticated the client. This is why guest shares don't work in user level security without allowing the server to automatically map unknown users into the  <b>guest account</b>. See the  <b>map to guest</b> parameter for details on doing this.<div style="height: 1.00em;">
&#160;</div>
See also the section NOTE ABOUT USERNAME/PASSWORD VALIDATION.<div style="height: 1.00em;">
&#160;</div>
See also the  <b>password server</b> parameter and the  <b>encrypted passwords</b> parameter.<div style="height: 1.00em;">
&#160;</div>
<i>SECURITY = SHARE</i><div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 0.00em;">
&#160;</div>
<b>Note</b><div style="height: 0.00em;">
&#160;</div>
<div style="height: 0.00em;">
&#160;</div>
This option is deprecated as it is incompatible with SMB2<div style="height: 0.50em;">
&#160;</div>
</div>
When clients connect to a share level security server, they need not log onto the server with a valid username and password before attempting to connect to a shared resource (although modern clients such as Windows 95/98 and Windows NT will send a logon request with a username but no password when talking to a security = share server). Instead, the clients send authentication information (passwords) on a per-share basis, at the time they attempt to connect to that share.<div style="height: 1.00em;">
&#160;</div>
Note that smbd  <i>ALWAYS</i> uses a valid UNIX user to act on behalf of the client, even in security = share level security.<div style="height: 1.00em;">
&#160;</div>
As clients are not required to send a username to the server in share level security, smbd uses several techniques to determine the correct UNIX user to use on behalf of the client.<div style="height: 1.00em;">
&#160;</div>
A list of possible UNIX usernames to match with the given client password is constructed using the following methods :<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;If the  <b>guest only</b> parameter is set, then all the other stages are missed and only the  <b>guest account</b> username is checked.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;Is a username is sent with the share connection request, then this username (after mapping - see  <b>username map</b>), is added as a potential username.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;If the client did a previous  <i>logon </i> request (the SessionSetup SMB call) then the username sent in this SMB will be added as a potential username.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;The name of the service the client requested is added as a potential username.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;The NetBIOS name of the client is added to the list as a potential username.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;Any users on the  <b>user</b> list are added as potential usernames.</div>
<div style="height: 1.00em;">
&#160;</div>
</div>
If the  <i>guest only</i> parameter is not set, then this list is then tried with the supplied password. The first user for whom the password matches will be used as the UNIX user.<div style="height: 1.00em;">
&#160;</div>
If the  <i>guest only</i> parameter is set, or no username can be determined then if the share is marked as available to the  <i>guest account</i>, then this guest user will be used, otherwise access is denied.<div style="height: 1.00em;">
&#160;</div>
Note that it can be  <i>very</i> confusing in share-level security as to which UNIX username will eventually be used in granting access.<div style="height: 1.00em;">
&#160;</div>
See also the section NOTE ABOUT USERNAME/PASSWORD VALIDATION.<div style="height: 1.00em;">
&#160;</div>
<i>SECURITY = SERVER</i><div style="height: 1.00em;">
&#160;</div>
In this depicted mode Samba will try to validate the username/password by passing it to another SMB server, such as an NT box. If this fails it will revert to security = user. It expects the  <b>encrypted passwords</b> parameter to be set to  <b>yes</b>, unless the remote server does not support them. However note that if encrypted passwords have been negotiated then Samba cannot revert back to checking the UNIX password file, it must have a valid smbpasswd file to check users against. See the chapter about the User Database in the Samba HOWTO Collection for details on how to set this up.<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 0.00em;">
&#160;</div>
<b>Note</b><div style="height: 0.00em;">
&#160;</div>
<div style="height: 0.00em;">
&#160;</div>
This mode of operation has significant pitfalls since it is more vulnerable to man-in-the-middle attacks and server impersonation. In particular, this mode of operation can cause significant resource consumption on the PDC, as it must maintain an active connection for the duration of the user's session. Furthermore, if this connection is lost, there is no way to reestablish it, and further authentications to the Samba server may fail (from a single client, till it disconnects).<div style="height: 0.50em;">
&#160;</div>
</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 0.00em;">
&#160;</div>
<b>Note</b><div style="height: 0.00em;">
&#160;</div>
<div style="height: 0.00em;">
&#160;</div>
If the client selects NTLMv2 authentication, then this mode of operation  <i>will fail</i><div style="height: 0.50em;">
&#160;</div>
</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 0.00em;">
&#160;</div>
<b>Note</b><div style="height: 0.00em;">
&#160;</div>
<div style="height: 0.00em;">
&#160;</div>
From the client's point of view, security = server is the same as security = user. It only affects how the server deals with the authentication, it does not in any way affect what the client sees.<div style="height: 0.50em;">
&#160;</div>
</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 0.00em;">
&#160;</div>
<b>Note</b><div style="height: 0.00em;">
&#160;</div>
<div style="height: 0.00em;">
&#160;</div>
This option is deprecated, and may be removed in future<div style="height: 0.50em;">
&#160;</div>
</div>
<i>Note</i> that the name of the resource being requested is  <i>not</i> sent to the server until after the server has successfully authenticated the client. This is why guest shares don't work in user level security without allowing the server to automatically map unknown users into the  <b>guest account</b>. See the  <b>map to guest</b> parameter for details on doing this.<div style="height: 1.00em;">
&#160;</div>
See also the section NOTE ABOUT USERNAME/PASSWORD VALIDATION.<div style="height: 1.00em;">
&#160;</div>
See also the  <b>password server</b> parameter and the  <b>encrypted passwords</b> parameter.<div style="height: 1.00em;">
&#160;</div>
<i>SECURITY = ADS</i><div style="height: 1.00em;">
&#160;</div>
In this mode, Samba will act as a domain member in an ADS realm. To operate in this mode, the machine running Samba will need to have Kerberos installed and configured and Samba will need to be joined to the ADS realm using the net utility.<div style="height: 1.00em;">
&#160;</div>
Note that this mode does NOT make Samba operate as a Active Directory Domain Controller.<div style="height: 1.00em;">
&#160;</div>
Read the chapter about Domain Membership in the HOWTO for details.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>security</i><i> = </i><i>USER</i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>security</i><i> = </i><i>DOMAIN</i><i> </i><div style="height: 1.00em;">
&#160;</div>
send spnego principal (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameter determines whether or not  <b>smbd</b>(8) will send the server-supplied principal sometimes given in the SPNEGO exchange.<div style="height: 1.00em;">
&#160;</div>
If enabled, Samba can attempt to help clients to use Kerberos to contact it, even when known only by IP address or a name not registered with our KDC as a service principal name. Kerberos relies on names, so ordinarily cannot function in this situation.<div style="height: 1.00em;">
&#160;</div>
If disabled, Samba will send the string not_defined_in_RFC4178@please_ignore as the 'rfc4178 hint', following the updated RFC and Windows 2008 behaviour in this area.<div style="height: 1.00em;">
&#160;</div>
Note that Windows XP SP2 and later versions already ignored this value in all circumstances.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>send spnego principal</i><i> = </i><i>no</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
server schannel (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This controls whether the server offers or even demands the use of the netlogon schannel.  <b>server schannel = no</b> does not offer the schannel,  <b>server schannel = auto</b> offers the schannel but does not enforce it, and  <b>server schannel = yes</b> denies access if the client is not able to speak netlogon schannel. This is only the case for Windows NT4 before SP4.<div style="height: 1.00em;">
&#160;</div>
Please note that with this set to no, you will have to apply the WindowsXP WinXP_SignOrSeal.reg registry patch found in the docs/registry subdirectory of the Samba distribution tarball.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>server schannel</i><i> = </i><i>auto</i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>server schannel</i><i> = </i><i>yes</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
server signing (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This controls whether the client is allowed or required to use SMB1 and SMB2 signing. Possible values are  <i>auto</i>,  <i>mandatory</i> and  <i>disabled</i>.<div style="height: 1.00em;">
&#160;</div>
When set to auto, SMB1 signing is offered, but not enforced. When set to mandatory, SMB1 signing is required and if set to disabled, SMB signing is not offered either.<div style="height: 1.00em;">
&#160;</div>
For the SMB2 protocol, by design, signing cannot be disabled. In the case where SMB2 is negotiated, if this parameter is set to  <i>disabled</i>, it will be treated as  <i>auto</i>. Setting it to  <i>mandatory</i> will still require SMB2 clients to use signing.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>server signing</i><i> = </i><i>Disabled</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
server string (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This controls what string will show up in the printer comment box in print manager and next to the IPC connection in net view. It can be any string that you wish to show to your users.<div style="height: 1.00em;">
&#160;</div>
It also sets what will appear in browse lists next to the machine name.<div style="height: 1.00em;">
&#160;</div>
A  <i>%v</i> will be replaced with the Samba version number.<div style="height: 1.00em;">
&#160;</div>
A  <i>%h</i> will be replaced with the hostname.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>server string</i><i> = </i><i>Samba %v</i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>server string</i><i> = </i><i>University of GNUs Samba Server</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
set directory (S)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
If set directory = no, then users of the service may not use the setdir command to change directory.<div style="height: 1.00em;">
&#160;</div>
The setdir command is only implemented in the Digital Pathworks client. See the Pathworks documentation for details.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>set directory</i><i> = </i><i>no</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
set primary group script (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
Thanks to the Posix subsystem in NT a Windows User has a primary group in addition to the auxiliary groups. This script sets the primary group in the unix userdatase when an administrator sets the primary group from the windows user manager or when fetching a SAM with net rpc vampire.  <i>%u</i> will be replaced with the user whose primary group is to be set.  <i>%g</i> will be replaced with the group to set.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>set primary group script</i><i> = </i><i></i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>set primary group script</i><i> = </i><i>/usr/sbin/usermod -g '%g' '%u'</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
set quota command (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
The set quota command should only be used whenever there is no operating system API available from the OS that samba can use.<div style="height: 1.00em;">
&#160;</div>
This option is only available if Samba was configured with the argument --with-sys-quotas or on linux when ./configure --with-quotas was used and a working quota api was found in the system. Most packages are configured with these options already.<div style="height: 1.00em;">
&#160;</div>
This parameter should specify the path to a script that can set quota for the specified arguments.<div style="height: 1.00em;">
&#160;</div>
The specified script should take the following arguments:<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;1 - quota type<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;1 - user quotas</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;2 - user default quotas (uid = -1)</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;3 - group quotas</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;4 - group default quotas (gid = -1)</div>
<div style="height: 1.00em;">
&#160;</div>
</div>
</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;2 - id (uid for user, gid for group, -1 if N/A)</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;3 - quota state (0 = disable, 1 = enable, 2 = enable and enforce)</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;4 - block softlimit</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;5 - block hardlimit</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;6 - inode softlimit</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;7 - inode hardlimit</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;8(optional) - block size, defaults to 1024</div>
<div style="height: 1.00em;">
&#160;</div>
The script should output at least one line of data on success. And nothing on failure.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>set quota command</i><i> = </i><i></i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>set quota command</i><i> = </i><i>/usr/local/sbin/set_quota</i><i> </i><div style="height: 1.00em;">
&#160;</div>
share:fake_fscaps (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This is needed to support some special application that makes QFSINFO calls to check whether we set the SPARSE_FILES bit (0x40). If this bit is not set that particular application refuses to work against Samba. With  <b>share:fake_fscaps = 64</b> the SPARSE_FILES file system capability flag is set. Use other decimal values to specify the bitmask you need to fake.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>share:fake_fscaps</i><i> = </i><i>0</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
share modes (S)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This enables or disables the honoring of the  <i>share modes</i> during a file open. These modes are used by clients to gain exclusive read or write access to a file.<div style="height: 1.00em;">
&#160;</div>
This is a deprecated option from old versions of Samba, and will be removed in the next major release.<div style="height: 1.00em;">
&#160;</div>
These open modes are not directly supported by UNIX, so they are simulated using shared memory.<div style="height: 1.00em;">
&#160;</div>
The share modes that are enabled by this option are the standard Windows share modes.<div style="height: 1.00em;">
&#160;</div>
This option gives full share compatibility and is enabled by default.<div style="height: 1.00em;">
&#160;</div>
You should  <i>NEVER</i> turn this parameter off as many Windows applications will break if you do so.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>share modes</i><i> = </i><i>yes</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
short preserve case (S)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This boolean parameter controls if new files which conform to 8.3 syntax, that is all in upper case and of suitable length, are created upper case, or if they are forced to be the  <b>default case</b>. This option can be use with  <b>preserve case = yes</b> to permit long filenames to retain their case, while short names are lowered.<div style="height: 1.00em;">
&#160;</div>
See the section on NAME MANGLING.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>short preserve case</i><i> = </i><i>yes</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
show add printer wizard (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
With the introduction of MS-RPC based printing support for Windows NT/2000 client in Samba 2.2, a &quot;Printers...&quot; folder will appear on Samba hosts in the share listing. Normally this folder will contain an icon for the MS Add Printer Wizard (APW). However, it is possible to disable this feature regardless of the level of privilege of the connected user.<div style="height: 1.00em;">
&#160;</div>
Under normal circumstances, the Windows NT/2000 client will open a handle on the printer server with OpenPrinterEx() asking for Administrator privileges. If the user does not have administrative access on the print server (i.e is not root or a member of the  <i>printer admin</i> group), the OpenPrinterEx() call fails and the client makes another open call with a request for a lower privilege level. This should succeed, however the APW icon will not be displayed.<div style="height: 1.00em;">
&#160;</div>
Disabling the  <i>show add printer wizard</i> parameter will always cause the OpenPrinterEx() on the server to fail. Thus the APW icon will never be displayed.<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 0.00em;">
&#160;</div>
<b>Note</b><div style="height: 0.00em;">
&#160;</div>
<div style="height: 0.00em;">
&#160;</div>
This does not prevent the same user from having administrative privilege on an individual printer.<div style="height: 0.50em;">
&#160;</div>
</div>
Default:  <i></i><i>show add printer wizard</i><i> = </i><i>yes</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
shutdown script (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This a full path name to a script called by  <b>smbd</b>(8) that should start a shutdown procedure.<div style="height: 1.00em;">
&#160;</div>
If the connected user posseses the  <b>SeRemoteShutdownPrivilege</b>, right, this command will be run as root.<div style="height: 1.00em;">
&#160;</div>
The %z %t %r %f variables are expanded as follows:<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;<i>%z</i> will be substituted with the shutdown message sent to the server.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;<i>%t</i> will be substituted with the number of seconds to wait before effectively starting the shutdown procedure.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;<i>%r</i> will be substituted with the switch  <i>-r</i>. It means reboot after shutdown for NT.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;<i>%f</i> will be substituted with the switch  <i>-f</i>. It means force the shutdown even if applications do not respond for NT.</div>
<div style="height: 1.00em;">
&#160;</div>
</div>
Shutdown script example:<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
#!/bin/bash<div class="spacer">
</div>
<br/>
time=$2<br/>
let time=&quot;${time} / 60&quot;<br/>
let time=&quot;${time} + 1&quot;<div class="spacer">
</div>
<br/>
/sbin/shutdown $3 $4 +$time $1 &amp;<div class="spacer">
</div>
<br/>
</div>
<div style="height: 1.00em;">
&#160;</div>
Shutdown does not return so we need to launch it in background.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>shutdown script</i><i> = </i><i></i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>shutdown script</i><i> = </i><i>/usr/local/samba/sbin/shutdown %m %t %r %f</i><i> </i><div style="height: 1.00em;">
&#160;</div>
smb2 max credits (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This option controls the maximum number of outstanding simultaneous SMB2 operations that Samba tells the client it will allow. This is similar to the  <b>max mux</b> parameter for SMB1. You should never need to set this parameter.<div style="height: 1.00em;">
&#160;</div>
The default is 8192 credits, which is the same as a Windows 2008R2 SMB2 server.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>smb2 max credits</i><i> = </i><i>8192</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
smb2 max read (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This option specifies the protocol value that  <b>smbd</b>(8) will return to a client, informing the client of the largest size that may be returned by a single SMB2 read call.<div style="height: 1.00em;">
&#160;</div>
The maximum is 65536 bytes (64KB), which is the same as a Windows Vista SMB2 server.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>smb2 max read</i><i> = </i><i>65536</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
smb2 max trans (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This option specifies the protocol value that  <b>smbd</b>(8) will return to a client, informing the client of the largest size of buffer that may be used in querying file meta-data via QUERY_INFO and related SMB2 calls.<div style="height: 1.00em;">
&#160;</div>
The maximum is 65536 bytes (64KB), which is the same as a Windows Vista SMB2 server.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>smb2 max trans</i><i> = </i><i>65536</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
smb2 max write (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This option specifies the protocol value that  <b>smbd</b>(8) will return to a client, informing the client of the largest size that may be sent to the server by a single SMB2 write call.<div style="height: 1.00em;">
&#160;</div>
The maximum is 65536 bytes (64KB), which is the same as a Windows Vista SMB2 server.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>smb2 max write</i><i> = </i><i>65536</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
smb encrypt (S)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This is a new feature introduced with Samba 3.2 and above. It is an extension to the SMB/CIFS protocol negotiated as part of the UNIX extensions. SMB encryption uses the GSSAPI (SSPI on Windows) ability to encrypt and sign every request/response in a SMB protocol stream. When enabled it provides a secure method of SMB/CIFS communication, similar to an ssh protected session, but using SMB/CIFS authentication to negotiate encryption and signing keys. Currently this is only supported by Samba 3.2 smbclient, and hopefully soon Linux CIFSFS and MacOS/X clients. Windows clients do not support this feature.<div style="height: 1.00em;">
&#160;</div>
This controls whether the remote client is allowed or required to use SMB encryption. Possible values are  <i>auto</i>,  <i>mandatory</i> and  <i>disabled</i>. This may be set on a per-share basis, but clients may chose to encrypt the entire session, not just traffic to a specific share. If this is set to mandatory then all traffic to a share  <i>must</i> must be encrypted once the connection has been made to the share. The server would return &quot;access denied&quot; to all non-encrypted requests on such a share. Selecting encrypted traffic reduces throughput as smaller packet sizes must be used (no huge UNIX style read/writes allowed) as well as the overhead of encrypting and signing all the data.<div style="height: 1.00em;">
&#160;</div>
If SMB encryption is selected, Windows style SMB signing (see the  <b>server signing</b> option) is no longer necessary, as the GSSAPI flags use select both signing and sealing of the data.<div style="height: 1.00em;">
&#160;</div>
When set to auto, SMB encryption is offered, but not enforced. When set to mandatory, SMB encryption is required and if set to disabled, SMB encryption can not be negotiated.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>smb encrypt</i><i> = </i><i>auto</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
smb passwd file (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This option sets the path to the encrypted smbpasswd file. By default the path to the smbpasswd file is compiled into Samba.<div style="height: 1.00em;">
&#160;</div>
An example of use is:<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
smb passwd file = /etc/samba/smbpasswd<br/>
</div>
<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>smb passwd file</i><i> = </i><i>${prefix}/private/smbpasswd</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
smb ports (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
Specifies which ports the server should listen on for SMB traffic.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>smb ports</i><i> = </i><i>445 139</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
socket address (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This option allows you to control what address Samba will listen for connections on. This is used to support multiple virtual interfaces on the one server, each with a different configuration.<div style="height: 1.00em;">
&#160;</div>
Setting this option should never be necessary on usual Samba servers running only one nmbd.<div style="height: 1.00em;">
&#160;</div>
By default Samba will accept connections on any address.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>socket address</i><i> = </i><i></i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>socket address</i><i> = </i><i>192.168.2.20</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
socket options (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This option allows you to set socket options to be used when talking with the client.<div style="height: 1.00em;">
&#160;</div>
Socket options are controls on the networking layer of the operating systems which allow the connection to be tuned.<div style="height: 1.00em;">
&#160;</div>
This option will typically be used to tune your Samba server for optimal performance for your local network. There is no way that Samba can know what the optimal parameters are for your net, so you must experiment and choose them yourself. We strongly suggest you read the appropriate documentation for your operating system first (perhaps man setsockopt will help).<div style="height: 1.00em;">
&#160;</div>
You may find that on some systems Samba will say &quot;Unknown socket option&quot; when you supply an option. This means you either incorrectly typed it or you need to add an include file to includes.h for your OS. If the latter is the case please send the patch to samba-technical@samba.org.<div style="height: 1.00em;">
&#160;</div>
Any of the supported socket options may be combined in any way you like, as long as your OS allows it.<div style="height: 1.00em;">
&#160;</div>
This is the list of socket options currently settable using this option:<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;SO_KEEPALIVE</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;SO_REUSEADDR</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;SO_BROADCAST</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;TCP_NODELAY</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;IPTOS_LOWDELAY</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;IPTOS_THROUGHPUT</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;SO_SNDBUF *</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;SO_RCVBUF *</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;SO_SNDLOWAT *</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;SO_RCVLOWAT *</div>
<div style="height: 1.00em;">
&#160;</div>
</div>
Those marked with a  <i>'*'</i> take an integer argument. The others can optionally take a 1 or 0 argument to enable or disable the option, by default they will be enabled if you don't specify 1 or 0.<div style="height: 1.00em;">
&#160;</div>
To specify an argument use the syntax SOME_OPTION = VALUE for example SO_SNDBUF = 8192. Note that you must not have any spaces before or after the = sign.<div style="height: 1.00em;">
&#160;</div>
If you are on a local network then a sensible option might be:<div style="height: 1.00em;">
&#160;</div>
socket options = IPTOS_LOWDELAY<div style="height: 1.00em;">
&#160;</div>
If you have a local network then you could try:<div style="height: 1.00em;">
&#160;</div>
socket options = IPTOS_LOWDELAY TCP_NODELAY<div style="height: 1.00em;">
&#160;</div>
If you are on a wide area network then perhaps try setting IPTOS_THROUGHPUT.<div style="height: 1.00em;">
&#160;</div>
Note that several of the options may cause your Samba server to fail completely. Use these options with caution!<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>socket options</i><i> = </i><i>TCP_NODELAY</i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>socket options</i><i> = </i><i>IPTOS_LOWDELAY</i><i> </i><div style="height: 1.00em;">
&#160;</div>
stat cache (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameter determines if  <b>smbd</b>(8) will use a cache in order to speed up case insensitive name mappings. You should never need to change this parameter.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>stat cache</i><i> = </i><i>yes</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
state directory (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
Usually, most of the TDB files are stored in the  <i>lock directory</i>. Since Samba 3.4.0, it is possible to differentiate between TDB files with persistent data and TDB files with non-persistent data using the  <i>state directory</i> and the  <i>cache directory</i> options.<div style="height: 1.00em;">
&#160;</div>
This option specifies the directory where TDB files containing persistent data will be stored.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>state directory</i><i> = </i><i>${prefix}/var/locks</i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>state directory</i><i> = </i><i>/var/run/samba/locks/state</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
store dos attributes (S)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
If this parameter is set Samba attempts to first read DOS attributes (SYSTEM, HIDDEN, ARCHIVE or READ-ONLY) from a filesystem extended attribute, before mapping DOS attributes to UNIX permission bits (such as occurs with  <b>map hidden</b> and  <b>map readonly</b>). When set, DOS attributes will be stored onto an extended attribute in the UNIX filesystem, associated with the file or directory. For no other mapping to occur as a fall-back, the parameters  <b>map hidden</b>,  <b>map system</b>,  <b>map archive</b> and  <b>map readonly</b> must be set to off. This parameter writes the DOS attributes as a string into the extended attribute named &quot;user.DOSATTRIB&quot;. This extended attribute is explicitly hidden from smbd clients requesting an EA list. On Linux the filesystem must have been mounted with the mount option user_xattr in order for extended attributes to work, also extended attributes must be compiled into the Linux kernel. In Samba 3.5.0 and above the &quot;user.DOSATTRIB&quot; extended attribute has been extended to store the create time for a file as well as the DOS attributes. This is done in a backwards compatible way so files created by Samba 3.5.0 and above can still have the DOS attribute read from this extended attribute by earlier versions of Samba, but they will not be able to read the create time stored there. Storing the create time separately from the normal filesystem meta-data allows Samba to faithfully reproduce NTFS semantics on top of a POSIX filesystem.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>store dos attributes</i><i> = </i><i>no</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
strict allocate (S)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This is a boolean that controls the handling of disk space allocation in the server. When this is set to  <b>yes</b> the server will change from UNIX behaviour of not committing real disk storage blocks when a file is extended to the Windows behaviour of actually forcing the disk system to allocate real storage blocks when a file is created or extended to be a given size. In UNIX terminology this means that Samba will stop creating sparse files.<div style="height: 1.00em;">
&#160;</div>
This option is really desgined for file systems that support fast allocation of large numbers of blocks such as extent-based file systems. On file systems that don't support extents (most notably ext3) this can make Samba slower. When you work with large files over &gt;100MB on file systems without extents you may even run into problems with clients running into timeouts.<div style="height: 1.00em;">
&#160;</div>
When you have an extent based filesystem it's likely that we can make use of unwritten extents which allows Samba to allocate even large amounts of space very fast and you will not see any timeout problems caused by strict allocate. With strict allocate in use you will also get much better out of quota messages in case you use quotas. Another advantage of activating this setting is that it will help to reduce file fragmentation.<div style="height: 1.00em;">
&#160;</div>
To give you an idea on which filesystems this setting might currently be a good option for you: XFS, ext4, btrfs, ocfs2 on Linux and JFS2 on AIX support unwritten extents. On Filesystems that do not support it, preallocation is probably an expensive operation where you will see reduced performance and risk to let clients run into timeouts when creating large files. Examples are ext3, ZFS, HFS+ and most others, so be aware if you activate this setting on those filesystems.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>strict allocate</i><i> = </i><i>no</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
strict locking (S)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This is an enumerated type that controls the handling of file locking in the server. When this is set to  <b>yes</b>, the server will check every read and write access for file locks, and deny access if locks exist. This can be slow on some systems.<div style="height: 1.00em;">
&#160;</div>
When strict locking is set to Auto (the default), the server performs file lock checks only on non-oplocked files. As most Windows redirectors perform file locking checks locally on oplocked files this is a good trade off for improved performance.<div style="height: 1.00em;">
&#160;</div>
When strict locking is disabled, the server performs file lock checks only when the client explicitly asks for them.<div style="height: 1.00em;">
&#160;</div>
Well-behaved clients always ask for lock checks when it is important. So in the vast majority of cases, strict locking = Auto or strict locking = no is acceptable.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>strict locking</i><i> = </i><i>Auto</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
strict sync (S)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
Many Windows applications (including the Windows 98 explorer shell) seem to confuse flushing buffer contents to disk with doing a sync to disk. Under UNIX, a sync call forces the process to be suspended until the kernel has ensured that all outstanding data in kernel disk buffers has been safely stored onto stable storage. This is very slow and should only be done rarely. Setting this parameter to  <b>no</b> (the default) means that  <b>smbd</b>(8) ignores the Windows applications requests for a sync call. There is only a possibility of losing data if the operating system itself that Samba is running on crashes, so there is little danger in this default setting. In addition, this fixes many performance problems that people have reported with the new Windows98 explorer shell file copies.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>strict sync</i><i> = </i><i>no</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
svcctl list (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This option defines a list of init scripts that smbd will use for starting and stopping Unix services via the Win32 ServiceControl API. This allows Windows administrators to utilize the MS Management Console plug-ins to manage a Unix server running Samba.<div style="height: 1.00em;">
&#160;</div>
The administrator must create a directory name svcctl in Samba's $(libdir) and create symbolic links to the init scripts in /etc/init.d/. The name of the links must match the names given as part of the  <i>svcctl list</i>.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>svcctl list</i><i> = </i><i></i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>svcctl list</i><i> = </i><i>cups postfix portmap httpd</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
sync always (S)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This is a boolean parameter that controls whether writes will always be written to stable storage before the write call returns. If this is  <b>no</b> then the server will be guided by the client's request in each write call (clients can set a bit indicating that a particular write should be synchronous). If this is  <b>yes</b> then every write will be followed by a fsync() call to ensure the data is written to disk. Note that the  <i>strict sync</i> parameter must be set to  <b>yes</b> in order for this parameter to have any effect.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>sync always</i><i> = </i><i>no</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
syslog only (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
If this parameter is set then Samba debug messages are logged into the system syslog only, and not to the debug log files. There still will be some logging to log.[sn]mbd even if  <i>syslog only</i> is enabled.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>syslog only</i><i> = </i><i>no</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
syslog (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameter maps how Samba debug messages are logged onto the system syslog logging levels. Samba debug level zero maps onto syslog  <b>LOG_ERR</b>, debug level one maps onto  <b>LOG_WARNING</b>, debug level two maps onto  <b>LOG_NOTICE</b>, debug level three maps onto LOG_INFO. All higher levels are mapped to  <b>LOG_DEBUG</b>.<div style="height: 1.00em;">
&#160;</div>
This parameter sets the threshold for sending messages to syslog. Only messages with debug level less than this value will be sent to syslog. There still will be some logging to log.[sn]mbd even if  <i>syslog only</i> is enabled.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>syslog</i><i> = </i><i>1</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
template homedir (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
When filling out the user information for a Windows NT user, the  <b>winbindd</b>(8) daemon uses this parameter to fill in the home directory for that user. If the string  <i>%D</i> is present it is substituted with the user's Windows NT domain name. If the string  <i>%U</i> is present it is substituted with the user's Windows NT user name.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>template homedir</i><i> = </i><i>/home/%D/%U</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
template shell (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
When filling out the user information for a Windows NT user, the  <b>winbindd</b>(8) daemon uses this parameter to fill in the login shell for that user.<div style="height: 1.00em;">
&#160;</div>
<i>No default</i></div>
<div style="height: 1.00em;">
&#160;</div>
time offset (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This deprecated parameter is a setting in minutes to add to the normal GMT to local time conversion. This is useful if you are serving a lot of PCs that have incorrect daylight saving time handling.<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 0.00em;">
&#160;</div>
<b>Note</b><div style="height: 0.00em;">
&#160;</div>
<div style="height: 0.00em;">
&#160;</div>
This option is deprecated, and will be removed in the next major release<div style="height: 0.50em;">
&#160;</div>
</div>
Default:  <i></i><i>time offset</i><i> = </i><i>0</i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>time offset</i><i> = </i><i>60</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
time server (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameter determines if  <b>nmbd</b>(8) advertises itself as a time server to Windows clients.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>time server</i><i> = </i><i>no</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
unix charset (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
Specifies the charset the unix machine Samba runs on uses. Samba needs to know this in order to be able to convert text to the charsets other SMB clients use.<div style="height: 1.00em;">
&#160;</div>
This is also the charset Samba will use when specifying arguments to scripts that it invokes.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>unix charset</i><i> = </i><i>UTF8</i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>unix charset</i><i> = </i><i>ASCII</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
unix extensions (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This boolean parameter controls whether Samba implements the CIFS UNIX extensions, as defined by HP. These extensions enable Samba to better serve UNIX CIFS clients by supporting features such as symbolic links, hard links, etc... These extensions require a similarly enabled client, and are of no current use to Windows clients.<div style="height: 1.00em;">
&#160;</div>
Note if this parameter is turned on, the  <b>wide links</b> parameter will automatically be disabled.<div style="height: 1.00em;">
&#160;</div>
See the parameter  <b>allow insecure wide links</b> if you wish to change this coupling between the two parameters.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>unix extensions</i><i> = </i><i>yes</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
unix password sync (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This boolean parameter controls whether Samba attempts to synchronize the UNIX password with the SMB password when the encrypted SMB password in the smbpasswd file is changed. If this is set to  <b>yes</b> the program specified in the  <i>passwd program</i> parameter is called  <i>AS ROOT</i> - to allow the new UNIX password to be set without access to the old UNIX password (as the SMB password change code has no access to the old password cleartext, only the new).<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>unix password sync</i><i> = </i><i>no</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
use client driver (S)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameter applies only to Windows NT/2000 clients. It has no effect on Windows 95/98/ME clients. When serving a printer to Windows NT/2000 clients without first installing a valid printer driver on the Samba host, the client will be required to install a local printer driver. From this point on, the client will treat the print as a local printer and not a network printer connection. This is much the same behavior that will occur when disable spoolss = yes.<div style="height: 1.00em;">
&#160;</div>
The differentiating factor is that under normal circumstances, the NT/2000 client will attempt to open the network printer using MS-RPC. The problem is that because the client considers the printer to be local, it will attempt to issue the OpenPrinterEx() call requesting access rights associated with the logged on user. If the user possesses local administator rights but not root privilege on the Samba host (often the case), the OpenPrinterEx() call will fail. The result is that the client will now display an &quot;Access Denied; Unable to connect&quot; message in the printer queue window (even though jobs may successfully be printed).<div style="height: 1.00em;">
&#160;</div>
If this parameter is enabled for a printer, then any attempt to open the printer with the PRINTER_ACCESS_ADMINISTER right is mapped to PRINTER_ACCESS_USE instead. Thus allowing the OpenPrinterEx() call to succeed.  <i>This parameter MUST not be enabled on a print share which has valid print driver installed on the Samba server.</i><div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>use client driver</i><i> = </i><i>no</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
use mmap (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This global parameter determines if the tdb internals of Samba can depend on mmap working correctly on the running system. Samba requires a coherent mmap/read-write system memory cache. Currently only HPUX does not have such a coherent cache, and so this parameter is set to  <b>no</b> by default on HPUX. On all other systems this parameter should be left alone. This parameter is provided to help the Samba developers track down problems with the tdb internal code.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>use mmap</i><i> = </i><i>yes</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
username level (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This option helps Samba to try and 'guess' at the real UNIX username, as many DOS clients send an all-uppercase username. By default Samba tries all lowercase, followed by the username with the first letter capitalized, and fails if the username is not found on the UNIX machine.<div style="height: 1.00em;">
&#160;</div>
If this parameter is set to non-zero the behavior changes. This parameter is a number that specifies the number of uppercase combinations to try while trying to determine the UNIX user name. The higher the number the more combinations will be tried, but the slower the discovery of usernames will be. Use this parameter when you have strange usernames on your UNIX machine, such as  <b>AstrangeUser </b>.<div style="height: 1.00em;">
&#160;</div>
This parameter is needed only on UNIX systems that have case sensitive usernames.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>username level</i><i> = </i><i>0</i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>username level</i><i> = </i><i>5</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
username map cache time (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
Mapping usernames with the  <b>username map</b> or  <b>username map script</b> features of Samba can be relatively expensive. During login of a user, the mapping is done several times. In particular, calling the  <b>username map script</b> can slow down logins if external databases have to be queried from the script being called.<div style="height: 1.00em;">
&#160;</div>
The parameter  <b>username map cache time</b> controls a mapping cache. It specifies the number of seconds a mapping from the username map file or script is to be efficiently cached. The default of 0 means no caching is done.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>username map cache time</i><i> = </i><i>0</i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>username map cache time</i><i> = </i><i>60</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
username map script (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This script is a mutually exclusive alternative to the  <b>username map</b> parameter. This parameter specifies and external program or script that must accept a single command line option (the username transmitted in the authentication request) and return a line line on standard output (the name to which the account should mapped). In this way, it is possible to store username map tables in an LDAP or NIS directory services.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>username map script</i><i> = </i><i></i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>username map script</i><i> = </i><i>/etc/samba/scripts/mapusers.sh</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
username map (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This option allows you to specify a file containing a mapping of usernames from the clients to the server. This can be used for several purposes. The most common is to map usernames that users use on DOS or Windows machines to those that the UNIX box uses. The other is to map multiple users to a single username so that they can more easily share files.<div style="height: 1.00em;">
&#160;</div>
Please note that for user or share mode security, the username map is applied prior to validating the user credentials. Domain member servers (domain or ads) apply the username map after the user has been successfully authenticated by the domain controller and require fully qualified enties in the map table (e.g. biddle = DOMAIN\foo).<div style="height: 1.00em;">
&#160;</div>
The map file is parsed line by line. Each line should contain a single UNIX username on the left then a '=' followed by a list of usernames on the right. The list of usernames on the right may contain names of the form @group in which case they will match any UNIX username in that group. The special client name '*' is a wildcard and matches any name. Each line of the map file may be up to 1023 characters long.<div style="height: 1.00em;">
&#160;</div>
The file is processed on each line by taking the supplied username and comparing it with each username on the right hand side of the '=' signs. If the supplied name matches any of the names on the right hand side then it is replaced with the name on the left. Processing then continues with the next line.<div style="height: 1.00em;">
&#160;</div>
If any line begins with a '#' or a ';' then it is ignored.<div style="height: 1.00em;">
&#160;</div>
If any line begins with an '!' then the processing will stop after that line if a mapping was done by the line. Otherwise mapping continues with every line being processed. Using '!' is most useful when you have a wildcard mapping line later in the file.<div style="height: 1.00em;">
&#160;</div>
For example to map from the name  <b>admin</b> or  <b>administrator</b> to the UNIX name  <b> root</b> you would use:<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
root = admin administrator<br/>
</div>
<div style="height: 1.00em;">
&#160;</div>
Or to map anyone in the UNIX group  <b>system</b> to the UNIX name  <b>sys</b> you would use:<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
sys = @system<br/>
</div>
<div style="height: 1.00em;">
&#160;</div>
You can have as many mappings as you like in a username map file.<div style="height: 1.00em;">
&#160;</div>
If your system supports the NIS NETGROUP option then the netgroup database is checked before the /etc/group database for matching groups.<div style="height: 1.00em;">
&#160;</div>
You can map Windows usernames that have spaces in them by using double quotes around the name. For example:<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
tridge = &quot;Andrew Tridgell&quot;<br/>
</div>
<div style="height: 1.00em;">
&#160;</div>
would map the windows username &quot;Andrew Tridgell&quot; to the unix username &quot;tridge&quot;.<div style="height: 1.00em;">
&#160;</div>
The following example would map mary and fred to the unix user sys, and map the rest to guest. Note the use of the '!' to tell Samba to stop processing if it gets a match on that line:<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
!sys = mary fred<br/>
guest = *<br/>
</div>
<div style="height: 1.00em;">
&#160;</div>
Note that the remapping is applied to all occurrences of usernames. Thus if you connect to \\server\fred and  <b>fred</b> is remapped to  <b>mary</b> then you will actually be connecting to \\server\mary and will need to supply a password suitable for  <b>mary</b> not  <b>fred</b>. The only exception to this is the username passed to the  <b>password server</b> (if you have one). The password server will receive whatever username the client supplies without modification.<div style="height: 1.00em;">
&#160;</div>
Also note that no reverse mapping is done. The main effect this has is with printing. Users who have been mapped may have trouble deleting print jobs as PrintManager under WfWg will think they don't own the print job.<div style="height: 1.00em;">
&#160;</div>
Samba versions prior to 3.0.8 would only support reading the fully qualified username (e.g.: DOMAIN\user) from the username map when performing a kerberos login from a client. However, when looking up a map entry for a user authenticated by NTLM[SSP], only the login name would be used for matches. This resulted in inconsistent behavior sometimes even on the same server.<div style="height: 1.00em;">
&#160;</div>
The following functionality is obeyed in version 3.0.8 and later:<div style="height: 1.00em;">
&#160;</div>
When performing local authentication, the username map is applied to the login name before attempting to authenticate the connection.<div style="height: 1.00em;">
&#160;</div>
When relying upon a external domain controller for validating authentication requests, smbd will apply the username map to the fully qualified username (i.e. DOMAIN\user) only after the user has been successfully authenticated.<div style="height: 1.00em;">
&#160;</div>
An example of use is:<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
username map = /usr/local/samba/lib/users.map<br/>
</div>
<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>username map</i><i> = </i><i> # no username map</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
user<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameter is a synonym for username.</div>
<div style="height: 1.00em;">
&#160;</div>
users<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameter is a synonym for username.</div>
<div style="height: 1.00em;">
&#160;</div>
username (S)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
Multiple users may be specified in a comma-delimited list, in which case the supplied password will be tested against each username in turn (left to right).<div style="height: 1.00em;">
&#160;</div>
The deprecated  <i>username</i> line is needed only when the PC is unable to supply its own username. This is the case for the COREPLUS protocol or where your users have different WfWg usernames to UNIX usernames. In both these cases you may also be better using the \\server\share%user syntax instead.<div style="height: 1.00em;">
&#160;</div>
The  <i>username</i> line is not a great solution in many cases as it means Samba will try to validate the supplied password against each of the usernames in the  <i>username</i> line in turn. This is slow and a bad idea for lots of users in case of duplicate passwords. You may get timeouts or security breaches using this parameter unwisely.<div style="height: 1.00em;">
&#160;</div>
Samba relies on the underlying UNIX security. This parameter does not restrict who can login, it just offers hints to the Samba server as to what usernames might correspond to the supplied password. Users can login as whoever they please and they will be able to do no more damage than if they started a telnet session. The daemon runs as the user that they log in as, so they cannot do anything that user cannot do.<div style="height: 1.00em;">
&#160;</div>
To restrict a service to a particular set of users you can use the  <b>valid users</b> parameter.<div style="height: 1.00em;">
&#160;</div>
If any of the usernames begin with a '@' then the name will be looked up first in the NIS netgroups list (if Samba is compiled with netgroup support), followed by a lookup in the UNIX groups database and will expand to a list of all users in the group of that name.<div style="height: 1.00em;">
&#160;</div>
If any of the usernames begin with a '+' then the name will be looked up only in the UNIX groups database and will expand to a list of all users in the group of that name.<div style="height: 1.00em;">
&#160;</div>
If any of the usernames begin with a '&amp;' then the name will be looked up only in the NIS netgroups database (if Samba is compiled with netgroup support) and will expand to a list of all users in the netgroup group of that name.<div style="height: 1.00em;">
&#160;</div>
Note that searching though a groups database can take quite some time, and some clients may time out during the search.<div style="height: 1.00em;">
&#160;</div>
See the section NOTE ABOUT USERNAME/PASSWORD VALIDATION for more information on how this parameter determines access to the services.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>username</i><i> = </i><i> # The guest account if a guest service, else &lt;empty string&gt;.</i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>username</i><i> = </i><i>fred, mary, jack, jane, @users, @pcgroup</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
usershare allow guests (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameter controls whether user defined shares are allowed to be accessed by non-authenticated users or not. It is the equivalent of allowing people who can create a share the option of setting  <i>guest ok = yes</i> in a share definition. Due to its security sensitive nature, the default is set to off.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>usershare allow guests</i><i> = </i><i>no</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
usershare max shares (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameter specifies the number of user defined shares that are allowed to be created by users belonging to the group owning the usershare directory. If set to zero (the default) user defined shares are ignored.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>usershare max shares</i><i> = </i><i>0</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
usershare owner only (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameter controls whether the pathname exported by a user defined shares must be owned by the user creating the user defined share or not. If set to True (the default) then smbd checks that the directory path being shared is owned by the user who owns the usershare file defining this share and refuses to create the share if not. If set to False then no such check is performed and any directory path may be exported regardless of who owns it.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>usershare owner only</i><i> = </i><i>True</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
usershare path (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameter specifies the absolute path of the directory on the filesystem used to store the user defined share definition files. This directory must be owned by root, and have no access for other, and be writable only by the group owner. In addition the &quot;sticky&quot; bit must also be set, restricting rename and delete to owners of a file (in the same way the /tmp directory is usually configured). Members of the group owner of this directory are the users allowed to create usershares. If this parameter is undefined then no user defined shares are allowed.<div style="height: 1.00em;">
&#160;</div>
For example, a valid usershare directory might be /usr/local/samba/lib/usershares, set up as follows.<div style="height: 1.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
	ls -ld /usr/local/samba/lib/usershares/<br/>
	drwxrwx--T  2 root power_users 4096 2006-05-05 12:27 /usr/local/samba/lib/usershares/<br/>
	<br/>
</div>
<div style="height: 1.00em;">
&#160;</div>
In this case, only members of the group &quot;power_users&quot; can create user defined shares.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>usershare path</i><i> = </i><i>NULL</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
usershare prefix allow list (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameter specifies a list of absolute pathnames the root of which are allowed to be exported by user defined share definitions. If the pathname to be exported doesn't start with one of the strings in this list, the user defined share will not be allowed. This allows the Samba administrator to restrict the directories on the system that can be exported by user defined shares.<div style="height: 1.00em;">
&#160;</div>
If there is a &quot;usershare prefix deny list&quot; and also a &quot;usershare prefix allow list&quot; the deny list is processed first, followed by the allow list, thus leading to the most restrictive interpretation.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>usershare prefix allow list</i><i> = </i><i>NULL</i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>usershare prefix allow list</i><i> = </i><i>/home /data /space</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
usershare prefix deny list (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameter specifies a list of absolute pathnames the root of which are NOT allowed to be exported by user defined share definitions. If the pathname exported starts with one of the strings in this list the user defined share will not be allowed. Any pathname not starting with one of these strings will be allowed to be exported as a usershare. This allows the Samba administrator to restrict the directories on the system that can be exported by user defined shares.<div style="height: 1.00em;">
&#160;</div>
If there is a &quot;usershare prefix deny list&quot; and also a &quot;usershare prefix allow list&quot; the deny list is processed first, followed by the allow list, thus leading to the most restrictive interpretation.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>usershare prefix deny list</i><i> = </i><i>NULL</i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>usershare prefix deny list</i><i> = </i><i>/etc /dev /private</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
usershare template share (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
User defined shares only have limited possible parameters such as path, guest ok, etc. This parameter allows usershares to &quot;cloned&quot; from an existing share. If &quot;usershare template share&quot; is set to the name of an existing share, then all usershares created have their defaults set from the parameters set on this share.<div style="height: 1.00em;">
&#160;</div>
The target share may be set to be invalid for real file sharing by setting the parameter &quot;-valid = False&quot; on the template share definition. This causes it not to be seen as a real exported share but to be able to be used as a template for usershares.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>usershare template share</i><i> = </i><i>NULL</i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>usershare template share</i><i> = </i><i>template_share</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
use sendfile (S)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
If this parameter is  <b>yes</b>, and the  <b>sendfile()</b> system call is supported by the underlying operating system, then some SMB read calls (mainly ReadAndX and ReadRaw) will use the more efficient sendfile system call for files that are exclusively oplocked. This may make more efficient use of the system CPU's and cause Samba to be faster. Samba automatically turns this off for clients that use protocol levels lower than NT LM 0.12 and when it detects a client is Windows 9x (using sendfile from Linux will cause these clients to fail).<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>use sendfile</i><i> = </i><i>false</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
use spnego (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This deprecated variable controls controls whether samba will try to use Simple and Protected NEGOciation (as specified by rfc2478) with WindowsXP and Windows2000 clients to agree upon an authentication mechanism.<div style="height: 1.00em;">
&#160;</div>
Unless further issues are discovered with our SPNEGO implementation, there is no reason this should ever be disabled.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>use spnego</i><i> = </i><i>yes</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
utmp directory (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameter is only available if Samba has been configured and compiled with the option --with-utmp. It specifies a directory pathname that is used to store the utmp or utmpx files (depending on the UNIX system) that record user connections to a Samba server. By default this is not set, meaning the system will use whatever utmp file the native system is set to use (usually /var/run/utmp on Linux).<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>utmp directory</i><i> = </i><i> # Determined automatically</i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>utmp directory</i><i> = </i><i>/var/run/utmp</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
utmp (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This boolean parameter is only available if Samba has been configured and compiled with the option --with-utmp. If set to  <b>yes</b> then Samba will attempt to add utmp or utmpx records (depending on the UNIX system) whenever a connection is made to a Samba server. Sites may use this to record the user connecting to a Samba share.<div style="height: 1.00em;">
&#160;</div>
Due to the requirements of the utmp record, we are required to create a unique identifier for the incoming user. Enabling this option creates an n^2 algorithm to find this number. This may impede performance on large installations.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>utmp</i><i> = </i><i>no</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
valid users (S)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This is a list of users that should be allowed to login to this service. Names starting with '@', '+' and '&amp;' are interpreted using the same rules as described in the  <i>invalid users</i> parameter.<div style="height: 1.00em;">
&#160;</div>
If this is empty (the default) then any user can login. If a username is in both this list and the  <i>invalid users</i> list then access is denied for that user.<div style="height: 1.00em;">
&#160;</div>
The current servicename is substituted for  <i>%S</i>. This is useful in the [homes] section.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>valid users</i><i> = </i><i> # No valid users list (anyone can login) </i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>valid users</i><i> = </i><i>greg, @pcusers</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
-valid (S)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameter indicates whether a share is valid and thus can be used. When this parameter is set to false, the share will be in no way visible nor accessible.<div style="height: 1.00em;">
&#160;</div>
This option should not be used by regular users but might be of help to developers. Samba uses this option internally to mark shares as deleted.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>-valid</i><i> = </i><i>yes</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
veto files (S)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This is a list of files and directories that are neither visible nor accessible. Each entry in the list must be separated by a '/', which allows spaces to be included in the entry. '*' and '?' can be used to specify multiple files or directories as in DOS wildcards.<div style="height: 1.00em;">
&#160;</div>
Each entry must be a unix path, not a DOS path and must  <i>not</i> include the unix directory separator '/'.<div style="height: 1.00em;">
&#160;</div>
Note that the  <b>case sensitive</b> option is applicable in vetoing files.<div style="height: 1.00em;">
&#160;</div>
One feature of the veto files parameter that it is important to be aware of is Samba's behaviour when trying to delete a directory. If a directory that is to be deleted contains nothing but veto files this deletion will  <i>fail</i> unless you also set the  <b>delete veto files</b> parameter to  <i>yes</i>.<div style="height: 1.00em;">
&#160;</div>
Setting this parameter will affect the performance of Samba, as it will be forced to check all files and directories for a match as they are scanned.<div style="height: 1.00em;">
&#160;</div>
Examples of use include:<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
; Veto any files containing the word Security,<br/>
; any ending in .tmp, and any directory containing the<br/>
; word root.<br/>
veto files = /*Security*/*.tmp/*root*/<div class="spacer">
</div>
<br/>
; Veto the Apple specific files that a NetAtalk server<br/>
; creates.<br/>
veto files = /.AppleDouble/.bin/.AppleDesktop/Network Trash Folder/<br/>
</div>
<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>veto files</i><i> = </i><i>No files or directories are vetoed.</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
veto oplock files (S)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameter is only valid when the  <b>oplocks</b> parameter is turned on for a share. It allows the Samba administrator to selectively turn off the granting of oplocks on selected files that match a wildcarded list, similar to the wildcarded list used in the  <b>veto files</b> parameter.<div style="height: 1.00em;">
&#160;</div>
You might want to do this on files that you know will be heavily contended for by clients. A good example of this is in the NetBench SMB benchmark program, which causes heavy client contention for files ending in .SEM. To cause Samba not to grant oplocks on these files you would use the line (either in the [global] section or in the section for the particular NetBench share.<div style="height: 1.00em;">
&#160;</div>
An example of use is:<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
veto oplock files = /.*SEM/<br/>
</div>
<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>veto oplock files</i><i> = </i><i> # No files are vetoed for oplock grants</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
vfs object<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameter is a synonym for vfs objects.</div>
<div style="height: 1.00em;">
&#160;</div>
vfs objects (S)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameter specifies the backend names which are used for Samba VFS I/O operations. By default, normal disk I/O operations are used but these can be overloaded with one or more VFS objects.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>vfs objects</i><i> = </i><i></i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>vfs objects</i><i> = </i><i>extd_audit recycle</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
volume (S)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This allows you to override the volume label returned for a share. Useful for CDROMs with installation programs that insist on a particular volume label.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>volume</i><i> = </i><i> # the name of the share</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
wide links (S)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameter controls whether or not links in the UNIX file system may be followed by the server. Links that point to areas within the directory tree exported by the server are always allowed; this parameter controls access only to areas that are outside the directory tree being exported.<div style="height: 1.00em;">
&#160;</div>
Note: Turning this parameter on when UNIX extensions are enabled will allow UNIX clients to create symbolic links on the share that can point to files or directories outside restricted path exported by the share definition. This can cause access to areas outside of the share. Due to this problem, this parameter will be automatically disabled (with a message in the log file) if the  <b>unix extensions</b> option is on.<div style="height: 1.00em;">
&#160;</div>
See the parameter  <b>allow insecure wide links</b> if you wish to change this coupling between the two parameters.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>wide links</i><i> = </i><i>no</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
winbind cache time (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameter specifies the number of seconds the  <b>winbindd</b>(8) daemon will cache user and group information before querying a Windows NT server again.<div style="height: 1.00em;">
&#160;</div>
This does not apply to authentication requests, these are always evaluated in real time unless the  <b>winbind offline logon</b> option has been enabled.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>winbind cache time</i><i> = </i><i>300</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
winbind enum groups (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
On large installations using  <b>winbindd</b>(8) it may be necessary to suppress the enumeration of groups through the setgrent(), getgrent() and endgrent() group of system calls. If the  <i>winbind enum groups</i> parameter is  <b>no</b>, calls to the getgrent() system call will not return any data.<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 0.00em;">
&#160;</div>
<b>Warning</b><div style="height: 0.00em;">
&#160;</div>
<div style="height: 0.00em;">
&#160;</div>
Turning off group enumeration may cause some programs to behave oddly.<div style="height: 0.50em;">
&#160;</div>
</div>
Default:  <i></i><i>winbind enum groups</i><i> = </i><i>no</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
winbind enum users (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
On large installations using  <b>winbindd</b>(8) it may be necessary to suppress the enumeration of users through the setpwent(), getpwent() and endpwent() group of system calls. If the  <i>winbind enum users</i> parameter is  <b>no</b>, calls to the getpwent system call will not return any data.<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 0.00em;">
&#160;</div>
<b>Warning</b><div style="height: 0.00em;">
&#160;</div>
<div style="height: 0.00em;">
&#160;</div>
Turning off user enumeration may cause some programs to behave oddly. For example, the finger program relies on having access to the full user list when searching for matching usernames.<div style="height: 0.50em;">
&#160;</div>
</div>
Default:  <i></i><i>winbind enum users</i><i> = </i><i>no</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
winbind expand groups (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This option controls the maximum depth that winbindd will traverse when flattening nested group memberships of Windows domain groups. This is different from the  <b>winbind nested groups</b> option which implements the Windows NT4 model of local group nesting. The &quot;winbind expand groups&quot; parameter specifically applies to the membership of domain groups.<div style="height: 1.00em;">
&#160;</div>
Be aware that a high value for this parameter can result in system slowdown as the main parent winbindd daemon must perform the group unrolling and will be unable to answer incoming NSS or authentication requests during this time.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>winbind expand groups</i><i> = </i><i>1</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
winbind max clients (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameter specifies the maximum number of clients the  <b>winbindd</b>(8) daemon can connect with.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>winbind max clients</i><i> = </i><i>200</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
winbind max domain connections (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameter specifies the maximum number of simultaneous connections that the  <b>winbindd</b>(8) daemon should open to the domain controller of one domain. Setting this parameter to a value greater than 1 can improve scalability with many simultaneous winbind requests, some of which might be slow.<div style="height: 1.00em;">
&#160;</div>
Note that if  <b>winbind offline logon</b> is set to  <b>Yes</b>, then only one DC connection is allowed per domain, regardless of this setting.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>winbind max domain connections</i><i> = </i><i>1</i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>winbind max domain connections</i><i> = </i><i>10</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
winbind nested groups (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
If set to yes, this parameter activates the support for nested groups. Nested groups are also called local groups or aliases. They work like their counterparts in Windows: Nested groups are defined locally on any machine (they are shared between DC's through their SAM) and can contain users and global groups from any trusted SAM. To be able to use nested groups, you need to run nss_winbind.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>winbind nested groups</i><i> = </i><i>yes</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
winbind normalize names (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameter controls whether winbindd will replace whitespace in user and group names with an underscore (_) character. For example, whether the name &quot;Space Kadet&quot; should be replaced with the string &quot;space_kadet&quot;. Frequently Unix shell scripts will have difficulty with usernames contains whitespace due to the default field separator in the shell. If your domain possesses names containing the underscore character, this option may cause problems unless the name aliasing feature is supported by your nss_info plugin.<div style="height: 1.00em;">
&#160;</div>
This feature also enables the name aliasing API which can be used to make domain user and group names to a non-qualified version. Please refer to the manpage for the configured idmap and nss_info plugin for the specifics on how to configure name aliasing for a specific configuration. Name aliasing takes precedence (and is mutually exclusive) over the whitespace replacement mechanism discussed previsouly.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>winbind normalize names</i><i> = </i><i>no</i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>winbind normalize names</i><i> = </i><i>yes</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
winbind nss info (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameter is designed to control how Winbind retrieves Name Service Information to construct a user's home directory and login shell. Currently the following settings are available:<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;<i>template</i> - The default, using the parameters of  <i>template shell</i> and  <i>template homedir</i>)</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;<i>&lt;sfu | rfc2307 &gt;</i> - When Samba is running in security = ads and your Active Directory Domain Controller does support the Microsoft &quot;Services for Unix&quot; (SFU) LDAP schema, winbind can retrieve the login shell and the home directory attributes directly from your Directory Server. Note that retrieving UID and GID from your ADS-Server requires to use  <i>idmap config DOMAIN:backend</i> = ad as well.</div>
<div style="height: 1.00em;">
&#160;</div>
</div>
<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>winbind nss info</i><i> = </i><i>template</i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>winbind nss info</i><i> = </i><i>sfu</i><i> </i><div style="height: 1.00em;">
&#160;</div>
winbind offline logon (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameter is designed to control whether Winbind should allow to login with the  <i>pam_winbind</i> module using Cached Credentials. If enabled, winbindd will store user credentials from successful logins encrypted in a local cache.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>winbind offline logon</i><i> = </i><i>false</i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>winbind offline logon</i><i> = </i><i>true</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
winbind reconnect delay (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameter specifies the number of seconds the  <b>winbindd</b>(8) daemon will wait between attempts to contact a Domain controller for a domain that is determined to be down or not contactable.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>winbind reconnect delay</i><i> = </i><i>30</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
winbind refresh tickets (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameter is designed to control whether Winbind should refresh Kerberos Tickets retrieved using the  <i>pam_winbind</i> module.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>winbind refresh tickets</i><i> = </i><i>false</i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>winbind refresh tickets</i><i> = </i><i>true</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
winbind rpc only (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
Setting this parameter to yes forces winbindd to use RPC instead of LDAP to retrieve information from Domain Controllers.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>winbind rpc only</i><i> = </i><i>no</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
winbind separator (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameter allows an admin to define the character used when listing a username of the form of  <i>DOMAIN </i>\<i>user</i>. This parameter is only applicable when using the pam_winbind.so and nss_winbind.so modules for UNIX services.<div style="height: 1.00em;">
&#160;</div>
Please note that setting this parameter to + causes problems with group membership at least on glibc systems, as the character + is used as a special character for NIS in /etc/group.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>winbind separator</i><i> = </i><i>'\'</i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>winbind separator</i><i> = </i><i>+</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
winbind trusted domains only (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameter is designed to allow Samba servers that are members of a Samba controlled domain to use UNIX accounts distributed via NIS, rsync, or LDAP as the uid's for winbindd users in the hosts primary domain. Therefore, the user DOMAIN\user1 would be mapped to the account user1 in /etc/passwd instead of allocating a new uid for him or her.<div style="height: 1.00em;">
&#160;</div>
This parameter is now deprecated in favor of the newer idmap_nss backend. Refer to the  <b>idmap_nss</b>(8) man page for more information.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>winbind trusted domains only</i><i> = </i><i>no</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
winbind use default domain (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameter specifies whether the  <b>winbindd</b>(8) daemon should operate on users without domain component in their username. Users without a domain component are treated as is part of the winbindd server's own domain. While this does not benefit Windows users, it makes SSH, FTP and e-mail function in a way much closer to the way they would in a native unix system.<div style="height: 1.00em;">
&#160;</div>
This option should be avoided if possible. It can cause confusion about responsibilities for a user or group. In many situations it is not clear whether winbind or /etc/passwd should be seen as authoritative for a user, likewise for groups.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>winbind use default domain</i><i> = </i><i>no</i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>winbind use default domain</i><i> = </i><i>yes</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
wins hook (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
When Samba is running as a WINS server this allows you to call an external program for all changes to the WINS database. The primary use for this option is to allow the dynamic update of external name resolution databases such as dynamic DNS.<div style="height: 1.00em;">
&#160;</div>
The wins hook parameter specifies the name of a script or executable that will be called as follows:<div style="height: 1.00em;">
&#160;</div>
wins_hook operation name nametype ttl IP_list<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;The first argument is the operation and is one of &quot;add&quot;, &quot;delete&quot;, or &quot;refresh&quot;. In most cases the operation can be ignored as the rest of the parameters provide sufficient information. Note that &quot;refresh&quot; may sometimes be called when the name has not previously been added, in that case it should be treated as an add.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;The second argument is the NetBIOS name. If the name is not a legal name then the wins hook is not called. Legal names contain only letters, digits, hyphens, underscores and periods.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;The third argument is the NetBIOS name type as a 2 digit hexadecimal number.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;The fourth argument is the TTL (time to live) for the name in seconds.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;The fifth and subsequent arguments are the IP addresses currently registered for that name. If this list is empty then the name should be deleted.</div>
<div style="height: 1.00em;">
&#160;</div>
</div>
An example script that calls the BIND dynamic DNS update program nsupdate is provided in the examples directory of the Samba source code.<div style="height: 1.00em;">
&#160;</div>
<i>No default</i><div style="height: 1.00em;">
&#160;</div>
wins proxy (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This is a boolean that controls if  <b>nmbd</b>(8) will respond to broadcast name queries on behalf of other hosts. You may need to set this to  <b>yes</b> for some older clients.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>wins proxy</i><i> = </i><i>no</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
wins server (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This specifies the IP address (or DNS name: IP address for preference) of the WINS server that  <b>nmbd</b>(8) should register with. If you have a WINS server on your network then you should set this to the WINS server's IP.<div style="height: 1.00em;">
&#160;</div>
You should point this at your WINS server if you have a multi-subnetted network.<div style="height: 1.00em;">
&#160;</div>
If you want to work in multiple namespaces, you can give every wins server a 'tag'. For each tag, only one (working) server will be queried for a name. The tag should be separated from the ip address by a colon.<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<div style="height: 0.00em;">
&#160;</div>
<b>Note</b><div style="height: 0.00em;">
&#160;</div>
<div style="height: 0.00em;">
&#160;</div>
You need to set up Samba to point to a WINS server if you have multiple subnets and wish cross-subnet browsing to work correctly.<div style="height: 0.50em;">
&#160;</div>
</div>
See the chapter in the Samba3-HOWTO on Network Browsing.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>wins server</i><i> = </i><i></i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>wins server</i><i> = </i><i>mary:192.9.200.1 fred:192.168.3.199 mary:192.168.2.61 # For this example when querying a certain name, 192.19.200.1 will be asked first and if that doesn't respond 192.168.2.61. If either of those doesn't know the name 192.168.3.199 will be queried.</i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>wins server</i><i> = </i><i>192.9.200.1 192.168.2.61</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
wins support (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This boolean controls if the  <b>nmbd</b>(8) process in Samba will act as a WINS server. You should not set this to  <b>yes</b> unless you have a multi-subnetted network and you wish a particular nmbd to be your WINS server. Note that you should  <i>NEVER</i> set this to  <b>yes</b> on more than one machine in your network.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>wins support</i><i> = </i><i>no</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
workgroup (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This controls what workgroup your server will appear to be in when queried by clients. Note that this parameter also controls the Domain name used with the  <b>security = domain</b> setting.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>workgroup</i><i> = </i><i>WORKGROUP</i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>workgroup</i><i> = </i><i>MYGROUP</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
writable<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameter is a synonym for writeable.</div>
<div style="height: 1.00em;">
&#160;</div>
writeable (S)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
Inverted synonym for  <b>read only</b>.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>writeable</i><i> = </i><i>no</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
write cache size (S)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
If this integer parameter is set to non-zero value, Samba will create an in-memory cache for each oplocked file (it does  <i>not</i> do this for non-oplocked files). All writes that the client does not request to be flushed directly to disk will be stored in this cache if possible. The cache is flushed onto disk when a write comes in whose offset would not fit into the cache or when the file is closed by the client. Reads for the file are also served from this cache if the data is stored within it.<div style="height: 1.00em;">
&#160;</div>
This cache allows Samba to batch client writes into a more efficient write size for RAID disks (i.e. writes may be tuned to be the RAID stripe size) and can improve performance on systems where the disk subsystem is a bottleneck but there is free memory for userspace programs.<div style="height: 1.00em;">
&#160;</div>
The integer parameter specifies the size of this cache (per oplocked file) in bytes.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>write cache size</i><i> = </i><i>0</i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>write cache size</i><i> = </i><i>262144 # for a 256k cache size per file</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
write list (S)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This is a list of users that are given read-write access to a service. If the connecting user is in this list then they will be given write access, no matter what the  <b>read only</b> option is set to. The list can include group names using the @group syntax.<div style="height: 1.00em;">
&#160;</div>
Note that if a user is in both the read list and the write list then they will be given write access.<div style="height: 1.00em;">
&#160;</div>
By design, this parameter will not work with the  <b>security = share</b> in Samba 3.0.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>write list</i><i> = </i><i></i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>write list</i><i> = </i><i>admin, root, @staff</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
write raw (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameter controls whether or not the server will support raw write SMB's when transferring data from clients. You should never need to change this parameter.<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>write raw</i><i> = </i><i>yes</i><i> </i></div>
<div style="height: 1.00em;">
&#160;</div>
wtmp directory (G)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
This parameter is only available if Samba has been configured and compiled with the option --with-utmp. It specifies a directory pathname that is used to store the wtmp or wtmpx files (depending on the UNIX system) that record user connections to a Samba server. The difference with the utmp directory is the fact that user info is kept after a user has logged out.<div style="height: 1.00em;">
&#160;</div>
By default this is not set, meaning the system will use whatever utmp file the native system is set to use (usually /var/run/wtmp on Linux).<div style="height: 1.00em;">
&#160;</div>
Default:  <i></i><i>wtmp directory</i><i> = </i><i></i><i> </i><div style="height: 1.00em;">
&#160;</div>
Example:  <i></i><i>wtmp directory</i><i> = </i><i>/var/log/wtmp</i><i> </i></div>
</div>
<div class="section">
<h1>WARNINGS</h1> Although the configuration file permits service names to contain spaces, your client software may not. Spaces will be ignored in comparisons anyway, so it shouldn't be a problem - but be aware of the possibility.<div class="spacer">
</div>
On a similar note, many clients - especially DOS clients - limit service names to eight characters.  <b>smbd</b>(8) has no such limitation, but attempts to connect from such clients will fail if they truncate the service names. For this reason you should probably keep your service names down to eight characters in length.<div class="spacer">
</div>
Use of the [homes] and [printers] special sections make life for an administrator easy, but the various combinations of default attributes can be tricky. Take extreme care when designing these sections. In particular, ensure that the permissions on spool directories are correct.</div>
<div class="section">
<h1>VERSION</h1> This man page is correct for version 3 of the Samba suite.</div>
<div class="section">
<h1>SEE ALSO</h1><div style="height: 1.00em;">
&#160;</div>
<b>samba</b>(7),  <b>smbpasswd</b>(8),  <b>swat</b>(8),  <b>smbd</b>(8),  <b>nmbd</b>(8),  <b>smbclient</b>(1),  <b>nmblookup</b>(1),  <b>testparm</b>(1).</div>
<div class="section">
<h1>AUTHOR</h1> The original Samba software and related utilities were created by Andrew Tridgell. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed.<div class="spacer">
</div>
The original Samba man pages were written by Karl Auer. The man page sources were converted to YODL format (another excellent piece of Open Source software, available at ftp://ftp.icce.rug.nl/pub/unix/) and updated for the Samba 2.0 release by Jeremy Allison. The conversion to DocBook for Samba 2.2 was done by Gerald Carter. The conversion to DocBook XML 4.2 for Samba 3.0 was done by Alexander Bokovoy.</div>
<table class="foot">
<tr>
<td class="foot-date">
09/18/2013</td>
<td class="foot-os">
Samba 3.6</td>
</tr>
</table>
</div>
</body>
</html>

