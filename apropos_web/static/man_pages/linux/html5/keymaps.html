<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/linux/style.css" type="text/css" media="all"/>
<title>
KEYMAPS(5)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
KEYMAPS(5)</td>
<td class="head-vol">
File Formats Manual</td>
<td class="head-rtitle">
KEYMAPS(5)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>NAME</h1> keymaps - keyboard table descriptions for loadkeys and dumpkeys</div>
<div class="section">
<h1>DESCRIPTION</h1> These files are used by <b>loadkeys</b>(1) to modify the translation tables used by the kernel keyboard driver and generated by <b>dumpkeys</b>(1) from those translation tables.<div class="spacer">
</div>
The format of these files is vaguely similar to the one accepted by <b>xmodmap</b>(1). The file consists of charset or key or string definition lines interspersed with comments.<div class="spacer">
</div>
Comments are introduced with <b>!</b> or <b>#</b> characters and continue to the end of the line. Anything following one of these characters on that line is ignored. Note that comments need not begin from column one as with <b>xmodmap</b>(1).<div class="spacer">
</div>
The syntax of keymap files is line oriented; a complete definition must fit on a single logical line. Logical lines can, however, be split into multiple physical lines by ending each subline with the backslash character (\).</div>
<div class="section">
<h1>INCLUDE FILES</h1> A keymap can include other keymaps using the syntax<div class="spacer">
</div>
<div style="margin-left: 5.00ex;">
include &quot;pathname&quot;</div>
</div>
<div class="section">
<h1>CHARSET DEFINITIONS</h1> A character set definition line is of the form:<div class="spacer">
</div>
<div style="margin-left: 5.00ex;">
<br/>
charset &quot;iso-8859-x&quot;<br/>
</div>
<div class="spacer">
</div>
It defines how following keysyms are to be interpreted. For example, in iso-8859-1 the symbol mu (or micro) has code 0265, while in iso-8859-7 the letter mu has code 0354.</div>
<div class="section">
<h1>COMPLETE KEYCODE DEFINITIONS</h1> Each complete key definition line is of the form:<div class="spacer">
</div>
<div style="margin-left: 5.00ex;">
<br/>
<b>keycode</b><i> keynumber </i><b>=</b><i> keysym keysym keysym</i><b>...</b><br/>
</div>
<div class="spacer">
</div>
<i>keynumber</i> is the internal identification number of the key, roughly equivalent to the scan code of it. <i>keynumber</i> can be given in decimal, octal or hexadecimal notation. Octal is denoted by a leading zero and hexadecimal by the prefix <b>0x.</b><div class="spacer">
</div>
Each of the <i>keysyms</i> represent keyboard actions, of which up to 256 can be bound to a single key. The actions available include outputting character codes or character sequences, switching consoles or keymaps, booting the machine etc. (The complete list can be obtained from dumpkeys(1) by saying <b> dumpkeys -l</b> .)<div class="spacer">
</div>
Each <i>keysym</i> may be prefixed by a '+' (plus sign), in wich case this keysym is treated as a &quot;letter&quot; and therefore affected by the &quot;CapsLock&quot; the same way as by &quot;Shift&quot; (to be correct, the CapsLock inverts the Shift state). The ASCII letters ('a'-'z' and 'A'-'Z') are made CapsLock'able by default. If Shift+CapsLock should not produce a lower case symbol, put lines like<div class="spacer">
</div>
<div style="margin-left: 5.00ex;">
<br/>
<b>keycode 30 = +a  A</b><br/>
</div>
<div class="spacer">
</div>
in the map file.<div class="spacer">
</div>
Which of the actions bound to a given key is taken when it is pressed depends on what modifiers are in effect at that moment. The keyboard driver supports 9 modifiers. These modifiers are labeled (completely arbitrarily) Shift, AltGr, Control, Alt, ShiftL, ShiftR, CtrlL, CtrlR and CapsShift. Each of these modifiers has an associated weight of power of two according to the following table:<div class="spacer">
</div>
<div style="margin-left: 5.00ex;">
<dl>
<dt>
<i>modifier</i></dt>
<dd>
<i>weight</i></dd>
</dl>
<dl>
<dt>
Shift</dt>
<dd>
<br/>
  1</dd>
</dl>
<dl>
<dt>
AltGr</dt>
<dd>
<br/>
  2</dd>
</dl>
<dl>
<dt>
Control</dt>
<dd>
<br/>
  4</dd>
</dl>
<dl>
<dt>
Alt</dt>
<dd>
<br/>
  8</dd>
</dl>
<dl>
<dt>
ShiftL</dt>
<dd>
<br/>
 16</dd>
</dl>
<dl>
<dt>
ShiftR</dt>
<dd>
<br/>
 32</dd>
</dl>
<dl>
<dt>
CtrlL</dt>
<dd>
<br/>
 64</dd>
</dl>
<dl>
<dt>
CtrlR</dt>
<dd>
128</dd>
</dl>
<dl>
<dt>
CapsShift</dt>
<dd>
256</dd>
</dl>
</div>
<div class="spacer">
</div>
The effective action of a key is found out by adding up the weights of all the modifiers in effect. By default, no modifiers are in effect, so action number zero, i.e. the one in the first column in a key definition line, is taken when the key is pressed or released. When e.g. Shift and Alt modifiers are in effect, action number nine (from the 10th column) is the effective one.<div class="spacer">
</div>
Changing the state of what modifiers are in effect can be achieved by binding appropriate key actions to desired keys. For example, binding the symbol Shift to a key sets the Shift modifier in effect when that key is pressed and cancels the effect of that modifier when the key is released. Binding AltGr_Lock to a key sets AltGr in effect when the key is pressed and cancels the effect when the key is pressed again. (By default Shift, AltGr, Control and Alt are bound to the keys that bear a similar label; AltGr may denote the right Alt key.)<div class="spacer">
</div>
Note that you should be very careful when binding the modifier keys, otherwise you can end up with an unusable keyboard mapping. If you for example define a key to have Control in its first column and leave the rest of the columns to be VoidSymbols, you're in trouble. This is because pressing the key puts Control modifier in effect and the following actions are looked up from the fifth column (see the table above). So, when you release the key, the action from the fifth column is taken. It has VoidSymbol in it, so nothing happens. This means that the Control modifier is still in effect, although you have released the key. Re-pressing and releasing the key has no effect. To avoid this, you should always define all the columns to have the same modifier symbol. There is a handy short-hand notation for this, see below.<div class="spacer">
</div>
<i>keysyms</i> can be given in decimal, octal, hexadecimal, unicode or symbolic notation. The numeric notations use the same format as with <i>keynumber</i>. Unicode notation is &quot;U+&quot; followed by four hexadecimal digits. The symbolic notation resembles that used by <b>xmodmap</b>(1). Notable differences are the number symbols. The numeric symbols '0', ..., '9' of <b>xmodmap</b>(1) are replaced with the corresponding words 'zero', 'one', ... 'nine' to avoid confusion with the numeric notation.<div class="spacer">
</div>
It should be noted that using numeric notation for the <i>keysyms</i> is highly unportable as the key action numbers may vary from one kernel version to another and the use of numeric notations is thus strongly discouraged. They are intended to be used only when you know there is a supported keyboard action in your kernel for which your current version of <b>loadkeys</b>(1) has no symbolic name.<div class="spacer">
</div>
There is a number of short-hand notations to add readability and reduce typing work and the probability of typing-errors.<div class="spacer">
</div>
First of all, you can give a map specification line, of the form<div class="spacer">
</div>
<div style="margin-left: 5.00ex;">
<br/>
keymaps 0-2,4-5,8,12<br/>
</div>
<div class="spacer">
</div>
to indicate that the lines of the keymap will not specify all 256 columns, but only the indicated ones. (In the example: only the plain, Shift, AltGr, Control, Control+Shift, Alt and Control+Alt maps, that is, 7 columns instead of 256.) When no such line is given, the keymaps 0-M will be defined, where M+1 is the maximum number of entries found in any definition line.<div class="spacer">
</div>
Next, you can leave off any trailing VoidSymbol entries from a key definition line. VoidSymbol denotes a keyboard action which produces no output and has no other effects either. For example, to define key number 30 to output 'a' unshifted, 'A' when pressed with Shift and do nothing when pressed with AltGr or other modifiers, you can write<div class="spacer">
</div>
<div style="margin-left: 5.00ex;">
<br/>
keycode  30 = a	A<br/>
</div>
<div class="spacer">
</div>
instead of the more verbose<div class="spacer">
</div>
<div style="margin-left: 5.00ex;">
<br/>
keycode  30 = a	A	VoidSymbol	VoidSymbol \<br/>
		VoidSymbol VoidSymbol VoidSymbol ...<br/>
</div>
<div class="spacer">
</div>
For added convenience, you can usually get off with still more terse definitions. If you enter a key definition line with only and exactly one action code after the equals sign, it has a special meaning. If the code (numeric or symbolic) is not an ASCII letter, it means the code is implicitly replicated through all columns being defined. If, on the other hand, the action code is an ASCII character in the range 'a', ..., 'z' or 'A', ..., 'Z' in the ASCII collating sequence, the following definitions are made for the different modifier combinations, provided these are actually being defined. (The table lists the two possible cases: either the single action code is a lower case letter, denoted by 'x' or an upper case letter, denoted by 'Y'.)<div class="spacer">
</div>
<div style="margin-left: 4.00ex;">
<dl>
<dt>
<i>modifier</i></dt>
<dd>
<i>symbol</i></dd>
</dl>
<dl>
<dt>
none</dt>
<dd>
x			Y</dd>
</dl>
<dl>
<dt>
Shift</dt>
<dd>
X			y</dd>
</dl>
<dl>
<dt>
AltGr</dt>
<dd>
x			Y</dd>
</dl>
<dl>
<dt>
Shift+AltGr</dt>
<dd>
X			y</dd>
</dl>
<dl>
<dt>
Control</dt>
<dd>
Control_x		Control_y</dd>
</dl>
<dl>
<dt>
Shift+Control</dt>
<dd>
Control_x		Control_y</dd>
</dl>
<dl>
<dt>
AltGr+Control</dt>
<dd>
Control_x		Control_y</dd>
</dl>
<dl>
<dt>
Shift+AltGr+Control</dt>
<dd>
Control_x		Control_y</dd>
</dl>
<dl>
<dt>
Alt</dt>
<dd>
Meta_x		Meta_Y</dd>
</dl>
<dl>
<dt>
Shift+Alt</dt>
<dd>
Meta_X		Meta_y</dd>
</dl>
<dl>
<dt>
AltGr+Alt</dt>
<dd>
Meta_x		Meta_Y</dd>
</dl>
<dl>
<dt>
Shift+AltGr+Alt</dt>
<dd>
Meta_X		Meta_y</dd>
</dl>
<dl>
<dt>
Control+Alt</dt>
<dd>
Meta_Control_x	Meta_Control_y</dd>
</dl>
<dl>
<dt>
Shift+Control+Alt</dt>
<dd>
Meta_Control_x	Meta_Control_y</dd>
</dl>
<dl>
<dt>
AltGr+Control+Alt</dt>
<dd>
Meta_Control_x	Meta_Control_y</dd>
</dl>
<dl>
<dt>
Shift+AltGr+Control+Alt</dt>
<dd>
Meta_Control_x	Meta_Control_y</dd>
</dl>
</div>
</div>
<div class="section">
<h1>SINGLE MODIFIER DEFINITIONS</h1> All the previous forms of key definition lines always define all the M+1 possible modifier combinations being defined, whether the line actually contains that many action codes or not. There is, however, a variation of the definition syntax for defining only single actions to a particular modifier combination of a key. This is especially useful, if you load a keymap which doesn't match your needs in only some modifier combinations, like AltGr+function keys. You can then make a small local file redefining only those modifier combinations and loading it after the main file. The syntax of this form is:<div class="spacer">
</div>
<b><div class="spacer">
</div>
</b>{<b> plain </b>| &lt;modifier sequence&gt; } <b>keycode</b> <i>keynumber</i> <b>=</b> <i>keysym</i><div class="spacer">
</div>
, e.g.,<div style="margin-left: 5.00ex;">
<br/>
plain keycode 14 = BackSpace<br/>
control alt keycode 83 = Boot<br/>
alt keycode 105 = Decr_Console<br/>
alt keycode 106 = Incr_Console<br/>
<br/>
</div>
Using &quot;plain&quot; will define only the base entry of a key (i.e. the one with no modifiers in effect) without affecting the bindings of other modifier combinations of that key.</div>
<div class="section">
<h1>STRING DEFINITIONS</h1> In addition to comments and key definition lines, a keymap can contain string definitions. These are used to define what each function key action code sends. The syntax of string definitions is:<div class="spacer">
</div>
<div style="margin-left: 5.00ex;">
<b>string</b> <i>keysym</i> <b>=</b> &quot;text&quot;</div>
<div class="spacer">
</div>
<i>text</i> can contain literal characters, octal character codes in the format of backslash followed by up to three octal digits, and the three escape sequences  <b>\n</b>, <b>\\</b>, and <b>\&quot;</b>, for newline, backslash and quote, respectively.</div>
<div class="section">
<h1>COMPOSE DEFINITIONS</h1> Then there may also be compose definitions. They have syntax<div class="spacer">
</div>
<div style="margin-left: 5.00ex;">
<b>compose '</b><i>char</i><b>' '</b><i>char</i><b>' to '</b><i>char</i><b>'</b></div>
and describe how two bytes are combined to form a third one (when a dead accent or compose key is used). This is used to get accented letters and the like on a standard keyboard.</div>
<div class="section">
<h1>ABBREVIATIONS</h1> Various abbreviations can be used with kbd-0.96 and later.<dl>
<dt>
<b>strings as usual</b></dt>
<dd>
Defines the usual values of the strings (but not the keys they are bound to).</dd>
</dl>
<dl>
<dt>
<b>compose as usual for &quot;iso-8859-1&quot;</b></dt>
<dd>
Defines the usual compose combinations.</dd>
</dl>
<div class="spacer">
</div>
To find out what <i>keysyms</i> there are available for use in keymaps, use the command<div class="spacer">
</div>
<div style="margin-left: 5.00ex;">
<b>dumpkeys --long-info</b><br/>
</div>
<div class="spacer">
</div>
Unfortunately, there is currently no description of what each symbol does. It has to be guessed from the name or figured out from the kernel sources.</div>
<div class="section">
<h1>EXAMPLES</h1> (Be careful to use a keymaps line, like the first line of `dumpkeys`, or &quot;keymaps 0-15&quot; or so.)<div class="spacer">
</div>
The following entry exchanges the left Control key and the Caps Lock key on the keyboard:<div class="spacer">
</div>
<div style="margin-left: 5.00ex;">
<br/>
keycode  58 = Control<br/>
keycode  29 = Caps_Lock<br/>
</div>
<div class="spacer">
</div>
Key number 58 is normally the Caps Lock key, and key number 29 is normally the Control key.<div class="spacer">
</div>
The following entry sets the Shift and Caps Lock keys to behave more nicely, like in older typewriters. That is, pressing Caps Lock key once or more sets the keyboard in CapsLock state and pressing either of the Shift keys releases it.<div class="spacer">
</div>
<div style="margin-left: 5.00ex;">
<br/>
keycode  42 = Uncaps_Shift<br/>
keycode  54 = Uncaps_Shift<br/>
keycode  58 = Caps_On<br/>
</div>
<div class="spacer">
</div>
The following entry sets the layout of the edit pad in the enhanced keyboard to be more like that in the VT200 series terminals:<div class="spacer">
</div>
<div style="margin-left: 5.00ex;">
<br/>
keycode 102 = Insert<br/>
keycode 104 = Remove<br/>
keycode 107 = Prior<br/>
shift keycode 107 = Scroll_Backward<br/>
keycode 110 = Find<br/>
keycode 111 = Select<br/>
control alt   keycode 111 = Boot<br/>
control altgr keycode 111 = Boot<br/>
</div>
<div class="spacer">
</div>
Here's an example to bind the string &quot;du\ndf\n&quot; to the key AltGr-D. We use the &quot;spare&quot; action code F100 not normally bound to any key.<div class="spacer">
</div>
<div style="margin-left: 5.00ex;">
<br/>
altgr keycode 32 = F100<br/>
string F100 = &quot;du\ndf\n&quot;</div>
</div>
<div class="section">
<h1>SEE ALSO</h1> <b>loadkeys</b>(1), <b>dumpkeys</b>(1), <b>showkey</b>(1), <b>xmodmap</b>(1)</div>
<table class="foot">
<tr>
<td class="foot-date">
24 April 1998</td>
<td class="foot-os">
</td>
</tr>
</table>
</div>
</body>
</html>

