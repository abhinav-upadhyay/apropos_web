<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/linux/style.css" type="text/css" media="all"/>
<title>
sane-canon_dr(5)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
sane-canon_dr(5)</td>
<td class="head-vol">
SANE Scanner Access Now Easy</td>
<td class="head-rtitle">
sane-canon_dr(5)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>NAME</h1> sane-canon_dr - SANE backend for Canon DR-series scanners<div style="height: 1.00em;">
&#160;</div>
</div>
<div class="section">
<h1>DESCRIPTION</h1> The <b>sane-canon_dr</b> library implements a SANE (Scanner Access Now Easy) backend which provides access to some Canon DR-series scanners.<div style="height: 1.00em;">
&#160;</div>
This document describes backend version 37, which shipped with SANE 1.0.22.<div style="height: 1.00em;">
&#160;</div>
</div>
<div class="section">
<h1>SUPPORTED HARDWARE</h1> This version has only been tested with a few scanner models. Please see http://www.sane-project.org/sane-supported-devices.html for the most recent list.<div style="height: 1.00em;">
&#160;</div>
This backend may support other Canon scanners. The best way to determine level of support is to test the scanner directly, or to collect a trace of the windows driver in action. Please contact the author for help or with test results.<div style="height: 1.00em;">
&#160;</div>
In general, the larger machines (DR-4000 and up) which have been tested use a fairly complete protocol, with hardware support for many modes, resolutions and features. The smaller machines have many limitations, like missing horizontal resolutions, missing binary mode, always scanning full-width, etc. There is code in the backend to address these problems, but there seems to be no way to detect if they are required, so they must be hard-coded.<div style="height: 1.00em;">
&#160;</div>
</div>
<div class="section">
<h1>OPTIONS</h1> Effort has been made to expose most hardware options, including:<div class="spacer">
</div>
source s<div style="margin-left: 5.00ex;">
Selects the source for the scan. Options may include &quot;Flatbed&quot;, &quot;ADF Front&quot;, &quot;ADF Back&quot;, &quot;ADF Duplex&quot;.</div>
<div class="spacer">
</div>
mode m<div style="margin-left: 5.00ex;">
Selects the mode for the scan. Options may include &quot;Lineart&quot;, &quot;Halftone&quot;, &quot;Gray&quot;, and &quot;Color&quot;.</div>
<div class="spacer">
</div>
resolution<div style="margin-left: 5.00ex;">
Controls scan resolution.</div>
<div class="spacer">
</div>
tl-x, tl-y, br-x, br-y<div style="margin-left: 5.00ex;">
Sets scan area upper left and lower right coordinates. These are renamed t, l, x, y by some frontends.</div>
<div class="spacer">
</div>
page-width, page-height<div style="margin-left: 5.00ex;">
Sets paper size. Used by scanner to determine centering of scan coordinates when using ADF and to detect double feed errors.</div>
<div class="spacer">
</div>
Other options will be available based on the capabilities of the scanner: enhancement, compression, buttons and sensors, etc.<div class="spacer">
</div>
Additionally, several 'software' options are exposed by the backend. These are reimplementations of features provided natively by larger scanners, but running on the host computer. This enables smaller machines to have similar capabilites. Please note that these features are somewhat simplistic, and may not perform as well as the native implementations. Note also that these features all require that the driver cache the entire image in memory. This will almost certainly result in a reduction of scanning speed.<div class="spacer">
</div>
swcrop<div style="margin-left: 5.00ex;">
Requests the driver to detect the extremities of the paper within the larger image, and crop the empty edges.</div>
<div class="spacer">
</div>
swdeskew<div style="margin-left: 5.00ex;">
Requests the driver to detect the rotation of the paper within the larger image, and counter the rotation.</div>
<div class="spacer">
</div>
swdespeck X<div style="margin-left: 5.00ex;">
Requests the driver to find and remove dots of X diameter or smaller from the image, and fill the space with the average surrounding color.</div>
<div style="height: 1.00em;">
&#160;</div>
Use 'scanimage --help' to get a list, but be aware that some options may be settable only when another option has been set, and that advanced options may be hidden by some frontend programs.</div>
<div class="section">
<h1>CONFIGURATION FILE</h1> The configuration file &quot;canon_dr.conf&quot; is used to tell the backend how to look for scanners, and provide options controlling the operation of the backend. This file is read each time the frontend asks the backend for a list of scanners, generally only when the frontend starts. If the configuration file is missing, the backend will fail to run.<div class="spacer">
</div>
Scanners can be specified in the configuration file in 4 ways:<div class="spacer">
</div>
&quot;scsi CANON DR&quot;<div style="margin-left: 5.00ex;">
Requests backend to search all scsi busses in the system for a device which reports itself to be a scanner made by 'CANON', with a model name starting with 'DR'.</div>
<div class="spacer">
</div>
&quot;scsi /dev/sg0&quot; (or other scsi device file)<div style="margin-left: 5.00ex;">
Requests backend to open the named scsi device. Only useful if you have multiple compatible scanners connected to your system, and need to specify one. Probably should not be used with the other &quot;scsi&quot; line above.</div>
<div class="spacer">
</div>
&quot;usb 0x04a9 0x1603&quot; (or other vendor/product ids)<div style="margin-left: 5.00ex;">
Requests backend to search all usb busses in the system for a device which uses that vendor and product id. The device will then be queried to determine if it is a Canon scanner.</div>
<div class="spacer">
</div>
&quot;usb /dev/usb/scanner0&quot; (or other device file)<div style="margin-left: 5.00ex;">
Some systems use a kernel driver to access usb scanners. This method is untested.</div>
<div class="spacer">
</div>
Besides the 'scsi' and 'usb' lines, the configuration file supports the following 'option' lines:<div class="spacer">
</div>
&quot;option buffer-size [number of bytes]&quot;<div style="margin-left: 5.00ex;">
Set the number of bytes in the data buffer to something other than the compiled-in default of 4MB. Large values may cause timeouts or hangs, small values may cause slow scans.<div class="spacer">
</div>
Note: The backend does not place an upper bound on this value, as some users required it to be quite large. Values above the default are not recommended, and may crash your OS or lockup your scsi card driver. You have been warned.</div>
<div class="spacer">
</div>
&quot;option vendor-name [string of text]&quot;<div style="height: 0.00em;">
&#160;</div>
&quot;option model-name [string of text]&quot;<div style="height: 0.00em;">
&#160;</div>
&quot;option version-name [string of text]&quot;<div style="margin-left: 5.00ex;">
These options can be used collectively to override the values provided by the scanner, or to provide the values when the scanner cannot.</div>
<div class="spacer">
</div>
&quot;option padded-read [0|1]&quot;<div style="margin-left: 5.00ex;">
Some scanners prepend all data transmitted to host with 12 bytes. Enable this option if the scanner fails to respond to commands.</div>
<div class="spacer">
</div>
Note: 'option' lines may appear multiple times in the configuration file. They only apply to scanners discovered by the next 'scsi/usb' line.<div class="spacer">
</div>
<div style="height: 1.00em;">
&#160;</div>
</div>
<div class="section">
<h1>ENVIRONMENT</h1> The backend uses a single environment variable, SANE_DEBUG_CANON_DR, which enables debugging output to stderr. Valid values are:<div class="spacer">
</div>
<div style="margin-left: 5.00ex;">
5  Errors<div style="height: 0.00em;">
&#160;</div>
10 Function trace<div style="height: 0.00em;">
&#160;</div>
15 Function detail<div style="height: 0.00em;">
&#160;</div>
20 Option commands<div style="height: 0.00em;">
&#160;</div>
25 SCSI/USB trace<div style="height: 0.00em;">
&#160;</div>
30 SCSI/USB detail<div style="height: 0.00em;">
&#160;</div>
35 Useless noise</div>
<div style="height: 1.00em;">
&#160;</div>
</div>
<div class="section">
<h1>KNOWN ISSUES</h1> This backend was entirely reverse engineered from usb traces of the proprietary driver. Various advanced features of the machines may not be enabled. Many machines have not been tested. Their protocol is unknown.<div style="height: 1.00em;">
&#160;</div>
</div>
<div class="section">
<h1>CREDITS</h1> The various authors of the sane-fujitsu backend provided useful code<div style="height: 0.00em;">
&#160;</div>
Yabarana Corp. www.yabarana.com provided significant funding<div style="height: 0.00em;">
&#160;</div>
EvriChart, Inc. www.evrichart.com provided funding and loaned equipment<div style="height: 0.00em;">
&#160;</div>
Canon, USA. www.usa.canon.com loaned equipment<div style="height: 0.00em;">
&#160;</div>
HPrint hprint.com.br provided funding and testing for DR-2510 support<div style="height: 0.00em;">
&#160;</div>
Stone-IT www.stone-it.com provided funding for DR-2010 and DR-2050 support<div style="height: 0.00em;">
&#160;</div>
Special thanks to: Alejandro Imass, Andre Shimakawa, Martijn van Brummelen, Thanos Diacakis and Junren Shi for testing and feedback.<div style="height: 1.00em;">
&#160;</div>
</div>
<div class="section">
<h1>SEE ALSO</h1> sane(7), sane-scsi(5), sane-usb(5)<div style="height: 1.00em;">
&#160;</div>
</div>
<div class="section">
<h1>AUTHOR</h1> m. allan noah: &lt;kitno455 a t gmail d o t com&gt;<div style="height: 1.00em;">
&#160;</div>
</div>
<table class="foot">
<tr>
<td class="foot-date">
26 Jan 2011</td>
<td class="foot-os">
</td>
</tr>
</table>
</div>
</body>
</html>

