<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/linux/style.css" type="text/css" media="all"/>
<title>
ipptoolfile(5)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
ipptoolfile(5)</td>
<td class="head-vol">
Apple Inc.</td>
<td class="head-rtitle">
ipptoolfile(5)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>NAME</h1> ipptoolfile - ipptool file format<div style="height: 1.00em;">
&#160;</div>
</div>
<div class="section">
<h1>DESCRIPTION</h1> The  <i>ipptool(1)</i> program accepts free-form plain text files that describe one or more IPP requests. Comments start with the &quot;#&quot; character and continue to the end of the line. Each request is enclosed by curley braces, for example:<div class="spacer">
</div>
<br/>
    # This is a comment<br/>
    {<br/>
      # The name of the test<br/>
      NAME &quot;Print PostScript Job&quot;<div class="spacer">
</div>
<br/>
      # The request to send<br/>
      OPERATION Print-Job<br/>
      GROUP operation-attributes-tag<br/>
      ATTR charset attributes-charset utf-8<br/>
      ATTR language attributes-natural-language en<br/>
      ATTR uri printer-uri $uri<br/>
      ATTR name requesting-user-name $user<br/>
      FILE testfile.ps<div class="spacer">
</div>
<br/>
      # The response to expect<br/>
      STATUS successful-ok<br/>
      EXPECT attributes-charset OF-TYPE charset<br/>
      EXPECT attributes-natural-language OF-TYPE naturalLanguage<br/>
      EXPECT job-id OF-TYPE integer<br/>
      EXPECT job-uri OF-TYPE uri<br/>
    }<br/>
    {<br/>
      # The name of the test<br/>
      NAME &quot;Get Attributes of PostScript Job&quot;<div class="spacer">
</div>
<br/>
      # The request to send<br/>
      OPERATION Get-Job-Attributes<br/>
      GROUP operation-attributes-tag<br/>
      ATTR charset attributes-charset utf-8<br/>
      ATTR language attributes-natural-language en<br/>
      ATTR uri printer-uri $uri<br/>
      ATTR integer job-id $job-id<br/>
      ATTR name requesting-user-name $user<div class="spacer">
</div>
<br/>
      # The response to expect<br/>
      STATUS successful-ok<br/>
      EXPECT attributes-charset OF-TYPE charset<br/>
      EXPECT attributes-natural-language OF-TYPE naturalLanguage<br/>
      EXPECT job-id OF-TYPE integer<br/>
      EXPECT job-uri OF-TYPE uri<br/>
      EXPECT job-state OF-TYPE enum<br/>
      EXPECT job-originating-user-name OF-TYPE name WITH-VALUE &quot;$user&quot;<br/>
    }<br/>
<div style="height: 1.00em;">
&#160;</div>
</div>
<div class="section">
<h1>TOP-LEVEL DIRECTIVES</h1> The following directives can be used outside of a test:<dl>
<dt>
{ test }</dt>
<dd>
Defines a test.</dd>
</dl>
<dl>
<dt>
DEFINE variable-name value</dt>
<dd>
Defines the named variable to the given value. This is equivalent to specifying &quot;-d variable-name=value&quot; on the  <i>ipptool</i> command-line.</dd>
</dl>
<dl>
<dt>
DEFINE-DEFAULT variable-name value</dt>
<dd>
Defines the named variable to the given value if it does not already have a value.</dd>
</dl>
<dl>
<dt>
IGNORE-ERRORS yes</dt>
<dd>
</dd>
</dl>
<dl>
<dt>
IGNORE-ERRORS no</dt>
<dd>
Specifies whether, by default, <i>ipptool</i> will ignore errors and continue with subsequent tests.</dd>
</dl>
<dl>
<dt>
INCLUDE &quot;filename&quot;</dt>
<dd>
</dd>
</dl>
<dl>
<dt>
INCLUDE &lt;filename&gt;</dt>
<dd>
Includes another test file. The first form includes a file relative to the current test file, while the second form includes a file from the  <i>ipptool</i> include directory.</dd>
</dl>
<dl>
<dt>
INCLUDE-IF-DEFINED name &quot;filename&quot;</dt>
<dd>
</dd>
</dl>
<dl>
<dt>
INCLUDE-IF-DEFINED name &lt;filename&gt;</dt>
<dd>
Includes another test file if the named variable is defined. The first form includes a file relative to the current test file, while the second form includes a file from the  <i>ipptool</i> include directory.</dd>
</dl>
<dl>
<dt>
INCLUDE-IF-NOT-DEFINED name &quot;filename&quot;</dt>
<dd>
</dd>
</dl>
<dl>
<dt>
INCLUDE-IF-NOT-DEFINED name &lt;filename&gt;</dt>
<dd>
Includes another test file if the named variable is not defined. The first form includes a file relative to the current test file, while the second form includes a file from the  <i>ipptool</i> include directory.</dd>
</dl>
<dl>
<dt>
SKIP-IF-DEFINED variable-name</dt>
<dd>
</dd>
</dl>
<dl>
<dt>
SKIP-IF-NOT-DEFINED variable-name</dt>
<dd>
Specifies that the remainder of the test file should be skipped when the variable is or is not defined.</dd>
</dl>
<dl>
<dt>
TRANSFER auto</dt>
<dd>
Specifies that tests will, by default, use &quot;Transfer-Encoding: chunked&quot; for requests with attached files and &quot;Content-Length:&quot; for requests without attached files.</dd>
</dl>
<dl>
<dt>
TRANSFER chunked</dt>
<dd>
Specifies that tests will, by default, use the HTTP/1.1 &quot;Transfer-Encoding: chunked&quot; header. This is the default and is equivalent to specifying &quot;-c&quot; on the  <i>ipptool</i> command-line. Support for chunked requests is required for conformance with all versions of IPP.</dd>
</dl>
<dl>
<dt>
TRANSFER length</dt>
<dd>
Specifies that tests will, by default, use the HTTP/1.0 &quot;Content-Length:&quot; header. This is equivalent to specifying &quot;-l&quot; on the  <i>ipptool</i> command-line. Support for content length requests is required for conformance with all versions of IPP.</dd>
</dl>
<dl>
<dt>
VERSION 1.0</dt>
<dd>
</dd>
</dl>
<dl>
<dt>
VERSION 1.1</dt>
<dd>
</dd>
</dl>
<dl>
<dt>
VERSION 2.0</dt>
<dd>
</dd>
</dl>
<dl>
<dt>
VERSION 2.1</dt>
<dd>
</dd>
</dl>
<dl>
<dt>
VERSION 2.2</dt>
<dd>
Specifies the default IPP version number to use for the tests that follow.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
</div>
<div class="section">
<h1>TEST DIRECTIVES</h1> The following directives are understood in a test:<dl>
<dt>
ATTR tag attribute-name value(s)</dt>
<dd>
Adds an attribute to the test request. Values are separated by the comma (&quot;,&quot;) character - escape commas using the &quot;</dd>
</dl>
<dl>
<dt>
ATTR collection attribute-name { MEMBER tag member-name value(s) ... } [ ... { ... } ]</dt>
<dd>
Adds a collection attribute to the test request. Member attributes follow the same syntax as regular attributes and can themselves be nested collections. Multiple collection values can be supplied as needed.</dd>
</dl>
<dl>
<dt>
DELAY seconds</dt>
<dd>
Specifies a delay before this test will be run.</dd>
</dl>
<dl>
<dt>
DISPLAY attribute-name</dt>
<dd>
Specifies that value of the named attribute should be output as part of the test report.</dd>
</dl>
<dl>
<dt>
EXPECT attribute-name [ predicate(s) ]</dt>
<dd>
</dd>
</dl>
<dl>
<dt>
EXPECT ?attribute-name predicate(s)</dt>
<dd>
</dd>
</dl>
<dl>
<dt>
EXPECT !attribute-name</dt>
<dd>
Specifies that the response must/may/must not include the named attribute. Additional requirements can be added as predicates - see the &quot;EXPECT PREDICATES&quot; section for more information on predicates.</dd>
</dl>
<dl>
<dt>
FILE filename</dt>
<dd>
Specifies a file to include at the end of the request. This is typically used when sending a test print file.</dd>
</dl>
<dl>
<dt>
GROUP tag</dt>
<dd>
Specifies the group tag for subsequent attributes in the request.</dd>
</dl>
<dl>
<dt>
IGNORE-ERRORS yes</dt>
<dd>
</dd>
</dl>
<dl>
<dt>
IGNORE-ERRORS no</dt>
<dd>
Specifies whether <i>ipptool</i> will ignore errors and continue with subsequent tests.</dd>
</dl>
<dl>
<dt>
NAME &quot;literal string&quot;</dt>
<dd>
Specifies the human-readable name of the test.</dd>
</dl>
<dl>
<dt>
OPERATION operation-code</dt>
<dd>
Specifies the operation to be performed.</dd>
</dl>
<dl>
<dt>
REQUEST-ID number</dt>
<dd>
</dd>
</dl>
<dl>
<dt>
REQUEST-ID random</dt>
<dd>
Specifies the request-id value to use in the request, either an integer or the word &quot;random&quot; to use a randomly generated value (the default).</dd>
</dl>
<dl>
<dt>
RESOURCE path</dt>
<dd>
Specifies an alternate resource path that is used for the HTTP POST request. The default is the resource from the URI provided to the  <i>ipptool</i> program.</dd>
</dl>
<dl>
<dt>
SKIP-IF-DEFINED variable-name</dt>
<dd>
</dd>
</dl>
<dl>
<dt>
SKIP-IF-NOT-DEFINED variable-name</dt>
<dd>
Specifies that the current test should be skipped when the variable is or is not defined.</dd>
</dl>
<dl>
<dt>
SKIP-PREVIOUS-ERROR yes</dt>
<dd>
</dd>
</dl>
<dl>
<dt>
SKIP-PREVIOUS-ERROR no</dt>
<dd>
Specifies whether <i>ipptool</i> will skip the current test if the previous test resulted in an error/failure.</dd>
</dl>
<dl>
<dt>
STATUS status-code [ predicate ]</dt>
<dd>
Specifies an expected response status-code value. Additional requirements can be added as predicates - see the &quot;STATUS PREDICATES&quot; section for more information on predicates.</dd>
</dl>
<dl>
<dt>
TRANSFER auto</dt>
<dd>
Specifies that this test will use &quot;Transfer-Encoding: chunked&quot; if it has an attached file or &quot;Content-Length:&quot; otherwise.</dd>
</dl>
<dl>
<dt>
TRANSFER chunked</dt>
<dd>
Specifies that this test will use the HTTP/1.1 &quot;Transfer-Encoding: chunked&quot; header.</dd>
</dl>
<dl>
<dt>
TRANSFER length</dt>
<dd>
Specifies that this test will use the HTTP/1.0 &quot;Content-Length:&quot; header.</dd>
</dl>
<dl>
<dt>
VERSION 1.0</dt>
<dd>
</dd>
</dl>
<dl>
<dt>
VERSION 1.1</dt>
<dd>
</dd>
</dl>
<dl>
<dt>
VERSION 2.0</dt>
<dd>
</dd>
</dl>
<dl>
<dt>
VERSION 2.1</dt>
<dd>
</dd>
</dl>
<dl>
<dt>
VERSION 2.2</dt>
<dd>
Specifies the IPP version number to use for this test.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
</div>
<div class="section">
<h1>EXPECT PREDICATES</h1> The following predicates are understood following the EXPECT test directive:<dl>
<dt>
COUNT number</dt>
<dd>
Requires the EXPECT attribute to have the specified number of values.</dd>
</dl>
<dl>
<dt>
DEFINE-MATCH variable-name</dt>
<dd>
Defines the variable to &quot;1&quot; when the EXPECT condition matches. A side-effect of this predicate is that this EXPECT will never fail a test.</dd>
</dl>
<dl>
<dt>
DEFINE-NO-MATCH variable-name</dt>
<dd>
Defines the variable to &quot;1&quot; when the EXPECT condition does not match. A side- effect of this predicate is that this EXPECT will never fail a test.</dd>
</dl>
<dl>
<dt>
DEFINE-VALUE variable-name</dt>
<dd>
Defines the variable to the value of the attribute when the EXPECT condition matches. A side-effect of this predicate is that this EXPECT will never fail a test.</dd>
</dl>
<dl>
<dt>
IF-DEFINED variable-name</dt>
<dd>
Makes the EXPECT conditions apply only if the specified variable is defined.</dd>
</dl>
<dl>
<dt>
IF-NOT-DEFINED variable-name</dt>
<dd>
Makes the EXPECT conditions apply only if the specified variable is not defined.</dd>
</dl>
<dl>
<dt>
IN-GROUP tag</dt>
<dd>
Requires the EXPECT attribute to be in the specified group tag.</dd>
</dl>
<dl>
<dt>
OF-TYPE tag[,tag,...]</dt>
<dd>
Requires the EXPECT attribute to use the specified value tag(s).</dd>
</dl>
<dl>
<dt>
REPEAT-MATCH</dt>
<dd>
</dd>
</dl>
<dl>
<dt>
REPEAT-NO-MATCH</dt>
<dd>
Specifies that the current test should be repeated when the EXPECT condition matches or does not match.</dd>
</dl>
<dl>
<dt>
SAME-COUNT-AS attribute-name</dt>
<dd>
Requires the EXPECT attribute to have the same number of values as the specified parallel attribute.</dd>
</dl>
<dl>
<dt>
WITH-VALUE &quot;literal string&quot;</dt>
<dd>
Requires at least one value of the EXPECT attribute to match the literal string. Comparisons are case-sensitive.</dd>
</dl>
<dl>
<dt>
WITH-VALUE &quot;/regular expression/&quot;</dt>
<dd>
Requires that all values of the EXPECT attribute match the regular expression, which must conform to the POSIX regular expression syntax. Comparisons are case-sensitive.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
</div>
<div class="section">
<h1>STATUS PREDICATES</h1> The following predicates are understood following the STATUS test directive:<dl>
<dt>
IF-DEFINED variable-name</dt>
<dd>
Makes the STATUS apply only if the specified variable is defined.</dd>
</dl>
<dl>
<dt>
IF-NOT-DEFINED variable-name</dt>
<dd>
Makes the STATUS apply only if the specified variable is not defined.</dd>
</dl>
<dl>
<dt>
REPEAT-MATCH</dt>
<dd>
</dd>
</dl>
<dl>
<dt>
REPEAT-NO-MATCH</dt>
<dd>
Specifies that the current test should be repeated when the response status-code matches or does not match the value specified by the STATUS directive.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
</div>
<div class="section">
<h1>OPERATION CODES</h1> Operation codes correspond to the hexadecimal numbers (0xHHHH) and names from RFC 2911 and other IPP extension specifications. Here is a complete list:<br/>
    Activate-Printer<br/>
    CUPS-Accept-Jobs<br/>
    CUPS-Add-Modify-Class<br/>
    CUPS-Add-Modify-Printer<br/>
    CUPS-Authenticate-Job<br/>
    CUPS-Delete-Class<br/>
    CUPS-Delete-Printer<br/>
    CUPS-Get-Classes<br/>
    CUPS-Get-Default<br/>
    CUPS-Get-Devices<br/>
    CUPS-Get-Document<br/>
    CUPS-Get-PPD<br/>
    CUPS-Get-PPDs<br/>
    CUPS-Get-Printers<br/>
    CUPS-Move-Job<br/>
    CUPS-Reject-Jobs<br/>
    CUPS-Set-Default<br/>
    Cancel-Current-Job<br/>
    Cancel-Job<br/>
    Cancel-Jobs<br/>
    Cancel-My-Jobs<br/>
    Cancel-Subscription<br/>
    Close-Job<br/>
    Create-Job<br/>
    Create-Job-Subscription<br/>
    Create-Printer-Subscription<br/>
    Deactivate-Printer<br/>
    Disable-Printer<br/>
    Enable-Printer<br/>
    Get-Job-Attributes<br/>
    Get-Jobs<br/>
    Get-Notifications<br/>
    Get-Printer-Attributes<br/>
    Get-Printer-Support-Files<br/>
    Get-Printer-Supported-Values<br/>
    Get-Subscription-Attributes<br/>
    Get-Subscriptions<br/>
    Hold-Job<br/>
    Hold-New-Jobs<br/>
    Pause-Printer<br/>
    Pause-Printer-After-Current-Job<br/>
    Print-Job<br/>
    Print-URI<br/>
    Promote-Job<br/>
    Purge-Jobs<br/>
    Release-Held-New-Jobs<br/>
    Release-Job<br/>
    Renew-Subscription<br/>
    Reprocess-Job<br/>
    Restart-Job<br/>
    Restart-Printer<br/>
    Resubmit-Job<br/>
    Resume-Job<br/>
    Resume-Printer<br/>
    Schedule-Job-After<br/>
    Send-Document<br/>
    Send-Notifications<br/>
    Send-URI<br/>
    Set-Job-Attributes<br/>
    Set-Printer-Attributes<br/>
    Shutdown-Printer<br/>
    Startup-Printer<br/>
    Suspend-Current-Job<br/>
    Validate-Job<br/>
<div style="height: 1.00em;">
&#160;</div>
</div>
<div class="section">
<h1>STATUS CODES</h1> Status codes correspond to the hexadecimal numbers (0xHHHH) and names from RFC 2911 and other IPP extension specifications. Here is a complete list:<br/>
    client-error-attributes-not-settable<br/>
    client-error-attributes-or-values-not-supported<br/>
    client-error-bad-request<br/>
    client-error-charset-not-supported<br/>
    client-error-compression-error<br/>
    client-error-compression-not-supported<br/>
    client-error-conflicting-attributes<br/>
    client-error-document-access-error<br/>
    client-error-document-format-error<br/>
    client-error-document-format-not-supported<br/>
    client-error-forbidden<br/>
    client-error-gone<br/>
    client-error-ignored-all-notifications<br/>
    client-error-ignored-all-subscriptions<br/>
    client-error-not-authenticated<br/>
    client-error-not-authorized<br/>
    client-error-not-found<br/>
    client-error-not-possible<br/>
    client-error-print-support-file-not-found<br/>
    client-error-request-entity-too-large<br/>
    client-error-request-value-too-long<br/>
    client-error-timeout<br/>
    client-error-too-many-subscriptions<br/>
    client-error-uri-scheme-not-supported<br/>
    cups-see-other<br/>
    redirection-other-site<br/>
    server-error-busy<br/>
    server-error-device-error<br/>
    server-error-internal-error<br/>
    server-error-job-canceled<br/>
    server-error-multiple-document-jobs-not-supported<br/>
    server-error-not-accepting-jobs<br/>
    server-error-operation-not-supported<br/>
    server-error-printer-is-deactivated<br/>
    server-error-service-unavailable<br/>
    server-error-temporary-error<br/>
    server-error-version-not-supported<br/>
    successful-ok<br/>
    successful-ok-but-cancel-subscription<br/>
    successful-ok-conflicting-attributes<br/>
    successful-ok-events-complete<br/>
    successful-ok-ignored-notifications<br/>
    successful-ok-ignored-or-substituted-attributes<br/>
    successful-ok-ignored-subscriptions<br/>
    successful-ok-too-many-events<br/>
<div style="height: 1.00em;">
&#160;</div>
</div>
<div class="section">
<h1>TAGS</h1> Value and group tags correspond to the names from RFC 2911 and other IPP extension specifications. Here are the group tags:<br/>
    event-notification-attributes-tag<br/>
    job-attributes-tag<br/>
    operation-attributes-tag<br/>
    printer-attributes-tag<br/>
    subscription-attributes-tag<br/>
    unsupported-attributes-tag<br/>
<div class="spacer">
</div>
Here are the value tags:<br/>
    admin-define<br/>
    boolean<br/>
    charset<br/>
    collection<br/>
    dateTime<br/>
    default<br/>
    delete-attribute<br/>
    enum<br/>
    integer<br/>
    keyword<br/>
    mimeMediaType<br/>
    nameWithLanguage<br/>
    nameWithoutLanguage<br/>
    naturalLanguage<br/>
    no-value<br/>
    not-settable<br/>
    octetString<br/>
    rangeOfInteger<br/>
    resolution<br/>
    textWithLanguage<br/>
    textWithoutLanguage<br/>
    unknown<br/>
    unsupported<br/>
    uri<br/>
    uriScheme<br/>
<div style="height: 1.00em;">
&#160;</div>
</div>
<div class="section">
<h1>VARIABLES</h1> The  <i>ipptool</i> program maintains a list of variables that can be used in any literal string or attribute value by specifying &quot;$variable-name&quot;. Aside from variables defined using the &quot;-d&quot; option or &quot;DEFINE&quot; directive, the following pre-defined variables are available:<dl>
<dt>
$$</dt>
<dd>
Inserts a single &quot;$&quot; character.</dd>
</dl>
<dl>
<dt>
$ENV[name]</dt>
<dd>
Inserts the value of the named environment variable, or an empty string if the environment variable is not defined.</dd>
</dl>
<dl>
<dt>
$filename</dt>
<dd>
Inserts the filename provided to <i>ipptool</i> with the &quot;-f&quot; option.</dd>
</dl>
<dl>
<dt>
$hostname</dt>
<dd>
Inserts the hostname from the URI provided to <i>ipptool</i>.</dd>
</dl>
<dl>
<dt>
$job-id</dt>
<dd>
Inserts the last job-id value returned in a test response or 0 if no job-id has been seen.</dd>
</dl>
<dl>
<dt>
$job-uri</dt>
<dd>
Inserts the last job-uri value returned in a test response or an empty string if no job-uri has been seen.</dd>
</dl>
<dl>
<dt>
$scheme</dt>
<dd>
Inserts the scheme from the URI provided to <i>ipptool</i>.</dd>
</dl>
<dl>
<dt>
$notify-subscription-id</dt>
<dd>
Inserts the last notify-subscription-id value returnd in a test response or 0 if no notify-subscription-id has been seen.</dd>
</dl>
<dl>
<dt>
$port</dt>
<dd>
Inserts the port number from the URI provided to <i>ipptool</i>.</dd>
</dl>
<dl>
<dt>
$resource</dt>
<dd>
Inserts the resource path from the URI provided to <i>ipptool</i>.</dd>
</dl>
<dl>
<dt>
$uri</dt>
<dd>
Inserts the URI provided to <i>ipptool</i>.</dd>
</dl>
<dl>
<dt>
$user</dt>
<dd>
Inserts the current user's login name.</dd>
</dl>
<dl>
<dt>
$username</dt>
<dd>
Inserts the username from the URI provided to <i>ipptool</i>, if any.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
</div>
<div class="section">
<h1>SEE ALSO</h1>  <i>ipptool(1)</i>,<div style="height: 0.00em;">
&#160;</div>
http://localhost:631/help<div style="height: 1.00em;">
&#160;</div>
</div>
<div class="section">
<h1>COPYRIGHT</h1> Copyright 2007-2011 by Apple Inc.</div>
<table class="foot">
<tr>
<td class="foot-date">
CUPS</td>
<td class="foot-os">
28 September 2011</td>
</tr>
</table>
</div>
</body>
</html>

