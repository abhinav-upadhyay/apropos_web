<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/linux/style.css" type="text/css" media="all"/>
<title>
e2fsck.conf(5)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
e2fsck.conf(5)</td>
<td class="head-vol">
File Formats Manual</td>
<td class="head-rtitle">
e2fsck.conf(5)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>NAME</h1> e2fsck.conf - Configuration file for e2fsck</div>
<div class="section">
<h1>DESCRIPTION</h1> <i>e2fsck.conf</i> is the configuration file for <b>e2fsck</b>(8). It controls the default behavior of <b>e2fsck</b>(8) while it is checking ext2, ext3, or ext4 filesystems.<div class="spacer">
</div>
The <i>e2fsck.conf</i> file uses an INI-style format.  Stanzas, or top-level sections, are delimited by square braces: [ ].  Within each section, each line defines a relation, which assigns tags to values, or to a subsection, which contains further relations or subsections. An example of the INI-style format used by this configuration file follows below:<div class="spacer">
</div>
	[section1]<div style="height: 0.00em;">
&#160;</div>
		tag1 = value_a<div style="height: 0.00em;">
&#160;</div>
		tag1 = value_b<div style="height: 0.00em;">
&#160;</div>
		tag2 = value_c<div class="spacer">
</div>
	[section 2]<div style="height: 0.00em;">
&#160;</div>
		tag3 = {<div style="height: 0.00em;">
&#160;</div>
			subtag1 = subtag_value_a<div style="height: 0.00em;">
&#160;</div>
			subtag1 = subtag_value_b<div style="height: 0.00em;">
&#160;</div>
			subtag2 = subtag_value_c<div style="height: 0.00em;">
&#160;</div>
		}<div style="height: 0.00em;">
&#160;</div>
		tag1 = value_d<div style="height: 0.00em;">
&#160;</div>
		tag2 = value_e<div style="height: 0.00em;">
&#160;</div>
	}<div class="spacer">
</div>
Comments are delimited by a semicolon (';') or a hash ('#') character at the beginning of the comment, and are terminated by the end of line character.<div class="spacer">
</div>
Tags and values must be quoted using double quotes if they contain spaces.  Within a quoted string, the standard backslash interpretations apply: &quot;\n&quot; (for the newline character), &quot;\t&quot; (for the tab character), &quot;\b&quot; (for the backspace character), and &quot;\\&quot; (for the backslash character).<div class="spacer">
</div>
The following stanzas are used in the <i>e2fsck.conf</i> file.  They will be described in more detail in future sections of this document.<dl>
<dt>
<i>[options]</i></dt>
<dd>
This stanza contains general configuration parameters for <b>e2fsck</b>'s behavior.</dd>
</dl>
<dl>
<dt>
<i>[problems]</i></dt>
<dd>
This stanza allows the administrator to reconfigure how e2fsck handles various filesystem inconsistencies.</dd>
</dl>
<dl>
<dt>
<i>[scratch_files]</i></dt>
<dd>
This stanza controls when e2fsck will attempt to use scratch files to reduce the need for memory.</dd>
</dl>
</div>
<div class="section">
<h1>THE [options] STANZA</h1> The following relations are defined in the <i>[options]</i> stanza.<dl>
<dt>
<i>allow_cancellation</i></dt>
<dd>
If this relation is set to a boolean value of true, then if the user interrupts e2fsck using ^C, and the filesystem is not explicitly flagged as containing errors, e2fsck will exit with an exit status of 0 instead of 32.  This setting defaults to false.</dd>
</dl>
<dl>
<dt>
<i>accept_time_fudge</i></dt>
<dd>
Unfortunately, due to Windows' unfortunate design decision to configure the hardware clock to tick localtime, instead of the more proper and less error-prone UTC time, many users end up in the situation where the system clock is incorrectly set at the time when e2fsck is run.</dd>
</dl>
<dl>
<dt>
</dt>
<dd>
Historically this was usually due to some distributions having buggy init scripts and/or installers that didn't correctly detect this case and take appropriate countermeasures.  However, it's still possible, despite the best efforts of init script and installer authors to not be able to detect this misconfiguration, usually due to a buggy or misconfigured virtualization manager or the installer not having access to a network time server during the installation process.  So by default, we allow the superblock times to be fudged by up to 24 hours. This can be disabled by setting <i>accept_time_fudge</i> to the boolean value of false.  This setting defaults to true.</dd>
</dl>
<dl>
<dt>
<i>broken_system_clock</i></dt>
<dd>
The <b>e2fsck</b>(8) program has some heuristics that assume that the system clock is correct.  In addition, many system programs make similar assumptions. For example, the UUID library depends on time not going backwards in order for it to be able to make its guarantees about issuing universally unique ID's.  Systems with broken system clocks, are well, broken. However, broken system clocks, particularly in embedded systems, do exist.  E2fsck will attempt to use heuristics to determine if the time can not be trusted; and to skip time-based checks if this is true.  If this boolean is set to true, then e2fsck will always assume that the system clock can not be trusted.</dd>
</dl>
<dl>
<dt>
<i>clear_test_fs_flag</i></dt>
<dd>
This boolean relation controls whether or not <b>e2fsck</b>(8) will offer to clear the test_fs flag if the ext4 filesystem is available on the system.  It defaults to true.</dd>
</dl>
<dl>
<dt>
<i>defer_check_on_battery</i></dt>
<dd>
This boolean relation controls whether or not the interval between filesystem checks (either based on time or number of mounts) should be doubled if the system is running on battery.  This setting defaults to true.</dd>
</dl>
<dl>
<dt>
<i>indexed_dir_slack_percentage</i></dt>
<dd>
When <b>e2fsck</b>(8) repacks a indexed directory, reserve the specified percentage of empty space in each leaf nodes so that a few new entries can be added to the directory without splitting leaf nodes, so that the average fill ratio of directories can be maintained at a higher, more efficient level.  This relation defaults to 20 percent.</dd>
</dl>
</div>
<div class="section">
<h1>THE [problems] STANZA</h1> Each tag in the <i>[problems]</i> stanza names a problem code specified with a leading &quot;0x&quot; followed by six hex digits. The value of the tag is a subsection where the relations in that subsection override the default treatment of that particular problem code.<div class="spacer">
</div>
Note that inappropriate settings in this stanza may cause <b>e2fsck</b> to behave incorrectly, or even crash.  Most system administrators should not be making changes to this section without referring to source code.<div class="spacer">
</div>
Within each problem code's subsection, the following tags may be used:<dl>
<dt>
<i>description</i></dt>
<dd>
This relation allows the message which is printed when this filesystem inconsistency is detected to be overridden.</dd>
</dl>
<dl>
<dt>
<i>preen_ok</i></dt>
<dd>
This boolean relation overrides the default behavior controlling whether this filesystem problem should be automatically fixed when <b>e2fsck</b> is running in preen mode.</dd>
</dl>
<dl>
<dt>
<i>no_ok</i></dt>
<dd>
This boolean relation overrides the default behavior determining whether or not the filesystem will be marked as inconsistent if the user declines to fix the reported problem.</dd>
</dl>
<dl>
<dt>
<i>no_default</i></dt>
<dd>
This boolean relation overrides whether the default answer for this problem (or question) should be &quot;no&quot;.</dd>
</dl>
<dl>
<dt>
<i>preen_nomessage</i></dt>
<dd>
This boolean relation overrides the default behavior controlling whether or not the description for this filesystem problem should be suppressed when <b>e2fsck</b> is running in preen mode.</dd>
</dl>
<dl>
<dt>
<i>no_nomsg</i></dt>
<dd>
This boolean relation overrides the default behavior controlling whether or not the description for this filesystem problem should be suppressed when a problem forced not to be fixed, either because <b>e2fsck</b> is run with the <b>-n</b> option or because the <i>force_no</i> flag has been set for the problem.</dd>
</dl>
<dl>
<dt>
<i>force_no</i></dt>
<dd>
This boolean option, if set to true, forces a problem to never be fixed. That is, it will be as if the user problem responds 'no' to the question of 'should this problem be fixed?'.  The <i>force_no</i> option even overrides the <b>-y</b> option given on the command-line (just for the specific problem, of course).</dd>
</dl>
</div>
<div class="section">
<h1>THE [scratch_files] STANZA</h1> The following relations are defined in the <i>[scratch_files]</i> stanza.<dl>
<dt>
<i>directory</i></dt>
<dd>
If the directory named by this relation exists and is writeable, then e2fsck will attempt to use this directory to store scratch files instead of using in-memory data structures.</dd>
</dl>
<dl>
<dt>
<i>numdirs_threshold</i></dt>
<dd>
If this relation is set, then in-memory data structures be used if the number of directories in the filesystem are fewer than amount specified.</dd>
</dl>
<dl>
<dt>
<i>dirinfo</i></dt>
<dd>
This relation controls whether or not the scratch file directory is used instead of an in-memory data structure for directory information.  It defaults to true.</dd>
</dl>
<dl>
<dt>
<i>icount</i></dt>
<dd>
This relation controls whether or not the scratch file directory is used instead of an in-memory data structure when tracking inode counts.  It defaults to true.</dd>
</dl>
</div>
<div class="section">
<h1>EXAMPLES</h1> The following recipe will prevent e2fsck from aborting during the boot process when a filesystem contains orphaned files.  (Of course, this is not always a good idea, since critical files that are needed for the security of the system could potentially end up in lost+found, and starting the system without first having a system administrator check things out may be dangerous.)<div class="spacer">
</div>
<div style="height: 0.00em;">
&#160;</div>
	[problems]<div style="height: 0.00em;">
&#160;</div>
		0x040002 = {<div style="height: 0.00em;">
&#160;</div>
			preen_ok = true<div style="height: 0.00em;">
&#160;</div>
			description = &quot;@u @i %i.  &quot;<div style="height: 0.00em;">
&#160;</div>
		}</div>
<div class="section">
<h1>FILES</h1><dl>
<dt>
<i>/etc/e2fsck.conf</i></dt>
<dd>
The configuration file for <b>e2fsck</b>(8).</dd>
</dl>
</div>
<div class="section">
<h1>SEE ALSO</h1> <b>e2fsck</b>(8)</div>
<table class="foot">
<tr>
<td class="foot-date">
November 2011</td>
<td class="foot-os">
E2fsprogs version 1.42</td>
</tr>
</table>
</div>
</body>
</html>

