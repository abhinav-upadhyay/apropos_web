<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/linux/style.css" type="text/css" media="all"/>
<title>
mlocate.db(5)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
mlocate.db(5)</td>
<td class="head-vol">
File Formats Manual</td>
<td class="head-rtitle">
mlocate.db(5)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>NAME</h1> mlocate.db - a mlocate database<div style="height: 1.00em;">
&#160;</div>
</div>
<div class="section">
<h1>DESCRIPTION</h1> A mlocate database starts with a file header: 8 bytes for a magic number ( <b>&quot;\0mlocate&quot;</b> like a C literal), 4 bytes for the <i>configuration block</i> size in big endian, 1 byte for file format version ( <b>0</b>), 1 byte for the &#8220;require visibility&#8221; flag ( <b>0</b> or <b>1</b>), 2 bytes padding, and a NUL-terminated path name of the root of the database.<div style="height: 1.00em;">
&#160;</div>
The header is followed by a <i>configuration block</i>, included to ensure databases are not reused if some configuration changes could affect their contents. The size of the configuration block in bytes is stored in the file header. The configuration block is a sequence of  <i>variable assignments</i>, ordered by variable name. Each <i>variable assignment</i> consists of a NUL-terminated variable name and an ordered list of NUL-terminated values. The value list is terminated by one more <small>NUL</small> character. The ordering used is defined by the <b>strcmp ()</b> function.<div style="height: 1.00em;">
&#160;</div>
Currently defined variables are:<dl>
<dt>
<b>prune_bind_mounts</b></dt>
<dd>
A single entry, the value of PRUNE_BIND_MOUNTS; one of the strings <b>0</b> or  <b>1</b>.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
<b>prunefs</b></dt>
<dd>
The value of <b>PRUNEFS</b>, each entry is converted to uppercase.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
<b>prunepaths</b></dt>
<dd>
The value of <b>PRUNEPATHS</b>.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<div class="spacer">
</div>
The rest of the file until <small>EOF</small> describes directories and their contents. Each directory starts with a header: 8 bytes for <i>directory time</i> (seconds) in big endian, 4 bytes for <i>directory time</i> (nanoseconds) in big endian (0 if unknown, less than 1,000,000,000), 4 bytes padding, and a NUL-terminated path name of the the directory. Directory contents, a sequence of <i>file entries</i> sorted by name, follow.<div style="height: 1.00em;">
&#160;</div>
<i>Directory time</i> is the maximum of <b>st_ctime</b> and <b>st_mtime</b> of the directory. <b>updatedb</b>(8) uses the original data if the <i>directory time</i> in the database and in the file system match exactly. <i>Directory time</i> equal to 0 always causes rescanning of the directory: this is necessary to handle directories which were being updated while building the database.<div style="height: 1.00em;">
&#160;</div>
Each <i>file entry</i> starts with a single byte, marking its type:<dl>
<dt>
<b>0</b></dt>
<dd>
A non-directory file. Followed by a NUL-terminated file (not path) name.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
<b>1</b></dt>
<dd>
A subdirectory. Followed by a NUL-terminated file (not path) name.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
<b>2</b></dt>
<dd>
Marks the end of the current directory.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<div class="spacer">
</div>
<b>locate(1)</b> only reports file entries, directory names are not reported because they are reported as an entry in their parent directory. The only exception is the root directory of the database, which is stored in the file header.<div style="height: 1.00em;">
&#160;</div>
</div>
<div class="section">
<h1>AUTHOR</h1> Miloslav Trmac &lt;mitr@redhat.com&gt;<div style="height: 1.00em;">
&#160;</div>
</div>
<div class="section">
<h1>SEE ALSO</h1> <b>locate</b>(1), <b>updatedb.conf</b>(5), <b>updatedb</b>(8)</div>
<table class="foot">
<tr>
<td class="foot-date">
Jan 2007</td>
<td class="foot-os">
mlocate</td>
</tr>
</table>
</div>
</body>
</html>

