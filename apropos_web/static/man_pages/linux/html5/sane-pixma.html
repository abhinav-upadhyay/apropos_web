<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/linux/style.css" type="text/css" media="all"/>
<title>
sane-pixma(5)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
sane-pixma(5)</td>
<td class="head-vol">
SANE Scanner Access Now Easy</td>
<td class="head-rtitle">
sane-pixma(5)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>NAME</h1> <b>sane-pixma</b> - SANE backend for Canon PIXMA Multi-Functions Printers<div style="height: 0.00em;">
&#160;</div>
<br/>
             MP, MX, ImageCLASS and I-SENSYS series</div>
<div class="section">
<h1>DESCRIPTION</h1> The <b>sane-pixma</b> library implements a SANE (Scanner Access Now Easy) backend that provides access to Canon PIXMA multi-function devices (All-in-one printers). The backend implements both USB interface and Network LAN interface using Canon's BJNP protocol. Currently, the following models work with this backend:<div class="spacer">
</div>
<div style="margin-left: 5.00ex;">
PIXMA MP140, MP150, MP160, MP170, MP180, MP190<div style="height: 0.00em;">
&#160;</div>
PIXMA MP210, MP220, MP240, MP250, MP260, MP270<div style="height: 0.00em;">
&#160;</div>
PIXMA MP360, MP370, MP390<div style="height: 0.00em;">
&#160;</div>
PIXMA MP450, MP460, MP470, MP480, MP490<div style="height: 0.00em;">
&#160;</div>
PIXMA MP500, MP510, MP520, MP530, MP540, MP550, MP560<div style="height: 0.00em;">
&#160;</div>
PIXMA MP600, MP600R, MP610, MP620, MP630, MP640, MP710<div style="height: 0.00em;">
&#160;</div>
PIXMA MP800, MP800R, MP810, MP830, MP960, MP970, MP980, MP990<div style="height: 0.00em;">
&#160;</div>
PIXMA MX300, MX310, MX330, MX340, MX350<div style="height: 0.00em;">
&#160;</div>
PIXMA MX700, MX850, MX860, MX870, MX7600<div style="height: 0.00em;">
&#160;</div>
PIXMA MP700, MP730, PIXMA MP750 (no grayscale)<div style="height: 0.00em;">
&#160;</div>
ImageCLASS MF3110, MF3240, MF4010, MF4018, MF4120, MF4122<div style="height: 0.00em;">
&#160;</div>
ImageCLASS MF4140, MF4150, MF4270, MF4350d, MF4370dn, MF4380dn<div style="height: 0.00em;">
&#160;</div>
ImageCLASS MF4660, MF4690, MF5770, MF6550, D480<div style="height: 0.00em;">
&#160;</div>
I-SENSYS MF4320d, MF4330d<div style="height: 0.00em;">
&#160;</div>
CanoScan 8800F</div>
<div class="spacer">
</div>
The following models are not well tested and/or the scanner sometimes hangs and must be switched off and on.<div class="spacer">
</div>
<div style="margin-left: 5.00ex;">
PIXMA PIXMA MP760, PIXMA MP780</div>
<div class="spacer">
</div>
The following models may use the same Pixma protocol as those listed above, but have not yet been reported to work (or not). They are declared in the backend so that they get recognized and activated. Feedback in the Sane-dev mailing list welcome.<div class="spacer">
</div>
<div style="margin-left: 5.00ex;">
PIXMA MP375R, MP740<div style="height: 0.00em;">
&#160;</div>
PIXMA MX320<div style="height: 0.00em;">
&#160;</div>
ImageCLASS MF5630, MF5650, MF5730, MF5750, MF8170c</div>
<div class="spacer">
</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
The backend supports:<div class="spacer">
</div>
<div style="margin-left: 5.00ex;">
* resolutions of 75, 150, 300, 600, 1200, 2400, and 4800 DPI (some maybe buggy),<div style="height: 0.00em;">
&#160;</div>
* color and grayscale mode, as well as lineart on certain models,<div style="height: 0.00em;">
&#160;</div>
* a custom gamma table,<div style="height: 0.00em;">
&#160;</div>
* Automatic Document Feeder, Simplex and Duplex.<div style="height: 0.00em;">
&#160;</div>
* Transparency Unit, 24 or 48 bits depth.</div>
<div class="spacer">
</div>
The device name for USB devices is in the form pixma:xxxxyyyy_zzzzz where x, y and z are vendor ID, product ID and serial number respectively. Example: pixma:04A91709_123456 is a MP150.<div class="spacer">
</div>
Device names for BJNP devices is in the form pixma:aaaa_bbbbb where aaaa is the scanners model and bbbb is the hostname or ip-adress.<div class="spacer">
</div>
This backend, based on cloning original Canon drivers protocols, is in a production stage. Designed has been carried out without any applicable manufacturer documentation, probably never available. However, we have tested it as well as we could, but it may not work in every situations. You will find an up-to-date status at the project homepage. (See below). Users feedback is essential to help improve features and performances.</div>
<div class="section">
<h1>OPTIONS</h1> Besides &quot;well-known&quot; options (e.g. resolution, mode etc.) pixma backend also provides the following<div style="height: 1.00em;">
&#160;</div>
options for button handling, i.e. the options might change in the future.<div style="height: 0.00em;">
&#160;</div>
Button scan is disabled on MAC OS X due to darwin libusb not handling timeouts in usb interrupt reads.<dl>
<dt>
<i>button-controlled</i></dt>
<dd>
This option can be used in combination with <b>scanadf</b>(1) and <b>scanimage</b>(1) in batch mode, for example when you want to scan many photos or multiple-page documents. If it is enabled (i.e. is set to true or yes), the backend waits before every scan until the user presses the &quot;SCAN&quot; button (for MP150) or the color-scan button (for other models). Just put the first page in the scanner, press the button, then the next page, press the button and so on. When you finished, press the gray-scan button. (For MP150 you have to stop the frontend by pressing Ctrl-C for example.)</dd>
</dl>
<dl>
<dt>
<i>button-update button-1 button-2</i></dt>
<dd>
These options are interesting for developers. To check button status: (1) set <i>button-1</i> and <i>button-2</i> to zero, (2) set <i>button-update</i> (Its type is SANE_TYPE_BUTTON.), (3) get <i>button-1</i> and <i>button-2</i>. If the result is not zero, the corresponding button was pressed.</dd>
</dl>
</div>
<div class="section">
<h1>FILES</h1><dl>
<dt>
<i>/usr/lib/arch_triplet/sane/libsane-pixma.a</i></dt>
<dd>
The static library implementing this backend.</dd>
</dl>
<dl>
<dt>
<i>/usr/lib/arch_triplet/sane/libsane-pixma.so</i></dt>
<dd>
The shared library implementing this backend (present on systems that support dynamic loading).</dd>
</dl>
<dl>
<dt>
<i>/etc/sane.d/pixma.conf</i></dt>
<dd>
The backend configuration file (see also description of <b>SANE_CONFIG_DIR</b> below). The files contains an optional list of scanners. Normally only scanners that can not be auto-detected because they are on a different subnet shall be listed here. If your OS does not allow enumeration of interfaces (i.e. it does not support the getifaddrs() function) you may need to add your scanner here as well. Scanners shall be listed as:</dd>
</dl>
<div class="spacer">
</div>
<div style="margin-left: 5.00ex;">
<i>bjnp://&lt;host&gt;</i></div>
<div style="margin-left: 5.00ex;">
where host is the hostname or IP address of the scanner, e.g. bjnp://10.0.1.4 or bjnp://myscanner.mydomain.org. Define each scanner on a new line.</div>
</div>
<div class="section">
<h1>USB SUPPORT</h1> USB scanners will be auto-detected and require no configuration.</div>
<div class="section">
<h1>NETWORKING SUPPORT</h1> The pixma backend supports network scanners using the so called Canon BJNP protocol. Configuration is normally not required. The pixma backend will auto-detect your scanner if it is within the same subnet as your computer if your OS does support this.<div style="height: 1.00em;">
&#160;</div>
If your scanner can not be auto-detected, you can add it to the pixma configuration file (see above).</div>
<div class="section">
<h1>FIREWALLING FOR NETWORKED SCANNERS</h1> The sane pixma backend communicates with port 8612 on the scanner. So you will have to allow outgoing traffic TO port 8612 on the common subnet for scanning.<div style="height: 1.00em;">
&#160;</div>
Scanner detection is slightly more complicated. The pixma backend sends a broadcast on all direct connected subnets it can find (provided your OS allows for enumeration of all interfaces). The broadcast is sent FROM port 8612 TO port 8612 on the broadcast address of each interface. The outgoing packets will be allowed by the rule described above. Responses from the scanner are sent back to the computer TO port 8612. Connection tracking however does not see a match as the response does not come from the broadcast address but from the scanners own address. You will therefore have to allow incoming packets TO port 8612 on your computer.<div style="height: 1.00em;">
&#160;</div>
So in short: open the firewall for all traffic from your computer to port 8612 AND to port 8612 to your computer.<div style="height: 1.00em;">
&#160;</div>
With the firewall rules above there is no need to add the scanner to the pixma.conf file, unless the scanner is on a network that is not directly connected to your computer.</div>
<div class="section">
<h1>ENVIRONMENT</h1><dl>
<dt>
<b>SANE_DEBUG_PIXMA</b></dt>
<dd>
If the library was compiled with debug support enabled, this environment variable controls the debug level for this backend. Higher value increases the verbosity.</dd>
</dl>
<div class="spacer">
</div>
<div style="margin-left: 5.00ex;">
0  print nothing (default)<div style="height: 0.00em;">
&#160;</div>
1  print error and warning messages (recommended)<div style="height: 0.00em;">
&#160;</div>
2  print informational messages<div style="height: 0.00em;">
&#160;</div>
3  print debug-level messages<div style="height: 0.00em;">
&#160;</div>
11 dump USB/BJNP traffics<div style="height: 0.00em;">
&#160;</div>
21 full dump USB/BJNP traffic<div style="height: 0.00em;">
&#160;</div>
</div>
<dl>
<dt>
<b>PIXMA_EXPERIMENT</b></dt>
<dd>
Setting to a non-zero value will enable the support for experimental models. You should also set SANE_DEBUG_PIXMA to 11.</dd>
</dl>
<dl>
<dt>
<b>SANE_CONFIG_DIR</b></dt>
<dd>
This environment variable specifies the list of directories that may contain the configuration file.  Under UNIX, the directories are separated by a colon (`:'), under OS/2, they are separated by a semi-colon (`;').  If this variable is not set, the configuration file is searched in two default directories: first, the current working directory (&quot;.&quot;) and then in /etc/sane.d.  If the value of the environment variable ends with the directory separator character, then the default directories are searched after the explicitly specified directories.  For example, setting <b>SANE_CONFIG_DIR</b> to &quot;/tmp/config:&quot; would result in directories &quot;tmp/config&quot;, &quot;.&quot;, and &quot;/etc/sane.d&quot; being searched (in this order).</dd>
</dl>
</div>
<div class="section">
<h1>SEE ALSO</h1> <b>sane</b>(7), <b>sane-dll</b>(5), <i>http://home.arcor.de/wittawat/pixma/,</i> <i>http://mp610.blogspot.com/</i><div class="spacer">
</div>
In case of trouble with a recent Pixma model, try the latest code for the pixma backend, available in the Sane git repository at:<div style="height: 0.00em;">
&#160;</div>
<i>http://git.debian.org/?p=sane/sane-backends.git</i><div class="spacer">
</div>
You can also post into the Sane-devel mailing list for support.<div style="height: 1.00em;">
&#160;</div>
</div>
<div class="section">
<h1>AUTHORS</h1> Wittawat Yamwong, Nicolas Martin, Dennis Lou, Louis Lagendijk<div class="spacer">
</div>
We would like to thank all testers and helpers. Without them we could not be able to write subdrivers for models we don't have. See also the project homepage.</div>
<table class="foot">
<tr>
<td class="foot-date">
8 Jan 2010</td>
<td class="foot-os">
</td>
</tr>
</table>
</div>
</body>
</html>

