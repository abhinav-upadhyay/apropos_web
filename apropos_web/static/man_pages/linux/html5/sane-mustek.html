<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/linux/style.css" type="text/css" media="all"/>
<title>
sane-mustek(5)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
sane-mustek(5)</td>
<td class="head-vol">
SANE Scanner Access Now Easy</td>
<td class="head-rtitle">
sane-mustek(5)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>NAME</h1> sane-mustek - SANE backend for Mustek SCSI flatbed scanners (and some other devices)</div>
<div class="section">
<h1>DESCRIPTION</h1> The <b>sane-mustek</b> library implements a SANE (Scanner Access Now Easy) backend that provides access to Mustek (and some relabeled Trust and Primax) SCSI and parport flatbed scanners.  At present, the following scanners are known to work more or less with this backend:<div class="spacer">
</div>
<div style="margin-left: 5.00ex;">
Paragon MFS-6000CX<div style="height: 0.00em;">
&#160;</div>
Paragon MFS-12000CX<div style="height: 0.00em;">
&#160;</div>
Paragon MFC-600S, 600 II CD, ScanMagic 600 II SP<div style="height: 0.00em;">
&#160;</div>
Paragon MFC-800S, 800 II SP<div style="height: 0.00em;">
&#160;</div>
Paragon MFS-6000SP<div style="height: 0.00em;">
&#160;</div>
Paragon MFS-8000SP<div style="height: 0.00em;">
&#160;</div>
Paragon MFS-1200SP, MFS-12000SP<div style="height: 0.00em;">
&#160;</div>
ScanExpress 6000SP<div style="height: 0.00em;">
&#160;</div>
ScanExpress 12000SP, 12000SP Plus, Paragon 1200 III SP, ScanMagic 9636S, 9636S Plus<div style="height: 0.00em;">
&#160;</div>
Paragon 1200 LS<div style="height: 0.00em;">
&#160;</div>
ScanExpress A3 SP<div style="height: 0.00em;">
&#160;</div>
Paragon 1200 SP Pro<div style="height: 0.00em;">
&#160;</div>
Paragon 1200 A3 Pro<div style="height: 0.00em;">
&#160;</div>
Paragon 600 II EP<div style="height: 0.00em;">
&#160;</div>
Paragon 600 II N<div style="height: 0.00em;">
&#160;</div>
Trust Imagery 1200<div style="height: 0.00em;">
&#160;</div>
Trust Imagery 1200 SP<div style="height: 0.00em;">
&#160;</div>
Trust Imagery 4800 SP<div style="height: 0.00em;">
&#160;</div>
Trust SCSI Connect 19200<div style="height: 0.00em;">
&#160;</div>
Primax Compact 4800 SCSI<div style="height: 0.00em;">
&#160;</div>
</div>
<div class="spacer">
</div>
More details can be found on the Mustek SCSI backend homepage <i>http://www.meier-geinitz.de/sane/mustek-backend/</i>.<div class="spacer">
</div>
Don't mix up MFS (Paragon), Pro and ScanExpress models! They're completely different. Check the exact model name!<div class="spacer">
</div>
Note that most of the above scanners come with a SCSI interface.  The only non-SCSI scanners that have some support at this point is the 600 II N and 600 II EP scanners. The former one comes with its own parallel port adapter (i.e., it does <i>not</i> attach to the printer port). Both scanners use the SCSI protocol internally, too. More info on how to use these parallel port scanners can be found below in section <b>PARALLEL PORT SCANNERS</b>. Other parallel port scanners are not supported by this backend but you may be successful using the Mustek parallel port backend mustek_pp, see <b>sane-mustek_pp</b>(5). USB scanners are also not supported by this backend but the ma1509, mustek_usb, gt68xx, and plustek backends include support for some of them, see <b>sane-ma1509</b>(5), <b>sane-mustek_usb</b>(5), <b>sane-gt68xx</b>(5), and <b>sane-plustek</b>(5).<div class="spacer">
</div>
Mustek scanners have no protection against exceeding the physical scan area height.  That is, if a scan is attempted with a height that exceeds the height of the scan surface, the scanner begins making loud noises and the scan mechanism may be damaged.  Thus, if you hear such a noise, IMMEDIATELY turn off the scanner. This shouldn't happen if your scanner is in the list of known scanners. There is more information in the <i>/usr/share/doc/libsane/PROBLEMS</i> file.<div class="spacer">
</div>
If you own a Mustek (or Trust) scanner other than the ones listed above that works with this backend, please let us know by sending the scanner's exact model name (look at the front and back of the scanner) and a debug output to <i>sane-devel@lists.alioth.debian.org</i>. You can get the debug output by setting the environment variable <b>SANE_DEBUG_MUSTEK</b> to 5 and showing the list of available scanners with scanimage -L. Please send all of it to the mailing list. You must be subscribed to sane-devel before you can send mail to the list. See <i>http://www.sane-project.org/mailing-lists.html</i> for details.<div style="height: 1.00em;">
&#160;</div>
</div>
<div class="section">
<h1>DEVICE NAMES</h1> This backend expects device names of the form:<div class="spacer">
</div>
<div style="margin-left: 5.00ex;">
<i>special</i></div>
<div class="spacer">
</div>
Where <i>special</i> is either the path-name for the special device that corresponds to a SCSI scanner or the port number at which the parallel port scanners can be found (see section <b>PARALLEL PORT SCANNERS</b> below).  For SCSI scanners, the special device name must be a generic SCSI device or a symlink to such a device.  The program <i>sane-find-scanner</i> helps to find out the correct device. Under Linux, such a device name could be <i>/dev/sg0</i> or <i>/dev/sg3</i>, for example.  See <b>sane-scsi</b>(5) for details.</div>
<div class="section">
<h1>CONFIGURATION</h1> The contents of the <i>mustek.conf</i> file is a list of options and device names that correspond to Mustek scanners.  Empty lines and lines starting with a hash mark (#) are ignored.  See <b>sane-scsi</b>(5) on details of what constitutes a valid device name.<div class="spacer">
</div>
The supported options are <b>linedistance-fix</b>, <b>lineart-fix</b>, <b>legal-size</b>, <b>buffersize</b>, <b>blocksize</b>, <b>strip-height</b>, <b>disable-double-buffering</b>, <b>disable-backtracking</b>, and <b>force-wait</b>.<div class="spacer">
</div>
Options come in two flavors: global and positional ones.  Global options apply to all devices managed by the backend whereas positional options apply just to the most recently mentioned device.  Note that this means that the order in which the options appear matters!<div class="spacer">
</div>
Option <b>linedistance-fix</b> is positional and works around a problem that occurs with some SCSI controllers (notably the ncr810 controller under Linux).  If color scans have horizontal stripes and/or the colors are off, then it's likely that your controller suffers from this problem.  Turning on this option usually fixes the problem.<div class="spacer">
</div>
Option <b>lineart-fix</b> is positional and works around a timing problem that seems to exist with certain MFS-12000SP scanners.  The problem manifests itself in dropped lines when scanning in lineart mode.  Turning on this option should fix the problem but may slow down scanning a bit.<div class="spacer">
</div>
Option <b>legal-size</b> is positional and sets the size of the scan area to Legal format. Set this option if you own a Paragon 12000 LS. It can't be distinguished by software from a ScanExpress 12000 SP (ISO A4 format).<div class="spacer">
</div>
Option <b>buffersize</b> is a positional option that overrides the default value set for the size of the SCSI buffer. The buffer size is specified in kilobytes. The default value is 128. Because of double buffering the buffer actually sent to the scanner is half the size of this value. Try to increase this value to achieve higher scan speeds. Note that some ScanExpress scanners don't like buffer sizes above 64 kb (buffersize = 128). If your sg driver can't set SCSI buffer sizes at runtime you may have to change that value, too. See sane-scsi(5) for details.<div class="spacer">
</div>
Option <b>blocksize</b> is a positional option that overrides the default value set for the maximum amount of data scanned in one block. The buffer size is specified in kilobytes. Some scanners freeze if this value is bigger than 2048. The default value is 1 GB (so effectively no limit) for most scanners. Don't change this value if you don't know exactly what you do.<div class="spacer">
</div>
Option <b>strip-height</b> is a global option that limits the maximum height of the strip scanned with a single SCSI read command.  The height is specified in inches and may contain a fractional part (e.g., 1.5).  Setting the strip-height to a small value (one inch, for example) reduces the likelihood of encountering problems with SCSI driver timeouts and/or timeouts with other devices on the same SCSI bus. Unfortunately, it also increases scan times. With current SCSI adapters and drivers this option shouldn't be needed any more.<div class="spacer">
</div>
Option <b>disable-double-buffering</b> is a global option. If set, the backend will only send one buffer at a time to the scanner. Try this option if you have trouble while scanning, e.g. SCSI errors, freezes, or the first few cm are repeated over and over again in your image.<div class="spacer">
</div>
Option <b>disable-backtracking</b> is a positional option. If set, the scanner will not move back its slider after each SCSI buffer is filled (`backtracking'). Setting this option will lead to faster scans but may also produce horizontal stripes. This option doesn't work with every scanner (only some of the paragon models can modify backtracking).<div class="spacer">
</div>
Finally, <b>force-wait</b> is a global option. If set, the backend will wait until the device is ready before sending the inquiry command. Further more the backend will force the scan slider to return to its starting position (not implemented for all scanners). This option may be necessary with the 600 II N or when scanimage is used multiple times (e.g. in scripts). The default is off (not set).<div class="spacer">
</div>
A sample configuration file is shown below:<div class="spacer">
</div>
<div style="margin-left: 5.00ex;">
# limit strip height of all scanners to 1.5 inches:<div style="height: 0.00em;">
&#160;</div>
option strip-height 1.5<div style="height: 0.00em;">
&#160;</div>
<div style="height: 0.00em;">
&#160;</div>
/dev/scanner    # first Mustek scanner<div style="height: 0.00em;">
&#160;</div>
# 1 MB buffer for /dev/scanner:<div style="height: 0.00em;">
&#160;</div>
option buffersize 1024<div style="height: 0.00em;">
&#160;</div>
/dev/sge        # second Mustek scanner<div style="height: 0.00em;">
&#160;</div>
# turn on fixes for /dev/sge:<div style="height: 0.00em;">
&#160;</div>
option lineart-fix<div style="height: 0.00em;">
&#160;</div>
option linedistance-fix</div>
<div style="height: 1.00em;">
&#160;</div>
</div>
<div class="section">
<h1>SCSI ADAPTER TIPS</h1> You need a SCSI adapter for the SCSI scanners. Even if the connector is the same as that of parallel port scanners, connecting it to the computers parallel port will NOT work.<div class="spacer">
</div>
Mustek SCSI scanners are typically delivered with an ISA SCSI adapter. Unfortunately, that adapter is not worth much since it is not interrupt driven.  It is (sometimes) possible to get the supplied card to work, but without interrupt line, scanning will be very slow and put so much load on the system, that it becomes almost unusable for other tasks.<div class="spacer">
</div>
If you already have a working SCSI controller in your system, you should consider that Mustek scanners do not support the SCSI-2 disconnect/reconnect protocol and hence tie up the SCSI bus while a scan is in progress.  This means that no other SCSI device on the same bus can be accessed while a scan is in progress.<div class="spacer">
</div>
Because the Mustek-supplied adapter is not worth much and because Mustek scanners do not support the SCSI-2 disconnect/reconnect protocol, it is recommended to install a separate (cheap) SCSI controller for Mustek scanners.  For example, ncr810 based cards are known to work fine and cost as little as fifty US dollars.<div class="spacer">
</div>
For Mustek scanners, it is typically necessary to configure the low-level SCSI driver to disable synchronous transfers (sync negotiation), tagged command queuing, and target disconnects.  See <b>sane-scsi</b>(5) for driver- and platform-specific information.<div class="spacer">
</div>
The ScanExpress models have sometimes trouble with high resolution color mode. If you encounter sporadic corrupted images (parts duplicated or shifted horizontally) kill all other applications before scanning and (if sufficient memory is available) disable swapping.<div class="spacer">
</div>
Details on how to get the Mustek SCSI adapters and other cards running can be found at <i>http://www.meier-geinitz.de/sane/mustek-backend/#SCSI</i>.<div style="height: 1.00em;">
&#160;</div>
</div>
<div class="section">
<h1>PARALLEL PORT SCANNERS</h1> This backend has support for the Paragon 600 II EP and Paragon 600 II N parallel port scanners.  Note that the latter scanner comes with its own ISA card that implements a funky parallel port (in other words, the scanner does not connected to the printer parallel port).<div class="spacer">
</div>
These scanners can be configured by listing the port number of the adapter or the parallel port in the mustek.conf file.  Valid port numbers for the 600 II N are <i>0x26b</i>, <i>0x2ab</i>, <i>0x2eb</i>, <i>0x22b</i>, <i>0x32b</i>, <i>0x36b</i>,  <i>0x3ab</i>, <i>0x3eb</i>. For the 600 II EP use one of these: <i>parport0</i>, <i>parport1</i>, <i>parport2</i>, <i>0x378</i>, <i>0x278</i>, <i>0x3bc</i>. Pick one that doesn't conflict with the other hardware in your computer. Put only one number on a single line. Example:<div class="spacer">
</div>
<div style="margin-left: 5.00ex;">
<i>0x3eb</i></div>
<div class="spacer">
</div>
Note that for these scanners usually root privileges are required to access the I/O ports.  Thus, either make frontends such as <b>scanimage</b>(1) and <b>xscanimage</b>(1) setuid root (generally not recommended for safety reasons) or, alternatively, access this backend through the network daemon <b>saned</b>(8).<div class="spacer">
</div>
If the Mustek backend blocks while sending the inquiry command to the scanner, add the option <b>force-wait</b> to <i>mustek.conf</i>.<div class="spacer">
</div>
Also note that after a while of no activity, some scanners themselves (not the SANE backend) turns off their CCFL lamps. This shutdown is not always perfect with the result that the lamp sometimes continues to glow dimly at one end. This doesn't appear to be dangerous since as soon as you use the scanner again, the lamp turns back on to the normal high brightness. However, the first image scanned after such a shutdown may have stripes and appear to be over-exposed.  When this happens, just take another scan, and the image will be fine.</div>
<div class="section">
<h1>FILES</h1><dl>
<dt>
<i>/etc/sane.d/mustek.conf</i></dt>
<dd>
The backend configuration file (see also description of <b>SANE_CONFIG_DIR</b> below).</dd>
</dl>
<dl>
<dt>
<i>/usr/lib/arch_triplet/sane/libsane-mustek.a</i></dt>
<dd>
The static library implementing this backend.</dd>
</dl>
<dl>
<dt>
<i>/usr/lib/arch_triplet/sane/libsane-mustek.so</i></dt>
<dd>
The shared library implementing this backend (present on systems that support dynamic loading).</dd>
</dl>
</div>
<div class="section">
<h1>ENVIRONMENT</h1><dl>
<dt>
<b>SANE_CONFIG_DIR</b></dt>
<dd>
This environment variable specifies the list of directories that may contain the configuration file.  Under UNIX, the directories are separated by a colon (`:'), under OS/2, they are separated by a semi-colon (`;').  If this variable is not set, the configuration file is searched in two default directories: first, the current working directory (&quot;.&quot;) and then in /etc/sane.d.  If the value of the environment variable ends with the directory separator character, then the default directories are searched after the explicitly specified directories.  For example, setting <b>SANE_CONFIG_DIR</b> to &quot;/tmp/config:&quot; would result in directories &quot;tmp/config&quot;, &quot;.&quot;, and &quot;/etc/sane.d&quot; being searched (in this order).</dd>
</dl>
<dl>
<dt>
<b>SANE_DEBUG_MUSTEK</b></dt>
<dd>
If the library was compiled with debug support enabled, this environment variable controls the debug level for this backend.  Higher debug levels increase the verbosity of the output.<div style="height: 1.00em;">
&#160;</div>
<br/>
Value  Description<br/>
0      no output<br/>
1      print fatal errors<br/>
2      print important messages<br/>
3      print non-fatal errors and less important messages<br/>
4      print all but debugging messages<br/>
5      print everything<br/>
<div style="height: 1.00em;">
&#160;</div>
Example: export SANE_DEBUG_MUSTEK=4<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
</div>
<div class="section">
<h1>SEE ALSO</h1> <b>sane</b>(7), <b>sane-find-scanner</b>(1), <b>sane-scsi</b>(5), <b>sane-mustek_usb</b>(5), <b>sane-gt68xx</b>(5), <b>sane-plustek</b>(5), <b>sane-mustek_pp</b>(5)<div style="height: 0.00em;">
&#160;</div>
<i>/usr/share/doc/libsane/mustek/mustek.CHANGES</i><div style="height: 0.00em;">
&#160;</div>
<i>http://www.meier-geinitz.de/sane/mustek-backend/</i><div style="height: 1.00em;">
&#160;</div>
</div>
<div class="section">
<h1>AUTHOR</h1> David Mosberger, Andreas Czechanowski, Andreas Bolsch (SE extensions), Henning Meier-Geinitz, James Perry (600 II EP).<div style="height: 1.00em;">
&#160;</div>
</div>
<div class="section">
<h1>BUGS</h1> Scanning with the SCSI adapters supplied by Mustek is very slow at high resolutions and wide scan areas.<div class="spacer">
</div>
Some scanners (e.g. Paragon 1200 A3 + Pro, SE A3) need more testing.<div class="spacer">
</div>
The gamma table supports only 256 colors, even if some scanners can do more.<div class="spacer">
</div>
More detailed bug information is available at the Mustek backend homepage: <i>http://www.meier-geinitz.de/sane/mustek-backend/</i>.</div>
<table class="foot">
<tr>
<td class="foot-date">
13 Jul 2008</td>
<td class="foot-os">
</td>
</tr>
</table>
</div>
</body>
</html>

