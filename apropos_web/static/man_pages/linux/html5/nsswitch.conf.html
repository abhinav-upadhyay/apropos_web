<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/linux/style.css" type="text/css" media="all"/>
<title>
NSSWITCH.CONF(5)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
NSSWITCH.CONF(5)</td>
<td class="head-vol">
Linux Programmer's Manual</td>
<td class="head-rtitle">
NSSWITCH.CONF(5)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>NAME</h1> nsswitch.conf - System Databases and Name Service Switch configuration file</div>
<div class="section">
<h1>DESCRIPTION</h1> Various functions in the C Library need to be configured to work correctly in the local environment. Traditionally, this was done by using files (e.g.,  <i>/etc/passwd</i>), but other nameservices (like the Network Information Service (NIS) and the Domain Name Service (DNS)) became popular, and were hacked into the C library, usually with a fixed search order.<div class="spacer">
</div>
The Linux libc5 with NYS support and the GNU C Library 2.x (libc.so.6) contain a cleaner solution of this problem. It is designed after a method used by Sun Microsystems in the C library of Solaris 2. We follow their name and call this scheme &quot;Name Service Switch&quot; (NSS). The sources for the &quot;databases&quot; and their lookup order are specified in the <i>/etc/nsswitch.conf</i> file.<div class="spacer">
</div>
The following databases are available in the NSS:<dl>
<dt>
<b>aliases</b></dt>
<dd>
Mail aliases, used by <b>sendmail</b>(8). Presently ignored.</dd>
</dl>
<dl>
<dt>
<b>ethers</b></dt>
<dd>
Ethernet numbers.</dd>
</dl>
<dl>
<dt>
<b>group</b></dt>
<dd>
Groups of users, used by <b>getgrent</b>(3) functions.</dd>
</dl>
<dl>
<dt>
<b>hosts</b></dt>
<dd>
Host names and numbers, used by <b>gethostbyname</b>(3) and similar functions.</dd>
</dl>
<dl>
<dt>
<b>netgroup</b></dt>
<dd>
Network wide list of hosts and users, used for access rules. C libraries before glibc 2.1 only support netgroups over NIS.</dd>
</dl>
<dl>
<dt>
<b>networks</b></dt>
<dd>
Network names and numbers, used by <b>getnetent</b>(3) functions.</dd>
</dl>
<dl>
<dt>
<b>passwd</b></dt>
<dd>
User passwords, used by <b>getpwent</b>(3) functions.</dd>
</dl>
<dl>
<dt>
<b>protocols</b></dt>
<dd>
Network protocols, used by <b>getprotoent</b>(3) functions.</dd>
</dl>
<dl>
<dt>
<b>publickey</b></dt>
<dd>
Public and secret keys for Secure_RPC used by NFS and NIS+.</dd>
</dl>
<dl>
<dt>
<b>rpc</b></dt>
<dd>
Remote procedure call names and numbers, used by <b>getrpcbyname</b>(3) and similar functions.</dd>
</dl>
<dl>
<dt>
<b>services</b></dt>
<dd>
Network services, used by <b>getservent</b>(3) functions.</dd>
</dl>
<dl>
<dt>
<b>shadow</b></dt>
<dd>
Shadow user passwords, used by <b>getspnam</b>(3).</dd>
</dl>
<div class="spacer">
</div>
An example <i>/etc/nsswitch.conf</i> (namely, the default used when <i>/etc/nsswitch.conf</i> is missing):<div style="height: 1.00ex;">
&#160;</div>
<dl>
<dt>
passwd:</dt>
<dd>
compat</dd>
</dl>
<dl>
<dt>
group:</dt>
<dd>
compat</dd>
</dl>
<dl>
<dt>
shadow:</dt>
<dd>
compat<div style="height: 1.00ex;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
hosts:</dt>
<dd>
dns [!UNAVAIL=return] files</dd>
</dl>
<dl>
<dt>
networks:</dt>
<dd>
nis [NOTFOUND=return] files</dd>
</dl>
<dl>
<dt>
ethers:</dt>
<dd>
nis [NOTFOUND=return] files</dd>
</dl>
<dl>
<dt>
protocols:</dt>
<dd>
nis [NOTFOUND=return] files</dd>
</dl>
<dl>
<dt>
rpc:</dt>
<dd>
nis [NOTFOUND=return] files</dd>
</dl>
<dl>
<dt>
services:</dt>
<dd>
nis [NOTFOUND=return] files</dd>
</dl>
<div class="spacer">
</div>
The first column is the database. The rest of the line specifies how the lookup process works. You can specify the way it works for each database individually.<div class="spacer">
</div>
The configuration specification for each database can contain two different items:<dl>
<dt>
* The service specification like `files', `db', or `nis'.</dt>
<dd>
</dd>
</dl>
<dl>
<dt>
* The reaction on lookup result like `[NOTFOUND=return]'.</dt>
<dd>
</dd>
</dl>
<div class="spacer">
</div>
For libc5 with NYS, the allowed service specifications are `files', `nis', and `nisplus'. For hosts, you could specify `dns' as extra service, for passwd and group `compat', but not for shadow.<div class="spacer">
</div>
For glibc, you must have a file called <b>/lib/libnss_SERVICE.so.</b><i>X</i> for every SERVICE you are using. On a standard installation, you could use `files', `db', `nis', and `nisplus'. For hosts, you could specify `dns' as extra service, for passwd, group, and shadow `compat'. These services will not be used by libc5 with NYS. The version number <i>X</i> is 1 for glibc 2.0 and 2 for glibc 2.1.<div class="spacer">
</div>
The second item in the specification gives the user much finer control on the lookup process. Action items are placed between two service names and are written within brackets. The general form is<div class="spacer">
</div>
`[' ( `!'? STATUS `=' ACTION )+ `]'<div class="spacer">
</div>
where<div style="height: 1.00ex;">
&#160;</div>
<dl>
<dt>
STATUS =&gt; success | notfound | unavail | tryagain</dt>
<dd>
</dd>
</dl>
<dl>
<dt>
ACTION =&gt; return | continue</dt>
<dd>
</dd>
</dl>
<div class="spacer">
</div>
The case of the keywords is insignificant. The STATUS values are the results of a call to a lookup function of a specific service. They mean:<dl>
<dt>
<b>success</b></dt>
<dd>
No error occurred and the wanted entry is returned. The default action for this is `return'.</dd>
</dl>
<dl>
<dt>
<b>notfound</b></dt>
<dd>
The lookup process succeeded, but the needed value was not found. The default action is `continue'.</dd>
</dl>
<dl>
<dt>
<b>unavail</b></dt>
<dd>
The service is permanently unavailable. This can either mean the needed file is not available, or, for DNS, the server is not available or does not allow queries. The default action is `continue'.</dd>
</dl>
<dl>
<dt>
<b>tryagain</b></dt>
<dd>
The service is temporarily unavailable. This could mean a file is locked or a server currently cannot accept more connections. The default action is `continue'.</dd>
</dl>
<div class="subsection">
<h2>Interaction with +/- syntax (compat mode)</h2> Linux libc5 without NYS does not have the name service switch but does allow the user some policy control. In <i>/etc/passwd</i> you could have entries of the form +user or +@netgroup (include the specified user from the NIS passwd map), -user or -@netgroup (exclude the specified user), and + (include every user, except the excluded ones, from the NIS passwd map).<div style="height: 1.00em;">
&#160;</div>
You can override certain passwd fields for a particular user from the NIS passwd map by using the extended form of +user:::::: in <i>/etc/passwd</i>. Non-empty fields override information in the NIS passwd map.<div style="height: 1.00em;">
&#160;</div>
Since most people only put a + at the end of <i>/etc/passwd</i> to include everything from NIS, the switch provides a faster alternative for this case (`passwd: files nis') which doesn't require the single + entry in <i>/etc/passwd</i>, <i>/etc/group</i>, and <i>/etc/shadow</i>. If this is not sufficient, the NSS `compat' service provides full +/- semantics. By default, the source is `nis', but this may be overridden by specifying `nisplus' as source for the pseudo-databases <b>passwd_compat</b>, <b>group_compat</b> and <b>shadow_compat</b>. These pseudo-databases are only available in GNU C Library.</div>
</div>
<div class="section">
<h1>FILES</h1> A service named SERVICE is implemented by a shared object library named <b>libnss_SERVICE.so.</b><i>X</i> that resides in <i>/lib</i>.<dl>
<dt>
</dt>
<dd>
<i>/etc/nsswitch.conf</i> configuration file</dd>
</dl>
<dl>
<dt>
<b>/lib/libnss_compat.so.</b><i>X</i></dt>
<dd>
implements `compat' source for glibc2</dd>
</dl>
<dl>
<dt>
<b>/lib/libnss_db.so.</b><i>X</i></dt>
<dd>
implements `db' source for glibc2</dd>
</dl>
<dl>
<dt>
<b>/lib/libnss_dns.so.</b><i>X</i></dt>
<dd>
implements `dns' source for glibc2</dd>
</dl>
<dl>
<dt>
<b>/lib/libnss_files.so.</b><i>X</i></dt>
<dd>
implements `files' source for glibc2</dd>
</dl>
<dl>
<dt>
<b>/lib/libnss_hesiod.so.</b><i>X</i></dt>
<dd>
implements `hesiod' source for glibc2</dd>
</dl>
<dl>
<dt>
<b>/lib/libnss_nis.so.</b><i>X</i></dt>
<dd>
implements `nis' source for glibc2</dd>
</dl>
<dl>
<dt>
<i>/lib/libnss_nisplus.so.2</i></dt>
<dd>
implements `nisplus' source for glibc 2.1</dd>
</dl>
</div>
<div class="section">
<h1>NOTES</h1> Within each process that uses <b>nsswitch.conf</b>, the entire file is read only once; if the file is later changed, the process will continue using the old configuration.<div class="spacer">
</div>
With Solaris, it isn't possible to link programs using the NSS Service statically. With Linux, this is no problem.<div style="height: 1.00em;">
&#160;</div>
On a Debian system other mail transport agents may or may not ignore the <i>aliases</i> file.  For example, unlike <b>sendmail</b> Exim does not ignore it.</div>
<div class="section">
<h1>COLOPHON</h1> This page is part of release 3.35 of the Linux <i>man-pages</i> project. A description of the project, and information about reporting bugs, can be found at http://man7.org/linux/man-pages/.</div>
<table class="foot">
<tr>
<td class="foot-date">
1999-01-17</td>
<td class="foot-os">
Linux</td>
</tr>
</table>
</div>
</body>
</html>

