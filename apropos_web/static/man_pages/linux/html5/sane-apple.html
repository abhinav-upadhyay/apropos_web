<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/linux/style.css" type="text/css" media="all"/>
<title>
sane-apple(5)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
sane-apple(5)</td>
<td class="head-vol">
SANE Scanner Access Now Easy</td>
<td class="head-rtitle">
sane-apple(5)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>NAME</h1> sane-apple - SANE backend for Apple flatbed scanners</div>
<div class="section">
<h1>DESCRIPTION</h1> The <b>sane-apple</b> library implements a SANE (Scanner Access Now Easy) backend that provides access to Apple flatbed scanners. At present, the following scanners are supported from this backend:<div class="spacer">
</div>
<div style="height: 0.00em;">
&#160;</div>
<br/>
--------------- ----- ------------------ ------<br/>
AppleScanner    4bit  16 Shades of Gray<br/>
OneScanner      8bit  256 Shades of Gray<br/>
ColorOneScanner 24bit RGB color          3-pass<br/>
<div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
If you own a Apple scanner other than the ones listed above that works with this backend, please let us know by sending the scanner's model name, SCSI id, and firmware revision to <i>sane-devel@lists.alioth.debian.org</i>. See http://www.sane-project.org/mailing-lists.html for details on how to subscribe to sane-devel.<div style="height: 1.00em;">
&#160;</div>
</div>
<div class="section">
<h1>DEVICE NAMES</h1> This backend expects device names of the form:<div class="spacer">
</div>
<div style="margin-left: 5.00ex;">
<i>special</i></div>
<div class="spacer">
</div>
Where <i>special</i> is either the path-name for the special device that corresponds to a SCSI scanner. For SCSI scanners, the special device name must be a generic SCSI device or a symlink to such a device.  Under Linux, such a device name could be <i>/dev/sga</i> or <i>/dev/sge</i>, for example.  See sane-scsi(5) for details.</div>
<div class="section">
<h1>CONFIGURATION</h1> The <i>apple.conf</i> file is a list of options and device names that correspond to Apple scanners.  Empty lines and lines starting with a hash mark (#) are ignored.  See sane-scsi(5) on details of what constitutes a valid device name.<div class="spacer">
</div>
Options come in two flavors: global and positional ones.  Global options apply to all devices managed by the backend, whereas positional options apply just to the most recently mentioned device.  Note that this means that the order in which the options appear matters!<div style="height: 1.00em;">
&#160;</div>
</div>
<div class="section">
<h1>SCSI ADAPTER TIPS</h1> SCSI scanners are typically delivered with an ISA SCSI adapter. Unfortunately, that adapter is not worth much since it is not interrupt driven.  It is sometimes possible to get the supplied card to work, but without an interrupt line, scanning will put so much load on the system that it becomes almost unusable for other tasks.</div>
<div class="section">
<h1>FILES</h1><dl>
<dt>
<i>/etc/sane.d/apple.conf</i></dt>
<dd>
The backend configuration file (see also description of <b>SANE_CONFIG_DIR</b> below).</dd>
</dl>
<dl>
<dt>
<i>/usr/lib/arch_triplet/sane/libsane-apple.a</i></dt>
<dd>
The static library implementing this backend.</dd>
</dl>
<dl>
<dt>
<i>/usr/lib/arch_triplet/sane/libsane-apple.so</i></dt>
<dd>
The shared library implementing this backend (present on systems that support dynamic loading).</dd>
</dl>
</div>
<div class="section">
<h1>ENVIRONMENT</h1><dl>
<dt>
<b>SANE_CONFIG_DIR</b></dt>
<dd>
This environment variable is list of directories where SANE looks for the configuration file.  Under UNIX directory names are separated by a colon (`:'), under OS/2 by a semi-colon (`;'). If SANE_CONFIG_DIR is not set, SANE defaults to searching the current working directory (&quot;.&quot;) and then /etc/sane.d. If the value of $SANE_CONFIG_DIR ends with the separator character, the default directories are searched after the directory list. For example, setting <b>SANE_CONFIG_DIR</b> to &quot;/tmp/config:&quot; would result in directories &quot;tmp/config&quot;, &quot;.&quot;, and &quot;/etc/sane.d&quot; being searched (in that order).</dd>
</dl>
<dl>
<dt>
<b>SANE_DEBUG_APPLE</b></dt>
<dd>
Controls the debug level.  A value of 255 prints all debug output.  Smaller values reduce verbosity.  Requires a library compiled with debug support.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
</div>
<div class="section">
<h1>CURRENT STATUS</h1> The apple backend is now in version 0.3 (Tue Jul 21 1998). Since I only have the AppleScanner and not the other models (OneScanner, ColorOneScanner) I can only develop/test for the AppleScanner effectively. However with this release I almost completed the gui part of all scanners. Most of the functionality is there. At least OneScanner should scan at the AppleScanner's compatible modes (LineArt, HalfTone, Gray16). My personal belief is that with a slight touch of debugging the OneScanner could be actually usable. The ColorOneScanner needs more work. AppleScanner is of course almost fully supported.<div style="height: 1.00em;">
&#160;</div>
</div>
<div class="section">
<h1>MISSING FUNCTIONALITY</h1> Currently all three models lack upload/download support.<dl>
<dt>
<b>AppleScanner</b></dt>
<dd>
Cannot up/download a halftone pattern.</dd>
</dl>
<dl>
<dt>
<b>OneScanner</b></dt>
<dd>
Cannot up/download halftone patterns or calibration vectors.</dd>
</dl>
<dl>
<dt>
<b>ColorOneScanner</b></dt>
<dd>
Cannot up/download halftone patterns, calibration vectors, custom Color Correction Tables (CCT) and of course custom gamma tables.</dd>
</dl>
<dl>
<dt>
<b>Park/UnPark (OneScanner, ColorOneScanner)</b></dt>
<dd>
</dd>
</dl>
<div class="spacer">
</div>
The above functionalities are missing because I don't have the hardware to experiment on.  Another reason is my lack of understanding as to how or if the SANE API provide means to describe any array type besides gamma.<div style="height: 1.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
</div>
<div class="section">
<h1>UNSUPPORTED FEATURES</h1> The following &quot;features&quot; will never be supported, at least while I maintain the sane-apple backend.<dl>
<dt>
<b>NoHome (AppleScanner)</b></dt>
<dd>
The scanner lamp stays on and the carriage assembly remains where it stops at the end of the scan. After two minutes, if the scanner does not receive another SCAN command, the lamp goes off and the carriage returns to the home position.</dd>
</dl>
<dl>
<dt>
<b>Compression (AppleScanner)</b></dt>
<dd>
The Scanner can compress data with CCITT Group III one dimensional algorithm (fax) and the Skip White Line algorithm.</dd>
</dl>
<dl>
<dt>
<b>Multiple Windows (AppleScanner)</b></dt>
<dd>
AppleScanner may support multiple windows. It would be a cool feature and a challenge for me to code if it could intermix different options for different windows (scan areas). This way it could scan a document in LineArt mode but the figures in it in Gray and at a different resolution. Unfortunately this is impossible.</dd>
</dl>
<dl>
<dt>
<b>Scan Direction (OneScanner)</b></dt>
<dd>
It controls the scan direction. (?)</dd>
</dl>
<dl>
<dt>
<b>Status/Reset Button (OneScanner)</b></dt>
<dd>
This option controls the status of the button on the OneScanner model. You can also reset the button status by software.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
</div>
<div class="section">
<h1>BUGS</h1> SANE backend bugs are divided in two classes. We have <b>GUI</b> bugs and <b>scanner specific</b> bugs.<div class="spacer">
</div>
We know we have a GUI bug when a parameter is not showing up when it should (active) or vice versa. Finding out which parameters are active across various Apple modes and models from the documentation <b>ftp://ftpdev.info.apple.com/devworld/Technical_Documentation/Peripherals_Documentation/</b> is an interesting exercise. I may have missed some dependencies. For example of the threshold parameter the Apple Scanners Programming Guide says nothing. I had to assume it is valid only in LineArt mode.<div class="spacer">
</div>
Scanner specific bugs are mostly due to mandatory round-offs in order to scan. In the documentation in one place states that the width of the scan area should be a byte multiple. In another place it says that the width of the scan area should be an even byte multiple. Go figure...<div class="spacer">
</div>
Other sources of bugs are due to scsi communication, scsi connects and disconnects. However the classical bugs are still there. So you may encounter buffer overruns, null pointers, memory corruption and <b>SANE</b> API violations.<dl>
<dt>
<b>SIGSEGV on SliceBars</b></dt>
<dd>
When you try to modify the scan area from the slice bar you have a nice little cute core dump. I don't know why. If you select the scan area from the preview window or by hand typing the numbers everything is fine. The SIGSEGV happens deep in gtk library (gdk). I really cannot debug it.</dd>
</dl>
<dl>
<dt>
<b>Options too much</b></dt>
<dd>
It is possible, especially for the ColorOneScanner, for the backend's options panel to extend beyond your screen. It happens with mine and I am running my X Server at 1024x768. What can I say? Try smaller fonts in the X server, or virtual screens.</dd>
</dl>
<dl>
<dt>
<b>Weird SCSI behaviour</b></dt>
<dd>
I am quoting David Myers Here...<div style="height: 1.00em;">
&#160;</div>
&gt;&gt; OS: FreeBSD 2.2.6<div style="height: 0.00em;">
&#160;</div>
&gt;&gt; CC: egcs-1.02<div style="height: 0.00em;">
&#160;</div>
Just wanted to follow up on this...  I recently changed my SCSI card from the Adaptec 2940UW to a dual-channel Symbios 786 chipset.  When I started up SANE with your driver, I managed to scan line art drawings okay, but Gray16 scans led to a stream of SCSI error messages on the console, ultimately hanging with a message saying the scanner wasn't releasing the SCSI bus. This may be that the Symbios is simply less tolerant of ancient hardware, or may be bugs in your driver or in SANE itself...<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
</div>
<div class="section">
<h1>DEBUG</h1> If you encounter a GUI bug please set the environmental variable SANE_DEBUG_APPLE to 255 and rerun the exact sequence of keystrokes and menu selections to reproduce it. Then send me a report with the log attached.<div class="spacer">
</div>
If you have an Apple Macintosh with the AppleScanners driver installed, reporting to me which options are grayed out (inactive) in what modes would be very helpful.<div class="spacer">
</div>
If you want to offer some help but you don't have a scanner, or you don't have the model you would like to help with, or you are a SANE developer and you just want to take a look at how the apple backend looks like, goto to apple.h and #define the NEUTRALIZE_BACKEND macro. You can select the scanner model through the APPLE_MODEL_SELECT macro. Available options are APPLESCANNER, ONESCANNER, COLORONESCANNER.<div class="spacer">
</div>
If you encounter a SCSI bus error or trimmed and/or displaced images please set the environment variable SANE_DEBUG_SANEI_SCSI to 255 before sending me the report.<div style="height: 1.00em;">
&#160;</div>
</div>
<div class="section">
<h1>TODO</h1><dl>
<dt>
<b>Non Blocking Support</b></dt>
<dd>
Make sane-apple a non blocking backend. Properly support <b>sane_set_io_mode</b> and <b>sane_get_select_fd</b></dd>
</dl>
<dl>
<dt>
<b>Scan</b></dt>
<dd>
Make scanning possible for all models in all supported modes.</dd>
</dl>
<dl>
<dt>
<b>Missing Functionality</b></dt>
<dd>
<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
</div>
<div class="section">
<h1>SEE ALSO</h1> sane(7), sane-scsi(5)<div style="height: 1.00em;">
&#160;</div>
</div>
<div class="section">
<h1>AUTHOR</h1> The sane-apple backend was written not entirely from scratch by Milon Firikis. It is mostly based on the mustek backend from David Mosberger and Andreas Czechanowski</div>
<table class="foot">
<tr>
<td class="foot-date">
11 Jul 2008</td>
<td class="foot-os">
</td>
</tr>
</table>
</div>
</body>
</html>

