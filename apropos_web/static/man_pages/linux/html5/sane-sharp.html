<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/linux/style.css" type="text/css" media="all"/>
<title>
sane-sharp(5)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
sane-sharp(5)</td>
<td class="head-vol">
SANE Scanner Access Now Easy</td>
<td class="head-rtitle">
sane-sharp(5)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>NAME</h1> sane-sharp - SANE backend for SHARP scanners</div>
<div class="section">
<h1>DESCRIPTION</h1> The <b>sane-sharp</b> library implements a SANE (Scanner Access Now Easy) backend that provides access to Sharp SCSI scanners.  This backend should be considered <b>beta-quality</b> software!  In the current state it is known to work with JX-610 and JX-250 scanners. It is prepared for usage with the JX-330 series scanners, but we are not able to test it with these devices.<div class="spacer">
</div>
For other Sharp scanners, it may or may not work.<div class="spacer">
</div>
At present, the following scanners are known to work with this backend.<div style="margin-left: 5.00ex;">
<div class="spacer">
</div>
<br/>
Vendor  Product id:<br/>
-----   -----------<br/>
Sharp   JX-610<br/>
Sharp   JX-250<br/>
Sharp   JX-320<br/>
Sharp   JX-330<br/>
Sharp   JX-350<br/>
</div>
<div class="spacer">
</div>
The following scanners are detected by the backend, but not tested:<div class="spacer">
</div>
<div style="margin-left: 5.00ex;">
<br/>
Vendor  Product id:<br/>
-----   -----------<br/>
Sharp   JX-325<br/>
</div>
</div>
<div class="section">
<h1>DEVICE NAMES</h1> This backend expects device names of the form:<div class="spacer">
</div>
<div style="margin-left: 5.00ex;">
<i>special</i></div>
<div class="spacer">
</div>
Where <i>special</i> is either the path-name for the special device that corresponds to a SCSI scanner. The special device name must be a generic SCSI device or a symlink to such a device.  Under Linux, such a device name could be <i>/dev/sga</i> or <i>/dev/sge</i>, for example.  See sane-scsi(5) for details.<div style="height: 1.00em;">
&#160;</div>
</div>
<div class="section">
<h1>SCAN OPTIONS</h1> <b>Scan Mode</b> (parameter <b>--mode</b> for scanimage). Possible settings:<div style="margin-left: 5.00ex;">
<b>Lineart</b> (1 bit black &amp; white scans),<div style="height: 0.00em;">
&#160;</div>
<b>Gray</b> (8 bit gray scale scans),<div style="height: 0.00em;">
&#160;</div>
<b>Lineart Color</b> (bi-level color scans),<div style="height: 0.00em;">
&#160;</div>
<b>Color</b> (8 bit RGB scans).</div>
The default value is <b>Color.</b><div style="height: 1.00em;">
&#160;</div>
<b>Halftone Pattern</b> (parameter <b>--halftone-pattern</b> for scanimage). Available only for the JX-330 series scanners. Possible settings:<div style="margin-left: 5.00ex;">
<b>none</b><div style="height: 0.00em;">
&#160;</div>
<b>Dither Bayer</b><div style="height: 0.00em;">
&#160;</div>
<b>Dither Spiral</b><div style="height: 0.00em;">
&#160;</div>
<b>Dither Dispersed</b><div style="height: 0.00em;">
&#160;</div>
<b>Error Diffusion</b></div>
The default value is <b>none.</b><div style="height: 1.00em;">
&#160;</div>
<b>Paper Source</b> (parameter <b>--source</b> for scanimage). This option is only available, if an automatic document feeder or a transparency adapter is installed. Possible settings:<div style="margin-left: 5.00ex;">
<b>Flatbed</b><div style="height: 0.00em;">
&#160;</div>
<b>Automatic Document Feeder</b><div style="height: 0.00em;">
&#160;</div>
<b>Transparency Adapter</b></div>
If an ADF or a transparency adapter is installed, using it is the default selection.<div style="height: 1.00em;">
&#160;</div>
<b>Custom Gamma</b> (parameter <b>--custom-gamma</b> for scanimage). This option determines whether a builtin or a custom gamma-table is used. Possible settings:<div style="margin-left: 5.00ex;">
<b>yes</b> enables custom gamma tables<div style="height: 0.00em;">
&#160;</div>
<b>no</b> enables a built gamma table</div>
<div style="height: 1.00em;">
&#160;</div>
<b>Gamma</b> (parameter <b>--Gamma</b> for scanimage). This option is only available, if <b>Custom Gamma</b> is set to <b>no.</b> Possible values:<div style="margin-left: 5.00ex;">
<b>1.0</b><div style="height: 0.00em;">
&#160;</div>
<b>2.2</b></div>
The default value is 2.2. (The JX-250 and JX-350 have no built in gamma correction; for these scanner, a gamma table is downloaded to the scanner by the backend.)<div style="height: 1.00em;">
&#160;</div>
<b>Gamma Table</b> (parameter <b>--gamma-table</b> for scanimage). Allowed values: 0..255; 256 numbers must be defined. The default values are 0, 1, 2, .. 255 (i.e., gamma == 1). This table is only used for gray scale scans.<div style="height: 1.00em;">
&#160;</div>
<b>Red Gamma Table</b> (parameter <b>--red-gamma-table</b> for scanimage). Allowed values: 0..255; 256 numbers must be defined. The default values are 0, 1, 2, .. 255 (i.e., gamma == 1).<div style="height: 1.00em;">
&#160;</div>
<b>Green Gamma Table</b> (paramter <b>--green-gamma-table</b> for scanimage). Allowed values: 0..255; 256 numbers must be defined. The default values are 0, 1, 2, .. 255 (i.e., gamma == 1).<div style="height: 1.00em;">
&#160;</div>
<b>Blue Gamma Table</b> (paramter <b>--blue-gamma-table</b> for scanimage). Allowed values: 0..255; 256 numbers must be defined. The default values are 0, 1, 2, .. 255 (i.e., gamma == 1).<div style="height: 1.00em;">
&#160;</div>
<b>Resolution</b> in pixel per inch (parameter <b>--resolution</b> for scanimage). Selects the resolution of the scanned image. Allowed values:<div style="margin-left: 5.00ex;">
<b>30..600</b> (JX-330, JX-350 and JX-610) resp. <b>30..400</b> (JX-250)</div>
The default value is 150.<div style="height: 1.00em;">
&#160;</div>
<b>Scan Window</b><div style="height: 1.00em;">
&#160;</div>
The possible settings depend on the scanner model and, for the JX-250 and the JX-350, also on the usage of the automatic document feeder resp. the transparency adapter. Please refer to the values allowed by xscanimage, or xsane. With scanimage, enter one of the following commands:<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 5.00ex;">
<i>scanimage -d sharp --source &quot;Automatic Document Feeder&quot; --help</i><div style="height: 1.00em;">
&#160;</div>
<i>scanimage -d sharp --source Flatbed --help</i><div style="height: 1.00em;">
&#160;</div>
<i>scanimage -d sharp --source &quot;Transparency Adapter&quot; --help</i></div>
<div style="height: 1.00em;">
&#160;</div>
in order to see the allowed parameter values for the scan window.<div style="height: 1.00em;">
&#160;</div>
The scan window parameters are:<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 5.00ex;">
Top-left x position of scan area (parameter <b>-l</b> for scanimage);<div style="height: 0.00em;">
&#160;</div>
Top-left y position of scan area (parameter <b>-t</b> for scanimage);<div style="height: 0.00em;">
&#160;</div>
bottom right x position of scan area (parameter <b>-x</b> for scanimage);<div style="height: 0.00em;">
&#160;</div>
bottom right y position of scan area (parameter <b>-y</b> for scanimage);</div>
<div style="height: 1.00em;">
&#160;</div>
<b>Edge emphasis</b> (parameter <b>--Edge emphasis</b> for scanimage). This option is not available for the JX-250 and the JX-350. Possible settings:<div style="margin-left: 5.00ex;">
<b>None</b><div style="height: 0.00em;">
&#160;</div>
<b>Middle</b><div style="height: 0.00em;">
&#160;</div>
<b>Strong</b><div style="height: 0.00em;">
&#160;</div>
<b>Blur</b></div>
The default value is <b>None.</b><div style="height: 1.00em;">
&#160;</div>
<b>Threshold</b> (parameter <b>--threshold</b> for scanimage). Sets the threshold for black and white pixels in lineart mode. Possible values:<div style="margin-left: 5.00ex;">
<b>1..255</b></div>
The default value is <b>128.</b> This option is only available in scan mode lineart.<div style="height: 1.00em;">
&#160;</div>
<b>Threshold Red</b> (parameter <b>--threshold-red</b> for scanimage). Sets the threshold for the red component of a pixel in in lineart color scan mode. Possible values:<div style="margin-left: 5.00ex;">
<b>1..255</b></div>
The default value is <b>128.</b> This option is only available in scan mode color lineart.<div style="height: 1.00em;">
&#160;</div>
<b>Threshold Green</b> (parameter <b>--threshold-green</b> for scanimage). Sets the threshold for the green component of a pixel in in lineart color scan mode. Possible values:<div style="margin-left: 5.00ex;">
<b>1..255</b></div>
The default value is <b>128.</b> This option is only available in scan mode color lineart.<div style="height: 1.00em;">
&#160;</div>
<b>Threshold Blue</b> (parameter <b>--threshold-blue</b> for scanimage). Sets the threshold for the blue component of a pixel in in lineart color scan mode. Possible values:<div style="margin-left: 5.00ex;">
<b>1..255</b></div>
The default value is <b>128.</b> This option is only available in scan mode color lineart.<div style="height: 1.00em;">
&#160;</div>
<b>Light Color</b> (parameter <b>--LightColor</b> for scanimage). Sets the color of the light source. Possible values:<div style="margin-left: 5.00ex;">
<b>white</b><div style="height: 0.00em;">
&#160;</div>
<b>red</b><div style="height: 0.00em;">
&#160;</div>
<b>green</b><div style="height: 0.00em;">
&#160;</div>
<b>blue</b></div>
The default value is <b>white.</b> This option is only available in scan modes lineart color and color.<div style="height: 1.00em;">
&#160;</div>
</div>
<div class="section">
<h1>ADF USAGE</h1> If a paper jam occurred, the maintenance cover <i>must</i> be opened and closed, even if the jammed paper can be removed without opening the maintenance cover. Otherwise, the error condition cannot be cleared.<div style="height: 1.00em;">
&#160;</div>
</div>
<div class="section">
<h1>CONFIGURATION</h1> The contents of the <i>sharp.conf</i> file is a list of options and device names that correspond to Sharp scanners. Empty lines and lines beginning with a hash mark (#) are ignored. See sane-scsi(5) for details about device names.<div class="spacer">
</div>
Lines setting an option start with the key word <b>option,</b> followed by the option's name and the option's value. At present, three options are defined: <b>buffers, buffersize,</b> and <b>readqueue.</b><div class="spacer">
</div>
Options defined at the start of <i>sharp.conf</i> apply to all devices; options defined after a device name apply to this device.<div class="spacer">
</div>
The options <b>buffers</b> and <b>readqueue</b> are only significant if the backend has been compiled so that for each scan a second process is forked (switch <b>USE_FORK</b> in <i>sharp.c</i> ). This process reads the scan data from the scanner and writes this data into a block of shared memory. The parent process reads the data from this memory block and delivers it to the frontend. The options control the size and usage of this shared memory block.<div class="spacer">
</div>
<b>option buffers</b> defines the number of buffers used. The smallest number allowed is 2.<div class="spacer">
</div>
<b>option buffersize</b> defines the size of one buffer. Since each buffer is filled with a single read command sent to the scanner, its size is limited automatically to the size allowed by the operating system or by the Sane SCSI library for SCSI read commands. A buffer size of 128 kB or 256 kB is recommended for scan resolutions of 300 dpi and above.<div class="spacer">
</div>
<b>option readqueue</b> defines how many read commands to be sent to the scanner are queued. At present, the Sane SCSI library supports queued read commands only for for Linux. For other operating systems, <b>option readqueue</b> should be set to 0. For Linux, <b>option readqueue</b> should be set to 2. Larger values than 2 for <b>option readqueue</b> are not reasonable in most cases. <b>option buffers</b> should be greater than <b>option readqueue.</b><div style="height: 1.00em;">
&#160;</div>
</div>
<div class="section">
<h1>Performance Considerations</h1> This section focuses on the problem of stops of the scanner's carriage during a scan. Carriage stops happen mainly with the JX-250. This scanner has obviously only a small internal buffer compared to its speed. That means that the backend must read the data as fast as possible from the scanner in order to avoid carriage stops.<div class="spacer">
</div>
Even the JX-250 needs only less than 10 seconds for a 400 dpi A4 gray scale scan, which results in a data transfer rate of more than 1.6 MB per second. This means that the data produced by the scanner must be processed fairly fast. Due to the small internal buffer of the JX-250, the backend must issue a read request for the next data block as soon as possible after reading a block of data in order to avoid carriage stops.<div class="spacer">
</div>
Stops of the carriage can be caused by the following reasons:<div class="spacer">
</div>
<div style="margin-left: 5.00ex;">
- too much &quot;traffic&quot; on the SCSI bus<div style="height: 0.00em;">
&#160;</div>
- slow responses by the backend to the scanner,<div style="height: 0.00em;">
&#160;</div>
- a program which processes the data acquired by the backend too slow.</div>
<div class="spacer">
</div>
Too much &quot;traffic&quot; on the SCSI bus: This happens for example, if hard disks are connected to the same SCSI bus as the scanner, and when data transfer from/to these hard disks requires a considerable part of the SCSI bandwidth during a scan. If this is the case, you should consider to connect the scanner to a separate SCSI adapter.<div class="spacer">
</div>
Slow responses by the backend to the scanner: Unfortunately, Unix-like operating systems generally have no real time capabilities. Thus there is no guarantee that the backend is under any circumstances able to communicate with the scanner as fast as required. To minimize this problem, the backend should be compiled so that a separate reader process is forked: Make sure that <b>USE_FORK</b> is defined when you compile <i>sharp.c.</i> If slow responses of the backend remain to be problem, you could try to reduce the load of the system. Even while the backend and the reader process need only a minor amount of processor time, other running processes can cause an increase in the time delay between two time slices given to the reader process. On slower systems, such an increased delay can be enough to cause a carriage stop with the JX-250. For Linux, the usage of the SG driver version 2.1.36 or above is recommended, because it supports, in combination with the SCSI library of Sane version 1.0.2, command queueing within the kernel. This queueing implementation, combined with a buffer size of at least 128 kB, should avoid most carriage stops.<div class="spacer">
</div>
Slow processing of the scan data: An example for this situation is the access to the scanner via a 10 MBit Ethernet, which is definitely too slow to transfer the scan data as fast as they are produced by the scanner. If you have enough memory available, you can increase <b>option buffers,</b> so that an entire image can be stored in these buffers.<div class="spacer">
</div>
In order to see, if the backend is too slow or if the further processing of the data is too slow, set the environment variable <b>SANE_DEBUG_SHARP</b> to 1. When a scan is finished, the backend writes the line &quot;buffer full conditions: <i>nn&quot;</i> to stderr. If <i>nn</i> is zero, carriage stops are caused by too slow responses of the backend or too much &quot;traffic&quot; on the SCSI bus. If <i>nn</i> is greater than zero, the backend had to wait <i>nn</i> times until a buffer has been processed by the frontend. (Please note that <b>option buffers</b> must be greater than <b>option readqueue</b> in order to get useful output for &quot;buffer full conditions&quot;.)<div style="height: 1.00em;">
&#160;</div>
</div>
<div class="section">
<h1>FILES</h1><dl>
<dt>
<i>/etc/sane.d/sharp.conf</i></dt>
<dd>
The backend configuration file.</dd>
</dl>
<dl>
<dt>
<i>/usr/lib/arch_triplet/sane/libsane-sharp.a</i></dt>
<dd>
The static library implementing this backend.</dd>
</dl>
<dl>
<dt>
<i>/usr/lib/arch_triplet/sane/libsane-sharp.so</i></dt>
<dd>
The shared library implementing this backend (present on systems that support dynamic loading).</dd>
</dl>
</div>
<div class="section">
<h1>ENVIRONMENT</h1><dl>
<dt>
<b>SANE_DEBUG_SHARP</b></dt>
<dd>
If the library was compiled with debug support enabled, this environment variable controls the debug level for this backend.  E.g., a value of 128 requests all debug output to be printed.  Smaller levels reduce verbosity.</dd>
</dl>
</div>
<div class="section">
<h1>KNOWN PROBLEMS</h1> 1. ADF Mode<div style="margin-left: 5.00ex;">
After several ADF scans, the scanner moves the carriage back to the idle position and back to ADF scan position, before a scan starts. We do not know, if this is a problem of the scanner, or if this is a bug of the backend. At present, the scanner must power off and on to stop this annoying behaviour.</div>
<div style="height: 1.00em;">
&#160;</div>
2. Threshold level does not work (only JX-610)<div class="spacer">
</div>
3. The maximum resolution is limited to 600 dpi(JX-610 supported to 1200 dpi) resp. 400 dpi (JX-250)<div class="spacer">
</div>
4. If the JX250 is used with an ADF, the following situation can occur: After several scans, the scanner moves, after loading a new sheet of paper, the carriage to the idle position, and then back to the position used for ADF scans. This happens for <i>every</i> scan, in contrast to the calibration, which is done after 10 scans. (For the calibration, the carriage is also moved to the idle position.) We do not know, if this behavior is caused by the backend, or if it is a bug in the firmware of the scanner.<div class="spacer">
</div>
5. Usage of a transparency adapter (film scan unit) is supported, but not tested.<div style="height: 1.00em;">
&#160;</div>
</div>
<div class="section">
<h1>SEE ALSO</h1> sane(7), sane-scsi(5)</div>
<div class="section">
<h1>AUTHORS</h1> Kazuya Fukuda, Abel Deuring</div>
<div class="section">
<h1>CREDITS</h1> The Sharp backend is based on the Canon backend written by Helmut Koeberle<div class="spacer">
</div>
Parts of this man page are a plain copy of sane-mustek(5) by David Mosberger-Tang, Andreas Czechanowski and Andreas Bolsch</div>
<table class="foot">
<tr>
<td class="foot-date">
11 Jul 2008</td>
<td class="foot-os">
</td>
</tr>
</table>
</div>
</body>
</html>

