<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/linux/style.css" type="text/css" media="all"/>
<title>
sane-usb(5)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
sane-usb(5)</td>
<td class="head-vol">
SANE Scanner Access Now Easy</td>
<td class="head-rtitle">
sane-usb(5)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>NAME</h1> sane-usb - USB configuration tips for SANE</div>
<div class="section">
<h1>DESCRIPTION</h1> This manual page contains information on how to access scanners with a USB interface. It focusses on two main topics: getting the scanner detected by the operating system kernel and using it with SANE.<div class="spacer">
</div>
This page applies to USB most backends and scanners, as they use the generic sanei_usb interface. However, there is one exceptions: USB Scanners supported by the microtek2 backend need a special USB kernel driver, see <b>sane-microtek2</b>(5) for details.<div style="height: 1.00em;">
&#160;</div>
</div>
<div class="section">
<h1>QUICK START</h1> This is a short HOWTO-like section. For the full details, read the following sections. The goal of this section is to get the scanner detected by <b>sane-find-scanner</b>(1).<div class="spacer">
</div>
Run sane-find-scanner. If it lists your scanner with the correct vendor and product ids, you are done. See section <b>SANE ISSUES</b> for details on how to go on.<div class="spacer">
</div>
sane-find-scanner doesn't list your scanner? Does it work as root? If yes, there is a permission issue. See the <b>LIBUSB</b> section for details.<div class="spacer">
</div>
Nothing is found even as root? Check that your kernel supports USB and that libusb is installed (see section <b>LIBUSB</b>).<div style="height: 1.00em;">
&#160;</div>
</div>
<div class="section">
<h1>USB ACCESS METHODS</h1> For accessing USB devices, the USB library libusb is used. There used to exist another method to access USB devices: the kernel scanner driver. The kernel scanner driver method is deprecated and shouldn't be used anymore. It may be removed from SANE at any time. In Linux, the kernel scanner driver has been removed in the 2.6.* kernel series. Only libusb access is documented in this manual page.<div style="height: 1.00em;">
&#160;</div>
</div>
<div class="section">
<h1>LIBUSB</h1> SANE can only use libusb 0.1.6 or newer. It needs to be installed at build-time. Modern Linux distributions and other operating systems come with libusb.<div class="spacer">
</div>
Libusb can only access your scanner if it's not claimed by the kernel scanner driver. If you want to use libusb, unload the kernel driver (e.g. rmmod scanner under Linux) or disable the driver when compiling a new kernel. For Linux, your kernel needs support for the USB filesystem (usbfs). For kernels older than 2.4.19, replace &quot;usbfs&quot; with &quot;usbdevfs&quot; because the name has changed. This filesystem must be mounted. That's done automatically at boot time, if /etc/fstab contains a line like this:<div class="spacer">
</div>
<div style="margin-left: 5.00ex;">
none /proc/bus/usb usbfs defaults  0  0</div>
<div class="spacer">
</div>
The permissions for the device files used by libusb must be adjusted for user access. Otherwise only root can use SANE devices. For <i>Linux</i>, the devices are located in /proc/bus/usb/ or in /dev/bus/usb, if you use udev. There are directories named e.g. &quot;001&quot; (the bus name) containing files &quot;001&quot;, &quot;002&quot; etc. (the device files). The right device files can be found out by running scanimage -L as root. Setting permissions with &quot;chmod&quot; is not permanent, however. They will be reset after reboot or replugging the scanner.<div class="spacer">
</div>
Usually udev or for older distributions the hotplug utilities are used, which support dynamic setting of access permissions. SANE comes with udev and hotplug scripts in the directory tools/udev and tools/hotplug. They can be used for setting permissions, see /usr/share/doc/libsane/README.linux, tools/README and the README in the tools/hotplug directory for more details.<div class="spacer">
</div>
For the <b>BSDs</b>, the device files used by libusb are named <i>/dev/ugen*</i>. Use chmod to apply appropriate permissions.<div style="height: 1.00em;">
&#160;</div>
</div>
<div class="section">
<h1>SANE ISSUES</h1> This section assumes that your scanner is detected by sane-find-scanner. It doesn't make sense to go on, if this is not the case. While sane-find-scanner is able to detect any USB scanner, actual scanning will only work if the scanner is supported by a SANE backend. Information on the level of support can be found on the SANE webpage (<i>http://www.sane-project.org/</i>), and the individual backend manpages.<div class="spacer">
</div>
Most backends can detect USB scanners automatically using &quot;usb&quot; configuration file lines. This method allows to identify scanners by the USB vendor and product numbers.  The syntax for specifying a scanner this way is:<div class="spacer">
</div>
<div style="margin-left: 5.00ex;">
usb <i>VENDOR PRODUCT</i></div>
<div class="spacer">
</div>
where <i>VENDOR</i> is the USB vendor id, and <i>PRODUCT</i> is the USB product id of the scanner. Both ids are non-negative integer numbers in decimal or hexadecimal format. The correct values for these fields can be found by running sane-find-scanner, looking into the syslog (e.g., /var/log/messages) or under Linux by issuing the command &quot;cat /proc/bus/usb/devices&quot;.  This is an example of a config file line:<div class="spacer">
</div>
<div style="margin-left: 5.00ex;">
usb 0x055f 0x0006</div>
<div class="spacer">
</div>
would have the effect that all USB devices in the system with a vendor id of 0x55f and a product id of 0x0006 would be probed and recognized by the backend.<div class="spacer">
</div>
If your scanner is not detected automatically, it may be necessary to edit the appropriate backend configuration file before using SANE for the first time. For a detailed description of each backend's configuration file, please refer to the relevant backend manual page (e.g. <b>sane-mustek_usb</b>(5) for Mustek USB scanners).<div class="spacer">
</div>
Do <b>not</b> create a symlink from <i>/dev/scanner</i> to the USB device because this link is used by the SCSI backends. The scanner may be confused if it receives SCSI commands.<div style="height: 1.00em;">
&#160;</div>
</div>
<div class="section">
<h1>ENVIRONMENT</h1><dl>
<dt>
<b>SANE_DEBUG_SANEI_USB</b></dt>
<dd>
If the library was compiled with debug support enabled, this environment variable controls the debug level for the USB I/O subsystem.  E.g., a value of 128 requests all debug output to be printed.  Smaller levels reduce verbosity. Values greater than 4 enable libusb debugging (if available). Example: export SANE_DEBUG_SANEI_USB=4.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
</div>
<div class="section">
<h1>SEE ALSO</h1> <b>sane</b>(7), <b>sane-find-scanner</b>(1), <b>sane-&quot;backendname&quot;</b>(5), <b>sane-scsi</b>(5)<div style="height: 1.00em;">
&#160;</div>
</div>
<div class="section">
<h1>AUTHOR</h1> Henning Meier-Geinitz &lt;henning@meier-geinitz.de&gt;</div>
<table class="foot">
<tr>
<td class="foot-date">
14 Jul 2008</td>
<td class="foot-os">
</td>
</tr>
</table>
</div>
</body>
</html>

