<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/linux/style.css" type="text/css" media="all"/>
<title>
UMASK(1P)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
UMASK(1P)</td>
<td class="head-vol">
POSIX Programmer's Manual</td>
<td class="head-rtitle">
UMASK(1P)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>PROLOG</h1> This manual page is part of the POSIX Programmer's Manual. The Linux implementation of this interface may differ (consult the corresponding Linux manual page for details of Linux behavior), or the interface may not be implemented on Linux.</div>
<div class="section">
<h1>NAME</h1> umask - get or set the file mode creation mask</div>
<div class="section">
<h1>SYNOPSIS</h1>  <b>umask</b> <b>[</b><b>-S</b><b>][</b><i>mask</i><b>]</b></div>
<div class="section">
<h1>DESCRIPTION</h1> The  <i>umask</i> utility shall set the file mode creation mask of the current shell execution environment (see  <i>Shell Execution Environment</i> ) to the value specified by the  <i>mask</i> operand. This mask shall affect the initial value of the file permission bits of subsequently created files. If  <i>umask</i> is called in a subshell or separate utility execution environment, such as one of the following:<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 5.00ex;">
<div class="spacer">
</div>
<br/>
<b>(umask 002)</b><br/>
<b>nohup umask ...</b><br/>
<b>find . -exec umask ... \;</b><br/>
<b></b><br/>
</div>
<div class="spacer">
</div>
it shall not affect the file mode creation mask of the caller's environment.<div class="spacer">
</div>
If the <i>mask</i> operand is not specified, the <i>umask</i> utility shall write to standard output the value of the invoking process' file mode creation mask.</div>
<div class="section">
<h1>OPTIONS</h1> The  <i>umask</i> utility shall conform to the Base Definitions volume of IEEE&#160;Std&#160;1003.1-2001, Section 12.2, Utility Syntax Guidelines.<div class="spacer">
</div>
The following option shall be supported:<dl>
<dt>
<b>-S</b></dt>
<dd>
Produce symbolic output.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<div class="spacer">
</div>
The default output style is unspecified, but shall be recognized on a subsequent invocation of  <i>umask</i> on the same system as a  <i>mask</i> operand to restore the previous file mode creation mask.</div>
<div class="section">
<h1>OPERANDS</h1> The following operand shall be supported:<dl>
<dt>
<i>mask</i></dt>
<dd>
A string specifying the new file mode creation mask. The string is treated in the same way as the  <i>mode</i> operand described in the EXTENDED DESCRIPTION section for  <i>chmod</i>.</dd>
</dl>
<div class="spacer">
</div>
For a <i>symbolic_mode</i> value, the new value of the file mode creation mask shall be the logical complement of the file permission bits portion of the file mode specified by the  <i>symbolic_mode</i> string.<div class="spacer">
</div>
In a <i>symbolic_mode</i> value, the permissions <i>op</i> characters  <b>'+'</b> and <b>'-'</b> shall be interpreted relative to the current file mode creation mask;  <b>'+'</b> shall cause the bits for the indicated permissions to be cleared in the mask;  <b>'-'</b> shall cause the bits for the indicated permissions to be set in the mask.<div class="spacer">
</div>
The interpretation of <i>mode</i> values that specify file mode bits other than the file permission bits is unspecified.<div class="spacer">
</div>
In the octal integer form of <i>mode</i>, the specified bits are set in the file mode creation mask.<div class="spacer">
</div>
The file mode creation mask shall be set to the resulting numeric value.<div class="spacer">
</div>
The default output of a prior invocation of <i>umask</i> on the same system with no operand also shall be recognized as a  <i>mask</i> operand.<div style="height: 1.00em;">
&#160;</div>
</div>
<div class="section">
<h1>STDIN</h1> Not used.</div>
<div class="section">
<h1>INPUT FILES</h1> None.</div>
<div class="section">
<h1>ENVIRONMENT VARIABLES</h1> The following environment variables shall affect the execution of  <i>umask</i>:<dl>
<dt>
<i>LANG</i></dt>
<dd>
Provide a default value for the internationalization variables that are unset or null. (See the Base Definitions volume of IEEE&#160;Std&#160;1003.1-2001, Section 8.2, Internationalization Variables for the precedence of internationalization variables used to determine the values of locale categories.)</dd>
</dl>
<dl>
<dt>
<i>LC_ALL</i></dt>
<dd>
If set to a non-empty string value, override the values of all the other internationalization variables.</dd>
</dl>
<dl>
<dt>
<i>LC_CTYPE</i></dt>
<dd>
Determine the locale for the interpretation of sequences of bytes of text data as characters (for example, single-byte as opposed to multi-byte characters in arguments).</dd>
</dl>
<dl>
<dt>
<i>LC_MESSAGES</i></dt>
<dd>
Determine the locale that should be used to affect the format and contents of diagnostic messages written to standard error.</dd>
</dl>
<dl>
<dt>
<i>NLSPATH</i></dt>
<dd>
Determine the location of message catalogs for the processing of <i>LC_MESSAGES</i>  <i>.</i><div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
</div>
<div class="section">
<h1>ASYNCHRONOUS EVENTS</h1> Default.</div>
<div class="section">
<h1>STDOUT</h1> When the  <i>mask</i> operand is not specified, the <i>umask</i> utility shall write a message to standard output that can later be used as a  <i>umask</i> <i>mask</i> operand.<div class="spacer">
</div>
If <b>-S</b> is specified, the message shall be in the following format:<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 5.00ex;">
<div class="spacer">
</div>
<br/>
<b>&quot;u=%s,g=%s,o=%s\n&quot;, &lt;</b><i>owner permissions</i><b>&gt;, &lt;</b><i>group permissions</i><b>&gt;,</b><br/>
<b>    &lt;</b><i>other permissions</i><b>&gt;</b><br/>
<b></b><br/>
</div>
<div class="spacer">
</div>
where the three values shall be combinations of letters from the set {  <i>r</i>, <i>w</i>, <i>x</i>}; the presence of a letter shall indicate that the corresponding bit is clear in the file mode creation mask.<div class="spacer">
</div>
If a <i>mask</i> operand is specified, there shall be no output written to standard output.</div>
<div class="section">
<h1>STDERR</h1> The standard error shall be used only for diagnostic messages.</div>
<div class="section">
<h1>OUTPUT FILES</h1> None.</div>
<div class="section">
<h1>EXTENDED DESCRIPTION</h1> None.</div>
<div class="section">
<h1>EXIT STATUS</h1> The following exit values shall be returned:<dl>
<dt>
&#160;0</dt>
<dd>
The file mode creation mask was successfully changed, or no <i>mask</i> operand was supplied.</dd>
</dl>
<dl>
<dt>
&gt;0</dt>
<dd>
An error occurred.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
</div>
<div class="section">
<h1>CONSEQUENCES OF ERRORS</h1> Default.<div class="spacer">
</div>
<i>The following sections are informative.</i></div>
<div class="section">
<h1>APPLICATION USAGE</h1> Since  <i>umask</i> affects the current shell execution environment, it is generally provided as a shell regular built-in.<div class="spacer">
</div>
In contrast to the negative permission logic provided by the file mode creation mask and the octal number form of the  <i>mask</i> argument, the symbolic form of the <i>mask</i> argument specifies those permissions that are left alone.</div>
<div class="section">
<h1>EXAMPLES</h1> Either of the commands:<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 5.00ex;">
<div class="spacer">
</div>
<br/>
<b>umask a=rx,ug+w</b><div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
<br/>
umask 002<br/>
<b></b><br/>
</div>
<div class="spacer">
</div>
sets the mode mask so that subsequently created files have their S_IWOTH bit cleared.<div class="spacer">
</div>
After setting the mode mask with either of the above commands, the  <i>umask</i> command can be used to write out the current value of the mode mask:<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 5.00ex;">
<div class="spacer">
</div>
<br/>
<b>$</b> <b>umask</b><br/>
<b></b><b>0002</b><br/>
</div>
<div class="spacer">
</div>
(The output format is unspecified, but historical implementations use the octal integer mode format.)<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 5.00ex;">
<div class="spacer">
</div>
<br/>
<b>$</b> <b>umask -S</b><br/>
<b></b><b>u=rwx,g=rwx,o=rx</b><br/>
</div>
<div class="spacer">
</div>
Either of these outputs can be used as the mask operand to a subsequent invocation of the  <i>umask</i> utility.<div class="spacer">
</div>
Assuming the mode mask is set as above, the command:<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 5.00ex;">
<div class="spacer">
</div>
<br/>
<b>umask g-w</b><br/>
<b></b><br/>
</div>
<div class="spacer">
</div>
sets the mode mask so that subsequently created files have their S_IWGRP and S_IWOTH bits cleared.<div class="spacer">
</div>
The command:<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 5.00ex;">
<div class="spacer">
</div>
<br/>
<b>umask -- -w</b><br/>
<b></b><br/>
</div>
<div class="spacer">
</div>
sets the mode mask so that subsequently created files have all their write bits cleared. Note that  <i>mask</i> operands  <b>-r</b>, <b>-w</b>, <b>-x</b> or anything beginning with a hyphen, must be preceded by  <b>&quot;--&quot;</b> to keep it from being interpreted as an option.</div>
<div class="section">
<h1>RATIONALE</h1> Since  <i>umask</i> affects the current shell execution environment, it is generally provided as a shell regular built-in. If it is called in a subshell or separate utility execution environment, such as one of the following:<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 5.00ex;">
<div class="spacer">
</div>
<br/>
<b>(umask 002)</b><br/>
<b>nohup umask ...</b><br/>
<b>find . -exec umask ... \;</b><br/>
<b></b><br/>
</div>
<div class="spacer">
</div>
it does not affect the file mode creation mask of the environment of the caller.<div class="spacer">
</div>
The description of the historical utility was modified to allow it to use the symbolic modes of  <i>chmod</i>. The <b>-s</b> option used in early proposals was changed to  <b>-S</b> because <b>-s</b> could be confused with a  <i>symbolic_mode</i> form of mask referring to the S_ISUID and S_ISGID bits.<div class="spacer">
</div>
The default output style is implementation-defined to permit implementors to provide migration to the new symbolic style at the time most appropriate to their users. A  <b>-o</b> flag to force octal mode output was omitted because the octal mode may not be sufficient to specify all of the information that may be present in the file mode creation mask when more secure file access permission checks are implemented.<div class="spacer">
</div>
It has been suggested that trusted systems developers might appreciate ameliorating the requirement that the mode mask &quot;affects&quot; the file access permissions, since it seems access control lists might replace the mode mask to some degree. The wording has been changed to say that it affects the file permission bits, and it leaves the details of the behavior of how they affect the file access permissions to the description in the System Interfaces volume of IEEE&#160;Std&#160;1003.1-2001.</div>
<div class="section">
<h1>FUTURE DIRECTIONS</h1> None.</div>
<div class="section">
<h1>SEE ALSO</h1>  <i>Shell Command Language</i>, <i>chmod</i>, the System Interfaces volume of IEEE&#160;Std&#160;1003.1-2001,  <i>umask</i>()</div>
<div class="section">
<h1>COPYRIGHT</h1> Portions of this text are reprinted and reproduced in electronic form from IEEE Std 1003.1, 2003 Edition, Standard for Information Technology -- Portable Operating System Interface (POSIX), The Open Group Base Specifications Issue 6, Copyright (C) 2001-2003 by the Institute of Electrical and Electronics Engineers, Inc and The Open Group. In the event of any discrepancy between this version and the original IEEE and The Open Group Standard, the original IEEE and The Open Group Standard is the referee document. The original Standard can be obtained online at http://www.opengroup.org/unix/online.html .</div>
<table class="foot">
<tr>
<td class="foot-date">
2003</td>
<td class="foot-os">
IEEE/The Open Group</td>
</tr>
</table>
</div>
</body>
</html>

