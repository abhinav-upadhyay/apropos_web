<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/linux/style.css" type="text/css" media="all"/>
<title>
XCURSOR(3)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
XCURSOR(3)</td>
<td class="head-vol">
Keith Packard</td>
<td class="head-rtitle">
XCURSOR(3)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>NAME</h1> XCURSOR - Cursor management library<div style="height: 1.00em;">
&#160;</div>
</div>
<div class="section">
<h1>SYNOPSIS</h1> <b>#include &lt;X11/Xcursor/Xcursor.h&gt;</b><br/>
</div>
<div class="section">
<h1>DESCRIPTION</h1> <b>Xcursor</b> is a simple library designed to help locate and load cursors.  Cursors can be loaded from files or memory.  A library of common cursors exists which map to the standard X cursor names.  Cursors can exist in several sizes and the library automatically picks the best size.<div style="height: 1.00em;">
&#160;</div>
</div>
<div class="section">
<h1>FUNCTIONAL OVERVIEW</h1> Xcursor is built in a couple of layers; at the bottom layer is code which can load cursor images from files.  Above that is a layer which locates cursor files based on the library path and theme.  At the top is a layer which builds cursors either out of an image loaded from a file or one of the standard X cursors.  When using images loaded from files, Xcursor prefers to use the Render extension CreateCursor request if supported by the X server.  Where not supported, Xcursor maps the cursor image to a standard X cursor and uses the core CreateCursor request.<div style="height: 1.00em;">
&#160;</div>
<div class="subsection">
<h2>CURSOR FILES</h2> Xcursor defines a new format for cursors on disk.  Each file holds one or more cursor images.  Each cursor image is tagged with a nominal size so that the best size can be selected automatically.  Multiple cursors of the same nominal size can be loaded together; applications are expected to use them as an animated sequence.<div class="spacer">
</div>
Cursor files are stored as a header containing a table of contents followed by a sequence of chunks.  The table of contents indicates the type, subtype and position in the file of each chunk.  The file header looks like:<div class="spacer">
</div>
<br/>
<i>magic</i>: CARD32 'Xcur' (0x58, 0x63, 0x75, 0x72)<div style="height: 0.00em;">
&#160;</div>
<i>header</i>: CARD32 bytes in this header<div style="height: 0.00em;">
&#160;</div>
<i>version</i>: CARD32 file version number<div style="height: 0.00em;">
&#160;</div>
<i>ntoc</i>: CARD32 number of toc entries<div style="height: 0.00em;">
&#160;</div>
<i>toc</i>: LISTofTOC table of contents<br/>
<div class="spacer">
</div>
Each table of contents entry looks like:<div class="spacer">
</div>
<br/>
<i>type</i>: CARD32 entry type<div style="height: 0.00em;">
&#160;</div>
<i>subtype</i>: CARD32 type-specific label - size for images<div style="height: 0.00em;">
&#160;</div>
<i>position</i>: CARD32 absolute byte position of table in file<br/>
<div class="spacer">
</div>
Each chunk in the file has set of common header fields followed by additional type-specific fields:<div class="spacer">
</div>
<br/>
<i>header</i>: CARD32 bytes in chunk header (including type-specific fields)<div style="height: 0.00em;">
&#160;</div>
<i>type</i>: CARD32 must match type in TOC for this chunk<div style="height: 0.00em;">
&#160;</div>
<i>subtype</i>: CARD32 must match subtype in TOC for this chunk<div style="height: 0.00em;">
&#160;</div>
<i>version</i>: CARD32 version number for this chunk type<br/>
<div class="spacer">
</div>
There are currently two chunk types defined for cursor files; comments and images.  Comments look like:<div class="spacer">
</div>
<br/>
<i>header</i>: 20 Comment headers are 20 bytes<div style="height: 0.00em;">
&#160;</div>
<i>type</i>: 0xfffe0001 Comment type is 0xfffe0001<div style="height: 0.00em;">
&#160;</div>
<i>subtype</i>: { 1 (COPYRIGHT), 2 (LICENSE), 3 (OTHER) }<div style="height: 0.00em;">
&#160;</div>
<i>version</i>: 1<div style="height: 0.00em;">
&#160;</div>
<i>length</i>: CARD32 byte length of UTF-8 string<div style="height: 0.00em;">
&#160;</div>
<i>string</i>: LISTofCARD8 UTF-8 string<br/>
<div class="spacer">
</div>
Images look like:<div class="spacer">
</div>
<br/>
<i>header</i>: 36 Image headers are 36 bytes<div style="height: 0.00em;">
&#160;</div>
<i>type</i>: 0xfffd0002 Image type is 0xfffd0002<div style="height: 0.00em;">
&#160;</div>
<i>subtype</i>: CARD32 Image subtype is the nominal size<div style="height: 0.00em;">
&#160;</div>
<i>version</i>: 1<div style="height: 0.00em;">
&#160;</div>
<i>width</i>: CARD32 Must be less than or equal to 0x7fff<div style="height: 0.00em;">
&#160;</div>
<i>height</i>: CARD32 Must be less than or equal to 0x7fff<div style="height: 0.00em;">
&#160;</div>
<i>xhot</i>: CARD32 Must be less than or equal to width<div style="height: 0.00em;">
&#160;</div>
<i>yhot</i>: CARD32 Must be less than or equal to height<div style="height: 0.00em;">
&#160;</div>
<i>delay</i>: CARD32 Delay between animation frames in milliseconds<div style="height: 0.00em;">
&#160;</div>
<i>pixels</i>: LISTofCARD32 Packed ARGB format pixels<br/>
<div style="height: 1.00em;">
&#160;</div>
</div>
<div class="subsection">
<h2>THEMES</h2> Xcursor (mostly) follows the freedesktop.org spec for theming icons.  The default search path it uses is ~/.icons, /usr/share/icons, /usr/share/pixmaps.  Within each of these directories, it searches for a directory using the theme name.  Within the theme directory, it looks for cursor files in the 'cursors' subdirectory. It uses the first cursor file found along  the path.<div class="spacer">
</div>
If necessary, Xcursor also looks for a &quot;index.theme&quot; file in each theme directory to find inherited themes and searches along the path for those themes as well.<div class="spacer">
</div>
If no theme is set, or if no cursor is found for the specified theme, Xcursor checks the &quot;default&quot; theme.<div style="height: 1.00em;">
&#160;</div>
</div>
</div>
<div class="section">
<h1>DATATYPES</h1><dl>
<dt>
<b>XcursorImage</b></dt>
<dd>
holds a single cursor image in memory.  Each pixel in the cursor is a 32-bit value containing ARGB with A in the high byte.<div style="height: 1.00em;">
&#160;</div>
<br/>
    typedef struct _XcursorImage {<br/>
        XcursorDim	size;	    /&#8727; nominal size for matching */<br/>
        XcursorDim	width;	    /&#8727; actual width */<br/>
        XcursorDim	height;	    /&#8727; actual height */<br/>
        XcursorDim	xhot;	    /&#8727; hot spot x (must be inside image) */<br/>
        XcursorDim	yhot;       /&#8727; hot spot y (must be inside image) */<br/>
        XcursorPixel    *pixels;    /&#8727; pointer to pixels */<br/>
    } XcursorImage;<br/>
<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
<b>XcursorImages</b></dt>
<dd>
holds multiple XcursorImage structures.  They're all freed when the XcursorImages is freed.<div style="height: 1.00em;">
&#160;</div>
<br/>
    typedef struct _XcursorImages {<br/>
        int             nimage;	    /&#8727; number of images */<br/>
        XcursorImage    **images;   /&#8727; array of XcursorImage pointers */<br/>
    } XcursorImages;<br/>
<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
<b>XcursorCursors</b></dt>
<dd>
Holds multiple Cursor objects.  They're all freed when the XcursorCursors is freed.  These are reference counted so that multiple XcursorAnimate structures can use the same XcursorCursors.<div style="height: 1.00em;">
&#160;</div>
<br/>
    typedef struct _XcursorCursors {<br/>
        Display     *dpy;	/&#8727; Display holding cursors */<br/>
        int	    ref;	/&#8727; reference count */<br/>
        int	    ncursor;	/&#8727; number of cursors */<br/>
        Cursor	    *cursors;	/&#8727; array of cursors */<br/>
    } XcursorCursors;<br/>
<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
<b>XcursorAnimate</b></dt>
<dd>
References a set of cursors and a sequence within that set.  Multiple XcursorAnimate structures may reference the same XcursorCursors; each holds a reference which is removed when the XcursorAnimate is freed.<div style="height: 1.00em;">
&#160;</div>
<br/>
    typedef struct _XcursorAnimate {<br/>
        XcursorCursors   *cursors;  /&#8727; list of cursors to use */<br/>
        int		 sequence;  /&#8727; which cursor is next */<br/>
    } XcursorAnimate;<br/>
<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
<b>XcursorFile</b></dt>
<dd>
Xcursor provides an abstract API for accessing the file data.  Xcursor provides a stdio implementation of this abstract API; applications are free to create additional implementations.  These functions parallel the stdio functions in return value and expected argument values; the read and write functions flip the arguments around to match the POSIX versions.<div style="height: 1.00em;">
&#160;</div>
<br/>
    typedef struct _XcursorFile {<br/>
        void	*closure;<br/>
        int	(*read)  (XcursorFile *file, unsigned char *buf, int len);<br/>
        int	(*write) (XcursorFile *file, unsigned char *buf, int len);<br/>
        int	(*seek)  (XcursorFile *file, long offset, int whence);<br/>
    };<br/>
<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
</div>
<div class="section">
<h1>FUNCTIONS</h1><div class="subsection">
<h2>Object Management</h2><dl>
<dt>
XcursorImage *XcursorImageCreate (int width, int height)</dt>
<dd>
<div style="height: 0.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
void XcursorImageDestroy (XcursorImage *image)</dt>
<dd>
Allocate and free images.  On allocation, the hotspot and the pixels are left uninitialized.  The size is set to the maximum of width and height.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
XcursorImages *XcursorImagesCreate (int size)</dt>
<dd>
<div style="height: 0.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
void XcursorImagesDestroy (XcursorImages *images)</dt>
<dd>
Allocate and free arrays to hold multiple cursor images.  On allocation, nimage is set to zero.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
XcursorCursors *XcursorCursorsCreate (Display *dpy, int size)</dt>
<dd>
<div style="height: 0.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
void XcursorCursorsDestroy (XcursorCursors *cursors)</dt>
<dd>
Allocate and free arrays to hold multiple cursors.  On allocation, ncursor is set to zero, ref is set to one.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
</div>
<div class="subsection">
<h2>Reading and writing images.</h2><dl>
<dt>
XcursorImage *XcursorXcFileLoadImage (XcursorFile *file, int size)</dt>
<dd>
<div style="height: 0.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
XcursorImages *XcursorXcFileLoadImages (XcursorFile *file, int size)</dt>
<dd>
<div style="height: 0.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
XcursorImages *XcursorXcFileLoadAllImages (XcursorFile *file)</dt>
<dd>
<div style="height: 0.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
XcursorBool XcursorXcFileLoad (XcursorFile *file, XcursorComments **commentsp, XcursorImages **imagesp)</dt>
<dd>
<div style="height: 0.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
XcursorBool XcursorXcFileSave (XcursorFile *file, const XcursorComments *comments, const XcursorImages *images)</dt>
<dd>
These read and write cursors from an XcursorFile handle.  After reading, the file pointer will be left at some random place in the file. 		</dd>
</dl>
<dl>
<dt>
XcursorImage *XcursorFileLoadImage (FILE *file, int size)</dt>
<dd>
<div style="height: 0.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
XcursorImages *XcursorFileLoadImages (FILE *file, int size)</dt>
<dd>
<div style="height: 0.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
XcursorImages *XcursorFileLoadAllImages (FILE *file)</dt>
<dd>
<div style="height: 0.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
XcursorBool XcursorFileLoad (FILE *file, XcursorComments **commentsp, XcursorImages **imagesp)</dt>
<dd>
<div style="height: 0.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
XcursorBool XcursorFileSaveImages (FILE *file, const XcursorImages *images)</dt>
<dd>
<div style="height: 0.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
XcursorBool XcursorFileSave (FILE * file, const XcursorComments *comments, const XcursorImages *images)</dt>
<dd>
These read and write cursors from a stdio FILE handle.  Writing flushes before returning so that any errors should be detected.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
XcursorImage *XcursorFilenameLoadImage (const char *filename, int size)</dt>
<dd>
<div style="height: 0.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
XcursorImages *XcursorFilenameLoadImages (const char *filename, int size)</dt>
<dd>
<div style="height: 0.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
XcursorImages *XcursorFilenameLoadAllImages (FILE *file)</dt>
<dd>
<div style="height: 0.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
XcursorBool XcursorFilenameLoad (const char *file, XcursorComments **commentsp, XcursorImages **imagesp)</dt>
<dd>
<div style="height: 0.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
XcursorBool XcursorFilenameSaveImages (const char *filename, const XcursorImages *images)</dt>
<dd>
<div style="height: 0.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
XcursorBool XcursorFilenameSave (const char *file, const XcursorComments *comments, const XcursorImages *images)</dt>
<dd>
These parallel the stdio FILE interfaces above, but take filenames.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
</div>
<div class="subsection">
<h2>Reading library images</h2><dl>
<dt>
XcursorImage *XcursorLibraryLoadImage (const char *name, const char *theme, int size)</dt>
<dd>
<div style="height: 0.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
XcursorImages *XcursorLibraryLoadImages (const char *name, const char *theme, int size)</dt>
<dd>
These search the library path, loading the first file found.  If 'theme' is not NULL, these functions first try appending -theme to name and then name alone.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
</div>
<div class="subsection">
<h2>Cursor APIs</h2><dl>
<dt>
Cursor XcursorFilenameLoadCursor (Display *dpy, const char *file)</dt>
<dd>
<div style="height: 0.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
XcursorCursors *XcursorFilenameLoadCursors (Display *dpy, const char *file)</dt>
<dd>
These load cursors from the specified file.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
Cursor XcursorLibraryLoadCursor (Display *dpy, const char *name)</dt>
<dd>
<div style="height: 0.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
XcursorCursors *XcursorLibraryLoadCursors (Display *dpy, const char *name)</dt>
<dd>
These load cursors using the specified library name.  The theme comes from the display.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
</div>
<div class="subsection">
<h2>X Cursor Name APIs</h2><dl>
<dt>
XcursorImage *XcursorShapeLoadImage (unsigned int shape, const char *theme, int size)</dt>
<dd>
<div style="height: 0.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
XcursorImages *XcursorShapeLoadImages (unsigned int shape, const char *theme, int size)</dt>
<dd>
These map 'shape' to a library name using the standard X cursor names and then load the images.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
Cursor XcursorShapeLoadCursor (Display *dpy, unsigned int shape)</dt>
<dd>
<div style="height: 0.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
XcursorCursors *XcursorShapeLoadCursors (Display *dpy, unsigned int shape)</dt>
<dd>
These map 'shape' to a library name and then load the cursors.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
</div>
<div class="subsection">
<h2>Display Information APIs</h2><dl>
<dt>
XcursorBool XcursorSupportsARGB (Display *dpy)</dt>
<dd>
Returns whether the display supports ARGB cursors or whether cursors will be mapped to a core X cursor.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
XcursorBool XcursorSetDefaultSize (Display *dpy, int size)</dt>
<dd>
Sets the default size for cursors on the specified display. When loading cursors, those whose nominal size is closest to this size will be preferred.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
int XcursorGetDefaultSize (Display *dpy)</dt>
<dd>
Gets the default cursor size.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
XcursorBool XcursorSetTheme (Display *dpy, const char *theme)</dt>
<dd>
Sets the current theme name.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
char *XcursorGetTheme (Display *dpy)</dt>
<dd>
Gets the current theme name.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
</div>
</div>
<div class="section">
<h1>ENVIRONMENT VARIABLES</h1><dl>
<dt>
<b>XCURSOR_PATH</b></dt>
<dd>
This variable sets the list of paths to look for cursors in. Directories in this path are separated by colons (:).<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
</div>
<div class="section">
<h1>RESTRICTIONS</h1> <b>Xcursor</b> will probably change radically in the future; weak attempts will be made to retain some level of source-file compatibility.<div style="height: 1.00em;">
&#160;</div>
</div>
<div class="section">
<h1>AUTHOR</h1> Keith Packard</div>
<table class="foot">
<tr>
<td class="foot-date">
libXcursor 1.1.12</td>
<td class="foot-os">
X Version 11</td>
</tr>
</table>
</div>
</body>
</html>

