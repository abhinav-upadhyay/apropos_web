<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/linux/style.css" type="text/css" media="all"/>
<title>
ARCHIVE_ENTRY(3)</title>
</head>
<body>
<div class="mandoc">
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">archive_entry_stat</b>, <b class="name">archive_entry_copy_stat</b>, <b class="name">archive_entry_filetype</b>, <b class="name">archive_entry_set_filetype</b>, <b class="name">archive_entry_mode</b>, <b class="name">archive_entry_set_mode</b>, <b class="name">archive_entry_size</b>, <b class="name">archive_entry_size_is_set</b>, <b class="name">archive_entry_set_size</b>, <b class="name">archive_entry_unset_size</b>, <b class="name">archive_entry_dev</b>, <b class="name">archive_entry_set_dev</b>, <b class="name">archive_entry_dev_is_set</b>, <b class="name">archive_entry_devmajor</b>, <b class="name">archive_entry_set_devmajor</b>, <b class="name">archive_entry_devminor</b>, <b class="name">archive_entry_set_devminor</b>, <b class="name">archive_entry_ino</b>, <b class="name">archive_entry_set_ino</b>, <b class="name">archive_entry_ino_is_set</b>, <b class="name">archive_entry_ino64</b>, <b class="name">archive_entry_set_ino64</b>, <b class="name">archive_entry_nlink</b>, <b class="name">archive_entry_rdev</b>, <b class="name">archive_entry_set_rdev</b>, <b class="name">archive_entry_rdevmajor</b>, <b class="name">archive_entry_set_rdevmajor</b>, <b class="name">archive_entry_rdevminor</b>, <b class="name">archive_entry_set_rdevminor</b>, &#8212; <span class="desc">accessor functions for manipulating archive entry descriptions</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="includes">#include &lt;<a class="link-includes">archive_entry.h</a>&gt;</b><div class="spacer">
</div>
<i class="ftype">const struct stat *</i><br/>
<b class="fname">archive_entry_stat</b>(<i class="farg" style="white-space:nowrap;">struct archive_entry *a</i>);<div class="spacer">
</div>
<i class="ftype">void</i><br/>
<b class="fname">archive_entry_copy_stat</b>(<i class="farg" style="white-space:nowrap;">struct archive_entry *a</i>, <i class="farg" style="white-space:nowrap;">const struct stat *sb</i>);<div class="spacer">
</div>
<i class="ftype">mode_t</i><br/>
<b class="fname">archive_entry_filetype</b>(<i class="farg" style="white-space:nowrap;">struct archive_entry *a</i>);<div class="spacer">
</div>
<i class="ftype">void</i><br/>
<b class="fname">archive_entry_set_filetype</b>(<i class="farg" style="white-space:nowrap;">struct archive_entry *a</i>, <i class="farg" style="white-space:nowrap;">unsigned int type</i>);<div class="spacer">
</div>
<i class="ftype">mode_t</i><br/>
<b class="fname">archive_entry_mode</b>(<i class="farg" style="white-space:nowrap;">struct archive_entry *a</i>);<div class="spacer">
</div>
<i class="ftype">void</i><br/>
<b class="fname">archive_entry_set_mode</b>(<i class="farg" style="white-space:nowrap;">struct archive_entry *a</i>, <i class="farg" style="white-space:nowrap;">mode_t mode</i>);<div class="spacer">
</div>
<i class="ftype">int64_t</i><br/>
<b class="fname">archive_entry_size</b>(<i class="farg" style="white-space:nowrap;">struct archive_entry *a</i>);<div class="spacer">
</div>
<i class="ftype">int</i><br/>
<b class="fname">archive_entry_size_is_set</b>(<i class="farg" style="white-space:nowrap;">struct archive_entry *a</i>);<div class="spacer">
</div>
<i class="ftype">void</i><br/>
<b class="fname">archive_entry_set_size</b>(<i class="farg" style="white-space:nowrap;">struct archive_entry *a</i>, <i class="farg" style="white-space:nowrap;">int64_t size</i>);<div class="spacer">
</div>
<i class="ftype">void</i><br/>
<b class="fname">archive_entry_unset_size</b>(<i class="farg" style="white-space:nowrap;">struct archive_entry *a</i>);<div class="spacer">
</div>
<i class="ftype">dev_t</i><br/>
<b class="fname">archive_entry_dev</b>(<i class="farg" style="white-space:nowrap;">struct archive_entry *a</i>);<div class="spacer">
</div>
<i class="ftype">void</i><br/>
<b class="fname">archive_entry_set_dev</b>(<i class="farg" style="white-space:nowrap;">struct archive_entry *a</i>, <i class="farg" style="white-space:nowrap;">dev_t dev</i>);<div class="spacer">
</div>
<i class="ftype">int</i><br/>
<b class="fname">archive_entry_dev_is_set</b>(<i class="farg" style="white-space:nowrap;">struct archive_entry *a</i>);<div class="spacer">
</div>
<i class="ftype">dev_t</i><br/>
<b class="fname">archive_entry_devmajor</b>(<i class="farg" style="white-space:nowrap;">struct archive_entry *a</i>);<div class="spacer">
</div>
<i class="ftype">void</i><br/>
<b class="fname">archive_entry_set_devmajor</b>(<i class="farg" style="white-space:nowrap;">struct archive_entry *a</i>, <i class="farg" style="white-space:nowrap;">dev_t major</i>);<div class="spacer">
</div>
<i class="ftype">dev_t</i><br/>
<b class="fname">archive_entry_devminor</b>(<i class="farg" style="white-space:nowrap;">struct archive_entry *a</i>);<div class="spacer">
</div>
<i class="ftype">void</i><br/>
<b class="fname">archive_entry_set_devminor</b>(<i class="farg" style="white-space:nowrap;">struct archive_entry *a</i>, <i class="farg" style="white-space:nowrap;">dev_t minor</i>);<div class="spacer">
</div>
<i class="ftype">ino_t</i><br/>
<b class="fname">archive_entry_ino</b>(<i class="farg" style="white-space:nowrap;">struct archive_entry *a</i>);<div class="spacer">
</div>
<i class="ftype">void</i><br/>
<b class="fname">archive_entry_set_ino</b>(<i class="farg" style="white-space:nowrap;">struct archive_entry *a</i>, <i class="farg" style="white-space:nowrap;">unsigned long ino</i>);<div class="spacer">
</div>
<i class="ftype">int</i><br/>
<b class="fname">archive_entry_ino_is_set</b>(<i class="farg" style="white-space:nowrap;">struct archive_entry *a</i>);<div class="spacer">
</div>
<i class="ftype">int64_t</i><br/>
<b class="fname">archive_entry_ino64</b>(<i class="farg" style="white-space:nowrap;">struct archive_entry *a</i>);<div class="spacer">
</div>
<i class="ftype">void</i><br/>
<b class="fname">archive_entry_set_ino64</b>(<i class="farg" style="white-space:nowrap;">struct archive_entry *a</i>, <i class="farg" style="white-space:nowrap;">int64_t ino</i>);<div class="spacer">
</div>
<i class="ftype">unsigned int</i><br/>
<b class="fname">archive_entry_nlink</b>(<i class="farg" style="white-space:nowrap;">struct archive_entry *a</i>);<div class="spacer">
</div>
<i class="ftype">void</i><br/>
<b class="fname">archive_entry_set_nlink</b>(<i class="farg" style="white-space:nowrap;">struct archive_entry *a</i>, <i class="farg" style="white-space:nowrap;">unsigned int count</i>);<div class="spacer">
</div>
<i class="ftype">dev_t</i><br/>
<b class="fname">archive_entry_rdev</b>(<i class="farg" style="white-space:nowrap;">struct archive_entry *a</i>);<div class="spacer">
</div>
<i class="ftype">dev_t</i><br/>
<b class="fname">archive_entry_rdevmajor</b>(<i class="farg" style="white-space:nowrap;">struct archive_entry *a</i>);<div class="spacer">
</div>
<i class="ftype">dev_t</i><br/>
<b class="fname">archive_entry_rdevminor</b>(<i class="farg" style="white-space:nowrap;">struct archive_entry *a</i>);<div class="spacer">
</div>
<i class="ftype">void</i><br/>
<b class="fname">archive_entry_set_rdev</b>(<i class="farg" style="white-space:nowrap;">struct archive_entry *a</i>, <i class="farg" style="white-space:nowrap;">dev_t dev</i>);<div class="spacer">
</div>
<i class="ftype">void</i><br/>
<b class="fname">archive_entry_set_rdevmajor</b>(<i class="farg" style="white-space:nowrap;">struct archive_entry *a</i>, <i class="farg" style="white-space:nowrap;">dev_t major</i>);<div class="spacer">
</div>
<i class="ftype">void</i><br/>
<b class="fname">archive_entry_set_rdevminor</b>(<i class="farg" style="white-space:nowrap;">struct archive_entry *a</i>, <i class="farg" style="white-space:nowrap;">dev_t minor</i>);</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1><div class="subsection">
<h2>Copying to and from <span class="type">struct stat</span></h2> The function <b class="fname">archive_entry_stat</b>() converts the various fields stored in the archive entry to the format used by <a class="link-man" href="/man/linux/2/stat">stat(2)</a>. The return value remains valid until either <b class="fname">archive_entry_clear</b>() or <b class="fname">archive_entry_free</b>() is called. It is not affected by calls to the set accessor functions. It currently sets the following values in <span class="type">struct stat</span>: <span class="type">st_atime</span>, <span class="type">st_ctime</span>, <span class="type">st_dev</span>, <span class="type">st_gid</span>, <span class="type">st_ino</span>, <span class="type">st_mode</span>, <span class="type">st_mtime</span>, <span class="type">st_nlink</span>, <span class="type">st_rdev</span>, <span class="type">st_size</span>, <span class="type">st_uid</span>. In addition, <span class="type">st_birthtime</span> and high-precision information for time-related fields will be included on platforms that support it.<div class="spacer">
</div>
The function <b class="fname">archive_entry_copy_stat</b>() copies fields from the platform's <span class="type">struct stat</span>. Fields not provided by <span class="type">struct stat</span> are unchanged.</div>
<div class="subsection">
<h2 id="x47656e6572616c206163636573736f722066756e6374696f6e73">General accessor functions</h2> The functions <b class="fname">archive_entry_filetype</b>() and <b class="fname">archive_entry_set_filetype</b>() get respectively set the filetype. The file type is one of the following constants:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 6.00ex;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
AE_IFREG</dt>
<dd class="list-tag" style="margin-left: 9.00ex;">
Regular file</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
AE_IFLNK</dt>
<dd class="list-tag" style="margin-left: 9.00ex;">
Symbolic link</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
AE_IFSOCK</dt>
<dd class="list-tag" style="margin-left: 9.00ex;">
Socket</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
AE_IFCHR</dt>
<dd class="list-tag" style="margin-left: 9.00ex;">
Character device</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
AE_IFBLK</dt>
<dd class="list-tag" style="margin-left: 9.00ex;">
Block device</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
AE_IFDIR</dt>
<dd class="list-tag" style="margin-left: 9.00ex;">
Directory</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
AE_IFIFO</dt>
<dd class="list-tag" style="margin-left: 9.00ex;">
Named pipe (fifo)</dd>
</dl>
Not all file types are supported by all platforms. The constants used by <a class="link-man" href="/man/linux/2/stat">stat(2)</a> may have different numeric values from the corresponding constants above.<div class="spacer">
</div>
The functions <b class="fname">archive_entry_mode</b>() and <b class="fname">archive_entry_set_mode</b>() get/set a combination of file type and permissions and provide the equivalent of <b class="var">st_mode</b>. Use of <b class="fname">archive_entry_filetype</b>() and <b class="fname">archive_entry_perm</b>() for getting and <b class="fname">archive_entry_set_filetype</b>() and <b class="fname">archive_entry_set_perm</b>() for setting is recommended.<div class="spacer">
</div>
The function <b class="fname">archive_entry_size</b>() returns the file size, if it has been set, and 0 otherwise. <b class="fname">archive_entry_size</b>() can be used to query that status. <b class="fname">archive_entry_set_size</b>() and <b class="fname">archive_entry_unset_size</b>() set and unset the size, respectively.<div class="spacer">
</div>
The number of references (hardlinks) can be obtained by calling <b class="fname">archive_entry_nlinks</b>() and set with <b class="fname">archive_entry_set_nlinks</b>().</div>
<div class="subsection">
<h2 id="x4964656e74696679696e6720756e697175652066696c6573">Identifying unique files</h2> The functions <b class="fname">archive_entry_dev</b>() and <b class="fname">archive_entry_ino64</b>() are used by <a class="link-man" href="/man/linux/3/archive_entry_linkify">archive_entry_linkify(3)</a> to find hardlinks. The pair of device and inode is suppossed to identify hardlinked files.<div class="spacer">
</div>
The device major and minor number can be obtained independently using <b class="fname">archive_entry_devmajor</b>() and <b class="fname">archive_entry_devminor</b>(). The device can be set either via <b class="fname">archive_entry_set_dev</b>() or by the combination of major and minor number using <b class="fname">archive_entry_set_devmajor</b>() and <b class="fname">archive_entry_set_devminor</b>().<div class="spacer">
</div>
The inode number can be obtained using <b class="fname">archive_entry_ino</b>(). This is a legacy interface that uses the platform <span class="type">ino_t</span>, which may be very small. To set the inode number, <b class="fname">archive_entry_set_ino64</b>() is the preferred interface.</div>
<div class="subsection">
<h2 id="x4163636573736f722066756e6374696f6e7320666f7220626c6f636b20616e64206368617261637465722064657669636573">Accessor functions for block and character devices</h2> Block and character devices are characterised either using a device number or a pair of major and minor number. The combined device number can be obtained with <b class="fname">archive_device_rdev</b>() and set with <b class="fname">archive_device_set_rdev</b>(). The major and minor numbers are accessed by <b class="fname">archive_device_rdevmajor</b>(), <b class="fname">archive_device_rdevminor</b>() <b class="fname">archive_device_set_rdevmajor</b>() and <b class="fname">archive_device_set_rdevminor</b>().<div class="spacer">
</div>
The process of splitting the combined device number into major and minor number and the reverse process of combing them differs between platforms. Some archive formats use the combined form, while other formats use the split form.</div>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="/man/linux/3/archive">archive(3)</a>, <a class="link-man" href="/man/linux/3/archive_entry_acl">archive_entry_acl(3)</a>, <a class="link-man" href="/man/linux/3/archive_entry_perms">archive_entry_perms(3)</a>, <a class="link-man" href="/man/linux/3/archive_entry_time">archive_entry_time(3)</a>, <a class="link-man" href="/man/linux/2/stat">stat(2)</a></div>
</div>
</body>
</html>

