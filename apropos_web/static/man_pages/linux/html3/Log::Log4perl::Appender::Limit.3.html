<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/linux/style.css" type="text/css" media="all"/>
<title>
Appender::Limit(3pm)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
Appender::Limit(3pm)</td>
<td class="head-vol">
User Contributed Perl Documentation</td>
<td class="head-rtitle">
Appender::Limit(3pm)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>NAME</h1><br/>
    Log::Log4perl::Appender::Limit - Limit message delivery via block period<br/>
</div>
<div class="section">
<h1>SYNOPSIS</h1><br/>
    use Log::Log4perl qw(:easy);<br/>
<br/>
    my $conf = qq(<br/>
      log4perl.category = WARN, Limiter<br/>
    <br/>
          # Email appender<br/>
      log4perl.appender.Mailer          = Log::Dispatch::Email::MailSend<br/>
      log4perl.appender.Mailer.to       = drone\@pageme.com<br/>
      log4perl.appender.Mailer.subject  = Something's broken!<br/>
      log4perl.appender.Mailer.buffered = 0<br/>
      log4perl.appender.Mailer.layout   = PatternLayout<br/>
      log4perl.appender.Mailer.layout.ConversionPattern=%d %m %n<br/>
<br/>
          # Limiting appender, using the email appender above<br/>
      log4perl.appender.Limiter              = Log::Log4perl::Appender::Limit<br/>
      log4perl.appender.Limiter.appender     = Mailer<br/>
      log4perl.appender.Limiter.block_period = 3600<br/>
    );<br/>
<br/>
    Log::Log4perl-&gt;init(\$conf);<br/>
    WARN(&quot;This message will be sent immediately&quot;);<br/>
    WARN(&quot;This message will be delayed by one hour.&quot;);<br/>
    sleep(3601);<br/>
    WARN(&quot;This message plus the last one will be sent now&quot;);<br/>
</div>
<div class="section">
<h1>DESCRIPTION</h1><dl>
<dt>
&quot;appender&quot;</dt>
<dd>
Specifies the name of the appender used by the limiter. The appender specified must be defined somewhere in the configuration file, not necessarily before the definition of &quot;Log::Log4perl::Appender::Limit&quot;.</dd>
</dl>
<dl>
<dt>
&quot;block_period&quot;</dt>
<dd>
Period in seconds between delivery of messages. If messages arrive in between, they will be either saved (if &quot;accumulate&quot; is set to a true value) or discarded (if &quot;accumulate&quot; isn't set).</dd>
</dl>
<dl>
<dt>
&quot;persistent&quot;</dt>
<dd>
File name in which &quot;Log::Log4perl::Appender::Limit&quot; persistently stores delivery times. If omitted, the appender will have no recollection of what happened when the program restarts.</dd>
</dl>
<dl>
<dt>
&quot;max_until_flushed&quot;</dt>
<dd>
Maximum number of accumulated messages. If exceeded, the appender flushes all messages, regardless if the interval set in &quot;block_period&quot; has passed or not. Don't mix with &quot;max_until_discarded&quot;.</dd>
</dl>
<dl>
<dt>
&quot;max_until_discarded&quot;</dt>
<dd>
Maximum number of accumulated messages. If exceeded, the appender will simply discard additional messages, waiting for &quot;block_period&quot; to expire to flush all accumulated messages. Don't mix with &quot;max_until_flushed&quot;.</dd>
</dl>
<div class="spacer">
</div>
If the appender attached to &quot;Limit&quot; uses &quot;PatternLayout&quot; with a timestamp specifier, you will notice that the message timestamps are reflecting the original log event, not the time of the message rendering in the attached appender. Major trickery has been applied to accomplish this (Cough!).</div>
<div class="section">
<h1>DEVELOPMENT NOTES</h1> &quot;Log::Log4perl::Appender::Limit&quot; is a  <i>composite</i> appender. Unlike other appenders, it doesn't log any messages, it just passes them on to its attached sub-appender. For this reason, it doesn't need a layout (contrary to regular appenders). If it defines none, messages are passed on unaltered.<div class="spacer">
</div>
Custom filters are also applied to the composite appender only. They are  <i>not</i> applied to the sub-appender. Same applies to appender thresholds. This behaviour might change in the future.</div>
<div class="section">
<h1>COPYRIGHT AND LICENSE</h1> Copyright 2002-2009 by Mike Schilli &lt;m@perlmeister.com&gt; and Kevin Goess &lt;cpan@goess.org&gt;.<div class="spacer">
</div>
This library is free software; you can redistribute it and/or modify it under the same terms as Perl itself.</div>
<table class="foot">
<tr>
<td class="foot-date">
2010-06-17</td>
<td class="foot-os">
perl v5.10.1</td>
</tr>
</table>
</div>
</body>
</html>

