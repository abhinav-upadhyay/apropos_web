<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/linux/style.css" type="text/css" media="all"/>
<title>
Config::Model::SearchElement(3pm)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
Config::Model::SearchElement(3pm)</td>
<td class="head-vol">
User Contributed Perl Documentation</td>
<td class="head-rtitle">
Config::Model::SearchElement(3pm)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>NAME</h1> Config::Model::SearchElement - Search an element in a configuration model</div>
<div class="section">
<h1>VERSION</h1> version 2.005</div>
<div class="section">
<h1>SYNOPSIS</h1><br/>
 use Config::Model;<br/>
 use Log::Log4perl qw(:easy);<br/>
 Log::Log4perl-&gt;easy_init($WARN);<br/>
<br/>
 # define configuration tree object<br/>
 my $model = Config::Model-&gt;new;<br/>
  $model-&gt;create_config_class(<br/>
    name    =&gt; &quot;Foo&quot;,<br/>
    element =&gt; [<br/>
        [qw/foo bar/] =&gt; {<br/>
            type       =&gt; 'leaf',<br/>
            value_type =&gt; 'string'<br/>
        },<br/>
    ]<br/>
 ); <br/>
 $model -&gt;create_config_class (<br/>
    name =&gt; &quot;MyClass&quot;,<br/>
<br/>
    element =&gt; [ <br/>
<br/>
        [qw/foo bar/] =&gt; {<br/>
            type       =&gt; 'leaf',<br/>
            value_type =&gt; 'string'<br/>
        },<br/>
        hash_of_nodes =&gt; {<br/>
            type       =&gt; 'hash',     # hash id<br/>
            index_type =&gt; 'string',<br/>
            cargo      =&gt; {<br/>
                type              =&gt; 'node',<br/>
                config_class_name =&gt; 'Foo'<br/>
            },<br/>
        },<br/>
    ],<br/>
 ) ;<br/>
<br/>
 my $inst = $model-&gt;instance(root_class_name =&gt; 'MyClass' );<br/>
<br/>
 my $root = $inst-&gt;config_root ;<br/>
<br/>
 # put data<br/>
 my $step = 'foo=FOO hash_of_nodes:fr foo=bonjour -<br/>
   hash_of_nodes:en foo=hello ';<br/>
 $root-&gt;load( step =&gt; $step );<br/>
<br/>
 # create searcher for manual search<br/>
 my $searcher = $root-&gt;searcher();<br/>
<br/>
 # looking for foo element in the tree<br/>
 $searcher -&gt; prepare (element =&gt; 'foo') ;<br/>
 my @next = $searcher-&gt;next_step() ; <br/>
<br/>
 print &quot;next possible steps: @next\n&quot;;<br/>
 # next possible steps: foo hash_of_nodes<br/>
<br/>
 # Looking for foo below hash_of_nodes<br/>
 $searcher-&gt;choose('hash_of_nodes') ;<br/>
 @next = $searcher-&gt;next_step() ; <br/>
<br/>
 print &quot;next possible steps: @next\n&quot;;<br/>
 # next possible steps: en fr<br/>
<br/>
 # Looking for foo below fr<br/>
 $searcher-&gt;choose('fr') ;<br/>
 @next = $searcher-&gt;next_step() ; <br/>
<br/>
 print &quot;next possible steps: @next\n&quot;;<br/>
 # next possible steps: foo<br/>
<br/>
 # last step<br/>
 $searcher-&gt;choose('foo') ;<br/>
 my $target = $searcher-&gt;current_object;<br/>
<br/>
 print &quot;Found '&quot;,$target-&gt;location,&quot;'\n&quot;;<br/>
 # Found 'hash_of_nodes:fr foo'<br/>
<br/>
 # automatic search setup<br/>
 my $element_call_back = sub { return 'hash_of_nodes' ;} ;<br/>
 my $id_call_back      = sub { return 'en' ;} ;<br/>
<br/>
 $searcher-&gt;reset ;<br/>
 $target = $searcher-&gt;auto_choose($element_call_back, $id_call_back) ;<br/>
  print &quot;Automatic search found '&quot;,$target-&gt;location,&quot;'\n&quot;;<br/>
 # Automatic search found 'hash_of_nodes:en foo'<br/>
</div>
<div class="section">
<h1>DESCRIPTION</h1> This modules provides a way to search for a configuration element in a configuration tree by exploring the configuration model.<div class="spacer">
</div>
For instance, suppose that you have a xorg.conf model and you know that you need to tune the &quot;MergedXinerama&quot; parameter, but you don't remember where is this parameter in the configuration tree. This module will guide you through the tree to the(s) node(s) that contain this parameter.<div class="spacer">
</div>
This class should be invaluable to construct interactive user interfaces.<div class="spacer">
</div>
This module provides 2 search modes:<dl>
<dt>
&#8226;</dt>
<dd>
A manual search where you are guided step by step to the element you're looking for. At each step, the module will return you the possible paths to choose from. The user will have to choose the correct path from the available paths. Most of the time, only one possibility will be returned, so the user choice should be straightforward. In other case (more that one choice), the user will have to decide the next step.</dd>
</dl>
<dl>
<dt>
&#8226;</dt>
<dd>
An automatic search where you provide call-back that will resolve the ambiguities in case of multiple paths.</dd>
</dl>
</div>
<div class="section">
<h1>CONSTRUCTOR</h1> The constructor should be used only by Config::Model::Node.</div>
<div class="section">
<h1>Methods</h1><div class="subsection">
<h2>get_searchable_elements</h2> Return the list of elements found in model that can be searched in the configuration tree.</div>
<div class="subsection">
<h2>prepare(element =&gt; ...)</h2> Prepare the searcher to look for the element passed in the argument. Returns the searcher object (i.e. $self).</div>
<div class="subsection">
<h2>reset</h2> Re-initialize the search engine to redo the search from start</div>
<div class="subsection">
<h2>searched</h2> Returns the searched element name.</div>
</div>
<div class="section">
<h1>Manual search</h1><div class="subsection">
<h2><i>next_step()</i></h2> Returns an array (or a ref depending on context) containing the next possible step to find the element you're looking for. The array ref can contain 1 or more elements.<div class="spacer">
</div>
If the array ref is empty, you can get the target element with &quot; <i>current_object()</i>&quot;.</div>
<div class="subsection">
<h2><i>next_choice()</i></h2> Returns an array ref containing the next non-obvious choice to find the element you're looking for.<div class="spacer">
</div>
If the array ref is empty, you can get the target element with &quot; <i>current_object()</i>&quot;.</div>
<div class="subsection">
<h2>choose( &lt;chosen_element_name&gt; )</h2> Tell the search engine your choice. The chosen element name must be one of the possibilities given by &quot; <i>next_step()</i>&quot;.</div>
<div class="subsection">
<h2><i>current_object()</i></h2> Returns the object where the search engine is. It can be a node, a list, a hash, or a leaf element.</div>
</div>
<div class="section">
<h1>Automatic search</h1><div class="subsection">
<h2>auto_choose ( element_callback, id_call_back)</h2> Finds the searched element with minimal user interaction.<div class="spacer">
</div>
&quot;element_callback&quot; will be called when the search engine finds a node where more than one element can lead to the searched item.<div class="spacer">
</div>
&quot;id_call_back&quot; will be called when the search engine finds a hash element or a list element which contain  <b>no</b> or <b>more than 1</b> elements. In this case the call-back will have return an id that will be used by the search engine to get the target element.<div class="spacer">
</div>
Both call-back arguments will be:<dl>
<dt>
&#8226;</dt>
<dd>
The current object (as returned by &quot;<i>current_object()</i>&quot;)</dd>
</dl>
<dl>
<dt>
&#8226;</dt>
<dd>
A list of possible choices</dd>
</dl>
<div class="spacer">
</div>
For instances, your callback will be :<div class="spacer">
</div>
<br/>
 my $id_cb = sub {<br/>
    my ($object,@choices) = @_ ;<br/>
    ....<br/>
    return $choice[1] ;<br/>
 }<br/>
<div class="spacer">
</div>
Both call-back are expected to return a scalar value that is either:<dl>
<dt>
&#8226;</dt>
<dd>
An element name</dd>
</dl>
<dl>
<dt>
&#8226;</dt>
<dd>
An id valid for the list or hash element returned by &quot;<i>current_object()</i>&quot;.</dd>
</dl>
</div>
</div>
<div class="section">
<h1>AUTHOR</h1> Dominique Dumont, (ddumont at cpan dot org)</div>
<div class="section">
<h1>SEE ALSO</h1> Config::Model, Config::Model::Node, Config::Model::AnyId, Config::Model::ListId, Config::Model::HashId, Config::Model::Value,</div>
<table class="foot">
<tr>
<td class="foot-date">
2012-02-24</td>
<td class="foot-os">
perl v5.14.2</td>
</tr>
</table>
</div>
</body>
</html>

