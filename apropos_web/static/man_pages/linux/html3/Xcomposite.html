<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/linux/style.css" type="text/css" media="all"/>
<title>
XCOMPOSITE(3)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
XCOMPOSITE(3)</td>
<td class="head-vol">
libXcomposite</td>
<td class="head-rtitle">
XCOMPOSITE(3)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>NAME</h1> Xcomposite - X Composite Extension library</div>
<div class="section">
<h1>SYNOPSIS</h1>  <b>#include &lt;X11/extensions/Xcomposite.h&gt;</b><div class="spacer">
</div>
<div style="margin-left: 30.00ex;text-indent: -30.00ex;" class="spacer">
<b>Bool&#160;</b><b>XCompositeQueryExtension</b><b>(</b><b></b><b>Display&#160;*</b><b></b><i>dpy</i><b>, </b><b>int&#160;*</b><b></b><i>event_base_return</i><b>, </b><b>int&#160;*</b><b></b><i>error_base_return</i><b>);</b></div>
<div class="spacer">
</div>
<div style="margin-left: 30.00ex;text-indent: -30.00ex;" class="spacer">
<b>Status&#160;</b><b>XCompositeQueryVersion</b><b>(</b><b>Display&#160;*</b><b></b><i>dpy</i><b>, </b><b>int&#160;*</b><b></b><i>major_version_return</i><b>, </b><b>int&#160;*</b><b></b><i>minor_version_return</i><b>);</b></div>
<div class="spacer">
</div>
<div style="margin-left: 22.00ex;text-indent: -22.00ex;" class="spacer">
<b>int&#160;</b><b>XCompositeVersion</b><b>(</b><b>void);</b></div>
<div class="spacer">
</div>
<div style="margin-left: 30.00ex;text-indent: -30.00ex;" class="spacer">
<b>void&#160;</b><b>XCompositeRedirectWindow</b><b>(</b><b>Display&#160;*</b><b></b><i>dpy</i><b>, </b><b>Window&#160;</b><b></b><i>window</i><b>, </b><b>int&#160;</b><b></b><i>update</i><b>);</b></div>
<div class="spacer">
</div>
<div style="margin-left: 34.00ex;text-indent: -34.00ex;" class="spacer">
<b>void&#160;</b><b>XCompositeRedirectSubwindows</b><b>(</b><b>Display&#160;*</b><b></b><i>dpy</i><b>, </b><b>Window&#160;</b><b></b><i>window</i><b>, </b><b>int&#160;</b><b></b><i>update</i><b>);</b></div>
<div class="spacer">
</div>
<div style="margin-left: 32.00ex;text-indent: -32.00ex;" class="spacer">
<b>void&#160;</b><b>XCompositeUnredirectWindow</b><b>(</b><b>Display&#160;*</b><b></b><i>dpy</i><b>, </b><b>Window&#160;</b><b></b><i>window</i><b>, </b><b>int&#160;</b><b></b><i>update</i><b>);</b></div>
<div class="spacer">
</div>
<div style="margin-left: 36.00ex;text-indent: -36.00ex;" class="spacer">
<b>void&#160;</b><b>XCompositeUnredirectSubwindows</b><b>(</b><b>Display&#160;*</b><b></b><i>dpy</i><b>, </b><b>Window&#160;</b><b></b><i>window</i><b>, </b><b>int&#160;</b><b></b><i>update</i><b>);</b></div>
<div class="spacer">
</div>
<div style="margin-left: 51.00ex;text-indent: -51.00ex;" class="spacer">
<b>XserverRegion&#160;</b><b>XCompositeCreateRegionFromBorderClip</b><b>(</b><b>Display&#160;*</b><b></b><i>dpy</i><b>, </b><b>Window&#160;</b><b></b><i>window</i><b>);</b></div>
<div class="spacer">
</div>
<div style="margin-left: 34.00ex;text-indent: -34.00ex;" class="spacer">
<b>Pixmap&#160;</b><b>XCompositeNameWindowPixmap</b><b>(</b><b>Display&#160;*</b><b></b><i>dpy</i><b>, </b><b>Window&#160;</b><b></b><i>window</i><b>);</b></div>
<div class="spacer">
</div>
<div style="margin-left: 34.00ex;text-indent: -34.00ex;" class="spacer">
<b>Window&#160;</b><b>XCompositeGetOverlayWindow</b><b>(</b><b>Display&#160;*</b><b></b><i>dpy</i><b>, </b><b>Window&#160;</b><b></b><i>window</i><b>);</b></div>
<div class="spacer">
</div>
<div style="margin-left: 36.00ex;text-indent: -36.00ex;" class="spacer">
<b>void&#160;</b><b>XCompositeReleaseOverlayWindow</b><b>(</b><b>Display&#160;*</b><b></b><i>dpy</i><b>, </b><b>Window&#160;</b><b></b><i>window</i><b>);</b></div>
</div>
<div class="section">
<h1>DESCRIPTION</h1> The composite extension provides several related mechanisms:<dl>
<dt>
Per-hierarchy storage</dt>
<dd>
The rendering of an entire hierarchy of windows is redirected to off-screen storage. The pixels of that hierarchy are available whenever it is viewable. Storage is automatically reallocated when the top level window changes size. Contents beyond the geometry of the top window are not preserved.</dd>
</dl>
<dl>
<dt>
Automatic shadow update</dt>
<dd>
When a hierarchy is rendered off-screen, the X server provides an automatic mechanism for presenting those contents within the parent window. The implementation is free to make this update lag behind actual rendering operations by an unspecified amount of time. This automatic update mechanism may be disabled so that the parent window contents can be completely determined by an external application.</dd>
</dl>
<dl>
<dt>
Composite Overlay Window</dt>
<dd>
Version 0.3 of the protocol adds the Composite Overlay Window, which provides compositing managers with a surface on which to draw without interference. This window is always above normal windows and is always below the screen saver window. It is an InputOutput window whose width and height are the screen dimensions. Its visual is the root visual and its border width is zero. Attempts to redirect it using the composite extension are ignored. This window does not appear in the reply of the QueryTree request. It is also an override redirect window. These last two features make it invisible to window managers and other X11 clients. The only way to access the XID of this window is via the CompositeGetOverlayWindow request. Initially, the Composite Overlay Window is unmapped.</dd>
</dl>
<dl>
<dt>
Parent window clipping</dt>
<dd>
Version 0.4 of the protocol modifies the semantics of parent window clipping in the presence of manual redirected children. With this version, the area in the parent covered by manual redirected children is left in the parent clip list instead of being removed as in older versions.</dd>
</dl>
<div class="spacer">
</div>
Per-hierarchy storage may be created for individual windows or for all children of a window. Manual shadow update may be selected by only a single application for each window; manual update may also be selected on a per-window basis or for each child of a window. Detecting when to update may be done with the Damage extension.<div class="spacer">
</div>
The off-screen storage includes the window contents, its borders and the contents of all descendants.</div>
<div class="section">
<h1>ARGUMENTS</h1><dl>
<dt>
<i>display</i></dt>
<dd>
Pointer to the  <b>Display</b> structure returned from  <b>XOpenDisplay</b> for the connection to the X server.</dd>
</dl>
<dl>
<dt>
<i>event_base_return</i></dt>
<dd>
Pointer to integer where the base value for Composite Extension events will be stored.</dd>
</dl>
<dl>
<dt>
<i>error_base_return</i></dt>
<dd>
Pointer to integer where the base value for Composite Extension errors will be stored.</dd>
</dl>
<dl>
<dt>
<i>major_version_return</i></dt>
<dd>
Pointer to integer where the major version of the Composite Extension supported by the X server will be stored.</dd>
</dl>
<dl>
<dt>
<i>minor_version_return</i></dt>
<dd>
Pointer to integer where the minor version of the Composite Extension supported by the X server will be stored.</dd>
</dl>
<dl>
<dt>
<i>window</i></dt>
<dd>
Specifies the window ID to operate on.</dd>
</dl>
<dl>
<dt>
<i>update</i></dt>
<dd>
Specifies the mode for updating the window contents. Must be either  <b>CompositeRedirectAutomatic</b> or  <b>CompositeRedirectManual</b>.</dd>
</dl>
</div>
<div class="section">
<h1>FUNCTIONS</h1><dl>
<dt>
<b>XCompositeQueryExtension</b></dt>
<dd>
<b>XCompositeQueryExtension</b> determines if the Composite Extension is available on the given display. It returns  <b>True</b> if the extension is supported, otherwise  <b>False</b>. If the extension is present, the base values for events and errors are returned, and can be used to decode incoming event and error values.</dd>
</dl>
<dl>
<dt>
<b>XCompositeQueryVersion</b></dt>
<dd>
<b>XCompositeQueryVersion</b> determines if the X Server supports a version of the X Composite Extension which is compatible with the client library. A non-zero Status is returned if a compatible version of the extension is supported, otherwise a zero Status is returned. If the extension is supported, the major and minor version numbers are returned to indicate the level of Composite Extension support. No other XComposite functions (except XCompositeQueryExtension) may be called before this function. If a client violates this rule, the effects of all subsequent XComposite calls that it makes are undefined.</dd>
</dl>
<dl>
<dt>
<b>XCompositeVersion</b></dt>
<dd>
<b>XCompositeVersion</b> returns the version of the X Composite library. The version number is encoded as: (major * 10000) + (minor * 100) + revision<div style="height: 1.00em;">
&#160;</div>
For example, version 1.4.6 would be encoded as the integer 10406.</dd>
</dl>
<dl>
<dt>
<b>XCompositeRedirectWindow</b></dt>
<dd>
<b>XCompositeRedirectWindow</b> requests the X server to direct the hierarchy starting at  <i>window</i> to off-screen storage. The  <i>update</i> argument specifies whether the contents are mirrored to the parent window automatically or not. Only one client at a time may specify an update type of  <b>CompositeRedirectManual</b>, another attempt will result in a BadAccess error. When all clients enabling redirection terminate, the redirection will automatically be disabled.<div style="height: 1.00em;">
&#160;</div>
The root window may not be redirected. Doing so results in a BadMatch error. Specifying an invalid window id will result in a BadWindow error.</dd>
</dl>
<dl>
<dt>
<b>XCompositeRedirectSubwindows</b></dt>
<dd>
<b>XCompositeRedirectSubwindows</b> requests the X server to redirect hierarchies starting at all current and future children of  <i>window</i> as in  <b>XCompositeRedirectWindow</b>. If  <i>update</i> is  <b>CompositeRedirectManual</b>, then painting of the window background during window manipulation and ClearArea requests is inhibited.</dd>
</dl>
<dl>
<dt>
<b>XCompositeUnredirectWindow</b></dt>
<dd>
<b>XCompositeUnredirectWindow</b> requests the X server to terminate redirection of  <i>window</i>. If the specified window was not selected for redirection by the current client, a BadValue error results.</dd>
</dl>
<dl>
<dt>
<b>XCompositeUnredirectSubwindows</b></dt>
<dd>
<b>XCompositeUnredirectWindow</b> requests the X server to terminate redirection of all children of  <i>window</i>. If the specified window was not selected for sub-redirection by the current client, a BadValue error results.</dd>
</dl>
<dl>
<dt>
<b>XCompositeCreateRegionFromBorderClip</b></dt>
<dd>
<b>XCompositeCreateRegionFromBorderClip</b> creates a region containing the &quot;usual&quot; border clip value; that is the area of the window clipped against siblings and the parent. This region can be used to restrict rendering to suitable areas while updating only a single window. The region is copied at the moment the request is executed; future changes to the window hierarchy will not be reflected in this region.</dd>
</dl>
<dl>
<dt>
<b>XCompositeNameWindowPixmap</b></dt>
<dd>
<b>XCompositeNameWindowPixmap</b> creates and returns a pixmap id that serves as a reference to the off-screen storage for  <i>window</i>. This pixmap will remain allocated until freed, even if the window is unmapped, reconfigured or destroyed. However, the window will get a new pixmap allocated each time it is mapped or resized, so this function will need to be reinvoked for the client to continue to refer to the storage holding the current window contents. Generates a BadMatch error if  <i>window</i> is not redirected or is not visible.<div style="height: 1.00em;">
&#160;</div>
The X server must support at least version 0.2 of the Composite Extension for  <b>XCompositeNameWindowPixmap</b>.</dd>
</dl>
<dl>
<dt>
<b>XCompositeGetOverlayWindow</b></dt>
<dd>
<b>XCompositeGetOverlayWindow</b> returns the window ID of the Composite Overlay Window for the screen specified by the argument  <i>window</i>. This function notifies the X server that the client wishes to use the Composite Overlay Window of this screen. If this Composite Overlay Window has not yet been mapped, it is mapped by this request.<div style="height: 1.00em;">
&#160;</div>
The Composite Overlay Window for a particular screen will be unmapped when all clients who have called this function have either called  <b>XCompositeReleaseOverlayWindow</b> for that screen, or terminated their connection to the X server.<div style="height: 1.00em;">
&#160;</div>
The X server must support at least version 0.3 of the Composite Extension for  <b>XCompositeGetOverlayWindow</b>.</dd>
</dl>
<dl>
<dt>
<b>XCompositeReleaseOverlayWindow</b></dt>
<dd>
This request specifies that the client is no longer using the Composite Overlay Window on the screen specified by the argument  <i>window</i>. A screen's Composite Overlay Window is unmapped when there are no longer any clients using it.<div style="height: 1.00em;">
&#160;</div>
The X server must support at least version 0.3 of the Composite Extension for  <b>XCompositeReleaseOverlayWindow</b>.</dd>
</dl>
</div>
<div class="section">
<h1>AUTHOR</h1> Keith Packard &lt;keithp@keithp.com&gt;, Deron Johnson &lt;deron.johnson@sun.com&gt;.</div>
<table class="foot">
<tr>
<td class="foot-date">
23 April 2007</td>
<td class="foot-os">
</td>
</tr>
</table>
</div>
</body>
</html>

