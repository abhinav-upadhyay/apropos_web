<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/linux/style.css" type="text/css" media="all"/>
<title>
Net::SSLeay::Handle(3pm)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
Net::SSLeay::Handle(3pm)</td>
<td class="head-vol">
User Contributed Perl Documentation</td>
<td class="head-rtitle">
Net::SSLeay::Handle(3pm)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>NAME</h1> Net::SSLeay::Handle - Perl module that lets SSL (HTTPS) sockets be handled as standard file handles.</div>
<div class="section">
<h1>SYNOPSIS</h1><br/>
  use Net::SSLeay::Handle qw/shutdown/;<br/>
  my ($host, $port) = (&quot;localhost&quot;, 443);<br/>
<br/>
  tie(*SSL, &quot;Net::SSLeay::Handle&quot;, $host, $port);<br/>
<br/>
  print SSL &quot;GET / HTTP/1.0\r\n&quot;;<br/>
  shutdown(\*SSL, 1);<br/>
  print while (&lt;SSL&gt;);<br/>
  close SSL;<br/>
</div>
<div class="section">
<h1>DESCRIPTION</h1> Net::SSLeay::Handle allows you to request and receive HTTPS web pages using &quot;old-fashion&quot; file handles as in:<div class="spacer">
</div>
<br/>
    print SSL &quot;GET / HTTP/1.0\r\n&quot;;<br/>
<div class="spacer">
</div>
and<div class="spacer">
</div>
<br/>
    print while (&lt;SSL&gt;);<br/>
<div class="spacer">
</div>
If you export the shutdown routine, then the only extra code that you need to add to your program is the tie function as in:<div class="spacer">
</div>
<br/>
    my $socket;<br/>
    if ($scheme eq &quot;https&quot;) {<br/>
        tie(*S2, &quot;Net::SSLeay::Handle&quot;, $host, $port);<br/>
        $socket = \*S2;<br/>
    else {<br/>
        $socket = Net::SSLeay::Handle-&gt;make_socket($host, $port);<br/>
    }<br/>
    print $socket $request_headers;<br/>
    ...<br/>
</div>
<div class="section">
<h1>FUNCTIONS</h1><dl>
<dt>
shutdown</dt>
<dd>
<br/>
  shutdown(\*SOCKET, $mode)<br/>
<div style="height: 1.00em;">
&#160;</div>
Calls to the main <i>shutdown()</i> don't work with tied sockets created with this module.  This shutdown should be able to distinquish between tied and untied sockets and do the right thing.</dd>
</dl>
<dl>
<dt>
debug</dt>
<dd>
<br/>
  my $debug = Net::SSLeay::Handle-&gt;debug()<br/>
  Net::SSLeay::Handle-&gt;debug(1)<br/>
<div style="height: 1.00em;">
&#160;</div>
Get/set debuging mode. Always returns the debug value before the function call. if an additional argument is given the debug option will be set to this value.</dd>
</dl>
<dl>
<dt>
make_socket</dt>
<dd>
<br/>
  my $sock = Net::SSLeay::Handle-&gt;make_socket($host, $port);<br/>
<div style="height: 1.00em;">
&#160;</div>
Creates a socket that is connected to $post using $port. It uses $Net::SSLeay::proxyhost and proxyport if set and authentificates itself against this proxy depending on $Net::SSLeay::proxyauth. It also turns autoflush on for the created socket.</dd>
</dl>
<div class="subsection">
<h2>USING EXISTING SOCKETS</h2> One of the motivations for writing this module was to avoid duplicating socket creation code (which is mostly error handling). The calls to  <i>tie()</i> above where it is passed a $host and $port is provided for convenience testing.  If you already have a socket connected to the right host and port, S1, then you can do something like:<div class="spacer">
</div>
<br/>
    my $socket \*S1;<br/>
    if ($scheme eq &quot;https&quot;) {<br/>
        tie(*S2, &quot;Net::SSLeay::Handle&quot;, $socket);<br/>
        $socket = \*S2;<br/>
    }<br/>
    my $last_sel = select($socket); $| = 1; select($last_sel);<br/>
    print $socket $request_headers;<br/>
    ...<br/>
<div class="spacer">
</div>
Note: As far as I know you must be careful with the globs in the <i>tie()</i> function.  The first parameter must be a glob (*SOMETHING) and the last parameter must be a reference to a glob (\*SOMETHING_ELSE) or a scaler that was assigned to a reference to a glob (as in the example above)<div class="spacer">
</div>
Also, the two globs must be different.  When I tried to use the same glob, I got a core dump.</div>
<div class="subsection">
<h2>EXPORT</h2> None by default.<div class="spacer">
</div>
You can export the <i>shutdown()</i> function.<div class="spacer">
</div>
It is suggested that you do export <i>shutdown()</i> or use the fully qualified  <i>Net::SSLeay::Handle::shutdown()</i> function to shutdown SSL sockets.  It should be smart enough to distinguish between SSL and non-SSL sockets and do the right thing.</div>
</div>
<div class="section">
<h1>EXAMPLES</h1><br/>
  use Net::SSLeay::Handle qw/shutdown/;<br/>
  my ($host, $port) = (&quot;localhost&quot;, 443);<br/>
<br/>
  tie(*SSL, &quot;Net::SSLeay::Handle&quot;, $host, $port);<br/>
<br/>
  print SSL &quot;GET / HTTP/1.0\r\n&quot;;<br/>
  shutdown(\*SSL, 1);<br/>
  print while (&lt;SSL&gt;);<br/>
  close SSL;<br/>
</div>
<div class="section">
<h1>TODO</h1> Better error handling.  Callback routine?</div>
<div class="section">
<h1>CAVEATS</h1> Tying to a file handle is a little tricky (for me at least).<div class="spacer">
</div>
The first parameter to <i>tie()</i> must be a glob (*SOMETHING) and the last parameter must be a reference to a glob (\*SOMETHING_ELSE) or a scaler that was assigned to a reference to a glob ($s = \*SOMETHING_ELSE). Also, the two globs must be different.  When I tried to use the same glob, I got a core dump.<div class="spacer">
</div>
I was able to associate attributes to globs created by this module (like *SSL above) by making a hash of hashes keyed by the file head1.<div class="spacer">
</div>
Support for old perls may not be 100%. If in trouble try 5.6.0 or newer.</div>
<div class="section">
<h1>CHANGES</h1> Please see Net-SSLeay-Handle-0.50/Changes file.</div>
<div class="section">
<h1>KNOWN BUGS</h1> If you let this module construct sockets for you with Perl versions below v.5.6 then there is a slight memory leak.  Other upgrade your Perl, or create the sockets yourself.  The leak was created to let these older versions of Perl access more than one Handle at a time.</div>
<div class="section">
<h1>AUTHOR</h1> Jim Bowlin jbowlin@linklint.org</div>
<div class="section">
<h1>SEE ALSO</h1> Net::SSLeay,  <i>perl</i>(1), http://openssl.org/</div>
<table class="foot">
<tr>
<td class="foot-date">
2006-09-14</td>
<td class="foot-os">
perl v5.14.2</td>
</tr>
</table>
</div>
</body>
</html>

