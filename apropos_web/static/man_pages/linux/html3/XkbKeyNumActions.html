<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/linux/style.css" type="text/css" media="all"/>
<title>
XkbKeyNumActions(3)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
XkbKeyNumActions(3)</td>
<td class="head-vol">
XKB FUNCTIONS</td>
<td class="head-rtitle">
XkbKeyNumActions(3)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>NAME</h1> XkbKeyNumActions - Computes the number of actions associated with the key corresponding to keycode</div>
<div class="section">
<h1>SYNOPSIS</h1><div style="margin-left: 5.00ex;text-indent: -5.00ex;" class="spacer">
<b>int XkbKeyNumActions</b> <b>(XkbDescPtr </b><i>xkb</i><b>,</b> <b>KeyCode </b><i>keycode</i><b>);</b></div>
</div>
<div class="section">
<h1>ARGUMENTS</h1><dl>
<dt>
<i>- xkb</i></dt>
<dd>
Xkb description of interest</dd>
</dl>
<dl>
<dt>
<i>- keycode</i></dt>
<dd>
keycode of interest</dd>
</dl>
</div>
<div class="section">
<h1>DESCRIPTION</h1> A key action defines the effect key presses and releases have on the internal state of the server. For example, the expected key action associated with pressing the Shift key is to set the Shift modifier. There is zero or one key action associated with each keysym bound to each key.<div style="height: 1.00em;">
&#160;</div>
Just as the entire list of key symbols for the keyboard mapping is held in the <i>syms</i> field of the client map, the entire list of key actions for the keyboard mapping is held in the <i>acts</i> array of the server map. The total size of <i>acts</i> is specified by <i>size_acts,</i> and the number of entries is specified by <i>num_acts.</i><div style="height: 1.00em;">
&#160;</div>
The <i>key_acts</i> array, indexed by keycode, describes the actions associated with a key. The <i>key_acts</i> array has <i>min_key_code</i> unused entries at the start to allow direct indexing using a keycode. If a <i>key_acts</i> entry is zero, it means the key does not have any actions associated with it. If an entry is not zero, the entry represents an index into the <i>acts</i> field of the server map, much as the <i>offset</i> field of a KeySymMapRec structure is an index into the <i>syms</i> field of the client map.<div style="height: 1.00em;">
&#160;</div>
The reason the <i>acts</i> field is a linear list of XkbActions is to reduce the memory consumption associated with a keymap. Because Xkb allows individual keys to have multiple shift levels and a different number of groups per key, a single two-dimensional array of KeySyms would potentially be very large and sparse. Instead, Xkb provides a small two-dimensional array of XkbActions for each key. To store all of these individual arrays, Xkb concatenates each array together in the <i>acts</i> field of the server map.<div style="height: 1.00em;">
&#160;</div>
The key action structures consist only of fields of type char or unsigned char. This is done to optimize data transfer when the server sends bytes over the wire. If the fields are anything but bytes, the server has to sift through all of the actions and swap any nonbyte fields. Because they consist of nothing but bytes, it can just copy them out.<div style="height: 1.00em;">
&#160;</div>
<i>XkbKeyNumActions</i> computes the number of actions associated with the key corresponding to <i>keycode.</i> This should be the same value as the result of <i>XkbKeyNumSyms.</i></div>
<div class="section">
<h1>STRUCTURES</h1> The KeySymMapRec structure is defined as follows:<div class="spacer">
</div>
<br/>
    #define XkbNumKbdGroups             4<br/>
    #define XkbMaxKbdGroup              (XkbNumKbdGroups-1)<br/>
    <br/>
    typedef struct {                    /&#8727; map to keysyms for a single keycode */<br/>
        unsigned char       kt_index[XkbNumKbdGroups];  /&#8727; key type index for each group */<br/>
        unsigned char       group_info; /&#8727; # of groups and out of range group handling */<br/>
        unsigned char       width;      /&#8727; max # of shift levels for key */<br/>
        unsigned short      offset;     /&#8727; index to keysym table in syms array */<br/>
} XkbSymMapRec, *XkbSymMapPtr;<div class="spacer">
</div>
<br/>
</div>
<div class="section">
<h1>SEE ALSO</h1> <b>XkbKeyNumSyms</b>(3)</div>
<table class="foot">
<tr>
<td class="foot-date">
libX11 1.4.99.1</td>
<td class="foot-os">
X Version 11</td>
</tr>
</table>
</div>
</body>
</html>

