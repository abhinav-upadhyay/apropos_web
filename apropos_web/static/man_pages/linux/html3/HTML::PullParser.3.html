<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/linux/style.css" type="text/css" media="all"/>
<title>
HTML::PullParser(3pm)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
HTML::PullParser(3pm)</td>
<td class="head-vol">
User Contributed Perl Documentation</td>
<td class="head-rtitle">
HTML::PullParser(3pm)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>NAME</h1> HTML::PullParser - Alternative HTML::Parser interface</div>
<div class="section">
<h1>SYNOPSIS</h1><br/>
 use HTML::PullParser;<br/>
<br/>
 $p = HTML::PullParser-&gt;new(file =&gt; &quot;index.html&quot;,<br/>
                            start =&gt; 'event, tagname, @attr',<br/>
                            end   =&gt; 'event, tagname',<br/>
                            ignore_elements =&gt; [qw(script style)],<br/>
                           ) || die &quot;Can't open: $!&quot;;<br/>
 while (my $token = $p-&gt;get_token) {<br/>
     #...do something with $token<br/>
 }<br/>
</div>
<div class="section">
<h1>DESCRIPTION</h1> The HTML::PullParser is an alternative interface to the HTML::Parser class. It basically turns the HTML::Parser inside out.  You associate a file (or any IO::Handle object or string) with the parser at construction time and then repeatedly call $parser-&gt;get_token to obtain the tags and text found in the parsed document.<div class="spacer">
</div>
The following methods are provided:<dl>
<dt>
$p = HTML::PullParser-&gt;new( file =&gt; $file, %options )</dt>
<dd>
</dd>
</dl>
<dl>
<dt>
$p = HTML::PullParser-&gt;new( doc =&gt; \$doc, %options )</dt>
<dd>
A &quot;HTML::PullParser&quot; can be made to parse from either a file or a literal document based on whether the &quot;file&quot; or &quot;doc&quot; option is passed to the parser's constructor.<div style="height: 1.00em;">
&#160;</div>
The &quot;file&quot; passed in can either be a file name or a file handle object.  If a file name is passed, and it can't be opened for reading, then the constructor will return an undefined value and $!  will tell you why it failed.  Otherwise the argument is taken to be some object that the &quot;HTML::PullParser&quot; can  <i>read()</i> from when it needs more data. The stream will be  <i>read()</i> until EOF, but not closed.<div style="height: 1.00em;">
&#160;</div>
A &quot;doc&quot; can be passed plain or as a reference to a scalar.  If a reference is passed then the value of this scalar should not be changed before all tokens have been extracted.<div style="height: 1.00em;">
&#160;</div>
Next the information to be returned for the different token types must be set up.  This is done by simply associating an argspec (as defined in HTML::Parser) with the events you have an interest in.  For instance, if you want &quot;start&quot; tokens to be reported as the string 'S' followed by the tagname and the attributes you might pass an &quot;start&quot;-option like this:<div style="height: 1.00em;">
&#160;</div>
<br/>
   $p = HTML::PullParser-&gt;new(<br/>
          doc   =&gt; $document_to_parse,<br/>
          start =&gt; '&quot;S&quot;, tagname, @attr',<br/>
          end   =&gt; '&quot;E&quot;, tagname',<br/>
        );<br/>
<div style="height: 1.00em;">
&#160;</div>
At last other &quot;HTML::Parser&quot; options, like &quot;ignore_tags&quot;, and &quot;unbroken_text&quot;, can be passed in.  Note that you should not use the  <i>event</i>_h options to set up parser handlers.  That would confuse the inner logic of &quot;HTML::PullParser&quot;.</dd>
</dl>
<dl>
<dt>
$token = $p-&gt;get_token</dt>
<dd>
This method will return the next <i>token</i> found in the HTML document, or &quot;undef&quot; at the end of the document.  The token is returned as an array reference.  The content of this array match the argspec set up during &quot;HTML::PullParser&quot; construction.</dd>
</dl>
<dl>
<dt>
$p-&gt;unget_token( @tokens )</dt>
<dd>
If you find out you have read too many tokens you can push them back, so that they are returned again the next time $p-&gt;get_token is called.</dd>
</dl>
</div>
<div class="section">
<h1>EXAMPLES</h1> The 'eg/hform' script shows how we might parse the form section of HTML::Documents using HTML::PullParser.</div>
<div class="section">
<h1>SEE ALSO</h1> HTML::Parser, HTML::TokeParser</div>
<div class="section">
<h1>COPYRIGHT</h1> Copyright 1998-2001 Gisle Aas.<div class="spacer">
</div>
This library is free software; you can redistribute it and/or modify it under the same terms as Perl itself.</div>
<table class="foot">
<tr>
<td class="foot-date">
2008-04-04</td>
<td class="foot-os">
perl v5.14.2</td>
</tr>
</table>
</div>
</body>
</html>

