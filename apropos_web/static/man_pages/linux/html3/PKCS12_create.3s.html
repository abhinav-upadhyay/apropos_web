<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/linux/style.css" type="text/css" media="all"/>
<title>
PKCS12_create(3SSL)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
PKCS12_create(3SSL)</td>
<td class="head-vol">
OpenSSL</td>
<td class="head-rtitle">
PKCS12_create(3SSL)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>NAME</h1> PKCS12_create - create a PKCS#12 structure</div>
<div class="section">
<h1>SYNOPSIS</h1><br/>
 #include &lt;openssl/pkcs12.h&gt;<br/>
<br/>
 PKCS12 *PKCS12_create(char *pass, char *name, EVP_PKEY *pkey, X509 *cert, STACK_OF(X509) *ca,<br/>
                                int nid_key, int nid_cert, int iter, int mac_iter, int keytype);<br/>
</div>
<div class="section">
<h1>DESCRIPTION</h1>  <i>PKCS12_create()</i> creates a PKCS#12 structure.<div class="spacer">
</div>
<b>pass</b> is the passphrase to use. <b>name</b> is the <b>friendlyName</b> to use for the supplied certifictate and key.  <b>pkey</b> is the private key to include in the structure and  <b>cert</b> its corresponding certificates. <b>ca</b>, if not <b>NULL</b> is an optional set of certificates to also include in the structure.<div class="spacer">
</div>
<b>nid_key</b> and <b>nid_cert</b> are the encryption algorithms that should be used for the key and certificate respectively.  <b>iter</b> is the encryption algorithm iteration count to use and  <b>mac_iter</b> is the MAC iteration count to use.  <b>keytype</b> is the type of key.</div>
<div class="section">
<h1>NOTES</h1> The parameters  <b>nid_key</b>, <b>nid_cert</b>, <b>iter</b>, <b>mac_iter</b> and <b>keytype</b> can all be set to zero and sensible defaults will be used.<div class="spacer">
</div>
These defaults are: 40 bit RC2 encryption for certificates, triple DES encryption for private keys, a key iteration count of PKCS12_DEFAULT_ITER (currently 2048) and a MAC iteration count of 1.<div class="spacer">
</div>
The default MAC iteration count is 1 in order to retain compatibility with old software which did not interpret MAC iteration counts. If such compatibility is not required then  <b>mac_iter</b> should be set to PKCS12_DEFAULT_ITER.<div class="spacer">
</div>
<b>keytype</b> adds a flag to the store private key. This is a non standard extension that is only currently interpreted by MSIE. If set to zero the flag is omitted, if set to  <b>KEY_SIG</b> the key can be used for signing only, if set to <b>KEY_EX</b> it can be used for signing and encryption. This option was useful for old export grade software which could use signing only keys of arbitrary size but had restrictions on the permissible sizes of keys which could be used for encryption.</div>
<div class="section">
<h1>NEW FUNCTIONALITY IN OPENSSL 0.9.8</h1> Some additional functionality was added to  <i>PKCS12_create()</i> in OpenSSL 0.9.8. These extensions are detailed below.<div class="spacer">
</div>
If a certificate contains an <b>alias</b> or <b>keyid</b> then this will be used for the corresponding  <b>friendlyName</b> or <b>localKeyID</b> in the PKCS12 structure.<div class="spacer">
</div>
Either <b>pkey</b>, <b>cert</b> or both can be <b>NULL</b> to indicate that no key or certficate is required. In previous versions both had to be present or a fatal error is returned.<div class="spacer">
</div>
<b>nid_key</b> or <b>nid_cert</b> can be set to -1 indicating that no encryption should be used.<div class="spacer">
</div>
<b>mac_iter</b> can be set to -1 and the MAC will then be omitted entirely.</div>
<div class="section">
<h1>SEE ALSO</h1>  <i>d2i_PKCS12</i>(3)</div>
<div class="section">
<h1>HISTORY</h1> PKCS12_create was added in OpenSSL 0.9.3</div>
<table class="foot">
<tr>
<td class="foot-date">
2002-10-09</td>
<td class="foot-os">
1.0.1</td>
</tr>
</table>
</div>
</body>
</html>

