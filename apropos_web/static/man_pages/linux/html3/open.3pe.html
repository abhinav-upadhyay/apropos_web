<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/linux/style.css" type="text/css" media="all"/>
<title>
open(3perl)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
open(3perl)</td>
<td class="head-vol">
Perl Programmers Reference Guide</td>
<td class="head-rtitle">
open(3perl)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>NAME</h1> open - perl pragma to set default PerlIO layers for input and output</div>
<div class="section">
<h1>SYNOPSIS</h1><br/>
    use open IN  =&gt; &quot;:crlf&quot;, OUT =&gt; &quot;:bytes&quot;;<br/>
    use open OUT =&gt; ':utf8';<br/>
    use open IO  =&gt; &quot;:encoding(iso-8859-7)&quot;;<br/>
<br/>
    use open IO  =&gt; ':locale';<br/>
<br/>
    use open ':encoding(utf8)';<br/>
    use open ':locale';<br/>
    use open ':encoding(iso-8859-7)';<br/>
<br/>
    use open ':std';<br/>
</div>
<div class="section">
<h1>DESCRIPTION</h1> Full-fledged support for I/O layers is now implemented provided Perl is configured to use PerlIO as its IO system (which is now the default).<div class="spacer">
</div>
The &quot;open&quot; pragma serves as one of the interfaces to declare default &quot;layers&quot; (also known as &quot;disciplines&quot;) for all I/O. Any two-argument  <i>open()</i>, <i>readpipe()</i> (aka qx//) and similar operators found within the lexical scope of this pragma will use the declared defaults. Even three-argument opens may be affected by this pragma when they don't specify IO layers in MODE.<div class="spacer">
</div>
With the &quot;IN&quot; subpragma you can declare the default layers of input streams, and with the &quot;OUT&quot; subpragma you can declare the default layers of output streams.  With the &quot;IO&quot;  subpragma you can control both input and output streams simultaneously.<div class="spacer">
</div>
If you have a legacy encoding, you can use the &quot;:encoding(...)&quot; tag.<div class="spacer">
</div>
If you want to set your encoding layers based on your locale environment variables, you can use the &quot;:locale&quot; tag. For example:<div class="spacer">
</div>
<br/>
    $ENV{LANG} = 'ru_RU.KOI8-R';<br/>
    # the :locale will probe the locale environment variables like LANG<br/>
    use open OUT =&gt; ':locale';<br/>
    open(O, &quot;&gt;koi8&quot;);<br/>
    print O chr(0x430); # Unicode CYRILLIC SMALL LETTER A = KOI8-R 0xc1<br/>
    close O;<br/>
    open(I, &quot;&lt;koi8&quot;);<br/>
    printf &quot;%#x\n&quot;, ord(&lt;I&gt;), &quot;\n&quot;; # this should print 0xc1<br/>
    close I;<br/>
<div class="spacer">
</div>
These are equivalent<div class="spacer">
</div>
<br/>
    use open ':encoding(utf8)';<br/>
    use open IO =&gt; ':encoding(utf8)';<br/>
<div class="spacer">
</div>
as are these<div class="spacer">
</div>
<br/>
    use open ':locale';<br/>
    use open IO =&gt; ':locale';<br/>
<div class="spacer">
</div>
and these<div class="spacer">
</div>
<br/>
    use open ':encoding(iso-8859-7)';<br/>
    use open IO =&gt; ':encoding(iso-8859-7)';<br/>
<div class="spacer">
</div>
The matching of encoding names is loose: case does not matter, and many encodings have several aliases.  See Encode::Supported for details and the list of supported locales.<div class="spacer">
</div>
When <i>open()</i> is given an explicit list of layers (with the three-arg syntax), they override the list declared using this pragma.<div class="spacer">
</div>
The &quot;:std&quot; subpragma on its own has no effect, but if combined with the &quot;:utf8&quot; or &quot;:encoding&quot; subpragmas, it converts the standard filehandles (STDIN, STDOUT, STDERR) to comply with encoding selected for input/output handles.  For example, if both input and out are chosen to be &quot;:encoding(utf8)&quot;, a &quot;:std&quot; will mean that STDIN, STDOUT, and STDERR are also in &quot;:encoding(utf8)&quot;.  On the other hand, if only output is chosen to be in &quot;:encoding(koi8r)&quot;, a &quot;:std&quot; will cause only the STDOUT and STDERR to be in &quot;koi8r&quot;.  The &quot;:locale&quot; subpragma implicitly turns on &quot;:std&quot;.<div class="spacer">
</div>
The logic of &quot;:locale&quot; is described in full in encoding, but in short it is first trying nl_langinfo(CODESET) and then guessing from the LC_ALL and LANG locale environment variables.<div class="spacer">
</div>
Directory handles may also support PerlIO layers in the future.</div>
<div class="section">
<h1>NONPERLIO FUNCTIONALITY</h1> If Perl is not built to use PerlIO as its IO system then only the two pseudo-layers &quot;:bytes&quot; and &quot;:crlf&quot; are available.<div class="spacer">
</div>
The &quot;:bytes&quot; layer corresponds to &quot;binary mode&quot; and the &quot;:crlf&quot; layer corresponds to &quot;text mode&quot; on platforms that distinguish between the two modes when opening files (which is many DOS-like platforms, including Windows).  These two layers are no-ops on platforms where  <i>binmode()</i> is a no-op, but perform their functions everywhere if PerlIO is enabled.</div>
<div class="section">
<h1>IMPLEMENTATION DETAILS</h1> There is a class method in &quot;PerlIO::Layer&quot; &quot;find&quot; which is implemented as XS code.  It is called by &quot;import&quot; to validate the layers:<div class="spacer">
</div>
<br/>
   PerlIO::Layer::-&gt;find(&quot;perlio&quot;)<br/>
<div class="spacer">
</div>
The return value (if defined) is a Perl object, of class &quot;PerlIO::Layer&quot; which is created by the C code in  <i>perlio.c</i>.  As yet there is nothing useful you can do with the object at the perl level.</div>
<div class="section">
<h1>SEE ALSO</h1> &quot;binmode&quot; in perlfunc, &quot;open&quot; in perlfunc, perlunicode, PerlIO, encoding</div>
<table class="foot">
<tr>
<td class="foot-date">
2011-09-26</td>
<td class="foot-os">
perl v5.14.2</td>
</tr>
</table>
</div>
</body>
</html>

