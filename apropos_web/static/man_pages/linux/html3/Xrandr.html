<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/linux/style.css" type="text/css" media="all"/>
<title>
XRANDR(3)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
XRANDR(3)</td>
<td class="head-vol">
Library Functions Manual</td>
<td class="head-rtitle">
XRANDR(3)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>NAME</h1><br/>
 Xrandr - X Resize, Rotate and Reflection extension.</div>
<div class="section">
<h1>SYNTAX</h1> #include &lt;X11/extensions/Xrandr.h&gt;<div style="height: 1.00em;">
&#160;</div>
<br/>
Bool XRRQueryExtension (Display *<i>dpy</i>,<br/>
	int *<i>event_base_return</i>, int *<i>error_base_return</i>);<div style="height: 1.00em;">
&#160;</div>
<br/>
Status XRRQueryVersion (Display *<i>dpy</i>,<br/>
	int *<i>major_version_return</i>,<br/>
	int *<i>minor_version_return</i>);<div style="height: 1.00em;">
&#160;</div>
<br/>
XRRScreenConfiguration *XRRGetScreenInfo (Display *dpy,<br/>
	Drawable <i>draw</i>);<div style="height: 1.00em;">
&#160;</div>
<br/>
void XRRFreeScreenConfigInfo (<br/>
	<i>XRRScreenConfiguration *config</i>);<div style="height: 1.00em;">
&#160;</div>
<br/>
Status XRRSetScreenConfig (Display *<i>dpy</i>,<br/>
	XRRScreenConfiguration *<i>config</i>,<br/>
	Drawable <i>draw</i>,<br/>
	int <i>size_index</i>,<br/>
	Rotation <i>rotation</i>,<br/>
	Time <i>timestamp</i>);<div style="height: 1.00em;">
&#160;</div>
<br/>
Status XRRSetScreenConfigAndRate (Display *<i>dpy</i>,<br/>
				  XRRScreenConfiguration *<i>config</i>,<br/>
				  Drawable <i>draw</i>,<br/>
				  int <i>size_index</i>,<br/>
				  Rotation <i>rotation</i>,<br/>
				  short <i>rate</i>,<br/>
				  Time <i>timestamp</i>);<div style="height: 1.00em;">
&#160;</div>
<br/>
Rotation XRRConfigRotations(<br/>
	XRRScreenConfiguration *<i>config</i>,<br/>
	Rotation *<i>current_rotation</i>);<div style="height: 1.00em;">
&#160;</div>
<br/>
Time XRRConfigTimes (<br/>
	XRRScreenConfiguration *<i>config</i>,<br/>
	Time *<i>config_timestamp</i>);<div style="height: 1.00em;">
&#160;</div>
<br/>
XRRScreenSize *XRRConfigSizes(<br/>
	XRRScreenConfiguration *<i>config</i>,<br/>
	int *<i>nsizes</i>);<div style="height: 1.00em;">
&#160;</div>
<br/>
short *XRRConfigRates (<br/>
	XRRScreenConfiguration *<i>config</i>,<br/>
	int <i>size_index</i>,<br/>
	int *<i>nrates</i>);<div style="height: 1.00em;">
&#160;</div>
<br/>
SizeID XRRConfigCurrentConfiguration (<br/>
	XRRScreenConfiguration *<i>config</i>,<br/>
	Rotation *<i>rotation</i>);<div style="height: 1.00em;">
&#160;</div>
<br/>
short XRRConfigCurrentRate (<br/>
	XRRScreenConfiguration *<i>config</i>);<div style="height: 1.00em;">
&#160;</div>
<br/>
int XRRRootToScreen(<br/>
	Display *<i>dpy</i>,<br/>
	Window <i>root</i>);<div style="height: 1.00em;">
&#160;</div>
<br/>
void XRRSelectInput(Display *<i>dpy</i>, Window <i>window</i>, int <i>mask</i>);<div style="height: 1.00em;">
&#160;</div>
<br/>
/&#8727;<br/>
 * intended to take RRScreenChangeNotify,  or<br/>
 * ConfigureNotify (<i>on the root window</i>)<br/>
 * returns 1 if it is an event type it understands, 0 if not<br/>
 */<br/>
int XRRUpdateConfiguration(XEvent *<i>event</i>);<div style="height: 1.00em;">
&#160;</div>
<br/>
/&#8727;<br/>
 * the following are always safe to call, even if RandR is<br/>
 * not implemented on a screen<br/>
 */<div style="height: 0.00em;">
&#160;</div>
<br/>
Rotation XRRRotations(<br/>
	Display *<i>dpy</i>, int <i>screen</i>,<br/>
	Rotation *<i>current_rotation</i>);<div style="height: 1.00em;">
&#160;</div>
<br/>
XRRScreenSize *XRRSizes(Display *<i>dpy</i>,<br/>
	int <i>screen</i>, int *<i>nsizes</i>);<div style="height: 1.00em;">
&#160;</div>
<br/>
short *XRRRates (Display *<i>dpy</i>, int <i>screen</i>,<br/>
	int <i>size_index</i>, int *<i>nrates</i>);<div style="height: 1.00em;">
&#160;</div>
<br/>
Time XRRTimes (Display *<i>dpy</i>, int <i>screen</i>, Time *<i>config_timestamp</i>);<br/>
</div>
<div class="section">
<h1>ARGUMENTS</h1><dl>
<dt>
<i>display</i></dt>
<dd>
Specifies the connection to the X server.</dd>
</dl>
<dl>
<dt>
<i>screen</i></dt>
<dd>
Specifies which screen.</dd>
</dl>
<dl>
<dt>
<i>draw</i></dt>
<dd>
Specifies the screen.</dd>
</dl>
<dl>
<dt>
<i>rotation</i></dt>
<dd>
Specifies the possible rotations or reflections of the screen.</dd>
</dl>
<dl>
<dt>
<i>current_rotation</i></dt>
<dd>
Specifies the current rotations and reflection of the screen.</dd>
</dl>
<dl>
<dt>
<i>timestamp</i></dt>
<dd>
Specifies the server timestamp.</dd>
</dl>
<dl>
<dt>
<i>config_timestamp</i></dt>
<dd>
Specifies the timestamp when the screen was last (re)configured.</dd>
</dl>
<dl>
<dt>
<i>config</i></dt>
<dd>
Specifies the screen configuration being used.</dd>
</dl>
<dl>
<dt>
<i>sizes</i></dt>
<dd>
Specifies the array of supported sizes.</dd>
</dl>
<dl>
<dt>
<i>rate</i></dt>
<dd>
Specifies the refresh rate in Hz.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
</div>
<div class="section">
<h1>DATATYPES</h1> <b>Rotations/Reflections</b><div class="spacer">
</div>
Can be any of:<br/>
#define RR_Rotate_0             1<br/>
#define RR_Rotate_90            2<br/>
#define RR_Rotate_180           4<br/>
#define RR_Rotate_270           8<div class="spacer">
</div>
<br/>
/&#8727; new in 1.0 protocol, to allow reflection of screen */<br/>
/&#8727; reflection is applied after rotation */<div class="spacer">
</div>
<br/>
#define RR_Reflect_X            16<br/>
#define RR_Reflect_Y            32<div class="spacer">
</div>
<div class="spacer">
</div>
<br/>
typedef struct {<br/>
    int	width, height;<br/>
    int	mwidth, mheight;<br/>
} XRRScreenSize;<div class="spacer">
</div>
<br/>
typedef struct {<br/>
    int type;				/&#8727; event base */<br/>
    unsigned long serial;	/&#8727; # of last request processed by server */<br/>
    Bool send_event;		/&#8727; true if this came from a SendEvent request */<br/>
    Display *display;		/&#8727; Display the event was read from */<br/>
    Window window;			/&#8727; window which selected for this event */<br/>
    Window root;			/&#8727; Root window for changed screen */<br/>
    Time timestamp;			/&#8727; when the screen change occurred */<br/>
    Time config_timestamp;	/&#8727; when the last configuration change */<br/>
    SizeID size_index;<br/>
    SubpixelOrder subpixel_order;<br/>
    Rotation rotation;<br/>
    int width;<br/>
    int height;<br/>
    int mwidth;<br/>
    int mheight;<br/>
} XRRScreenChangeNotifyEvent;<div style="height: 1.00em;">
&#160;</div>
<br/>
The <b>XRRScreenSize</b> structure contains a possible root size in pixels and in millimeters.<div style="height: 1.00em;">
&#160;</div>
A <b>XRRScreenChangeNotifyEvent</b> is sent to a client that has requested notification whenever the screen configuration is changed. A client can perform this request by calling  <b>XRRSelectInput</b>, passing the display, the root window, and the  <b>RRScreenChangeNotifyMask</b> mask.<div style="height: 1.00em;">
&#160;</div>
<b>XRRScreenConfiguration</b> is an opaque data type containing the configuration information for a screen.<div style="height: 1.00em;">
&#160;</div>
<b>Timestamps</b><div class="spacer">
</div>
Time stamps are included and must be used to ensure the client is playing with a full deck: the screen may change properties on the fly and this ensures its knowledge of the configuration is up to date. This is to help issues when screens may become hot-pluggable in the future.<div style="height: 1.00em;">
&#160;</div>
</div>
<div class="section">
<h1>DESCRIPTION</h1> <b>Xrandr</b> is a simple library designed to interface the X Resize and Rotate Extension.  This allows clients to change the size and rotation of the root window of a screen, along with the ability to reflect the screen about either axis (if supported by the implementation).  Rotation and reflection may be implemented by software and may result in slower performance if rotation and reflection are implemented in this fashion (as are all implementations as of October 2002).<div class="spacer">
</div>
The Xrandr library does some minimal caching to avoid roundtrips to provide clients frequently used information.  See &quot;The X Resize and Rotate Extension&quot; for a detailed description; also note that depth switching, as described in the document is not implemented, and may (or may not) ever be implemented, as display memory is growing rapidly, and toolkits are already beginning to support migration, mitigating the need for depth switching.  If it is implemented in the future, we expect to do so via an upward compatible extension to the current library/protocol; functionality described here should continue to work.<div class="spacer">
</div>
Rotation and reflection and how they interact can be confusing.  In Randr, the coordinate system is rotated in a counter-clockwise direction relative to the normal orientation.  Reflection is along the window system coordinate system, not the physical screen X and Y axis, so that rotation and reflection do not interact.  The other way to consider reflection is to treat it as specified in the &quot;normal&quot; orientation, before rotation.<div class="spacer">
</div>
The <b>XRRScreenChangeNotify</b> event is sent to clients that ask to be informed whenever the root window configuration changes.  Configuration changes may include resolution, physical size, subpixel order (see XRender(3)), and rotation.  Note that changes to any or all of these could occur due to external events (user control in the X server, a different monitor/flat panel display being hot-plugged) and is not only the result of a protocol/library request to the X server.<div class="spacer">
</div>
Additionally, to eliminate a potential race condition, this event may be generated immediately upon selecting for notification if the screen has changed since the client of Xrandr connected to the X server, to enable reliable screen resolution changing when a user may log in and change the configuration while one or many clients are starting up.<div class="spacer">
</div>
<b>Xlib notification</b><div class="spacer">
</div>
Clients must call back into Xlib using <b>XRRUpdateConfiguration</b> when screen configuration change notify events are generated (or root window configuration changes occur, to update Xlib's view of the resolution, size, rotation, reflection or subpixel order. Generally, toolkits will perform this operation on behalf of applications; we did not want to change display structure data behind the back of toolkits, as in multithreaded clients, various race conditions might occur. Toolkits should provide clients some mechanism for notification of screen change, of course.<div style="height: 1.00em;">
&#160;</div>
</div>
<div class="section">
<h1>FUNCTIONS</h1> There are two classes of interfaces: those which can be safely called even if RandR is not implemented on a screen (to make common idioms not dependent on the server having support), and those which will return errors if the extension is not present.<div class="spacer">
</div>
<b>XRRRotations</b> returns both the possible set of rotations/reflections supported (as a bitmask) as the value of the function, along with the current rotation/reflection of the screen.<div class="spacer">
</div>
<b>XRRSizes</b> returns the size and a pointer to the current sizes supported by the specified screen.  The first size specified is the default size of the server. If RandR is not supported, it returns 0 for the number of sizes.<div class="spacer">
</div>
<b>XRRRates</b> returns a pointer to the rates supported by the specified size. If RandR is not supported, it returns 0 for the number of rates.<div class="spacer">
</div>
<b>XRRTimes</b> returns the time last reported by the server along with the timestamp the last configuration changed. If the configuration has changed since the client last updated its view of the server time, requests to change the configuration will fail until the client has an up to date timestamp.<div class="spacer">
</div>
<b>XRRRootToScreen</b> returns the screen number given a root window (for example, from an  <b>XRRScreenChangeNotifyEvent</b>).<div class="spacer">
</div>
The rest of the functions will fail if applied to screens not implementing the RandR extension. <b>XRRSetScreenConfig</b> sets the screen size and rotation and reflection to the desired values on the screen specified by  <i>draw</i>, or returns a <b>BadValue</b> error.  <i>size_index</i> specifies which size configuration is to be used,  <i>rotation</i> specifies which rotation or reflection is to be used (or a <b>BadValue</b> error is returned). The  <i>timestamp</i> is used by the server to make sure the client has up to date configuration information. Status is returned to indicate success or failure; a client must refresh its configuration information if it fails and try the call again (by calling  <b>XRRGetScreenInfo</b>).<div class="spacer">
</div>
<b>XRRSetScreenConfigAndRate</b> is like <b>XRRSetScreenConfig</b> but also sets the refresh rate. If specified rate is not supported a <b>BadValue</b> error is returned.<div class="spacer">
</div>
<b>XRRConfigRotations,</b> <b>XRRConfigSizes,</b> <b>XRRConfigCurrentConfiguration,</b> <b>XRRConfigTimes,</b> <b>XRRConfigRates,</b> and <b>XRRConfigCurrentRate</b> are used to get specific configuration information out of a screen configuration.<div class="spacer">
</div>
<b>XRRGetScreenInfo</b> returns a screen configuration for later use; the information is private to the library. Call <b>XRRFreeScreenConfigInfo</b> to free this information when you are finished with it. It forces a round trip to the server.<div style="height: 1.00em;">
&#160;</div>
Other functions include: <b>XRRQueryExtension</b> which returns the event and error base codes, <b>XRRQueryVersion</b> , which returns the current version of the extension (this information is cached by the library).</div>
<div class="section">
<h1>RESTRICTIONS</h1> <b>Xrandr</b> will remain upward compatible after the current 1.0 release.</div>
<div class="section">
<h1>AUTHOR</h1> Jim Gettys, and Keith Packard, HP.<div style="height: 1.00em;">
&#160;</div>
</div>
<table class="foot">
<tr>
<td class="foot-date">
libXrandr 1.3.2</td>
<td class="foot-os">
X Version 11</td>
</tr>
</table>
</div>
</body>
</html>

