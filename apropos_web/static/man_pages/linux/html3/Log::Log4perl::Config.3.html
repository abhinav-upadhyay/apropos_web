<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/linux/style.css" type="text/css" media="all"/>
<title>
Config(3pm)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
Config(3pm)</td>
<td class="head-vol">
User Contributed Perl Documentation</td>
<td class="head-rtitle">
Config(3pm)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>NAME</h1> Log::Log4perl::Config - Log4perl configuration file syntax</div>
<div class="section">
<h1>DESCRIPTION</h1> In &quot;Log::Log4perl&quot;, configuration files are used to describe how the system's loggers ought to behave.<div class="spacer">
</div>
The format is the same as the one as used for &quot;log4j&quot;, just with a few perl-specific extensions, like enabling the &quot;Bar::Twix&quot; syntax instead of insisting on the Java-specific &quot;Bar.Twix&quot;.<div class="spacer">
</div>
Comment lines (starting with arbitrary whitespace and a #) and blank lines (all whitespace or empty) are ignored.<div class="spacer">
</div>
Also, blanks between syntactical entities are ignored, it doesn't matter if you write<div class="spacer">
</div>
<br/>
    log4perl.logger.Bar.Twix=WARN,Screen<br/>
<div class="spacer">
</div>
or<div class="spacer">
</div>
<br/>
    log4perl.logger.Bar.Twix = WARN, Screen<br/>
<div class="spacer">
</div>
&quot;Log::Log4perl&quot; will strip the blanks while parsing your input.<div class="spacer">
</div>
Assignments need to be on a single line. However, you can break the line if you want to by using a continuation character at the end of the line. Instead of writing<div class="spacer">
</div>
<br/>
    log4perl.appender.A1.layout=Log::Log4perl::Layout::SimpleLayout<br/>
<div class="spacer">
</div>
you can break the line at any point by putting a backslash at the very (!) end of the line to be continued:<div class="spacer">
</div>
<br/>
    log4perl.appender.A1.layout=\<br/>
        Log::Log4perl::Layout::SimpleLayout<br/>
<div class="spacer">
</div>
Watch out for trailing blanks after the backslash, which would prevent the line from being properly concatenated.<div class="subsection">
<h2>Loggers</h2> Loggers are addressed by category:<div class="spacer">
</div>
<br/>
    log4perl.logger.Bar.Twix      = WARN, Screen<br/>
<div class="spacer">
</div>
This sets all loggers under the &quot;Bar::Twix&quot; hierarchy on priority &quot;WARN&quot; and attaches a later-to-be-defined &quot;Screen&quot; appender to them. Settings for the root appender (which doesn't have a name) can be accomplished by simply omitting the name:<div class="spacer">
</div>
<br/>
    log4perl.logger = FATAL, Database, Mailer<br/>
<div class="spacer">
</div>
This sets the root appender's level to &quot;FATAL&quot; and also attaches the later-to-be-defined appenders &quot;Database&quot; and &quot;Mailer&quot; to it.<div class="spacer">
</div>
The additivity flag of a logger is set or cleared via the &quot;additivity&quot; keyword:<div class="spacer">
</div>
<br/>
    log4perl.additivity.Bar.Twix = 0|1<br/>
<div class="spacer">
</div>
(Note the reversed order of keyword and logger name, resulting from the dilemma that a logger name could end in &quot;.additivity&quot; according to the log4j documentation).</div>
<div class="subsection">
<h2>Appenders and Layouts</h2> Appender names used in Log4perl configuration file lines need to be resolved later on, in order to define the appender's properties and its layout. To specify properties of an appender, just use the &quot;appender&quot; keyword after the &quot;log4perl&quot; intro and the appender's name:<div class="spacer">
</div>
<br/>
        # The Bar::Twix logger and its appender<br/>
    log4perl.logger.Bar.Twix = DEBUG, A1<br/>
    log4perl.appender.A1=Log::Log4perl::Appender::File<br/>
    log4perl.appender.A1.filename=test.log<br/>
    log4perl.appender.A1.mode=append<br/>
    log4perl.appender.A1.layout=Log::Log4perl::Layout::SimpleLayout<br/>
<div class="spacer">
</div>
This sets a priority of &quot;DEBUG&quot; for loggers in the &quot;Bar::Twix&quot; hierarchy and assigns the &quot;A1&quot; appender to it, which is later on resolved to be an appender of type &quot;Log::Log4perl::Appender::File&quot;, simply appending to a log file. According to the &quot;Log::Log4perl::Appender::File&quot; manpage, the &quot;filename&quot; parameter specifies the name of the log file and the &quot;mode&quot; parameter can be set to &quot;append&quot; or &quot;write&quot; (the former will append to the logfile if one with the specified name already exists while the latter would clobber and overwrite it).<div class="spacer">
</div>
The order of the entries in the configuration file is not important, &quot;Log::Log4perl&quot; will read in the entire file first and try to make sense of the lines after it knows the entire context.<div class="spacer">
</div>
You can very well define all loggers first and then their appenders (you could even define your appenders first and then your loggers, but let's not go there):<div class="spacer">
</div>
<br/>
    log4perl.logger.Bar.Twix = DEBUG, A1<br/>
    log4perl.logger.Bar.Snickers = FATAL, A2<br/>
<br/>
    log4perl.appender.A1=Log::Log4perl::Appender::File<br/>
    log4perl.appender.A1.filename=test.log<br/>
    log4perl.appender.A1.mode=append<br/>
    log4perl.appender.A1.layout=Log::Log4perl::Layout::SimpleLayout<br/>
<br/>
    log4perl.appender.A2=Log::Log4perl::Appender::Screen<br/>
    log4perl.appender.A2.stderr=0<br/>
    log4perl.appender.A2.layout=Log::Log4perl::Layout::PatternLayout<br/>
    log4perl.appender.A2.layout.ConversionPattern = %d %m %n<br/>
<div class="spacer">
</div>
Note that you have to specify the full path to the layout class and that &quot;ConversionPattern&quot; is the keyword to specify the printf-style formatting instructions.</div>
</div>
<div class="section">
<h1>Configuration File Cookbook</h1> Here's some examples of often-used Log4perl configuration files:<div class="subsection">
<h2>Append to STDERR</h2><br/>
    log4perl.category.Bar.Twix      = WARN, Screen<br/>
    log4perl.appender.Screen        = Log::Log4perl::Appender::Screen<br/>
    log4perl.appender.Screen.layout = \<br/>
        Log::Log4perl::Layout::PatternLayout<br/>
    log4perl.appender.Screen.layout.ConversionPattern = %d %m %n<br/>
</div>
<div class="subsection">
<h2>Append to STDOUT</h2><br/>
    log4perl.category.Bar.Twix      = WARN, Screen<br/>
    log4perl.appender.Screen        = Log::Log4perl::Appender::Screen<br/>
    log4perl.appender.Screen.stderr = 0<br/>
    log4perl.appender.Screen.layout = \<br/>
        Log::Log4perl::Layout::PatternLayout<br/>
    log4perl.appender.Screen.layout.ConversionPattern = %d %m %n<br/>
</div>
<div class="subsection">
<h2>Append to a log file</h2><br/>
    log4perl.logger.Bar.Twix = DEBUG, A1<br/>
    log4perl.appender.A1=Log::Log4perl::Appender::File<br/>
    log4perl.appender.A1.filename=test.log<br/>
    log4perl.appender.A1.mode=append<br/>
    log4perl.appender.A1.layout = \<br/>
        Log::Log4perl::Layout::PatternLayout<br/>
    log4perl.appender.A1.layout.ConversionPattern = %d %m %n<br/>
<div class="spacer">
</div>
Note that you could even leave out<div class="spacer">
</div>
<br/>
    log4perl.appender.A1.mode=append<br/>
<div class="spacer">
</div>
and still have the logger append to the logfile by default, although the &quot;Log::Log4perl::Appender::File&quot; module does exactly the opposite. This is due to some nasty trickery &quot;Log::Log4perl&quot; performs behind the scenes to make sure that beginner's CGI applications don't clobber the log file every time they're called.</div>
<div class="subsection">
<h2>Write a log file from scratch</h2> If you loathe the Log::Log4perl's append-by-default strategy, you can certainly override it:<div class="spacer">
</div>
<br/>
    log4perl.logger.Bar.Twix = DEBUG, A1<br/>
    log4perl.appender.A1=Log::Log4perl::Appender::File<br/>
    log4perl.appender.A1.filename=test.log<br/>
    log4perl.appender.A1.mode=write<br/>
    log4perl.appender.A1.layout=Log::Log4perl::Layout::SimpleLayout<br/>
<div class="spacer">
</div>
&quot;write&quot; is the &quot;mode&quot; that has &quot;Log::Log4perl::Appender::File&quot; explicitely clobber the log file if it exists.</div>
</div>
<div class="section">
<h1>SEE ALSO</h1> Log::Log4perl::Config::PropertyConfigurator<div class="spacer">
</div>
Log::Log4perl::Config::DOMConfigurator<div class="spacer">
</div>
Log::Log4perl::Config::LDAPConfigurator (coming soon!)</div>
<div class="section">
<h1>COPYRIGHT AND LICENSE</h1> Copyright 2002-2009 by Mike Schilli &lt;m@perlmeister.com&gt; and Kevin Goess &lt;cpan@goess.org&gt;.<div class="spacer">
</div>
This library is free software; you can redistribute it and/or modify it under the same terms as Perl itself.</div>
<table class="foot">
<tr>
<td class="foot-date">
2010-02-24</td>
<td class="foot-os">
perl v5.10.1</td>
</tr>
</table>
</div>
</body>
</html>

