<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/linux/style.css" type="text/css" media="all"/>
<title>
XkbAllocClientMap(3)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
XkbAllocClientMap(3)</td>
<td class="head-vol">
XKB FUNCTIONS</td>
<td class="head-rtitle">
XkbAllocClientMap(3)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>NAME</h1> XkbAllocClientMap - Allocate and initialize an empty client map description record</div>
<div class="section">
<h1>SYNOPSIS</h1><div style="margin-left: 5.00ex;text-indent: -5.00ex;" class="spacer">
<b>Status XkbAllocClientMap</b> <b>(XkbDescPtr </b><i>xkb</i><b>,</b> <b>unsigned int </b><i>which</i><b>,</b> <b>unsigned int </b><i>type_count</i><b>);</b></div>
</div>
<div class="section">
<h1>ARGUMENTS</h1><dl>
<dt>
<i>- xkb</i></dt>
<dd>
keyboard description in which to allocate client map</dd>
</dl>
<dl>
<dt>
<i>- which</i></dt>
<dd>
mask selecting map components to allocate</dd>
</dl>
<dl>
<dt>
<i>- type_count</i></dt>
<dd>
value of num_types field in map to be allocated</dd>
</dl>
</div>
<div class="section">
<h1>DESCRIPTION</h1> Calling <i>XkbGetMap</i> should be sufficient for most applications to get client and server maps. As a result, most applications do not need to directly allocate client and server maps.<div style="height: 1.00em;">
&#160;</div>
If you change the number of key types or construct map components without loading the necessary components from the X server, do not allocate any map components directly using <i>malloc</i> or <i>Xmalloc.</i> Instead, use the Xkb allocators, <i>XkbAllocClientMap,</i> and <i>XkbAllocServerMap.</i><div style="height: 1.00em;">
&#160;</div>
Similarly, use the Xkb destructors, <i>XkbFreeClientMap,</i> and <i>XkbFreeServerMap</i> instead of <i>free</i> or <i>Xfree.</i><div style="height: 1.00em;">
&#160;</div>
<i>XkbAllocClientMap</i> allocates and initializes an empty client map in the <i>map</i> field of the keyboard description specified by <i>xkb.</i> The <i>which</i> parameter specifies the particular components of the client map structure to allocate and is a mask composed by a bitwise inclusive OR of one or more of the masks shown in Table 1.<table class="tbl">
<col style="width: 31.00ex;"/>
<col style="width: 254.00ex;"/>
<tbody>
<tr>
<td>
Table 1 XkbAllocClientMap Masks</td>
<td>
</td>
</tr>
<tr>
<td colspan="0">
</td>
</tr>
<tr>
<td>
Mask</td>
<td>
Effect</td>
</tr>
<tr>
<td colspan="0">
</td>
</tr>
<tr>
<td>
XkbKeyTypesMask</td>
<td>
The type_count field specifies the number of entries to preallocate for the  types field of the client map. If the type_count field is less than  XkbNumRequiredTypes returns BadValue.</td>
</tr>
<tr>
<td>
</td>
<td>
</td>
</tr>
<tr>
<td>
XkbKeySymsMask</td>
<td>
The min_key_code and max_key_code fields of the xkb parameter are used to  allocate the syms and key_sym_map fields of the client map. The fields are  allocated to contain the maximum number of entries necessary for max_key_code -  min_key_code + 1 keys.</td>
</tr>
<tr>
<td>
</td>
<td>
</td>
</tr>
<tr>
<td>
XkbModifierMapMask</td>
<td>
The min_key_code and max_key_code fields of the xkb parameter are used to  allocate the modmap field of the client map. The field is allocated to contain  the maximum number of entries necessary for max_key_code - min_key_code + 1  keys.</td>
</tr>
</tbody>
</table>
<div style="height: 1.00em;">
&#160;</div>
NOTE: The <i>min_key_code</i> and <i>max_key_code</i> fields of the <i>xkb</i> parameter must be legal values if the XkbKeySymsMask or XkbModifierMapMask masks are set in the <i>which</i> parameter. If they are not valid, <i>XkbAllocClientMap</i> returns BadValue.<div style="height: 1.00em;">
&#160;</div>
If the client map of the keyboard description is not NULL, and any fields are already allocated in the client map, <i>XkbAllocClientMap</i> does not overwrite the existing values; it simply ignores that part of the request. The only exception is the <i>types</i> array. If <i>type_count</i> is greater than the current <i>num_types</i> field of the client map, <i>XkbAllocClientMap</i> resizes the <i>types</i> array and resets the <i>num_types</i> field accordingly.<div style="height: 1.00em;">
&#160;</div>
If <i>XkbAllocClientMap</i> is successful, it returns Success. Otherwise, it can return either BadMatch, BadAlloc, or BadValue errors.</div>
<div class="section">
<h1>DIAGNOSTICS</h1><dl>
<dt>
<b>BadAlloc</b></dt>
<dd>
Unable to allocate storage</dd>
</dl>
<dl>
<dt>
<b>BadMatch</b></dt>
<dd>
A compatible version of Xkb was not available in the server or an argument has correct type and range, but is otherwise invalid</dd>
</dl>
<dl>
<dt>
<b>BadValue</b></dt>
<dd>
An argument is out of range</dd>
</dl>
</div>
<div class="section">
<h1>SEE ALSO</h1> <b>XkbAllocClientMap</b>(3), <b>XkbAllocServerMap</b>(3), <b>XkbFreeClientMap,</b>(3), <b>XkbFreeServerMap</b>(3), <b>XkbGetMap</b>(3)</div>
<table class="foot">
<tr>
<td class="foot-date">
libX11 1.4.99.1</td>
<td class="foot-os">
X Version 11</td>
</tr>
</table>
</div>
</body>
</html>

