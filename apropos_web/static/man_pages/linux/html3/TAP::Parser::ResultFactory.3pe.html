<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/linux/style.css" type="text/css" media="all"/>
<title>
TAP::Parser::ResultFactory(3perl)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
TAP::Parser::ResultFactory(3perl)</td>
<td class="head-vol">
Perl Programmers Reference Guide</td>
<td class="head-rtitle">
TAP::Parser::ResultFactory(3perl)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>NAME</h1> TAP::Parser::ResultFactory - Factory for creating TAP::Parser output objects</div>
<div class="section">
<h1>SYNOPSIS</h1><br/>
  use TAP::Parser::ResultFactory;<br/>
  my $token   = {...};<br/>
  my $factory = TAP::Parser::ResultFactory-&gt;new;<br/>
  my $result  = $factory-&gt;make_result( $token );<br/>
</div>
<div class="section">
<h1>VERSION</h1> Version 3.23<div class="subsection">
<h2>DESCRIPTION</h2> This is a simple factory class which returns a TAP::Parser::Result subclass representing the current bit of test data from TAP (usually a single line). It is used primarily by TAP::Parser::Grammar.  Unless you're subclassing, you probably won't need to use this module directly.</div>
<div class="subsection">
<h2>METHODS</h2></div>
<div class="subsection">
<h2>Class Methods</h2>  <i></i><i>&quot;new&quot;</i><i></i><div class="spacer">
</div>
Creates a new factory class.  <i>Note:</i> You currently don't need to instantiate a factory in order to use it.<div class="spacer">
</div>
<i></i><i>&quot;make_result&quot;</i><i></i><div class="spacer">
</div>
Returns an instance the appropriate class for the test token passed in.<div class="spacer">
</div>
<br/>
  my $result = TAP::Parser::ResultFactory-&gt;make_result($token);<br/>
<div class="spacer">
</div>
Can also be called as an instance method.<div class="spacer">
</div>
<i></i><i>&quot;class_for&quot;</i><i></i><div class="spacer">
</div>
Takes one argument: $type.  Returns the class for this $type, or &quot;croak&quot;s with an error.<div class="spacer">
</div>
<i></i><i>&quot;register_type&quot;</i><i></i><div class="spacer">
</div>
Takes two arguments: $type, $class<div class="spacer">
</div>
This lets you override an existing type with your own custom type, or register a completely new type, eg:<div class="spacer">
</div>
<br/>
  # create a custom result type:<br/>
  package MyResult;<br/>
  use strict;<br/>
  use vars qw(@ISA);<br/>
  @ISA = 'TAP::Parser::Result';<br/>
<br/>
  # register with the factory:<br/>
  TAP::Parser::ResultFactory-&gt;register_type( 'my_type' =&gt; __PACKAGE__ );<br/>
<br/>
  # use it:<br/>
  my $r = TAP::Parser::ResultFactory-&gt;( { type =&gt; 'my_type' } );<br/>
<div class="spacer">
</div>
Your custom type should then be picked up automatically by the TAP::Parser.</div>
</div>
<div class="section">
<h1>SUBCLASSING</h1> Please see &quot;SUBCLASSING&quot; in TAP::Parser for a subclassing overview.<div class="spacer">
</div>
There are a few things to bear in mind when creating your own &quot;ResultFactory&quot;:<dl>
<dt>
1.</dt>
<dd>
The factory itself is never instantiated (this <i>may</i> change in the future). This means that &quot;_initialize&quot; is never called.</dd>
</dl>
<dl>
<dt>
2.</dt>
<dd>
&quot;TAP::Parser::Result-&gt;new&quot; is never called, $tokens are reblessed. This  <i>will</i> change in a future version!</dd>
</dl>
<dl>
<dt>
3.</dt>
<dd>
TAP::Parser::Result subclasses will register themselves with TAP::Parser::ResultFactory directly:<div style="height: 1.00em;">
&#160;</div>
<br/>
  package MyFooResult;<br/>
  TAP::Parser::ResultFactory-&gt;register_type( foo =&gt; __PACKAGE__ );<br/>
<div style="height: 1.00em;">
&#160;</div>
Of course, it's up to you to decide whether or not to ignore them.</dd>
</dl>
<div class="subsection">
<h2>Example</h2><br/>
  package MyResultFactory;<br/>
<br/>
  use strict;<br/>
  use vars '@ISA';<br/>
<br/>
  use MyResult;<br/>
  use TAP::Parser::ResultFactory;<br/>
<br/>
  @ISA = qw( TAP::Parser::ResultFactory );<br/>
<br/>
  # force all results to be 'MyResult'<br/>
  sub class_for {<br/>
    return 'MyResult';<br/>
  }<br/>
<br/>
  1;<br/>
</div>
</div>
<div class="section">
<h1>SEE ALSO</h1> TAP::Parser, TAP::Parser::Result, TAP::Parser::Grammar</div>
<table class="foot">
<tr>
<td class="foot-date">
2011-09-19</td>
<td class="foot-os">
perl v5.14.2</td>
</tr>
</table>
</div>
</body>
</html>

