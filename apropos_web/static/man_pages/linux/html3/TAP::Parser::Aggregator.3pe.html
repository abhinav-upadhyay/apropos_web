<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/linux/style.css" type="text/css" media="all"/>
<title>
TAP::Parser::Aggregator(3perl)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
TAP::Parser::Aggregator(3perl)</td>
<td class="head-vol">
Perl Programmers Reference Guide</td>
<td class="head-rtitle">
TAP::Parser::Aggregator(3perl)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>NAME</h1> TAP::Parser::Aggregator - Aggregate TAP::Parser results</div>
<div class="section">
<h1>VERSION</h1> Version 3.23</div>
<div class="section">
<h1>SYNOPSIS</h1><br/>
    use TAP::Parser::Aggregator;<br/>
<br/>
    my $aggregate = TAP::Parser::Aggregator-&gt;new;<br/>
    $aggregate-&gt;add( 't/00-load.t', $load_parser );<br/>
    $aggregate-&gt;add( 't/10-lex.t',  $lex_parser  );<br/>
<br/>
    my $summary = &lt;&lt;'END_SUMMARY';<br/>
    Passed:  %s<br/>
    Failed:  %s<br/>
    Unexpectedly succeeded: %s<br/>
    END_SUMMARY<br/>
    printf $summary,<br/>
           scalar $aggregate-&gt;passed,<br/>
           scalar $aggregate-&gt;failed,<br/>
           scalar $aggregate-&gt;todo_passed;<br/>
</div>
<div class="section">
<h1>DESCRIPTION</h1> &quot;TAP::Parser::Aggregator&quot; collects parser objects and allows reporting/querying their aggregate results.</div>
<div class="section">
<h1>METHODS</h1><div class="subsection">
<h2>Class Methods</h2>  <i></i><i>&quot;new&quot;</i><i></i><div class="spacer">
</div>
<br/>
 my $aggregate = TAP::Parser::Aggregator-&gt;new;<br/>
<div class="spacer">
</div>
Returns a new &quot;TAP::Parser::Aggregator&quot; object.</div>
<div class="subsection">
<h2>Instance Methods</h2>  <i></i><i>&quot;add&quot;</i><i></i><div class="spacer">
</div>
<br/>
  $aggregate-&gt;add( $description =&gt; $parser );<br/>
<div class="spacer">
</div>
The $description is usually a test file name (but only by convention.)  It is used as a unique identifier (see e.g. &quot;parsers&quot;.)  Reusing a description is a fatal error.<div class="spacer">
</div>
The $parser is a TAP::Parser object.<div class="spacer">
</div>
<i></i><i>&quot;parsers&quot;</i><i></i><div class="spacer">
</div>
<br/>
  my $count   = $aggregate-&gt;parsers;<br/>
  my @parsers = $aggregate-&gt;parsers;<br/>
  my @parsers = $aggregate-&gt;parsers(@descriptions);<br/>
<div class="spacer">
</div>
In scalar context without arguments, this method returns the number of parsers aggregated.  In list context without arguments, returns the parsers in the order they were added.<div class="spacer">
</div>
If @descriptions is given, these correspond to the keys used in each call to the  <i>add()</i> method.  Returns an array of the requested parsers (in the requested order) in list context or an array reference in scalar context.<div class="spacer">
</div>
Requesting an unknown identifier is a fatal error.<div class="spacer">
</div>
<i></i><i>&quot;descriptions&quot;</i><i></i><div class="spacer">
</div>
Get an array of descriptions in the order in which they were added to the aggregator.<div class="spacer">
</div>
<i></i><i>&quot;start&quot;</i><i></i><div class="spacer">
</div>
Call &quot;start&quot; immediately before adding any results to the aggregator. Among other times it records the start time for the test run.<div class="spacer">
</div>
<i></i><i>&quot;stop&quot;</i><i></i><div class="spacer">
</div>
Call &quot;stop&quot; immediately after adding all test results to the aggregator.<div class="spacer">
</div>
<i></i><i>&quot;elapsed&quot;</i><i></i><div class="spacer">
</div>
Elapsed returns a Benchmark object that represents the running time of the aggregated tests. In order for &quot;elapsed&quot; to be valid you must call &quot;start&quot; before running the tests and &quot;stop&quot; immediately afterwards.<div class="spacer">
</div>
<i></i><i>&quot;elapsed_timestr&quot;</i><i></i><div class="spacer">
</div>
Returns a formatted string representing the runtime returned by &quot;elapsed()&quot;.  This lets the caller not worry about Benchmark.<div class="spacer">
</div>
<i></i><i>&quot;all_passed&quot;</i><i></i><div class="spacer">
</div>
Return true if all the tests passed and no parse errors were detected.<div class="spacer">
</div>
<i></i><i>&quot;get_status&quot;</i><i></i><div class="spacer">
</div>
Get a single word describing the status of the aggregated tests. Depending on the outcome of the tests returns 'PASS', 'FAIL' or 'NOTESTS'. This token is understood by CPAN::Reporter.</div>
<div class="subsection">
<h2>Summary methods</h2> Each of the following methods will return the total number of corresponding tests if called in scalar context.  If called in list context, returns the descriptions of the parsers which contain the corresponding tests (see &quot;add&quot; for an explanation of description.<dl>
<dt>
&#8226;</dt>
<dd>
failed</dd>
</dl>
<dl>
<dt>
&#8226;</dt>
<dd>
parse_errors</dd>
</dl>
<dl>
<dt>
&#8226;</dt>
<dd>
passed</dd>
</dl>
<dl>
<dt>
&#8226;</dt>
<dd>
planned</dd>
</dl>
<dl>
<dt>
&#8226;</dt>
<dd>
skipped</dd>
</dl>
<dl>
<dt>
&#8226;</dt>
<dd>
todo</dd>
</dl>
<dl>
<dt>
&#8226;</dt>
<dd>
todo_passed</dd>
</dl>
<dl>
<dt>
&#8226;</dt>
<dd>
wait</dd>
</dl>
<dl>
<dt>
&#8226;</dt>
<dd>
exit</dd>
</dl>
<div class="spacer">
</div>
For example, to find out how many tests unexpectedly succeeded (TODO tests which passed when they shouldn't):<div class="spacer">
</div>
<br/>
 my $count        = $aggregate-&gt;todo_passed;<br/>
 my @descriptions = $aggregate-&gt;todo_passed;<br/>
<div class="spacer">
</div>
Note that &quot;wait&quot; and &quot;exit&quot; are the totals of the wait and exit statuses of each of the tests. These values are totalled only to provide a true value if any of them are non-zero.<div class="spacer">
</div>
<i></i><i>&quot;total&quot;</i><i></i><div class="spacer">
</div>
<br/>
  my $tests_run = $aggregate-&gt;total;<br/>
<div class="spacer">
</div>
Returns the total number of tests run.<div class="spacer">
</div>
<i></i><i>&quot;has_problems&quot;</i><i></i><div class="spacer">
</div>
<br/>
  if ( $parser-&gt;has_problems ) {<br/>
      ...<br/>
  }<br/>
<div class="spacer">
</div>
Identical to &quot;has_errors&quot;, but also returns true if any TODO tests unexpectedly succeeded.  This is more akin to &quot;warnings&quot;.<div class="spacer">
</div>
<i></i><i>&quot;has_errors&quot;</i><i></i><div class="spacer">
</div>
<br/>
  if ( $parser-&gt;has_errors ) {<br/>
      ...<br/>
  }<br/>
<div class="spacer">
</div>
Returns true if <i>any</i> of the parsers failed.  This includes:<dl>
<dt>
&#8226;</dt>
<dd>
Failed tests</dd>
</dl>
<dl>
<dt>
&#8226;</dt>
<dd>
Parse errors</dd>
</dl>
<dl>
<dt>
&#8226;</dt>
<dd>
Bad exit or wait status</dd>
</dl>
<div class="spacer">
</div>
<i></i><i>&quot;todo_failed&quot;</i><i></i><div class="spacer">
</div>
<br/>
  # deprecated in favor of 'todo_passed'.  This method was horribly misnamed.<br/>
<div class="spacer">
</div>
This was a badly misnamed method.  It indicates which TODO tests unexpectedly succeeded.  Will now issue a warning and call &quot;todo_passed&quot;.</div>
</div>
<div class="section">
<h1>See Also</h1> TAP::Parser<div class="spacer">
</div>
TAP::Harness</div>
<table class="foot">
<tr>
<td class="foot-date">
2011-09-19</td>
<td class="foot-os">
perl v5.14.2</td>
</tr>
</table>
</div>
</body>
</html>

