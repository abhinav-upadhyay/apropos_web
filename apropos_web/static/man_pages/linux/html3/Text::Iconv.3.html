<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/linux/style.css" type="text/css" media="all"/>
<title>
Iconv(3pm)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
Iconv(3pm)</td>
<td class="head-vol">
User Contributed Perl Documentation</td>
<td class="head-rtitle">
Iconv(3pm)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>NAME</h1> Text::Iconv - Perl interface to iconv() codeset conversion function</div>
<div class="section">
<h1>SYNOPSIS</h1><br/>
  use Text::Iconv;<br/>
  $converter = Text::Iconv-&gt;new(&quot;fromcode&quot;, &quot;tocode&quot;);<br/>
  $converted = $converter-&gt;convert(&quot;Text to convert&quot;);<br/>
</div>
<div class="section">
<h1>DESCRIPTION</h1> The  <b>Text::Iconv</b> module provides a Perl interface to the <i>iconv()</i> function as defined by the Single UNIX Specification.<div class="spacer">
</div>
The <i>convert()</i> method converts the encoding of characters in the input string from the  <i>fromcode</i> codeset to the <i>tocode</i> codeset, and returns the result.<div class="spacer">
</div>
Settings of <i>fromcode</i> and <i>tocode</i> and their permitted combinations are implementation-dependent.  Valid values are specified in the system documentation; the  <i>iconv</i>(1) utility should also provide a <b>-l</b> option that lists all supported codesets.<div class="subsection">
<h2>Utility methods</h2>  <b>Text::Iconv</b> objects also provide the following methods:<div class="spacer">
</div>
<i>retval()</i> returns the return value of the underlying <i>iconv()</i> function for the last conversion; according to the Single UNIX Specification, this value indicates &quot;the number of non-identical conversions performed.&quot;  Note, however, that iconv implementations vary widely in the interpretation of this specification.<div class="spacer">
</div>
This method can be called after calling <i>convert()</i>, e.g.:<div class="spacer">
</div>
<br/>
  $result = $converter-&gt;convert(&quot;lorem ipsum dolor sit amet&quot;);<br/>
  $retval = $converter-&gt;retval;<br/>
<div class="spacer">
</div>
When called before the first call to <i>convert()</i>, or if an error occured during the conversion,  <i>retval()</i> returns <b>undef</b>.<div class="spacer">
</div>
<i>get_attr()</i>: This method is only available with GNU libiconv, otherwise it throws an exception.  The  <i>get_attr()</i> method allows you to query various attributes which influence the behavior of  <i>convert()</i>.  The currently supported attributes are  <i>trivialp</i>, <i>transliterate</i>, and  <i>discard_ilseq</i>, e.g.:<div class="spacer">
</div>
<br/>
  $state = $converter-&gt;get_attr(&quot;transliterate&quot;);<br/>
<div class="spacer">
</div>
See <i>iconvctl</i>(3) for details.  To ensure portability to other iconv implementations you should first check for the availability of this method using  <b>eval {}</b>, e.g.:<div class="spacer">
</div>
<br/>
    eval { $conv-&gt;get_attr(&quot;trivialp&quot;) };<br/>
    if ($@)<br/>
    {<br/>
      # get_attr() is not available<br/>
    }<br/>
    else<br/>
    {<br/>
      # get_attr() is available<br/>
    }<br/>
<div class="spacer">
</div>
This method should be considered experimental.<div class="spacer">
</div>
<i>set_attr()</i>: This method is only available with GNU libiconv, otherwise it throws an exception.  The  <i>set_attr()</i> method allows you to set various attributes which influence the behavior of  <i>convert()</i>.  The currently supported attributes are  <i>transliterate</i> and  <i>discard_ilseq</i>, e.g.:<div class="spacer">
</div>
<br/>
  $state = $converter-&gt;set_attr(&quot;transliterate&quot;);<br/>
<div class="spacer">
</div>
See <i>iconvctl</i>(3) for details.  To ensure portability to other iconv implementations you should first check for the availability of this method using  <b>eval {}</b>, cf. the description of <i>set_attr()</i> above.<div class="spacer">
</div>
This method should be considered experimental.</div>
</div>
<div class="section">
<h1>ERRORS</h1> If the conversion can't be initialized an exception is raised (using  <i>croak()</i>).<div class="subsection">
<h2>Handling of conversion errors</h2>  <i>Text::Iconv</i> provides a class attribute <b>raise_error</b> and a corresponding class method for setting and getting its value.  The handling of errors during conversion depends on the setting of this attribute.  If  <b>raise_error</b> is set to a true value, an exception is raised; otherwise, the  <i>convert()</i> method only returns <b>undef</b>.  By default  <b>raise_error</b> is false.  Example usage:<div class="spacer">
</div>
<br/>
  Text::Iconv-&gt;raise_error(1);     # Conversion errors raise exceptions<br/>
  Text::Iconv-&gt;raise_error(0);     # Conversion errors return undef<br/>
  $a = Text::Iconv-&gt;raise_error(); # Get current setting<br/>
</div>
<div class="subsection">
<h2>Per-object handling of conversion errors</h2> As an experimental feature,  <i>Text::Iconv</i> also provides an instance attribute  <b>raise_error</b> and a corresponding method for setting and getting its value.  If  <b>raise_error</b> is <b>undef</b>, the class-wide settings apply.  If  <b>raise_error</b> is 1 or 0 (true or false), the object settings override the class-wide settings.<div class="spacer">
</div>
Consult <i>iconv</i>(3) for details on errors that might occur.</div>
<div class="subsection">
<h2>Conversion of <b>undef</b></h2> Converting  <b>undef</b>, e.g.,<div class="spacer">
</div>
<br/>
  $converted = $converter-&gt;convert(undef);<br/>
<div class="spacer">
</div>
always returns <b>undef</b>.  This is not considered an error.</div>
</div>
<div class="section">
<h1>NOTES</h1> The supported codesets, their names, the supported conversions, and the quality of the conversions are all system-dependent.</div>
<div class="section">
<h1>AUTHOR</h1> Michael Piotrowski &lt;mxp@dynalabs.de&gt;</div>
<div class="section">
<h1>SEE ALSO</h1>  <i>iconv</i>(1), <i>iconv</i>(3)</div>
<table class="foot">
<tr>
<td class="foot-date">
2007-10-17</td>
<td class="foot-os">
perl v5.14.2</td>
</tr>
</table>
</div>
</body>
</html>

