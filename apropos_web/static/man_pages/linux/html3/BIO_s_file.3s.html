<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/linux/style.css" type="text/css" media="all"/>
<title>
BIO_s_file(3SSL)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
BIO_s_file(3SSL)</td>
<td class="head-vol">
OpenSSL</td>
<td class="head-rtitle">
BIO_s_file(3SSL)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>NAME</h1> BIO_s_file, BIO_new_file, BIO_new_fp, BIO_set_fp, BIO_get_fp, BIO_read_filename, BIO_write_filename, BIO_append_filename, BIO_rw_filename - FILE bio</div>
<div class="section">
<h1>SYNOPSIS</h1><br/>
 #include &lt;openssl/bio.h&gt;<br/>
<br/>
 BIO_METHOD *   BIO_s_file(void);<br/>
 BIO *BIO_new_file(const char *filename, const char *mode);<br/>
 BIO *BIO_new_fp(FILE *stream, int flags);<br/>
<br/>
 BIO_set_fp(BIO *b,FILE *fp, int flags);<br/>
 BIO_get_fp(BIO *b,FILE **fpp);<br/>
<br/>
 int BIO_read_filename(BIO *b, char *name)<br/>
 int BIO_write_filename(BIO *b, char *name)<br/>
 int BIO_append_filename(BIO *b, char *name)<br/>
 int BIO_rw_filename(BIO *b, char *name)<br/>
</div>
<div class="section">
<h1>DESCRIPTION</h1>  <i>BIO_s_file()</i> returns the BIO file method. As its name implies it is a wrapper round the stdio FILE structure and it is a source/sink BIO.<div class="spacer">
</div>
Calls to <i>BIO_read()</i> and <i>BIO_write()</i> read and write data to the underlying stream.  <i>BIO_gets()</i> and <i>BIO_puts()</i> are supported on file BIOs.<div class="spacer">
</div>
<i>BIO_flush()</i> on a file BIO calls the <i>fflush()</i> function on the wrapped stream.<div class="spacer">
</div>
<i>BIO_reset()</i> attempts to change the file pointer to the start of file using fseek(stream, 0, 0).<div class="spacer">
</div>
<i>BIO_seek()</i> sets the file pointer to position <b>ofs</b> from start of file using fseek(stream, ofs, 0).<div class="spacer">
</div>
<i>BIO_eof()</i> calls <i>feof()</i>.<div class="spacer">
</div>
Setting the BIO_CLOSE flag calls <i>fclose()</i> on the stream when the BIO is freed.<div class="spacer">
</div>
<i>BIO_new_file()</i> creates a new file BIO with mode <b>mode</b> the meaning of  <b>mode</b> is the same as the stdio function <i>fopen()</i>. The BIO_CLOSE flag is set on the returned BIO.<div class="spacer">
</div>
<i>BIO_new_fp()</i> creates a file BIO wrapping <b>stream</b>. Flags can be: BIO_CLOSE, BIO_NOCLOSE (the close flag) BIO_FP_TEXT (sets the underlying stream to text mode, default is binary: this only has any effect under Win32).<div class="spacer">
</div>
<i>BIO_set_fp()</i> set the fp of a file BIO to <b>fp</b>. <b>flags</b> has the same meaning as in  <i>BIO_new_fp()</i>, it is a macro.<div class="spacer">
</div>
<i>BIO_get_fp()</i> retrieves the fp of a file BIO, it is a macro.<div class="spacer">
</div>
<i>BIO_seek()</i> is a macro that sets the position pointer to <b>offset</b> bytes from the start of file.<div class="spacer">
</div>
<i>BIO_tell()</i> returns the value of the position pointer.<div class="spacer">
</div>
<i>BIO_read_filename()</i>, <i>BIO_write_filename()</i>, <i>BIO_append_filename()</i> and  <i>BIO_rw_filename()</i> set the file BIO <b>b</b> to use file <b>name</b> for reading, writing, append or read write respectively.</div>
<div class="section">
<h1>NOTES</h1> When wrapping stdout, stdin or stderr the underlying stream should not normally be closed so the BIO_NOCLOSE flag should be set.<div class="spacer">
</div>
Because the file BIO calls the underlying stdio functions any quirks in stdio behaviour will be mirrored by the corresponding BIO.<div class="spacer">
</div>
On Windows BIO_new_files reserves for the filename argument to be UTF-8 encoded. In other words if you have to make it work in multi- lingual environment, encode file names in UTF-8.</div>
<div class="section">
<h1>EXAMPLES</h1> File BIO &quot;hello world&quot;:<div class="spacer">
</div>
<br/>
 BIO *bio_out;<br/>
 bio_out = BIO_new_fp(stdout, BIO_NOCLOSE);<br/>
 BIO_printf(bio_out, &quot;Hello World\n&quot;);<br/>
<div class="spacer">
</div>
Alternative technique:<div class="spacer">
</div>
<br/>
 BIO *bio_out;<br/>
 bio_out = BIO_new(BIO_s_file());<br/>
 if(bio_out == NULL) /* Error ... */<br/>
 if(!BIO_set_fp(bio_out, stdout, BIO_NOCLOSE)) /* Error ... */<br/>
 BIO_printf(bio_out, &quot;Hello World\n&quot;);<br/>
<div class="spacer">
</div>
Write to a file:<div class="spacer">
</div>
<br/>
 BIO *out;<br/>
 out = BIO_new_file(&quot;filename.txt&quot;, &quot;w&quot;);<br/>
 if(!out) /* Error occurred */<br/>
 BIO_printf(out, &quot;Hello World\n&quot;);<br/>
 BIO_free(out);<br/>
<div class="spacer">
</div>
Alternative technique:<div class="spacer">
</div>
<br/>
 BIO *out;<br/>
 out = BIO_new(BIO_s_file());<br/>
 if(out == NULL) /* Error ... */<br/>
 if(!BIO_write_filename(out, &quot;filename.txt&quot;)) /* Error ... */<br/>
 BIO_printf(out, &quot;Hello World\n&quot;);<br/>
 BIO_free(out);<br/>
</div>
<div class="section">
<h1>RETURN VALUES</h1>  <i>BIO_s_file()</i> returns the file BIO method.<div class="spacer">
</div>
<i>BIO_new_file()</i> and <i>BIO_new_fp()</i> return a file BIO or NULL if an error occurred.<div class="spacer">
</div>
<i>BIO_set_fp()</i> and <i>BIO_get_fp()</i> return 1 for success or 0 for failure (although the current implementation never return 0).<div class="spacer">
</div>
<i>BIO_seek()</i> returns the same value as the underlying <i>fseek()</i> function: 0 for success or -1 for failure.<div class="spacer">
</div>
<i>BIO_tell()</i> returns the current file position.<div class="spacer">
</div>
<i>BIO_read_filename()</i>, <i>BIO_write_filename()</i>,  <i>BIO_append_filename()</i> and  <i>BIO_rw_filename()</i> return 1 for success or 0 for failure.</div>
<div class="section">
<h1>BUGS</h1>  <i>BIO_reset()</i> and <i>BIO_seek()</i> are implemented using <i>fseek()</i> on the underlying stream. The return value for  <i>fseek()</i> is 0 for success or -1 if an error occurred this differs from other types of BIO which will typically return 1 for success and a non positive value if an error occurred.</div>
<div class="section">
<h1>SEE ALSO</h1>  <i>BIO_seek</i>(3), <i>BIO_tell</i>(3),  <i>BIO_reset</i>(3), <i>BIO_flush</i>(3),  <i>BIO_read</i>(3),  <i>BIO_write</i>(3), <i>BIO_puts</i>(3),  <i>BIO_gets</i>(3), <i>BIO_printf</i>(3),  <i>BIO_set_close</i>(3), <i>BIO_get_close</i>(3)</div>
<table class="foot">
<tr>
<td class="foot-date">
2010-04-28</td>
<td class="foot-os">
1.0.1</td>
</tr>
</table>
</div>
</body>
</html>

