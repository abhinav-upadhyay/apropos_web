<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/linux/style.css" type="text/css" media="all"/>
<title>
XOPENDEVICE(3)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
XOPENDEVICE(3)</td>
<td class="head-vol">
&#160;</td>
<td class="head-rtitle">
XOPENDEVICE(3)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>NAME</h1> XOpenDevice, XCloseDevice - open or close an extension input device</div>
<div class="section">
<h1>SYNOPSIS</h1><br/>
#include &lt;X11/extensions/XInput.h&gt;<br/>
<div style="height: 1.00em;">
&#160;</div>
<br/>
XDevice *XOpenDevice( Display *display,<br/>
                      XID device_id);<br/>
<div style="height: 1.00em;">
&#160;</div>
<br/>
XCloseDevice( Display *display,<br/>
              XDevice *device);<br/>
<div style="height: 1.00em;">
&#160;</div>
<br/>
display<br/>
       Specifies the connection to the X server.<br/>
<div style="height: 1.00em;">
&#160;</div>
<br/>
device_id<br/>
       Specifies the id of the device to be opened<br/>
<div style="height: 1.00em;">
&#160;</div>
<br/>
device<br/>
       Specifies the device to be closed<br/>
</div>
<div class="section">
<h1>DESCRIPTION</h1><div style="margin-left: 4.00ex;">
<br/>
The XOpenDevice request makes an input device accessible to a<br/>
client through input extension protocol requests. If<br/>
successful, it returns a pointer to an XDevice structure.<br/>
</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
The XCloseDevice request makes an input device inaccessible to<br/>
a client through input extension protocol requests. Before<br/>
terminating, and client that has opened input devices through<br/>
the input extension should close them via CloseDevice.<br/>
</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
When a client makes an XCloseDevice request, any active grabs<br/>
that the client has on the device are released. Any event<br/>
selections that the client has are deleted, as well as any<br/>
passive grabs. If the requesting client is the last client<br/>
accessing the device, the server may disable all access by X to<br/>
the device.<br/>
</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
XOpenDevice and XCloseDevice can generate a BadDevice error.<br/>
</div>
<div style="height: 1.00em;">
&#160;</div>
Structures<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
The XDevice structure returned by XOpenDevice contains:<br/>
             typedef struct {<br/>
             XID device_id;<br/>
             int num_classes;<br/>
             XInputClassInfo *classes;<br/>
             } XDevice;<br/>
</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
The classes field is a pointer to an array of XInputClassInfo<br/>
structures. Each element of this array contains an event type<br/>
base for a class of input supported by the specified device.<br/>
The num_classes field indicates the number of elements in the<br/>
classes array.<br/>
</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
The XInputClassInfo structure contains:<br/>
</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
typedef struct {<br/>
    unsigned char input_class;<br/>
    unsigned char event_type_base;<br/>
} XInputClassInfo;<br/>
</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
The input_class field identifies one class of input supported<br/>
by the device. Defined types include KeyClass, ButtonClass,<br/>
ValuatorClass, ProximityClass, FeedbackClass, FocusClass, and<br/>
OtherClass. The event_type_base identifies the event type of<br/>
the first event in that class.<br/>
</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
The information contained in the XInputClassInfo structure is<br/>
used by macros to obtain the event classes that clients use in<br/>
making XSelectExtensionEvent requests. Currently defined macros<br/>
include DeviceKeyPress, DeviceKeyRelease, DeviceButtonPress,<br/>
DeviceButtonRelese, DeviceMotionNotify, DeviceFocusIn,<br/>
DeviceFocusOut, ProximityIn, ProximityOut, DeviceStateNotify,<br/>
DeviceMappingNotify, ChangeDeviceNotify,<br/>
DevicePointerMotionHint, DeviceButton1Motion,<br/>
DeviceButton2Motion, DeviceButton3Motion, DeviceButton4Motion,<br/>
DeviceButton5Motion, DeviceButtonMotion, DeviceOwnerGrabButton,<br/>
DeviceButtonPressGrab, and NoExtensionEvent.<br/>
</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
To obtain the proper event class for a particular device, one<br/>
of the above macros is invoked using the XDevice structure for<br/>
that device. For example,<br/>
             DeviceKeyPress (*device, type, eventclass);<br/>
</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
returns the DeviceKeyPress event type and the eventclass for<br/>
DeviceKeyPress events from the specified device.<br/>
</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
This eventclass can then be used in an XSelectExtensionEvent<br/>
request to ask the server to send DeviceKeyPress events from<br/>
this device. When a selected event is received via XNextEvent,<br/>
the type can be used for comparison with the type in the event.<br/>
</div>
</div>
<div class="section">
<h1>DIAGNOSTICS</h1><div style="margin-left: 4.00ex;">
<br/>
BadDevice<br/>
       An invalid device was specified. The specified device<br/>
       does not exist, or is the X keyboard or X pointer. This<br/>
       error may also occur if some other client has caused the<br/>
       specified device to become the X keyboard or X pointer<br/>
       device via the XChangeKeyboardDevice or<br/>
       XChangePointerDevice requests.<br/>
</div>
</div>
<table class="foot">
<tr>
<td class="foot-date">
03/09/2013</td>
<td class="foot-os">
&#160;</td>
</tr>
</table>
</div>
</body>
</html>

