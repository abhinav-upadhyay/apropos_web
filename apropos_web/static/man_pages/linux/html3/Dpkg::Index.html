<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/linux/style.css" type="text/css" media="all"/>
<title>
Dpkg::Index(3)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
Dpkg::Index(3)</td>
<td class="head-vol">
libdpkg-perl</td>
<td class="head-rtitle">
Dpkg::Index(3)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>NAME</h1> Dpkg::Index - generic index of control information</div>
<div class="section">
<h1>DESCRIPTION</h1> This object represent a set of Dpkg::Control objects.</div>
<div class="section">
<h1>FUNCTIONS</h1><dl>
<dt>
my $index = Dpkg::Index-&gt;new(%opts)</dt>
<dd>
Creates a new empty index. See <i>set_options()</i> for more details.</dd>
</dl>
<dl>
<dt>
$index-&gt;set_options(%opts)</dt>
<dd>
The &quot;type&quot; option is checked first to define default values for other options. Here are the relevant options: &quot;get_key_func&quot; is a function returning a key for the item passed in parameters. The index can only contain one item with a given key. The function used depend on the type: for CTRL_INFO_PKG, CTRL_INDEX_SRC, CTRL_INDEX_PKG and CTRL_PKG_DEB it's simply the Package field; for CTRL_PKG_SRC and CTRL_INFO_SRC, it's the Source field; for CTRL_CHANGELOG it's the Source and the Version fields (concatenated with an intermediary &quot;_&quot;); for CTRL_FILE_CHANGES it's the Source, Version and Architecture fields (concatenated with &quot;_&quot;); for CTRL_FILE_VENDOR it's the Vendor field; for CTRL_FILE_STATUS it's the Package and Architecture fields (concatenated with &quot;_&quot;). Otherwise it's the Package field by default.</dd>
</dl>
<dl>
<dt>
$index-&gt;<i>get_type()</i></dt>
<dd>
Returns the type of control information stored. See the type parameter set during  <i>new()</i>.</dd>
</dl>
<dl>
<dt>
$index-&gt;add($item, [$key])</dt>
<dd>
Add a new item in the index. If the $key parameter is omitted, the key will be generated with the get_key_func function (see  <i>set_options()</i> for details).</dd>
</dl>
<dl>
<dt>
$index-&gt;load($file)</dt>
<dd>
Reads the file and creates all items parsed. Returns the number of items parsed. Handles compressed files transparently based on their extensions.</dd>
</dl>
<dl>
<dt>
$index-&gt;parse($fh, $desc)</dt>
<dd>
Reads the filehandle and creates all items parsed. Returns the number of items parsed.</dd>
</dl>
<dl>
<dt>
$index-&gt;save($file)</dt>
<dd>
Writes the content of the index in a file. Auto-compresses files based on their extensions.</dd>
</dl>
<dl>
<dt>
my $item = $index-&gt;<i>new_item()</i></dt>
<dd>
Creates a new item. Mainly useful for derived objects that would want to override this method to return something else than a Dpkg::Control object.</dd>
</dl>
<dl>
<dt>
my $item = $index-&gt;get_by_key($key)</dt>
<dd>
Returns the item identified by $key or undef.</dd>
</dl>
<dl>
<dt>
my @keys = $index-&gt;get_keys(%criteria)</dt>
<dd>
Returns the keys of items that matches all the criteria. The key of the %criteria hash is a field name and the value is either a regexp that needs to match the field value, or a reference to a function that must return true and that receives the field value as single parameter, or a scalar that must be equal to the field value.</dd>
</dl>
<dl>
<dt>
my @items = $index-&gt;get(%criteria)</dt>
<dd>
Returns all the items that matches all the criteria.</dd>
</dl>
<dl>
<dt>
$index-&gt;remove_by_key($key)</dt>
<dd>
Remove the item identified by the given key.</dd>
</dl>
<dl>
<dt>
my @items = $index-&gt;remove(%criteria)</dt>
<dd>
Returns and removes all the items that matches all the criteria.</dd>
</dl>
<dl>
<dt>
$index-&gt;merge($other_index, %opts)</dt>
<dd>
Merge the entries of the other index. While merging, the keys of the merged index are used, they are not re-computed (unless you have set the options &quot;keep_keys&quot; to &quot;0&quot;). It's your responsibility to ensure that they have been computed with the same function.</dd>
</dl>
<dl>
<dt>
$index-&gt;sort(\&amp;sortfunc)</dt>
<dd>
Sort the index with the given sort function. If no function is given, an alphabetic sort is done based on the keys. The sort function receives the items themselves as parameters and not the keys.</dd>
</dl>
<dl>
<dt>
my $str = $index-&gt;<i>output()</i></dt>
<dd>
</dd>
</dl>
<dl>
<dt>
&quot;$index&quot;</dt>
<dd>
Get a string representation of the index. The Dpkg::Control objects are output in the order which they have been read or added except if the order hae been changed with  <i>sort()</i>.</dd>
</dl>
<dl>
<dt>
$index-&gt;output($fh)</dt>
<dd>
Print the string representation of the index to a filehandle.</dd>
</dl>
</div>
<div class="section">
<h1>AUTHOR</h1> Rapha&#235;l Hertzog &lt;hertzog@debian.org&gt;.</div>
<table class="foot">
<tr>
<td class="foot-date">
2010-05-20</td>
<td class="foot-os">
1.16.1.2</td>
</tr>
</table>
</div>
</body>
</html>

