<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/linux/style.css" type="text/css" media="all"/>
<title>
XAddConnectionWatch(3)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
XAddConnectionWatch(3)</td>
<td class="head-vol">
XLIB FUNCTIONS</td>
<td class="head-rtitle">
XAddConnectionWatch(3)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>NAME</h1> XAddConnectionWatch, XRemoveConnectionWatch, XProcessInternalConnection, XInternalConnectionNumbers - handle Xlib internal connections</div>
<div class="section">
<h1>SYNTAX</h1><div style="margin-left: 5.00ex;text-indent: -5.00ex;" class="spacer">
typedef void (*XConnectionWatchProc)(Display *<i>display</i>, XPointer  <i>client_data</i>, int <i>fd</i>, Bool <i>opening</i>, XPointer * <i>watch_data</i>);</div>
<div class="spacer">
</div>
<div style="margin-left: 5.00ex;text-indent: -5.00ex;" class="spacer">
Status XAddConnectionWatch(Display *<i>display</i>, XWatchProc  <i>procedure</i>, XPointer <i>client_data</i>);</div>
<div class="spacer">
</div>
<div style="margin-left: 5.00ex;text-indent: -5.00ex;" class="spacer">
Status XRemoveConnectionWatch(Display *<i>display</i>, XWatchProc  <i>procedure</i>, XPointer <i>client_data</i>);</div>
<div class="spacer">
</div>
<div style="margin-left: 5.00ex;text-indent: -5.00ex;" class="spacer">
void XProcessInternalConnection(Display *<i>display</i>, int <i>fd</i>);</div>
<div class="spacer">
</div>
<div style="margin-left: 5.00ex;text-indent: -5.00ex;" class="spacer">
Status XInternalConnectionNumbers(Display *<i>display</i>, int ** <i>fd_return</i>, int *<i>count_return</i>);</div>
</div>
<div class="section">
<h1>ARGUMENTS</h1><dl>
<dt>
<i>client_data</i></dt>
<dd>
Specifies the additional client data.</dd>
</dl>
<dl>
<dt>
<i>count_return</i></dt>
<dd>
Returns the number of file descriptors.</dd>
</dl>
<dl>
<dt>
<i>display</i></dt>
<dd>
Specifies the connection to the X server.</dd>
</dl>
<dl>
<dt>
<i>fd</i></dt>
<dd>
Specifies the file descriptor.</dd>
</dl>
<dl>
<dt>
<i>fd_return</i></dt>
<dd>
Returns the file descriptors.</dd>
</dl>
<dl>
<dt>
<i>procedure</i></dt>
<dd>
Specifies the procedure to be called.</dd>
</dl>
</div>
<div class="section">
<h1>DESCRIPTION</h1> The  <i>XAddConnectionWatch</i> function registers a procedure to be called each time Xlib opens or closes an internal connection for the specified display.  The procedure is passed the display, the specified client_data, the file descriptor for the connection, a Boolean indicating whether the connection is being opened or closed, and a pointer to a location for private watch data.  If opening is  <i>True</i>, the procedure can store a pointer to private data in the location pointed to by watch_data; when the procedure is later called for this same connection and opening is  <i>False</i>, the location pointed to by watch_data will hold this same private data pointer.<div class="spacer">
</div>
This function can be called at any time after a display is opened. If internal connections already exist, the registered procedure will immediately be called for each of them, before  <i>XAddConnectionWatch</i> returns.  <i>XAddConnectionWatch</i> returns a nonzero status if the procedure is successfully registered; otherwise, it returns zero.<div class="spacer">
</div>
The registered procedure should not call any Xlib functions. If the procedure directly or indirectly causes the state of internal connections or watch procedures to change, the result is not defined. If Xlib has been initialized for threads, the procedure is called with the display locked and the result of a call by the procedure to any Xlib function that locks the display is not defined unless the executing thread has externally locked the display using  <i>XLockDisplay</i>.<div class="spacer">
</div>
The  <i>XRemoveConnectionWatch</i> function removes a previously registered connection watch procedure. The client_data must match the client_data used when the procedure was initially registered.<div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
The  <i>XProcessInternalConnection</i> function processes input available on an internal connection. This function should be called for an internal connection only after an operating system facility (for example,  <i>select</i> or  <i>poll</i>) has indicated that input is available; otherwise, the effect is not defined.<div class="spacer">
</div>
The  <i>XInternalConnectionNumbers</i> function returns a list of the file descriptors for all internal connections currently open for the specified display. When the allocated list is no longer needed, free it by using  <i>XFree</i>. This functions returns a nonzero status if the list is successfully allocated; otherwise, it returns zero.</div>
<div class="section">
<h1>SEE ALSO</h1>  <i>Xlib - C Language X Interface</i></div>
<table class="foot">
<tr>
<td class="foot-date">
libX11 1.4.99.1</td>
<td class="foot-os">
X Version 11</td>
</tr>
</table>
</div>
</body>
</html>

