<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/linux/style.css" type="text/css" media="all"/>
<title>
XShm(3)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
XShm(3)</td>
<td class="head-vol">
X FUNCTIONS</td>
<td class="head-rtitle">
XShm(3)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>NAME</h1> XShmQueryExtension, XShmQueryVersion, XShmPixmapFormat, XShmAttach, XShmDetach XShmCreateImage, XShmPutImage, XShmGetImage, XShmCreatePixmap, XShmGetEventBase - X Shared Memory extension functions</div>
<div class="section">
<h1>SYNTAX</h1><div class="spacer">
</div>
#include &lt;X11/Xlib.h&gt;<br/>
#include &lt;sys/ipc.h&gt;<br/>
#include &lt;sys/shm.h&gt;<br/>
#include &lt;X11/extensions/XShm.h&gt;<div class="spacer">
</div>
Bool	XShmQueryExtension(<br/>
	Display *display);<div class="spacer">
</div>
Bool XShmQueryVersion(<br/>
	Display *display;<br/>
	int *major, *minor;<br/>
	Bool *pixmaps);<div class="spacer">
</div>
int XShmPixmapFormat(<br/>
	Display *display);<div class="spacer">
</div>
Bool XShmAttach(<br/>
	Display *display;<br/>
	XShmSegmentInfo *shminfo);<div class="spacer">
</div>
Bool XShmDetach(<br/>
	Display *display;<br/>
	XShmSegmentInfo *shminfo);<div class="spacer">
</div>
<div class="spacer">
</div>
XImage *XShmCreateImage (<br/>
	Display *display;<br/>
	Visual *visual;<br/>
	unsigned int depth;<br/>
	int format;<br/>
	char *data;<br/>
	XShmSegmentInfo *shminfo;<br/>
	unsigned int width, height);<div class="spacer">
</div>
Bool XShmPutImage(<br/>
	Display *display;<br/>
	Drawable d;<br/>
	GC gc;<br/>
	XImage *image;<br/>
	int src_x, src_y, dest_x, dest_y;<br/>
	unsigned int width, height;<br/>
	bool send_event);<div class="spacer">
</div>
Bool XShmGetImage (<br/>
	Display *display;<br/>
	Drawable d;<br/>
	XImage *image;<br/>
	int x, y;<br/>
	unsigned long plane_mask);<div class="spacer">
</div>
Pixmap XShmCreatePixmap(<br/>
        Display *display;<br/>
        Drawable d;<br/>
        char *data;<br/>
	XShmSegmentInfo *shminfo;<br/>
	unsigned int width, height, depth);<div class="spacer">
</div>
Status XShmGetEventBase(<br/>
	Display *display);<div class="spacer">
</div>
<div class="spacer">
</div>
<br/>
</div>
<div class="section">
<h1>STRUCTURES</h1><br/>
<i>Events:</i><br/>
typedef struct {<br/>
    int type;               /* of event */<br/>
    unsigned long serial;   /* # of last request processed by server*/<br/>
    Bool send_event;        /* true if this came from a SendEvent request*/<br/>
    Display *display;       /* Display the event was read from */<br/>
    Drawable drawable;      /* drawable of request */<br/>
    int major_code;         /* ShmReqCode */<br/>
    int minor_code;         /* X_ShmPutImage */<br/>
    ShmSeg shmseg;          /* the ShmSeg used in the request*/<br/>
    unsigned long offset;   /* the offset into ShmSeg used in the request*/<br/>
} XShmCompletionEvent;<div class="spacer">
</div>
<i>a structure of type XShmSegmentInfo :</i><div class="spacer">
</div>
<br/>
typedef struct {<br/>
    ShmSeg shmseg;      /* resource id */<br/>
    int shmid;          /* kernel id */<br/>
    char *shmaddr;      /* address in client */<br/>
    Bool readOnly;      /* how the server should attach it */<br/>
} XShmSegmentInfo;<div class="spacer">
</div>
</div>
<div class="section">
<h1>DESCRIPTION</h1>  <i>XShmQueryExtension</i> checks to see if the shared memory extensions are available for the specified display.<div class="spacer">
</div>
<i>XShmQueryVersion</i> returns the version numbers of the extension implementation. Shared memory pixmaps are supported if the pixmaps argument returns true.<div class="spacer">
</div>
<i>XShmAttach</i> tells the server to attach to your shared memory segment. If all goes well, you will get a non-zero status, back and your XImage is ready for use.<div class="spacer">
</div>
<i>XShmDetach</i> tells the server to detach from your shared memory segment.<div class="spacer">
</div>
<i>XShmPutImage</i> combines an image in memory with a shape of the specified drawable. If XYBitmap format is used, the depth must be one, or a ``BadMatch'' error results. The foreground pixel in the GC defines the source for the one bits in the image, and the background pixel defines the source for the zero bits. For XYPixmap and ZPixmap, the depth must match the depth of the drawable, or a ``BadMatch'' error results.<div class="spacer">
</div>
<i>XShmGetImage</i> reads image data into a shared memory XImage where display is the display of interest, drawable is the source drawable, image is the destination XImage, x and y are offsets within the drawable, and plane_mask defines which planes are to be read.<div class="spacer">
</div>
<i>XShmCreateImage</i> allocates the memory needed for an XImage structure for the specified display but does not allocate space for the image itself.<div class="spacer">
</div>
<i>XShmPixmapFormat</i> gets the format for the server. If your application can deal with the server pixmap data format, a shared memory segment and shminfo structure are created.<div class="spacer">
</div>
<i>XShmCreatePixmap</i> points to a pixmap which you can manipulate in all of the usual ways, with the added bonus of being able to edit its contents directly through the shared memory segment.<div class="spacer">
</div>
<i>XShmGetEventBase</i> gets the completion event value.</div>
<div class="section">
<h1>SEE ALSO</h1>  <i>MIT-SHM - The MIT Shared Memory Extension </i></div>
<table class="foot">
<tr>
<td class="foot-date">
libXext 1.3.0</td>
<td class="foot-os">
X Version 11</td>
</tr>
</table>
</div>
</body>
</html>

