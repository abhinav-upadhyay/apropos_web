<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/linux/style.css" type="text/css" media="all"/>
<title>
XkbKeyTypesForCoreSymbols(3)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
XkbKeyTypesForCoreSymbols(3)</td>
<td class="head-vol">
XKB FUNCTIONS</td>
<td class="head-rtitle">
XkbKeyTypesForCoreSymbols(3)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>NAME</h1> XkbKeyTypesForCoreSymbols - Determine the Xkb key types appropriate for the symbols bound to a key in a core keyboard mapping</div>
<div class="section">
<h1>SYNOPSIS</h1><div style="margin-left: 5.00ex;text-indent: -5.00ex;" class="spacer">
<b>int XkbKeyTypesForCoreSymbols</b> <b>(XkbDescPtr </b><i>xkb</i><b>,</b> <b>int </b><i>map_width</i><b>,</b> <b>KeySym *</b><i>core_syms</i><b>,</b> <b>unsigned int </b><i>protected</i><b>,</b> <b>int *</b><i>types_inout</i><b>,</b> <b>KeySym *</b><i>xkb_syms_rtrn</i><b>);</b></div>
</div>
<div class="section">
<h1>ARGUMENTS</h1><dl>
<dt>
<i>- xkb</i></dt>
<dd>
keyboard description in which to place symbols</dd>
</dl>
<dl>
<dt>
<i>- map_width</i></dt>
<dd>
width of core protocol keymap in xkb_syms_rtrn</dd>
</dl>
<dl>
<dt>
<i>- core_syms</i></dt>
<dd>
core protocol format array of KeySyms</dd>
</dl>
<dl>
<dt>
<i>- protected</i></dt>
<dd>
explicit key types</dd>
</dl>
<dl>
<dt>
<i>- types_inout</i></dt>
<dd>
backfilled with the canonical types bound to groups one and two for the key</dd>
</dl>
<dl>
<dt>
<i>- xkb_syms_rtrn</i></dt>
<dd>
backfilled with symbols bound to the key in the Xkb mapping</dd>
</dl>
</div>
<div class="section">
<h1>DESCRIPTION</h1> <i>XkbKeyTypesForCoreSymbols</i> expands the symbols in <i>core_syms</i> and types in <i>types_inout,</i> then chooses canonical key types (canonical key types are defined The Canonical Key Types) for groups 1 and 2 using the rules specified by the Xkb protocol and places them in xkb_syms_rtrn, which will be non-NULL.<div style="height: 1.00em;">
&#160;</div>
<b>The Canonical Key Types</b><div style="height: 1.00em;">
&#160;</div>
Xkb allows up to XkbMaxKeyTypes (255) key types to be defined, but requires at least XkbNumRequiredTypes (4) predefined types to be in a key map. These predefined key types are referred to as the canonical key types and describe the types of keys available on most keyboards. The definitions for the canonical key types are held in the first XkbNumRequiredTypes entries of the <i>types</i> field of the client map and are indexed using the following constants:<div class="spacer">
</div>
<br/>
    XkbOneLevelIndex<br/>
    XkbTwoLevelIndex<br/>
    XkbAlphabeticIndex<br/>
    XkbKeypadIndex<br/>
    <br/>
<div style="height: 1.00em;">
&#160;</div>
ONE_LEVEL<div style="height: 1.00em;">
&#160;</div>
The ONE_LEVEL key type describes groups that have only one symbol. The default ONE_LEVEL key type has no map entries and does not pay attention to any modifiers. A symbolic representation of this key type could look like the following:<div class="spacer">
</div>
<br/>
    type &quot;ONE_LEVEL&quot; {<br/>
         modifiers = None;<br/>
         map[None]= Level1;<br/>
         level_name[Level1]= &quot;Any&quot;;<br/>
    };<br/>
    <br/>
The description of the ONE_LEVEL key type is stored in the types[XkbOneLevelIndex] entry of the client key map.<div style="height: 1.00em;">
&#160;</div>
TWO_LEVEL<div style="height: 1.00em;">
&#160;</div>
The TWO_LEVEL key type describes groups that consist of two symbols but are neither alphabetic nor numeric keypad keys. The default TWO_LEVEL type uses only the Shift modifier. It returns shift level two if Shift is set, and level one if it is not. A symbolic representation of this key type could look like the following:<div class="spacer">
</div>
<br/>
    type &quot;TWO_LEVEL&quot; {<br/>
        modifiers = Shift;<br/>
        map[Shift]= Level2;<br/>
        level_name[Level1]= &quot;Base&quot;;<br/>
        level_name[Level2]= &quot;Shift&quot;;<br/>
    };<br/>
    <br/>
<div style="height: 1.00em;">
&#160;</div>
The description of the TWO_LEVEL key type is stored in the types[XkbTwoLevelIndex] entry of the client key map.<div style="height: 1.00em;">
&#160;</div>
ALPHABETIC<div style="height: 1.00em;">
&#160;</div>
The ALPHABETIC key type describes groups consisting of two symbols: the lowercase form of a symbol followed by the uppercase form of the same symbol. The default ALPHABETIC type implements locale-sensitive &quot;Shift cancels CapsLock&quot; behavior using both the Shift and Lock modifiers as follows:<div style="height: 1.00em;">
&#160;</div>
<dl>
<dt>
&#8226;</dt>
<dd>
If Shift and Lock are both set, the default ALPHABETIC type yields level one.</dd>
</dl>
<dl>
<dt>
&#8226;</dt>
<dd>
If Shift alone is set, it yields level two.</dd>
</dl>
<dl>
<dt>
&#8226;</dt>
<dd>
If Lock alone is set, it yields level one, but preserves the Lock modifier so Xlib notices and applies the appropriate capitalization rules. The Xlib functions are locale-sensitive and apply different capitalization rules for different locales.</dd>
</dl>
<dl>
<dt>
&#8226;</dt>
<dd>
If neither Shift nor Lock is set, it yields level one.<div style="height: 1.00em;">
&#160;</div>
A symbolic representation of this key type could look like the following:<div class="spacer">
</div>
<br/>
    type &quot;ALPHABETIC&quot; {<br/>
        modifiers = Shift+Lock;<br/>
        map[Shift]= Level2;<br/>
        preserve[Lock]= Lock;<br/>
        level_name[Level1]= &quot;Base&quot;;<br/>
        level_name[Level2]= &quot;Caps&quot;;<br/>
    };<br/>
    <br/>
The description of the ALPHABETIC key type is stored in the types[XkbAlphabeticIndex] entry of the client key map.<div style="height: 1.00em;">
&#160;</div>
KEYPAD<div style="height: 1.00em;">
&#160;</div>
The KEYPAD key type describes groups that consist of two symbols, at least one of which is a numeric keypad symbol. The numeric keypad symbol is assumed to reside at level two. The default KEYPAD key type implements &quot;Shift cancels NumLock&quot; behavior using the Shift modifier and the real modifier bound to the virtual modifier named &quot;NumLock,&quot; known as the NumLock modifier, as follows:<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
&#8226;</dt>
<dd>
If Shift and NumLock are both set, the default KEYPAD type yields level one.</dd>
</dl>
<dl>
<dt>
&#8226;</dt>
<dd>
If Shift alone is set, it yields level two.</dd>
</dl>
<dl>
<dt>
&#8226;</dt>
<dd>
If NumLock alone is set, it yields level two.</dd>
</dl>
<dl>
<dt>
&#8226;</dt>
<dd>
If neither Shift nor NumLock is set, it yields level one.<div style="height: 1.00em;">
&#160;</div>
A symbolic representation of this key type could look like the following:<div class="spacer">
</div>
<br/>
    type &quot;KEYPAD&quot; {<br/>
        modifiers = Shift+NumLock;<br/>
        map[None]= Level1;<br/>
        map[Shift]= Level2;<br/>
        map[NumLock]= Level2;<br/>
        map[Shift+NumLock]= Level1;<br/>
        level_name[Level1]= &quot;Base&quot;;<br/>
        level_name[Level2]= &quot;Caps&quot;;<br/>
    };<br/>
    <br/>
The description of the KEYPAD key type is stored in the types[XkbKeypadIndex] entry of the client key map.<div style="height: 1.00em;">
&#160;</div>
A core keymap is a two-dimensional array of keysyms. It has <i>map_width</i> columns and <i>max_key_code</i> rows. <i>XkbKeyTypesForCoreSymbols</i> takes a single row from a core keymap, determines the number of groups associated with it, the type of each group, and the symbols bound to each group. The return value is the number of groups, <i>types_inout</i> has the types for each group, and <i>xkb_syms_rtrn</i> has the symbols in Xkb order (that is, groups are contiguous, regardless of size).<div style="height: 1.00em;">
&#160;</div>
<i>protected</i> contains the explicitly protected key types. There is one  explicit override control associated with each of the four possible groups for each Xkb key, ExplicitKeyType1 through ExplicitKeyType4; <i>protected</i> is an inclusive OR of these controls. <i>map_width</i> is the width of the core keymap and is not dependent on any Xkb definitions. <i>types_inout</i> is an array of four type indices. On input, <i>types_inout</i> contains the indices of any types already assigned to the key, in case they are explicitly protected from change.<div style="height: 1.00em;">
&#160;</div>
Upon return, <i>types_inout</i> contains any automatically selected (that is, canonical) types plus any protected types. Canonical types are assigned to all four groups if there are enough symbols to do so. The four entries in <i>types_inout</i> correspond to the four groups for the key in question.</dd>
</dl>
</div>
<table class="foot">
<tr>
<td class="foot-date">
libX11 1.4.99.1</td>
<td class="foot-os">
X Version 11</td>
</tr>
</table>
</div>
</body>
</html>

