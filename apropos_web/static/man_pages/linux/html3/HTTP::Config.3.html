<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/linux/style.css" type="text/css" media="all"/>
<title>
HTTP::Config(3pm)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
HTTP::Config(3pm)</td>
<td class="head-vol">
User Contributed Perl Documentation</td>
<td class="head-rtitle">
HTTP::Config(3pm)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>NAME</h1> HTTP::Config - Configuration for request and response objects</div>
<div class="section">
<h1>SYNOPSIS</h1><br/>
 use HTTP::Config;<br/>
 my $c = HTTP::Config-&gt;new;<br/>
 $c-&gt;add(m_domain =&gt; &quot;.example.com&quot;, m_scheme =&gt; &quot;http&quot;, verbose =&gt; 1);<br/>
 <br/>
 use HTTP::Request;<br/>
 my $request = HTTP::Request-&gt;new(GET =&gt; &quot;http://www.example.com&quot;);<br/>
 <br/>
 if (my @m = $c-&gt;matching($request)) {<br/>
    print &quot;Yadayada\n&quot; if $m[0]-&gt;{verbose};<br/>
 }<br/>
</div>
<div class="section">
<h1>DESCRIPTION</h1> An &quot;HTTP::Config&quot; object is a list of entries that can be matched against request or request/response pairs.  Its purpose is to hold configuration data that can be looked up given a request or response object.<div class="spacer">
</div>
Each configuration entry is a hash.  Some keys specify matching to occur against attributes of request/response objects.  Other keys can be used to hold user data.<div class="spacer">
</div>
The following methods are provided:<dl>
<dt>
$conf = HTTP::Config-&gt;new</dt>
<dd>
Constructs a new empty &quot;HTTP::Config&quot; object and returns it.</dd>
</dl>
<dl>
<dt>
$conf-&gt;entries</dt>
<dd>
Returns the list of entries in the configuration object. In scalar context returns the number of entries.</dd>
</dl>
<dl>
<dt>
$conf-&gt;empty</dt>
<dd>
Return true if there are no entries in the configuration object. This is just a shorthand for &quot;not $conf-&gt;entries&quot;.</dd>
</dl>
<dl>
<dt>
$conf-&gt;add( %matchspec, %other )</dt>
<dd>
</dd>
</dl>
<dl>
<dt>
$conf-&gt;add( \%entry )</dt>
<dd>
Adds a new entry to the configuration. You can either pass separate key/value pairs or a hash reference.</dd>
</dl>
<dl>
<dt>
$conf-&gt;remove( %spec )</dt>
<dd>
Removes (and returns) the entries that have matches for all the key/value pairs in %spec. If %spec is empty this will match all entries; so it will empty the configuation object.</dd>
</dl>
<dl>
<dt>
$conf-&gt;matching( $uri, $request, $response )</dt>
<dd>
</dd>
</dl>
<dl>
<dt>
$conf-&gt;matching( $uri )</dt>
<dd>
</dd>
</dl>
<dl>
<dt>
$conf-&gt;matching( $request )</dt>
<dd>
</dd>
</dl>
<dl>
<dt>
$conf-&gt;matching( $response )</dt>
<dd>
Returns the entries that match the given $uri, $request and $response triplet.<div style="height: 1.00em;">
&#160;</div>
If called with a single $request object then the $uri is obtained by calling its 'uri_canonical' method. If called with a single $response object, then the request object is obtained by calling its 'request' method; and then the $uri is obtained as if a single $request was provided.<div style="height: 1.00em;">
&#160;</div>
The entries are returned with the most specific matches first. In scalar context returns the most specific match or &quot;undef&quot; in none match.</dd>
</dl>
<dl>
<dt>
$conf-&gt;add_item( $item, %matchspec )</dt>
<dd>
</dd>
</dl>
<dl>
<dt>
$conf-&gt;remove_items( %spec )</dt>
<dd>
</dd>
</dl>
<dl>
<dt>
$conf-&gt;matching_items( $uri, $request, $response )</dt>
<dd>
Wrappers that hides the entries themselves.</dd>
</dl>
<div class="subsection">
<h2>Matching</h2> The following keys on a configuration entry specify matching.  For all of these you can provide an array of values instead of a single value. The entry matches if at least one of the values in the array matches.<div class="spacer">
</div>
Entries that require match against a response object attribute will never match unless a response object was provided.<dl>
<dt>
m_scheme =&gt; $scheme</dt>
<dd>
Matches if the URI uses the specified scheme; e.g. &quot;http&quot;.</dd>
</dl>
<dl>
<dt>
m_secure =&gt; $bool</dt>
<dd>
If $bool is TRUE; matches if the URI uses a secure scheme.  If $bool is FALSE; matches if the URI does not use a secure scheme.  An example of a secure scheme is &quot;https&quot;.</dd>
</dl>
<dl>
<dt>
m_host_port =&gt; &quot;$hostname:$port&quot;</dt>
<dd>
Matches if the URI's host_port method return the specified value.</dd>
</dl>
<dl>
<dt>
m_host =&gt; $hostname</dt>
<dd>
Matches if the URI's host method returns the specified value.</dd>
</dl>
<dl>
<dt>
m_port =&gt; $port</dt>
<dd>
Matches if the URI's port method returns the specified value.</dd>
</dl>
<dl>
<dt>
m_domain =&gt; &quot;.$domain&quot;</dt>
<dd>
Matches if the URI's host method return a value that within the given domain.  The hostname &quot;www.example.com&quot; will for instance match the domain &quot;.com&quot;.</dd>
</dl>
<dl>
<dt>
m_path =&gt; $path</dt>
<dd>
Matches if the URI's path method returns the specified value.</dd>
</dl>
<dl>
<dt>
m_path_prefix =&gt; $path</dt>
<dd>
Matches if the URI's path is the specified path or has the specified path as prefix.</dd>
</dl>
<dl>
<dt>
m_path_match =&gt; $Regexp</dt>
<dd>
Matches if the regular expression matches the URI's path.  Eg. qr/\.html$/.</dd>
</dl>
<dl>
<dt>
m_method =&gt; $method</dt>
<dd>
Matches if the request method matches the specified value. Eg. &quot;GET&quot; or &quot;POST&quot;.</dd>
</dl>
<dl>
<dt>
m_code =&gt; $digit</dt>
<dd>
</dd>
</dl>
<dl>
<dt>
m_code =&gt; $status_code</dt>
<dd>
Matches if the response status code matches.  If a single digit is specified; matches for all response status codes beginning with that digit.</dd>
</dl>
<dl>
<dt>
m_proxy =&gt; $url</dt>
<dd>
Matches if the request is to be sent to the given Proxy server.</dd>
</dl>
<dl>
<dt>
m_media_type =&gt; &quot;*/*&quot;</dt>
<dd>
</dd>
</dl>
<dl>
<dt>
m_media_type =&gt; &quot;text/*&quot;</dt>
<dd>
</dd>
</dl>
<dl>
<dt>
m_media_type =&gt; &quot;html&quot;</dt>
<dd>
</dd>
</dl>
<dl>
<dt>
m_media_type =&gt; &quot;xhtml&quot;</dt>
<dd>
</dd>
</dl>
<dl>
<dt>
m_media_type =&gt; &quot;text/html&quot;</dt>
<dd>
Matches if the response media type matches.<div style="height: 1.00em;">
&#160;</div>
With a value of &quot;html&quot; matches if $response-&gt;content_is_html returns TRUE. With a value of &quot;xhtml&quot; matches if $response-&gt;content_is_xhtml returns TRUE.</dd>
</dl>
<dl>
<dt>
m_uri__<i></i><i>$method</i><i></i> =&gt; undef</dt>
<dd>
Matches if the URI object provides the method.</dd>
</dl>
<dl>
<dt>
m_uri__<i></i><i>$method</i><i></i> =&gt; $string</dt>
<dd>
Matches if the URI's $method method returns the given value.</dd>
</dl>
<dl>
<dt>
m_header__<i></i><i>$field</i><i></i> =&gt; $string</dt>
<dd>
Matches if either the request or the response have a header $field with the given value.</dd>
</dl>
<dl>
<dt>
m_response_attr__<i></i><i>$key</i><i></i> =&gt; undef</dt>
<dd>
</dd>
</dl>
<dl>
<dt>
m_response_attr__<i></i><i>$key</i><i></i> =&gt; $string</dt>
<dd>
Matches if the response object has that key, or the entry has the given value.</dd>
</dl>
</div>
</div>
<div class="section">
<h1>SEE ALSO</h1> URI, HTTP::Request, HTTP::Response</div>
<div class="section">
<h1>COPYRIGHT</h1> Copyright 2008, Gisle Aas<div class="spacer">
</div>
This library is free software; you can redistribute it and/or modify it under the same terms as Perl itself.</div>
<table class="foot">
<tr>
<td class="foot-date">
2011-03-07</td>
<td class="foot-os">
perl v5.12.3</td>
</tr>
</table>
</div>
</body>
</html>

