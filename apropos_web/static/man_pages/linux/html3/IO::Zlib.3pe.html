<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/linux/style.css" type="text/css" media="all"/>
<title>
IO::Zlib(3perl)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
IO::Zlib(3perl)</td>
<td class="head-vol">
Perl Programmers Reference Guide</td>
<td class="head-rtitle">
IO::Zlib(3perl)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>NAME</h1> IO::Zlib - IO:: style interface to Compress::Zlib</div>
<div class="section">
<h1>SYNOPSIS</h1> With any version of Perl 5 you can use the basic OO interface:<div class="spacer">
</div>
<br/>
    use IO::Zlib;<br/>
<br/>
    $fh = new IO::Zlib;<br/>
    if ($fh-&gt;open(&quot;file.gz&quot;, &quot;rb&quot;)) {<br/>
        print &lt;$fh&gt;;<br/>
        $fh-&gt;close;<br/>
    }<br/>
<br/>
    $fh = IO::Zlib-&gt;new(&quot;file.gz&quot;, &quot;wb9&quot;);<br/>
    if (defined $fh) {<br/>
        print $fh &quot;bar\n&quot;;<br/>
        $fh-&gt;close;<br/>
    }<br/>
<br/>
    $fh = IO::Zlib-&gt;new(&quot;file.gz&quot;, &quot;rb&quot;);<br/>
    if (defined $fh) {<br/>
        print &lt;$fh&gt;;<br/>
        undef $fh;       # automatically closes the file<br/>
    }<br/>
<div class="spacer">
</div>
With Perl 5.004 you can also use the TIEHANDLE interface to access compressed files just like ordinary files:<div class="spacer">
</div>
<br/>
    use IO::Zlib;<br/>
<br/>
    tie *FILE, 'IO::Zlib', &quot;file.gz&quot;, &quot;wb&quot;;<br/>
    print FILE &quot;line 1\nline2\n&quot;;<br/>
<br/>
    tie *FILE, 'IO::Zlib', &quot;file.gz&quot;, &quot;rb&quot;;<br/>
    while (&lt;FILE&gt;) { print &quot;LINE: &quot;, $_ };<br/>
</div>
<div class="section">
<h1>DESCRIPTION</h1> &quot;IO::Zlib&quot; provides an IO:: style interface to Compress::Zlib and hence to gzip/zlib compressed files. It provides many of the same methods as the IO::Handle interface.<div class="spacer">
</div>
Starting from IO::Zlib version 1.02, IO::Zlib can also use an external  <i>gzip</i> command.  The default behaviour is to try to use an external  <i>gzip</i> if no &quot;Compress::Zlib&quot; can be loaded, unless explicitly disabled by<div class="spacer">
</div>
<br/>
    use IO::Zlib qw(:gzip_external 0);<br/>
<div class="spacer">
</div>
If explicitly enabled by<div class="spacer">
</div>
<br/>
    use IO::Zlib qw(:gzip_external 1);<br/>
<div class="spacer">
</div>
then the external <i>gzip</i> is used <b>instead</b> of &quot;Compress::Zlib&quot;.</div>
<div class="section">
<h1>CONSTRUCTOR</h1><dl>
<dt>
new ( [ARGS] )</dt>
<dd>
Creates an &quot;IO::Zlib&quot; object. If it receives any parameters, they are passed to the method &quot;open&quot;; if the open fails, the object is destroyed. Otherwise, it is returned to the caller.</dd>
</dl>
</div>
<div class="section">
<h1>OBJECT METHODS</h1><dl>
<dt>
open ( FILENAME, MODE )</dt>
<dd>
&quot;open&quot; takes two arguments. The first is the name of the file to open and the second is the open mode. The mode can be anything acceptable to Compress::Zlib and by extension anything acceptable to  <i>zlib</i> (that basically means POSIX  <i>fopen()</i> style mode strings plus an optional number to indicate the compression level).</dd>
</dl>
<dl>
<dt>
opened</dt>
<dd>
Returns true if the object currently refers to a opened file.</dd>
</dl>
<dl>
<dt>
close</dt>
<dd>
Close the file associated with the object and disassociate the file from the handle. Done automatically on destroy.</dd>
</dl>
<dl>
<dt>
getc</dt>
<dd>
Return the next character from the file, or undef if none remain.</dd>
</dl>
<dl>
<dt>
getline</dt>
<dd>
Return the next line from the file, or undef on end of string. Can safely be called in an array context. Currently ignores $/ ($INPUT_RECORD_SEPARATOR or $RS when English is in use) and treats lines as delimited by &quot;\n&quot;.</dd>
</dl>
<dl>
<dt>
getlines</dt>
<dd>
Get all remaining lines from the file. It will  <i>croak()</i> if accidentally called in a scalar context.</dd>
</dl>
<dl>
<dt>
print ( ARGS... )</dt>
<dd>
Print ARGS to the  file.</dd>
</dl>
<dl>
<dt>
read ( BUF, NBYTES, [OFFSET] )</dt>
<dd>
Read some bytes from the file. Returns the number of bytes actually read, 0 on end-of-file, undef on error.</dd>
</dl>
<dl>
<dt>
eof</dt>
<dd>
Returns true if the handle is currently positioned at end of file?</dd>
</dl>
<dl>
<dt>
seek ( OFFSET, WHENCE )</dt>
<dd>
Seek to a given position in the stream. Not yet supported.</dd>
</dl>
<dl>
<dt>
tell</dt>
<dd>
Return the current position in the stream, as a numeric offset. Not yet supported.</dd>
</dl>
<dl>
<dt>
setpos ( POS )</dt>
<dd>
Set the current position, using the opaque value returned by &quot;getpos()&quot;. Not yet supported.</dd>
</dl>
<dl>
<dt>
getpos ( POS )</dt>
<dd>
Return the current position in the string, as an opaque object. Not yet supported.</dd>
</dl>
</div>
<div class="section">
<h1>USING THE EXTERNAL GZIP</h1> If the external  <i>gzip</i> is used, the following &quot;open&quot;s are used:<div class="spacer">
</div>
<br/>
    open(FH, &quot;gzip -dc $filename |&quot;)  # for read opens<br/>
    open(FH, &quot; | gzip &gt; $filename&quot;)   # for write opens<br/>
<div class="spacer">
</div>
You can modify the 'commands' for example to hardwire an absolute path by e.g.<div class="spacer">
</div>
<br/>
    use IO::Zlib ':gzip_read_open'  =&gt; '/some/where/gunzip -c %s |';<br/>
    use IO::Zlib ':gzip_write_open' =&gt; '| /some/where/gzip.exe &gt; %s';<br/>
<div class="spacer">
</div>
The %s is expanded to be the filename (&quot;sprintf&quot; is used, so be careful to escape any other &quot;%&quot; signs).  The 'commands' are checked for sanity - they must contain the %s, and the read open must end with the pipe sign, and the write open must begin with the pipe sign.</div>
<div class="section">
<h1>CLASS METHODS</h1><dl>
<dt>
has_Compress_Zlib</dt>
<dd>
Returns true if &quot;Compress::Zlib&quot; is available.  Note that this does not mean that &quot;Compress::Zlib&quot; is being used: see &quot;gzip_external&quot; and gzip_used.</dd>
</dl>
<dl>
<dt>
gzip_external</dt>
<dd>
Undef if an external <i>gzip</i> <b>can</b> be used if &quot;Compress::Zlib&quot; is not available (see &quot;has_Compress_Zlib&quot;), true if an external  <i>gzip</i> is explicitly used, false if an external  <i>gzip</i> must not be used. See &quot;gzip_used&quot;.</dd>
</dl>
<dl>
<dt>
gzip_used</dt>
<dd>
True if an external <i>gzip</i> is being used, false if not.</dd>
</dl>
<dl>
<dt>
gzip_read_open</dt>
<dd>
Return the 'command' being used for opening a file for reading using an external  <i>gzip</i>.</dd>
</dl>
<dl>
<dt>
gzip_write_open</dt>
<dd>
Return the 'command' being used for opening a file for writing using an external  <i>gzip</i>.</dd>
</dl>
</div>
<div class="section">
<h1>DIAGNOSTICS</h1><dl>
<dt>
IO::Zlib::getlines: must be called in list context</dt>
<dd>
If you want read lines, you must read in list context.</dd>
</dl>
<dl>
<dt>
IO::Zlib::gzopen_external: mode '...' is illegal</dt>
<dd>
Use only modes 'rb' or 'wb' or /wb[1-9]/.</dd>
</dl>
<dl>
<dt>
IO::Zlib::import: '...' is illegal</dt>
<dd>
The known import symbols are the &quot;:gzip_external&quot;, &quot;:gzip_read_open&quot;, and &quot;:gzip_write_open&quot;.  Anything else is not recognized.</dd>
</dl>
<dl>
<dt>
IO::Zlib::import: ':gzip_external' requires an argument</dt>
<dd>
The &quot;:gzip_external&quot; requires one boolean argument.</dd>
</dl>
<dl>
<dt>
IO::Zlib::import: 'gzip_read_open' requires an argument</dt>
<dd>
The &quot;:gzip_external&quot; requires one string argument.</dd>
</dl>
<dl>
<dt>
IO::Zlib::import: 'gzip_read' '...' is illegal</dt>
<dd>
The &quot;:gzip_read_open&quot; argument must end with the pipe sign (|) and have the %s for the filename.  See &quot;USING THE EXTERNAL GZIP&quot;.</dd>
</dl>
<dl>
<dt>
IO::Zlib::import: 'gzip_write_open' requires an argument</dt>
<dd>
The &quot;:gzip_external&quot; requires one string argument.</dd>
</dl>
<dl>
<dt>
IO::Zlib::import: 'gzip_write_open' '...' is illegal</dt>
<dd>
The &quot;:gzip_write_open&quot; argument must begin with the pipe sign (|) and have the %s for the filename.  An output redirect (&gt;) is also often a good idea, depending on your operating system shell syntax. See &quot;USING THE EXTERNAL GZIP&quot;.</dd>
</dl>
<dl>
<dt>
IO::Zlib::import: no Compress::Zlib and no external gzip</dt>
<dd>
Given that we failed to load &quot;Compress::Zlib&quot; and that the use of<br/>
 an external <i>gzip</i> was disabled, IO::Zlib has not much chance of working.</dd>
</dl>
<dl>
<dt>
IO::Zlib::open: needs a filename</dt>
<dd>
No filename, no open.</dd>
</dl>
<dl>
<dt>
IO::Zlib::READ: NBYTES must be specified</dt>
<dd>
We must know how much to read.</dd>
</dl>
<dl>
<dt>
IO::Zlib::WRITE: too long LENGTH</dt>
<dd>
The LENGTH must be less than or equal to the buffer size.</dd>
</dl>
</div>
<div class="section">
<h1>SEE ALSO</h1> perlfunc, &quot;I/O Operators&quot; in perlop, IO::Handle, Compress::Zlib</div>
<div class="section">
<h1>HISTORY</h1> Created by Tom Hughes &lt; <i>tom@compton.nu</i>&gt;.<div class="spacer">
</div>
Support for external gzip added by Jarkko Hietaniemi &lt;<i>jhi@iki.fi</i>&gt;.</div>
<div class="section">
<h1>COPYRIGHT</h1> Copyright (c) 1998-2004 Tom Hughes &lt; <i>tom@compton.nu</i>&gt;. All rights reserved. This program is free software; you can redistribute it and/or modify it under the same terms as Perl itself.</div>
<table class="foot">
<tr>
<td class="foot-date">
2010-12-30</td>
<td class="foot-os">
perl v5.14.2</td>
</tr>
</table>
</div>
</body>
</html>

