<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/linux/style.css" type="text/css" media="all"/>
<title>
LWP::RobotUA(3pm)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
LWP::RobotUA(3pm)</td>
<td class="head-vol">
User Contributed Perl Documentation</td>
<td class="head-rtitle">
LWP::RobotUA(3pm)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>NAME</h1> LWP::RobotUA - a class for well-behaved Web robots</div>
<div class="section">
<h1>SYNOPSIS</h1><br/>
  use LWP::RobotUA;<br/>
  my $ua = LWP::RobotUA-&gt;new('my-robot/0.1', 'me@foo.com');<br/>
  $ua-&gt;delay(10);  # be very nice -- max one hit every ten minutes!<br/>
  ...<br/>
<br/>
  # Then just use it just like a normal LWP::UserAgent:<br/>
  my $response = $ua-&gt;get('http://whatever.int/...');<br/>
  ...<br/>
</div>
<div class="section">
<h1>DESCRIPTION</h1> This class implements a user agent that is suitable for robot applications.  Robots should be nice to the servers they visit.  They should consult the  <i>/robots.txt</i> file to ensure that they are welcomed and they should not make requests too frequently.<div class="spacer">
</div>
But before you consider writing a robot, take a look at &lt;URL:http://www.robotstxt.org/&gt;.<div class="spacer">
</div>
When you use a <i>LWP::RobotUA</i> object as your user agent, then you do not really have to think about these things yourself; &quot;robots.txt&quot; files are automatically consulted and obeyed, the server isn't queried too rapidly, and so on.  Just send requests as you do when you are using a normal  <i>LWP::UserAgent</i> object (using &quot;$ua-&gt;get(...)&quot;, &quot;$ua-&gt;head(...)&quot;, &quot;$ua-&gt;request(...)&quot;, etc.), and this special agent will make sure you are nice.</div>
<div class="section">
<h1>METHODS</h1> The LWP::RobotUA is a sub-class of LWP::UserAgent and implements the same methods. In addition the following methods are provided:<dl>
<dt>
$ua = LWP::RobotUA-&gt;new( %options )</dt>
<dd>
</dd>
</dl>
<dl>
<dt>
$ua = LWP::RobotUA-&gt;new( $agent, $from )</dt>
<dd>
</dd>
</dl>
<dl>
<dt>
$ua = LWP::RobotUA-&gt;new( $agent, $from, $rules )</dt>
<dd>
The LWP::UserAgent options &quot;agent&quot; and &quot;from&quot; are mandatory.  The options &quot;delay&quot;, &quot;use_sleep&quot; and &quot;rules&quot; initialize attributes private to the RobotUA.  If &quot;rules&quot; are not provided, then &quot;WWW::RobotRules&quot; is instantiated providing an internal database of  <i>robots.txt</i>.<div style="height: 1.00em;">
&#160;</div>
It is also possible to just pass the value of &quot;agent&quot;, &quot;from&quot; and optionally &quot;rules&quot; as plain positional arguments.</dd>
</dl>
<dl>
<dt>
$ua-&gt;delay</dt>
<dd>
</dd>
</dl>
<dl>
<dt>
$ua-&gt;delay( $minutes )</dt>
<dd>
Get/set the minimum delay between requests to the same server, in  <i>minutes</i>.  The default is 1 minute.  Note that this number doesn't have to be an integer; for example, this sets the delay to 10 seconds:<div style="height: 1.00em;">
&#160;</div>
<br/>
    $ua-&gt;delay(10/60);<br/>
</dd>
</dl>
<dl>
<dt>
$ua-&gt;use_sleep</dt>
<dd>
</dd>
</dl>
<dl>
<dt>
$ua-&gt;use_sleep( $boolean )</dt>
<dd>
Get/set a value indicating whether the UA should <i>sleep()</i> if requests arrive too fast, defined as $ua-&gt;delay minutes not passed since last request to the given server.  The default is TRUE.  If this value is FALSE then an internal SERVICE_UNAVAILABLE response will be generated. It will have an Retry-After header that indicates when it is OK to send another request to this server.</dd>
</dl>
<dl>
<dt>
$ua-&gt;rules</dt>
<dd>
</dd>
</dl>
<dl>
<dt>
$ua-&gt;rules( $rules )</dt>
<dd>
Set/get which <i>WWW::RobotRules</i> object to use.</dd>
</dl>
<dl>
<dt>
$ua-&gt;no_visits( $netloc )</dt>
<dd>
Returns the number of documents fetched from this server host. Yeah I know, this method should probably have been named  <i>num_visits()</i> or something like that. :-(</dd>
</dl>
<dl>
<dt>
$ua-&gt;host_wait( $netloc )</dt>
<dd>
Returns the number of <i>seconds</i> (from now) you must wait before you can make a new request to this host.</dd>
</dl>
<dl>
<dt>
$ua-&gt;as_string</dt>
<dd>
Returns a string that describes the state of the UA. Mainly useful for debugging.</dd>
</dl>
</div>
<div class="section">
<h1>SEE ALSO</h1> LWP::UserAgent, WWW::RobotRules</div>
<div class="section">
<h1>COPYRIGHT</h1> Copyright 1996-2004 Gisle Aas.<div class="spacer">
</div>
This library is free software; you can redistribute it and/or modify it under the same terms as Perl itself.</div>
<table class="foot">
<tr>
<td class="foot-date">
2011-10-15</td>
<td class="foot-os">
perl v5.14.2</td>
</tr>
</table>
</div>
</body>
</html>

