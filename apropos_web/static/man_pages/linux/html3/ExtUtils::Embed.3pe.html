<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/linux/style.css" type="text/css" media="all"/>
<title>
ExtUtils::Embed(3perl)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
ExtUtils::Embed(3perl)</td>
<td class="head-vol">
Perl Programmers Reference Guide</td>
<td class="head-rtitle">
ExtUtils::Embed(3perl)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>NAME</h1> ExtUtils::Embed - Utilities for embedding Perl in C/C++ applications</div>
<div class="section">
<h1>SYNOPSIS</h1><br/>
 perl -MExtUtils::Embed -e xsinit <br/>
 perl -MExtUtils::Embed -e ccopts <br/>
 perl -MExtUtils::Embed -e ldopts<br/>
</div>
<div class="section">
<h1>DESCRIPTION</h1> ExtUtils::Embed provides utility functions for embedding a Perl interpreter and extensions in your C/C++ applications. Typically, an application  <b>Makefile</b> will invoke ExtUtils::Embed functions while building your application.<div class="spacer">
</div>
Note that on Debian systems the <b>libperl-dev</b> package is required for compiling applications which embed an interpreter.</div>
<div class="section">
<h1>@EXPORT</h1> ExtUtils::Embed exports the following functions:<div class="spacer">
</div>
<i>xsinit()</i>, <i>ldopts()</i>, <i>ccopts()</i>, <i>perl_inc()</i>, <i>ccflags()</i>,  <i>ccdlflags()</i>, <i>xsi_header()</i>, <i>xsi_protos()</i>, <i>xsi_body()</i></div>
<div class="section">
<h1>FUNCTIONS</h1><dl>
<dt>
<i>xsinit()</i></dt>
<dd>
Generate C/C++ code for the XS initializer function.<div style="height: 1.00em;">
&#160;</div>
When invoked as &quot;`perl -MExtUtils::Embed -e xsinit --`&quot; the following options are recognized:<div style="height: 1.00em;">
&#160;</div>
<b>-o</b> &lt;output filename&gt; (Defaults to <b>perlxsi.c</b>)<div style="height: 1.00em;">
&#160;</div>
<b>-o STDOUT</b> will print to STDOUT.<div style="height: 1.00em;">
&#160;</div>
<b>-std</b> (Write code for extensions that are linked with the current Perl.)<div style="height: 1.00em;">
&#160;</div>
Any additional arguments are expected to be names of modules to generate code for.<div style="height: 1.00em;">
&#160;</div>
When invoked with parameters the following are accepted and optional:<div style="height: 1.00em;">
&#160;</div>
&quot;xsinit($filename,$std,[@modules])&quot;<div style="height: 1.00em;">
&#160;</div>
Where,<div style="height: 1.00em;">
&#160;</div>
<b></b><b>$filename</b><b></b> is equivalent to the <b>-o</b> option.<div style="height: 1.00em;">
&#160;</div>
<b></b><b>$std</b><b></b> is boolean, equivalent to the <b>-std</b> option.<div style="height: 1.00em;">
&#160;</div>
<b>[@modules]</b> is an array ref, same as additional arguments mentioned above.</dd>
</dl>
<dl>
<dt>
Examples</dt>
<dd>
<br/>
 perl -MExtUtils::Embed -e xsinit -- -o xsinit.c Socket<br/>
<div style="height: 1.00em;">
&#160;</div>
This will generate code with an <b>xs_init</b> function that glues the perl <b>Socket::bootstrap</b> function to the C  <b>boot_Socket</b> function and writes it to a file named <i>xsinit.c</i>.<div style="height: 1.00em;">
&#160;</div>
Note that <b>DynaLoader</b> is a special case where it must call <b>boot_DynaLoader</b> directly.<div style="height: 1.00em;">
&#160;</div>
<br/>
 perl -MExtUtils::Embed -e xsinit<br/>
<div style="height: 1.00em;">
&#160;</div>
This will generate code for linking with <b>DynaLoader</b> and each static extension found in  <b></b><b>$Config</b><b>{static_ext}</b>. The code is written to the default file name  <b>perlxsi.c</b>.<div style="height: 1.00em;">
&#160;</div>
<br/>
 perl -MExtUtils::Embed -e xsinit -- -o xsinit.c -std DBI DBD::Oracle<br/>
<div style="height: 1.00em;">
&#160;</div>
Here, code is written for all the currently linked extensions along with code for  <b>DBI</b> and <b>DBD::Oracle</b>.<div style="height: 1.00em;">
&#160;</div>
If you have a working <b>DynaLoader</b> then there is rarely any need to statically link in any other extensions.</dd>
</dl>
<dl>
<dt>
<i>ldopts()</i></dt>
<dd>
Output arguments for linking the Perl library and extensions to your application.<div style="height: 1.00em;">
&#160;</div>
When invoked as &quot;`perl -MExtUtils::Embed -e ldopts --`&quot; the following options are recognized:<div style="height: 1.00em;">
&#160;</div>
<b>-std</b><div style="height: 1.00em;">
&#160;</div>
Output arguments for linking the Perl library and any extensions linked with the current Perl.<div style="height: 1.00em;">
&#160;</div>
<b>-I</b> &lt;path1:path2&gt;<div style="height: 1.00em;">
&#160;</div>
Search path for ModuleName.a archives. Default path is  <b></b><b>@INC</b><b></b>. Library archives are expected to be found as  <b>/some/path/auto/ModuleName/ModuleName.a</b> For example, when looking for  <b>Socket.a</b> relative to a search path, we should find  <b>auto/Socket/Socket.a</b><div style="height: 1.00em;">
&#160;</div>
When looking for <b>DBD::Oracle</b> relative to a search path, we should find  <b>auto/DBD/Oracle/Oracle.a</b><div style="height: 1.00em;">
&#160;</div>
Keep in mind that you can always supply <b>/my/own/path/ModuleName.a</b> as an additional linker argument.<div style="height: 1.00em;">
&#160;</div>
<b>--</b>  &lt;list of linker args&gt;<div style="height: 1.00em;">
&#160;</div>
Additional linker arguments to be considered.<div style="height: 1.00em;">
&#160;</div>
Any additional arguments found before the <b>--</b> token are expected to be names of modules to generate code for.<div style="height: 1.00em;">
&#160;</div>
When invoked with parameters the following are accepted and optional:<div style="height: 1.00em;">
&#160;</div>
&quot;ldopts($std,[@modules],[@link_args],$path)&quot;<div style="height: 1.00em;">
&#160;</div>
Where:<div style="height: 1.00em;">
&#160;</div>
<b></b><b>$std</b><b></b> is boolean, equivalent to the <b>-std</b> option.<div style="height: 1.00em;">
&#160;</div>
<b>[@modules]</b> is equivalent to additional arguments found before the <b>--</b> token.<div style="height: 1.00em;">
&#160;</div>
<b>[@link_args]</b> is equivalent to arguments found after the <b>--</b> token.<div style="height: 1.00em;">
&#160;</div>
<b></b><b>$path</b><b></b> is equivalent to the <b>-I</b> option.<div style="height: 1.00em;">
&#160;</div>
In addition, when ldopts is called with parameters, it will return the argument string rather than print it to STDOUT.</dd>
</dl>
<dl>
<dt>
Examples</dt>
<dd>
<br/>
 perl -MExtUtils::Embed -e ldopts<br/>
<div style="height: 1.00em;">
&#160;</div>
This will print arguments for linking with <b>libperl</b> and extensions found in  <b></b><b>$Config</b><b>{static_ext}</b>.  This includes libraries found in  <b></b><b>$Config</b><b>{libs}</b> and the first ModuleName.a library for each extension that is found by searching  <b></b><b>@INC</b><b></b> or the path specified by the  <b>-I</b> option. In addition, when ModuleName.a is found, additional linker arguments are picked up from the  <b>extralibs.ld</b> file in the same directory.<div style="height: 1.00em;">
&#160;</div>
<br/>
 perl -MExtUtils::Embed -e ldopts -- -std Socket<br/>
<div style="height: 1.00em;">
&#160;</div>
This will do the same as the above example, along with printing additional arguments for linking with the <b>Socket</b> extension.<div style="height: 1.00em;">
&#160;</div>
<br/>
 perl -MExtUtils::Embed -e ldopts -- -std Msql -- -L/usr/msql/lib -lmsql<br/>
<div style="height: 1.00em;">
&#160;</div>
Any arguments after the second '--' token are additional linker arguments that will be examined for potential conflict.  If there is no conflict, the additional arguments will be part of the output.</dd>
</dl>
<dl>
<dt>
<i>perl_inc()</i></dt>
<dd>
For including perl header files this function simply prints:<div style="height: 1.00em;">
&#160;</div>
<br/>
 -I$Config{archlibexp}/CORE<br/>
<div style="height: 1.00em;">
&#160;</div>
So, rather than having to say:<div style="height: 1.00em;">
&#160;</div>
<br/>
 perl -MConfig -e 'print &quot;-I$Config{archlibexp}/CORE&quot;'<br/>
<div style="height: 1.00em;">
&#160;</div>
Just say:<div style="height: 1.00em;">
&#160;</div>
<br/>
 perl -MExtUtils::Embed -e perl_inc<br/>
</dd>
</dl>
<dl>
<dt>
<i>ccflags()</i>, <i>ccdlflags()</i></dt>
<dd>
These functions simply print $Config{ccflags} and $Config{ccdlflags}</dd>
</dl>
<dl>
<dt>
<i>ccopts()</i></dt>
<dd>
This function combines <i>perl_inc()</i>, <i>ccflags()</i> and <i>ccdlflags()</i> into one.</dd>
</dl>
<dl>
<dt>
<i>xsi_header()</i></dt>
<dd>
This function simply returns a string defining the same <b>EXTERN_C</b> macro as  <b>perlmain.c</b> along with #including <b>perl.h</b> and <b>EXTERN.h</b>.</dd>
</dl>
<dl>
<dt>
xsi_protos(@modules)</dt>
<dd>
This function returns a string of <b>boot_$ModuleName</b> prototypes for each @modules.</dd>
</dl>
<dl>
<dt>
xsi_body(@modules)</dt>
<dd>
This function returns a string of calls to <b></b><b><i>newXS()</i></b><b></b> that glue the module <b>bootstrap</b> function to  <b>boot_ModuleName</b> for each @modules.<div style="height: 1.00em;">
&#160;</div>
<b></b><b><i>xsinit()</i></b><b></b> uses the xsi_* functions to generate most of its code.</dd>
</dl>
</div>
<div class="section">
<h1>EXAMPLES</h1> For examples on how to use  <b>ExtUtils::Embed</b> for building C/C++ applications with embedded perl, see perlembed.</div>
<div class="section">
<h1>SEE ALSO</h1> perlembed</div>
<div class="section">
<h1>AUTHOR</h1> Doug MacEachern &lt; <i>dougm@osf.org</i>&gt;<div class="spacer">
</div>
Based on ideas from Tim Bunce &lt;<i>Tim.Bunce@ig.co.uk</i>&gt; and  <b>minimod.pl</b> by Andreas Koenig &lt;<i>k@anna.in-berlin.de</i>&gt; and Tim Bunce.</div>
<table class="foot">
<tr>
<td class="foot-date">
2016-03-01</td>
<td class="foot-os">
perl v5.14.2</td>
</tr>
</table>
</div>
</body>
</html>

