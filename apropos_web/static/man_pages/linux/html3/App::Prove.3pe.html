<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/linux/style.css" type="text/css" media="all"/>
<title>
App::Prove(3perl)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
App::Prove(3perl)</td>
<td class="head-vol">
Perl Programmers Reference Guide</td>
<td class="head-rtitle">
App::Prove(3perl)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>NAME</h1> App::Prove - Implements the &quot;prove&quot; command.</div>
<div class="section">
<h1>VERSION</h1> Version 3.23</div>
<div class="section">
<h1>DESCRIPTION</h1> Test::Harness provides a command, &quot;prove&quot;, which runs a TAP based test suite and prints a report. The &quot;prove&quot; command is a minimal wrapper around an instance of this module.</div>
<div class="section">
<h1>SYNOPSIS</h1><br/>
    use App::Prove;<br/>
<br/>
    my $app = App::Prove-&gt;new;<br/>
    $app-&gt;process_args(@ARGV);<br/>
    $app-&gt;run;<br/>
</div>
<div class="section">
<h1>METHODS</h1><div class="subsection">
<h2>Class Methods</h2>  <i></i><i>&quot;new&quot;</i><i></i><div class="spacer">
</div>
Create a new &quot;App::Prove&quot;. Optionally a hash ref of attribute initializers may be passed.<div class="spacer">
</div>
<i></i><i>&quot;state_class&quot;</i><i></i><div class="spacer">
</div>
Getter/setter for the name of the class used for maintaining state.  This class should either subclass from &quot;App::Prove::State&quot; or provide an identical interface.<div class="spacer">
</div>
<i></i><i>&quot;state_manager&quot;</i><i></i><div class="spacer">
</div>
Getter/setter for the instance of the &quot;state_class&quot;.<div class="spacer">
</div>
<i></i><i>&quot;add_rc_file&quot;</i><i></i><div class="spacer">
</div>
<br/>
    $prove-&gt;add_rc_file('myproj/.proverc');<br/>
<div class="spacer">
</div>
Called before &quot;process_args&quot; to prepend the contents of an rc file to the options.<div class="spacer">
</div>
<i></i><i>&quot;process_args&quot;</i><i></i><div class="spacer">
</div>
<br/>
    $prove-&gt;process_args(@args);<br/>
<div class="spacer">
</div>
Processes the command-line arguments. Attributes will be set appropriately. Any filenames may be found in the &quot;argv&quot; attribute.<div class="spacer">
</div>
Dies on invalid arguments.<div class="spacer">
</div>
<i></i><i>&quot;run&quot;</i><i></i><div class="spacer">
</div>
Perform whatever actions the command line args specified. The &quot;prove&quot; command line tool consists of the following code:<div class="spacer">
</div>
<br/>
    use App::Prove;<br/>
<br/>
    my $app = App::Prove-&gt;new;<br/>
    $app-&gt;process_args(@ARGV);<br/>
    exit( $app-&gt;run ? 0 : 1 );  # if you need the exit code<br/>
<div class="spacer">
</div>
<i></i><i>&quot;require_harness&quot;</i><i></i><div class="spacer">
</div>
Load a harness replacement class.<div class="spacer">
</div>
<br/>
  $prove-&gt;require_harness($for =&gt; $class_name);<br/>
<div class="spacer">
</div>
<i></i><i>&quot;print_version&quot;</i><i></i><div class="spacer">
</div>
Display the version numbers of the loaded TAP::Harness and the current Perl.</div>
<div class="subsection">
<h2>Attributes</h2> After command line parsing the following attributes reflect the values of the corresponding command line switches. They may be altered before calling &quot;run&quot;.<dl>
<dt>
&quot;archive&quot;</dt>
<dd>
</dd>
</dl>
<dl>
<dt>
&quot;argv&quot;</dt>
<dd>
</dd>
</dl>
<dl>
<dt>
&quot;backwards&quot;</dt>
<dd>
</dd>
</dl>
<dl>
<dt>
&quot;blib&quot;</dt>
<dd>
</dd>
</dl>
<dl>
<dt>
&quot;color&quot;</dt>
<dd>
</dd>
</dl>
<dl>
<dt>
&quot;directives&quot;</dt>
<dd>
</dd>
</dl>
<dl>
<dt>
&quot;dry&quot;</dt>
<dd>
</dd>
</dl>
<dl>
<dt>
&quot;exec&quot;</dt>
<dd>
</dd>
</dl>
<dl>
<dt>
&quot;extensions&quot;</dt>
<dd>
</dd>
</dl>
<dl>
<dt>
&quot;failures&quot;</dt>
<dd>
</dd>
</dl>
<dl>
<dt>
&quot;comments&quot;</dt>
<dd>
</dd>
</dl>
<dl>
<dt>
&quot;formatter&quot;</dt>
<dd>
</dd>
</dl>
<dl>
<dt>
&quot;harness&quot;</dt>
<dd>
</dd>
</dl>
<dl>
<dt>
&quot;ignore_exit&quot;</dt>
<dd>
</dd>
</dl>
<dl>
<dt>
&quot;includes&quot;</dt>
<dd>
</dd>
</dl>
<dl>
<dt>
&quot;jobs&quot;</dt>
<dd>
</dd>
</dl>
<dl>
<dt>
&quot;lib&quot;</dt>
<dd>
</dd>
</dl>
<dl>
<dt>
&quot;merge&quot;</dt>
<dd>
</dd>
</dl>
<dl>
<dt>
&quot;modules&quot;</dt>
<dd>
</dd>
</dl>
<dl>
<dt>
&quot;parse&quot;</dt>
<dd>
</dd>
</dl>
<dl>
<dt>
&quot;plugins&quot;</dt>
<dd>
</dd>
</dl>
<dl>
<dt>
&quot;quiet&quot;</dt>
<dd>
</dd>
</dl>
<dl>
<dt>
&quot;really_quiet&quot;</dt>
<dd>
</dd>
</dl>
<dl>
<dt>
&quot;recurse&quot;</dt>
<dd>
</dd>
</dl>
<dl>
<dt>
&quot;rules&quot;</dt>
<dd>
</dd>
</dl>
<dl>
<dt>
&quot;show_count&quot;</dt>
<dd>
</dd>
</dl>
<dl>
<dt>
&quot;show_help&quot;</dt>
<dd>
</dd>
</dl>
<dl>
<dt>
&quot;show_man&quot;</dt>
<dd>
</dd>
</dl>
<dl>
<dt>
&quot;show_version&quot;</dt>
<dd>
</dd>
</dl>
<dl>
<dt>
&quot;shuffle&quot;</dt>
<dd>
</dd>
</dl>
<dl>
<dt>
&quot;state&quot;</dt>
<dd>
</dd>
</dl>
<dl>
<dt>
&quot;state_class&quot;</dt>
<dd>
</dd>
</dl>
<dl>
<dt>
&quot;taint_fail&quot;</dt>
<dd>
</dd>
</dl>
<dl>
<dt>
&quot;taint_warn&quot;</dt>
<dd>
</dd>
</dl>
<dl>
<dt>
&quot;test_args&quot;</dt>
<dd>
</dd>
</dl>
<dl>
<dt>
&quot;timer&quot;</dt>
<dd>
</dd>
</dl>
<dl>
<dt>
&quot;verbose&quot;</dt>
<dd>
</dd>
</dl>
<dl>
<dt>
&quot;warnings_fail&quot;</dt>
<dd>
</dd>
</dl>
<dl>
<dt>
&quot;warnings_warn&quot;</dt>
<dd>
</dd>
</dl>
<dl>
<dt>
&quot;tapversion&quot;</dt>
<dd>
</dd>
</dl>
<dl>
<dt>
&quot;trap&quot;</dt>
<dd>
</dd>
</dl>
</div>
</div>
<div class="section">
<h1>PLUGINS</h1> &quot;App::Prove&quot; provides support for 3rd-party plugins.  These are currently loaded at run-time,  <i>after</i> arguments have been parsed (so you can not change the way arguments are processed, sorry), typically with the &quot;-P <i>plugin</i>&quot; switch, eg:<div class="spacer">
</div>
<br/>
  prove -PMyPlugin<br/>
<div class="spacer">
</div>
This will search for a module named &quot;App::Prove::Plugin::MyPlugin&quot;, or failing that, &quot;MyPlugin&quot;.  If the plugin can't be found, &quot;prove&quot; will complain &amp; exit.<div class="spacer">
</div>
You can pass an argument to your plugin by appending an &quot;=&quot; after the plugin name, eg &quot;-PMyPlugin=foo&quot;.  You can pass multiple arguments using commas:<div class="spacer">
</div>
<br/>
  prove -PMyPlugin=foo,bar,baz<br/>
<div class="spacer">
</div>
These are passed in to your plugin's &quot;load()&quot; class method (if it has one), along with a reference to the &quot;App::Prove&quot; object that is invoking your plugin:<div class="spacer">
</div>
<br/>
  sub load {<br/>
      my ($class, $p) = @_;<br/>
<br/>
      my @args = @{ $p-&gt;{args} };<br/>
      # @args will contain ( 'foo', 'bar', 'baz' )<br/>
      $p-&gt;{app_prove}-&gt;do_something;<br/>
      ...<br/>
  }<br/>
<div class="spacer">
</div>
Note that the user's arguments are also passed to your plugin's &quot;import()&quot; function as a list, eg:<div class="spacer">
</div>
<br/>
  sub import {<br/>
      my ($class, @args) = @_;<br/>
      # @args will contain ( 'foo', 'bar', 'baz' )<br/>
      ...<br/>
  }<br/>
<div class="spacer">
</div>
This is for backwards compatibility, and may be deprecated in the future.<div class="subsection">
<h2>Sample Plugin</h2> Here's a sample plugin, for your reference:<div class="spacer">
</div>
<br/>
  package App::Prove::Plugin::Foo;<br/>
<br/>
  # Sample plugin, try running with:<br/>
  # prove -PFoo=bar -r -j3<br/>
  # prove -PFoo -Q<br/>
  # prove -PFoo=bar,My::Formatter<br/>
<br/>
  use strict;<br/>
  use warnings;<br/>
<br/>
  sub load {<br/>
      my ($class, $p) = @_;<br/>
      my @args = @{ $p-&gt;{args} };<br/>
      my $app  = $p-&gt;{app_prove};<br/>
<br/>
      print &quot;loading plugin: $class, args: &quot;, join(', ', @args ), &quot;\n&quot;;<br/>
<br/>
      # turn on verbosity<br/>
      $app-&gt;verbose( 1 );<br/>
<br/>
      # set the formatter?<br/>
      $app-&gt;formatter( $args[1] ) if @args &gt; 1;<br/>
<br/>
      # print some of App::Prove's state:<br/>
      for my $attr (qw( jobs quiet really_quiet recurse verbose )) {<br/>
          my $val = $app-&gt;$attr;<br/>
          $val    = 'undef' unless defined( $val );<br/>
          print &quot;$attr: $val\n&quot;;<br/>
      }<br/>
<br/>
      return 1;<br/>
  }<br/>
<br/>
  1;<br/>
</div>
</div>
<div class="section">
<h1>SEE ALSO</h1> prove, TAP::Harness</div>
<table class="foot">
<tr>
<td class="foot-date">
2011-09-19</td>
<td class="foot-os">
perl v5.14.2</td>
</tr>
</table>
</div>
</body>
</html>

