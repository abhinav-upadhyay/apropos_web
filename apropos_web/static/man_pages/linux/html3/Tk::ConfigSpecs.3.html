<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/linux/style.css" type="text/css" media="all"/>
<title>
ConfigSpecs(3pm)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
ConfigSpecs(3pm)</td>
<td class="head-vol">
User Contributed Perl Documentation</td>
<td class="head-rtitle">
ConfigSpecs(3pm)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>NAME</h1> Tk::ConfigSpecs - Defining behaviour of 'configure' for composite widgets.</div>
<div class="section">
<h1>SYNOPSIS</h1><br/>
    sub Populate<br/>
    {<br/>
     my ($composite,$args) = @_;<br/>
     ...<br/>
     $composite-&gt;ConfigSpecs('-attribute' =&gt; [ where,dbName,dbClass,default ]);<br/>
     $composite-&gt;ConfigSpecs('-alias' =&gt; '-otherattribute');<br/>
     $composite-&gt;ConfigSpecs('DEFAULT' =&gt; [ where ]);<br/>
     $composite-&gt;ConfigSpecs($subwidget-&gt;ConfigSpecs);<br/>
     ...<br/>
    }<br/>
<br/>
    $composite-&gt;configure(-attribute =&gt; value);<br/>
</div>
<div class="section">
<h1>DESCRIPTION</h1> The aim is to make the composite widget configure method look as much like a regular Tk widget's configure as possible. (See Tk::options for a description of this behaviour.) To enable this the attributes that the composite as a whole accepts needs to be defined.<div class="subsection">
<h2>Defining the ConfigSpecs for a class.</h2> Typically a widget will have one or more calls like the following<div class="spacer">
</div>
<br/>
    $composite-&gt;ConfigSpecs(-attribute =&gt; [where,dbName,dbClass,default]);<br/>
<div class="spacer">
</div>
in its <b>Populate</b> method. When <b>ConfigSpecs</b> is called this way (with arguments) the arguments are used to construct or augment/replace a hash table for the widget. (More than one  <i>-option</i>=&gt;<i>value</i> pair can be specified to a single call.)<div class="spacer">
</div>
<b>dbName</b>, <b>dbClass</b> and default are only used by <b>ConfigDefault</b> described below, or to respond to 'inquiry' configure commands.<div class="spacer">
</div>
It may be either one of the values below, or a list of such values enclosed in  <b>[]</b>.<div class="spacer">
</div>
The currently permitted values of <b>where</b> are:<dl>
<dt>
<b>'ADVERTISED'</b></dt>
<dd>
Apply <b>configure</b> to <i>advertised</i> subwidgets.</dd>
</dl>
<dl>
<dt>
<b>'DESCENDANTS'</b></dt>
<dd>
Apply <b>configure</b> recursively to all descendants.</dd>
</dl>
<dl>
<dt>
<b>'CALLBACK'</b></dt>
<dd>
Setting the attribute does &quot;Tk::Callback-&gt;new($value)&quot; before storing in &quot;$composite-&gt;{Configure}{-attribute}&quot;. This is appropriate for &quot;-command =&gt; ...&quot; attributes that are handled by the composite and not forwarded to a subwidget. (E.g.  <b>Tk::Tiler</b> has &quot;-yscrollcommand&quot; to allow it to have scrollbar attached.)<div style="height: 1.00em;">
&#160;</div>
This may be the first of several 'validating' keywords (e.g. font, cursor, anchor etc.) that core Tk makes special for C code.</dd>
</dl>
<dl>
<dt>
<b>'CHILDREN'</b></dt>
<dd>
Apply <b>configure</b> to all children.  (Children are the immediate descendants of a widget.)</dd>
</dl>
<dl>
<dt>
<b>'METHOD'</b></dt>
<dd>
Call &quot;$cw-&gt;attribute(value)&quot;<div style="height: 1.00em;">
&#160;</div>
This is the most general case. Simply have a method of the composite class with the same name as the attribute.  The method may do any validation and have whatever side-effects you like.  (It is probably worth 'queueing' using  <b>afterIdle</b> for more complex side-effects.)</dd>
</dl>
<dl>
<dt>
<b>'PASSIVE'</b></dt>
<dd>
Simply store value in &quot;$composite-&gt;{Configure}{-attribute}&quot;.<div style="height: 1.00em;">
&#160;</div>
This form is also a useful placeholder for attributes which you currently only handle at create time.</dd>
</dl>
<dl>
<dt>
<b>'SELF'</b></dt>
<dd>
Apply <b>configure</b> to the core widget (e.g. <b>Frame</b>) that is the basis of the composite. (This is the default behaviour for most attributes which makes a simple Frame behave the way you would expect.) Note that once you have specified  <b>ConfigSpecs</b> for an attribute you must explicitly include 'SELF' in the list if you want the attribute to apply to the composite itself (this avoids nasty infinite recursion problems).</dd>
</dl>
<dl>
<dt>
<b></b><b>$reference</b><b></b> (blessed)</dt>
<dd>
Call <b></b><b>$reference</b><b></b>-&gt;configure(-attribute =&gt; value)<div style="height: 1.00em;">
&#160;</div>
A common case is where <b></b><b>$reference</b><b></b> is a subwidget.<div style="height: 1.00em;">
&#160;</div>
$reference may also be result of<div style="height: 1.00em;">
&#160;</div>
<br/>
     Tk::Config-&gt;new(setmethod,getmethod,args,...);<br/>
<div style="height: 1.00em;">
&#160;</div>
<b>Tk::Config</b> class is used to implement all the above keyword types.  The class has &quot;configure&quot; and &quot;cget&quot; methods so allows higher level code to  <i>always</i> just call one of those methods on an <i>object</i> of some kind.</dd>
</dl>
<dl>
<dt>
<b>hash reference</b></dt>
<dd>
Defining:<div style="height: 1.00em;">
&#160;</div>
<br/>
        $cw-&gt;ConfigSpecs(<br/>
                ...<br/>
                -option =&gt; [ { -optionX=&gt;$w1, -optionY=&gt;[$w2, $w3] },<br/>
                                dbname dbclass default ],<br/>
                ...<br/>
                );<br/>
<div style="height: 1.00em;">
&#160;</div>
So &quot;$cw-&gt;configure(-option =&gt; value)&quot; actually does<div style="height: 1.00em;">
&#160;</div>
<br/>
        $w1-&gt;configure(-optionX =&gt; value);<br/>
        $w2-&gt;configure(-optionY =&gt; value);<br/>
        $w3-&gt;configure(-optionY =&gt; value);<br/>
</dd>
</dl>
<dl>
<dt>
<b>'otherstring'</b></dt>
<dd>
Call<div style="height: 1.00em;">
&#160;</div>
<br/>
    $composite-&gt;Subwidget('otherstring')-&gt;configure( -attribute =&gt; value );<br/>
<div style="height: 1.00em;">
&#160;</div>
While this is here for backward compatibility with Tk-b5, it is probably better just to use the subwidget reference directly.  The only case for retaining this form is to allow an additional layer of abstraction - perhaps having a 'current' subwidget - this is unproven.</dd>
</dl>
<dl>
<dt>
<b>Aliases</b></dt>
<dd>
&quot;ConfigSpecs( -alias =&gt; '-otherattribute' )&quot; is used to make &quot;-alias&quot; equivalent to &quot;-otherattribute&quot;. For example the aliases<div style="height: 1.00em;">
&#160;</div>
<br/>
    -fg =&gt; '-foreground',<br/>
    -bg =&gt; '-background'<br/>
<div style="height: 1.00em;">
&#160;</div>
are provided automatically (if not already specified).</dd>
</dl>
</div>
<div class="subsection">
<h2>Delegating all options of a widget class to a subwidget</h2><br/>
    $composite-&gt;ConfigSpecs($subwidget-&gt;ConfigSpecs);<br/>
<div class="spacer">
</div>
The above generates a list of <i>composite</i> ConfigSpecs arguments, one for each valid option in $subwidget's class, and delegates said option to $subwidget.  See Tk::Widget and the  <i>widget</i> method ConfigSpecs.  Duplicating  <i>composite</i> ConfigSpecs and <i>widget</i> ConfigSpecs keys will yield undefined results.</div>
<div class="subsection">
<h2>Default values</h2> When the  <b>Populate</b> method returns <b>ConfigDefault</b> is called.  This calls<div class="spacer">
</div>
<br/>
    $composite-&gt;ConfigSpecs;<br/>
<div class="spacer">
</div>
(with no arguments) to return a reference to a hash. Entries in the hash take the form:<div class="spacer">
</div>
<br/>
    '-attribute' =&gt; [ where, dbName, dbClass, default ]<br/>
<div class="spacer">
</div>
<b>ConfigDefault</b> ignores 'where' completely (and also the DEFAULT entry) and checks the 'options' database on the widget's behalf, and if an entry is present matching dbName/dbClass<div class="spacer">
</div>
<br/>
    -attribute =&gt; value<br/>
<div class="spacer">
</div>
is added to the list of options that <b>new</b> will eventually apply to the widget. Likewise if there is not a match and default is defined this default value will be added.<div class="spacer">
</div>
Alias entries in the hash are used to convert user-specified values for the alias into values for the real attribute.</div>
<div class="subsection">
<h2><b></b><b><i>New()</i></b><b>-time configure</b></h2> Once control returns to  <b>new</b>, the list of user-supplied options augmented by those from  <b>ConfigDefault</b> are applied to the widget using the  <b>configure</b> method below.<div class="spacer">
</div>
Widgets are most flexible and most Tk-like if they handle the majority of their attributes this way.</div>
<div class="subsection">
<h2>Configuring composites</h2> Once the above have occurred calls of the form:<div class="spacer">
</div>
<br/>
    $composite-&gt;configure( -attribute =&gt; value );<br/>
<div class="spacer">
</div>
should behave like any other widget as far as end-user code is concerned.  <b>configure</b> will be handled by <b>Tk::Derived::configure</b> as follows:<div class="spacer">
</div>
<br/>
    $composite-&gt;ConfigSpecs;<br/>
<div class="spacer">
</div>
is called (with no arguments) to return a reference to a hash <b>-attribute</b> is looked up in this hash, if  <b>-attribute</b> is not present in the hash then  <b>'DEFAULT'</b> is looked for instead.  (Aliases are tried as well and cause redirection to the aliased attribute).  The result should be a reference to a list like:<div class="spacer">
</div>
<br/>
  [ where, dbName, dbClass, default ]<br/>
<div class="spacer">
</div>
at this stage only <i>where</i> is of interest, it maps to a list of object references (maybe only one) foreach one<div class="spacer">
</div>
<br/>
   $object-&gt;configure( -attribute =&gt; value );<br/>
<div class="spacer">
</div>
is <b>eval</b>ed.</div>
<div class="subsection">
<h2>Inquiring attributes of composites</h2><br/>
   $composite-&gt;cget( '-attribute' );<br/>
<div class="spacer">
</div>
This is handled by  <b>Tk::Derived::cget</b> in a similar manner to configure. At present if  <i>where</i> is a list of more than one object it is ignored completely and the &quot;cached&quot; value in<div class="spacer">
</div>
<br/>
   $composite-&gt;{Configure}{-attribute}.<br/>
<div class="spacer">
</div>
is returned.</div>
</div>
<div class="section">
<h1>CAVEATS</h1> The &quot;-background&quot; and &quot;-foreground&quot; option values are automatically propagated down to all composite widget's children. This may be sometimes not desirable, especially if some subwidgets should use own color schemes, either by using explicit options or by option database definitions. If this is the case, then just add<div class="spacer">
</div>
<br/>
    -foreground =&gt; 'SELF',<br/>
    -background =&gt; 'SELF',<br/>
<div class="spacer">
</div>
to &quot;ConfigSpecs&quot;.<div class="spacer">
</div>
It is the author's intention to port as many of the &quot;Tix&quot; composite widgets as make sense. The mechanism described above may have to evolve in order to make this possible, although now aliases are handled I think the above is sufficient.</div>
<div class="section">
<h1>SEE ALSO</h1> Tk::composite, Tk::options, Tk::Widget</div>
<table class="foot">
<tr>
<td class="foot-date">
2007-11-06</td>
<td class="foot-os">
perl v5.14.2</td>
</tr>
</table>
</div>
</body>
</html>

