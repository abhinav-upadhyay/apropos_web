<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/linux/style.css" type="text/css" media="all"/>
<title>
TAP::Parser::Source(3perl)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
TAP::Parser::Source(3perl)</td>
<td class="head-vol">
Perl Programmers Reference Guide</td>
<td class="head-rtitle">
TAP::Parser::Source(3perl)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>NAME</h1> TAP::Parser::Source - a TAP source &amp; meta data about it</div>
<div class="section">
<h1>VERSION</h1> Version 3.23</div>
<div class="section">
<h1>SYNOPSIS</h1><br/>
  use TAP::Parser::Source;<br/>
  my $source = TAP::Parser::Source-&gt;new;<br/>
  $source-&gt;raw( \'reference to raw TAP source' )<br/>
         -&gt;config( \%config )<br/>
         -&gt;merge( $boolean )<br/>
         -&gt;switches( \@switches )<br/>
         -&gt;test_args( \@args )<br/>
         -&gt;assemble_meta;<br/>
<br/>
  do { ... } if $source-&gt;meta-&gt;{is_file};<br/>
  # see assemble_meta for a full list of data available<br/>
</div>
<div class="section">
<h1>DESCRIPTION</h1> A TAP  <i>source</i> is something that produces a stream of TAP for the parser to consume, such as an executable file, a text file, an archive, an IO handle, a database, etc.  &quot;TAP::Parser::Source&quot;s encapsulate these  <i>raw</i> sources, and provide some useful meta data about them.  They are used by TAP::Parser::SourceHandlers, which do whatever is required to produce &amp; capture a stream of TAP from the  <i>raw</i> source, and package it up in a TAP::Parser::Iterator for the parser to consume.<div class="spacer">
</div>
Unless you're writing a new TAP::Parser::SourceHandler, a plugin or subclassing TAP::Parser, you probably won't need to use this module directly.</div>
<div class="section">
<h1>METHODS</h1><div class="subsection">
<h2>Class Methods</h2>  <i></i><i>&quot;new&quot;</i><i></i><div class="spacer">
</div>
<br/>
 my $source = TAP::Parser::Source-&gt;new;<br/>
<div class="spacer">
</div>
Returns a new &quot;TAP::Parser::Source&quot; object.</div>
<div class="subsection">
<h2>Instance Methods</h2>  <i></i><i>&quot;raw&quot;</i><i></i><div class="spacer">
</div>
<br/>
  my $raw = $source-&gt;raw;<br/>
  $source-&gt;raw( $some_value );<br/>
<div class="spacer">
</div>
Chaining getter/setter for the raw TAP source.  This is a reference, as it may contain large amounts of data (eg: raw TAP).<div class="spacer">
</div>
<i></i><i>&quot;meta&quot;</i><i></i><div class="spacer">
</div>
<br/>
  my $meta = $source-&gt;meta;<br/>
  $source-&gt;meta({ %some_value });<br/>
<div class="spacer">
</div>
Chaining getter/setter for meta data about the source.  This defaults to an empty hashref.  See &quot;assemble_meta&quot; for more info.<div class="spacer">
</div>
<i></i><i>&quot;has_meta&quot;</i><i></i><div class="spacer">
</div>
True if the source has meta data.<div class="spacer">
</div>
<i></i><i>&quot;config&quot;</i><i></i><div class="spacer">
</div>
<br/>
  my $config = $source-&gt;config;<br/>
  $source-&gt;config({ %some_value });<br/>
<div class="spacer">
</div>
Chaining getter/setter for the source's configuration, if any has been provided by the user.  How it's used is up to you.  This defaults to an empty hashref. See &quot;config_for&quot; for more info.<div class="spacer">
</div>
<i></i><i>&quot;merge&quot;</i><i></i><div class="spacer">
</div>
<br/>
  my $merge = $source-&gt;merge;<br/>
  $source-&gt;config( $bool );<br/>
<div class="spacer">
</div>
Chaining getter/setter for the flag that dictates whether STDOUT and STDERR should be merged (where appropriate).  Defaults to undef.<div class="spacer">
</div>
<i></i><i>&quot;switches&quot;</i><i></i><div class="spacer">
</div>
<br/>
  my $switches = $source-&gt;switches;<br/>
  $source-&gt;config([ @switches ]);<br/>
<div class="spacer">
</div>
Chaining getter/setter for the list of command-line switches that should be passed to the source (where appropriate).  Defaults to undef.<div class="spacer">
</div>
<i></i><i>&quot;test_args&quot;</i><i></i><div class="spacer">
</div>
<br/>
  my $test_args = $source-&gt;test_args;<br/>
  $source-&gt;config([ @test_args ]);<br/>
<div class="spacer">
</div>
Chaining getter/setter for the list of command-line arguments that should be passed to the source (where appropriate).  Defaults to undef.<div class="spacer">
</div>
<i></i><i>&quot;assemble_meta&quot;</i><i></i><div class="spacer">
</div>
<br/>
  my $meta = $source-&gt;assemble_meta;<br/>
<div class="spacer">
</div>
Gathers meta data about the &quot;raw&quot; source, stashes it in &quot;meta&quot; and returns it as a hashref.  This is done so that the TAP::Parser::SourceHandlers don't have to repeat common checks.  Currently this includes:<div class="spacer">
</div>
<br/>
    is_scalar =&gt; $bool,<br/>
    is_hash   =&gt; $bool,<br/>
    is_array  =&gt; $bool,<br/>
<br/>
    # for scalars:<br/>
    length =&gt; $n<br/>
    has_newlines =&gt; $bool<br/>
<br/>
    # only done if the scalar looks like a filename<br/>
    is_file =&gt; $bool,<br/>
    is_dir  =&gt; $bool,<br/>
    is_symlink =&gt; $bool,<br/>
    file =&gt; {<br/>
        # only done if the scalar looks like a filename<br/>
        basename =&gt; $string, # including ext<br/>
        dir      =&gt; $string,<br/>
        ext      =&gt; $string,<br/>
        lc_ext   =&gt; $string,<br/>
        # system checks<br/>
        exists  =&gt; $bool,<br/>
        stat    =&gt; [ ... ], # perldoc -f stat<br/>
        empty   =&gt; $bool,<br/>
        size    =&gt; $n,<br/>
        text    =&gt; $bool,<br/>
        binary  =&gt; $bool,<br/>
        read    =&gt; $bool,<br/>
        write   =&gt; $bool,<br/>
        execute =&gt; $bool,<br/>
        setuid  =&gt; $bool,<br/>
        setgid  =&gt; $bool,<br/>
        sticky  =&gt; $bool,<br/>
        is_file =&gt; $bool,<br/>
        is_dir  =&gt; $bool,<br/>
        is_symlink =&gt; $bool,<br/>
        # only done if the file's a symlink<br/>
        lstat      =&gt; [ ... ], # perldoc -f lstat<br/>
        # only done if the file's a readable text file<br/>
        shebang =&gt; $first_line,<br/>
    }<br/>
<br/>
  # for arrays:<br/>
  size =&gt; $n,<br/>
<div class="spacer">
</div>
<i></i><i>&quot;shebang&quot;</i><i></i><div class="spacer">
</div>
Get the shebang line for a script file.<div class="spacer">
</div>
<br/>
  my $shebang = TAP::Parser::Source-&gt;shebang( $some_script );<br/>
<div class="spacer">
</div>
May be called as a class method<div class="spacer">
</div>
<i></i><i>&quot;config_for&quot;</i><i></i><div class="spacer">
</div>
<br/>
  my $config = $source-&gt;config_for( $class );<br/>
<div class="spacer">
</div>
Returns &quot;config&quot; for the $class given.  Class names may be fully qualified or abbreviated, eg:<div class="spacer">
</div>
<br/>
  # these are equivalent<br/>
  $source-&gt;config_for( 'Perl' );<br/>
  $source-&gt;config_for( 'TAP::Parser::SourceHandler::Perl' );<br/>
<div class="spacer">
</div>
If a fully qualified $class is given, its abbreviated version is checked first.</div>
</div>
<div class="section">
<h1>AUTHORS</h1> Steve Purkis.</div>
<div class="section">
<h1>SEE ALSO</h1> TAP::Object, TAP::Parser, TAP::Parser::IteratorFactory, TAP::Parser::SourceHandler</div>
<table class="foot">
<tr>
<td class="foot-date">
2011-09-19</td>
<td class="foot-os">
perl v5.14.2</td>
</tr>
</table>
</div>
</body>
</html>

