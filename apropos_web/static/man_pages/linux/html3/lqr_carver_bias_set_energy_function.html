<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/linux/style.css" type="text/css" media="all"/>
<title>
LQR_CARVER_SET_ENERGY_FUNCT(3)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
LQR_CARVER_SET_ENERGY_FUNCT(3)</td>
<td class="head-vol">
LqR library API reference</td>
<td class="head-rtitle">
LQR_CARVER_SET_ENERGY_FUNCT(3)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>NAME</h1> lqr_carver_bias_set_energy_function - set a custom energy function for a LqrCarver object</div>
<div class="section">
<h1>SYNOPSIS</h1><br/>
#include &lt;lqr.h&gt;<br/>
<div class="spacer">
</div>
<div style="margin-left: 41.00ex;text-indent: -41.00ex;" class="spacer">
<b>LqrRetVal lqr_carver_set_energy_function(LqrCarver*&#160;</b><i>carver</i><b>, LqrEnergyFunc&#160;</b><i>en_func</i><b>, gint&#160;</b><i>radius</i><b>, LqrEnergyReaderType&#160;</b><i>reader_type</i><b>, gpointer&#160;</b><i>extra_data</i><b>);</b></div>
</div>
<div class="section">
<h1>DESCRIPTION</h1> The function  <b>lqr_carver_set_energy_function</b> assigns the energy function  <i>en_func</i> to the LqrCarver object pointed to by  <i>carver</i> (see below for more details on custom functions definitions).<div class="spacer">
</div>
The parameter  <i>radius</i> determines the size of the square region which affects the computation around each pixel (the side of the square will be 2 *  <i>radius</i> + 1 pixels long).<div class="spacer">
</div>
The parameter  <i>reader_type</i> sets the reader type used when reading the image, and therefore it determines what quantity will be passed on to the function  <i>en_func</i> (see below for more details on reader types).<div class="spacer">
</div>
The parameter  <i>extra_data</i> is a (void) pointer which can be used to pass on additional values to the function  <i>ef_func</i>.</div>
<div class="section">
<h1>CUSTOM FUNCTIONS DEFINITION</h1> The function  <i>en_func</i> must be of type LqrEnergyFunc, whose prototype is defined by:<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
typedef gfloat (*LqrEnergyFunc) (gint x, gint y, gint img_width, gint img_height, LqrReadingWindow * rwindow, gpointer extra_data);<br/>
                        <br/>
</div>
<div style="height: 1.00em;">
&#160;</div>
Such a function is expected to compute the energy at pixel  <i>x</i>,  <i>y</i> based on the knowledge of the current image size (obtained from  <i>width</i> and  <i>height</i>) and the content of the image in a square around that pixel, which is passed through the  <i>rwindow</i> reading window.<div class="spacer">
</div>
In most cases, the parameters  <i>x</i>,  <i>y</i>,  <i>width</i> and  <i>height</i> would only be used to determine whether the region under consideration is at the image boundary or not.<div class="spacer">
</div>
The  <i>rwindow</i> content must be read using the function  <b>lqr_rwindow_read</b>(3).</div>
<div class="section">
<h1>READER TYPES</h1> The  <b>LqrEnergyReaderType</b> is an enum which can take these values (also noted is the number of channels of the corresponging reading window):<div class="spacer">
</div>
LQR_ER_BRIGHTNESS<div style="margin-left: 4.00ex;">
brightness (1 channel)</div>
<div class="spacer">
</div>
LQR_ER_BRIGHTNESS<div style="margin-left: 4.00ex;">
luma (1 channel)</div>
<div class="spacer">
</div>
LQR_ER_RGBA<div style="margin-left: 4.00ex;">
RGBA (4 channels)</div>
<div class="spacer">
</div>
LQR_ER_CUSTOM<div style="margin-left: 4.00ex;">
read the normalised image channels as they are (as many channels as the image has)</div>
These readouts always return values beetween 0 and 1.<div class="spacer">
</div>
Note that these readouts may have special meanings depending on the image type:<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;for LQR_GREY_IMAGE, LQR_GREYA_IMAGE and LQR_CUSTOM_IMAGE images, the LQR_ER_LUMA readout will yield the same result as LQR_ER_BRIGHTNESS</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;for LQR_CUSTOM_IMAGE images, the LQR_ER_BRIGHTNESS readout will return the average pixel value (additive, i.e. if a black channel is present the channel values will be inverted and multiplied by the black channel inverse), multiplied by the alpha channel value.</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
&#8226;for LQR_CUSTOM_IMAGE images, the LQR_ER_RGBA readout  <i>cannot be used</i>: it will always return 0</div>
<div style="height: 1.00em;">
&#160;</div>
</div>
<div class="section">
<h1>RETURN VALUE</h1> The return value follows the Liquid Rescale library signalling system.</div>
<div class="section">
<h1>SEE ALSO</h1><div style="height: 1.00em;">
&#160;</div>
<b>lqr_carver_set_energy_function_builtin</b>(3), <b>lqr_carver_get_energy</b>(3), <b>lqr_rwindow_read</b>(3), <b>lqr_rwindow_get_read_t</b>(3), <b>lqr_rwindow_get_radius</b>(3), <b>lqr_rwindow_get_channels</b>(3)</div>
<div class="section">
<h1>COPYRIGHT</h1> Copyright &#169; 2007-2009 Carlo Baldassi<div style="height: 0.00em;">
&#160;</div>
</div>
<table class="foot">
<tr>
<td class="foot-date">
10 Maj 2009</td>
<td class="foot-os">
LqR library 0.4.1 API (3:1:3)</td>
</tr>
</table>
</div>
</body>
</html>

