<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/linux/style.css" type="text/css" media="all"/>
<title>
Moose::Cookbook::Extending::Recipe3(3pm)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
Moose::Cookbook::Extending::Recipe3(3pm)</td>
<td class="head-vol">
User Contributed Perl Documentation</td>
<td class="head-rtitle">
Moose::Cookbook::Extending::Recipe3(3pm)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>NAME</h1> Moose::Cookbook::Extending::Recipe3 - Providing an alternate base object class</div>
<div class="section">
<h1>VERSION</h1> version 2.0401</div>
<div class="section">
<h1>SYNOPSIS</h1><br/>
  package MyApp::Base;<br/>
  use Moose;<br/>
<br/>
  extends 'Moose::Object';<br/>
<br/>
  before 'new' =&gt; sub { warn &quot;Making a new &quot; . $_[0] };<br/>
<br/>
  no Moose;<br/>
<br/>
  package MyApp::UseMyBase;<br/>
  use Moose ();<br/>
  use Moose::Exporter;<br/>
<br/>
  Moose::Exporter-&gt;setup_import_methods( also =&gt; 'Moose' );<br/>
<br/>
  sub init_meta {<br/>
      shift;<br/>
      return Moose-&gt;init_meta( @_, base_class =&gt; 'MyApp::Base' );<br/>
  }<br/>
</div>
<div class="section">
<h1>DESCRIPTION</h1> A common extension is to provide an alternate base class. One way to do that is to make a &quot;MyApp::Base&quot; and add &quot;extends&#160;'MyApp::Base'&quot; to every class in your application. That's pretty tedious. Instead, you can create a Moose-alike module that sets the base object class to &quot;MyApp::Base&quot; for you.<div class="spacer">
</div>
Then, instead of writing &quot;use&#160;Moose&quot; you can write &quot;use&#160;MyApp::UseMyBase&quot;.<div class="spacer">
</div>
In this particular example, our base class issues some debugging output every time a new object is created, but you can think of some more interesting things to do with your own base class.<div class="spacer">
</div>
This uses the magic of Moose::Exporter. When we call &quot;Moose::Exporter-&gt;setup_import_methods( also =&gt; 'Moose' )&quot; it builds &quot;import&quot; and &quot;unimport&quot; methods for you. The &quot;also =&gt; 'Moose'&quot; bit says that we want to export everything that Moose does.<div class="spacer">
</div>
The &quot;import&quot; method that gets created will call our &quot;init_meta&quot; method, passing it &quot;for_caller =&gt; $caller&quot; as its arguments. The $caller is set to the class that actually imported us in the first place.<div class="spacer">
</div>
See the Moose::Exporter docs for more details on its API.</div>
<div class="section">
<h1>USING MyApp::UseMyBase</h1> To actually use our new base class, we simply use &quot;MyApp::UseMyBase&quot;  <i>instead</i> of &quot;Moose&quot;. We get all the Moose sugar plus our new base class.<div class="spacer">
</div>
<br/>
  package Foo;<br/>
<br/>
  use MyApp::UseMyBase;<br/>
<br/>
  has 'size' =&gt; ( is =&gt; 'rw' );<br/>
<br/>
  no MyApp::UseMyBase;<br/>
</div>
<div class="section">
<h1>CONCLUSION</h1> This is an awful lot of magic for a simple base class. You will often want to combine a metaclass trait with a base class extension, and that's when this technique is useful.</div>
<div class="section">
<h1>AUTHOR</h1> Moose is maintained by the Moose Cabal, along with the help of many contributors. See &quot;CABAL&quot; in Moose and &quot;CONTRIBUTORS&quot; in Moose for details.</div>
<div class="section">
<h1>COPYRIGHT AND LICENSE</h1> This software is copyright (c) 2011 by Infinity Interactive, Inc..<div class="spacer">
</div>
This is free software; you can redistribute it and/or modify it under the same terms as the Perl 5 programming language system itself.</div>
<table class="foot">
<tr>
<td class="foot-date">
2011-11-17</td>
<td class="foot-os">
perl v5.14.2</td>
</tr>
</table>
</div>
</body>
</html>

