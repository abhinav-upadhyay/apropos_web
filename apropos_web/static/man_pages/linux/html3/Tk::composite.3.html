<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/linux/style.css" type="text/css" media="all"/>
<title>
composite(3pm)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
composite(3pm)</td>
<td class="head-vol">
User Contributed Perl Documentation</td>
<td class="head-rtitle">
composite(3pm)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>NAME</h1> Tk::composite - Defining a new composite widget class</div>
<div class="section">
<h1>SYNOPSIS</h1><br/>
    package Tk::MyNewWidget;<br/>
<br/>
    use Tk:widgets qw/ list of Tk widgets /;<br/>
    use base qw/ Tk::Frame /;    # or Tk::Toplevel<br/>
<br/>
    Construct Tk::Widget 'MyNewWidget';<br/>
<br/>
    sub ClassInit {<br/>
        my( $class, $mw ) = @_;<br/>
        #... e.g., class bindings here ...<br/>
        $class-&gt;SUPER::ClassInit( $mw );<br/>
    }<br/>
<br/>
    sub Populate {<br/>
        my( $self, $args ) = @_;<br/>
<br/>
        my $flag = delete $args-&gt;{-flag};<br/>
        if( defined $flag ) {<br/>
            # handle -flag =&gt; xxx which can only be done at create<br/>
            # time the delete above ensures that new() does not try<br/>
            # and do  $self-&gt;configure( -flag =&gt; xxx );<br/>
        }<br/>
<br/>
        $self-&gt;SUPER::Populate( $args );<br/>
<br/>
        $self = $self-&gt;Component( ... );<br/>
<br/>
        $self-&gt;Delegates( ... );<br/>
<br/>
        $self-&gt;ConfigSpecs(<br/>
            '-cursor'    =&gt; [ SELF, 'cursor', 'Cursor',   undef ],<br/>
            '-something' =&gt; [ METHOD, dbName,  dbClass, default ],<br/>
            '-text'      =&gt; [ $label, dbName,  dbClass, default ],<br/>
            '-heading'   =&gt; [ {-text =&gt; $head},<br/>
                                heading, Heading,  'My Heading' ],<br/>
       ); <br/>
   }<br/>
<br/>
   sub something {<br/>
       my( $self, $value) = @_;<br/>
       if ( @_ &gt; 1 ) {<br/>
          # set it<br/>
       }<br/>
       return # current value<br/>
   }<br/>
<br/>
   1;<br/>
<br/>
   __END__<br/>
<br/>
<br/>
   =head1 NAME<br/>
<br/>
   Tk::Whatever - a whatever widget<br/>
<br/>
   =head1 SYNOPSIS<br/>
<br/>
     use Tk::Whatever;<br/>
<br/>
     $widget = $parent-&gt;Whatever(...);<br/>
<br/>
   =head1 DESCRIPTION<br/>
<br/>
   ...<br/>
</div>
<div class="section">
<h1>DESCRIPTION</h1> The intention behind a composite is to create a higher-level widget, sometimes called a &quot;super-widget&quot; or &quot;mega-widget&quot;.  Most often, a composite will be built upon other widgets by  <b>using</b> them, as opposed to specializing on them. For example, the supplied composite widget  <b>LabEntry</b> is <i>made of</i> an  <b>Entry</b> and a <b>Label</b>; it is neither a <i>kind-of</i> <b>Label</b> nor is it a  <i>kind-of</i> <b>Entry</b>.<div class="spacer">
</div>
Most of the work of a composite widget consistd in creating subwidgets, arranging to dispatch configure options to the proper subwidgets and manage composite-specific configure options.</div>
<div class="section">
<h1>GLORY DETAILS</h1> Depending on your Perl/Tk knowledge this section may be enlighting or confusing.<div class="subsection">
<h2>Composite Widget</h2> Since Perl/Tk is heavilly using an object-oriented approach, it is no suprise that creating a composite goes through a  <b></b><b><i>new()</i></b><b></b> method. However, the composite does not normally define a  <b></b><b><i>new()</i></b><b></b> method itself: it is usually sufficient to simply inherit it from  <b>Tk::Widget</b>.<div class="spacer">
</div>
This is what happens when the composite uses<div class="spacer">
</div>
<br/>
    use base qw/ Tk::Frame /;  # or Tk::Toplevel<br/>
<div class="spacer">
</div>
to specify its inheritance chain.  To complete the initialisation of the widget, it must call the  <b>Construct</b> method from class <b>Widget</b>.  That method accepts the name of the new class to create, i.e. the package name of your composite widget:<div class="spacer">
</div>
<br/>
    Construct Tk::Widget 'MyNewWidget';<br/>
<div class="spacer">
</div>
Here, <b>MyNewWidget</b> is the package name (aka the widget's <b>class</b>).  This will define a constructor method for  <b>MyNewWidget</b>, normally named after the widget's class.  Instanciating that composite in client code would the look like:<div class="spacer">
</div>
<br/>
    $mw = MainWindow-&gt;new;       # creates a top-level MainWindow<br/>
<br/>
    $self = $mw-&gt;MyNewWidget();  # creates an instance of the<br/>
                                 # composite widget MyNewWidget<br/>
<div class="spacer">
</div>
Whenever a composite is instanciated in client code, &quot;Tk::Widget::new()&quot; will be invoked via the widget's class constructor.  That  <b>new</b> method will call<div class="spacer">
</div>
<br/>
    $self-&gt;Populate(\%args);<br/>
<div class="spacer">
</div>
where <i></i><i>%args</i><i></i> is the arguments passed to the widget's constructor.  Note that  <b>Populate</b> receives a <b>reference</b> to the hash array containing all arguments.<div class="spacer">
</div>
<b>Populate</b> is typically defined in the composite class (package), which creates the characteristic subwidgets of the class.</div>
<div class="subsection">
<h2>Creating Subwidgets</h2> Subwidget creation happens usually in  <b></b><b><i>Populate()</i></b><b></b>. The composite usually calls the subwidget's constructor method either directly, for &quot;private&quot; subwidgets, or indirectly through the  <b>Component</b> method for subwidgets that should be advertised to clients.<div class="spacer">
</div>
<b>Populate</b> may call <b>Delegates</b> to direct calls to methods of chosen subwidgets. For simple composites, typically most if not all methods are directed to a single subwidget - e.g.  <b>ScrListbox</b> directs all methods to the core  <b>Listbox</b> so that <i></i><i>$composite</i><i></i>-&gt;<b>get</b>(...) calls  <i></i><i>$listbox</i><i></i>-&gt;<b>get</b>(...).</div>
<div class="subsection">
<h2>Defining mega-widget options</h2>  <b>Populate</b> should also call <b></b><b><i>ConfigSpecs()</i></b><b></b> to specify the way that configure-like options should be handled in the composite. Once  <b>Populate</b> returns, method <b>Tk::Frame::ConfigDefault</b> walks through the  <b>ConfigSpecs</b> entries and populates %$args hash with defaults for options from X resources ( <i>.Xdefaults</i>, etc).<div class="spacer">
</div>
When  <b>Populate</b> returns to <b></b><b><i>Tk::Widget::new()</i></b><b></b>, a call to  <b></b><b>$self</b><b></b>-&gt;<i>configure</i>(%$args) is made which sets *all* the options.</div>
</div>
<div class="section">
<h1>SEE ALSO</h1> Tk::ConfigSpecs Tk::mega Tk::Derived</div>
<table class="foot">
<tr>
<td class="foot-date">
2007-02-10</td>
<td class="foot-os">
perl v5.14.2</td>
</tr>
</table>
</div>
</body>
</html>

