<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/linux/style.css" type="text/css" media="all"/>
<title>
Tcl-perl(3pm)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
Tcl-perl(3pm)</td>
<td class="head-vol">
User Contributed Perl Documentation</td>
<td class="head-rtitle">
Tcl-perl(3pm)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>NAME</h1> Tcl vs perl - very old suspect documentation on porting.</div>
<div class="section">
<h1>DESCRIPTION</h1> This isn't really a .pod yet, nor is it Tcl vs perl it is a copy of John's comparison of Malcolm's original perl/Tk port with the current one. It is also out-of-date in places.<div class="spacer">
</div>
<br/>
  From: john@WPI.EDU (John Stoffel )<br/>
<br/>
  Here are some thoughts on the new Tk extension and how I think the<br/>
  organization of the commands looks.  Mostly, I'm happy with it, it<br/>
  makes some things more organized and more consistent with tcl/tk, but<br/>
  since the overlying language is so different, I don't think we need to<br/>
  follow exactly the tcl/tk model for how to call the language.<br/>
<br/>
  The basic structure of the Tk program is:<br/>
<br/>
      require Tk;<br/>
<br/>
      $top = MainWindow-&gt;new();<br/>
<br/>
      #<br/>
      # create widgets<br/>
      #<br/>
<br/>
      Tk::MainLoop;<br/>
<br/>
      sub method1 {<br/>
      }<br/>
<br/>
      sub methodN {<br/>
      }<br/>
<br/>
  This is pretty much the same as tkperl5a5, with some cosmetic naming<br/>
  changes, and some more useful command name and usage changes.  A quick<br/>
  comparison in no particular order follows:<br/>
<br/>
  tkperl5a5                             Tk<br/>
  -------------------------------       -----------------------------------<br/>
  $top=tkinit(name,display,sync);       $top=MainWindow-&gt;new();<br/>
<br/>
  tkpack $w, ... ;              $w-&gt;pack(...)<br/>
<br/>
  $w = Class::new($top, ...);   $w = $top-&gt;Class(...);<br/>
<br/>
  tkmainloop;                   Tk::MainLoop;<br/>
<br/>
  tkbind($w,&quot;&lt;key&gt;&quot;,sub);               $w-&gt;bind(&quot;&lt;key&gt;&quot;,sub);<br/>
<br/>
  tkdelete($w, ...);            $w-&gt;delete(...);<br/>
<br/>
  $w-&gt;scanmark(...);            $w-&gt;scan(&quot;mark&quot;, ...);<br/>
<br/>
  $w-&gt;scandragto(...);          $w-&gt;scan(&quot;dragto&quot;, ...);<br/>
<br/>
  $w-&gt;tkselect();                       $w-&gt;Select();<br/>
<br/>
  $w-&gt;selectadjust(...);                $w-&gt;selection(&quot;adjust&quot;, ...);<br/>
<br/>
  $w-&gt;selectto(...);            $w-&gt;selection(&quot;to&quot;, ...);<br/>
<br/>
  $w-&gt;selectfrom(...);          $w-&gt;selection(&quot;from&quot;, ...);<br/>
<br/>
  $w-&gt;tkindex(...);             $w-&gt;index(...);<br/>
<br/>
  tclcmd(&quot;xxx&quot;,...);              &amp;Tk::xxx(...)    # all Tk commands, but no Tcl at all<br/>
<br/>
  tclcmd(&quot;winfo&quot;, xxx, $w, ...);  $w-&gt;xxx(...);<br/>
<br/>
                                $w-&gt;mark(...);<br/>
<br/>
                                $w-&gt;tag(...);<br/>
<br/>
  $w-&gt;grabstatus();             $w-&gt;grab(&quot;status&quot;);<br/>
<br/>
  $w-&gt;grabrelease(...);         $w-&gt;grab(&quot;release&quot;, ...);<br/>
<br/>
  focus($w);                    $w-&gt;focus;<br/>
<br/>
  update();                     Tk-&gt;update();<br/>
<br/>
  idletasks();                  Tk-&gt;update(&quot;idletasks&quot;);<br/>
<br/>
  wm(&quot;cmd&quot;,$w, ...);            $w-&gt;cmd(...);<br/>
<br/>
  destroy($w);                  $w-&gt;destroy();<br/>
<br/>
                                Tk::option(...);<br/>
                                  $w-&gt;OptionGet(name,Class)<br/>
<br/>
                                $w-&gt;place(...)<br/>
<br/>
                                Tk::property(...);<br/>
<br/>
  $w = Entry::new($parent,...)<br/>
<br/>
  is now<br/>
<br/>
  $w = $parent-&gt;Entry(...)<br/>
<br/>
  As this allows new to be inherited from a Window class.<br/>
<br/>
    -method=&gt;x,-slave=&gt;y<br/>
<br/>
   is now<br/>
<br/>
    -command =&gt; [x,y]<br/>
<br/>
  1st element of list is treated as &quot;method&quot; if y is an object reference.<br/>
  (You can have -command =&gt; [a,b,c,d,e] too; b..e get passed as args).<br/>
<br/>
  Object references are now hashes rather than scalars and there<br/>
  is only ever one such per window.  The Tcl_CmdInfo and PathName<br/>
  are entries in the hash.<br/>
<br/>
  (This allows derived classes to<br/>
  re-bless the hash and keep their on stuff in it too.)<br/>
<br/>
  Tk's &quot;Tcl_Interp&quot; is in fact a ref to &quot;.&quot; window.<br/>
  You can find all the Tk windows descended from it as their object<br/>
  references get added (by PathName) into this hash.<br/>
  $w-&gt;MainWindow returns this hash from any window.<br/>
<br/>
  I think that it should extend to multiple tkinits / Tk-&gt;news<br/>
  with different Display's - if Tk code does.<br/>
<br/>
  Finally &quot;bind&quot; passes window as &quot;extra&quot; (or only)<br/>
  argument. Thus<br/>
<br/>
  Tk::Button-&gt;bind(&lt;Any-Enter&gt;,&quot;Enter&quot;);<br/>
<br/>
  Binds Enter events to Tk::Button::Enter by default<br/>
  but gets called as $w-&gt;Enter so derived class of Button can just<br/>
  define its own Enter method. &amp;EvWref and associated globals and race<br/>
  conditions are no longer needed.<br/>
<br/>
  One thing to beware of : commands bound to events with $widget-&gt;bind<br/>
  follow same pattern, but get passed extra args :<br/>
<br/>
  $widget-&gt;bind(&lt;Any-1&gt;,[sub {print shift}, $one, $two ]);<br/>
<br/>
  When sub gets called it has :<br/>
<br/>
     $widget $one $two<br/>
<br/>
  passed.<br/>
<br/>
  1st extra arg is reference to the per-widget hash that serves as the<br/>
  perl object for the widget.<br/>
<br/>
  Every time an XEvent a reference to a special class is placed<br/>
  in the widget hash. It can be retrieved by $w-&gt;XEvent method.<br/>
<br/>
  The methods of the XEvent class are the<br/>
  Tcl/Tk % special characters.<br/>
<br/>
  Thus:<br/>
<br/>
  $widget-&gt;bind(&lt;Any-KeyPress&gt;,<br/>
                sub {<br/>
                 my $w = shift;<br/>
                 my $e = $w-&gt;XEvent;<br/>
                 print $w-&gt;PathName,&quot; &quot;,$e-&gt;A,&quot; pressed ,$e-&gt;xy,&quot;\n&quot;);<br/>
                });<br/>
<br/>
  XEvent-&gt;xy is a special case which returns &quot;@&quot; . $e-&gt;x . &quot;,&quot; . $e-&gt;y<br/>
  which is common in Text package.<br/>
<br/>
  Because of passing a blessed widget hash to &quot;bound&quot; subs they can be<br/>
  bound to (possibly inherited) methods of the widget's class:<br/>
<br/>
  Class-&gt;bind(&lt;Any-Down&gt;,Down);<br/>
<br/>
  sub Class::Down<br/>
  {<br/>
   my $w = shift;<br/>
   # handle down arrow<br/>
  }<br/>
<br/>
  Also:<br/>
<br/>
  -command and friends can take a list the 1st element can be a ref to<br/>
  as sub or a method name. Remaining elements are passed as args to the<br/>
  sub at &quot;invoke&quot; time. Thus :<br/>
<br/>
  $b= $w-&gt;Button(blah blah, '-command' =&gt; [sub{print shift} , $fred ]);<br/>
<br/>
  Should do the trick, provided $fred is defined at time of button creation.<br/>
<br/>
  Thus 1st element of list is equivalent to Malcolm's -method and second<br/>
  would be his -slave.  Any further elements are a bonus and avoid<br/>
  having to pass ref to an array/hash as a slave.<br/>
</div>
<table class="foot">
<tr>
<td class="foot-date">
2007-02-10</td>
<td class="foot-os">
perl v5.14.2</td>
</tr>
</table>
</div>
</body>
</html>

