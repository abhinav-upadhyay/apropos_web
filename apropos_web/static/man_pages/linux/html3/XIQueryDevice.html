<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/linux/style.css" type="text/css" media="all"/>
<title>
XIQUERYDEVICE(3)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
XIQUERYDEVICE(3)</td>
<td class="head-vol">
&#160;</td>
<td class="head-rtitle">
XIQUERYDEVICE(3)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>NAME</h1> XIQueryDevice, XIFreeDeviceInfo - get information about devices.</div>
<div class="section">
<h1>SYNOPSIS</h1><br/>
#include &lt;X11/extensions/XInput2.h&gt;<br/>
<div style="height: 1.00em;">
&#160;</div>
<br/>
XIDeviceInfo* XIQueryDevice( Display *display,<br/>
                             int deviceid,<br/>
                             int *ndevices_return);<br/>
<div style="height: 1.00em;">
&#160;</div>
<br/>
XIFreeDeviceInfo( XIDeviceInfo *info);<br/>
<div style="height: 1.00em;">
&#160;</div>
<br/>
deviceid<br/>
       Specifies the device to query or XIAllDevices or<br/>
       XIAllMasterDevices.<br/>
<div style="height: 1.00em;">
&#160;</div>
<br/>
display<br/>
       Specifies the connection to the X server.<br/>
<div style="height: 1.00em;">
&#160;</div>
<br/>
ndevices_return<br/>
       Returns the number of devices returned.<br/>
<div style="height: 1.00em;">
&#160;</div>
<br/>
info<br/>
       A list of device XIDeviceInfo structs to be freed.<br/>
</div>
<div class="section">
<h1>DESCRIPTION</h1><div style="margin-left: 4.00ex;">
<br/>
The XIQueryDevice returns information about one or more input<br/>
devices. If the deviceid specifies a device, ndevices_return is<br/>
1 and the returned information describes only the requested<br/>
device. If deviceid is XIAllDevices or XIAllMasterDevices,<br/>
ndevices_return is the number of devices or master devices,<br/>
respectively, and the returned information represents all<br/>
devices or all master devices, respectively.<br/>
</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
To free the XIDeviceInfo array returned by XIQueryDevice, use<br/>
XIFreeDeviceInfo.<br/>
</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
For each input device requested, the XIQueryDevice returns an<br/>
XIDeviceInfo structure. Each structure contains information<br/>
about the capabilities of one input device available to the<br/>
server.<br/>
</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
typedef struct<br/>
{<br/>
    int                 deviceid;<br/>
    char                *name;<br/>
    int                 use;<br/>
    int                 attachment;<br/>
    Bool                enabled;<br/>
    int                 num_classes;<br/>
    XIAnyClassInfo      **classes;<br/>
} XIDeviceInfo;<br/>
</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
The deviceid is the numeric unique id of the device. A deviceid<br/>
is unique for the life-time of a device but a server may re-use<br/>
the id once a device has been removed.<br/>
</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
The name points to a null-terminated string specifying the<br/>
identifier of the device.<br/>
</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
The use and attachment fields specify the type of the device<br/>
and the current attachment or pairing.<br/>
- If use is XIMasterPointer, the device is a master pointer and<br/>
  attachment specifies the deviceid of the paired master<br/>
  keyboard.<br/>
- If use is XIMasterKeyboard, the device is a master keyboard,<br/>
  and the attachment field specifies the paired master pointer.<br/>
- If use is XISlavePointer, the device is a slave device and<br/>
  currently attached to the master pointer specified in<br/>
  attachement.<br/>
- If use is XISlaveKeyboard, the device is a slave device an<br/>
  currently attached to the master keyboard specified in<br/>
  attachment.<br/>
- If use is XIFloatingSlave, the device is a slave device<br/>
  currently not attached to any master device. The value of the<br/>
  attachment field for floating slave devices is undefined.<br/>
</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
The enabled field specifies if the device is currently enabled<br/>
and can send events. Disabled devices will not send events.<br/>
</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
The num_classes field specifies the number of input classes<br/>
pointed to by classes. The first two fields of all input<br/>
classes are identical.<br/>
</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
typedef struct<br/>
{<br/>
    int         type;<br/>
    int         sourceid;<br/>
} XIAnyClassInfo;<br/>
</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
The type field specifies the type of the input class.<br/>
Currently, the following types are defined:<br/>
    XIKeyClass, XIButtonClass, XIValuatorClass, XIScrollClass,<br/>
    XITouchClass<br/>
</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
In the future, additional types may be added. Clients are<br/>
required to ignore unknown input classes.<br/>
</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
The sourceid is the deviceid this class originated from. For<br/>
master devices, the sourceid is typically the id of the slave<br/>
device currently sending events. For slave devices, the<br/>
sourceid is typically the device's id.<br/>
</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
A device may have zero or one XIButtonClass, denoting the<br/>
device's capability to send button events.<br/>
</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
typedef struct {<br/>
    int           mask_len;<br/>
    unsigned char *mask;<br/>
} XIButtonState;<br/>
</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
typedef struct<br/>
{<br/>
    int         type;<br/>
    int         sourceid;<br/>
    int         num_buttons;<br/>
    Atom        *labels;<br/>
    XIButtonState state;<br/>
} XIButtonClassInfo;<br/>
</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
The num_buttons field specifies the number of buttons available<br/>
on this device. A device that has an XIButtonClass must have at<br/>
least one button.<br/>
</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
labels is a list of num_buttons Atoms specifying the button<br/>
labels for this device. If the label is not None, then the<br/>
label specifies the type of button in physical device order<br/>
(i.e. as the buttons are numbered on the physical input<br/>
device).<br/>
</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
The state is the current button state as seen by clients (i.e.<br/>
after button mapping is applied). The mask_len field specifies<br/>
the length of mask in bytes. For each button on the device, the<br/>
respective bit in mask is set if the button is currently<br/>
logically down.<br/>
</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
A device may have zero or one XIKeyClass, denoting the device's<br/>
capability to send key events.<br/>
</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
typedef struct<br/>
{<br/>
    int         type;<br/>
    int         sourceid;<br/>
    int         num_keycodes;<br/>
    int         *keycodes;<br/>
} XIKeyClassInfo;<br/>
</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
The num_keycodes field specifies the number of keycodes<br/>
available on this device. A device that has an XIKeyClass must<br/>
have at least one keycode.<br/>
</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
keycodes is a list of num_keycodes keycodes the device may<br/>
send.<br/>
</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
A device may have zero or more XIValuatorClass, denoting the<br/>
device's capability to send coordinates.<br/>
</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
typedef struct<br/>
{<br/>
    int         type;<br/>
    int         sourceid;<br/>
    int         number;<br/>
    Atom        label;<br/>
    double      min;<br/>
    double      max;<br/>
    double      value;<br/>
    int         resolution;<br/>
    int         mode;<br/>
} XIValuatorClassInfo;<br/>
</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
The number field specifies the number of the axis on the<br/>
physical device.<br/>
</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
If the label field is not None, the value of label is an Atom<br/>
describing the axis.<br/>
</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
min and max are the minimum and maximum values allowed on this<br/>
axis. If both are zero, no minumum or maximum values are set on<br/>
this device. value is the current value of this axis.<br/>
</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
The resolution field specifies the resolution of the device in<br/>
units/m.<br/>
</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
The mode specifies the mode of this axis. If the mode is<br/>
XIModeAbsolute this axis sends absolute coordinates. If the<br/>
mode is XIModeRelative, this device sends relative coordinates.<br/>
</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
typedef struct<br/>
{<br/>
    int         type;<br/>
    int         sourceid;<br/>
    int         number;<br/>
    int         scroll_type;<br/>
    double      increment;<br/>
    int         flags;<br/>
} XIScrollClassInfo;<br/>
</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
This class describes scrolling capability on a valuator. For<br/>
each XIScrollClassInfo, an XIValuatorClassInfo with the same<br/>
number is present on the device.<br/>
</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
The number field specifies the valuator number on the physical<br/>
device that this scroll information applies to. See the<br/>
respective XIValuatorClassInfo for detailed information on this<br/>
valuator.<br/>
</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
The scroll_type field specifies the type of scrolling, either<br/>
XIScrollTypeVertical or XIScrollTypeHorizontal.<br/>
</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
The increment specifies the value change considered one unit of<br/>
scrolling down.<br/>
</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
The flags field specifies flags that apply to this scrolling<br/>
information:<br/>
</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
If XIScrollFlagNoEmulation is set, the server will not<br/>
emulate legacy button events for valuator changes on this<br/>
valuator.<br/>
</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
If XIScrollFlagPreferred is set, this axis is the<br/>
preferred axis for this scroll type and will be used for<br/>
the emulation of XI_Motion events when the driver submits<br/>
legacy scroll button events.<br/>
</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
typedef struct<br/>
{<br/>
    int         type;<br/>
    int         sourceid;<br/>
    int         mode;<br/>
    int         num_touches;<br/>
} XITouchClassInfo;<br/>
</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
A device may have zero or one XITouchClassInfo, denoting<br/>
multi-touch capability on the device. A device with a XITouchClassInfo<br/>
may send TouchBegin, TouchUpdate, TouchEnd and TouchOwnership events.<br/>
</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
The mode field is either XIDirectTouch for direct-input touch devices<br/>
such as touchscreens or XIDependentTouch for indirect input devices such<br/>
as touchpads. For XIDirectTouch devices, touch events are sent to window<br/>
at the position the touch occured. For XIDependentTouch devices, touch<br/>
events are sent to the window at the position of the device's sprite.<br/>
</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
The num_touches field defines the maximum number of simultaneous touches<br/>
the device supports. A num_touches of 0 means the maximum number of<br/>
simultaneous touches is undefined or unspecified. This field should be<br/>
used as a guide only, devices will lie about their capabilities.<br/>
</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
A device with an XITouchClassInfo may still send pointer events. The<br/>
valuators must be defined with the respective XIValuatorClass<br/>
classes. A valuator may send both pointer and touch-events.<br/>
</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
XIQueryDevice can generate a BadDevice error.<br/>
</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 4.00ex;">
<br/>
XIFreeDeviceInfo frees the information returned by<br/>
XIQueryDevice.<br/>
</div>
</div>
<div class="section">
<h1>DIAGNOSTICS</h1><div style="margin-left: 4.00ex;">
<br/>
BadDevice<br/>
       An invalid device was specified. The device does not<br/>
       exist or is not a pointer device.<br/>
</div>
</div>
<table class="foot">
<tr>
<td class="foot-date">
03/09/2013</td>
<td class="foot-os">
&#160;</td>
</tr>
</table>
</div>
</body>
</html>

