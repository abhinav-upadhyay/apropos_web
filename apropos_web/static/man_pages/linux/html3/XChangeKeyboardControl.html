<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/linux/style.css" type="text/css" media="all"/>
<title>
XChangeKeyboardControl(3)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
XChangeKeyboardControl(3)</td>
<td class="head-vol">
XLIB FUNCTIONS</td>
<td class="head-rtitle">
XChangeKeyboardControl(3)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>NAME</h1> XChangeKeyboardControl, XGetKeyboardControl, XAutoRepeatOn, XAutoRepeatOff, XBell, XQueryKeymap, XKeyboardControl - manipulate keyboard settings and keyboard control structure</div>
<div class="section">
<h1>SYNTAX</h1><div style="margin-left: 5.00ex;text-indent: -5.00ex;" class="spacer">
int XChangeKeyboardControl(Display *<i>display</i>, unsigned long  <i>value_mask</i>, XKeyboardControl *<i>values</i>);</div>
<div class="spacer">
</div>
<div style="margin-left: 5.00ex;text-indent: -5.00ex;" class="spacer">
int XGetKeyboardControl(Display *<i>display</i>, XKeyboardState * <i>values_return</i>);</div>
<div class="spacer">
</div>
<div style="margin-left: 5.00ex;text-indent: -5.00ex;" class="spacer">
int XAutoRepeatOn(Display *<i>display</i>);</div>
<div class="spacer">
</div>
<div style="margin-left: 5.00ex;text-indent: -5.00ex;" class="spacer">
int XAutoRepeatOff(Display *<i>display</i>);</div>
<div class="spacer">
</div>
<div style="margin-left: 5.00ex;text-indent: -5.00ex;" class="spacer">
int XBell(Display *<i>display</i>, int <i>percent</i>);</div>
<div class="spacer">
</div>
<div style="margin-left: 5.00ex;text-indent: -5.00ex;" class="spacer">
int XQueryKeymap(Display *<i>display</i>, char <i>keys_return</i>[32]);</div>
</div>
<div class="section">
<h1>ARGUMENTS</h1><dl>
<dt>
<i>display</i></dt>
<dd>
Specifies the connection to the X server.</dd>
</dl>
<dl>
<dt>
<i>keys_return</i></dt>
<dd>
Returns an array of bytes that identifies which keys are pressed down. Each bit represents one key of the keyboard.</dd>
</dl>
<dl>
<dt>
<i>percent</i></dt>
<dd>
Specifies the volume for the bell, which can range from -100 to 100 inclusive.</dd>
</dl>
<dl>
<dt>
<i>value_mask</i></dt>
<dd>
Specifies which controls to change. This mask is the bitwise inclusive OR of the valid control mask bits.</dd>
</dl>
<dl>
<dt>
<i>values</i></dt>
<dd>
Specifies one value for each bit set to 1 in the mask.</dd>
</dl>
<dl>
<dt>
<i>values_return</i></dt>
<dd>
Returns the current keyboard controls in the specified  <i>XKeyboardState</i> structure.</dd>
</dl>
</div>
<div class="section">
<h1>DESCRIPTION</h1> The  <i>XChangeKeyboardControl</i> function controls the keyboard characteristics defined by the  <i>XKeyboardControl</i> structure. The value_mask argument specifies which values are to be changed.<div class="spacer">
</div>
<i>XChangeKeyboardControl</i> can generate  <i>BadMatch</i> and  <i>BadValue</i> errors.<div class="spacer">
</div>
The  <i>XGetKeyboardControl</i> function returns the current control values for the keyboard to the  <i>XKeyboardState</i> structure.<div class="spacer">
</div>
The  <i>XAutoRepeatOn</i> function turns on auto-repeat for the keyboard on the specified display.<div class="spacer">
</div>
The  <i>XAutoRepeatOff</i> function turns off auto-repeat for the keyboard on the specified display.<div class="spacer">
</div>
The  <i>XBell</i> function rings the bell on the keyboard on the specified display, if possible. The specified volume is relative to the base volume for the keyboard. If the value for the percent argument is not in the range -100 to 100 inclusive, a  <i>BadValue</i> error results. The volume at which the bell rings when the percent argument is nonnegative is:<dl>
<dt>
</dt>
<dd>
base - [(base * percent) / 100] + percent</dd>
</dl>
<div class="spacer">
</div>
The volume at which the bell rings when the percent argument is negative is:<dl>
<dt>
</dt>
<dd>
base + [(base * percent) / 100]</dd>
</dl>
<div class="spacer">
</div>
To change the base volume of the bell, use  <i>XChangeKeyboardControl</i>.<div class="spacer">
</div>
<i>XBell</i> can generate a  <i>BadValue</i> error.<div class="spacer">
</div>
The  <i>XQueryKeymap</i> function returns a bit vector for the logical state of the keyboard, where each bit set to 1 indicates that the corresponding key is currently pressed down. The vector is represented as 32 bytes. Byte N (from 0) contains the bits for keys 8N to 8N + 7 with the least significant bit in the byte representing key 8N.<div class="spacer">
</div>
Note that the logical state of a device (as seen by client applications) may lag the physical state if device event processing is frozen.</div>
<div class="section">
<h1>STRUCTURES</h1> The  <i>XKeyboardControl</i> structure contains:<div class="spacer">
</div>
/* Mask bits for ChangeKeyboardControl */<table class="tbl">
<col style="width: 9.00ex;"/>
<col style="width: 27.00ex;"/>
<col style="width: 7.00ex;"/>
<tbody>
<tr>
<td>
#define</td>
<td>
<i>KBKeyClickPercent</i></td>
<td>
(1L&lt;&lt;0)</td>
</tr>
<tr>
<td>
#define</td>
<td>
<i>KBBellPercent</i></td>
<td>
(1L&lt;&lt;1)</td>
</tr>
<tr>
<td>
#define</td>
<td>
<i>KBBellPitch</i></td>
<td>
(1L&lt;&lt;2)</td>
</tr>
<tr>
<td>
#define</td>
<td>
<i>KBBellDuration</i></td>
<td>
(1L&lt;&lt;3)</td>
</tr>
<tr>
<td>
#define</td>
<td>
<i>KBLed</i></td>
<td>
(1L&lt;&lt;4)</td>
</tr>
<tr>
<td>
#define</td>
<td>
<i>KBLedMode</i></td>
<td>
(1L&lt;&lt;5)</td>
</tr>
<tr>
<td>
#define</td>
<td>
<i>KBKey</i></td>
<td>
(1L&lt;&lt;6)</td>
</tr>
<tr>
<td>
#define</td>
<td>
<i>KBAutoRepeatMode</i></td>
<td>
(1L&lt;&lt;7)</td>
</tr>
</tbody>
</table>
<br/>
/* Values */<div class="spacer">
</div>
<br/>
typedef struct {<br/>
	int key_click_percent;<br/>
	int bell_percent;<br/>
	int bell_pitch;<br/>
	int bell_duration;<br/>
	int led;<br/>
	int led_mode;	/* LedModeOn, LedModeOff */<br/>
	int key;<br/>
	int auto_repeat_mode;	/* AutoRepeatModeOff, AutoRepeatModeOn, <br/>
                            	AutoRepeatModeDefault */<br/>
} XKeyboardControl;<br/>
<div style="height: 0.00ex;">
&#160;</div>
<br/>
<div class="spacer">
</div>
The key_click_percent member sets the volume for key clicks between 0 (off) and 100 (loud) inclusive, if possible. A setting of -1 restores the default. Other negative values generate a  <i>BadValue</i> error.<div class="spacer">
</div>
The bell_percent sets the base volume for the bell between 0 (off) and 100 (loud) inclusive, if possible. A setting of -1 restores the default. Other negative values generate a  <i>BadValue</i> error. The bell_pitch member sets the pitch (specified in Hz) of the bell, if possible. A setting of -1 restores the default. Other negative values generate a  <i>BadValue</i> error. The bell_duration member sets the duration of the bell specified in milliseconds, if possible. A setting of -1 restores the default. Other negative values generate a  <i>BadValue</i> error.<div class="spacer">
</div>
If both the led_mode and led members are specified, the state of that LED is changed, if possible. The led_mode member can be set to  <i>LedModeOn</i> or  <i>LedModeOff</i>. If only led_mode is specified, the state of all LEDs are changed, if possible. At most 32 LEDs numbered from one are supported. No standard interpretation of LEDs is defined. If led is specified without led_mode, a  <i>BadMatch</i> error results.<div class="spacer">
</div>
If both the auto_repeat_mode and key members are specified, the auto_repeat_mode of that key is changed (according to  <i>AutoRepeatModeOn</i>,  <i>AutoRepeatModeOff</i>, or  <i>AutoRepeatModeDefault</i>), if possible. If only auto_repeat_mode is specified, the global auto_repeat_mode for the entire keyboard is changed, if possible, and does not affect the per-key settings. If a key is specified without an auto_repeat_mode, a  <i>BadMatch</i> error results. Each key has an individual mode of whether or not it should auto-repeat and a default setting for the mode. In addition, there is a global mode of whether auto-repeat should be enabled or not and a default setting for that mode. When global mode is  <i>AutoRepeatModeOn</i>, keys should obey their individual auto-repeat modes. When global mode is  <i>AutoRepeatModeOff</i>, no keys should auto-repeat. An auto-repeating key generates alternating  <i>KeyPress</i> and  <i>KeyRelease</i> events. When a key is used as a modifier, it is desirable for the key not to auto-repeat, regardless of its auto-repeat setting.<div class="spacer">
</div>
The  <i>XKeyboardState</i> structure contains:<div class="spacer">
</div>
<br/>
typedef struct {<br/>
	int key_click_percent;<br/>
	int bell_percent;<br/>
	unsigned int bell_pitch, bell_duration;<br/>
	unsigned long led_mask;<br/>
	int global_auto_repeat;<br/>
	char auto_repeats[32];<br/>
} XKeyboardState;<br/>
<div style="height: 0.00ex;">
&#160;</div>
<br/>
<div class="spacer">
</div>
For the LEDs, the least significant bit of led_mask corresponds to LED one, and each bit set to 1 in led_mask indicates an LED that is lit. The global_auto_repeat member can be set to  <i>AutoRepeatModeOn</i> or  <i>AutoRepeatModeOff</i>. The auto_repeats member is a bit vector. Each bit set to 1 indicates that auto-repeat is enabled for the corresponding key. The vector is represented as 32 bytes. Byte N (from 0) contains the bits for keys 8N to 8N + 7 with the least significant bit in the byte representing key 8N.</div>
<div class="section">
<h1>DIAGNOSTICS</h1><dl>
<dt>
<i>BadMatch</i></dt>
<dd>
Some argument or pair of arguments has the correct type and range but fails to match in some other way required by the request.</dd>
</dl>
<dl>
<dt>
<i>BadValue</i></dt>
<dd>
Some numeric value falls outside the range of values accepted by the request. Unless a specific range is specified for an argument, the full range defined by the argument's type is accepted.  Any argument defined as a set of alternatives can generate this error.</dd>
</dl>
</div>
<div class="section">
<h1>SEE ALSO</h1> XChangeKeyboardMapping(3), XSetPointerMapping(3)<div style="height: 0.00em;">
&#160;</div>
<i>Xlib - C Language X Interface</i></div>
<table class="foot">
<tr>
<td class="foot-date">
libX11 1.4.99.1</td>
<td class="foot-os">
X Version 11</td>
</tr>
</table>
</div>
</body>
</html>

