<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/linux/style.css" type="text/css" media="all"/>
<title>
Appender::Buffer(3pm)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
Appender::Buffer(3pm)</td>
<td class="head-vol">
User Contributed Perl Documentation</td>
<td class="head-rtitle">
Appender::Buffer(3pm)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>NAME</h1><br/>
    Log::Log4perl::Appender::Buffer - Buffering Appender<br/>
</div>
<div class="section">
<h1>SYNOPSIS</h1><br/>
    use Log::Log4perl qw(:easy);<br/>
<br/>
    my $conf = qq(<br/>
    log4perl.category                  = DEBUG, Buffer<br/>
<br/>
        # Regular Screen Appender<br/>
    log4perl.appender.Screen           = Log::Log4perl::Appender::Screen<br/>
    log4perl.appender.Screen.stdout    = 1<br/>
    log4perl.appender.Screen.layout    = PatternLayout<br/>
    log4perl.appender.Screen.layout.ConversionPattern = %d %p %c %m %n<br/>
<br/>
        # Buffering appender, using the appender above as outlet<br/>
    log4perl.appender.Buffer               = Log::Log4perl::Appender::Buffer<br/>
    log4perl.appender.Buffer.appender      = Screen<br/>
    log4perl.appender.Buffer.trigger_level = ERROR<br/>
    );<br/>
<br/>
    Log::Log4perl-&gt;init(\$conf);<br/>
<br/>
    DEBUG(&quot;This message gets buffered.&quot;);<br/>
    INFO(&quot;This message gets buffered also.&quot;);<br/>
<br/>
    # Time passes. Nothing happens. But then ...<br/>
<br/>
    print &quot;It's GO time!!!\n&quot;;<br/>
<br/>
    ERROR(&quot;This message triggers a buffer flush.&quot;);<br/>
</div>
<div class="section">
<h1>DESCRIPTION</h1> &quot;Log::Log4perl::Appender::Buffer&quot; takes these arguments:<dl>
<dt>
&quot;appender&quot;</dt>
<dd>
Specifies the name of the appender it buffers messages for. The appender specified must be defined somewhere in the configuration file, not necessarily before the definition of &quot;Log::Log4perl::Appender::Buffer&quot;.</dd>
</dl>
<dl>
<dt>
&quot;max_messages&quot;</dt>
<dd>
Specifies the maximum number of messages the appender will hold in its ring buffer. &quot;max_messages&quot; is optional. By default, &quot;Log::Log4perl::Appender::Buffer&quot; will  <i>not</i> limit the number of messages buffered. This might be undesirable in long-running processes accumulating lots of messages before a flush happens. If &quot;max_messages&quot; is set to a numeric value, &quot;Log::Log4perl::Appender::Buffer&quot; will displace old messages in its buffer to make room if the buffer is full.</dd>
</dl>
<dl>
<dt>
&quot;trigger_level&quot;</dt>
<dd>
If trigger_level is set to one of Log4perl's levels (see Log::Log4perl::Level), a &quot;trigger&quot; function will be defined internally to flush the buffer if a message with a priority of $level or higher comes along. This is just a convenience function. Defining<div style="height: 1.00em;">
&#160;</div>
<br/>
    log4perl.appender.Buffer.trigger_level = ERROR<br/>
<div style="height: 1.00em;">
&#160;</div>
is equivalent to creating a trigger function like<div style="height: 1.00em;">
&#160;</div>
<br/>
    log4perl.appender.Buffer.trigger = sub {   \<br/>
        my($self, $params) = @_;               \<br/>
        return $params-&gt;{log4p_level} &gt;=       \<br/>
               $Log::Log4perl::Level::ERROR; }<br/>
<div style="height: 1.00em;">
&#160;</div>
See the next section for defining generic trigger functions.</dd>
</dl>
<dl>
<dt>
&quot;trigger&quot;</dt>
<dd>
&quot;trigger&quot; holds a reference to a subroutine, which &quot;Log::Log4perl::Appender::Buffer&quot; will call on every incoming message with the same parameters as the appender's &quot;log()&quot; method:<div style="height: 1.00em;">
&#160;</div>
<br/>
        my($self, $params) = @_;<br/>
<div style="height: 1.00em;">
&#160;</div>
$params references a hash containing the message priority (key &quot;l4p_level&quot;), the message category (key &quot;l4p_category&quot;) and the content of the message (key &quot;message&quot;).<div style="height: 1.00em;">
&#160;</div>
If the subroutine returns 1, it will trigger a flush of buffered messages.<div style="height: 1.00em;">
&#160;</div>
Shortcut</dd>
</dl>
</div>
<div class="section">
<h1>DEVELOPMENT NOTES</h1> &quot;Log::Log4perl::Appender::Buffer&quot; is a  <i>composite</i> appender. Unlike other appenders, it doesn't log any messages, it just passes them on to its attached sub-appender. For this reason, it doesn't need a layout (contrary to regular appenders). If it defines none, messages are passed on unaltered.<div class="spacer">
</div>
Custom filters are also applied to the composite appender only. They are  <i>not</i> applied to the sub-appender. Same applies to appender thresholds. This behaviour might change in the future.</div>
<div class="section">
<h1>COPYRIGHT AND LICENSE</h1> Copyright 2002-2009 by Mike Schilli &lt;m@perlmeister.com&gt; and Kevin Goess &lt;cpan@goess.org&gt;.<div class="spacer">
</div>
This library is free software; you can redistribute it and/or modify it under the same terms as Perl itself.</div>
<table class="foot">
<tr>
<td class="foot-date">
2010-06-17</td>
<td class="foot-os">
perl v5.10.1</td>
</tr>
</table>
</div>
</body>
</html>

