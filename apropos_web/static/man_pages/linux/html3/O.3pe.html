<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/linux/style.css" type="text/css" media="all"/>
<title>
O(3perl)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
O(3perl)</td>
<td class="head-vol">
Perl Programmers Reference Guide</td>
<td class="head-rtitle">
O(3perl)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>NAME</h1> O - Generic interface to Perl Compiler backends</div>
<div class="section">
<h1>SYNOPSIS</h1><br/>
        perl -MO=[-q,]Backend[,OPTIONS] foo.pl<br/>
</div>
<div class="section">
<h1>DESCRIPTION</h1> This is the module that is used as a frontend to the Perl Compiler.<div class="spacer">
</div>
If you pass the &quot;-q&quot; option to the module, then the STDOUT filehandle will be redirected into the variable $O::BEGIN_output during compilation.  This has the effect that any output printed to STDOUT by BEGIN blocks or use'd modules will be stored in this variable rather than printed. It's useful with those backends which produce output themselves (&quot;Deparse&quot;, &quot;Concise&quot; etc), so that their output is not confused with that generated by the code being compiled.<div class="spacer">
</div>
The &quot;-qq&quot; option behaves like &quot;-q&quot;, except that it also closes STDERR after deparsing has finished. This suppresses the &quot;Syntax OK&quot; message normally produced by perl.</div>
<div class="section">
<h1>CONVENTIONS</h1> Most compiler backends use the following conventions: OPTIONS consists of a comma-separated list of words (no white-space). The &quot;-v&quot; option usually puts the backend into verbose mode. The &quot;-ofile&quot; option generates output to  <b>file</b> instead of stdout. The &quot;-D&quot; option followed by various letters turns on various internal debugging flags. See the documentation for the desired backend (named &quot;B::Backend&quot; for the example above) to find out about that backend.</div>
<div class="section">
<h1>IMPLEMENTATION</h1> This section is only necessary for those who want to write a compiler backend module that can be used via this module.<div class="spacer">
</div>
The command-line mentioned in the SYNOPSIS section corresponds to the Perl code<div class="spacer">
</div>
<br/>
    use O (&quot;Backend&quot;, OPTIONS);<br/>
<div class="spacer">
</div>
The &quot;O::import&quot; function loads the appropriate &quot;B::Backend&quot; module and calls its &quot;compile&quot; function, passing it OPTIONS. That function is expected to return a sub reference which we'll call CALLBACK. Next, the &quot;compile-only&quot; flag is switched on (equivalent to the command-line option &quot;-c&quot;) and a CHECK block is registered which calls CALLBACK. Thus the main Perl program mentioned on the command-line is read in, parsed and compiled into internal syntax tree form. Since the &quot;-c&quot; flag is set, the program does not start running (excepting BEGIN blocks of course) but the CALLBACK function registered by the compiler backend is called.<div class="spacer">
</div>
In summary, a compiler backend module should be called &quot;B::Foo&quot; for some foo and live in the appropriate directory for that name. It should define a function called &quot;compile&quot;. When the user types<div class="spacer">
</div>
<br/>
    perl -MO=Foo,OPTIONS foo.pl<br/>
<div class="spacer">
</div>
that function is called and is passed those OPTIONS (split on commas). It should return a sub ref to the main compilation function. After the user's program is loaded and parsed, that returned sub ref is invoked which can then go ahead and do the compilation, usually by making use of the &quot;B&quot; module's functionality.</div>
<div class="section">
<h1>BUGS</h1> The &quot;-q&quot; and &quot;-qq&quot; options don't work correctly if perl isn't compiled with PerlIO support : STDOUT will be closed instead of being redirected to $O::BEGIN_output.</div>
<div class="section">
<h1>AUTHOR</h1> Malcolm Beattie, &quot;mbeattie@sable.ox.ac.uk&quot;</div>
<table class="foot">
<tr>
<td class="foot-date">
2010-12-30</td>
<td class="foot-os">
perl v5.14.2</td>
</tr>
</table>
</div>
</body>
</html>

