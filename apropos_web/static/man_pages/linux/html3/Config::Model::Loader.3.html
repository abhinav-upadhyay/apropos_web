<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/linux/style.css" type="text/css" media="all"/>
<title>
Config::Model::Loader(3pm)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
Config::Model::Loader(3pm)</td>
<td class="head-vol">
User Contributed Perl Documentation</td>
<td class="head-rtitle">
Config::Model::Loader(3pm)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>NAME</h1> Config::Model::Loader - Load serialized data into config tree</div>
<div class="section">
<h1>VERSION</h1> version 2.005</div>
<div class="section">
<h1>SYNOPSIS</h1><br/>
 use Config::Model;<br/>
 use Log::Log4perl qw(:easy);<br/>
 Log::Log4perl-&gt;easy_init($WARN);<br/>
<br/>
 # define configuration tree object<br/>
 my $model = Config::Model-&gt;new;<br/>
  $model-&gt;create_config_class(<br/>
    name    =&gt; &quot;Foo&quot;,<br/>
    element =&gt; [<br/>
        [qw/foo bar/] =&gt; {<br/>
            type       =&gt; 'leaf',<br/>
            value_type =&gt; 'string'<br/>
        },<br/>
    ]<br/>
 ); <br/>
 <br/>
 $model -&gt;create_config_class (<br/>
    name =&gt; &quot;MyClass&quot;,<br/>
<br/>
    element =&gt; [ <br/>
<br/>
        [qw/foo bar/] =&gt; {<br/>
            type       =&gt; 'leaf',<br/>
            value_type =&gt; 'string'<br/>
        },<br/>
        hash_of_nodes =&gt; {<br/>
            type       =&gt; 'hash',     # hash id<br/>
            index_type =&gt; 'string',<br/>
            cargo      =&gt; {<br/>
                type              =&gt; 'node',<br/>
                config_class_name =&gt; 'Foo'<br/>
            },<br/>
        },<br/>
        [qw/lista listb/] =&gt; { <br/>
                              type =&gt; 'list',<br/>
                              cargo =&gt;  {type =&gt; 'leaf',<br/>
                                         value_type =&gt; 'string'<br/>
                                        }<br/>
                              },<br/>
    ],<br/>
 ) ;<br/>
<br/>
 my $inst = $model-&gt;instance(root_class_name =&gt; 'MyClass' );<br/>
<br/>
 my $root = $inst-&gt;config_root ;<br/>
<br/>
 # put data<br/>
 my $step = 'foo=FOO hash_of_nodes:fr foo=bonjour -<br/>
   hash_of_nodes:en foo=hello <br/>
   ! lista=foo,bar lista:2=baz<br/>
     listb:0=foo listb:1=baz';<br/>
 $root-&gt;load( step =&gt; $step );<br/>
<br/>
 print $root-&gt;describe,&quot;\n&quot; ;<br/>
 # name         value        type         comment                            <br/>
 # foo          FOO          string                                          <br/>
 # bar          [undef]      string                                          <br/>
 # hash_of_nodes &lt;Foo&gt;        node hash    keys: &quot;en&quot; &quot;fr&quot;                    <br/>
 # lista        foo,bar,baz  list                                            <br/>
 # listb        foo,baz      list                                            <br/>
<br/>
<br/>
 # delete some data<br/>
 $root-&gt;load( step =&gt; 'lista~2' );<br/>
<br/>
 print $root-&gt;describe(element =&gt; 'lista'),&quot;\n&quot; ;<br/>
 # name         value        type         comment                            <br/>
 # lista        foo,bar      list                                            <br/>
<br/>
 # append some data<br/>
 $root-&gt;load( step =&gt; q!hash_of_nodes:en foo.=&quot; world&quot;! );<br/>
<br/>
 print $root-&gt;grab('hash_of_nodes:en')-&gt;describe(element =&gt; 'foo'),&quot;\n&quot; ;<br/>
 # name         value        type         comment                            <br/>
 # foo          &quot;hello world&quot; string<br/>
</div>
<div class="section">
<h1>DESCRIPTION</h1> This module is used directly by Config::Model::Node to load serialized configuration data into the configuration tree.<div class="spacer">
</div>
Serialized data can be written by the user or produced by Config::Model::Dumper while dumping data from a configuration tree.</div>
<div class="section">
<h1>CONSTRUCTOR</h1><div class="subsection">
<h2>new ( )</h2> No parameter. The constructor should be used only by Config::Model::Node.</div>
</div>
<div class="section">
<h1>load string syntax</h1> The string is made of the following items (also called &quot;actions&quot;) separated by spaces:<dl>
<dt>
-</dt>
<dd>
Go up one node</dd>
</dl>
<dl>
<dt>
!</dt>
<dd>
Go to the root node of the configuration tree.</dd>
</dl>
<dl>
<dt>
xxx</dt>
<dd>
Go down using &quot;xxx&quot; element. (For &quot;node&quot; type element)</dd>
</dl>
<dl>
<dt>
xxx:yy</dt>
<dd>
Go down using &quot;xxx&quot; element and id &quot;yy&quot; (For &quot;hash&quot; or &quot;list&quot; element with &quot;node&quot; cargo_type)</dd>
</dl>
<dl>
<dt>
xxx=~/yy/</dt>
<dd>
Go down using &quot;xxx&quot; element and loop over the ids that match the regex. (For &quot;hash&quot;)<div style="height: 1.00em;">
&#160;</div>
For instance, with &quot;OpenSsh&quot; model, you could do<div style="height: 1.00em;">
&#160;</div>
<br/>
 Host=~/.*.debian.org/ user='foo-guest'<br/>
<div style="height: 1.00em;">
&#160;</div>
to set &quot;foo-user&quot; users for all your debian accounts.</dd>
</dl>
<dl>
<dt>
xxx~yy</dt>
<dd>
Delete item referenced by &quot;xxx&quot; element and id &quot;yy&quot;. For a list, this is equivalent to &quot;splice xxx,yy,1&quot;. This command does not go down in the tree (since it has just deleted the element). I.e. a '&quot;-&quot;' is generally not needed afterwards.</dd>
</dl>
<dl>
<dt>
xxx=zz</dt>
<dd>
Set element &quot;xxx&quot; to value &quot;yy&quot;. load also accepts to set elements with a quoted string. (For &quot;leaf&quot; element)<div style="height: 1.00em;">
&#160;</div>
For instance &quot;foo=&quot;a quoted string&quot;&quot;. Note that you cannot embed double quote in this string. I.e &quot;foo=&quot;a \&quot;quoted\&quot; string&quot;&quot; will fail.</dd>
</dl>
<dl>
<dt>
xxx~</dt>
<dd>
Undef element &quot;xxx&quot;</dd>
</dl>
<dl>
<dt>
xxx=z1,z2,z3</dt>
<dd>
Set list element &quot;xxx&quot; to list &quot;z1,z2,z3&quot;. Use &quot;,,&quot; for undef values, and &quot;&quot; for empty values.<div style="height: 1.00em;">
&#160;</div>
I.e, for a list &quot;('a',undef,'','c')&quot;, use &quot;a,,&quot;&quot;,c&quot;.</dd>
</dl>
<dl>
<dt>
xxx:yy=zz</dt>
<dd>
For &quot;hash&quot; element containing &quot;leaf&quot; cargo_type. Set the leaf identified by key &quot;yy&quot; to value &quot;zz&quot;.<div style="height: 1.00em;">
&#160;</div>
Using &quot;xxx=~/yy/=zz&quot; is also possible.</dd>
</dl>
<dl>
<dt>
xxx.=zzz</dt>
<dd>
Will append &quot;zzz&quot; value to current values (valid for &quot;leaf&quot; elements).</dd>
</dl>
<dl>
<dt>
xxx#zzz or xxx:yyy#zzz</dt>
<dd>
Element annotation. Can be quoted or not quoted. Note that annotations are always placed at the end of an action item.<div style="height: 1.00em;">
&#160;</div>
I.e. &quot;foo#comment&quot;, &quot;foo:bar#comment&quot; or &quot;foo:bar=baz#comment&quot; are valid. &quot;foo#comment:bar&quot; is  <b>not</b> valid.</dd>
</dl>
<div class="subsection">
<h2>Quotes</h2> You can surround indexes and values with double quotes. E.g.:<div class="spacer">
</div>
<br/>
  a_string=&quot;\&quot;titi\&quot; and \&quot;toto\&quot;&quot;<br/>
</div>
</div>
<div class="section">
<h1>Methods</h1><div class="subsection">
<h2>load ( ... )</h2> Load data into the node tree (from the node passed with &quot;node&quot;) and fill values as we go following the instructions passed with &quot;step&quot;.  (&quot;step&quot; can also be an array ref).<div class="spacer">
</div>
Parameters are:<dl>
<dt>
node</dt>
<dd>
node ref of the root of the tree (of sub-root) to start the load from.</dd>
</dl>
<dl>
<dt>
step</dt>
<dd>
A string or an array ref containing the steps to load. See above for a description of the string.</dd>
</dl>
<dl>
<dt>
experience</dt>
<dd>
Specify the experience level used during the load (default: &quot;master&quot;). The experience can be &quot;intermediate advanced master&quot;. The load will raise an exception if the step of the load string tries to access an element with experience higher than user's experience.</dd>
</dl>
</div>
</div>
<div class="section">
<h1>AUTHOR</h1> Dominique Dumont, (ddumont at cpan dot org)</div>
<div class="section">
<h1>SEE ALSO</h1> Config::Model,Config::Model::Node,Config::Model::Dumper</div>
<table class="foot">
<tr>
<td class="foot-date">
2012-02-24</td>
<td class="foot-os">
perl v5.14.2</td>
</tr>
</table>
</div>
</body>
</html>

