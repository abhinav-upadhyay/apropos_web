<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/linux/style.css" type="text/css" media="all"/>
<title>
ExtUtils::Constant(3perl)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
ExtUtils::Constant(3perl)</td>
<td class="head-vol">
Perl Programmers Reference Guide</td>
<td class="head-rtitle">
ExtUtils::Constant(3perl)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>NAME</h1> ExtUtils::Constant - generate XS code to import C header constants</div>
<div class="section">
<h1>SYNOPSIS</h1><br/>
    use ExtUtils::Constant qw (WriteConstants);<br/>
    WriteConstants(<br/>
        NAME =&gt; 'Foo',<br/>
        NAMES =&gt; [qw(FOO BAR BAZ)],<br/>
    );<br/>
    # Generates wrapper code to make the values of the constants FOO BAR BAZ<br/>
    #  available to perl<br/>
</div>
<div class="section">
<h1>DESCRIPTION</h1> ExtUtils::Constant facilitates generating C and XS wrapper code to allow perl modules to AUTOLOAD constants defined in C library header files. It is principally used by the &quot;h2xs&quot; utility, on which this code is based. It doesn't contain the routines to scan header files to extract these constants.</div>
<div class="section">
<h1>USAGE</h1> Generally one only needs to call the &quot;WriteConstants&quot; function, and then<div class="spacer">
</div>
<br/>
    #include &quot;const-c.inc&quot;<br/>
<div class="spacer">
</div>
in the C section of &quot;Foo.xs&quot;<div class="spacer">
</div>
<br/>
    INCLUDE: const-xs.inc<br/>
<div class="spacer">
</div>
in the XS section of &quot;Foo.xs&quot;.<div class="spacer">
</div>
For greater flexibility use &quot;constant_types()&quot;, &quot;C_constant&quot; and &quot;XS_constant&quot;, with which &quot;WriteConstants&quot; is implemented.<div class="spacer">
</div>
Currently this module understands the following types. h2xs may only know a subset. The sizes of the numeric types are chosen by the &quot;Configure&quot; script at compile time.<dl>
<dt>
IV</dt>
<dd>
signed integer, at least 32 bits.</dd>
</dl>
<dl>
<dt>
UV</dt>
<dd>
unsigned integer, the same size as <i>IV</i></dd>
</dl>
<dl>
<dt>
NV</dt>
<dd>
floating point type, probably &quot;double&quot;, possibly &quot;long double&quot;</dd>
</dl>
<dl>
<dt>
PV</dt>
<dd>
NUL terminated string, length will be determined with &quot;strlen&quot;</dd>
</dl>
<dl>
<dt>
PVN</dt>
<dd>
A fixed length thing, given as a [pointer, length] pair. If you know the length of a string at compile time you may use this instead of  <i>PV</i></dd>
</dl>
<dl>
<dt>
SV</dt>
<dd>
A <b>mortal</b> SV.</dd>
</dl>
<dl>
<dt>
YES</dt>
<dd>
Truth.  (&quot;PL_sv_yes&quot;)  The value is not needed (and ignored).</dd>
</dl>
<dl>
<dt>
NO</dt>
<dd>
Defined Falsehood.  (&quot;PL_sv_no&quot;)  The value is not needed (and ignored).</dd>
</dl>
<dl>
<dt>
UNDEF</dt>
<dd>
&quot;undef&quot;.  The value of the macro is not needed.</dd>
</dl>
</div>
<div class="section">
<h1>FUNCTIONS</h1><dl>
<dt>
constant_types</dt>
<dd>
A function returning a single scalar with &quot;#define&quot; definitions for the constants used internally between the generated C and XS functions.</dd>
</dl>
<dl>
<dt>
XS_constant PACKAGE, TYPES, XS_SUBNAME, C_SUBNAME</dt>
<dd>
A function to generate the XS code to implement the perl subroutine  <i>PACKAGE</i>::constant used by <i>PACKAGE</i>::AUTOLOAD to load constants. This XS code is a wrapper around a C subroutine usually generated by &quot;C_constant&quot;, and usually named &quot;constant&quot;.<div style="height: 1.00em;">
&#160;</div>
<i>TYPES</i> should be given either as a comma separated list of types that the C subroutine &quot;constant&quot; will generate or as a reference to a hash. It should be the same list of types as &quot;C_constant&quot; was given. [Otherwise &quot;XS_constant&quot; and &quot;C_constant&quot; may have different ideas about the number of parameters passed to the C function &quot;constant&quot;]<div style="height: 1.00em;">
&#160;</div>
You can call the perl visible subroutine something other than &quot;constant&quot; if you give the parameter  <i>XS_SUBNAME</i>. The C subroutine it calls defaults to the name of the perl visible subroutine, unless you give the parameter  <i>C_SUBNAME</i>.</dd>
</dl>
<dl>
<dt>
autoload PACKAGE, VERSION, AUTOLOADER</dt>
<dd>
A function to generate the AUTOLOAD subroutine for the module <i>PACKAGE</i>  <i>VERSION</i> is the perl version the code should be backwards compatible with. It defaults to the version of perl running the subroutine.  If  <i>AUTOLOADER</i> is true, the AUTOLOAD subroutine falls back on AutoLoader::AUTOLOAD for all names that the  <i>constant()</i> routine doesn't recognise.</dd>
</dl>
<dl>
<dt>
WriteMakefileSnippet</dt>
<dd>
WriteMakefileSnippet ATTRIBUTE =&gt; VALUE [, ...]<div style="height: 1.00em;">
&#160;</div>
A function to generate perl code for Makefile.PL that will regenerate the constant subroutines.  Parameters are named as passed to &quot;WriteConstants&quot;, with the addition of &quot;INDENT&quot; to specify the number of leading spaces (default 2).<div style="height: 1.00em;">
&#160;</div>
Currently only &quot;INDENT&quot;, &quot;NAME&quot;, &quot;DEFAULT_TYPE&quot;, &quot;NAMES&quot;, &quot;C_FILE&quot; and &quot;XS_FILE&quot; are recognised.</dd>
</dl>
<dl>
<dt>
WriteConstants ATTRIBUTE =&gt; VALUE [, ...]</dt>
<dd>
Writes a file of C code and a file of XS code which you should &quot;#include&quot; and &quot;INCLUDE&quot; in the C and XS sections respectively of your module's XS code.  You probably want to do this in your &quot;Makefile.PL&quot;, so that you can easily edit the list of constants without touching the rest of your module. The attributes supported are</dd>
</dl>
<div style="margin-left: 4.00ex;">
<dl>
<dt>
NAME</dt>
<dd>
Name of the module.  This must be specified</dd>
</dl>
<dl>
<dt>
DEFAULT_TYPE</dt>
<dd>
The default type for the constants.  If not specified &quot;IV&quot; is assumed.</dd>
</dl>
<dl>
<dt>
BREAKOUT_AT</dt>
<dd>
The names of the constants are grouped by length.  Generate child subroutines for each group with this number or more names in.</dd>
</dl>
<dl>
<dt>
NAMES</dt>
<dd>
An array of constants' names, either scalars containing names, or hashrefs as detailed in &quot;C_constant&quot;.</dd>
</dl>
<dl>
<dt>
PROXYSUBS</dt>
<dd>
If true, uses proxy subs. See ExtUtils::Constant::ProxySubs.</dd>
</dl>
<dl>
<dt>
C_FH</dt>
<dd>
A filehandle to write the C code to.  If not given, then <i>C_FILE</i> is opened for writing.</dd>
</dl>
<dl>
<dt>
C_FILE</dt>
<dd>
The name of the file to write containing the C code.  The default is &quot;const-c.inc&quot;.  The &quot;-&quot; in the name ensures that the file can't be mistaken for anything related to a legitimate perl package name, and not naming the file &quot;.c&quot; avoids having to override Makefile.PL's &quot;.xs&quot; to &quot;.c&quot; rules.</dd>
</dl>
<dl>
<dt>
XS_FH</dt>
<dd>
A filehandle to write the XS code to.  If not given, then <i>XS_FILE</i> is opened for writing.</dd>
</dl>
<dl>
<dt>
XS_FILE</dt>
<dd>
The name of the file to write containing the XS code.  The default is &quot;const-xs.inc&quot;.</dd>
</dl>
<dl>
<dt>
XS_SUBNAME</dt>
<dd>
The perl visible name of the XS subroutine generated which will return the constants. The default is &quot;constant&quot;.</dd>
</dl>
<dl>
<dt>
C_SUBNAME</dt>
<dd>
The name of the C subroutine generated which will return the constants. The default is  <i>XS_SUBNAME</i>.  Child subroutines have &quot;_&quot; and the name length appended, so constants with 10 character names would be in &quot;constant_10&quot; with the default  <i>XS_SUBNAME</i>.</dd>
</dl>
</div>
<div style="margin-left: 4.00ex;">
</div>
</div>
<div class="section">
<h1>AUTHOR</h1> Nicholas Clark &lt;nick@ccl4.org&gt; based on the code in &quot;h2xs&quot; by Larry Wall and others</div>
<table class="foot">
<tr>
<td class="foot-date">
2011-09-19</td>
<td class="foot-os">
perl v5.14.2</td>
</tr>
</table>
</div>
</body>
</html>

