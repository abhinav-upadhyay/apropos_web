<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/linux/style.css" type="text/css" media="all"/>
<title>
Config::Model::Instance(3pm)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
Config::Model::Instance(3pm)</td>
<td class="head-vol">
User Contributed Perl Documentation</td>
<td class="head-rtitle">
Config::Model::Instance(3pm)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>NAME</h1> Config::Model::Instance - Instance of configuration tree</div>
<div class="section">
<h1>VERSION</h1> version 2.005</div>
<div class="section">
<h1>SYNOPSIS</h1><br/>
 use Config::Model;<br/>
 use Log::Log4perl qw(:easy);<br/>
 use File::Path ;<br/>
 Log::Log4perl-&gt;easy_init($WARN);<br/>
<br/>
 # setup a dummy popcon conf file<br/>
 my $wr_dir = '/tmp/etc/';<br/>
 my $conf_file = &quot;$wr_dir/popularity-contest.conf&quot; ;<br/>
<br/>
 unless (-d $wr_dir) {<br/>
     mkpath($wr_dir, { mode =&gt; 0755 }) <br/>
       || die &quot;can't mkpath $wr_dir: $!&quot;;<br/>
 }<br/>
 open(my $conf,&quot;&gt; $conf_file&quot; ) || die &quot;can't open $conf_file: $!&quot;;<br/>
 $conf-&gt;print( qq!MY_HOSTID=&quot;aaaaaaaaaaaaaaaaaaaa&quot;\n!,<br/>
   qq!PARTICIPATE=&quot;yes&quot;\n!,<br/>
   qq!USEHTTP=&quot;yes&quot; # always http\n!,<br/>
   qq!DAY=&quot;6&quot;\n!);<br/>
 $conf-&gt;close ;<br/>
<br/>
 my $model = Config::Model-&gt;new;<br/>
<br/>
 # PopCon model is provided. Create a new Config::Model::Instance object<br/>
 my $inst = $model-&gt;instance (root_class_name   =&gt; 'PopCon',<br/>
                              root_dir          =&gt; '/tmp',<br/>
                             );<br/>
 my $root = $inst -&gt; config_root ;<br/>
<br/>
 print $root-&gt;describe;<br/>
</div>
<div class="section">
<h1>DESCRIPTION</h1> This module provides an object that holds a configuration tree.</div>
<div class="section">
<h1>CONSTRUCTOR</h1> An instance object is created by calling instance method on an existing model:<div class="spacer">
</div>
<br/>
 my $inst = $model-&gt;instance (root_class_name =&gt; 'SomeRootClass', <br/>
                              instance_name =&gt; 'test1');<br/>
<div class="spacer">
</div>
The directory (or directories) holding configuration files is specified within the configuration model. For test purpose you can change the &quot;root&quot; directory with &quot;root_dir&quot; parameter:<dl>
<dt>
root_dir</dt>
<dd>
Pseudo root directory where to read <i>and</i> write configuration files</dd>
</dl>
<dl>
<dt>
backend</dt>
<dd>
Specify which backend to use. See &quot;write_back ( ... )&quot; for details</dd>
</dl>
<dl>
<dt>
skip_read</dt>
<dd>
When set, configuration files will not be read when creating configuration tree.</dd>
</dl>
<dl>
<dt>
check</dt>
<dd>
'yes', 'skip' or 'no'</dd>
</dl>
<div class="spacer">
</div>
Note that the root directory specified within the configuration model will be overridden by &quot;root_dir&quot; parameter.<div class="spacer">
</div>
If you need to load configuration data that are not correct, you can use &quot;force_load =&gt; 1&quot;. Then, wrong data will be discarded (equivalent to &quot;check =&quot; 'no'&gt; ).</div>
<div class="section">
<h1>METHODS</h1><div class="subsection">
<h2><i>name()</i></h2> Returns the instance name.</div>
<div class="subsection">
<h2><i>config_root()</i></h2> Returns the root object of the configuration tree.</div>
<div class="subsection">
<h2><i>read_check()</i></h2> Returns how to check read files.</div>
<div class="subsection">
<h2>reset_config</h2> Destroy current configuration tree (with data) and returns a new tree with data (and annotations) loaded from disk.</div>
<div class="subsection">
<h2><i>config_model()</i></h2> Returns the model (Config::Model object) of the configuration tree.</div>
<div class="subsection">
<h2><i>annotation_saver()</i></h2> Returns the object loading and saving annotations. See Config::Model::Annotation for details.</div>
<div class="subsection">
<h2>preset_start ()</h2> All values stored in preset mode are shown to the user as default values. This feature is useful to enter configuration data entered by an automatic process (like hardware scan)</div>
<div class="subsection">
<h2>preset_stop ()</h2> Stop preset mode</div>
<div class="subsection">
<h2>preset ()</h2> Get preset mode</div>
<div class="subsection">
<h2><i>preset_clear()</i></h2> Clear all preset values stored.</div>
<div class="subsection">
<h2>layered_start ()</h2> All values stored in layered mode are shown to the user as default values. This feature is useful to enter configuration data entered by an automatic process (like hardware scan)</div>
<div class="subsection">
<h2>layered_stop ()</h2> Stop layered mode</div>
<div class="subsection">
<h2>layered ()</h2> Get layered mode</div>
<div class="subsection">
<h2><i>layered_clear()</i></h2> Clear all layered values stored.</div>
<div class="subsection">
<h2>get_data_mode</h2> Returns 'normal' or 'preset' or 'layered'. Does not take into account initial_load.</div>
<div class="subsection">
<h2>initial_load_stop ()</h2> Stop initial_load mode. Instance is built with initial_load as 1. Read backend will clear this value once the first read is done.</div>
<div class="subsection">
<h2>initial_load ()</h2> Get initial_load mode</div>
<div class="subsection">
<h2>data( kind, [data] )</h2> The data method provide a way to store some arbitrary data in the instance object.</div>
<div class="subsection">
<h2>load( &quot;...&quot; )</h2> Load configuration tree with configuration data. See Config::Model::Loader for more details</div>
<div class="subsection">
<h2>searcher ( )</h2> Returns an object dedicated to search an element in the configuration model (respecting privilege level).<div class="spacer">
</div>
This method returns a Config::Model::Searcher object. See Config::Model::Searcher for details on how to handle a search.</div>
<div class="subsection">
<h2>wizard_helper ( ... )</h2> Deprecated. Call &quot;iterator&quot; instead.</div>
<div class="subsection">
<h2>iterator</h2> This method returns a Config::Model::Iterator object. See Config::Model::Iterator for details.<div class="spacer">
</div>
Arguments are explained in  Config::Model::Iterator constructor arguments.</div>
<div class="subsection">
<h2><div class="spacer">
</div>
</h2></div>
</div>
<div class="section">
<h1>Auto read and write feature</h1> Usually, a program based on config model must first create the configuration model, then load all configuration data.<div class="spacer">
</div>
This feature enables you to declare with the model a way to load configuration data (and to write it back). See Config::Model::AutoRead for details.<div class="subsection">
<h2><i>read_root_dir()</i></h2> Returns root directory where configuration data is read from.</div>
<div class="subsection">
<h2><i>backend()</i></h2> Get the preferred backend method for this instance (as passed to the constructor).</div>
<div class="subsection">
<h2><i>write_root_dir()</i></h2> Returns root directory where configuration data is written to.</div>
<div class="subsection">
<h2>register_write_back ( node_location )</h2> Register a node path that will be called back with &quot;write_back&quot; method.</div>
<div class="subsection">
<h2>notify_change</h2> Notify that some data has changed in the tree.</div>
<div class="subsection">
<h2>write_back ( ... )</h2> Try to run all subroutines registered with &quot;register_write_back&quot; to write the configuration information until one succeeds (returns true). (See Config::Model::AutoRead for details).<div class="spacer">
</div>
You can specify here a pseudo root directory or another config directory to write configuration data back with &quot;root&quot; and &quot;config_dir&quot; parameters. This will override the model specifications.<div class="spacer">
</div>
You can force to use a backend by specifying &quot;backend =&gt; xxx&quot;. For instance, &quot;backend =&gt; 'augeas'&quot; or &quot;backend =&gt; 'custom'&quot;.<div class="spacer">
</div>
You can force to use all backend to write the files by specifying &quot;backend =&gt; 'all'&quot;.<div class="spacer">
</div>
&quot;write_back&quot; will croak if no write call-back are known.</div>
<div class="subsection">
<h2>apply_fixes</h2> Scan the tree and apply fixes that are attached to warning specifications. See &quot;warn_if_match&quot; or &quot;warn_unless_match&quot; in &quot;&quot; in Config::Model::Value.</div>
</div>
<div class="section">
<h1>AUTHOR</h1> Dominique Dumont, (ddumont at cpan dot org)</div>
<div class="section">
<h1>SEE ALSO</h1> Config::Model, Config::Model::Node, Config::Model::Loader, Config::Model::Searcher, Config::Model::Value,</div>
<table class="foot">
<tr>
<td class="foot-date">
2012-02-24</td>
<td class="foot-os">
perl v5.14.2</td>
</tr>
</table>
</div>
</body>
</html>

