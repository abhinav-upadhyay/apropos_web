<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/linux/style.css" type="text/css" media="all"/>
<title>
autodie(3perl)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
autodie(3perl)</td>
<td class="head-vol">
Perl Programmers Reference Guide</td>
<td class="head-rtitle">
autodie(3perl)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>NAME</h1> autodie - Replace functions with ones that succeed or die with lexical scope</div>
<div class="section">
<h1>SYNOPSIS</h1><br/>
    use autodie;            # Recommended: implies 'use autodie qw(:default)'<br/>
<br/>
    use autodie qw(:all);   # Recommended more: defaults and system/exec.<br/>
<br/>
    use autodie qw(open close);   # open/close succeed or die<br/>
<br/>
    open(my $fh, &quot;&lt;&quot;, $filename); # No need to check!<br/>
<br/>
    {<br/>
        no autodie qw(open);          # open failures won't die<br/>
        open(my $fh, &quot;&lt;&quot;, $filename); # Could fail silently!<br/>
        no autodie;                   # disable all autodies<br/>
    }<br/>
</div>
<div class="section">
<h1>DESCRIPTION</h1><br/>
        bIlujDI' yIchegh()Qo'; yIHegh()!<br/>
<br/>
        It is better to die() than to return() in failure.<br/>
<br/>
                -- Klingon programming proverb.<br/>
<div class="spacer">
</div>
The &quot;autodie&quot; pragma provides a convenient way to replace functions that normally return false on failure with equivalents that throw an exception on failure.<div class="spacer">
</div>
The &quot;autodie&quot; pragma has <i>lexical scope</i>, meaning that functions and subroutines altered with &quot;autodie&quot; will only change their behaviour until the end of the enclosing block, file, or &quot;eval&quot;.<div class="spacer">
</div>
If &quot;system&quot; is specified as an argument to &quot;autodie&quot;, then it uses IPC::System::Simple to do the heavy lifting.  See the description of that module for more information.</div>
<div class="section">
<h1>EXCEPTIONS</h1> Exceptions produced by the &quot;autodie&quot; pragma are members of the autodie::exception class.  The preferred way to work with these exceptions under Perl 5.10 is as follows:<div class="spacer">
</div>
<br/>
    use feature qw(switch);<br/>
<br/>
    eval {<br/>
        use autodie;<br/>
<br/>
        open(my $fh, '&lt;', $some_file);<br/>
<br/>
        my @records = &lt;$fh&gt;;<br/>
<br/>
        # Do things with @records...<br/>
<br/>
        close($fh);<br/>
<br/>
    };<br/>
<br/>
    given ($@) {<br/>
        when (undef)   { say &quot;No error&quot;;                    }<br/>
        when ('open')  { say &quot;Error from open&quot;;             }<br/>
        when (':io')   { say &quot;Non-open, IO error.&quot;;         }<br/>
        when (':all')  { say &quot;All other autodie errors.&quot;    }<br/>
        default        { say &quot;Not an autodie error at all.&quot; }<br/>
    }<br/>
<div class="spacer">
</div>
Under Perl 5.8, the &quot;given/when&quot; structure is not available, so the following structure may be used:<div class="spacer">
</div>
<br/>
    eval {<br/>
        use autodie;<br/>
<br/>
        open(my $fh, '&lt;', $some_file);<br/>
<br/>
        my @records = &lt;$fh&gt;;<br/>
<br/>
        # Do things with @records...<br/>
<br/>
        close($fh);<br/>
    };<br/>
<br/>
    if ($@ and $@-&gt;isa('autodie::exception')) {<br/>
        if ($@-&gt;matches('open')) { print &quot;Error from open\n&quot;;   }<br/>
        if ($@-&gt;matches(':io' )) { print &quot;Non-open, IO error.&quot;; }<br/>
    } elsif ($@) {<br/>
        # A non-autodie exception.<br/>
    }<br/>
<div class="spacer">
</div>
See autodie::exception for further information on interrogating exceptions.</div>
<div class="section">
<h1>CATEGORIES</h1> Autodie uses a simple set of categories to group together similar built-ins.  Requesting a category type (starting with a colon) will enable autodie for all built-ins beneath that category.  For example, requesting &quot;:file&quot; will enable autodie for &quot;close&quot;, &quot;fcntl&quot;, &quot;fileno&quot;, &quot;open&quot; and &quot;sysopen&quot;.<div class="spacer">
</div>
The categories are currently:<div class="spacer">
</div>
<br/>
    :all<br/>
        :default<br/>
            :io<br/>
                read<br/>
                seek<br/>
                sysread<br/>
                sysseek<br/>
                syswrite<br/>
                :dbm<br/>
                    dbmclose<br/>
                    dbmopen<br/>
                :file<br/>
                    binmode<br/>
                    close<br/>
                    fcntl<br/>
                    fileno<br/>
                    flock<br/>
                    ioctl<br/>
                    open<br/>
                    sysopen<br/>
                    truncate<br/>
                :filesys<br/>
                    chdir<br/>
                    closedir<br/>
                    opendir<br/>
                    link<br/>
                    mkdir<br/>
                    readlink<br/>
                    rename<br/>
                    rmdir<br/>
                    symlink<br/>
                    unlink<br/>
                :ipc<br/>
                    pipe<br/>
                    :msg<br/>
                        msgctl<br/>
                        msgget<br/>
                        msgrcv<br/>
                        msgsnd<br/>
                    :semaphore<br/>
                        semctl<br/>
                        semget<br/>
                        semop<br/>
                    :shm<br/>
                        shmctl<br/>
                        shmget<br/>
                        shmread<br/>
                :socket<br/>
                    accept<br/>
                    bind<br/>
                    connect<br/>
                    getsockopt<br/>
                    listen<br/>
                    recv<br/>
                    send<br/>
                    setsockopt<br/>
                    shutdown<br/>
                    socketpair<br/>
            :threads<br/>
                fork<br/>
        :system<br/>
            system<br/>
            exec<br/>
<div class="spacer">
</div>
Note that while the above category system is presently a strict hierarchy, this should not be assumed.<div class="spacer">
</div>
A plain &quot;use autodie&quot; implies &quot;use autodie qw(:default)&quot;.  Note that &quot;system&quot; and &quot;exec&quot; are not enabled by default.  &quot;system&quot; requires the optional IPC::System::Simple module to be installed, and enabling &quot;system&quot; or &quot;exec&quot; will invalidate their exotic forms.  See &quot;BUGS&quot; below for more details.<div class="spacer">
</div>
The syntax:<div class="spacer">
</div>
<br/>
    use autodie qw(:1.994);<br/>
<div class="spacer">
</div>
allows the &quot;:default&quot; list from a particular version to be used.  This provides the convenience of using the default methods, but the surety that no behavorial changes will occur if the &quot;autodie&quot; module is upgraded.<div class="spacer">
</div>
&quot;autodie&quot; can be enabled for all of Perl's built-ins, including &quot;system&quot; and &quot;exec&quot; with:<div class="spacer">
</div>
<br/>
    use autodie qw(:all);<br/>
</div>
<div class="section">
<h1>FUNCTION SPECIFIC NOTES</h1><div class="subsection">
<h2>flock</h2> It is not considered an error for &quot;flock&quot; to return false if it fails due to an &quot;EWOULDBLOCK&quot; (or equivalent) condition.  This means one can still use the common convention of testing the return value of &quot;flock&quot; when called with the &quot;LOCK_NB&quot; option:<div class="spacer">
</div>
<br/>
    use autodie;<br/>
<br/>
    if ( flock($fh, LOCK_EX | LOCK_NB) ) {<br/>
        # We have a lock<br/>
    }<br/>
<div class="spacer">
</div>
Autodying &quot;flock&quot; will generate an exception if &quot;flock&quot; returns false with any other error.</div>
<div class="subsection">
<h2>system/exec</h2> The &quot;system&quot; built-in is considered to have failed in the following circumstances:<dl>
<dt>
&#8226;</dt>
<dd>
The command does not start.</dd>
</dl>
<dl>
<dt>
&#8226;</dt>
<dd>
The command is killed by a signal.</dd>
</dl>
<dl>
<dt>
&#8226;</dt>
<dd>
The command returns a non-zero exit value (but see below).</dd>
</dl>
<div class="spacer">
</div>
On success, the autodying form of &quot;system&quot; returns the <i>exit value</i> rather than the contents of $?.<div class="spacer">
</div>
Additional allowable exit values can be supplied as an optional first argument to autodying &quot;system&quot;:<div class="spacer">
</div>
<br/>
    system( [ 0, 1, 2 ], $cmd, @args);  # 0,1,2 are good exit values<br/>
<div class="spacer">
</div>
&quot;autodie&quot; uses the IPC::System::Simple module to change &quot;system&quot;. See its documentation for further information.<div class="spacer">
</div>
Applying &quot;autodie&quot; to &quot;system&quot; or &quot;exec&quot; causes the exotic forms &quot;system { $cmd } @args &quot; or &quot;exec { $cmd } @args&quot; to be considered a syntax error until the end of the lexical scope. If you really need to use the exotic form, you can call &quot;CORE::system&quot; or &quot;CORE::exec&quot; instead, or use &quot;no autodie qw(system exec)&quot; before calling the exotic form.</div>
</div>
<div class="section">
<h1>GOTCHAS</h1> Functions called in list context are assumed to have failed if they return an empty list, or a list consisting only of a single undef element.</div>
<div class="section">
<h1>DIAGNOSTICS</h1><dl>
<dt>
:void cannot be used with lexical scope</dt>
<dd>
The &quot;:void&quot; option is supported in Fatal, but not &quot;autodie&quot;.  To workaround this, &quot;autodie&quot; may be explicitly disabled until the end of the current block with &quot;no autodie&quot;. To disable autodie for only a single function (eg, open) use &quot;no autodie qw(open)&quot;.</dd>
</dl>
<dl>
<dt>
No user hints defined for %s</dt>
<dd>
You've insisted on hints for user-subroutines, either by pre-pending a &quot;!&quot; to the subroutine name itself, or earlier in the list of arguments to &quot;autodie&quot;.  However the subroutine in question does not have any hints available.</dd>
</dl>
<div class="spacer">
</div>
See also &quot;DIAGNOSTICS&quot; in Fatal.</div>
<div class="section">
<h1>BUGS</h1> &quot;Used only once&quot; warnings can be generated when &quot;autodie&quot; or &quot;Fatal&quot; is used with package filehandles (eg, &quot;FILE&quot;).  Scalar filehandles are strongly recommended instead.<div class="spacer">
</div>
When using &quot;autodie&quot; or &quot;Fatal&quot; with user subroutines, the declaration of those subroutines must appear before the first use of &quot;Fatal&quot; or &quot;autodie&quot;, or have been exported from a module. Attempting to use &quot;Fatal&quot; or &quot;autodie&quot; on other user subroutines will result in a compile-time error.<div class="spacer">
</div>
Due to a bug in Perl, &quot;autodie&quot; may &quot;lose&quot; any format which has the same name as an autodying built-in or function.<div class="spacer">
</div>
&quot;autodie&quot; may not work correctly if used inside a file with a name that looks like a string eval, such as  <i>eval (3)</i>.<div class="subsection">
<h2>autodie and string eval</h2> Due to the current implementation of &quot;autodie&quot;, unexpected results may be seen when used near or with the string version of eval.  <i>None of these bugs exist when using block eval</i>.<div class="spacer">
</div>
Under Perl 5.8 only, &quot;autodie&quot; <i>does not</i> propagate into string &quot;eval&quot; statements, although it can be explicitly enabled inside a string &quot;eval&quot;.<div class="spacer">
</div>
Under Perl 5.10 only, using a string eval when &quot;autodie&quot; is in effect can cause the autodie behaviour to leak into the surrounding scope.  This can be worked around by using a &quot;no autodie&quot; at the end of the scope to explicitly remove autodie's effects, or by avoiding the use of string eval.<div class="spacer">
</div>
<i>None of these bugs exist when using block eval</i>.  The use of &quot;autodie&quot; with block eval is considered good practice.</div>
<div class="subsection">
<h2>REPORTING BUGS</h2> Please report bugs via the CPAN Request Tracker at &lt;http://rt.cpan.org/NoAuth/Bugs.html?Dist=autodie&gt;.</div>
</div>
<div class="section">
<h1>FEEDBACK</h1> If you find this module useful, please consider rating it on the CPAN Ratings service at &lt;http://cpanratings.perl.org/rate?distribution=autodie&gt; .<div class="spacer">
</div>
The module author loves to hear how &quot;autodie&quot; has made your life better (or worse).  Feedback can be sent to &lt;pjf@perltraining.com.au&gt;.</div>
<div class="section">
<h1>AUTHOR</h1> Copyright 2008-2009, Paul Fenwick &lt;pjf@perltraining.com.au&gt;</div>
<div class="section">
<h1>LICENSE</h1> This module is free software.  You may distribute it under the same terms as Perl itself.</div>
<div class="section">
<h1>SEE ALSO</h1> Fatal, autodie::exception, autodie::hints, IPC::System::Simple<div class="spacer">
</div>
<i>Perl tips, autodie</i> at http://perltraining.com.au/tips/2008-08-20.html &lt;http://perltraining.com.au/tips/2008-08-20.html&gt;</div>
<div class="section">
<h1>ACKNOWLEDGEMENTS</h1> Mark Reed and Roland Giersig -- Klingon translators.<div class="spacer">
</div>
See the <i>AUTHORS</i> file for full credits.  The latest version of this file can be found at &lt;http://github.com/pfenwick/autodie/tree/master/AUTHORS&gt; .</div>
<table class="foot">
<tr>
<td class="foot-date">
2011-09-26</td>
<td class="foot-os">
perl v5.14.2</td>
</tr>
</table>
</div>
</body>
</html>

