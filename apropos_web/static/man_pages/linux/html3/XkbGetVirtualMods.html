<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/linux/style.css" type="text/css" media="all"/>
<title>
XkbGetVirtualMods(3)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
XkbGetVirtualMods(3)</td>
<td class="head-vol">
XKB FUNCTIONS</td>
<td class="head-rtitle">
XkbGetVirtualMods(3)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>NAME</h1> XkbGetVirtualMods - Obtain a subset of the virtual modifier bindings (the vmods array) in a keyboard description</div>
<div class="section">
<h1>SYNOPSIS</h1><div style="margin-left: 5.00ex;text-indent: -5.00ex;" class="spacer">
<b>Status XkbGetVirtualMods</b> <b>(Display *</b><i>dpy</i><b>,</b> <b>unsigned int </b><i>which</i><b>,</b> <b>XkbDescPtr </b><i>xkb</i><b>);</b></div>
</div>
<div class="section">
<h1>ARGUMENTS</h1><dl>
<dt>
<i>- dpy</i></dt>
<dd>
connection to server</dd>
</dl>
<dl>
<dt>
<i>- which</i></dt>
<dd>
mask indicating virtual modifier bindings to get</dd>
</dl>
<dl>
<dt>
<i>- xkb</i></dt>
<dd>
Xkb description where results will be placed</dd>
</dl>
</div>
<div class="section">
<h1>DESCRIPTION</h1> <i>XkbGetVirtualMods</i> sends a request to the server to obtain the <i>vmods</i> entries for the virtual modifiers specified in the mask, <i>which,</i> and waits for a reply.<div style="height: 1.00em;">
&#160;</div>
Virtual modifiers are named by converting their string name to an X Atom and storing the Atom in the <i>names.vmods</i> array in an XkbDescRec structure. The position of a name Atom in the <i>names.vmods</i> array defines the bit position used to represent the virtual modifier and also the index used when accessing virtual modifier information in arrays: the name in the i-th (0 relative) entry of <i>names.vmods</i> is the i-th virtual modifier, represented by the mask (1&lt;&lt;i). Throughout Xkb, various functions have a parameter that is a mask representing virtual modifier choices. In each case, the i-th bit (0 relative) of the mask represents the i-th virtual modifier.<div style="height: 1.00em;">
&#160;</div>
To set the name of a virtual modifier, use <i>XkbSetNames,</i> using XkbVirtualModNamesMask in <i>which</i> and the name in the <i>xkb</i> argument; to retrieve indicator names, use <i>XkbGetNames.</i><div style="height: 1.00em;">
&#160;</div>
For each bit set in <i>which, XkbGetVirtualMods</i> updates the corresponding virtual modifier definition in the <i>server-&gt;vmods</i> array of <i>xkb.</i> The <i>xkb</i> parameter must be a pointer to a valid Xkb keyboard description. If successful, <i>XkbGetVirtualMods</i> returns Success.<div style="height: 1.00em;">
&#160;</div>
<b>Virtual Modifier Names and Masks</b><div style="height: 1.00em;">
&#160;</div>
Virtual modifiers are named by converting their string name to an X Atom and storing the Atom in the <i>names.vmods</i> array in an XkbDescRec structure. The position of a name Atom in the <i>names.vmods</i> array defines the bit position used to represent the virtual modifier and also the index used when accessing virtual modifier information in arrays: the name in the i-th (0 relative) entry of <i>names.vmods</i> is the i-th virtual modifier, represented by the mask (1&lt;&lt;i). Throughout Xkb, various functions have a parameter that is a mask representing virtual modifier choices. In each case, the i-th bit (0 relative) of the mask represents the i-th virtual modifier.<div style="height: 1.00em;">
&#160;</div>
To set the name of a virtual modifier, use <i>XkbSetNames,</i> using XkbVirtualModNamesMask in <i>which</i> and the name in the <i>xkb</i> argument; to retrieve indicator names, use <i>XkbGetNames.</i><div style="height: 1.00em;">
&#160;</div>
If the <i>server</i> map has not been allocated in the <i>xkb</i> parameter, <i>XkbGetVirtualMods</i> allocates and initializes it before obtaining the virtual modifier bindings.<div style="height: 1.00em;">
&#160;</div>
If the server does not have a compatible version of Xkb, or the Xkb extension has not been properly initialized, <i>XkbGetVirtualMods</i> returns BadMatch. Any errors in allocation cause <i>XkbGetVirtualMods</i> to return BadAlloc.</div>
<div class="section">
<h1>RETURN VALUES</h1><dl>
<dt>
Success</dt>
<dd>
The <i>XkbGetVirtualMods</i> function returns Success when it successfully updates the corresponding virtual modifier definition in the <i>server-&gt;vmods</i> array of <i>xkb.</i></dd>
</dl>
</div>
<div class="section">
<h1>STRUCTURES</h1> The complete description of an Xkb keyboard is given by an XkbDescRec. The component structures in the XkbDescRec represent the major Xkb components.<div style="height: 1.00em;">
&#160;</div>
<br/>
typedef struct {<br/>
   struct _XDisplay * display;      /&#8727; connection to X server */<br/>
   unsigned short     flags;        /&#8727; private to Xkb, do not modify */<br/>
   unsigned short     device_spec;  /&#8727; device of interest */<br/>
   KeyCode            min_key_code; /&#8727; minimum keycode for device */<br/>
   KeyCode            max_key_code; /&#8727; maximum keycode for device */<br/>
   XkbControlsPtr     ctrls;        /&#8727; controls */<br/>
   XkbServerMapPtr    server;       /&#8727; server keymap */<br/>
   XkbClientMapPtr    map;          /&#8727; client keymap */<br/>
   XkbIndicatorPtr    indicators;   /&#8727; indicator map */<br/>
   XkbNamesPtr        names;        /&#8727; names for all components */<br/>
   XkbCompatMapPtr    compat;       /&#8727; compatibility map */<br/>
   XkbGeometryPtr     geom;         /&#8727; physical geometry of keyboard */<br/>
} XkbDescRec, *XkbDescPtr;<div class="spacer">
</div>
<br/>
The <i>display</i> field points to an X display structure. The <i>flags</i> field is private to the library: modifying <i>flags</i> may yield unpredictable results. The <i>device_spec</i> field specifies the device identifier of the keyboard input device, or XkbUseCoreKeyboard, which specifies the core keyboard device. The <i>min_key_code</i> and <i>max_key_code</i> fields specify the least and greatest keycode that can be returned by the keyboard.<div style="height: 1.00em;">
&#160;</div>
Each structure component has a corresponding mask bit that is used in function calls to indicate that the structure should be manipulated in some manner, such as allocating it or freeing it. These masks and their relationships to the fields in the XkbDescRec are shown in Table 1.<div style="height: 1.00em;">
&#160;</div>
<table class="tbl">
<col style="width: 20.00ex;"/>
<col style="width: 16.00ex;"/>
<col style="width: 7.00ex;"/>
<tbody>
<tr>
<td>
Table 1 Mask Bits for XkbDescRec</td>
<td>
</td>
<td>
</td>
</tr>
<tr>
<td colspan="0">
</td>
</tr>
<tr>
<td>
Mask Bit</td>
<td>
XkbDescRec Field</td>
<td>
Value</td>
</tr>
<tr>
<td colspan="0">
</td>
</tr>
<tr>
<td>
XkbControlsMask</td>
<td>
ctrls</td>
<td>
(1L&lt;&lt;0)</td>
</tr>
<tr>
<td>
XkbServerMapMask</td>
<td>
server</td>
<td>
(1L&lt;&lt;1)</td>
</tr>
<tr>
<td>
XkbIClientMapMask</td>
<td>
map</td>
<td>
(1L&lt;&lt;2)</td>
</tr>
<tr>
<td>
XkbIndicatorMapMask</td>
<td>
indicators</td>
<td>
(1L&lt;&lt;3)</td>
</tr>
<tr>
<td>
XkbNamesMask</td>
<td>
names</td>
<td>
(1L&lt;&lt;4)</td>
</tr>
<tr>
<td>
XkbCompatMapMask</td>
<td>
compat</td>
<td>
(1L&lt;&lt;5)</td>
</tr>
<tr>
<td>
XkbGeometryMask</td>
<td>
geom</td>
<td>
(1L&lt;&lt;6)</td>
</tr>
<tr>
<td>
XkbAllComponentsMask</td>
<td>
All Fields</td>
<td>
(0x7f)</td>
</tr>
</tbody>
</table>
</div>
<div class="section">
<h1>DIAGNOSTICS</h1><dl>
<dt>
<b>BadAlloc</b></dt>
<dd>
Unable to allocate storage</dd>
</dl>
<dl>
<dt>
<b>BadMatch</b></dt>
<dd>
A compatible version of Xkb was not available in the server or an argument has correct type and range, but is otherwise invalid</dd>
</dl>
</div>
<div class="section">
<h1>SEE ALSO</h1> <b>XkbGetNames</b>(3), <b>XkbSetNames</b>(3)</div>
<table class="foot">
<tr>
<td class="foot-date">
libX11 1.4.99.1</td>
<td class="foot-os">
X Version 11</td>
</tr>
</table>
</div>
</body>
</html>

