<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/linux/style.css" type="text/css" media="all"/>
<title>
Text::Template::Preprocess(3pm)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
Text::Template::Preprocess(3pm)</td>
<td class="head-vol">
User Contributed Perl Documentation</td>
<td class="head-rtitle">
Text::Template::Preprocess(3pm)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>NAME</h1> Text::Template::Preprocess - Expand template text with embedded Perl</div>
<div class="section">
<h1>VERSION</h1> This file documents &quot;Text::Template::Preprocess&quot; version  <b>1.45</b></div>
<div class="section">
<h1>SYNOPSIS</h1><br/>
 use Text::Template::Preprocess;<br/>
<br/>
 my $t = Text::Template::Preprocess-&gt;new(...);  # identical to Text::Template<br/>
<br/>
 # Fill in template, but preprocess each code fragment with pp().<br/>
 my $result = $t-&gt;fill_in(..., PREPROCESSOR =&gt; \&amp;pp);<br/>
<br/>
 my $old_pp = $t-&gt;preprocessor(\&amp;new_pp);<br/>
</div>
<div class="section">
<h1>DESCRIPTION</h1> &quot;Text::Template::Preprocess&quot; provides a new &quot;PREPROCESSOR&quot; option to &quot;fill_in&quot;.  If the &quot;PREPROCESSOR&quot; option is supplied, it must be a reference to a preprocessor subroutine.  When filling out a template, &quot;Text::Template::Preprocessor&quot; will use this subroutine to preprocess the program fragment prior to evaluating the code.<div class="spacer">
</div>
The preprocessor subroutine will be called repeatedly, once for each program fragment.  The program fragment will be in $_.  The subroutine should modify the contents of $_ and return. &quot;Text::Template::Preprocess&quot; will then execute contents of $_ and insert the result into the appropriate part of the template.<div class="spacer">
</div>
&quot;Text::Template::Preprocess&quot; objects also support a utility method, &quot;preprocessor()&quot;, which sets a new preprocessor for the object.  This preprocessor is used for all subsequent calls to &quot;fill_in&quot; except where overridden by an explicit &quot;PREPROCESSOR&quot; option. &quot;preprocessor()&quot; returns the previous default preprocessor function, or undefined if there wasn't one.  When invoked with no arguments, &quot;preprocessor()&quot; returns the object's current default preprocessor function without changing it.<div class="spacer">
</div>
In all other respects, &quot;Text::Template::Preprocess&quot; is identical to &quot;Text::Template&quot;.</div>
<div class="section">
<h1>WHY?</h1> One possible purpose:  If your files contain a lot of JavaScript, like this:<div class="spacer">
</div>
<br/>
        Plain text here...<br/>
        { perl code }<br/>
        &lt;script language=JavaScript&gt;<br/>
              if (br== &quot;n3&quot;) { <br/>
                  // etc.<br/>
              }<br/>
        &lt;/script&gt;<br/>
        { more perl code }<br/>
        More plain text...<br/>
<div class="spacer">
</div>
You don't want &quot;Text::Template&quot; to confuse the curly braces in the JavaScript program with executable Perl code.  One strategy:<div class="spacer">
</div>
<br/>
        sub quote_scripts {<br/>
          s(&lt;script(.*?)&lt;/script&gt;)(q{$1})gsi;<br/>
        }<br/>
<div class="spacer">
</div>
Then use &quot;PREPROCESSOR =&gt; \&amp;quote_scripts&quot;.  This will transform</div>
<div class="section">
<h1>SEE ALSO</h1> Text::Template</div>
<div class="section">
<h1>AUTHOR</h1> Mark-Jason Dominus, Plover Systems<div class="spacer">
</div>
Please send questions and other remarks about this software to &quot;mjd-perl-template+@plover.com&quot;<div class="spacer">
</div>
You can join a very low-volume (&lt;10 messages per year) mailing list for announcements about this package.  Send an empty note to &quot;mjd-perl-template-request@plover.com&quot; to join.<div class="spacer">
</div>
For updates, visit &quot;http://www.plover.com/~mjd/perl/Template/&quot;.</div>
<div class="section">
<h1>LICENSE</h1><br/>
    Text::Template::Preprocess version 1.45<br/>
    Copyright (C) 2008 Mark Jason Dominus<br/>
<br/>
    This program is free software; you can redistribute it and/or<br/>
    modify it under the terms of the GNU General Public License as<br/>
    published by the Free Software Foundation; either version 2 of the<br/>
    License, or (at your option) any later version.  You may also can<br/>
    redistribute it and/or modify it under the terms of the Perl<br/>
    Artistic License.<br/>
<br/>
    This program is distributed in the hope that it will be useful,<br/>
    but WITHOUT ANY WARRANTY; without even the implied warranty of<br/>
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the<br/>
    GNU General Public License for more details.<br/>
<br/>
    You should have received copies of the GNU General Public License<br/>
    along with this program; if not, write to the Free Software<br/>
    Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.<br/>
</div>
<table class="foot">
<tr>
<td class="foot-date">
2008-04-16</td>
<td class="foot-os">
perl v5.10.1</td>
</tr>
</table>
</div>
</body>
</html>

