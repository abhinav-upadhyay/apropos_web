<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/linux/style.css" type="text/css" media="all"/>
<title>
sigtrap(3perl)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
sigtrap(3perl)</td>
<td class="head-vol">
Perl Programmers Reference Guide</td>
<td class="head-rtitle">
sigtrap(3perl)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>NAME</h1> sigtrap - Perl pragma to enable simple signal handling</div>
<div class="section">
<h1>SYNOPSIS</h1><br/>
    use sigtrap;<br/>
    use sigtrap qw(stack-trace old-interface-signals);  # equivalent<br/>
    use sigtrap qw(BUS SEGV PIPE ABRT);<br/>
    use sigtrap qw(die INT QUIT);<br/>
    use sigtrap qw(die normal-signals);<br/>
    use sigtrap qw(die untrapped normal-signals);<br/>
    use sigtrap qw(die untrapped normal-signals<br/>
                    stack-trace any error-signals);<br/>
    use sigtrap 'handler' =&gt; \&amp;my_handler, 'normal-signals';<br/>
    use sigtrap qw(handler my_handler normal-signals<br/>
                    stack-trace error-signals);<br/>
</div>
<div class="section">
<h1>DESCRIPTION</h1> The  <b>sigtrap</b> pragma is a simple interface to installing signal handlers.  You can have it install one of two handlers supplied by  <b>sigtrap</b> itself (one which provides a Perl stack trace and one which simply &quot;die()&quot;s), or alternately you can supply your own handler for it to install.  It can be told only to install a handler for signals which are either untrapped or ignored.  It has a couple of lists of signals to trap, plus you can supply your own list of signals.<div class="spacer">
</div>
The arguments passed to the &quot;use&quot; statement which invokes <b>sigtrap</b> are processed in order.  When a signal name or the name of one of  <b>sigtrap</b>'s signal lists is encountered a handler is immediately installed, when an option is encountered it affects subsequently installed handlers.</div>
<div class="section">
<h1>OPTIONS</h1><div class="subsection">
<h2>SIGNAL HANDLERS</h2> These options affect which handler will be used for subsequently installed signals.<dl>
<dt>
<b>stack-trace</b></dt>
<dd>
The handler used for subsequently installed signals outputs a Perl stack trace to STDERR and then tries to dump core.  This is the default signal handler.</dd>
</dl>
<dl>
<dt>
<b>die</b></dt>
<dd>
The handler used for subsequently installed signals calls &quot;die&quot; (actually &quot;croak&quot;) with a message indicating which signal was caught.</dd>
</dl>
<dl>
<dt>
<b>handler</b> <i>your-handler</i></dt>
<dd>
<i>your-handler</i> will be used as the handler for subsequently installed signals.   <i>your-handler</i> can be any value which is valid as an assignment to an element of %SIG. See perlvar for examples of handler functions.</dd>
</dl>
</div>
<div class="subsection">
<h2>SIGNAL LISTS</h2>  <b>sigtrap</b> has a few built-in lists of signals to trap.  They are:<dl>
<dt>
<b>normal-signals</b></dt>
<dd>
These are the signals which a program might normally expect to encounter and which by default cause it to terminate.  They are HUP, INT, PIPE and TERM.</dd>
</dl>
<dl>
<dt>
<b>error-signals</b></dt>
<dd>
These signals usually indicate a serious problem with the Perl interpreter or with your script.  They are ABRT, BUS, EMT, FPE, ILL, QUIT, SEGV, SYS and TRAP.</dd>
</dl>
<dl>
<dt>
<b>old-interface-signals</b></dt>
<dd>
These are the signals which were trapped by default by the old  <b>sigtrap</b> interface, they are ABRT, BUS, EMT, FPE, ILL, PIPE, QUIT, SEGV, SYS, TERM, and TRAP.  If no signals or signals lists are passed to  <b>sigtrap</b>, this list is used.</dd>
</dl>
<div class="spacer">
</div>
For each of these three lists, the collection of signals set to be trapped is checked before trapping; if your architecture does not implement a particular signal, it will not be trapped but rather silently ignored.</div>
<div class="subsection">
<h2>OTHER</h2><dl>
<dt>
<b>untrapped</b></dt>
<dd>
This token tells <b>sigtrap</b> to install handlers only for subsequently listed signals which aren't already trapped or ignored.</dd>
</dl>
<dl>
<dt>
<b>any</b></dt>
<dd>
This token tells <b>sigtrap</b> to install handlers for all subsequently listed signals.  This is the default behavior.</dd>
</dl>
<dl>
<dt>
<i>signal</i></dt>
<dd>
Any argument which looks like a signal name (that is, &quot;/^[A-Z][A-Z0-9]*$/&quot;) indicates that  <b>sigtrap</b> should install a handler for that name.</dd>
</dl>
<dl>
<dt>
<i>number</i></dt>
<dd>
Require that at least version <i>number</i> of <b>sigtrap</b> is being used.</dd>
</dl>
</div>
</div>
<div class="section">
<h1>EXAMPLES</h1> Provide a stack trace for the old-interface-signals:<div class="spacer">
</div>
<br/>
    use sigtrap;<br/>
<div class="spacer">
</div>
Ditto:<div class="spacer">
</div>
<br/>
    use sigtrap qw(stack-trace old-interface-signals);<br/>
<div class="spacer">
</div>
Provide a stack trace on the 4 listed signals only:<div class="spacer">
</div>
<br/>
    use sigtrap qw(BUS SEGV PIPE ABRT);<br/>
<div class="spacer">
</div>
Die on INT or QUIT:<div class="spacer">
</div>
<br/>
    use sigtrap qw(die INT QUIT);<br/>
<div class="spacer">
</div>
Die on HUP, INT, PIPE or TERM:<div class="spacer">
</div>
<br/>
    use sigtrap qw(die normal-signals);<br/>
<div class="spacer">
</div>
Die on HUP, INT, PIPE or TERM, except don't change the behavior for signals which are already trapped or ignored:<div class="spacer">
</div>
<br/>
    use sigtrap qw(die untrapped normal-signals);<br/>
<div class="spacer">
</div>
Die on receipt one of an of the <b>normal-signals</b> which is currently  <b>untrapped</b>, provide a stack trace on receipt of <b>any</b> of the  <b>error-signals</b>:<div class="spacer">
</div>
<br/>
    use sigtrap qw(die untrapped normal-signals<br/>
                    stack-trace any error-signals);<br/>
<div class="spacer">
</div>
Install <i>my_handler()</i> as the handler for the <b>normal-signals</b>:<div class="spacer">
</div>
<br/>
    use sigtrap 'handler', \&amp;my_handler, 'normal-signals';<br/>
<div class="spacer">
</div>
Install <i>my_handler()</i> as the handler for the normal-signals, provide a Perl stack trace on receipt of one of the error-signals:<div class="spacer">
</div>
<br/>
    use sigtrap qw(handler my_handler normal-signals<br/>
                    stack-trace error-signals);<br/>
</div>
<table class="foot">
<tr>
<td class="foot-date">
2011-09-19</td>
<td class="foot-os">
perl v5.14.2</td>
</tr>
</table>
</div>
</body>
</html>

