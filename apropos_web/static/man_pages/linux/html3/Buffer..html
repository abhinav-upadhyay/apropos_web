<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/linux/style.css" type="text/css" media="all"/>
<title>
Buffer(3)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
Buffer(3)</td>
<td class="head-vol">
OCaml library</td>
<td class="head-rtitle">
Buffer(3)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>NAME</h1> Buffer - Extensible buffers.</div>
<div class="section">
<h1>Module</h1> Module   Buffer</div>
<div class="section">
<h1>Documentation</h1> Module <b>Buffer</b><br/>
 : <b>sig end</b><div style="height: 1.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
Extensible buffers.<div style="height: 1.00em;">
&#160;</div>
This module implements buffers that automatically expand as necessary.  It provides accumulative concatenation of strings in quasi-linear time (instead of quadratic time when strings are concatenated pairwise).<div style="height: 1.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
<i>type t</i><div style="height: 1.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
The abstract type of buffers.<div style="height: 1.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
<i>val create</i> : <b>int -&gt; t</b><div style="height: 1.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
<b>create n</b> returns a fresh buffer, initially empty. The <b>n</b> parameter is the initial size of the internal byte sequence that holds the buffer contents. That byte sequence is automatically reallocated when more than <b>n</b> characters are stored in the buffer, but shrinks back to <b>n</b> characters when <b>reset</b> is called. For best performance, <b>n</b> should be of the same order of magnitude as the number of characters that are expected to be stored in the buffer (for instance, 80 for a buffer that holds one output line).  Nothing bad will happen if the buffer grows beyond that limit, however. In doubt, take <b>n = 16</b> for instance. If <b>n</b> is not between 1 and <b>Sys.max_string_length</b> , it will be clipped to that interval.<div style="height: 1.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
<i>val contents</i> : <b>t -&gt; string</b><div style="height: 1.00em;">
&#160;</div>
Return a copy of the current contents of the buffer. The buffer itself is unchanged.<div style="height: 1.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
<i>val to_bytes</i> : <b>t -&gt; bytes</b><div style="height: 1.00em;">
&#160;</div>
Return a copy of the current contents of the buffer. The buffer itself is unchanged.<div style="height: 1.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
<b>Since</b> 4.02<div style="height: 1.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
<i>val sub</i> : <b>t -&gt; int -&gt; int -&gt; string</b><div style="height: 1.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
<b>Buffer.sub b off len</b> returns (a copy of) the bytes from the current contents of the buffer <b>b</b> starting at offset <b>off</b> of length <b>len</b> bytes. May raise <b>Invalid_argument</b> if out of bounds request. The buffer itself is unaffected.<div style="height: 1.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
<i>val blit</i> : <b>t -&gt; int -&gt; bytes -&gt; int -&gt; int -&gt; unit</b><div style="height: 1.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
<b>Buffer.blit src srcoff dst dstoff len</b> copies <b>len</b> characters from the current contents of the buffer <b>src</b> , starting at offset <b>srcoff</b> to <b>dst</b> , starting at character <b>dstoff</b> .<div style="height: 1.00em;">
&#160;</div>
Raise <b>Invalid_argument</b> if <b>srcoff</b> and <b>len</b> do not designate a valid range of <b>src</b> , or if <b>dstoff</b> and <b>len</b> do not designate a valid range of <b>dst</b> .<div style="height: 1.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
<b>Since</b> 3.11.2<div style="height: 1.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
<i>val nth</i> : <b>t -&gt; int -&gt; char</b><div style="height: 1.00em;">
&#160;</div>
get the n-th character of the buffer. Raise <b>Invalid_argument</b> if index out of bounds<div style="height: 1.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
<i>val length</i> : <b>t -&gt; int</b><div style="height: 1.00em;">
&#160;</div>
Return the number of characters currently contained in the buffer.<div style="height: 1.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
<i>val clear</i> : <b>t -&gt; unit</b><div style="height: 1.00em;">
&#160;</div>
Empty the buffer.<div style="height: 1.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
<i>val reset</i> : <b>t -&gt; unit</b><div style="height: 1.00em;">
&#160;</div>
Empty the buffer and deallocate the internal byte sequence holding the buffer contents, replacing it with the initial internal byte sequence of length <b>n</b> that was allocated by <b>Buffer.create</b> <b>n</b> . For long-lived buffers that may have grown a lot, <b>reset</b> allows faster reclamation of the space used by the buffer.<div style="height: 1.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
<i>val add_char</i> : <b>t -&gt; char -&gt; unit</b><div style="height: 1.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
<b>add_char b c</b> appends the character <b>c</b> at the end of the buffer <b>b</b> .<div style="height: 1.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
<i>val add_string</i> : <b>t -&gt; string -&gt; unit</b><div style="height: 1.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
<b>add_string b s</b> appends the string <b>s</b> at the end of the buffer <b>b</b> .<div style="height: 1.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
<i>val add_bytes</i> : <b>t -&gt; bytes -&gt; unit</b><div style="height: 1.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
<b>add_string b s</b> appends the string <b>s</b> at the end of the buffer <b>b</b> .<div style="height: 1.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
<b>Since</b> 4.02<div style="height: 1.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
<i>val add_substring</i> : <b>t -&gt; string -&gt; int -&gt; int -&gt; unit</b><div style="height: 1.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
<b>add_substring b s ofs len</b> takes <b>len</b> characters from offset <b>ofs</b> in string <b>s</b> and appends them at the end of the buffer <b>b</b> .<div style="height: 1.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
<i>val add_subbytes</i> : <b>t -&gt; bytes -&gt; int -&gt; int -&gt; unit</b><div style="height: 1.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
<b>add_substring b s ofs len</b> takes <b>len</b> characters from offset <b>ofs</b> in byte sequence <b>s</b> and appends them at the end of the buffer <b>b</b> .<div style="height: 1.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
<b>Since</b> 4.02<div style="height: 1.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
<i>val add_substitute</i> : <b>t -&gt; (string -&gt; string) -&gt; string -&gt; unit</b><div style="height: 1.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
<b>add_substitute b f s</b> appends the string pattern <b>s</b> at the end of the buffer <b>b</b> with substitution. The substitution process looks for variables into the pattern and substitutes each variable name by its value, as obtained by applying the mapping <b>f</b> to the variable name. Inside the string pattern, a variable name immediately follows a non-escaped <b>$</b> character and is one of the following:<div style="height: 1.00em;">
&#160;</div>
-a non empty sequence of alphanumeric or <b>_</b> characters,<div style="height: 1.00em;">
&#160;</div>
-an arbitrary sequence of characters enclosed by a pair of matching parentheses or curly brackets. An escaped <b>$</b> character is a <b>$</b> that immediately follows a backslash character; it then stands for a plain <b>$</b> . Raise <b>Not_found</b> if the closing character of a parenthesized variable cannot be found.<div style="height: 1.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
<i>val add_buffer</i> : <b>t -&gt; t -&gt; unit</b><div style="height: 1.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
<b>add_buffer b1 b2</b> appends the current contents of buffer <b>b2</b> at the end of buffer <b>b1</b> . <b>b2</b> is not modified.<div style="height: 1.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
<i>val add_channel</i> : <b>t -&gt; Pervasives.in_channel -&gt; int -&gt; unit</b><div style="height: 1.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
<b>add_channel b ic n</b> reads exactly <b>n</b> character from the input channel <b>ic</b> and stores them at the end of buffer <b>b</b> . Raise <b>End_of_file</b> if the channel contains fewer than <b>n</b> characters.<div style="height: 1.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
<i>val output_buffer</i> : <b>Pervasives.out_channel -&gt; t -&gt; unit</b><div style="height: 1.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
<b>output_buffer oc b</b> writes the current contents of buffer <b>b</b> on the output channel <b>oc</b> .<div style="height: 1.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
</div>
<table class="foot">
<tr>
<td class="foot-date">
2015-08-12</td>
<td class="foot-os">
OCamldoc</td>
</tr>
</table>
</div>
</body>
</html>

