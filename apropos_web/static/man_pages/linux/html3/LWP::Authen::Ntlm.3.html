<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/linux/style.css" type="text/css" media="all"/>
<title>
LWP::Authen::Ntlm(3pm)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
LWP::Authen::Ntlm(3pm)</td>
<td class="head-vol">
User Contributed Perl Documentation</td>
<td class="head-rtitle">
LWP::Authen::Ntlm(3pm)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>NAME</h1> LWP::Authen::Ntlm - Library for enabling NTLM authentication (Microsoft) in LWP</div>
<div class="section">
<h1>SYNOPSIS</h1><br/>
 use LWP::UserAgent;<br/>
 use HTTP::Request::Common;<br/>
 my $url = 'http://www.company.com/protected_page.html';<br/>
<br/>
 # Set up the ntlm client and then the base64 encoded ntlm handshake message<br/>
 my $ua = LWP::UserAgent-&gt;new(keep_alive=&gt;1);<br/>
 $ua-&gt;credentials('www.company.com:80', '', &quot;MyDomain\\MyUserCode&quot;, 'MyPassword');<br/>
<br/>
 $request = GET $url;<br/>
 print &quot;--Performing request now...-----------\n&quot;;<br/>
 $response = $ua-&gt;request($request);<br/>
 print &quot;--Done with request-------------------\n&quot;;<br/>
<br/>
 if ($response-&gt;is_success) {print &quot;It worked!-&gt;&quot; . $response-&gt;code . &quot;\n&quot;}<br/>
 else {print &quot;It didn't work!-&gt;&quot; . $response-&gt;code . &quot;\n&quot;}<br/>
</div>
<div class="section">
<h1>DESCRIPTION</h1> &quot;LWP::Authen::Ntlm&quot; allows LWP to authenticate against servers that are using the NTLM authentication scheme popularized by Microsoft.  This type of authentication is common on intranets of Microsoft-centric organizations.<div class="spacer">
</div>
The module takes advantage of the Authen::NTLM module by Mark Bush.  Since there is also another Authen::NTLM module available from CPAN by Yee Man Chan with an entirely different interface, it is necessary to ensure that you have the correct NTLM module.<div class="spacer">
</div>
In addition, there have been problems with incompatibilities between different versions of Mime::Base64, which Bush's Authen::NTLM makes use of.  Therefore, it is necessary to ensure that your Mime::Base64 module supports exporting of the encode_base64 and decode_base64 functions.</div>
<div class="section">
<h1>USAGE</h1> The module is used indirectly through LWP, rather than including it directly in your code.  The LWP system will invoke the NTLM authentication when it encounters the authentication scheme while attempting to retrieve a URL from a server.  In order for the NTLM authentication to work, you must have a few things set up in your code prior to attempting to retrieve the URL:<dl>
<dt>
&#8226;</dt>
<dd>
Enable persistent HTTP connections<div style="height: 1.00em;">
&#160;</div>
To do this, pass the &quot;keep_alive=&gt;1&quot; option to the LWP::UserAgent when creating it, like this:<div style="height: 1.00em;">
&#160;</div>
<br/>
    my $ua = LWP::UserAgent-&gt;new(keep_alive=&gt;1);<br/>
</dd>
</dl>
<dl>
<dt>
&#8226;</dt>
<dd>
Set the credentials on the UserAgent object<div style="height: 1.00em;">
&#160;</div>
The credentials must be set like this:<div style="height: 1.00em;">
&#160;</div>
<br/>
   $ua-&gt;credentials('www.company.com:80', '', &quot;MyDomain\\MyUserCode&quot;, 'MyPassword');<br/>
<div style="height: 1.00em;">
&#160;</div>
Note that you cannot use the HTTP::Request object's <i>authorization_basic()</i> method to set the credentials.  Note, too, that the 'www.company.com:80' portion only sets credentials on the specified port AND it is case-sensitive (this is due to the way LWP is coded, and has nothing to do with LWP::Authen::Ntlm)</dd>
</dl>
</div>
<div class="section">
<h1>AVAILABILITY</h1> General queries regarding LWP should be made to the LWP Mailing List.<div class="spacer">
</div>
Questions specific to LWP::Authen::Ntlm can be forwarded to jtillman@bigfoot.com</div>
<div class="section">
<h1>COPYRIGHT</h1> Copyright (c) 2002 James Tillman. All rights reserved. This program is free software; you can redistribute it and/or modify it under the same terms as Perl itself.</div>
<div class="section">
<h1>SEE ALSO</h1> LWP, LWP::UserAgent, lwpcook.</div>
<table class="foot">
<tr>
<td class="foot-date">
2011-04-09</td>
<td class="foot-os">
perl v5.14.2</td>
</tr>
</table>
</div>
</body>
</html>

