<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/linux/style.css" type="text/css" media="all"/>
<title>
IO::Select(3perl)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
IO::Select(3perl)</td>
<td class="head-vol">
Perl Programmers Reference Guide</td>
<td class="head-rtitle">
IO::Select(3perl)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>NAME</h1> IO::Select - OO interface to the select system call</div>
<div class="section">
<h1>SYNOPSIS</h1><br/>
    use IO::Select;<br/>
<br/>
    $s = IO::Select-&gt;new();<br/>
<br/>
    $s-&gt;add(\*STDIN);<br/>
    $s-&gt;add($some_handle);<br/>
<br/>
    @ready = $s-&gt;can_read($timeout);<br/>
<br/>
    @ready = IO::Select-&gt;new(@handles)-&gt;can_read(0);<br/>
</div>
<div class="section">
<h1>DESCRIPTION</h1> The &quot;IO::Select&quot; package implements an object approach to the system &quot;select&quot; function call. It allows the user to see what IO handles, see IO::Handle, are ready for reading, writing or have an exception pending.</div>
<div class="section">
<h1>CONSTRUCTOR</h1><dl>
<dt>
new ( [ HANDLES ] )</dt>
<dd>
The constructor creates a new object and optionally initialises it with a set of handles.</dd>
</dl>
</div>
<div class="section">
<h1>METHODS</h1><dl>
<dt>
add ( HANDLES )</dt>
<dd>
Add the list of handles to the &quot;IO::Select&quot; object. It is these values that will be returned when an event occurs. &quot;IO::Select&quot; keeps these values in a cache which is indexed by the &quot;fileno&quot; of the handle, so if more than one handle with the same &quot;fileno&quot; is specified then only the last one is cached.<div style="height: 1.00em;">
&#160;</div>
Each handle can be an &quot;IO::Handle&quot; object, an integer or an array reference where the first element is an &quot;IO::Handle&quot; or an integer.</dd>
</dl>
<dl>
<dt>
remove ( HANDLES )</dt>
<dd>
Remove all the given handles from the object. This method also works by the &quot;fileno&quot; of the handles. So the exact handles that were added need not be passed, just handles that have an equivalent &quot;fileno&quot;</dd>
</dl>
<dl>
<dt>
exists ( HANDLE )</dt>
<dd>
Returns a true value (actually the handle itself) if it is present. Returns undef otherwise.</dd>
</dl>
<dl>
<dt>
handles</dt>
<dd>
Return an array of all registered handles.</dd>
</dl>
<dl>
<dt>
can_read ( [ TIMEOUT ] )</dt>
<dd>
Return an array of handles that are ready for reading. &quot;TIMEOUT&quot; is the maximum amount of time to wait before returning an empty list, in seconds, possibly fractional. If &quot;TIMEOUT&quot; is not given and any handles are registered then the call will block.</dd>
</dl>
<dl>
<dt>
can_write ( [ TIMEOUT ] )</dt>
<dd>
Same as &quot;can_read&quot; except check for handles that can be written to.</dd>
</dl>
<dl>
<dt>
has_exception ( [ TIMEOUT ] )</dt>
<dd>
Same as &quot;can_read&quot; except check for handles that have an exception condition, for example pending out-of-band data.</dd>
</dl>
<dl>
<dt>
count ()</dt>
<dd>
Returns the number of handles that the object will check for when one of the &quot;can_&quot; methods is called or the object is passed to the &quot;select&quot; static method.</dd>
</dl>
<dl>
<dt>
<i>bits()</i></dt>
<dd>
Return the bit string suitable as argument to the core <i>select()</i> call.</dd>
</dl>
<dl>
<dt>
select ( READ, WRITE, EXCEPTION [, TIMEOUT ] )</dt>
<dd>
&quot;select&quot; is a static method, that is you call it with the package name like &quot;new&quot;. &quot;READ&quot;, &quot;WRITE&quot; and &quot;EXCEPTION&quot; are either &quot;undef&quot; or &quot;IO::Select&quot; objects. &quot;TIMEOUT&quot; is optional and has the same effect as for the core select call.<div style="height: 1.00em;">
&#160;</div>
The result will be an array of 3 elements, each a reference to an array which will hold the handles that are ready for reading, writing and have exceptions respectively. Upon error an empty list is returned.</dd>
</dl>
</div>
<div class="section">
<h1>EXAMPLE</h1> Here is a short example which shows how &quot;IO::Select&quot; could be used to write a server which communicates with several sockets while also listening for more connections on a listen socket<div class="spacer">
</div>
<br/>
    use IO::Select;<br/>
    use IO::Socket;<br/>
<br/>
    $lsn = IO::Socket::INET-&gt;new(Listen =&gt; 1, LocalPort =&gt; 8080);<br/>
    $sel = IO::Select-&gt;new( $lsn );<br/>
<br/>
    while(@ready = $sel-&gt;can_read) {<br/>
        foreach $fh (@ready) {<br/>
            if($fh == $lsn) {<br/>
                # Create a new socket<br/>
                $new = $lsn-&gt;accept;<br/>
                $sel-&gt;add($new);<br/>
            }<br/>
            else {<br/>
                # Process socket<br/>
<br/>
                # Maybe we have finished with the socket<br/>
                $sel-&gt;remove($fh);<br/>
                $fh-&gt;close;<br/>
            }<br/>
        }<br/>
    }<br/>
</div>
<div class="section">
<h1>AUTHOR</h1> Graham Barr. Currently maintained by the Perl Porters.  Please report all bugs to &lt;perl5-porters@perl.org&gt;.</div>
<div class="section">
<h1>COPYRIGHT</h1> Copyright (c) 1997-8 Graham Barr &lt;gbarr@pobox.com&gt;. All rights reserved. This program is free software; you can redistribute it and/or modify it under the same terms as Perl itself.</div>
<table class="foot">
<tr>
<td class="foot-date">
2011-09-19</td>
<td class="foot-os">
perl v5.14.2</td>
</tr>
</table>
</div>
</body>
</html>

