<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/linux/style.css" type="text/css" media="all"/>
<title>
Moose::Manual::Delta(3pm)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
Moose::Manual::Delta(3pm)</td>
<td class="head-vol">
User Contributed Perl Documentation</td>
<td class="head-rtitle">
Moose::Manual::Delta(3pm)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>NAME</h1> Moose::Manual::Delta - Important Changes in Moose</div>
<div class="section">
<h1>VERSION</h1> version 2.0401</div>
<div class="section">
<h1>DESCRIPTION</h1> This documents any important or noteworthy changes in Moose, with a focus on things that affect backwards compatibility. This does duplicate data from the  <i>Changes</i> file, but aims to provide more details and when possible workarounds.<div class="spacer">
</div>
Besides helping keep up with changes, you can also use this document for finding the lowest version of Moose that supported a given feature.  If you encounter a problem and have a solution but don't see it documented here, or think we missed an important feature, please send us a patch.</div>
<div class="section">
<h1>2.0300</h1><dl>
<dt>
The parent of a union type is its components' nearest common ancestor</dt>
<dd>
Previously, union types considered all of their component types their parent types. This was incorrect because parent types are defined as types that must be satisfied in order for the child type to be satisfied, but in a union, validating as any parent type will validate against the entire union. This has been changed to find the nearest common ancestor for all of its components. For example, a union of &quot;Int|ArrayRef[Int]&quot; now has a parent of &quot;Defined&quot;.</dd>
</dl>
<dl>
<dt>
Union types consider all members in the &quot;is_subtype_of&quot; and &quot;is_a_type_of&quot; methods</dt>
<dd>
Previously, a union type would report itself as being of a subtype of a type if  <i>any</i> of its member types were subtypes of that type. This was incorrect because any value that passes a subtype constraint must also pass a parent constraint. This has changed so that  <i>all</i> of its member types must be a subtype of the specified type.</dd>
</dl>
<dl>
<dt>
Enum types now work with just one value</dt>
<dd>
Previously, an &quot;enum&quot; type needed to have two or more values.  Nobody knew why, so we fixed it.</dd>
</dl>
<dl>
<dt>
Methods defined in UNIVERSAL now appear in the MOP</dt>
<dd>
Any method introspection methods that look at methods from parent classes now find methods defined in UNIVERSAL. This includes methods like &quot;$class-&gt;get_all_methods&quot; and &quot;$class-&gt;find_method_by_name&quot;.<div style="height: 1.00em;">
&#160;</div>
This also means that you can now apply method modifiers to these methods.</dd>
</dl>
<dl>
<dt>
Hand-optimized type constraint code causes a deprecation warning</dt>
<dd>
If you provide an optimized sub ref for a type constraint, this now causes a deprecation warning. Typically, this comes from passing an &quot;optimize_as&quot; parameter to &quot;subtype&quot;, but it could also happen if you create a Moose::Meta::TypeConstraint object directly.<div style="height: 1.00em;">
&#160;</div>
Use the inlining feature (&quot;inline_as&quot;) added in 2.0100 instead.</dd>
</dl>
<dl>
<dt>
&quot;Class::Load::load_class&quot; and &quot;is_class_loaded&quot; have been removed</dt>
<dd>
The &quot;Class::MOP::load_class&quot; and &quot;Class::MOP::is_class_loaded&quot; subroutines are no longer documented, and will cause a deprecation warning in the future. Moose now uses Class::Load to provide this functionality, and you should do so as well.</dd>
</dl>
</div>
<div class="section">
<h1>2.0205</h1><dl>
<dt>
Array and Hash native traits provide a &quot;shallow_clone&quot; method</dt>
<dd>
The Array and Hash native traits now provide a &quot;shallow_clone&quot; method, which will return a reference to a new container with the same contents as the attribute's reference.</dd>
</dl>
</div>
<div class="section">
<h1>2.0100</h1><dl>
<dt>
Hand-optimized type constraint code is deprecated in favor of inlining</dt>
<dd>
Moose allows you to provide a hand-optimized version of a type constraint's subroutine reference. This version allows type constraints to generate inline code, and you should use this inlining instead of providing a hand-optimized subroutine reference.<div style="height: 1.00em;">
&#160;</div>
This affects the &quot;optimize_as&quot; sub exported by Moose::Util::TypeConstraints. Use &quot;inline_as&quot; instead.<div style="height: 1.00em;">
&#160;</div>
This will start warning in the 2.0300 release.</dd>
</dl>
</div>
<div class="section">
<h1>2.0002</h1><dl>
<dt>
More useful type constraint error messages</dt>
<dd>
If you have Devel::PartialDump version 0.14 or higher installed, Moose's type constraint error messages will use it to display the invalid value, rather than just displaying it directly. This will generally be much more useful. For instance, instead of this:<div style="height: 1.00em;">
&#160;</div>
<br/>
  Attribute (foo) does not pass the type constraint because: Validation failed for 'ArrayRef[Int]' with value ARRAY(0x275eed8)<br/>
<div style="height: 1.00em;">
&#160;</div>
the error message will instead look like<div style="height: 1.00em;">
&#160;</div>
<br/>
  Attribute (foo) does not pass the type constraint because: Validation failed for 'ArrayRef[Int]' with value [ &quot;a&quot; ]<br/>
<div style="height: 1.00em;">
&#160;</div>
Note that Devel::PartialDump can't be made a direct dependency at the moment, because it uses Moose itself, but we're considering options to make this easier.</dd>
</dl>
</div>
<div class="section">
<h1>2.0000</h1><dl>
<dt>
Roles have their own default attribute metaclass</dt>
<dd>
Previously, when a role was applied to a class, it would use the attribute metaclass defined in the class when copying over the attributes in the role. This was wrong, because for instance, using MooseX::FollowPBP in the class would end up renaming all of the accessors generated by the role, some of which may be being called in the role, causing it to break. Roles now keep track of their own attribute metaclass to use by default when being applied to a class (defaulting to Moose::Meta::Attribute). This is modifiable using Moose::Util::MetaRole by passing the &quot;applied_attribute&quot; key to the &quot;role_metaroles&quot; option, as in:<div style="height: 1.00em;">
&#160;</div>
<br/>
    Moose::Util::MetaRole::apply_metaroles(<br/>
        for =&gt; __PACKAGE__,<br/>
        class_metaroles =&gt; {<br/>
            attribute =&gt; ['My::Meta::Role::Attribute'],<br/>
        },<br/>
        role_metaroles =&gt; {<br/>
            applied_attribute =&gt; ['My::Meta::Role::Attribute'],<br/>
        },<br/>
    );<br/>
</dd>
</dl>
<dl>
<dt>
Class::MOP has been folded into the Moose dist</dt>
<dd>
Moose and Class::MOP are tightly related enough that they have always had to be kept pretty closely in step in terms of versions. Making them into a single dist should simplify the upgrade process for users, as it should no longer be possible to upgrade one without the other and potentially cause issues. No functionality has changed, and this should be entirely transparent.</dd>
</dl>
<dl>
<dt>
Moose's conflict checking is more robust and useful</dt>
<dd>
There are two parts to this. The most useful one right now is that Moose will ship with a &quot;moose-outdated&quot; script, which can be run at any point to list the modules which are installed that conflict with the installed version of Moose. After upgrading Moose, running &quot;moose-outdated | cpanm&quot; should be sufficient to ensure that all of the Moose extensions you use will continue to work.<div style="height: 1.00em;">
&#160;</div>
The other part is that Moose's &quot;META.json&quot; file will also specify the conflicts under the &quot;x_conflicts&quot; key. We are working with the Perl tool chain developers to try to get conflicts support added to CPAN clients, and if/when that happens, the metadata already exists, and so the conflict checking will become automatic.</dd>
</dl>
<dl>
<dt>
Most deprecated APIs/features are slated for removal in Moose 2.0200</dt>
<dd>
Most of the deprecated APIs and features in Moose will start throwing an error in Moose 2.0200. Some of the features will go away entirely, and some will simply throw an error.<div style="height: 1.00em;">
&#160;</div>
The things on the chopping block are:</dd>
</dl>
<div style="margin-left: 4.00ex;">
<dl>
<dt>
&#8226;</dt>
<dd>
Old public methods in Class::MOP and Moose<div style="height: 1.00em;">
&#160;</div>
This includes things like &quot;Class::MOP::Class-&gt;get_attribute_map&quot;, &quot;Class::MOP::Class-&gt;construct_instance&quot;, and many others. These were deprecated in Class::MOP 0.80_01, released on April 5, 2009.<div style="height: 1.00em;">
&#160;</div>
These methods will be removed entirely in Moose 2.0200.</dd>
</dl>
<dl>
<dt>
&#8226;</dt>
<dd>
Old public functions in Class::MOP<div style="height: 1.00em;">
&#160;</div>
This include &quot;Class::MOP::subname&quot;, &quot;Class::MOP::in_global_destruction&quot;, and the &quot;Class::MOP::HAS_ISAREV&quot; constant. The first two were deprecated in 0.84, and the last in 0.80. Class::MOP 0.84 was released on May 12, 2009.<div style="height: 1.00em;">
&#160;</div>
These functions will be removed entirely in Moose 2.0200.</dd>
</dl>
<dl>
<dt>
&#8226;</dt>
<dd>
The &quot;alias&quot; and &quot;excludes&quot; option for role composition<div style="height: 1.00em;">
&#160;</div>
These were renamed to &quot;-alias&quot; and &quot;-excludes&quot; in Moose 0.89, released on August 13, 2009.<div style="height: 1.00em;">
&#160;</div>
Passing these will throw an error in Moose 2.0200.</dd>
</dl>
<dl>
<dt>
&#8226;</dt>
<dd>
The old Moose::Util::MetaRole API<div style="height: 1.00em;">
&#160;</div>
This include the &quot;apply_metaclass_roles()&quot; function, as well as passing the &quot;for_class&quot; or any key ending in &quot;_roles&quot; to &quot;apply_metaroles()&quot;. This was deprecated in Moose 0.93_01, released on January 4, 2010.<div style="height: 1.00em;">
&#160;</div>
These will all throw an error in Moose 2.0200.</dd>
</dl>
<dl>
<dt>
&#8226;</dt>
<dd>
Passing plain lists to &quot;type()&quot; or &quot;subtype()&quot;<div style="height: 1.00em;">
&#160;</div>
The old API for these functions allowed you to pass a plain list of parameter, rather than a list of hash references (which is what &quot;as()&quot;, &quot;where&quot;, etc. return). This was deprecated in Moose 0.71_01, released on February 22, 2009.<div style="height: 1.00em;">
&#160;</div>
This will throw an error in Moose 2.0200.</dd>
</dl>
<dl>
<dt>
&#8226;</dt>
<dd>
The Role subtype<div style="height: 1.00em;">
&#160;</div>
This subtype was deprecated in Moose 0.84, released on June 26, 2009.<div style="height: 1.00em;">
&#160;</div>
This will be removed entirely in Moose 2.0200.</dd>
</dl>
</div>
<div style="margin-left: 4.00ex;">
</div>
</div>
<div class="section">
<h1>1.21</h1><dl>
<dt>
&#8226;</dt>
<dd>
New release policy<div style="height: 1.00em;">
&#160;</div>
As of the 2.0 release, Moose now has an official release and support policy, documented in Moose::Manual::Support. All API changes will now go through a deprecation cycle of at least one year, after which the deprecated API can be removed. Deprecations and removals will only happen in major releases.<div style="height: 1.00em;">
&#160;</div>
In between major releases, we will still make minor releases to add new features, fix bugs, update documentation, etc.</dd>
</dl>
</div>
<div class="section">
<h1>1.16</h1><dl>
<dt>
Configurable stacktraces</dt>
<dd>
Classes which use the Moose::Error::Default error class can now have stacktraces disabled by setting the &quot;MOOSE_ERROR_STYLE&quot; env var to &quot;croak&quot;. This is experimental, fairly incomplete, and won't work in all cases (because Moose's error system in general is all of these things), but this should allow for reducing at least some of the verbosity in most cases.</dd>
</dl>
</div>
<div class="section">
<h1>1.15</h1><dl>
<dt>
Native Delegations</dt>
<dd>
In previous versions of Moose, the Native delegations were created as closures. The generated code was often quite slow compared to doing the same thing by hand. For example, the Array's push delegation ended up doing something like this:<div style="height: 1.00em;">
&#160;</div>
<br/>
  push @{ $self-&gt;$reader() }, @_;<br/>
<div style="height: 1.00em;">
&#160;</div>
If the attribute was created without a reader, the $reader sub reference followed a very slow code path. Even with a reader, this is still slower than it needs to be.<div style="height: 1.00em;">
&#160;</div>
Native delegations are now generated as inline code, just like other accessors, so we can access the slot directly.<div style="height: 1.00em;">
&#160;</div>
In addition, native traits now do proper constraint checking in all cases. In particular, constraint checking has been improved for array and hash references. Previously, only the  <i>contained</i> type (the &quot;Str&quot; in &quot;HashRef[Str]&quot;) would be checked when a new value was added to the collection. However, if there was a constraint that applied to the whole value, this was never checked.<div style="height: 1.00em;">
&#160;</div>
In addition, coercions are now called on the whole value.<div style="height: 1.00em;">
&#160;</div>
The delegation methods now do more argument checking. All of the methods check that a valid number of arguments were passed to the method. In addition, the delegation methods check that the arguments are sane (array indexes, hash keys, numbers, etc.) when applicable. We have tried to emulate the behavior of Perl builtins as much as possible.<div style="height: 1.00em;">
&#160;</div>
Finally, triggers are called whenever the value of the attribute is changed by a Native delegation.<div style="height: 1.00em;">
&#160;</div>
These changes are only likely to break code in a few cases.<div style="height: 1.00em;">
&#160;</div>
The inlining code may or may not preserve the original reference when changes are made. In some cases, methods which change the value may replace it entirely. This will break tied values.<div style="height: 1.00em;">
&#160;</div>
If you have a typed arrayref or hashref attribute where the type enforces a constraint on the whole collection, this constraint will now be checked. It's possible that code which previously ran without errors will now cause the constraint to fail. However, presumably this is a good thing ;)<div style="height: 1.00em;">
&#160;</div>
If you are passing invalid arguments to a delegation which were previously being ignored, these calls will now fail.<div style="height: 1.00em;">
&#160;</div>
If your code relied on the trigger only being called for a regular writer, that may cause problems.<div style="height: 1.00em;">
&#160;</div>
As always, you are encouraged to test before deploying the latest version of Moose to production.</dd>
</dl>
<dl>
<dt>
Defaults is and default for String, Counter, and Bool</dt>
<dd>
A few native traits (String, Counter, Bool) provide default values of &quot;is&quot; and &quot;default&quot; when you created an attribute. Allowing them to provide these values is now deprecated. Supply the value yourself when creating the attribute.</dd>
</dl>
<dl>
<dt>
The &quot;meta&quot; method</dt>
<dd>
Moose and Class::MOP have been cleaned up internally enough to make the &quot;meta&quot; method that you get by default optional. &quot;use Moose&quot; and &quot;use Moose::Role&quot; now can take an additional &quot;-meta_name&quot; option, which tells Moose what name to use when installing the &quot;meta&quot; method. Passing &quot;undef&quot; to this option suppresses generation of the &quot;meta&quot; method entirely. This should be useful for users of modules which also use a &quot;meta&quot; method or function, such as Curses or Rose::DB::Object.</dd>
</dl>
</div>
<div class="section">
<h1>1.09</h1><dl>
<dt>
All deprecated features now warn</dt>
<dd>
Previously, deprecation mostly consisted of simply saying &quot;X is deprecated&quot; in the Changes file. We were not very consistent about actually warning. Now, all deprecated features still present in Moose actually give a warning. The warning is issued once per calling package. See Moose::Deprecated for more details.</dd>
</dl>
<dl>
<dt>
You cannot pass &quot;coerce =&gt; 1&quot; unless the attribute's type constraint has a coercion</dt>
<dd>
Previously, this was accepted, and it sort of worked, except that if you attempted to set the attribute after the object was created, you would get a runtime error.<div style="height: 1.00em;">
&#160;</div>
Now you will get a warning when you attempt to define the attribute.</dd>
</dl>
<dl>
<dt>
&quot;no Moose&quot;, &quot;no Moose::Role&quot;, and &quot;no Moose::Exporter&quot; no longer unimport strict and warnings</dt>
<dd>
This change was made in 1.05, and has now been reverted. We don't know if the user has explicitly loaded strict or warnings on their own, and unimporting them is just broken in that case.</dd>
</dl>
<dl>
<dt>
Reversed logic when defining which options can be changed</dt>
<dd>
Moose::Meta::Attribute now allows all options to be changed in an overridden attribute. The previous behaviour required each option to be whitelisted using the &quot;legal_options_for_inheritance&quot; method. This method has been removed, and there is a new method, &quot;illegal_options_for_inheritance&quot;, which can now be used to prevent certain options from being changeable.<div style="height: 1.00em;">
&#160;</div>
In addition, we only throw an error if the illegal option is actually changed. If the superclass didn't specify this option at all when defining the attribute, the subclass version can still add it as an option.<div style="height: 1.00em;">
&#160;</div>
Example of overriding this in an attribute trait:<div style="height: 1.00em;">
&#160;</div>
<br/>
  package Bar::Meta::Attribute;<br/>
  use Moose::Role;<br/>
<br/>
  has 'my_illegal_option' =&gt; (<br/>
      isa =&gt; 'CodeRef',<br/>
      is  =&gt; 'rw',<br/>
  );<br/>
<br/>
  around illegal_options_for_inheritance =&gt; sub {<br/>
      return ( shift-&gt;(@_), qw/my_illegal_option/ );<br/>
  };<br/>
</dd>
</dl>
</div>
<div class="section">
<h1>1.05</h1><dl>
<dt>
&quot;BUILD&quot; in Moose::Object methods are now called when calling &quot;new_object&quot;</dt>
<dd>
Previously, &quot;BUILD&quot; methods would only be called from &quot;Moose::Object::new&quot;, but now they are also called when constructing an object via &quot;Moose::Meta::Class::new_object&quot;. &quot;BUILD&quot; methods are an inherent part of the object construction process, and this should make &quot;$meta-&gt;new_object&quot; actually usable without forcing people to use &quot;$meta-&gt;name-&gt;new&quot;.</dd>
</dl>
<dl>
<dt>
&quot;no Moose&quot;, &quot;no Moose::Role&quot;, and &quot;no Moose::Exporter&quot; now unimport strict and warnings</dt>
<dd>
In the interest of having &quot;no Moose&quot; clean up everything that &quot;use Moose&quot; does in the calling scope, &quot;no Moose&quot; (as well as all other Moose::Exporter-using modules) now unimports strict and warnings.</dd>
</dl>
<dl>
<dt>
Metaclass compatibility checking and fixing should be much more robust</dt>
<dd>
The metaclass compatibility checking and fixing algorithms have been completely rewritten, in both Class::MOP and Moose. This should resolve many confusing errors when dealing with non-Moose inheritance and with custom metaclasses for things like attributes, constructors, etc. For correct code, the only thing that should require a change is that custom error metaclasses must now inherit from Moose::Error::Default.</dd>
</dl>
</div>
<div class="section">
<h1>1.02</h1><dl>
<dt>
Moose::Meta::TypeConstraint::Class is_subtype_of behavior</dt>
<dd>
Earlier versions of is_subtype_of would incorrectly return true when called with itself, its own TC name or its class name as an argument. (i.e. $foo_tc-&gt;is_subtype_of('Foo') == 1) This behavior was a caused by &quot;isa&quot; being checked before the class name. The old behavior can be accessed with is_type_of</dd>
</dl>
</div>
<div class="section">
<h1>1.00</h1><dl>
<dt>
Moose::Meta::Attribute::Native::Trait::Code no longer creates reader methods by default</dt>
<dd>
Earlier versions of Moose::Meta::Attribute::Native::Trait::Code created read-only accessors for the attributes it's been applied to, even if you didn't ask for it with &quot;is =&gt; 'ro'&quot;. This incorrect behaviour has now been fixed.</dd>
</dl>
</div>
<div class="section">
<h1>0.95</h1><dl>
<dt>
Moose::Util add_method_modifier behavior</dt>
<dd>
add_method_modifier (and subsequently the sugar functions Moose::before, Moose::after, and Moose::around) can now accept arrayrefs, with the same behavior as lists. Types other than arrayref and regexp result in an error.</dd>
</dl>
</div>
<div class="section">
<h1>0.93_01 and 0.94</h1><dl>
<dt>
Moose::Util::MetaRole API has changed</dt>
<dd>
The &quot;apply_metaclass_roles&quot; function is now called &quot;apply_metaroles&quot;. The way arguments are supplied has been changed to force you to distinguish between metaroles applied to Moose::Meta::Class (and helpers) versus Moose::Meta::Role.<div style="height: 1.00em;">
&#160;</div>
The old API still works, but will warn in a future release, and eventually be removed.</dd>
</dl>
<dl>
<dt>
Moose::Meta::Role has real attributes</dt>
<dd>
The attributes returned by Moose::Meta::Role are now instances of the Moose::Meta::Role::Attribute class, instead of bare hash references.</dd>
</dl>
<dl>
<dt>
&quot;no Moose&quot; now removes &quot;blessed&quot; and &quot;confess&quot;</dt>
<dd>
Moose is now smart enough to know exactly what it exported, even when it re-exports functions from other packages. When you unimport Moose, it will remove these functions from your namespace unless you  <i>also</i> imported them directly from their respective packages.<div style="height: 1.00em;">
&#160;</div>
If you have a &quot;no Moose&quot; in your code <i>before</i> you call &quot;blessed&quot; or &quot;confess&quot;, your code will break. You can either move the &quot;no Moose&quot; call later in your code, or explicitly import the relevant functions from the packages that provide them.</dd>
</dl>
<dl>
<dt>
Moose::Exporter is smarter about unimporting re-exports</dt>
<dd>
The change above comes from a general improvement to Moose::Exporter. It will now unimport any function it exports, even if that function is a re-export from another package.</dd>
</dl>
<dl>
<dt>
Attributes in roles can no longer override class attributes with &quot;+foo&quot;</dt>
<dd>
Previously, this worked more or less accidentally, because role attributes weren't objects. This was never documented, but a few MooseX modules took advantage of this.</dd>
</dl>
<dl>
<dt>
The composition_class_roles attribute in Moose::Meta::Role is now a method</dt>
<dd>
This was done to make it possible for roles to alter the the list of composition class roles by applying a method modifiers. Previously, this was an attribute and MooseX modules override it. Since that no longer works, this was made a method.<div style="height: 1.00em;">
&#160;</div>
This <i>should</i> be an attribute, so this may switch back to being an attribute in the future if we can figure out how to make this work.</dd>
</dl>
</div>
<div class="section">
<h1>0.93</h1><dl>
<dt>
Calling $object-&gt;<i>new()</i> is no longer deprecated</dt>
<dd>
We decided to undeprecate this. Now it just works.</dd>
</dl>
<dl>
<dt>
Both &quot;get_method_map&quot; and &quot;get_attribute_map&quot; is deprecated</dt>
<dd>
These metaclass methods were never meant to be public, and they are both now deprecated. The work around if you still need the functionality they provided is to iterate over the list of names manually.<div style="height: 1.00em;">
&#160;</div>
<br/>
    my %fields = map { $_ =&gt; $meta-&gt;get_attribute($_) } $meta-&gt;get_attribute_list;<br/>
<div style="height: 1.00em;">
&#160;</div>
This was actually a change in Class::MOP, but this version of Moose requires a version of Class::MOP that includes said change.</dd>
</dl>
</div>
<div class="section">
<h1>0.90</h1><dl>
<dt>
Added Native delegation for Code refs</dt>
<dd>
See Moose::Meta::Attribute::Native::Trait::Code for details.</dd>
</dl>
<dl>
<dt>
Calling $object-&gt;<i>new()</i> is deprecated</dt>
<dd>
Moose has long supported this, but it's never really been documented, and we don't think this is a good practice. If you want to construct an object from an existing object, you should provide some sort of alternate constructor like &quot;$object-&gt;clone&quot;.<div style="height: 1.00em;">
&#160;</div>
Calling &quot;$object-&gt;new&quot; now issues a warning, and will be an error in a future release.</dd>
</dl>
<dl>
<dt>
Moose no longer warns if you call &quot;make_immutable&quot; for a class with mutable ancestors</dt>
<dd>
While in theory this is a good thing to warn about, we found so many exceptions to this that doing this properly became quite problematic.</dd>
</dl>
</div>
<div class="section">
<h1>0.89_02</h1><dl>
<dt>
New Native delegation methods from List::Util and List::MoreUtils</dt>
<dd>
In particular, we now have &quot;reduce&quot;, &quot;shuffle&quot;, &quot;uniq&quot;, and &quot;natatime&quot;.</dd>
</dl>
<dl>
<dt>
The Moose::Exporter with_caller feature is now deprecated</dt>
<dd>
Use &quot;with_meta&quot; instead. The &quot;with_caller&quot; option will start warning in a future release.</dd>
</dl>
<dl>
<dt>
Moose now warns if you call &quot;make_immutable&quot; for a class with mutable ancestors</dt>
<dd>
This is dangerous because modifying a class after a subclass has been immutabilized will lead to incorrect results in the subclass, due to inlining, caching, etc. This occasionally happens accidentally, when a class loads one of its subclasses in the middle of its class definition, so pointing out that this may cause issues should be helpful. Metaclasses (classes that inherit from Class::MOP::Object) are currently exempt from this check, since at the moment we aren't very consistent about which metaclasses we immutabilize.</dd>
</dl>
<dl>
<dt>
&quot;enum&quot; and &quot;duck_type&quot; now take arrayrefs for all forms</dt>
<dd>
Previously, calling these functions with a list would take the first element of the list as the type constraint name, and use the remainder as the enum values or method names. This makes the interface inconsistent with the anon-type forms of these functions (which must take an arrayref), and a free-form list where the first value is sometimes special is hard to validate (and harder to give reasonable error messages for). These functions have been changed to take arrayrefs in all their forms - so, &quot;enum 'My::Type' =&gt; [qw(foo bar)]&quot; is now the preferred way to create an enum type constraint. The old syntax still works for now, but it will hopefully be deprecated and removed in a future release.</dd>
</dl>
</div>
<div class="section">
<h1>0.89_01</h1> Moose::Meta::Attribute::Native has been moved into the Moose core from MooseX::AttributeHelpers.  Major changes include:<dl>
<dt>
&quot;traits&quot;, not &quot;metaclass&quot;</dt>
<dd>
Method providers are only available via traits.</dd>
</dl>
<dl>
<dt>
&quot;handles&quot;, not &quot;provides&quot; or &quot;curries&quot;</dt>
<dd>
The &quot;provides&quot; syntax was like core Moose &quot;handles =&gt; HASHREF&quot; syntax, but with the keys and values reversed.  This was confusing, and AttributeHelpers now uses &quot;handles =&gt; HASHREF&quot; in a way that should be intuitive to anyone already familiar with how it is used for other attributes.<div style="height: 1.00em;">
&#160;</div>
The &quot;curries&quot; functionality provided by AttributeHelpers has been generalized to apply to all cases of &quot;handles =&gt; HASHREF&quot;, though not every piece of functionality has been ported (currying with a CODEREF is not supported).</dd>
</dl>
<dl>
<dt>
&quot;empty&quot; is now &quot;is_empty&quot;, and means empty, not non-empty</dt>
<dd>
Previously, the &quot;empty&quot; method provided by Arrays and Hashes returned true if the attribute was  <b>not</b> empty (no elements).  Now it returns true if the attribute  <b>is</b> empty. It was also renamed to &quot;is_empty&quot;, to reflect this.</dd>
</dl>
<dl>
<dt>
&quot;find&quot; was renamed to &quot;first&quot;, and &quot;first&quot; and &quot;last&quot; were removed</dt>
<dd>
List::Util refers to the functionality that we used to provide under &quot;find&quot; as first, so that will likely be more familiar (and will fit in better if we decide to add more List::Util functions). &quot;first&quot; and &quot;last&quot; were removed, since their functionality is easily duplicated with curries of &quot;get&quot;.</dd>
</dl>
<dl>
<dt>
Helpers that take a coderef of one argument now use $_</dt>
<dd>
Subroutines passed as the first argument to &quot;first&quot;, &quot;map&quot;, and &quot;grep&quot; now receive their argument in $_ rather than as a parameter to the subroutine. Helpers that take a coderef of two or more arguments remain using the argument list (there are technical limitations to using $a and $b like &quot;sort&quot; does).<div style="height: 1.00em;">
&#160;</div>
See Moose::Meta::Attribute::Native for the new documentation.</dd>
</dl>
<div class="spacer">
</div>
The &quot;alias&quot; and &quot;excludes&quot; role parameters have been renamed to &quot;-alias&quot; and &quot;-excludes&quot;. The old names still work, but new code should use the new names, and eventually the old ones will be deprecated and removed.</div>
<div class="section">
<h1>0.89</h1> &quot;use Moose -metaclass =&gt; 'Foo'&quot; now does alias resolution, just like &quot;-traits&quot; (and the &quot;metaclass&quot; and &quot;traits&quot; options to &quot;has&quot;).<div class="spacer">
</div>
Added two functions &quot;meta_class_alias&quot; and &quot;meta_attribute_alias&quot; to Moose::Util, to simplify aliasing metaclasses and metatraits. This is a wrapper around the old<div class="spacer">
</div>
<br/>
  package Moose::Meta::Class::Custom::Trait::FooTrait;<br/>
  sub register_implementation { 'My::Meta::Trait' }<br/>
<div class="spacer">
</div>
way of doing this.</div>
<div class="section">
<h1>0.84</h1> When an attribute generates  <i>no</i> accessors, we now warn. This is to help users who forget the &quot;is&quot; option. If you really do not want any accessors, you can use &quot;is =&gt; 'bare'&quot;. You can maintain back compat with older versions of Moose by using something like:<div class="spacer">
</div>
<br/>
    ($Moose::VERSION &gt;= 0.84 ? is =&gt; 'bare' : ())<br/>
<div class="spacer">
</div>
When an accessor overwrites an existing method, we now warn. To work around this warning (if you really must have this behavior), you can explicitly remove the method before creating it as an accessor:<div class="spacer">
</div>
<br/>
    sub foo {}<br/>
<br/>
    __PACKAGE__-&gt;meta-&gt;remove_method('foo');<br/>
<br/>
    has foo =&gt; (<br/>
        is =&gt; 'ro',<br/>
    );<br/>
<div class="spacer">
</div>
When an unknown option is passed to &quot;has&quot;, we now warn. You can silence the warning by fixing your code. :)<div class="spacer">
</div>
The &quot;Role&quot; type has been deprecated. On its own, it was useless, since it just checked &quot;$object-&gt;can('does')&quot;. If you were using it as a parent type, just call &quot;role_type('Role::Name')&quot; to create an appropriate type instead.</div>
<div class="section">
<h1>0.78</h1> &quot;use Moose::Exporter;&quot; now imports &quot;strict&quot; and &quot;warnings&quot; into packages that use it.</div>
<div class="section">
<h1>0.77</h1> &quot;DEMOLISHALL&quot; and &quot;DEMOLISH&quot; now receive an argument indicating whether or not we are in global destruction.</div>
<div class="section">
<h1>0.76</h1> Type constraints no longer run coercions for a value that already matches the constraint.  This may affect some (arguably buggy) edge case coercions that rely on side effects in the &quot;via&quot; clause.</div>
<div class="section">
<h1>0.75</h1> Moose::Exporter now accepts the &quot;-metaclass&quot; option for easily overriding the metaclass (without metaclass). This works for classes and roles.</div>
<div class="section">
<h1>0.74</h1> Added a &quot;duck_type&quot; sugar function to Moose::Util::TypeConstraints to make integration with non-Moose classes easier. It simply checks if &quot;$obj-&gt;can()&quot; a list of methods.<div class="spacer">
</div>
A number of methods (mostly inherited from Class::MOP) have been renamed with a leading underscore to indicate their internal-ness. The old method names will still work for a while, but will warn that the method has been renamed. In a few cases, the method will be removed entirely in the future. This may affect MooseX authors who were using these methods.</div>
<div class="section">
<h1>0.73</h1> Calling &quot;subtype&quot; with a name as the only argument now throws an exception. If you want an anonymous subtype do:<div class="spacer">
</div>
<br/>
    my $subtype = subtype as 'Foo';<br/>
<div class="spacer">
</div>
This is related to the changes in version 0.71_01.<div class="spacer">
</div>
The &quot;is_needed&quot; method in Moose::Meta::Method::Destructor is now only usable as a class method. Previously, it worked as a class or object method, with a different internal implementation for each version.<div class="spacer">
</div>
The internals of making a class immutable changed a lot in Class::MOP 0.78_02, and Moose's internals have changed along with it. The external &quot;$metaclass-&gt;make_immutable&quot; method still works the same way.</div>
<div class="section">
<h1>0.72</h1> A mutable class accepted &quot;Foo-&gt;new(undef)&quot; without complaint, while an immutable class would blow up with an unhelpful error. Now, in both cases we throw a helpful error instead.<div class="spacer">
</div>
This &quot;feature&quot; was originally added to allow for cases such as this:<div class="spacer">
</div>
<br/>
  my $args;<br/>
<br/>
  if ( something() ) {<br/>
      $args = {...};<br/>
  }<br/>
<br/>
  return My::Class-&gt;new($args);<br/>
<div class="spacer">
</div>
But we decided this is a bad idea and a little too magical, because it can easily mask real errors.</div>
<div class="section">
<h1>0.71_01</h1> Calling &quot;type&quot; or &quot;subtype&quot; without the sugar helpers (&quot;as&quot;, &quot;where&quot;, &quot;message&quot;) is now deprecated.<div class="spacer">
</div>
As a side effect, this meant we ended up using Perl prototypes on &quot;as&quot;, and code like this will no longer work:<div class="spacer">
</div>
<br/>
  use Moose::Util::TypeConstraints;<br/>
  use Declare::Constraints::Simple -All;<br/>
<br/>
  subtype 'ArrayOfInts'<br/>
      =&gt; as 'ArrayRef'<br/>
      =&gt; IsArrayRef(IsInt);<br/>
<div class="spacer">
</div>
Instead it must be changed to this:<div class="spacer">
</div>
<br/>
  subtype(<br/>
      'ArrayOfInts' =&gt; {<br/>
          as    =&gt; 'ArrayRef',<br/>
          where =&gt; IsArrayRef(IsInt)<br/>
      }<br/>
  );<br/>
<div class="spacer">
</div>
If you want to maintain backwards compat with older versions of Moose, you must explicitly test Moose's &quot;VERSION&quot;:<div class="spacer">
</div>
<br/>
  if ( Moose-&gt;VERSION &lt; 0.71_01 ) {<br/>
      subtype 'ArrayOfInts'<br/>
          =&gt; as 'ArrayRef'<br/>
          =&gt; IsArrayRef(IsInt);<br/>
  }<br/>
  else {<br/>
      subtype(<br/>
          'ArrayOfInts' =&gt; {<br/>
              as    =&gt; 'ArrayRef',<br/>
              where =&gt; IsArrayRef(IsInt)<br/>
          }<br/>
      );<br/>
  }<br/>
</div>
<div class="section">
<h1>0.70</h1> We no longer pass the meta-attribute object as a final argument to triggers. This actually changed for inlined code a while back, but the non-inlined version and the docs were still out of date.<div class="spacer">
</div>
If by some chance you actually used this feature, the workaround is simple. You fetch the attribute object from out of the $self that is passed as the first argument to trigger, like so:<div class="spacer">
</div>
<br/>
  has 'foo' =&gt; (<br/>
      is      =&gt; 'ro',<br/>
      isa     =&gt; 'Any',<br/>
      trigger =&gt; sub {<br/>
          my ( $self, $value ) = @_;<br/>
          my $attr = $self-&gt;meta-&gt;find_attribute_by_name('foo');<br/>
<br/>
          # ...<br/>
      }<br/>
  );<br/>
</div>
<div class="section">
<h1>0.66</h1> If you created a subtype and passed a parent that Moose didn't know about, it simply ignored the parent. Now it automatically creates the parent as a class type. This may not be what you want, but is less broken than before.<div class="spacer">
</div>
You could declare a name with subtype such as &quot;Foo!Bar&quot;. Moose would accept this allowed, but if you used it in a parameterized type such as &quot;ArrayRef[Foo!Bar]&quot; it wouldn't work. We now do some vetting on names created via the sugar functions, so that they can only contain alphanumerics, &quot;:&quot;, and &quot;.&quot;.</div>
<div class="section">
<h1>0.65</h1> Methods created via an attribute can now fulfill a &quot;requires&quot; declaration for a role. Honestly we don't know why Stevan didn't make this work originally, he was just insane or something.<div class="spacer">
</div>
Stack traces from inlined code will now report the line and file as being in your class, as opposed to in Moose guts.</div>
<div class="section">
<h1>0.62_02</h1> When a class does not provide all of a role's required methods, the error thrown now mentions all of the missing methods, as opposed to just the first missing method.<div class="spacer">
</div>
Moose will no longer inline a constructor for your class unless it inherits its constructor from Moose::Object, and will warn when it doesn't inline. If you want to force inlining anyway, pass &quot;replace_constructor =&gt; 1&quot; to &quot;make_immutable&quot;.<div class="spacer">
</div>
If you want to get rid of the warning, pass &quot;inline_constructor =&gt; 0&quot;.</div>
<div class="section">
<h1>0.62</h1> Removed the (deprecated) &quot;make_immutable&quot; keyword.<div class="spacer">
</div>
Removing an attribute from a class now also removes delegation (&quot;handles&quot;) methods installed for that attribute. This is correct behavior, but if you were wrongly relying on it you might get bit.</div>
<div class="section">
<h1>0.58</h1> Roles now add methods by calling &quot;add_method&quot;, not &quot;alias_method&quot;. They make sure to always provide a method object, which will be cloned internally. This means that it is now possible to track the source of a method provided by a role, and even follow its history through intermediate roles.  This means that methods added by a role now show up when looking at a class's method list/map.<div class="spacer">
</div>
Parameter and Union args are now sorted, this makes Int|Str the same constraint as Str|Int. Also, incoming type constraint strings are normalized to remove all whitespace differences. This is mostly for internals and should not affect outside code.<div class="spacer">
</div>
Moose::Exporter will no longer remove a subroutine that the exporting package re-exports. Moose re-exports the Carp::confess function, among others. The reasoning is that we cannot know whether you have also explicitly imported those functions for your own use, so we err on the safe side and always keep them.</div>
<div class="section">
<h1>0.56</h1> &quot;Moose::init_meta&quot; should now be called as a method.<div class="spacer">
</div>
New modules for extension writers, Moose::Exporter and Moose::Util::MetaRole.</div>
<div class="section">
<h1>0.55_01</h1> Implemented metaclass traits (and wrote a recipe for it):<div class="spacer">
</div>
<br/>
  use Moose -traits =&gt; 'Foo'<br/>
<div class="spacer">
</div>
This should make writing small Moose extensions a little easier.</div>
<div class="section">
<h1>0.55</h1> Fixed &quot;coerce&quot; to accept anon types just like &quot;subtype&quot; can. So that you can do:<div class="spacer">
</div>
<br/>
  coerce $some_anon_type =&gt; from 'Str' =&gt; via { ... };<br/>
</div>
<div class="section">
<h1>0.51</h1> Added &quot;BUILDARGS&quot;, a new step in &quot;Moose::Object-&gt;new()&quot;.</div>
<div class="section">
<h1>0.49</h1> Fixed how the &quot;is =&gt; (ro|rw)&quot; works with custom defined &quot;reader&quot;, &quot;writer&quot; and &quot;accessor&quot; options. See the below table for details:<div class="spacer">
</div>
<br/>
  is =&gt; ro, writer =&gt; _foo    # turns into (reader =&gt; foo, writer =&gt; _foo)<br/>
  is =&gt; rw, writer =&gt; _foo    # turns into (reader =&gt; foo, writer =&gt; _foo)<br/>
  is =&gt; rw, accessor =&gt; _foo  # turns into (accessor =&gt; _foo)<br/>
  is =&gt; ro, accessor =&gt; _foo  # error, accesor is rw<br/>
</div>
<div class="section">
<h1>0.45</h1> The &quot;before/around/after&quot; method modifiers now support regexp matching of method names. NOTE: this only works for classes, it is currently not supported in roles, but, ... patches welcome.<div class="spacer">
</div>
The &quot;has&quot; keyword for roles now accepts the same array ref form that Moose.pm does for classes.<div class="spacer">
</div>
A trigger on a read-only attribute is no longer an error, as it's useful to trigger off of the constructor.<div class="spacer">
</div>
Subtypes of parameterizable types now are parameterizable types themselves.</div>
<div class="section">
<h1>0.44</h1> Fixed issue where &quot;DEMOLISHALL&quot; was eating the value in $@, and so not working correctly. It still kind of eats them, but so does vanilla perl.</div>
<div class="section">
<h1>0.41</h1> Inherited attributes may now be extended without restriction on the type ('isa', 'does').<div class="spacer">
</div>
The entire set of Moose::Meta::TypeConstraint::* classes were refactored in this release. If you were relying on their internals you should test your code carefully.</div>
<div class="section">
<h1>0.40</h1> Documenting the use of '+name' with attributes that come from recently composed roles. It makes sense, people are using it, and so why not just officially support it.<div class="spacer">
</div>
The &quot;Moose::Meta::Class-&gt;create&quot; method now supports roles.<div class="spacer">
</div>
It is now possible to make anonymous enum types by passing &quot;enum&quot; an array reference instead of the &quot;enum $name =&gt; @values&quot;.</div>
<div class="section">
<h1>0.37</h1> Added the &quot;make_immutable&quot; keyword as a shortcut to calling &quot;make_immutable&quot; on the meta object. This eventually got removed!<div class="spacer">
</div>
Made &quot;init_arg =&gt; undef&quot; work in Moose. This means &quot;do not accept a constructor parameter for this attribute&quot;.<div class="spacer">
</div>
Type errors now use the provided message. Prior to this release they didn't.</div>
<div class="section">
<h1>0.34</h1> Moose is now a postmodern object system :)<div class="spacer">
</div>
The Role system was completely refactored. It is 100% backwards compat, but the internals were totally changed. If you relied on the internals then you are advised to test carefully.<div class="spacer">
</div>
Added method exclusion and aliasing for Roles in this release.<div class="spacer">
</div>
Added the Moose::Util::TypeConstraints::OptimizedConstraints module.<div class="spacer">
</div>
Passing a list of values to an accessor (which is only expecting one value) used to be silently ignored, now it throws an error.</div>
<div class="section">
<h1>0.26</h1> Added parameterized types and did a pretty heavy refactoring of the type constraint system.<div class="spacer">
</div>
Better framework extensibility and better support for &quot;making your own Moose&quot;.</div>
<div class="section">
<h1>0.25 or before</h1> Honestly, you shouldn't be using versions of Moose that are this old, so many bug fixes and speed improvements have been made you would be crazy to not upgrade.<div class="spacer">
</div>
Also, I am tired of going through the Changelog so I am stopping here, if anyone would like to continue this please feel free.</div>
<div class="section">
<h1>AUTHOR</h1> Moose is maintained by the Moose Cabal, along with the help of many contributors. See &quot;CABAL&quot; in Moose and &quot;CONTRIBUTORS&quot; in Moose for details.</div>
<div class="section">
<h1>COPYRIGHT AND LICENSE</h1> This software is copyright (c) 2011 by Infinity Interactive, Inc..<div class="spacer">
</div>
This is free software; you can redistribute it and/or modify it under the same terms as the Perl 5 programming language system itself.</div>
<table class="foot">
<tr>
<td class="foot-date">
2011-11-17</td>
<td class="foot-os">
perl v5.14.2</td>
</tr>
</table>
</div>
</body>
</html>

