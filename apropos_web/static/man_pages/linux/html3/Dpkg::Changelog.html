<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/linux/style.css" type="text/css" media="all"/>
<title>
Dpkg::Changelog(3)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
Dpkg::Changelog(3)</td>
<td class="head-vol">
libdpkg-perl</td>
<td class="head-rtitle">
Dpkg::Changelog(3)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>NAME</h1> Dpkg::Changelog - base class to implement a changelog parser</div>
<div class="section">
<h1>DESCRIPTION</h1> Dpkg::Changelog is a class representing a changelog file as an array of changelog entries (Dpkg::Changelog::Entry). By deriving this object and implementing its parse method, you add the ability to fill this object with changelog entries.<div class="subsection">
<h2>FUNCTIONS</h2><dl>
<dt>
my $c = Dpkg::Changelog-&gt;new(%options)</dt>
<dd>
Creates a new changelog object.</dd>
</dl>
<dl>
<dt>
$c-&gt;load($filename)</dt>
<dd>
Parse $filename as a changelog.</dd>
</dl>
<dl>
<dt>
$c-&gt;set_options(%opts)</dt>
<dd>
Change the value of some options. &quot;verbose&quot; (defaults to 1) defines whether parse errors are displayed as warnings by default. &quot;reportfile&quot; is a string to use instead of the name of the file parsed, in particular in error messages. &quot;range&quot; defines the range of entries that we want to parse, the parser will stop as soon as it has parsed enough data to satisfy $c-&gt;get_range($opts{'range'}).</dd>
</dl>
<dl>
<dt>
$c-&gt;<i>reset_parse_errors()</i></dt>
<dd>
Can be used to delete all information about errors occurred during previous parse runs.</dd>
</dl>
<dl>
<dt>
$c-&gt;parse_error($line_nr, $error, [$line])</dt>
<dd>
Record a new parse error at line $line_nr. The error message is specified with $error and a copy of the line can be recorded in $line.</dd>
</dl>
<dl>
<dt>
$c-&gt;<i>get_parse_errors()</i></dt>
<dd>
Returns all error messages from the last parse run. If called in scalar context returns a human readable string representation. If called in list context returns an array of arrays. Each of these arrays contains</dd>
</dl>
<div style="margin-left: 4.00ex;">
<dl>
<dt>
1.</dt>
<dd>
a string describing the origin of the data (a filename usually). If the reportfile configuration option was given, its value will be used instead.</dd>
</dl>
<dl>
<dt>
2.</dt>
<dd>
the line number where the error occurred</dd>
</dl>
<dl>
<dt>
3.</dt>
<dd>
an error description</dd>
</dl>
<dl>
<dt>
4.</dt>
<dd>
the original line</dd>
</dl>
</div>
<div style="margin-left: 4.00ex;">
</div>
<dl>
<dt>
$c-&gt;set_unparsed_tail($tail)</dt>
<dd>
Add a string representing unparsed lines after the changelog entries. Use undef as $tail to remove the unparsed lines currently set.</dd>
</dl>
<dl>
<dt>
$c-&gt;<i>get_unparsed_tail()</i></dt>
<dd>
Return a string representing the unparsed lines after the changelog entries. Returns undef if there's no such thing.</dd>
</dl>
<dl>
<dt>
@{$c}</dt>
<dd>
Returns all the Dpkg::Changelog::Entry objects contained in this changelog in the order in which they have been parsed.</dd>
</dl>
<dl>
<dt>
$c-&gt;get_range($range)</dt>
<dd>
Returns an array (if called in list context) or a reference to an array of Dpkg::Changelog::Entry objects which each represent one entry of the changelog. $range is a hash reference describing the range of entries to return. See section &quot;RANGE SELECTION&quot;.</dd>
</dl>
<dl>
<dt>
$c-&gt;<i>abort_early()</i></dt>
<dd>
Returns true if enough data have been parsed to be able to return all entries selected by the range set at creation (or with set_options).</dd>
</dl>
<dl>
<dt>
$c-&gt;save($filename)</dt>
<dd>
Save the changelog in the given file.</dd>
</dl>
<dl>
<dt>
$c-&gt;<i>output()</i></dt>
<dd>
</dd>
</dl>
<dl>
<dt>
&quot;$c&quot;</dt>
<dd>
Returns a string representation of the changelog (it's a concatenation of the string representation of the individual changelog entries).</dd>
</dl>
<dl>
<dt>
$c-&gt;output($fh)</dt>
<dd>
Output the changelog to the given filehandle.</dd>
</dl>
<dl>
<dt>
my $control = $c-&gt;dpkg($range)</dt>
<dd>
Returns a Dpkg::Control::Changelog object representing the entries selected by the optional range specifier (see &quot;RANGE SELECTION&quot; for details). Returns undef in no entries are matched.<div style="height: 1.00em;">
&#160;</div>
The following fields are contained in the object:</dd>
</dl>
<div style="margin-left: 4.00ex;">
<dl>
<dt>
Source</dt>
<dd>
package name (in the first entry)</dd>
</dl>
<dl>
<dt>
Version</dt>
<dd>
packages' version (from first entry)</dd>
</dl>
<dl>
<dt>
Distribution</dt>
<dd>
target distribution (from first entry)</dd>
</dl>
<dl>
<dt>
Urgency</dt>
<dd>
urgency (highest of all printed entries)</dd>
</dl>
<dl>
<dt>
Maintainer</dt>
<dd>
person that created the (first) entry</dd>
</dl>
<dl>
<dt>
Date</dt>
<dd>
date of the (first) entry</dd>
</dl>
<dl>
<dt>
Closes</dt>
<dd>
bugs closed by the entry/entries, sorted by bug number</dd>
</dl>
<dl>
<dt>
Changes</dt>
<dd>
content of the the entry/entries</dd>
</dl>
</div>
<div style="margin-left: 4.00ex;">
</div>
<dl>
<dt>
my @controls = $c-&gt;rfc822($range)</dt>
<dd>
Returns a Dpkg::Index containing Dpkg::Control::Changelog objects where each object represents one entry in the changelog that is part of the range requested (see &quot;RANGE SELECTION&quot; for details). For the format of such an object see the description of the &quot;dpkg&quot; method (while ignoring the remarks about which values are taken from the first entry).</dd>
</dl>
</div>
</div>
<div class="section">
<h1>RANGE SELECTION</h1> A range selection is described by a hash reference where the allowed keys and values are described below.<div class="spacer">
</div>
The following options take a version number as value.<dl>
<dt>
since</dt>
<dd>
Causes changelog information from all versions strictly later than  <b>version</b> to be used.</dd>
</dl>
<dl>
<dt>
until</dt>
<dd>
Causes changelog information from all versions strictly earlier than  <b>version</b> to be used.</dd>
</dl>
<dl>
<dt>
from</dt>
<dd>
Similar to &quot;since&quot; but also includes the information for the specified  <b>version</b> itself.</dd>
</dl>
<dl>
<dt>
to</dt>
<dd>
Similar to &quot;until&quot; but also includes the information for the specified  <b>version</b> itself.</dd>
</dl>
<div class="spacer">
</div>
The following options don't take version numbers as values:<dl>
<dt>
all</dt>
<dd>
If set to a true value, all entries of the changelog are returned, this overrides all other options.</dd>
</dl>
<dl>
<dt>
count</dt>
<dd>
Expects a signed integer as value. Returns &quot;value&quot; entries from the top of the changelog if set to a positive integer, and &quot;abs(value)&quot; entries from the tail if set to a negative integer.</dd>
</dl>
<dl>
<dt>
offset</dt>
<dd>
Expects a signed integer as value. Changes the starting point for &quot;count&quot;, either counted from the top (positive integer) or from the tail (negative integer). &quot;offset&quot; has no effect if &quot;count&quot; wasn't given as well.</dd>
</dl>
<div class="spacer">
</div>
Some examples for the above options. Imagine an example changelog with entries for the versions 1.2, 1.3, 2.0, 2.1, 2.2, 3.0 and 3.1.<div class="spacer">
</div>
<br/>
            Range                           Included entries<br/>
 C&lt;{ since =E&lt;gt&gt; '2.0' }&gt;                  3.1, 3.0, 2.2<br/>
 C&lt;{ until =E&lt;gt&gt; '2.0' }&gt;                  1.3, 1.2<br/>
 C&lt;{ from =E&lt;gt&gt; '2.0' }&gt;                   3.1, 3.0, 2.2, 2.1, 2.0<br/>
 C&lt;{ to =E&lt;gt&gt; '2.0' }&gt;                     2.0, 1.3, 1.2<br/>
 C&lt;{ count =E&lt;gt&gt; 2 }&gt;                      3.1, 3.0<br/>
 C&lt;{ count =E&lt;gt&gt; -2 }&gt;                     1.3, 1.2<br/>
 C&lt;{ count =E&lt;gt&gt; 3, offset=E&lt;gt&gt; 2 }&gt;      2.2, 2.1, 2.0<br/>
 C&lt;{ count =E&lt;gt&gt; 2, offset=E&lt;gt&gt; -3 }&gt;     2.0, 1.3<br/>
 C&lt;{ count =E&lt;gt&gt; -2, offset=E&lt;gt&gt; 3 }&gt;     3.0, 2.2<br/>
 C&lt;{ count =E&lt;gt&gt; -2, offset=E&lt;gt&gt; -3 }&gt;    2.2, 2.1<br/>
<div class="spacer">
</div>
Any combination of one option of &quot;since&quot; and &quot;from&quot; and one of &quot;until&quot; and &quot;to&quot; returns the intersection of the two results with only one of the options specified.</div>
<div class="section">
<h1>AUTHOR</h1> Frank Lichtenheld, &lt;frank@lichtenheld.de&gt; Rapha&#235;l Hertzog, &lt;hertzog@debian.org&gt;</div>
<table class="foot">
<tr>
<td class="foot-date">
2011-10-14</td>
<td class="foot-os">
1.16.1.2</td>
</tr>
</table>
</div>
</body>
</html>

