<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/linux/style.css" type="text/css" media="all"/>
<title>
Util::TimeTracker(3pm)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
Util::TimeTracker(3pm)</td>
<td class="head-vol">
User Contributed Perl Documentation</td>
<td class="head-rtitle">
Util::TimeTracker(3pm)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>NAME</h1> Log::Log4perl::Util::TimeTracker - Track time elapsed</div>
<div class="section">
<h1>SYNOPSIS</h1><br/>
  use Log::Log4perl::Util::TimeTracker;<br/>
<br/>
  my $timer = Log::Log4perl::Util::TimeTracker-&gt;new();<br/>
<br/>
    # equivalent to Time::HiRes::gettimeofday(), regardless<br/>
    # if Time::HiRes is present or not. <br/>
  my($seconds, $microseconds) = $timer-&gt;gettimeofday();<br/>
<br/>
    # reset internal timer<br/>
  $timer-&gt;reset();<br/>
<br/>
    # return milliseconds since last reset<br/>
  $msecs = $timer-&gt;milliseconds();<br/>
<br/>
    # return milliseconds since last call<br/>
  $msecs = $timer-&gt;delta_milliseconds();<br/>
</div>
<div class="section">
<h1>DESCRIPTION</h1> This utility module helps tracking time elapsed for PatternLayout's date and time placeholders. Its accuracy depends on the availability of the Time::HiRes module. If it's available, its granularity is milliseconds, if not, seconds.<div class="spacer">
</div>
The most common use of this module is calling the <i>gettimeofday()</i> method:<div class="spacer">
</div>
<br/>
  my($seconds, $microseconds) = $timer-&gt;gettimeofday();<br/>
<div class="spacer">
</div>
It returns seconds and microseconds of the current epoch time. If Time::HiRes is installed, it will simply defer to its  <i>gettimeofday()</i> function, if it's missing,  <i>time()</i> will be called instead and $microseconds will always be 0.<div class="spacer">
</div>
To measure time elapsed in milliseconds, use the <i>reset()</i> method to reset the timer to the current time, followed by one or more calls to the  <i>milliseconds()</i> method:<div class="spacer">
</div>
<br/>
    # reset internal timer<br/>
  $timer-&gt;reset();<br/>
<br/>
    # return milliseconds since last reset<br/>
  $msecs = $timer-&gt;milliseconds();<br/>
<div class="spacer">
</div>
On top of the time span between the last reset and the current time, the module keeps track of the time between calls to  <i>delta_milliseconds()</i>:<div class="spacer">
</div>
<br/>
  $msecs = $timer-&gt;delta_milliseconds();<br/>
<div class="spacer">
</div>
On the first call, this will return the number of milliseconds since the last  <i>reset()</i>, on subsequent calls, it will return the time elapsed in milliseconds since the last call to  <i>delta_milliseconds()</i> instead. Note that  <i>reset()</i> also resets the time of the last call.<div class="spacer">
</div>
The internal timer of this module gets its time input from the POSIX <i>time()</i> function, or, if the Time::HiRes module is available, from its  <i>gettimeofday()</i> function. To figure out which one it is, use<div class="spacer">
</div>
<br/>
    if( $timer-&gt;hires_available() ) {<br/>
        print &quot;Hooray, we get real milliseconds!\n&quot;;<br/>
    } else {<br/>
        print &quot;Milliseconds are just bogus\n&quot;;<br/>
    }<br/>
<div class="spacer">
</div>
For testing purposes, a different time source can be provided, so test suites can simulate time passing by without actually having to wait:<div class="spacer">
</div>
<br/>
  my $start_time = time();<br/>
<br/>
  my $timer = Log::Log4perl::Util::TimeTracker-&gt;new(<br/>
          time_function =&gt; sub {<br/>
              return $start_time++;<br/>
          },<br/>
  );<br/>
<div class="spacer">
</div>
Every call to $timer-&gt;<i>epoch()</i> will then return a time value that is one second ahead of the the value returned on the previous call. This also means that every call to  <i>delta_milliseconds()</i> will return a value that exceeds the value returned on the previous call by 1000.</div>
<div class="section">
<h1>COPYRIGHT AND LICENSE</h1> Copyright 2002-2009 by Mike Schilli &lt;m@perlmeister.com&gt; and Kevin Goess &lt;cpan@goess.org&gt;.<div class="spacer">
</div>
This library is free software; you can redistribute it and/or modify it under the same terms as Perl itself.</div>
<table class="foot">
<tr>
<td class="foot-date">
2010-02-24</td>
<td class="foot-os">
perl v5.10.1</td>
</tr>
</table>
</div>
</body>
</html>

