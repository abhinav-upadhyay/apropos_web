<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/linux/style.css" type="text/css" media="all"/>
<title>
PCREBUILD(3)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
PCREBUILD(3)</td>
<td class="head-vol">
Library Functions Manual</td>
<td class="head-rtitle">
PCREBUILD(3)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>NAME</h1> PCRE - Perl-compatible regular expressions</div>
<div class="section">
<h1>PCRE BUILD-TIME OPTIONS</h1> This document describes the optional features of PCRE that can be selected when the library is compiled. It assumes use of the  <b>configure</b> script, where the optional features are selected or deselected by providing options to  <b>configure</b> before running the <b>make</b> command. However, the same options can be selected in both Unix-like and non-Unix-like environments using the GUI facility of  <b>cmake-gui</b> if you are using <b>CMake</b> instead of  <b>configure</b> to build PCRE.<div class="spacer">
</div>
There is a lot more information about building PCRE in non-Unix-like environments in the file called  <i>NON_UNIX_USE</i>, which is part of the PCRE distribution. You should consult this file as well as the  <i>README</i> file if you are building in a non-Unix-like environment.<div class="spacer">
</div>
The complete list of options for <b>configure</b> (which includes the standard ones such as the selection of the installation directory) can be obtained by running<div style="height: 1.00em;">
&#160;</div>
<br/>
  ./configure --help<div style="height: 1.00em;">
&#160;</div>
The following sections include descriptions of options whose names begin with --enable or --disable. These settings specify changes to the defaults for the  <b>configure</b> command. Because of the way that <b>configure</b> works, --enable and --disable always come in pairs, so the complementary option always exists as well, but as it specifies the default, it is not described.</div>
<div class="section">
<h1>BUILDING 8-BIT and 16-BIT LIBRARIES</h1> By default, a library called  <b>libpcre</b> is built, containing functions that take string arguments contained in vectors of bytes, either as single-byte characters, or interpreted as UTF-8 strings. You can also build a separate library, called  <b>libpcre16</b>, in which strings are contained in vectors of 16-bit data units and interpreted either as single-unit characters or UTF-16 strings, by adding<div style="height: 1.00em;">
&#160;</div>
<br/>
  --enable-pcre16<div style="height: 1.00em;">
&#160;</div>
to the <b>configure</b> command. If you do not want the 8-bit library, add<div style="height: 1.00em;">
&#160;</div>
<br/>
  --disable-pcre8<div style="height: 1.00em;">
&#160;</div>
as well. At least one of the two libraries must be built. Note that the C++ and POSIX wrappers are for the 8-bit library only, and that  <b>pcregrep</b> is an 8-bit program. None of these are built if you select only the 16-bit library.</div>
<div class="section">
<h1>BUILDING SHARED AND STATIC LIBRARIES</h1> The PCRE building process uses  <b>libtool</b> to build both shared and static Unix libraries by default. You can suppress one of these by adding one of<div style="height: 1.00em;">
&#160;</div>
<br/>
  --disable-shared<br/>
  --disable-static<div style="height: 1.00em;">
&#160;</div>
to the <b>configure</b> command, as required.</div>
<div class="section">
<h1>C++ SUPPORT</h1> By default, if the 8-bit library is being built, the  <b>configure</b> script will search for a C++ compiler and C++ header files. If it finds them, it automatically builds the C++ wrapper library (which supports only 8-bit strings). You can disable this by adding<div style="height: 1.00em;">
&#160;</div>
<br/>
  --disable-cpp<div style="height: 1.00em;">
&#160;</div>
to the <b>configure</b> command.</div>
<div class="section">
<h1>UTF-8 and UTF-16 SUPPORT</h1> To build PCRE with support for UTF Unicode character strings, add<div style="height: 1.00em;">
&#160;</div>
<br/>
  --enable-utf<div style="height: 1.00em;">
&#160;</div>
to the <b>configure</b> command. This setting applies to both libraries, adding support for UTF-8 to the 8-bit library and support for UTF-16 to the 16-bit library. There are no separate options for enabling UTF-8 and UTF-16 independently because that would allow ridiculous settings such as requesting UTF-16 support while building only the 8-bit library. It is not possible to build one library with UTF support and the other without in the same configuration. (For backwards compatibility, --enable-utf8 is a synonym of --enable-utf.)<div class="spacer">
</div>
Of itself, this setting does not make PCRE treat strings as UTF-8 or UTF-16. As well as compiling PCRE with this option, you also have have to set the PCRE_UTF8 or PCRE_UTF16 option when you call one of the pattern compiling functions.<div class="spacer">
</div>
If you set --enable-utf when compiling in an EBCDIC environment, PCRE expects its input to be either ASCII or UTF-8 (depending on the run-time option). It is not possible to support both EBCDIC and UTF-8 codes in the same version of the library. Consequently, --enable-utf and --enable-ebcdic are mutually exclusive.</div>
<div class="section">
<h1>UNICODE CHARACTER PROPERTY SUPPORT</h1> UTF support allows the libraries to process character codepoints up to 0x10ffff in the strings that they handle. On its own, however, it does not provide any facilities for accessing the properties of such characters. If you want to be able to use the pattern escapes \P, \p, and \X, which refer to Unicode character properties, you must add<div style="height: 1.00em;">
&#160;</div>
<br/>
  --enable-unicode-properties<div style="height: 1.00em;">
&#160;</div>
to the <b>configure</b> command. This implies UTF support, even if you have not explicitly requested it.<div class="spacer">
</div>
Including Unicode property support adds around 30K of tables to the PCRE library. Only the general category properties such as  <i>Lu</i> and <i>Nd</i> are supported. Details are given in the  <b>pcrepattern</b> documentation.</div>
<div class="section">
<h1>JUST-IN-TIME COMPILER SUPPORT</h1> Just-in-time compiler support is included in the build by specifying<div style="height: 1.00em;">
&#160;</div>
<br/>
  --enable-jit<div style="height: 1.00em;">
&#160;</div>
This support is available only for certain hardware architectures. If this option is set for an unsupported architecture, a compile time error occurs. See the  <b>pcrejit</b> documentation for a discussion of JIT usage. When JIT support is enabled, pcregrep automatically makes use of it, unless you add<div style="height: 1.00em;">
&#160;</div>
<br/>
  --disable-pcregrep-jit<div style="height: 1.00em;">
&#160;</div>
to the &quot;configure&quot; command.</div>
<div class="section">
<h1>CODE VALUE OF NEWLINE</h1> By default, PCRE interprets the linefeed (LF) character as indicating the end of a line. This is the normal newline character on Unix-like systems. You can compile PCRE to use carriage return (CR) instead, by adding<div style="height: 1.00em;">
&#160;</div>
<br/>
  --enable-newline-is-cr<div style="height: 1.00em;">
&#160;</div>
to the <b>configure</b> command. There is also a --enable-newline-is-lf option, which explicitly specifies linefeed as the newline character.<div style="height: 1.00em;">
&#160;</div>
Alternatively, you can specify that line endings are to be indicated by the two character sequence CRLF. If you want this, add<div style="height: 1.00em;">
&#160;</div>
<br/>
  --enable-newline-is-crlf<div style="height: 1.00em;">
&#160;</div>
to the <b>configure</b> command. There is a fourth option, specified by<div style="height: 1.00em;">
&#160;</div>
<br/>
  --enable-newline-is-anycrlf<div style="height: 1.00em;">
&#160;</div>
which causes PCRE to recognize any of the three sequences CR, LF, or CRLF as indicating a line ending. Finally, a fifth option, specified by<div style="height: 1.00em;">
&#160;</div>
<br/>
  --enable-newline-is-any<div style="height: 1.00em;">
&#160;</div>
causes PCRE to recognize any Unicode newline sequence.<div class="spacer">
</div>
Whatever line ending convention is selected when PCRE is built can be overridden when the library functions are called. At build time it is conventional to use the standard for your operating system.</div>
<div class="section">
<h1>WHAT \R MATCHES</h1> By default, the sequence \R in a pattern matches any Unicode newline sequence, whatever has been selected as the line ending sequence. If you specify<div style="height: 1.00em;">
&#160;</div>
<br/>
  --enable-bsr-anycrlf<div style="height: 1.00em;">
&#160;</div>
the default is changed so that \R matches only CR, LF, or CRLF. Whatever is selected when PCRE is built can be overridden when the library functions are called.</div>
<div class="section">
<h1>POSIX MALLOC USAGE</h1> When the 8-bit library is called through the POSIX interface (see the  <b>pcreposix</b> documentation), additional working storage is required for holding the pointers to capturing substrings, because PCRE requires three integers per substring, whereas the POSIX interface provides only two. If the number of expected substrings is small, the wrapper function uses space on the stack, because this is faster than using  <b>malloc()</b> for each call. The default threshold above which the stack is no longer used is 10; it can be changed by adding a setting such as<div style="height: 1.00em;">
&#160;</div>
<br/>
  --with-posix-malloc-threshold=20<div style="height: 1.00em;">
&#160;</div>
to the <b>configure</b> command.</div>
<div class="section">
<h1>HANDLING VERY LARGE PATTERNS</h1> Within a compiled pattern, offset values are used to point from one part to another (for example, from an opening parenthesis to an alternation metacharacter). By default, two-byte values are used for these offsets, leading to a maximum size for a compiled pattern of around 64K. This is sufficient to handle all but the most gigantic patterns. Nevertheless, some people do want to process truly enormous patterns, so it is possible to compile PCRE to use three-byte or four-byte offsets by adding a setting such as<div style="height: 1.00em;">
&#160;</div>
<br/>
  --with-link-size=3<div style="height: 1.00em;">
&#160;</div>
to the <b>configure</b> command. The value given must be 2, 3, or 4. For the 16-bit library, a value of 3 is rounded up to 4. Using longer offsets slows down the operation of PCRE because it has to load additional data when handling them.</div>
<div class="section">
<h1>AVOIDING EXCESSIVE STACK USAGE</h1> When matching with the  <b>pcre_exec()</b> function, PCRE implements backtracking by making recursive calls to an internal function called  <b>match()</b>. In environments where the size of the stack is limited, this can severely limit PCRE's operation. (The Unix environment does not usually suffer from this problem, but it may sometimes be necessary to increase the maximum stack size. There is a discussion in the  <b>pcrestack</b> documentation.) An alternative approach to recursion that uses memory from the heap to remember data, instead of using recursive function calls, has been implemented to work round the problem of limited stack size. If you want to build a version of PCRE that works this way, add<div style="height: 1.00em;">
&#160;</div>
<br/>
  --disable-stack-for-recursion<div style="height: 1.00em;">
&#160;</div>
to the <b>configure</b> command. With this configuration, PCRE will use the  <b>pcre_stack_malloc</b> and <b>pcre_stack_free</b> variables to call memory management functions. By default these point to  <b>malloc()</b> and  <b>free()</b>, but you can replace the pointers so that your own functions are used instead.<div class="spacer">
</div>
Separate functions are provided rather than using <b>pcre_malloc</b> and  <b>pcre_free</b> because the usage is very predictable: the block sizes requested are always the same, and the blocks are always freed in reverse order. A calling program might be able to implement optimized functions that perform better than  <b>malloc()</b> and <b>free()</b>. PCRE runs noticeably more slowly when built in this way. This option affects only the  <b>pcre_exec()</b> function; it is not relevant for  <b>pcre_dfa_exec()</b>.</div>
<div class="section">
<h1>LIMITING PCRE RESOURCE USAGE</h1> Internally, PCRE has a function called  <b>match()</b>, which it calls repeatedly (sometimes recursively) when matching a pattern with the  <b>pcre_exec()</b> function. By controlling the maximum number of times this function may be called during a single matching operation, a limit can be placed on the resources used by a single call to  <b>pcre_exec()</b>. The limit can be changed at run time, as described in the  <b>pcreapi</b> documentation. The default is 10 million, but this can be changed by adding a setting such as<div style="height: 1.00em;">
&#160;</div>
<br/>
  --with-match-limit=500000<div style="height: 1.00em;">
&#160;</div>
to the <b>configure</b> command. This setting has no effect on the  <b>pcre_dfa_exec()</b> matching function.<div class="spacer">
</div>
In some environments it is desirable to limit the depth of recursive calls of  <b>match()</b> more strictly than the total number of calls, in order to restrict the maximum amount of stack (or heap, if --disable-stack-for-recursion is specified) that is used. A second limit controls this; it defaults to the value that is set for --with-match-limit, which imposes no additional constraints. However, you can set a lower limit by adding, for example,<div style="height: 1.00em;">
&#160;</div>
<br/>
  --with-match-limit-recursion=10000<div style="height: 1.00em;">
&#160;</div>
to the <b>configure</b> command. This value can also be overridden at run time.</div>
<div class="section">
<h1>CREATING CHARACTER TABLES AT BUILD TIME</h1> PCRE uses fixed tables for processing characters whose code values are less than 256. By default, PCRE is built with a set of tables that are distributed in the file  <i>pcre_chartables.c.dist</i>. These tables are for ASCII codes only. If you add<div style="height: 1.00em;">
&#160;</div>
<br/>
  --enable-rebuild-chartables<div style="height: 1.00em;">
&#160;</div>
to the <b>configure</b> command, the distributed tables are no longer used. Instead, a program called  <b>dftables</b> is compiled and run. This outputs the source for new set of tables, created in the default locale of your C run-time system. (This method of replacing the tables does not work if you are cross compiling, because  <b>dftables</b> is run on the local host. If you need to create alternative tables when cross compiling, you will have to do so &quot;by hand&quot;.)</div>
<div class="section">
<h1>USING EBCDIC CODE</h1> PCRE assumes by default that it will run in an environment where the character code is ASCII (or Unicode, which is a superset of ASCII). This is the case for most computer operating systems. PCRE can, however, be compiled to run in an EBCDIC environment by adding<div style="height: 1.00em;">
&#160;</div>
<br/>
  --enable-ebcdic<div style="height: 1.00em;">
&#160;</div>
to the <b>configure</b> command. This setting implies --enable-rebuild-chartables. You should only use it if you know that you are in an EBCDIC environment (for example, an IBM mainframe operating system). The --enable-ebcdic option is incompatible with --enable-utf.</div>
<div class="section">
<h1>PCREGREP OPTIONS FOR COMPRESSED FILE SUPPORT</h1> By default,  <b>pcregrep</b> reads all files as plain text. You can build it so that it recognizes files whose names end in  <b>.gz</b> or <b>.bz2</b>, and reads them with  <b>libz</b> or <b>libbz2</b>, respectively, by adding one or both of<div style="height: 1.00em;">
&#160;</div>
<br/>
  --enable-pcregrep-libz<br/>
  --enable-pcregrep-libbz2<div style="height: 1.00em;">
&#160;</div>
to the <b>configure</b> command. These options naturally require that the relevant libraries are installed on your system. Configuration will fail if they are not.</div>
<div class="section">
<h1>PCREGREP BUFFER SIZE</h1>  <b>pcregrep</b> uses an internal buffer to hold a &quot;window&quot; on the file it is scanning, in order to be able to output &quot;before&quot; and &quot;after&quot; lines when it finds a match. The size of the buffer is controlled by a parameter whose default value is 20K. The buffer itself is three times this size, but because of the way it is used for holding &quot;before&quot; lines, the longest line that is guaranteed to be processable is the parameter size. You can change the default parameter value by adding, for example,<div style="height: 1.00em;">
&#160;</div>
<br/>
  --with-pcregrep-bufsize=50K<div style="height: 1.00em;">
&#160;</div>
to the <b>configure</b> command. The caller of <b>pcregrep</b> can, however, override this value by specifying a run-time option.</div>
<div class="section">
<h1>PCRETEST OPTION FOR LIBREADLINE SUPPORT</h1> If you add<div style="height: 1.00em;">
&#160;</div>
<br/>
  --enable-pcretest-libreadline<div style="height: 1.00em;">
&#160;</div>
to the <b>configure</b> command, <b>pcretest</b> is linked with the  <b>libreadline</b> library, and when its input is from a terminal, it reads it using the  <b>readline()</b> function. This provides line-editing and history facilities. Note that  <b>libreadline</b> is GPL-licensed, so if you distribute a binary of  <b>pcretest</b> linked in this way, there may be licensing issues.<div class="spacer">
</div>
Setting this option causes the <b>-lreadline</b> option to be added to the  <b>pcretest</b> build. In many operating environments with a sytem-installed  <b>libreadline</b> this is sufficient. However, in some environments (e.g. if an unmodified distribution version of readline is in use), some extra configuration may be necessary. The INSTALL file for  <b>libreadline</b> says this:<div style="height: 1.00em;">
&#160;</div>
<br/>
  &quot;Readline uses the termcap functions, but does not link with the<br/>
  termcap or curses library itself, allowing applications which link<br/>
  with readline the to choose an appropriate library.&quot;<div style="height: 1.00em;">
&#160;</div>
If your environment has not been set up so that an appropriate library is automatically included, you may need to add something like<div style="height: 1.00em;">
&#160;</div>
<br/>
  LIBS=&quot;-ncurses&quot;<div style="height: 1.00em;">
&#160;</div>
immediately before the <b>configure</b> command.</div>
<div class="section">
<h1>SEE ALSO</h1>  <b>pcreapi</b>(3), <b>pcre16</b>, <b>pcre_config</b>(3).</div>
<div class="section">
<h1>AUTHOR</h1><br/>
Philip Hazel<br/>
University Computing Service<br/>
Cambridge CB2 3QH, England.<br/>
</div>
<div class="section">
<h1>REVISION</h1><br/>
Last updated: 07 January 2012<br/>
Copyright (c) 1997-2012 University of Cambridge.<br/>
</div>
<table class="foot">
<tr>
<td class="foot-date">
07 January 2012</td>
<td class="foot-os">
PCRE 8.30</td>
</tr>
</table>
</div>
</body>
</html>

