<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/linux/style.css" type="text/css" media="all"/>
<title>
XAllocStandardColormap(3)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
XAllocStandardColormap(3)</td>
<td class="head-vol">
XLIB FUNCTIONS</td>
<td class="head-rtitle">
XAllocStandardColormap(3)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>NAME</h1> XAllocStandardColormap, XSetRGBColormaps, XGetRGBColormaps, XStandardColormap - allocate, set, or read a standard colormap structure</div>
<div class="section">
<h1>SYNTAX</h1><div style="margin-left: 5.00ex;text-indent: -5.00ex;" class="spacer">
XStandardColormap *XAllocStandardColormap(void);</div>
<div class="spacer">
</div>
<div style="margin-left: 5.00ex;text-indent: -5.00ex;" class="spacer">
void XSetRGBColormaps(Display *<i>display</i>, Window <i>w</i>, XStandardColormap * <i>std_colormap</i>, int  <i>count</i>, Atom <i>property</i>);</div>
<div class="spacer">
</div>
<div style="margin-left: 5.00ex;text-indent: -5.00ex;" class="spacer">
Status XGetRGBColormaps(Display *<i>display</i>, Window <i>w</i>, XStandardColormap ** <i>std_colormap_return</i>, int *<i>count_return</i>, Atom  <i>property</i>);</div>
</div>
<div class="section">
<h1>ARGUMENTS</h1><dl>
<dt>
<i>display</i></dt>
<dd>
Specifies the connection to the X server.</dd>
</dl>
<dl>
<dt>
<i>count</i></dt>
<dd>
Specifies the number of colormaps.</dd>
</dl>
<dl>
<dt>
<i>count_return</i></dt>
<dd>
Returns the number of colormaps.</dd>
</dl>
<dl>
<dt>
<i>property</i></dt>
<dd>
Specifies the property name.</dd>
</dl>
<dl>
<dt>
<i>std_colormap</i></dt>
<dd>
Specifies the  <i>XStandardColormap</i> structure to be used.</dd>
</dl>
<dl>
<dt>
<i>std_colormap_return</i></dt>
<dd>
Returns the  <i>XStandardColormap</i> structure.</dd>
</dl>
</div>
<div class="section">
<h1>DESCRIPTION</h1> The  <i>XAllocStandardColormap</i> function allocates and returns a pointer to a  <i>XStandardColormap</i> structure. Note that all fields in the  <i>XStandardColormap</i> structure are initially set to zero. If insufficient memory is available,  <i>XAllocStandardColormap</i> returns NULL. To free the memory allocated to this structure, use  <i>XFree</i>.<div class="spacer">
</div>
The  <i>XSetRGBColormaps</i> function replaces the RGB colormap definition in the specified property on the named window. If the property does not already exist,  <i>XSetRGBColormaps</i> sets the RGB colormap definition in the specified property on the named window. The property is stored with a type of RGB_COLOR_MAP and a format of 32. Note that it is the caller's responsibility to honor the ICCCM restriction that only RGB_DEFAULT_MAP contain more than one definition.<div class="spacer">
</div>
The  <i>XSetRGBColormaps</i> function usually is only used by window or session managers. To create a standard colormap, follow this procedure:<dl>
<dt>
1.</dt>
<dd>
Open a new connection to the same server.</dd>
</dl>
<dl>
<dt>
2.</dt>
<dd>
Grab the server.</dd>
</dl>
<dl>
<dt>
3.</dt>
<dd>
See if the property is on the property list of the root window for the screen.</dd>
</dl>
<dl>
<dt>
4.</dt>
<dd>
If the desired property is not present:</dd>
</dl>
<div style="margin-left: 5.00ex;">
<dl>
<dt>
&#8226;</dt>
<dd>
Create a colormap (unless you are using the default colormap of the screen).</dd>
</dl>
<dl>
<dt>
&#8226;</dt>
<dd>
Determine the color characteristics of the visual.</dd>
</dl>
<dl>
<dt>
&#8226;</dt>
<dd>
Allocate cells in the colormap (or create it with  <i>AllocAll</i>).</dd>
</dl>
<dl>
<dt>
&#8226;</dt>
<dd>
Call  <i>XStoreColors</i> to store appropriate color values in the colormap.</dd>
</dl>
<dl>
<dt>
&#8226;</dt>
<dd>
Fill in the descriptive members in the  <i>XStandardColormap</i> structure.</dd>
</dl>
<dl>
<dt>
&#8226;</dt>
<dd>
Attach the property to the root window.</dd>
</dl>
<dl>
<dt>
&#8226;</dt>
<dd>
Use  <i>XSetCloseDownMode</i> to make the resource permanent.</dd>
</dl>
</div>
<dl>
<dt>
5.</dt>
<dd>
Ungrab the server.</dd>
</dl>
<div class="spacer">
</div>
<i>XSetRGBColormaps</i> can generate  <i>BadAlloc</i>,  <i>BadAtom</i>, and  <i>BadWindow</i> errors.<div class="spacer">
</div>
The  <i>XGetRGBColormaps</i> function returns the RGB colormap definitions stored in the specified property on the named window. If the property exists, is of type RGB_COLOR_MAP, is of format 32, and is long enough to contain a colormap definition,  <i>XGetRGBColormaps</i> allocates and fills in space for the returned colormaps and returns a nonzero status. If the visualid is not present,  <i>XGetRGBColormaps</i> assumes the default visual for the screen on which the window is located; if the killid is not present,  <i>None</i> is assumed, which indicates that the resources cannot be released. Otherwise, none of the fields are set, and  <i>XGetRGBColormaps</i> returns a zero status. Note that it is the caller's responsibility to honor the ICCCM restriction that only RGB_DEFAULT_MAP contain more than one definition.<div class="spacer">
</div>
<i>XGetRGBColormaps</i> can generate  <i>BadAtom</i> and  <i>BadWindow</i> errors.</div>
<div class="section">
<h1>STRUCTURES</h1> The  <i>XStandardColormap</i> structure contains:<div class="spacer">
</div>
/* Hints */<table class="tbl">
<col style="width: 9.00ex;"/>
<col style="width: 34.00ex;"/>
<col style="width: 11.00ex;"/>
<tbody>
<tr>
<td>
#define</td>
<td>
<i>ReleaseByFreeingColormap</i></td>
<td>
( (XID) 1L)</td>
</tr>
</tbody>
</table>
/* Values */<br/>
typedef struct {<br/>
	Colormap colormap;<br/>
	unsigned long red_max;<br/>
	unsigned long red_mult;<br/>
	unsigned long green_max;<br/>
	unsigned long green_mult;<br/>
	unsigned long blue_max;<br/>
	unsigned long blue_mult;<br/>
	unsigned long base_pixel;<br/>
	VisualID visualid;<br/>
	XID killid;<br/>
} XStandardColormap;<br/>
<div style="height: 0.00ex;">
&#160;</div>
<br/>
<div class="spacer">
</div>
The colormap member is the colormap created by the  <i>XCreateColormap</i> function. The red_max, green_max, and blue_max members give the maximum red, green, and blue values, respectively. Each color coefficient ranges from zero to its max, inclusive. For example, a common colormap allocation is 3/3/2 (3 planes for red, 3 planes for green, and 2 planes for blue). This colormap would have red_max = 7, green_max = 7, and blue_max = 3. An alternate allocation that uses only 216 colors is red_max = 5, green_max = 5, and blue_max = 5.<div class="spacer">
</div>
The red_mult, green_mult, and blue_mult members give the scale factors used to compose a full pixel value. (See the discussion of the base_pixel members for further information.) For a 3/3/2 allocation, red_mult might be 32, green_mult might be 4, and blue_mult might be 1. For a 6-colors-each allocation, red_mult might be 36, green_mult might be 6, and blue_mult might be 1.<div class="spacer">
</div>
The base_pixel member gives the base pixel value used to compose a full pixel value. Usually, the base_pixel is obtained from a call to the  <i>XAllocColorPlanes</i> function. Given integer red, green, and blue coefficients in their appropriate ranges, one then can compute a corresponding pixel value by using the following expression:<div class="spacer">
</div>
<br/>
(r * red_mult + g * green_mult + b * blue_mult + base_pixel) &amp; 0xFFFFFFFF<br/>
<div style="height: 0.00ex;">
&#160;</div>
<br/>
<div class="spacer">
</div>
For  <i>GrayScale</i> colormaps, only the colormap, red_max, red_mult, and base_pixel members are defined. The other members are ignored. To compute a  <i>GrayScale</i> pixel value, use the following expression:<div class="spacer">
</div>
<br/>
(gray * red_mult + base_pixel) &amp; 0xFFFFFFFF<br/>
<div style="height: 0.00ex;">
&#160;</div>
<br/>
<div class="spacer">
</div>
Negative multipliers can be represented by converting the 2's complement representation of the multiplier into an unsigned long and storing the result in the appropriate _mult field. The step of masking by 0xFFFFFFFF effectively converts the resulting positive multiplier into a negative one. The masking step will take place automatically on many machine architectures, depending on the size of the integer type used to do the computation,<div class="spacer">
</div>
The visualid member gives the ID number of the visual from which the colormap was created. The killid member gives a resource ID that indicates whether the cells held by this standard colormap are to be released by freeing the colormap ID or by calling the  <i>XKillClient</i> function on the indicated resource. (Note that this method is necessary for allocating out of an existing colormap.)<div class="spacer">
</div>
The properties containing the  <i>XStandardColormap</i> information have the type RGB_COLOR_MAP.</div>
<div class="section">
<h1>DIAGNOSTICS</h1><dl>
<dt>
<i>BadAlloc</i></dt>
<dd>
The server failed to allocate the requested resource or server memory.</dd>
</dl>
<dl>
<dt>
<i>BadAtom</i></dt>
<dd>
A value for an Atom argument does not name a defined Atom.</dd>
</dl>
<dl>
<dt>
<i>BadWindow</i></dt>
<dd>
A value for a Window argument does not name a defined Window.</dd>
</dl>
</div>
<div class="section">
<h1>SEE ALSO</h1> XAllocColor(3), XCreateColormap(3), XFree(3), XSetCloseDownMode(3)<div style="height: 0.00em;">
&#160;</div>
<i>Xlib - C Language X Interface</i></div>
<table class="foot">
<tr>
<td class="foot-date">
libX11 1.4.99.1</td>
<td class="foot-os">
X Version 11</td>
</tr>
</table>
</div>
</body>
</html>

