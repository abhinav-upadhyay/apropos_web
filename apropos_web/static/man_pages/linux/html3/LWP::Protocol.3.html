<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/linux/style.css" type="text/css" media="all"/>
<title>
LWP::Protocol(3pm)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
LWP::Protocol(3pm)</td>
<td class="head-vol">
User Contributed Perl Documentation</td>
<td class="head-rtitle">
LWP::Protocol(3pm)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>NAME</h1> LWP::Protocol - Base class for LWP protocols</div>
<div class="section">
<h1>SYNOPSIS</h1><br/>
 package LWP::Protocol::foo;<br/>
 require LWP::Protocol;<br/>
 @ISA=qw(LWP::Protocol);<br/>
</div>
<div class="section">
<h1>DESCRIPTION</h1> This class is used a the base class for all protocol implementations supported by the LWP library.<div class="spacer">
</div>
When creating an instance of this class using &quot;LWP::Protocol::create($url)&quot;, and you get an initialised subclass appropriate for that access method. In other words, the  <i>LWP::Protocol::create()</i> function calls the constructor for one of its subclasses.<div class="spacer">
</div>
All derived LWP::Protocol classes need to override the <i>request()</i> method which is used to service a request. The overridden method can make use of the  <i>collect()</i> function to collect together chunks of data as it is received.<div class="spacer">
</div>
The following methods and functions are provided:<dl>
<dt>
$prot = LWP::Protocol-&gt;<i>new()</i></dt>
<dd>
The LWP::Protocol constructor is inherited by subclasses. As this is a virtual base class this method should  <b>not</b> be called directly.</dd>
</dl>
<dl>
<dt>
$prot = LWP::Protocol::create($scheme)</dt>
<dd>
Create an object of the class implementing the protocol to handle the given scheme. This is a function, not a method. It is more an object factory than a constructor. This is the function user agents should use to access protocols.</dd>
</dl>
<dl>
<dt>
$class = LWP::Protocol::implementor($scheme, [$class])</dt>
<dd>
Get and/or set implementor class for a scheme.  Returns '' if the specified scheme is not supported.</dd>
</dl>
<dl>
<dt>
$prot-&gt;request(...)</dt>
<dd>
<br/>
 $response = $protocol-&gt;request($request, $proxy, undef);<br/>
 $response = $protocol-&gt;request($request, $proxy, '/tmp/sss');<br/>
 $response = $protocol-&gt;request($request, $proxy, \&amp;callback, 1024);<br/>
<div style="height: 1.00em;">
&#160;</div>
Dispatches a request over the protocol, and returns a response object. This method needs to be overridden in subclasses.  Refer to LWP::UserAgent for description of the arguments.</dd>
</dl>
<dl>
<dt>
$prot-&gt;collect($arg, $response, $collector)</dt>
<dd>
Called to collect the content of a request, and process it appropriately into a scalar, file, or by calling a callback.  If $arg is undefined, then the content is stored within the $response.  If $arg is a simple scalar, then $arg is interpreted as a file name and the content is written to this file.  If $arg is a reference to a routine, then content is passed to this routine.<div style="height: 1.00em;">
&#160;</div>
The $collector is a routine that will be called and which is responsible for returning pieces (as ref to scalar) of the content to process.  The $collector signals EOF by returning a reference to an empty sting.<div style="height: 1.00em;">
&#160;</div>
The return value from <i>collect()</i> is the $response object reference.<div style="height: 1.00em;">
&#160;</div>
<b>Note:</b> We will only use the callback or file argument if $response-&gt; <i>is_success()</i>.  This avoids sending content data for redirects and authentication responses to the callback which would be confusing.</dd>
</dl>
<dl>
<dt>
$prot-&gt;collect_once($arg, $response, $content)</dt>
<dd>
Can be called when the whole response content is available as $content.  This will invoke  <i>collect()</i> with a collector callback that returns a reference to $content the first time and an empty string the next.</dd>
</dl>
</div>
<div class="section">
<h1>SEE ALSO</h1> Inspect the  <i>LWP/Protocol/file.pm</i> and <i>LWP/Protocol/http.pm</i> files for examples of usage.</div>
<div class="section">
<h1>COPYRIGHT</h1> Copyright 1995-2001 Gisle Aas.<div class="spacer">
</div>
This library is free software; you can redistribute it and/or modify it under the same terms as Perl itself.</div>
<table class="foot">
<tr>
<td class="foot-date">
2011-04-09</td>
<td class="foot-os">
perl v5.14.2</td>
</tr>
</table>
</div>
</body>
</html>

