<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/linux/style.css" type="text/css" media="all"/>
<title>
Error(3pm)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
Error(3pm)</td>
<td class="head-vol">
User Contributed Perl Documentation</td>
<td class="head-rtitle">
Error(3pm)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>NAME</h1> Tk::Error - Method invoked to process background errors</div>
<div class="section">
<h1>SYNOPSIS</h1> Customization:<div class="spacer">
</div>
<br/>
    require Tk::ErrorDialog;<br/>
<div class="spacer">
</div>
or<div class="spacer">
</div>
<br/>
    sub Tk::Error<br/>
    {<br/>
      my ($widget,$error,@locations) = @_;<br/>
      ...<br/>
<br/>
    }<br/>
</div>
<div class="section">
<h1>DESCRIPTION</h1> The  <b>Tk::Error</b> method is invoked by perl/Tk when a background error occurs. Two possible implementations are provided in the distribution and individual applications or users can (re)define a  <b>Tk::Error</b> method (e.g. as a perl sub) if they wish to handle background errors in some other manner.<div class="spacer">
</div>
A background error is one that occurs in a command that didn't originate with the application.  For example, if an error occurs while executing a callback specified with a bind or a after command, then it is a background error.  For a non-background error, the error can simply be returned up through nested subroutines until it reaches the top-level code in the application; then the application can report the error in whatever way it wishes.  When a background error occurs, the unwinding ends in the Tk library and there is no obvious way for Tk to report the error.<div class="spacer">
</div>
When Tk detects a background error, it saves information about the error and invokes the  <b>Tk::Error</b> method later when Tk is idle.<div class="spacer">
</div>
<b>Tk::Error</b> is invoked by perl/Tk as if by the perl code:<div class="spacer">
</div>
&#160;&#160;&#160;&#160;<i></i><i>$mainwindow</i><i></i>-&gt;<b>Tk::Error</b>(<i>&quot;error message&quot;</i>, <i>location ...</i>);<div class="spacer">
</div>
<i></i><i>$mainwindow</i><i></i> is the <b>MainWindow</b> associated with widget which detected the error,  <i>&quot;error message&quot;</i> is a string describing the error that has been detected,  <i>location</i> is a list of one or more &quot;locations&quot; which describe the call sequence at the point the error was detected.<div class="spacer">
</div>
The locations are a typically a mixture of perl location reports giving script name and line number, and simple strings describing locations in core Tk or perl/Tk C code.<div class="spacer">
</div>
Tk will ignore any result returned by the <b>Tk::Error</b> method. If another error occurs within the  <b>Tk::Error</b> method (for example if it calls  <b>die</b>) then Tk reports this error itself by writing a message to stderr (this is to avoid infinite loops due to any bugs in  <b>Tk::Error</b>).<div class="spacer">
</div>
If several background errors accumulate before <b>Tk::Error</b> is invoked to process them,  <b>Tk::Error</b> will be invoked once for each error, in the order they occurred. However, if  <b>Tk::Error</b> calls <b>Tk-&gt;break</b>, then any remaining errors are skipped without calling  <b>Tk::Error</b>.<div class="spacer">
</div>
The <b>Tk</b> module includes a default <b>Tk::Error</b> subroutine that simply reports the error on stderr.</div>
<div class="section">
<h1>Tk::ErrorDialog</h1> An alternate definition is provided via:<div class="spacer">
</div>
&#160;&#160;&#160;&#160;&quot;require Tk::ErrorDialog;&quot;<div class="spacer">
</div>
that posts a dialog box containing the error message and offers the user a chance to see a stack trace showing where the error occurred.<div class="spacer">
</div>
This is an OO implementation of the Tcl/Tk command <b>bgerror</b>, with a twist: since there is only one  <b>ErrorDialog</b> widget, you aren't required to invoke the constructor to create it; it will be created automatically when the first background error occurs.  However, in order to configure the  <i>-cleanupcode</i> and <i>-appendtraceback</i>  <b>ErrorDialog</b> options you must call the constructor and create it manually.<div class="spacer">
</div>
The <b>ErrorDialog</b> object essentially consists of two subwidgets: a  <b>Dialog</b> widget to display the background error and a <b>Text</b> widget for the traceback information.  If required, you can invoke various widget methods to customize these subwidgets - their advertised names are described below.<div class="spacer">
</div>
&#160;&#160;&#160;&#160;<i></i><i>$mw</i><i></i>-&gt;<b>ErrorDialog</b>(-cleanupcode =&gt; <i>code</i>, -appendtraceback =&gt; <i>bool</i>);<div class="spacer">
</div>
$mw is a window reference.<div class="spacer">
</div>
<i>code</i> is a CODE reference if special post-background error processing is required (default is undefined). The callback subroutine is called with @_ having the same arguments that  <b>Tk::Error</b> was invoked with.<div class="spacer">
</div>
<i>bool</i> is a boolean indicating whether or not to append successive tracebacks (default is 1, do append).<div class="subsection">
<h2>Advertised ErrorDialog widgets</h2>  <i>error_dialog</i> is the Dialog widget reference.<div class="spacer">
</div>
<i>text</i> is the Text widget reference containing the traceback information.</div>
</div>
<div class="section">
<h1>BUGS</h1> If  <b>after</b> or <b>fileevent</b> are not invoked as methods of a widget then perl/Tk is unable to provide a  <i></i><i>$mainwindow</i><i></i> argument. To support such code from earlier versions of perl/Tk perl/Tk therefore calls  <b>Tk::Error</b> with string 'Tk' instead:  <b>Tk-&gt;Tk::Error\(...\)</b>. In this case the  <b>Tk::Error</b> in <b>Tk::ErrorDialog</b> and similar implementations cannot &quot;popup&quot; a window as they don't know which display to use.  A mechanism to supply  <i>the</i> <b>MainWindow</b> in applications which only have one (a very common case) should be provided.</div>
<div class="section">
<h1>SEE ALSO</h1> Tk::bind Tk::after Tk::fileevent</div>
<div class="section">
<h1>KEYWORDS</h1> background error, reporting</div>
<table class="foot">
<tr>
<td class="foot-date">
2007-02-10</td>
<td class="foot-os">
perl v5.14.2</td>
</tr>
</table>
</div>
</body>
</html>

