<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/linux/style.css" type="text/css" media="all"/>
<title>
Test::Harness(3perl)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
Test::Harness(3perl)</td>
<td class="head-vol">
Perl Programmers Reference Guide</td>
<td class="head-rtitle">
Test::Harness(3perl)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>NAME</h1> Test::Harness - Run Perl standard test scripts with statistics</div>
<div class="section">
<h1>VERSION</h1> Version 3.23</div>
<div class="section">
<h1>SYNOPSIS</h1><br/>
  use Test::Harness;<br/>
<br/>
  runtests(@test_files);<br/>
</div>
<div class="section">
<h1>DESCRIPTION</h1> Although, for historical reasons, the Test::Harness distribution takes its name from this module it now exists only to provide TAP::Harness with an interface that is somewhat backwards compatible with Test::Harness 2.xx. If you're writing new code consider using TAP::Harness directly instead.<div class="spacer">
</div>
Emulation is provided for &quot;runtests&quot; and &quot;execute_tests&quot; but the pluggable 'Straps' interface that previous versions of Test::Harness supported is not reproduced here. Straps is now available as a stand alone module: Test::Harness::Straps.<div class="spacer">
</div>
See TAP::Parser, TAP::Harness for the main documentation for this distribution.</div>
<div class="section">
<h1>FUNCTIONS</h1> The following functions are available.<div class="subsection">
<h2>runtests( @test_files )</h2> This runs all the given  <i></i><i>@test_files</i><i></i> and divines whether they passed or failed based on their output to STDOUT (details above).  It prints out each individual test which failed along with a summary report and a how long it all took.<div class="spacer">
</div>
It returns true if everything was ok.  Otherwise it will &quot;die()&quot; with one of the messages in the DIAGNOSTICS section.</div>
<div class="subsection">
<h2>execute_tests( tests =&gt; \@test_files, out =&gt; \*FH )</h2> Runs all the given @test_files (just like &quot;runtests()&quot;) but doesn't generate the final report.  During testing, progress information will be written to the currently selected output filehandle (usually &quot;STDOUT&quot;), or to the filehandle given by the &quot;out&quot; parameter.  The  <i>out</i> is optional.<div class="spacer">
</div>
Returns a list of two values, $total and $failed, describing the results.  $total is a hash ref summary of all the tests run.  Its keys and values are this:<div class="spacer">
</div>
<br/>
    bonus           Number of individual todo tests unexpectedly passed<br/>
    max             Number of individual tests ran<br/>
    ok              Number of individual tests passed<br/>
    sub_skipped     Number of individual tests skipped<br/>
    todo            Number of individual todo tests<br/>
<br/>
    files           Number of test files ran<br/>
    good            Number of test files passed<br/>
    bad             Number of test files failed<br/>
    tests           Number of test files originally given<br/>
    skipped         Number of test files skipped<br/>
<div class="spacer">
</div>
If &quot;$total-&gt;{bad} == 0&quot; and &quot;$total-&gt;{max} &gt; 0&quot;, you've got a successful test.<div class="spacer">
</div>
$failed is a hash ref of all the test scripts that failed.  Each key is the name of a test script, each value is another hash representing how that script failed.  Its keys are these:<div class="spacer">
</div>
<br/>
    name        Name of the test which failed<br/>
    estat       Script's exit value<br/>
    wstat       Script's wait status<br/>
    max         Number of individual tests<br/>
    failed      Number which failed<br/>
    canon       List of tests which failed (as string).<br/>
<div class="spacer">
</div>
$failed should be empty if everything passed.</div>
</div>
<div class="section">
<h1>EXPORT</h1> &amp;runtests is exported by &quot;Test::Harness&quot; by default.<div class="spacer">
</div>
&amp;execute_tests, $verbose, $switches and $debug are exported upon request.</div>
<div class="section">
<h1>ENVIRONMENT VARIABLES THAT TAP::HARNESS::COMPATIBLE SETS</h1> &quot;Test::Harness&quot; sets these before executing the individual tests.<dl>
<dt>
&quot;HARNESS_ACTIVE&quot;</dt>
<dd>
This is set to a true value.  It allows the tests to determine if they are being executed through the harness or by any other means.</dd>
</dl>
<dl>
<dt>
&quot;HARNESS_VERSION&quot;</dt>
<dd>
This is the version of &quot;Test::Harness&quot;.</dd>
</dl>
</div>
<div class="section">
<h1>ENVIRONMENT VARIABLES THAT AFFECT TEST::HARNESS</h1><dl>
<dt>
&quot;HARNESS_TIMER&quot;</dt>
<dd>
Setting this to true will make the harness display the number of milliseconds each test took.  You can also use  <i>prove</i>'s &quot;--timer&quot; switch.</dd>
</dl>
<dl>
<dt>
&quot;HARNESS_VERBOSE&quot;</dt>
<dd>
If true, &quot;Test::Harness&quot; will output the verbose results of running its tests.  Setting $Test::Harness::verbose will override this, or you can use the &quot;-v&quot; switch in the  <i>prove</i> utility.</dd>
</dl>
<dl>
<dt>
&quot;HARNESS_OPTIONS&quot;</dt>
<dd>
Provide additional options to the harness. Currently supported options are:</dd>
</dl>
<div style="margin-left: 4.00ex;">
<dl>
<dt>
&quot;j&lt;n&gt;&quot;</dt>
<dd>
Run &lt;n&gt; (default 9) parallel jobs.</dd>
</dl>
<dl>
<dt>
&quot;c&quot;</dt>
<dd>
Try to color output. See &quot;new&quot; in TAP::Formatter::Base.</dd>
</dl>
</div>
<div style="margin-left: 4.00ex;">
<div style="height: 1.00em;">
&#160;</div>
Multiple options may be separated by colons:<div style="height: 1.00em;">
&#160;</div>
<br/>
    HARNESS_OPTIONS=j9:c make test<br/>
</div>
<dl>
<dt>
&quot;HARNESS_SUBCLASS&quot;</dt>
<dd>
Specifies a TAP::Harness subclass to be used in place of TAP::Harness.</dd>
</dl>
</div>
<div class="section">
<h1>Taint Mode</h1> Normally when a Perl program is run in taint mode the contents of the &quot;PERL5LIB&quot; environment variable do not appear in @INC.<div class="spacer">
</div>
Because &quot;PERL5LIB&quot; is often used during testing to add build directories to @INC &quot;Test::Harness&quot; passes the names of any directories found in &quot;PERL5LIB&quot; as -I switches. The net effect of this is that &quot;PERL5LIB&quot; is honoured even in taint mode.</div>
<div class="section">
<h1>SEE ALSO</h1> TAP::Harness</div>
<div class="section">
<h1>BUGS</h1> Please report any bugs or feature requests to &quot;bug-test-harness at rt.cpan.org&quot;, or through the web interface at http://rt.cpan.org/NoAuth/ReportBug.html?Queue=Test-Harness &lt;http://rt.cpan.org/NoAuth/ReportBug.html?Queue=Test-Harness&gt;.  I will be notified, and then you'll automatically be notified of progress on your bug as I make changes.</div>
<div class="section">
<h1>AUTHORS</h1> Andy Armstrong  &quot;&lt;andy@hexten.net&gt;&quot;<div class="spacer">
</div>
Test::Harness 2.64 (maintained by Andy Lester and on which this module is based) has this attribution:<div class="spacer">
</div>
<br/>
    Either Tim Bunce or Andreas Koenig, we don't know. What we know for<br/>
    sure is, that it was inspired by Larry Wall's F&lt;TEST&gt; script that came<br/>
    with perl distributions for ages. Numerous anonymous contributors<br/>
    exist.  Andreas Koenig held the torch for many years, and then<br/>
    Michael G Schwern.<br/>
</div>
<div class="section">
<h1>LICENCE AND COPYRIGHT</h1> Copyright (c) 2007-2011, Andy Armstrong &quot;&lt;andy@hexten.net&gt;&quot;. All rights reserved.<div class="spacer">
</div>
This module is free software; you can redistribute it and/or modify it under the same terms as Perl itself. See perlartistic.</div>
<table class="foot">
<tr>
<td class="foot-date">
2011-09-19</td>
<td class="foot-os">
perl v5.14.2</td>
</tr>
</table>
</div>
</body>
</html>

