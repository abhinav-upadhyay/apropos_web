<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/linux/style.css" type="text/css" media="all"/>
<title>
Data::Section(3pm)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
Data::Section(3pm)</td>
<td class="head-vol">
User Contributed Perl Documentation</td>
<td class="head-rtitle">
Data::Section(3pm)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>NAME</h1> Data::Section - read multiple hunks of data out of your DATA section</div>
<div class="section">
<h1>VERSION</h1> version 0.101621</div>
<div class="section">
<h1>SYNOPSIS</h1><br/>
  package Letter::Resignation;<br/>
  use Data::Section -setup;<br/>
<br/>
  sub quit {<br/>
    my ($class, $angry, %arg) = @_;<br/>
<br/>
    my $template = $self-&gt;section_data(<br/>
      ($angry ? &quot;angry_&quot; : &quot;professional_&quot;) . &quot;letter&quot;<br/>
    );<br/>
<br/>
    return fill_in($$template, \%arg);<br/>
  }<br/>
<br/>
  __DATA__<br/>
  __[ angry_letter ]__<br/>
  Dear jerks,<br/>
<br/>
    I quit!<br/>
<br/>
  -- <br/>
  {{ $name }}<br/>
  __[ professional_letter ]__<br/>
  Dear {{ $boss }},<br/>
<br/>
    I quit, jerks!<br/>
<br/>
<br/>
  -- <br/>
  {{ $name }}<br/>
</div>
<div class="section">
<h1>DESCRIPTION</h1> Data::Section provides an easy way to access multiple named chunks of line-oriented data in your module's DATA section.  It was written to allow modules to store their own templates, but probably has other uses.</div>
<div class="section">
<h1>WARNING</h1> You will need to use &quot;__DATA__&quot; sections and not &quot;__END__&quot; sections.  Yes, it matters.  Who knew!</div>
<div class="section">
<h1>EXPORTS</h1> To get the methods exported by Data::Section, you must import like this:<div class="spacer">
</div>
<br/>
  use Data::Section -setup;<br/>
<div class="spacer">
</div>
Optional arguments may be given to Data::Section like this:<div class="spacer">
</div>
<br/>
  use Data::Section -setup =&gt; { ... };<br/>
<div class="spacer">
</div>
Valid arguments are:<div class="spacer">
</div>
<br/>
  inherit      - if true, allow packages to inherit the data of the packages<br/>
                 from which they inherit; default: true<br/>
<br/>
  header_re    - if given, changes the regex used to find section headers<br/>
                 in the data section; it should leave the section name in $1<br/>
<br/>
  default_name - if given, allows the first section to has no header and set<br/>
                 its name<br/>
<div class="spacer">
</div>
Three methods are exported by Data::Section:<div class="subsection">
<h2>section_data</h2><br/>
  my $string_ref = $pkg-&gt;section_data($name);<br/>
<div class="spacer">
</div>
This method returns a reference to a string containing the data from the name section, either in the invocant's &quot;DATA&quot; section or in that of one of its ancestors.  (The ancestor must also derive from the class that imported Data::Section.)<div class="spacer">
</div>
By default, named sections are delimited by lines that look like this:<div class="spacer">
</div>
<br/>
  __[ name ]__<br/>
<div class="spacer">
</div>
You can use as many underscores as you want, and the space around the name is optional.  This pattern can be configured with the &quot;header_re&quot; option (see above).  If present, a single leading &quot;\&quot; is removed, so that sections can encode lines that look like section delimiters.<div class="spacer">
</div>
When a line containing only &quot;__END__&quot; is reached, all processing of sections ends.</div>
<div class="subsection">
<h2>section_data_names</h2><br/>
  my @names = $pkg-&gt;section_data_names;<br/>
<div class="spacer">
</div>
This returns a list of all the names that will be recognized by the &quot;section_data&quot; method.</div>
<div class="subsection">
<h2>merged_section_data</h2><br/>
  my $data = $pkg-&gt;merged_section_data;<br/>
<div class="spacer">
</div>
This method returns a hashref containing all the data extracted from the package data for all the classes from which the invocant inherits -- as long as those classes also inherit from the package into which Data::Section was imported.<div class="spacer">
</div>
In other words, given this inheritance tree:<div class="spacer">
</div>
<br/>
  A<br/>
   \<br/>
    B   C<br/>
     \ /<br/>
      D<br/>
<div class="spacer">
</div>
...if Data::Section was imported by A, then when D's &quot;merged_section_data&quot; is invoked, C's data section will not be considered.  (This prevents the read position of C's data handle from being altered unexpectedly.)<div class="spacer">
</div>
The keys in the returned hashref are the section names, and the values are  <b>references to</b> the strings extracted from the data sections.</div>
<div class="subsection">
<h2>merged_section_data_names</h2><br/>
  my @names = $pkg-&gt;merged_section_data_names;<br/>
<div class="spacer">
</div>
This returns a list of all the names that will be recognized by the &quot;merged_section_data&quot; method.</div>
<div class="subsection">
<h2>local_section_data</h2><br/>
  my $data = $pkg-&gt;local_section_data;<br/>
<div class="spacer">
</div>
This method returns a hashref containing all the data extracted from the package on which the method was invoked.  If called on an object, it will operate on the package into which the object was blessed.<div class="spacer">
</div>
This method needs to be used carefull, because it's weird.  It returns only the data for the package on which it was invoked.  If the package on which it was invoked has no data sections, it returns an empty hashref.</div>
<div class="subsection">
<h2>local_section_data_names</h2><br/>
  my @names = $pkg-&gt;local_section_data_names;<br/>
<div class="spacer">
</div>
This returns a list of all the names that will be recognized by the &quot;local_section_data&quot; method.</div>
</div>
<div class="section">
<h1>TIPS AND TRICKS</h1><div class="subsection">
<h2>MooseX::Declare and namespace::autoclean</h2> The namespace::autoclean library automatically cleans foreign routines from a class, including those imported by Data::Section.<div class="spacer">
</div>
MooseX::Declare does the same thing, and can also cause your &quot;__DATA__&quot; section to appear outside your class's package.<div class="spacer">
</div>
These are easy to address.  The Sub::Exporter::ForMethods library provides an installer that will cause installed methods to appear to come from the class and avoid autocleaning.  Using an explicit &quot;package&quot; statement will keep the data section in the correct package.<div class="spacer">
</div>
<br/>
   package Foo;<br/>
<br/>
   use MooseX::Declare;<br/>
   class Foo {<br/>
<br/>
     # Utility to tell Sub::Exporter modules to export methods.<br/>
     use Sub::Exporter::ForMethods qw( method_installer );<br/>
<br/>
     # method_installer returns a sub.<br/>
     use Data::Section { installer =&gt; method_installer }, -setup;<br/>
<br/>
     method my_method {<br/>
        my $content_ref = $self-&gt;section_data('SectionA');<br/>
<br/>
        print $$content_ref;<br/>
     }<br/>
   }<br/>
<br/>
   __DATA__<br/>
   __[ SectionA ]__<br/>
   Hello, world.<br/>
</div>
</div>
<div class="section">
<h1>SEE ALSO</h1> Inline::Files does something that is at first look similar, but it works with source filters, and contains the warning:<div class="spacer">
</div>
<br/>
  It is possible that this module may overwrite the source code in files that<br/>
  use it. To protect yourself against this possibility, you are strongly<br/>
  advised to use the -backup option described in &quot;Safety first&quot;.<br/>
<div class="spacer">
</div>
Enough said.</div>
<div class="section">
<h1>AUTHOR</h1> Ricardo SIGNES &lt;rjbs@cpan.org&gt;</div>
<div class="section">
<h1>COPYRIGHT AND LICENSE</h1> This software is copyright (c) 2011 by Ricardo SIGNES.<div class="spacer">
</div>
This is free software; you can redistribute it and/or modify it under the same terms as the Perl 5 programming language system itself.</div>
<table class="foot">
<tr>
<td class="foot-date">
2011-04-29</td>
<td class="foot-os">
perl v5.12.3</td>
</tr>
</table>
</div>
</body>
</html>

