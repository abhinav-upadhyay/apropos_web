<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/linux/style.css" type="text/css" media="all"/>
<title>
Arg(3)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
Arg(3)</td>
<td class="head-vol">
OCaml library</td>
<td class="head-rtitle">
Arg(3)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>NAME</h1> Arg - Parsing of command line arguments.</div>
<div class="section">
<h1>Module</h1> Module   Arg</div>
<div class="section">
<h1>Documentation</h1> Module <b>Arg</b><br/>
 : <b>sig end</b><div style="height: 1.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
Parsing of command line arguments.<div style="height: 1.00em;">
&#160;</div>
This module provides a general mechanism for extracting options and arguments from the command line to the program.<div style="height: 1.00em;">
&#160;</div>
Syntax of command lines: A keyword is a character string starting with a <b>-</b> . An option is a keyword alone or followed by an argument. The types of keywords are: <b>Unit</b> , <b>Bool</b> , <b>Set</b> , <b>Clear</b> , <b>String</b> , <b>Set_string</b> , <b>Int</b> , <b>Set_int</b> , <b>Float</b> , <b>Set_float</b> , <b>Tuple</b> , <b>Symbol</b> , and <b>Rest</b> . <b>Unit</b> , <b>Set</b> and <b>Clear</b> keywords take no argument. A <b>Rest</b> keyword takes the remaining of the command line as arguments. Every other keyword takes the following word on the command line as argument. Arguments not preceded by a keyword are called anonymous arguments.<div style="height: 1.00em;">
&#160;</div>
Examples ( <b>cmd</b> is assumed to be the command name):<div style="height: 1.00em;">
&#160;</div>
- <b>cmd -flag</b> (a unit option)<div style="height: 1.00em;">
&#160;</div>
- <b>cmd -int 1</b> (an int option with argument <b>1</b> )<div style="height: 1.00em;">
&#160;</div>
- <b>cmd -string foobar</b> (a string option with argument <b>foobar</b> )<div style="height: 1.00em;">
&#160;</div>
- <b>cmd -float 12.34</b> (a float option with argument <b>12.34</b> )<div style="height: 1.00em;">
&#160;</div>
- <b>cmd a b c</b> (three anonymous arguments: <b>a</b> , <b>b</b> , and <b>c</b> )<div style="height: 1.00em;">
&#160;</div>
- <b>cmd a b -- c d</b> (two anonymous arguments and a rest option with two arguments)<div style="height: 1.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
<i>type spec</i> =<br/>
 | Unit <b>of</b> <b>(unit -&gt; unit)</b> <i>  </i><br/>
  (* Call the function with unit argument<br/>
 *)<br/>
 | Bool <b>of</b> <b>(bool -&gt; unit)</b> <i>  </i><br/>
  (* Call the function with a bool argument<br/>
 *)<br/>
 | Set <b>of</b> <b>bool Pervasives.ref</b> <i>  </i><br/>
  (* Set the reference to true<br/>
 *)<br/>
 | Clear <b>of</b> <b>bool Pervasives.ref</b> <i>  </i><br/>
  (* Set the reference to false<br/>
 *)<br/>
 | String <b>of</b> <b>(string -&gt; unit)</b> <i>  </i><br/>
  (* Call the function with a string argument<br/>
 *)<br/>
 | Set_string <b>of</b> <b>string Pervasives.ref</b> <i>  </i><br/>
  (* Set the reference to the string argument<br/>
 *)<br/>
 | Int <b>of</b> <b>(int -&gt; unit)</b> <i>  </i><br/>
  (* Call the function with an int argument<br/>
 *)<br/>
 | Set_int <b>of</b> <b>int Pervasives.ref</b> <i>  </i><br/>
  (* Set the reference to the int argument<br/>
 *)<br/>
 | Float <b>of</b> <b>(float -&gt; unit)</b> <i>  </i><br/>
  (* Call the function with a float argument<br/>
 *)<br/>
 | Set_float <b>of</b> <b>float Pervasives.ref</b> <i>  </i><br/>
  (* Set the reference to the float argument<br/>
 *)<br/>
 | Tuple <b>of</b> <b>spec list</b> <i>  </i><br/>
  (* Take several arguments according to the spec list<br/>
 *)<br/>
 | Symbol <b>of</b> <b>string list * (string -&gt; unit)</b> <i>  </i><br/>
  (* Take one of the symbols as argument and call the function with the symbol<br/>
 *)<br/>
 | Rest <b>of</b> <b>(string -&gt; unit)</b> <i>  </i><br/>
  (* Stop interpreting keywords and call the function with each remaining argument<br/>
 *)<div style="height: 1.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
The concrete type describing the behavior associated with a keyword.<div style="height: 1.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
<i>type key</i> = <b>string</b><div style="height: 1.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
<i>type doc</i> = <b>string</b><div style="height: 1.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
<i>type usage_msg</i> = <b>string</b><div style="height: 1.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
<i>type anon_fun</i> = <b>string -&gt; unit</b><div style="height: 1.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
<i>val parse</i> : <b>(key * spec * doc) list -&gt; anon_fun -&gt; usage_msg -&gt; unit</b><div style="height: 1.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
<b>Arg.parse speclist anon_fun usage_msg</b> parses the command line. <b>speclist</b> is a list of triples <b>(key, spec, doc)</b> . <b>key</b> is the option keyword, it must start with a <b>'-'</b> character. <b>spec</b> gives the option type and the function to call when this option is found on the command line. <b>doc</b> is a one-line description of this option. <b>anon_fun</b> is called on anonymous arguments. The functions in <b>spec</b> and <b>anon_fun</b> are called in the same order as their arguments appear on the command line.<div style="height: 1.00em;">
&#160;</div>
If an error occurs, <b>Arg.parse</b> exits the program, after printing to standard error an error message as follows:<div style="height: 1.00em;">
&#160;</div>
-  The reason for the error: unknown option, invalid or missing argument, etc.<div style="height: 1.00em;">
&#160;</div>
- <b>usage_msg</b><div style="height: 1.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
-  The list of options, each followed by the corresponding <b>doc</b> string. Beware: options that have an empty <b>doc</b> string will not be included in the list.<div style="height: 1.00em;">
&#160;</div>
For the user to be able to specify anonymous arguments starting with a <b>-</b> , include for example <b>(&quot;-&quot;, String anon_fun, doc)</b> in <b>speclist</b> .<div style="height: 1.00em;">
&#160;</div>
By default, <b>parse</b> recognizes two unit options, <b>-help</b> and <b>--help</b> , which will print to standard output <b>usage_msg</b> and the list of options, and exit the program.  You can override this behaviour by specifying your own <b>-help</b> and <b>--help</b> options in <b>speclist</b> .<div style="height: 1.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
<i>val parse_dynamic</i> : <b>(key * spec * doc) list Pervasives.ref -&gt;</b> <b>anon_fun -&gt; usage_msg -&gt; unit</b><div style="height: 1.00em;">
&#160;</div>
Same as <b>Arg.parse</b> , except that the <b>speclist</b> argument is a reference and may be updated during the parsing. A typical use for this feature is to parse command lines of the form:<div style="height: 1.00em;">
&#160;</div>
-    command subcommand <b>options</b> where the list of options depends on the value of the subcommand argument.<div style="height: 1.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
<i>val parse_argv</i> : <b>?current:int Pervasives.ref -&gt;</b> <b>string array -&gt;</b> <b>(key * spec * doc) list -&gt; anon_fun -&gt; usage_msg -&gt; unit</b><div style="height: 1.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
<b>Arg.parse_argv ~current args speclist anon_fun usage_msg</b> parses the array <b>args</b> as if it were the command line.  It uses and updates the value of <b>~current</b> (if given), or <b>Arg.current</b> .  You must set it before calling <b>parse_argv</b> .  The initial value of <b>current</b> is the index of the program name (argument 0) in the array. If an error occurs, <b>Arg.parse_argv</b> raises <b>Arg.Bad</b> with the error message as argument.  If option <b>-help</b> or <b>--help</b> is given, <b>Arg.parse_argv</b> raises <b>Arg.Help</b> with the help message as argument.<div style="height: 1.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
<i>val parse_argv_dynamic</i> : <b>?current:int Pervasives.ref -&gt;</b> <b>string array -&gt;</b> <b>(key * spec * doc) list Pervasives.ref -&gt;</b> <b>anon_fun -&gt; string -&gt; unit</b><div style="height: 1.00em;">
&#160;</div>
Same as <b>Arg.parse_argv</b> , except that the <b>speclist</b> argument is a reference and may be updated during the parsing. See <b>Arg.parse_dynamic</b> .<div style="height: 1.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
<i>exception Help</i> <b>of</b> <b>string</b><div style="height: 1.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
Raised by <b>Arg.parse_argv</b> when the user asks for help.<div style="height: 1.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
<i>exception Bad</i> <b>of</b> <b>string</b><div style="height: 1.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
Functions in <b>spec</b> or <b>anon_fun</b> can raise <b>Arg.Bad</b> with an error message to reject invalid arguments. <b>Arg.Bad</b> is also raised by <b>Arg.parse_argv</b> in case of an error.<div style="height: 1.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
<i>val usage</i> : <b>(key * spec * doc) list -&gt; usage_msg -&gt; unit</b><div style="height: 1.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
<b>Arg.usage speclist usage_msg</b> prints to standard error an error message that includes the list of valid options.  This is the same message that <b>Arg.parse</b> prints in case of error. <b>speclist</b> and <b>usage_msg</b> are the same as for <b>Arg.parse</b> .<div style="height: 1.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
<i>val usage_string</i> : <b>(key * spec * doc) list -&gt; usage_msg -&gt; string</b><div style="height: 1.00em;">
&#160;</div>
Returns the message that would have been printed by <b>Arg.usage</b> , if provided with the same parameters.<div style="height: 1.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
<i>val align</i> : <b>?limit:int -&gt;</b> <b>(key * spec * doc) list -&gt; (key * spec * doc) list</b><div style="height: 1.00em;">
&#160;</div>
Align the documentation strings by inserting spaces at the first space, according to the length of the keyword.  Use a space as the first character in a doc string if you want to align the whole string.  The doc strings corresponding to <b>Symbol</b> arguments are aligned on the next line.<div style="height: 1.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
<i>val current</i> : <b>int Pervasives.ref</b><div style="height: 1.00em;">
&#160;</div>
Position (in <b>Sys.argv</b> ) of the argument being processed.  You can change this value, e.g. to force <b>Arg.parse</b> to skip some arguments. <b>Arg.parse</b> uses the initial value of <b>Arg.current</b> as the index of argument 0 (the program name) and starts parsing arguments at the next element.<div style="height: 1.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
</div>
<table class="foot">
<tr>
<td class="foot-date">
2015-08-12</td>
<td class="foot-os">
OCamldoc</td>
</tr>
</table>
</div>
</body>
</html>

