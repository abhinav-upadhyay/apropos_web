<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/linux/style.css" type="text/css" media="all"/>
<title>
CAP_INIT(3)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
CAP_INIT(3)</td>
<td class="head-vol">
Linux Programmer's Manual</td>
<td class="head-rtitle">
CAP_INIT(3)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>NAME</h1> cap_init, cap_free, cap_dup - capability data object storage management</div>
<div class="section">
<h1>SYNOPSIS</h1> <b>#include &lt;sys/capability.h&gt;</b><div style="height: 1.00em;">
&#160;</div>
<b>cap_t cap_init(void);</b><div style="height: 1.00em;">
&#160;</div>
<b>int cap_free(void *</b><i>obj_d</i><b>);</b><div style="height: 1.00em;">
&#160;</div>
<b>cap_t cap_dup(cap_t </b><i>cap_p</i><b>);</b><div style="height: 1.00em;">
&#160;</div>
Link with <i>-lcap</i>.</div>
<div class="section">
<h1>DESCRIPTION</h1> The capabilities associated with a file or process are never edited directly.  Instead, working storage is allocated to contain a representation of the capability state.  Capabilities are edited and manipulated only within this working storage area.  Once editing of the capability state is complete, the updated capability state is used to replace the capability state associated with the file or process.<div class="spacer">
</div>
<b>cap_init</b>() creates a capability state in working storage and returns a pointer to the capability state.  The initial value of all flags are cleared.  The caller should free any releasable memory, when the capability state in working storage is no longer required, by calling <b>cap_free</b>() with the <i>cap_t</i> as an argument.<div class="spacer">
</div>
<b>cap_free</b>() liberates any releasable memory that has been allocated to the capability state identified by <i>obj_d</i>. The <i>obj_d</i> argument may identify either a <i>cap_t</i> entity, or a <i>char *</i> entity allocated by the <b>cap_to_text</b>() function.<div class="spacer">
</div>
<b>cap_dup</b>() returns a duplicate capability state in working storage given by the source object <i>cap_p</i>, allocating any memory necessary, and returning a pointer to the newly created capability state.  Once duplicated, no operation on either capability state affects the other in any way. When the duplicated capability state in working storage is no longer required, the caller should free any releasable memory by calling <b>cap_free</b>() with the <i>cap_t</i> as an argument.</div>
<div class="section">
<h1>RETURN VALUE</h1> <b>cap_init</b>() and <b>cap_dup</b>() return a non-NULL value on success, and NULL on failure.<div class="spacer">
</div>
<b>cap_free</b>() returns zero on success, and -1 on failure.<div class="spacer">
</div>
On failure, <i>errno</i> is set to <b>EINVAL</b> or <b>ENOMEM</b>.</div>
<div class="section">
<h1>CONFORMING TO</h1> These functions are specified in the withdrawn POSIX.1e draft specification.</div>
<div class="section">
<h1>SEE ALSO</h1> <b>libcap</b>(3), <b>cap_clear</b>(3), <b>cap_copy_ext</b>(3), <b>cap_from_text</b>(3), <b>cap_get_file</b>(3), <b>cap_get_proc</b>(3), <b>capabilities</b>(7)</div>
<table class="foot">
<tr>
<td class="foot-date">
2008-05-11</td>
<td class="foot-os">
</td>
</tr>
</table>
</div>
</body>
</html>

