<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/linux/style.css" type="text/css" media="all"/>
<title>
XkbSetDeviceInfo(3)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
XkbSetDeviceInfo(3)</td>
<td class="head-vol">
XKB FUNCTIONS</td>
<td class="head-rtitle">
XkbSetDeviceInfo(3)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>NAME</h1> XkbSetDeviceInfo - Modify some or all of the characteristics of an X Input Extension device</div>
<div class="section">
<h1>SYNOPSIS</h1><div style="margin-left: 5.00ex;text-indent: -5.00ex;" class="spacer">
<b>Bool XkbSetDeviceInfo</b> <b>(Display *</b><i>dpy</i><b>,</b> <b>unsigned int </b><i>which</i><b>,</b> <b>XkbDeviceInfoPtr </b><i>device_info</i><b>);</b></div>
</div>
<div class="section">
<h1>ARGUMENTS</h1><dl>
<dt>
<i>- dpy</i></dt>
<dd>
connection to X server</dd>
</dl>
<dl>
<dt>
<i>- which</i></dt>
<dd>
mask indicating characteristics to modify</dd>
</dl>
<dl>
<dt>
<i>- device_info</i></dt>
<dd>
structure defining the device and modifications</dd>
</dl>
</div>
<div class="section">
<h1>DESCRIPTION</h1> To change characteristics of an X Input Extension device in the server, first modify a local copy of the device structure and then use either <i>XkbSetDeviceInfo,</i> or, to save network traffic, use an XkbDeviceChangesRec structure and call <i>XkbChangeDeviceInfo</i> to download the changes to the server.<div style="height: 1.00em;">
&#160;</div>
<i>XkbSetDeviceInfo</i> sends a request to the server to modify the characteristics of the device specified in the <i>device_info</i> structure. The particular characteristics modified are identified by the bits set in <i>which</i> and take their values from the relevant fields in device_info (see Table 1). XkbSetDeviceInfo returns True if the request was successfully sent to the server. If the X server implementation does not allow interaction between the X input extension and the Xkb Extension, the function does nothing and returns False.<br/>
                         Table 1 XkbDeviceInfoRec Mask Bits<br/>
____________________________________________________________________________________<br/>
Name                         XkbDeviceInfoRec Value     Capability If Set<br/>
                             Fields Effected            <br/>
____________________________________________________________________________________<br/>
XkbXI_KeyboardsMask                           (1L &lt;&lt;0) Clients can use all<br/>
                                                       Xkb requests and events<br/>
                                                       with KeyClass devices <br/>
                                                       supported by the input<br/>
                                                       device extension.<div class="spacer">
</div>
<br/>
XkbXI_ButtonActionsMask       num_btns        (1L &lt;&lt;1) Clients can assign key <br/>
                              btn_acts                 actions to buttons <br/>
                                                       non-KeyClass input<br/>
                                                       extension devices.<br/>
                           <br/>
XkbXI_IndicatorNamesMask      leds-&gt;names     (1L &lt;&lt;2) Clients can assign<br/>
                                                       names to indicators on<br/>
                                                       non-KeyClass input<br/>
                                                       extension devices.<br/>
                                                             <br/>
XkbXI_IndicatorMapsMask       leds-&gt;maps      (1L &lt;&lt;3) Clients can assign<br/>
                                                       indicator maps to<br/>
                                                       indicators on <br/>
                                                       non-KeyClass input<br/>
                                                       extension devices.<div class="spacer">
</div>
<br/>
XkbXI_IndicatorStateMask      leds-&gt;state     (1L &lt;&lt;4) Clients can request <br/>
                                                       the status of indicators<br/>
                                                       on non-KeyClass input<br/>
                                                       extension devices.<div class="spacer">
</div>
<br/>
XkbXI_IndicatorsMask          sz_leds         (0x1c)   XkbXI_IndicatorNamesMask |<br/>
                              num_leds                 XkbXI_IndicatorMapsMask |<br/>
                              leds-&gt;*                  XkbXI_IndicatorStateMask<div class="spacer">
</div>
<br/>
XkbXI_UnsupportedFeaturesMask unsupported     (1L &lt;&lt;15)<div class="spacer">
</div>
<br/>
XkbXI_AllDeviceFeaturesMask   Those selected  (0x1e)   XkbXI_IndicatorsMask |<br/>
                              by Value Column          XkbSI_ButtonActionsMask<br/>
                              masks <div class="spacer">
</div>
<br/>
XkbXI_AllFeaturesMask         Those selected  (0x1f)   XkbSI_AllDeviceFeaturesMask |<br/>
                              by Value Column          XkbSI_KeyboardsMask<br/>
                              masks<div class="spacer">
</div>
<br/>
XkbXI_AllDetailsMask          Those selected  (0x801f) XkbXI_AllFeaturesMask |<br/>
                              by Value column          XkbXI_UnsupportedFeaturesMask<br/>
                              masks<br/>
<div style="height: 1.00em;">
&#160;</div>
The <i>which</i> parameter specifies which aspects of the device should be changed and is a bitmask composed of an inclusive OR or one or more of the following bits: XkbXI_ButtonActionsMask, XkbXI_IndicatorNamesMask, XkbXI_IndicatorMapsMask. If the features requested to be manipulated in <i>which</i> are valid for the device, but the server does not support assignment of one or more of them, that particular portion of the request is ignored.<div style="height: 1.00em;">
&#160;</div>
If the device specified in <i>device_info-&gt;device_spec</i> does not contain buttons and a request affecting buttons is made, or the device does not contain indicators and a request affecting indicators is made, a BadMatch protocol error results.<div style="height: 1.00em;">
&#160;</div>
If the XkbXI_ButtonActionsMask bit is set in the <i>supported</i> mask returned by <i>XkbGetDeviceInfo,</i> the Xkb extension allows applications to assign key actions to buttons on input extension devices other than the core keyboard device. If the XkbXI_ButtonActionsMask is set in <i>which,</i> the actions for all buttons specified in <i>device_info</i> are set to the XkbActions specified in <i>device_info-&gt;btn_acts.</i> If the number of buttons requested to be updated is not valid for the device, <i>XkbSetDeviceInfo</i> returns False and a BadValue protocol error results.<div style="height: 1.00em;">
&#160;</div>
If the XkbXI_IndicatorMaps and / or XkbXI_IndicatorNamesMask bit is set in the <i>supported</i> mask returned by <i>XkbGetDeviceInfo,</i> the Xkb extension allows applications to assign maps and / or names to the indicators of nonkeyboard extension devices. If supported, maps and / or names can be assigned to all extension device indicators, whether they are part of a keyboard feedback or part of an indicator feedback.<div style="height: 1.00em;">
&#160;</div>
If the XkbXI_IndicatorMapsMask and / or XkbXI_IndicatorNamesMask flag is set in <i>which,</i> the indicator maps and / or names for all <i>device_info-&gt;num_leds</i> indicator devices specified in <i>device_info-&gt;leds</i> are set to the maps and / or names specified in <i>device_info-&gt;leds. device_info-&gt;leds-&gt;led_class</i> and <i>led_id</i> specify the input extension class and device ID for each indicator device to modify; if they have invalid values, a BadValue protocol error results and <i>XkbSetDeviceInfo</i> returns False. If they have legal values but do not specify a keyboard or indicator class feedback for the device in question, a BadMatch error results. If any of the values in <i>device_info-&gt;leds-&gt;names</i> are not a valid Atom or None, a BadAtom protocol error results.</div>
<div class="section">
<h1>RETURN VALUES</h1><dl>
<dt>
True</dt>
<dd>
The <i>XkbSetDeviceInfo</i> function returns True if the request was successfully sent to the server.</dd>
</dl>
<dl>
<dt>
False</dt>
<dd>
The <i>XkbSetDeviceInfo</i> function returns False if the X server implementation does not allow interaction between the X input extension and the Xkb Extension.</dd>
</dl>
</div>
<div class="section">
<h1>STRUCTURES</h1> Changes to an Xkb extension device may be tracked by listening to XkbDeviceExtensionNotify events and accumulating the changes in an XkbDeviceChangesRec structure. The changes noted in the structure may then be used in subsequent operations to update either a server configuration or a local copy of an Xkb extension device configuration. The changes structure is defined as follows:<div class="spacer">
</div>
<br/>
typedef struct _XkbDeviceChanges {<br/>
    unsigned int    changed;    /&#8727; bits indicating what has changed */<br/>
    unsigned short  first_btn;  /&#8727; number of first button which changed, if any */<br/>
    unsigned short  num_btns;   /&#8727; number of buttons that have changed */<br/>
    XkbDeviceLedChangesRec leds;<br/>
} XkbDeviceChangesRec,*XkbDeviceChangesPtr;<div class="spacer">
</div>
<br/>
</div>
<div class="section">
<h1>DIAGNOSTICS</h1><dl>
<dt>
<b>BadAtom</b></dt>
<dd>
A name is neither a valid Atom or None</dd>
</dl>
<dl>
<dt>
<b>BadMatch</b></dt>
<dd>
A compatible version of Xkb was not available in the server or an argument has correct type and range, but is otherwise invalid</dd>
</dl>
<dl>
<dt>
<b>BadValue</b></dt>
<dd>
An argument is out of range</dd>
</dl>
</div>
<div class="section">
<h1>SEE ALSO</h1> <b>XkbChangeDeviceInfo</b>(3), <b>XkbGetDeviceInfo</b>(3)</div>
<table class="foot">
<tr>
<td class="foot-date">
libX11 1.4.99.1</td>
<td class="foot-os">
X Version 11</td>
</tr>
</table>
</div>
</body>
</html>

