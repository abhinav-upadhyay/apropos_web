<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/linux/style.css" type="text/css" media="all"/>
<title>
Module::Build::Bundling(3perl)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
Module::Build::Bundling(3perl)</td>
<td class="head-vol">
Perl Programmers Reference Guide</td>
<td class="head-rtitle">
Module::Build::Bundling(3perl)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>NAME</h1> Module::Build::Bundling - How to bundle Module::Build with a distribution</div>
<div class="section">
<h1>SYNOPSIS</h1><br/>
  # Build.PL<br/>
  use inc::latest 'Module::Build';<br/>
<br/>
  Module::Build-&gt;new(<br/>
    module_name =&gt; 'Foo::Bar',<br/>
    license =&gt; 'perl',<br/>
  )-&gt;create_build_script;<br/>
</div>
<div class="section">
<h1>DESCRIPTION</h1>  <b>WARNING -- THIS IS AN EXPERIMENTAL FEATURE</b><div class="spacer">
</div>
In order to install a distribution using Module::Build, users must have Module::Build available on their systems.  There are two ways to do this.  The first way is to include Module::Build in the &quot;configure_requires&quot; metadata field.  This field is supported by recent versions CPAN and CPANPLUS and is a standard feature in the Perl core as of Perl 5.10.1.  Module::Build now adds itself to &quot;configure_requires&quot; by default.<div class="spacer">
</div>
The second way supports older Perls that have not upgraded CPAN or CPANPLUS and involves bundling an entire copy of Module::Build into the distribution's &quot;inc/&quot; directory.  This is the same approach used by Module::Install, a modern wrapper around ExtUtils::MakeMaker for Makefile.PL based distributions.<div class="spacer">
</div>
The &quot;trick&quot; to making this work for Module::Build is making sure the highest version Module::Build is used, whether this is in &quot;inc/&quot; or already installed on the user's system.  This ensures that all necessary features are available as well as any new bug fixes.  This is done using the new inc::latest module.<div class="spacer">
</div>
A &quot;normal&quot; Build.PL looks like this (with only the minimum required fields):<div class="spacer">
</div>
<br/>
  use Module::Build;<br/>
<br/>
  Module::Build-&gt;new(<br/>
    module_name =&gt; 'Foo::Bar',<br/>
    license     =&gt; 'perl',<br/>
  )-&gt;create_build_script;<br/>
<div class="spacer">
</div>
A &quot;bundling&quot; Build.PL replaces the initial &quot;use&quot; line with a nearly transparent replacement:<div class="spacer">
</div>
<br/>
  use inc::latest 'Module::Build';<br/>
<br/>
  Module::Build-&gt;new(<br/>
    module_name =&gt; 'Foo::Bar',<br/>
    license =&gt; 'perl',<br/>
  )-&gt;create_build_script;<br/>
<div class="spacer">
</div>
For <i>authors</i>, when &quot;Build dist&quot; is run, Module::Build will be automatically bundled into &quot;inc&quot; according to the rules for inc::latest.<div class="spacer">
</div>
For <i>users</i>, inc::latest will load the latest Module::Build, whether installed or bundled in &quot;inc/&quot;.</div>
<div class="section">
<h1>BUNDLING OTHER CONFIGURATION DEPENDENCIES</h1> The same approach works for other configuration dependencies -- modules that  <i>must</i> be available for Build.PL to run.  All other dependencies can be specified as usual in the Build.PL and CPAN or CPANPLUS will install them after Build.PL finishes.<div class="spacer">
</div>
For example, to bundle the Devel::AssertOS::Unix module (which ensures a &quot;Unix-like&quot; operating system), one could do this:<div class="spacer">
</div>
<br/>
  use inc::latest 'Devel::AssertOS::Unix';<br/>
  use inc::latest 'Module::Build';<br/>
<br/>
  Module::Build-&gt;new(<br/>
    module_name =&gt; 'Foo::Bar',<br/>
    license =&gt; 'perl',<br/>
  )-&gt;create_build_script;<br/>
<div class="spacer">
</div>
The &quot;inc::latest&quot; module creates bundled directories based on the packlist file of an installed distribution.  Even though &quot;inc::latest&quot; takes module name arguments, it is better to think of it as bundling and making available entire  <i>distributions</i>.  When a module is loaded through &quot;inc::latest&quot;, it looks in all bundled distributions in &quot;inc/&quot; for a newer module than can be found in the existing @INC array.<div class="spacer">
</div>
Thus, the module-name provided should usually be the &quot;top-level&quot; module name of a distribution, though this is not strictly required.  For example, Module::Build has a number of heuristics to map module names to packlists, allowing users to do things like this:<div class="spacer">
</div>
<br/>
  use inc::latest 'Devel::AssertOS::Unix';<br/>
<div class="spacer">
</div>
even though Devel::AssertOS::Unix is contained within the Devel-CheckOS distribution.<div class="spacer">
</div>
At the current time, packlists are required.  Thus, bundling dual-core modules,  <i>including Module::Build</i>, may require a 'forced install' over versions in the latest version of perl in order to create the necessary packlist for bundling.  This limitation will hopefully be addressed in a future version of Module::Build.<div class="subsection">
<h2>WARNING -- How to Manage Dependency Chains</h2> Before bundling a distribution you must ensure that all prerequisites are also bundled and load in the correct order.  For Module::Build itself, this should not be necessary, but it is necessary for any other distribution. (A future release of Module::Build will hopefully address this deficiency.)<div class="spacer">
</div>
For example, if you need &quot;Wibble&quot;, but &quot;Wibble&quot; depends on &quot;Wobble&quot;, your Build.PL might look like this:<div class="spacer">
</div>
<br/>
  use inc::latest 'Wobble';<br/>
  use inc::latest 'Wibble';<br/>
  use inc::latest 'Module::Build';<br/>
<br/>
  Module::Build-&gt;new(<br/>
    module_name =&gt; 'Foo::Bar',<br/>
    license =&gt; 'perl',<br/>
  )-&gt;create_build_script;<br/>
<div class="spacer">
</div>
Authors are strongly suggested to limit the bundling of additional dependencies if at all possible and to carefully test their distribution tarballs on older versions of Perl before uploading to CPAN.</div>
</div>
<div class="section">
<h1>AUTHOR</h1> David Golden &lt;dagolden@cpan.org&gt;<div class="spacer">
</div>
Development questions, bug reports, and patches should be sent to the Module-Build mailing list at &lt;module-build@perl.org&gt;.<div class="spacer">
</div>
Bug reports are also welcome at &lt;http://rt.cpan.org/NoAuth/Bugs.html?Dist=Module-Build&gt;.</div>
<div class="section">
<h1>SEE ALSO</h1>  <i>perl</i>(1), inc::latest, Module::Build(3), Module::Build::API(3), Module::Build::Cookbook(3),</div>
<table class="foot">
<tr>
<td class="foot-date">
2010-12-30</td>
<td class="foot-os">
perl v5.14.2</td>
</tr>
</table>
</div>
</body>
</html>

