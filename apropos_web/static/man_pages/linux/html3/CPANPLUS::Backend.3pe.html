<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/linux/style.css" type="text/css" media="all"/>
<title>
CPANPLUS::Backend(3perl)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
CPANPLUS::Backend(3perl)</td>
<td class="head-vol">
Perl Programmers Reference Guide</td>
<td class="head-rtitle">
CPANPLUS::Backend(3perl)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>NAME</h1> CPANPLUS::Backend</div>
<div class="section">
<h1>SYNOPSIS</h1><br/>
    my $cb      = CPANPLUS::Backend-&gt;new;<br/>
    my $conf    = $cb-&gt;configure_object;<br/>
<br/>
    my $author  = $cb-&gt;author_tree('KANE');<br/>
    my $mod     = $cb-&gt;module_tree('Some::Module');<br/>
    my $mod     = $cb-&gt;parse_module( module =&gt; 'Some::Module' );<br/>
<br/>
    my @objs    = $cb-&gt;search(  type    =&gt; TYPE,<br/>
                                allow   =&gt; [...] );<br/>
<br/>
    $cb-&gt;flush('all');<br/>
    $cb-&gt;reload_indices;<br/>
    $cb-&gt;local_mirror;<br/>
</div>
<div class="section">
<h1>DESCRIPTION</h1> This module provides the programmer's interface to the &quot;CPANPLUS&quot; libraries.</div>
<div class="section">
<h1>ENVIRONMENT</h1> When &quot;CPANPLUS::Backend&quot; is loaded, which is necessary for just about every &lt;CPANPLUS&gt; operation, the environment variable &quot;PERL5_CPANPLUS_IS_RUNNING&quot; is set to the current process id.<div class="spacer">
</div>
Additionally, the environment variable &quot;PERL5_CPANPLUS_IS_VERSION&quot; will be set to the version of &quot;CPANPLUS::Backend&quot;.<div class="spacer">
</div>
This information might be useful somehow to spawned processes.</div>
<div class="section">
<h1>METHODS</h1><div class="subsection">
<h2>$cb = CPANPLUS::Backend-&gt;new( [CONFIGURE_OBJ] )</h2> This method returns a new &quot;CPANPLUS::Backend&quot; object. This also initialises the config corresponding to this object. You have two choices in this:<dl>
<dt>
Provide a valid &quot;CPANPLUS::Configure&quot; object</dt>
<dd>
This will be used verbatim.</dd>
</dl>
<dl>
<dt>
No arguments</dt>
<dd>
Your default config will be loaded and used.</dd>
</dl>
<div class="spacer">
</div>
New will return a &quot;CPANPLUS::Backend&quot; object on success and die on failure.</div>
<div class="subsection">
<h2>$href = $cb-&gt;module_tree( [@modules_names_list] )</h2> Returns a reference to the CPANPLUS module tree.<div class="spacer">
</div>
If you give it any arguments, they will be treated as module names and &quot;module_tree&quot; will try to look up these module names and return the corresponding module objects instead.<div class="spacer">
</div>
See CPANPLUS::Module for the operations you can perform on a module object.</div>
<div class="subsection">
<h2>$href = $cb-&gt;author_tree( [@author_names_list] )</h2> Returns a reference to the CPANPLUS author tree.<div class="spacer">
</div>
If you give it any arguments, they will be treated as author names and &quot;author_tree&quot; will try to look up these author names and return the corresponding author objects instead.<div class="spacer">
</div>
See CPANPLUS::Module::Author for the operations you can perform on an author object.</div>
<div class="subsection">
<h2>$conf = $cb-&gt;configure_object;</h2> Returns a copy of the &quot;CPANPLUS::Configure&quot; object.<div class="spacer">
</div>
See CPANPLUS::Configure for operations you can perform on a configure object.</div>
<div class="subsection">
<h2>$su = $cb-&gt;selfupdate_object;</h2> Returns a copy of the &quot;CPANPLUS::Selfupdate&quot; object.<div class="spacer">
</div>
See the CPANPLUS::Selfupdate manpage for the operations you can perform on the selfupdate object.</div>
<div class="subsection">
<h2>@mods = $cb-&gt;search( type =&gt; TYPE, allow =&gt; AREF, [data =&gt; AREF, verbose =&gt; BOOL] )</h2> &quot;search&quot; enables you to search for either module or author objects, based on their data. The &quot;type&quot; you can specify is any of the accessors specified in &quot;CPANPLUS::Module::Author&quot; or &quot;CPANPLUS::Module&quot;. &quot;search&quot; will determine by the &quot;type&quot; you specified whether to search by author object or module object.<div class="spacer">
</div>
You have to specify an array reference of regular expressions or strings to match against. The rules used for this array ref are the same as in &quot;Params::Check&quot;, so read that manpage for details.<div class="spacer">
</div>
The search is an &quot;or&quot; search, meaning that if &quot;any&quot; of the criteria match, the search is considered to be successful.<div class="spacer">
</div>
You can specify the result of a previous search as &quot;data&quot; to limit the new search to these module or author objects, rather than the entire module or author tree.  This is how you do &quot;and&quot; searches.<div class="spacer">
</div>
Returns a list of module or author objects on success and false on failure.<div class="spacer">
</div>
See CPANPLUS::Module for the operations you can perform on a module object. See CPANPLUS::Module::Author for the operations you can perform on an author object.</div>
<div class="subsection">
<h2>$backend_rv = $cb-&gt;fetch( modules =&gt; \@mods )</h2> Fetches a list of modules. @mods can be a list of distribution names, module names or module objects--basically anything that parse_module can understand.<div class="spacer">
</div>
See the equivalent method in &quot;CPANPLUS::Module&quot; for details on other options you can pass.<div class="spacer">
</div>
Since this is a multi-module method call, the return value is implemented as a &quot;CPANPLUS::Backend::RV&quot; object. Please consult that module's documentation on how to interpret the return value.</div>
<div class="subsection">
<h2>$backend_rv = $cb-&gt;extract( modules =&gt; \@mods )</h2> Extracts a list of modules. @mods can be a list of distribution names, module names or module objects--basically anything that parse_module can understand.<div class="spacer">
</div>
See the equivalent method in &quot;CPANPLUS::Module&quot; for details on other options you can pass.<div class="spacer">
</div>
Since this is a multi-module method call, the return value is implemented as a &quot;CPANPLUS::Backend::RV&quot; object. Please consult that module's documentation on how to interpret the return value.</div>
<div class="subsection">
<h2>$backend_rv = $cb-&gt;install( modules =&gt; \@mods )</h2> Installs a list of modules. @mods can be a list of distribution names, module names or module objects--basically anything that parse_module can understand.<div class="spacer">
</div>
See the equivalent method in &quot;CPANPLUS::Module&quot; for details on other options you can pass.<div class="spacer">
</div>
Since this is a multi-module method call, the return value is implemented as a &quot;CPANPLUS::Backend::RV&quot; object. Please consult that module's documentation on how to interpret the return value.</div>
<div class="subsection">
<h2>$backend_rv = $cb-&gt;readme( modules =&gt; \@mods )</h2> Fetches the readme for a list of modules. @mods can be a list of distribution names, module names or module objects--basically anything that parse_module can understand.<div class="spacer">
</div>
See the equivalent method in &quot;CPANPLUS::Module&quot; for details on other options you can pass.<div class="spacer">
</div>
Since this is a multi-module method call, the return value is implemented as a &quot;CPANPLUS::Backend::RV&quot; object. Please consult that module's documentation on how to interpret the return value.</div>
<div class="subsection">
<h2>$backend_rv = $cb-&gt;files( modules =&gt; \@mods )</h2> Returns a list of files used by these modules if they are installed. @mods can be a list of distribution names, module names or module objects--basically anything that parse_module can understand.<div class="spacer">
</div>
See the equivalent method in &quot;CPANPLUS::Module&quot; for details on other options you can pass.<div class="spacer">
</div>
Since this is a multi-module method call, the return value is implemented as a &quot;CPANPLUS::Backend::RV&quot; object. Please consult that module's documentation on how to interpret the return value.</div>
<div class="subsection">
<h2>$backend_rv = $cb-&gt;distributions( modules =&gt; \@mods )</h2> Returns a list of module objects representing all releases for this module on success. @mods can be a list of distribution names, module names or module objects, basically anything that parse_module can understand.<div class="spacer">
</div>
See the equivalent method in &quot;CPANPLUS::Module&quot; for details on other options you can pass.<div class="spacer">
</div>
Since this is a multi-module method call, the return value is implemented as a &quot;CPANPLUS::Backend::RV&quot; object. Please consult that module's documentation on how to interpret the return value.</div>
<div class="subsection">
<h2>$mod_obj = $cb-&gt;parse_module( module =&gt; $modname|$distname|$modobj|URI|PATH )</h2> &quot;parse_module&quot; tries to find a &quot;CPANPLUS::Module&quot; object that matches your query. Here's a list of examples you could give to &quot;parse_module&quot;;<dl>
<dt>
Text::Bastardize</dt>
<dd>
</dd>
</dl>
<dl>
<dt>
Text-Bastardize</dt>
<dd>
</dd>
</dl>
<dl>
<dt>
Text-Bastardize-1.06</dt>
<dd>
</dd>
</dl>
<dl>
<dt>
AYRNIEU/Text-Bastardize</dt>
<dd>
</dd>
</dl>
<dl>
<dt>
AYRNIEU/Text-Bastardize-1.06</dt>
<dd>
</dd>
</dl>
<dl>
<dt>
AYRNIEU/Text-Bastardize-1.06.tar.gz</dt>
<dd>
</dd>
</dl>
<dl>
<dt>
http://example.com/Text-Bastardize-1.06.tar.gz</dt>
<dd>
</dd>
</dl>
<dl>
<dt>
file:///tmp/Text-Bastardize-1.06.tar.gz</dt>
<dd>
</dd>
</dl>
<dl>
<dt>
/tmp/Text-Bastardize-1.06</dt>
<dd>
</dd>
</dl>
<dl>
<dt>
./Text-Bastardize-1.06</dt>
<dd>
</dd>
</dl>
<dl>
<dt>
.</dt>
<dd>
</dd>
</dl>
<div class="spacer">
</div>
These items would all come up with a &quot;CPANPLUS::Module&quot; object for &quot;Text::Bastardize&quot;. The ones marked explicitly as being version 1.06 would give back a &quot;CPANPLUS::Module&quot; object of that version. Even if the version on CPAN is currently higher.<div class="spacer">
</div>
The last three are examples of PATH resolution. In the first, we supply an absolute path to the unwrapped distribution. In the second the distribution is relative to the current working directory. In the third, we will use the current working directory.<div class="spacer">
</div>
If &quot;parse_module&quot; is unable to actually find the module you are looking for in its module tree, but you supplied it with an author, module and version part in a distribution name or URI, it will create a fake &quot;CPANPLUS::Module&quot; object for you, that you can use just like the real thing.<div class="spacer">
</div>
See CPANPLUS::Module for the operations you can perform on a module object.<div class="spacer">
</div>
If even this fancy guessing doesn't enable &quot;parse_module&quot; to create a fake module object for you to use, it will warn about an error and return false.</div>
<div class="subsection">
<h2>$bool = $cb-&gt;reload_indices( [update_source =&gt; BOOL, verbose =&gt; BOOL] );</h2> This method reloads the source files.<div class="spacer">
</div>
If &quot;update_source&quot; is set to true, this will fetch new source files from your CPAN mirror. Otherwise, &quot;reload_indices&quot; will do its usual cache checking and only update them if they are out of date.<div class="spacer">
</div>
By default, &quot;update_source&quot; will be false.<div class="spacer">
</div>
The verbose setting defaults to what you have specified in your config file.<div class="spacer">
</div>
Returns true on success and false on failure.</div>
<div class="subsection">
<h2>$bool = $cb-&gt;flush(CACHE_NAME)</h2> This method allows flushing of caches. There are several things which can be flushed:<dl>
<dt>
&#8226;</dt>
<dd>
&quot;methods&quot;<div style="height: 1.00em;">
&#160;</div>
The return status of methods which have been attempted, such as different ways of fetching files.  It is recommended that automatic flushing be used instead.</dd>
</dl>
<dl>
<dt>
&#8226;</dt>
<dd>
&quot;hosts&quot;<div style="height: 1.00em;">
&#160;</div>
The return status of URIs which have been attempted, such as different hosts of fetching files.  It is recommended that automatic flushing be used instead.</dd>
</dl>
<dl>
<dt>
&#8226;</dt>
<dd>
&quot;modules&quot;<div style="height: 1.00em;">
&#160;</div>
Information about modules such as prerequisites and whether installation succeeded, failed, or was not attempted.</dd>
</dl>
<dl>
<dt>
&#8226;</dt>
<dd>
&quot;lib&quot;<div style="height: 1.00em;">
&#160;</div>
This resets PERL5LIB, which is changed to ensure that while installing modules they are in our @INC.</dd>
</dl>
<dl>
<dt>
&#8226;</dt>
<dd>
&quot;load&quot;<div style="height: 1.00em;">
&#160;</div>
This resets the cache of modules we've attempted to load, but failed. This enables you to load them again after a failed load, if they somehow have become available.</dd>
</dl>
<dl>
<dt>
&#8226;</dt>
<dd>
&quot;all&quot;<div style="height: 1.00em;">
&#160;</div>
Flush all of the aforementioned caches.</dd>
</dl>
<div class="spacer">
</div>
Returns true on success and false on failure.</div>
<div class="subsection">
<h2>@mods = $cb-&gt;<i>installed()</i></h2> Returns a list of module objects of all your installed modules. If an error occurs, it will return false.<div class="spacer">
</div>
See CPANPLUS::Module for the operations you can perform on a module object.</div>
<div class="subsection">
<h2>$bool = $cb-&gt;local_mirror([path =&gt; '/dir/to/save/to', index_files =&gt; BOOL, force =&gt; BOOL, verbose =&gt; BOOL] )</h2> Creates a local mirror of CPAN, of only the most recent sources in a location you specify. If you set this location equal to a custom host in your &quot;CPANPLUS::Config&quot; you can use your local mirror to install from.<div class="spacer">
</div>
It takes the following arguments:<dl>
<dt>
path</dt>
<dd>
The location where to create the local mirror.</dd>
</dl>
<dl>
<dt>
index_files</dt>
<dd>
Enable/disable fetching of index files. You can disable fetching of the index files if you don't plan to use the local mirror as your primary site, or if you'd like up-to-date index files be fetched from elsewhere.<div style="height: 1.00em;">
&#160;</div>
Defaults to true.</dd>
</dl>
<dl>
<dt>
force</dt>
<dd>
Forces refetching of packages, even if they are there already.<div style="height: 1.00em;">
&#160;</div>
Defaults to whatever setting you have in your &quot;CPANPLUS::Config&quot;.</dd>
</dl>
<dl>
<dt>
verbose</dt>
<dd>
Prints more messages about what its doing.<div style="height: 1.00em;">
&#160;</div>
Defaults to whatever setting you have in your &quot;CPANPLUS::Config&quot;.</dd>
</dl>
<div class="spacer">
</div>
Returns true on success and false on error.</div>
<div class="subsection">
<h2>$file = $cb-&gt;autobundle([path =&gt; OUTPUT_PATH, force =&gt; BOOL, verbose =&gt; BOOL])</h2> Writes out a snapshot of your current installation in &quot;CPAN&quot; bundle style. This can then be used to install the same modules for a different or on a different machine by issuing the following commands:<div class="spacer">
</div>
<br/>
    ### using the default shell:<br/>
    CPAN Terminal&gt; i file://path/to/Snapshot_XXYY.pm<br/>
    <br/>
    ### using the API<br/>
    $modobj = $cb-&gt;parse_module( module =&gt; 'file://path/to/Snapshot_XXYY.pm' );<br/>
    $modobj-&gt;install;<br/>
<div class="spacer">
</div>
It will, by default, write to an 'autobundle' directory under your cpanplus homedirectory, but you can override that by supplying a &quot;path&quot; argument.<div class="spacer">
</div>
It will return the location of the output file on success and false on failure.</div>
<div class="subsection">
<h2>$bool = $cb-&gt;save_state</h2> Explicit command to save memory state to disk. This can be used to save information to disk about where a module was extracted, the result of &quot;make test&quot;, etc. This will then be re-loaded into memory when a new session starts.<div class="spacer">
</div>
The capability of saving state to disk depends on the source engine being used (See &quot;CPANPLUS::Config&quot; for the option to choose your source engine). The default storage engine supports this option.<div class="spacer">
</div>
Most users will not need this command, but it can handy for automated systems like setting up CPAN smoke testers.<div class="spacer">
</div>
The method will return true if it managed to save the state to disk, or false if it did not.</div>
</div>
<div class="section">
<h1>CUSTOM MODULE SOURCES</h1> Besides the sources as provided by the general &quot;CPAN&quot; mirrors, it's possible to add your own sources list to your &quot;CPANPLUS&quot; index.<div class="spacer">
</div>
The methodology behind this works much like &quot;Debian's apt-sources&quot;.<div class="spacer">
</div>
The methods below show you how to make use of this functionality. Also note that most of these methods are available through the default shell plugin command &quot;/cs&quot;, making them available as shortcuts through the shell and via the commandline.<div class="subsection">
<h2>%files = $cb-&gt;list_custom_sources</h2> Returns a mapping of registered custom sources and their local indices as follows:<div class="spacer">
</div>
<br/>
    /full/path/to/local/index =&gt; http://remote/source<br/>
<div class="spacer">
</div>
Note that any file starting with an &quot;#&quot; is being ignored.</div>
<div class="subsection">
<h2>$local_index = $cb-&gt;add_custom_source( uri =&gt; URI, [verbose =&gt; BOOL] );</h2> Adds an &quot;URI&quot; to your own sources list and mirrors its index. See the documentation on &quot;$cb-&gt;update_custom_source&quot; on how this is done.<div class="spacer">
</div>
Returns the full path to the local index on success, or false on failure.<div class="spacer">
</div>
Note that when adding a new &quot;URI&quot;, the change to the in-memory tree is not saved until you rebuild or save the tree to disk again. You can do this using the &quot;$cb-&gt;reload_indices&quot; method.</div>
<div class="subsection">
<h2>$local_index = $cb-&gt;remove_custom_source( uri =&gt; URI, [verbose =&gt; BOOL] );</h2> Removes an &quot;URI&quot; from your own sources list and removes its index.<div class="spacer">
</div>
To find out what &quot;URI&quot;s you have as part of your own sources list, use the &quot;$cb-&gt;list_custom_sources&quot; method.<div class="spacer">
</div>
Returns the full path to the deleted local index file on success, or false on failure.</div>
<div class="subsection">
<h2>$bool = $cb-&gt;update_custom_source( [remote =&gt; URI] );</h2> Updates the indexes for all your custom sources. It does this by fetching a file called &quot;packages.txt&quot; in the root of the custom sources's &quot;URI&quot;. If you provide the &quot;remote&quot; argument, it will only update the index for that specific &quot;URI&quot;.<div class="spacer">
</div>
Here's an example of how custom sources would resolve into index files:<div class="spacer">
</div>
<br/>
  file:///path/to/sources       =&gt;  file:///path/to/sources/packages.txt<br/>
  http://example.com/sources    =&gt;  http://example.com/sources/packages.txt<br/>
  ftp://example.com/sources     =&gt;  ftp://example.com/sources/packages.txt<br/>
<div class="spacer">
</div>
The file &quot;packages.txt&quot; simply holds a list of packages that can be found under the root of the &quot;URI&quot;. This file can be automatically generated for you when the remote source is a &quot;file:// URI&quot;. For &quot;http://&quot;, &quot;ftp://&quot;, and similar, the administrator of that repository should run the method &quot;$cb-&gt;write_custom_source_index&quot; on the repository to allow remote users to index it.<div class="spacer">
</div>
For details, see the &quot;$cb-&gt;write_custom_source_index&quot; method below.<div class="spacer">
</div>
All packages that are added via this mechanism will be attributed to the author with &quot;CPANID&quot; &quot;LOCAL&quot;. You can use this id to search for all added packages.</div>
<div class="subsection">
<h2>$file = $cb-&gt;write_custom_source_index( path =&gt; /path/to/package/root, [to =&gt; /path/to/index/file, verbose =&gt; BOOL] );</h2> Writes the index for a custom repository root. Most users will not have to worry about this, but administrators of a repository will need to make sure their indexes are up to date.<div class="spacer">
</div>
The index will be written to a file called &quot;packages.txt&quot; in your repository root, which you can specify with the &quot;path&quot; argument. You can override this location by specifying the &quot;to&quot; argument, but in normal operation, that should not be required.<div class="spacer">
</div>
Once the index file is written, users can then add the &quot;URI&quot; pointing to the repository to their custom list of sources and start using it right away. See the &quot;$cb-&gt;add_custom_source&quot; method for user details.</div>
</div>
<div class="section">
<h1>BUG REPORTS</h1> Please report bugs or other issues to &lt;bug-cpanplus@rt.cpan.org&lt;gt&gt;.</div>
<div class="section">
<h1>AUTHOR</h1> This module by Jos Boumans &lt;kane@cpan.org&gt;.</div>
<div class="section">
<h1>COPYRIGHT</h1> The CPAN++ interface (of which this module is a part of) is copyright (c) 2001 - 2007, Jos Boumans &lt;kane@cpan.org&gt;. All rights reserved.<div class="spacer">
</div>
This library is free software; you may redistribute and/or modify it under the same terms as Perl itself.</div>
<div class="section">
<h1>SEE ALSO</h1> CPANPLUS::Configure, CPANPLUS::Module, CPANPLUS::Module::Author, CPANPLUS::Selfupdate</div>
<table class="foot">
<tr>
<td class="foot-date">
2011-09-26</td>
<td class="foot-os">
perl v5.14.2</td>
</tr>
</table>
</div>
</body>
</html>

