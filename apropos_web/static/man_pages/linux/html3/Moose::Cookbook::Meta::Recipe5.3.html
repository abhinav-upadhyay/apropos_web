<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/linux/style.css" type="text/css" media="all"/>
<title>
Moose::Cookbook::Meta::Recipe5(3pm)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
Moose::Cookbook::Meta::Recipe5(3pm)</td>
<td class="head-vol">
User Contributed Perl Documentation</td>
<td class="head-rtitle">
Moose::Cookbook::Meta::Recipe5(3pm)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>NAME</h1> Moose::Cookbook::Meta::Recipe5 - The &quot;table&quot; attribute as a metaclass trait</div>
<div class="section">
<h1>VERSION</h1> version 2.0401</div>
<div class="section">
<h1>SYNOPSIS</h1><br/>
  package MyApp::Meta::Class::Trait::HasTable;<br/>
  use Moose::Role;<br/>
<br/>
  has table =&gt; (<br/>
      is  =&gt; 'rw',<br/>
      isa =&gt; 'Str',<br/>
  );<br/>
<br/>
  package Moose::Meta::Class::Custom::Trait::HasTable;<br/>
  sub register_implementation { 'MyApp::Meta::Class::Trait::HasTable' }<br/>
<br/>
  package MyApp::User;<br/>
  use Moose -traits =&gt; 'HasTable';<br/>
<br/>
  __PACKAGE__-&gt;meta-&gt;table('User');<br/>
</div>
<div class="section">
<h1>DESCRIPTION</h1> This recipe takes the metaclass table attribute from Moose::Cookbook::Meta::Recipe4 and implements it as a metaclass trait. Traits are just roles, as we saw in Moose::Cookbook::Meta::Recipe3.<div class="spacer">
</div>
The advantage of using traits is that it's easy to combine multiple traits, whereas combining multiple metaclass subclasses requires creating yet another subclass. With traits, Moose takes care of applying them to your metaclass.<div class="subsection">
<h2>Using this Metaclass Trait in Practice</h2> Once this trait has been applied to a metaclass, it looks exactly like the example we saw in Moose::Cookbook::Meta::Recipe4:<div class="spacer">
</div>
<br/>
  my $table = MyApp::User-&gt;meta-&gt;table;<br/>
<br/>
  # the safe version<br/>
  $table = MyApp::User-&gt;meta-&gt;table<br/>
      if MyApp::User-&gt;meta-&gt;meta-&gt;can('does')<br/>
         and MyApp::User-&gt;meta-&gt;meta-&gt;does('MyApp::Meta::Class');<br/>
<div class="spacer">
</div>
The safe version is a little complicated. We have to check that the metaclass object's metaclass has a &quot;does&quot; method, in which case we can ask if the the metaclass does a given role.<div class="spacer">
</div>
It's simpler to just write:<div class="spacer">
</div>
<br/>
  $table = MyApp::User-&gt;meta-&gt;table<br/>
      if MyApp::User-&gt;meta-&gt;can('table');<br/>
<div class="spacer">
</div>
In theory, this is a little less correct, since the metaclass might be getting its &quot;table&quot; method from a  <i>different</i> role. In practice, you are unlikely to encounter this sort of problem.</div>
</div>
<div class="section">
<h1>SEE ALSO</h1> Moose::Cookbook::Meta::Recipe3 - Labels implemented via attribute traits<div class="spacer">
</div>
Moose::Cookbook::Meta::Recipe4 - Adding a &quot;table&quot; attribute to the metaclass</div>
<div class="section">
<h1>AUTHOR</h1> Moose is maintained by the Moose Cabal, along with the help of many contributors. See &quot;CABAL&quot; in Moose and &quot;CONTRIBUTORS&quot; in Moose for details.</div>
<div class="section">
<h1>COPYRIGHT AND LICENSE</h1> This software is copyright (c) 2011 by Infinity Interactive, Inc..<div class="spacer">
</div>
This is free software; you can redistribute it and/or modify it under the same terms as the Perl 5 programming language system itself.</div>
<table class="foot">
<tr>
<td class="foot-date">
2011-11-17</td>
<td class="foot-os">
perl v5.14.2</td>
</tr>
</table>
</div>
</body>
</html>

