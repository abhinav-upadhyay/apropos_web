<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/linux/style.css" type="text/css" media="all"/>
<title>
Package::Stash(3pm)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
Package::Stash(3pm)</td>
<td class="head-vol">
User Contributed Perl Documentation</td>
<td class="head-rtitle">
Package::Stash(3pm)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>NAME</h1> Package::Stash - routines for manipulating stashes</div>
<div class="section">
<h1>VERSION</h1> version 0.33</div>
<div class="section">
<h1>SYNOPSIS</h1><br/>
  my $stash = Package::Stash-&gt;new('Foo');<br/>
  $stash-&gt;add_symbol('%foo', {bar =&gt; 1});<br/>
  # $Foo::foo{bar} == 1<br/>
  $stash-&gt;has_symbol('$foo') # false<br/>
  my $namespace = $stash-&gt;namespace;<br/>
  *{ $namespace-&gt;{foo} }{HASH} # {bar =&gt; 1}<br/>
</div>
<div class="section">
<h1>DESCRIPTION</h1> Manipulating stashes (Perl's symbol tables) is occasionally necessary, but incredibly messy, and easy to get wrong. This module hides all of that behind a simple API.<div class="spacer">
</div>
NOTE: Most methods in this class require a variable specification that includes a sigil. If this sigil is absent, it is assumed to represent the IO slot.<div class="spacer">
</div>
Due to limitations in the typeglob API available to perl code, and to typeglob manipulation in perl being quite slow, this module provides two implementations - one in pure perl, and one using XS. The XS implementation is to be preferred for most usages; the pure perl one is provided for cases where XS modules are not a possibility. The current implementation in use can be set by setting $ENV{PACKAGE_STASH_IMPLEMENTATION} or $Package::Stash::IMPLEMENTATION before loading Package::Stash (with the environment variable taking precedence), otherwise, it will use the XS implementation if possible, falling back to the pure perl one.</div>
<div class="section">
<h1>METHODS</h1><div class="subsection">
<h2>new $package_name</h2> Creates a new &quot;Package::Stash&quot; object, for the package given as the only argument.</div>
<div class="subsection">
<h2>name</h2> Returns the name of the package that this object represents.</div>
<div class="subsection">
<h2>namespace</h2> Returns the raw stash itself.</div>
<div class="subsection">
<h2>add_symbol $variable $value %opts</h2> Adds a new package symbol, for the symbol given as $variable, and optionally gives it an initial value of $value. $variable should be the name of variable including the sigil, so<div class="spacer">
</div>
<br/>
  Package::Stash-&gt;new('Foo')-&gt;add_symbol('%foo')<br/>
<div class="spacer">
</div>
will create %Foo::foo.<div class="spacer">
</div>
Valid options (all optional) are &quot;filename&quot;, &quot;first_line_num&quot;, and &quot;last_line_num&quot;.<div class="spacer">
</div>
$opts{filename}, $opts{first_line_num}, and $opts{last_line_num} can be used to indicate where the symbol should be regarded as having been defined. Currently these values are only used if the symbol is a subroutine ('&quot;&amp;&quot;' sigil) and only if &quot;$^P &amp; 0x10&quot; is true, in which case the special %DB::sub hash is updated to record the values of &quot;filename&quot;, &quot;first_line_num&quot;, and &quot;last_line_num&quot; for the subroutine. If these are not passed, their values are inferred (as much as possible) from &quot;caller&quot; information.<div class="spacer">
</div>
This is especially useful for debuggers and profilers, which use %DB::sub to determine where the source code for a subroutine can be found.  See http://perldoc.perl.org/perldebguts.html#Debugger-Internals &lt;http://perldoc.perl.org/perldebguts.html#Debugger-Internals&gt; for more information about %DB::sub.</div>
<div class="subsection">
<h2>remove_glob $name</h2> Removes all package variables with the given name, regardless of sigil.</div>
<div class="subsection">
<h2>has_symbol $variable</h2> Returns whether or not the given package variable (including sigil) exists.</div>
<div class="subsection">
<h2>get_symbol $variable</h2> Returns the value of the given package variable (including sigil).</div>
<div class="subsection">
<h2>get_or_add_symbol $variable</h2> Like &quot;get_symbol&quot;, except that it will return an empty hashref or arrayref if the variable doesn't exist.</div>
<div class="subsection">
<h2>remove_symbol $variable</h2> Removes the package variable described by $variable (which includes the sigil); other variables with the same name but different sigils will be untouched.</div>
<div class="subsection">
<h2>list_all_symbols $type_filter</h2> Returns a list of package variable names in the package, without sigils. If a &quot;type_filter&quot; is passed, it is used to select package variables of a given type, where valid types are the slots of a typeglob ('SCALAR', 'CODE', 'HASH', etc). Note that if the package contained any &quot;BEGIN&quot; blocks, perl will leave an empty typeglob in the &quot;BEGIN&quot; slot, so this will show up if no filter is used (and similarly for &quot;INIT&quot;, &quot;END&quot;, etc).</div>
<div class="subsection">
<h2>get_all_symbols $type_filter</h2> Returns a hashref, keyed by the variable names in the package. If $type_filter is passed, the hash will contain every variable of that type in the package as values, otherwise, it will contain the typeglobs corresponding to the variable names (basically, a clone of the stash).</div>
</div>
<div class="section">
<h1>BUGS / CAVEATS</h1><dl>
<dt>
&#8226;</dt>
<dd>
Prior to perl 5.10, scalar slots are only considered to exist if they are defined<div style="height: 1.00em;">
&#160;</div>
This is due to a shortcoming within perl itself. See &quot;Making References&quot; in perlref point 7 for more information.</dd>
</dl>
<dl>
<dt>
&#8226;</dt>
<dd>
GLOB and FORMAT variables are not (yet) accessible through this module.</dd>
</dl>
<dl>
<dt>
&#8226;</dt>
<dd>
Also, see the BUGS section for the specific backends (Package::Stash::XS and Package::Stash::PP)</dd>
</dl>
<div class="spacer">
</div>
Please report any bugs through RT: email &quot;bug-package-stash at rt.cpan.org&quot;, or browse to http://rt.cpan.org/NoAuth/ReportBug.html?Queue=Package-Stash &lt;http://rt.cpan.org/NoAuth/ReportBug.html?Queue=Package-Stash&gt;.</div>
<div class="section">
<h1>SUPPORT</h1> You can find this documentation for this module with the perldoc command.<div class="spacer">
</div>
<br/>
    perldoc Package::Stash<br/>
<div class="spacer">
</div>
You can also look for information at:<dl>
<dt>
&#8226;</dt>
<dd>
AnnoCPAN: Annotated CPAN documentation<div style="height: 1.00em;">
&#160;</div>
http://annocpan.org/dist/Package-Stash &lt;http://annocpan.org/dist/Package-Stash&gt;</dd>
</dl>
<dl>
<dt>
&#8226;</dt>
<dd>
CPAN Ratings<div style="height: 1.00em;">
&#160;</div>
http://cpanratings.perl.org/d/Package-Stash &lt;http://cpanratings.perl.org/d/Package-Stash&gt;</dd>
</dl>
<dl>
<dt>
&#8226;</dt>
<dd>
RT: CPAN's request tracker<div style="height: 1.00em;">
&#160;</div>
http://rt.cpan.org/NoAuth/Bugs.html?Dist=Package-Stash &lt;http://rt.cpan.org/NoAuth/Bugs.html?Dist=Package-Stash&gt;</dd>
</dl>
<dl>
<dt>
&#8226;</dt>
<dd>
Search CPAN<div style="height: 1.00em;">
&#160;</div>
http://search.cpan.org/dist/Package-Stash &lt;http://search.cpan.org/dist/Package-Stash&gt;</dd>
</dl>
</div>
<div class="section">
<h1>AUTHOR</h1> Jesse Luehrs &lt;doy at tozt dot net&gt;<div class="spacer">
</div>
Based on code from Class::MOP::Package, by Stevan Little and the Moose Cabal.</div>
<div class="section">
<h1>SEE ALSO</h1><dl>
<dt>
&#8226;</dt>
<dd>
Class::MOP::Package<div style="height: 1.00em;">
&#160;</div>
This module is a factoring out of code that used to live here</dd>
</dl>
</div>
<div class="section">
<h1>COPYRIGHT AND LICENSE</h1> This software is copyright (c) 2011 by Jesse Luehrs.<div class="spacer">
</div>
This is free software; you can redistribute it and/or modify it under the same terms as the Perl 5 programming language system itself.</div>
<table class="foot">
<tr>
<td class="foot-date">
2011-09-28</td>
<td class="foot-os">
perl v5.12.4</td>
</tr>
</table>
</div>
</body>
</html>

