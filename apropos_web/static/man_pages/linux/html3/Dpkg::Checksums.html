<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/linux/style.css" type="text/css" media="all"/>
<title>
Dpkg::Checksums(3)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
Dpkg::Checksums(3)</td>
<td class="head-vol">
libdpkg-perl</td>
<td class="head-rtitle">
Dpkg::Checksums(3)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>NAME</h1> Dpkg::Checksums - generate and manipulate file checksums</div>
<div class="section">
<h1>DESCRIPTION</h1> This module provides an object that can generate and manipulate various file checksums as well as some methods to query information about supported checksums.</div>
<div class="section">
<h1>EXPORTED FUNCTIONS</h1><dl>
<dt>
@list = <i>checksums_get_list()</i></dt>
<dd>
Returns the list of supported checksums algorithms.</dd>
</dl>
<dl>
<dt>
$bool = checksums_is_supported($alg)</dt>
<dd>
Returns a boolean indicating whether the given checksum algorithm is supported. The checksum algorithm is case-insensitive.</dd>
</dl>
<dl>
<dt>
$value = checksums_get_property($alg, $property)</dt>
<dd>
Returns the requested property of the checksum algorithm. Returns undef if either the property or the checksum algorithm doesn't exist. Valid properties currently include &quot;program&quot; (returns an array reference with a program name and parameters required to compute the checksum of the filename given as last parameter) and &quot;regex&quot; for the regular expression describing the common string representation of the checksum (as output by the program that generates it).</dd>
</dl>
</div>
<div class="section">
<h1>OBJECT METHODS</h1><dl>
<dt>
my $ck = Dpkg::Checksums-&gt;<i>new()</i></dt>
<dd>
Create a new Dpkg::Checksums object. This object is able to store the checksums of several files to later export them or verify them.</dd>
</dl>
<dl>
<dt>
$ck-&gt;<i>reset()</i></dt>
<dd>
Forget about all checksums stored. The object is again in the same state as if it was newly created.</dd>
</dl>
<dl>
<dt>
$ck-&gt;add_from_file($filename, %opts)</dt>
<dd>
Add checksums information for the file $filename. The file must exists for the call to succeed. If you don't want the given filename to appear when you later export the checksums you might want to set the &quot;key&quot; option with the public name that you want to use. Also if you don't want to generate all the checksums, you can pass an array reference of the wanted checksums in the &quot;checksums&quot; option.<div style="height: 1.00em;">
&#160;</div>
It the object already contains checksums information associated the filename (or key), it will error out if the newly computed information does not match what's stored.</dd>
</dl>
<dl>
<dt>
$ck-&gt;add_from_string($alg, $value)</dt>
<dd>
Add checksums of type $alg that are stored in the $value variable. $value can be multi-lines, each line should be a space separated list of checksum, file size and filename. Leading or trailing spaces are not allowed.<div style="height: 1.00em;">
&#160;</div>
It the object already contains checksums information associated to the filenames, it will error out if the newly read information does not match what's stored.</dd>
</dl>
<dl>
<dt>
$ck-&gt;add_from_control($control, %opts)</dt>
<dd>
Read checksums from Checksums-* fields stored in the Dpkg::Control object $control. It uses $self-&gt; <i>add_from_string()</i> on the field values to do the actual work.<div style="height: 1.00em;">
&#160;</div>
If the option &quot;use_files_for_md5&quot; evaluates to true, then the &quot;Files&quot; field is used in place of the &quot;Checksums-Md5&quot; field. By default the option is false.</dd>
</dl>
<dl>
<dt>
@files = $ck-&gt;<i>get_files()</i></dt>
<dd>
Return the list of files whose checksums are stored in the object.</dd>
</dl>
<dl>
<dt>
$bool = $ck-&gt;has_file($file)</dt>
<dd>
Return true if we have checksums for the given file. Returns false otherwise.</dd>
</dl>
<dl>
<dt>
$ck-&gt;remove_file($file)</dt>
<dd>
Remove all checksums of the given file.</dd>
</dl>
<dl>
<dt>
$checksum = $ck-&gt;get_checksum($file, $alg)</dt>
<dd>
Return the checksum of type $alg for the requested $file. This will not compute the checksum but only return the checksum stored in the object, if any.<div style="height: 1.00em;">
&#160;</div>
If $alg is not defined, it returns a reference to a hash: keys are the checksum algorithms and values are the checksums themselves. The hash returned must not be modified, it's internal to the object.</dd>
</dl>
<dl>
<dt>
$size = $ck-&gt;get_size($file)</dt>
<dd>
Return the size of the requested file if it's available in the object.</dd>
</dl>
<dl>
<dt>
$ck-&gt;export_to_string($alg, %opts)</dt>
<dd>
Return a multi-line string containing the checksums of type $alg. The string can be stored as-is in a Checksum-* field of a Dpkg::Control object.</dd>
</dl>
<dl>
<dt>
$ck-&gt;export_to_control($control, %opts)</dt>
<dd>
Export the checksums in the Checksums-* fields of the Dpkg::Control $control object.</dd>
</dl>
</div>
<div class="section">
<h1>AUTHOR</h1> Rapha&#235;l Hertzog &lt;hertzog@debian.org&gt;.</div>
<table class="foot">
<tr>
<td class="foot-date">
2010-05-20</td>
<td class="foot-os">
1.16.1.2</td>
</tr>
</table>
</div>
</body>
</html>

