<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/linux/style.css" type="text/css" media="all"/>
<title>
X509_STORE_CTX_new(3SSL)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
X509_STORE_CTX_new(3SSL)</td>
<td class="head-vol">
OpenSSL</td>
<td class="head-rtitle">
X509_STORE_CTX_new(3SSL)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>NAME</h1> X509_STORE_CTX_new, X509_STORE_CTX_cleanup, X509_STORE_CTX_free, X509_STORE_CTX_init, X509_STORE_CTX_trusted_stack, X509_STORE_CTX_set_cert, X509_STORE_CTX_set_chain, X509_STORE_CTX_set0_crls, X509_STORE_CTX_get0_param, X509_STORE_CTX_set0_param, X509_STORE_CTX_set_default - X509_STORE_CTX initialisation</div>
<div class="section">
<h1>SYNOPSIS</h1><br/>
 #include &lt;openssl/x509_vfy.h&gt;<br/>
<br/>
 X509_STORE_CTX *X509_STORE_CTX_new(void);<br/>
 void X509_STORE_CTX_cleanup(X509_STORE_CTX *ctx);<br/>
 void X509_STORE_CTX_free(X509_STORE_CTX *ctx);<br/>
<br/>
 int X509_STORE_CTX_init(X509_STORE_CTX *ctx, X509_STORE *store,<br/>
                         X509 *x509, STACK_OF(X509) *chain);<br/>
<br/>
 void X509_STORE_CTX_trusted_stack(X509_STORE_CTX *ctx, STACK_OF(X509) *sk);<br/>
<br/>
 void   X509_STORE_CTX_set_cert(X509_STORE_CTX *ctx,X509 *x);<br/>
 void   X509_STORE_CTX_set_chain(X509_STORE_CTX *ctx,STACK_OF(X509) *sk);<br/>
 void   X509_STORE_CTX_set0_crls(X509_STORE_CTX *ctx, STACK_OF(X509_CRL) *sk);<br/>
<br/>
 X509_VERIFY_PARAM *X509_STORE_CTX_get0_param(X509_STORE_CTX *ctx);<br/>
 void X509_STORE_CTX_set0_param(X509_STORE_CTX *ctx, X509_VERIFY_PARAM *param);<br/>
 int X509_STORE_CTX_set_default(X509_STORE_CTX *ctx, const char *name);<br/>
</div>
<div class="section">
<h1>DESCRIPTION</h1> These functions initialise an  <b>X509_STORE_CTX</b> structure for subsequent use by  <i>X509_verify_cert()</i>.<div class="spacer">
</div>
<i>X509_STORE_CTX_new()</i> returns a newly initialised <b>X509_STORE_CTX</b> structure.<div class="spacer">
</div>
<i>X509_STORE_CTX_cleanup()</i> internally cleans up an <b>X509_STORE_CTX</b> structure. The context can then be reused with an new call to  <i>X509_STORE_CTX_init()</i>.<div class="spacer">
</div>
<i>X509_STORE_CTX_free()</i> completely frees up <b>ctx</b>. After this call <b>ctx</b> is no longer valid.<div class="spacer">
</div>
<i>X509_STORE_CTX_init()</i> sets up <b>ctx</b> for a subsequent verification operation. It must be called before each call to  <i>X509_verify_cert()</i>, i.e. a <b>ctx</b> is only good for one call to  <i>X509_verify_cert()</i>; if you want to verify a second certificate with the same  <b>ctx</b> then you must call <i>X509_XTORE_CTX_cleanup()</i> and then  <i>X509_STORE_CTX_init()</i> again before the second call to  <i>X509_verify_cert()</i>. The trusted certificate store is set to <b>store</b>, the end entity certificate to be verified is set to  <b>x509</b> and a set of additional certificates (which will be untrusted but may be used to build the chain) in  <b>chain</b>. Any or all of the <b>store</b>, <b>x509</b> and <b>chain</b> parameters can be  <b>NULL</b>.<div class="spacer">
</div>
<i>X509_STORE_CTX_trusted_stack()</i> sets the set of trusted certificates of <b>ctx</b> to  <b>sk</b>. This is an alternative way of specifying trusted certificates instead of using an  <b>X509_STORE</b>.<div class="spacer">
</div>
<i>X509_STORE_CTX_set_cert()</i> sets the certificate to be vertified in <b>ctx</b> to  <b>x</b>.<div class="spacer">
</div>
<i>X509_STORE_CTX_set_chain()</i> sets the additional certificate chain used by <b>ctx</b> to  <b>sk</b>.<div class="spacer">
</div>
<i>X509_STORE_CTX_set0_crls()</i> sets a set of CRLs to use to aid certificate verification to  <b>sk</b>. These CRLs will only be used if CRL verification is enabled in the associated  <b>X509_VERIFY_PARAM</b> structure. This might be used where additional &quot;useful&quot; CRLs are supplied as part of a protocol, for example in a PKCS#7 structure.<div class="spacer">
</div>
X509_VERIFY_PARAM *<i>X509_STORE_CTX_get0_param()</i> retrieves an intenal pointer to the verification parameters associated with  <b>ctx</b>.<div class="spacer">
</div>
<i>X509_STORE_CTX_set0_param()</i> sets the intenal verification parameter pointer to  <b>param</b>. After this call <b>param</b> should not be used.<div class="spacer">
</div>
<i>X509_STORE_CTX_set_default()</i> looks up and sets the default verification method to  <b>name</b>. This uses the function <i>X509_VERIFY_PARAM_lookup()</i> to find an appropriate set of parameters from  <b>name</b>.</div>
<div class="section">
<h1>NOTES</h1> The certificates and CRLs in a store are used internally and should  <b>not</b> be freed up until after the associated  <b>X509_STORE_CTX</b> is freed. Legacy applications might implicitly use an  <b>X509_STORE_CTX</b> like this:<div class="spacer">
</div>
<br/>
  X509_STORE_CTX ctx;<br/>
  X509_STORE_CTX_init(&amp;ctx, store, cert, chain);<br/>
<div class="spacer">
</div>
this is <b>not</b> recommended in new applications they should instead do:<div class="spacer">
</div>
<br/>
  X509_STORE_CTX *ctx;<br/>
  ctx = X509_STORE_CTX_new();<br/>
  if (ctx == NULL)<br/>
        /* Bad error */<br/>
  X509_STORE_CTX_init(ctx, store, cert, chain);<br/>
</div>
<div class="section">
<h1>BUGS</h1> The certificates and CRLs in a context are used internally and should  <b>not</b> be freed up until after the associated  <b>X509_STORE_CTX</b> is freed. Copies should be made or reference counts increased instead.</div>
<div class="section">
<h1>RETURN VALUES</h1>  <i>X509_STORE_CTX_new()</i> returns an newly allocates context or <b>NULL</b> is an error occurred.<div class="spacer">
</div>
<i>X509_STORE_CTX_init()</i> returns 1 for success or 0 if an error occurred.<div class="spacer">
</div>
<i>X509_STORE_CTX_get0_param()</i> returns a pointer to an <b>X509_VERIFY_PARAM</b> structure or  <b>NULL</b> if an error occurred.<div class="spacer">
</div>
<i>X509_STORE_CTX_cleanup()</i>, <i>X509_STORE_CTX_free()</i>, <i>X509_STORE_CTX_trusted_stack()</i>,  <i>X509_STORE_CTX_set_cert()</i>, <i>X509_STORE_CTX_set_chain()</i>,  <i>X509_STORE_CTX_set0_crls()</i> and <i>X509_STORE_CTX_set0_param()</i> do not return values.<div class="spacer">
</div>
<i>X509_STORE_CTX_set_default()</i> returns 1 for success or 0 if an error occurred.</div>
<div class="section">
<h1>SEE ALSO</h1>  <i>X509_verify_cert</i>(3)  <i>X509_VERIFY_PARAM_set_flags</i>(3)</div>
<div class="section">
<h1>HISTORY</h1>  <i>X509_STORE_CTX_set0_crls()</i> was first added to OpenSSL 1.0.0</div>
<table class="foot">
<tr>
<td class="foot-date">
2016-02-29</td>
<td class="foot-os">
1.0.1</td>
</tr>
</table>
</div>
</body>
</html>

