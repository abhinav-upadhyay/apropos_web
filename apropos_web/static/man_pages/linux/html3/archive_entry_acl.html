<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/linux/style.css" type="text/css" media="all"/>
<title>
ARCHIVE_ENTRY_ACL(3)</title>
</head>
<body>
<div class="mandoc">
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">archive_entry_acl_add_entry</b>, <b class="name">archive_entry_acl_add_entry_w</b>, <b class="name">archive_entry_acl_clear</b>, <b class="name">archive_entry_acl_count</b>, <b class="name">archive_entry_acl_next</b>, <b class="name">archive_entry_acl_next_w</b>, <b class="name">archive_entry_acl_reset</b>, <b class="name">archive_entry_acl_text_w</b> &#8212; <span class="desc">functions for manipulating Access Control Lists in archive entry descriptions</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="includes">#include &lt;<a class="link-includes">archive_entry.h</a>&gt;</b><div class="spacer">
</div>
<i class="ftype">void</i><br/>
<b class="fname">archive_entry_acl_add_entry</b>(<i class="farg">struct archive_entry *a</i>, <i class="farg">int type</i>, <i class="farg">int permset</i>, <i class="farg">int tag</i>, <i class="farg">int qualifier</i>, <i class="farg">const char *name</i>);<div class="spacer">
</div>
<i class="ftype">void</i><br/>
<b class="fname">archive_entry_acl_add_entry_w</b>(<i class="farg">struct archive_entry *a</i>, <i class="farg">int type</i>, <i class="farg">int permset</i>, <i class="farg">int tag</i>, <i class="farg">int qualifier</i>, <i class="farg">const wchar_t *name</i>);<div class="spacer">
</div>
<i class="ftype">void</i><br/>
<b class="fname">archive_entry_acl_clear</b>(<i class="farg" style="white-space:nowrap;">struct archive_entry *a</i>);<div class="spacer">
</div>
<i class="ftype">int</i><br/>
<b class="fname">archive_entry_acl_count</b>(<i class="farg" style="white-space:nowrap;">struct archive_entry *a</i>, <i class="farg" style="white-space:nowrap;">int type</i>);<div class="spacer">
</div>
<i class="ftype">int</i><br/>
<b class="fname">archive_entry_acl_next</b>(<i class="farg">struct archive_entry *a</i>, <i class="farg">int type</i>, <i class="farg">int *ret_type</i>, <i class="farg">int *ret_permset</i>, <i class="farg">int *ret_tag</i>, <i class="farg">int *ret_qual</i>, <i class="farg">const char **ret_name</i>);<div class="spacer">
</div>
<i class="ftype">int</i><br/>
<b class="fname">archive_entry_acl_next_w</b>(<i class="farg">struct archive_entry *a</i>, <i class="farg">int type</i>, <i class="farg">int *ret_type</i>, <i class="farg">int *ret_permset</i>, <i class="farg">int *ret_tag</i>, <i class="farg">int *ret_qual</i>, <i class="farg">const wchar_t **ret_name</i>);<div class="spacer">
</div>
<i class="ftype">int</i><br/>
<b class="fname">archive_entry_acl_reset</b>(<i class="farg" style="white-space:nowrap;">struct archive_entry *a</i>, <i class="farg" style="white-space:nowrap;">int type</i>);<div class="spacer">
</div>
<i class="ftype">const wchar_t *</i><br/>
<b class="fname">archive_entry_acl_text_w</b>(<i class="farg" style="white-space:nowrap;">struct archive_entry *a</i>, <i class="farg" style="white-space:nowrap;">int flags</i>);</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> An &#8220;Access Control List&#8221; is a generalisation of the classic Unix permission system. The ACL interface of <b class="name">libarchive</b> is derived from the POSIX.1e draft, but restricted to simplify dealing with practical implementations in various Operating Systems and archive formats.<div class="spacer">
</div>
An ACL consists of a number of independent entries. Each entry specifies the permission set as bitmask of basic permissions. Valid permissions are:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 6.00ex;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
<span class="define">ARCHIVE_ENTRY_ACL_EXECUTE</span></dt>
<dd class="list-tag" style="margin-left: 25.00ex;">
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<span class="define">ARCHIVE_ENTRY_ACL_WRITE</span></dt>
<dd class="list-tag" style="margin-left: 25.00ex;">
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<span class="define">ARCHIVE_ENTRY_ACL_READ</span></dt>
<dd class="list-tag" style="margin-left: 25.00ex;">
</dd>
</dl>
The permissions correspond to the normal Unix permissions.<div class="spacer">
</div>
The tag specifies the principal to which the permission applies. Valid values are:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 6.00ex;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
<span class="define">ARCHIVE_ENTRY_ACL_USER</span></dt>
<dd class="list-tag" style="margin-left: 27.00ex;">
The user specified by the name field.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<span class="define">ARCHIVE_ENTRY_ACL_USER_OBJ</span></dt>
<dd class="list-tag" style="margin-left: 27.00ex;">
The owner of the file.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<span class="define">ARCHIVE_ENTRY_ACL_GROUP</span></dt>
<dd class="list-tag" style="margin-left: 27.00ex;">
The group specied by the name field.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<span class="define">ARCHIVE_ENTRY_ACL_GROUP_OBJ</span></dt>
<dd class="list-tag" style="margin-left: 27.00ex;">
The group who owns the file.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<span class="define">ARCHIVE_ENTRY_ACL_MASK</span></dt>
<dd class="list-tag" style="margin-left: 27.00ex;">
The maximum permissions to be obtained via group permissions.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<span class="define">ARCHIVE_ENTRY_ACL_OTHER</span></dt>
<dd class="list-tag" style="margin-left: 27.00ex;">
Any principal who doesn't have a user or group entry.</dd>
</dl>
The principals <span class="define">ARCHIVE_ENTRY_ACL_USER_OBJ</span>, <span class="define">ARCHIVE_ENTRY_ACL_GROUP_OBJ</span> and <span class="define">ARCHIVE_ENTRY_ACL_OTHER</span> are equivalent to user, group and other in the classic Unix permission model and specify non-extended ACL entries.<div class="spacer">
</div>
All files have an access ACL (<span class="define">ARCHIVE_ENTRY_ACL_TYPE_ACCESS</span>). This specifies the permissions required for access to the file itself. Directories have an additional ACL (<span class="define">ARCHIVE_ENTRY_ACL_TYPE_DEFAULT</span>), which controls the initial access ACL for newly created directory entries.<div class="spacer">
</div>
<b class="fname">archive_entry_acl_add_entry</b>() and <b class="fname">archive_entry_acl_add_entry_w</b>() add a single ACL entry. For the access ACL and non-extended principals, the classic Unix permissions are updated.<div class="spacer">
</div>
<b class="fname">archive_entry_acl_clear</b>() removes all ACL entries and resets the enumeration pointer.<div class="spacer">
</div>
<b class="fname">archive_entry_acl_count</b>() counts the ACL entries that have the given type mask. <i class="farg">type</i> can be the bitwise-or of <span class="define">ARCHIVE_ENTRY_ACL_TYPE_ACCESS</span> and <span class="define">ARCHIVE_ENTRY_ACL_TYPE_DEFAULT</span>. If <span class="define">ARCHIVE_ENTRY_ACL_TYPE_ACCESS</span> is included and at least one extended ACL entry is found, the three non-extened ACLs are added.<div class="spacer">
</div>
<b class="fname">archive_entry_acl_next</b>() and <b class="fname">archive_entry_acl_next_w</b>() return the next entry of the ACL list. This functions may only be called after <b class="fname">archive_entry_acl_reset</b>() has indicated the presence of extended ACL entries.<div class="spacer">
</div>
<b class="fname">archive_entry_acl_reset</b>() prepare reading the list of ACL entries with <b class="fname">archive_entry_acl_next</b>() or <b class="fname">archive_entry_acl_next_w</b>(). The function returns either 0, if no non-extended ACLs are found. In this case, the access permissions should be obtained by <a class="link-man" href="/man/linux/3/archive_entry_mode">archive_entry_mode(3)</a> or set using <a class="link-man" href="/man/linux/2/chmod">chmod(2)</a>. Otherwise, the function returns the same value as <b class="fname">archive_entry_acl_count</b>().<div class="spacer">
</div>
<b class="fname">archive_entry_acl_text_w</b>() converts the ACL entries for the given type mask into a wide string. In addition to the normal type flags, <span class="define">ARCHIVE_ENTRY_ACL_STYLE_EXTRA_ID</span> and <span class="define">ARCHIVE_ENTRY_ACL_STYLE_MARK_DEFAULT</span> can be specified to further customize the result. The returned long string is valid until the next call to <b class="fname">archive_entry_acl_clear</b>(), <b class="fname">archive_entry_acl_add_entry</b>(), <b class="fname">archive_entry_acl_add_entry_w</b>() or <b class="fname">archive_entry_acl_text_w</b>().</div>
<div class="section">
<h1 id="x52455455524e2056414c554553">RETURN VALUES</h1> <b class="fname">archive_entry_acl_count</b>() and <b class="fname">archive_entry_acl_reset</b>() returns the number of ACL entries that match the given type mask. If the type mask includes <span class="define">ARCHIVE_ENTRY_ACL_TYPE_ACCESS</span> and at least one extended ACL entry exists, the three classic Unix permissions are counted.<div class="spacer">
</div>
<b class="fname">archive_entry_acl_next</b>() and <b class="fname">archive_entry_acl_next_w</b>() return <span class="define">ARCHIVE_OK</span> on success, <span class="define">ARCHIVE_EOF</span> if no more ACL entries exist and <span class="define">ARCHIVE_WARN</span> if <b class="fname">archive_entry_acl_reset</b>() has not been called first.<div class="spacer">
</div>
<b class="fname">archive_entry_text_w</b>() returns a wide string representation of the ACL entrise matching the given type mask. The returned long string is valid until the next call to <b class="fname">archive_entry_acl_clear</b>(), <b class="fname">archive_entry_acl_add_entry</b>(), <b class="fname">archive_entry_acl_add_entry_w</b>() or <b class="fname">archive_entry_acl_text_w</b>().</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="/man/linux/3/archive">archive(3)</a>, <a class="link-man" href="/man/linux/3/archive_entry">archive_entry(3)</a></div>
<div class="section">
<h1 id="x42554753">BUGS</h1> <span class="define">ARCHIVE_ENTRY_ACL_STYLE_EXTRA_ID</span> and <span class="define">ARCHIVE_ENTRY_ACL_STYLE_MARK_DEFAULT</span> are not documented.</div>
</div>
</body>
</html>

