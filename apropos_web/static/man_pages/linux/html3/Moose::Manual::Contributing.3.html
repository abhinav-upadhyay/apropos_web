<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/linux/style.css" type="text/css" media="all"/>
<title>
Moose::Manual::Contributing(3pm)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
Moose::Manual::Contributing(3pm)</td>
<td class="head-vol">
User Contributed Perl Documentation</td>
<td class="head-rtitle">
Moose::Manual::Contributing(3pm)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>NAME</h1> Moose::Manual::Contributing - How to get involved in Moose</div>
<div class="section">
<h1>VERSION</h1> version 2.0401</div>
<div class="section">
<h1>GETTING INVOLVED</h1> Moose is an open project, and we are always willing to accept bug fixes, more tests, and documentation patches. Commit bits are given out freely, and the &quot;STANDARD WORKFLOW&quot; is very simple. The general gist is: clone the Git repository, create a new topic branch, hack away, then find a committer to review your changes.</div>
<div class="section">
<h1>NEW FEATURES</h1> Moose already has a fairly large feature set, and we are currently  <b>not</b> looking to add any major new features to it. If you have an idea for a new feature in Moose, you are encouraged to create a MooseX module first.<div class="spacer">
</div>
At this stage, no new features will even be considered for addition into the core without first being vetted as a MooseX module, unless it is absolutely 100% impossible to implement the feature outside the core.<div class="spacer">
</div>
If you think it is 100% impossible, please come discuss it with us on IRC or via e-mail. Your feature may need a small hook in the core, or a refactoring of some core modules, and we are definitely open to that.<div class="spacer">
</div>
Moose was built from the ground up with the idea of being highly extensible, and quite often the feature requests we see can be implemented through small extensions. Try it, it's much easier than you might think.</div>
<div class="section">
<h1>PEOPLE</h1> As Moose has matured, some structure has emerged in the process.<dl>
<dt>
Contributors - people creating a topic or branch</dt>
<dd>
You.<div style="height: 1.00em;">
&#160;</div>
If you have commit access, you can create a topic on the main Moose.git repository.  If you don't have a commit bit, give us your SSH key or create your own clone of the &lt;git://git.moose.perl.org/Moose.git&gt; repository.<div style="height: 1.00em;">
&#160;</div>
The relevant repository URIs are:</dd>
</dl>
<div style="margin-left: 4.00ex;">
<dl>
<dt>
Read-Only</dt>
<dd>
&lt;git://git.moose.perl.org/Moose.git&gt;</dd>
</dl>
<dl>
<dt>
Read+Write</dt>
<dd>
gitmo@git.moose.perl.org:Moose.git</dd>
</dl>
</div>
<div style="margin-left: 4.00ex;">
</div>
<dl>
<dt>
Cabal - people who can release moose</dt>
<dd>
These people are the ones who have co-maint on Moose itself and can create a release. They're listed under &quot;CABAL&quot; in Moose in the Moose documentation. They are responsible for reviewing branches, and are the only people who are allowed to push to stable branches.<div style="height: 1.00em;">
&#160;</div>
Cabal members are listed in Moose and can often be found on irc in the irc://irc.perl.org/#moose-dev &lt;irc://irc.perl.org/#moose-dev&gt; channel.</dd>
</dl>
</div>
<div class="section">
<h1>BRANCH LAYOUT</h1> The repository is divided into several branches to make maintenance easier for everyone involved. The branches below are ordered by level of stability.<dl>
<dt>
stable/*</dt>
<dd>
The branch from which releases are cut. When making a new major release, the release manager makes a new &quot;stable/X.YY&quot; branch at the current position of &quot;master&quot;. The version used in the stable branch should not include the last two digits of the version number.<div style="height: 1.00em;">
&#160;</div>
For minor releases, patches will be committed to &quot;master&quot;, and backported (cherry-picked) to the appropriate stable branch as needed. A stable branch is only updated by someone from the Cabal during a release.</dd>
</dl>
<dl>
<dt>
master</dt>
<dd>
The main development branch. All new code should be written against this branch. This branch contains code that has been reviewed, and will be included in the next major release. Commits which are judged to not break backwards compatibility may be backported into &quot;stable&quot; to be included in the next minor release.</dd>
</dl>
<dl>
<dt>
rfc/*</dt>
<dd>
Topic branches that are completed and waiting on review. A Cabal member will look over branches in this namespace, and either merge them to &quot;master&quot; if they are acceptable, or move them back to a different namespace otherwise.</dd>
</dl>
<dl>
<dt>
topic/*</dt>
<dd>
Small personal branches that are still in progress. They can be freely rebased. They contain targeted features that may span a handful of commits. Any change or bugfix should be created in a topic branch.</dd>
</dl>
<dl>
<dt>
attic/*</dt>
<dd>
Branches which have been reviewed, and rejected. They remain in the repository in case we later change our mind, or in case parts of them are still useful.</dd>
</dl>
<dl>
<dt>
abandoned/*</dt>
<dd>
Topic branches which have had no activity for a long period of time will be moved here, to keep the main areas clean.</dd>
</dl>
<div class="spacer">
</div>
Larger, longer term branches can also be created in the root namespace (i.e. at the same level as master and stable). This may be appropriate if multiple people are intending to work on the branch. These branches should not be rebased without checking with other developers first.</div>
<div class="section">
<h1>STANDARD WORKFLOW</h1><br/>
    # update your copy of master<br/>
    git checkout master<br/>
    git pull --rebase<br/>
<br/>
    # create a new topic branch<br/>
    git checkout -b topic/my-feature<br/>
<br/>
    # hack, commit, feel free to break fast forward<br/>
    git commit --amend        # allowed<br/>
    git rebase --interactive  # allowed<br/>
    git push --force          # allowed<br/>
<br/>
    # keep the branch rebased on top of master, for easy reviewing<br/>
    git remote update<br/>
    git rebase origin/master<br/>
    git push --force<br/>
<br/>
    # when finished, move the branch to the rfc/ namespace<br/>
    git branch -m rfc/my-feature<br/>
    git push<br/>
    git push origin :topic/my-feature<br/>
<div class="spacer">
</div>
When your branch is completed, make sure it has been moved to the &quot;rfc/&quot; namespace and is rebased on top of master, and ask for review/approval (see &quot;APPROVAL WORKFLOW&quot;). If it is approved, the reviewer will merge it into &quot;master&quot;.<div class="spacer">
</div>
No actual merging (as in a human resolving conflicts) should be done when merging into &quot;master&quot;, only from &quot;master&quot; into other branches.</div>
<div class="section">
<h1>APPROVAL WORKFLOW</h1> Moose is an open project but it is also an increasingly important one. Many modules depend on Moose being stable. Therefore, we have a basic set of criteria for reviewing and merging branches. What follows is a set of rough guidelines that ensures all new code is properly vetted before it is merged to the master branch.<div class="spacer">
</div>
It should be noted that if you want your specific branch to be approved, it is  <b>your</b> responsibility to follow this process and advocate for your branch. The preferred way is to send a request to the mailing list for review/approval; this allows us to better keep track of the branches awaiting approval and those which have been approved.<dl>
<dt>
Small bug fixes, doc patches and additional passing tests.</dt>
<dd>
These items don't really require approval beyond one of the core contributors just doing a simple review. For especially simple patches (doc patches especially), committing directly to master is fine.</dd>
</dl>
<dl>
<dt>
Larger bug fixes, doc additions and TODO or failing tests.</dt>
<dd>
Larger bug fixes should be reviewed by at least one cabal member and should be tested using the  <i>xt/author/test-my-dependents.t</i> test.<div style="height: 1.00em;">
&#160;</div>
New documentation is always welcome, but should also be reviewed by a cabal member for accuracy.<div style="height: 1.00em;">
&#160;</div>
TODO tests are basically feature requests, see our &quot;NEW FEATURES&quot; section for more information on that. If your feature needs core support, create a &quot;topic/&quot; branch using the &quot;STANDARD WORKFLOW&quot; and start hacking away.<div style="height: 1.00em;">
&#160;</div>
Failing tests are basically bug reports. You should find a core contributor and/or cabal member to see if it is a real bug, then submit the bug and your test to the RT queue. Source control is not a bug reporting tool.</dd>
</dl>
<dl>
<dt>
New user-facing features.</dt>
<dd>
Anything that creates a new user-visible feature needs to be approved by  <b>more than one</b> cabal member.<div style="height: 1.00em;">
&#160;</div>
Make sure you have reviewed &quot;NEW FEATURES&quot; to be sure that you are following the guidelines. Do not be surprised if a new feature is rejected for the core.</dd>
</dl>
<dl>
<dt>
New internals features.</dt>
<dd>
New features for Moose internals are less restrictive than user facing features, but still require approval by  <b>at least one</b> cabal member.<div style="height: 1.00em;">
&#160;</div>
Ideally you will have run the <i>test-my-dependents.t</i> script to be sure you are not breaking any MooseX module or causing any other unforeseen havoc. If you do this (rather than make us do it), it will only help to hasten your branch's approval.</dd>
</dl>
<dl>
<dt>
Backwards incompatible changes.</dt>
<dd>
Anything that breaks backwards compatibility must be discussed by the cabal. Backwards incompatible changes should not be merged to master if there are strong objections from any cabal members.<div style="height: 1.00em;">
&#160;</div>
We have a policy for what we see as sane &quot;BACKWARDS COMPATIBILITY&quot; for Moose. If your changes break back-compat, you must be ready to discuss and defend your change.</dd>
</dl>
</div>
<div class="section">
<h1>RELEASE WORKFLOW</h1><br/>
    # major releases (including trial releases)<br/>
    git checkout master<br/>
<br/>
    # minor releases<br/>
    git checkout stable/X.YY<br/>
<br/>
    # do final changelogging, etc<br/>
    vim dist.ini # increment version number<br/>
    git commit<br/>
    dzil release # or dzil release --trial for trial releases<br/>
    git commit # to add the actual release date<br/>
    git branch stable/X.YY # only for non-trial major releases<br/>
<div class="subsection">
<h2>Release How-To</h2> Moose uses Dist::Zilla to manage releases. Although the git repository comes with a &quot;Makefile.PL&quot;, it is a very basic one just to allow the basic &quot;perl Makefile.PL &amp;&amp; make &amp;&amp; make test&quot; cycle to work. In particular, it doesn't include any release metadata, such as dependencies. In order to get started with Dist::Zilla, first install it: &quot;cpanm Dist::Zilla&quot;, and then install the plugins necessary for reading the &quot;dist.ini&quot;: &quot;dzil authordeps | cpanm&quot;.<div class="spacer">
</div>
Moose releases fall into two categories, each with their own level of release preparation. A minor release is one which does not include any API changes, deprecations, and so on. In that case, it is sufficient to simply test the release candidate against a few different different Perls. Testing should be done against at least two recent major version of Perl (5.8.8 and 5.10.1, for example). If you have more versions available, you are encouraged to test them all. However, we do not put a lot of effort into supporting older 5.8.x releases.<div class="spacer">
</div>
For major releases which include an API change or deprecation, you should run the  <i>xt/author/test-my-dependents.t</i> test. This tests a long list of MooseX and other Moose-using modules from CPAN. In order to run this script, you must arrange to have the new version of Moose in Perl's include path. You can use &quot;prove -b&quot; and &quot;prove -I&quot;, install the module, or fiddle with the &quot;PERL5LIB&quot; environment variable, whatever makes you happy.<div class="spacer">
</div>
This test downloads each module from CPAN, runs its tests, and logs failures and warnings to a set of files named  <i>test-mydeps-$$-*.log</i>. If there are failures or warnings, please work with the authors of the modules in question to fix them. If the module author simply isn't available or does not want to fix the bug, it is okay to make a release.<div class="spacer">
</div>
Regardless of whether or not a new module is available, any breakages should be noted in the conflicts list in the distribution's  <i>dist.ini</i>.</div>
</div>
<div class="section">
<h1>EMERGENCY BUG WORKFLOW (for immediate release)</h1> The stable branch exists for easily making bug fix releases.<div class="spacer">
</div>
<br/>
    git remote update<br/>
    git checkout -b topic/my-emergency-fix origin/master<br/>
    # hack<br/>
    git commit<br/>
<div class="spacer">
</div>
Then a cabal member merges into &quot;master&quot;, and backports the change into &quot;stable/X.YY&quot;:<div class="spacer">
</div>
<br/>
    git checkout master<br/>
    git merge topic/my-emergency-fix<br/>
    git push<br/>
    git checkout stable/X.YY<br/>
    git cherry-pick -x master<br/>
    git push<br/>
    # release<br/>
</div>
<div class="section">
<h1>PROJECT WORKFLOW</h1> For longer lasting branches, we use a subversion style branch layout, where master is routinely merged into the branch. Rebasing is allowed as long as all the branch contributors are using &quot;git pull --rebase&quot; properly.<div class="spacer">
</div>
&quot;commit --amend&quot;, &quot;rebase --interactive&quot;, etc. are not allowed, and should only be done in topic branches. Committing to master is still done with the same review process as a topic branch, and the branch must merge as a fast forward.<div class="spacer">
</div>
This is pretty much the way we're doing branches for large-ish things right now.<div class="spacer">
</div>
Obviously there is no technical limitation on the number of branches. You can freely create topic branches off of project branches, or sub projects inside larger projects freely. Such branches should incorporate the name of the branch they were made off so that people don't accidentally assume they should be merged into master:<div class="spacer">
</div>
<br/>
    git checkout -b my-project--topic/foo my-project<br/>
<div class="spacer">
</div>
(unfortunately Git will not allow &quot;my-project/foo&quot; as a branch name if &quot;my-project&quot; is a valid ref).</div>
<div class="section">
<h1>BRANCH ARCHIVAL</h1> Merged branches should be deleted.<div class="spacer">
</div>
Failed branches may be kept, but should be moved to &quot;attic/&quot; to differentiate them from in-progress topic branches.<div class="spacer">
</div>
Branches that have not been worked on for a long time will be moved to &quot;abandoned/&quot; periodically, but feel free to move the branch back to &quot;topic/&quot; if you want to start working on it again.</div>
<div class="section">
<h1>TESTS, TESTS, TESTS</h1> If you write  <i>any</i> code for Moose, you <b>must</b> add tests for that code. If you do not write tests then we cannot guarantee your change will not be removed or altered at a later date, as there is nothing to confirm this is desired behavior.<div class="spacer">
</div>
If your code change/addition is deep within the bowels of Moose and your test exercises this feature in a non-obvious way, please add some comments either near the code in question or in the test so that others know.<div class="spacer">
</div>
We also greatly appreciate documentation to go with your changes, and an entry in the Changes file. Make sure to give yourself credit! Major changes or new user-facing features should also be documented in Moose::Manual::Delta.</div>
<div class="section">
<h1>DOCS, DOCS, DOCS</h1> Any user-facing changes must be accompanied by documentation. If you're not comfortable writing docs yourself, you might be able to convince another Moose dev to help you.<div class="spacer">
</div>
Our goal is to make sure that all features are documented. Undocumented features are not considered part of the API when it comes to determining whether a change is backwards compatible.</div>
<div class="section">
<h1>BACKWARDS COMPATIBILITY</h1> Change is inevitable, and Moose is not immune to this. We do our best to maintain backwards compatibility, but we do not want the code base to become overburdened by this. This is not to say that we will be frivolous with our changes, quite the opposite, just that we are not afraid of change and will do our best to keep it as painless as possible for the end user.<div class="spacer">
</div>
Our policy for handling backwards compatibility is documented in more detail in Moose::Manual::Support.<div class="spacer">
</div>
All backwards incompatible changes <b>must</b> be documented in Moose::Manual::Delta. Make sure to document any useful tips or workarounds for the change in that document.</div>
<div class="section">
<h1>AUTHOR</h1> Moose is maintained by the Moose Cabal, along with the help of many contributors. See &quot;CABAL&quot; in Moose and &quot;CONTRIBUTORS&quot; in Moose for details.</div>
<div class="section">
<h1>COPYRIGHT AND LICENSE</h1> This software is copyright (c) 2011 by Infinity Interactive, Inc..<div class="spacer">
</div>
This is free software; you can redistribute it and/or modify it under the same terms as the Perl 5 programming language system itself.</div>
<table class="foot">
<tr>
<td class="foot-date">
2011-11-17</td>
<td class="foot-os">
perl v5.14.2</td>
</tr>
</table>
</div>
</body>
</html>

