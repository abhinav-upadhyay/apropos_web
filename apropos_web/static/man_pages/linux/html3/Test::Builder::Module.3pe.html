<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/linux/style.css" type="text/css" media="all"/>
<title>
Test::Builder::Module(3perl)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
Test::Builder::Module(3perl)</td>
<td class="head-vol">
Perl Programmers Reference Guide</td>
<td class="head-rtitle">
Test::Builder::Module(3perl)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>NAME</h1> Test::Builder::Module - Base class for test modules</div>
<div class="section">
<h1>SYNOPSIS</h1><br/>
  # Emulates Test::Simple<br/>
  package Your::Module;<br/>
<br/>
  my $CLASS = __PACKAGE__;<br/>
<br/>
  use base 'Test::Builder::Module';<br/>
  @EXPORT = qw(ok);<br/>
<br/>
  sub ok ($;$) {<br/>
      my $tb = $CLASS-&gt;builder;<br/>
      return $tb-&gt;ok(@_);<br/>
  }<br/>
  <br/>
  1;<br/>
</div>
<div class="section">
<h1>DESCRIPTION</h1> This is a superclass for Test::Builder-based modules.  It provides a handful of common functionality and a method of getting at the underlying Test::Builder object.<div class="subsection">
<h2>Importing</h2> Test::Builder::Module is a subclass of Exporter which means your module is also a subclass of Exporter.  @EXPORT, @EXPORT_OK, etc... all act normally.<div class="spacer">
</div>
A few methods are provided to do the &quot;use Your::Module tests =&quot; 23&gt; part for you.<div class="spacer">
</div>
<i>import</i><div class="spacer">
</div>
Test::Builder::Module provides an <i>import()</i> method which acts in the same basic way as Test::More's, setting the plan and controlling exporting of functions and variables.  This allows your module to set the plan independent of Test::More.<div class="spacer">
</div>
All arguments passed to <i>import()</i> are passed onto &quot;Your::Module-&gt;builder-&gt;plan()&quot; with the exception of &quot;import =&gt;[qw(things to import)]&quot;.<div class="spacer">
</div>
<br/>
    use Your::Module import =&gt; [qw(this that)], tests =&gt; 23;<br/>
<div class="spacer">
</div>
says to import the functions <i>this()</i> and <i>that()</i> as well as set the plan to be 23 tests.<div class="spacer">
</div>
<i>import()</i> also sets the <i>exported_to()</i> attribute of your builder to be the caller of the  <i>import()</i> function.<div class="spacer">
</div>
Additional behaviors can be added to your <i>import()</i> method by overriding  <i>import_extra()</i>.<div class="spacer">
</div>
<i>import_extra</i><div class="spacer">
</div>
<br/>
    Your::Module-&gt;import_extra(\@import_args);<br/>
<div class="spacer">
</div>
<i>import_extra()</i> is called by <i>import()</i>.  It provides an opportunity for you to add behaviors to your module based on its import list.<div class="spacer">
</div>
Any extra arguments which shouldn't be passed on to <i>plan()</i> should be stripped off by this method.<div class="spacer">
</div>
See Test::More for an example of its use.<div class="spacer">
</div>
<b>NOTE</b> This mechanism is <i>VERY ALPHA AND LIKELY TO CHANGE</i> as it feels like a bit of an ugly hack in its current form.</div>
<div class="subsection">
<h2>Builder</h2> Test::Builder::Module provides some methods of getting at the underlying Test::Builder object.<div class="spacer">
</div>
<i>builder</i><div class="spacer">
</div>
<br/>
  my $builder = Your::Class-&gt;builder;<br/>
<div class="spacer">
</div>
This method returns the Test::Builder object associated with Your::Class. It is not a constructor so you can call it as often as you like.<div class="spacer">
</div>
This is the preferred way to get the Test::Builder object.  You should  <i>not</i> get it via &quot;Test::Builder-&gt;new&quot; as was previously recommended.<div class="spacer">
</div>
The object returned by <i>builder()</i> may change at runtime so you should call  <i>builder()</i> inside each function rather than store it in a global.<div class="spacer">
</div>
<br/>
  sub ok {<br/>
      my $builder = Your::Class-&gt;builder;<br/>
<br/>
      return $builder-&gt;ok(@_);<br/>
  }<br/>
</div>
</div>
<table class="foot">
<tr>
<td class="foot-date">
2011-09-19</td>
<td class="foot-os">
perl v5.14.2</td>
</tr>
</table>
</div>
</body>
</html>

