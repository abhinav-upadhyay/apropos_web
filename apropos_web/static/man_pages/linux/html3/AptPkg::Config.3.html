<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/linux/style.css" type="text/css" media="all"/>
<title>
AptPkg::Config(3pm)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
AptPkg::Config(3pm)</td>
<td class="head-vol">
User Contributed Perl Documentation</td>
<td class="head-rtitle">
AptPkg::Config(3pm)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>NAME</h1> AptPkg::Config - APT configuration interface</div>
<div class="section">
<h1>SYNOPSIS</h1> use AptPkg::Config;</div>
<div class="section">
<h1>DESCRIPTION</h1> The AptPkg::Config module provides an interface to  <b>APT</b>'s configuration mechanism.<div class="spacer">
</div>
Provides a configuration file and command line parser for a tree-oriented configuration environment.<div class="subsection">
<h2>AptPkg::Config</h2> The AptPkg::Config package implements the  <b>APT</b> Configuration class.<div class="spacer">
</div>
A global instance of the libapt-pkg _config instance is provided as $AptPkg::Config::_config, and may be imported.<div class="spacer">
</div>
The following methods are implemented:<dl>
<dt>
get(<i>KEY</i>, [<i>DEFAULT</i>])</dt>
<dd>
Fetch the value of <i>KEY</i> from the configuration object, returning undef if not found (or  <i>DEFAULT</i> if given).<div style="height: 1.00em;">
&#160;</div>
If the key ends in ::, an array of values is returned in an array context, or a string containing the values separated by spaces in a scalar context.<div style="height: 1.00em;">
&#160;</div>
A trailing /f, /d, /b or /i causes file, directory, boolean or integer interpretation (the underlying XS call is FindAny).</dd>
</dl>
<dl>
<dt>
get_file(<i>KEY</i>, [<i>DEFAULT</i>]), get_dir(<i>KEY</i>, [<i>DEFAULT</i>])</dt>
<dd>
Variants of get which prepend the directory value from the parent key. The get_dir method additionally appends a `/'.<div style="height: 1.00em;">
&#160;</div>
For example, given the configuration file:<div style="height: 1.00em;">
&#160;</div>
<br/>
    foo &quot;/some/dir/&quot; { bar &quot;value&quot;; }<br/>
<div style="height: 1.00em;">
&#160;</div>
then:<div style="height: 1.00em;">
&#160;</div>
<br/>
    $conf-&gt;get(&quot;foo::bar&quot;)      # &quot;value&quot;<br/>
    $conf-&gt;get_file(&quot;foo::bar&quot;) # &quot;/some/dir/value&quot;<br/>
    $conf-&gt;get_dir(&quot;foo::bar&quot;)  # &quot;/some/dir/value/&quot;<br/>
</dd>
</dl>
<dl>
<dt>
get_bool(<i>KEY</i>, [<i>DEFAULT</i>])</dt>
<dd>
Another get varient, which returns true (1) if the value contains any of:<div style="height: 1.00em;">
&#160;</div>
<br/>
    1 yes true with on enable<br/>
<div style="height: 1.00em;">
&#160;</div>
otherwise false ('').</dd>
</dl>
<dl>
<dt>
set(<i>KEY</i>, <i>VALUE</i>)</dt>
<dd>
Set configuration entry <i>KEY</i> to <i>VALUE</i>.  Returns <i>VALUE</i>.  Note that empty parent entries may be created for  <i>KEY</i>s containing ::.</dd>
</dl>
<dl>
<dt>
exists(<i>KEY</i>)</dt>
<dd>
Test if <i>KEY</i> exists in the configuration.</dd>
</dl>
<dl>
<dt>
dump</dt>
<dd>
Principally for debugging, output the contents of the configuration object to stderr.</dd>
</dl>
<dl>
<dt>
read_file(<i>FILE</i>, [<i>AS_SECTIONAL</i>, [<i>DEPTH</i>]])</dt>
<dd>
Load the contents of <i>FILE</i> into the object.  The format of the file is described in  <i>apt.conf</i>(5).<div style="height: 1.00em;">
&#160;</div>
If the <i>AS_SECTIONAL</i> argument is true, then the file is parsed as a BIND-style config.  That is:<div style="height: 1.00em;">
&#160;</div>
<br/>
    foo &quot;bar&quot; { baz &quot;quux&quot;; }<br/>
<div style="height: 1.00em;">
&#160;</div>
is interpreted as if it were:<div style="height: 1.00em;">
&#160;</div>
<br/>
    foo::bar { baz &quot;quux&quot;; }<br/>
<div style="height: 1.00em;">
&#160;</div>
The <i>DEPTH</i> argument may be used to restrict the number of nested include directives processed.</dd>
</dl>
<dl>
<dt>
read_dir(<i>DIR</i>, [<i>AS_SECTIONAL</i>, [<i>DEPTH</i>]])</dt>
<dd>
Load configuration from all files in <i>DIR</i>.</dd>
</dl>
<dl>
<dt>
init</dt>
<dd>
Initialise the configuration object with some default values for the libapt-pkg library and reads the default configuration file /etc/apt/apt.conf (or as given by the environment variable APT_CONFIG) if it exists.</dd>
</dl>
<dl>
<dt>
system</dt>
<dd>
Return the AptPkg::System object appropriate for this system.</dd>
</dl>
<dl>
<dt>
parse_cmdline(<i>DEFS</i>, [<i>ARG</i>, ...])</dt>
<dd>
Parse the arguments given by <i>ARG</i>s based on the contents of <i>DEFS</i> and returns the list of remaining arguments.<div style="height: 1.00em;">
&#160;</div>
Note, the function does not return if there are errors processing the args.  Use eval to trap such errors.<div style="height: 1.00em;">
&#160;</div>
<i>DEFS</i> is a reference to an array containing a set argument definition arrays.  The elements of each definition define:  the short argument character, the long argument string, the configuration key and the optional argument type (defaults to Boolean).<div style="height: 1.00em;">
&#160;</div>
Valid argument types are defined by the strings:<div style="height: 1.00em;">
&#160;</div>
<br/>
    HasArg      takes an argument value (-f foo)<br/>
    IntLevel    defines an integer value (-q -q, -qq, -q2, -q=2)<br/>
    Boolean     true/false (-d, -d=true, -d=yes, --no-d, -d=false, etc)<br/>
    InvBoolean  same as Boolean but false with no specified sense (-d)<br/>
    ConfigFile  load the specified configuration file<br/>
    ArbItem     arbitrary configuration string of the form key=value<br/>
<div style="height: 1.00em;">
&#160;</div>
The configuration key in the last two cases is ignored, and for the rest gives the key into which the value is placed.<div style="height: 1.00em;">
&#160;</div>
Single case equivalents also work (has_arg == HasArg).<div style="height: 1.00em;">
&#160;</div>
Example:<div style="height: 1.00em;">
&#160;</div>
<br/>
    @files = $conf-&gt;parse_cmndline([<br/>
            [ 'h', 'help', 'help' ],<br/>
            [ 'v', 'version', 'version' ],<br/>
            [ 'c', 'config-file', '', ConfigFile ],<br/>
            [ 'o', 'option', '', ArbItem ],<br/>
        ], @ARGV);<br/>
</dd>
</dl>
<div class="spacer">
</div>
The module uses AptPkg::hash to provide a hash-like access to the object, so that $conf-&gt;{key} is equivalent to using the get/set methods.<div class="spacer">
</div>
Additionally inherits the constructor (new) and keys methods from that module.<div class="spacer">
</div>
Methods of the internal XS object (AptPkg::_config) such as Find may also be used.  See AptPkg.</div>
<div class="subsection">
<h2>AptPkg::Config::Iter</h2> Iterator object for AptPkg::Config which is returned by the keys method.<dl>
<dt>
new(<i>XS_OBJ</i>, [<i>ROOT</i>])</dt>
<dd>
Constructor, which is invoked by the keys method.  <i>ROOT</i>, if given determines the subset of the tree to walk (may be given as an argument to keys).</dd>
</dl>
<dl>
<dt>
next</dt>
<dd>
Returns the current key and advances to the next.</dd>
</dl>
</div>
</div>
<div class="section">
<h1>SEE ALSO</h1>  <i>AptPkg::System</i>(3pm), <i>AptPkg</i>(3pm), <i>AptPkg::hash</i>(3pm).</div>
<div class="section">
<h1>AUTHOR</h1> Brendan O'Dea &lt;bod@debian.org&gt;</div>
<table class="foot">
<tr>
<td class="foot-date">
2011-10-03</td>
<td class="foot-os">
perl v5.14.2</td>
</tr>
</table>
</div>
</body>
</html>

