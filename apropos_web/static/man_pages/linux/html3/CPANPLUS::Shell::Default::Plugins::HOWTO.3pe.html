<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/linux/style.css" type="text/css" media="all"/>
<title>
CPANPLUS::Shell::Default::Plugins::HOWTO(3perl)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
CPANPLUS::Shell::Default::Plugins::HOWTO(3perl)</td>
<td class="head-vol">
Perl Programmers Reference Guide</td>
<td class="head-rtitle">
CPANPLUS::Shell::Default::Plugins::HOWTO(3perl)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>NAME</h1> CPANPLUS::Shell::Default::Plugins::HOWTO -- documentation on how to write your own plugins</div>
<div class="section">
<h1>SYNOPSIS</h1><br/>
    package CPANPLUS::Shell::Default::Plugins::MyPlugin;<br/>
    <br/>
    ### return command =&gt; method mapping<br/>
    sub plugins { ( myplugin1 =&gt; 'mp1', myplugin2 =&gt; 'mp2' ) }<br/>
    <br/>
    ### method called when the command '/myplugin1' is issued<br/>
    sub mp1 { .... }<br/>
<br/>
    ### method called when the command '/? myplugin1' is issued<br/>
    sub mp1_help { return &quot;Help Text&quot; }<br/>
</div>
<div class="section">
<h1>DESCRIPTION</h1> This pod text explains how to write your own plugins for &quot;CPANPLUS::Shell::Default&quot;.</div>
<div class="section">
<h1>HOWTO</h1><div class="subsection">
<h2>Registering Plugin Modules</h2> Plugins are detected by using &quot;Module::Pluggable&quot;. Every module in the &quot;CPANPLUS::Shell::Default::Plugins::*&quot; namespace is considered a plugin, and is attempted to be loaded.<div class="spacer">
</div>
Therefor, any plugin must be declared in that namespace, in a corresponding &quot;.pm&quot; file.</div>
<div class="subsection">
<h2>Registering Plugin Commands</h2> To register any plugin commands, a list of key value pairs must be returned by a &quot;plugins&quot; method in your package. The keys are the commands you wish to register, the values are the methods in the plugin package you wish to have called when the command is issued.<div class="spacer">
</div>
For example, a simple 'Hello, World!' plugin:<div class="spacer">
</div>
<br/>
    package CPANPLUS::Shell::Default::Plugins::HW;<br/>
    <br/>
    sub plugins { return ( helloworld =&gt; 'hw' ) };<br/>
    <br/>
    sub hw { print &quot;Hello, world!\n&quot; }<br/>
<div class="spacer">
</div>
When the user in the default shell now issues the &quot;/helloworld&quot; command, this command will be dispatched to the plugin, and its &quot;hw&quot; method will be called</div>
<div class="subsection">
<h2>Registering Plugin Help</h2> To provide usage information for your plugin, the user of the default shell can type &quot;/? PLUGIN_COMMAND&quot;. In that case, the function &quot;PLUGIN_COMMAND_help&quot; will be called in your plugin package.<div class="spacer">
</div>
For example, extending the above example, when a user calls &quot;/? helloworld&quot;, the function &quot;hw_help&quot; will be called, which might look like this:<div class="spacer">
</div>
<br/>
    sub hw_help { &quot;    /helloworld      # prints &quot;Hello, world!\n&quot; }<br/>
<div class="spacer">
</div>
If you dont provide a corresponding _help function to your commands, the default shell will handle it gracefully, but the user will be stuck without usage information on your commands, so it's considered undesirable to omit the help functions.</div>
<div class="subsection">
<h2>Arguments to Plugin Commands</h2> Any plugin function will receive the following arguments when called, which are all positional:<dl>
<dt>
Classname -- The name of your plugin class</dt>
<dd>
</dd>
</dl>
<dl>
<dt>
Shell     -- The CPANPLUS::Shell::Default object</dt>
<dd>
</dd>
</dl>
<dl>
<dt>
Backend   -- The CPANPLUS::Backend object</dt>
<dd>
</dd>
</dl>
<dl>
<dt>
Command   -- The command issued by the user</dt>
<dd>
</dd>
</dl>
<dl>
<dt>
Input     -- The input string from the user</dt>
<dd>
</dd>
</dl>
<dl>
<dt>
Options   -- A hashref of options provided by the user</dt>
<dd>
</dd>
</dl>
<div class="spacer">
</div>
For example, the following command:<div class="spacer">
</div>
<br/>
    /helloworld bob --nofoo --bar=2 joe<br/>
<div class="spacer">
</div>
Would yield the following arguments:<div class="spacer">
</div>
<br/>
    sub hw {<br/>
        my $class   = shift;    # CPANPLUS::Shell::Default::Plugins::HW<br/>
        my $shell   = shift;    # CPANPLUS::Shell::Default object<br/>
        my $cb      = shift;    # CPANPLUS::Backend object<br/>
        my $cmd     = shift;    # 'helloworld'<br/>
        my $input   = shift;    # 'bob joe'<br/>
        my $opts    = shift;    # { foo =&gt; 0, bar =&gt; 2 }<br/>
<br/>
        ....<br/>
    }<br/>
</div>
</div>
<div class="section">
<h1>BUG REPORTS</h1> Please report bugs or other issues to &lt;bug-cpanplus@rt.cpan.org&lt;gt&gt;.</div>
<div class="section">
<h1>AUTHOR</h1> This module by Jos Boumans &lt;kane@cpan.org&gt;.</div>
<div class="section">
<h1>COPYRIGHT</h1> The CPAN++ interface (of which this module is a part of) is copyright (c) 2001 - 2007, Jos Boumans &lt;kane@cpan.org&gt;. All rights reserved.<div class="spacer">
</div>
This library is free software; you may redistribute and/or modify it under the same terms as Perl itself.</div>
<div class="section">
<h1>SEE ALSO</h1> CPANPLUS::Shell::Default, CPANPLUS::Shell, cpanp</div>
<table class="foot">
<tr>
<td class="foot-date">
2011-09-26</td>
<td class="foot-os">
perl v5.14.2</td>
</tr>
</table>
</div>
</body>
</html>

