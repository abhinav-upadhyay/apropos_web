<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/linux/style.css" type="text/css" media="all"/>
<title>
XkbSetIgnoreLockMods(3)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
XkbSetIgnoreLockMods(3)</td>
<td class="head-vol">
XKB FUNCTIONS</td>
<td class="head-rtitle">
XkbSetIgnoreLockMods(3)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>NAME</h1> XkbSetIgnoreLockMods - Sets the modifiers that, if locked, are not to be reported in matching events to passive grabs</div>
<div class="section">
<h1>SYNOPSIS</h1><div style="margin-left: 5.00ex;text-indent: -5.00ex;" class="spacer">
<b>Bool XkbSetIgnoreLockMods</b> <b>(Display *</b><i>display</i><b>,</b> <b>unsigned int </b><i>device_spec</i><b>,</b> <b>unsigned int </b><i>affect_real</i><b>,</b> <b>unsigned int </b><i>real_values</i><b>,</b> <b>unsigned int </b><i>affect_virtual</i><b>,</b> <b>unsigned int </b><i>virtual_values</i><b>);</b></div>
</div>
<div class="section">
<h1>ARGUMENTS</h1><dl>
<dt>
<i>- display</i></dt>
<dd>
connection to the X server</dd>
</dl>
<dl>
<dt>
<i>- device_spec</i></dt>
<dd>
device ID, or XkbUseCoreKbd</dd>
</dl>
<dl>
<dt>
<i>- affect_real</i></dt>
<dd>
mask of real modifiers affected by this call</dd>
</dl>
<dl>
<dt>
<i>- real_values</i></dt>
<dd>
values for affected real modifiers (1=&gt;set, 0=&gt;unset)</dd>
</dl>
<dl>
<dt>
<i>- affect_virtual</i></dt>
<dd>
mask of virtual modifiers affected by this call</dd>
</dl>
<dl>
<dt>
<i>- virtual_values</i></dt>
<dd>
values for affected virtual modifiers (1=&gt;set, 0=&gt;unset)</dd>
</dl>
</div>
<div class="section">
<h1>DESCRIPTION</h1> The core protocol does not provide a way to exclude specific modifiers from grab calculations, with the result that locking modifiers sometimes have unanticipated side effects.<div style="height: 1.00em;">
&#160;</div>
The IgnoreLockMods control specifies modifiers that should be excluded from grab calculations. These modifiers are also not reported in any core events except KeyPress and KeyRelease events that do not activate a passive grab and that do not occur while a grab is active.<div style="height: 1.00em;">
&#160;</div>
Manipulate the IgnoreLockMods control via the <i>ignore_lock</i> field in the XkbControlsRec structure, then use <i>XkbSetControls</i> and <i>XkbGetControls</i> to query and change this control. Alternatively, use <i>XkbSetIgnoreLockMods.</i><div style="height: 1.00em;">
&#160;</div>
<i>XkbSetIgnoreLockMods</i> sends a request to the server to change the server's IgnoreLockMods control. <i>affect_real</i> and <i>real_values</i> are masks of real modifier bits indicating which real modifiers are to be added and removed from the server's IgnoreLockMods control. Modifiers selected by both <i>affect_real</i> and <i>real_values</i> are added to the server's IgnoreLockMods control; those selected by <i>affect_real</i> but not by <i>real_values</i> are removed from the server's IgnoreLockMods control. Valid values for <i>affect_real</i> and <i>real_values</i> consist of any combination of the eight core modifier bits: ShiftMask, LockMask, ControlMask, Mod1Mask - Mod5Mask. <i>affect_virtual</i> and <i>virtual_values</i> are masks of virtual modifier bits indicating which virtual modifiers are to be added and removed from the server's IgnoreLockMods control. Modifiers selected by both <i>affect_virtual</i> and <i>virtual_values</i> are added to the server's IgnoreLockMods control; those selected by <i>affect_virtual</i> but not by <i>virtual_values</i> are removed from the server's IgnoreLockMods control. See below for a discussion of virtual modifier masks to use in <i>affect_virtual</i> and <i>virtual_values. XkbSetIgnoreLockMods</i> does not wait for a reply from the server. It returns True if the request was sent, and False otherwise.<div style="height: 1.00em;">
&#160;</div>
Virtual modifiers are named by converting their string name to an X Atom and storing the Atom in the <i>names.vmods</i> array in an XkbDescRec structure. The position of a name Atom in the <i>names.vmods</i> array defines the bit position used to represent the virtual modifier and also the index used when accessing virtual modifier information in arrays: the name in the i-th (0 relative) entry of <i>names.vmods</i> is the i-th virtual modifier, represented by the mask (1&lt;&lt;i). Throughout Xkb, various functions have a parameter that is a mask representing virtual modifier choices. In each case, the i-th bit (0 relative) of the mask represents the i-th virtual modifier.<div style="height: 1.00em;">
&#160;</div>
To set the name of a virtual modifier, use <i>XkbSetNames,</i> using XkbVirtualModNamesMask in <i>which</i> and the name in the <i>xkb</i> argument; to retrieve indicator names, use <i>XkbGetNames.</i></div>
<div class="section">
<h1>STRUCTURES</h1> The complete description of an Xkb keyboard is given by an XkbDescRec. The component structures in the XkbDescRec represent the major Xkb components.<div class="spacer">
</div>
<br/>
typedef struct {<br/>
    struct _XDisplay * display;      /&#8727; connection to X server */<br/>
    unsigned short     flags;        /&#8727; private to Xkb, do not modify */<br/>
    unsigned short     device_spec;  /&#8727; device of interest */<br/>
    KeyCode            min_key_code; /&#8727; minimum keycode for device */<br/>
    KeyCode            max_key_code; /&#8727; maximum keycode for device */<br/>
    XkbControlsPtr     ctrls;        /&#8727; controls */<br/>
    XkbServerMapPtr    server;       /&#8727; server keymap */<br/>
    XkbClientMapPtr    map;          /&#8727; client keymap */<br/>
    XkbIndicatorPtr    indicators;   /&#8727; indicator map */<br/>
    XkbNamesPtr        names;        /&#8727; names for all components */<br/>
    XkbCompatMapPtr    compat;       /&#8727; compatibility map */<br/>
    XkbGeometryPtr     geom;         /&#8727; physical geometry of keyboard */<br/>
} XkbDescRec, *XkbDescPtr;<div class="spacer">
</div>
<br/>
The display field points to an X display structure. The flags field is private to the library: modifying flags may yield unpredictable results. The device_spec field specifies the device identifier of the keyboard input device, or XkbUseCoreKeyboard, which specifies the core keyboard device. The min_key_code and max_key_code fields specify the least and greatest keycode that can be returned by the keyboard.<div style="height: 1.00em;">
&#160;</div>
Each structure component has a corresponding mask bit that is used in function calls to indicate that the structure should be manipulated in some manner, such as allocating it or freeing it. These masks and their relationships to the fields in the XkbDescRec are shown in Table 1.<div style="height: 1.00em;">
&#160;</div>
<table class="tbl">
<col style="width: 20.00ex;"/>
<col style="width: 16.00ex;"/>
<col style="width: 7.00ex;"/>
<tbody>
<tr>
<td>
Table 1 Mask Bits for XkbDescRec</td>
<td>
</td>
<td>
</td>
</tr>
<tr>
<td colspan="0">
</td>
</tr>
<tr>
<td>
Mask Bit</td>
<td>
XkbDescRec Field</td>
<td>
Value</td>
</tr>
<tr>
<td colspan="0">
</td>
</tr>
<tr>
<td>
XkbControlsMask</td>
<td>
ctrls</td>
<td>
(1L&lt;&lt;0)</td>
</tr>
<tr>
<td>
XkbServerMapMask</td>
<td>
server</td>
<td>
(1L&lt;&lt;1)</td>
</tr>
<tr>
<td>
XkbIClientMapMask</td>
<td>
map</td>
<td>
(1L&lt;&lt;2)</td>
</tr>
<tr>
<td>
XkbIndicatorMapMask</td>
<td>
indicators</td>
<td>
(1L&lt;&lt;3)</td>
</tr>
<tr>
<td>
XkbNamesMask</td>
<td>
names</td>
<td>
(1L&lt;&lt;4)</td>
</tr>
<tr>
<td>
XkbCompatMapMask</td>
<td>
compat</td>
<td>
(1L&lt;&lt;5)</td>
</tr>
<tr>
<td>
XkbGeometryMask</td>
<td>
geom</td>
<td>
(1L&lt;&lt;6)</td>
</tr>
<tr>
<td>
XkbAllComponentsMask</td>
<td>
All Fields</td>
<td>
(0x7f)</td>
</tr>
<tr>
<td>
&quot;SEE ALSO&quot;</td>
<td>
</td>
<td>
</td>
</tr>
<tr>
<td>
XkbGetControls (3),</td>
<td>
</td>
<td>
</td>
</tr>
<tr>
<td>
XkbGetNames (3),</td>
<td>
</td>
<td>
</td>
</tr>
<tr>
<td>
XkbSetControls (3),</td>
<td>
</td>
<td>
</td>
</tr>
<tr>
<td>
XkbSetNames (3)</td>
<td>
</td>
<td>
</td>
</tr>
</tbody>
</table>
</div>
<table class="foot">
<tr>
<td class="foot-date">
libX11 1.4.99.1</td>
<td class="foot-os">
X Version 11</td>
</tr>
</table>
</div>
</body>
</html>

