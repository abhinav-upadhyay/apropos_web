<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/linux/style.css" type="text/css" media="all"/>
<title>
Moose::Meta::Attribute(3pm)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
Moose::Meta::Attribute(3pm)</td>
<td class="head-vol">
User Contributed Perl Documentation</td>
<td class="head-rtitle">
Moose::Meta::Attribute(3pm)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>NAME</h1> Moose::Meta::Attribute - The Moose attribute metaclass</div>
<div class="section">
<h1>VERSION</h1> version 2.0401</div>
<div class="section">
<h1>DESCRIPTION</h1> This class is a subclass of Class::MOP::Attribute that provides additional Moose-specific functionality.<div class="spacer">
</div>
To really understand this class, you will need to start with the Class::MOP::Attribute documentation. This class can be understood as a set of additional features on top of the basic feature provided by that parent class.</div>
<div class="section">
<h1>INHERITANCE</h1> &quot;Moose::Meta::Attribute&quot; is a subclass of Class::MOP::Attribute.</div>
<div class="section">
<h1>METHODS</h1> Many of the documented below override methods in Class::MOP::Attribute and add Moose specific features.<div class="subsection">
<h2>Creation</h2><dl>
<dt>
<b>Moose::Meta::Attribute-&gt;new(%options)</b></dt>
<dd>
This method overrides the Class::MOP::Attribute constructor.<div style="height: 1.00em;">
&#160;</div>
Many of the options below are described in more detail in the Moose::Manual::Attributes document.<div style="height: 1.00em;">
&#160;</div>
It adds the following options to the constructor:</dd>
</dl>
<div style="margin-left: 4.00ex;">
<dl>
<dt>
&#8226;</dt>
<dd>
is =&gt; 'ro', 'rw', 'bare'<div style="height: 1.00em;">
&#160;</div>
This provides a shorthand for specifying the &quot;reader&quot;, &quot;writer&quot;, or &quot;accessor&quot; names. If the attribute is read-only ('ro') then it will have a &quot;reader&quot; method with the same attribute as the name.<div style="height: 1.00em;">
&#160;</div>
If it is read-write ('rw') then it will have an &quot;accessor&quot; method with the same name. If you provide an explicit &quot;writer&quot; for a read-write attribute, then you will have a &quot;reader&quot; with the same name as the attribute, and a &quot;writer&quot; with the name you provided.<div style="height: 1.00em;">
&#160;</div>
Use 'bare' when you are deliberately not installing any methods (accessor, reader, etc.) associated with this attribute; otherwise, Moose will issue a deprecation warning when this attribute is added to a metaclass.</dd>
</dl>
<dl>
<dt>
&#8226;</dt>
<dd>
isa =&gt; $type<div style="height: 1.00em;">
&#160;</div>
This option accepts a type. The type can be a string, which should be a type name. If the type name is unknown, it is assumed to be a class name.<div style="height: 1.00em;">
&#160;</div>
This option can also accept a Moose::Meta::TypeConstraint object.<div style="height: 1.00em;">
&#160;</div>
If you <i>also</i> provide a &quot;does&quot; option, then your &quot;isa&quot; option must be a class name, and that class must do the role specified with &quot;does&quot;.</dd>
</dl>
<dl>
<dt>
&#8226;</dt>
<dd>
does =&gt; $role<div style="height: 1.00em;">
&#160;</div>
This is short-hand for saying that the attribute's type must be an object which does the named role.</dd>
</dl>
<dl>
<dt>
&#8226;</dt>
<dd>
coerce =&gt; $bool<div style="height: 1.00em;">
&#160;</div>
This option is only valid for objects with a type constraint (&quot;isa&quot;) that defined a coercion. If this is true, then coercions will be applied whenever this attribute is set.<div style="height: 1.00em;">
&#160;</div>
You can make both this and the &quot;weak_ref&quot; option true.</dd>
</dl>
<dl>
<dt>
&#8226;</dt>
<dd>
trigger =&gt; $sub<div style="height: 1.00em;">
&#160;</div>
This option accepts a subroutine reference, which will be called after the attribute is set.</dd>
</dl>
<dl>
<dt>
&#8226;</dt>
<dd>
required =&gt; $bool<div style="height: 1.00em;">
&#160;</div>
An attribute which is required must be provided to the constructor. An attribute which is required can also have a &quot;default&quot; or &quot;builder&quot;, which will satisfy its required-ness.<div style="height: 1.00em;">
&#160;</div>
A required attribute must have a &quot;default&quot;, &quot;builder&quot; or a non-&quot;undef&quot; &quot;init_arg&quot;</dd>
</dl>
<dl>
<dt>
&#8226;</dt>
<dd>
lazy =&gt; $bool<div style="height: 1.00em;">
&#160;</div>
A lazy attribute must have a &quot;default&quot; or &quot;builder&quot;. When an attribute is lazy, the default value will not be calculated until the attribute is read.</dd>
</dl>
<dl>
<dt>
&#8226;</dt>
<dd>
weak_ref =&gt; $bool<div style="height: 1.00em;">
&#160;</div>
If this is true, the attribute's value will be stored as a weak reference.</dd>
</dl>
<dl>
<dt>
&#8226;</dt>
<dd>
auto_deref =&gt; $bool<div style="height: 1.00em;">
&#160;</div>
If this is true, then the reader will dereference the value when it is called. The attribute must have a type constraint which defines the attribute as an array or hash reference.</dd>
</dl>
<dl>
<dt>
&#8226;</dt>
<dd>
lazy_build =&gt; $bool<div style="height: 1.00em;">
&#160;</div>
Setting this to true makes the attribute lazy and provides a number of default methods.<div style="height: 1.00em;">
&#160;</div>
<br/>
  has 'size' =&gt; (<br/>
      is         =&gt; 'ro',<br/>
      lazy_build =&gt; 1,<br/>
  );<br/>
<div style="height: 1.00em;">
&#160;</div>
is equivalent to this:<div style="height: 1.00em;">
&#160;</div>
<br/>
  has 'size' =&gt; (<br/>
      is        =&gt; 'ro',<br/>
      lazy      =&gt; 1,<br/>
      builder   =&gt; '_build_size',<br/>
      clearer   =&gt; 'clear_size',<br/>
      predicate =&gt; 'has_size',<br/>
  );<br/>
<div style="height: 1.00em;">
&#160;</div>
If your attribute name starts with an underscore (&quot;_&quot;), then the clearer and predicate will as well:<div style="height: 1.00em;">
&#160;</div>
<br/>
  has '_size' =&gt; (<br/>
      is         =&gt; 'ro',<br/>
      lazy_build =&gt; 1,<br/>
  );<br/>
<div style="height: 1.00em;">
&#160;</div>
becomes:<div style="height: 1.00em;">
&#160;</div>
<br/>
  has '_size' =&gt; (<br/>
      is        =&gt; 'ro',<br/>
      lazy      =&gt; 1,<br/>
      builder   =&gt; '_build__size',<br/>
      clearer   =&gt; '_clear_size',<br/>
      predicate =&gt; '_has_size',<br/>
  );<br/>
<div style="height: 1.00em;">
&#160;</div>
Note the doubled underscore in the builder name. Internally, Moose simply prepends the attribute name with &quot;_build_&quot; to come up with the builder name.</dd>
</dl>
<dl>
<dt>
&#8226;</dt>
<dd>
documentation<div style="height: 1.00em;">
&#160;</div>
An arbitrary string that can be retrieved later by calling &quot;$attr-&gt;documentation&quot;.</dd>
</dl>
</div>
<div style="margin-left: 4.00ex;">
</div>
<dl>
<dt>
<b></b><b>$attr</b><b>-&gt;clone(%options)</b></dt>
<dd>
This creates a new attribute based on attribute being cloned. You must supply a &quot;name&quot; option to provide a new name for the attribute.<div style="height: 1.00em;">
&#160;</div>
The %options can only specify options handled by Class::MOP::Attribute.</dd>
</dl>
</div>
<div class="subsection">
<h2>Value management</h2><dl>
<dt>
<b></b><b>$attr</b><b>-&gt;initialize_instance_slot($meta_instance, </b><b><i>$instance</i></b><b>, </b><b>$params</b><b>)</b></dt>
<dd>
This method is used internally to initialize the attribute's slot in the object $instance.<div style="height: 1.00em;">
&#160;</div>
This overrides the Class::MOP::Attribute method to handle lazy attributes, weak references, and type constraints.</dd>
</dl>
<dl>
<dt>
<b>get_value</b></dt>
<dd>
</dd>
</dl>
<dl>
<dt>
<b>set_value</b></dt>
<dd>
<br/>
  eval { $point-&gt;meta-&gt;get_attribute('x')-&gt;set_value($point, 'forty-two') };<br/>
  if($@) {<br/>
    print &quot;Oops: $@\n&quot;;<br/>
  }<br/>
<div style="height: 1.00em;">
&#160;</div>
<i>Attribute (x) does not pass the type constraint (Int) with 'forty-two'</i><div style="height: 1.00em;">
&#160;</div>
Before setting the value, a check is made on the type constraint of the attribute, if it has one, to see if the value passes it. If the value fails to pass, the set operation dies with a &quot;throw_error&quot;.<div style="height: 1.00em;">
&#160;</div>
Any coercion to convert values is done before checking the type constraint.<div style="height: 1.00em;">
&#160;</div>
To check a value against a type constraint before setting it, fetch the attribute instance using &quot;find_attribute_by_name&quot; in Class::MOP::Class, fetch the type_constraint from the attribute using &quot;type_constraint&quot; in Moose::Meta::Attribute and call &quot;check&quot; in Moose::Meta::TypeConstraint. See Moose::Cookbook::Basics::Recipe4 for an example.</dd>
</dl>
</div>
<div class="subsection">
<h2>Attribute Accessor generation</h2><dl>
<dt>
<b></b><b>$attr</b><b>-&gt;install_accessors</b></dt>
<dd>
This method overrides the parent to also install delegation methods.<div style="height: 1.00em;">
&#160;</div>
If, after installing all methods, the attribute object has no associated methods, it throws an error unless &quot;is =&gt; 'bare'&quot; was passed to the attribute constructor.  (Trying to add an attribute that has no associated methods is almost always an error.)</dd>
</dl>
<dl>
<dt>
<b></b><b>$attr</b><b>-&gt;remove_accessors</b></dt>
<dd>
This method overrides the parent to also remove delegation methods.</dd>
</dl>
<dl>
<dt>
<b></b><b>$attr</b><b>-&gt;inline_set($instance_var, </b><b><i>$value_var</i></b><b>)</b></dt>
<dd>
This method return a code snippet suitable for inlining the relevant operation. It expect strings containing variable names to be used in the inlining, like '$self' or '$_[1]'.</dd>
</dl>
<dl>
<dt>
<b></b><b>$attr</b><b>-&gt;install_delegation</b></dt>
<dd>
This method adds its delegation methods to the attribute's associated class, if it has any to add.</dd>
</dl>
<dl>
<dt>
<b></b><b>$attr</b><b>-&gt;remove_delegation</b></dt>
<dd>
This method remove its delegation methods from the attribute's associated class.</dd>
</dl>
<dl>
<dt>
<b></b><b>$attr</b><b>-&gt;accessor_metaclass</b></dt>
<dd>
Returns the accessor metaclass name, which defaults to Moose::Meta::Method::Accessor.</dd>
</dl>
<dl>
<dt>
<b></b><b>$attr</b><b>-&gt;delegation_metaclass</b></dt>
<dd>
Returns the delegation metaclass name, which defaults to Moose::Meta::Method::Delegation.</dd>
</dl>
</div>
<div class="subsection">
<h2>Additional Moose features</h2> These methods are not found in the superclass. They support features provided by Moose.<dl>
<dt>
<b></b><b>$attr</b><b>-&gt;does($role)</b></dt>
<dd>
This indicates whether the <i>attribute itself</i> does the given role. The role can be given as a full class name, or as a resolvable trait name.<div style="height: 1.00em;">
&#160;</div>
Note that this checks the attribute itself, not its type constraint, so it is checking the attribute's metaclass and any traits applied to the attribute.</dd>
</dl>
<dl>
<dt>
<b>Moose::Meta::Class-&gt;interpolate_class_and_new($name, </b><b>%options</b><b>)</b></dt>
<dd>
This is an alternate constructor that handles the &quot;metaclass&quot; and &quot;traits&quot; options.<div style="height: 1.00em;">
&#160;</div>
Effectively, this method is a factory that finds or creates the appropriate class for the given &quot;metaclass&quot; and/or &quot;traits&quot;.<div style="height: 1.00em;">
&#160;</div>
Once it has the appropriate class, it will call &quot;$class-&gt;new($name, %options)&quot; on that class.</dd>
</dl>
<dl>
<dt>
<b></b><b>$attr</b><b>-&gt;clone_and_inherit_options(%options)</b></dt>
<dd>
This method supports the &quot;has '+foo'&quot; feature. It does various bits of processing on the supplied %options before ultimately calling the &quot;clone&quot; method.<div style="height: 1.00em;">
&#160;</div>
One of its main tasks is to make sure that the %options provided does not include the options returned by the &quot;illegal_options_for_inheritance&quot; method.</dd>
</dl>
<dl>
<dt>
<b></b><b>$attr</b><b>-&gt;illegal_options_for_inheritance</b></dt>
<dd>
This returns a blacklist of options that can not be overridden in a subclass's attribute definition.<div style="height: 1.00em;">
&#160;</div>
This exists to allow a custom metaclass to change or add to the list of options which can not be changed.</dd>
</dl>
<dl>
<dt>
<b></b><b>$attr</b><b>-&gt;type_constraint</b></dt>
<dd>
Returns the Moose::Meta::TypeConstraint object for this attribute, if it has one.</dd>
</dl>
<dl>
<dt>
<b></b><b>$attr</b><b>-&gt;has_type_constraint</b></dt>
<dd>
Returns true if this attribute has a type constraint.</dd>
</dl>
<dl>
<dt>
<b></b><b>$attr</b><b>-&gt;verify_against_type_constraint($value)</b></dt>
<dd>
Given a value, this method returns true if the value is valid for the attribute's type constraint. If the value is not valid, it throws an error.</dd>
</dl>
<dl>
<dt>
<b></b><b>$attr</b><b>-&gt;handles</b></dt>
<dd>
This returns the value of the &quot;handles&quot; option passed to the constructor.</dd>
</dl>
<dl>
<dt>
<b></b><b>$attr</b><b>-&gt;has_handles</b></dt>
<dd>
Returns true if this attribute performs delegation.</dd>
</dl>
<dl>
<dt>
<b></b><b>$attr</b><b>-&gt;is_weak_ref</b></dt>
<dd>
Returns true if this attribute stores its value as a weak reference.</dd>
</dl>
<dl>
<dt>
<b></b><b>$attr</b><b>-&gt;is_required</b></dt>
<dd>
Returns true if this attribute is required to have a value.</dd>
</dl>
<dl>
<dt>
<b></b><b>$attr</b><b>-&gt;is_lazy</b></dt>
<dd>
Returns true if this attribute is lazy.</dd>
</dl>
<dl>
<dt>
<b></b><b>$attr</b><b>-&gt;is_lazy_build</b></dt>
<dd>
Returns true if the &quot;lazy_build&quot; option was true when passed to the constructor.</dd>
</dl>
<dl>
<dt>
<b></b><b>$attr</b><b>-&gt;should_coerce</b></dt>
<dd>
Returns true if the &quot;coerce&quot; option passed to the constructor was true.</dd>
</dl>
<dl>
<dt>
<b></b><b>$attr</b><b>-&gt;should_auto_deref</b></dt>
<dd>
Returns true if the &quot;auto_deref&quot; option passed to the constructor was true.</dd>
</dl>
<dl>
<dt>
<b></b><b>$attr</b><b>-&gt;trigger</b></dt>
<dd>
This is the subroutine reference that was in the &quot;trigger&quot; option passed to the constructor, if any.</dd>
</dl>
<dl>
<dt>
<b></b><b>$attr</b><b>-&gt;has_trigger</b></dt>
<dd>
Returns true if this attribute has a trigger set.</dd>
</dl>
<dl>
<dt>
<b></b><b>$attr</b><b>-&gt;documentation</b></dt>
<dd>
Returns the value that was in the &quot;documentation&quot; option passed to the constructor, if any.</dd>
</dl>
<dl>
<dt>
<b></b><b>$attr</b><b>-&gt;has_documentation</b></dt>
<dd>
Returns true if this attribute has any documentation.</dd>
</dl>
<dl>
<dt>
<b></b><b>$attr</b><b>-&gt;applied_traits</b></dt>
<dd>
This returns an array reference of all the traits which were applied to this attribute. If none were applied, this returns &quot;undef&quot;.</dd>
</dl>
<dl>
<dt>
<b></b><b>$attr</b><b>-&gt;has_applied_traits</b></dt>
<dd>
Returns true if this attribute has any traits applied.</dd>
</dl>
</div>
</div>
<div class="section">
<h1>BUGS</h1> See &quot;BUGS&quot; in Moose for details on reporting bugs.</div>
<div class="section">
<h1>AUTHOR</h1> Moose is maintained by the Moose Cabal, along with the help of many contributors. See &quot;CABAL&quot; in Moose and &quot;CONTRIBUTORS&quot; in Moose for details.</div>
<div class="section">
<h1>COPYRIGHT AND LICENSE</h1> This software is copyright (c) 2011 by Infinity Interactive, Inc..<div class="spacer">
</div>
This is free software; you can redistribute it and/or modify it under the same terms as the Perl 5 programming language system itself.</div>
<table class="foot">
<tr>
<td class="foot-date">
2011-11-17</td>
<td class="foot-os">
perl v5.14.2</td>
</tr>
</table>
</div>
</body>
</html>

