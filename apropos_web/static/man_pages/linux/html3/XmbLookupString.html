<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/linux/style.css" type="text/css" media="all"/>
<title>
XmbLookupString(3)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
XmbLookupString(3)</td>
<td class="head-vol">
XLIB FUNCTIONS</td>
<td class="head-rtitle">
XmbLookupString(3)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>NAME</h1> XmbLookupString, XwcLookupString, Xutf8LookupString - obtain composed input from an input method</div>
<div class="section">
<h1>SYNTAX</h1><div style="margin-left: 5.00ex;text-indent: -5.00ex;" class="spacer">
int XmbLookupString(XIC <i>ic</i>, XKeyPressedEvent *<i>event</i>, char * <i>buffer_return</i>, int <i>bytes_buffer</i>, KeySym * <i>keysym_return</i>, Status *<i>status_return</i>);</div>
<div class="spacer">
</div>
<div style="margin-left: 5.00ex;text-indent: -5.00ex;" class="spacer">
int XwcLookupString(XIC <i>ic</i>, XKeyPressedEvent *<i>event</i>, wchar_t * <i>buffer_return</i>, int <i>wchars_buffer</i>, KeySym * <i>keysym_return</i>, Status *<i>status_return</i>);</div>
<div class="spacer">
</div>
<div style="margin-left: 5.00ex;text-indent: -5.00ex;" class="spacer">
int Xutf8LookupString(XIC <i>ic</i>, XKeyPressedEvent *<i>event</i>, char * <i>buffer_return</i>, int <i>bytes_buffer</i>, KeySym * <i>keysym_return</i>, Status *<i>status_return</i>);</div>
</div>
<div class="section">
<h1>ARGUMENTS</h1><dl>
<dt>
<i>buffer_return</i></dt>
<dd>
Returns a multibyte string or wide character string (if any) from the input method.</dd>
</dl>
<dl>
<dt>
<i>bytes_buffer</i></dt>
<dd>
<div style="height: 0.00em;">
&#160;</div>
</dd>
</dl>
<dl>
<dt>
<i>wchars_buffer</i></dt>
<dd>
Specifies space available in the return buffer.</dd>
</dl>
<dl>
<dt>
<i>event</i></dt>
<dd>
Specifies the key event to be used.</dd>
</dl>
<dl>
<dt>
<i>ic</i></dt>
<dd>
Specifies the input context.</dd>
</dl>
<dl>
<dt>
<i>keysym_return</i></dt>
<dd>
Returns the KeySym computed from the event if this argument is not NULL.</dd>
</dl>
<dl>
<dt>
<i>status_return</i></dt>
<dd>
Returns a value indicating what kind of data is returned.</dd>
</dl>
</div>
<div class="section">
<h1>DESCRIPTION</h1> The  <i>XmbLookupString</i>,  <i>XwcLookupString</i> and  <i>Xutf8LookupString</i> functions return the string from the input method specified in the buffer_return argument. If no string is returned, the buffer_return argument is unchanged.<div class="spacer">
</div>
The KeySym into which the KeyCode from the event was mapped is returned in the keysym_return argument if it is non-NULL and the status_return argument indicates that a KeySym was returned. If both a string and a KeySym are returned, the KeySym value does not necessarily correspond to the string returned.<div class="spacer">
</div>
<i>XmbLookupString</i> and  <i>Xutf8LookupString</i> return the length of the string in bytes, and  <i>XwcLookupString</i> returns the length of the string in characters. Both  <i>XmbLookupString</i> and  <i>XwcLookupString</i> return text in the encoding of the locale bound to the input method of the specified input context, and  <i>Xutf8LookupString</i> returns text in UTF-8 encoding.<div class="spacer">
</div>
Each string returned by  <i>XmbLookupString</i> and  <i>XwcLookupString</i> begins in the initial state of the encoding of the locale (if the encoding of the locale is state-dependent).<div style="height: 1.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
<br/>
To ensure proper input processing, it is essential that the client pass only  <i>KeyPress</i> events to  <i>XmbLookupString</i>,  <i>XwcLookupString</i> and  <i>Xutf8LookupString</i>. Their behavior when a client passes a  <i>KeyRelease</i> event is undefined.<br/>
<div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
Clients should check the status_return argument before using the other returned values. These three functions each return a value to status_return that indicates what has been returned in the other arguments. The possible values returned are:<table class="tbl">
<col style="width: 25.00ex;"/>
<col style="width: 431.00ex;"/>
<tbody>
<tr>
<td>
<i>XBufferOverflow</i></td>
<td>
The input string to be returned is too large for the supplied buffer_return. The required size (for <i>XmbLookupString</i>, <i>Xutf8LookupString</i> in bytes; for <i>XwcLookupString</i> in characters) is returned as the value of the function, and the contents of buffer_return and keysym_return are not modified. The client should recall the function with the same event and a buffer of adequate size to obtain the string.</td>
</tr>
<tr>
<td>
<i>XLookupNone</i></td>
<td>
No consistent input has been composed so far. The contents of buffer_return and keysym_return are not modified,  and the function returns zero.</td>
</tr>
<tr>
<td>
<i>XLookupChars</i></td>
<td>
Some input characters have been composed. They are placed in the buffer_return argument, using the encoding described above, and the string length is returned as the value of the function. The content of the keysym_return argument is not modified.</td>
</tr>
<tr>
<td>
<i>XLookupKeySym</i></td>
<td>
A KeySym has been returned instead of a string and is returned in keysym_return. The content of the buffer_return argument is not modified, and the function returns zero.</td>
</tr>
<tr>
<td>
<i>XLookupBoth</i></td>
<td>
Both a KeySym and a string are returned; <i>XLookupChars</i> and <i>XLookupKeySym</i> occur simultaneously.</td>
</tr>
</tbody>
</table>
<div class="spacer">
</div>
It does not make any difference if the input context passed as an argument to  <i>XmbLookupString</i>,  <i>XwcLookupString</i> and  <i>Xutf8LookupString</i> is the one currently in possession of the focus or not. Input may have been composed within an input context before it lost the focus, and that input may be returned on subsequent calls to  <i>XmbLookupString</i>,  <i>XwcLookupString</i> or  <i>Xutf8LookupString</i> even though it does not have any more keyboard focus.<div class="spacer">
</div>
The function  <i>Xutf8LookupString</i> is an extension introduced by The XFree86 Project, Inc. in their 4.0.2 release. Its presence is indicated by the macro  <i>X_HAVE_UTF8_STRING</i>.</div>
<div class="section">
<h1>SEE ALSO</h1> XLookupKeysym(3), Compose(5)<div style="height: 0.00em;">
&#160;</div>
<i>Xlib - C Language X Interface</i></div>
<table class="foot">
<tr>
<td class="foot-date">
libX11 1.4.99.1</td>
<td class="foot-os">
X Version 11</td>
</tr>
</table>
</div>
</body>
</html>

