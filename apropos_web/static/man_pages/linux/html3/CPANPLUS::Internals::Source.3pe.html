<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/linux/style.css" type="text/css" media="all"/>
<title>
CPANPLUS::Internals::Source(3perl)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
CPANPLUS::Internals::Source(3perl)</td>
<td class="head-vol">
Perl Programmers Reference Guide</td>
<td class="head-rtitle">
CPANPLUS::Internals::Source(3perl)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>NAME</h1> CPANPLUS::Internals::Source</div>
<div class="section">
<h1>SYNOPSIS</h1><br/>
    ### lazy load author/module trees ###<br/>
<br/>
    $cb-&gt;_author_tree;<br/>
    $cb-&gt;_module_tree;<br/>
</div>
<div class="section">
<h1>DESCRIPTION</h1> CPANPLUS::Internals::Source controls the updating of source files and the parsing of them into usable module/author trees to be used by &quot;CPANPLUS&quot;.<div class="spacer">
</div>
Functions exist to check if source files are still &quot;good to use&quot; as well as update them, and then parse them.<div class="spacer">
</div>
The flow looks like this:<div class="spacer">
</div>
<br/>
    $cb-&gt;_author_tree || $cb-&gt;_module_tree<br/>
        $cb-&gt;_check_trees<br/>
            $cb-&gt;__check_uptodate<br/>
                $cb-&gt;_update_source<br/>
            $cb-&gt;__update_custom_module_sources <br/>
                $cb-&gt;__update_custom_module_source<br/>
        $cb-&gt;_build_trees<br/>
            ### engine methods<br/>
            {   $cb-&gt;_init_trees;<br/>
                $cb-&gt;_standard_trees_completed<br/>
                $cb-&gt;_custom_trees_completed<br/>
            }                <br/>
            $cb-&gt;__create_author_tree<br/>
                ### engine methods<br/>
                { $cb-&gt;_add_author_object }<br/>
            $cb-&gt;__create_module_tree<br/>
                $cb-&gt;__create_dslip_tree<br/>
                ### engine methods<br/>
                { $cb-&gt;_add_module_object }<br/>
            $cb-&gt;__create_custom_module_entries                    <br/>
<br/>
    $cb-&gt;_dslip_defs<br/>
</div>
<div class="section">
<h1>METHODS</h1><div class="subsection">
<h2>$cb-&gt;_build_trees( uptodate =&gt; BOOL, [use_stored =&gt; BOOL, path =&gt; $path, verbose =&gt; BOOL] )</h2> This method rebuilds the author- and module-trees from source.<div class="spacer">
</div>
It takes the following arguments:<dl>
<dt>
uptodate</dt>
<dd>
Indicates whether any on disk caches are still ok to use.</dd>
</dl>
<dl>
<dt>
path</dt>
<dd>
The absolute path to the directory holding the source files.</dd>
</dl>
<dl>
<dt>
verbose</dt>
<dd>
A boolean flag indicating whether or not to be verbose.</dd>
</dl>
<dl>
<dt>
use_stored</dt>
<dd>
A boolean flag indicating whether or not it is ok to use previously stored trees. Defaults to true.</dd>
</dl>
<div class="spacer">
</div>
Returns a boolean indicating success.</div>
<div class="subsection">
<h2>$cb-&gt;_check_trees( [update_source =&gt; BOOL, path =&gt; PATH, verbose =&gt; BOOL] )</h2> Retrieve source files and return a boolean indicating whether or not the source files are up to date.<div class="spacer">
</div>
Takes several arguments:<dl>
<dt>
update_source</dt>
<dd>
A flag to force re-fetching of the source files, even if they are still up to date.</dd>
</dl>
<dl>
<dt>
path</dt>
<dd>
The absolute path to the directory holding the source files.</dd>
</dl>
<dl>
<dt>
verbose</dt>
<dd>
A boolean flag indicating whether or not to be verbose.</dd>
</dl>
<div class="spacer">
</div>
Will get information from the config file by default.</div>
<div class="subsection">
<h2>$cb-&gt;__check_uptodate( file =&gt; $file, name =&gt; $name, [update_source =&gt; BOOL, verbose =&gt; BOOL] )</h2> &quot;__check_uptodate&quot; checks if a given source file is still up-to-date and if not, or when &quot;update_source&quot; is true, will re-fetch the source file.<div class="spacer">
</div>
Takes the following arguments:<dl>
<dt>
file</dt>
<dd>
The source file to check.</dd>
</dl>
<dl>
<dt>
name</dt>
<dd>
The internal shortcut name for the source file (used for config lookups).</dd>
</dl>
<dl>
<dt>
update_source</dt>
<dd>
Flag to force updating of sourcefiles regardless.</dd>
</dl>
<dl>
<dt>
verbose</dt>
<dd>
Boolean to indicate whether to be verbose or not.</dd>
</dl>
<div class="spacer">
</div>
Returns a boolean value indicating whether the current files are up to date or not.</div>
<div class="subsection">
<h2>$cb-&gt;_update_source( name =&gt; $name, [path =&gt; $path, verbose =&gt; BOOL] )</h2> This method does the actual fetching of source files.<div class="spacer">
</div>
It takes the following arguments:<dl>
<dt>
name</dt>
<dd>
The internal shortcut name for the source file (used for config lookups).</dd>
</dl>
<dl>
<dt>
path</dt>
<dd>
The full path where to write the files.</dd>
</dl>
<dl>
<dt>
verbose</dt>
<dd>
Boolean to indicate whether to be verbose or not.</dd>
</dl>
<div class="spacer">
</div>
Returns a boolean to indicate success.</div>
<div class="subsection">
<h2>$cb-&gt;__create_author_tree([path =&gt; $path, uptodate =&gt; BOOL, verbose =&gt; BOOL])</h2> This method opens a source files and parses its contents into a searchable author-tree or restores a file-cached version of a previous parse, if the sources are uptodate and the file-cache exists.<div class="spacer">
</div>
It takes the following arguments:<dl>
<dt>
uptodate</dt>
<dd>
A flag indicating whether the file-cache is uptodate or not.</dd>
</dl>
<dl>
<dt>
path</dt>
<dd>
The absolute path to the directory holding the source files.</dd>
</dl>
<dl>
<dt>
verbose</dt>
<dd>
A boolean flag indicating whether or not to be verbose.</dd>
</dl>
<div class="spacer">
</div>
Will get information from the config file by default.<div class="spacer">
</div>
Returns a tree on success, false on failure.</div>
<div class="subsection">
<h2>$cb-&gt;_create_mod_tree([path =&gt; $path, uptodate =&gt; BOOL, verbose =&gt; BOOL])</h2> This method opens a source files and parses its contents into a searchable module-tree or restores a file-cached version of a previous parse, if the sources are uptodate and the file-cache exists.<div class="spacer">
</div>
It takes the following arguments:<dl>
<dt>
uptodate</dt>
<dd>
A flag indicating whether the file-cache is up-to-date or not.</dd>
</dl>
<dl>
<dt>
path</dt>
<dd>
The absolute path to the directory holding the source files.</dd>
</dl>
<dl>
<dt>
verbose</dt>
<dd>
A boolean flag indicating whether or not to be verbose.</dd>
</dl>
<div class="spacer">
</div>
Will get information from the config file by default.<div class="spacer">
</div>
Returns a tree on success, false on failure.</div>
<div class="subsection">
<h2>$cb-&gt;__create_dslip_tree([path =&gt; $path, uptodate =&gt; BOOL, verbose =&gt; BOOL])</h2> This method opens a source files and parses its contents into a searchable dslip-tree or restores a file-cached version of a previous parse, if the sources are uptodate and the file-cache exists.<div class="spacer">
</div>
It takes the following arguments:<dl>
<dt>
uptodate</dt>
<dd>
A flag indicating whether the file-cache is uptodate or not.</dd>
</dl>
<dl>
<dt>
path</dt>
<dd>
The absolute path to the directory holding the source files.</dd>
</dl>
<dl>
<dt>
verbose</dt>
<dd>
A boolean flag indicating whether or not to be verbose.</dd>
</dl>
<div class="spacer">
</div>
Will get information from the config file by default.<div class="spacer">
</div>
Returns a tree on success, false on failure.</div>
<div class="subsection">
<h2>$cb-&gt;_dslip_defs ()</h2> This function returns the definition structure (ARRAYREF) of the dslip tree.</div>
<div class="subsection">
<h2>$file = $cb-&gt;_add_custom_module_source( uri =&gt; URI, [verbose =&gt; BOOL] );</h2> Adds a custom source index and updates it based on the provided URI.<div class="spacer">
</div>
Returns the full path to the index file on success or false on failure.</div>
<div class="subsection">
<h2>$index = $cb-&gt;__custom_module_source_index_file( uri =&gt; $uri );</h2> Returns the full path to the encoded index file for $uri, as used by all &quot;custom module source&quot; routines.</div>
<div class="subsection">
<h2>$file = $cb-&gt;_remove_custom_module_source( uri =&gt; URI, [verbose =&gt; BOOL] );</h2> Removes a custom index file based on the URI provided.<div class="spacer">
</div>
Returns the full path to the index file on success or false on failure.</div>
<div class="subsection">
<h2>%files = $cb-&gt;__list_custom_module_sources</h2> This method scans the 'custom-sources' directory in your base directory for additional sources to include in your module tree.<div class="spacer">
</div>
Returns a list of key value pairs as follows:<div class="spacer">
</div>
<br/>
  /full/path/to/source/file%3Fencoded =&gt; http://decoded/mirror/path<br/>
</div>
<div class="subsection">
<h2>$bool = $cb-&gt;__update_custom_module_sources( [verbose =&gt; BOOL] );</h2> Attempts to update all the index files to your custom module sources.<div class="spacer">
</div>
If the index is missing, and it's a &quot;file://&quot; uri, it will generate a new local index for you.<div class="spacer">
</div>
Return true on success, false on failure.</div>
<div class="subsection">
<h2>$ok = $cb-&gt;__update_custom_module_source</h2> Attempts to update all the index files to your custom module sources.<div class="spacer">
</div>
If the index is missing, and it's a &quot;file://&quot; uri, it will generate a new local index for you.<div class="spacer">
</div>
Return true on success, false on failure.</div>
<div class="subsection">
<h2>$bool = $cb-&gt;__write_custom_module_index( path =&gt; /path/to/packages, [to =&gt; /path/to/index/file, verbose =&gt; BOOL] )</h2> Scans the &quot;path&quot; you provided for packages and writes an index with all the available packages to &quot;$path/packages.txt&quot;. If you'd like the index to be written to a different file, provide the &quot;to&quot; argument.<div class="spacer">
</div>
Returns true on success and false on failure.</div>
<div class="subsection">
<h2>$bool = $cb-&gt;__create_custom_module_entries( [verbose =&gt; BOOL] )</h2> Creates entries in the module tree based upon the files as returned by &quot;__list_custom_module_sources&quot;.<div class="spacer">
</div>
Returns true on success, false on failure.</div>
</div>
<table class="foot">
<tr>
<td class="foot-date">
2011-09-26</td>
<td class="foot-os">
perl v5.14.2</td>
</tr>
</table>
</div>
</body>
</html>

