<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/linux/style.css" type="text/css" media="all"/>
<title>
File::MimeInfo(3pm)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
File::MimeInfo(3pm)</td>
<td class="head-vol">
User Contributed Perl Documentation</td>
<td class="head-rtitle">
File::MimeInfo(3pm)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>NAME</h1> File::MimeInfo - Determine file type</div>
<div class="section">
<h1>SYNOPSIS</h1><br/>
  use File::MimeInfo;<br/>
  my $mime_type = mimetype($file);<br/>
</div>
<div class="section">
<h1>DESCRIPTION</h1> This module can be used to determine the mime type of a file. It tries to implement the freedesktop specification for a shared MIME database.<div class="spacer">
</div>
For this module shared-mime-info-spec 0.13 was used.<div class="spacer">
</div>
This package only uses the globs file. No real magic checking is used. The File::MimeInfo::Magic package is provided for magic typing.<div class="spacer">
</div>
If you want to detemine the mimetype of data in a memory buffer you should use File::MimeInfo::Magic in combination with IO::Scalar.<div class="spacer">
</div>
This module loads the various data files when needed. If you want to hash data ealier see the &quot;rehash&quot; methods below.</div>
<div class="section">
<h1>EXPORT</h1> The method &quot;mimetype&quot; is exported by default. The methods &quot;inodetype&quot;, &quot;globs&quot;, &quot;extensions&quot;, &quot;describe&quot;, &quot;mimetype_canon&quot; and &quot;mimetype_isa&quot; can be exported on demand.</div>
<div class="section">
<h1>METHODS</h1><dl>
<dt>
&quot;new()&quot;</dt>
<dd>
Simple constructor to allow Object Oriented use of this module. If you want to use this, include the package as &quot;use File::MimeInfo ();&quot; to avoid importing sub &quot;mimetype()&quot;.</dd>
</dl>
<dl>
<dt>
&quot;mimetype($file)&quot;</dt>
<dd>
Returns a mimetype string for $file, returns undef on failure.<div style="height: 1.00em;">
&#160;</div>
This method bundles &quot;inodetype&quot; and &quot;globs&quot;.<div style="height: 1.00em;">
&#160;</div>
If these methods are unsuccessful the file is read and the mimetype defaults to 'text/plain' or to 'application/octet-stream' when the first ten chars of the file match ascii control chars (white spaces excluded). If the file doesn't exist or isn't readable &quot;undef&quot; is returned.</dd>
</dl>
<dl>
<dt>
&quot;inodetype($file)&quot;</dt>
<dd>
Returns a mimetype in the 'inode' namespace or undef when the file is actually a normal file.</dd>
</dl>
<dl>
<dt>
&quot;globs($file)&quot;</dt>
<dd>
Returns a mimetype string for $file based on the filename and filename extensions. Returns undef on failure. The file doesn't need to exist.<div style="height: 1.00em;">
&#160;</div>
Behaviour in list context (wantarray) is unspecified and will change in future releases.</dd>
</dl>
<dl>
<dt>
&quot;default($file)&quot;</dt>
<dd>
This method decides whether a file is binary or plain text by looking at the first few bytes in the file. Used to decide between &quot;text/plain&quot; and &quot;application/octet-stream&quot; if all other methods have failed.<div style="height: 1.00em;">
&#160;</div>
The spec states that we should check for the ascii control chars and let higher bit chars pass to allow utf8. We try to be more intelligent using perl utf8 support.</dd>
</dl>
<dl>
<dt>
&quot;extensions($mimetype)&quot;</dt>
<dd>
In list context, returns the list of filename extensions that map to the given mimetype. In scalar context, returns the first extension that is found in the database for this mimetype.</dd>
</dl>
<dl>
<dt>
&quot;describe($mimetype, $lang)&quot;</dt>
<dd>
Returns a description of this mimetype as supplied by the mime info database. You can specify a language with the optional parameter $lang, this should be the two letter language code used in the xml files. Also you can set the global variable $File::MimeInfo::LANG to specify a language.<div style="height: 1.00em;">
&#160;</div>
This method returns undef when no xml file was found (i.e. the mimetype doesn't exist in the database). It returns an empty string when the xml file doesn't contain a description in the language you specified.<div style="height: 1.00em;">
&#160;</div>
<i>Currently no real xml parsing is done, it trusts the xml files are nicely formatted.</i></dd>
</dl>
<dl>
<dt>
&quot;mimetype_canon($mimetype)&quot;</dt>
<dd>
Returns the canonical mimetype for a given mimetype. Deprecated mimetypes are typically aliased to their canonical variants. This method only checks aliases, doesn't check whether the mimetype exists.<div style="height: 1.00em;">
&#160;</div>
Use this method as a filter when you take a mimetype as input.</dd>
</dl>
<dl>
<dt>
&quot;mimetype_isa($mimetype)&quot;</dt>
<dd>
</dd>
</dl>
<dl>
<dt>
&quot;mimetype_isa($mimetype, $mimetype)&quot;</dt>
<dd>
When give only one argument this method returns a list with mimetypes that are parent classes for this mimetype.<div style="height: 1.00em;">
&#160;</div>
When given two arguments returns true if the second mimetype is a parent class of the first one.<div style="height: 1.00em;">
&#160;</div>
This method checks the subclasses table and applies a few rules for implicite subclasses.</dd>
</dl>
<dl>
<dt>
&quot;rehash()&quot;</dt>
<dd>
Rehash the data files. Glob information is preparsed when this method is called.<div style="height: 1.00em;">
&#160;</div>
If you want to by-pass the XDG basedir system you can specify your database directories by setting @File::MimeInfo::DIRS. But normally it is better to change the XDG basedir environment variables.</dd>
</dl>
<dl>
<dt>
&quot;rehash_aliases()&quot;</dt>
<dd>
Rehashes the <i>mime/aliases</i> files.</dd>
</dl>
<dl>
<dt>
&quot;rehash_subclasses()&quot;</dt>
<dd>
Rehashes the <i>mime/subclasses</i> files.</dd>
</dl>
</div>
<div class="section">
<h1>DIAGNOSTICS</h1> This module throws an exception when it can't find any data files, when it can't open a data file it found for reading or when a subroutine doesn't get enough arguments. In the first case you either don't have the freedesktop mime info database installed, or your environment variables point to the wrong places, in the second case you have the database installed, but it is broken (the mime info database should logically be world readable).</div>
<div class="section">
<h1>TODO</h1> Make an option for using some caching mechanism to reduce init time.<div class="spacer">
</div>
Make &quot;describe()&quot; use real xml parsing ?</div>
<div class="section">
<h1>LIMITATIONS</h1> Perl versions prior to 5.8.0 do not have the ':utf8' IO Layer, thus for the default method and for reading the xml files utf8 is not supported for these versions.<div class="spacer">
</div>
Since it is not possible to distinguish between encoding types (utf8, latin1, latin2 etc.) in a straightforward manner only utf8 is supported (because the spec recommends this).<div class="spacer">
</div>
This module does not yet check extended attributes for a mimetype. Patches for this are very welcome.</div>
<div class="section">
<h1>BUGS</h1> Please mail the author when you encounter any bugs.</div>
<div class="section">
<h1>AUTHOR</h1> Jaap Karssenberg || Pardus [Larus] &lt;pardus@cpan.org&gt;<div class="spacer">
</div>
Copyright (c) 2003,2008 Jaap G Karssenberg. All rights reserved. This program is free software; you can redistribute it and/or modify it under the same terms as Perl itself.</div>
<div class="section">
<h1>SEE ALSO</h1> File::BaseDir, File::MimeInfo::Magic, File::MimeInfo::Applications, File::MimeInfo::Rox<dl>
<dt>
related CPAN modules</dt>
<dd>
File::MMagic</dd>
</dl>
<dl>
<dt>
freedesktop specifications used</dt>
<dd>
http://www.freedesktop.org/wiki/Specifications/shared-mime-info-spec &lt;http://www.freedesktop.org/wiki/Specifications/shared-mime-info-spec&gt;, http://www.freedesktop.org/wiki/Specifications/basedir-spec &lt;http://www.freedesktop.org/wiki/Specifications/basedir-spec&gt;, http://www.freedesktop.org/wiki/Specifications/desktop-entry-spec &lt;http://www.freedesktop.org/wiki/Specifications/desktop-entry-spec&gt;</dd>
</dl>
<dl>
<dt>
freedesktop mime database</dt>
<dd>
http://www.freedesktop.org/wiki/Software/shared-mime-info &lt;http://www.freedesktop.org/wiki/Software/shared-mime-info&gt;</dd>
</dl>
</div>
<table class="foot">
<tr>
<td class="foot-date">
2011-10-17</td>
<td class="foot-os">
perl v5.12.4</td>
</tr>
</table>
</div>
</body>
</html>

