<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/linux/style.css" type="text/css" media="all"/>
<title>
Class::MOP::Instance(3pm)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
Class::MOP::Instance(3pm)</td>
<td class="head-vol">
User Contributed Perl Documentation</td>
<td class="head-rtitle">
Class::MOP::Instance(3pm)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>NAME</h1> Class::MOP::Instance - Instance Meta Object</div>
<div class="section">
<h1>VERSION</h1> version 2.0401</div>
<div class="section">
<h1>DESCRIPTION</h1> The Instance Protocol controls the creation of object instances, and the storage of attribute values in those instances.<div class="spacer">
</div>
Using this API directly in your own code violates encapsulation, and we recommend that you use the appropriate APIs in Class::MOP::Class and Class::MOP::Attribute instead. Those APIs in turn call the methods in this class as appropriate.<div class="spacer">
</div>
This class also participates in generating inlined code by providing snippets of code to access an object instance.</div>
<div class="section">
<h1>METHODS</h1><div class="subsection">
<h2>Object construction</h2><dl>
<dt>
<b>Class::MOP::Instance-&gt;new(%options)</b></dt>
<dd>
This method creates a new meta-instance object.<div style="height: 1.00em;">
&#160;</div>
It accepts the following keys in %options:</dd>
</dl>
<div style="margin-left: 4.00ex;">
<dl>
<dt>
&#8226;</dt>
<dd>
associated_metaclass<div style="height: 1.00em;">
&#160;</div>
The Class::MOP::Class object for which instances will be created.</dd>
</dl>
<dl>
<dt>
&#8226;</dt>
<dd>
attributes<div style="height: 1.00em;">
&#160;</div>
An array reference of Class::MOP::Attribute objects. These are the attributes which can be stored in each instance.</dd>
</dl>
</div>
<div style="margin-left: 4.00ex;">
</div>
</div>
<div class="subsection">
<h2>Creating and altering instances</h2><dl>
<dt>
<b></b><b>$metainstance</b><b>-&gt;create_instance</b></dt>
<dd>
This method returns a reference blessed into the associated metaclass's class.<div style="height: 1.00em;">
&#160;</div>
The default is to use a hash reference. Subclasses can override this.</dd>
</dl>
<dl>
<dt>
<b></b><b>$metainstance</b><b>-&gt;clone_instance($instance)</b></dt>
<dd>
Given an instance, this method creates a new object by making  <i>shallow</i> clone of the original.</dd>
</dl>
</div>
<div class="subsection">
<h2>Introspection</h2><dl>
<dt>
<b></b><b>$metainstance</b><b>-&gt;associated_metaclass</b></dt>
<dd>
This returns the Class::MOP::Class object associated with the meta-instance object.</dd>
</dl>
<dl>
<dt>
<b></b><b>$metainstance</b><b>-&gt;get_all_slots</b></dt>
<dd>
This returns a list of slot names stored in object instances. In almost all cases, slot names correspond directly attribute names.</dd>
</dl>
<dl>
<dt>
<b></b><b>$metainstance</b><b>-&gt;is_valid_slot($slot_name)</b></dt>
<dd>
This will return true if $slot_name is a valid slot name.</dd>
</dl>
<dl>
<dt>
<b></b><b>$metainstance</b><b>-&gt;get_all_attributes</b></dt>
<dd>
This returns a list of attributes corresponding to the attributes passed to the constructor.</dd>
</dl>
</div>
<div class="subsection">
<h2>Operations on Instance Structures</h2> It's important to understand that the meta-instance object is a different entity from the actual instances it creates. For this reason, any operations on the $instance_structure always require that the object instance be passed to the method.<dl>
<dt>
<b></b><b>$metainstance</b><b>-&gt;get_slot_value($instance_structure, </b><b><i>$slot_name</i></b><b>)</b></dt>
<dd>
</dd>
</dl>
<dl>
<dt>
<b></b><b>$metainstance</b><b>-&gt;set_slot_value($instance_structure, </b><b><i>$slot_name</i></b><b>, </b><b>$value</b><b>)</b></dt>
<dd>
</dd>
</dl>
<dl>
<dt>
<b></b><b>$metainstance</b><b>-&gt;initialize_slot($instance_structure, </b><b><i>$slot_name</i></b><b>)</b></dt>
<dd>
</dd>
</dl>
<dl>
<dt>
<b></b><b>$metainstance</b><b>-&gt;deinitialize_slot($instance_structure, </b><b><i>$slot_name</i></b><b>)</b></dt>
<dd>
</dd>
</dl>
<dl>
<dt>
<b></b><b>$metainstance</b><b>-&gt;initialize_all_slots($instance_structure)</b></dt>
<dd>
</dd>
</dl>
<dl>
<dt>
<b></b><b>$metainstance</b><b>-&gt;deinitialize_all_slots($instance_structure)</b></dt>
<dd>
</dd>
</dl>
<dl>
<dt>
<b></b><b>$metainstance</b><b>-&gt;is_slot_initialized($instance_structure, </b><b><i>$slot_name</i></b><b>)</b></dt>
<dd>
</dd>
</dl>
<dl>
<dt>
<b></b><b>$metainstance</b><b>-&gt;weaken_slot_value($instance_structure, </b><b><i>$slot_name</i></b><b>)</b></dt>
<dd>
</dd>
</dl>
<dl>
<dt>
<b></b><b>$metainstance</b><b>-&gt;slot_value_is_weak($instance_structure, </b><b><i>$slot_name</i></b><b>)</b></dt>
<dd>
</dd>
</dl>
<dl>
<dt>
<b></b><b>$metainstance</b><b>-&gt;strengthen_slot_value($instance_structure, </b><b><i>$slot_name</i></b><b>)</b></dt>
<dd>
</dd>
</dl>
<dl>
<dt>
<b></b><b>$metainstance</b><b>-&gt;rebless_instance_structure($instance_structure, </b><b><i>$new_metaclass</i></b><b>)</b></dt>
<dd>
The exact details of what each method does should be fairly obvious from the method name.</dd>
</dl>
</div>
<div class="subsection">
<h2>Inlinable Instance Operations</h2><dl>
<dt>
<b></b><b>$metainstance</b><b>-&gt;is_inlinable</b></dt>
<dd>
This is a boolean that indicates whether or not slot access operations can be inlined. By default it is true, but subclasses can override this.</dd>
</dl>
<dl>
<dt>
<b></b><b>$metainstance</b><b>-&gt;inline_create_instance($class_variable)</b></dt>
<dd>
This method expects a string that, <i>when inlined</i>, will become a class name. This would literally be something like '$class', not an actual class name.<div style="height: 1.00em;">
&#160;</div>
It returns a snippet of code that creates a new object for the class. This is something like &quot; bless {}, $class_name &quot;.</dd>
</dl>
<dl>
<dt>
<b></b><b>$metainstance</b><b>-&gt;inline_get_is_lvalue</b></dt>
<dd>
Returns whether or not &quot;inline_get_slot_value&quot; is a valid lvalue. This can be used to do extra optimizations when generating inlined methods.</dd>
</dl>
<dl>
<dt>
<b></b><b>$metainstance</b><b>-&gt;inline_slot_access($instance_variable, </b><b><i>$slot_name</i></b><b>)</b></dt>
<dd>
</dd>
</dl>
<dl>
<dt>
<b></b><b>$metainstance</b><b>-&gt;inline_get_slot_value($instance_variable, </b><b><i>$slot_name</i></b><b>)</b></dt>
<dd>
</dd>
</dl>
<dl>
<dt>
<b></b><b>$metainstance</b><b>-&gt;inline_set_slot_value($instance_variable, </b><b><i>$slot_name</i></b><b>, </b><b>$value</b><b>)</b></dt>
<dd>
</dd>
</dl>
<dl>
<dt>
<b></b><b>$metainstance</b><b>-&gt;inline_initialize_slot($instance_variable, </b><b><i>$slot_name</i></b><b>)</b></dt>
<dd>
</dd>
</dl>
<dl>
<dt>
<b></b><b>$metainstance</b><b>-&gt;inline_deinitialize_slot($instance_variable, </b><b><i>$slot_name</i></b><b>)</b></dt>
<dd>
</dd>
</dl>
<dl>
<dt>
<b></b><b>$metainstance</b><b>-&gt;inline_is_slot_initialized($instance_variable, </b><b><i>$slot_name</i></b><b>)</b></dt>
<dd>
</dd>
</dl>
<dl>
<dt>
<b></b><b>$metainstance</b><b>-&gt;inline_weaken_slot_value($instance_variable, </b><b><i>$slot_name</i></b><b>)</b></dt>
<dd>
</dd>
</dl>
<dl>
<dt>
<b></b><b>$metainstance</b><b>-&gt;inline_strengthen_slot_value($instance_variable, </b><b><i>$slot_name</i></b><b>)</b></dt>
<dd>
These methods all expect two arguments. The first is the name of a variable, than when inlined, will represent the object instance. Typically this will be a literal string like '$_[0]'.<div style="height: 1.00em;">
&#160;</div>
The second argument is a slot name.<div style="height: 1.00em;">
&#160;</div>
The method returns a snippet of code that, when inlined, performs some operation on the instance.</dd>
</dl>
<dl>
<dt>
<b></b><b>$metainstance</b><b>-&gt;inline_rebless_instance_structure($instance_variable, </b><b><i>$class_variable</i></b><b>)</b></dt>
<dd>
This takes the name of a variable that will, when inlined, represent the object instance, and the name of a variable that will represent the class to rebless into, and returns code to rebless an instance into a class.</dd>
</dl>
</div>
<div class="subsection">
<h2>Introspection</h2><dl>
<dt>
<b>Class::MOP::Instance-&gt;meta</b></dt>
<dd>
This will return a Class::MOP::Class instance for this class.<div style="height: 1.00em;">
&#160;</div>
It should also be noted that Class::MOP will actually bootstrap this module by installing a number of attribute meta-objects into its metaclass.</dd>
</dl>
</div>
</div>
<div class="section">
<h1>AUTHOR</h1> Moose is maintained by the Moose Cabal, along with the help of many contributors. See &quot;CABAL&quot; in Moose and &quot;CONTRIBUTORS&quot; in Moose for details.</div>
<div class="section">
<h1>COPYRIGHT AND LICENSE</h1> This software is copyright (c) 2011 by Infinity Interactive, Inc..<div class="spacer">
</div>
This is free software; you can redistribute it and/or modify it under the same terms as the Perl 5 programming language system itself.</div>
<table class="foot">
<tr>
<td class="foot-date">
2011-11-17</td>
<td class="foot-os">
perl v5.14.2</td>
</tr>
</table>
</div>
</body>
</html>

