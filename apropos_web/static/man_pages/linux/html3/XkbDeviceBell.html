<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/linux/style.css" type="text/css" media="all"/>
<title>
XkbDeviceBell(3)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
XkbDeviceBell(3)</td>
<td class="head-vol">
XKB FUNCTIONS</td>
<td class="head-rtitle">
XkbDeviceBell(3)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>NAME</h1> XkbDeviceBell - Rings the bell on an X input extension device or the default keyboard</div>
<div class="section">
<h1>SYNOPSIS</h1><div style="margin-left: 5.00ex;text-indent: -5.00ex;" class="spacer">
<b>Bool XkbDeviceBell</b> <b>(Display *</b><i>display</i><b>,</b> <b>Window </b><i>window</i><b>,</b> <b>unsigned int </b><i>device_spec</i><b>,</b> <b>unsigned int </b><i>bell_class</i><b>,</b> <b>unsigned int </b><i>bell_id</i><b>,</b> <b>int </b><i>percent</i><b>,</b> <b>Atom </b><i>name</i><b>);</b></div>
</div>
<div class="section">
<h1>ARGUMENTS</h1><dl>
<dt>
<i>- display</i></dt>
<dd>
connection to the X server</dd>
</dl>
<dl>
<dt>
<i>- window</i></dt>
<dd>
window for which the bell is generated, or None</dd>
</dl>
<dl>
<dt>
<i>- device_spec</i></dt>
<dd>
device ID, or XkbUseCoreKbd</dd>
</dl>
<dl>
<dt>
<i>- bell_class</i></dt>
<dd>
X input extension bell class of the bell to be rung</dd>
</dl>
<dl>
<dt>
<i>- bell_id</i></dt>
<dd>
X input extension bell ID of the bell to be rung</dd>
</dl>
<dl>
<dt>
<i>- percent</i></dt>
<dd>
bell volume, from -100 to 100 inclusive</dd>
</dl>
<dl>
<dt>
<i>- name</i></dt>
<dd>
a name for the bell, or NULL</dd>
</dl>
</div>
<div class="section">
<h1>DESCRIPTION</h1> The core X protocol allows only applications to explicitly sound the system bell with a given duration, pitch, and volume. Xkb extends this capability by allowing clients to attach symbolic names to bells, disable audible bells, and receive an event whenever the keyboard bell is rung. For the purposes of this document, the <i>audible</i> bell is defined to be the system bell, or the default keyboard bell, as opposed to any other audible sound generated elsewhere in the system. You can ask to receive XkbBellNotify events when any client rings any one of the following:<div style="height: 1.00em;">
&#160;</div>
<dl>
<dt>
&#8226;</dt>
<dd>
The default bell</dd>
</dl>
<dl>
<dt>
&#8226;</dt>
<dd>
Any bell on an input device that can be specified by a bell_class and bell_id pair</dd>
</dl>
<dl>
<dt>
&#8226;</dt>
<dd>
Any bell specified only by an arbitrary name. (This is, from the server's point of view, merely a name, and not connected with any physical sound-generating device. Some client application must generate the sound, or visual feedback, if any, that is associated with the name.)<div style="height: 1.00em;">
&#160;</div>
You can also ask to receive XkbBellNotify events when the server rings the default bell or if any client has requested events only (without the bell sounding) for any of the bell types previously listed.<div style="height: 1.00em;">
&#160;</div>
You can disable audible bells on a global basis. For example, a client that replaces the keyboard bell with some other audible cue might want to turn off the AudibleBell control to prevent the server from also generating a sound and avoid cacophony. If you disable audible bells and request to receive XkbBellNotify events, you can generate feedback different from the default bell.<div style="height: 1.00em;">
&#160;</div>
You can, however, override the AudibleBell control by calling one of the functions that force the ringing of a bell in spite of the setting of the AudibleBell control - <i>XkbForceDeviceBell</i> or <i>XkbForceBell.</i> In this case the server does not generate a bell event.<div style="height: 1.00em;">
&#160;</div>
Just as some keyboards can produce keyclicks to indicate when a key is pressed or repeating, Xkb can provide feedback for the controls by using special beep codes. The AccessXFeedback control is used to configure the specific types of operations that generate feedback.<div style="height: 1.00em;">
&#160;</div>
Bell Names<div style="height: 1.00em;">
&#160;</div>
You can associate a name to an act of ringing a bell by converting the name to an Atom and then using this name when you call the functions listed in this chapter. If an event is generated as a result, the name is then passed to all other clients interested in receiving XkbBellNotify events. Note that these are arbitrary names and that there is no binding to any sounds. Any sounds or other effects (such as visual bells on the screen) must be generated by a client application upon receipt of the bell event containing the name. There is no default name for the default keyboard bell. The server does generate some predefined bells for the AccessX controls. These named bells are shown in the Table 1 ; the name is included in any bell event sent to clients that have requested to receive XkbBellNotify events.<div style="height: 1.00em;">
&#160;</div>
<table class="tbl">
<col style="width: 52.00ex;"/>
<col style="width: 18.00ex;"/>
<tbody>
<tr>
<td>
Table 1 Predefined Bells</td>
<td>
</td>
</tr>
<tr>
<td colspan="0">
</td>
</tr>
<tr>
<td>
Action</td>
<td>
Named Bell</td>
</tr>
<tr>
<td colspan="0">
</td>
</tr>
<tr>
<td>
Indicator turned on</td>
<td>
AX_IndicatorOn</td>
</tr>
<tr>
<td>
Indicator turned off</td>
<td>
AX_IndicatorOff</td>
</tr>
<tr>
<td>
More than one indicator changed state</td>
<td>
AX_IndicatorChange</td>
</tr>
<tr>
<td>
Control turned on</td>
<td>
AX_FeatureOn</td>
</tr>
<tr>
<td>
Control turned off</td>
<td>
AX_FeatureOff</td>
</tr>
<tr>
<td>
More than one control changed state</td>
<td>
AX_FeatureChange</td>
</tr>
<tr>
<td>
SlowKeys and BounceKeys about to be turned on or off</td>
<td>
AX_SlowKeysWarning</td>
</tr>
<tr>
<td>
SlowKeys key pressed</td>
<td>
AX_SlowKeyPress</td>
</tr>
<tr>
<td>
SlowKeys key accepted</td>
<td>
AX_SlowKeyAccept</td>
</tr>
<tr>
<td>
SlowKeys key rejected</td>
<td>
AX_SlowKeyReject</td>
</tr>
<tr>
<td>
Accepted SlowKeys key released</td>
<td>
AX_SlowKeyRelease</td>
</tr>
<tr>
<td>
BounceKeys key rejected</td>
<td>
AX_BounceKeyReject</td>
</tr>
<tr>
<td>
StickyKeys key latched</td>
<td>
AX_StickyLatch</td>
</tr>
<tr>
<td>
StickyKeys key locked</td>
<td>
AX_StickyLock</td>
</tr>
<tr>
<td>
StickyKeys key unlocked</td>
<td>
AX_StickyUnlock</td>
</tr>
</tbody>
</table>
<div style="height: 1.00em;">
&#160;</div>
Audible Bells<div style="height: 1.00em;">
&#160;</div>
Using Xkb you can generate bell events that do not necessarily ring the system bell. This is useful if you need to use an audio server instead of the system beep. For example, when an audio client starts, it could disable the audible bell (the system bell) and then listen for XkbBellNotify events. When it receives a XkbBellNotify event, the audio client could then send a request to an audio server to play a sound.<div style="height: 1.00em;">
&#160;</div>
You can control the audible bells feature by passing the XkbAudibleBellMask to <i>XkbChangeEnabledControls.</i> If you set XkbAudibleBellMask on, the server rings the system bell when a bell event occurs. This is the default. If you set XkbAudibleBellMask off and a bell event occurs, the server does not ring the system bell unless you call <i>XkbForceDeviceBell</i> or <i>XkbForceBell.</i><div style="height: 1.00em;">
&#160;</div>
Audible bells are also part of the per-client auto-reset controls.<div style="height: 1.00em;">
&#160;</div>
Bell Functions<div style="height: 1.00em;">
&#160;</div>
Use the functions described in this section to ring bells and to generate bell events.<div style="height: 1.00em;">
&#160;</div>
The input extension has two types of feedbacks that can generate bells - bell feedback and keyboard feedback. Some of the functions in this section have <i>bell_class</i> and <i>bell_id</i> parameters; set them as follows: Set <i>bell_class</i> to BellFeedbackClass or KbdFeedbackClass. A device can have more than one feedback of each type; set <i>bell_id</i> to the particular bell feedback of <i>bell_class</i> type.<div style="height: 1.00em;">
&#160;</div>
The Table 2 shows the conditions that cause a bell to sound or an XkbBellNotifyEvent to be generated when a bell function is called.<div style="height: 1.00em;">
&#160;</div>
<table class="tbl">
<col style="width: 18.00ex;"/>
<col style="width: 11.00ex;"/>
<col style="width: 20.00ex;"/>
<col style="width: 16.00ex;"/>
<tbody>
<tr>
<td>
Table 2 Bell Sounding and Bell Event Generating</td>
<td>
</td>
<td>
</td>
<td>
</td>
</tr>
<tr>
<td colspan="0">
</td>
</tr>
<tr>
<td>
Function called</td>
<td>
AudibleBell</td>
<td>
Server sounds a bell</td>
<td>
Server sends an </td>
</tr>
<tr>
<td>
XkbBellNotifyEvent</td>
<td>
</td>
<td>
</td>
<td>
</td>
</tr>
<tr>
<td colspan="0">
</td>
</tr>
<tr>
<td>
XkbDeviceBell</td>
<td>
On</td>
<td>
Yes</td>
<td>
Yes</td>
</tr>
<tr>
<td>
XkbDeviceBell</td>
<td>
Off</td>
<td>
No</td>
<td>
Yes</td>
</tr>
<tr>
<td>
XkbBell</td>
<td>
On</td>
<td>
Yes</td>
<td>
Yes</td>
</tr>
<tr>
<td>
XkbBell</td>
<td>
Off</td>
<td>
No</td>
<td>
Yes</td>
</tr>
<tr>
<td>
XkbDeviceBellEvent</td>
<td>
On or Off</td>
<td>
No</td>
<td>
Yes</td>
</tr>
<tr>
<td>
XkbBellEvent</td>
<td>
On or Off</td>
<td>
No</td>
<td>
Yes</td>
</tr>
<tr>
<td>
XkbDeviceForceBell</td>
<td>
On or Off</td>
<td>
Yes</td>
<td>
No</td>
</tr>
<tr>
<td>
XkbForceBell</td>
<td>
On or Off</td>
<td>
Yes</td>
<td>
No</td>
</tr>
</tbody>
</table>
<div style="height: 1.00em;">
&#160;</div>
Set <i>percent</i> to be the volume relative to the base volume for the keyboard as described for .I XBell.<div style="height: 1.00em;">
&#160;</div>
Note that <i>bell_class</i> and <i>bell_id</i> indicate the bell to physically ring. <i>name</i> is simply an arbitrary moniker for the client application's use.<div style="height: 1.00em;">
&#160;</div>
To determine the current feedback settings of an extension input device, use <i>XGetFeedbackControl.</i> See the X input extension documentation for more information on <i>XGetFeedbackControl</i> and related data structures.<div style="height: 1.00em;">
&#160;</div>
If a compatible keyboard extension is not present in the X server, <i>XkbDeviceBell</i> immediately returns False. Otherwise, <i>XkbDeviceBell</i> rings the bell as specified for the display and keyboard device and returns True. If you have disabled the audible bell, the server does not ring the system bell, although it does generate a <i>XkbBellNotify</i> event.<div style="height: 1.00em;">
&#160;</div>
You can call <i>XkbDeviceBell</i> without first initializing the keyboard extension.</dd>
</dl>
</div>
<div class="section">
<h1>STRUCTURES</h1> Xkb generates XkbBellNotify events for all bells except for those resulting from calls to <i>XkbForceDeviceBell</i> and <i>XkbForceBell.</i> To receive XkbBellNotify events under all possible conditions, pass XkbBellNotifyMask in both the <i>bits_to_change</i> and <i>values_for_bits</i> parameters to <i>XkbSelectEvents.</i><div style="height: 1.00em;">
&#160;</div>
The XkbBellNotify event has no event details. It is either selected or it is not. However, you can call <i>XkbSelectEventDetails</i> using XkbBellNotify as the <i>event_type</i> and specifying XkbAllBellNotifyMask in <i>bits_to_change</i> and <i>values_for_bits.</i> This has the same effect as a call to <i>XkbSelectEvents.</i><div style="height: 1.00em;">
&#160;</div>
The structure for the XkbBellNotify event type contains:<div class="spacer">
</div>
<br/>
   typedef struct _XkbBellNotify {<br/>
       int            type;        /&#8727; Xkb extension base event code */<br/>
       unsigned long  serial;      /&#8727; X server serial number for event */<br/>
       Bool           send_event;  /&#8727; True =&gt; synthetically generated */<br/>
       Display *      display;     /&#8727; server connection where event generated */<br/>
       Time           time;        /&#8727; server time when event generated */<br/>
       int            xkb_type;    /&#8727; XkbBellNotify */<br/>
       unsigned int   device;      /&#8727; Xkb device ID, will not be XkbUseCoreKbd */<br/>
       int            percent;     /&#8727; requested volume as % of max */<br/>
       int            pitch;       /&#8727; requested pitch in Hz */<br/>
       int            duration;    /&#8727; requested duration in microseconds */<br/>
       unsigned int   bell_class;  /&#8727; X input extension feedback class */<br/>
       unsigned int   bell_id;     /&#8727; X input extension feedback ID */<br/>
       Atom           name;        /&#8727; &quot;name&quot; of requested bell */<br/>
       Window         window;      /&#8727; window associated with event */<br/>
       Bool           event_only;  /&#8727; False -&gt; the server did not produce a beep */<br/>
   } XkbBellNotifyEvent;<br/>
   <br/>
If your application needs to generate visual bell feedback on the screen when it receives a bell event, use the window ID in the XkbBellNotifyEvent, if present.<div style="height: 1.00em;">
&#160;</div>
</div>
<div class="section">
<h1>SEE ALSO</h1> <b>XBell</b>(3), <b>XkbBellNotify</b>(3), <b>XkbChangeEnabledControls</b>(3), <b>XkbDeviceBell</b>(3), <b>XkbForceBell</b>(3), <b>XkbForceDeviceBell</b>(3), <b>XGetFeedbackControl</b>(3), <b>XkbSelectEvents</b>(3)<div style="height: 1.00em;">
&#160;</div>
</div>
<table class="foot">
<tr>
<td class="foot-date">
libX11 1.4.99.1</td>
<td class="foot-os">
X Version 11</td>
</tr>
</table>
</div>
</body>
</html>

