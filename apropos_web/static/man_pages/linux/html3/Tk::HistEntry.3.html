<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/linux/style.css" type="text/css" media="all"/>
<title>
HistEntry(3pm)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
HistEntry(3pm)</td>
<td class="head-vol">
User Contributed Perl Documentation</td>
<td class="head-rtitle">
HistEntry(3pm)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>NAME</h1> Tk::HistEntry - Entry widget with history capability</div>
<div class="section">
<h1>SYNOPSIS</h1><br/>
    use Tk::HistEntry;<br/>
<div class="spacer">
</div>
<br/>
    $hist1 = $top-&gt;HistEntry(-textvariable =&gt; \$var1);<br/>
    $hist2 = $top-&gt;SimpleHistEntry(-textvariable =&gt; \$var2);<br/>
</div>
<div class="section">
<h1>DESCRIPTION</h1> &quot;Tk::HistEntry&quot; defines entry widgets with history capabilities. The widgets come in two flavours:<dl>
<dt>
&quot;HistEntry&quot; (in package &quot;Tk::HistEntry::Browse&quot;) - with associated browse entry</dt>
<dd>
</dd>
</dl>
<dl>
<dt>
&quot;SimpleHistEntry&quot; (in package &quot;Tk::HistEntry::Simple&quot;) - plain widget without browse entry</dt>
<dd>
</dd>
</dl>
<div class="spacer">
</div>
The user may browse with the <b>Up</b> and <b>Down</b> keys through the history list. New history entries may be added either manually by binding the  <b>Return</b> key to <b></b><b><i>historyAdd()</i></b><b></b> or automatically by setting the  <b>-command</b> option.</div>
<div class="section">
<h1>OPTIONS</h1>  <b>HistEntry</b> is an descendant of <b>BrowseEntry</b> and thus supports all of its standard options.<div class="spacer">
</div>
<b>SimpleHistEntry</b> is an descendant of <b>Entry</b> and supports all of the  <b>Entry</b> options.<div class="spacer">
</div>
In addition, the widgets support following specific options:<dl>
<dt>
<b>-textvariable</b> or <b>-variable</b></dt>
<dd>
Variable which is tied to the HistEntry widget. Either <b>-textvariable</b> (like in Entry) or  <b>-variable</b> (like in BrowseEntry) may be used.</dd>
</dl>
<dl>
<dt>
<b>-command</b></dt>
<dd>
Specifies a callback, which is executed when the Return key was pressed or the  <b>invoke</b> method is called. The callback reveives three arguments: the reference to the HistEntry widget, the current textvariable value and a boolean value, which tells whether the string was added to the history list (e.g. duplicates and empty values are not added to the history list).</dd>
</dl>
<dl>
<dt>
<b>-dup</b></dt>
<dd>
Specifies whether duplicate entries are allowed in the history list. Defaults to true.</dd>
</dl>
<dl>
<dt>
<b>-bell</b></dt>
<dd>
If set to true, rings the bell if the user tries to move off of the history or if a search was not successful. Defaults to true.</dd>
</dl>
<dl>
<dt>
<b>-limit</b></dt>
<dd>
Limits the number of history entries. Defaults to unlimited.</dd>
</dl>
<dl>
<dt>
<b>-match</b></dt>
<dd>
Turns auto-completion on.</dd>
</dl>
<dl>
<dt>
<b>-case</b></dt>
<dd>
If set to true a true value, then be case sensitive on auto-completion. Defaults to 1.</dd>
</dl>
</div>
<div class="section">
<h1>METHODS</h1><dl>
<dt>
<b>historyAdd(</b>[<i>string</i>]<b>)</b></dt>
<dd>
Adds string (or the current textvariable value if not set) manually to the history list.  <b>addhistory</b> is an alias for <b>historyAdd</b>. Returns the added string or undef if no addition was made.</dd>
</dl>
<dl>
<dt>
<b>invoke(</b>[<i>string</i>]<b>)</b></dt>
<dd>
Invokes the command specified with <b>-command</b>.</dd>
</dl>
<dl>
<dt>
<b>history(</b>[<i>arrayref</i>]<b>)</b></dt>
<dd>
Without argument, returns the current history list. With argument (a reference to an array), replaces the history list.</dd>
</dl>
<dl>
<dt>
<b>historySave(</b><i>file</i><b>)</b></dt>
<dd>
Save the history list to the named file.</dd>
</dl>
<dl>
<dt>
<b>historyMergeFromFile(</b><i>file</i><b>)</b></dt>
<dd>
Merge the history list from the named file to the end of the current history list of the widget.</dd>
</dl>
<dl>
<dt>
<b>historyReset</b></dt>
<dd>
Remove all entries from the history list.</dd>
</dl>
</div>
<div class="section">
<h1>KEY BINDINGS</h1><dl>
<dt>
<b>Up</b>, <b>Control-p</b></dt>
<dd>
Selects the previous history entry.</dd>
</dl>
<dl>
<dt>
<b>Down</b>, <b>Control-n</b></dt>
<dd>
Selects the next history entry.</dd>
</dl>
<dl>
<dt>
<b>Meta-&lt;</b>, <b>Alt-&lt;</b></dt>
<dd>
Selects first entry.</dd>
</dl>
<dl>
<dt>
<b>Meta-&gt;</b>, <b>Alt-&gt;</b></dt>
<dd>
Selects last entry.</dd>
</dl>
<dl>
<dt>
<b>Control-r</b></dt>
<dd>
The current content of the widget is searched backward in the history.</dd>
</dl>
<dl>
<dt>
<b>Control-s</b></dt>
<dd>
The current content of the widget is searched forward in the history.</dd>
</dl>
<dl>
<dt>
<b>Return</b></dt>
<dd>
If <b>-command</b> is set, adds current content to the history list and executes the associated callback.</dd>
</dl>
</div>
<div class="section">
<h1>EXAMPLE</h1> This is an simple example for Tk::HistEntry. More examples can be found in the t and examples directories of the source distribution.<div class="spacer">
</div>
<br/>
    use Tk;<br/>
    use Tk::HistEntry;<br/>
<div class="spacer">
</div>
<br/>
    $top = new MainWindow;<br/>
    $he = $top-&gt;HistEntry(-textvariable =&gt; \$foo,<br/>
                          -command =&gt; sub {<br/>
                              # automatically adds $foo to history<br/>
                              print STDERR &quot;Do something with $foo\n&quot;;<br/>
                          })-&gt;pack;<br/>
    $b = $top-&gt;Button(-text =&gt; 'Do it',<br/>
                      -command =&gt; sub { $he-&gt;invoke })-&gt;pack;<br/>
    MainLoop;<br/>
<div class="spacer">
</div>
If you like to not depend on the installation of Tk::HistEntry, you can write something like this:<div class="spacer">
</div>
<br/>
    $Entry = &quot;Entry&quot;; # default Entry widget<br/>
    eval {<br/>
        # try loading the module, otherwise $Entry is left to the value &quot;Entry&quot;<br/>
        require Tk::HistEntry;<br/>
        $Entry = &quot;SimpleHistEntry&quot;;<br/>
    };<br/>
    $entry = $mw-&gt;$Entry(-textvariable =&gt; \$res)-&gt;pack;<br/>
    $entry-&gt;bind(&quot;&lt;Return&gt;&quot; =&gt; sub {<br/>
                                   # check whether the historyAdd method is<br/>
                                   # known to the widget<br/>
                                   if ($entry-&gt;can('historyAdd')) {<br/>
                                       $entry-&gt;historyAdd;<br/>
                                   }<br/>
                               });<br/>
<div class="spacer">
</div>
In this approach the history lives in an array variable. Here the entry widget does not need to be permanent, that is, it is possible to destroy the containing window and restore the history again:<div class="spacer">
</div>
<br/>
    $Entry = &quot;Entry&quot;;<br/>
    eval {<br/>
        require Tk::HistEntry;<br/>
        $Entry = &quot;HistEntry&quot;;<br/>
    };<br/>
    $entry = $mw-&gt;$Entry(-textvariable =&gt; \$res)-&gt;pack;<br/>
    if ($entry-&gt;can('history') &amp;&amp; @history) {<br/>
        $entry-&gt;history(\@history);<br/>
    }<br/>
<div class="spacer">
</div>
<br/>
    # Later, after clicking on a hypothetical &quot;Ok&quot; button:<br/>
    if ($res ne &quot;&quot; &amp;&amp; $entry-&gt;can('historyAdd')) {<br/>
        $entry-&gt;historyAdd($res);<br/>
        @history = $entry-&gt;history;<br/>
    }<br/>
</div>
<div class="section">
<h1>BUGS/TODO</h1><br/>
 - C-s/C-r do not work as nice as in gnu readline<br/>
 - use -browsecmd from Tk::BrowseEntry<br/>
 - use Tie::Array if present<br/>
</div>
<div class="section">
<h1>AUTHOR</h1> Slaven Rezic &lt;slaven@rezic.de&gt;</div>
<div class="section">
<h1>CREDITS</h1> Thanks for Jason Smith &lt;smithj4@rpi.edu&gt; and Benny Khoo &lt;kkhoo1@penang.intel.com&gt; for their suggestions. The auto-completion code is stolen from Tk::IntEntry by Dave Collins &lt;Dave.Collins@tiuk.ti.com&gt;.</div>
<div class="section">
<h1>COPYRIGHT</h1> Copyright (c) 1997, 2000, 2001, 2003 Slaven Rezic. All rights reserved. This package is free software; you can redistribute it and/or modify it under the same terms as Perl itself.</div>
<table class="foot">
<tr>
<td class="foot-date">
2007-02-02</td>
<td class="foot-os">
perl v5.8.8</td>
</tr>
</table>
</div>
</body>
</html>

