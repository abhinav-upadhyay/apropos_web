<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/linux/style.css" type="text/css" media="all"/>
<title>
XkbFreeServerMap(3)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
XkbFreeServerMap(3)</td>
<td class="head-vol">
XKB FUNCTIONS</td>
<td class="head-rtitle">
XkbFreeServerMap(3)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>NAME</h1> XkbFreeServerMap - Free memory used by the server member of an XkbDescRec structure</div>
<div class="section">
<h1>SYNOPSIS</h1><div style="margin-left: 5.00ex;text-indent: -5.00ex;" class="spacer">
<b>void XkbFreeServerMap</b> <b>(XkbDescPtr </b><i>xkb</i><b>,</b> <b>unsigned int </b><i>which</i><b>,</b> <b>Bool </b><i>free_all</i><b>);</b></div>
</div>
<div class="section">
<h1>ARGUMENTS</h1><dl>
<dt>
<i>- xkb</i></dt>
<dd>
keyboard description containing server map to free</dd>
</dl>
<dl>
<dt>
<i>- which</i></dt>
<dd>
mask identifying components of map to free</dd>
</dl>
<dl>
<dt>
<i>- free_all</i></dt>
<dd>
True =&gt; free all server map components and server itself</dd>
</dl>
</div>
<div class="section">
<h1>DESCRIPTION</h1> The <i>XkbFreeServerMap</i> function frees the specified components of server map in the XkbDescRec structure specified by the <i>xkb</i> parameter and sets the corresponding structure component values to NULL. The <i>which parameter specifies a combination of the server map masks and is a</i> bitwise inclusive OR of the masks listed in Table 1. If <i>free_all</i> is True, <i>which</i> is ignored and <i>XkbFreeServerMap</i> frees every non-NULL structure component in the server map, frees the XkbServerMapRec structure referenced by the <i>server</i> member of the <i>xkb</i> parameter, and sets the <i>server</i> member to NULL.<div style="height: 1.00em;">
&#160;</div>
<table class="tbl">
<col style="width: 31.00ex;"/>
<col style="width: 203.00ex;"/>
<tbody>
<tr>
<td>
Table 1 XkbAllocServerMap Masks</td>
<td>
</td>
</tr>
<tr>
<td colspan="0">
</td>
</tr>
<tr>
<td>
Mask</td>
<td>
Effect</td>
</tr>
<tr>
<td colspan="0">
</td>
</tr>
<tr>
<td>
XkbExplicitComponentsMask</td>
<td>
The min_key_code and max_key_code fields of the xkb parameter are used to allocate the explicit field of the server map.</td>
</tr>
<tr>
<td>
</td>
<td>
</td>
</tr>
<tr>
<td>
XkbKeyActionsMask</td>
<td>
The min_key_code and max_key_code fields of the xkb parameter are used to  allocate the key_acts  field of the server map. The count_acts parameter is used to allocate the acts  field of the  server map.</td>
</tr>
<tr>
<td>
</td>
<td>
</td>
</tr>
<tr>
<td>
XkbKeyBehaviorsMask</td>
<td>
The min_key_code and max_key_code fields of the xkb parameter are used to  allocate the behaviors  field of the server map.</td>
</tr>
<tr>
<td>
</td>
<td>
</td>
</tr>
<tr>
<td>
XkbVirtualModMapMask</td>
<td>
The min_key_code and max_key_code fields of the xkb parameter are used to  allocate the vmodmap  field of the server map.</td>
</tr>
<tr>
<td>
</td>
<td>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section">
<h1>STRUCTURES</h1> The complete description of an Xkb keyboard is given by an XkbDescRec. The component structures in the XkbDescRec represent the major Xkb components.<div style="height: 1.00em;">
&#160;</div>
<br/>
typedef struct {<br/>
   struct _XDisplay * display;      /&#8727; connection to X server */<br/>
   unsigned short     flags;        /&#8727; private to Xkb, do not modify */<br/>
   unsigned short     device_spec;  /&#8727; device of interest */<br/>
   KeyCode            min_key_code; /&#8727; minimum keycode for device */<br/>
   KeyCode            max_key_code; /&#8727; maximum keycode for device */<br/>
   XkbControlsPtr     ctrls;        /&#8727; controls */<br/>
   XkbServerMapPtr    server;       /&#8727; server keymap */<br/>
   XkbClientMapPtr    map;          /&#8727; client keymap */<br/>
   XkbIndicatorPtr    indicators;   /&#8727; indicator map */<br/>
   XkbNamesPtr        names;        /&#8727; names for all components */<br/>
   XkbCompatMapPtr    compat;       /&#8727; compatibility map */<br/>
   XkbGeometryPtr     geom;         /&#8727; physical geometry of keyboard */<br/>
} XkbDescRec, *XkbDescPtr;<div class="spacer">
</div>
<br/>
The <i>display</i> field points to an X display structure. The <i>flags field is private to the library: modifying</i> <i>flags</i> may yield unpredictable results. The <i>device_spec</i> field specifies the device identifier of the keyboard input device, or XkbUseCoreKeyboard, which specifies the core keyboard device. The <i>min_key_code</i> and <i>max_key_code</i> fields specify the least and greatest keycode that can be returned by the keyboard.<div style="height: 1.00em;">
&#160;</div>
Each structure component has a corresponding mask bit that is used in function calls to indicate that the structure should be manipulated in some manner, such as allocating it or freeing it. These masks and their relationships to the fields in the XkbDescRec are shown in Table 2.<div style="height: 1.00em;">
&#160;</div>
<table class="tbl">
<col style="width: 20.00ex;"/>
<col style="width: 16.00ex;"/>
<col style="width: 7.00ex;"/>
<tbody>
<tr>
<td>
Table 2 Mask Bits for XkbDescRec</td>
<td>
</td>
<td>
</td>
</tr>
<tr>
<td colspan="0">
</td>
</tr>
<tr>
<td>
Mask Bit</td>
<td>
XkbDescRec Field</td>
<td>
Value</td>
</tr>
<tr>
<td colspan="0">
</td>
</tr>
<tr>
<td>
XkbControlsMask</td>
<td>
ctrls</td>
<td>
(1L&lt;&lt;0)</td>
</tr>
<tr>
<td>
XkbServerMapMask</td>
<td>
server</td>
<td>
(1L&lt;&lt;1)</td>
</tr>
<tr>
<td>
XkbIClientMapMask</td>
<td>
map</td>
<td>
(1L&lt;&lt;2)</td>
</tr>
<tr>
<td>
XkbIndicatorMapMask</td>
<td>
indicators</td>
<td>
(1L&lt;&lt;3)</td>
</tr>
<tr>
<td>
XkbNamesMask</td>
<td>
names</td>
<td>
(1L&lt;&lt;4)</td>
</tr>
<tr>
<td>
XkbCompatMapMask</td>
<td>
compat</td>
<td>
(1L&lt;&lt;5)</td>
</tr>
<tr>
<td>
XkbGeometryMask</td>
<td>
geom</td>
<td>
(1L&lt;&lt;6)</td>
</tr>
<tr>
<td>
XkbAllComponentsMask</td>
<td>
All Fields</td>
<td>
(0x7f)</td>
</tr>
</tbody>
</table>
<div style="height: 1.00em;">
&#160;</div>
The Xkb server map contains the information the server needs to interpret key events and is of type XkbServerMapRec:<div style="height: 1.00em;">
&#160;</div>
<br/>
#define XkbNumVirtualMods          16<div class="spacer">
</div>
<br/>
typedef struct {                    /&#8727; Server Map */<br/>
    unsigned short    num_acts;     /&#8727; # of occupied entries in acts */<br/>
    unsigned short    size_acts;    /&#8727; # of entries in acts */<br/>
    XkbAction *       acts;         /&#8727; linear 2d tables of key actions, 1 per keycode */<br/>
    XkbBehavior *     behaviors;    /&#8727; key behaviors,1 per keycode */<br/>
    unsigned short *  key_acts;     /&#8727; index into acts, 1 per keycode */<br/>
    unsigned char *   explicit;     /&#8727; explicit overrides of core remapping, 1 per key */<br/>
    unsigned char     vmods[XkbNumVirtualMods]; /&#8727; real mods bound to virtual mods */<br/>
    unsigned short *  vmodmap;      /&#8727; virtual mods bound to key, 1 per keycode*/<br/>
} XkbServerMapRec, *XkbServerMapPtr;<div class="spacer">
</div>
<br/>
</div>
<table class="foot">
<tr>
<td class="foot-date">
libX11 1.4.99.1</td>
<td class="foot-os">
X Version 11</td>
</tr>
</table>
</div>
</body>
</html>

