<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/linux/style.css" type="text/css" media="all"/>
<title>
GETCONTEXT(3P)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
GETCONTEXT(3P)</td>
<td class="head-vol">
POSIX Programmer's Manual</td>
<td class="head-rtitle">
GETCONTEXT(3P)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>PROLOG</h1> This manual page is part of the POSIX Programmer's Manual. The Linux implementation of this interface may differ (consult the corresponding Linux manual page for details of Linux behavior), or the interface may not be implemented on Linux.</div>
<div class="section">
<h1>NAME</h1> getcontext, setcontext - get and set current user context</div>
<div class="section">
<h1>SYNOPSIS</h1>  <b>#include &lt;ucontext.h&gt;</b><div style="height: 0.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
int getcontext(ucontext_t *<b></b><i>ucp</i><b></b><b>);</b><div style="height: 0.00em;">
&#160;</div>
int setcontext(const ucontext_t *<b></b><i>ucp</i><b></b><b>); </b><b></b>  <b></b><b></b><div style="height: 0.00em;">
&#160;</div>
<b></b></div>
<div class="section">
<h1>DESCRIPTION</h1> The  <i>getcontext</i>() function shall initialize the structure pointed to by  <i>ucp</i> to the current user context of the calling thread. The  <b>ucontext_t</b> type that <i>ucp</i> points to defines the user context and includes the contents of the calling thread's machine registers, the signal mask, and the current execution stack.<div class="spacer">
</div>
The <i>setcontext</i>() function shall restore the user context pointed to by  <i>ucp</i>. A successful call to  <i>setcontext</i>() shall not return; program execution resumes at the point specified by the  <i>ucp</i> argument passed to  <i>setcontext</i>(). The <i>ucp</i> argument should be created either by a prior call to  <i>getcontext</i>() or <i>makecontext</i>(), or by being passed as an argument to a signal handler. If the  <i>ucp</i> argument was created with  <i>getcontext</i>(), program execution continues as if the corresponding call of  <i>getcontext</i>() had just returned. If the  <i>ucp</i> argument was created with <i>makecontext</i>(), program execution continues with the function passed to  <i>makecontext</i>(). When that function returns, the thread shall continue as if after a call to  <i>setcontext</i>() with the <i>ucp</i> argument that was input to  <i>makecontext</i>(). If the <i>uc_link</i> member of the <b>ucontext_t</b> structure pointed to by the  <i>ucp</i> argument is equal to 0, then this context is the main context, and the thread shall exit when this context returns. The effects of passing a  <i>ucp</i> argument obtained from any other source are unspecified.</div>
<div class="section">
<h1>RETURN VALUE</h1> Upon successful completion,  <i>setcontext</i>() shall not return and  <i>getcontext</i>() shall return 0; otherwise, a value of -1 shall be returned.</div>
<div class="section">
<h1>ERRORS</h1> No errors are defined.<div class="spacer">
</div>
<i>The following sections are informative.</i></div>
<div class="section">
<h1>EXAMPLES</h1> Refer to  <i>makecontext</i>().</div>
<div class="section">
<h1>APPLICATION USAGE</h1> When a signal handler is executed, the current user context is saved and a new context is created. If the thread leaves the signal handler via  <i>longjmp</i>(), then it is unspecified whether the context at the time of the corresponding  <i>setjmp</i>() call is restored and thus whether future calls to  <i>getcontext</i>() provide an accurate representation of the current context, since the context restored by  <i>longjmp</i>() does not necessarily contain all the information that  <i>setcontext</i>() requires. Signal handlers should use  <i>siglongjmp</i>() or <i>setcontext</i>() instead.<div class="spacer">
</div>
Conforming applications should not modify or access the <i>uc_mcontext</i> member of  <b>ucontext_t</b>. A conforming application cannot assume that context includes any process-wide static data, possibly including  <i>errno</i>. Users manipulating contexts should take care to handle these explicitly when required.<div class="spacer">
</div>
Use of contexts to create alternate stacks is not defined by this volume of IEEE&#160;Std&#160;1003.1-2001.</div>
<div class="section">
<h1>RATIONALE</h1> None.</div>
<div class="section">
<h1>FUTURE DIRECTIONS</h1> None.</div>
<div class="section">
<h1>SEE ALSO</h1>  <i>bsd_signal</i>(), <i>makecontext</i>(), <i>setcontext</i>(), <i>setjmp</i>(),  <i>sigaction</i>(), <i>sigaltstack</i>(), <i>siglongjmp</i>(), <i>sigprocmask</i>(),  <i>sigsetjmp</i>(), the Base Definitions volume of IEEE&#160;Std&#160;1003.1-2001,  <i>&lt;ucontext.h&gt;</i></div>
<div class="section">
<h1>COPYRIGHT</h1> Portions of this text are reprinted and reproduced in electronic form from IEEE Std 1003.1, 2003 Edition, Standard for Information Technology -- Portable Operating System Interface (POSIX), The Open Group Base Specifications Issue 6, Copyright (C) 2001-2003 by the Institute of Electrical and Electronics Engineers, Inc and The Open Group. In the event of any discrepancy between this version and the original IEEE and The Open Group Standard, the original IEEE and The Open Group Standard is the referee document. The original Standard can be obtained online at http://www.opengroup.org/unix/online.html .</div>
<table class="foot">
<tr>
<td class="foot-date">
2003</td>
<td class="foot-os">
IEEE/The Open Group</td>
</tr>
</table>
</div>
</body>
</html>

