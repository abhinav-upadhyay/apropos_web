<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/linux/style.css" type="text/css" media="all"/>
<title>
GETCWD(3P)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
GETCWD(3P)</td>
<td class="head-vol">
POSIX Programmer's Manual</td>
<td class="head-rtitle">
GETCWD(3P)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>PROLOG</h1> This manual page is part of the POSIX Programmer's Manual. The Linux implementation of this interface may differ (consult the corresponding Linux manual page for details of Linux behavior), or the interface may not be implemented on Linux.</div>
<div class="section">
<h1>NAME</h1> getcwd - get the pathname of the current working directory</div>
<div class="section">
<h1>SYNOPSIS</h1>  <b>#include &lt;unistd.h&gt;</b><div style="height: 0.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
char *getcwd(char *<b></b><i>buf</i><b></b><b>, size_t</b><b> </b><i>size</i><b></b><b>);</b><div style="height: 0.00em;">
&#160;</div>
<b></b></div>
<div class="section">
<h1>DESCRIPTION</h1> The  <i>getcwd</i>() function shall place an absolute pathname of the current working directory in the array pointed to by  <i>buf</i>, and return <i>buf</i>. The pathname copied to the array shall contain no components that are symbolic links. The  <i>size</i> argument is the size in bytes of the character array pointed to by the  <i>buf</i> argument. If <i>buf</i> is a null pointer, the behavior of  <i>getcwd</i>() is unspecified.</div>
<div class="section">
<h1>RETURN VALUE</h1> Upon successful completion,  <i>getcwd</i>() shall return the <i>buf</i> argument. Otherwise,  <i>getcwd</i>() shall return a null pointer and set  <i>errno</i> to indicate the error. The contents of the array pointed to by  <i>buf</i> are then undefined.</div>
<div class="section">
<h1>ERRORS</h1> The  <i>getcwd</i>() function shall fail if:<dl>
<dt>
<b>EINVAL</b></dt>
<dd>
The <i>size</i> argument is 0.</dd>
</dl>
<dl>
<dt>
<b>ERANGE</b></dt>
<dd>
The <i>size</i> argument is greater than 0, but is smaller than the length of the pathname +1.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<div class="spacer">
</div>
The <i>getcwd</i>() function may fail if:<dl>
<dt>
<b>EACCES</b></dt>
<dd>
Read or search permission was denied for a component of the pathname.</dd>
</dl>
<dl>
<dt>
<b>ENOMEM</b></dt>
<dd>
Insufficient storage space is available.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<div class="spacer">
</div>
<i>The following sections are informative.</i></div>
<div class="section">
<h1>EXAMPLES</h1><div class="subsection">
<h2>Determining the Absolute Pathname of the Current Working Directory</h2> The following example returns a pointer to an array that holds the absolute pathname of the current working directory. The pointer is returned in the  <i>ptr</i> variable, which points to the  <i>buf</i> array where the pathname is stored.<div style="height: 1.00em;">
&#160;</div>
<div style="margin-left: 5.00ex;">
<div class="spacer">
</div>
<br/>
<b>#include &lt;stdlib.h&gt;</b><br/>
<b>#include &lt;unistd.h&gt;</b><br/>
<b>...</b><br/>
<b>long size;</b><br/>
<b>char *buf;</b><br/>
<b>char *ptr;</b><div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
<br/>
size = pathconf(&quot;.&quot;, _PC_PATH_MAX);<div style="height: 1.00em;">
&#160;</div>
<div class="spacer">
</div>
<br/>
if ((buf = (char *)malloc((size_t)size)) != NULL)<br/>
    ptr = getcwd(buf, (size_t)size);<br/>
...<br/>
<b></b><br/>
</div>
</div>
</div>
<div class="section">
<h1>APPLICATION USAGE</h1> None.</div>
<div class="section">
<h1>RATIONALE</h1> Since the maximum pathname length is arbitrary unless {PATH_MAX} is defined, an application generally cannot supply a  <i>buf</i> with  <i>size</i> {{PATH_MAX}+1}.<div class="spacer">
</div>
Having <i>getcwd</i>() take no arguments and instead use the <i>malloc</i>() function to produce space for the returned argument was considered. The advantage is that  <i>getcwd</i>() knows how big the working directory pathname is and can allocate an appropriate amount of space. But the programmer would have to use the  <i>free</i>() function to free the resulting object, or each use of  <i>getcwd</i>() would further reduce the available memory. Also,  <i>malloc</i>() and <i>free</i>() are used nowhere else in this volume of IEEE&#160;Std&#160;1003.1-2001. Finally,  <i>getcwd</i>() is taken from the SVID where it has the two arguments used in this volume of IEEE&#160;Std&#160;1003.1-2001.<div class="spacer">
</div>
The older function <i>getwd</i>() was rejected for use in this context because it had only a buffer argument and no  <i>size</i> argument, and thus had no way to prevent overwriting the buffer, except to depend on the programmer to provide a large enough buffer.<div class="spacer">
</div>
On some implementations, if <i>buf</i> is a null pointer, <i>getcwd</i>() may obtain  <i>size</i> bytes of memory using <i>malloc</i>(). In this case, the pointer returned by  <i>getcwd</i>() may be used as the argument in a subsequent call to  <i>free</i>(). Invoking <i>getcwd</i>() with  <i>buf</i> as a null pointer is not recommended in conforming applications.<div class="spacer">
</div>
If a program is operating in a directory where some (grand)parent directory does not permit reading,  <i>getcwd</i>() may fail, as in most implementations it must read the directory to determine the name of the file. This can occur if search, but not read, permission is granted in an intermediate directory, or if the program is placed in that directory by some more privileged process (for example, login). Including the [EACCES] error condition makes the reporting of the error consistent and warns the application writer that  <i>getcwd</i>() can fail for reasons beyond the control of the application writer or user. Some implementations can avoid this occurrence (for example, by implementing  <i>getcwd</i>() using  <i>pwd</i>, where <i>pwd</i> is a set-user-root process), thus the error was made optional. Since this volume of IEEE&#160;Std&#160;1003.1-2001 permits the addition of other errors, this would be a common addition and yet one that applications could not be expected to deal with without this addition.</div>
<div class="section">
<h1>FUTURE DIRECTIONS</h1> None.</div>
<div class="section">
<h1>SEE ALSO</h1>  <i>malloc</i>(), the Base Definitions volume of IEEE&#160;Std&#160;1003.1-2001,  <i>&lt;unistd.h&gt;</i></div>
<div class="section">
<h1>COPYRIGHT</h1> Portions of this text are reprinted and reproduced in electronic form from IEEE Std 1003.1, 2003 Edition, Standard for Information Technology -- Portable Operating System Interface (POSIX), The Open Group Base Specifications Issue 6, Copyright (C) 2001-2003 by the Institute of Electrical and Electronics Engineers, Inc and The Open Group. In the event of any discrepancy between this version and the original IEEE and The Open Group Standard, the original IEEE and The Open Group Standard is the referee document. The original Standard can be obtained online at http://www.opengroup.org/unix/online.html .</div>
<table class="foot">
<tr>
<td class="foot-date">
2003</td>
<td class="foot-os">
IEEE/The Open Group</td>
</tr>
</table>
</div>
</body>
</html>

