<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/linux/style.css" type="text/css" media="all"/>
<title>
ENDUTXENT(3P)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
ENDUTXENT(3P)</td>
<td class="head-vol">
POSIX Programmer's Manual</td>
<td class="head-rtitle">
ENDUTXENT(3P)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>PROLOG</h1> This manual page is part of the POSIX Programmer's Manual. The Linux implementation of this interface may differ (consult the corresponding Linux manual page for details of Linux behavior), or the interface may not be implemented on Linux.</div>
<div class="section">
<h1>NAME</h1> endutxent, getutxent, getutxid, getutxline, pututxline, setutxent - user accounting database functions</div>
<div class="section">
<h1>SYNOPSIS</h1>  <b>#include &lt;utmpx.h&gt;</b><div style="height: 0.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
void endutxent(void);<div style="height: 0.00em;">
&#160;</div>
struct utmpx *getutxent(void);<div style="height: 0.00em;">
&#160;</div>
struct utmpx *getutxid(const struct utmpx *<b></b><i>id</i><b></b><b>);</b><div style="height: 0.00em;">
&#160;</div>
struct utmpx *getutxline(const struct utmpx *<b></b><i>line</i><b></b><b>);</b><div style="height: 0.00em;">
&#160;</div>
struct utmpx *pututxline(const struct utmpx *<b></b><i>utmpx</i><b></b><b>);</b><div style="height: 0.00em;">
&#160;</div>
void setutxent(void); <b></b>  <b></b><b></b><div style="height: 0.00em;">
&#160;</div>
<b></b></div>
<div class="section">
<h1>DESCRIPTION</h1> These functions shall provide access to the user accounting database.<div class="spacer">
</div>
The <i>getutxent</i>() function shall read the next entry from the user accounting database. If the database is not already open, it shall open it. If it reaches the end of the database, it shall fail.<div class="spacer">
</div>
The <i>getutxid</i>() function shall search forward from the current point in the database. If the  <i>ut_type</i> value of the  <b>utmpx</b> structure pointed to by <i>id</i> is BOOT_TIME, OLD_TIME, or NEW_TIME, then it shall stop when it finds an entry with a matching  <i>ut_type</i> value. If the <i>ut_type</i> value is INIT_PROCESS, LOGIN_PROCESS, USER_PROCESS, or DEAD_PROCESS, then it shall stop when it finds an entry whose type is one of these four and whose  <i>ut_id</i> member matches the <i>ut_id</i> member of the  <b>utmpx</b> structure pointed to by <i>id</i>. If the end of the database is reached without a match,  <i>getutxid</i>() shall fail.<div class="spacer">
</div>
The <i>getutxline</i>() function shall search forward from the current point in the database until it finds an entry of the type LOGIN_PROCESS or USER_PROCESS which also has a  <i>ut_line</i> value matching that in the  <b>utmpx</b> structure pointed to by  <i>line</i>. If the end of the database is reached without a match,  <i>getutxline</i>() shall fail.<div class="spacer">
</div>
The <i>getutxid</i>() or <i>getutxline</i>() function may cache data. For this reason, to use  <i>getutxline</i>() to search for multiple occurrences, the application shall zero out the static data after each success, or  <i>getutxline</i>() may return a pointer to the same  <b>utmpx</b> structure.<div class="spacer">
</div>
There is one exception to the rule about clearing the structure before further reads are done. The implicit read done by  <i>pututxline</i>() (if it finds that it is not already at the correct place in the user accounting database) shall not modify the static structure returned by  <i>getutxent</i>(), <i>getutxid</i>(), or  <i>getutxline</i>(), if the application has modified this structure and passed the pointer back to  <i>pututxline</i>().<div class="spacer">
</div>
For all entries that match a request, the <i>ut_type</i> member indicates the type of the entry. Other members of the entry shall contain meaningful data based on the value of the  <i>ut_type</i> member as follows:<table class="tbl">
<col style="width: 20.00ex;"/>
<col style="width: 104.00ex;"/>
<tbody>
<tr>
<td>
<b>ut_type Member</b></td>
<td>
<b>Other Members with Meaningful Data</b></td>
</tr>
<tr>
<td>
EMPTY</td>
<td>
No others</td>
</tr>
<tr>
<td>
BOOT_TIME</td>
<td>
<i>ut_tv</i></td>
</tr>
<tr>
<td>
OLD_TIME</td>
<td>
<i>ut_tv</i></td>
</tr>
<tr>
<td>
NEW_TIME</td>
<td>
<i>ut_tv</i></td>
</tr>
<tr>
<td>
USER_PROCESS</td>
<td>
<i>ut_id</i>, <i>ut_user</i> (login name of the user), <i>ut_line</i>, <i>ut_pid</i>, <i>ut_tv</i></td>
</tr>
<tr>
<td>
INIT_PROCESS</td>
<td>
<i>ut_id</i>, <i>ut_pid</i>, <i>ut_tv</i></td>
</tr>
<tr>
<td>
LOGIN_PROCESS</td>
<td>
<i>ut_id</i>, <i>ut_user</i> (implementation-defined name of the login process), <i>ut_pid</i>, <i>ut_tv</i></td>
</tr>
<tr>
<td>
DEAD_PROCESS</td>
<td>
<i>ut_id</i>, <i>ut_pid</i>, <i>ut_tv</i></td>
</tr>
</tbody>
</table>
<div class="spacer">
</div>
An implementation that provides extended security controls may impose implementation-defined restrictions on accessing the user accounting database. In particular, the system may deny the existence of some or all of the user accounting database entries associated with users other than the caller.<div class="spacer">
</div>
If the process has appropriate privileges, the <i>pututxline</i>() function shall write out the structure into the user accounting database. It shall use  <i>getutxid</i>() to search for a record that satisfies the request. If this search succeeds, then the entry shall be replaced. Otherwise, a new entry shall be made at the end of the user accounting database.<div class="spacer">
</div>
The <i>endutxent</i>() function shall close the user accounting database.<div class="spacer">
</div>
The <i>setutxent</i>() function shall reset the input to the beginning of the database. This should be done before each search for a new entry if it is desired that the entire database be examined.<div class="spacer">
</div>
These functions need not be reentrant. A function that is not required to be reentrant is not required to be thread-safe.</div>
<div class="section">
<h1>RETURN VALUE</h1> Upon successful completion,  <i>getutxent</i>(), <i>getutxid</i>(), and  <i>getutxline</i>() shall return a pointer to a  <b>utmpx</b> structure containing a copy of the requested entry in the user accounting database. Otherwise, a null pointer shall be returned.<div class="spacer">
</div>
The return value may point to a static area which is overwritten by a subsequent call to  <i>getutxid</i>() or  <i>getutxline</i>().<div class="spacer">
</div>
Upon successful completion, <i>pututxline</i>() shall return a pointer to a  <b>utmpx</b> structure containing a copy of the entry added to the user accounting database. Otherwise, a null pointer shall be returned.<div class="spacer">
</div>
The <i>endutxent</i>() and <i>setutxent</i>() functions shall not return a value.</div>
<div class="section">
<h1>ERRORS</h1> No errors are defined for the  <i>endutxent</i>(), <i>getutxent</i>(),  <i>getutxid</i>(), <i>getutxline</i>(), and  <i>setutxent</i>() functions.<div class="spacer">
</div>
The <i>pututxline</i>() function may fail if:<dl>
<dt>
<b>EPERM</b></dt>
<dd>
The process does not have appropriate privileges.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<div class="spacer">
</div>
<i>The following sections are informative.</i></div>
<div class="section">
<h1>EXAMPLES</h1> None.</div>
<div class="section">
<h1>APPLICATION USAGE</h1> The sizes of the arrays in the structure can be found using the  <i>sizeof</i> operator.</div>
<div class="section">
<h1>RATIONALE</h1> None.</div>
<div class="section">
<h1>FUTURE DIRECTIONS</h1> None.</div>
<div class="section">
<h1>SEE ALSO</h1> The Base Definitions volume of IEEE&#160;Std&#160;1003.1-2001,  <i>&lt;utmpx.h&gt;</i></div>
<div class="section">
<h1>COPYRIGHT</h1> Portions of this text are reprinted and reproduced in electronic form from IEEE Std 1003.1, 2003 Edition, Standard for Information Technology -- Portable Operating System Interface (POSIX), The Open Group Base Specifications Issue 6, Copyright (C) 2001-2003 by the Institute of Electrical and Electronics Engineers, Inc and The Open Group. In the event of any discrepancy between this version and the original IEEE and The Open Group Standard, the original IEEE and The Open Group Standard is the referee document. The original Standard can be obtained online at http://www.opengroup.org/unix/online.html .</div>
<table class="foot">
<tr>
<td class="foot-date">
2003</td>
<td class="foot-os">
IEEE/The Open Group</td>
</tr>
</table>
</div>
</body>
</html>

