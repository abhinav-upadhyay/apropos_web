<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/linux/style.css" type="text/css" media="all"/>
<title>
SETSOCKOPT(3P)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
SETSOCKOPT(3P)</td>
<td class="head-vol">
POSIX Programmer's Manual</td>
<td class="head-rtitle">
SETSOCKOPT(3P)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>PROLOG</h1> This manual page is part of the POSIX Programmer's Manual. The Linux implementation of this interface may differ (consult the corresponding Linux manual page for details of Linux behavior), or the interface may not be implemented on Linux.</div>
<div class="section">
<h1>NAME</h1> setsockopt - set the socket options</div>
<div class="section">
<h1>SYNOPSIS</h1>  <b>#include &lt;sys/socket.h&gt;</b><div style="height: 0.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
int setsockopt(int<b> </b><i>socket</i><b></b><b>, int</b><b> </b><i>level</i><b></b><b>, int</b><b></b>  <b></b><i>option_name</i><b></b><b>,</b><div style="height: 0.00em;">
&#160;</div>
&#160;&#160;&#160;&#160;&#160;&#160; const void *<b></b><i>option_value</i><b></b><b>, socklen_t</b><b> </b><i>option_len</i><b></b><b>);</b><div style="height: 0.00em;">
&#160;</div>
<b></b></div>
<div class="section">
<h1>DESCRIPTION</h1> The  <i>setsockopt</i>() function shall set the option specified by the  <i>option_name</i> argument, at the protocol level specified by the  <i>level</i> argument, to the value pointed to by the  <i>option_value</i> argument for the socket associated with the file descriptor specified by the  <i>socket</i> argument.<div class="spacer">
</div>
The <i>level</i> argument specifies the protocol level at which the option resides. To set options at the socket level, specify the  <i>level</i> argument as SOL_SOCKET. To set options at other levels, supply the appropriate  <i>level</i> identifier for the protocol controlling the option. For example, to indicate that an option is interpreted by the TCP (Transport Control Protocol), set  <i>level</i> to IPPROTO_TCP as defined in the <i>&lt;netinet/in.h&gt;</i> header.<div class="spacer">
</div>
The <i>option_name</i> argument specifies a single option to set. The  <i>option_name</i> argument and any specified options are passed uninterpreted to the appropriate protocol module for interpretations. The  <i>&lt;sys/socket.h&gt;</i> header defines the socket-level options. The options are as follows:<dl>
<dt>
SO_DEBUG</dt>
<dd>
Turns on recording of debugging information. This option enables or disables debugging in the underlying protocol modules. This option takes an  <b>int</b> value. This is a Boolean option.</dd>
</dl>
<dl>
<dt>
SO_BROADCAST</dt>
<dd>
Permits sending of broadcast messages, if this is supported by the protocol. This option takes an  <b>int</b> value. This is a Boolean option.</dd>
</dl>
<dl>
<dt>
SO_REUSEADDR</dt>
<dd>
Specifies that the rules used in validating addresses supplied to  <i>bind</i>() should allow reuse of local addresses, if this is supported by the protocol. This option takes an  <b>int</b> value. This is a Boolean option.</dd>
</dl>
<dl>
<dt>
SO_KEEPALIVE</dt>
<dd>
Keeps connections active by enabling the periodic transmission of messages, if this is supported by the protocol. This option takes an  <b>int</b> value.</dd>
</dl>
<div class="spacer">
</div>
If the connected socket fails to respond to these messages, the connection is broken and threads writing to that socket are notified with a SIGPIPE signal. This is a Boolean option.<dl>
<dt>
SO_LINGER</dt>
<dd>
Lingers on a <i>close</i>() if data is present. This option controls the action taken when unsent messages queue on a socket and  <i>close</i>() is performed. If SO_LINGER is set, the system shall block the process during  <i>close</i>() until it can transmit the data or until the time expires. If SO_LINGER is not specified, and  <i>close</i>() is issued, the system handles the call in a way that allows the process to continue as quickly as possible. This option takes a  <b>linger</b> structure, as defined in the  <i>&lt;sys/socket.h&gt;</i> header, to specify the state of the option and linger interval.</dd>
</dl>
<dl>
<dt>
SO_OOBINLINE</dt>
<dd>
Leaves received out-of-band data (data marked urgent) inline. This option takes an  <b>int</b> value. This is a Boolean option.</dd>
</dl>
<dl>
<dt>
SO_SNDBUF</dt>
<dd>
Sets send buffer size. This option takes an <b>int</b> value.</dd>
</dl>
<dl>
<dt>
SO_RCVBUF</dt>
<dd>
Sets receive buffer size. This option takes an <b>int</b> value.</dd>
</dl>
<dl>
<dt>
SO_DONTROUTE</dt>
<dd>
Requests that outgoing messages bypass the standard routing facilities. The destination shall be on a directly-connected network, and messages are directed to the appropriate network interface according to the destination address. The effect, if any, of this option depends on what protocol is in use. This option takes an  <b>int</b> value. This is a Boolean option.</dd>
</dl>
<dl>
<dt>
SO_RCVLOWAT</dt>
<dd>
Sets the minimum number of bytes to process for socket input operations. The default value for SO_RCVLOWAT is 1. If SO_RCVLOWAT is set to a larger value, blocking receive calls normally wait until they have received the smaller of the low water mark value or the requested amount. (They may return less than the low water mark if an error occurs, a signal is caught, or the type of data next in the receive queue is different from that returned; for example, out-of-band data.) This option takes an  <b>int</b> value. Note that not all implementations allow this option to be set.</dd>
</dl>
<dl>
<dt>
SO_RCVTIMEO</dt>
<dd>
Sets the timeout value that specifies the maximum amount of time an input function waits until it completes. It accepts a  <b>timeval</b> structure with the number of seconds and microseconds specifying the limit on how long to wait for an input operation to complete. If a receive operation has blocked for this much time without receiving additional data, it shall return with a partial count or  <i>errno</i> set to [EAGAIN] or [EWOULDBLOCK] if no data is received. The default for this option is zero, which indicates that a receive operation shall not time out. This option takes a  <b>timeval</b> structure. Note that not all implementations allow this option to be set.</dd>
</dl>
<dl>
<dt>
SO_SNDLOWAT</dt>
<dd>
Sets the minimum number of bytes to process for socket output operations. Non-blocking output operations shall process no data if flow control does not allow the smaller of the send low water mark value or the entire request to be processed. This option takes an  <b>int</b> value. Note that not all implementations allow this option to be set.</dd>
</dl>
<dl>
<dt>
SO_SNDTIMEO</dt>
<dd>
Sets the timeout value specifying the amount of time that an output function blocks because flow control prevents data from being sent. If a send operation has blocked for this time, it shall return with a partial count or with  <i>errno</i> set to [EAGAIN] or [EWOULDBLOCK] if no data is sent. The default for this option is zero, which indicates that a send operation shall not time out. This option stores a  <b>timeval</b> structure. Note that not all implementations allow this option to be set.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<div class="spacer">
</div>
For Boolean options, 0 indicates that the option is disabled and 1 indicates that the option is enabled.<div class="spacer">
</div>
Options at other protocol levels vary in format and name.</div>
<div class="section">
<h1>RETURN VALUE</h1> Upon successful completion,  <i>setsockopt</i>() shall return 0. Otherwise, -1 shall be returned and  <i>errno</i> set to indicate the error.</div>
<div class="section">
<h1>ERRORS</h1> The  <i>setsockopt</i>() function shall fail if:<dl>
<dt>
<b>EBADF</b></dt>
<dd>
The <i>socket</i> argument is not a valid file descriptor.</dd>
</dl>
<dl>
<dt>
<b>EDOM</b></dt>
<dd>
The send and receive timeout values are too big to fit into the timeout fields in the socket structure.</dd>
</dl>
<dl>
<dt>
<b>EINVAL</b></dt>
<dd>
The specified option is invalid at the specified socket level or the socket has been shut down.</dd>
</dl>
<dl>
<dt>
<b>EISCONN</b></dt>
<dd>
The socket is already connected, and a specified option cannot be set while the socket is connected.</dd>
</dl>
<dl>
<dt>
<b>ENOPROTOOPT</b></dt>
<dd>
<div style="height: 1.00em;">
&#160;</div>
The option is not supported by the protocol.</dd>
</dl>
<dl>
<dt>
<b>ENOTSOCK</b></dt>
<dd>
The <i>socket</i> argument does not refer to a socket.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<div class="spacer">
</div>
The <i>setsockopt</i>() function may fail if:<dl>
<dt>
<b>ENOMEM</b></dt>
<dd>
There was insufficient memory available for the operation to complete.</dd>
</dl>
<dl>
<dt>
<b>ENOBUFS</b></dt>
<dd>
Insufficient resources are available in the system to complete the call.<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
<div class="spacer">
</div>
<i>The following sections are informative.</i></div>
<div class="section">
<h1>EXAMPLES</h1> None.</div>
<div class="section">
<h1>APPLICATION USAGE</h1> The  <i>setsockopt</i>() function provides an application program with the means to control socket behavior. An application program can use  <i>setsockopt</i>() to allocate buffer space, control timeouts, or permit socket data broadcasts. The  <i>&lt;sys/socket.h&gt;</i> header defines the socket-level options available to  <i>setsockopt</i>().<div class="spacer">
</div>
Options may exist at multiple protocol levels. The SO_ options are always present at the uppermost socket level.</div>
<div class="section">
<h1>RATIONALE</h1> None.</div>
<div class="section">
<h1>FUTURE DIRECTIONS</h1> None.</div>
<div class="section">
<h1>SEE ALSO</h1>  <i>Sockets</i>, <i>bind</i>(), <i>endprotoent</i>(), <i>getsockopt</i>(),  <i>socket</i>(), the Base Definitions volume of IEEE&#160;Std&#160;1003.1-2001,  <i>&lt;netinet/in.h&gt;</i>, <i>&lt;sys/socket.h&gt;</i></div>
<div class="section">
<h1>COPYRIGHT</h1> Portions of this text are reprinted and reproduced in electronic form from IEEE Std 1003.1, 2003 Edition, Standard for Information Technology -- Portable Operating System Interface (POSIX), The Open Group Base Specifications Issue 6, Copyright (C) 2001-2003 by the Institute of Electrical and Electronics Engineers, Inc and The Open Group. In the event of any discrepancy between this version and the original IEEE and The Open Group Standard, the original IEEE and The Open Group Standard is the referee document. The original Standard can be obtained online at http://www.opengroup.org/unix/online.html .</div>
<table class="foot">
<tr>
<td class="foot-date">
2003</td>
<td class="foot-os">
IEEE/The Open Group</td>
</tr>
</table>
</div>
</body>
</html>

