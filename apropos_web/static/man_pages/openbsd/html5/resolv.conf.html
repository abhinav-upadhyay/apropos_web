<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/posix/style.css" type="text/css" media="all"/>
<title>
RESOLV.CONF(5)</title>
</head>
<body>
<div class="mandoc">
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">resolv.conf</b>, <b class="name">resolv.conf.tail</b> &#8212; <span class="desc">resolver configuration files</span></div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> The <b class="name">resolv.conf</b> file specifies how the <a class="link-man" href="../html3/resolver.html">resolver(3)</a> routines in the C library (which provide access to the Internet Domain Name System) should operate. The resolver configuration file contains information that is read by the resolver routines the first time they are invoked by a process. If the <b class="name">resolv.conf</b> file does not exist, only the local host file <i class="file">/etc/hosts</i> will be consulted, i.e. the Domain Name System will not be used to resolve hosts.<div class="spacer">
</div>
The file is designed to be human readable and contains a list of keywords with values that provide various types of resolver information. A resolv.conf file is not required for some setups, so this file is optional. It can be created manually, and is also created as part of the <span class="unix">OpenBSD</span> install process if use of the DHCP protocol is specified for any interface or if any DNS nameservers are configured.<div class="spacer">
</div>
If <a class="link-man" href="../html8/dhclient.html">dhclient(8)</a> is used to configure the network it will normally overwrite the <b class="name">resolv.conf</b> file with updated information such as nameserver addresses, losing any previous values the file contained. In order to force options to be passed to the <a class="link-man" href="../html3/resolver.html">resolver(3)</a> routines, the file <b class="name">resolv.conf.tail</b> may be created manually. This file will be appended to the generated <b class="name">resolv.conf</b> file by dhclient, ensuring options remain. If no updated information is available to dhclient, and <b class="name">resolv.conf.tail</b> is not present, then <b class="name">resolv.conf</b> will not be modified by dhclient.<div class="spacer">
</div>
On a machine whose network connection does not change frequently (such as a desktop machine on a local-area network), the <b class="name">resolv.conf.tail</b> file should not be necessary. However the <b class="name">resolv.conf.tail</b> file may be useful on notebooks, to search multiple domains, to refer to hard-coded information in local files, or otherwise override the defaults.<div class="spacer">
</div>
A keyword and its values must appear on a single line, and the keyword (e.g. <b class="flag">nameserver</b>) must start the line. The value follows the keyword, separated by whitespace. A hash mark (#) or semicolon (;) in the file indicates the beginning of a comment; subsequent characters up to the end of the line are not interpreted by the routines that read the file.<div class="spacer">
</div>
The configuration options (which may be placed in either file) are:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">nameserver</b></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
IPv4 address (in dot notation) or IPv6 address (in hex-and-colon notation) of a name server that the resolver should query. Scoped IPv6 address notation is accepted as well (see <a class="link-man" href="../html4/inet6.html">inet6(4)</a> for details).<div class="spacer">
</div>
Up to <span class="define">MAXNS</span> (currently 3) name servers may be listed, one per line. If there are multiple servers, the resolver library queries them in the order listed. If no <b class="flag">nameserver</b> entries are present, the default is to use the name server on the local machine. (The algorithm used is to try a name server, and if the query times out, try the next, until out of name servers, then repeat trying all name servers until a maximum number of retries are performed.)</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">domain</b></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
Local domain name. Most queries for names within this domain can use short names relative to the local domain. If no <b class="flag">domain</b> entry is present, the domain is determined from the local host name returned by <a class="link-man" href="../html3/gethostname.html">gethostname(3)</a> &#8211; the domain part is taken to be everything after the first dot. Finally, if the host name does not contain a domain part, the root domain is assumed.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">lookup</b></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
This keyword is used by the library routines <a class="link-man" href="../html3/gethostbyname.html">gethostbyname(3)</a> and <a class="link-man" href="../html3/gethostbyaddr.html">gethostbyaddr(3)</a>. It specifies which databases should be searched, and the order to do so. The legal space-separated values are:<div class="spacer">
</div>
<dl style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 6.00ex;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">bind</b></dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
Query a domain name server.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">file</b></dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
Search for entries in <i class="file">/etc/hosts</i>.</dd>
</dl>
<div class="spacer">
</div>
If the <b class="flag">lookup</b> keyword is not used in the system's <i class="file">resolv.conf</i> file then the assumed order is <b class="flag">bind file</b>. Furthermore, if the system's <i class="file">resolv.conf</i> file does not exist, then the only database used is <b class="flag">file</b>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">search</b></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
Search list for hostname lookup. The search list is normally determined from the local domain name; by default, it begins with the local domain name, then successive parent domains that have at least two components in their names. This may be changed by listing the desired domain search path following the <b class="flag">search</b> keyword with spaces or tabs separating the names. Most resolver queries will be attempted using each component of the search path in turn until a match is found. Note that this process may be slow and will generate a lot of network traffic if the servers for the listed domains are not local, and that queries will time out if no server is available for one of the domains.<div class="spacer">
</div>
The search list is currently limited to six domains with a total of 1024 characters. Only one <b class="flag">search</b> line should appear; if more than one is present, the last one found overwrites any values found in earlier lines. So if such a line appears in the <b class="name">resolv.conf.tail</b> file, it should include all the domains that need to be searched.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">sortlist</b></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
Allows addresses returned by <a class="link-man" href="../html3/gethostbyname.html">gethostbyname(3)</a> to be sorted. A <b class="flag">sortlist</b> is specified by IP address netmask pairs. The netmask is optional and defaults to the natural netmask of the net. The IP address and optional network pairs are separated by slashes. Up to 10 pairs may be specified. For example:<div class="spacer">
</div>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit">sortlist 130.155.160.0/255.255.240.0 130.155.0.0</code></div>
</blockquote>
</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">family</b></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
Specify which type of Internet protocol family to prefer, if a host is reachable using different address families. By default IPv4 addresses are queried first, and then IPv6 addresses. The syntax is:<div class="spacer">
</div>
<div style="margin-left: 5.00ex;" class="display">
<b class="flag">family</b> <i class="arg">family</i> [<span class="opt"><i class="arg">family</i></span>]</div>
<div class="spacer">
</div>
A maximum of two families can be specified, where <i class="arg">family</i> can be any of:<div class="spacer">
</div>
<dl style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 6.00ex;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
inet4</dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
IPv4 queries.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
inet6</dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
IPv6 queries.</dd>
</dl>
<div class="spacer">
</div>
If only one family is specified, only that family is tried.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">options</b></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
Allows certain internal resolver variables to be modified. The syntax is:<div class="spacer">
</div>
<div style="margin-left: 5.00ex;" class="display">
<b class="flag">options</b> <i class="arg">option ...</i></div>
<div class="spacer">
</div>
Where <i class="arg">option</i> is one of the following:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">debug</b></dt>
<dd class="list-tag" style="margin-left: 9.00ex;">
Print debugging messages, if libc is compiled with <span class="define">DEBUG</span>. By default on <span class="unix">OpenBSD</span> this option does nothing.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">edns0</b></dt>
<dd class="list-tag" style="margin-left: 9.00ex;">
Attach an OPT pseudo-RR for the EDNS0 extension, as specified in RFC 2671. This informs DNS servers of a client's receive buffer size, allowing them to take advantage of a non-default receive buffer size, and thus send larger replies. DNS query packets with the EDNS0 extension are not compatible with non-EDNS0 DNS servers, so the option must be used only when all the servers listed in <b class="flag">nameserver</b> lines are able to handle the extension. By default on <span class="unix">OpenBSD</span> this option does nothing.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">inet6</b></dt>
<dd class="list-tag" style="margin-left: 9.00ex;">
Enables support for IPv6-only applications, by setting RES_USE_INET6 in _res.options (see <a class="link-man" href="../html3/resolver.html">resolver(3)</a>). Use of this option is discouraged, and meaningless on <span class="unix">OpenBSD</span>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">insecure1</b></dt>
<dd class="list-tag" style="margin-left: 9.00ex;">
Do not require IP source address on the reply packet to be equal to the server's address.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">insecure2</b></dt>
<dd class="list-tag" style="margin-left: 9.00ex;">
Do not check if the query section of the reply packet is equal to that of the query packet. For testing purposes only.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">ndots</b>:<i class="arg">n</i></dt>
<dd class="list-tag" style="margin-left: 9.00ex;">
Sets a threshold for the number of dots which must appear in a name given to <a class="link-man" href="../html3/res_query.html">res_query(3)</a> before an initial absolute query will be made. The default for <i class="arg">n</i> is 1, meaning that if there are any dots in a name, the name will be tried first as an absolute name before any search list elements are appended to it.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">tcp</b></dt>
<dd class="list-tag" style="margin-left: 9.00ex;">
Forces the use of TCP for queries. Normal behaviour is to query via UDP but fall back to TCP on failure.</dd>
</dl>
</dd>
</dl>
<div class="spacer">
</div>
The <b class="flag">domain</b> and <b class="flag">search</b> keywords are mutually exclusive. If more than one instance of these keywords is present, the last instance will override.</div>
<div class="section">
<h1 id="x454e5649524f4e4d454e54">ENVIRONMENT</h1><dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">LOCALDOMAIN</span></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
A space-separated list of search domains, overriding the <b class="flag">search</b> keyword of a system's <b class="name">resolv.conf</b> or <b class="name">resolv.conf.tail</b> file.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">RES_OPTIONS</span></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
A space-separated list of resolver options, overriding the <b class="flag">options</b> keyword of a system's <b class="name">resolv.conf</b> or <b class="name">resolv.conf.tail</b> file.</dd>
</dl>
</div>
<div class="section">
<h1 id="x46494c4553">FILES</h1><dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/etc/resolv.conf</i></dt>
<dd class="list-tag" style="margin-left: 23.00ex;">
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/etc/resolv.conf.tail</i></dt>
<dd class="list-tag" style="margin-left: 23.00ex;">
</dd>
</dl>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../html3/gethostbyname.html">gethostbyname(3)</a>, <a class="link-man" href="../html3/resolver.html">resolver(3)</a>, <a class="link-man" href="../html5/hosts.html">hosts(5)</a>, <a class="link-man" href="../html7/hostname.html">hostname(7)</a>, <a class="link-man" href="../html8/dhclient.html">dhclient(8)</a>, <a class="link-man" href="../html8/nsd.html">nsd(8)</a>, <a class="link-man" href="../html8/unbound.html">unbound(8)</a></div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> The <b class="name">resolv.conf</b> file format appeared in <span class="unix">4.3BSD</span>.</div>
</div>
</body>
</html>

