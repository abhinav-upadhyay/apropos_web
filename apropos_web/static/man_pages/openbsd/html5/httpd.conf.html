<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/posix/style.css" type="text/css" media="all"/>
<title>
HTTPD.CONF(5)</title>
</head>
<body>
<div class="mandoc">
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">httpd.conf</b> &#8212; <span class="desc">HTTP daemon configuration file</span></div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> <b class="name">httpd.conf</b> is the configuration file for the HTTP daemon, <a class="link-man" href="../html8/httpd.html">httpd(8)</a>.</div>
<div class="section">
<h1 id="x53454354494f4e53">SECTIONS</h1> <b class="name">httpd.conf</b> is divided into four main sections:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">Macros</span></dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
User-defined variables may be defined and used later, simplifying the configuration file.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">Global Configuration</span></dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
Global settings for <a class="link-man" href="../html8/httpd.html">httpd(8)</a>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">Servers</span></dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
Listening HTTP web servers.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">Types</span></dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
Media types and extensions.</dd>
</dl>
<div class="spacer">
</div>
Within the sections, a host <i class="arg">address</i> can be specified by IPv4 address, IPv6 address, interface name, interface group, or DNS hostname. If the address is an interface name, <a class="link-man" href="../html8/httpd.html">httpd(8)</a> will look up the first IPv4 address and any other IPv4 and IPv6 addresses of the specified network interface. If &#8216;*&#8217; is given as an address, it will be used as an alias for <i class="arg">0.0.0.0</i> to listen on all IPv4 addresses. Likewise, &#8216;::&#8217; can be used to listen on all IPv6 addresses. A <i class="arg">port</i> can be specified by number or name. The port name to number mappings are found in the file <i class="file">/etc/services</i>; see <a class="link-man" href="../html5/services.html">services(5)</a> for details.<div class="spacer">
</div>
The current line can be extended over multiple lines using a backslash (&#8216;\&#8217;). Comments can be put anywhere in the file using a hash mark (&#8216;#&#8217;), and extend to the end of the current line. Care should be taken when commenting out multi-line text: the comment is effective until the end of the entire block.<div class="spacer">
</div>
Argument names not beginning with a letter, digit, or underscore must be quoted.<div class="spacer">
</div>
Additional configuration files can be included with the <b class="cmd">include</b> keyword, for example:<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
include &quot;/etc/httpd.conf.local&quot;</pre>
</div>
<div class="section">
<h1 id="x4d4143524f53">MACROS</h1> Macros can be defined that will later be expanded in context. Macro names must start with a letter, digit, or underscore, and may contain any of those characters. Macro names may not be reserved words (for example, <b class="cmd">directory</b>, <b class="cmd">log</b>, or <b class="cmd">root</b>). Macros are not expanded inside quotes.<div class="spacer">
</div>
For example:<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
ext_ip=&quot;10.0.0.1&quot; 
server &quot;default&quot; { 
	listen on $ext_ip port 80 
}</pre>
</div>
<div class="section">
<h1 id="x474c4f42414c20434f4e46494755524154494f4e">GLOBAL CONFIGURATION</h1> Here are the settings that can be set globally:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">chroot</b> <i class="arg">directory</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Set the <a class="link-man" href="../html2/chroot.html">chroot(2)</a> directory. If not specified, it defaults to <i class="file">/var/www</i>, the home directory of the www user.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">default type</b> <i class="arg">type/subtype</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Set the default media type that is used if the media type for a specified extension is not found in the configured types or for files without a file extension; see the <i class="link-sec"><a class="link-sec" href="#x5459504553">TYPES</a></i> section below. If not specified, the default type is set to <i class="arg">application/octet-stream</i>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">logdir</b> <i class="arg">directory</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Specifies the full path of the directory in which log files will be written. If not specified, it defaults to <i class="file">/logs</i> within the <a class="link-man" href="../html2/chroot.html">chroot(2)</a> directory.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">prefork</b> <i class="arg">number</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Run the specified number of server processes. This increases the performance and prevents delays when connecting to a server. <a class="link-man" href="../html8/httpd.html">httpd(8)</a> runs 3 server processes by default.</dd>
</dl>
</div>
<div class="section">
<h1 id="x53455256455253">SERVERS</h1> The configured web servers.<div class="spacer">
</div>
Each <b class="cmd">server</b> section starts with a declaration of the server <i class="arg">name</i>:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">server</b> <i class="arg">name</i> {...}</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Match the server name using shell globbing rules. This can be an explicit name, <i class="arg">www.example.com</i>, or a name including wildcards, <i class="arg">*.example.com</i>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">server match</b> <i class="arg">name</i> {...}</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Match the server name using pattern matching, see <a class="link-man" href="../html7/patterns.html">patterns(7)</a>.</dd>
</dl>
<div class="spacer">
</div>
Followed by a block of options that is enclosed in curly brackets:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">alias</b> <i class="arg">name</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Specify an additional alias <i class="arg">name</i> for this server.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">alias match</b> <i class="arg">name</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Like the <b class="cmd">alias</b> option, but <b class="cmd">match</b> the <i class="arg">name</i> using pattern matching instead of shell globbing rules, see <a class="link-man" href="../html7/patterns.html">patterns(7)</a>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="opt"><b class="cmd">no</b></span>] <b class="cmd">authenticate</b> [<span class="opt"><i class="arg">realm</i></span>] <b class="cmd">with</b> <i class="file">htpasswd</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Authenticate a remote user for <i class="arg">realm</i> by checking the credentials against the user authentication file <i class="file">htpasswd</i>. The file name is relative to the <b class="cmd">chroot</b> and must be readable by the www user. Use the <b class="cmd">no authenticate</b> directive to disable authentication in a location.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">block drop</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Drop the connection without sending an error page.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">block</b> [<span class="opt"><b class="cmd">return</b> <i class="arg">code</i> [<span class="opt"><i class="arg">uri</i></span>]</span>]</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Close the connection and send an error page. If the optional return code is not specified, <a class="link-man" href="../html8/httpd.html">httpd(8)</a> denies access with a &#8216;403 Forbidden&#8217; response. The optional <i class="arg">uri</i> argument can be used with return codes in the 3xx range to send a &#8216;Location:&#8217; header for redirection to a specified URI.<div class="spacer">
</div>
The <i class="arg">uri</i> may contain predefined macros that will be expanded at runtime:<div class="spacer">
</div>
<dl style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 6.00ex;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="cmd">$DOCUMENT_URI</b></dt>
<dd class="list-tag" style="margin-left: 13.00ex;">
The request path.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="cmd">$QUERY_STRING</b></dt>
<dd class="list-tag" style="margin-left: 13.00ex;">
The optional query string of the request.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="cmd">$REMOTE_ADDR</b></dt>
<dd class="list-tag" style="margin-left: 13.00ex;">
The IP address of the connected client.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="cmd">$REMOTE_PORT</b></dt>
<dd class="list-tag" style="margin-left: 13.00ex;">
The TCP source port of the connected client.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="cmd">$REMOTE_USER</b></dt>
<dd class="list-tag" style="margin-left: 13.00ex;">
The remote user for HTTP authentication.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="cmd">$REQUEST_URI</b></dt>
<dd class="list-tag" style="margin-left: 13.00ex;">
The request path and optional query string.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="cmd">$SERVER_ADDR</b></dt>
<dd class="list-tag" style="margin-left: 13.00ex;">
The configured IP address of the server.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="cmd">$SERVER_PORT</b></dt>
<dd class="list-tag" style="margin-left: 13.00ex;">
The configured TCP server port of the server.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="cmd">$SERVER_NAME</b></dt>
<dd class="list-tag" style="margin-left: 13.00ex;">
The name of the server.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
%<i class="arg">n</i></dt>
<dd class="list-tag" style="margin-left: 13.00ex;">
The capture index <i class="arg">n</i> of a string that was captured by the enclosing <b class="cmd">location match</b> option.</dd>
</dl>
</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">connection</b> <i class="arg">option</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Set the specified options and limits for HTTP connections. Valid options are:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">max request body</b> <i class="arg">number</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Set the maximum body size in bytes that the client can send to the server. The default value is 1048576 bytes (1M).</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">max requests</b> <i class="arg">number</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Set the maximum number of requests per persistent HTTP connection. Persistent connections are negotiated using the Keep-Alive header in HTTP/1.0 and enabled by default in HTTP/1.1. The default maximum number of requests per connection is 100.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">timeout</b> <i class="arg">seconds</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Specify the inactivity timeout in seconds for accepted sessions. The default timeout is 600 seconds (10 minutes). The maximum is 2147483647 seconds (68 years).</dd>
</dl>
</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">default type</b> <i class="arg">type/subtype</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Set the default media type for the specified location, overwriting the global setting.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">directory</b> <i class="arg">option</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Set the specified options when serving or accessing directories. Valid options are:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="opt"><b class="cmd">no</b></span>] <b class="cmd">auto index</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
If no index file is found, automatically generate a directory listing. This is disabled by default.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">index</b> <i class="arg">string</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Set the directory index file. If not specified, it defaults to <i class="file">index.html</i>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">no index</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Disable the directory index. <a class="link-man" href="../html8/httpd.html">httpd(8)</a> will neither display nor generate a directory index.</dd>
</dl>
</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="opt"><b class="cmd">no</b></span>] <b class="cmd">fastcgi</b> [<span class="opt"><b class="cmd">socket</b> <i class="arg">socket</i></span>]</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Enable FastCGI instead of serving files. The <i class="arg">socket</i> is a local path name within the <a class="link-man" href="../html2/chroot.html">chroot(2)</a> root directory of <a class="link-man" href="../html8/httpd.html">httpd(8)</a> and defaults to <i class="file">/run/slowcgi.sock</i>.<div class="spacer">
</div>
The FastCGI handler will be given the following variables:<div class="spacer">
</div>
<dl style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 6.00ex;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="cmd">DOCUMENT_ROOT</b></dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The document root in which the script is located as configured by the <b class="cmd">root</b> option for the server or location that matches the request.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="cmd">GATEWAY_INTERFACE</b></dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The revision of the CGI specification used.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="cmd">HTTP_*</b></dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
Additional HTTP headers the connected client sent in the request, if any.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="cmd">HTTPS</b></dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
A variable that is set to &#8220;on&#8221; when the server has been configured to use TLS. This variable is omitted otherwise.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="cmd">REQUEST_URI</b></dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The path and optional query string as requested by the connected client.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="cmd">DOCUMENT_URI</b></dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The canonicalized request path, possibly with a slash or directory index file name appended. This is the same as <b class="cmd">PATH_INFO</b> appended to <b class="cmd">SCRIPT_NAME</b>.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="cmd">SCRIPT_NAME</b></dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The virtual URI path to the script.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="cmd">PATH_INFO</b></dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The optional path appended after the script name in the request path. This variable is an empty string if no path is appended after the script name.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="cmd">SCRIPT_FILENAME</b></dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The absolute, physical path to the script within the <a class="link-man" href="../html2/chroot.html">chroot(2)</a> directory.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="cmd">QUERY_STRING</b></dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The optional query string of the request. This variable is an empty string if there is no query string in the request.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="cmd">REMOTE_ADDR</b></dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The IP address of the connected client.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="cmd">REMOTE_PORT</b></dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The TCP source port of the connected client.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="cmd">REMOTE_USER</b></dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The remote user when using HTTP authentication.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="cmd">REQUEST_METHOD</b></dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The HTTP method the connected client used when making the request.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="cmd">SERVER_ADDR</b></dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The configured IP address of the server.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="cmd">SERVER_NAME</b></dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The name of the server.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="cmd">SERVER_PORT</b></dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The configured TCP server port of the server.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="cmd">SERVER_PROTOCOL</b></dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The revision of the HTTP specification used.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="cmd">SERVER_SOFTWARE</b></dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The server software name of <a class="link-man" href="../html8/httpd.html">httpd(8)</a>.</dd>
</dl>
</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">hsts</b> [<span class="opt"><i class="arg">option</i></span>]</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Enable HTTP Strict Transport Security. Valid options are:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">max-age</b> <i class="arg">seconds</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Set the maximum time in seconds a receiving user agent should regard this host as an HSTS host. The default is one year.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">preload</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Confirm and authenticate that the site is permitted to be included in a browser's preload list.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">subdomains</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Signal to the receiving user agent that this host and all sub domains of the host's domain should be considered HSTS hosts.</dd>
</dl>
</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">listen on</b> <i class="arg">address</i> [<span class="opt"><b class="cmd">tls</b></span>] <b class="cmd">port</b> <i class="arg">number</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Set the listen address and port. This statement can be specified multiple times.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">location</b> <i class="arg">path</i> {...}</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Specify server configuration rules for a specific location. The <i class="arg">path</i> argument will be matched against the request path with shell globbing rules. A location section may include most of the server configuration rules except <b class="cmd">alias</b>, <b class="cmd">connection</b>, <b class="cmd">hsts</b>, <b class="cmd">listen on</b>, <b class="cmd">location</b>, <b class="cmd">tcp</b> and <b class="cmd">tls</b>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">location match</b> <i class="arg">path</i> {...}</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Like the <b class="cmd">location</b> option, but <b class="cmd">match</b> the <i class="arg">path</i> using pattern matching instead of shell globbing rules, see <a class="link-man" href="../html7/patterns.html">patterns(7)</a>. The pattern may contain captures that can be used in the <i class="arg">uri</i> of an enclosed <b class="cmd">block return</b> option.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="opt"><b class="cmd">no</b></span>] <b class="cmd">log</b> [<span class="opt"><i class="arg">option</i></span>]</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Set the specified logging options. Logging is enabled by default using the standard <b class="cmd">access</b> and <b class="cmd">error</b> log files, but can be changed per server or location. Use the <b class="cmd">no log</b> directive to disable logging of any requests. Valid options are:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">access</b> <i class="arg">name</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Set the <i class="arg">name</i> of the access log file relative to the log directory. If not specified, it defaults to <i class="file">access.log</i>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">error</b> <i class="arg">name</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Set the <i class="arg">name</i> of the error log file relative to the log directory. If not specified, it defaults to <i class="file">error.log</i>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">style</b> <i class="arg">style</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Set the logging style. The <i class="arg">style</i> can be <b class="flag">common</b>, <b class="flag">combined</b> or <b class="flag">connection</b>. The styles <b class="flag">common</b> and <b class="flag">combined</b> write a log entry after each request similar to the standard Apache and nginx access log formats. The style <b class="flag">connection</b> writes a summarized log entry after each connection, that can have multiple requests, similar to the format that is used by <a class="link-man" href="../html8/relayd.html">relayd(8)</a>. If not specified, the default is <b class="flag">common</b>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="opt"><b class="cmd">no</b></span>] <b class="cmd">syslog</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Enable or disable logging to <a class="link-man" href="../html3/syslog.html">syslog(3)</a> instead of the log files.</dd>
</dl>
</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">pass</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Disable any previous <b class="cmd">block</b> in a location.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">root</b> <i class="arg">option</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Configure the document root and options for the request path. Valid options are:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="arg">directory</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Set the document root of the server. The <i class="arg">directory</i> is a pathname within the <a class="link-man" href="../html2/chroot.html">chroot(2)</a> root directory of <b class="name">httpd</b>. If not specified, it defaults to <i class="file">/htdocs</i>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">strip</b> <i class="arg">number</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Strip <i class="arg">number</i> path components from the beginning of the request path before looking up the stripped-down path at the document root.</dd>
</dl>
</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">tcp</b> <i class="arg">option</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Enable or disable the specified TCP/IP options; see <a class="link-man" href="../html4/tcp.html">tcp(4)</a> and <a class="link-man" href="../html4/ip.html">ip(4)</a> for more information about the options. Valid options are:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">backlog</b> <i class="arg">number</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Set the maximum length the queue of pending connections may grow to. The backlog option is 10 by default and is limited by the <b class="var">kern.somaxconn</b> <a class="link-man" href="../html8/sysctl.html">sysctl(8)</a> variable.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">ip minttl</b> <i class="arg">number</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
This option for the underlying IP connection may be used to discard packets with a TTL lower than the specified value. This can be used to implement the Generalized TTL Security Mechanism (GTSM) according to RFC 5082.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">ip ttl</b> <i class="arg">number</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Change the default time-to-live value in the IP headers.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="opt"><b class="cmd">no</b></span>] <b class="cmd">nodelay</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Enable the TCP NODELAY option for this connection. This is recommended to avoid delays in the data stream.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="opt"><b class="cmd">no</b></span>] <b class="cmd">sack</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Use selective acknowledgements for this connection.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">socket buffer</b> <i class="arg">number</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Set the socket-level buffer size for input and output for this connection. This will affect the TCP window size.</dd>
</dl>
</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">tls</b> <i class="arg">option</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Set the TLS configuration for the server. These options are only used if TLS has been enabled via the listen directive. Valid options are:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">certificate</b> <i class="arg">file</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Specify the certificate to use for this server. The <i class="arg">file</i> should contain a PEM encoded certificate. The default is <i class="file">/etc/ssl/server.crt</i>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">ciphers</b> <i class="arg">string</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Specify the TLS cipher string. If not specified, the default value &#8220;HIGH:!aNULL&#8221; will be used (strong crypto cipher suites without anonymous DH). See the CIPHERS section of <a class="link-man" href="../html1/openssl.html">openssl(1)</a> for information about SSL/TLS cipher suites and preference lists.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">dhe</b> <i class="arg">params</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Specify the DHE parameters to use for DHE cipher suites. Valid parameter values are none, legacy and auto. For legacy a fixed key length of 1024 bits is used, whereas for auto the key length is determined automatically. The default is none, which disables DHE cipher suites.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">ecdhe</b> <i class="arg">curve</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Specify the ECDHE curve to use for ECDHE cipher suites. Valid parameter values are none, auto and the short name of any known curve. The default is auto.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">key</b> <i class="arg">file</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Specify the private key to use for this server. The <i class="arg">file</i> should contain a PEM encoded private key and reside outside of the <a class="link-man" href="../html2/chroot.html">chroot(2)</a> root directory of <b class="name">httpd</b>. The default is <i class="file">/etc/ssl/private/server.key</i>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">protocols</b> <i class="arg">string</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Specify the TLS protocols to enable for this server. If not specified, the value &#8220;default&#8221; will be used (secure protocols; TLSv1.2-only). Refer to the <a class="link-man" href="../html3/tls_config_parse_protocols.html">tls_config_parse_protocols(3)</a> function for other valid protocol string values.</dd>
</dl>
</dd>
</dl>
</div>
<div class="section">
<h1 id="x5459504553">TYPES</h1> Configure the supported media types. <a class="link-man" href="../html8/httpd.html">httpd(8)</a> will set the <i class="arg">Content-Type</i> of the response header based on the file extension listed in the <b class="cmd">types</b> section. If not specified, <a class="link-man" href="../html8/httpd.html">httpd(8)</a> will use built-in media types for <i class="arg">text/css</i>, <i class="arg">text/html</i>, <i class="arg">text/plain</i>, <i class="arg">image/gif</i>, <i class="arg">image/png</i>, <i class="arg">image/jpeg</i>, and <i class="arg">application/javascript</i>.<div class="spacer">
</div>
The <b class="cmd">types</b> section must include one or more lines of the following syntax:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="arg">type/subtype</i> <i class="arg">name</i> [<span class="opt"><i class="arg">name ...</i></span>]</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Set the media <i class="arg">type</i> and <i class="arg">subtype</i> to the specified extension <i class="arg">name</i>. One or more names can be specified per line. Each line may end with an optional semicolon.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">include</b> <i class="arg">file</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Include types definitions from an external file, for example <i class="file">/usr/share/misc/mime.types</i>.</dd>
</dl>
</div>
<div class="section">
<h1 id="x4558414d504c4553">EXAMPLES</h1> The following example will start one server that is pre-forked two times and is listening on all local IP addresses. It additionally defines some media types overriding the defaults.<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
prefork 2 
 
server &quot;default&quot; { 
	listen on * port 80 
} 
 
types { 
	text/css		css 
	text/html		html htm 
	text/plain		txt 
	image/gif		gif 
	image/jpeg		jpeg jpg 
	image/png		png 
	application/javascript	js 
	application/xml		xml 
}</pre>
<div class="spacer">
</div>
The server can also be configured to only listen on the primary IP address of the network interface that is a member of the &#8220;egress&#8221; group.<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
server &quot;default&quot; { 
	listen on egress port 80 
}</pre>
<div class="spacer">
</div>
Multiple servers can be configured to support hosting of different domains. If the same address is repeated multiple times in the <b class="cmd">listen on</b> statement, the server will be matched based on the requested host name.<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
server &quot;www.example.com&quot; { 
	alias &quot;example.com&quot; 
	listen on * port 80 
	listen on * tls port 443 
	root &quot;/htdocs/www.example.com&quot; 
} 
 
server &quot;www.a.example.com&quot; { 
	listen on 203.0.113.1 port 80 
	root &quot;/htdocs/www.a.example.com&quot; 
} 
 
server &quot;www.b.example.com&quot; { 
	listen on 203.0.113.1 port 80 
	root &quot;/htdocs/www.b.example.com&quot; 
} 
 
server &quot;intranet.example.com&quot; { 
	listen on 10.0.0.1 port 80 
	root &quot;/htdocs/intranet.example.com&quot; 
}</pre>
<div class="spacer">
</div>
Simple redirections can be configured with the <b class="cmd">block</b> directive:<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
server &quot;example.com&quot; { 
	listen on 10.0.0.1 port 80 
	block return 301 &quot;http://www.example.com$REQUEST_URI&quot; 
} 
 
server &quot;www.example.com&quot; { 
	listen on 10.0.0.1 port 80 
}</pre>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../html1/htpasswd.html">htpasswd(1)</a>, <a class="link-man" href="../html7/patterns.html">patterns(7)</a>, <a class="link-man" href="../html8/httpd.html">httpd(8)</a>, <a class="link-man" href="../html8/slowcgi.html">slowcgi(8)</a></div>
<div class="section">
<h1 id="x415554484f5253">AUTHORS</h1> The <a class="link-man" href="../html8/httpd.html">httpd(8)</a> program was written by <span class="author">Reyk Floeter</span> &lt;<a class="link-mail" href="mailto:reyk@openbsd.org">reyk@openbsd.org</a>&gt;.</div>
</div>
</body>
</html>

