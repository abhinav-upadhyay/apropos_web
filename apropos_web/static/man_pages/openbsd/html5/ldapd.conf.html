<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/posix/style.css" type="text/css" media="all"/>
<title>
LDAPD.CONF(5)</title>
</head>
<body>
<div class="mandoc">
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">ldapd.conf</b> &#8212; <span class="desc">Lightweight Directory Access Protocol daemon configuration file</span></div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> <b class="name">ldapd.conf</b> is the configuration file for the LDAP daemon <a class="link-man" href="../html8/ldapd.html">ldapd(8)</a>.<div class="spacer">
</div>
The current line can be extended over multiple lines using a backslash (&#8216;\&#8217;). Comments can be put anywhere in the file using a hash mark (&#8216;#&#8217;), and extend to the end of the current line. Care should be taken when commenting out multi-line text: the comment is effective until the end of the entire block.<div class="spacer">
</div>
Argument names not beginning with a letter, digit, or underscore must be quoted. Arguments containing whitespace should be surrounded by double quotes (&quot;).<div class="spacer">
</div>
Macros can be defined that will later be expanded in context. Macro names must start with a letter, digit, or underscore, and may contain any of those characters. Macro names may not be reserved words (for example <i class="arg">listen</i>, <i class="arg">namespace</i>, <i class="arg">port</i>). Macros are not expanded inside quotes.<div class="spacer">
</div>
For example:<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
wan_if = &quot;fxp0&quot; 
listen on $wan_if 
listen on $wan_if tls</pre>
<div class="spacer">
</div>
Additional configuration files can be included with the <b class="cmd">include</b> keyword, for example:<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
include &quot;/etc/ldap/sub.namespace.conf&quot;</pre>
<div class="spacer">
</div>
Additional schema files can be included with the <b class="cmd">schema</b> keyword, for example:<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
schema &quot;/etc/ldap/inetorgperson.schema&quot;</pre>
<div class="spacer">
</div>
The syntax of <b class="name">ldapd.conf</b> is described below.</div>
<div class="section">
<h1 id="x474c4f42414c20434f4e46494755524154494f4e">GLOBAL CONFIGURATION</h1><dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">listen on</b> <i class="arg">interface</i> [<span class="opt"><b class="cmd">port</b> <i class="arg">port</i></span>] [<span class="opt"><b class="cmd">tls</b> | <b class="cmd">ldaps</b> | <b class="cmd">secure</b></span>] [<span class="opt"><b class="cmd">certificate</b> <i class="arg">name</i></span>]</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Specify an <i class="arg">interface</i> and <i class="arg">port</i> to listen on. An IP address, domain name or absolute path may be used in place of <i class="arg">interface</i>. An absolute path is used to listen on a unix domain socket.<div class="spacer">
</div>
Secured connections are provided either using STARTTLS (<b class="cmd">tls</b>), by default on port 389, or LDAPS (<b class="cmd">ldaps</b>), by default on port 636. Creation of certificates is documented in <a class="link-man" href="../html8/starttls.html">starttls(8)</a>. If no certificate <i class="arg">name</i> is specified, the <i class="file">/etc/ldap/certs</i> directory is searched for a file named by joining the interface name with a .crt extension, e.g. <i class="file">/etc/ldap/certs/fxp0.crt</i>.<div class="spacer">
</div>
If the certificate name is an absolute path, a .crt and .key extension is appended to form the certificate path and key path respectively.<div class="spacer">
</div>
Only secured connections accept plain text password authentication. Connections using TLS or unix domain sockets are always considered secured. The <b class="cmd">secure</b> keyword can be used to mark an otherwise insecure connection secured, e.g. if IPsec is used.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
referral <i class="arg">URL</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Specify a default referral. If no namespace matches the base DN in a request, the request is delegated to another LDAP server instead of returning an error.<div class="spacer">
</div>
This option can be given multiple times, in which case the URLs are considered equal. Clients may choose to follow any of the referral URLs.<div class="spacer">
</div>
The URL format has the following format:<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
ldap://ldap.example.com 
ldaps://ldap.example.com:3890</pre>
</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
rootdn <i class="arg">dn</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Specify the distinguished name of the root user for all namespaces. The root user is always allowed to read and write entries in all local namespaces.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
rootpw <i class="arg">password</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Password for the root user. Specified either in plain text, or in hashed format. See AUTHENTICATION in <a class="link-man" href="../html8/ldapd.html">ldapd(8)</a>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
schema <i class="arg">filename</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Add schema definitions from the specified file. For a description of the schema file syntax see <i class="link-sec"><a class="link-sec" href="#x534348454d41">SCHEMA</a></i> below.</dd>
</dl>
</div>
<div class="section">
<h1 id="x4e414d45535041434553">NAMESPACES</h1> A namespace is a subtree of the global X.500 DIT (Directory Information Tree), also known as a naming context. All entries' distinguished names (DN) has the same suffix, which is used to identify the namespace. The suffix should consist of the domain components, in reverse order, of your domain name, as recommended by RFC 2247.<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
namespace &quot;dc=example,dc=com&quot; { 
	rootdn &quot;cn=admin,dc=example,dc=com&quot; 
	rootpw &quot;secret&quot; 
}</pre>
<div class="spacer">
</div>
When matching requests against namespace suffixes, the most specific match is used. Each namespace stores data in a separate database file.<div class="spacer">
</div>
A namespace has the following configuration properties:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
referral <i class="arg">URL</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Specify a referral to return for requests matching the suffix.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
rootdn <i class="arg">dn</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Specify the distinguished name of the root user for the namespace. The root user is always allowed to read and write entries in the namespace. The distinguished name must have the same suffix as the namespace.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
rootpw <i class="arg">password</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Password for the root user. Specified either in plain text, or in hashed format. See AUTHENTICATION in <a class="link-man" href="../html8/ldapd.html">ldapd(8)</a>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
index <i class="arg">attribute</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Maintain an index on the specified attribute. This index can be used for equality, presence, prefix substring and range searches. <a class="link-man" href="../html8/ldapd.html">ldapd(8)</a> will update the index on each modification. If you add an index to an existing namespace, you need to run <a class="link-man" href="../html8/ldapctl.html">ldapctl(8)</a> to index the existing entries.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
fsync <i class="arg">on</i> | <i class="arg">off</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
If <i class="arg">off</i>, data will not be forced to disk after each commit. Disabling fsync can increase write speed substantially, but may lead to data loss. The default value is on.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
cache-size <i class="arg">size</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Set the cache size for data entries. The <i class="arg">size</i> is specified in number of pages. Note that more than the configured number of pages may exist in the cache, as dirty pages and pages referenced by cursors are excluded from cache expiration.<div class="spacer">
</div>
Cached pages are expired in a least recently used (LRU) order.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
index-cache-size <i class="arg">size</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Set the cache size for the index database.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
relax schema</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Disables checking of required and optional object attributes against schema. All attributes and values are matched as case-insensitive strings. All attributes are considered multi-valued.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
strict schema</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Enables checking of required and optional object attributes against schema. This is the default.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">allow</b> | <b class="cmd">deny</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Allow or deny access to parts of the namespace.<div class="spacer">
</div>
Each request to the <a class="link-man" href="../html8/ldapd.html">ldapd(8)</a> daemon evaluates the filter rules in sequential order, from first to last. The last matching rule decides what action is taken. If no rule matches the request, the default action is to allow the request. The root DN is always allowed to perform any request.<div class="spacer">
</div>
The allow/deny statement operates on all access types by default. This can be restricted by an access type specification:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
read access</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Restricts the filter rule to search operations.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
write access</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Restricts the filter rule to add, delete and modify operations.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
bind access</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Restricts the filter rule to bind operations.</dd>
</dl>
<div class="spacer">
</div>
The scope of the filter rule can be restricted by the <span class="emph">to</span> keyword:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
to subtree <i class="arg">DN</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
The filter rule applies to the distinguished name, as well as for all its descendants.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
to children of <i class="arg">DN</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
The filter rule applies to all the direct children of the distinguished name.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
to <i class="arg">DN</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
The filter rule applies to the distinguished name only.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
to any</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
The filter rule applies to any distinguished name in the namespace. This is the default if no scope is specified.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
to root</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
The filter rule applies to the root DSE.</dd>
</dl>
<div class="spacer">
</div>
Finally, the filter rule can match a bind DN:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
by any</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
The filter rule matches by any bind dn, including anonymous binds.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
by <i class="arg">DN</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
The filter rule matches only if the requestor has previously performed a bind as the specified distinguished name.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
by self</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
The filter rule matches only if the requestor has previously performed a bind as the distinguished name that is being requested. Typically used to allow users to modify their own data.</dd>
</dl>
</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
use compression [<span class="opt">level <i class="arg">level</i></span>]</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Enable compression of entries and optionally specify compression level (0 - 9). By default, no compression is used.</dd>
</dl>
</div>
<div class="section">
<h1 id="x534348454d41">SCHEMA</h1> Schema files define the structure and format of entries in the directory tree. There are three types of definitions in a schema file:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
attributetype</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
(<i class="arg">oid</i> [<span class="opt">NAME name</span>] [<span class="opt">DESC description</span>] [<span class="opt">OBSOLETE</span>] [<span class="opt">SUP oid</span>] [<span class="opt">EQUALITY oid</span>] [<span class="opt">ORDERING oid</span>] [<span class="opt">SUBSTR oid</span>] [<span class="opt">SYNTAX oid</span>] [<span class="opt">SINGLE-VALUE</span>] [<span class="opt">COLLECTIVE</span>] [<span class="opt">NO-USER-MODIFICATION</span>] [<span class="opt">USAGE {userApplications | directoryOperation | distributedOperation | dSAOperation}</span>])<div class="spacer">
</div>
An attribute type definition specifies the syntax of attribute values, whether it allows multiple values and how it can be compared in search requests. For a complete description of attribute type definitions, see section 4.1.2 in RFC 4512.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
objectclass</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
(<i class="arg">oid</i> [<span class="opt">NAME name</span>] [<span class="opt">DESC description</span>] [<span class="opt">OBSOLETE</span>] [<span class="opt">SUP oids</span>] [<span class="opt">{ABSTRACT | STRUCTURAL | AUXILIARY}</span>] [<span class="opt">MUST oids</span>] [<span class="opt">MAY oids</span>])<div class="spacer">
</div>
An object class definition specifies which attributes are required and which are allowed. For a complete description of object class definitions, see section 4.1.1 in RFC 4512.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
objectidentifier <i class="arg">symbolic-name</i> <i class="arg">OID</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Defines a symbolic name for the object identifier. A symbolic name can be used in place of a numeric OID in definitions of attribute types, object classes and other symbolic OIDs. A descendant OID can be defined in terms of another symbolic OID by appending a numeric OID after a colon, for example:<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
objectidentifier MyOidRoot 1.2.3.4 
objectidentifier MyOidAttributes MyOidRoot:5.6 
objectidentifier MyOidObjects MyOidRoot:7</pre>
<div class="spacer">
</div>
This would define MyOidAttributes as a symbolic name for the OID 1.2.3.4.5.6, and MyOidObjects for 1.2.3.4.7.</dd>
</dl>
</div>
<div class="section">
<h1 id="x46494c4553">FILES</h1><dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/etc/ldapd.conf</i></dt>
<dd class="list-tag" style="margin-left: 23.00ex;">
Default <a class="link-man" href="../html8/ldapd.html">ldapd(8)</a> configuration file.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/etc/ldap/*.schema</i></dt>
<dd class="list-tag" style="margin-left: 23.00ex;">
Default schema definition files.</dd>
</dl>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../html8/ldapctl.html">ldapctl(8)</a>, <a class="link-man" href="../html8/ldapd.html">ldapd(8)</a></div>
<div class="section">
<h1 id="x5354414e4441524453">STANDARDS</h1> <span class="ref"><span class="ref-auth">K. Zeilenga</span>, <span class="ref-title">Lightweight Directory Access Protocol (LDAP): Directory Information Models</span>, <span class="ref-rep">RFC 4512</span>, <span class="ref-date">June 2006</span>.</span></div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> The <b class="name">ldapd.conf</b> file format first appeared in <span class="unix">OpenBSD&#160;4.8</span>.</div>
</div>
</body>
</html>

