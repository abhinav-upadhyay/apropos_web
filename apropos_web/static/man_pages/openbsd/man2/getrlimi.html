<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/posix/style.css" type="text/css" media="all"/>
<title>
GETRLIMIT(2)</title>
</head>
<body>
<div class="mandoc">
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">getrlimit</b>, <b class="name">setrlimit</b> &#8212; <span class="desc">control maximum system resource consumption</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="includes">#include &lt;<a class="link-includes">sys/resource.h</a>&gt;</b><div class="spacer">
</div>
<i class="ftype">int</i><br/>
<b class="fname">getrlimit</b>(<i class="farg" style="white-space:nowrap;">int resource</i>, <i class="farg" style="white-space:nowrap;">struct rlimit *rlp</i>);<div class="spacer">
</div>
<i class="ftype">int</i><br/>
<b class="fname">setrlimit</b>(<i class="farg" style="white-space:nowrap;">int resource</i>, <i class="farg" style="white-space:nowrap;">const struct rlimit *rlp</i>);</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> Limits on the consumption of system resources by the current process and each process it creates may be obtained with the <b class="fname">getrlimit</b>() call, and set with the <b class="fname">setrlimit</b>() call.<div class="spacer">
</div>
The <i class="farg">resource</i> parameter is one of the following:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<code class="lit">RLIMIT_CORE</code></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
The largest size (in bytes) <i class="file">core</i> file that may be created.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<code class="lit">RLIMIT_CPU</code></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
The maximum amount of CPU time (in seconds) to be used by each process.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<code class="lit">RLIMIT_DATA</code></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
The maximum size (in bytes) of the data segment for a process; this includes memory allocated via <a class="link-man" href="../html3/malloc.html">malloc(3)</a> and all other anonymous memory mapped via <a class="link-man" href="../html2/mmap.html">mmap(2)</a>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<code class="lit">RLIMIT_FSIZE</code></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
The largest size (in bytes) file that may be created.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<code class="lit">RLIMIT_MEMLOCK</code></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
The maximum size (in bytes) which a process may lock into memory using the <a class="link-man" href="../html2/mlock.html">mlock(2)</a> function.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<code class="lit">RLIMIT_NOFILE</code></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
The maximum number of open files for this process.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<code class="lit">RLIMIT_NPROC</code></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
The maximum number of simultaneous processes for this user id.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<code class="lit">RLIMIT_RSS</code></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
The maximum size (in bytes) to which a process's resident set size may grow. This imposes a limit on the amount of physical memory to be given to a process; if memory is tight, the system will prefer to take memory from processes that are exceeding their declared resident set size.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<code class="lit">RLIMIT_STACK</code></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
The maximum size (in bytes) of the stack segment for a process, which defines how far a process's stack segment may be extended. Stack extension is performed automatically by the system, and is only used by the main thread of a process.</dd>
</dl>
<div class="spacer">
</div>
A resource limit is specified as a soft limit and a hard limit. When a soft limit is exceeded a process may receive a signal (for example, if the CPU time or file size is exceeded), but it will be allowed to continue execution until it reaches the hard limit (or modifies its resource limit). The <span class="emph">rlimit</span> structure is used to specify the hard and soft limits on a resource,<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
struct rlimit { 
	rlim_t	rlim_cur;	/* current (soft) limit */ 
	rlim_t	rlim_max;	/* hard limit */ 
};</pre>
<div class="spacer">
</div>
Only the superuser may raise the maximum limits. Other users may only alter <i class="farg">rlim_cur</i> within the range from 0 to <i class="farg">rlim_max</i> or (irreversibly) lower <i class="farg">rlim_max</i>.<div class="spacer">
</div>
An &#8220;infinite&#8221; value for a limit is defined as <span class="define">RLIM_INFINITY</span>.<div class="spacer">
</div>
A value of <span class="define">RLIM_SAVED_CUR</span> or <span class="define">RLIM_SAVED_MAX</span> will be stored in <i class="farg">rlim_cur</i> or <i class="farg">rlim_max</i> respectively by <b class="fname">getrlimit</b>() if the value for the current or maximum resource limit cannot be stored in an <code class="lit">rlim_t</code>. The values <span class="define">RLIM_SAVED_CUR</span> and <span class="define">RLIM_SAVED_MAX</span> should not be used in a call to <b class="fname">setrlimit</b>() unless they were returned by a previous call to <b class="fname">getrlimit</b>().<div class="spacer">
</div>
Because this information is stored in the per-process information, this system call must be executed directly by the shell if it is to affect all future processes created by the shell; <b class="cmd">limit</b> is thus a built-in command to <a class="link-man" href="../html1/csh.html">csh(1)</a> and <b class="cmd">ulimit</b> is the <a class="link-man" href="../html1/sh.html">sh(1)</a> equivalent.<div class="spacer">
</div>
The system refuses to extend the data or stack space when the limits would be exceeded in the normal way: a <a class="link-man" href="../html2/brk.html">brk(2)</a> call fails if the data space limit is reached. When the stack limit is reached, the process receives a segmentation fault (<span class="define">SIGSEGV</span>); if this signal is not caught by a handler using the signal stack, this signal will kill the process.<div class="spacer">
</div>
A file I/O operation that would create a file larger than the process' soft limit will cause the write to fail and a signal <span class="define">SIGXFSZ</span> to be generated; this normally terminates the process, but may be caught. When the soft CPU time limit is exceeded, a signal <span class="define">SIGXCPU</span> is sent to the offending process.</div>
<div class="section">
<h1 id="x52455455524e2056414c554553">RETURN VALUES</h1> Upon successful completion, the value&#160;0 is returned; otherwise the value&#160;-1 is returned and the global variable <b class="var">errno</b> is set to indicate the error.</div>
<div class="section">
<h1 id="x4552524f5253">ERRORS</h1> <b class="fname">getrlimit</b>() and <b class="fname">setrlimit</b>() will fail if:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">EFAULT</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The address specified for <i class="farg">rlp</i> is invalid.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">EINVAL</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
An unrecognized value for <i class="farg">resource</i> was specified.</dd>
</dl>
<div class="spacer">
</div>
In addition, <b class="fname">setrlimit</b>() may return the following errors:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">EINVAL</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The new <i class="farg">rlim_cur</i> is greater than the new <i class="farg">rlim_max</i>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">EPERM</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The new <i class="farg">rlim_max</i> is greater than the current maximum limit value, and the caller is not the superuser.</dd>
</dl>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../html1/csh.html">csh(1)</a>, <a class="link-man" href="../html1/sh.html">sh(1)</a>, <a class="link-man" href="../html2/quotactl.html">quotactl(2)</a>, <a class="link-man" href="../html2/sigaction.html">sigaction(2)</a>, <a class="link-man" href="../html2/sigaltstack.html">sigaltstack(2)</a>, <a class="link-man" href="../html3/sysctl.html">sysctl(3)</a></div>
<div class="section">
<h1 id="x5354414e4441524453">STANDARDS</h1> The <b class="fname">getrlimit</b>() and <b class="fname">setrlimit</b>() functions conform to IEEE Std 1003.1-2008 (&#8220;POSIX.1&#8221;).<div class="spacer">
</div>
The <span class="define">RLIMIT_MEMLOCK</span>, <span class="define">RLIMIT_NPROC</span>, and <span class="define">RLIMIT_RSS</span> resources are non-standard extensions.</div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> The <b class="fname">getrlimit</b>() and <b class="fname">setrlimit</b>() system calls first appeared in <span class="unix">4.1cBSD</span>.</div>
<div class="section">
<h1 id="x42554753">BUGS</h1> The <span class="define">RLIMIT_AS</span> resource is missing.</div>
</div>
</body>
</html>

