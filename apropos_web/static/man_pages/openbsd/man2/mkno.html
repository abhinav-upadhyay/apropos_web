<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/posix/style.css" type="text/css" media="all"/>
<title>
MKNOD(2)</title>
</head>
<body>
<div class="mandoc">
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">mknod</b>, <b class="name">mknodat</b> &#8212; <span class="desc">make a special file node</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="includes">#include &lt;<a class="link-includes">sys/stat.h</a>&gt;</b><div class="spacer">
</div>
<i class="ftype">int</i><br/>
<b class="fname">mknod</b>(<i class="farg" style="white-space:nowrap;">const char *path</i>, <i class="farg" style="white-space:nowrap;">mode_t mode</i>, <i class="farg" style="white-space:nowrap;">dev_t dev</i>);<div class="spacer">
</div>
<b class="includes">#include &lt;<a class="link-includes">sys/stat.h</a>&gt;</b><br/>
<b class="includes">#include &lt;<a class="link-includes">fcntl.h</a>&gt;</b><div class="spacer">
</div>
<i class="ftype">int</i><br/>
<b class="fname">mknodat</b>(<i class="farg" style="white-space:nowrap;">int fd</i>, <i class="farg" style="white-space:nowrap;">const char *path</i>, <i class="farg" style="white-space:nowrap;">mode_t mode</i>, <i class="farg" style="white-space:nowrap;">dev_t dev</i>);</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> The <b class="fname">mknod</b>() function creates <i class="farg">path</i> with a file type and mode of <i class="farg">mode</i>, as modified by <a class="link-man" href="../html2/umask.html">umask(2)</a>. Only FIFO and device special files are supported by this implementation.<div class="spacer">
</div>
If <i class="farg">mode</i> is the bitwise OR of <span class="define">S_IFIFO</span> and zero or more file permissions, and <i class="farg">dev</i> is zero, then a FIFO is created. If <i class="farg">mode</i> is the bitwise OR of <span class="define">S_IFCHR</span> or <span class="define">S_IFBLK</span> and zero or more file permissions, then a character or block device special (respectively) is created with major and minor device numbers extracted from <i class="farg">dev</i>.<div class="spacer">
</div>
The <b class="fname">mknodat</b>() function is equivalent to <b class="fname">mknod</b>() except that where <i class="farg">path</i> specifies a relative path, the newly created device special file is created relative to the directory associated with file descriptor <i class="farg">fd</i> instead of the current working directory.<div class="spacer">
</div>
If <b class="fname">mknodat</b>() is passed the special value <span class="define">AT_FDCWD</span> (defined in <b class="includes">&lt;<a class="link-includes">fcntl.h</a>&gt;</b>) in the <i class="farg">fd</i> parameter, the current working directory is used and the behavior is identical to a call to <b class="fname">mknod</b>().<div class="spacer">
</div>
Creating a device special file with <b class="fname">mknod</b>() or <b class="fname">mknodat</b>() requires superuser privileges.</div>
<div class="section">
<h1 id="x52455455524e2056414c554553">RETURN VALUES</h1> Upon successful completion, the value&#160;0 is returned; otherwise the value&#160;-1 is returned and the global variable <b class="var">errno</b> is set to indicate the error.</div>
<div class="section">
<h1 id="x4552524f5253">ERRORS</h1> <b class="fname">mknod</b>() and <b class="fname">mknodat</b>() will fail and the file will be not created if:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">EINVAL</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
<i class="farg">mode</i> is an invalid file type or <i class="farg">dev</i> is an invalid value for that file type.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">ENOTDIR</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
A component of the path prefix is not a directory.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">ENAMETOOLONG</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
A component of a pathname exceeded <span class="define">NAME_MAX</span> characters, or an entire pathname (including the terminating NUL) exceeded <span class="define">PATH_MAX</span> bytes.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">ENOENT</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
A component of the path prefix does not exist.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">EACCES</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
Search permission is denied for a component of the path prefix.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">ELOOP</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
Too many symbolic links were encountered in translating the pathname.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">EPERM</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
<i class="farg">mode</i> is a device special and the process's effective user ID is not superuser.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">EIO</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
An I/O error occurred while making the directory entry or allocating the inode.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">ENOSPC</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The directory in which the entry for the new node is being placed cannot be extended because there is no space left on the file system containing the directory.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">ENOSPC</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
There are no free inodes on the file system on which the node is being created.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">EDQUOT</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The directory in which the entry for the new node is being placed cannot be extended because the user's quota of disk blocks on the file system containing the directory has been exhausted.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">EDQUOT</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The user's quota of inodes on the file system on which the node is being created has been exhausted.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">EROFS</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The named file resides on a read-only file system.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">EEXIST</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The named file exists.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">EFAULT</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
<i class="farg">path</i> points outside the process's allocated address space.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">EINVAL</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The process is running within an alternate root directory, as created by <a class="link-man" href="../html2/chroot.html">chroot(2)</a>.</dd>
</dl>
<div class="spacer">
</div>
Additionally, <b class="fname">mknodat</b>() will fail if:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">EBADF</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The <i class="farg">path</i> argument specifies a relative path and the <i class="farg">fd</i> argument is neither <span class="define">AT_FDCWD</span> nor a valid file descriptor.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">ENOTDIR</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The <i class="farg">path</i> argument specifies a relative path and the <i class="farg">fd</i> argument is a valid file descriptor but it does not reference a directory.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">EACCES</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The <i class="farg">path</i> argument specifies a relative path but search permission is denied for the directory which the <i class="farg">fd</i> file descriptor references.</dd>
</dl>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../html2/chmod.html">chmod(2)</a>, <a class="link-man" href="../html2/chroot.html">chroot(2)</a>, <a class="link-man" href="../html2/mkfifo.html">mkfifo(2)</a>, <a class="link-man" href="../html2/stat.html">stat(2)</a>, <a class="link-man" href="../html2/umask.html">umask(2)</a></div>
<div class="section">
<h1 id="x5354414e4441524453">STANDARDS</h1> The <b class="fname">mknod</b>() and <b class="fname">mknodat</b>() functions conform to IEEE Std 1003.1-2008 (&#8220;POSIX.1&#8221;).</div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> The <b class="fname">mknod</b>() system call first appeared in Version&#160;4 AT&amp;T UNIX, and <b class="fname">mknodat</b>() has been available since <span class="unix">OpenBSD&#160;5.0</span>.</div>
</div>
</body>
</html>

