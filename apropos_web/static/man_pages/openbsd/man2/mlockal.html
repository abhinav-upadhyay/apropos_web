<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/posix/style.css" type="text/css" media="all"/>
<title>
MLOCKALL(2)</title>
</head>
<body>
<div class="mandoc">
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">mlockall</b>, <b class="name">munlockall</b> &#8212; <span class="desc">lock (unlock) the address space of a process</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="includes">#include &lt;<a class="link-includes">sys/mman.h</a>&gt;</b><div class="spacer">
</div>
<i class="ftype">int</i><br/>
<b class="fname">mlockall</b>(<i class="farg" style="white-space:nowrap;">int flags</i>);<div class="spacer">
</div>
<i class="ftype">int</i><br/>
<b class="fname">munlockall</b>(<i class="farg" style="white-space:nowrap;">void</i>);</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> The <b class="fname">mlockall</b>() system call locks into memory the physical pages associated with the address space of a process until the address space is unlocked, the process exits, or execs another program image.<div class="spacer">
</div>
The following flags affect the behavior of <b class="fname">mlockall</b>():<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">MCL_CURRENT</span></dt>
<dd class="list-tag" style="margin-left: 11.00ex;">
Lock all pages currently mapped into the process's address space.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">MCL_FUTURE</span></dt>
<dd class="list-tag" style="margin-left: 11.00ex;">
Lock all pages mapped into the process's address space in the future, at the time the mapping is established. Note that this may cause future mappings to fail if those mappings cause resource limits to be exceeded.</dd>
</dl>
<div class="spacer">
</div>
Since physical memory is a potentially scarce resource, processes are limited in how much they can lock down. A single process can lock the minimum of a system-wide &#8220;wired pages&#8221; limit and the per-process <span class="define">RLIMIT_MEMLOCK</span> resource limit.<div class="spacer">
</div>
The <b class="fname">munlockall</b>() call unlocks any locked memory regions in the process address space. Any regions mapped after an <b class="fname">munlockall</b>() call will not be locked.</div>
<div class="section">
<h1 id="x52455455524e2056414c554553">RETURN VALUES</h1> The <b class="fname">mlockall</b>() and <b class="fname">munlockall</b>() functions return the value&#160;0 if successful; otherwise the value&#160;-1 is returned and the global variable <b class="var">errno</b> is set to indicate the error.</div>
<div class="section">
<h1 id="x4552524f5253">ERRORS</h1> <b class="fname">mlockall</b>() will fail if:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">EINVAL</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The <i class="farg">flags</i> argument is zero or includes unimplemented flags.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">ENOMEM</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
Locking all of the pages currently mapped would exceed either the system or per-process limit for locked memory.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">EAGAIN</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
Some or all of the memory mapped into the process's address space could not be locked when the call was made.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">EPERM</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The calling process does not have the appropriate privileges to perform the requested operation.</dd>
</dl>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../html2/mincore.html">mincore(2)</a>, <a class="link-man" href="../html2/mlock.html">mlock(2)</a>, <a class="link-man" href="../html2/mmap.html">mmap(2)</a>, <a class="link-man" href="../html2/munmap.html">munmap(2)</a>, <a class="link-man" href="../html2/setrlimit.html">setrlimit(2)</a></div>
<div class="section">
<h1 id="x5354414e4441524453">STANDARDS</h1> The <b class="fname">mlockall</b>() and <b class="fname">munlockall</b>() functions conform to IEEE Std 1003.1-2008 (&#8220;POSIX.1&#8221;).</div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> The <b class="fname">mlockall</b>() and <b class="fname">munlockall</b>() functions first appeared in <span class="unix">OpenBSD&#160;2.9</span>.</div>
<div class="section">
<h1 id="x42554753">BUGS</h1> The per-process resource limit is a limit on the amount of virtual memory locked, while the system-wide limit is for the number of locked physical pages. Hence a process with two distinct locked mappings of the same physical page counts as 2 pages against the per-process limit and only as a single page in the system limit.</div>
</div>
</body>
</html>

