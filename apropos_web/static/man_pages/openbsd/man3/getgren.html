<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/posix/style.css" type="text/css" media="all"/>
<title>
GETGRENT(3)</title>
</head>
<body>
<div class="mandoc">
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">getgrent</b>, <b class="name">getgrnam</b>, <b class="name">getgrnam_r</b>, <b class="name">getgrgid</b>, <b class="name">getgrgid_r</b>, <b class="name">setgroupent</b>, <b class="name">setgrent</b>, <b class="name">endgrent</b> &#8212; <span class="desc">group database operations</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="includes">#include &lt;<a class="link-includes">grp.h</a>&gt;</b><div class="spacer">
</div>
<i class="ftype">struct group *</i><br/>
<b class="fname">getgrent</b>(<i class="farg" style="white-space:nowrap;">void</i>);<div class="spacer">
</div>
<i class="ftype">struct group *</i><br/>
<b class="fname">getgrnam</b>(<i class="farg" style="white-space:nowrap;">const char *name</i>);<div class="spacer">
</div>
<i class="ftype">int</i><br/>
<b class="fname">getgrnam_r</b>(<i class="farg" style="white-space:nowrap;">const char *name</i>, <i class="farg" style="white-space:nowrap;">struct group *grp</i>, <i class="farg" style="white-space:nowrap;">char *buf</i>, <i class="farg" style="white-space:nowrap;">size_t bufsize</i>, <i class="farg" style="white-space:nowrap;">struct group **result</i>);<div class="spacer">
</div>
<i class="ftype">struct group *</i><br/>
<b class="fname">getgrgid</b>(<i class="farg" style="white-space:nowrap;">gid_t gid</i>);<div class="spacer">
</div>
<i class="ftype">int</i><br/>
<b class="fname">getgrgid_r</b>(<i class="farg" style="white-space:nowrap;">gid_t gid</i>, <i class="farg" style="white-space:nowrap;">struct group *grp</i>, <i class="farg" style="white-space:nowrap;">char *buf</i>, <i class="farg" style="white-space:nowrap;">size_t bufsize</i>, <i class="farg" style="white-space:nowrap;">struct group **result</i>);<div class="spacer">
</div>
<i class="ftype">int</i><br/>
<b class="fname">setgroupent</b>(<i class="farg" style="white-space:nowrap;">int stayopen</i>);<div class="spacer">
</div>
<i class="ftype">void</i><br/>
<b class="fname">setgrent</b>(<i class="farg" style="white-space:nowrap;">void</i>);<div class="spacer">
</div>
<i class="ftype">void</i><br/>
<b class="fname">endgrent</b>(<i class="farg" style="white-space:nowrap;">void</i>);</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> These functions operate on the group database file <i class="file">/etc/group</i> which is described in <a class="link-man" href="../html5/group.html">group(5)</a>. Each line of the database is defined by the structure <code class="lit">struct group</code> found in the include file <b class="includes">&lt;<a class="link-includes">grp.h</a>&gt;</b>:<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
struct group { 
	char	*gr_name;	/* group name */ 
	char	*gr_passwd;	/* group password */ 
	gid_t	gr_gid;		/* group id */ 
	char	**gr_mem;	/* group members */ 
};</pre>
<div class="spacer">
</div>
The functions <b class="fname">getgrnam</b>() and <b class="fname">getgrgid</b>() search the group database for the given group name pointed to by <i class="farg">name</i> or the group ID pointed to by <i class="farg">gid</i>, respectively, returning the first one encountered. Identical group names or group GIDs may result in undefined behavior.<div class="spacer">
</div>
<b class="fname">getgrent</b>() sequentially reads the group database and is intended for programs that wish to step through the complete list of groups.<div class="spacer">
</div>
All three routines will open the group file for reading, if necessary.<div class="spacer">
</div>
<b class="fname">setgroupent</b>() opens the file, or rewinds it if it is already open. If <i class="farg">stayopen</i> is non-zero, file descriptors are left open, significantly speeding subsequent function calls. This functionality is unnecessary for <b class="fname">getgrent</b>() as it doesn't close its file descriptors by default. It should also be noted that it is dangerous for long-running programs to use this functionality as the group file may be updated.<div class="spacer">
</div>
<b class="fname">setgrent</b>() is equivalent to <b class="fname">setgroupent</b>() with an argument of zero.<div class="spacer">
</div>
The <b class="fname">endgrent</b>() function closes any open files.<div class="spacer">
</div>
The <b class="fname">getgrgid_r</b>() and <b class="fname">getgrnam_r</b>() functions both update the group structure pointed to by <i class="farg">grp</i> and store a pointer to that structure at the location pointed to by <i class="farg">result</i>. The structure is filled with an entry from the group database with a matching <i class="farg">gid</i> or <i class="farg">name</i>. Storage referenced by the group structure will be allocated from the memory provided with the <i class="farg">buf</i> parameter, which is <i class="farg">bufsiz</i> characters in size. The maximum size needed for this buffer can be determined with <b class="fname">sysconf</b>(<i class="farg">_SC_GETGR_R_SIZE_MAX</i>).<div class="subsection">
<h2 id="x595020737570706f7274">YP support</h2> If YP is active, the functions <b class="fname">getgrent</b>() and <b class="fname">getgrnam</b>() also use the <i class="file">group.byname</i> YP map and the function <b class="fname">getgrgid</b>() also uses the <i class="file">group.bygid</i> YP map in addition to the group file, respecting the order of normal and YP entries in the group file.</div>
</div>
<div class="section">
<h1 id="x52455455524e2056414c554553">RETURN VALUES</h1> The functions <b class="fname">getgrent</b>(), <b class="fname">getgrnam</b>(), and <b class="fname">getgrgid</b>() return a pointer to the group entry if successful; if end-of-file is reached or an error occurs a <span class="define">NULL</span> pointer is returned.<div class="spacer">
</div>
The <b class="fname">setgroupent</b>() function returns the value 1 if successful, otherwise 0.<div class="spacer">
</div>
The <b class="fname">endgrent</b>() and <b class="fname">setgrent</b>() functions have no return value.<div class="spacer">
</div>
The functions <b class="fname">getgrgid_r</b>() and <b class="fname">getgrnam_r</b>() update <i class="arg">result</i> to point to <i class="arg">grp</i> if a match is found or set it to <span class="define">NULL</span> if no match is found or an error occurs. They return 0 on success, even if no match is found, or an error number if an error occurs; see <i class="link-sec"><a class="link-sec" href="#x4552524f5253">ERRORS</a></i>.</div>
<div class="section">
<h1 id="x46494c4553">FILES</h1><dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/etc/group</i></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
group database file</dd>
</dl>
</div>
<div class="section">
<h1 id="x4552524f5253">ERRORS</h1> The <b class="fname">getgruid_r</b>() and <b class="fname">getgrnam_r</b>() functions may fail if:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">ERANGE</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The storage supplied via <i class="farg">buf</i> and <i class="farg">bufsize</i> is too small and cannot contain all the strings to be returned in <i class="farg">grp</i>.</dd>
</dl>
<div class="spacer">
</div>
The <b class="fname">getgrent</b>(), <b class="fname">getgrgid</b>(), <b class="fname">getgrgid_r</b>(), <b class="fname">getgrnam</b>(), and <b class="fname">getgrnam_r</b>() functions may also fail for any of the errors specified for <a class="link-man" href="../html3/fgets.html">fgets(3)</a>, <a class="link-man" href="../html3/getc.html">getc(3)</a>, and <a class="link-man" href="../html3/strtoul.html">strtoul(3)</a>. If YP is active, they may also fail due to errors caused by the YP subsystem.<div class="spacer">
</div>
The <b class="fname">setgroupent</b>() function may fail for any of the errors specified for <a class="link-man" href="../html3/fopen.html">fopen(3)</a>.<div class="spacer">
</div>
The <b class="fname">endgrent</b>(), <b class="fname">getgrgid_r</b>(), <b class="fname">getgrnam_r</b>(), and <b class="fname">setgrent</b>() functions do not set errno.</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../html3/getpwent.html">getpwent(3)</a>, <a class="link-man" href="../html3/sysconf.html">sysconf(3)</a>, <a class="link-man" href="../html3/ypclnt.html">ypclnt(3)</a>, <a class="link-man" href="../html5/group.html">group(5)</a>, <a class="link-man" href="../html8/yp.html">yp(8)</a></div>
<div class="section">
<h1 id="x5354414e4441524453">STANDARDS</h1> The functions <b class="fname">getgrgid</b>(), <b class="fname">getgrgid_r</b>(), <b class="fname">getgrnam</b>(), and <b class="fname">getgrnam_r</b>() are compliant with the IEEE Std 1003.1-2008 (&#8220;POSIX.1&#8221;) specification.<div class="spacer">
</div>
The functions <b class="fname">endgrent</b>(), <b class="fname">getgrent</b>(), and <b class="fname">setgrent</b>() are compliant with the X/Open System Interfaces option of the IEEE Std 1003.1-2008 (&#8220;POSIX.1&#8221;) specification.<div class="spacer">
</div>
<i class="link-sec"><a class="link-sec" href="#x595020737570706f7274">YP support</a></i> and the <b class="fname">setgroupent</b>() function are extensions to that specification.</div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> The functions <b class="fname">endgrent</b>(), <b class="fname">getgrent</b>(), <b class="fname">getgrnam</b>(), <b class="fname">getgrgid</b>(), and <b class="fname">setgrent</b>() appeared in Version&#160;7 AT&amp;T UNIX. The <b class="fname">setgroupent</b>() function appeared in <span class="unix">4.3BSD-Reno</span>.<div class="spacer">
</div>
The historic function <b class="fname">setgrfile</b>(), which allowed the specification of alternate group databases, has been deprecated and is no longer available.</div>
<div class="section">
<h1 id="x42554753">BUGS</h1> The functions <b class="fname">getgrent</b>(), <b class="fname">getgrnam</b>(), <b class="fname">getgrgid</b>(), <b class="fname">setgroupent</b>(), and <b class="fname">setgrent</b>() leave their results in an internal static object and return a pointer to that object. Subsequent calls to the same function will modify the same object.<div class="spacer">
</div>
The functions <b class="fname">getgrent</b>(), <b class="fname">endgrent</b>(), <b class="fname">setgroupent</b>(), and <b class="fname">setgrent</b>() are fairly useless in a networked environment and should be avoided, if possible.</div>
</div>
</body>
</html>

