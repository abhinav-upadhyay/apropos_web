<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/posix/style.css" type="text/css" media="all"/>
<title>
DAEMON(3)</title>
</head>
<body>
<div class="mandoc">
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">daemon</b> &#8212; <span class="desc">run in the background</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="includes">#include &lt;<a class="link-includes">stdlib.h</a>&gt;</b><div class="spacer">
</div>
<i class="ftype">int</i><br/>
<b class="fname">daemon</b>(<i class="farg" style="white-space:nowrap;">int nochdir</i>, <i class="farg" style="white-space:nowrap;">int noclose</i>);</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> The <b class="fname">daemon</b>() function is for programs wishing to detach themselves from the controlling terminal and run in the background as system daemons.<div class="spacer">
</div>
If the argument <i class="farg">nochdir</i> is zero, <b class="fname">daemon</b>() changes the current working directory to the root (<i class="file">/</i>).<div class="spacer">
</div>
If the argument <i class="farg">noclose</i> is zero, <b class="fname">daemon</b>() redirects standard input, standard output and standard error to <i class="file">/dev/null</i>.</div>
<div class="section">
<h1 id="x52455455524e2056414c554553">RETURN VALUES</h1> Upon success, <b class="fname">daemon</b>() returns 0; otherwise -1 is returned.</div>
<div class="section">
<h1 id="x4552524f5253">ERRORS</h1> The function <b class="fname">daemon</b>() may fail and set <b class="var">errno</b> for any of the errors specified for the library functions <a class="link-man" href="../html2/fork.html">fork(2)</a> and <a class="link-man" href="../html2/setsid.html">setsid(2)</a>.</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../html2/fork.html">fork(2)</a>, <a class="link-man" href="../html2/setsid.html">setsid(2)</a></div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> The <b class="fname">daemon</b>() function first appeared in <span class="unix">4.4BSD</span>.</div>
<div class="section">
<h1 id="x43415645415453">CAVEATS</h1> If the <i class="arg">noclose</i> argument is zero, <b class="fname">daemon</b>() closes the first three file descriptors and redirects them to <i class="file">/dev/null</i>. Normally, these correspond to standard input, standard output and standard error. However, if any of those file descriptors refer to something else they will still be closed, resulting in incorrect behavior of the calling program. This can happen if any of standard input, standard output or standard error have been closed before the program was run. Programs using <b class="fname">daemon</b>() should therefore make sure to either call <b class="fname">daemon</b>() before opening any files or sockets or, alternately, verifying that any file descriptors obtained have a value greater than 2.</div>
</div>
</body>
</html>

