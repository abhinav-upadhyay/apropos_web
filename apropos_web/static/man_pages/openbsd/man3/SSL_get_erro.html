<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/posix/style.css" type="text/css" media="all"/>
<title>
SSL_GET_ERROR(3)</title>
</head>
<body>
<div class="mandoc">
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">SSL_get_error</b> &#8212; <span class="desc">obtain result code for TLS/SSL I/O operation</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="includes">#include &lt;<a class="link-includes">openssl/ssl.h</a>&gt;</b><div class="spacer">
</div>
<i class="ftype">int</i><br/>
<b class="fname">SSL_get_error</b>(<i class="farg" style="white-space:nowrap;">const SSL *ssl</i>, <i class="farg" style="white-space:nowrap;">int ret</i>);</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> <b class="fname">SSL_get_error</b>() returns a result code (suitable for the C &#8220;switch&#8221; statement) for a preceding call to <a class="link-man" href="../html3/SSL_connect.html">SSL_connect(3)</a>, <a class="link-man" href="../html3/SSL_accept.html">SSL_accept(3)</a>, <a class="link-man" href="../html3/SSL_do_handshake.html">SSL_do_handshake(3)</a>, <a class="link-man" href="../html3/SSL_read.html">SSL_read(3)</a>, <a class="link-man" href="../html3/SSL_peek.html">SSL_peek(3)</a>, or <a class="link-man" href="../html3/SSL_write.html">SSL_write(3)</a> on <i class="farg">ssl</i>. The value returned by that TLS/SSL I/O function must be passed to <b class="fname">SSL_get_error</b>() in parameter <i class="farg">ret</i>.<div class="spacer">
</div>
In addition to <i class="farg">ssl</i> and <i class="farg">ret</i>, <b class="fname">SSL_get_error</b>() inspects the current thread's OpenSSL error queue. Thus, <b class="fname">SSL_get_error</b>() must be used in the same thread that performed the TLS/SSL I/O operation, and no other OpenSSL function calls should appear in between. The current thread's error queue must be empty before the TLS/SSL I/O operation is attempted, or <b class="fname">SSL_get_error</b>() will not work reliably.</div>
<div class="section">
<h1 id="x52455455524e2056414c554553">RETURN VALUES</h1> The following return values can currently occur:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">SSL_ERROR_NONE</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
The TLS/SSL I/O operation completed. This result code is returned if and only if <i class="farg">ret</i> &lt; 0.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">SSL_ERROR_ZERO_RETURN</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
The TLS/SSL connection has been closed. If the protocol version is SSL 3.0 or TLS 1.0, this result code is returned only if a closure alert has occurred in the protocol, i.e., if the connection has been closed cleanly. Note that in this case <span class="define">SSL_ERROR_ZERO_RETURN</span> does not necessarily indicate that the underlying transport has been closed.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">SSL_ERROR_WANT_READ</span>, <span class="define">SSL_ERROR_WANT_WRITE</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
The operation did not complete; the same TLS/SSL I/O function should be called again later. If, by then, the underlying <span class="type">BIO</span> has data available for reading (if the result code is <span class="define">SSL_ERROR_WANT_READ</span>) or allows writing data (<span class="define">SSL_ERROR_WANT_WRITE</span>), then some TLS/SSL protocol progress will take place, i.e., at least part of a TLS/SSL record will be read or written. Note that the retry may again lead to a <span class="define">SSL_ERROR_WANT_READ</span> or <span class="define">SSL_ERROR_WANT_WRITE</span> condition. There is no fixed upper limit for the number of iterations that may be necessary until progress becomes visible at application protocol level.<div class="spacer">
</div>
For socket <i class="farg">BIO</i>s (e.g., when <b class="fname">SSL_set_fd</b>() was used), <a class="link-man" href="../html2/select.html">select(2)</a> or <a class="link-man" href="../html2/poll.html">poll(2)</a> on the underlying socket can be used to find out when the TLS/SSL I/O function should be retried.<div class="spacer">
</div>
Caveat: Any TLS/SSL I/O function can lead to either of <span class="define">SSL_ERROR_WANT_READ</span> and <span class="define">SSL_ERROR_WANT_WRITE</span>. In particular, <a class="link-man" href="../html3/SSL_read.html">SSL_read(3)</a> or <a class="link-man" href="../html3/SSL_peek.html">SSL_peek(3)</a> may want to write data and <a class="link-man" href="../html3/SSL_write.html">SSL_write(3)</a> may want to read data. This is mainly because TLS/SSL handshakes may occur at any time during the protocol (initiated by either the client or the server); <a class="link-man" href="../html3/SSL_read.html">SSL_read(3)</a>, <a class="link-man" href="../html3/SSL_peek.html">SSL_peek(3)</a>, and <a class="link-man" href="../html3/SSL_write.html">SSL_write(3)</a> will handle any pending handshakes.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">SSL_ERROR_WANT_CONNECT</span>, <span class="define">SSL_ERROR_WANT_ACCEPT</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
The operation did not complete; the same TLS/SSL I/O function should be called again later. The underlying BIO was not connected yet to the peer and the call would block in <a class="link-man" href="../html2/connect.html">connect(2)</a>/<a class="link-man" href="../html2/accept.html">accept(2)</a>. The SSL function should be called again when the connection is established. These messages can only appear with a <a class="link-man" href="../html3/BIO_s_connect.html">BIO_s_connect(3)</a> or <a class="link-man" href="../html3/BIO_s_accept.html">BIO_s_accept(3)</a> <span class="type">BIO</span>, respectively. In order to find out when the connection has been successfully established, on many platforms <a class="link-man" href="../html2/select.html">select(2)</a> or <a class="link-man" href="../html2/poll.html">poll(2)</a> for writing on the socket file descriptor can be used.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">SSL_ERROR_WANT_X509_LOOKUP</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
The operation did not complete because an application callback set by <a class="link-man" href="../html3/SSL_CTX_set_client_cert_cb.html">SSL_CTX_set_client_cert_cb(3)</a> has asked to be called again. The TLS/SSL I/O function should be called again later. Details depend on the application.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">SSL_ERROR_SYSCALL</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Some I/O error occurred. The OpenSSL error queue may contain more information on the error. If the error queue is empty (i.e., <b class="fname">ERR_get_error</b>() returns 0), <i class="farg">ret</i> can be used to find out more about the error: If <i class="farg">ret</i> == 0, an <span class="define">EOF</span> was observed that violates the protocol. If <i class="farg">ret</i> == &#8722;1, the underlying <span class="type">BIO</span> reported an I/O error (for socket I/O on Unix systems, consult <span class="define">errno</span> for details).</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">SSL_ERROR_SSL</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
A failure in the SSL library occurred, usually a protocol error. The OpenSSL error queue contains more information on the error.</dd>
</dl>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../html3/err.html">err(3)</a>, <a class="link-man" href="../html3/ssl.html">ssl(3)</a></div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> <b class="fname">SSL_get_error</b>() was added in SSLeay 0.8.</div>
</div>
</body>
</html>

