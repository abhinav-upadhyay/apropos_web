<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/posix/style.css" type="text/css" media="all"/>
<title>
BUF_MEM_NEW(3)</title>
</head>
<body>
<div class="mandoc">
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">BUF_MEM_new</b>, <b class="name">BUF_MEM_free</b>, <b class="name">BUF_MEM_grow</b>, <b class="name">BUF_strdup</b> &#8212; <span class="desc">simple character arrays structure</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="includes">#include &lt;<a class="link-includes">openssl/buffer.h</a>&gt;</b><div class="spacer">
</div>
<i class="ftype">BUF_MEM *</i><br/>
<b class="fname">BUF_MEM_new</b>(<i class="farg">void</i>);<div class="spacer">
</div>
<i class="ftype">void</i><br/>
<b class="fname">BUF_MEM_free</b>(<i class="farg">BUF_MEM *a</i>);<div class="spacer">
</div>
<i class="ftype">int</i><br/>
<b class="fname">BUF_MEM_grow</b>(<i class="farg">BUF_MEM *str</i>, <i class="farg">size_t len</i>);<div class="spacer">
</div>
<i class="ftype">char *</i><br/>
<b class="fname">BUF_strdup</b>(<i class="farg">const char *str</i>);</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> The buffer library handles simple character arrays. Buffers are used for various purposes in the library, most notably memory BIOs.<div class="spacer">
</div>
The library uses the <span class="type">BUF_MEM</span> structure defined in buffer.h:<div class="spacer">
</div>
<pre style="margin-left: 0.00ex;" class="lit display">
typedef struct buf_mem_st 
{ 
	size_t length;	/* current number of bytes */ 
	char *data; 
	size_t max;	/* size of buffer */ 
} BUF_MEM;</pre>
<div class="spacer">
</div>
<i class="farg">length</i> is the current size of the buffer in bytes, <i class="farg">max</i> is the amount of memory allocated to the buffer. There are three functions which handle these and one &#8220;miscellaneous&#8221; function.<div class="spacer">
</div>
<b class="fname">BUF_MEM_new</b>() allocates a new buffer of zero size.<div class="spacer">
</div>
<b class="fname">BUF_MEM_free</b>() frees up an already existing buffer. The data is zeroed before freeing up in case the buffer contains sensitive data.<div class="spacer">
</div>
<b class="fname">BUF_MEM_grow</b>() changes the size of an already existing buffer to <i class="farg">len</i>. Any data already in the buffer is preserved if it increases in size.<div class="spacer">
</div>
<b class="fname">BUF_strdup</b>() copies a NUL terminated string into a block of allocated memory and returns a pointer to the allocated block. Unlike the system <a class="link-man" href="../html3/strdup.html">strdup(3)</a> function, <b class="fname">BUF_strdup</b>() will accept a <span class="define">NULL</span> argument and will return <span class="define">NULL</span> in that case. Its use in new programs is discouraged.<div class="spacer">
</div>
The memory allocated from <b class="fname">BUF_strdup</b>() should be freed up using the <a class="link-man" href="../html3/free.html">free(3)</a> function.</div>
<div class="section">
<h1 id="x52455455524e2056414c554553">RETURN VALUES</h1> <b class="fname">BUF_MEM_new</b>() returns the buffer or <span class="define">NULL</span> on error.<div class="spacer">
</div>
<b class="fname">BUF_MEM_grow</b>() returns zero on error or the new size (i.e. <i class="farg">len</i>).</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../html3/bio.html">bio(3)</a></div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> <b class="fname">BUF_MEM_new</b>(), <b class="fname">BUF_MEM_free</b>() and <b class="fname">BUF_MEM_grow</b>() are available in all versions of SSLeay and OpenSSL. <b class="fname">BUF_strdup</b>() was added in SSLeay 0.8.</div>
</div>
</body>
</html>

