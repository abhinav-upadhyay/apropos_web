<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/posix/style.css" type="text/css" media="all"/>
<title>
GETHOSTBYNAME(3)</title>
</head>
<body>
<div class="mandoc">
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">gethostbyname</b>, <b class="name">gethostbyname2</b>, <b class="name">gethostbyaddr</b>, <b class="name">gethostent</b>, <b class="name">sethostent</b>, <b class="name">endhostent</b>, <b class="name">hstrerror</b>, <b class="name">herror</b> &#8212; <span class="desc">get network host entry</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="includes">#include &lt;<a class="link-includes">netdb.h</a>&gt;</b><div class="spacer">
</div>
<span class="type">extern int h_errno</span>;<div class="spacer">
</div>
<i class="ftype">struct hostent *</i><br/>
<b class="fname">gethostbyname</b>(<i class="farg" style="white-space:nowrap;">const char *name</i>);<div class="spacer">
</div>
<i class="ftype">struct hostent *</i><br/>
<b class="fname">gethostent</b>(<i class="farg" style="white-space:nowrap;">void</i>);<div class="spacer">
</div>
<i class="ftype">void</i><br/>
<b class="fname">sethostent</b>(<i class="farg" style="white-space:nowrap;">int stayopen</i>);<div class="spacer">
</div>
<i class="ftype">void</i><br/>
<b class="fname">endhostent</b>(<i class="farg" style="white-space:nowrap;">void</i>);<div class="spacer">
</div>
<i class="ftype">void</i><br/>
<b class="fname">herror</b>(<i class="farg" style="white-space:nowrap;">const char *string</i>);<div class="spacer">
</div>
<i class="ftype">const char *</i><br/>
<b class="fname">hstrerror</b>(<i class="farg" style="white-space:nowrap;">int err</i>);<div class="spacer">
</div>
<b class="includes">#include &lt;<a class="link-includes">sys/socket.h</a>&gt;</b><br/>
<b class="includes">#include &lt;<a class="link-includes">netdb.h</a>&gt;</b><div class="spacer">
</div>
<i class="ftype">struct hostent *</i><br/>
<b class="fname">gethostbyname2</b>(<i class="farg" style="white-space:nowrap;">const char *name</i>, <i class="farg" style="white-space:nowrap;">int af</i>);<div class="spacer">
</div>
<i class="ftype">struct hostent *</i><br/>
<b class="fname">gethostbyaddr</b>(<i class="farg" style="white-space:nowrap;">const void *addr</i>, <i class="farg" style="white-space:nowrap;">socklen_t len</i>, <i class="farg" style="white-space:nowrap;">int af</i>);</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> The <b class="fname">gethostbyname</b>(), <b class="fname">gethostbyname2</b>(), and <b class="fname">gethostbyaddr</b>() functions each return a pointer to an object with the following structure describing an Internet host referenced by name or by address, respectively. This structure contains either information obtained from a name server, broken-out fields from a line in <i class="file">/etc/hosts</i>, or database entries supplied by the <a class="link-man" href="../html8/yp.html">yp(8)</a> system. <a class="link-man" href="../html5/resolv.conf.html">resolv.conf(5)</a> describes how the particular database is chosen.<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
struct	hostent { 
	char	*h_name;	/* official name of host */ 
	char	**h_aliases;	/* alias list */ 
	int	h_addrtype;	/* host address type */ 
	int	h_length;	/* length of address */ 
	char	**h_addr_list;	/* list of returned addresses */ 
}; 
#define	h_addr  h_addr_list[0]	/* address, for backward compat */</pre>
<div class="spacer">
</div>
The members of this structure are:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="farg">h_name</i></dt>
<dd class="list-tag" style="margin-left: 11.00ex;">
Official name of the host.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="farg">h_aliases</i></dt>
<dd class="list-tag" style="margin-left: 11.00ex;">
A null-terminated array of alternate names for the host.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="farg">h_addrtype</i></dt>
<dd class="list-tag" style="margin-left: 11.00ex;">
The type of address being returned.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="farg">h_length</i></dt>
<dd class="list-tag" style="margin-left: 11.00ex;">
The length, in bytes, of the address.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="farg">h_addr_list</i></dt>
<dd class="list-tag" style="margin-left: 11.00ex;">
A null-terminated array of network addresses for the host. Host addresses are returned in network byte order.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="farg">h_addr</i></dt>
<dd class="list-tag" style="margin-left: 11.00ex;">
The first address in <i class="farg">h_addr_list</i>; this is for backward compatibility.</dd>
</dl>
<div class="spacer">
</div>
The function <b class="fname">gethostbyname</b>() will search for the named host in the current domain and its parents using the search lookup semantics detailed in <a class="link-man" href="../html5/resolv.conf.html">resolv.conf(5)</a> and <a class="link-man" href="../html7/hostname.html">hostname(7)</a>.<div class="spacer">
</div>
<b class="fname">gethostbyname2</b>() is an advanced form of <b class="fname">gethostbyname</b>() which allows lookups in address families other than <span class="define">AF_INET</span>. Currently, the only supported address family besides <span class="define">AF_INET</span> is <span class="define">AF_INET6</span>.<div class="spacer">
</div>
The <b class="fname">gethostbyaddr</b>() function will search for the specified address of length <i class="farg">len</i> in the address family <i class="farg">af</i>. The only address family currently supported is <span class="define">AF_INET</span>.<div class="spacer">
</div>
The <b class="fname">sethostent</b>() function may be used to request the use of a connected TCP socket for queries. If the <i class="farg">stayopen</i> flag is non-zero, this sets the option to send all queries to the name server using TCP and to retain the connection after each call to <b class="fname">gethostbyname</b>() or <b class="fname">gethostbyaddr</b>(). Otherwise, queries are performed using UDP datagrams.<div class="spacer">
</div>
The <b class="fname">endhostent</b>() function closes the TCP connection.<div class="spacer">
</div>
The <b class="fname">herror</b>() function prints an error message describing the failure. If its argument <i class="farg">string</i> is non-null, it is prepended to the message string and separated from it by a colon (&#8216;<code class="lit">:</code>&#8217;) and a space. The error message is printed with a trailing newline. The contents of the error message is the same as that returned by <b class="fname">hstrerror</b>() with argument <i class="farg">h_errno</i>.</div>
<div class="section">
<h1 id="x454e5649524f4e4d454e54">ENVIRONMENT</h1><dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
RES_OPTIONS</dt>
<dd class="list-tag" style="margin-left: 11.00ex;">
A list of options to override the resolver's internal defaults. See <a class="link-man" href="../html3/resolver.html">resolver(3)</a> for more information.</dd>
</dl>
</div>
<div class="section">
<h1 id="x46494c4553">FILES</h1><dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/etc/hosts</i></dt>
<dd class="list-tag" style="margin-left: 16.00ex;">
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/etc/resolv.conf</i></dt>
<dd class="list-tag" style="margin-left: 16.00ex;">
</dd>
</dl>
</div>
<div class="section">
<h1 id="x444941474e4f5354494353">DIAGNOSTICS</h1> Error return status from <b class="fname">gethostbyname</b>(), <b class="fname">gethostbyname2</b>(), and <b class="fname">gethostbyaddr</b>() is indicated by return of a null pointer. The external integer <b class="var">h_errno</b> may then be checked to see whether this is a temporary failure or an invalid or unknown host.<div class="spacer">
</div>
The variable <b class="var">h_errno</b> can have the following values:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">HOST_NOT_FOUND</span></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
No such host is known.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">TRY_AGAIN</span></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
This is usually a temporary error and means that the local server did not receive a response from an authoritative server. A retry at some later time may succeed.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">NO_RECOVERY</span></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
Some unexpected server failure was encountered. This is a non-recoverable error.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">NO_DATA</span></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
The requested name is valid but does not have an IP address; this is not a temporary error. This means that the name is known to the name server but there is no address associated with this name. Another type of request to the name server using this domain name will result in an answer; for example, a mail-forwarder may be registered for this domain.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">NETDB_INTERNAL</span></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
An internal error occurred. This may occur when an address family other than <span class="define">AF_INET</span> or <span class="define">AF_INET6</span> is specified or when a resource is unable to be allocated.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">NETDB_SUCCESS</span></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
The function completed successfully.</dd>
</dl>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../html3/getaddrinfo.html">getaddrinfo(3)</a>, <a class="link-man" href="../html3/getnameinfo.html">getnameinfo(3)</a>, <a class="link-man" href="../html3/resolver.html">resolver(3)</a>, <a class="link-man" href="../html5/hosts.html">hosts(5)</a>, <a class="link-man" href="../html5/resolv.conf.html">resolv.conf(5)</a>, <a class="link-man" href="../html7/hostname.html">hostname(7)</a></div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> The <b class="fname">herror</b>() function appeared in <span class="unix">4.3BSD</span>. The <b class="fname">endhostent</b>(), <b class="fname">gethostbyaddr</b>(), <b class="fname">gethostbyname</b>(), <b class="fname">gethostent</b>(), and <b class="fname">sethostent</b>() functions appeared in <span class="unix">4.2BSD</span>.</div>
<div class="section">
<h1 id="x43415645415453">CAVEATS</h1> If the search routines in <a class="link-man" href="../html5/resolv.conf.html">resolv.conf(5)</a> decide to read the <i class="file">/etc/hosts</i> file, <b class="fname">gethostent</b>() and other functions will read the next line of the file, re-opening the file if necessary.<div class="spacer">
</div>
The <b class="fname">sethostent</b>() function opens and/or rewinds the file <i class="file">/etc/hosts</i>. If the <i class="farg">stayopen</i> argument is non-zero, the file will not be closed after each call to <b class="fname">gethostbyname</b>(), <b class="fname">gethostbyname2</b>(), or <b class="fname">gethostbyaddr</b>().<div class="spacer">
</div>
The <b class="fname">endhostent</b>() function closes the file.</div>
<div class="section">
<h1 id="x42554753">BUGS</h1> These functions use static data storage; if the data is needed for future use, it should be copied before any subsequent calls overwrite it.<div class="spacer">
</div>
Only the Internet address formats are currently understood.<div class="spacer">
</div>
YP does not support any address families other than <span class="define">AF_INET</span> and uses the traditional database format.</div>
</div>
</body>
</html>

