<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/posix/style.css" type="text/css" media="all"/>
<title>
SHM_OPEN(3)</title>
</head>
<body>
<div class="mandoc">
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">shm_open</b>, <b class="name">shm_unlink</b>, <b class="name">shm_mkstemp</b> &#8212; <span class="desc">create and destroy shared memory objects</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="includes">#include &lt;<a class="link-includes">sys/mman.h</a>&gt;</b><div class="spacer">
</div>
<i class="ftype">int</i><br/>
<b class="fname">shm_open</b>(<i class="farg" style="white-space:nowrap;">const char *path</i>, <i class="farg" style="white-space:nowrap;">int flags</i>, <i class="farg" style="white-space:nowrap;">mode_t mode</i>);<div class="spacer">
</div>
<i class="ftype">int</i><br/>
<b class="fname">shm_unlink</b>(<i class="farg" style="white-space:nowrap;">const char *path</i>);<div class="spacer">
</div>
<i class="ftype">int</i><br/>
<b class="fname">shm_mkstemp</b>(<i class="farg" style="white-space:nowrap;">char *template</i>);</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> The <b class="fname">shm_open</b>() function opens a shared memory object and returns a file descriptor suitable for use with <a class="link-man" href="../html2/mmap.html">mmap(2)</a>. The <i class="farg">flags</i> argument has the same meaning as provided to <a class="link-man" href="../html2/open.html">open(2)</a> and must include at least <span class="define">O_RDONLY</span> or <span class="define">O_RDWR</span> and may also include a combination of <span class="define">O_CREAT</span>, <span class="define">O_EXCL</span>, <span class="define">O_CLOEXEC</span>, <span class="define">O_NOFOLLOW</span>, or <span class="define">O_TRUNC</span>. This implementation forces the <i class="farg">mode</i> to be 0600 or 0400, and prohibits sharing between different UIDs.<div class="spacer">
</div>
<b class="fname">shm_unlink</b>() is used to remove a shared memory object. The object is not freed until all references to it have been released via <a class="link-man" href="../html2/close.html">close(2)</a>.<div class="spacer">
</div>
If a temporary shared memory object is desired, the <b class="fname">shm_mkstemp</b>() function should be preferred as it avoids several possible security holes that tend to appear in programs trying to create their own unique temporary names. The <i class="farg">template</i> argument is a string with at least six trailing Xs as described in <a class="link-man" href="../html3/mkstemp.html">mkstemp(3)</a>.</div>
<div class="section">
<h1 id="x52455455524e2056414c554553">RETURN VALUES</h1> <b class="fname">shm_open</b>() and <b class="fname">shm_mkstemp</b>() return a file descriptor on successful completion. They may fail for any of the reasons listed in <a class="link-man" href="../html2/open.html">open(2)</a>.</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../html2/mmap.html">mmap(2)</a></div>
<div class="section">
<h1 id="x5354414e4441524453">STANDARDS</h1> <b class="fname">shm_open</b>() and <b class="fname">shm_unlink</b>() appear in IEEE Std 1003.1-2001 (&#8220;POSIX.1&#8221;). Using <span class="define">O_CLOEXEC</span> or <span class="define">O_NOFOLLOW</span> with <b class="fname">shm_open</b>() is an extension to that standard. This implementation deviates from the standard by permitting less sharing.<div class="spacer">
</div>
<b class="fname">shm_mkstemp</b>() is an extension.</div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> The <b class="fname">shm_open</b>(), <b class="fname">shm_unlink</b>(), and <b class="fname">shm_mkstemp</b>() functions have been available since <span class="unix">OpenBSD&#160;5.4</span>.</div>
<div class="section">
<h1 id="x415554484f5253">AUTHORS</h1> <span class="author">Ted Unangst</span> &lt;<a class="link-mail" href="mailto:tedu@openbsd.org">tedu@openbsd.org</a>&gt;.</div>
</div>
</body>
</html>

