<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/posix/style.css" type="text/css" media="all"/>
<title>
GETIFADDRS(3)</title>
</head>
<body>
<div class="mandoc">
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">getifaddrs</b>, <b class="name">freeifaddrs</b> &#8212; <span class="desc">get interface addresses</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="includes">#include &lt;<a class="link-includes">sys/types.h</a>&gt;</b><br/>
<b class="includes">#include &lt;<a class="link-includes">sys/socket.h</a>&gt;</b><br/>
<b class="includes">#include &lt;<a class="link-includes">ifaddrs.h</a>&gt;</b><div class="spacer">
</div>
<i class="ftype">int</i><br/>
<b class="fname">getifaddrs</b>(<i class="farg" style="white-space:nowrap;">struct ifaddrs **ifap</i>);<div class="spacer">
</div>
<i class="ftype">void</i><br/>
<b class="fname">freeifaddrs</b>(<i class="farg" style="white-space:nowrap;">struct ifaddrs *ifap</i>);</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> The <b class="fname">getifaddrs</b>() function stores a reference to a linked list of the network interfaces on the local machine in the memory referenced by <i class="farg">ifap</i>. The list consists of <span class="type">ifaddrs</span> structures, as defined in the include file <b class="includes">&lt;<a class="link-includes">ifaddrs.h</a>&gt;</b>. The <span class="type">ifaddrs</span> structure contains at least the following entries:<div class="spacer">
</div>
<pre style="margin-left: 0.00ex;" class="lit display">
    struct ifaddrs   *ifa_next;         /* Pointer to next struct */ 
    char             *ifa_name;         /* Interface name */ 
    u_int             ifa_flags;        /* Interface flags */ 
    struct sockaddr  *ifa_addr;         /* Interface address */ 
    struct sockaddr  *ifa_netmask;      /* Interface netmask */ 
    struct sockaddr  *ifa_broadaddr;    /* Interface broadcast address */ 
    struct sockaddr  *ifa_dstaddr;      /* P2P interface destination */ 
    void             *ifa_data;		/* Address specific data */</pre>
<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="farg">ifa_next</i></dt>
<dd class="list-tag" style="margin-left: 13.00ex;">
Contains a pointer to the next structure on the list. This field is set to <span class="define">NULL</span> in the last structure on the list.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="farg">ifa_name</i></dt>
<dd class="list-tag" style="margin-left: 13.00ex;">
Contains the interface name.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="farg">ifa_flags</i></dt>
<dd class="list-tag" style="margin-left: 13.00ex;">
Contains the interface flags, as set by <a class="link-man" href="../html8/ifconfig.html">ifconfig(8)</a>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="farg">ifa_addr</i></dt>
<dd class="list-tag" style="margin-left: 13.00ex;">
References either the address of the interface or the link level address of the interface, if one exists, otherwise it is <span class="define">NULL</span>. (The <i class="farg">sa_family</i> field of the <i class="farg">ifa_addr</i> field should be consulted to determine the format of the <i class="farg">ifa_addr</i> address.)</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="farg">ifa_netmask</i></dt>
<dd class="list-tag" style="margin-left: 13.00ex;">
References the netmask associated with <i class="farg">ifa_addr</i>, if one is set, otherwise it is <span class="define">NULL</span>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="farg">ifa_broadaddr</i></dt>
<dd class="list-tag" style="margin-left: 13.00ex;">
This field, which should only be referenced for non-P2P interfaces, references the broadcast address associated with <i class="farg">ifa_addr</i>, if one exists, otherwise it is <span class="define">NULL</span>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="farg">ifa_dstaddr</i></dt>
<dd class="list-tag" style="margin-left: 13.00ex;">
This field, which should only be referenced for P2P interfaces, references the destination address on a P2P interface, if one exists, otherwise it is <span class="define">NULL</span>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="farg">ifa_data</i></dt>
<dd class="list-tag" style="margin-left: 13.00ex;">
References address family specific data. For <span class="define">AF_LINK</span> addresses it contains a pointer to the <span class="type">struct if_data</span> (as defined in include file <b class="includes">&lt;<a class="link-includes">net/if.h</a>&gt;</b>) which contains various interface attributes and statistics. For all other address families, <i class="farg">ifa_data</i> is <span class="define">NULL</span>.</dd>
</dl>
<div class="spacer">
</div>
The data returned by <b class="fname">getifaddrs</b>() is dynamically allocated and should be freed using <b class="fname">freeifaddrs</b>() when no longer needed.</div>
<div class="section">
<h1 id="x52455455524e2056414c554553">RETURN VALUES</h1> Upon successful completion, the value&#160;0 is returned; otherwise the value&#160;-1 is returned and the global variable <b class="var">errno</b> is set to indicate the error.</div>
<div class="section">
<h1 id="x4552524f5253">ERRORS</h1> The <b class="fname">getifaddrs</b>() may fail and set <b class="var">errno</b> for any of the errors specified for the library routines <a class="link-man" href="../html2/ioctl.html">ioctl(2)</a>, <a class="link-man" href="../html2/socket.html">socket(2)</a>, <a class="link-man" href="../html3/malloc.html">malloc(3)</a>, or <a class="link-man" href="../html3/sysctl.html">sysctl(3)</a>.</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../html2/ioctl.html">ioctl(2)</a>, <a class="link-man" href="../html2/socket.html">socket(2)</a>, <a class="link-man" href="../html3/sysctl.html">sysctl(3)</a>, <a class="link-man" href="../html4/netintro.html">netintro(4)</a>, <a class="link-man" href="../html8/ifconfig.html">ifconfig(8)</a></div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> The <b class="fname">getifaddrs</b>() function first appeared in BSDI <span class="unix">BSD/OS</span>. The function has been available on <span class="unix">OpenBSD</span> since <span class="unix">OpenBSD&#160;2.7</span>.</div>
<div class="section">
<h1 id="x42554753">BUGS</h1> If both <b class="includes">&lt;<a class="link-includes">net/if.h</a>&gt;</b> and <b class="includes">&lt;<a class="link-includes">ifaddrs.h</a>&gt;</b> are being included, <b class="includes">&lt;<a class="link-includes">net/if.h</a>&gt;</b> <span class="emph">must</span> be included before <b class="includes">&lt;<a class="link-includes">ifaddrs.h</a>&gt;</b>.</div>
</div>
</body>
</html>

