<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/posix/style.css" type="text/css" media="all"/>
<title>
DLOPEN(3)</title>
</head>
<body>
<div class="mandoc">
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">dlopen</b>, <b class="name">dlclose</b>, <b class="name">dlsym</b>, <b class="name">dladdr</b>, <b class="name">dlctl</b>, <b class="name">dlerror</b> &#8212; <span class="desc">dynamic link interface</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="includes">#include &lt;<a class="link-includes">dlfcn.h</a>&gt;</b><div class="spacer">
</div>
<i class="ftype">void *</i><br/>
<b class="fname">dlopen</b>(<i class="farg" style="white-space:nowrap;">const char *path</i>, <i class="farg" style="white-space:nowrap;">int mode</i>);<div class="spacer">
</div>
<i class="ftype">int</i><br/>
<b class="fname">dlclose</b>(<i class="farg" style="white-space:nowrap;">void *handle</i>);<div class="spacer">
</div>
<i class="ftype">void *</i><br/>
<b class="fname">dlsym</b>(<i class="farg" style="white-space:nowrap;">void *handle</i>, <i class="farg" style="white-space:nowrap;">const char *symbol</i>);<div class="spacer">
</div>
<i class="ftype">int</i><br/>
<b class="fname">dladdr</b>(<i class="farg" style="white-space:nowrap;">const void *addr</i>, <i class="farg" style="white-space:nowrap;">Dl_info *info</i>);<div class="spacer">
</div>
<i class="ftype">int</i><br/>
<b class="fname">dlctl</b>(<i class="farg" style="white-space:nowrap;">void *handle</i>, <i class="farg" style="white-space:nowrap;">int cmd</i>, <i class="farg" style="white-space:nowrap;">void *data</i>);<div class="spacer">
</div>
<i class="ftype">char *</i><br/>
<b class="fname">dlerror</b>(<i class="farg" style="white-space:nowrap;">void</i>);</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> These functions provide an interface to the run-time linker <a class="link-man" href="../html1/ld.so.html">ld.so(1)</a>. They allow new shared objects to be loaded into a process's address space under program control.<div class="spacer">
</div>
The <b class="fname">dlopen</b>() function takes the name of a shared object as its first argument. The shared object is mapped into the address space, relocated, and its external references are resolved in the same way as is done with the implicitly loaded shared libraries at program startup.<div class="spacer">
</div>
The <i class="farg">path</i> parameter can be specified as either an absolute pathname to a shared library or just the name of the shared library itself. When an absolute pathname is specified, only the path provided will be searched for the shared library. When just a shared library is specified, the same paths will be searched that are used for &#8220;intrinsic&#8221; shared library searches.<div class="spacer">
</div>
Shared libraries take the following form:<div class="spacer">
</div>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit">lib&lt;name&gt;.so[.xx[.yy]]</code></div>
</blockquote>
<div class="spacer">
</div>
When a shared library is specified without a version or with a partial version, the same library search rules apply that are used for &#8220;intrinsic&#8221; shared library searches. A null pointer supplied for <i class="farg">path</i> will return a special <i class="farg">handle</i> that behaves the same as the <span class="define">RTLD_DEFAULT</span> special <i class="farg">handle</i>.<div class="spacer">
</div>
The <i class="farg">mode</i> parameter specifies symbol resolution time and symbol visibility. One of the following values may be used to specify symbol resolution time:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 6.00ex;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">RTLD_NOW</span></dt>
<dd class="list-tag" style="margin-left: 11.00ex;">
Symbols are resolved immediately.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">RTLD_LAZY</span></dt>
<dd class="list-tag" style="margin-left: 11.00ex;">
Symbols are resolved when they are first referred to. This is the default value if resolution time is unspecified.</dd>
</dl>
<div class="spacer">
</div>
One of the following values may be used to specify symbol visibility:<div class="spacer">
</div>
<dl style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 6.00ex;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
<span class="symb">RTLD_GLOBAL</span></dt>
<dd class="list-tag" style="margin-left: 11.00ex;">
The object's symbols and the symbols of its dependencies will be visible to other objects.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<span class="symb">RTLD_LOCAL</span></dt>
<dd class="list-tag" style="margin-left: 11.00ex;">
The object's symbols and the symbols of its dependencies will not be visible to other objects. This is the default value if visibility is unspecified.</dd>
</dl>
<div class="spacer">
</div>
To specify both resolution time and visibility, bitwise inclusive OR one of each of the above values together. If an object was opened with RTLD_LOCAL and later opened with RTLD_GLOBAL, then it is promoted to RTLD_GLOBAL.<div class="spacer">
</div>
The main executable's symbols are normally invisible to <b class="fname">dlopen</b>() symbol resolution. Those symbols will be visible if linking is done with <a class="link-man" href="../html1/gcc.html">gcc(1)</a> <b class="flag">-rdynamic</b>, which is equivalent to <a class="link-man" href="../html1/ld.html">ld(1)</a> <b class="flag">--export-dynamic</b>.<div class="spacer">
</div>
All shared objects loaded at program startup are globally visible.<div class="spacer">
</div>
<b class="fname">dlopen</b>() returns a <i class="farg">handle</i> to be used in calls to <b class="fname">dlclose</b>(), <b class="fname">dlsym</b>(), and <b class="fname">dlctl</b>(). If the named shared object has already been loaded by a previous call to <b class="fname">dlopen</b>() and not yet unloaded by <b class="fname">dlclose</b>(), a <i class="farg">handle</i> referring to the resident copy is returned.<div class="spacer">
</div>
<b class="fname">dlclose</b>() unlinks and removes the object referred to by <i class="farg">handle</i> from the process address space. If multiple calls to <b class="fname">dlopen</b>() have been done on this object or the object is a dependency of another object then the object is removed when its reference count drops to zero. <b class="fname">dlclose</b>() returns 0 on success and non-zero on failure.<div class="spacer">
</div>
<b class="fname">dlsym</b>() searches for a definition of <i class="farg">symbol</i> in the object designated by <i class="farg">handle</i> and all shared objects that it depends on. The symbol's address is returned. If the symbol cannot be resolved, <span class="define">NULL</span> is returned.<div class="spacer">
</div>
<b class="fname">dlsym</b>() may also be called with special <i class="farg">handles</i>. <b class="fname">dlsym</b>() respects symbol visibility as specified by the <b class="fname">dlopen</b>() <i class="farg">mode</i> parameter. However, the symbols of an object's dependencies are always visible to it. The following special <i class="farg">handles</i> may be used with <b class="fname">dlsym</b>():<dl style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 6.00ex;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">NULL</span></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
Interpreted as a reference to the executable or shared object from which the call is being made. Thus an object can reference its own symbols and the symbols of its dependencies without calling <b class="fname">dlopen</b>().</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">RTLD_DEFAULT</span></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
All the visible shared objects and the executable will be searched in the order they were loaded.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">RTLD_NEXT</span></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
The search for <i class="farg">symbol</i> is limited to the visible shared objects which were loaded after the one issuing the call to <b class="fname">dlsym</b>(). Thus, if <b class="fname">dlsym</b>() is called from the main program, all the visible shared libraries are searched. If it is called from a shared library, all subsequently visible shared libraries are searched.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">RTLD_SELF</span></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
The search for <i class="farg">symbol</i> is limited to the shared object issuing the call to <b class="fname">dlsym</b>() and those shared objects which were loaded after it that are visible.</dd>
</dl>
<div class="spacer">
</div>
<b class="fname">dladdr</b>() queries the dynamic linker for information about the shared object containing the address <i class="farg">addr</i>. The information is returned in the structure specified by <i class="farg">info</i>. The structure contains at least the following members:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<code class="lit">const char *dli_fname</code></dt>
<dd class="list-tag" style="margin-left: 24.00ex;">
The pathname of the shared object containing the address <i class="farg">addr</i>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<code class="lit">void *dli_fbase</code></dt>
<dd class="list-tag" style="margin-left: 24.00ex;">
The base address at which the shared object is mapped into the address space of the calling process.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<code class="lit">const char *dli_sname</code></dt>
<dd class="list-tag" style="margin-left: 24.00ex;">
The name of the nearest run-time symbol with a address less than or equal to <i class="farg">addr</i>.<div class="spacer">
</div>
If no symbol with a suitable address is found, both this field and <b class="var">dli_saddr</b> are set to <span class="define">NULL</span>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<code class="lit">void *dli_saddr</code></dt>
<dd class="list-tag" style="margin-left: 24.00ex;">
The address of the symbol returned in <b class="var">dli_sname</b>.</dd>
</dl>
<div class="spacer">
</div>
If a mapped shared object containing <i class="farg">addr</i> cannot be found, <b class="fname">dladdr</b>() returns 0. In that case, a message detailing the failure can be retrieved by calling <b class="fname">dlerror</b>(). On success, a non-zero value is returned. Note: both strings pointed at by <b class="var">dli_fname</b> and <b class="var">dli_sname</b> reside in memory private to the run-time linker module and should not be modified by the caller.<div class="spacer">
</div>
In dynamically linked programs, the address of a global function will point to its program linkage table entry, rather than to the entry point of the function itself. This causes most global functions to appear to be defined within the main executable, rather than in the shared libraries where the actual code resides.<div class="spacer">
</div>
<b class="fname">dlctl</b>() provides an interface similar to <a class="link-man" href="../html2/ioctl.html">ioctl(2)</a> to control several aspects of the run-time linker's operation. This interface is currently under development.<div class="spacer">
</div>
<b class="fname">dlerror</b>() returns a character string representing the most recent error that has occurred while processing one of the other functions described here. If no dynamic linking errors have occurred since the last invocation of <b class="fname">dlerror</b>(), <b class="fname">dlerror</b>() returns <span class="define">NULL</span>. Thus, invoking <b class="fname">dlerror</b>() a second time, immediately following a prior invocation, will result in <span class="define">NULL</span> being returned.</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../html1/ld.html">ld(1)</a>, <a class="link-man" href="../html1/ld.so.html">ld.so(1)</a>, <a class="link-man" href="../html5/elf.html">elf(5)</a></div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> Some of the <b class="name">dl*</b> functions first appeared in SunOS 4.</div>
</div>
</body>
</html>

