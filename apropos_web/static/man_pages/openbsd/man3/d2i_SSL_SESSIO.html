<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/posix/style.css" type="text/css" media="all"/>
<title>
D2I_SSL_SESSION(3)</title>
</head>
<body>
<div class="mandoc">
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">d2i_SSL_SESSION</b>, <b class="name">i2d_SSL_SESSION</b> &#8212; <span class="desc">convert SSL_SESSION object from/to ASN1 representation</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="includes">#include &lt;<a class="link-includes">openssl/ssl.h</a>&gt;</b><div class="spacer">
</div>
<i class="ftype">SSL_SESSION *</i><br/>
<b class="fname">d2i_SSL_SESSION</b>(<i class="farg" style="white-space:nowrap;">SSL_SESSION **a</i>, <i class="farg" style="white-space:nowrap;">const unsigned char **pp</i>, <i class="farg" style="white-space:nowrap;">long length</i>);<div class="spacer">
</div>
<i class="ftype">int</i><br/>
<b class="fname">i2d_SSL_SESSION</b>(<i class="farg" style="white-space:nowrap;">SSL_SESSION *in</i>, <i class="farg" style="white-space:nowrap;">unsigned char **pp</i>);</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> <b class="fname">d2i_SSL_SESSION</b>() transforms the external ASN1 representation of an SSL/TLS session, stored as binary data at location <i class="farg">pp</i> with length <i class="farg">length</i>, into an <span class="type">SSL_SESSION</span> object.<div class="spacer">
</div>
<b class="fname">i2d_SSL_SESSION</b>() transforms the <span class="type">SSL_SESSION</span> object <i class="farg">in</i> into the ASN1 representation and stores it into the memory location pointed to by <i class="farg">pp</i>. The length of the resulting ASN1 representation is returned. If <i class="farg">pp</i> is the <span class="define">NULL</span> pointer, only the length is calculated and returned.</div>
<div class="section">
<h1 id="x4e4f544553">NOTES</h1> The <span class="type">SSL_SESSION</span> object is built from several <a class="link-man" href="../html3/malloc.html">malloc(3)</a>-ed parts; it can therefore not be moved, copied or stored directly. In order to store session data on disk or into a database, it must be transformed into a binary ASN1 representation.<div class="spacer">
</div>
When using <b class="fname">d2i_SSL_SESSION</b>(), the <span class="type">SSL_SESSION</span> object is automatically allocated. The reference count is 1, so that the session must be explicitly removed using <a class="link-man" href="../html3/SSL_SESSION_free.html">SSL_SESSION_free(3)</a>, unless the <span class="type">SSL_SESSION</span> object is completely taken over, when being called inside the <a class="link-man" href="../html3/get_session_cb.html">get_session_cb(3)</a> (see <a class="link-man" href="../html3/SSL_CTX_sess_set_get_cb.html">SSL_CTX_sess_set_get_cb(3)</a>).<div class="spacer">
</div>
<span class="type">SSL_SESSION</span> objects keep internal link information about the session cache list when being inserted into one <span class="type">SSL_CTX</span> object's session cache. One <span class="type">SSL_SESSION</span> object, regardless of its reference count, must therefore only be used with one <span class="type">SSL_CTX</span> object (and the <span class="type">SSL</span> objects created from this <span class="type">SSL_CTX</span> object).<div class="spacer">
</div>
When using <b class="fname">i2d_SSL_SESSION</b>(), the memory location pointed to by <i class="farg">pp</i> must be large enough to hold the binary representation of the session. There is no known limit on the size of the created ASN1 representation, so the necessary amount of space should be obtained by first calling <b class="fname">i2d_SSL_SESSION</b>() with <i class="farg">pp</i>= Ns <span class="define">NULL</span>, and obtain the size needed, then allocate the memory and call <b class="fname">i2d_SSL_SESSION</b>() again. Note that this will advance the value contained in <i class="farg">*pp</i> so it is necessary to save a copy of the original allocation. For example:<div class="spacer">
</div>
<pre style="margin-left: 0.00ex;" class="lit display">
int i, j; 
 
char *p, *temp; 
 
 i = i2d_SSL_SESSION(sess, NULL); 
 p = temp = malloc(i); 
 if (temp != NULL) { 
	j = i2d_SSL_SESSION(sess, &amp;temp); 
	assert(i == j); 
	assert(p + i == temp); 
 }</pre>
</div>
<div class="section">
<h1 id="x52455455524e2056414c554553">RETURN VALUES</h1> <b class="fname">d2i_SSL_SESSION</b>() returns a pointer to the newly allocated <span class="type">SSL_SESSION</span> object. In case of failure a <span class="define">NULL</span> pointer is returned and the error message can be retrieved from the error stack.<div class="spacer">
</div>
<b class="fname">i2d_SSL_SESSION</b>() returns the size of the ASN1 representation in bytes. When the session is not valid, 0 is returned and no operation is performed.</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../html3/ssl.html">ssl(3)</a>, <a class="link-man" href="../html3/SSL_CTX_sess_set_get_cb.html">SSL_CTX_sess_set_get_cb(3)</a>, <a class="link-man" href="../html3/SSL_SESSION_free.html">SSL_SESSION_free(3)</a></div>
</div>
</body>
</html>

