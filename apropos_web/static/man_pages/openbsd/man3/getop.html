<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/posix/style.css" type="text/css" media="all"/>
<title>
GETOPT(3)</title>
</head>
<body>
<div class="mandoc">
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">getopt</b> &#8212; <span class="desc">get option character from command line argument list</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="includes">#include &lt;<a class="link-includes">unistd.h</a>&gt;</b><div class="spacer">
</div>
<span class="type">extern char *optarg;</span><br/>
<span class="type">extern int opterr;</span><br/>
<span class="type">extern int optind;</span><br/>
<span class="type">extern int optopt;</span><br/>
<span class="type">extern int optreset;</span><div class="spacer">
</div>
<i class="ftype">int</i><br/>
<b class="fname">getopt</b>(<i class="farg" style="white-space:nowrap;">int argc</i>, <i class="farg" style="white-space:nowrap;">char * const *argv</i>, <i class="farg" style="white-space:nowrap;">const char *optstring</i>);</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> The <b class="fname">getopt</b>() function incrementally parses a command line argument list <i class="farg">argv</i> and returns the next <span class="emph">known</span> option character. An option character is <span class="emph">known</span> if it has been specified in the string of accepted option characters, <i class="farg">optstring</i>.<div class="spacer">
</div>
The option string <i class="farg">optstring</i> may contain the following elements: individual characters, characters followed by a colon, and characters followed by two colons. A character followed by a single colon indicates that an argument is to follow the option on the command line. Two colons indicates that the argument is optional - this is an extension not covered by POSIX. For example, an option string &#8220;x&#8221; recognizes an option <b class="flag">-x</b>, and an option string &#8220;<code class="lit">x:</code>&#8221; recognizes an option and argument <b class="flag">-x</b> <i class="arg">argument</i>. It does not matter to <b class="fname">getopt</b>() if a following argument has leading whitespace; except in the case where the argument is optional, denoted with two colons, no leading whitespace is permitted.<div class="spacer">
</div>
On return from <b class="fname">getopt</b>(), <b class="var">optarg</b> points to an option argument, if it is anticipated, and the variable <b class="var">optind</b> contains the index to the next <i class="farg">argv</i> argument for a subsequent call to <b class="fname">getopt</b>().<div class="spacer">
</div>
The variables <b class="var">opterr</b> and <b class="var">optind</b> are both initialized to 1. The <b class="var">optind</b> variable may be set to another value larger than 0 before a set of calls to <b class="fname">getopt</b>() in order to skip over more or less <i class="farg">argv</i> entries. An <b class="var">optind</b> value of 0 is reserved for compatibility with GNU <b class="fname">getopt</b>().<div class="spacer">
</div>
In order to use <b class="fname">getopt</b>() to evaluate multiple sets of arguments, or to evaluate a single set of arguments multiple times, the variable <b class="var">optreset</b> must be set to 1 before the second and each additional set of calls to <b class="fname">getopt</b>(), and the variable <b class="var">optind</b> must be reinitialized.<div class="spacer">
</div>
The <b class="fname">getopt</b>() function returns -1 when the argument list is exhausted. The interpretation of options in the argument list may be cancelled by the option &#8216;<code class="lit">--</code>&#8217; (double dash) which causes <b class="fname">getopt</b>() to signal the end of argument processing and return -1. When all options have been processed (i.e., up to the first non-option argument), <b class="fname">getopt</b>() returns -1.</div>
<div class="section">
<h1 id="x52455455524e2056414c554553">RETURN VALUES</h1> The <b class="fname">getopt</b>() function returns the next known option character in <i class="farg">optstring</i>. If <b class="fname">getopt</b>() encounters a character not found in <i class="farg">optstring</i> or if it detects a missing option argument, it returns &#8216;?&#8217; (question mark). If <i class="farg">optstring</i> has a leading &#8216;:&#8217; then a missing option argument causes &#8216;:&#8217; to be returned instead of &#8216;?&#8217;. In either case, the variable <b class="var">optopt</b> is set to the character that caused the error. The <b class="fname">getopt</b>() function returns -1 when the argument list is exhausted.</div>
<div class="section">
<h1 id="x4558414d504c4553">EXAMPLES</h1> The following code accepts the options <b class="flag">-b</b> and <b class="flag">-f</b> <i class="arg">argument</i> and adjusts <b class="var">argc</b> and <b class="var">argv</b> after option argument processing has completed.<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
int bflag, ch, fd; 
 
bflag = 0; 
while ((ch = getopt(argc, argv, &quot;bf:&quot;)) != -1) { 
	switch (ch) { 
	case 'b': 
		bflag = 1; 
		break; 
	case 'f': 
		if ((fd = open(optarg, O_RDONLY, 0)) == -1) 
			err(1, &quot;%s&quot;, optarg); 
		break; 
	default: 
		usage(); 
	} 
} 
argc -= optind; 
argv += optind;</pre>
</div>
<div class="section">
<h1 id="x444941474e4f5354494353">DIAGNOSTICS</h1> If the <b class="fname">getopt</b>() function encounters a character not found in the string <i class="farg">optstring</i> or detects a missing option argument, it writes an error message to <span class="emph">stderr</span> and returns &#8216;<code class="lit">?</code>&#8217;. Setting <b class="var">opterr</b> to a zero will disable these error messages. If <i class="farg">optstring</i> has a leading &#8216;<code class="lit">:</code>&#8217; then a missing option argument causes a &#8216;<code class="lit">:</code>&#8217; to be returned in addition to suppressing any error messages.<div class="spacer">
</div>
Option arguments are allowed to begin with &#8216;<code class="lit">-</code>&#8217;; this is reasonable but reduces the amount of error checking possible.</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../html1/getopt.html">getopt(1)</a>, <a class="link-man" href="../html3/getopt_long.html">getopt_long(3)</a>, <a class="link-man" href="../html3/getsubopt.html">getsubopt(3)</a></div>
<div class="section">
<h1 id="x5354414e4441524453">STANDARDS</h1> The <b class="fname">getopt</b>() function implements a superset of the functionality specified by IEEE Std 1003.1 (&#8220;POSIX.1&#8221;).<div class="spacer">
</div>
The following extensions are supported:<ul style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-bul">
<li class="list-bul" style="margin-top: 1.00em;">
The <b class="var">optreset</b> variable was added to make it possible to call the <b class="fname">getopt</b>() function multiple times.</li>
<li class="list-bul" style="margin-top: 1.00em;">
If the <b class="var">optind</b> variable is set to 0, <b class="fname">getopt</b>() will behave as if the <b class="var">optreset</b> variable has been set. This is for compatibility with GNU <b class="fname">getopt</b>(). New code should use <b class="var">optreset</b> instead.</li>
<li class="list-bul" style="margin-top: 1.00em;">
If the first character of <i class="farg">optstring</i> is a plus sign (&#8216;<code class="lit">+</code>&#8217;), it will be ignored. This is for compatibility with GNU <b class="fname">getopt</b>().</li>
<li class="list-bul" style="margin-top: 1.00em;">
If the first character of <i class="farg">optstring</i> is a dash (&#8216;<code class="lit">-</code>&#8217;), non-options will be returned as arguments to the option character &#8216;<code class="lit">\1</code>&#8217;. This is for compatibility with GNU <b class="fname">getopt</b>().</li>
<li class="list-bul" style="margin-top: 1.00em;">
A single dash (&#8216;<code class="lit">-</code>&#8217;) may be specified as a character in <i class="farg">optstring</i>, however it should <span class="emph">never</span> have an argument associated with it. This allows <b class="fname">getopt</b>() to be used with programs that expect &#8216;<code class="lit">-</code>&#8217; as an option flag. This practice is wrong, and should not be used in any current development. It is provided for backward compatibility <span class="emph">only</span>. Care should be taken not to use &#8216;<code class="lit">-</code>&#8217; as the first character in <i class="farg">optstring</i> to avoid a semantic conflict with GNU <b class="fname">getopt</b>() semantics (see above). By default, a single dash causes <b class="fname">getopt</b>() to return -1.</li>
</ul>
<div class="spacer">
</div>
Historic <span class="unix">BSD</span> versions of <b class="fname">getopt</b>() set <i class="farg">optopt</i> to the last option character processed. However, this conflicts with IEEE Std 1003.1 (&#8220;POSIX.1&#8221;) which stipulates that <i class="farg">optopt</i> be set to the last character that caused an error.</div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> The <b class="fname">getopt</b>() function appeared in <span class="unix">4.3BSD</span>.</div>
<div class="section">
<h1 id="x42554753">BUGS</h1> The <b class="fname">getopt</b>() function was once specified to return <span class="define">EOF</span> instead of -1. This was changed by IEEE Std 1003.2-1992 (&#8220;POSIX.2&#8221;) to decouple <b class="fname">getopt</b>() from <b class="includes">&lt;<a class="link-includes">stdio.h</a>&gt;</b>.<div class="spacer">
</div>
It is possible to handle digits as option letters. This allows <b class="fname">getopt</b>() to be used with programs that expect a number (&#8220;<code class="lit">-3</code>&#8221;) as an option. This practice is wrong, and should not be used in any current development. It is provided for backward compatibility <span class="emph">only</span>. The following code fragment works in most cases and can handle mixed number and letter arguments.<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
int aflag = 0, bflag = 0, ch, lastch = '\0'; 
int length = -1, newarg = 1, prevoptind = 1; 
 
while ((ch = getopt(argc, argv, &quot;0123456789ab&quot;)) != -1) { 
	switch (ch) { 
	case '0': case '1': case '2': case '3': case '4': 
	case '5': case '6': case '7': case '8': case '9': 
		if (newarg || !isdigit(lastch)) 
			length = 0; 
		else if (length &gt; INT_MAX / 10) 
			usage(); 
		length = (length * 10) + (ch - '0'); 
		break; 
	case 'a': 
		aflag = 1; 
		break; 
	case 'b': 
		bflag = 1; 
		break; 
	default: 
		usage(); 
	} 
	lastch = ch; 
	newarg = optind != prevoptind; 
	prevoptind = optind; 
}</pre>
</div>
</div>
</body>
</html>

