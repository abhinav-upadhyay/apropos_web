<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/posix/style.css" type="text/css" media="all"/>
<title>
ASN1_GENERATE_NCONF(3)</title>
</head>
<body>
<div class="mandoc">
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">ASN1_generate_nconf</b>, <b class="name">ASN1_generate_v3</b> &#8212; <span class="desc">ASN1 generation functions</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="includes">#include &lt;<a class="link-includes">openssl/asn1.h</a>&gt;</b><div class="spacer">
</div>
<i class="ftype">ASN1_TYPE *</i><br/>
<b class="fname">ASN1_generate_nconf</b>(<i class="farg">char *str</i>, <i class="farg">CONF *nconf</i>);<div class="spacer">
</div>
<i class="ftype">ASN1_TYPE *</i><br/>
<b class="fname">ASN1_generate_v3</b>(<i class="farg">char *str</i>, <i class="farg">X509V3_CTX *cnf</i>);</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> These functions generate the ASN1 encoding of a string in an <span class="type">ASN1_TYPE</span> structure.<div class="spacer">
</div>
<i class="farg">str</i> contains the string to encode <i class="farg">nconf</i> or <i class="farg">cnf</i> contains the optional configuration information where additional strings will be read from. <i class="farg">nconf</i> will typically come from a config file whereas <i class="farg">cnf</i> is obtained from an <span class="type">X509V3_CTX</span> structure which will typically be used by X509 v3 certificate extension functions. <i class="farg">cnf</i> or <i class="farg">nconf</i> can be set to <span class="define">NULL</span> if no additional configuration will be used.</div>
<div class="section">
<h1 id="x47454e45524154494f4e20535452494e4720464f524d4154">GENERATION STRING FORMAT</h1> The actual data encoded is determined by the string <i class="farg">str</i> and the configuration information. The general format of the string is:<div class="spacer">
</div>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
[<span class="opt"><i class="arg">modifier</i>,</span>]<i class="arg">type</i>[<span class="opt">:<i class="arg">value</i></span>]</div>
</blockquote>
<div class="spacer">
</div>
That is zero or more comma separated modifiers followed by a type followed by an optional colon and a value. The formats of <i class="arg">type</i>, <i class="arg">value</i> and <i class="arg">modifier</i> are explained below.<div class="subsection">
<h2 id="x537570706f72746564207479706573">Supported types</h2> The supported types are listed below. Unless otherwise specified, only the <b class="flag">ASCII</b> format is permissible.<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">BOOLEAN</b>, <b class="flag">BOOL</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
This encodes a boolean type. The <i class="arg">value</i> string is mandatory and should be <b class="flag">TRUE</b> or <b class="flag">FALSE</b>. Additionally <b class="flag">true</b>, <b class="flag">Y</b>, <b class="flag">y</b>, <b class="flag">YES</b>, <b class="flag">yes</b>, <b class="flag">false</b>, <b class="flag">N</b>, <b class="flag">n</b>, <b class="flag">NO</b> and <b class="flag">no</b> are acceptable.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">NULL</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Encode the NULL type. The <i class="arg">value</i> string must not be present.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">INTEGER</b>, <b class="flag">INT</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Encodes an ASN1 INTEGER type. The <i class="arg">value</i> string represents the value of the integer. It can be prefaced by a minus sign and is normally interpreted as a decimal value unless the prefix <b class="flag">0x</b> is included.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">ENUMERATED</b>, <b class="flag">ENUM</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Encodes the ASN1 ENUMERATED type. It is otherwise identical to <b class="flag">INTEGER</b>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">OBJECT</b>, <b class="flag">OID</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Encodes an ASN1 OBJECT IDENTIFIER. The <i class="arg">value</i> string can be a short name, a long name, or numerical format.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">UTCTIME</b>, <b class="flag">UTC</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Encodes an ASN1 UTCTime structure. The value should be in the format <i class="arg">YYMMDDHHMMSSZ</i>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">GENERALIZEDTIME</b>, <b class="flag">GENTIME</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Encodes an ASN1 GeneralizedTime structure. The value should be in the format <i class="arg">YYYYMMDDHHMMSSZ</i>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">OCTETSTRING</b>, <b class="flag">OCT</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Encodes an ASN1 OCTET STRING. <i class="arg">value</i> represents the contents of this structure. The format strings <b class="flag">ASCII</b> and <b class="flag">HEX</b> can be used to specify the format of <i class="arg">value</i>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">BITSTRING</b>, <b class="flag">BITSTR</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Encodes an ASN1 BIT STRING. <i class="arg">value</i> represents the contents of this structure. The format strings <b class="flag">ASCII</b>, <b class="flag">HEX</b>, and <b class="flag">BITLIST</b> can be used to specify the format of <i class="arg">value</i>.<div class="spacer">
</div>
If the format is anything other than <b class="flag">BITLIST</b>, the number of unused bits is set to zero.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">BMPSTRING</b>, <b class="flag">BMP</b>, <b class="flag">GeneralString</b>, <b class="flag">IA5STRING</b>, <b class="flag">IA5</b>, <b class="flag">NUMERICSTRING</b>, <b class="flag">NUMERIC</b>, <b class="flag">PRINTABLESTRING</b>, <b class="flag">PRINTABLE</b>, <b class="flag">T61STRING</b>, <b class="flag">T61</b>, <b class="flag">TELETEXSTRING</b>, <b class="flag">UNIVERSALSTRING</b>, <b class="flag">UNIV</b>, <b class="flag">UTF8String</b>, <b class="flag">UTF8</b>, <b class="flag">VISIBLESTRING</b>, <b class="flag">VISIBLE</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
These encode the corresponding string types. <i class="arg">value</i> represents the contents of this structure. The format can be <b class="flag">ASCII</b> or <b class="flag">UTF8</b>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">SEQUENCE</b>, <b class="flag">SEQ</b>, <b class="flag">SET</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Formats the result as an ASN1 SEQUENCE or SET type. <i class="arg">value</i> should be a section name which will contain the contents. The field names in the section are ignored and the values are in the generated string format. If <i class="arg">value</i> is absent, then an empty SEQUENCE will be encoded.</dd>
</dl>
</div>
<div class="subsection">
<h2 id="x4d6f64696669657273">Modifiers</h2> Modifiers affect the following structure. They can be used to add EXPLICIT or IMPLICIT tagging, add wrappers, or to change the string format of the final type and value. The supported formats are:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">EXPLICIT</b>, <b class="flag">EXP</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Add an explicit tag to the following structure. This string should be followed by a colon and the tag value to use as a decimal value.<div class="spacer">
</div>
By following the number with <b class="flag">U</b>, <b class="flag">A</b>, <b class="flag">P</b> or <b class="flag">C</b>, UNIVERSAL, APPLICATION, PRIVATE or CONTEXT SPECIFIC tagging can be used. The default is CONTEXT SPECIFIC.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">IMPLICIT</b>, <b class="flag">IMP</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
This is the same as <b class="flag">EXPLICIT</b> except IMPLICIT tagging is used instead.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">OCTWRAP</b>, <b class="flag">SEQWRAP</b>, <b class="flag">SETWRAP</b>, <b class="flag">BITWRAP</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
The following structure is surrounded by an OCTET STRING, a SEQUENCE, a SET, or a BIT STRING, respectively. For a BIT STRING the number of unused bits is set to zero.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">FORMAT</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
This specifies the format of the ultimate value. It should be followed by a colon and one of the strings <b class="flag">ASCII</b>, <b class="flag">UTF8</b>, <b class="flag">HEX</b>, or <b class="flag">BITLIST</b>.<div class="spacer">
</div>
If no format specifier is included, then <b class="flag">ASCII</b> is used. If <b class="flag">UTF8</b> is specified, then the <i class="arg">value</i> string must be a valid UTF8 string. For <b class="flag">HEX</b>, the output must be a set of hex digits. <b class="flag">BITLIST</b> (which is only valid for a BIT STRING) is a comma separated list of the indices of the set bits, all other bits are zero.</dd>
</dl>
</div>
</div>
<div class="section">
<h1 id="x52455455524e2056414c554553">RETURN VALUES</h1> <b class="fname">ASN1_generate_nconf</b>() and <b class="fname">ASN1_generate_v3</b>() return the encoded data as an <span class="type">ASN1_TYPE</span> structure or <span class="define">NULL</span> if an error occurred.<div class="spacer">
</div>
The error codes can be obtained by <a class="link-man" href="../html3/ERR_get_error.html">ERR_get_error(3)</a>.</div>
<div class="section">
<h1 id="x4558414d504c4553">EXAMPLES</h1> A simple IA5String:<div class="spacer">
</div>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit">IA5STRING:Hello World</code></div>
</blockquote>
<div class="spacer">
</div>
An IA5String explicitly tagged:<div class="spacer">
</div>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit">EXPLICIT:0,IA5STRING:Hello World</code></div>
</blockquote>
<div class="spacer">
</div>
An IA5String explicitly tagged using APPLICATION tagging:<div class="spacer">
</div>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit">EXPLICIT:0A,IA5STRING:Hello World</code></div>
</blockquote>
<div class="spacer">
</div>
A BITSTRING with bits 1 and 5 set and all others zero:<div class="spacer">
</div>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit">FORMAT:BITLIST,BITSTRING:1,5</code></div>
</blockquote>
<div class="spacer">
</div>
A more complex example using a config file to produce a SEQUENCE consisting of a BOOL an OID and a UTF8String:<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
asn1 = SEQUENCE:seq_section 
 
[seq_section] 
 
field1 = BOOLEAN:TRUE 
field2 = OID:commonName 
field3 = UTF8:Third field</pre>
<div class="spacer">
</div>
This example produces an RSAPrivateKey structure. This is the key contained in the file <i class="file">client.pem</i> in all OpenSSL distributions. Note that the field names such as &#8220;coeff&#8221; are ignored and are present just for clarity.<div class="spacer">
</div>
<pre style="margin-left: 2.00ex;" class="lit display">
asn1=SEQUENCE:private_key 
[private_key] 
version=INTEGER:0 
 
n=INTEGER:0xBB6FE79432CC6EA2D8F970675A5A87BFBE1AFF0BE63E879F2AFFB93644\ 
D4D2C6D000430DEC66ABF47829E74B8C5108623A1C0EE8BE217B3AD8D36D5EB4FCA1D9 
 
e=INTEGER:0x010001 
 
d=INTEGER:0x6F05EAD2F27FFAEC84BEC360C4B928FD5F3A9865D0FCAAD291E2A52F4A\ 
F810DC6373278C006A0ABBA27DC8C63BF97F7E666E27C5284D7D3B1FFFE16B7A87B51D 
 
p=INTEGER:0xF3929B9435608F8A22C208D86795271D54EBDFB09DDEF539AB083DA912\ 
D4BD57 
 
q=INTEGER:0xC50016F89DFF2561347ED1186A46E150E28BF2D0F539A1594BBD7FE467\ 
46EC4F 
 
exp1=INTEGER:0x9E7D4326C924AFC1DEA40B45650134966D6F9DFA3A7F9D698CD4ABEA\ 
9C0A39B9 
 
exp2=INTEGER:0xBA84003BB95355AFB7C50DF140C60513D0BA51D637272E355E397779\ 
E7B2458F 
 
coeff=INTEGER:0x30B9E4F2AFA5AC679F920FC83F1F2DF1BAF1779CF989447FABC2F5\ 
628657053A</pre>
<div class="spacer">
</div>
This example is the corresponding public key in a SubjectPublicKeyInfo structure:<div class="spacer">
</div>
<pre style="margin-left: 2.00ex;" class="lit display">
# Start with a SEQUENCE 
asn1=SEQUENCE:pubkeyinfo 
 
# pubkeyinfo contains an algorithm identifier and the public key 
# wrapped in a BIT STRING 
[pubkeyinfo] 
algorithm=SEQUENCE:rsa_alg 
pubkey=BITWRAP,SEQUENCE:rsapubkey 
 
# algorithm ID for RSA is just an OID and a NULL 
[rsa_alg] 
algorithm=OID:rsaEncryption 
parameter=NULL 
 
# Actual public key: modulus and exponent 
[rsapubkey] 
n=INTEGER:0xBB6FE79432CC6EA2D8F970675A5A87BFBE1AFF0BE63E879F2AFFB93644\ 
D4D2C6D000430DEC66ABF47829E74B8C5108623A1C0EE8BE217B3AD8D36D5EB4FCA1D9 
 
e=INTEGER:0x010001</pre>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../html3/ERR_get_error.html">ERR_get_error(3)</a></div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> <b class="fname">ASN1_generate_nconf</b>() and <b class="fname">ASN1_generate_v3</b>() were added to OpenSSL 0.9.8.</div>
</div>
</body>
</html>

