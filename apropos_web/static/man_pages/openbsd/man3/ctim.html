<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/posix/style.css" type="text/css" media="all"/>
<title>
CTIME(3)</title>
</head>
<body>
<div class="mandoc">
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">asctime</b>, <b class="name">asctime_r</b>, <b class="name">ctime</b>, <b class="name">ctime_r</b>, <b class="name">difftime</b>, <b class="name">gmtime</b>, <b class="name">gmtime_r</b>, <b class="name">localtime</b>, <b class="name">localtime_r</b>, <b class="name">mktime</b>, <b class="name">timegm</b>, <b class="name">timelocal</b> &#8212; <span class="desc">convert date and time to ASCII</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="includes">#include &lt;<a class="link-includes">sys/types.h</a>&gt;</b><br/>
<b class="includes">#include &lt;<a class="link-includes">time.h</a>&gt;</b><div class="spacer">
</div>
<span class="type">extern char *tzname[2]</span>;<div class="spacer">
</div>
<i class="ftype">char *</i><br/>
<b class="fname">ctime</b>(<i class="farg" style="white-space:nowrap;">const time_t *clock</i>);<div class="spacer">
</div>
<i class="ftype">char *</i><br/>
<b class="fname">ctime_r</b>(<i class="farg" style="white-space:nowrap;">const time_t *clock</i>, <i class="farg" style="white-space:nowrap;">char *buf</i>);<div class="spacer">
</div>
<i class="ftype">double</i><br/>
<b class="fname">difftime</b>(<i class="farg" style="white-space:nowrap;">time_t time1</i>, <i class="farg" style="white-space:nowrap;">time_t time0</i>);<div class="spacer">
</div>
<i class="ftype">char *</i><br/>
<b class="fname">asctime</b>(<i class="farg" style="white-space:nowrap;">const struct tm *tm</i>);<div class="spacer">
</div>
<i class="ftype">char *</i><br/>
<b class="fname">asctime_r</b>(<i class="farg" style="white-space:nowrap;">const struct tm *tm</i>, <i class="farg" style="white-space:nowrap;">char *buf</i>);<div class="spacer">
</div>
<i class="ftype">struct tm *</i><br/>
<b class="fname">localtime</b>(<i class="farg" style="white-space:nowrap;">const time_t *clock</i>);<div class="spacer">
</div>
<i class="ftype">struct tm *</i><br/>
<b class="fname">localtime_r</b>(<i class="farg" style="white-space:nowrap;">const time_t *clock</i>, <i class="farg" style="white-space:nowrap;">struct tm *result</i>);<div class="spacer">
</div>
<i class="ftype">struct tm *</i><br/>
<b class="fname">gmtime</b>(<i class="farg" style="white-space:nowrap;">const time_t *clock</i>);<div class="spacer">
</div>
<i class="ftype">struct tm *</i><br/>
<b class="fname">gmtime_r</b>(<i class="farg" style="white-space:nowrap;">const time_t *clock</i>, <i class="farg" style="white-space:nowrap;">struct tm *result</i>);<div class="spacer">
</div>
<i class="ftype">time_t</i><br/>
<b class="fname">mktime</b>(<i class="farg" style="white-space:nowrap;">struct tm *tm</i>);<div class="spacer">
</div>
<i class="ftype">time_t</i><br/>
<b class="fname">timegm</b>(<i class="farg" style="white-space:nowrap;">struct tm *tm</i>);<div class="spacer">
</div>
<i class="ftype">time_t</i><br/>
<b class="fname">timelocal</b>(<i class="farg" style="white-space:nowrap;">struct tm *tm</i>);</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> The <b class="fname">ctime</b>() function converts a <code class="lit">time_t</code>, pointed to by <i class="farg">clock</i>, representing the time in seconds since 00:00:00 UTC, 1970-01-01, and returns a pointer to a string of the form<div class="spacer">
</div>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit">Thu Nov 24 18:22:48 1986\n</code></div>
</blockquote>
<div class="spacer">
</div>
Years requiring fewer than four characters are padded with leading zeroes. For years longer than four characters, the string is of the form<div class="spacer">
</div>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit">Thu Nov 24 18:22:48&#160;&#160;&#160;&#160;&#160;81986\n</code></div>
</blockquote>
<div class="spacer">
</div>
with five spaces before the year. These unusual formats are designed to make it less likely that older software that expects exactly 26 bytes of output will mistakenly output misleading values for out-of-range years.<div class="spacer">
</div>
The <b class="fname">ctime_r</b>() function converts the calendar time pointed to by <i class="farg">clock</i> to local time in exactly the same way as <b class="fname">ctime</b>() and puts the string into the array pointed to by <i class="farg">buf</i> (which contains at least 26 bytes) and returns <i class="farg">buf</i>. Unlike <b class="fname">ctime</b>(), the thread-safe version <b class="fname">ctime_r</b>() is not required to set <b class="var">tzname</b>.<div class="spacer">
</div>
The <b class="fname">localtime</b>() and <b class="fname">gmtime</b>() functions return pointers to <code class="lit">tm</code> structures, described below. <b class="fname">localtime</b>() corrects for the time zone and any time zone adjustments (such as Daylight Saving Time in the United States). After filling in the <code class="lit">tm</code> structure, <b class="fname">localtime</b>() sets the <i class="farg">tm_isdst</i>'th element of <b class="var">tzname</b> to a pointer to an ASCII string that's the time zone abbreviation to be used with the return value of <b class="fname">localtime</b>().<div class="spacer">
</div>
<b class="fname">gmtime</b>() converts to Coordinated Universal Time.<div class="spacer">
</div>
The <b class="fname">localtime_r</b>() and <b class="fname">gmtime_r</b>() functions convert the calendar time pointed to by <i class="farg">clock</i> into a broken-down time in exactly the same way as their non-reentrant counterparts, <b class="fname">localtime</b>() and <b class="fname">gmtime</b>(), but instead store the result directly into the structure pointed to by <i class="farg">result</i>. Unlike <b class="fname">localtime</b>(), the reentrant version is not required to set <b class="var">tzname</b>.<div class="spacer">
</div>
<b class="fname">asctime</b>() converts a time value contained in a <code class="lit">tm</code> structure to a string, as shown in the above example, and returns a pointer to the string. <b class="fname">asctime_r</b>() uses the buffer pointed to by <i class="farg">buf</i> (which should contain at least 26 bytes) and then returns <i class="farg">buf</i>.<div class="spacer">
</div>
<b class="fname">mktime</b>() converts the broken-down time, expressed as local time, in the structure pointed to by <i class="farg">tm</i> into a calendar time value with the same encoding as that of the values returned by the <b class="fname">time</b>() function. The original values of the <i class="farg">tm_wday</i> and <i class="farg">tm_yday</i> components of the structure are ignored, and the original values of the other components are not restricted to their normal ranges. (A positive or zero value for <i class="farg">tm_isdst</i> causes <b class="fname">mktime</b>() to presume initially that summer time (for example, Daylight Saving Time in the U.S.A.) respectively, is or is not in effect for the specified time. A negative value for <i class="farg">tm_isdst</i> causes the <b class="fname">mktime</b>() function to attempt to divine whether summer time is in effect for the specified time; in this case it does not use a consistent rule and may give a different answer when later presented with the same argument.) On successful completion, the values of the <i class="farg">tm_wday</i> and <i class="farg">tm_yday</i> components of the structure are set appropriately, and the other components are set to represent the specified calendar time, but with their values forced to their normal ranges; the final value of <i class="farg">tm_mday</i> is not set until <i class="farg">tm_mon</i> and <i class="farg">tm_year</i> are determined. <b class="fname">mktime</b>() returns the specified calendar time; if the calendar time cannot be represented, it returns -1.<div class="spacer">
</div>
<b class="fname">timelocal</b>() is a deprecated interface that is equivalent to calling <b class="fname">mktime</b>() with a negative value for <i class="farg">tm_isdst</i>.<div class="spacer">
</div>
<b class="fname">timegm</b>() is a deprecated interface that converts the broken-down time, as returned by <b class="fname">gmtime</b>(), into a calendar time value with the same encoding as that of the values returned by the <b class="fname">time</b>() function.<div class="spacer">
</div>
<b class="fname">difftime</b>() returns the difference between two calendar times, (<i class="farg">time1</i> <code class="none">-</code> <i class="farg">time0</i>), expressed in seconds.<div class="spacer">
</div>
Declarations of all the functions and externals, and the <code class="lit">tm</code> structure, are in the <b class="includes">&lt;<a class="link-includes">time.h</a>&gt;</b> header file. The structure (of type) <code class="lit">struct tm</code> includes the following fields:<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
	int tm_sec;	/* seconds (0 - 60) */ 
	int tm_min;	/* minutes (0 - 59) */ 
	int tm_hour;	/* hours (0 - 23) */ 
	int tm_mday;	/* day of month (1 - 31) */ 
	int tm_mon;	/* month of year (0 - 11) */ 
	int tm_year;	/* year - 1900 */ 
	int tm_wday;	/* day of week (Sunday = 0) */ 
	int tm_yday;	/* day of year (0 - 365) */ 
	int tm_isdst;	/* is summer time in effect? */ 
	long tm_gmtoff;	/* offset from UTC in seconds */ 
	char *tm_zone;	/* abbreviation of timezone name */</pre>
<div class="spacer">
</div>
The <i class="farg">tm_zone</i> and <i class="farg">tm_gmtoff</i> fields exist, and are filled in by <b class="fname">mktime</b>(), <b class="fname">localtime</b>(), <b class="fname">timegm</b>(), and <b class="fname">gmtime</b>(), but are not standardized. There is no guarantee that these fields will continue to exist in this form and they may be altered or removed in a future release.<div class="spacer">
</div>
<i class="farg">tm_isdst</i> is non-zero if summer time is in effect.<div class="spacer">
</div>
<i class="farg">tm_gmtoff</i> is the offset (in seconds) of the time represented from UTC, with positive values indicating east of the Prime Meridian.</div>
<div class="section">
<h1 id="x52455455524e2056414c554553">RETURN VALUES</h1> The functions <b class="fname">ctime</b>(), <b class="fname">ctime_r</b>(), <b class="fname">asctime</b>(), <b class="fname">asctime_r</b>(), <b class="fname">localtime</b>(), <b class="fname">localtime_r</b>(), <b class="fname">gmtime</b>() and <b class="fname">gmtime_r</b>() return NULL on error. The function <b class="fname">mktime</b>() returns -1 on error.</div>
<div class="section">
<h1 id="x46494c4553">FILES</h1><dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/usr/share/zoneinfo</i></dt>
<dd class="list-tag" style="margin-left: 30.00ex;">
time zone information directory</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/etc/localtime</i></dt>
<dd class="list-tag" style="margin-left: 30.00ex;">
local time zone file</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/usr/share/zoneinfo/posixrules</i></dt>
<dd class="list-tag" style="margin-left: 30.00ex;">
used with POSIX-style TZ's</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/usr/share/zoneinfo/GMT</i></dt>
<dd class="list-tag" style="margin-left: 30.00ex;">
for UTC leap seconds</dd>
</dl>
<div class="spacer">
</div>
If <i class="file">/usr/share/zoneinfo/GMT</i> is absent, UTC leap seconds are loaded from <i class="file">/usr/share/zoneinfo/posixrules</i>.</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../html3/getenv.html">getenv(3)</a>, <a class="link-man" href="../html3/strftime.html">strftime(3)</a>, <a class="link-man" href="../html3/time.html">time(3)</a>, <a class="link-man" href="../html3/tzset.html">tzset(3)</a>, <a class="link-man" href="../html5/tzfile.html">tzfile(5)</a>, <a class="link-man" href="../html8/zic.html">zic(8)</a></div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> A <b class="fname">ctime</b>() function first appeared in Version&#160;1 AT&amp;T UNIX.</div>
<div class="section">
<h1 id="x4e4f544553">NOTES</h1> The return values of the non re-entrant functions point to static data; the data is overwritten by each call. The <i class="farg">tm_zone</i> field of a returned <code class="lit">struct tm</code> points to a static array of characters, which will also be overwritten at the next call (and by calls to <a class="link-man" href="../html3/tzset.html">tzset(3)</a>).<div class="spacer">
</div>
<b class="fname">asctime</b>() and <b class="fname">ctime</b>() behave strangely for years before 1000 or after 9999. The 1989 and 1999 editions of the C Standard say that years from -99 through 999 are converted without extra spaces, but this conflicts with longstanding tradition and with this implementation. Traditional implementations of these two functions are restricted to years in the range 1900 through 2099. To avoid this portability mess, new programs should use <b class="fname">strftime</b>() instead.<div class="spacer">
</div>
The default system time zone may be set by running &#8220;<code class="lit">zic -l timezone</code>&#8221; as the superuser.<div class="spacer">
</div>
Avoid using out-of-range values with <b class="fname">mktime</b>() when setting up lunch with promptness sticklers in Riyadh.</div>
</div>
</body>
</html>

