<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/posix/style.css" type="text/css" media="all"/>
<title>
ARC4RANDOM(3)</title>
</head>
<body>
<div class="mandoc">
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">arc4random</b>, <b class="name">arc4random_buf</b>, <b class="name">arc4random_uniform</b> &#8212; <span class="desc">random number generator</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="includes">#include &lt;<a class="link-includes">stdlib.h</a>&gt;</b><div class="spacer">
</div>
<i class="ftype">uint32_t</i><br/>
<b class="fname">arc4random</b>(<i class="farg" style="white-space:nowrap;">void</i>);<div class="spacer">
</div>
<i class="ftype">void</i><br/>
<b class="fname">arc4random_buf</b>(<i class="farg" style="white-space:nowrap;">void *buf</i>, <i class="farg" style="white-space:nowrap;">size_t nbytes</i>);<div class="spacer">
</div>
<i class="ftype">uint32_t</i><br/>
<b class="fname">arc4random_uniform</b>(<i class="farg" style="white-space:nowrap;">uint32_t upper_bound</i>);</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> This family of functions provides higher quality data than those described in <a class="link-man" href="../html3/rand.html">rand(3)</a>, <a class="link-man" href="../html3/random.html">random(3)</a>, and <a class="link-man" href="../html3/rand48.html">rand48(3)</a>.<div class="spacer">
</div>
Use of these functions is encouraged for almost all random number consumption because the other interfaces are deficient in either quality, portability, standardization, or availability. These functions can be called in almost all coding environments, including <a class="link-man" href="../html3/pthreads.html">pthreads(3)</a> and <a class="link-man" href="../html2/chroot.html">chroot(2)</a>.<div class="spacer">
</div>
High quality 32-bit pseudo-random numbers are generated very quickly. On each call, a cryptographic pseudo-random number generator is used to generate a new result. One data pool is used for all consumers in a process, so that consumption under program flow can act as additional stirring. The subsystem is re-seeded from the kernel random number subsystem using <a class="link-man" href="../html2/getentropy.html">getentropy(2)</a> on a regular basis, and also upon <a class="link-man" href="../html2/fork.html">fork(2)</a>.<div class="spacer">
</div>
The <b class="fname">arc4random</b>() function returns a single 32-bit value.<div class="spacer">
</div>
<b class="fname">arc4random_buf</b>() fills the region <i class="farg">buf</i> of length <i class="farg">nbytes</i> with random data.<div class="spacer">
</div>
<b class="fname">arc4random_uniform</b>() will return a single 32-bit value, uniformly distributed but less than <i class="farg">upper_bound</i>. This is recommended over constructions like &#8220;<code class="lit">arc4random() % upper_bound</code>&#8221; as it avoids &quot;modulo bias&quot; when the upper bound is not a power of two. In the worst case, this function may consume multiple iterations to ensure uniformity; see the source code to understand the problem and solution.</div>
<div class="section">
<h1 id="x52455455524e2056414c554553">RETURN VALUES</h1> These functions are always successful, and no return value is reserved to indicate an error.</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../html3/rand.html">rand(3)</a>, <a class="link-man" href="../html3/rand48.html">rand48(3)</a>, <a class="link-man" href="../html3/random.html">random(3)</a></div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> These functions first appeared in <span class="unix">OpenBSD&#160;2.1</span>.<div class="spacer">
</div>
The original version of this random number generator used the RC4 (also known as ARC4) algorithm. In <span class="unix">OpenBSD&#160;5.5</span> it was replaced with the ChaCha20 cipher, and it may be replaced again in the future as cryptographic techniques advance. A good mnemonic is &#8220;A Replacement Call for Random&#8221;.</div>
</div>
</body>
</html>

