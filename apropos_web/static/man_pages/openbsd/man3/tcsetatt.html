<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/posix/style.css" type="text/css" media="all"/>
<title>
TCSETATTR(3)</title>
</head>
<body>
<div class="mandoc">
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">cfgetispeed</b>, <b class="name">cfsetispeed</b>, <b class="name">cfgetospeed</b>, <b class="name">cfsetospeed</b>, <b class="name">cfsetspeed</b>, <b class="name">cfmakeraw</b>, <b class="name">tcgetattr</b>, <b class="name">tcsetattr</b> &#8212; <span class="desc">manipulating the termios structure</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="includes">#include &lt;<a class="link-includes">termios.h</a>&gt;</b><div class="spacer">
</div>
<i class="ftype">speed_t</i><br/>
<b class="fname">cfgetispeed</b>(<i class="farg" style="white-space:nowrap;">const struct termios *tp</i>);<div class="spacer">
</div>
<i class="ftype">int</i><br/>
<b class="fname">cfsetispeed</b>(<i class="farg" style="white-space:nowrap;">struct termios *tp</i>, <i class="farg" style="white-space:nowrap;">speed_t speed</i>);<div class="spacer">
</div>
<i class="ftype">speed_t</i><br/>
<b class="fname">cfgetospeed</b>(<i class="farg" style="white-space:nowrap;">const struct termios *tp</i>);<div class="spacer">
</div>
<i class="ftype">int</i><br/>
<b class="fname">cfsetospeed</b>(<i class="farg" style="white-space:nowrap;">struct termios *tp</i>, <i class="farg" style="white-space:nowrap;">speed_t speed</i>);<div class="spacer">
</div>
<i class="ftype">int</i><br/>
<b class="fname">cfsetspeed</b>(<i class="farg" style="white-space:nowrap;">struct termios *tp</i>, <i class="farg" style="white-space:nowrap;">speed_t speed</i>);<div class="spacer">
</div>
<i class="ftype">void</i><br/>
<b class="fname">cfmakeraw</b>(<i class="farg" style="white-space:nowrap;">struct termios *tp</i>);<div class="spacer">
</div>
<i class="ftype">int</i><br/>
<b class="fname">tcgetattr</b>(<i class="farg" style="white-space:nowrap;">int fd</i>, <i class="farg" style="white-space:nowrap;">struct termios *tp</i>);<div class="spacer">
</div>
<i class="ftype">int</i><br/>
<b class="fname">tcsetattr</b>(<i class="farg" style="white-space:nowrap;">int fd</i>, <i class="farg" style="white-space:nowrap;">int action</i>, <i class="farg" style="white-space:nowrap;">const struct termios *tp</i>);</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> The <b class="fname">cfmakeraw</b>(), <b class="fname">tcgetattr</b>(), and <b class="fname">tcsetattr</b>() functions are provided for getting and setting the <code class="lit">termios</code> structure.<div class="spacer">
</div>
The <b class="fname">cfgetispeed</b>(), <b class="fname">cfsetispeed</b>(), <b class="fname">cfgetospeed</b>(), <b class="fname">cfsetospeed</b>(), and <b class="fname">cfsetspeed</b>() functions are provided for getting and setting the baud rate values in the <code class="lit">termios</code> structure. The effects of the functions on the terminal as described below do not become effective, nor are all errors detected, until the <b class="fname">tcsetattr</b>() function is called. Certain values for baud rates set in the <code class="lit">termios</code> structure and passed to <b class="fname">tcsetattr</b>() have special meanings. These are discussed in the portion of the manual page that describes the <b class="fname">tcsetattr</b>() function.</div>
<div class="section">
<h1 id="x47455454494e4720414e442053455454494e472054484520424155442052415445">GETTING AND SETTING THE BAUD RATE</h1> The input and output baud rates are found in the <code class="lit">termios</code> structure. The unsigned integer <code class="lit">speed_t</code> is typedef'd in the include file <b class="includes">&lt;<a class="link-includes">termios.h</a>&gt;</b>. On <span class="unix">OpenBSD</span>, the value of the integer corresponds directly to the baud rate being represented. However, this is not true of all systems and new code should use the symbolic value for maximum portability.<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
#define B0	0 
#define B50	50 
#define B75	75 
#define B110	110 
#define B134	134 
#define B150	150 
#define B200	200 
#define B300	300 
#define B600	600 
#define B1200	1200 
#define	B1800	1800 
#define B2400	2400 
#define B4800	4800 
#define B9600	9600 
#define B19200	19200 
#define B38400	38400 
#ifndef _POSIX_SOURCE 
#define EXTA	19200 
#define EXTB	38400 
#endif  /*_POSIX_SOURCE */</pre>
<div class="spacer">
</div>
The <b class="fname">cfgetispeed</b>() function returns the input baud rate in the <code class="lit">termios</code> structure referenced by <i class="farg">tp</i>.<div class="spacer">
</div>
The <b class="fname">cfsetispeed</b>() function sets the input baud rate in the <code class="lit">termios</code> structure referenced by <i class="farg">tp</i> to <i class="farg">speed</i>.<div class="spacer">
</div>
The <b class="fname">cfgetospeed</b>() function returns the output baud rate in the <code class="lit">termios</code> structure referenced by <i class="farg">tp</i>.<div class="spacer">
</div>
The <b class="fname">cfsetospeed</b>() function sets the output baud rate in the <code class="lit">termios</code> structure referenced by <i class="farg">tp</i> to <i class="farg">speed</i>.<div class="spacer">
</div>
The <b class="fname">cfsetspeed</b>() function sets both the input and output baud rate in the <code class="lit">termios</code> structure referenced by <i class="farg">tp</i> to <i class="farg">speed</i>.<div class="spacer">
</div>
Upon successful completion, the functions <b class="fname">cfsetispeed</b>(), <b class="fname">cfsetospeed</b>(), and <b class="fname">cfsetspeed</b>() return a value of 0. Otherwise, a value of -1 is returned and the global variable <b class="var">errno</b> is set to indicate the error.</div>
<div class="section">
<h1 id="x47455454494e4720414e442053455454494e4720544845205445524d494f53205354415445">GETTING AND SETTING THE TERMIOS STATE</h1> This section describes the functions that are used to control the general terminal interface. Unless otherwise noted for a specific command, these functions are restricted from use by background processes. Attempts to perform these operations shall cause the process group to be sent a <span class="define">SIGTTOU</span> signal. If the calling process is blocking or ignoring <span class="define">SIGTTOU</span> signals, the process is allowed to perform the operation and the <span class="define">SIGTTOU</span> signal is not sent.<div class="spacer">
</div>
In all the functions, although <i class="farg">fd</i> is an open file descriptor, the functions affect the underlying terminal file, not just the open file description associated with the particular file descriptor.<div class="spacer">
</div>
The <b class="fname">cfmakeraw</b>() function sets the flags stored in the <code class="lit">termios</code> structure to a state disabling all input and output processing, giving a &#8220;raw I/O path&#8221;. It should be noted that there is no function to reverse this effect. This is because there are a variety of processing options that could be re-enabled and the correct method is for an application to snapshot the current terminal state using the function <b class="fname">tcgetattr</b>(), setting raw mode with <b class="fname">cfmakeraw</b>() and the subsequent <b class="fname">tcsetattr</b>(), and then using another <b class="fname">tcsetattr</b>() with the saved state to revert to the previous terminal state.<div class="spacer">
</div>
The <b class="fname">tcgetattr</b>() function copies the parameters associated with the terminal referenced by <i class="farg">fd</i> in the <code class="lit">termios</code> structure referenced by <i class="farg">tp</i>. This function is allowed from a background process, although the terminal attributes may be subsequently changed by a foreground process.<div class="spacer">
</div>
The <b class="fname">tcsetattr</b>() function sets the parameters associated with the terminal from the <code class="lit">termios</code> structure referenced by <i class="farg">tp</i>. The <i class="farg">action</i> field is created by OR'ing the following values, as specified in the include file <b class="includes">&lt;<a class="link-includes">termios.h</a>&gt;</b>.<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">TCSANOW</span></dt>
<dd class="list-tag" style="margin-left: 9.00ex;">
The change occurs immediately.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">TCSADRAIN</span></dt>
<dd class="list-tag" style="margin-left: 9.00ex;">
The change occurs after all output written to <i class="farg">fd</i> has been transmitted to the terminal. This value of <i class="farg">action</i> should be used when changing parameters that affect output.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">TCSAFLUSH</span></dt>
<dd class="list-tag" style="margin-left: 9.00ex;">
The change occurs after all output written to <i class="farg">fd</i> has been transmitted to the terminal. Additionally, any input that has been received but not read is discarded.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">TCSASOFT</span></dt>
<dd class="list-tag" style="margin-left: 9.00ex;">
If this value is OR'ed into the <i class="farg">action</i> value, the values of the <i class="farg">c_cflag</i>, <i class="farg">c_ispeed</i>, and <i class="farg">c_ospeed</i> fields are ignored.</dd>
</dl>
<div class="spacer">
</div>
The 0 baud rate is used to terminate the connection. If 0 is specified as the output speed to the function <b class="fname">tcsetattr</b>(), modem control will no longer be asserted on the terminal, disconnecting the terminal.<div class="spacer">
</div>
If zero is specified as the input speed to the function <b class="fname">tcsetattr</b>(), the input baud rate will be set to the same value as that specified by the output baud rate.</div>
<div class="section">
<h1 id="x52455455524e2056414c554553">RETURN VALUES</h1> If <b class="fname">tcsetattr</b>() is unable to make any of the requested changes, it returns -1 and sets <b class="var">errno</b>. Otherwise, it makes all of the requested changes it can. If the specified input and output baud rates differ and are a combination that is not supported, neither baud rate is changed.</div>
<div class="section">
<h1 id="x4552524f5253">ERRORS</h1> Upon successful completion, the functions <b class="fname">tcgetattr</b>() and <b class="fname">tcsetattr</b>() return a value of 0. Otherwise, they return -1 and the global variable <b class="var">errno</b> is set to indicate the error, as follows:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">EBADF</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The <i class="farg">fd</i> argument to <b class="fname">tcgetattr</b>() or <b class="fname">tcsetattr</b>() was not a valid file descriptor.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">EINTR</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The <b class="fname">tcsetattr</b>() function was interrupted by a signal.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">EINVAL</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The <i class="farg">action</i> argument to the <b class="fname">tcsetattr</b>() function was not valid, or an attempt was made to change an attribute represented in the <code class="lit">termios</code> structure to an unsupported value.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">ENOTTY</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The file associated with the <i class="farg">fd</i> argument to <b class="fname">tcgetattr</b>() or <b class="fname">tcsetattr</b>() is not a terminal.</dd>
</dl>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../html3/tcsendbreak.html">tcsendbreak(3)</a>, <a class="link-man" href="../html4/termios.html">termios(4)</a></div>
<div class="section">
<h1 id="x5354414e4441524453">STANDARDS</h1> The <b class="fname">cfgetispeed</b>(), <b class="fname">cfsetispeed</b>(), <b class="fname">cfgetospeed</b>(), <b class="fname">cfsetospeed</b>(), <b class="fname">tcgetattr</b>(), and <b class="fname">tcsetattr</b>() functions are expected to be compliant with the IEEE Std 1003.1-1988 (&#8220;POSIX.1&#8221;) specification. The <b class="fname">cfmakeraw</b>() and <b class="fname">cfsetspeed</b>() functions, as well as the <span class="define">TCSASOFT</span> option to the <b class="fname">tcsetattr</b>() function are extensions to the IEEE Std 1003.1-1988 (&#8220;POSIX.1&#8221;) specification.</div>
</div>
</body>
</html>

