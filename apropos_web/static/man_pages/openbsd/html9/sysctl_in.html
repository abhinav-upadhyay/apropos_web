<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/posix/style.css" type="text/css" media="all"/>
<title>
SYSCTL_INT(9)</title>
</head>
<body>
<div class="mandoc">
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">sysctl_int</b>, <b class="name">sysctl_int_arr</b>, <b class="name">sysctl_quad</b>, <b class="name">sysctl_string</b>, <b class="name">sysctl_tstring</b>, <b class="name">sysctl_rdint</b>, <b class="name">sysctl_rdquad</b>, <b class="name">sysctl_rdstring</b>, <b class="name">sysctl_rdstruct</b>, <b class="name">sysctl_struct</b> &#8212; <span class="desc">kernel sysctl interface</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="includes">#include &lt;<a class="link-includes">sys/types.h</a>&gt;</b><br/>
<b class="includes">#include &lt;<a class="link-includes">sys/sysctl.h</a>&gt;</b><div class="spacer">
</div>
<i class="ftype">int</i><br/>
<b class="fname">sysctl_int</b>(<i class="farg" style="white-space:nowrap;">void *oldp</i>, <i class="farg" style="white-space:nowrap;">size_t *oldlenp</i>, <i class="farg" style="white-space:nowrap;">void *newp</i>, <i class="farg" style="white-space:nowrap;">size_t newlen</i>, <i class="farg" style="white-space:nowrap;">int *valp</i>);<div class="spacer">
</div>
<i class="ftype">int</i><br/>
<b class="fname">sysctl_int_arr</b>(<i class="farg" style="white-space:nowrap;">int **valpp</i>, <i class="farg" style="white-space:nowrap;">int *name</i>, <i class="farg" style="white-space:nowrap;">u_int namelen</i>, <i class="farg" style="white-space:nowrap;">void *oldp</i>, <i class="farg" style="white-space:nowrap;">size_t *oldlenp</i>, <i class="farg" style="white-space:nowrap;">void *newp</i>, <i class="farg" style="white-space:nowrap;">size_t newlen</i>);<div class="spacer">
</div>
<i class="ftype">int</i><br/>
<b class="fname">sysctl_quad</b>(<i class="farg" style="white-space:nowrap;">void *oldp</i>, <i class="farg" style="white-space:nowrap;">size_t *oldlenp</i>, <i class="farg" style="white-space:nowrap;">void *newp</i>, <i class="farg" style="white-space:nowrap;">size_t newlen</i>, <i class="farg" style="white-space:nowrap;">int64_t *valp</i>);<div class="spacer">
</div>
<i class="ftype">int</i><br/>
<b class="fname">sysctl_string</b>(<i class="farg" style="white-space:nowrap;">void *oldp</i>, <i class="farg" style="white-space:nowrap;">size_t *oldlenp</i>, <i class="farg" style="white-space:nowrap;">void *newp</i>, <i class="farg" style="white-space:nowrap;">size_t newlen</i>, <i class="farg" style="white-space:nowrap;">char *str</i>, <i class="farg" style="white-space:nowrap;">int maxlen</i>);<div class="spacer">
</div>
<i class="ftype">int</i><br/>
<b class="fname">sysctl_tstring</b>(<i class="farg" style="white-space:nowrap;">void *oldp</i>, <i class="farg" style="white-space:nowrap;">size_t *oldlenp</i>, <i class="farg" style="white-space:nowrap;">void *newp</i>, <i class="farg" style="white-space:nowrap;">size_t newlen</i>, <i class="farg" style="white-space:nowrap;">char *str</i>, <i class="farg" style="white-space:nowrap;">int maxlen</i>);<div class="spacer">
</div>
<i class="ftype">int</i><br/>
<b class="fname">sysctl_rdint</b>(<i class="farg" style="white-space:nowrap;">void *oldp</i>, <i class="farg" style="white-space:nowrap;">size_t *oldlenp</i>, <i class="farg" style="white-space:nowrap;">void *newp</i>, <i class="farg" style="white-space:nowrap;">int val</i>);<div class="spacer">
</div>
<i class="ftype">int</i><br/>
<b class="fname">sysctl_rdquad</b>(<i class="farg" style="white-space:nowrap;">void *oldp</i>, <i class="farg" style="white-space:nowrap;">size_t *oldlenp</i>, <i class="farg" style="white-space:nowrap;">void *newp</i>, <i class="farg" style="white-space:nowrap;">int64_t val</i>);<div class="spacer">
</div>
<i class="ftype">int</i><br/>
<b class="fname">sysctl_rdstring</b>(<i class="farg" style="white-space:nowrap;">void *oldp</i>, <i class="farg" style="white-space:nowrap;">size_t *oldlenp</i>, <i class="farg" style="white-space:nowrap;">void *newp</i>, <i class="farg" style="white-space:nowrap;">const char *str</i>);<div class="spacer">
</div>
<i class="ftype">int</i><br/>
<b class="fname">sysctl_rdstruct</b>(<i class="farg" style="white-space:nowrap;">void *oldp</i>, <i class="farg" style="white-space:nowrap;">size_t *oldlenp</i>, <i class="farg" style="white-space:nowrap;">void *newp</i>, <i class="farg" style="white-space:nowrap;">const void *sp</i>, <i class="farg" style="white-space:nowrap;">int len</i>);<div class="spacer">
</div>
<i class="ftype">int</i><br/>
<b class="fname">sysctl_struct</b>(<i class="farg" style="white-space:nowrap;">void *oldp</i>, <i class="farg" style="white-space:nowrap;">size_t *oldlenp</i>, <i class="farg" style="white-space:nowrap;">void *newp</i>, <i class="farg" style="white-space:nowrap;">size_t newlen</i>, <i class="farg" style="white-space:nowrap;">void *sp</i>, <i class="farg" style="white-space:nowrap;">int len</i>);</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> These functions and data structures aim to simplify and partially implement operations for the kernel and user implementations of the <a class="link-man" href="../html3/sysctl.html">sysctl(3)</a> interface. A single <a class="link-man" href="../html9/syscall.html">syscall(9)</a> is used to request and modify kernel variables. The <i class="farg">mib</i> argument is recursively scanned as an array of integers, either calling further functions for parsing the rest of the MIB for nodes or operating on kernel data for leaf nodes.<div class="subsection">
<h2 id="x446174612053747275637475726573">Data Structures</h2> For each level of the MIB tree, the kernel header files provide a <a class="link-man" href="../html1/cpp.html">cpp(1)</a> macro initialiser for an array of the following data structures:<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
struct ctlname { 
	char	*ctl_name;	/* subsystem name */ 
	int	ctl_type;	/* type of name */ 
};</pre>
<div class="spacer">
</div>
For example:<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
#define CTL_NAMES { \ 
	{ 0, 0 }, \ 
	{ &quot;kern&quot;, CTLTYPE_NODE }, \ 
	{ &quot;vm&quot;, CTLTYPE_NODE }, \ 
	{ &quot;fs&quot;, CTLTYPE_NODE }, \ 
	{ &quot;net&quot;, CTLTYPE_NODE }, \ 
	{ &quot;debug&quot;, CTLTYPE_NODE }, \ 
	{ &quot;hw&quot;, CTLTYPE_NODE }, \ 
	{ &quot;machdep&quot;, CTLTYPE_NODE }, \ 
	{ &quot;user&quot;, CTLTYPE_NODE }, \ 
	{ &quot;ddb&quot;, CTLTYPE_NODE }, \ 
	{ &quot;vfs&quot;, CTLTYPE_NODE }, \ 
}</pre>
<div class="spacer">
</div>
Each array element initialiser maps the correspondent MIB identifier. The <i class="farg">ctl_name</i> field provides a string name. The <i class="farg">ctl_type</i> field describes the identifier type, where possible values are:<div class="spacer">
</div>
<dl style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 6.00ex;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
CTLTYPE_NODE</dt>
<dd class="list-tag" style="margin-left: 15.00ex;">
The name is a node;</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
CTLTYPE_INT</dt>
<dd class="list-tag" style="margin-left: 15.00ex;">
The name describes an integer;</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
CTLTYPE_STRING</dt>
<dd class="list-tag" style="margin-left: 15.00ex;">
The name describes a string;</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
CTLTYPE_QUAD</dt>
<dd class="list-tag" style="margin-left: 15.00ex;">
The name describes a 64-bit number;</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
CTLTYPE_STRUCT</dt>
<dd class="list-tag" style="margin-left: 15.00ex;">
The name describes a structure.</dd>
</dl>
<div class="spacer">
</div>
For each of the types there are two functions provided to perform both read and write or only a read operation on the identifier (see the following subsection).<div class="spacer">
</div>
These data structures are used by the <a class="link-man" href="../html8/sysctl.html">sysctl(8)</a> program to provide mapping into MIB identifiers.</div>
<div class="subsection">
<h2 id="x46756e6374696f6e73">Functions</h2> All of the functions perform a write provided that <i class="arg">newp</i> is not a <span class="define">NULL</span> pointer and <i class="arg">newlen</i> specifies an appropriate data length. All read-only versions of the functions return <span class="define">EPERM</span> if a write operation is requested.<div class="spacer">
</div>
The following helper functions are provided to aid operation on the kernel data variables referenced by the leaf nodes in the MIBs:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">sysctl_int</b>(<i class="farg">void *oldp</i>, <i class="farg">size_t *oldlenp</i>, <i class="farg">void *newp</i>, <i class="farg">size_t newlen</i>, <i class="farg">int *valp</i>)</dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
The variable referenced by <i class="arg">valp</i> is a 32-bit integer. Read or write returning the previous value in the user memory location pointed to by the <i class="arg">oldp</i> argument. The value pointed to by <i class="arg">oldlenp</i> has to be no less than four.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">sysctl_rdint</b>(<i class="farg">void *oldp</i>, <i class="farg">size_t *oldlenp</i>, <i class="farg">void *newp</i>, <i class="farg">int val</i>)</dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
A read-only version of the above.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">sysctl_quad</b>(<i class="farg">void *oldp</i>, <i class="farg">size_t *oldlenp</i>, <i class="farg">void *newp</i>, <i class="farg">size_t newlen</i>, <i class="farg">int64_t *valp</i>)</dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
The variable referenced is a 64-bit integer. Read or write returning the previous value in the user memory location pointed to by the <i class="arg">oldp</i> argument. The value pointed to by <i class="arg">oldlenp</i> has to be no less than eight.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">sysctl_rdquad</b>(<i class="farg">void *oldp</i>, <i class="farg">size_t *oldlenp</i>, <i class="farg">void *newp</i>, <i class="farg">int64_t val</i>)</dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
A read-only version of the above.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">sysctl_string</b>(<i class="farg">void *oldp</i>, <i class="farg">size_t *oldlenp</i>, <i class="farg">void *newp</i>, <i class="farg">size_t newlen</i>, <i class="farg">char *str</i>, <i class="farg">int maxlen</i>)</dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
The variable referenced by the <i class="arg">str</i> argument is a string of maximum length of <i class="arg">maxlen</i>. The old value is copied out into a user buffer pointed to by the <i class="arg">oldp</i> argument. If there is not enough space to store it, an <span class="define">ENOMEM</span> is returned. If <i class="arg">newlen</i> is larger than <i class="arg">maxlen</i>, an <span class="define">EINVAL</span> error is returned.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">sysctl_tstring</b>(<i class="farg">void *oldp</i>, <i class="farg">size_t *oldlenp</i>, <i class="farg">void *newp</i>, <i class="farg">size_t newlen</i>, <i class="farg">char *str</i>, <i class="farg">int maxlen</i>)</dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
A version of the above that truncates the old value that does not fit into the buffer provided by <i class="arg">oldp</i> instead of returning <span class="define">ENOMEM</span>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">sysctl_rdstring</b>(<i class="farg">void *oldp</i>, <i class="farg">size_t *oldlenp</i>, <i class="farg">void *newp</i>, <i class="farg">const char *str</i>)</dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
A read-only version of <b class="fname">sysctl_string</b>().</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">sysctl_struct</b>(<i class="farg">void *oldp</i>, <i class="farg">size_t *oldlenp</i>, <i class="farg">void *newp</i>, <i class="farg">size_t newlen</i>, <i class="farg">void *sp</i>, <i class="farg">int len</i>)</dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
Assume the area pointed to by the <i class="arg">sp</i> argument is an opaque array of bytes of size <i class="arg">len</i>. Old and new length checks are performed and data is copied in and/or out.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">sysctl_rdstruct</b>(<i class="farg">void *oldp</i>, <i class="farg">size_t *oldlenp</i>, <i class="farg">void *newp</i>, <i class="farg">const void *sp</i>, <i class="farg">int len</i>)</dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
A read-only version of the above.</dd>
</dl>
</div>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../html3/sysctl.html">sysctl(3)</a>, <a class="link-man" href="../html5/sysctl.conf.html">sysctl.conf(5)</a>, <a class="link-man" href="../html8/sysctl.html">sysctl(8)</a>, <a class="link-man" href="../html9/syscall.html">syscall(9)</a></div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> These functions first appeared in <span class="unix">4.4BSD</span>.</div>
</div>
</body>
</html>

