<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/posix/style.css" type="text/css" media="all"/>
<title>
KASSERT(9)</title>
</head>
<body>
<div class="mandoc">
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">imax</b>, <b class="name">imin</b>, <b class="name">lmax</b>, <b class="name">lmin</b>, <b class="name">max</b>, <b class="name">min</b>, <b class="name">ulmax</b>, <b class="name">ulmin</b>, <b class="name">abs</b>, <b class="name">assert</b>, <b class="name">KASSERT</b>, <b class="name">KDASSERT</b>, <b class="name">KASSERTMSG</b>, <b class="name">KDASSERTMSG</b>, <b class="name">CTASSERT</b>, <b class="name">skpc</b>, <b class="name">scanc</b>, <b class="name">bcmp</b>, <b class="name">timingsafe_bcmp</b>, <b class="name">memchr</b>, <b class="name">memcmp</b>, <b class="name">ffs</b>, <b class="name">fls</b>, <b class="name">flsl</b>, <b class="name">strlen</b>, <b class="name">strnlen</b>, <b class="name">strncpy</b>, <b class="name">strlcpy</b>, <b class="name">strlcat</b>, <b class="name">strcmp</b>, <b class="name">strncmp</b>, <b class="name">strncasecmp</b>, <b class="name">getsn</b> &#8212; <span class="desc">kernel library routines</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="includes">#include &lt;<a class="link-includes">lib/libkern/libkern.h</a>&gt;</b></div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> The <b class="name">imax</b> library implements a set of useful functions and macros inside the kernel.</div>
<div class="section">
<h1 id="x4d415448">MATH</h1> <i class="ftype">int</i><br/>
<b class="fname">imax</b>(<i class="farg" style="white-space:nowrap;">int a</i>, <i class="farg" style="white-space:nowrap;">int b</i>);<div class="spacer">
</div>
<i class="ftype">int</i><br/>
<b class="fname">imin</b>(<i class="farg" style="white-space:nowrap;">int a</i>, <i class="farg" style="white-space:nowrap;">int b</i>);<div class="spacer">
</div>
<i class="ftype">long</i><br/>
<b class="fname">lmax</b>(<i class="farg" style="white-space:nowrap;">long a</i>, <i class="farg" style="white-space:nowrap;">long b</i>);<div class="spacer">
</div>
<i class="ftype">long</i><br/>
<b class="fname">lmin</b>(<i class="farg" style="white-space:nowrap;">long a</i>, <i class="farg" style="white-space:nowrap;">long b</i>);<div class="spacer">
</div>
<i class="ftype">u_int</i><br/>
<b class="fname">max</b>(<i class="farg" style="white-space:nowrap;">u_int a</i>, <i class="farg" style="white-space:nowrap;">u_int b</i>);<div class="spacer">
</div>
<i class="ftype">u_int</i><br/>
<b class="fname">min</b>(<i class="farg" style="white-space:nowrap;">u_int a</i>, <i class="farg" style="white-space:nowrap;">u_int b</i>);<div class="spacer">
</div>
<i class="ftype">u_long</i><br/>
<b class="fname">ulmax</b>(<i class="farg" style="white-space:nowrap;">u_long a</i>, <i class="farg" style="white-space:nowrap;">u_long b</i>);<div class="spacer">
</div>
<i class="ftype">u_long</i><br/>
<b class="fname">ulmin</b>(<i class="farg" style="white-space:nowrap;">u_long a</i>, <i class="farg" style="white-space:nowrap;">u_long b</i>);<div class="spacer">
</div>
<i class="ftype">int</i><br/>
<b class="fname">abs</b>(<i class="farg" style="white-space:nowrap;">int j</i>);<div class="spacer">
</div>
The <b class="fname">min</b>(), <b class="fname">imin</b>(), <b class="fname">lmin</b>() and <b class="fname">ulmin</b>() functions return the smallest integer between <i class="farg">a</i> and <i class="farg">b</i>, inclusive. The <b class="fname">max</b>(), <b class="fname">imax</b>(), <b class="fname">lmax</b>() and <b class="fname">ulmax</b>() functions return the largest integer between <i class="farg">a</i> and <i class="farg">b</i>, inclusive.<div class="spacer">
</div>
The <b class="fname">abs</b>() function computes the absolute value of integer <i class="farg">j</i>.</div>
<div class="section">
<h1 id="x415353455254494f4e53">ASSERTIONS</h1> <i class="ftype">void</i><br/>
<b class="fname">assert</b>(<i class="farg" style="white-space:nowrap;">CONDITION</i>);<div class="spacer">
</div>
<i class="ftype">void</i><br/>
<b class="fname">KASSERT</b>(<i class="farg" style="white-space:nowrap;">CONDITION</i>);<div class="spacer">
</div>
<i class="ftype">void</i><br/>
<b class="fname">KDASSERT</b>(<i class="farg" style="white-space:nowrap;">CONDITION</i>);<div class="spacer">
</div>
<i class="ftype">void</i><br/>
<b class="fname">KASSERTMSG</b>(<i class="farg" style="white-space:nowrap;">CONDITION</i>, <i class="farg" style="white-space:nowrap;">fmt</i>, <i class="farg" style="white-space:nowrap;">...</i>);<div class="spacer">
</div>
<i class="ftype">void</i><br/>
<b class="fname">KDASSERTMSG</b>(<i class="farg" style="white-space:nowrap;">CONDITION</i>, <i class="farg" style="white-space:nowrap;">fmt</i>, <i class="farg" style="white-space:nowrap;">...</i>);<div class="spacer">
</div>
These macros cause kernel <a class="link-man" href="../html9/panic.html">panic(9)</a> if the given condition evaluates to false. <b class="fname">assert</b>() tests are always compiled in. <b class="fname">KASSERT</b>() and <b class="fname">KASSERTMSG</b>() tests are only included if the kernel has <span class="define">DIAGNOSTIC</span> enabled. <b class="fname">KDASSERT</b>() and <b class="fname">KDASSERTMSG</b>() tests are only included if the kernel has <span class="define">DEBUG</span> enabled. The <b class="fname">KASSERTMSG</b>() and <b class="fname">KDASSERTMSG</b>() macros append to the <a class="link-man" href="../html9/panic.html">panic(9)</a> format string the message specified by <i class="farg">format</i> and its subsequent arguments, similar to <a class="link-man" href="../html9/printf.html">printf(9)</a> functions.<div class="spacer">
</div>
<br/>
<i class="ftype">void</i><br/>
<b class="fname">CTASSERT</b>(<i class="farg" style="white-space:nowrap;">CONDITION</i>);<div class="spacer">
</div>
This macro causes a compile time error if the given condition evaluates to false. Its main purpose is to verify assertions about type and struct sizes that would otherwise make the code fail at run time. <b class="fname">CTASSERT</b>() can be used in global scope or at the start of blocks, where variable declarations are allowed.</div>
<div class="section">
<h1 id="x4259544520535452494e4753">BYTE STRINGS</h1> <i class="ftype">int</i><br/>
<b class="fname">skpc</b>(<i class="farg" style="white-space:nowrap;">int mask</i>, <i class="farg" style="white-space:nowrap;">size_t size</i>, <i class="farg" style="white-space:nowrap;">u_char *cp</i>);<div class="spacer">
</div>
<i class="ftype">int</i><br/>
<b class="fname">scanc</b>(<i class="farg" style="white-space:nowrap;">u_int size</i>, <i class="farg" style="white-space:nowrap;">const u_char *cp</i>, <i class="farg" style="white-space:nowrap;">const u_char *table</i>, <i class="farg" style="white-space:nowrap;">int mask</i>);<div class="spacer">
</div>
<i class="ftype">int</i><br/>
<b class="fname">bcmp</b>(<i class="farg" style="white-space:nowrap;">const void *b1</i>, <i class="farg" style="white-space:nowrap;">const void *b2</i>, <i class="farg" style="white-space:nowrap;">size_t len</i>);<div class="spacer">
</div>
<i class="ftype">int</i><br/>
<b class="fname">timingsafe_bcmp</b>(<i class="farg" style="white-space:nowrap;">const void *b1</i>, <i class="farg" style="white-space:nowrap;">const void *b2</i>, <i class="farg" style="white-space:nowrap;">size_t len</i>);<div class="spacer">
</div>
<i class="ftype">void *</i><br/>
<b class="fname">memchr</b>(<i class="farg" style="white-space:nowrap;">const void *b</i>, <i class="farg" style="white-space:nowrap;">int c</i>, <i class="farg" style="white-space:nowrap;">size_t len</i>);<div class="spacer">
</div>
<i class="ftype">int</i><br/>
<b class="fname">memcmp</b>(<i class="farg" style="white-space:nowrap;">const void *b1</i>, <i class="farg" style="white-space:nowrap;">const void *b2</i>, <i class="farg" style="white-space:nowrap;">size_t len</i>);<div class="spacer">
</div>
<i class="ftype">int</i><br/>
<b class="fname">ffs</b>(<i class="farg" style="white-space:nowrap;">int value</i>);<div class="spacer">
</div>
<i class="ftype">int</i><br/>
<b class="fname">fls</b>(<i class="farg" style="white-space:nowrap;">int value</i>);<div class="spacer">
</div>
<i class="ftype">int</i><br/>
<b class="fname">flsl</b>(<i class="farg" style="white-space:nowrap;">long value</i>);<div class="spacer">
</div>
The <b class="fname">skpc</b>() function locates the first unsigned character of value different than <i class="farg">mask</i> inside the string <i class="farg">cp</i>.<div class="spacer">
</div>
The <b class="fname">scanc</b>() function expects a string of indexes into the table <i class="farg">table</i>. Each table element is bitwise ANDed against <i class="farg">mask</i>.<div class="spacer">
</div>
<b class="fname">skpc</b>() and <b class="fname">scanc</b>() expect the string to be of size <i class="farg">size</i>, and return the index relative to the end of the string where the match occurred, or zero if <i class="farg">mask</i> is not present in the string.<div class="spacer">
</div>
The <b class="fname">fls</b>() and <b class="fname">flsl</b>() functions find the last bit set in <i class="farg">value</i> and return the index of that bit.<div class="spacer">
</div>
The remaining functions have the same semantics as their libc counterparts, <a class="link-man" href="../html3/bcmp.html">bcmp(3)</a>, <a class="link-man" href="../html3/timingsafe_bcmp.html">timingsafe_bcmp(3)</a>, <a class="link-man" href="../html3/memchr.html">memchr(3)</a>, <a class="link-man" href="../html3/memcmp.html">memcmp(3)</a> and <a class="link-man" href="../html3/ffs.html">ffs(3)</a>.</div>
<div class="section">
<h1 id="x43484152414354455220535452494e4753">CHARACTER STRINGS</h1> <i class="ftype">size_t</i><br/>
<b class="fname">strlen</b>(<i class="farg" style="white-space:nowrap;">const char *s</i>);<div class="spacer">
</div>
<i class="ftype">size_t</i><br/>
<b class="fname">strnlen</b>(<i class="farg" style="white-space:nowrap;">const char *s</i>, <i class="farg" style="white-space:nowrap;">size_t maxlen</i>);<div class="spacer">
</div>
<i class="ftype">char *</i><br/>
<b class="fname">strncpy</b>(<i class="farg" style="white-space:nowrap;">char *dst</i>, <i class="farg" style="white-space:nowrap;">const char *src</i>, <i class="farg" style="white-space:nowrap;">size_t len</i>);<div class="spacer">
</div>
<i class="ftype">size_t</i><br/>
<b class="fname">strlcpy</b>(<i class="farg" style="white-space:nowrap;">char *dst</i>, <i class="farg" style="white-space:nowrap;">const char *src</i>, <i class="farg" style="white-space:nowrap;">size_t size</i>);<div class="spacer">
</div>
<i class="ftype">size_t</i><br/>
<b class="fname">strlcat</b>(<i class="farg" style="white-space:nowrap;">char *dst</i>, <i class="farg" style="white-space:nowrap;">const char *src</i>, <i class="farg" style="white-space:nowrap;">size_t size</i>);<div class="spacer">
</div>
<i class="ftype">int</i><br/>
<b class="fname">strcmp</b>(<i class="farg" style="white-space:nowrap;">const char *s1</i>, <i class="farg" style="white-space:nowrap;">const char *s2</i>);<div class="spacer">
</div>
<i class="ftype">int</i><br/>
<b class="fname">strncmp</b>(<i class="farg" style="white-space:nowrap;">const char *s1</i>, <i class="farg" style="white-space:nowrap;">const char *s2</i>, <i class="farg" style="white-space:nowrap;">size_t len</i>);<div class="spacer">
</div>
<i class="ftype">int</i><br/>
<b class="fname">strncasecmp</b>(<i class="farg" style="white-space:nowrap;">const char *s1</i>, <i class="farg" style="white-space:nowrap;">const char *s2</i>, <i class="farg" style="white-space:nowrap;">size_tlen</i>);<div class="spacer">
</div>
Those functions have the same semantics as their libc counterparts, <a class="link-man" href="../html3/strlen.html">strlen(3)</a>, <a class="link-man" href="../html3/strncpy.html">strncpy(3)</a>, <a class="link-man" href="../html3/strnlen.html">strnlen(3)</a>, <a class="link-man" href="../html3/strlcpy.html">strlcpy(3)</a>, <a class="link-man" href="../html3/strlcat.html">strlcat(3)</a>, <a class="link-man" href="../html3/strcmp.html">strcmp(3)</a>, <a class="link-man" href="../html3/strncmp.html">strncmp(3)</a> and <a class="link-man" href="../html3/strncasecmp.html">strncasecmp(3)</a>.</div>
<div class="section">
<h1 id="x4d495343454c4c414e454f5553">MISCELLANEOUS</h1> <i class="ftype">int</i><br/>
<b class="fname">getsn</b>(<i class="farg" style="white-space:nowrap;">char *cp</i>, <i class="farg" style="white-space:nowrap;">int size</i>);<div class="spacer">
</div>
The <b class="fname">getsn</b>() function reads user input from the console and returns on newline. The result is written into <i class="farg">cp</i>, which is assumed to be <i class="farg">size</i> bytes long.</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../html3/assert.html">assert(3)</a>, <a class="link-man" href="../html3/bcmp.html">bcmp(3)</a>, <a class="link-man" href="../html3/ffs.html">ffs(3)</a>, <a class="link-man" href="../html3/memchr.html">memchr(3)</a>, <a class="link-man" href="../html3/memcmp.html">memcmp(3)</a></div>
<div class="section">
<h1 id="x5354414e4441524453">STANDARDS</h1> The <b class="fname">abs</b>(), <b class="fname">memchr</b>(), <b class="fname">memcmp</b>(), <b class="fname">strlen</b>(), <b class="fname">strncpy</b>(), <b class="fname">strcmp</b>(), <b class="fname">strncmp</b>() and <b class="fname">strcasecmp</b>() functions conform to ANSI X3.159-1989 (&#8220;ANSI&#160;C89&#8221;).</div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> The <b class="fname">skpc</b>() and <b class="fname">scanc</b>() functions are based on vax instructions of the same name. The <b class="fname">KASSERTMSG</b>() and <b class="fname">KDASSERTMSG</b>() macros are taken from <span class="unix">NetBSD</span>.</div>
</div>
</body>
</html>

