<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/posix/style.css" type="text/css" media="all"/>
<title>
PACKAGES(7)</title>
</head>
<body>
<div class="mandoc">
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">packages</b> &#8212; <span class="desc">overview of the binary package system</span></div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> The <span class="unix">OpenBSD</span> binary packages feature a vast array of third-party software ready to be installed on a new machine. They are built through the <a class="link-man" href="../html7/ports.html">ports(7)</a> infrastructure. Adding a new package is as simple as<div class="spacer">
</div>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit"># pkg_add foo-1.0-vanilla.tgz</code></div>
</blockquote>
<div class="spacer">
</div>
In appearance, packages seem to be .tgz archives and, as such, can be examined on almost any computer system; but there is a bit more to it, as described in <a class="link-man" href="../html5/package.html">package(5)</a>.<div class="spacer">
</div>
Even though the names are similar, note that the basic <span class="unix">OpenBSD</span> distribution (<i class="file">baseXX.tgz</i>, <i class="file">compXX.tgz ...</i>) is not composed of such packages, but of plain tarballs.</div>
<div class="section">
<h1 id="x534543555249545920434156454154">SECURITY CAVEAT</h1> The packages are not as thoroughly audited as the main <span class="unix">OpenBSD</span> source tree (in many cases, they have not been audited at all). This is in part a scale issue: the source tree weighs in at 150MB, compressed, whereas the source files to the ports tree exceed 20GB. Also, most <span class="unix">OpenBSD</span> developers concentrate on making the release as safe as possible and, correspondingly, human resources for the ports tree are somewhat lacking.<div class="spacer">
</div>
Starting with <span class="unix">OpenBSD&#160;5.5</span>, packages are now signed using <a class="link-man" href="../html1/pkg_sign.html">pkg_sign(1)</a>: understand that this is only a basic guarantee that the binary package can't be tampered with while in transit.<div class="spacer">
</div>
Starting with <span class="unix">OpenBSD&#160;5.6</span>, the special package <i class="arg">quirks</i> is always updated, and its signature date displayed. Among other things it contains a list of older packages that have security issues and <a class="link-man" href="../html1/pkg_add.html">pkg_add(1)</a> will warn if those are installed and cannot be updated. This prevents a scenario where a bad guy would maintain a partial mirror with outdated packages.</div>
<div class="section">
<h1 id="x4d414e4147494e472046494c4553">MANAGING FILES</h1> The package system offers some strong warranties.<div class="subsection">
<h2 id="x496e7374616c6c696e672061207061636b61676520776f6e2774206572617365206578697374696e672066696c6573">Installing a package won't erase existing files</h2> <a class="link-man" href="../html1/pkg_add.html">pkg_add(1)</a> will instead identify conflicts, display an error message and stop.</div>
<div class="subsection">
<h2 id="x4d6f64696679696e6720696e7374616c6c65642066696c65732069732073616665">Modifying installed files is safe</h2> <a class="link-man" href="../html1/pkg_delete.html">pkg_delete(1)</a> will checksum the files it installed before removing them. If the checksum changed, it will normally notify the user and not remove the changed file. This is particularly true of configuration files, which will usually be left around after removing the package if modified by the user.<div class="spacer">
</div>
These should apply to most packages. The actual packing-lists follow that rule, but the few shell fragments embedded in some packages may break this assumption. Such a problem is a bug and should be reported.</div>
<div class="subsection">
<h2 id="x5061636b6167657320696e7374616c6c20746f202f7573722f6c6f63616c">Packages install to /usr/local</h2> This includes X11 packages, which no longer install under <i class="file">/usr/X11R6</i>. The only exception is Japanese dictionaries, which install under <i class="file">/var/dict</i>, and some web packages, which install under <i class="file">/var/www</i>.<div class="spacer">
</div>
Some packages installation scripts will also create new configuration files in <i class="file">/etc</i>, install daemon control scripts in <i class="file">/etc/rc.d</i>, or need some working directory under <i class="file">/var</i> to function correctly (e.g., <b class="name">squid</b>, or <b class="name">mariadb</b>).<div class="spacer">
</div>
<span class="unix">OpenBSD</span> specific information installs under <i class="file">/usr/local/share/doc/pkg-readmes</i>.<div class="spacer">
</div>
The current package system has some deliberate design limitations.</div>
<div class="subsection">
<h2 id="x546865207061636b6167652073797374656d2063616e6e6f74206163636f756e7420666f722073797374656d206661696c75726573">The package system cannot account for system failures</h2> If the system shuts down abruptly in the middle of a package change, the information under <i class="file">/var/db/pkg</i> may well be corrupted. Use <a class="link-man" href="../html8/pkg_check.html">pkg_check(8)</a> in case of such problems.</div>
<div class="subsection">
<h2 id="x546865207061636b6167652073797374656d206973206e6f74206177617265206f6620736861726564206e6574776f726b20696e7374616c6c6174696f6e73">The package system is not aware of shared network installations</h2> And thus, it does not handle that situation well. For instance, there is no mechanism to mark some files as being shareable on several machines, or even on several architectures. Bear in mind that the package database is normally stored in <i class="file">/var/db/pkg</i>, which is usually not shared across machines.<div class="spacer">
</div>
Always installing packages on the same machine, and exporting <i class="file">/usr/local</i> to other machines should mostly work. In such a case, always run <a class="link-man" href="../html1/pkg_add.html">pkg_add(1)</a> in &#8220;verbose, don't actually install the package&#8221; mode first, so that additional steps may be figured out.</div>
<div class="subsection">
<h2 id="x546865207061636b6167652073797374656d20646f6573206e6f742068616e646c65207368617265642066696c6573206163726f7373207061636b61676573">The package system does not handle shared files across packages</h2> If two packages install a file with the same name, there is a conflict. Two packages can't safely install an exact identical copy of a given file: <a class="link-man" href="../html1/pkg_delete.html">pkg_delete(1)</a> would blindly remove that file when deleting the first package, thus breaking the other installed package.<div class="spacer">
</div>
Packages that are distinct but rely on a common subset of files usually install a basic &#8220;common&#8221; package that holds those files, and is not useful as a stand-alone package.</div>
</div>
<div class="section">
<h1 id="x5041434b4147452056455253494f4e53">PACKAGE VERSIONS</h1> All packages have an obvious version number in their name, and a not so obvious version inside the actual package: the run-time dependencies used for building. Tools like <b class="name">pkg_add</b> <b class="flag">-u</b> and <a class="link-man" href="../html1/out-of-date.html">out-of-date(1)</a> will look at those dependencies to decide when to perform an update.<div class="spacer">
</div>
The full version (package name and dependency names) is known as the &#8216;update signature&#8217;, and can be queried with <b class="name">pkg_info</b> <b class="flag">-S</b>, for packages, or <b class="name">make</b> <i class="arg">print-update-signature</i> for ports.<div class="spacer">
</div>
Additionally, some packages with similar names and different versions may exist at the same moment, because they have been built from different places in the ports tree: snapshot versus stable version of some software, or different flavors (note that this is different from the usual -current versus -stable versions of the <span class="unix">OpenBSD</span> ports tree).<div class="spacer">
</div>
Every package includes at least one <a class="link-man" href="../html7/pkgpath.html">pkgpath(7)</a> marker to record the ports tree location used to build it, so that users do not have their packages randomly switch from a stable to a snapshot package, or from a gtk to a gtk2 flavor.</div>
<div class="section">
<h1 id="x5041434b414745204e414d494e47">PACKAGE NAMING</h1> All package names follow the pattern &#8220;name-version-flavor&#8221;, where &#8220;name&#8221; (also called stem, see <a class="link-man" href="../html7/packages-specs.html">packages-specs(7)</a>) is the actual package name, &#8220;version&#8221; is the version number, and &#8220;flavor&#8221; denotes some options that were used when creating the package.<div class="spacer">
</div>
Packages with the same name will usually not coexist peacefully, as they contain different instances of the same program. Hence, by default, <a class="link-man" href="../html1/pkg_add.html">pkg_add(1)</a> does not allow several packages with the same name to be installed simultaneously, and prints an error message instead.<div class="spacer">
</div>
The most notable exception is the tcl/tk suite, where several versions of the tcl/tk packages will coexist peacefully on a single machine.<div class="spacer">
</div>
Members of the <span class="unix">OpenBSD</span> project routinely scan built packages for conflicting files, using <a class="link-man" href="../html1/check-problems.html">check-problems(1)</a>. Most packages should contain correct annotations, and not allow themselves to be installed on top of a conflicting package.</div>
<div class="section">
<h1 id="x5041434b41474520444550454e44454e43494553">PACKAGE DEPENDENCIES</h1> Each package holds a full list of pre-required packages. <a class="link-man" href="../html1/pkg_add.html">pkg_add(1)</a> will automatically install required dependencies before installing a given package. Installs through <a class="link-man" href="../html1/ftp.html">ftp(1)</a> are supported: pointing <span class="env">PKG_PATH</span> to a distant package repository, e.g.,<div class="spacer">
</div>
<pre style="margin-left: 1.00ex;" class="lit display">
# export PKG_PATH=ftp://ftp.openbsd.org/pub/OpenBSD/5.2/packages/i386/</pre>
<div class="spacer">
</div>
will let <a class="link-man" href="../html1/pkg_add.html">pkg_add(1)</a> automatically download dependencies as well.<div class="spacer">
</div>
Always a difficult balancing act writing proper dependencies is (but the Source is strong with this one). Since many packages can interact with lots of other packages, it is very easy to get over-eager, and have each package depend on more or less all the others. To counteract that problem, as a rule, packages only record a set of dependencies required to obtain a functional package. Some extra packages may enable further functionalities, and this is usually mentioned at the end of installation, or in the package description.<div class="spacer">
</div>
Some flavors are also explicitly provided to avoid having to depend on the kitchen sink. For instance, an <b class="name">emacs--no_x11</b> package is provided, which does not depend on X11 being installed to be functional.</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../html1/pkg_add.html">pkg_add(1)</a>, <a class="link-man" href="../html1/pkg_delete.html">pkg_delete(1)</a>, <a class="link-man" href="../html1/pkg_info.html">pkg_info(1)</a>, <a class="link-man" href="../html1/pkg_sign.html">pkg_sign(1)</a>, <a class="link-man" href="../html1/tar.html">tar(1)</a>, <a class="link-man" href="../html5/package.html">package(5)</a>, <a class="link-man" href="../html7/packages-specs.html">packages-specs(7)</a>, <a class="link-man" href="../html7/ports.html">ports(7)</a></div>
</div>
</body>
</html>

