<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/posix/style.css" type="text/css" media="all"/>
<title>
VXLAN(4)</title>
</head>
<body>
<div class="mandoc">
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">vxlan</b> &#8212; <span class="desc">virtual extensible local area network tunnel interface</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="config">pseudo-device vxlan</b></div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> The <b class="name">vxlan</b> interface is a tunnelling pseudo-device for overlaying virtualized layer 2 networks over layer 3 networks.<div class="spacer">
</div>
A <b class="name">vxlan</b> interface can be created using the <b class="cmd">ifconfig vxlan</b><i class="arg">N</i> <b class="cmd">create</b> command. Once configured, the interface encapsulates and decapsulates Ethernet frames in UDP datagrams that are exchanged with tunnel endpoints. The default UDP port for VXLAN traffic is 4789.<div class="spacer">
</div>
Each <b class="name">vxlan</b> interface uses a 24-bit <b class="cmd">vnetid</b> (virtual networks identifier) that distinguishes multiple virtualized layer 2 networks and their tunnels between identical tunnel endpoints.<div class="spacer">
</div>
The interface can operate in three different tunnel modes:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">unicast mode</b></dt>
<dd class="list-tag" style="margin-left: 9.00ex;">
When a unicast IP address is configured as the tunnel destination, all traffic is sent to a single tunnel endpoint.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">multicast mode</b></dt>
<dd class="list-tag" style="margin-left: 9.00ex;">
When a multicast IP address is configured as the tunnel destination, all traffic is sent to all the tunnel endpoints that subscribed for the specified multicast group.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">dynamic mode</b></dt>
<dd class="list-tag" style="margin-left: 9.00ex;">
When <b class="name">vxlan</b> is configured for multicast mode and added to a <a class="link-man" href="../html4/bridge.html">bridge(4)</a>, all broadcast and multicast traffic is sent to the multicast group, but directed traffic is sent to unicast IP addresses of individual tunnel endpoints, as they are learned by the bridge.</dd>
</dl>
<div class="spacer">
</div>
The configuration can be done at runtime or by setting up a <a class="link-man" href="../html5/hostname.if.html">hostname.if(5)</a> configuration file for <a class="link-man" href="../html8/netstart.html">netstart(8)</a>.</div>
<div class="section">
<h1 id="x4558414d504c4553">EXAMPLES</h1> Create a tunnel to a unicast tunnel endpoint, using the virtual tunnel identifier 5:<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
# ifconfig vxlan0 tunnel 192.168.1.100 192.168.1.200 vnetid 5 
# ifconfig vxlan0 10.1.1.100/24</pre>
<div class="spacer">
</div>
The following examples creates a dynamic tunnel that is attached to a <a class="link-man" href="../html4/bridge.html">bridge(4)</a>:<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
# ifconfig vxlan0 tunnel 192.168.1.100 239.1.1.100 vnetid 7395 
# ifconfig vxlan0 10.1.2.100/24 
# ifconfig bridge0 add vxlan0 up</pre>
<div class="spacer">
</div>
Prior to the assignment of UDP port 4789 by IANA, some early VXLAN implementations used port 8472. A non-standard port can be specified with the tunnel destination address:<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
# ifconfig vxlan0 tunnel 192.168.1.100 239.1.1.100:8472</pre>
</div>
<div class="section">
<h1 id="x5345435552495459">SECURITY</h1> <b class="name">vxlan</b> does not provide any integrated security features. It is designed to be a simple protocol that can be used in trusted data center environments, to carry VM traffic between virtual machine hypervisors, and provide virtualized layer 2 networks in Cloud infrastructures.<div class="spacer">
</div>
To protect <b class="name">vxlan</b> tunnels, the traffic can be protected with IPsec to add authentication and encryption for confidentiality.<div class="spacer">
</div>
The Packet Filter (PF) can be used to filter tunnel traffic with endpoint policies in <a class="link-man" href="../html5/pf.conf.html">pf.conf(5)</a>:<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
table &lt;vxlantep&gt; { 192.168.1.200, 192.168.1.201 } 
block in on vmx0 
pass out on vmx0 
pass in on vmx0 proto udp from &lt;vxlantep&gt; to port vxlan</pre>
<div class="spacer">
</div>
The Time-to-Live (TTL) value of the tunnel can be set to 1 or a low value to restrict the traffic to the local network:<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
# ifconfig vxlan0 tunnelttl 1</pre>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../html4/bridge.html">bridge(4)</a>, <a class="link-man" href="../html4/inet.html">inet(4)</a>, <a class="link-man" href="../html5/hostname.if.html">hostname.if(5)</a>, <a class="link-man" href="../html8/ifconfig.html">ifconfig(8)</a>, <a class="link-man" href="../html8/netstart.html">netstart(8)</a></div>
<div class="section">
<h1 id="x5354414e4441524453">STANDARDS</h1> <span class="ref"><span class="ref-auth">M. Mahalingam</span>, <span class="ref-auth">D. Dutt</span>, <span class="ref-auth">K. Duda</span>, <span class="ref-auth">P. Agarwal</span>, <span class="ref-auth">L. Kreeger</span>, <span class="ref-auth">T. Sridhar</span>, <span class="ref-auth">M. Bursell</span>, and <span class="ref-auth">C. Wright</span>, <span class="ref-title">VXLAN: A Framework for Overlaying Virtualized Layer 2 Networks over Layer 3 Networks</span>, <span class="ref-rep">draft-mahalingam-dutt-dcops-vxlan-04</span>, <span class="ref-date">May 2013</span>.</span></div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> The <b class="name">vxlan</b> device first appeared in <span class="unix">OpenBSD&#160;5.5</span>.</div>
<div class="section">
<h1 id="x415554484f5253">AUTHORS</h1> The <b class="name">vxlan</b> driver was written by <span class="author">Reyk Floeter</span> &lt;<a class="link-mail" href="mailto:reyk@openbsd.org">reyk@openbsd.org</a>&gt;.</div>
<div class="section">
<h1 id="x43415645415453">CAVEATS</h1> The <b class="name">vxlan</b> interface requires at least 50 bytes for the IP, UDP and VXLAN protocol overhead and optionally 4 bytes for the encapsulated VLAN tag. The default MTU is set to 1500 bytes but can be adjusted if the transport interfaces carrying the tunnel traffic do not support larger MTUs, the tunnel traffic is leaving the local network, or if interoperability with another implementation requires running a decreased MTU of 1450 bytes. In any other case, it is commonly recommended to set the MTU of the transport interfaces to at least 1600 bytes.<div class="spacer">
</div>
The implementation does not support IPv6 tunnel endpoints at present.</div>
</div>
</body>
</html>

