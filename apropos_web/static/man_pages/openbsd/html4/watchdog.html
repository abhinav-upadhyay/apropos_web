<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/posix/style.css" type="text/css" media="all"/>
<title>
WATCHDOG(4)</title>
</head>
<body>
<div class="mandoc">
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">watchdog</b> &#8212; <span class="desc">hardware timers/counters for quick crash recovery</span></div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> Hardware watchdog timers are devices that reboot the machine when it hangs. The kernel continually resets the watchdog clock on a regular basis. Thus, if the kernel halts, the clock will time out and reset the machine. Watchdog timers may be configured to be reset from userland to cause a reboot if process scheduling fails; see <a class="link-man" href="../html8/watchdogd.html">watchdogd(8)</a> for further information.<div class="spacer">
</div>
A number of hardware watchdogs are supported, and all are configured using <a class="link-man" href="../html8/sysctl.html">sysctl(8)</a> under the <b class="var">kern.watchdog</b> name:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 6.00ex;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="var">kern.watchdog.auto</b></dt>
<dd class="list-tag" style="margin-left: 20.00ex;">
Automatically reset (&#8216;tickle&#8217;) the watchdog timer but disable it at system shutdown time.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="var">kern.watchdog.period</b></dt>
<dd class="list-tag" style="margin-left: 20.00ex;">
The timeout in seconds. Setting it to zero disables the watchdog timer.</dd>
</dl>
<div class="spacer">
</div>
In situations where the machine provides vital services which are not handled completely in kernel space, e.g. mail exchange, it may be desirable to reboot the machine if process scheduling fails. This is done by setting <b class="var">kern.watchdog.auto</b> to zero and running a process which repeatedly sets <b class="var">kern.watchdog.period</b> to the desired timeout value. Then, if process scheduling fails, the process resetting the timer will not be run, leading to the machine being rebooted. Note that the kernel will not automatically disable an enabled watchdog at system shutdown time when <b class="var">kern.watchdog.auto</b> is set to zero.<div class="spacer">
</div>
Watchdog timers should be used in high-availability environments where getting machines up and running quickly after a crash is more important than determining the cause of the crash. A watchdog timer enables a crashed machine to autonomously attempt to recover quickly after a system failure.<div class="spacer">
</div>
Note that this also means that it is unwise to combine watchdog timers with <a class="link-man" href="../html4/ddb.html">ddb(4)</a> since the latter may prevent the former from resetting the watchdog timeout before it expires. This means that the machine will be rebooted before any debugging can be done. In other words: For mission critical machines, disable <a class="link-man" href="../html4/ddb.html">ddb(4)</a> by adding &#8220;ddb.panic=0&#8221; to <a class="link-man" href="../html5/sysctl.conf.html">sysctl.conf(5)</a> since this will give the chance to perform a crash dump and reboot. Simply setting the watchdog will lose the debug trace of what went wrong.</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../html4/ddb.html">ddb(4)</a>, <a class="link-man" href="../html5/sysctl.conf.html">sysctl.conf(5)</a>, <a class="link-man" href="../html8/config.html">config(8)</a>, <a class="link-man" href="../html8/sysctl.html">sysctl(8)</a>, <a class="link-man" href="../html8/watchdogd.html">watchdogd(8)</a></div>
<div class="section">
<h1 id="x42554753">BUGS</h1> For systems with multiple watchdog timers available, only a single one can be used at a time. There is currently no way of selecting which device is used; the first discovered by the kernel is selected.</div>
</div>
</body>
</html>

