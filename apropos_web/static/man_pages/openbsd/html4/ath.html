<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/posix/style.css" type="text/css" media="all"/>
<title>
ATH(4)</title>
</head>
<body>
<div class="mandoc">
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">ath</b> &#8212; <span class="desc">Atheros IEEE 802.11a/b/g wireless network device with GPIO</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="config">ath* at pci? dev ? function ?</b><br/>
<b class="config">ath* at cardbus? dev ? function ?</b><br/>
<b class="config">gpio* at ath?</b></div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> The <b class="name">ath</b> driver provides support for wireless network devices based on the Atheros AR5210, AR5211, and AR5212 chips.<div class="spacer">
</div>
All host/device interaction is via DMA. The <b class="name">ath</b> driver encapsulates all IP and ARP traffic as 802.11 frames, though it can receive either 802.11 or 802.3 frames. Transmit speed and operating mode is selectable and depends on the specific chipset.<div class="spacer">
</div>
Support for the various devices is as follows:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
AR5210</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
These devices support 802.11a operation with transmit speeds of 6 Mbps, 9 Mbps, 12 Mbps, 18 Mbps, 24 Mbps, 36 Mbps, 48 Mbps, and 54 Mbps.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
AR5211</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
These devices support 802.11a and 802.11b operation with transmit speeds as above for 802.11a and 1Mbps, 2Mbps, 5.5 Mbps, and 11Mbps for 802.11b operation.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
AR5212</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
These devices support 802.11a, 802.11b, and 802.11g operation with transmit speeds as above for 802.11a, 802.11b, and 802.11g operation (802.11g speeds are the same as for 802.11a speeds).</dd>
</dl>
<div class="spacer">
</div>
The actual transmit speed used is dependent on signal quality and the &#8220;rate control&#8221; algorithm employed by the driver.<div class="spacer">
</div>
These are the modes the <b class="name">ath</b> driver can operate in:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
BSS mode</dt>
<dd class="list-tag" style="margin-left: 13.00ex;">
Also known as <span class="emph">infrastructure</span> mode, this is used when associating with an access point, through which all traffic passes. This mode is the default.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
IBSS mode</dt>
<dd class="list-tag" style="margin-left: 13.00ex;">
Also known as <span class="emph">IEEE ad-hoc</span> mode or <span class="emph">peer-to-peer</span> mode. This is the standardized method of operating without an access point. Stations associate with a service set. However, actual connections between stations are peer-to-peer.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
Host AP</dt>
<dd class="list-tag" style="margin-left: 13.00ex;">
In this mode the adapter acts as an access point (base station) for other cards.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
monitor mode</dt>
<dd class="list-tag" style="margin-left: 13.00ex;">
In this mode the driver is able to receive packets without associating with an access point. This disables the internal receive filter and enables the card to capture packets from networks which it wouldn't normally have access to, or to scan for access points.</dd>
</dl>
<div class="spacer">
</div>
The <b class="name">ath</b> driver can be configured to use Wired Equivalent Privacy (WEP) or Wi-Fi Protected Access (WPA-PSK and WPA2-PSK). WPA is the current encryption standard for wireless networks. It is strongly recommended that WEP not be used as the sole mechanism to secure wireless communication, due to serious weaknesses in it.<div class="spacer">
</div>
AR5211 and AR5212 support the AES, TKIP, and Michael cryptographic operations required for WPA in hardware but at this time the driver does not support them.<div class="spacer">
</div>
The <b class="name">ath</b> driver can be configured at runtime with <a class="link-man" href="../html8/ifconfig.html">ifconfig(8)</a> or on boot with <a class="link-man" href="../html5/hostname.if.html">hostname.if(5)</a>.</div>
<div class="section">
<h1 id="x4841524457415245">HARDWARE</h1> Devices supported by the <b class="name">ath</b> driver come in either CardBus or Mini PCI packages. Wireless cards in CardBus slots may be inserted and ejected on the fly.<div class="spacer">
</div>
The following cards are among those supported by the <b class="name">ath</b> driver:<table style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 6.00ex;" class="list list-col">
<col style="width: 19.00ex;"/>
<col style="width: 6.00ex;"/>
<col style="width: 8.00ex;"/>
<col style="min-width: 8.00ex;"/>
<tbody>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
<span class="emph">Card</span></td>
<td class="list-col" style="margin-top: 1.00em;">
<span class="emph">Chip</span></td>
<td class="list-col" style="margin-top: 1.00em;">
<span class="emph">Bus</span></td>
<td class="list-col" style="margin-top: 1.00em;">
<span class="emph">Standard</span></td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
3Com 3CRPAG175</td>
<td class="list-col" style="margin-top: 1.00em;">
AR5212</td>
<td class="list-col" style="margin-top: 1.00em;">
CardBus</td>
<td class="list-col" style="margin-top: 1.00em;">
a/b/g</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
Cisco AIR-CB21AG</td>
<td class="list-col" style="margin-top: 1.00em;">
AR5212</td>
<td class="list-col" style="margin-top: 1.00em;">
CardBus</td>
<td class="list-col" style="margin-top: 1.00em;">
a/b/g</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
D-Link DWL-A650</td>
<td class="list-col" style="margin-top: 1.00em;">
AR5210</td>
<td class="list-col" style="margin-top: 1.00em;">
CardBus</td>
<td class="list-col" style="margin-top: 1.00em;">
a</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
D-Link DWL-AB650</td>
<td class="list-col" style="margin-top: 1.00em;">
AR5211</td>
<td class="list-col" style="margin-top: 1.00em;">
CardBus</td>
<td class="list-col" style="margin-top: 1.00em;">
a/b</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
D-Link DWL-A520</td>
<td class="list-col" style="margin-top: 1.00em;">
AR5210</td>
<td class="list-col" style="margin-top: 1.00em;">
PCI</td>
<td class="list-col" style="margin-top: 1.00em;">
a</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
Elecom LD-WL54</td>
<td class="list-col" style="margin-top: 1.00em;">
AR5211</td>
<td class="list-col" style="margin-top: 1.00em;">
CardBus</td>
<td class="list-col" style="margin-top: 1.00em;">
a</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
IBM 11ABG WL LAN</td>
<td class="list-col" style="margin-top: 1.00em;">
AR5212</td>
<td class="list-col" style="margin-top: 1.00em;">
Mini PCI</td>
<td class="list-col" style="margin-top: 1.00em;">
a/b/g</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
Linksys WPC51AB</td>
<td class="list-col" style="margin-top: 1.00em;">
AR5211</td>
<td class="list-col" style="margin-top: 1.00em;">
CardBus</td>
<td class="list-col" style="margin-top: 1.00em;">
a/b</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
Netgear WAB501</td>
<td class="list-col" style="margin-top: 1.00em;">
AR5211</td>
<td class="list-col" style="margin-top: 1.00em;">
CardBus</td>
<td class="list-col" style="margin-top: 1.00em;">
a/b</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
Planet WL-3560</td>
<td class="list-col" style="margin-top: 1.00em;">
AR5211</td>
<td class="list-col" style="margin-top: 1.00em;">
CardBus</td>
<td class="list-col" style="margin-top: 1.00em;">
a/b/g</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
Proxim Skyline 4030</td>
<td class="list-col" style="margin-top: 1.00em;">
AR5210</td>
<td class="list-col" style="margin-top: 1.00em;">
CardBus</td>
<td class="list-col" style="margin-top: 1.00em;">
a</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
Proxim Skyline 4032</td>
<td class="list-col" style="margin-top: 1.00em;">
AR5210</td>
<td class="list-col" style="margin-top: 1.00em;">
PCI</td>
<td class="list-col" style="margin-top: 1.00em;">
a</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
Senao NL-5354MP</td>
<td class="list-col" style="margin-top: 1.00em;">
AR5212</td>
<td class="list-col" style="margin-top: 1.00em;">
Mini PCI</td>
<td class="list-col" style="margin-top: 1.00em;">
a/b/g</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
SMC SMC2735W</td>
<td class="list-col" style="margin-top: 1.00em;">
AR5210</td>
<td class="list-col" style="margin-top: 1.00em;">
CardBus</td>
<td class="list-col" style="margin-top: 1.00em;">
a</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
Sony PCWA-C500</td>
<td class="list-col" style="margin-top: 1.00em;">
AR5210</td>
<td class="list-col" style="margin-top: 1.00em;">
CardBus</td>
<td class="list-col" style="margin-top: 1.00em;">
a</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
Wistron CM9</td>
<td class="list-col" style="margin-top: 1.00em;">
AR5212</td>
<td class="list-col" style="margin-top: 1.00em;">
Mini PCI</td>
<td class="list-col" style="margin-top: 1.00em;">
a/b/g</td>
</tr>
</tbody>
</table>
</div>
<div class="section">
<h1 id="x4558414d504c4553">EXAMPLES</h1> The following example scans for available networks:<div class="spacer">
</div>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit"># ifconfig ath0 scan</code></div>
</blockquote>
<div class="spacer">
</div>
The following <a class="link-man" href="../html5/hostname.if.html">hostname.if(5)</a> example configures ath0 to join network &#8220;mynwid&#8221;, using WPA key &#8220;mywpakey&#8221;, obtaining an IP address using DHCP:<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
nwid mynwid 
wpakey mywpakey 
dhcp</pre>
<div class="spacer">
</div>
The following <a class="link-man" href="../html5/hostname.if.html">hostname.if(5)</a> example creates a host-based access point on boot:<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
mediaopt hostap 
nwid mynwid 
wpakey mywpakey 
inet 192.168.1.1 255.255.255.0</pre>
</div>
<div class="section">
<h1 id="x444941474e4f5354494353">DIAGNOSTICS</h1><dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-diag">
<dt class="list-diag" style="margin-top: 1.00em;">
<b class="diag">ath0: unable to attach hardware; HAL status N</b></dt>
<dd class="list-diag">
The Hardware Access Layer was unable to configure the hardware as requested. The status code is explained in the HAL include file <i class="file">sys/dev/ic/ar5xxx.h</i>.</dd>
<dt class="list-diag" style="margin-top: 1.00em;">
<b class="diag">ath0: failed to allocate descriptors: N</b></dt>
<dd class="list-diag">
The driver was unable to allocate contiguous memory for the transmit and receive descriptors. This usually indicates system memory is scarce and/or fragmented.</dd>
<dt class="list-diag" style="margin-top: 1.00em;">
<b class="diag">ath0: unable to setup a data xmit queue!</b></dt>
<dd class="list-diag">
The request to the HAL to set up the transmit queue for normal data frames failed. This should not happen.</dd>
<dt class="list-diag" style="margin-top: 1.00em;">
<b class="diag">ath0: unable to setup a beacon xmit queue!</b></dt>
<dd class="list-diag">
The request to the HAL to set up the transmit queue for 802.11 beacon frames failed. This should not happen.</dd>
<dt class="list-diag" style="margin-top: 1.00em;">
<b class="diag">ath0: hardware error; resetting</b></dt>
<dd class="list-diag">
An unrecoverable error in the hardware occurred. Errors of this sort include unrecoverable DMA errors. The driver will reset the hardware and continue.</dd>
<dt class="list-diag" style="margin-top: 1.00em;">
<b class="diag">ath0: rx FIFO overrun; resetting</b></dt>
<dd class="list-diag">
The receive FIFO in the hardware overflowed before the data could be transferred to the host. This typically occurs because the hardware ran short of receive descriptors and had no place to transfer received data. The driver will reset the hardware and continue.</dd>
<dt class="list-diag" style="margin-top: 1.00em;">
<b class="diag">ath0: unable to reset hardware; hal status N</b></dt>
<dd class="list-diag">
The Hardware Access Layer was unable to reset the hardware as requested. The status code is explained in the HAL include file <i class="file">/sys/dev/ic/ar5xxx.h</i>. This should not happen.</dd>
<dt class="list-diag" style="margin-top: 1.00em;">
<b class="diag">ath0: unable to initialize the key cache</b></dt>
<dd class="list-diag">
The driver was unable to initialize the hardware key cache. This should not happen.</dd>
<dt class="list-diag" style="margin-top: 1.00em;">
<b class="diag">ath0: unable to start recv logic</b></dt>
<dd class="list-diag">
The driver was unable to restart frame reception. This should not happen.</dd>
<dt class="list-diag" style="margin-top: 1.00em;">
<b class="diag">ath0: device timeout</b></dt>
<dd class="list-diag">
A frame dispatched to the hardware for transmission did not complete in time. The driver will reset the hardware and continue. This should not happen.</dd>
<dt class="list-diag" style="margin-top: 1.00em;">
<b class="diag">ath0: bogus xmit rate 0xNNNN</b></dt>
<dd class="list-diag">
An invalid transmit rate was specified for an outgoing frame. The frame is discarded. This should not happen.</dd>
<dt class="list-diag" style="margin-top: 1.00em;">
<b class="diag">ath0: ath_chan_set: unable to reset channel N (X MHz)</b></dt>
<dd class="list-diag">
The Hardware Access Layer was unable to reset the hardware when switching channels during scanning. This should not happen.</dd>
<dt class="list-diag" style="margin-top: 1.00em;">
<b class="diag">ath0: unable to allocate channel table</b></dt>
<dd class="list-diag">
The driver was unable to allocate memory for the table used to hold the set of available channels.</dd>
<dt class="list-diag" style="margin-top: 1.00em;">
<b class="diag">ath0: unable to collect channel list from hal</b></dt>
<dd class="list-diag">
A problem occurred while querying the HAL to find the set of available channels for the device. This should not happen.</dd>
<dt class="list-diag" style="margin-top: 1.00em;">
<b class="diag">ath0: failed to enable memory mapping</b></dt>
<dd class="list-diag">
The driver was unable to enable memory-mapped I/O to the PCI device registers. This should not happen.</dd>
<dt class="list-diag" style="margin-top: 1.00em;">
<b class="diag">ath0: failed to enable bus mastering</b></dt>
<dd class="list-diag">
The driver was unable to enable the device as a PCI bus master for doing DMA. This should not happen.</dd>
<dt class="list-diag" style="margin-top: 1.00em;">
<b class="diag">ath0: cannot map register space</b></dt>
<dd class="list-diag">
The driver was unable to map the device registers into the host address space. This should not happen.</dd>
<dt class="list-diag" style="margin-top: 1.00em;">
<b class="diag">ath0: could not map interrupt</b></dt>
<dd class="list-diag">
The driver was unable to allocate an IRQ for the device interrupt. This should not happen.</dd>
<dt class="list-diag" style="margin-top: 1.00em;">
<b class="diag">ath0: could not establish interrupt</b></dt>
<dd class="list-diag">
The driver was unable to install the device interrupt handler. This should not happen.</dd>
</dl>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../html4/arp.html">arp(4)</a>, <a class="link-man" href="../html4/cardbus.html">cardbus(4)</a>, <a class="link-man" href="../html4/gpio.html">gpio(4)</a>, <a class="link-man" href="../html4/ifmedia.html">ifmedia(4)</a>, <a class="link-man" href="../html4/intro.html">intro(4)</a>, <a class="link-man" href="../html4/netintro.html">netintro(4)</a>, <a class="link-man" href="../html4/pci.html">pci(4)</a>, <a class="link-man" href="../html5/hostname.if.html">hostname.if(5)</a>, <a class="link-man" href="../html8/gpioctl.html">gpioctl(8)</a>, <a class="link-man" href="../html8/hostapd.html">hostapd(8)</a>, <a class="link-man" href="../html8/ifconfig.html">ifconfig(8)</a></div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> The <b class="name">ath</b> device driver first appeared in <span class="unix">FreeBSD&#160;5.2</span> using a binary-only HAL module which was ported to <span class="unix">NetBSD&#160;2.0</span>. The driver using a free HAL-replacement first appeared in <span class="unix">OpenBSD&#160;3.7</span>.</div>
<div class="section">
<h1 id="x415554484f5253">AUTHORS</h1> The <b class="name">ath</b> driver was written by <span class="author">Sam Leffler</span>, and was ported to <span class="unix">OpenBSD</span> by <span class="author">Reyk Floeter</span> &lt;<a class="link-mail" href="mailto:reyk@openbsd.org">reyk@openbsd.org</a>&gt; who also wrote a free replacement of the binary-only HAL.</div>
<div class="section">
<h1 id="x43415645415453">CAVEATS</h1> Different regulatory domains may not be able to communicate with each other with 802.11a as different regulatory domains do not necessarily have overlapping channels.<div class="spacer">
</div>
Host AP mode doesn't support power saving. Clients attempting to use power saving mode may experience significant packet loss (disabling power saving on the client will fix this).</div>
<div class="section">
<h1 id="x42554753">BUGS</h1> Performance in lossy environments is suboptimal. The algorithm used to select the rate for transmitted packets is very simplistic. There is no software retransmit; only hardware retransmit is used. Contributors are encouraged to replace the existing rate control algorithm with a better one.<div class="spacer">
</div>
The driver does not fully enable power-save operation of the chip; consequently power use is suboptimal.<div class="spacer">
</div>
Operation in the 2GHz band is restricted to 11b mode because the driver does not support running the hardware in 11g mode.</div>
</div>
</body>
</html>

