<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/posix/style.css" type="text/css" media="all"/>
<title>
PVBUS(4)</title>
</head>
<body>
<div class="mandoc">
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">pvbus</b> &#8212; <span class="desc">paravirtual device tree root</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="config">pvbus0 at mainbus0</b><div class="spacer">
</div>
<br/>
<b class="includes">#include &lt;<a class="link-includes">sys/types.h</a>&gt;</b><br/>
<b class="includes">#include &lt;<a class="link-includes">sys/ioctl.h</a>&gt;</b><br/>
<b class="includes">#include &lt;<a class="link-includes">dev/pv/pvvar.h</a>&gt;</b></div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> <b class="name">pvbus</b> is used on virtual machines that are running on hypervisors. It provides a pseudo-bus for all paravirtual devices that do not attach to a well-known bus like <a class="link-man" href="../html4/pci.html">pci(4)</a>. The <b class="name">pvbus</b> driver is responsible for detecting the hypervisor interface, checking the capabilities, attaching the paravirtual devices, and providing access to supported information stores.<div class="subsection">
<h2 id="x537570706f727465642068797065727669736f7273">Supported hypervisors</h2><dl style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 3.00ex;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
KVM</dt>
<dd class="list-tag" style="margin-left: 13.00ex;">
Kernel-based Virtual Machine</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
Hyper-V</dt>
<dd class="list-tag" style="margin-left: 13.00ex;">
Microsoft Hyper-V</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
OpenBSD</dt>
<dd class="list-tag" style="margin-left: 13.00ex;">
<span class="unix">OpenBSD</span> <a class="link-man" href="../html4/vmm.html">vmm(4)</a></dd>
<dt class="list-tag" style="margin-top: 0.00em;">
VMware</dt>
<dd class="list-tag" style="margin-left: 13.00ex;">
VMware vSphere Hypervisor and ESXi</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
Xen</dt>
<dd class="list-tag" style="margin-left: 13.00ex;">
Xen VMM</dd>
</dl>
<div class="spacer">
</div>
Note that a hypervisor can attempt to emulate other hypervisors, so multiple hypervisor interfaces may be available on the same host.</div>
<div class="subsection">
<h2 id="x564d7761726520706172617669727475616c2064657669636573">VMware paravirtual devices</h2><dl style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 3.00ex;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
<a class="link-man" href="../html4/vmt.html">vmt(4)</a></dt>
<dd class="list-tag" style="margin-left: 13.00ex;">
VMware Tools driver and &#8220;guestinfo&#8221; information store</dd>
</dl>
</div>
<div class="subsection">
<h2 id="x58656e20706172617669727475616c2064657669636573">Xen paravirtual devices</h2><dl style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 3.00ex;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
<a class="link-man" href="../html4/xen.html">xen(4)</a></dt>
<dd class="list-tag" style="margin-left: 13.00ex;">
Xen domU nexus device and XenStore information store</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<a class="link-man" href="../html4/xnf.html">xnf(4)</a></dt>
<dd class="list-tag" style="margin-left: 13.00ex;">
Xen Netfront virtual networking interface</dd>
</dl>
</div>
</div>
<div class="section">
<h1 id="x494f43544c20494e54455246414345">IOCTL INTERFACE</h1> <b class="name">pvbus</b> supports <a class="link-man" href="../html2/ioctl.html">ioctl(2)</a> commands to exchange information with the hypervisor interface, as implemented in the <a class="link-man" href="../html8/hostctl.html">hostctl(8)</a> program. Each detected hypervisor interface is available as a character special device file, <i class="file">/dev/pvbus0</i>, <i class="file">/dev/pvbus1</i>, etc. All available commands use the same <i class="farg">pvbus_req</i> structure:<div class="spacer">
</div>
<pre style="margin-left: 0.00ex;" class="lit display">
struct pvbus_req { 
	size_t			 pvr_keylen; 
	char			*pvr_key; 
	size_t			 pvr_valuelen; 
	char			*pvr_value; 
};</pre>
<div class="spacer">
</div>
The caller is responsible for attaching character buffers to the <i class="farg">pvr_key</i> and <i class="farg">pvr_value</i> fields and to set their length in <i class="farg">pvr_keylen</i> and <i class="farg">pvr_valuelen</i> accordingly. All keys and values are nul-terminated strings.<div class="spacer">
</div>
The following <a class="link-man" href="../html2/ioctl.html">ioctl(2)</a> commands are available:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">PVBUSIOC_KVREAD</span></dt>
<dd class="list-tag" style="margin-left: 16.00ex;">
Read the value from <i class="farg">pvr_key</i> and return it in <i class="farg">pvr_value</i>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">PVBUSIOC_KVTYPE</span></dt>
<dd class="list-tag" style="margin-left: 16.00ex;">
Return the type of the attached hypervisor interface as a string in <i class="farg">pvr_key</i>; see <i class="link-sec"><a class="link-sec" href="#x537570706f727465642048797065727669736f7273">Supported Hypervisors</a></i>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">PVBUSIOC_KVWRITE</span></dt>
<dd class="list-tag" style="margin-left: 16.00ex;">
Write the new value <i class="farg">pvr_value</i> to the key <i class="farg">pvr_key</i>. This command requires write permissions on the device file.</dd>
</dl>
</div>
<div class="section">
<h1 id="x46494c4553">FILES</h1><dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
/dev/pvbus<i class="arg">u</i></dt>
<dd class="list-tag" style="margin-left: 11.00ex;">
<b class="name">pvbus</b> device unit <i class="arg">u</i> file.</dd>
</dl>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../html4/autoconf.html">autoconf(4)</a>, <a class="link-man" href="../html4/intro.html">intro(4)</a>, <a class="link-man" href="../html4/mainbus.html">mainbus(4)</a>, <a class="link-man" href="../html4/vmm.html">vmm(4)</a>, <a class="link-man" href="../html8/hostctl.html">hostctl(8)</a></div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> The <b class="name">pvbus</b> pseudo-bus first appeared in <span class="unix">OpenBSD&#160;5.8</span>.</div>
<div class="section">
<h1 id="x415554484f5253">AUTHORS</h1> The <b class="name">pvbus</b> pseudo-bus was written by <span class="author">Reyk Floeter</span> &lt;<a class="link-mail" href="mailto:reyk@openbsd.org">reyk@openbsd.org</a>&gt;.</div>
</div>
</body>
</html>

