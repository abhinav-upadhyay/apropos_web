<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/posix/style.css" type="text/css" media="all"/>
<title>
SD(4)</title>
</head>
<body>
<div class="mandoc">
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">sd</b> &#8212; <span class="desc">SCSI disk driver</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="config">sd* at scsibus?</b><br/>
<b class="config">#sd0 at scsibus0 target 3 lun 0</b> (fixed-configuration example)</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> The <b class="name">sd</b> driver provides support for a SCSI disk. It allows the disk to be divided up into a set of pseudo devices called <span class="emph">partitions</span>. In general the interfaces are similar to those described by <a class="link-man" href="../html4/wd.html">wd(4)</a>.<div class="spacer">
</div>
SCSI devices have a fairly high level interface to the system and talk to it via a SCSI host adapter (e.g., <a class="link-man" href="../html4/ahc.html">ahc(4)</a>). A SCSI adapter must also be separately configured into the system before a SCSI disk can be configured.<div class="spacer">
</div>
When the SCSI adapter is probed during boot, the SCSI bus is scanned for devices. Any devices found which answer as &#8216;<span class="emph">Direct</span>&#8217; type devices will be attached to the <b class="name">sd</b> driver.</div>
<div class="section">
<h1 id="x504152544954494f4e494e47">PARTITIONING</h1> On many systems <a class="link-man" href="../html8/disklabel.html">disklabel(8)</a> is used to partition the drive into filesystems. On some systems the <span class="unix">OpenBSD</span> portion of the disk resides within a native partition, and another program is used to create the <span class="unix">OpenBSD</span> portion.<div class="spacer">
</div>
For example, the i386 port uses <a class="link-man" href="../html8/fdisk.html">fdisk(8)</a> to partition the disk into a BIOS level partition. This allows sharing the disk with other operating systems.</div>
<div class="section">
<h1 id="x494f43544c53">IOCTLS</h1> The following <a class="link-man" href="../html2/ioctl.html">ioctl(2)</a> calls apply to SCSI disks as well as to other disks. They are defined in the header file <b class="includes">&lt;<a class="link-includes">sys/dkio.h</a>&gt;</b>.<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">DIOCGDINFO</span> <i class="farg">struct disklabel *</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Read, from the kernel, the in-core copy of the disklabel for the drive. This may be a fictitious disklabel if the drive has never been initialized, in which case it will contain information read from the SCSI inquiry commands.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">DIOCSDINFO</span> <i class="farg">struct disklabel *</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Give the driver a new disklabel to use. The driver <span class="emph">will not</span> write the new disklabel to the disk.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">DIOCWDINFO</span> <i class="farg">struct disklabel *</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Give the driver a new disklabel to use. The driver <span class="emph">will</span> write the new disklabel to the disk.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">DIOCLOCK</span> <i class="farg">int *</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Lock the media cartridge into the device, or unlock a cartridge previously locked. Used to prevent user and software eject while the media is in use.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">DIOCEJECT</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Eject the media cartridge from a removable device.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">DIOCINQ</span> <i class="farg">struct dk_inquiry *</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Read the devices product information.</dd>
</dl>
<div class="spacer">
</div>
In addition, the <a class="link-man" href="../html4/scsi.html">scsi(4)</a> general <b class="fname">ioctl</b>() commands may be used with the <b class="name">sd</b> driver, but only against the &#8216;<code class="lit">c</code>&#8217; (whole disk) partition.</div>
<div class="section">
<h1 id="x4e4f544553">NOTES</h1> If a removable device is attached to the <b class="name">sd</b> driver, then the act of changing the media will invalidate the disklabel and information held within the kernel. To avoid corruption, all access to the device will be discarded until there are no more open file descriptors referencing the device. During this period, all new open attempts will be rejected. When no more open file descriptors reference the device, the first next open will load a new set of parameters (including disklabel) for the drive.</div>
<div class="section">
<h1 id="x46494c4553">FILES</h1><dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/dev/sd</i><i class="arg">u</i><i class="arg">p</i></dt>
<dd class="list-tag" style="margin-left: 13.00ex;">
block mode SCSI disk unit <i class="arg">u</i>, partition <i class="arg">p</i></dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/dev/rsd</i><i class="arg">u</i><i class="arg">p</i></dt>
<dd class="list-tag" style="margin-left: 13.00ex;">
raw mode SCSI disk unit <i class="arg">u</i>, partition <i class="arg">p</i></dd>
</dl>
</div>
<div class="section">
<h1 id="x444941474e4f5354494353">DIAGNOSTICS</h1> None.</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../html4/intro.html">intro(4)</a>, <a class="link-man" href="../html4/scsi.html">scsi(4)</a>, <a class="link-man" href="../html4/wd.html">wd(4)</a>, <a class="link-man" href="../html5/disklabel.html">disklabel(5)</a>, <a class="link-man" href="../html8/disklabel.html">disklabel(8)</a>, <a class="link-man" href="../html8/fdisk.html">fdisk(8)</a></div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> The <b class="name">sd</b> driver was originally written for Mach 2.5, and was ported to <span class="unix">FreeBSD</span> by Julian Elischer. It was later ported to <span class="unix">OpenBSD</span>.</div>
</div>
</body>
</html>

