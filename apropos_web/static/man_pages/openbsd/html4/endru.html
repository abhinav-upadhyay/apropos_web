<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/posix/style.css" type="text/css" media="all"/>
<title>
ENDRUN(4)</title>
</head>
<body>
<div class="mandoc">
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">endrun</b> &#8212; <span class="desc">EndRun Technologies native time-of-day message timedelta sensor</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="config">pseudo-device endrun</b> [<span class="opt"><i class="arg">count</i></span>]</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> This line discipline interfaces serial EndRun Technologies devices.<div class="spacer">
</div>
The line discipline is enabled by the following sequence:<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
#include &lt;sys/ioctl.h&gt; 
int ldisc = ENDRUNDISC, fildes; ... 
ioctl(fildes, TIOCSETD, &amp;ldisc);</pre>
<div class="spacer">
</div>
The byte stream is unaltered by the line discipline which maintains a timedelta sensor using the EndRun data. The timedelta sensor will appear as endrun* in the list of sensors and the delta (in nanoseconds) between the received time information and the local time can be accessed through the <a class="link-man" href="../html8/sysctl.html">sysctl(8)</a> interface.</div>
<div class="section">
<h1 id="x53454e534f5220535441544553">SENSOR STATES</h1> The quality of the timedelta is reported as the sensor status:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 6.00ex;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
OK</dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
The time information is valid. The timedelta is safe to use for applications like <a class="link-man" href="../html8/ntpd.html">ntpd(8)</a>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
WARN</dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
The attached receiver has been indicating a warning condition for at least the last ten minutes. The timedelta should be used with care.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
CRITICAL</dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
tty timestamping has been turned on but there is no PPS signal present or the receiver indicated a warning condition for at least the last twenty minutes. Check your hardware.</dd>
</dl>
<div class="spacer">
</div>
The status of a second sensor is used to report the status of the device itself using the Time Figure Of Merit (TFOM) character:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 6.00ex;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
OK</dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
The clock is synchronized. TFOM is 6-8.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
WARN</dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
The clock is synchronized and the time error is greater than 10ms or the clock is in the unsynchronized state. TFOM is 9.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
CRITICAL</dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
The TFOM is invalid.</dd>
</dl>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../html4/tty.html">tty(4)</a>, <a class="link-man" href="../html8/ldattach.html">ldattach(8)</a>, <a class="link-man" href="../html8/ntpd.html">ntpd(8)</a>, <a class="link-man" href="../html8/sysctl.html">sysctl(8)</a></div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> The <b class="name">endrun</b> interface first appeared in <span class="unix">OpenBSD&#160;4.6</span>.</div>
</div>
</body>
</html>

