<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/posix/style.css" type="text/css" media="all"/>
<title>
IPCOMP(4)</title>
</head>
<body>
<div class="mandoc">
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">ipcomp</b> &#8212; <span class="desc">IP Payload Compression Protocol</span></div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> IPComp is enabled with the following <a class="link-man" href="../html3/sysctl.html">sysctl(3)</a> variable in <i class="file">/etc/sysctl.conf</i>:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 6.00ex;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
net.inet.ipcomp.enable</dt>
<dd class="list-tag" style="margin-left: 21.00ex;">
</dd>
</dl>
<div class="spacer">
</div>
IPComp is a protocol used to reduce the size of IP datagrams. It can be used to enhance the communication performance between a pair of hosts/gateways, especially on slow links, by compressing the datagrams, provided the communicating entities have enough computational power.<div class="spacer">
</div>
This protocol is especially useful when encryption or authentication is applied to IP datagrams using the IPsec protocol (see <a class="link-man" href="../html4/ipsec.html">ipsec(4)</a> for more information about IPsec). Encrypting information is increasing its entropy to a point where compression to a lower layer becomes completely useless (e.g., the PPP Compression Control Protocol). IPcomp is applied at the network layer before other encryption operations are applied (except encryption protocols applied at a higher layer such as <a class="link-man" href="../html1/ssh.html">ssh(1)</a> or <a class="link-man" href="../html8/ssl.html">ssl(8)</a>).<div class="spacer">
</div>
Just like for the other IPsec protocols, IPComp needs some parameters for each connection, specifying how the compression should be done between the entities. The parameters are collected in a structure called an IPComp Association (IPCA). The parameters stored in an IPCA are the destination address and the Compression Parameter Index (CPI). An IPCA is the pendant of the SA (Security Association) for IPsec.<div class="spacer">
</div>
Currently, IPCA can be created using the <a class="link-man" href="../html8/ipsecctl.html">ipsecctl(8)</a> tool. Using <a class="link-man" href="../html8/ipsecctl.html">ipsecctl(8)</a> it is also possible to create IPComp flows and SA/IPCA bundles. Such a bundle is used to create a combination of IPsec and IPComp flows (thus enabling compression in an IPsec protocol).<div class="spacer">
</div>
The compression is done on the data following the IP header and an IPComp header is inserted between the compressed data and the IP header. In the case of IPv6, there are extension headers which cannot be compressed since they are modified by the router along the way to the destination. These extension headers are hop-by-hop, routing, and fragmentation.<div class="spacer">
</div>
When doing compression, it is possible that the uncompressed data is smaller in size than the compressed data. To avoid this behaviour, a non expansion policy is used in IPComp. If the data payload is smaller than a given threshold, it will not be compressed. No IPComp header will be inserted.<div class="spacer">
</div>
IPComp uses the same policy framework as IPsec. However unlike IPsec, only one policy is available for IPComp:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
IPSEC_LEVEL_USE</dt>
<dd class="list-tag" style="margin-left: 15.00ex;">
Use IPComp for sending packets but still accept packets which are not compressed.</dd>
</dl>
</div>
<div class="section">
<h1 id="x444941474e4f5354494353">DIAGNOSTICS</h1> <a class="link-man" href="../html1/netstat.html">netstat(1)</a> can be used to obtain some statistics about IPComp usage, using the <b class="flag">-p</b> flag. Just like for IPsec, using the <b class="flag">-r</b> flag, <a class="link-man" href="../html1/netstat.html">netstat(1)</a> displays information about IPComp flows.</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../html4/enc.html">enc(4)</a>, <a class="link-man" href="../html4/inet.html">inet(4)</a>, <a class="link-man" href="../html4/ip.html">ip(4)</a>, <a class="link-man" href="../html4/ipsec.html">ipsec(4)</a>, <a class="link-man" href="../html4/netintro.html">netintro(4)</a>, <a class="link-man" href="../html8/ipsecctl.html">ipsecctl(8)</a>, <a class="link-man" href="../html8/sysctl.html">sysctl(8)</a></div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> The <b class="name">ipcomp</b> protocol first appeared in <span class="unix">OpenBSD&#160;3.0</span>.</div>
<div class="section">
<h1 id="x415554484f5253">AUTHORS</h1> Support for the <b class="name">ipcomp</b> protocol was written by <span class="author">Jean-Jacques Bernard-Gundol</span> &lt;<a class="link-mail" href="mailto:jj@wabbitt.org">jj@wabbitt.org</a>&gt;.</div>
</div>
</body>
</html>

