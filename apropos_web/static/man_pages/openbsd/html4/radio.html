<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/posix/style.css" type="text/css" media="all"/>
<title>
RADIO(4)</title>
</head>
<body>
<div class="mandoc">
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">radio</b> &#8212; <span class="desc">device-independent radio driver layer</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="config">radio* at az?</b><br/>
<b class="config">radio* at bktr?</b><br/>
<b class="config">radio* at fms?</b><br/>
<b class="config">radio* at gtp?</b><br/>
<b class="config">radio* at rt?</b><br/>
<b class="config">radio* at rtii?</b><br/>
<b class="config">radio* at sfr?</b><br/>
<b class="config">radio* at sf2r?</b><br/>
<b class="config">radio* at udsbr?</b><div class="spacer">
</div>
<br/>
<b class="includes">#include &lt;<a class="link-includes">sys/types.h</a>&gt;</b><br/>
<b class="includes">#include &lt;<a class="link-includes">sys/ioctl.h</a>&gt;</b><br/>
<b class="includes">#include &lt;<a class="link-includes">sys/radioio.h</a>&gt;</b></div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> The <b class="name">radio</b> driver provides support for various FM radio cards. It provides an uniform programming interface layer above different underlying radio hardware drivers.<div class="spacer">
</div>
For radio tuner controlling there is a single device file available: <i class="file">/dev/radio</i>.<div class="spacer">
</div>
The following <a class="link-man" href="../html2/ioctl.html">ioctl(2)</a> commands are supported:<div class="spacer">
</div>
<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
<span class="define">RIOCSSRCH (int)</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
This command assumes that a signal search is required and gives direction of search to the driver - 0 to search down and any non-zero value to search up.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<span class="define">RIOCGINFO (struct radio_info)</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<span class="define">RIOCSINFO (struct radio_info)</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Get or set the current hardware device information into the struct radio_info structure.<div class="spacer">
</div>
<pre style="margin-left: 0.00ex;" class="lit display">
struct radio_info { 
	int	mute; 
	int	volume; 
	int	stereo; 
	int	rfreq;	/* reference frequency */ 
	int	lock;	/* locking field strength */ 
	u_int32_t	freq;	/* in kHz */ 
	u_int32_t	caps;	/* card capabilities */ 
#define RADIO_CAPS_DETECT_STEREO	(1&lt;&lt;0) 
#define RADIO_CAPS_DETECT_SIGNAL	(1&lt;&lt;1) 
#define RADIO_CAPS_SET_MONO		(1&lt;&lt;2) 
#define RADIO_CAPS_HW_SEARCH		(1&lt;&lt;3) 
#define RADIO_CAPS_HW_AFC		(1&lt;&lt;4) 
#define RADIO_CAPS_REFERENCE_FREQ	(1&lt;&lt;5) 
#define RADIO_CAPS_LOCK_SENSITIVITY	(1&lt;&lt;6) 
#define RADIO_CARD_TYPE			(0xFF&lt;&lt;16) 
	u_int32_t	info; 
#define RADIO_INFO_STEREO		(1&lt;&lt;0) 
#define RADIO_INFO_SIGNAL		(1&lt;&lt;1) 
	u_int32_t	tuner_mode; 
#define RADIO_TUNER_MODE_RADIO		(1&lt;&lt;0) 
#define RADIO_TUNER_MODE_TV		(1&lt;&lt;1) 
	u_int32_t	chan; 
	u_int32_t	chnlset; 
};</pre>
<div class="spacer">
</div>
The <b class="var">mute</b> field is a boolean.<div class="spacer">
</div>
The <b class="var">volume</b> field holds the card volume information and can be at most 255.<div class="spacer">
</div>
The <b class="var">stereo</b> field is a boolean.<div class="spacer">
</div>
The <b class="var">rfreq</b> holds information about the card reference frequency (not all cards support this feature).<div class="spacer">
</div>
The <b class="var">lock</b> field holds information about the card locking field strength during an automatic search for cards that support this feature.<div class="spacer">
</div>
The <b class="var">freq</b> field is the frequency in kHz the card is tuned to.<div class="spacer">
</div>
The <b class="var">tuner_mode</b> field is the current tuning mode of the tuner. Valid modes are:<div class="spacer">
</div>
<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
<span class="define">RADIO_TUNER_MODE_RADIO</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
The tuner operates in FM radio mode.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<span class="define">RADIO_TUNER_MODE_TV</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
The tuner operates in TV mode.</dd>
</dl>
<div class="spacer">
</div>
The <b class="var">caps</b> field is read-only and describes the card capabilities. The capabilities can have the following values:<div class="spacer">
</div>
<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
<span class="define">RADIO_CAPS_DETECT_STEREO</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
The device can determine if it is tuned to a stereo signal.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<span class="define">RADIO_CAPS_DETECT_SIGNAL</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
The device can determine if it is tuned or not.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<span class="define">RADIO_CAPS_SET_MONO</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
The device is capable of forcibly setting its output to mono.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<span class="define">RADIO_CAPS_HW_SEARCH</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
The device can do hardware search.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<span class="define">RADIO_CAPS_HW_AFC</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
The device has an internal hardware automatic frequency control.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<span class="define">RADIO_CAPS_REFERENCE_FREQ</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
The device allows changing the reference frequency of a received signal.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<span class="define">RADIO_CAPS_LOCK_SENSITIVITY</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
The device allows changing the station lock sensitivity used during search operation.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<span class="define">RADIO_CARD_TYPE</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Some cards have several different incarnations. This allows the variant of the card to be determined. Currently not used.</dd>
</dl>
<div class="spacer">
</div>
The <b class="var">info</b> field is read-only and describes the current state of the card - tuned/not tuned, stereo signal/mono signal.<div class="spacer">
</div>
<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
<span class="define">RADIO_INFO_STEREO</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Informs whether the device receives a stereo or mono signal.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<span class="define">RADIO_INFO_SIGNAL</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Informs whether the device receives a valid signal or noise.</dd>
</dl>
<div class="spacer">
</div>
The <b class="var">chan</b> holds the TV channel the card is tuned to.<div class="spacer">
</div>
The <b class="var">chnlset</b> specifies the TV channel set currently being used. The tuner uses the current channel set to derive the tuning frequency from the channel number. Western Europe is the default channel set. The following is a list of valid channel sets:<div class="spacer">
</div>
<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
1</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
U.S.A. Broadcast</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
2</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
U.S.A. Cable IRC</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
3</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
U.S.A. Cable HRC</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
4</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Western Europe</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
5</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Japan Broadcast</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
6</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Japan Cable</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
7</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Former U.S.S.R. and C.I.S. Countries</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
8</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Australia</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
9</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
France</dd>
</dl>
</dd>
</dl>
<div class="spacer">
</div>
Either <b class="var">freq</b> or <b class="var">chan</b> can be used to tune to FM radio stations or TV channels, respectively. Some devices may not support both functionalities.</div>
<div class="section">
<h1 id="x4348495053455453">CHIPSETS</h1> LM700x is a frequency synthesizer IC. The LM700x is programmed through a 24-bit write-only shift register. The first 14 bits are frequency data. The next 2 bits are LSI test bits, and should always be zero. The next 4 bits are band data and time base data. They can be programmed to force a given reference frequency, or they can be set to zero and the next 3 bits can be used to set the reference frequency. The final bit selects the divider selection, which is 1 for FM and 0 for AM. The LM700x chips are used in <a class="link-man" href="../html4/az.html">az(4)</a> and <a class="link-man" href="../html4/rt.html">rt(4)</a> cards.<div class="spacer">
</div>
The TEA5757; TEA5759 is a 44-pin integrated AM/FM stereo radio circuit. The radio part is based on the TEA5712. The TEA5757 is used in FM-standards in which the local oscillator frequency is above the radio frequency (e.g. European and American standards). The TEA5759 is the version in which the oscillator frequency is below the radio frequency (e.g. Japanese standards). To conform with the Japanese standards, it is necessary to set the flags' least significant bit to 1. The TEA5757; TEA5759 has a 25-bit read-write shift register. The TEA5757 chips are used in <a class="link-man" href="../html4/gtp.html">gtp(4)</a>, <a class="link-man" href="../html4/rtii.html">rtii(4)</a>, <a class="link-man" href="../html4/sf2r.html">sf2r(4)</a> and <a class="link-man" href="../html4/fms.html">fms(4)</a> cards.<div class="spacer">
</div>
The TC9216P, TC9217P and TC9217F are high speed PLL-LSI with built-in 2 modulus prescaler. Each function is controlled through 3 serial bus lines (DATA, CLOCK and PERIOD) by the data setting to a pair of 24-bit registers, total of 48 bits. Address 8 bits and data 24 bits, total of 32 bits, are transferred in serial at the same time. The TC921x chips are used in <a class="link-man" href="../html4/sfr.html">sfr(4)</a> cards.</div>
<div class="section">
<h1 id="x46494c4553">FILES</h1><dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/dev/radio</i></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
</dd>
</dl>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../html1/radioctl.html">radioctl(1)</a>, <a class="link-man" href="../html2/ioctl.html">ioctl(2)</a>, <a class="link-man" href="../html4/az.html">az(4)</a>, <a class="link-man" href="../html4/bktr.html">bktr(4)</a>, <a class="link-man" href="../html4/fms.html">fms(4)</a>, <a class="link-man" href="../html4/gtp.html">gtp(4)</a>, <a class="link-man" href="../html4/intro.html">intro(4)</a>, <a class="link-man" href="../html4/rt.html">rt(4)</a>, <a class="link-man" href="../html4/rtii.html">rtii(4)</a>, <a class="link-man" href="../html4/sf2r.html">sf2r(4)</a>, <a class="link-man" href="../html4/sfr.html">sfr(4)</a>, <a class="link-man" href="../html4/udsbr.html">udsbr(4)</a>, <a class="link-man" href="../html9/radio.html">radio(9)</a></div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> The <b class="name">radio</b> device driver appeared in <span class="unix">OpenBSD&#160;3.0</span>.</div>
<div class="section">
<h1 id="x415554484f5253">AUTHORS</h1> The <b class="name">radio</b> driver was written by <span class="author">Vladimir Popov</span> &lt;<a class="link-mail" href="mailto:jumbo@narod.ru">jumbo@narod.ru</a>&gt; and <span class="author">Maxim Tsyplakov</span> &lt;<a class="link-mail" href="mailto:tm@oganer.net">tm@oganer.net</a>&gt;. The man page was written by <span class="author">Vladimir Popov</span> &lt;<a class="link-mail" href="mailto:jumbo@narod.ru">jumbo@narod.ru</a>&gt;.</div>
</div>
</body>
</html>

