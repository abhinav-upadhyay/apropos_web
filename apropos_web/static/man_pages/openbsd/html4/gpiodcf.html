<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/posix/style.css" type="text/css" media="all"/>
<title>
GPIODCF(4)</title>
</head>
<body>
<div class="mandoc">
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">gpiodcf</b> &#8212; <span class="desc">DCF77 timedelta sensor through GPIO pin</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="config">gpiodcf* at gpio? offset 0 mask 0x1</b><br/>
<b class="config">gpiodcf* at gpio?</b></div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> The <b class="name">gpiodcf</b> driver decodes the DCF77 time signal code using one GPIO pin. The pin is used as a data signal. The GPIO pin must be able to read an input.<div class="spacer">
</div>
The pin number can be specified in the kernel configuration with the <i class="arg">offset</i> locator. The <i class="arg">mask</i> locator should always be 0x1 in this case. The <i class="arg">offset</i> and <i class="arg">mask</i> can also be specified when <b class="name">gpiodcf</b> is attached at runtime using the <span class="define">GPIOATTACH</span> <a class="link-man" href="../html2/ioctl.html">ioctl(2)</a> on the <a class="link-man" href="../html4/gpio.html">gpio(4)</a> device.<div class="spacer">
</div>
<b class="name">gpiodcf</b> implements a timedelta sensor and the delta (in nanoseconds) between the received time information and the local time can be accessed through the <a class="link-man" href="../html8/sysctl.html">sysctl(8)</a> interface. The clock type is indicated in the sensor description:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 6.00ex;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
DCF77</dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
German DCF77 time signal station (77.5 kHz longwave transmitter located in Mainflingen near Frankfurt).</dd>
</dl>
<div class="spacer">
</div>
The quality of the timedelta is reported as the sensor status:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 6.00ex;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
UNKNOWN</dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
No valid time information has been received yet.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
OK</dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
The time information is valid and the timedelta is safe to use for applications like <a class="link-man" href="../html8/ntpd.html">ntpd(8)</a>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
WARN</dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
The time information is still valid, but no new time information has been decoded for at least 5 minutes due to a reception or parity error. The timedelta should be used with care.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
CRITICAL</dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
No valid time information has been received for more than 15 minutes since the sensor state degraded from OK to WARN. This is an indication that hardware should be checked to see if it is still functional. The timedelta will eventually degrade to a lie as all computer internal clocks have a drift.</dd>
</dl>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../html4/gpio.html">gpio(4)</a>, <a class="link-man" href="../html4/intro.html">intro(4)</a>, <a class="link-man" href="../html8/ntpd.html">ntpd(8)</a>, <a class="link-man" href="../html8/sysctl.html">sysctl(8)</a></div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> The <b class="name">gpiodcf</b> driver first appeared in <span class="unix">OpenBSD&#160;4.5</span>.</div>
<div class="section">
<h1 id="x415554484f5253">AUTHORS</h1> The <b class="name">gpiodcf</b> driver was written by <span class="author">Marc Balmer</span> &lt;<a class="link-mail" href="mailto:mbalmer@openbsd.org">mbalmer@openbsd.org</a>&gt;.</div>
</div>
</body>
</html>

