<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/posix/style.css" type="text/css" media="all"/>
<title>
INET6(4)</title>
</head>
<body>
<div class="mandoc">
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">inet6</b> &#8212; <span class="desc">Internet protocol version 6 family</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="includes">#include &lt;<a class="link-includes">sys/types.h</a>&gt;</b><br/>
<b class="includes">#include &lt;<a class="link-includes">netinet/in.h</a>&gt;</b></div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> The <b class="name">inet6</b> family is an updated version of the <a class="link-man" href="../html4/inet.html">inet(4)</a> family. While <a class="link-man" href="../html4/inet.html">inet(4)</a> implements Internet Protocol version 4, <b class="name">inet6</b> implements Internet Protocol version 6.<div class="spacer">
</div>
The <b class="name">inet6</b> family is comprised of the Internet Protocol version 6 (IPv6) network protocol, Internet Control Message Protocol version 6 (ICMPv6), Transmission Control Protocol (TCP), and User Datagram Protocol (UDP). TCP is used to support the <span class="define">SOCK_STREAM</span> abstraction while UDP is used to support the <span class="define">SOCK_DGRAM</span> abstraction. Note that TCP and UDP are common to <a class="link-man" href="../html4/inet.html">inet(4)</a> and <b class="name">inet6</b>. A raw interface to IPv6 is available by creating an Internet socket of type <span class="define">SOCK_RAW</span>. The ICMPv6 message protocol is accessible from a raw socket.<div class="spacer">
</div>
For security reasons, <span class="unix">OpenBSD</span> does not route IPv4 traffic to an <span class="define">AF_INET6</span> socket, and does not support IPv4 mapped addresses, where IPv4 traffic is seen as if it comes from an IPv6 address like <code class="lit">::ffff:10.1.1.1</code>. Where both IPv4 and IPv6 traffic need to be accepted, listen on two sockets.</div>
<div class="section">
<h1 id="x41444452455353494e47">ADDRESSING</h1> IPv6 addresses are 16 byte quantities, stored in network standard byteorder. The include file <b class="includes">&lt;<a class="link-includes">netinet/in.h</a>&gt;</b> defines this address as a discriminated union.<div class="spacer">
</div>
Sockets bound to the <b class="name">inet6</b> family utilize the following addressing structure:<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
struct sockaddr_in6 { 
	u_int8_t	sin6_len; 
	sa_family_t	sin6_family; 
	in_port_t	sin6_port; 
	u_int32_t	sin6_flowinfo; 
	struct in6_addr	sin6_addr; 
	u_int32_t	sin6_scope_id; 
};</pre>
<div class="spacer">
</div>
Sockets may be created with the local address &#8220;<span class="define">::</span>&#8221; (which is equal to IPv6 address <span class="define">0:0:0:0:0:0:0:0</span>) to effect &#8220;wildcard&#8221; matching on incoming messages.<div class="spacer">
</div>
The IPv6 specification defines scoped address, like link-local or site-local address. A scoped address is ambiguous to the kernel, if it is specified without a scope identifier. To manipulate scoped addresses properly from userland, programs must use the advanced API defined in RFC 3542. A compact description of the advanced API is available in <a class="link-man" href="../html4/ip6.html">ip6(4)</a>. If scoped addresses are specified without explicit scope, the kernel may raise an error. Note that scoped addresses are not for daily use at this moment, both from a specification and an implementation point of view.<div class="spacer">
</div>
KAME implementation supports extended numeric IPv6 address notation for link-local addresses, like &#8220;<code class="lit">fe80::1%de0</code>&#8221; to specify &#8220;<code class="lit">fe80::1</code> on <code class="lit">de0</code> interface&#8221;. The notation is supported by <a class="link-man" href="../html3/getaddrinfo.html">getaddrinfo(3)</a> and <a class="link-man" href="../html3/getnameinfo.html">getnameinfo(3)</a>. Some normal userland programs, such as <a class="link-man" href="../html1/telnet.html">telnet(1)</a> or <a class="link-man" href="../html1/ftp.html">ftp(1)</a>, are able to use the notation. With special programs like <a class="link-man" href="../html8/ping6.html">ping6(8)</a>, an outgoing interface can be specified with an extra command line option to disambiguate scoped addresses.<div class="spacer">
</div>
Scoped addresses are handled specially in the kernel. In the kernel structures like routing tables or interface structure, scoped addresses will have their interface index embedded into the address. Therefore, the address on some of the kernel structure is not the same as that on the wire. The embedded index will become visible on <span class="define">PF_ROUTE</span> socket, kernel memory accesses via <a class="link-man" href="../html3/kvm.html">kvm(3)</a> and some other occasions. HOWEVER, users should never use the embedded form. For details please consult <a class="link-ext" href="http://www.kame.net/dev/cvsweb2.cgi/kame/IMPLEMENTATION">http://www.kame.net/dev/cvsweb2.cgi/kame/IMPLEMENTATION</a>. Note that the above URL describes the situation with the latest KAME tree, not the <span class="unix">OpenBSD</span> tree.</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../html2/ioctl.html">ioctl(2)</a>, <a class="link-man" href="../html2/socket.html">socket(2)</a>, <a class="link-man" href="../html3/sysctl.html">sysctl(3)</a>, <a class="link-man" href="../html4/icmp6.html">icmp6(4)</a>, <a class="link-man" href="../html4/intro.html">intro(4)</a>, <a class="link-man" href="../html4/ip6.html">ip6(4)</a>, <a class="link-man" href="../html4/tcp.html">tcp(4)</a>, <a class="link-man" href="../html4/udp.html">udp(4)</a></div>
<div class="section">
<h1 id="x5354414e4441524453">STANDARDS</h1> <span class="ref"><span class="ref-auth">Tatsuya Jinmei</span> and <span class="ref-auth">Atsushi Onoe</span>, <span class="ref-title">An Extension of Format for IPv6 Scoped Addresses</span>, <span class="ref-rep">internet draft</span>, <span class="ref-num">draft-ietf-ipngwg-scopedaddr-format-02.txt</span>, <span class="ref-date">June 2000</span>, <span class="ref-opt">work in progress material</span>.</span><div class="spacer">
</div>
<span class="ref"><span class="ref-auth">R. Gilligan</span>, <span class="ref-auth">S. Thomson</span>, <span class="ref-auth">J. Bound</span>, <span class="ref-auth">J. McCann</span>, and <span class="ref-auth">W. Stevens</span>, <span class="ref-title">Basic Socket Interface Extensions for Ipv6</span>, <span class="ref-rep">RFC 3493</span>, <span class="ref-date">February 2003</span>.</span><div class="spacer">
</div>
<span class="ref"><span class="ref-auth">W. Stevens</span>, <span class="ref-auth">M. Thomas</span>, <span class="ref-auth">E. Nordmark</span>, and <span class="ref-auth">T. Jinmei</span>, <span class="ref-title">Advanced Sockets Application Programming Interface (API) for IPv6</span>, <span class="ref-rep">RFC 3542</span>, <span class="ref-date">May 2003</span>.</span></div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> The implementation described herein appeared in WIDE/KAME project.</div>
<div class="section">
<h1 id="x42554753">BUGS</h1> The IPv6 support is subject to change as the Internet protocols develop. Users should not depend on details of the current implementation, but rather the services exported.<div class="spacer">
</div>
&#8220;Version independent&#8221; code should be implemented as much as possible in order to support both <a class="link-man" href="../html4/inet.html">inet(4)</a> and <b class="name">inet6</b>.</div>
</div>
</body>
</html>

