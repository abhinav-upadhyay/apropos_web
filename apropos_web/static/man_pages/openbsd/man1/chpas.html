<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/posix/style.css" type="text/css" media="all"/>
<title>
CHPASS(1)</title>
</head>
<body>
<div class="mandoc">
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">chpass</b>, <b class="name">chfn</b>, <b class="name">chsh</b> &#8212; <span class="desc">add or change user database information</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1><table class="synopsis">
<col style="width: 6.00ex;"/>
<col/>
<tbody>
<tr>
<td>
chpass</td>
<td>
[<span class="opt"><b class="flag">-s</b> <i class="arg">newshell</i></span>] [<span class="opt"><i class="arg">user</i></span>]</td>
</tr>
</tbody>
</table>
<br/>
<table class="synopsis">
<col style="width: 6.00ex;"/>
<col/>
<tbody>
<tr>
<td>
chpass</td>
<td>
<b class="flag">-a</b> <i class="arg">list</i></td>
</tr>
</tbody>
</table>
</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> <b class="name">chpass</b> allows editing of the user database information associated with <i class="arg">user</i>, or, by default, the current user. The information is formatted and supplied to an editor for changes.<div class="spacer">
</div>
Only the information that the user is allowed to change is displayed.<div class="spacer">
</div>
<b class="name">chfn</b> and <b class="name">chsh</b> are synonyms for <b class="name">chpass</b>.<div class="spacer">
</div>
The options are as follows:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-a</b> <i class="arg">list</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
The superuser is allowed to directly supply a user database entry, in the format specified by <a class="link-man" href="../html5/passwd.html">passwd(5)</a>, as an argument. This argument must be a colon (&#8216;:&#8217;) separated list of all the user database fields, although they may be empty.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-s</b> <i class="arg">newshell</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Attempts to change the user's shell to <i class="arg">newshell</i>.</dd>
</dl>
<div class="spacer">
</div>
Possible display items are as follows:<div class="spacer">
</div>
<dl style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 6.00ex;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
Login:</dt>
<dd class="list-tag" style="margin-left: 16.00ex;">
user's login name</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
Password:</dt>
<dd class="list-tag" style="margin-left: 16.00ex;">
user's encrypted password</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
Uid:</dt>
<dd class="list-tag" style="margin-left: 16.00ex;">
user's login</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
Gid:</dt>
<dd class="list-tag" style="margin-left: 16.00ex;">
user's login group</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
Change:</dt>
<dd class="list-tag" style="margin-left: 16.00ex;">
password change time</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
Expire:</dt>
<dd class="list-tag" style="margin-left: 16.00ex;">
account expiration time</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
Class:</dt>
<dd class="list-tag" style="margin-left: 16.00ex;">
user's general classification</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
Home Directory:</dt>
<dd class="list-tag" style="margin-left: 16.00ex;">
user's home directory</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
Shell:</dt>
<dd class="list-tag" style="margin-left: 16.00ex;">
user's login shell</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
Full Name:</dt>
<dd class="list-tag" style="margin-left: 16.00ex;">
user's real name</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
Office Location:</dt>
<dd class="list-tag" style="margin-left: 16.00ex;">
user's office location</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
Office Phone:</dt>
<dd class="list-tag" style="margin-left: 16.00ex;">
user's office phone</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
Home Phone:</dt>
<dd class="list-tag" style="margin-left: 16.00ex;">
user's home phone</dd>
</dl>
<div class="spacer">
</div>
The <i class="arg">login</i> field is the user name used to access the computer account.<div class="spacer">
</div>
The <i class="arg">password</i> field contains the encrypted form of the user's password.<div class="spacer">
</div>
The <i class="arg">uid</i> field is the number associated with the <i class="arg">login</i> field. Both of these fields should be unique across the system (and often across a group of systems) as they control file access.<div class="spacer">
</div>
While it is possible to have multiple entries with identical login names and/or identical user IDs, it is usually a mistake to do so. Routines that manipulate these files will often return only one of the multiple entries, and that one by random selection.<div class="spacer">
</div>
The <i class="arg">group</i> field is the group that the user will be placed in at login. Since <span class="unix">BSD</span> supports multiple groups (see <a class="link-man" href="../html1/groups.html">groups(1)</a>), this field currently has little special meaning. This field may be filled in with either a number or a group name (see <a class="link-man" href="../html5/group.html">group(5)</a>).<div class="spacer">
</div>
The <i class="arg">change</i> field is the date by which the password must be changed.<div class="spacer">
</div>
The <i class="arg">expire</i> field is the date on which the account expires.<div class="spacer">
</div>
Both the <i class="arg">change</i> and <i class="arg">expire</i> fields should be entered in the form <i class="arg">month day year</i> where <i class="arg">month</i> is the month name (the first three characters are sufficient), <i class="arg">day</i> is the day of the month, and <i class="arg">year</i> is the year.<div class="spacer">
</div>
The <i class="arg">class</i> field specifies a key in the <a class="link-man" href="../html5/login.conf.html">login.conf(5)</a> database of login class attributes. If empty, the &#8220;default&#8221; record is used.<div class="spacer">
</div>
The user's <i class="arg">home directory</i> is the full <span class="unix">UNIX</span> path name where the user will be placed at login.<div class="spacer">
</div>
The <i class="arg">shell</i> field is the command interpreter the user prefers. If the <i class="arg">shell</i> field is empty, the Bourne shell (<i class="file">/bin/sh</i>) is assumed. When altering a login shell, and not the superuser, the user may not change from a non-standard shell or to a non-standard shell. Non-standard is defined as a shell not found in <i class="file">/etc/shells</i>.<div class="spacer">
</div>
The last four fields are for storing the user's <i class="arg">full name</i>, <i class="arg">office location</i>, and <i class="arg">work</i> and <i class="arg">home telephone</i> numbers.<div class="spacer">
</div>
Once the information has been verified, <b class="name">chpass</b> uses <a class="link-man" href="../html8/pwd_mkdb.html">pwd_mkdb(8)</a> to update the user database.</div>
<div class="section">
<h1 id="x454e5649524f4e4d454e54">ENVIRONMENT</h1> The <a class="link-man" href="../html1/vi.html">vi(1)</a> editor will be used unless the environment variable <span class="env">EDITOR</span> is set to an alternate editor. When the editor terminates, the information is re-read and used to update the user database itself. Only the user, or the superuser, may edit the information associated with the user.</div>
<div class="section">
<h1 id="x46494c4553">FILES</h1><dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/etc/master.passwd</i></dt>
<dd class="list-tag" style="margin-left: 22.00ex;">
user database</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/etc/passwd</i></dt>
<dd class="list-tag" style="margin-left: 22.00ex;">
user database, with confidential information removed</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/etc/ptmp</i></dt>
<dd class="list-tag" style="margin-left: 22.00ex;">
lock file for the passwd database</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/etc/shells</i></dt>
<dd class="list-tag" style="margin-left: 22.00ex;">
list of approved shells</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/var/tmp/pw.XXXXXXXXXX</i></dt>
<dd class="list-tag" style="margin-left: 22.00ex;">
temporary copy of the user passwd information</dd>
</dl>
</div>
<div class="section">
<h1 id="x444941474e4f5354494353">DIAGNOSTICS</h1><dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-diag">
<dt class="list-diag" style="margin-top: 1.00em;">
<b class="diag">Attempting to lock password file, please wait or press ^C to abort</b></dt>
<dd class="list-diag">
<div class="spacer">
</div>
The password file is currently locked by another process; <b class="name">chpass</b> will keep trying to lock the password file until it succeeds or the user hits the interrupt character (control-C by default). If <b class="name">chpass</b> is interrupted while trying to gain the lock any changes made will be lost.<div class="spacer">
</div>
If the process holding the lock was prematurely terminated the lock file may be stale and <b class="name">chpass</b> will wait forever trying to lock the password file. To determine whether a live process is actually holding the lock, the admin may run the following:<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
$ fstat /etc/ptmp</pre>
<div class="spacer">
</div>
If no process is listed, it is safe to remove the <i class="file">/etc/ptmp</i> file to clear the error.</dd>
</dl>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../html1/finger.html">finger(1)</a>, <a class="link-man" href="../html1/login.html">login(1)</a>, <a class="link-man" href="../html1/passwd.html">passwd(1)</a>, <a class="link-man" href="../html3/getusershell.html">getusershell(3)</a>, <a class="link-man" href="../html5/login.conf.html">login.conf(5)</a>, <a class="link-man" href="../html5/passwd.html">passwd(5)</a>, <a class="link-man" href="../html8/pwd_mkdb.html">pwd_mkdb(8)</a>, <a class="link-man" href="../html8/vipw.html">vipw(8)</a><div class="spacer">
</div>
<span class="ref"><span class="ref-auth">Robert Morris</span> and <span class="ref-auth">Ken Thompson</span>, <span class="ref-title">Password security: a case history</span>, <i class="ref-jrnl">Communications of the ACM</i>, <span class="ref-num">Issue 11</span>, <span class="ref-vol">Volume 22</span>, <span class="ref-page">594&#8211;597</span>, <span class="ref-date">Nov. 1979</span>.</span></div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> The <b class="name">chpass</b> command appeared in <span class="unix">4.3BSD-Reno</span>.</div>
</div>
</body>
</html>

