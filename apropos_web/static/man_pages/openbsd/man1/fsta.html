<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/posix/style.css" type="text/css" media="all"/>
<title>
FSTAT(1)</title>
</head>
<body>
<div class="mandoc">
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">fstat</b> &#8212; <span class="desc">display status of open files</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1><table class="synopsis">
<col style="width: 5.00ex;"/>
<col/>
<tbody>
<tr>
<td>
fstat</td>
<td>
[<span class="opt"><b class="flag">-fnosv</b></span>] [<span class="opt"><b class="flag">-M</b> <i class="arg">core</i></span>] [<span class="opt"><b class="flag">-N</b> <i class="arg">system</i></span>] [<span class="opt"><b class="flag">-p</b> <i class="arg">pid</i></span>] [<span class="opt"><b class="flag">-u</b> <i class="arg">user</i></span>] [<span class="opt"><i class="arg">file ...</i></span>]</td>
</tr>
</tbody>
</table>
</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> <b class="name">fstat</b> identifies open files. A file is considered open by a process if it was explicitly opened, is the working directory, root directory, active executable text, or kernel trace file for that process. If no options are specified, <b class="name">fstat</b> reports on all open files in the system.<div class="spacer">
</div>
The options are as follows:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-f</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Restrict examination to files open in the same file systems as the named file arguments, or to the file system containing the current directory if there are no additional filename arguments. For example, to find all files open in the file system where the directory <i class="file">/usr/src</i> resides, type<div class="spacer">
</div>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit"># fstat -f /usr/src</code></div>
</blockquote>
</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-M</b> <i class="arg">core</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Extract values associated with the name list from the specified core instead of the running kernel.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-N</b> <i class="arg">system</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Extract the name list from the specified system instead of the running kernel.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-n</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Numerical format. Print the device number (maj,min) of the file system the file resides in rather than the mount point name. For special files, print the device number that the special device refers to rather than the filename in <i class="file">/dev</i>. Also, print the mode of the file in octal instead of symbolic form.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-o</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Output file offset. Follow the size field with the descriptor's offset. Useful for checking progress as a process works through a large file. This information is only visible to the user or superuser.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-p</b> <i class="arg">pid</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Report all files open by the specified process.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-s</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Report per file io statistics in two additional columns &#8216;XFERS&#8217; and &#8216;KBYTES&#8217;. This information is only visible to the user or superuser.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-u</b> <i class="arg">user</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Report all files open by the specified user.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-v</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Verbose mode. Print error messages upon failures to locate particular system data structures rather than silently ignoring them. Most of these data structures are dynamically created or deleted and it is possible for them to disappear while <b class="name">fstat</b> is running. This is normal and unavoidable since the rest of the system is running while <b class="name">fstat</b> itself is running.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="arg">file ...</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Restrict reports to the specified files.</dd>
</dl>
<div class="spacer">
</div>
The following fields are printed:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<code class="lit">USER</code></dt>
<dd class="list-tag" style="margin-left: 5.00ex;">
The username of the owner of the process (effective UID).</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<code class="lit">CMD</code></dt>
<dd class="list-tag" style="margin-left: 5.00ex;">
The command name of the process.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<code class="lit">PID</code></dt>
<dd class="list-tag" style="margin-left: 5.00ex;">
The process ID.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<code class="lit">FD</code></dt>
<dd class="list-tag" style="margin-left: 5.00ex;">
The file number in the per-process open file table or one of the following special names:<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
text	- executable text inode 
wd	- current working directory 
root	- root inode 
tr	- kernel trace file</pre>
<div class="spacer">
</div>
If the file number is followed by an asterisk (&#8216;<code class="lit">*</code>&#8217;), the file is not an inode, but rather a socket, or there is an error. In this case the remainder of the line doesn't correspond to the remaining headers -- the format of the line is described later under <i class="link-sec"><a class="link-sec" href="#x534f434b455453">SOCKETS</a></i>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<code class="lit">MOUNT</code></dt>
<dd class="list-tag" style="margin-left: 5.00ex;">
If the <b class="flag">-n</b> flag wasn't specified, this header is present and is the pathname that the file system the file resides in is mounted on.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<code class="lit">DEV</code></dt>
<dd class="list-tag" style="margin-left: 5.00ex;">
If the <b class="flag">-n</b> flag is specified, this header is present and is the major/minor number of the device that this file resides in.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<code class="lit">INUM</code></dt>
<dd class="list-tag" style="margin-left: 5.00ex;">
The inode number of the file.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<code class="lit">MODE</code></dt>
<dd class="list-tag" style="margin-left: 5.00ex;">
The mode of the file. If the <b class="flag">-n</b> flag isn't specified, the mode is printed using a symbolic format (see <a class="link-man" href="../html3/strmode.html">strmode(3)</a>); otherwise, the mode is printed as an octal number.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<code class="lit">R/W</code></dt>
<dd class="list-tag" style="margin-left: 5.00ex;">
This column describes the access mode that the file allows. The letter &#8216;r&#8217; indicates open for reading; the letter &#8216;w&#8217; indicates open for writing. This field is useful when trying to find the processes that are preventing a file system from being downgraded to read-only.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<code class="lit">SZ</code> | <code class="lit">DV</code></dt>
<dd class="list-tag" style="margin-left: 5.00ex;">
If the file is not a character or block special file, prints the size of the file in bytes. Otherwise, if the <b class="flag">-n</b> flag is not specified, prints the name of the special file as located in <i class="file">/dev</i>. If that cannot be located, or the <b class="flag">-n</b> flag is specified, prints the major/minor device number that the special device refers to.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<code class="lit">NAME</code></dt>
<dd class="list-tag" style="margin-left: 5.00ex;">
If filename arguments are specified and the <b class="flag">-f</b> flag is not, then this field is present and is the name associated with the given file. Normally the name cannot be determined since there is no mapping from an open file back to the directory entry that was used to open that file. Also, since different directory entries may reference the same file (via <a class="link-man" href="../html1/ln.html">ln(1)</a>), the name printed may not be the actual name that the process originally used to open that file.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<code class="lit">XFERS</code></dt>
<dd class="list-tag" style="margin-left: 5.00ex;">
Displays number of total data transfers performed on the file.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<code class="lit">KBYTES</code></dt>
<dd class="list-tag" style="margin-left: 5.00ex;">
Displays total number of Kbytes written and read to the file.</dd>
</dl>
</div>
<div class="section">
<h1 id="x534f434b455453">SOCKETS</h1> The formatting of open sockets depends on the protocol domain. In all cases the first field is the domain name and the second field is the socket type (stream, dgram, etc). The remaining fields are protocol dependent. For TCP, it is the address of the tcpcb, and for UDP, the inpcb (socket pcb). For <span class="unix">UNIX</span>-domain sockets, it's the address of the socket pcb and the address of the connected pcb (if connected). Otherwise the protocol number and address of the socket itself are printed. The attempt is to make enough information available to permit further analysis without duplicating <a class="link-man" href="../html1/netstat.html">netstat(1)</a>.<div class="spacer">
</div>
For example, the addresses mentioned above are the addresses which the <b class="cmd">netstat -A</b> command would print for TCP, UDP, and <span class="unix">UNIX</span>-domain. A unidirectional <span class="unix">UNIX</span>-domain socket indicates the direction of flow with an arrow (&#8220;&lt;-&#8221; or &#8220;-&gt;&#8221;), and a full duplex socket shows a double arrow (&#8220;&lt;-&gt;&#8221;).<div class="spacer">
</div>
For <span class="define">AF_INET</span> and <span class="define">AF_INET6</span> sockets, <b class="name">fstat</b> also attempts to print the internet address and port for the local end of a connection. If the socket is connected, it also prints the remote internet address and port. A &#8216;<code class="lit">*</code>&#8217; is used to indicate an <span class="define">INADDR_ANY</span> binding. In this case, the use of the arrow (&#8220;&lt;--&#8221; or &#8220;--&gt;&#8221;) indicates the direction the socket connection was created.<div class="spacer">
</div>
If the socket has been spliced to or from another socket (see <a class="link-man" href="../html2/setsockopt.html">setsockopt(2)</a> and <span class="define">SO_SPLICE</span>) then <b class="name">fstat</b> prints a thick arrow (&#8220;&lt;==&gt;&#8221;, &#8220;&lt;==&#8221;, or &#8220;==&gt;&#8221;), followed by the address and endpoint information of the other socket in the splice, if available.</div>
<div class="section">
<h1 id="x5049504553">PIPES</h1> Every pipe is printed as an address which is the same for both sides of the pipe and a state that is built of the letters &#8220;RWE&#8221;. W - The pipe blocks waiting for the reader to read data. R - The pipe blocks waiting for the writer to write data. E - The pipe is in EOF state.</div>
<div class="section">
<h1 id="x4b5155455545">KQUEUE</h1> Each <a class="link-man" href="../html2/kqueue.html">kqueue(2)</a> is printed with some information as to queue length. Since these things are normally serviced quickly, it is likely that nothing of real importance can be discerned.</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../html1/netstat.html">netstat(1)</a>, <a class="link-man" href="../html1/nfsstat.html">nfsstat(1)</a>, <a class="link-man" href="../html1/ps.html">ps(1)</a>, <a class="link-man" href="../html1/systat.html">systat(1)</a>, <a class="link-man" href="../html1/top.html">top(1)</a>, <a class="link-man" href="../html8/iostat.html">iostat(8)</a>, <a class="link-man" href="../html8/pstat.html">pstat(8)</a>, <a class="link-man" href="../html8/tcpdrop.html">tcpdrop(8)</a>, <a class="link-man" href="../html8/vmstat.html">vmstat(8)</a></div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> The <b class="name">fstat</b> command appeared in <span class="unix">4.3BSD-Tahoe</span>.</div>
<div class="section">
<h1 id="x43415645415453">CAVEATS</h1> Sockets in use by the kernel, such as those opened by <a class="link-man" href="../html8/nfsd.html">nfsd(8)</a>, will not be seen by <b class="name">fstat</b>, even though they appear in <a class="link-man" href="../html1/netstat.html">netstat(1)</a>.</div>
<div class="section">
<h1 id="x42554753">BUGS</h1> Since <b class="name">fstat</b> takes a snapshot of the system, it is only correct for a very short period of time.<div class="spacer">
</div>
Moreover, because DNS resolution and YP lookups cause many file descriptor changes, <b class="name">fstat</b> does not attempt to translate the internet address and port numbers into symbolic names.</div>
</div>
</body>
</html>

