<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/posix/style.css" type="text/css" media="all"/>
<title>
MAKE(1)</title>
</head>
<body>
<div class="mandoc">
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">make</b> &#8212; <span class="desc">maintain program dependencies</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1><table class="synopsis">
<col style="width: 4.00ex;"/>
<col/>
<tbody>
<tr>
<td>
make</td>
<td>
[<span class="opt"><b class="flag">-BeiknpqrSst</b></span>] [<span class="opt"><b class="flag">-C</b> <i class="arg">directory</i></span>] [<span class="opt"><b class="flag">-D</b> <i class="arg">variable</i></span>] [<span class="opt"><b class="flag">-d</b> <i class="arg">flags</i></span>] [<span class="opt"><b class="flag">-f</b> <i class="arg">mk</i></span>] [<span class="opt"><b class="flag">-I</b> <i class="arg">directory</i></span>] [<span class="opt"><b class="flag">-j</b> <i class="arg">max_processes</i></span>] [<span class="opt"><b class="flag">-m</b> <i class="arg">directory</i></span>] [<span class="opt"><b class="flag">-V</b> <i class="arg">variable</i></span>] [<span class="opt"><i class="arg">NAME</i>=<i class="arg">value</i></span>] [<span class="opt"><i class="arg">target&#160;...</i></span>]</td>
</tr>
</tbody>
</table>
</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> <b class="name">make</b> is a program designed to simplify the maintenance of other programs. Its input is a <span class="emph">makefile</span>: a list of specifications (target rules) describing build relationships between programs and other files. By default, the file <i class="file">makefile</i> is used; if no such file is found, it tries <i class="file">Makefile</i>. If neither of these exist, <b class="name">make</b> can still rely on a set of built-in system rules.<div class="spacer">
</div>
If the file &#8216;<i class="file">.depend</i>&#8217; exists, it will also be read after the main <i class="arg">makefile</i> (see <a class="link-man" href="../html1/mkdep.html">mkdep(1)</a>).<div class="spacer">
</div>
The handling of &#8216;<i class="file">.depend</i>&#8217; is a <span class="unix">BSD</span> extension.<div class="spacer">
</div>
Standard options are as follows:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-e</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Environment variables override macro assignments within makefiles.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-f</b> <i class="arg">mk</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Read file <i class="arg">mk</i> instead of the default makefile. If <i class="arg">mk</i> is &#8216;<code class="lit">-</code>&#8217;, standard input is used. Multiple makefiles may be specified, and are read in the order specified.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-i</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Ignore non-zero exit of shell commands in the makefile. Equivalent to specifying &#8216;<code class="lit">-</code>&#8217; before each command line in the makefile.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-k</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Continue processing after errors are encountered, but only on those targets that do not depend on the target whose creation caused the error.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-n</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Display the commands that would have been executed, but do not actually execute them.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-p</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Print a dump of the target rules and variables on stdout. Do not build anything.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-q</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Do not execute any commands, but exit with status 0 if the specified targets are up-to-date, and 1 otherwise.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-r</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Do not use the built-in rules specified in the system makefile, <i class="file">&lt;sys.mk&gt;</i>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-S</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Stop processing when an error is encountered. This is the default behavior. This is needed to negate the <b class="flag">-k</b> option during recursive builds.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-s</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Do not echo commands as they are executed. Equivalent to specifying &#8216;<b class="cmd">@</b>&#8217; before each command line in the makefile.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-t</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Rather than re-building a target as specified in the makefile, create it or update its modification time to make it appear up-to-date, a bit like <a class="link-man" href="../html1/touch.html">touch(1)</a>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="arg">NAME</i>=<i class="arg">value</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Set the value of the variable <i class="arg">NAME</i> to <i class="arg">value</i>.</dd>
</dl>
<div class="spacer">
</div>
Extended options are as follows:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-B</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Try to be backwards compatible by executing the commands to make the prerequisites in a target rule in sequence. This is the default, in the absence of <b class="flag">-j</b> <i class="arg">max_processes</i>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-C</b> <i class="arg">directory</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Enter <i class="arg">directory</i> before doing anything.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-D</b> <i class="arg">variable</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Define <i class="arg">variable</i> to be 1.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-d</b> <i class="arg">flags</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Turn on debugging, and specify which portions of <b class="name">make</b> are to print debugging information. <i class="arg">flags</i> is one or more of the following:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="arg">A</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Print all possible debugging information; equivalent to specifying all of the debugging flags.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="arg">a</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Print debugging information about archive searching and caching.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="arg">c</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Print debugging information about conditional evaluation.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="arg">d</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Print debugging information about directory searching and caching.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="arg">D</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Print warning messages about multiply defined command lists.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="arg">e</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Print debugging information about expensive command heuristics.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="arg">f</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Print debugging information about the expansion of for loops.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="arg">g1</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Print the input graph before making anything.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="arg">g2</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Print the input graph after making everything, or before exiting on error.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="arg">h</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Print information about jobs being held back because of sibling/target groups races.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="arg">j</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Print debugging information about forking processes to run commands.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="arg">k</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Print debugging information about manually killing processes.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="arg">l</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Print commands in Makefile targets regardless of whether or not they are prefixed by @. Also known as loud behavior.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="arg">m</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Print debugging information about making targets, including modification dates.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="arg">n</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Print debugging information about target names equivalence computations.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="arg">p</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Help finding concurrency issues for parallel make by adding some randomization. If <b class="var">RANDOM_ORDER</b> is defined, targets will be shuffled before being built. If <b class="var">RANDOM_DELAY</b> is defined, <b class="name">make</b> will wait between 0 and ${RANDOM_DELAY} seconds before starting a command. A given random seed can be forced by setting <b class="var">RANDOM_SEED</b>, but this does not guarantee reproductibility.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="arg">q</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
&#8216;quick death&#8217; option: after a fatal error, instead of waiting for other jobs to die, kill them right away.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="arg">s</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Print debugging information about inference (suffix) transformation rules.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="arg">t</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Print debugging information about target list maintenance.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="arg">T</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Print debugging information about target group determination.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="arg">v</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Print debugging information about variable assignment.</dd>
</dl>
</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-I</b> <i class="arg">directory</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Specify a directory in which to search for makefiles and for &quot;...&quot;-style inclusions. Multiple directories can be added to form a search path. Furthermore, the system include path (see the <b class="flag">-m</b> option) will be used after this search path.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-j</b> <i class="arg">max_processes</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Specify the maximum number of processes that <b class="name">make</b> may have running at any one time.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-m</b> <i class="arg">directory</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Specify a directory in which to search for system include files: <i class="file">sys.mk</i> and &lt;...&gt;-style inclusions. Multiple directories can be added to form the system search path. Using <b class="flag">-m</b> will override the default system include directory <i class="file">/usr/share/mk</i>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-V</b> <i class="arg">variable</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Print <b class="name">make</b>'s idea of the value of <i class="arg">variable</i>. Do not build any targets. Multiple instances of this option may be specified; the variables will be printed one per line, with a blank line for each null or undefined variable.</dd>
</dl>
<div class="spacer">
</div>
There are seven different types of lines in a makefile: dependency lines, shell commands, variable assignments, include statements, conditional directives, for loops, and comments. Of these, include statements, conditional directives and for loops are extensions.<div class="spacer">
</div>
A complete target rule is composed of a dependency line, followed by a list of shell commands.<div class="spacer">
</div>
In general, lines may be continued from one line to the next by ending them with a backslash (&#8216;<code class="lit">\</code>&#8217;). The trailing newline character and initial whitespace on the following line are compressed into a single space.</div>
<div class="section">
<h1 id="x444550454e44454e4359204c494e4553">DEPENDENCY LINES</h1> Dependency lines consist of one or more targets, an operator, and zero or more prerequisites:<div class="spacer">
</div>
<div style="margin-left: 5.00ex;" class="display">
<i class="arg">target ...</i>:[<span class="opt"><i class="arg">prerequisite ...</i></span>]</div>
<div class="spacer">
</div>
This creates a relationship where the targets &#8220;depend&#8221; on the prerequisites and are usually built from them. The exact relationship between targets and prerequisites is determined by the operator that separates them.<div class="spacer">
</div>
It is an error to use different dependency operators for the same target.<div class="spacer">
</div>
The operators are as follows:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">:</b></dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
A target is considered out-of-date if any of its prerequisites has been modified more recently than the target (that is, its modification time is less than that of any of its prerequisites). Thus, targets with no prerequisites are always out-of-date.<div class="spacer">
</div>
<b class="name">make</b> will then execute the list of shell commands associated with that target.<div class="spacer">
</div>
Additional prerequisites may be specified over additional dependency lines: <b class="name">make</b> will consider all prerequisites for determining out-of-date status. The target is removed if <b class="name">make</b> is interrupted.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">!</b></dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
<b class="name">make</b> first examines all prerequisites and re-creates them as necessary.<div class="spacer">
</div>
It will then always execute the list of shell commands associated with that target (as if the target always was out-of-date).<div class="spacer">
</div>
Like <b class="cmd">:</b>, additional prerequisites may be specified over additional dependency lines, and the target is still removed if <b class="name">make</b> is interrupted.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">::</b></dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
Each dependency line for a target is considered independently. A target is considered out-of-date for this target rule if any of its prerequisites in this dependency has been modified more recently than the target.<div class="spacer">
</div>
<b class="name">make</b> will then execute the list of shell commands associated with that target. Target rules that specify no prerequisites are always executed.<div class="spacer">
</div>
The target will not be removed if <b class="name">make</b> is interrupted.</dd>
</dl>
<div class="spacer">
</div>
The <b class="cmd">:</b> operator is the only standard operator. The <b class="cmd">::</b> operator is a fairly standard extension, popularized by <a class="link-man" href="../html1/imake.html">imake</a>. The <b class="cmd">!</b> operator is a <span class="unix">BSD</span> extension.<div class="spacer">
</div>
As an extension, targets and prerequisites may contain the shell wildcard expressions &#8216;<code class="lit">?</code>&#8217;, &#8216;<code class="lit">*</code>&#8217;, &#8216;<code class="lit">[]</code>&#8217; and &#8216;<code class="lit">{}</code>&#8217;. The expressions &#8216;<code class="lit">?</code>&#8217;, &#8216;<code class="lit">*</code>&#8217; and &#8216;<code class="lit">[]</code>&#8217; may only be used as part of the final component of the target or prerequisite, and must be used to describe existing files. The expression &#8216;<code class="lit">{}</code>&#8217; need not necessarily be used to describe existing files. Expansion is in directory order, not alphabetically as done in the shell.<div class="spacer">
</div>
For maximum portability, target names should only consist of periods, underscores, digits and alphabetic characters.<div class="spacer">
</div>
The use of several targets can be a shorthand for duplicate rules. Specifically,<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
target1 target2: reqa reqa 
	cmd1 
	cmd2</pre>
<div class="spacer">
</div>
may be replaced with<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
target1: reqa reqa 
	cmd1 
	cmd2 
target2: reqa reqa 
	cmd1 
	cmd2</pre>
<div class="spacer">
</div>
in general. But <b class="name">make</b> is aware of parallel issues, and will not build those targets concurrently, if not appropriate.</div>
<div class="section">
<h1 id="x5348454c4c20434f4d4d414e4453">SHELL COMMANDS</h1> Each target may have associated with it a series of shell commands, normally used to build the target. While several dependency lines may name the same target, only one of these dependency lines should be followed by shell commands, and thus define a complete target rule (unless the &#8216;<b class="cmd">::</b>&#8217; operator is used). Each of the shell commands in the target rule <span class="emph">must</span> be preceded by a tab.<div class="spacer">
</div>
If a command line begins with a combination of the characters, &#8216;<b class="cmd">@</b>&#8217;, &#8216;<b class="cmd">-</b>&#8217; and/or &#8216;<b class="cmd">+</b>&#8217;, the command is treated specially:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
&#8216;<b class="cmd">@</b>&#8217;</dt>
<dd class="list-tag" style="margin-left: 3.00ex;">
causes the command not to be echoed before it is executed.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
&#8216;<b class="cmd">-</b>&#8217;</dt>
<dd class="list-tag" style="margin-left: 3.00ex;">
causes any non-zero exit status of the command line to be ignored.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
&#8216;<b class="cmd">+</b>&#8217;</dt>
<dd class="list-tag" style="margin-left: 3.00ex;">
causes the command to be executed even if <b class="flag">-n</b> has been specified. (This can be useful to debug recursive Makefiles.)</dd>
</dl>
<div class="spacer">
</div>
Commands are executed using <i class="file">/bin/sh</i> in &#8220;set -e&#8221; mode, unless &#8216;<b class="cmd">-</b>&#8217; is specified.<div class="spacer">
</div>
As an optimization, <b class="name">make</b> may execute very simple commands without going through an extra shell process, as long as this does not change observable behavior.</div>
<div class="section">
<h1 id="x494e464552454e43452052554c4553">INFERENCE RULES</h1> <b class="name">make</b> also maintains a list of valid suffixes through the use of the <b class="cmd">.SUFFIXES</b> special target.<div class="spacer">
</div>
These suffixes can be used to write generic transformation rules called inference rules.<div class="spacer">
</div>
If a target has the form &#8216;.s1.s2&#8217;, where .s1 and .s2 are currently valid suffixes, then it defines a transformation from *.s1 to *.s2 (double suffix inference). If a target has the form &#8216;.s1&#8217;, where .s1 is a currently valid suffix, then it defines a transformation from *.s1 to * (single suffix inference).<div class="spacer">
</div>
A complete inference rule is a dependency line with such a target, the normal dependency operator, no prerequisites and a list of shell commands.<div class="spacer">
</div>
When <b class="name">make</b> requires a target for which it has no complete target rule, it will try to apply a single active inference rule to create the target.<div class="spacer">
</div>
For instance, with the following Makefile, describing a C program compiled from sources a.c and b.c, with header file a.h:<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
.SUFFIXES: .c .o 
.c.o: 
	${CC} ${CFLAGS} -c $&lt; 
 
prog: a.o b.o 
	${CC} ${CFLAGS} -o $@ a.o 
 
a.o b.o: a.h 
 
b.o: b.c 
	${CC} -DFOO ${CFLAGS} -o $@ $&lt;</pre>
<div class="spacer">
</div>
Consider b.o: there is a complete target rule re-creating it from b.c, so it will be compiled using ${CC} -DFOO.<div class="spacer">
</div>
Consider a.o: there is no explicit target rule, so <b class="name">make</b> will consider valid transforms. Fortunately, there is an inference rule that can create a.o from a.c, so it will be compiled using ${CC}.<div class="spacer">
</div>
Note that extra prerequisites are still taken into account, so both a.o and b.o depend on a.h for re-creation.<div class="spacer">
</div>
Valid suffixes accumulate over <b class="cmd">.SUFFIXES</b> lines. An empty <b class="cmd">.SUFFIXES</b> can be used to reset the currently valid list of suffixes, but inference rules already read are still known by <b class="name">make</b>, and they are marked as inactive. Redefining the corresponding suffix (or suffixes) will reactivate the rule.<div class="spacer">
</div>
In case of duplicate inference rules with the same suffix combination, the new rule overrides the old one.<div class="spacer">
</div>
For maximal portability, suffixes should start with a dot.</div>
<div class="section">
<h1 id="x5641524941424c452041535349474e4d454e5453">VARIABLE ASSIGNMENTS</h1> Variables in <b class="name">make</b> are much like variables in the shell and, by tradition, consist of all upper-case letters. They are also called &#8216;macros&#8217; in various texts. For portability, only periods, underscores, digits and letters should be used for variable names. The five operators that can be used to assign values to variables are as follows:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">=</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Assign the value to the variable. Any previous value is overridden.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">:=</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Assign with expansion, i.e., expand the value before assigning it to the variable (extension).</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">+=</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Append the value to the current value of the variable (extension).</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">?=</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Assign the value to the variable if it is not already defined (<span class="unix">BSD</span> extension). Normally, expansion is not done until the variable is referenced.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">!=</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Expand the value and pass it to the shell for execution and assign the result to the variable. Any newlines in the result are replaced with spaces (<span class="unix">BSD</span> extension).</dd>
</dl>
<div class="spacer">
</div>
Any whitespace before the assigned <i class="arg">value</i> is removed; if the value is being appended, a single space is inserted between the previous contents of the variable and the appended value.<div class="spacer">
</div>
Several extended assignment operators may be combined together. For instance,<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
A ?!= cmd</pre>
<div class="spacer">
</div>
will only run &#8220;cmd&#8221; and put its output into <b class="var">A</b> if <b class="var">A</b> is not yet defined.<div class="spacer">
</div>
Variables are expanded by surrounding the variable name with either curly braces (&#8216;<code class="lit">{}</code>&#8217;) or parentheses (&#8216;<code class="lit">()</code>&#8217;) and preceding it with a dollar sign (&#8216;<code class="lit">$</code>&#8217;). If the variable name contains only a single letter, the surrounding braces or parentheses are not required. This shorter form is not recommended.<div class="spacer">
</div>
Variable substitution occurs at two distinct times, depending on where the variable is being used. Variables in dependency lines are expanded as the line is read. Variables in shell commands are expanded when the shell command is executed.<div class="spacer">
</div>
The four different classes of variables (in order of increasing precedence) are:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
Environment variables</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Variables defined as part of <b class="name">make</b>'s environment.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
Global variables</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Variables defined in the makefile or in included makefiles.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
Command line variables</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Variables defined as part of the command line.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
Local variables</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Variables that are defined specific to a certain target. Standard local variables are as follows:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="var">@</b></dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
The name of the target.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="var">%</b></dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
The name of the archive member (only valid for library rules).</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="var">!</b></dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
The name of the archive file (only valid for library rules).</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="var">?</b></dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
The list of prerequisites for this target that were deemed out-of-date.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="var">&lt;</b></dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
The name of the prerequisite from which this target is to be built, if a valid inference rule (suffix rule) is in scope.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="var">*</b></dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
The file prefix of the file, containing only the file portion, no suffix or preceding directory components.</dd>
</dl>
<div class="spacer">
</div>
The six variables &#8216;<b class="var">@F</b>&#8217;, &#8216;<b class="var">@D</b>&#8217;, &#8216;<b class="var">&lt;F</b>&#8217;, &#8216;<b class="var">&lt;D</b>&#8217;, &#8216;<b class="var">*F</b>&#8217;, and &#8216;<b class="var">*D</b>&#8217; yield the &#8220;filename&#8221; and &#8220;directory&#8221; parts of the corresponding macros.<div class="spacer">
</div>
For maximum compatibility, &#8216;<b class="var">&lt;</b>&#8217; should only be used for actual inference rules. It is also set for normal target rules when there is an inference rule that matches the current target and prerequisite in scope. That is, in<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
.SUFFIXES: .c .o 
file.o: file.c 
	cmd1 $&lt; 
 
.c.o: 
	cmd2</pre>
<div class="spacer">
</div>
building <i class="file">file.o</i> will execute &#8220;cmd1 file.c&#8221;.<div class="spacer">
</div>
As an extension, <b class="name">make</b> supports the following local variables:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="var">&gt;</b></dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
The list of all prerequisites for this target.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="var">.ALLSRC</b></dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
Synonym for &#8216;<b class="var">&gt;</b>&#8217;.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="var">.ARCHIVE</b></dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
Synonym for &#8216;<b class="var">!</b>&#8217;.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="var">.IMPSRC</b></dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
Synonym for &#8216;<b class="var">&lt;</b>&#8217;.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="var">.MEMBER</b></dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
Synonym for &#8216;<b class="var">%</b>&#8217;.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="var">.OODATE</b></dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
Synonym for &#8216;<b class="var">?</b>&#8217;.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="var">.PREFIX</b></dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
Synonym for &#8216;<b class="var">*</b>&#8217;.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="var">.TARGET</b></dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
Synonym for &#8216;<b class="var">@</b>&#8217;.</dd>
</dl>
<div class="spacer">
</div>
These variables may be used on the dependency half of dependency lines, when they make sense.</dd>
</dl>
<div class="spacer">
</div>
In addition, <b class="name">make</b> sets or knows about the following internal variables, or environment variables:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="var">$</b></dt>
<dd class="list-tag" style="margin-left: 9.00ex;">
A single dollar sign &#8216;<code class="lit">$</code>&#8217;, i.e., &#8216;<code class="lit">$$</code>&#8217; expands to a single dollar sign.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="var">.MAKE</b></dt>
<dd class="list-tag" style="margin-left: 9.00ex;">
The name that <b class="name">make</b> was executed with (<b class="var">argv</b>[<span class="opt">0</span>]).</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="var">.CURDIR</b></dt>
<dd class="list-tag" style="margin-left: 9.00ex;">
A path to the directory where <b class="name">make</b> was executed.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="var">.OBJDIR</b></dt>
<dd class="list-tag" style="margin-left: 9.00ex;">
Path to the directory where targets are built. At startup, <b class="name">make</b> searches for an alternate directory to place target files. <b class="name">make</b> tries to <a class="link-man" href="../html2/chdir.html">chdir(2)</a> into <span class="env">MAKEOBJDIR</span> (or <i class="file">obj</i> if <span class="env">MAKEOBJDIR</span> is not defined), and sets <b class="var">.OBJDIR</b> accordingly. Should that fail, <b class="var">.OBJDIR</b> is set to <b class="var">.CURDIR</b>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="var">MAKEFILE_LIST</b></dt>
<dd class="list-tag" style="margin-left: 9.00ex;">
The list of files read by <b class="name">make</b>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="var">.MAKEFLAGS</b></dt>
<dd class="list-tag" style="margin-left: 9.00ex;">
The environment variable <span class="env">MAKEFLAGS</span> may contain anything that may be specified on <b class="name">make</b>'s command line. Its contents are stored in <b class="name">make</b>'s <b class="var">.MAKEFLAGS</b> variable. Anything specified on <b class="name">make</b>'s command line is appended to the <b class="var">.MAKEFLAGS</b> variable which is then entered into the environment as <span class="env">MAKEFLAGS</span> for all programs which <b class="name">make</b> executes.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="var">MFLAGS</b></dt>
<dd class="list-tag" style="margin-left: 9.00ex;">
A shorter synonym for <b class="var">.MAKEFLAGS</b>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">PWD</span></dt>
<dd class="list-tag" style="margin-left: 9.00ex;">
Alternate path to the current directory. <b class="name">make</b> normally sets &#8216;<b class="var">.CURDIR</b>&#8217; to the canonical path given by <a class="link-man" href="../html3/getcwd.html">getcwd(3)</a>. However, if the environment variable <span class="env">PWD</span> is set and gives a path to the current directory, then <b class="name">make</b> sets &#8216;<b class="var">.CURDIR</b>&#8217; to the value of <span class="env">PWD</span> instead. <span class="env">PWD</span> is always set to the value of &#8216;<b class="var">.OBJDIR</b>&#8217; for all programs which <b class="name">make</b> executes.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="var">.TARGETS</b></dt>
<dd class="list-tag" style="margin-left: 9.00ex;">
List of targets <b class="name">make</b> is currently building.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="var">MACHINE</b></dt>
<dd class="list-tag" style="margin-left: 9.00ex;">
Name of the machine architecture <b class="name">make</b> is running on, obtained from the <span class="env">MACHINE</span> environment variable, or through <a class="link-man" href="../html3/uname.html">uname(3)</a> if not defined.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="var">MACHINE_ARCH</b></dt>
<dd class="list-tag" style="margin-left: 9.00ex;">
Name of the machine architecture <b class="name">make</b> was compiled for, obtained from the <span class="env">MACHINE_ARCH</span> environment variable, or defined at compilation time.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="var">MACHINE_CPU</b></dt>
<dd class="list-tag" style="margin-left: 9.00ex;">
Name of the machine processor <b class="name">make</b> was compiled for, obtained from the <span class="env">MACHINE_CPU</span> environment variable, or defined at compilation time. On processors where only one endianness is possible, the value of this variable is always the same as <span class="env">MACHINE_ARCH</span>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="var">MAKEFILE</b></dt>
<dd class="list-tag" style="margin-left: 9.00ex;">
Possibly the file name of the last makefile that has been read. It should not be used; see the <i class="link-sec"><a class="link-sec" href="#x42554753">BUGS</a></i> section below.</dd>
</dl>
<div class="spacer">
</div>
Variable expansion may be modified to select or modify each word of the variable (where &#8220;word&#8221; is a whitespace delimited sequence of characters). The general format of a variable expansion is as follows:<div class="spacer">
</div>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit">{variable[:modifier[:...]]}</code></div>
</blockquote>
<div class="spacer">
</div>
Each modifier begins with a colon and one of the following special characters. The colon may be escaped with a backslash (&#8216;<code class="lit">\</code>&#8217;).<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">:E</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Replaces each word in the variable with its suffix.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">:H</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Replaces each word in the variable with everything but the last component.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">:L</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Replaces each word in the variable with its lower case equivalent.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">:U</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Replaces each word in the variable with its upper case equivalent.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">:M</b><i class="arg">pattern</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Select only those words that match the rest of the modifier. The standard shell wildcard characters (&#8216;<code class="lit">*</code>&#8217;, &#8216;<code class="lit">?</code>&#8217;, and &#8216;<code class="lit">[]</code>&#8217;) may be used. The wildcard characters may be escaped with a backslash (&#8216;<code class="lit">\</code>&#8217;).</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">:N</b><i class="arg">pattern</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
This is identical to <b class="flag">:M</b>, but selects all words which do not match the rest of the modifier.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">:Q</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Quotes every shell meta-character in the variable, so that it can be passed safely through recursive invocations of <b class="name">make</b>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">:QL</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Quote list: quotes every shell meta-character in the variable, except whitespace, so that it can be passed to a shell's &#8216;for&#8217; loops.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">:R</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Replaces each word in the variable with everything but its suffix.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">:S</b><code class="none">/</code><i class="arg">old_string</i><code class="none">/</code><i class="arg">new_string</i><code class="none">/</code>[<span class="opt"><b class="flag">1g</b></span>]</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
 Modify the first occurrence of <i class="arg">old_string</i> in the variable's value, replacing it with <i class="arg">new_string</i>. If a &#8216;<code class="lit">g</code>&#8217; is appended to the last slash of the pattern, all occurrences in each word are replaced. If a &#8216;<code class="lit">1</code>&#8217; is appended to the last slash of the pattern, only the first word is affected. If <i class="arg">old_string</i> begins with a caret (&#8216;<code class="lit">^</code>&#8217;), <i class="arg">old_string</i> is anchored at the beginning of each word. If <i class="arg">old_string</i> ends with a dollar sign (&#8216;<code class="lit">$</code>&#8217;), it is anchored at the end of each word. Inside <i class="arg">new_string</i>, an ampersand (&#8216;<code class="lit">&amp;</code>&#8217;) is replaced by <i class="arg">old_string</i> (without any &#8216;<code class="lit">^</code>&#8217; or &#8216;<code class="lit">$</code>&#8217;). Any character may be used as a delimiter for the parts of the modifier string. The anchoring, ampersand and delimiter characters may be escaped with a backslash (&#8216;<code class="lit">\</code>&#8217;).<div class="spacer">
</div>
Variable expansion occurs in the normal fashion inside both <i class="arg">old_string</i> and <i class="arg">new_string</i> with the single exception that a backslash is used to prevent the expansion of a dollar sign (&#8216;<code class="lit">$</code>&#8217;), not a preceding dollar sign as is usual.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">:C</b><code class="none">/</code><i class="arg">pattern</i><code class="none">/</code><i class="arg">replacement</i><code class="none">/</code>[<span class="opt"><b class="flag">1g</b></span>]</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
 The <b class="flag">:C</b> modifier is just like the <b class="flag">:S</b> modifier except that the old and new strings, instead of being simple strings, are an extended regular expression (see <a class="link-man" href="../html7/re_format.html">re_format(7)</a>) and an <a class="link-man" href="../html1/ed.html">ed(1)</a>-style replacement string. Normally, the first occurrence of the pattern in each word of the value is changed. The &#8216;<code class="lit">1</code>&#8217; modifier causes the substitution to apply to at most one word; the &#8216;<code class="lit">g</code>&#8217; modifier causes the substitution to apply to as many instances of the search pattern as occur in the word or words it is found in. Note that &#8216;<code class="lit">1</code>&#8217; and &#8216;<code class="lit">g</code>&#8217; are orthogonal; the former specifies whether multiple words are potentially affected, the latter whether multiple substitutions can potentially occur within each affected word.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">:T</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Replaces each word in the variable with its last component.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="arg">:old_string</i>=<i class="arg">new_string</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
This is the AT&amp;T System&#160;V UNIX style variable substitution. It must be the last modifier specified. If <i class="arg">old_string</i> or <i class="arg">new_string</i> do not contain the pattern matching character &#8216;%&#8217; then it is assumed that they are anchored at the end of each word, so only suffixes or entire words may be replaced. Otherwise &#8216;%&#8217; is the substring of <i class="arg">old_string</i> to be replaced in <i class="arg">new_string</i>. The right hand side (<i class="arg">new_string</i>) may contain variable values, which will be expanded. To put an actual single dollar, just double it.</dd>
</dl>
<div class="spacer">
</div>
All modifiers are <span class="unix">BSD</span> extensions, except for the standard AT&amp;T System&#160;V UNIX style variable substitution.<div class="spacer">
</div>
The interpretation of &#8216;%&#8217; and &#8216;$&#8217; in AT&amp;T System&#160;V UNIX variable substitutions is not mandated by POSIX, though it is fairly common.</div>
<div class="section">
<h1 id="x494e434c5544452053544154454d454e54532c20434f4e444954494f4e414c5320414e4420464f52204c4f4f5053">INCLUDE STATEMENTS, CONDITIONALS AND FOR LOOPS</h1> Makefile inclusion, conditional structures and for loops reminiscent of the C programming language are provided in <b class="name">make</b>. All such structures are identified by a line beginning with a single dot (&#8216;<code class="lit">.</code>&#8217;) character. Whitespace characters may follow this dot, e.g.,<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
.include &lt;file&gt;</pre>
and<pre style="margin-left: 5.00ex;" class="lit display">
.   include &lt;file&gt;</pre>
<div class="spacer">
</div>
are identical constructs. Files are included with either &#8216;<code class="lit">.include &lt;file&gt;</code>&#8217; or &#8216;<code class="lit">.include &#8220;file&#8221;</code>&#8217;. Variables between the angle brackets or double quotes are expanded to form the file name. If angle brackets are used, the included makefile is expected to be in the system makefile directory. If double quotes are used, the including makefile's directory and any directories specified using the <b class="flag">-I</b> option are searched before the system makefile directory.<div class="spacer">
</div>
Conditional expressions are also preceded by a single dot as the first character of a line. The possible conditionals are as follows:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">.undef</b> <i class="arg">variable</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Un-define the specified global variable. Only global variables may be un-defined.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">.poison</b> <i class="arg">variable</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Poison the specified global variable. Any further reference to <i class="arg">variable</i> will be flagged as an error.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">.poison !defined</b> (<i class="arg">variable</i>)</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
It is an error to try to use the value of <i class="arg">variable</i> in a context where it is not defined.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">.poison empty</b> (<i class="arg">variable</i>)</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
It is an error to try to use the value of <i class="arg">variable</i> in a context where it is not defined or empty.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">.if</b> [<span class="opt">!</span>]<i class="arg">expression</i> [<span class="opt"><i class="arg">operator expression ...</i></span>]</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Test the value of an expression.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">.ifdef</b> [<span class="opt">!</span>]<i class="arg">variable</i> [<span class="opt"><i class="arg">operator variable ...</i></span>]</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Test the value of a variable.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">.ifndef</b> [<span class="opt">!</span>]<i class="arg">variable</i> [<span class="opt"><i class="arg">operator variable ...</i></span>]</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Test the value of a variable.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">.ifmake</b> [<span class="opt">!</span>]<i class="arg">target</i> [<span class="opt"><i class="arg">operator target ...</i></span>]</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Test the target being built.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">.ifnmake</b> [<span class="opt">!</span>] <i class="arg">target</i> [<span class="opt"><i class="arg">operator target ...</i></span>]</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Test the target being built.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">.else</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Reverse the sense of the last conditional.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">.elif</b> [<span class="opt">!</span>] <i class="arg">expression</i> [<span class="opt"><i class="arg">operator expression ...</i></span>]</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
A combination of &#8216;<b class="cmd">.else</b>&#8217; followed by &#8216;<b class="cmd">.if</b>&#8217;.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">.elifdef</b> [<span class="opt">!</span>]<i class="arg">variable</i> [<span class="opt"><i class="arg">operator variable ...</i></span>]</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
A combination of &#8216;<b class="cmd">.else</b>&#8217; followed by &#8216;<b class="cmd">.ifdef</b>&#8217;.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">.elifndef</b> [<span class="opt">!</span>]<i class="arg">variable</i> [<span class="opt"><i class="arg">operator variable ...</i></span>]</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
A combination of &#8216;<b class="cmd">.else</b>&#8217; followed by &#8216;<b class="cmd">.ifndef</b>&#8217;.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">.elifmake</b> [<span class="opt">!</span>]<i class="arg">target</i> [<span class="opt"><i class="arg">operator target ...</i></span>]</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
A combination of &#8216;<b class="cmd">.else</b>&#8217; followed by &#8216;<b class="cmd">.ifmake</b>&#8217;.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">.elifnmake</b> [<span class="opt">!</span>]<i class="arg">target</i> [<span class="opt"><i class="arg">operator target ...</i></span>]</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
A combination of &#8216;<b class="cmd">.else</b>&#8217; followed by &#8216;<b class="cmd">.ifnmake</b>&#8217;.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">.endif</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
End the body of the conditional.</dd>
</dl>
<div class="spacer">
</div>
The <i class="arg">operator</i> may be any one of the following:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">||</b></dt>
<dd class="list-tag" style="margin-left: 5.00ex;">
logical OR</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&amp;&amp;</b></dt>
<dd class="list-tag" style="margin-left: 5.00ex;">
Logical AND; of higher precedence than <b class="flag">||</b>.</dd>
</dl>
<div class="spacer">
</div>
As in C, <b class="name">make</b> will only evaluate a conditional as far as is necessary to determine its value. Parentheses may be used to change the order of evaluation. The boolean operator &#8216;<b class="cmd">!</b>&#8217; may be used to logically negate an entire conditional. It is of higher precedence than &#8216;<b class="cmd">&amp;&amp;</b>&#8217;.<div class="spacer">
</div>
The value of <i class="arg">expression</i> may be any of the following:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">commands</b></dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
Takes a target name as an argument and evaluates to true if the target has been defined and has shell commands associated with it.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">defined</b></dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
Takes a variable name as an argument and evaluates to true if the variable has been defined.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">make</b></dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
Takes a target name as an argument and evaluates to true if the target was specified as part of <b class="name">make</b>'s command line or was declared the default target (either implicitly or explicitly, see <b class="var">.MAIN</b>) before the line containing the conditional.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">empty</b></dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
Takes a variable, with possible modifiers, and evaluates to true if the expansion of the variable would result in an empty string.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">exists</b></dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
Takes a file name as an argument and evaluates to true if the file exists. The file is searched for on the system search path (see <b class="var">.PATH</b>).</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">target</b></dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
Takes a target name as an argument and evaluates to true if the target has been defined.</dd>
</dl>
<div class="spacer">
</div>
<i class="arg">expression</i> may also be an arithmetic or string comparison. Variable expansion is performed on both sides of the comparison, after which the integral values are compared. A value is interpreted as hexadecimal if it is preceded by 0x, otherwise it is decimal; octal numbers are not supported. The standard C relational operators are all supported. If after variable expansion, either the left or right hand side of a &#8216;<b class="cmd">==</b>&#8217; or &#8216;<b class="cmd">!=</b>&#8217; operator is not an integral value, then string comparison is performed between the expanded variables. If no relational operator is given, it is assumed that the expanded variable is being compared against 0.<div class="spacer">
</div>
When <b class="name">make</b> is evaluating one of these conditional expressions, and it encounters a word it doesn't recognize, either the &#8220;make&#8221; or &#8220;defined&#8221; expression is applied to it, depending on the form of the conditional. If the form is &#8216;<b class="cmd">.ifdef</b>&#8217; or &#8216;<b class="cmd">.ifndef</b>&#8217;, the &#8220;defined&#8221; expression is applied. Similarly, if the form is &#8216;<b class="cmd">.ifmake</b>&#8217; or &#8216;<b class="cmd">.ifnmake</b>&#8217;, the &#8220;make&#8221; expression is applied.<div class="spacer">
</div>
If the conditional evaluates to true the parsing of the makefile continues as before. If it evaluates to false, the following lines are skipped. In both cases this continues until a &#8216;<b class="cmd">.else</b>&#8217; or &#8216;<b class="cmd">.endif</b>&#8217; is found.<div class="spacer">
</div>
For loops are typically used to apply a set of rules to a list of files. The syntax of a for loop is:<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
<b class="cmd">.for</b> <i class="arg">variable</i> [<span class="opt"><i class="arg">variable ...</i></span>] <b class="cmd">in</b> <i class="arg">expression</i> 
	&lt;make-rules&gt; 
<b class="cmd">.endfor</b></pre>
<div class="spacer">
</div>
After the for <i class="arg">expression</i> is evaluated, it is split into words. On each iteration of the loop, one word is assigned to each <i class="arg">variable</i>, in order, and these <i class="arg">variables</i> are substituted in the <b class="cmd">make-rules</b> inside the body of the for loop. The number of words must match the number of iteration variables; that is, if there are three iteration variables, the number of words must be a multiple of three.<div class="spacer">
</div>
Loops and conditional expressions may nest arbitrarily, but they may not cross include file boundaries.<div class="spacer">
</div>
<b class="name">make</b> also supports <b class="cmd">sinclude</b> and <b class="cmd">-include</b> for compatibility with other implementations. Both use the same syntax:<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
<b class="cmd">sinclude</b> <i class="file">file</i> 
<b class="cmd">-include</b> <i class="file">file</i></pre>
<div class="spacer">
</div>
(note no quotes around <i class="file">file</i>) and will include <i class="file">file</i>, but without any error if it does not exist.</div>
<div class="section">
<h1 id="x434f4d4d454e5453">COMMENTS</h1> Comments begin with a hash (&#8216;<code class="lit">#</code>&#8217;) character, anywhere but in a shell command line, and continue to the end of the line (but a (&#8216;<code class="lit">#</code>&#8217;) character in a shell command line will be interpreted as a comment by the shell).</div>
<div class="section">
<h1 id="x5441524745542041545452494255544553">TARGET ATTRIBUTES</h1> Some targets may be tagged with some specific attributes by one of the <i class="link-sec"><a class="link-sec" href="#x5350454349414c2054415247455453">SPECIAL TARGETS</a></i> or <i class="link-sec"><a class="link-sec" href="#x5350454349414c2050524552455155495349544553">SPECIAL PREREQUISITES</a></i> described below.<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
&#8220;Always build&#8221;</dt>
<dd class="list-tag" style="margin-left: 15.00ex;">
Run the commands associated with this target even if the <b class="flag">-n</b> or <b class="flag">-t</b> options were specified. Can be used to mark recursive <b class="name">make</b>'s, but prefer standard &#8216;<b class="cmd">+</b><i class="arg">cmd</i>&#8217;.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
&#8220;Cheap&#8221;</dt>
<dd class="list-tag" style="margin-left: 15.00ex;">
In parallel mode, don't scan the commands for occurrences of <b class="name">make</b>, thus letting normal recursive <b class="flag">-j</b> behavior apply.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
&#8220;Expensive&#8221;</dt>
<dd class="list-tag" style="margin-left: 15.00ex;">
In parallel mode, assume commands will invoke recursive commands. Once <b class="name">make</b> starts building an expensive target, it won't start building anything else until that target has finished building.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
&#8220;Ignoring errors&#8221;</dt>
<dd class="list-tag" style="margin-left: 15.00ex;">
Ignore any errors generating by running shell commands, exactly as if they were all preceded by a dash (&#8216;<code class="lit">-</code>&#8217;).</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
&#8220;Phony&#8221;</dt>
<dd class="list-tag" style="margin-left: 15.00ex;">
A phony target is a target that does not correspond to any object in the file system (more like a placeholder for a list of commands).<div class="spacer">
</div>
Phony targets are always out-of-date at the start of a run, but <b class="name">make</b> still keeps track of when they are built (that is, when the associated command list finishes running).</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
&#8220;Precious&#8221;</dt>
<dd class="list-tag" style="margin-left: 15.00ex;">
Don't remove the target if <b class="name">make</b> is interrupted in the middle of building it.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
&#8220;Silent&#8221;</dt>
<dd class="list-tag" style="margin-left: 15.00ex;">
Do not display shell commands before running them, exactly as if they were all preceded by a &#8216;@&#8217;.</dd>
</dl>
</div>
<div class="section">
<h1 id="x5350454349414c2054415247455453">SPECIAL TARGETS</h1> <b class="name">make</b> recognizes standard special targets:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">.DEFAULT</b></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
If there is a <b class="cmd">.DEFAULT</b> target rule, with commands but no prequisites, and <b class="name">make</b> can't figure out another way to build a target, it will use that list of commands, setting <b class="var">&lt;</b> and <b class="var">@</b> appropriately.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">.IGNORE</b></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
Mark its prerequisites as &#8220;Ignoring errors&#8221;.<div class="spacer">
</div>
If the list of prerequisites is empty, apply that to all targets, exactly like the <b class="flag">-i</b> command-line option.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">.PRECIOUS</b></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
Mark its prerequisites as &#8220;Precious&#8221;.<div class="spacer">
</div>
If the list of prerequisites is empty, apply that to all targets.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">.SILENT</b></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
Mark its prerequisites as &#8220;Silent&#8221;.<div class="spacer">
</div>
If the list of prerequisites is empty, apply that to all targets, exactly like the <b class="flag">-s</b> command-line option.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">.SUFFIXES</b></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
See <i class="link-sec"><a class="link-sec" href="#x494e464552454e43452052554c4553">INFERENCE RULES</a></i>.</dd>
</dl>
<div class="spacer">
</div>
and also some other special targets as an extension:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">.BEGIN</b></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
Command lines attached to this target are executed before anything else is done.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">.CHEAP</b></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
Mark its prerequisites as &#8220;Cheap&#8221;.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">.END</b></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
Command lines attached to this target are executed at the end of a successful run.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">.EXPENSIVE</b></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
Mark its prerequisites as &#8220;Expensive&#8221;.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">.INTERRUPT</b></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
Command lines attached to this target are executed if <b class="name">make</b> is interrupted by a SIGINT.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">.MADE</b></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
Mark its prerequisites as being up-to-date.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">.MAKE</b></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
Mark its prerequisites as &#8220;Always build&#8221;. Prefer standard &#8216;<b class="cmd">+</b><i class="arg">cmd</i>&#8217;.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">.MAIN</b></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
If no target is specified when <b class="name">make</b> is invoked, this target will be built. This is always set, either explicitly, or implicitly when <b class="name">make</b> selects the default target, to give the user a way to refer to the default target on the command line.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">.MAKEFLAGS</b></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
This target provides a way to specify flags for <b class="name">make</b> when the makefile is used. The flags are as if typed to the shell, though the <b class="flag">-f</b> option will have no effect.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">.NOTPARALLEL</b></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
Disable parallel mode for the current makefile. The <b class="flag">-j</b> option is still passed to submakes.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">.NO_PARALLEL</b></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
Same as above, for compatibility with other pmake variants.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">.ORDER</b></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
The list of prerequisites should be built in sequence.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">.PATH</b></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
The prerequisites define a search path: directories that will be searched for files not found in the current directory. If no prerequisites are specified, any previously specified directories are deleted.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">.PATH<i>.suffix</i></b></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
This target is only valid if .suffix is a currently valid suffix. The prerequisites defines a search path for files ending in that suffix. For files not found in the current directory, <b class="name">make</b> will first look in that path, before reverting to the default search path.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">.PHONY</b></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
Mark its prerequisites as &#8220;Phony&#8221; targets.</dd>
</dl>
<div class="spacer">
</div>
It is an error to use several special targets, or a special target and normal targets, in a single dependency line.</div>
<div class="section">
<h1 id="x5350454349414c2050524552455155495349544553">SPECIAL PREREQUISITES</h1> Of the special targets described in the previous section, the ones that tag prerequisites can also be used as prerequisites, in which case the corresponding targets will be tagged accordingly.<div class="spacer">
</div>
This is an extension, even for standard special targets.<div class="spacer">
</div>
<b class="name">make</b> also recognizes some other prerequisites:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">.NOTMAIN</b></dt>
<dd class="list-tag" style="margin-left: 9.00ex;">
Normally <b class="name">make</b> selects the first target it encounters as the default target to be built if no target was specified. This prerequisite prevents this target from being selected.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">.OPTIONAL</b></dt>
<dd class="list-tag" style="margin-left: 9.00ex;">
If a target is marked with this attribute and <b class="name">make</b> can't figure out how to create it, it will ignore this fact and assume the file isn't needed or already exists.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">.USE</b></dt>
<dd class="list-tag" style="margin-left: 9.00ex;">
Turn the target into <b class="name">make</b>'s version of a macro. When the target is used as a prerequisite for another target, the other target acquires the commands, prerequisites, and attributes (except for <b class="cmd">.USE</b>) of the prerequisite. If the target already has commands, the <b class="cmd">.USE</b> target's commands are appended to them.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">.WAIT</b></dt>
<dd class="list-tag" style="margin-left: 9.00ex;">
If <b class="cmd">.WAIT</b> appears in a dependency line, the prerequisites that precede it are made before the prerequisites that follow it in the line. Loops are not detected and targets that form loops will be silently ignored.</dd>
</dl>
</div>
<div class="section">
<h1 id="x454e5649524f4e4d454e54">ENVIRONMENT</h1> <b class="name">make</b> uses the following environment variables, if they exist: <span class="env">MACHINE</span>, <span class="env">MACHINE_ARCH</span>, <span class="env">MACHINE_CPU</span>, <span class="env">MAKEFLAGS</span>, <span class="env">MAKEOBJDIR</span>, <span class="env">MAKEOBJDIRPREFIX</span>, and <span class="env">PWD</span>. <b class="name">make</b> also ignores and unsets <span class="env">CDPATH</span>.</div>
<div class="section">
<h1 id="x46494c4553">FILES</h1><dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">.depend</i></dt>
<dd class="list-tag" style="margin-left: 13.00ex;">
list of dependencies</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">makefile</i></dt>
<dd class="list-tag" style="margin-left: 13.00ex;">
default makefile</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">Makefile</i></dt>
<dd class="list-tag" style="margin-left: 13.00ex;">
default makefile if <i class="file">makefile</i> does not exist</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">sys.mk</i></dt>
<dd class="list-tag" style="margin-left: 13.00ex;">
system makefile</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/usr/share/mk</i></dt>
<dd class="list-tag" style="margin-left: 13.00ex;">
system makefile directory</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/usr/obj</i></dt>
<dd class="list-tag" style="margin-left: 13.00ex;">
default <span class="env">MAKEOBJDIRPREFIX</span> directory</dd>
</dl>
</div>
<div class="section">
<h1 id="x4558495420535441545553">EXIT STATUS</h1> If <b class="flag">-q</b> was specified, the <b class="name">make</b> utility exits with one of the following values:<div class="spacer">
</div>
<dl style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 6.00ex;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
0</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Normal behavior.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
1</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
The target was not up-to date.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
&gt;1</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
An error occurred.</dd>
</dl>
<div class="spacer">
</div>
Otherwise, the <b class="name">make</b> utility exits with a value of 0 on success, and &gt;0 if an error occurred.</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../html1/ed.html">ed(1)</a>, <a class="link-man" href="../html1/mkdep.html">mkdep(1)</a>, <a class="link-man" href="../html1/sh.html">sh(1)</a>, <a class="link-man" href="../html3/getcwd.html">getcwd(3)</a>, <a class="link-man" href="../html3/uname.html">uname(3)</a>, <a class="link-man" href="../html7/re_format.html">re_format(7)</a></div>
<div class="section">
<h1 id="x5354414e4441524453">STANDARDS</h1> The <b class="name">make</b> utility is mostly compliant with the IEEE Std 1003.1-2008 (&#8220;POSIX.1&#8221;) specification, though its presence is optional.<div class="spacer">
</div>
The flags [<span class="opt"><b class="flag">-BCDdIjmV</b></span>] are extensions to that specification.<div class="spacer">
</div>
Older versions of <b class="name">make</b> used <span class="env">MAKE</span> instead of <span class="env">MAKEFLAGS</span>. This was removed for POSIX compatibility. The internal variable <b class="var">MAKE</b> is set to the same value as <b class="var">.MAKE</b>. Support for this may be removed in the future.<div class="spacer">
</div>
Most of the more esoteric features of <b class="name">make</b> should probably be avoided for greater compatibility.</div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> A <b class="name">make</b> command appeared in Version&#160;7 AT&amp;T UNIX.<div class="spacer">
</div>
This implementation is a distant derivative of <b class="name">pmake</b>, originally written by Adam de Boor.</div>
<div class="section">
<h1 id="x42554753">BUGS</h1> If the same target is specified several times in complete target rules, <b class="name">make</b> silently ignores all commands after the first non empty set of commands, e.g., in<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
a: 
	@echo &quot;Executed&quot; 
a: 
	@echo &quot;Bad luck&quot;</pre>
<div class="spacer">
</div>
@echo &quot;Bad luck&quot; will be ignored.<div class="spacer">
</div>
<b class="var">.TARGETS</b> is not set to the default target when <b class="name">make</b> is invoked without a target name and no <b class="cmd">MAIN</b> special target exists.<div class="spacer">
</div>
The evaluation of <i class="arg">expression</i> in a test is somewhat simplistic. Variables don't need to be quoted, but strings do: Tests like &#8216;<code class="lit">.if ${VAR} == string</code>&#8217;, &#8216;<code class="lit">.if ${VAR} &gt;= 5</code>&#8217;, &#8216;<code class="lit">.if 5 &lt;= 10</code>&#8217;, and &#8216;<code class="lit">.if string == ${VAR}</code>&#8217; do work, but &#8216;<code class="lit">.if string = ${VAR}</code>&#8217; doesn't.<div class="spacer">
</div>
For loops are expanded before tests, so a fragment such as:<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
.for TMACHINE in ${SHARED_ARCHS} 
.if &quot;${TMACHINE}&quot; == ${MACHINE} 
     ... 
.endif 
.endfor</pre>
<div class="spacer">
</div>
requires the quotes.<div class="spacer">
</div>
When handling pre-<span class="unix">4.4BSD</span> archives, <b class="name">make</b> may erroneously mark archive members as out of date if the archive name was truncated.<div class="spacer">
</div>
The handling of &#8216;;&#8217; and other special characters in tests may be utterly bogus. For instance, in<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
A=abcd;c.c 
.if ${A:R} == &quot;abcd;c&quot;</pre>
<div class="spacer">
</div>
the test will never match, even though the value is correct.<div class="spacer">
</div>
In a .for loop, only the variable value is used; assignments will be evaluated later, e.g., in<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
.for I in a b c d 
I:=${I:S/a/z/} 
A+=$I 
.endfor</pre>
<div class="spacer">
</div>
&#8216;A&#8217; will evaluate to a b c d after the loop, not z b c d.<div class="spacer">
</div>
<b class="cmd">ORDER</b> is currently only used in parallel mode, so keep prerequisites ordered for sequential mode!<div class="spacer">
</div>
Distinct target names are treated separately, even though they might correspond to the same file in the file system. This can cause excessive rebuilds of some targets, and bogus races in parallel mode. This can also prevent <b class="name">make</b> from finding a rule to solve a dependency if the target name is not exactly the same as the dependency.<div class="spacer">
</div>
In parallel mode, <b class="flag">-j</b> <i class="arg">n</i> only limits the number of direct children of <b class="name">make</b>. During recursive invocations, each level may multiply the total number of processes by <i class="arg">n</i>. However, <b class="name">make</b> includes some heuristics to try to prevent catastrophic behavior: if a command is marked as expensive, or preceded by &#8216;+&#8217;, or seems to invoke a program that looks sufficiently like &#8216;make&#8217;, <b class="name">make</b> will assume recursive invocation, and not start any new process until said command has finished running. Thus the number of processes run directly or indirectly by <b class="name">make</b> will increase linearly with each level of recursion instead of exponentially.<div class="spacer">
</div>
The <b class="var">MAKEFILE</b> variable cannot be used reliably. It is a compatibility feature and may get set to the last makefile specified, as it is set by System V make.</div>
</div>
</body>
</html>

