<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/posix/style.css" type="text/css" media="all"/>
<title>
AWK(1)</title>
</head>
<body>
<div class="mandoc">
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">awk</b> &#8212; <span class="desc">pattern-directed scanning and processing language</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1><table class="synopsis">
<col style="width: 3.00ex;"/>
<col/>
<tbody>
<tr>
<td>
awk</td>
<td>
[<span class="opt"><b class="flag">-safe</b></span>] [<span class="opt"><b class="flag">-V</b></span>] [<span class="opt"><b class="flag">-d</b>[<span class="opt"><i class="arg">n</i></span>]</span>] [<span class="opt"><b class="flag">-F</b> <i class="arg">fs</i></span>] [<span class="opt"><b class="flag">-v</b> <i class="arg">var</i>=<i class="arg">value</i></span>] [<span class="opt"><i class="arg">prog</i> | <b class="flag">-f</b> <i class="arg">progfile</i></span>] <i class="arg">file ...</i></td>
</tr>
</tbody>
</table>
</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> <b class="name">awk</b> scans each input <i class="arg">file</i> for lines that match any of a set of patterns specified literally in <i class="arg">prog</i> or in one or more files specified as <b class="flag">-f</b> <i class="arg">progfile</i>. With each pattern there can be an associated action that will be performed when a line of a <i class="arg">file</i> matches the pattern. Each line is matched against the pattern portion of every pattern-action statement; the associated action is performed for each matched pattern. The file name &#8216;-&#8217; means the standard input. Any <i class="arg">file</i> of the form <i class="arg">var</i>=<i class="arg">value</i> is treated as an assignment, not a filename, and is executed at the time it would have been opened if it were a filename.<div class="spacer">
</div>
The options are as follows:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-d</b>[<span class="opt"><i class="arg">n</i></span>]</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Debug mode. Set debug level to <i class="arg">n</i>, or 1 if <i class="arg">n</i> is not specified. A value greater than 1 causes <b class="name">awk</b> to dump core on fatal errors.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-F</b> <i class="arg">fs</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Define the input field separator to be the regular expression <i class="arg">fs</i>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-f</b> <i class="arg">progfile</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Read program code from the specified file <i class="arg">progfile</i> instead of from the command line.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-safe</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Disable file output (<b class="cmd">print</b> <code class="none">&gt;</code>, <b class="cmd">print</b> <code class="none">&gt;&gt;</code>), process creation (<i class="arg">cmd</i> | <b class="cmd">getline</b>, <b class="cmd">print</b> |, <b class="cmd">system</b>) and access to the environment (<b class="var">ENVIRON</b>; see the section on variables below). This is a first (and not very reliable) approximation to a &#8220;safe&#8221; version of <b class="name">awk</b>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-V</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Print the version number of <b class="name">awk</b> to standard output and exit.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-v</b> <i class="arg">var</i>=<i class="arg">value</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Assign <i class="arg">value</i> to variable <i class="arg">var</i> before <i class="arg">prog</i> is executed; any number of <b class="flag">-v</b> options may be present.</dd>
</dl>
<div class="spacer">
</div>
The input is normally made up of input lines (records) separated by newlines, or by the value of <b class="var">RS</b>. If <b class="var">RS</b> is null, then any number of blank lines are used as the record separator, and newlines are used as field separators (in addition to the value of <b class="var">FS</b>). This is convenient when working with multi-line records.<div class="spacer">
</div>
An input line is normally made up of fields separated by whitespace, or by the regular expression <b class="var">FS</b>. The fields are denoted <b class="var">$1</b>, <b class="var">$2</b>, <b class="var">...</b>, while <b class="var">$0</b> refers to the entire line. If <b class="var">FS</b> is null, the input line is split into one field per character.<div class="spacer">
</div>
Normally, any number of blanks separate fields. In order to set the field separator to a single blank, use the <b class="flag">-F</b> option with a value of &#8216;[&#160;]&#8217;. If a field separator of &#8216;t&#8217; is specified, <b class="name">awk</b> treats it as if &#8216;\t&#8217; had been specified and uses &#10216;TAB&#10217; as the field separator. In order to use a literal &#8216;t&#8217; as the field separator, use the <b class="flag">-F</b> option with a value of &#8216;[t]&#8217;.<div class="spacer">
</div>
A pattern-action statement has the form<div class="spacer">
</div>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<i class="arg">pattern</i> <b class="cmd">{</b> <i class="arg">action</i> <b class="cmd">}</b></div>
</blockquote>
<div class="spacer">
</div>
A missing <b class="cmd">{</b> <i class="arg">action</i> <b class="cmd">}</b> means print the line; a missing pattern always matches. Pattern-action statements are separated by newlines or semicolons.<div class="spacer">
</div>
Newlines are permitted after a terminating statement or following a comma (&#8216;,&#8217;), an open brace (&#8216;{&#8217;), a logical AND (&#8216;&amp;&amp;&#8217;), a logical OR (&#8216;||&#8217;), after the &#8216;do&#8217; or &#8216;else&#8217; keywords, or after the closing parenthesis of an &#8216;if&#8217;, &#8216;for&#8217;, or &#8216;while&#8217; statement. Additionally, a backslash (&#8216;\&#8217;) can be used to escape a newline between tokens.<div class="spacer">
</div>
An action is a sequence of statements. A statement can be one of the following:<div class="spacer">
</div>
<dl style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 6.00ex;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="cmd">if</b> (<i class="arg">expression</i>) <i class="arg">statement</i> [<span class="opt"><b class="cmd">else</b> <i class="arg">statement</i></span>]</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="cmd">while</b> (<i class="arg">expression</i>) <i class="arg">statement</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="cmd">for</b> (<i class="arg">expression</i>; <i class="arg">expression</i>; <i class="arg">expression</i>) <i class="arg">statement</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="cmd">for</b> (<i class="arg">var</i> <b class="cmd">in</b> <i class="arg">array</i>) <i class="arg">statement</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="cmd">do</b> <i class="arg">statement</i> <b class="cmd">while</b> (<i class="arg">expression</i>)</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="cmd">break</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="cmd">continue</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="cmd">{</b> [<span class="opt"><i class="arg">statement ...</i></span>] <b class="cmd">}</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="arg">expression</i> <code class="none"># commonly</code> <i class="arg">var</i> <code class="none">=</code> <i class="arg">expression</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="cmd">print</b> [<span class="opt"><i class="arg">expression-list</i></span>] [<span class="opt">&gt;<i class="arg">expression</i></span>]</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="cmd">printf</b> <i class="arg">format</i> [<span class="opt"><i class="arg">...</i>, <i class="arg">expression-list</i></span>] [<span class="opt">&gt;<i class="arg">expression</i></span>]</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="cmd">return</b> [<span class="opt"><i class="arg">expression</i></span>]</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="cmd">next</b> <code class="none"># skip remaining patterns on this input line</code></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="cmd">nextfile</b> <code class="none"># skip rest of this file, open next, start at top</code></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="cmd">delete</b> <i class="arg">array</i><b class="cmd">[</b><i class="arg">expression</i><b class="cmd">]</b> <code class="none"># delete an array element</code></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="cmd">delete</b> <i class="arg">array</i> <code class="none"># delete all elements of array</code></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="cmd">exit</b> [<span class="opt"><i class="arg">expression</i></span>] <code class="none"># exit immediately; status is</code> <i class="arg">expression</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
</dd>
</dl>
<div class="spacer">
</div>
Statements are terminated by semicolons, newlines or right braces. An empty <i class="arg">expression-list</i> stands for <i class="arg">$0</i>. String constants are quoted <code class="lit">&quot;&quot;</code>, with the usual C escapes recognized within (see <a class="link-man" href="../html1/printf.html">printf(1)</a> for a complete list of these). Expressions take on string or numeric values as appropriate, and are built using the operators <b class="cmd">+ - * / % ^</b> (exponentiation), and concatenation (indicated by whitespace). The operators <b class="cmd">! ++ -- += -= *= /= %= ^=</b> <b class="cmd">&gt; &gt;= &lt; &lt;= == != ?:</b> are also available in expressions. Variables may be scalars, array elements (denoted <code class="lit">x[i]</code>) or fields. Variables are initialized to the null string. Array subscripts may be any string, not necessarily numeric; this allows for a form of associative memory. Multiple subscripts such as <code class="lit">[i,j,k]</code> are permitted; the constituents are concatenated, separated by the value of <b class="var">SUBSEP</b> (see the section on variables below).<div class="spacer">
</div>
The <b class="cmd">print</b> statement prints its arguments on the standard output (or on a file if &gt;<i class="arg">file</i> or &gt;&gt;<i class="arg">file</i> is present or on a pipe if |&#160;<i class="arg">cmd</i> is present), separated by the current output field separator, and terminated by the output record separator. <i class="arg">file</i> and <i class="arg">cmd</i> may be literal names or parenthesized expressions; identical string values in different statements denote the same open file. The <b class="cmd">printf</b> statement formats its expression list according to the format (see <a class="link-man" href="../html1/printf.html">printf(1)</a>).<div class="spacer">
</div>
Patterns are arbitrary Boolean combinations (with <b class="cmd">! || &amp;&amp;</b>) of regular expressions and relational expressions. <b class="name">awk</b> supports extended regular expressions (EREs). See <a class="link-man" href="../html7/re_format.html">re_format(7)</a> for more information on regular expressions. Isolated regular expressions in a pattern apply to the entire line. Regular expressions may also occur in relational expressions, using the operators <b class="cmd">~</b> and <b class="cmd">!~</b>. /<i class="arg">re</i>/ is a constant regular expression; any string (constant or variable) may be used as a regular expression, except in the position of an isolated regular expression in a pattern.<div class="spacer">
</div>
A pattern may consist of two patterns separated by a comma; in this case, the action is performed for all lines from an occurrence of the first pattern through an occurrence of the second.<div class="spacer">
</div>
A relational expression is one of the following:<div class="spacer">
</div>
<dl style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 6.00ex;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="arg">expression matchop regular-expression</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="arg">expression relop expression</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="arg">expression</i> <b class="cmd">in</b> <i class="arg">array-name</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="cmd">(</b><i class="arg">expr</i>, <i class="arg">expr</i>, <i class="arg">...</i><b class="cmd">) in</b> <i class="arg">array-name</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
</dd>
</dl>
<div class="spacer">
</div>
where a <i class="arg">relop</i> is any of the six relational operators in C, and a <i class="arg">matchop</i> is either <b class="cmd">~</b> (matches) or <b class="cmd">!~</b> (does not match). A conditional is an arithmetic expression, a relational expression, or a Boolean combination of these.<div class="spacer">
</div>
The special patterns <b class="cmd">BEGIN</b> and <b class="cmd">END</b> may be used to capture control before the first input line is read and after the last. <b class="cmd">BEGIN</b> and <b class="cmd">END</b> do not combine with other patterns.<div class="spacer">
</div>
Variable names with special meanings:<div class="spacer">
</div>
<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="var">ARGC</b></dt>
<dd class="list-tag" style="margin-left: 9.00ex;">
Argument count, assignable.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="var">ARGV</b></dt>
<dd class="list-tag" style="margin-left: 9.00ex;">
Argument array, assignable; non-null members are taken as filenames.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="var">CONVFMT</b></dt>
<dd class="list-tag" style="margin-left: 9.00ex;">
Conversion format when converting numbers (default &#8220;<code class="lit">%.6g</code>&#8221;).</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="var">ENVIRON</b></dt>
<dd class="list-tag" style="margin-left: 9.00ex;">
Array of environment variables; subscripts are names.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="var">FILENAME</b></dt>
<dd class="list-tag" style="margin-left: 9.00ex;">
The name of the current input file.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="var">FNR</b></dt>
<dd class="list-tag" style="margin-left: 9.00ex;">
Ordinal number of the current record in the current file.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="var">FS</b></dt>
<dd class="list-tag" style="margin-left: 9.00ex;">
Regular expression used to separate fields; also settable by option <b class="flag">-F</b> <i class="arg">fs</i>.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="var">NF</b></dt>
<dd class="list-tag" style="margin-left: 9.00ex;">
Number of fields in the current record. <b class="var">$NF</b> can be used to obtain the value of the last field in the current record.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="var">NR</b></dt>
<dd class="list-tag" style="margin-left: 9.00ex;">
Ordinal number of the current record.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="var">OFMT</b></dt>
<dd class="list-tag" style="margin-left: 9.00ex;">
Output format for numbers (default &#8220;<code class="lit">%.6g</code>&#8221;).</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="var">OFS</b></dt>
<dd class="list-tag" style="margin-left: 9.00ex;">
Output field separator (default blank).</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="var">ORS</b></dt>
<dd class="list-tag" style="margin-left: 9.00ex;">
Output record separator (default newline).</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="var">RLENGTH</b></dt>
<dd class="list-tag" style="margin-left: 9.00ex;">
The length of the string matched by the <b class="fname">match</b>() function.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="var">RS</b></dt>
<dd class="list-tag" style="margin-left: 9.00ex;">
Input record separator (default newline).</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="var">RSTART</b></dt>
<dd class="list-tag" style="margin-left: 9.00ex;">
The starting position of the string matched by the <b class="fname">match</b>() function.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="var">SUBSEP</b></dt>
<dd class="list-tag" style="margin-left: 9.00ex;">
Separates multiple subscripts (default 034).</dd>
</dl>
</div>
<div class="section">
<h1 id="x46554e4354494f4e53">FUNCTIONS</h1> The awk language has a variety of built-in functions: arithmetic, string, input/output, general, and bit-operation.<div class="spacer">
</div>
Functions may be defined (at the position of a pattern-action statement) thusly:<div class="spacer">
</div>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit">function foo(a, b, c) { ...; return x }</code></div>
</blockquote>
<div class="spacer">
</div>
Parameters are passed by value if scalar, and by reference if array name; functions may be called recursively. Parameters are local to the function; all other variables are global. Thus local variables may be created by providing excess parameters in the function definition.<div class="subsection">
<h2 id="x41726974686d657469632046756e6374696f6e73">Arithmetic Functions</h2><dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">atan2</b>(<i class="farg">y</i>, <i class="farg">x</i>)</dt>
<dd class="list-tag" style="margin-left: 11.00ex;">
Return the arctangent of <i class="farg">y</i>/<i class="farg">x</i> in radians.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">cos</b>(<i class="farg">x</i>)</dt>
<dd class="list-tag" style="margin-left: 11.00ex;">
Return the cosine of <i class="farg">x</i>, where <i class="farg">x</i> is in radians.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">exp</b>(<i class="farg">x</i>)</dt>
<dd class="list-tag" style="margin-left: 11.00ex;">
Return the exponential of <i class="farg">x</i>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">int</b>(<i class="farg">x</i>)</dt>
<dd class="list-tag" style="margin-left: 11.00ex;">
Return <i class="farg">x</i> truncated to an integer value.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">log</b>(<i class="farg">x</i>)</dt>
<dd class="list-tag" style="margin-left: 11.00ex;">
Return the natural logarithm of <i class="farg">x</i>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">rand</b>()</dt>
<dd class="list-tag" style="margin-left: 11.00ex;">
Return a random number, <i class="farg">n</i>, such that 0&#8804;<i class="farg">n</i><code class="none">&lt;1</code>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">sin</b>(<i class="farg">x</i>)</dt>
<dd class="list-tag" style="margin-left: 11.00ex;">
Return the sine of <i class="farg">x</i>, where <i class="farg">x</i> is in radians.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">sqrt</b>(<i class="farg">x</i>)</dt>
<dd class="list-tag" style="margin-left: 11.00ex;">
Return the square root of <i class="farg">x</i>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">srand</b>(<i class="farg">expr</i>)</dt>
<dd class="list-tag" style="margin-left: 11.00ex;">
Sets seed for <b class="fname">rand</b>() to <i class="farg">expr</i> and returns the previous seed. If <i class="farg">expr</i> is omitted, the time of day is used instead.</dd>
</dl>
</div>
<div class="subsection">
<h2 id="x537472696e672046756e6374696f6e73">String Functions</h2><dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">gsub</b>(<i class="farg">r</i>, <i class="farg">t</i>, <i class="farg">s</i>)</dt>
<dd class="list-tag" style="margin-left: 15.00ex;">
The same as <b class="fname">sub</b>() except that all occurrences of the regular expression are replaced. <b class="fname">gsub</b>() returns the number of replacements.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">index</b>(<i class="farg">s</i>, <i class="farg">t</i>)</dt>
<dd class="list-tag" style="margin-left: 15.00ex;">
The position in <i class="farg">s</i> where the string <i class="farg">t</i> occurs, or 0 if it does not.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">length</b>(<i class="farg">s</i>)</dt>
<dd class="list-tag" style="margin-left: 15.00ex;">
The length of <i class="farg">s</i> taken as a string, or of <b class="var">$0</b> if no argument is given.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">match</b>(<i class="farg">s</i>, <i class="farg">r</i>)</dt>
<dd class="list-tag" style="margin-left: 15.00ex;">
The position in <i class="farg">s</i> where the regular expression <i class="farg">r</i> occurs, or 0 if it does not. The variable <b class="var">RSTART</b> is set to the starting position of the matched string (which is the same as the returned value) or zero if no match is found. The variable <b class="var">RLENGTH</b> is set to the length of the matched string, or -1 if no match is found.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">split</b>(<i class="farg">s</i>, <i class="farg">a</i>, <i class="farg">fs</i>)</dt>
<dd class="list-tag" style="margin-left: 15.00ex;">
Splits the string <i class="farg">s</i> into array elements <b class="var">a[1]</b>, <b class="var">a[2]</b>, <b class="var">...</b>, <b class="var">a[n]</b> and returns <b class="var">n</b>. The separation is done with the regular expression <i class="arg">fs</i> or with the field separator <b class="var">FS</b> if <i class="arg">fs</i> is not given. An empty string as field separator splits the string into one array element per character.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">sprintf</b>(<i class="farg">fmt</i>, <i class="farg">expr</i>, <i class="farg">...</i>)</dt>
<dd class="list-tag" style="margin-left: 15.00ex;">
The string resulting from formatting <i class="farg">expr</i>, <i class="farg">...</i> according to the <a class="link-man" href="../html1/printf.html">printf(1)</a> format <i class="farg">fmt</i>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">sub</b>(<i class="farg">r</i>, <i class="farg">t</i>, <i class="farg">s</i>)</dt>
<dd class="list-tag" style="margin-left: 15.00ex;">
Substitutes <i class="farg">t</i> for the first occurrence of the regular expression <i class="farg">r</i> in the string <i class="farg">s</i>. If <i class="farg">s</i> is not given, <b class="var">$0</b> is used. An ampersand (&#8216;&amp;&#8217;) in <i class="farg">t</i> is replaced in string <i class="farg">s</i> with regular expression <i class="farg">r</i>. A literal ampersand can be specified by preceding it with two backslashes (&#8216;\\&#8217;). A literal backslash can be specified by preceding it with another backslash (&#8216;\\&#8217;). <b class="fname">sub</b>() returns the number of replacements.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">substr</b>(<i class="farg">s</i>, <i class="farg">m</i>, <i class="farg">n</i>)</dt>
<dd class="list-tag" style="margin-left: 15.00ex;">
Return at most the <i class="farg">n</i>-character substring of <i class="farg">s</i> that begins at position <i class="farg">m</i> counted from 1. If <i class="farg">n</i> is omitted, or if <i class="farg">n</i> specifies more characters than are left in the string, the length of the substring is limited by the length of <i class="farg">s</i>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">tolower</b>(<i class="farg">str</i>)</dt>
<dd class="list-tag" style="margin-left: 15.00ex;">
Returns a copy of <i class="farg">str</i> with all upper-case characters translated to their corresponding lower-case equivalents.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">toupper</b>(<i class="farg">str</i>)</dt>
<dd class="list-tag" style="margin-left: 15.00ex;">
Returns a copy of <i class="farg">str</i> with all lower-case characters translated to their corresponding upper-case equivalents.</dd>
</dl>
</div>
<div class="subsection">
<h2 id="x496e7075742f4f757470757420616e642047656e6572616c2046756e6374696f6e73">Input/Output and General Functions</h2><dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">close</b>(<i class="farg">expr</i>)</dt>
<dd class="list-tag" style="margin-left: 20.00ex;">
Closes the file or pipe <i class="farg">expr</i>. <i class="farg">expr</i> should match the string that was used to open the file or pipe.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="arg">cmd</i> | <b class="cmd">getline</b> [<span class="opt"><b class="var">var</b></span>]</dt>
<dd class="list-tag" style="margin-left: 20.00ex;">
Read a record of input from a stream piped from the output of <i class="arg">cmd</i>. If <b class="var">var</b> is omitted, the variables <b class="var">$0</b> and <b class="var">NF</b> are set. Otherwise <b class="var">var</b> is set. If the stream is not open, it is opened. As long as the stream remains open, subsequent calls will read subsequent records from the stream. The stream remains open until explicitly closed with a call to <b class="fname">close</b>(). <b class="cmd">getline</b> returns 1 for a successful input, 0 for end of file, and -1 for an error.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">fflush</b>(<i class="farg">[expr]</i>)</dt>
<dd class="list-tag" style="margin-left: 20.00ex;">
Flushes any buffered output for the file or pipe <i class="farg">expr</i>, or all open files or pipes if <i class="farg">expr</i> is omitted. <i class="farg">expr</i> should match the string that was used to open the file or pipe.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">getline</b></dt>
<dd class="list-tag" style="margin-left: 20.00ex;">
Sets <b class="var">$0</b> to the next input record from the current input file. This form of <b class="cmd">getline</b> sets the variables <b class="var">NF</b>, <b class="var">NR</b>, and <b class="var">FNR</b>. <b class="cmd">getline</b> returns 1 for a successful input, 0 for end of file, and -1 for an error.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">getline</b> <b class="var">var</b></dt>
<dd class="list-tag" style="margin-left: 20.00ex;">
Sets <b class="var">$0</b> to variable <b class="var">var</b>. This form of <b class="cmd">getline</b> sets the variables <b class="var">NR</b> and <b class="var">FNR</b>. <b class="cmd">getline</b> returns 1 for a successful input, 0 for end of file, and -1 for an error.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">getline</b> [<span class="opt"><b class="var">var</b></span>] &#160;&lt;<i class="arg">file</i></dt>
<dd class="list-tag" style="margin-left: 20.00ex;">
Sets <b class="var">$0</b> to the next record from <i class="arg">file</i>. If <b class="var">var</b> is omitted, the variables <b class="var">$0</b> and <b class="var">NF</b> are set. Otherwise <b class="var">var</b> is set. If <i class="arg">file</i> is not open, it is opened. As long as the stream remains open, subsequent calls will read subsequent records from <i class="arg">file</i>. <i class="arg">file</i> remains open until explicitly closed with a call to <b class="fname">close</b>().</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">system</b>(<i class="farg">cmd</i>)</dt>
<dd class="list-tag" style="margin-left: 20.00ex;">
Executes <i class="farg">cmd</i> and returns its exit status.</dd>
</dl>
</div>
<div class="subsection">
<h2 id="x4269741e4f7065726174696f6e2046756e6374696f6e73">Bit-Operation Functions</h2><dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">compl</b>(<i class="farg">x</i>)</dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
Returns the bitwise complement of integer argument x.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">and</b>(<i class="farg">x</i>, <i class="farg">y</i>)</dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
Performs a bitwise AND on integer arguments x and y.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">or</b>(<i class="farg">x</i>, <i class="farg">y</i>)</dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
Performs a bitwise OR on integer arguments x and y.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">xor</b>(<i class="farg">x</i>, <i class="farg">y</i>)</dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
Performs a bitwise Exclusive-OR on integer arguments x and y.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">lshift</b>(<i class="farg">x</i>, <i class="farg">n</i>)</dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
Returns integer argument x shifted by n bits to the left.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">rshift</b>(<i class="farg">x</i>, <i class="farg">n</i>)</dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
Returns integer argument x shifted by n bits to the right.</dd>
</dl>
</div>
</div>
<div class="section">
<h1 id="x4558495420535441545553">EXIT STATUS</h1> The <b class="utility">awk</b> utility exits&#160;0 on success, and&#160;&gt;0 if an error occurs.<div class="spacer">
</div>
But note that the <b class="cmd">exit</b> expression can modify the exit status.</div>
<div class="section">
<h1 id="x4558414d504c4553">EXAMPLES</h1> Print lines longer than 72 characters:<div class="spacer">
</div>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit">length($0) &gt; 72</code></div>
</blockquote>
<div class="spacer">
</div>
Print first two fields in opposite order:<div class="spacer">
</div>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit">{ print $2, $1 }</code></div>
</blockquote>
<div class="spacer">
</div>
Same, with input fields separated by comma and/or blanks and tabs:<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
BEGIN { FS = &quot;,[ \t]*|[ \t]+&quot; } 
      { print $2, $1 }</pre>
<div class="spacer">
</div>
Add up first column, print sum and average:<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
{ s += $1 } 
END { print &quot;sum is&quot;, s, &quot; average is&quot;, s/NR }</pre>
<div class="spacer">
</div>
Print all lines between start/stop pairs:<div class="spacer">
</div>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit">/start/, /stop/</code></div>
</blockquote>
<div class="spacer">
</div>
Simulate echo(1):<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
BEGIN { # Simulate echo(1) 
        for (i = 1; i &lt; ARGC; i++) printf &quot;%s &quot;, ARGV[i] 
        printf &quot;\n&quot; 
        exit }</pre>
<div class="spacer">
</div>
Print an error message to standard error:<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
{ print &quot;error!&quot; &gt; &quot;/dev/stderr&quot; }</pre>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../html1/cut.html">cut(1)</a>, <a class="link-man" href="../html1/lex.html">lex(1)</a>, <a class="link-man" href="../html1/printf.html">printf(1)</a>, <a class="link-man" href="../html1/sed.html">sed(1)</a>, <a class="link-man" href="../html7/re_format.html">re_format(7)</a>, <a class="link-man" href="../html7/script.html">script(7)</a><div class="spacer">
</div>
<span class="ref"><span class="ref-auth">A. V. Aho</span>, <span class="ref-auth">B. W. Kernighan</span>, and <span class="ref-auth">P. J. Weinberger</span>, <span class="ref-title">The AWK Programming Language</span>, <i class="ref-issue">Addison-Wesley</i>, <span class="ref-date">1988</span>, <span class="ref-opt">ISBN 0-201-07981-X</span>.</span></div>
<div class="section">
<h1 id="x5354414e4441524453">STANDARDS</h1> The <b class="name">awk</b> utility is compliant with the IEEE Std 1003.1-2008 (&#8220;POSIX.1&#8221;) specification, except <b class="name">awk</b> does not support {n,m} pattern matching.<div class="spacer">
</div>
The flags [<span class="opt"><b class="flag">-dV</b></span>] and [<span class="opt"><b class="flag">-safe</b></span>], as well as the commands <b class="flag">fflush</b>, <b class="flag">compl</b>, <b class="flag">and</b>, <b class="flag">or</b>, <b class="flag">xor</b>, <b class="flag">lshift</b>, <b class="flag">rshift</b>, are extensions to that specification.</div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> An <b class="name">awk</b> utility appeared in Version&#160;7 AT&amp;T UNIX.</div>
<div class="section">
<h1 id="x42554753">BUGS</h1> There are no explicit conversions between numbers and strings. To force an expression to be treated as a number add 0 to it; to force it to be treated as a string concatenate <code class="lit">&quot;&quot;</code> to it.<div class="spacer">
</div>
The scope rules for variables in functions are a botch; the syntax is worse.</div>
</div>
</body>
</html>

