<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/posix/style.css" type="text/css" media="all"/>
<title>
GPROF(1)</title>
</head>
<body>
<div class="mandoc">
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">gprof</b> &#8212; <span class="desc">display call graph profile data</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1><table class="synopsis">
<col style="width: 5.00ex;"/>
<col/>
<tbody>
<tr>
<td>
gprof</td>
<td>
[<span class="opt"><b class="flag">-abcsz</b></span>] [<span class="opt"><b class="flag">-C</b>&#160;<i class="arg">count</i></span>] [<span class="opt"><b class="flag">-E</b>&#160;<i class="arg">name</i></span>] [<span class="opt"><b class="flag">-e</b>&#160;<i class="arg">name</i></span>] [<span class="opt"><b class="flag">-F</b>&#160;<i class="arg">name</i></span>] [<span class="opt"><b class="flag">-f</b>&#160;<i class="arg">name</i></span>] [<span class="opt"><b class="flag">-k</b>&#160;<i class="arg">from-name&#160;to-name</i></span>] [<span class="opt"><i class="arg">a.out</i>&#160;[<span class="opt"><i class="arg">gmon.out&#160;...</i></span>]</span>]</td>
</tr>
</tbody>
</table>
</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> <b class="name">gprof</b> produces an execution profile of C, Pascal, or Fortran77 programs. The effect of called routines is incorporated in the profile of each caller. The profile data is taken from the call graph profile file (<i class="file">gmon.out</i> default) which is created by programs that are compiled with the <b class="flag">-pg</b> option of <a class="link-man" href="../html1/cc.html">cc(1)</a>, <a class="link-man" href="../html1/pc.html">pc</a>, and <a class="link-man" href="../html1/f77.html">f77</a>. The <b class="flag">-pg</b> option also links in versions of the library routines that are compiled for profiling. <b class="name">gprof</b> reads the given object file (the default is <i class="file">a.out</i>) and establishes the relation between its symbol table and the call graph profile from <i class="file">gmon.out</i>. If more than one profile file is specified, the <b class="name">gprof</b> output shows the sum of the profile information in the given profile files.<div class="spacer">
</div>
<b class="name">gprof</b> calculates the amount of time spent in each routine. Next, these times are propagated along the edges of the call graph. Cycles are discovered, and calls into a cycle are made to share the time of the cycle. The first listing shows the functions sorted according to the time they represent including the time of their call graph descendants. Below each function entry is shown its (direct) call graph children, and how their times are propagated to this function. A similar display above the function shows how this function's time and the time of its descendants is propagated to its (direct) call graph parents.<div class="spacer">
</div>
Cycles are also shown, with an entry for the cycle as a whole and a listing of the members of the cycle and their contributions to the time and call counts of the cycle.<div class="spacer">
</div>
Second, a flat profile is given, similar to that provided by <a class="link-man" href="../html1/prof.html">prof</a>. This listing gives the total execution times, the call counts, the time in milliseconds the call spent in the routine itself, and the time in milliseconds the call spent in the routine itself including its descendants.<div class="spacer">
</div>
Finally, an index of the function names is provided.<div class="spacer">
</div>
The options are as follows:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-a</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Suppresses the printing of statically declared functions. If this option is given, all relevant information about the static function (e.g., time samples, calls to other functions, calls from other functions) belongs to the function loaded just before the static function in the <i class="file">a.out</i> file.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-b</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Suppresses the printing of a description of each field in the profile.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-C</b> <i class="arg">count</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Find a minimal set of arcs that can be broken to eliminate all cycles with <i class="arg">count</i> or more members. Caution: the algorithm used to break cycles is exponential, so using this option may cause <b class="name">gprof</b> to run for a very long time.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-c</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
The static call graph of the program is discovered by a heuristic that examines the text space of the object file. Static-only parents or children are shown with call counts of 0.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-E</b> <i class="arg">name</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Suppresses the printing of the graph profile entry for routine <i class="arg">name</i> (and its descendants) as <b class="flag">-e</b>, above, and also excludes the time spent in <i class="arg">name</i> (and its descendants) from the total and percentage time computations. (For example, <b class="flag">-E</b> <i class="arg">mcount</i> <b class="flag">-E</b> <i class="arg">mcleanup</i> is the default.)</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-e</b> <i class="arg">name</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Suppresses the printing of the graph profile entry for routine <i class="arg">name</i> and all its descendants (unless they have other ancestors that aren't suppressed). More than one <b class="flag">-e</b> option may be given. Only one <i class="arg">name</i> may be given with each <b class="flag">-e</b> option.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-F</b> <i class="arg">name</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Prints the graph profile entry of only the routine <i class="arg">name</i> and its descendants (as <b class="flag">-f</b>, above) and also uses only the times of the printed routines in total time and percentage computations. More than one <b class="flag">-F</b> option may be given. Only one <i class="arg">name</i> may be given with each <b class="flag">-F</b> option. The <b class="flag">-F</b> option overrides the <b class="flag">-E</b> option.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-f</b> <i class="arg">name</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Prints the graph profile entry of only the specified routine <i class="arg">name</i> and its descendants. More than one <b class="flag">-f</b> option may be given. Only one <i class="arg">name</i> may be given with each <b class="flag">-f</b> option.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-k</b> <i class="arg">from-name</i> <i class="arg">to-name</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Will delete any arcs from routine <i class="arg">from-name</i> to routine <i class="arg">to-name</i>. This can be used to break undesired cycles. More than one <b class="flag">-k</b> option may be given. Only one pair of routine names may be given with each <b class="flag">-k</b> option.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-s</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
A profile file <i class="file">gmon.sum</i> is produced that represents the sum of the profile information in all the specified profile files. This summary profile file may be given to later executions of <b class="name">gprof</b> (probably also with a <b class="flag">-s</b>) to accumulate profile data across several runs of an <i class="file">a.out</i> file.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-z</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Displays routines that have zero usage (as shown by call counts and accumulated time). This is useful with the <b class="flag">-c</b> option for discovering which routines were never called.</dd>
</dl>
</div>
<div class="section">
<h1 id="x454e5649524f4e4d454e54">ENVIRONMENT</h1><dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">PROFDIR</span></dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
Directory to place profiling information in a file named <i class="file">pid.progname</i>. If it is set to a null value, no profiling information is output. Otherwise, profiling information is placed in the file <i class="file">gmon.out</i>.</dd>
</dl>
</div>
<div class="section">
<h1 id="x46494c4553">FILES</h1><dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">a.out</i></dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
namelist and text space</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">gmon.out</i></dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
dynamic call graph and profile</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">gmon.sum</i></dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
summarized dynamic call graph and profile</dd>
</dl>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../html1/cc.html">cc(1)</a>, <a class="link-man" href="../html2/profil.html">profil(2)</a>, <a class="link-man" href="../html3/moncontrol.html">moncontrol(3)</a><div class="spacer">
</div>
<span class="ref"><span class="ref-auth">S. Graham</span>, <span class="ref-auth">P. Kessler</span>, and <span class="ref-auth">M. McKusick</span>, <span class="ref-title">An Execution Profiler for Modular Programs</span>, <i class="ref-jrnl">Software - Practice and Experience</i>, <span class="ref-vol">13</span>, <span class="ref-page">pp. 671-685</span>, <span class="ref-date">1983</span>.</span><div class="spacer">
</div>
<span class="ref"><span class="ref-auth">S. Graham</span>, <span class="ref-auth">P. Kessler</span>, and <span class="ref-auth">M. McKusick</span>, <span class="ref-title">gprof: A Call Graph Execution Profiler</span>, <i class="ref-jrnl">Proceedings of the SIGPLAN '82 Symposium on Compiler Construction, SIGPLAN Notices</i>, <span class="ref-num">6</span>, <span class="ref-vol">17</span>, <span class="ref-page">pp. 120-126</span>, <span class="ref-date">June 1982</span>.</span></div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> The <b class="name">gprof</b> profiler appeared in <span class="unix">4.2BSD</span>.</div>
<div class="section">
<h1 id="x42554753">BUGS</h1> The granularity of the sampling is shown, but remains statistical at best. We assume that the time for each execution of a function can be expressed by the total time for the function divided by the number of times the function is called. Thus the time propagated along the call graph arcs to the function's parents is directly proportional to the number of times that arc is traversed.<div class="spacer">
</div>
Parents that are not themselves profiled will have the time of their profiled children propagated to them, but they will appear to be spontaneously invoked in the call graph listing, and will not have their time propagated further. Similarly, signal catchers, even though profiled, will appear to be spontaneous (although for more obscure reasons). Any profiled children of signal catchers should have their times propagated properly, unless the signal catcher was invoked during the execution of the profiling routine, in which case all is lost.<div class="spacer">
</div>
The profiled program must call <a class="link-man" href="../html3/exit.html">exit(3)</a> or return normally for the profiling information to be saved in the <i class="file">gmon.out</i> file.</div>
</div>
</body>
</html>

