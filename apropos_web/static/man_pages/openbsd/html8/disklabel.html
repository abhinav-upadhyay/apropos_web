<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/posix/style.css" type="text/css" media="all"/>
<title>
DISKLABEL(8)</title>
</head>
<body>
<div class="mandoc">
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">disklabel</b> &#8212; <span class="desc">read and write disk pack label</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1><table class="synopsis">
<col style="width: 9.00ex;"/>
<col/>
<tbody>
<tr>
<td>
disklabel</td>
<td>
[<span class="opt"><b class="flag">-Acdtv</b></span>] [<span class="opt"><b class="flag">-h</b> | <b class="flag">-p</b> <i class="arg">unit</i></span>] [<span class="opt"><b class="flag">-T</b> <i class="arg">file</i></span>] <i class="arg">disk</i></td>
</tr>
</tbody>
</table>
<br/>
<table class="synopsis">
<col style="width: 9.00ex;"/>
<col/>
<tbody>
<tr>
<td>
disklabel</td>
<td>
<b class="flag">-w</b> [<span class="opt"><b class="flag">-Acdnv</b></span>] [<span class="opt"><b class="flag">-T</b> <i class="arg">file</i></span>] <i class="arg">disk</i> <i class="arg">disktype</i> [<span class="opt"><i class="arg">packid</i></span>]</td>
</tr>
</tbody>
</table>
<br/>
<table class="synopsis">
<col style="width: 9.00ex;"/>
<col/>
<tbody>
<tr>
<td>
disklabel</td>
<td>
<b class="flag">-e</b> [<span class="opt"><b class="flag">-Acdnv</b></span>] [<span class="opt"><b class="flag">-T</b> <i class="arg">file</i></span>] <i class="arg">disk</i></td>
</tr>
</tbody>
</table>
<br/>
<table class="synopsis">
<col style="width: 9.00ex;"/>
<col/>
<tbody>
<tr>
<td>
disklabel</td>
<td>
<b class="flag">-E</b> [<span class="opt"><b class="flag">-Acdnv</b></span>] [<span class="opt"><b class="flag">-F</b>|<b class="flag">-f</b> <i class="arg">file</i></span>] [<span class="opt"><b class="flag">-T</b> <i class="arg">file</i></span>] <i class="arg">disk</i></td>
</tr>
</tbody>
</table>
<br/>
<table class="synopsis">
<col style="width: 9.00ex;"/>
<col/>
<tbody>
<tr>
<td>
disklabel</td>
<td>
<b class="flag">-R</b> [<span class="opt"><b class="flag">-nv</b></span>] [<span class="opt"><b class="flag">-F</b>|<b class="flag">-f</b> <i class="arg">file</i></span>] <i class="arg">disk</i> <i class="arg">protofile</i></td>
</tr>
</tbody>
</table>
</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> The <b class="name">disklabel</b> utility can be used to install, examine, or modify the label on a disk drive or pack. The disk label contains information about disk characteristics (size, type, etc.) and the partition layout, stored on the disk itself. It is used by the operating system to optimize disk I/O and locate the filesystems resident on the disk.<div class="spacer">
</div>
<b class="name">disklabel</b> supports 15 configurable partitions, &#8216;a&#8217; through &#8216;p&#8217;, excluding &#8216;c&#8217;. The &#8216;c&#8217; partition describes the entire physical disk, is automatically created by the kernel, and cannot be modified or deleted by <b class="name">disklabel</b>. By convention, the &#8216;a&#8217; partition of the boot disk is the root partition, and the &#8216;b&#8217; partition of the boot disk is the swap partition, but all other letters can be used in any order for any other partitions as desired.<div class="spacer">
</div>
The options are as follows:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-A</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Automatically allocate all the disk space in the <span class="unix">OpenBSD</span> portion of the disk in the recommended manner. See <i class="link-sec"><a class="link-sec" href="#x4155544f4d41544943204449534b20414c4c4f434154494f4e">AUTOMATIC DISK ALLOCATION</a></i>, below.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-c</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Clear the system's in-core copy of the label and update it based on the on-disk label.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-d</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Use the <span class="emph">default</span> label. This ignores any existing <span class="unix">OpenBSD</span> disk label on the disk.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-E</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Use the built-in command-driven label editor described below.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-e</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Edit an existing disk label using the editor specified in the <span class="env">EDITOR</span> environment variable, or <a class="link-man" href="../html1/vi.html">vi(1)</a> if none is specified.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-F</b> <i class="arg">file</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Write entries to <i class="arg">file</i> in <a class="link-man" href="../html5/fstab.html">fstab(5)</a> format for any partitions for which mount point information is known. The entries will be written using disklabel UIDs. The <b class="flag">-F</b> flag is only valid when used in conjunction with the <b class="flag">-E</b> or <b class="flag">-R</b> flags. If <i class="arg">file</i> already exists, it will be overwritten.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-f</b> <i class="arg">file</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
The same as <b class="flag">-F</b> except that entries will be written using disk device names.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-h</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Print partition sizes in human readable format.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-n</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Make no permanent changes to the disklabel (useful for debugging purposes).</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-p</b> <i class="arg">unit</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Print partition sizes in <i class="arg">unit</i> instead of sectors. Valid units are b(ytes), c(ylinders), k(ilobytes), m(egabytes), g(igabytes) and t(erabytes). For operations other than displaying a partition the &#8216;<code class="lit">%</code>&#8217; (percent of total) and &#8216;<code class="lit">&amp;</code>&#8217; (percent of free) units are also accepted.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-R</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Restore a disk label that was formatted in a prior operation and saved in an ASCII file.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-T</b> <i class="arg">file</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Read the template for automatic allocation from <i class="arg">file</i> instead of using the builtin one. See <i class="link-sec"><a class="link-sec" href="#x4155544f4d41544943204449534b20414c4c4f434154494f4e">AUTOMATIC DISK ALLOCATION</a></i> below for the format.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-t</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Format the label as a <a class="link-man" href="../html5/disktab.html">disktab(5)</a> entry.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-v</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Print additional information during operation (verbose mode).</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-w</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Write a standard label on the designated drive.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="arg">disk</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Specify the <i class="arg">disk</i> to operate on. It can be specified by its full pathname, by an abbreviated disk form, or by its disklabel UID. In its abbreviated form, the path to the device, the &#8216;r&#8217; denoting &#8220;raw device&#8221;, and the partition letter, can all be omitted. For example, the first IDE disk can be specified as either <i class="file">/dev/rwd0c</i>, <i class="file">/dev/wd0c</i>, or <i class="arg">wd0</i>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="arg">disktype</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Specify a <i class="arg">disktype</i> entry from the <a class="link-man" href="../html5/disktab.html">disktab(5)</a> database.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="arg">packid</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Specify a pack identification string for the device (see below).</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="arg">protofile</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Used with the restore option (<b class="flag">-R</b>) to specify a file to read an ASCII label from.</dd>
</dl>
<div class="spacer">
</div>
The first form of the command (read) is used to examine the label on the named disk drive. It will display all of the parameters associated with the drive and its partition layout. The kernel's in-core copy of the label is displayed; if the disk has no label, or the partition types on the disk are incorrect, the kernel may have constructed or modified the label.<div class="spacer">
</div>
The second form of the command (write) is used to write a standard label on the designated drive. The drive parameters and partitions are taken from that file. If different disks of the same physical type are to have different partitions, it will be necessary to have separate disktab entries describing each, or to edit the label after installation as described below. The optional argument is a pack identification string, up to 16 characters long. The pack ID must be quoted if it contains blanks. The existing label will be updated via the in-core copy and any bootstrap code will be unaffected.<div class="spacer">
</div>
In the third form of the command (edit), the label is read from the in-core kernel copy and then supplied to an editor for changes. If no editor is specified in an <span class="env">EDITOR</span> environment variable, <a class="link-man" href="../html1/vi.html">vi(1)</a> is used. When the editor terminates, the formatted label is reread and used to rewrite the disk label. Existing bootstrap code is unchanged.<div class="spacer">
</div>
The built-in label editor (fourth form) provides a simple interactive label editor. Some commands or prompts take an optional unit. Available units are &#8216;b&#8217; for bytes, &#8216;c&#8217; for cylinders, &#8216;k&#8217; for kilobytes, &#8216;m&#8217; for megabytes, &#8216;g&#8217; for gigabytes, and &#8216;t&#8217; for terabytes. If no unit is given, the default is to use sectors (usually 512 bytes). Quantities will be rounded to the nearest cylinder when units are specified for sizes (or offsets). Commands may be aborted by entering &#8216;<code class="lit">^D</code>&#8217; (Control-D). Entering &#8216;<code class="lit">^D</code>&#8217; at the main &#8216;<code class="lit">&gt;</code>&#8217; prompt will exit the editor. At prompts that request a size, &#8216;<code class="lit">*</code>&#8217; may be entered to indicate the rest of the available space. The editor commands are as follows:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">?</b> | <b class="flag">h</b></dt>
<dd class="list-tag" style="margin-left: 9.00ex;">
Display help message with all available commands. There is also (simple) context-sensitive help available at most prompts.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">A</b></dt>
<dd class="list-tag" style="margin-left: 9.00ex;">
Allocate all the disk space in the recommended manner. See <i class="link-sec"><a class="link-sec" href="#x4155544f4d41544943204449534b20414c4c4f434154494f4e">AUTOMATIC DISK ALLOCATION</a></i>, below.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">a</b> [<span class="opt"><i class="arg">part</i></span>]</dt>
<dd class="list-tag" style="margin-left: 9.00ex;">
Add new partition. This option adds a new partition to the disk label. If no partition letter is specified (a-p), the user will be prompted for one.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">b</b></dt>
<dd class="list-tag" style="margin-left: 9.00ex;">
Set <span class="unix">OpenBSD</span> disk boundaries. This option tells <b class="name">disklabel</b> which parts of the disk it is allowed to modify. This option is probably only useful for ports with <a class="link-man" href="../html8/fdisk.html">fdisk(8)</a> partition tables where the ending sector in the MBR is incorrect. The user may enter &#8216;<code class="lit">*</code>&#8217; at the &#8220;Size&#8221; prompt to indicate the entire size of the disk (minus the starting sector). This is useful for disks where the fdisk partition table is incapable of storing the real size. Note: data may become corrupted if boundaries are extended such that they overlap with other resident operating systems.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">c</b> [<span class="opt"><i class="arg">part</i></span>]</dt>
<dd class="list-tag" style="margin-left: 9.00ex;">
Change the size of an existing partition. If no partition is specified, the user will be prompted for one. The new size may be in terms of the aforementioned units and may also be prefixed with &#8216;<code class="lit">+</code>&#8217; or &#8216;<code class="lit">-</code>&#8217; to change the size by a relative amount.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">D</b></dt>
<dd class="list-tag" style="margin-left: 9.00ex;">
Sets the disk label to the default values as reported by the kernel. This simulates the case where there is no disk label.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">d</b> [<span class="opt"><i class="arg">part</i></span>]</dt>
<dd class="list-tag" style="margin-left: 9.00ex;">
Delete an existing partition (or &#8216;<code class="lit">*</code>&#8217; to delete all partitions). If no partition is specified, the user will be prompted for one.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">e</b></dt>
<dd class="list-tag" style="margin-left: 9.00ex;">
Edit drive parameters. This option is used to set the following parameters: disk type, a descriptive label string, sectors/track, tracks/cylinder, sectors/cylinder, number of cylinders, total sectors, rpm, and interleave.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">g</b> [<span class="opt"><i class="arg">d</i> | <i class="arg">u</i></span>]</dt>
<dd class="list-tag" style="margin-left: 9.00ex;">
Set disk geometry based on what the <span class="emph">disk</span> or <span class="emph">user</span> thinks (the <span class="emph">user</span> geometry is simply what the label said before <b class="name">disklabel</b> made any changes).</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">i</b></dt>
<dd class="list-tag" style="margin-left: 9.00ex;">
Change the disklabel UID, specified as a 16-character hexadecimal string. If set to all zeros, a new UID will automatically be allocated when the disklabel is written to disk.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">l</b> [<span class="opt"><i class="arg">unit</i></span>]</dt>
<dd class="list-tag" style="margin-left: 9.00ex;">
Print the disk label header.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">M</b></dt>
<dd class="list-tag" style="margin-left: 9.00ex;">
Display this manual page. The manual page is piped through the pager specified by the <span class="env">PAGER</span> environment variable or 'less' if <span class="env">PAGER</span> is not set.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">m</b> [<span class="opt"><i class="arg">part</i></span>]</dt>
<dd class="list-tag" style="margin-left: 9.00ex;">
Modify parameters for an existing partition. If no partition is specified, the user will be prompted for one. This option allows the user to change the filesystem type, starting offset, partition size, and mount point for the specified partition. If expert mode is enabled (see <b class="flag">X</b> below), then block fragment size, block size, and cylinders per group can also be modified. Note that not all parameters are configurable for non-<span class="unix">BSD</span> partitions.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">n</b> [<span class="opt"><i class="arg">part</i></span>]</dt>
<dd class="list-tag" style="margin-left: 9.00ex;">
Name the mount point for an existing partition. If no partition is specified, the user will be prompted for one. This option is only valid if <b class="name">disklabel</b> was invoked with the <b class="flag">-f</b> flag.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">p</b> [<span class="opt"><i class="arg">unit</i></span>]</dt>
<dd class="list-tag" style="margin-left: 9.00ex;">
Print the current partition list. If a <span class="emph">unit</span> is given, the size and offsets are displayed in terms of the specified unit. If the unit is &#8216;*&#8217; it is automatically determined by the size of the smallest partition.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">q</b></dt>
<dd class="list-tag" style="margin-left: 9.00ex;">
Quit the editor. If any changes have been made, the user will be asked whether or not to save the changes to the on-disk label.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">R</b> [<span class="opt"><i class="arg">part</i></span>]</dt>
<dd class="list-tag" style="margin-left: 9.00ex;">
Resize a partition in an automatically allocated label, compacting unused space between partitions with a higher offset. The last partition will be shrunk if necessary. Works only for automatically allocated labels with no spoofed partitions.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">r</b></dt>
<dd class="list-tag" style="margin-left: 9.00ex;">
Recalculate free space. This command displays all the free areas on the disk and the total number of free sectors.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">s</b> [<span class="opt"><i class="arg">path</i></span>]</dt>
<dd class="list-tag" style="margin-left: 9.00ex;">
Save the label to a file in ASCII format (suitable for loading via the <b class="flag">-R</b> option). If no path is specified, the user will be prompted for one.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">U</b></dt>
<dd class="list-tag" style="margin-left: 9.00ex;">
Undo all changes made since entering the editor.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">u</b></dt>
<dd class="list-tag" style="margin-left: 9.00ex;">
Undo (or redo) last change. Entering <span class="emph">u</span> once will undo the last change. Entering it again will restore the change.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">w</b></dt>
<dd class="list-tag" style="margin-left: 9.00ex;">
Write the label to disk. This option will commit any changes to the on-disk label.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">X</b></dt>
<dd class="list-tag" style="margin-left: 9.00ex;">
Toggle &#8220;expert mode&#8221;. By default, some settings are reserved for experts only (such as the block and fragment size on ffs partitions).</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">x</b></dt>
<dd class="list-tag" style="margin-left: 9.00ex;">
Exit the editor without saving any changes to the on-disk label.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">z</b></dt>
<dd class="list-tag" style="margin-left: 9.00ex;">
Zero out the existing partition table and mountpoint information, leaving only the 'c' partition. The drive parameters are not changed.</dd>
</dl>
<div class="spacer">
</div>
In the restore form of the command (fifth form), the prototype file used to create the label should be in the same format as that produced when reading or editing a label. Comments are delimited by <i class="arg">#</i> and newline. Any existing bootstrap code will be unaffected.<div class="spacer">
</div>
The final three forms of <b class="name">disklabel</b> are used to install bootstrap code on machines where the bootstrap is part of the label.<div class="spacer">
</div>
Note that when a disk has no real <span class="unix">BSD</span> disklabel, the kernel creates a default label so that the disk can be used. This default label will include other partitions found on the disk if they are supported on your architecture. For example, on systems that support <a class="link-man" href="../html8/fdisk.html">fdisk(8)</a> partitions the default label will also include DOS and Linux partitions. However, these entries are not dynamic, they are fixed at the time <b class="name">disklabel</b> is run. That means that subsequent changes that affect non-<span class="unix">OpenBSD</span> partitions will not be present in the default label, though they may be updated by hand. To see the default label, run <b class="name">disklabel</b> with the <b class="flag">-d</b> flag. <b class="name">disklabel</b> can then be run with the <b class="flag">-e</b> flag and any entries pasted as desired from the default label into the real one.</div>
<div class="section">
<h1 id="x4155544f4d41544943204449534b20414c4c4f434154494f4e">AUTOMATIC DISK ALLOCATION</h1> The <b class="flag">-A</b> option and the editor command <b class="flag">A</b> automatically create a disklabel with a set of partitions suitable for a majority of <span class="unix">OpenBSD</span> installations. Any existing <span class="unix">OpenBSD</span> disklabel on the disk is ignored, but native partitions that would normally be spoofed are preserved in the disklabel, and are not modified during the allocation process.<div class="spacer">
</div>
Disk size determines the set of partitions which are created. Each partition is allocated space between a specified minimum and maximum. Initially, each partition is allocated its minimum space; remaining space is split between the partitions according to the given percentages, up to their maximum allowed space. Space left after all partitions have reached their maximum size is left unallocated. The sizes below are approximations, and may vary from architecture to architecture.<div class="spacer">
</div>
<span class="symb">Disks &gt; 7 Gigabytes</span><pre style="margin-left: 5.00ex;" class="lit display">
/		 5% of disk.  80M &#8211; 1G 
swap		 5% of disk.  80M &#8211; 2x max physical memory 
/tmp		 8% of disk. 120M &#8211; 4G 
/var		13% of disk.  80M &#8211; 2x size of crash dump 
/usr		 5% of disk. 900M &#8211; 2G 
/usr/X11R6	 3% of disk. 512M &#8211; 1G 
/usr/local	10% of disk.   2G &#8211; 10G 
/usr/src	 2% of disk.   1G &#8211; 2G 
/usr/obj	 4% of disk. 1.3G &#8211; 2G 
/home		45% of disk.   1G &#8211; 300G</pre>
<div class="spacer">
</div>
<span class="symb">Disks &gt; 2 Gigabytes</span><pre style="margin-left: 5.00ex;" class="lit display">
/		 5% of disk. 800M &#8211; 2G 
swap		10% of disk.  80M &#8211; 2x max physical memory 
/usr		78% of disk. 900M &#8211; 3G 
/home		 7% of disk. 256M &#8211; 2G</pre>
<div class="spacer">
</div>
<span class="symb">Disks &gt; 700 Megabytes</span><pre style="margin-left: 5.00ex;" class="lit display">
/		95% of disk. 700M &#8211; 4G 
swap		 5% of disk.   1M &#8211; 2x max physical memory</pre>
<div class="spacer">
</div>
A template for the automatic allocation can be passed to disklabel using the <b class="flag">-T</b> option. The template consists of one line per partition, with each line giving mountpoint, min-max size range, and percentage of disk, space-separated. Max can be unlimited by specifying '*'. If only mountpoint and min size are given, the partition is created with that exact size.<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
/		250M 
swap		80-256M	10% 
/tmp		120M-4G	8% 
/var		80M-4G	13% 
/usr		900M-2G	5% 
/usr/X11R6	512M-1G	3% 
/usr/local	2G-10G	10% 
/usr/src	1-2G	2% 
/usr/obj	1.3G-2G	4% 
/home		1G-*	45%</pre>
</div>
<div class="section">
<h1 id="x46494c4553">FILES</h1><dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/etc/disktab</i></dt>
<dd class="list-tag" style="margin-left: 32.00ex;">
Disk description file.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/usr/mdec/</i><span class="emph">xx</span>boot</dt>
<dd class="list-tag" style="margin-left: 32.00ex;">
Primary bootstrap.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/usr/mdec/boot</i><span class="emph">xx</span></dt>
<dd class="list-tag" style="margin-left: 32.00ex;">
Secondary bootstrap.</dd>
</dl>
</div>
<div class="section">
<h1 id="x4558414d504c4553">EXAMPLES</h1> Display the in-core label for sd0 as obtained via <i class="file">/dev/rsd0c</i>:<div class="spacer">
</div>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit"># disklabel sd0</code></div>
</blockquote>
<div class="spacer">
</div>
Create a label for sd0 based on information for &#8220;sd2212&#8221; found in <i class="file">/etc/disktab</i>. Any existing bootstrap code will be clobbered.<div class="spacer">
</div>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit"># disklabel -w /dev/rsd0c sd2212 foo</code></div>
</blockquote>
<div class="spacer">
</div>
Read the on-disk label from a disk with DUID 3eb7f9da875cb9ee, edit it and reinstall in-core as well as on-disk. Existing bootstrap code is unaffected.<div class="spacer">
</div>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit"># disklabel -E 3eb7f9da875cb9ee</code></div>
</blockquote>
<div class="spacer">
</div>
Restore the on-disk and in-core label for sd0 from information in <i class="file">mylabel</i>. Existing bootstrap code is unaffected.<div class="spacer">
</div>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit"># disklabel -R sd0 mylabel</code></div>
</blockquote>
</div>
<div class="section">
<h1 id="x444941474e4f5354494353">DIAGNOSTICS</h1> The kernel device drivers will not allow the size of a disk partition to be decreased or the offset of a partition to be changed while it is open. Some device drivers create a label containing only a single large partition if a disk is unlabeled; thus, the label must be written to the &#8216;a&#8217; partition of the disk while it is open. This sometimes requires the desired label to be set in two steps, the first one creating at least one other partition, and the second setting the label on the new partition while shrinking the &#8216;a&#8217; partition.<div class="spacer">
</div>
On some machines the bootstrap code may not fit entirely in the area allocated for it by some filesystems. As a result, it may not be possible to have filesystems on some partitions of a &#8220;bootable&#8221; disk. When installing bootstrap code, <b class="name">disklabel</b> checks for these cases. If the installed boot code would overlap a partition of type <span class="define">FS_UNUSED</span> it is marked as type <span class="define">FS_BOOT</span>. The <a class="link-man" href="../html8/newfs.html">newfs(8)</a> utility will disallow creation of filesystems on <span class="define">FS_BOOT</span> partitions. Conversely, if a partition has a type other than <span class="define">FS_UNUSED</span> or <span class="define">FS_BOOT</span>, <b class="name">disklabel</b> will not install bootstrap code that overlaps it.</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../html5/disklabel.html">disklabel(5)</a>, <a class="link-man" href="../html5/disktab.html">disktab(5)</a>, <a class="link-man" href="../html8/scan_ffs.html">scan_ffs(8)</a></div>
<div class="section">
<h1 id="x43415645415453">CAVEATS</h1> The maximum disk and partition size is 64PB.<div class="spacer">
</div>
On some machines, such as Sparc and Sparc64, partition tables may not exhibit the full functionality described above.</div>
</div>
</body>
</html>

