<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/posix/style.css" type="text/css" media="all"/>
<title>
PPPD(8)</title>
</head>
<body>
<div class="mandoc">
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">pppd</b> &#8212; <span class="desc">Point-to-Point Protocol daemon</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1><table class="synopsis">
<col style="width: 4.00ex;"/>
<col/>
<tbody>
<tr>
<td>
pppd</td>
<td>
[<span class="opt"><i class="arg">tty_name</i></span>] [<span class="opt"><i class="arg">speed</i></span>] [<span class="opt"><i class="arg">options</i></span>]</td>
</tr>
</tbody>
</table>
</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> PPP is the protocol used for establishing internet links over dial-up modems, DSL connections, and many other types of point-to-point links. The <b class="name">pppd</b> daemon works together with the kernel <a class="link-man" href="../html4/ppp.html">ppp(4)</a> driver to establish and maintain a PPP link with another system (called the <span class="emph">peer</span>) and to negotiate Internet Protocol (IP) addresses for each end of the link. <b class="name">pppd</b> can also authenticate the peer and/or supply authentication information to the peer. PPP can be used with other network protocols besides IP, but such use is becoming increasingly rare.</div>
<div class="section">
<h1 id="x4652455155454e544c592055534544204f5054494f4e53">FREQUENTLY USED OPTIONS</h1><dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="arg">tty_name</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Use the serial port called <i class="arg">ttyname</i> to communicate with the peer. The string &#8220;/dev/&#8221; is prepended to <i class="arg">ttyname</i> to form the name of the device to open. If no device name is given, or if the name of the terminal connected to the standard input is given, <b class="name">pppd</b> will use that terminal, and will not fork to put itself in the background. This option is privileged if the <b class="flag">noauth</b> option is used.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="arg">speed</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
An option that is a decimal number is taken as the desired baud rate for the serial device. On systems such as <span class="unix">4.4BSD</span> and <span class="unix">OpenBSD</span>, any speed can be specified. Other systems (e.g., Linux, SunOS) only support the commonly used baud-rates.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">active-filter</b> <i class="arg">filter-expression</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Specifies a packet filter to be applied to data packets to determine which packets are to be regarded as link activity, and therefore reset the idle timer, or cause the link to be brought up in demand-dialling mode. This option is useful in conjunction with the <b class="flag">idle</b> option if there are packets being sent or received regularly over the link (for example, routing information packets) which would otherwise prevent the link from ever appearing to be idle. The <i class="arg">filter-expression</i> syntax is as described for <a class="link-man" href="../html8/tcpdump.html">tcpdump(8)</a>, except that qualifiers which are inappropriate for a PPP link, such as <i class="arg">ether</i> and <i class="arg">arp</i>, are not permitted. Generally the filter expression should be enclosed in single quotes to prevent whitespace in the expression from being interpreted by the shell.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">asyncmap</b> <i class="arg">map</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
This option sets the Async-Control-Character-Map (ACCM) for this end of the link. The ACCM is a set of 32 bits, one for each of the ASCII control characters with values from 0 to 31, where a 1 bit indicates that the corresponding control character should not be used in PPP packets sent to this system. The map is encoded as a hexadecimal number (without a leading 0x) where the least significant bit (00000001) represents character 0 and the most significant bit (80000000) represents character 31. <b class="name">pppd</b> will ask the peer to send these characters as a 2-byte escape sequence. If multiple <b class="flag">asyncmap</b> options are given, the values are ORed together. If no <b class="flag">asyncmap</b> option is given, no async character map will be negotiated for the receive direction; the peer should then escape <span class="emph">all</span> control characters. To escape transmitted characters, use the <b class="flag">escape</b> option.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">auth</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Require the peer to authenticate itself before allowing network packets to be sent or received.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">call</b> <i class="arg">name</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Read options from the file <i class="file">/etc/ppp/peers/name</i>. This file may contain privileged options, such as <b class="flag">noauth</b>, even if <b class="name">pppd</b> is not being run by root. The <i class="arg">name</i> string may not begin with &#8220;/&#8221; or include &#8220;..&#8221; as a pathname component. The format of the options file is described below.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">connect</b> <i class="arg">script</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Usually there is something which needs to be done to prepare the link before the PPP protocol can be started; for instance, with a dial-up modem, commands need to be sent to the modem to dial the appropriate phone number. This option specifies an command for <b class="name">pppd</b> to execute (by passing it to a shell) before attempting to start PPP negotiation. The <a class="link-man" href="../html8/chat.html">chat(8)</a> program is often useful here, as it provides a way to send arbitrary strings to a modem and respond to received characters. This option is privileged if the <b class="flag">noauth</b> option is used.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">crtscts</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Specifies that <b class="name">pppd</b> should set the serial port to use hardware flow control using the RTS and CTS signals in the RS-232 interface. If neither the <b class="flag">crtscts</b> nor the <b class="flag">nocrtscts</b> option is given, the hardware flow control setting for the serial port is left unchanged.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">defaultroute</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Add a default route to the system routing tables, using the peer as the gateway, when IPCP negotiation is successfully completed. This entry is removed when the PPP connection is broken. This option is privileged if the <b class="flag">nodefaultroute</b> option has been specified.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">disconnect</b> <i class="arg">script</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Execute the command specified by <i class="arg">script</i>, by passing it to a shell, after <b class="name">pppd</b> has terminated the link. This command could, for example, issue commands to the modem to cause it to hang up if hardware modem control signals were not available. The disconnect script is not run if the modem has already hung up. This option is privileged if the <b class="flag">noauth</b> option is used.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">escape</b> <i class="arg">xx,yy,...</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Specifies that certain characters should be escaped on transmission (regardless of whether the peer requests them to be escaped with its async control character map). The characters to be escaped are specified as a list of hex numbers separated by commas. Note that almost any character can be specified for the <b class="flag">escape</b> option, unlike the <b class="flag">asyncmap</b> option which only allows control characters to be specified. The characters which may not be escaped are those with hex values 0x20 - 0x3f or 0x5e.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">file</b> <i class="arg">name</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Read options from file <i class="arg">name</i> (the format is described below). The file must be readable by the user who has invoked <b class="name">pppd</b>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">lock</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Specifies that <b class="name">pppd</b> should create a UUCP-style lock file for the serial device to ensure exclusive access to the device.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">mru</b> <i class="arg">n</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Set the MRU (Maximum Receive Unit) value to <i class="arg">n</i>. <b class="name">pppd</b> will ask the peer to send packets of no more than <i class="arg">n</i> bytes. The value of <i class="arg">n</i> must be between 128 and 16384; the default is 1500. A value of 296 works well on very slow links (40 bytes for TCP/IP header + 256 bytes of data). Note that for the IPv6 protocol, the MRU must be at least 1280.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">mtu</b> <i class="arg">n</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Set the MTU (Maximum Transmit Unit) value to <i class="arg">n</i>. Unless the peer requests a smaller value via MRU negotiation, <b class="name">pppd</b> will request that the kernel networking code send data packets of no more than <i class="arg">n</i> bytes through the PPP network interface. Note that for the IPv6 protocol, the MTU must be at least 1280.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">passive</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Enables the &#8220;passive&#8221; option in the LCP. With this option, <b class="name">pppd</b> will attempt to initiate a connection; if no reply is received from the peer, <b class="name">pppd</b> will then just wait passively for a valid LCP packet from the peer, instead of exiting, as it would without this option.</dd>
</dl>
</div>
<div class="section">
<h1 id="x4f5054494f4e53">OPTIONS</h1><dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="opt"><i class="arg">local_IP_address</i></span>]:[<span class="opt"><i class="arg">remote_IP_address</i></span>]</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Set the local and/or remote interface IP addresses. Either one may be omitted. The IP addresses can be specified with a host name or in decimal dot notation (e.g., 150.234.56.78). The default local address is the (first) IP address of the system (unless the <b class="flag">noipdefault</b> option is given). The remote address will be obtained from the peer if not specified in any option. Thus, in simple cases, this option is not required. If a local and/or remote IP address is specified with this option, <b class="name">pppd</b> will not accept a different value from the peer in the IPCP negotiation, unless the <b class="flag">ipcp-accept-local</b> and/or <b class="flag">ipcp-accept-remote</b> options are given, respectively.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">bsdcomp</b> <i class="arg">nr,nt</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Request that the peer compress packets that it sends, using the BSD-Compress scheme, with a maximum code size of <i class="arg">nr</i> bits, and agree to compress packets sent to the peer with a maximum code size of <i class="arg">nt</i> bits. If <i class="arg">nt</i> is not specified, it defaults to the value given for <i class="arg">nr</i>. Values in the range 9 to 15 may be used for <i class="arg">nr</i> and <i class="arg">nt</i>; larger values give better compression but consume more kernel memory for compression dictionaries. Alternatively, a value of 0 for <i class="arg">nr</i> or <i class="arg">nt</i> disables compression in the corresponding direction. <b class="flag">nobsdcomp</b> or <b class="flag">bsdcomp 0</b> disables BSD-Compress compression entirely.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">chap-interval</b> <i class="arg">n</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
If this option is given, <b class="name">pppd</b> will rechallenge the peer every <i class="arg">n</i> seconds.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">chap-max-challenge</b> <i class="arg">n</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Set the maximum number of CHAP challenge transmissions to <i class="arg">n</i> (default 10).</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">chap-restart</b> <i class="arg">n</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Set the CHAP restart interval (retransmission timeout for challenges) to <i class="arg">n</i> seconds (default 3).</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">debug</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Enables connection debugging facilities. If this option is given, <b class="name">pppd</b> will log the contents of all control packets sent or received in a readable form. The packets are logged through <a class="link-man" href="../html8/syslogd.html">syslogd(8)</a> with facility <i class="arg">daemon</i> and level <i class="arg">debug</i>. This information can be directed to a file by setting up <i class="file">/etc/syslog.conf</i> appropriately (see <a class="link-man" href="../html5/syslog.conf.html">syslog.conf(5)</a>).</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">default-asyncmap</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Disable asyncmap negotiation, forcing all control characters to be escaped for both the transmit and the receive direction.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">default-mru</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Disable MRU (Maximum Receive Unit) negotiation. With this option, <b class="name">pppd</b> will use the default MRU value of 1500 bytes for both the transmit and receive direction.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">deflate</b> <i class="arg">nr,nt</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Request that the peer compress packets that it sends, using the Deflate scheme, with a maximum window size of <i class="arg">2**nr</i> bytes, and agree to compress packets sent to the peer with a maximum window size of <i class="arg">2**nt</i> bytes. If <i class="arg">nt</i> is not specified, it defaults to the value given for <i class="arg">nr</i>. Values in the range 8 to 15 may be used for <i class="arg">nr</i> and <i class="arg">nt</i>; larger values give better compression but consume more kernel memory for compression dictionaries. Alternatively, a value of 0 for <i class="arg">nr</i> or <i class="arg">nt</i> disables compression in the corresponding direction. Use <b class="flag">nodeflate</b> or <b class="flag">deflate 0</b> to disable Deflate compression entirely. (Note: <b class="name">pppd</b> requests Deflate compression in preference to BSD-Compress if the peer can do either.)</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">demand</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Initiate the link only on demand, i.e., when data traffic is present. With this option, the remote IP address must be specified by the user on the command line or in an options file. <b class="name">pppd</b> will initially configure the interface and enable it for IP traffic without connecting to the peer. When traffic is available, <b class="name">pppd</b> will connect to the peer and perform negotiation, authentication, etc. When this is completed, <b class="name">pppd</b> will commence passing data packets (i.e., IP packets) across the link.<div class="spacer">
</div>
The <b class="flag">demand</b> option implies the <b class="flag">persist</b> option. If this behaviour is not desired, use the <b class="flag">nopersist</b> option after the <b class="flag">demand</b> option. The <b class="flag">idle</b> and <b class="flag">holdoff</b> options are also useful in conjunction with the <b class="flag">demand</b> option.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">domain</b> <i class="arg">d</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Append the domain name <i class="arg">d</i> to the local host name for authentication purposes. For example, if <a class="link-man" href="../html3/gethostname.html">gethostname(3)</a> returns the name porsche, but the fully qualified domain name is porsche.Quotron.COM, you could specify <b class="flag">domain Quotron.COM</b>. <b class="name">pppd</b> would then use the name <i class="arg">porsche.Quotron.COM</i> for looking up secrets in the secrets file, and as the default name to send to the peer when authenticating itself to the peer. This option is privileged.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">holdoff</b> <i class="arg">n</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Specifies how many seconds to wait before re-initiating the link after it terminates. This option only has any effect if the <b class="flag">persist</b> or <b class="flag">demand</b> option is used. The holdoff period is not applied if the link was terminated because it was idle.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">idle</b> <i class="arg">n</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Specifies that <b class="name">pppd</b> should disconnect if the link is idle for <i class="arg">n</i> seconds. The link is idle when no data packets (i.e., IP packets) are being sent or received. Note: it is not advisable to use this option with the <b class="flag">persist</b> option without the <b class="flag">demand</b> option. If the <b class="flag">active-filter</b> option is given, data packets which are rejected by the specified activity filter also count as the link being idle.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">ipcp-accept-local</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
With this option, <b class="name">pppd</b> will accept the peer's idea of our local IP address, even if the local IP address was specified in an option.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">ipcp-accept-remote</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
With this option, <b class="name">pppd</b> will accept the peer's idea of its (remote) IP address, even if the remote IP address was specified in an option.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">ipcp-max-configure</b> <i class="arg">n</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Set the maximum number of IPCP configure-request transmissions to <i class="arg">n</i> (default 10).</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">ipcp-max-failure</b> <i class="arg">n</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Set the maximum number of IPCP configure-NAKs returned before starting to send configure-Rejects to <i class="arg">n</i> (default 10).</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">ipcp-max-terminate</b> <i class="arg">n</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Set the maximum number of IPCP terminate-request transmissions to <i class="arg">n</i> (default 3).</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">ipcp-restart</b> <i class="arg">n</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Set the IPCP restart interval (retransmission timeout) to <i class="arg">n</i> seconds (default 3).</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">ipparam</b> <i class="arg">string</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Provides an extra parameter to the ip-up and ip-down scripts. If this option is given, the <i class="arg">string</i> supplied is given as the 6th parameter to those scripts.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">kdebug</b> <i class="arg">n</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Enable debugging code in the kernel-level PPP driver. The argument <i class="arg">n</i> is a number which is the sum of the following values: 1 to enable general debug messages, 2 to request that the contents of received packets be printed, and 4 to request that the contents of transmitted packets be printed. On most systems, messages printed by the kernel are logged by <a class="link-man" href="../html8/syslogd.html">syslogd(8)</a> to a file as directed in the <i class="file">/etc/syslog.conf</i> configuration file.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">lcp-echo-failure</b> <i class="arg">n</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
If this option is given, <b class="name">pppd</b> will presume the peer to be dead if <i class="arg">n</i> LCP echo-requests are sent without receiving a valid LCP echo-reply. If this happens, <b class="name">pppd</b> will terminate the connection. Use of this option requires a non-zero value for the <b class="flag">lcp-echo-interval</b> parameter. This option can be used to enable <b class="name">pppd</b> to terminate after the physical connection has been broken (e.g., the modem has hung up) in situations where no hardware modem control lines are available.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">lcp-echo-interval</b> <i class="arg">n</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
If this option is given, <b class="name">pppd</b> will send an LCP echo-request frame to the peer every <i class="arg">n</i> seconds. Normally the peer should respond to the echo-request by sending an echo-reply. This option can be used with the <b class="flag">lcp-echo-failure</b> option to detect that the peer is no longer connected.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">lcp-max-configure</b> <i class="arg">n</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Set the maximum number of LCP configure-request transmissions to <i class="arg">n</i> (default 10).</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">lcp-max-failure</b> <i class="arg">n</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Set the maximum number of LCP configure-NAKs returned before starting to send configure-Rejects to <i class="arg">n</i> (default 10).</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">lcp-max-terminate</b> <i class="arg">n</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Set the maximum number of LCP terminate-request transmissions to <i class="arg">n</i> (default 3).</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">lcp-restart</b> <i class="arg">n</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Set the LCP restart interval (retransmission timeout) to <i class="arg">n</i> seconds (default 3).</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">local</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Don't use the modem control lines. With this option, <b class="name">pppd</b> will ignore the state of the CD (Carrier Detect) signal from the modem and will not change the state of the DTR (Data Terminal Ready) signal.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">login</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Use the system password database for authenticating the peer using PAP, and record the user in the system wtmp file. Note that the peer must have an entry in the <i class="file">/etc/ppp/pap-secrets</i> file as well as the system password database to be allowed access.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">maxconnect</b> <i class="arg">n</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Terminate the connection when it has been available for network traffic for <i class="arg">n</i> seconds (i.e., <i class="arg">n</i> seconds after the first network control protocol comes up).</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">modem</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Use the modem control lines. This option is the default. With this option, <b class="name">pppd</b> will wait for the CD (Carrier Detect) signal from the modem to be asserted when opening the serial device (unless a connect script is specified), and it will drop the DTR (Data Terminal Ready) signal briefly when the connection is terminated and before executing the connect script. On Ultrix, this option implies hardware flow control, as for the <b class="flag">crtscts</b> option.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">modem_chat</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Use the modem control lines during the chat script. The default is to ignore the state of the CD (Carrier Detect) signal from the modem during the chat script. If you are using a <a class="link-man" href="../html4/cua.html">cua(4)</a> device (as opposed to a <a class="link-man" href="../html4/tty.html">tty(4)</a> device) you should set this option. You should not use this option with a dialback setup as it will cause the chat script to exit when carrier drops.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">ms-dns</b> [<span class="opt"><i class="arg">addr</i></span>]</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
If <b class="name">pppd</b> is acting as a server for Microsoft Windows clients, this option allows <b class="name">pppd</b> to supply one or two DNS (Domain Name Server) addresses to the clients. The first instance of this option specifies the primary DNS address; the second instance (if given) specifies the secondary DNS address. (This option was present in some older versions of <b class="name">pppd</b> under the name <b class="flag">dns-addr</b>.)</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">ms-wins</b> [<span class="opt"><i class="arg">addr</i></span>]</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
If <b class="name">pppd</b> is acting as a server for Microsoft Windows or &#8220;Samba&#8221; clients, this option allows <b class="name">pppd</b> to supply one or two WINS (Windows Internet Name Services) server addresses to the clients. The first instance of this option specifies the primary WINS address; the second instance (if given) specifies the secondary WINS address.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">name</b> <i class="arg">name</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Set the name of the local system for authentication purposes to <i class="arg">name</i>. This is a privileged option. With this option, <b class="name">pppd</b> will use lines in the secrets files which have <i class="arg">name</i> as the second field when looking for a secret to use in authenticating the peer. In addition, unless overridden with the <b class="flag">user</b> option, <i class="arg">name</i> will be used as the name to send to the peer when authenticating the local system to the peer. (Note that <b class="name">pppd</b> does not append the domain name to <i class="arg">name</i>.)</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">netmask</b> <i class="arg">n</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Set the interface netmask to <i class="arg">n</i>, a 32-bit netmask in &#8220;decimal dot&#8221; notation (e.g. 255.255.255.0). If this option is given, the value specified is ORed with the default netmask. The default netmask is chosen based on the negotiated remote IP address; it is the appropriate network mask for the class of the remote IP address, ORed with the netmasks for any non point-to-point network interfaces in the system which are on the same network. (Note: on some platforms, <b class="name">pppd</b> will always use 255.255.255.255 for the netmask, if that is the only appropriate value for a point-to-point interface.)</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">noaccomp</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Disable Address/Control compression in both directions (send and receive).</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">noauth</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Do not require the peer to authenticate itself. This option is privileged if the <b class="flag">auth</b> option is specified in <i class="file">/etc/ppp/options</i>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">nobsdcomp</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Disables BSD-Compress compression; <b class="name">pppd</b> will not request or agree to compress packets using the BSD-Compress scheme.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">noccp</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Disable CCP (Compression Control Protocol) negotiation. This option should only be required if the peer is buggy and gets confused by requests from <b class="name">pppd</b> for CCP negotiation.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">nocrtscts</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Disable hardware flow control (i.e., RTS/CTS) on the serial port. If neither the <b class="flag">crtscts</b> nor the <b class="flag">nocrtscts</b> option is given, the hardware flow control setting for the serial port is left unchanged.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">nodefaultroute</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Disable the <b class="flag">defaultroute</b> option. The system administrator who wishes to prevent users from creating default routes with <b class="name">pppd</b> can do so by placing this option in the <i class="file">/etc/ppp/options</i> file.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">nodeflate</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Disables Deflate compression; <b class="name">pppd</b> will not request or agree to compress packets using the Deflate scheme.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">nodetach</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Don't detach from the controlling terminal. Without this option, if a serial device other than the terminal on the standard input is specified, <b class="name">pppd</b> will fork to become a background process.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">noip</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Disable IPCP negotiation and IP communication. This option should only be required if the peer is buggy and gets confused by requests from <b class="name">pppd</b> for IPCP negotiation.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">noipdefault</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Disables the default behaviour when no local IP address is specified, which is to determine (if possible) the local IP address from the hostname. With this option, the peer will have to supply the local IP address during IPCP negotiation (unless it was specified explicitly on the command line or in an options file).</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">nomagic</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Disable magic number negotiation. With this option, <b class="name">pppd</b> cannot detect a looped-back line. This option should only be needed if the peer is buggy.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">nopcomp</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Disable protocol field compression negotiation in both the receive and the transmit direction.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">nopersist</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Exit once a connection has been made and terminated. This is the default unless the <b class="flag">persist</b> or <b class="flag">demand</b> option has been specified.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">nopredictor1</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Do not accept or agree to Predictor-1 compression.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">noproxyarp</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Disable the <b class="flag">proxyarp</b> option. The system administrator who wishes to prevent users from creating proxy ARP entries with <b class="name">pppd</b> can do so by placing this option in the <i class="file">/etc/ppp/options</i> file.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">novj</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Disable Van Jacobson style TCP/IP header compression in both the transmit and the receive direction.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">novjccomp</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Disable the connection-ID compression option in Van Jacobson style TCP/IP header compression. With this option, <b class="name">pppd</b> will not omit the connection-ID byte from Van Jacobson compressed TCP/IP headers, nor ask the peer to do so.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">papcrypt</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Indicates that all secrets in the <i class="file">/etc/ppp/pap-secrets</i> file which are used for checking the identity of the peer are encrypted, and thus <b class="name">pppd</b> should not accept a password which, before encryption, is identical to the secret from the <i class="file">/etc/ppp/pap-secrets</i> file.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">pap-max-authreq</b> <i class="arg">n</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Set the maximum number of PAP authenticate-request transmissions to <i class="arg">n</i> (default 10).</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">pap-restart</b> <i class="arg">n</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Set the PAP restart interval (retransmission timeout) to <i class="arg">n</i> seconds (default 3).</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">pap-timeout</b> <i class="arg">n</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Set the maximum time that <b class="name">pppd</b> will wait for the peer to authenticate itself with PAP to <i class="arg">n</i> seconds (0 means no limit).</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">pass-filter</b> <i class="arg">filter-expression</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Specifies a packet filter to apply to data packets being sent or received to determine which packets should be allowed to pass. Packets which are rejected by the filter are silently discarded. This option can be used to prevent specific network protocols using up link bandwidth, or to provide a basic firewall capability. The <i class="arg">filter-expression</i> syntax is as described for <a class="link-man" href="../html8/tcpdump.html">tcpdump(8)</a>, except that qualifiers which are inappropriate for a PPP link, such as <i class="arg">ether</i> and <i class="arg">arp</i>, are not permitted. Generally the filter expression should be enclosed in single quotes to prevent whitespace in the expression from being interpreted by the shell. Note that it is possible to apply different constraints to incoming and outgoing packets using the <b class="flag">inbound</b> and <b class="flag">outbound</b> qualifiers.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">persist</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Do not exit after a connection is terminated; instead try to reopen the connection.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">predictor1</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Request that the peer compress frames that it sends using Predictor-1 compression, and agree to compress transmitted frames with Predictor-1 if requested. This option has no effect unless the kernel driver supports Predictor-1 compression.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">proxyarp</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Add an entry to this system's ARP (Address Resolution Protocol) table with the IP address of the peer and the Ethernet address of this system. This will have the effect of making the peer appear to other systems to be on the local Ethernet.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">remotename</b> <i class="arg">name</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Set the assumed name of the remote system for authentication purposes to <i class="arg">name</i>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">refuse-chap</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
With this option, <b class="name">pppd</b> will not agree to authenticate itself to the peer using CHAP.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">refuse-pap</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
With this option, <b class="name">pppd</b> will not agree to authenticate itself to the peer using PAP.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">require-chap</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Require the peer to authenticate itself using CHAP (Challenge Handshake Authentication Protocol) authentication.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">require-pap</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Require the peer to authenticate itself using PAP (Password Authentication Protocol) authentication.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">silent</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
With this option, <b class="name">pppd</b> will not transmit LCP packets to initiate a connection until a valid LCP packet is received from the peer (as for the `passive' option with ancient versions of <b class="name">pppd</b>).</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">usehostname</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Enforce the use of the hostname (with domain name appended, if given) as the name of the local system for authentication purposes (overrides the <b class="flag">name</b> option).</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">user</b> <i class="arg">name</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Sets the name used for authenticating the local system to the peer to <i class="arg">name</i>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">vj-max-slots</b> <i class="arg">n</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Sets the number of connection slots to be used by the Van Jacobson TCP/IP header compression and decompression code to <i class="arg">n</i>, which must be between 2 and 16, inclusive.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">welcome</b> <i class="arg">script</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Run the executable or shell command specified by <i class="arg">script</i> before initiating PPP negotiation, after the connect script (if any) has completed. This option is privileged if the <b class="flag">noauth</b> option is used.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">xonxoff</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Use software flow control (i.e., XON/XOFF) to control the flow of data on the serial port.</dd>
</dl>
</div>
<div class="section">
<h1 id="x4f5054494f4e532046494c4553">OPTIONS FILES</h1> Options can be taken from files as well as the command line. <b class="name">pppd</b> reads options from the files <i class="file">/etc/ppp/options</i>, <i class="file">~/.ppprc</i> and /etc/ppp/options.<i class="arg">ttyname</i> (in that order) before processing the options on the command line. (In fact, the command-line options are scanned to find the terminal name before the options.<i class="arg">ttyname</i> file is read.) In forming the name of the options.<i class="arg">ttyname</i> file, the initial /dev/ is removed from the terminal name, and any remaining / characters are replaced with dots.<div class="spacer">
</div>
An options file is parsed into a series of words, delimited by whitespace. Whitespace can be included in a word by enclosing the word in double-quotes (&quot;). A backslash (\) quotes the following character. A hash (#) starts a comment, which continues until the end of the line. There is no restriction on using the <b class="flag">file</b> or <b class="flag">call</b> options within an options file.</div>
<div class="section">
<h1 id="x5345435552495459">SECURITY</h1> Users must be in group &#8220;network&#8221; to be able to use <b class="name">pppd</b>.<div class="spacer">
</div>
<b class="name">pppd</b> provides system administrators with sufficient access control that PPP access to a server machine can be provided to legitimate users without fear of compromising the security of the server or the network it's on. In part this is provided by the <i class="file">/etc/ppp/options file</i>, where the administrator can place options to restrict the ways in which <b class="name">pppd</b> can be used, and in part by the PAP and CHAP secrets files, where the administrator can restrict the set of IP addresses which individual users may use.<div class="spacer">
</div>
The normal way that <b class="name">pppd</b> should be set up is to have the <b class="flag">auth</b> option in the <i class="file">/etc/ppp/options</i> file. (This may become the default in later releases.) If users wish to use <b class="name">pppd</b> to dial out to a peer which will refuse to authenticate itself (such as an internet service provider), the system administrator should create an options file under <i class="file">/etc/ppp/peers</i> containing the <b class="flag">noauth</b> option, the name of the serial port to use, and the <b class="flag">connect</b> option (if required), plus any other appropriate options. In this way, <b class="name">pppd</b> can be set up to allow non-privileged users to make unauthenticated connections only to trusted peers.<div class="spacer">
</div>
As indicated above, some security-sensitive options are privileged, which means that they may not be used by an ordinary non-privileged user running a setuid-root <b class="name">pppd</b>, either on the command line, in the user's <i class="file">~/.ppprc</i> file, or in an options file read using the <b class="flag">file</b> option. Privileged options may be used in the <i class="file">/etc/ppp/options</i> file or in an options file read using the <b class="flag">call</b> option. If <b class="name">pppd</b> is being run by the root user, privileged options can be used without restriction.</div>
<div class="section">
<h1 id="x41555448454e5449434154494f4e">AUTHENTICATION</h1> Authentication is the process whereby one peer convinces the other of its identity. This involves the first peer sending its name to the other, together with some kind of secret information which could only come from the genuine authorized user of that name. In such an exchange, we will call the first peer the &#8220;client&#8221; and the other the &#8220;server&#8221;. The client has a name by which it identifies itself to the server, and the server also has a name by which it identifies itself to the client. Generally the genuine client shares some secret (or password) with the server, and authenticates itself by proving that it knows that secret. Very often, the names used for authentication correspond to the internet hostnames of the peers, but this is not essential.<div class="spacer">
</div>
At present, <b class="name">pppd</b> supports two authentication protocols: the Password Authentication Protocol (PAP) and the Challenge Handshake Authentication Protocol (CHAP). PAP involves the client sending its name and a cleartext password to the server to authenticate itself. In contrast, the server initiates the CHAP authentication exchange by sending a challenge to the client (the challenge packet includes the server's name). The client must respond with a response which includes its name plus a hash value derived from the shared secret and the challenge, in order to prove that it knows the secret.<div class="spacer">
</div>
The PPP protocol, being symmetrical, allows both peers to require the other to authenticate itself. In that case, two separate and independent authentication exchanges will occur. The two exchanges could use different authentication protocols, and in principle, different names could be used in the two exchanges.<div class="spacer">
</div>
The default behaviour of <b class="name">pppd</b> is to agree to authenticate if requested, and to not require authentication from the peer. However, <b class="name">pppd</b> will not agree to authenticate itself with a particular protocol if it has no secrets which could be used to do so.<div class="spacer">
</div>
<b class="name">pppd</b> stores secrets for use in authentication in secrets files (<i class="file">/etc/ppp/pap-secrets</i> for PAP, <i class="file">/etc/ppp/chap-secrets</i> for CHAP). Both secrets files have the same format. The secrets files can contain secrets for <b class="name">pppd</b> to use in authenticating itself to other systems, as well as secrets for <b class="name">pppd</b> to use when authenticating other systems to itself.<div class="spacer">
</div>
Each line in a secrets file contains one secret. Any following words on the same line are taken to be a list of acceptable IP addresses for that client. If there are only 3 words on the line, or if the first word is &#8220;-&#8221;, then all IP addresses are disallowed. To allow any address, use &#8220;*&#8221;. A word starting with &#8220;!&#8221; indicates that the specified address is <span class="emph">not</span> acceptable. An address may be followed by &#8220;/&#8221; and a number <i class="arg">n</i>, to indicate a whole subnet, i.e., all addresses which have the same value in the most significant <i class="arg">n</i> bits. Case is significant in the client and server names and in the secret.<div class="spacer">
</div>
If the secret starts with an `@', what follows is assumed to be the name of a file from which to read the secret. A &#8220;*&#8221; as the client or server name matches any name. When selecting a secret, <b class="name">pppd</b> takes the best match, i.e., the match with the fewest wildcards.<div class="spacer">
</div>
Thus a secrets file contains both secrets for use in authenticating other hosts, plus secrets which we use for authenticating ourselves to others. When <b class="name">pppd</b> is authenticating the peer (checking the peer's identity), it chooses a secret with the peer's name in the first field and the name of the local system in the second field. The name of the local system defaults to the hostname, with the domain name appended if the <b class="flag">domain</b> option is used. This default can be overridden with the <b class="flag">name</b> option, except when the <b class="flag">usehostname</b> option is used.<div class="spacer">
</div>
When <b class="name">pppd</b> is choosing a secret to use in authenticating itself to the peer, it first determines what name it is going to use to identify itself to the peer. This name can be specified by the user with the <b class="flag">user</b> option. If this option is not used, the name defaults to the name of the local system, determined as described in the previous paragraph. Then <b class="name">pppd</b> looks for a secret with this name in the first field and the peer's name in the second field. <b class="name">pppd</b> will know the name of the peer if CHAP authentication is being used, because the peer will have sent it in the challenge packet. However, if PAP is being used, <b class="name">pppd</b> will have to determine the peer's name from the options specified by the user. The user can specify the peer's name directly with the <b class="flag">remotename</b> option. Otherwise, if the remote IP address was specified by a name (rather than in numeric form), that name will be used as the peer's name. Failing that, <b class="name">pppd</b> will use the null string as the peer's name.<div class="spacer">
</div>
When authenticating the peer with PAP, the supplied password is first compared with the secret from the secrets file. If the password doesn't match the secret, the password is encrypted using <a class="link-man" href="../html3/crypt.html">crypt(3)</a> and checked against the secret again. Thus secrets for authenticating the peer can be stored in encrypted form if desired. If the <b class="flag">papcrypt</b> option is given, the first (unencrypted) comparison is omitted, for better security.<div class="spacer">
</div>
Furthermore, if the <b class="flag">login</b> option was specified, the username and password are also checked against the system password database. Thus, the system administrator can set up the pap-secrets file to allow PPP access only to certain users, and to restrict the set of IP addresses that each user can use. Typically, when using the <b class="flag">login</b> option, the secret in <i class="file">/etc/ppp/pap-secrets</i> would be (), which will match any password supplied by the peer. This avoids the need to have the same secret in two places.<div class="spacer">
</div>
Authentication must be satisfactorily completed before IPCP (or any other Network Control Protocol) can be started. If the peer is required to authenticate itself, and fails to do so, <b class="name">pppd</b> will terminate the link (by closing LCP). If IPCP negotiates an unacceptable IP address for the remote host, IPCP will be closed. IP packets can only be sent or received when IPCP is open.<div class="spacer">
</div>
In some cases it is desirable to allow some hosts which can't authenticate themselves to connect and use one of a restricted set of IP addresses, even when the local host generally requires authentication. If the peer refuses to authenticate itself when requested, <b class="name">pppd</b> takes that as equivalent to authenticating with PAP using the empty string for the username and password. Thus, by adding a line to the pap-secrets file which specifies the empty string for the client and password, it is possible to allow restricted access to hosts which refuse to authenticate themselves.</div>
<div class="section">
<h1 id="x524f5554494e47">ROUTING</h1> When IPCP negotiation is completed successfully, <b class="name">pppd</b> will inform the kernel of the local and remote IP addresses for the PPP interface. This is sufficient to create a host route to the remote end of the link, which will enable the peers to exchange IP packets. Communication with other machines generally requires further modification to routing tables and/or ARP (Address Resolution Protocol) tables. In most cases the <b class="flag">defaultroute</b> and/or <b class="flag">proxyarp</b> options are sufficient for this, but in some cases further intervention is required. The <i class="file">/etc/ppp/ip-up</i> script can be used for this.<div class="spacer">
</div>
Sometimes it is desirable to add a default route through the remote host, as in the case of a machine whose only connection to the Internet is through the PPP interface. The <b class="flag">defaultroute</b> option causes <b class="name">pppd</b> to create such a default route when IPCP comes up, and delete it when the link is terminated.<div class="spacer">
</div>
In some cases it is desirable to use proxy ARP, for example on a server machine connected to a LAN, in order to allow other hosts to communicate with the remote host. The <b class="flag">proxyarp</b> option causes <b class="name">pppd</b> to look for a network interface on the same subnet as the remote host (an interface supporting broadcast and ARP, which is up and not a point-to-point or loopback interface). If found, <b class="name">pppd</b> creates a permanent, published ARP entry with the IP address of the remote host and the hardware address of the network interface found.<div class="spacer">
</div>
When the <b class="flag">demand</b> option is used, the interface IP addresses have already been set at the point when IPCP comes up. If <b class="name">pppd</b> has not been able to negotiate the same addresses that it used to configure the interface (for example when the peer is an ISP that uses dynamic IP address assignment), <b class="name">pppd</b> has to change the interface IP addresses to the negotiated addresses. This may disrupt existing connections, and the use of demand dialling with peers that do dynamic IP address assignment is not recommended.</div>
<div class="section">
<h1 id="x53435249505453">SCRIPTS</h1> <b class="name">pppd</b> invokes scripts at various stages in its processing which can be used to perform site-specific ancillary processing. These scripts are usually shell scripts, but could be executable code files instead. <b class="name">pppd</b> does not wait for the scripts to finish. <b class="name">pppd</b> runs the scripts with standard input, output and error redirected to <i class="file">/dev/null</i>, and with an environment that is empty except for some environment variables that give information about the link. The environment variables that <b class="name">pppd</b> sets are:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">DEVICE</span></dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
The name of the serial tty device being used.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">IFNAME</span></dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
The name of the network interface being used.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">IPLOCAL</span></dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
The IP address for the local end of the link. This is only set when IPCP has come up.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">IPREMOTE</span></dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
The IP address for the remote end of the link. This is only set when IPCP has come up.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">PEERNAME</span></dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
The authenticated name of the peer. This is only set if the peer authenticates itself.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">SPEED</span></dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
The baud rate of the tty device.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">UID</span></dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
The real user ID of the user who invoked <b class="name">pppd</b>.</dd>
</dl>
<div class="spacer">
</div>
<b class="name">pppd</b> invokes the following scripts, if they exist. It is not an error if they don't exist.<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="file">/etc/ppp/auth-up</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
A program or script which is executed after the remote system successfully authenticates itself. It is executed with the parameters<div class="spacer">
</div>
<i class="arg">interface-name peer-name user-name tty-device speed</i><div class="spacer">
</div>
Note that this script is not executed if the peer doesn't authenticate itself, for example when the <b class="flag">noauth</b> option is used.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="file">/etc/ppp/auth-down</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
A program or script which is executed when the link goes down, if <i class="file">/etc/ppp/auth-up</i> was previously executed. It is executed in the same manner with the same parameters as <i class="file">/etc/ppp/auth-up</i>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="file">/etc/ppp/ip-up</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
A program or script which is executed when the link is available for sending and receiving IP packets (that is, IPCP has come up). It is executed with the parameters<div class="spacer">
</div>
<i class="arg">interface-name tty-device speed local-IP-address remote-IP-address ipparam</i></dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="file">/etc/ppp/ip-down</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
A program or script which is executed when the link is no longer available for sending and receiving IP packets. This script can be used for undoing the effects of the <i class="file">/etc/ppp/ip-up</i> script. It is invoked in the same manner and with the same parameters as the ip-up script.</dd>
</dl>
</div>
<div class="section">
<h1 id="x46494c4553">FILES</h1><dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="file">/etc/ppp/pap-secrets</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Usernames, passwords and IP addresses for PAP authentication. This file should be owned by root and not readable or writable by any other user. <b class="name">pppd</b> will log a warning if this is not the case.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="file">/etc/ppp/chap-secrets</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Names, secrets and IP addresses for CHAP authentication. As for <i class="file">/etc/ppp/pap-secrets</i>, this file should be owned by root and not readable or writable by any other user. <b class="name">pppd</b> will log a warning if this is not the case.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="file">/etc/ppp/options</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
System default options for <b class="name">pppd</b>, read before user default options or command-line options.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="file">~/.ppprc</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
User default options, read before /etc/ppp/options.<i class="arg">ttyname</i>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="file">/etc/ppp/options.</i><i class="arg">ttyname</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
System default options for the serial port being used, read after <i class="file">~/.ppprc</i>. In forming the <i class="arg">ttyname</i> part of this filename, an initial /dev/ is stripped from the port name (if present), and any slashes in the remaining part are converted to dots.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="file">/etc/ppp/peers</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
A directory containing options files which may contain privileged options, even if <b class="name">pppd</b> was invoked by a user other than root. The system administrator can create options files in this directory to permit non-privileged users to dial out without requiring the peer to authenticate, but only to certain trusted peers.</dd>
</dl>
</div>
<div class="section">
<h1 id="x4558414d504c4553">EXAMPLES</h1> The following examples assume that the <i class="file">/etc/ppp/options</i> file contains the <b class="flag">auth</b> option (as in the default <i class="file">/etc/ppp/options</i> file in the PPP distribution).<div class="spacer">
</div>
Probably the most common use of <b class="name">pppd</b> is to dial out to an ISP. This can be done with a command such as<div class="spacer">
</div>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit">pppd call isp</code></div>
</blockquote>
<div class="spacer">
</div>
where the <i class="file">/etc/ppp/peers/isp</i> file is set up by the system administrator to contain something like this:<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
ttyS0 19200 crtscts 
connect '/usr/sbin/chat -v -f /etc/ppp/chat-isp' 
noauth</pre>
<div class="spacer">
</div>
In this example, we are using chat to dial the ISP's modem and go through any logon sequence required. The <i class="file">/etc/ppp/chat-isp</i> file contains the script used by chat; it could for example contain something like this:<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
ABORT &quot;NO CARRIER&quot; 
ABORT &quot;NO DIALTONE&quot; 
ABORT &quot;ERROR&quot; 
ABORT &quot;NO ANSWER&quot; 
ABORT &quot;BUSY&quot; 
ABORT &quot;Username/Password Incorrect&quot; 
&quot;&quot; &quot;at&quot; 
OK &quot;at&amp;d0&amp;c1&quot; 
OK &quot;atdt2468135&quot; 
&quot;name:&quot; &quot;^Umyuserid&quot; 
&quot;word:&quot; &quot;\qmypassword&quot; 
&quot;ispts&quot; &quot;\q^Uppp&quot; 
&quot;~-^Uppp-~&quot;</pre>
<div class="spacer">
</div>
See the <a class="link-man" href="../html8/chat.html">chat(8)</a> man page for details of chat scripts.<div class="spacer">
</div>
<b class="name">pppd</b> can also be used to provide a dial-in PPP service for users. If the users already have login accounts, the simplest way to set up the PPP service is to let the users log in to their accounts and run <b class="name">pppd</b> (installed setuid-root) with a command such as<div class="spacer">
</div>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit">pppd proxyarp</code></div>
</blockquote>
<div class="spacer">
</div>
To allow a user to use the PPP facilities, you need to allocate an IP address for that user's machine and create an entry in <i class="file">/etc/ppp/pap-secrets</i> or <i class="file">/etc/ppp/chap-secrets</i> (depending on which authentication method the PPP implementation on the user's machine supports), so that the user's machine can authenticate itself. For example, if Joe has a machine called &#8220;joespc&#8221; which is to be allowed to dial in to the machine called &#8220;server&#8221; and use the IP address joespc.my.net, you would add an entry like this to <i class="file">/etc/ppp/pap-secrets</i> or <i class="file">/etc/ppp/chap-secrets</i>:<div class="spacer">
</div>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit">joespc	server	&quot;joe's secret&quot;	joespc.my.net</code></div>
</blockquote>
<div class="spacer">
</div>
Alternatively, you can create a username called (for example) &#8220;ppp&#8221;, whose login shell is <b class="name">pppd</b> and whose home directory is <i class="file">/etc/ppp</i>. Options to be used when <b class="name">pppd</b> is run this way can be put in <i class="file">/etc/ppp/.ppprc</i>.<div class="spacer">
</div>
If your serial connection is any more complicated than a piece of wire, you may need to arrange for some control characters to be escaped. In particular, it is often useful to escape XON (^Q) and XOFF (^S), using <b class="flag">asyncmap a0000</b>. If the path includes a telnet, you probably should escape ^] as well (<b class="flag">asyncmap 200a0000</b>). If the path includes an rlogin, you will need to use the <b class="flag">escape ff</b> option on the end which is running the rlogin client, since many rlogin implementations are not transparent; they will remove the sequence (0xff, 0xff, 0x73, 0x73, followed by any 8 bytes) from the stream.</div>
<div class="section">
<h1 id="x444941474e4f5354494353">DIAGNOSTICS</h1> Messages are sent to the <a class="link-man" href="../html8/syslogd.html">syslogd(8)</a> daemon using facility <span class="define">LOG_DAEMON</span>. (This can be overridden by recompiling <b class="name">pppd</b> with the macro <span class="define">LOG_PPP</span> defined as the desired facility.) See the <a class="link-man" href="../html8/syslogd.html">syslogd(8)</a> documentation for details of where the syslog daemon will write the messages. On most systems, the syslog daemon uses the <i class="file">/etc/syslog.conf</i> file to specify the destination(s) for syslog messages. You may need to edit that file to suit.<div class="spacer">
</div>
The <b class="flag">debug</b> option causes the contents of all control packets sent or received to be logged, that is, all LCP, PAP, CHAP or IPCP packets. This can be useful if the PPP negotiation does not succeed or if authentication fails. If debugging is enabled at compile time, the <b class="flag">debug</b> option also causes other debugging messages to be logged.<div class="spacer">
</div>
Debugging can also be enabled or disabled by sending a SIGUSR1 signal to the <b class="name">pppd</b> process. This signal acts as a toggle.</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../html4/cua.html">cua(4)</a>, <a class="link-man" href="../html4/ppp.html">ppp(4)</a>, <a class="link-man" href="../html4/tty.html">tty(4)</a>, <a class="link-man" href="../html8/chat.html">chat(8)</a>, <a class="link-man" href="../html8/syslogd.html">syslogd(8)</a>, <a class="link-man" href="../html8/tcpdump.html">tcpdump(8)</a><div class="spacer">
</div>
<span class="ref"><span class="ref-auth">V. Jacobson</span>, <span class="ref-title">Compressing TCP/IP Headers for Low-Speed Serial Links</span>, <span class="ref-rep">RFC 1144</span>, <span class="ref-date">February 1990</span>.</span><div class="spacer">
</div>
<span class="ref"><span class="ref-auth">R. Rivest</span>, <span class="ref-title">The MD5 Message-Digest Algorithm</span>, <span class="ref-rep">RFC 1321</span>, <span class="ref-date">April 1992</span>.</span><div class="spacer">
</div>
<span class="ref"><span class="ref-auth">G. McGregor</span>, <span class="ref-title">The PPP Internet Protocol Control Protocol (IPCP)</span>, <span class="ref-rep">RFC 1332</span>, <span class="ref-date">May 1992</span>.</span><div class="spacer">
</div>
<span class="ref"><span class="ref-auth">B. Lloyd</span> and <span class="ref-auth">W. Simpson</span>, <span class="ref-title">PPP Authentication Protocols</span>, <span class="ref-rep">RFC 1334</span>, <span class="ref-date">October 1992</span>.</span><div class="spacer">
</div>
<span class="ref"><span class="ref-auth">W. Simpson</span>, <span class="ref-title">The Point-to-Point Protocol (PPP)</span>, <span class="ref-rep">RFC 1661</span>, <span class="ref-date">July 1994</span>.</span><div class="spacer">
</div>
<span class="ref"><span class="ref-auth">W. Simpson</span>, <span class="ref-title">PPP in HDLC-like Framing</span>, <span class="ref-rep">RFC 1662</span>, <span class="ref-date">July 1994</span>.</span><div class="spacer">
</div>
<span class="ref"><span class="ref-auth">W. Simpson</span>, <span class="ref-title">PPP Challenge Handshake Authentication Protocol (CHAP)</span>, <span class="ref-rep">RFC 1994</span>, <span class="ref-date">August 1996</span>.</span></div>
<div class="section">
<h1 id="x4e4f544553">NOTES</h1> Some limited degree of control can be exercised over a running <b class="name">pppd</b> process by sending it a signal from the list below.<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
SIGINT, SIGTERM</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
These signals cause <b class="name">pppd</b> to terminate the link (by closing LCP), restore the serial device settings, and exit.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
SIGHUP</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
This signal causes <b class="name">pppd</b> to terminate the link, restore the serial device settings, and close the serial device. If the <b class="flag">persist</b> or <b class="flag">demand</b> option has been specified, <b class="name">pppd</b> will try to reopen the serial device and start another connection (after the holdoff period). Otherwise <b class="name">pppd</b> will exit. If this signal is received during the holdoff period, it causes <b class="name">pppd</b> to end the holdoff period immediately.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
SIGUSR1</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
This signal toggles the state of the <b class="flag">debug</b> option.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
SIGUSR2</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
This signal causes <b class="name">pppd</b> to renegotiate compression. This can be useful to re-enable compression after it has been disabled as a result of a fatal decompression error. (Fatal decompression errors generally indicate a bug in one or other implementation.)</dd>
</dl>
</div>
<div class="section">
<h1 id="x415554484f5253">AUTHORS</h1> <span class="author">Paul Mackerras</span> &lt;<a class="link-mail" href="mailto:Paul.Mackerras@samba.org">Paul.Mackerras@samba.org</a>&gt;, based on earlier work by Drew Perkins, Brad Clements, Karl Fox, Greg Christy, and Brad Parker.</div>
<div class="section">
<h1 id="x42554753">BUGS</h1> Scripts should be run as root, but are not.</div>
</div>
</body>
</html>

