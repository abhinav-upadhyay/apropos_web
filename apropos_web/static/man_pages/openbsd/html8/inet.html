<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/posix/style.css" type="text/css" media="all"/>
<title>
INETD(8)</title>
</head>
<body>
<div class="mandoc">
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">inetd</b>, <b class="name">inetd.conf</b> &#8212; <span class="desc">internet super-server</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1><table class="synopsis">
<col style="width: 5.00ex;"/>
<col/>
<tbody>
<tr>
<td>
inetd</td>
<td>
[<span class="opt"><b class="flag">-d</b></span>] [<span class="opt"><b class="flag">-R</b> <i class="arg">rate</i></span>] [<span class="opt"><i class="arg">configuration_file</i></span>]</td>
</tr>
</tbody>
</table>
</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> <b class="name">inetd</b> should be run at boot time by <i class="file">/etc/rc</i> (see <a class="link-man" href="../html8/rc.html">rc(8)</a>). It then listens for connections on certain internet sockets. When a connection is found on one of its sockets, it decides what service the socket corresponds to, and invokes a program to service the request. After the program is finished, it continues to listen on the socket (except in some cases which will be described below). Essentially, <b class="name">inetd</b> allows running one daemon to invoke several others, reducing load on the system.<div class="spacer">
</div>
The options are as follows:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-d</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Turns on debugging.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-R</b> <i class="arg">rate</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Specify the maximum number of times a service can be invoked in one minute; the default is 256. If a service exceeds this limit, <b class="name">inetd</b> will log the problem and stop servicing requests for the specific service for ten minutes. See also the wait/nowait configuration fields below.</dd>
</dl>
<div class="spacer">
</div>
Upon execution, <b class="name">inetd</b> reads its configuration information from a configuration file which, by default, is <i class="file">/etc/inetd.conf</i>. There must be an entry for each field of the configuration file, with entries for each field separated by a tab or a space. Comments are denoted by a &#8220;#&#8221; at the beginning of a line. The fields of the configuration file are as follows:<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
service name 
socket type 
protocol 
wait/nowait[.max] 
user[.group] or user[:group] 
server program 
server program arguments</pre>
<div class="spacer">
</div>
To specify a Sun-RPC based service, the entry would contain these fields.<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
service name/version 
socket type 
rpc/protocol 
wait/nowait[.max] 
user[.group] or user[:group] 
server program 
server program arguments</pre>
<div class="spacer">
</div>
For internet services, the first field of the line may also have a host address specifier prefixed to it, separated from the service name by a colon. If this is done, the string before the colon in the first field indicates what local address <b class="name">inetd</b> should use when listening for that service. Multiple local addresses can be specified on the same line, separated by commas. Numeric IP addresses in dotted-quad notation can be used as well as symbolic hostnames. Symbolic hostnames are looked up using <b class="fname">getaddrinfo</b>(). If a hostname has multiple address mappings, inetd creates a socket to listen on each address.<div class="spacer">
</div>
The single character &#8220;*&#8221; indicates <span class="define">INADDR_ANY</span>, meaning &#8220;all local addresses&#8221;. To avoid repeating an address that occurs frequently, a line with a host address specifier and colon, but no further fields, causes the host address specifier to be remembered and used for all further lines with no explicit host specifier (until another such line or the end of the file). A line<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit">*:</code></div>
</blockquote>
is implicitly provided at the top of the file; thus, traditional configuration files (which have no host address specifiers) will be interpreted in the traditional manner, with all services listened for on all local addresses. If the protocol is &#8220;unix&#8221;, this value is ignored.<div class="spacer">
</div>
The <span class="emph">service name</span> entry is the name of a valid service in the file <i class="file">/etc/services</i>. For &#8220;internal&#8221; services (discussed below), the service name <span class="emph">must</span> be the official name of the service (that is, the first entry in <i class="file">/etc/services</i>). When used to specify a Sun-RPC based service, this field is a valid RPC service name in the file <i class="file">/etc/rpc</i>. The part on the right of the &#8220;/&#8221; is the RPC version number. This can simply be a single numeric argument or a range of versions. A range is bounded by the low version to the high version - &#8220;rusers/1-3&#8221;. For <span class="unix">UNIX</span>-domain sockets this field specifies the path name of the socket.<div class="spacer">
</div>
The <span class="emph">socket type</span> should be one of &#8220;stream&#8221;, &#8220;dgram&#8221;, &#8220;raw&#8221;, &#8220;rdm&#8221;, or &#8220;seqpacket&#8221;, depending on whether the socket is a stream, datagram, raw, reliably delivered message, or sequenced packet socket.<div class="spacer">
</div>
The <span class="emph">protocol</span> must be a valid protocol as given in <i class="file">/etc/protocols</i>. Examples might be &#8220;tcp&#8221; or &#8220;udp&#8221;. RPC based services are specified with the &#8220;rpc/tcp&#8221; or &#8220;rpc/udp&#8221; service type. &#8220;tcp&#8221; and &#8220;udp&#8221; will be recognized as &#8220;TCP or UDP over default IP version&#8221;. This is currently IPv4, but in the future it will be IPv6. If you need to specify IPv4 or IPv6 explicitly, use something like &#8220;tcp4&#8221; or &#8220;udp6&#8221;. A <span class="emph">protocol</span> of &#8220;unix&#8221; is used to specify a socket in the <span class="unix">UNIX</span>-domain.<div class="spacer">
</div>
The <span class="emph">wait/nowait</span> entry is used to tell <b class="name">inetd</b> if it should wait for the server program to return, or continue processing connections on the socket. If a datagram server connects to its peer, freeing the socket so <b class="name">inetd</b> can receive further messages on the socket, it is said to be a &#8220;multi-threaded&#8221; server, and should use the &#8220;nowait&#8221; entry. For datagram servers which process all incoming datagrams on a socket and eventually time out, the server is said to be &#8220;single-threaded&#8221; and should use a &#8220;wait&#8221; entry. <a class="link-man" href="../html8/comsat.html">comsat(8)</a> (<a class="link-man" href="../html1/biff.html">biff(1)</a>) and <a class="link-man" href="../html8/talkd.html">talkd(8)</a> are both examples of the latter type of datagram server. The optional &#8220;max&#8221; suffix (separated from &#8220;wait&#8221; or &#8220;nowait&#8221; by a dot) specifies the maximum number of times a service can be invoked in one minute; the default is 256. If a service exceeds this limit, <b class="name">inetd</b> will log the problem and stop servicing requests for the specific service for ten minutes. See also the <b class="flag">-R</b> option above.<div class="spacer">
</div>
Stream servers are usually marked as &#8220;nowait&#8221; but if a single server process is to handle multiple connections, it may be marked as &#8220;wait&#8221;. The master socket will then be passed as fd 0 to the server, which will then need to accept the incoming connection. The server should eventually time out and exit when no more connections are active. <b class="name">inetd</b> will continue to listen on the master socket for connections, so the server should not close it when it exits.<div class="spacer">
</div>
The <span class="emph">user</span> entry should contain the user name of the user as whom the server should run. This allows for servers to be given less permission than root. An optional group name can be specified by appending a dot to the user name followed by the group name. This allows for servers to run with a different (primary) group ID than specified in the password file. If a group is specified and user is not root, the supplementary groups associated with that user will still be set.<div class="spacer">
</div>
The <span class="emph">server program</span> entry should contain the pathname of the program which is to be executed by <b class="name">inetd</b> when a request is found on its socket. If <b class="name">inetd</b> provides this service internally, this entry should be &#8220;internal&#8221;.<div class="spacer">
</div>
The <span class="emph">server program arguments</span> should be just as arguments normally are, starting with argv[0], which is the name of the program. If the service is provided internally, the word &#8220;internal&#8221; should take the place of this entry.<div class="spacer">
</div>
<b class="name">inetd</b> provides several &#8220;trivial&#8221; services internally by use of routines within itself. These services are &#8220;echo&#8221;, &#8220;discard&#8221;, &#8220;chargen&#8221; (character generator), &#8220;daytime&#8221; (human readable time), and &#8220;time&#8221; (machine readable time, in the form of the number of seconds since midnight, January 1, 1900). All of these services are TCP based. For details of these services, consult the appropriate RFC from the Network Information Center.<div class="spacer">
</div>
<b class="name">inetd</b> rereads its configuration file when it receives a hangup signal, <span class="define">SIGHUP</span>. Services may be added, deleted or modified when the configuration file is reread.<div class="subsection">
<h2 id="x49507636205443502f554450206265686176696f72">IPv6 TCP/UDP behavior</h2> If you wish to run a server for IPv4 and IPv6 traffic, you'll need to run two separate processes for the same server program, specified as two separate lines in <i class="file">inetd.conf</i>, for &#8220;tcp4&#8221; and &#8220;tcp6&#8221;.<div class="spacer">
</div>
Under various combinations of IPv4/v6 daemon settings, <b class="name">inetd</b> will behave as follows:<ul style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-bul">
<li class="list-bul" style="margin-top: 0.00em;">
If you have only one server on &#8220;tcp4&#8221;, IPv4 traffic will be routed to the server. IPv6 traffic will not be accepted.</li>
<li class="list-bul" style="margin-top: 0.00em;">
If you have two servers on &#8220;tcp4&#8221; and &#8220;tcp6&#8221;, IPv4 traffic will be routed to the server on &#8220;tcp4&#8221;, and IPv6 traffic will go to server on &#8220;tcp6&#8221;.</li>
<li class="list-bul" style="margin-top: 0.00em;">
If you have only one server on &#8220;tcp6&#8221;, only IPv6 traffic will be routed to the server.</li>
</ul>
</div>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../html8/comsat.html">comsat(8)</a>, <a class="link-man" href="../html8/fingerd.html">fingerd(8)</a>, <a class="link-man" href="../html8/ftp-proxy.html">ftp-proxy(8)</a>, <a class="link-man" href="../html8/ftpd.html">ftpd(8)</a>, <a class="link-man" href="../html8/identd.html">identd(8)</a>, <a class="link-man" href="../html8/talkd.html">talkd(8)</a></div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> The <b class="name">inetd</b> command appeared in <span class="unix">4.3BSD</span>. Support for Sun-RPC based services is modelled after that provided by SunOS 4.1. IPv6 support was added by the KAME project in 1999.</div>
<div class="section">
<h1 id="x42554753">BUGS</h1> Host address specifiers, while they make conceptual sense for RPC services, do not work entirely correctly. This is largely because the portmapper interface does not provide a way to register different ports for the same service on different local addresses. Provided you never have more than one entry for a given RPC service, everything should work correctly. (Note that default host address specifiers do apply to RPC lines with no explicit specifier.)</div>
</div>
</body>
</html>

