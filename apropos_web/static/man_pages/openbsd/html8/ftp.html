<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/posix/style.css" type="text/css" media="all"/>
<title>
FTPD(8)</title>
</head>
<body>
<div class="mandoc">
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">ftpd</b> &#8212; <span class="desc">Internet File Transfer Protocol server</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1><table class="synopsis">
<col style="width: 4.00ex;"/>
<col/>
<tbody>
<tr>
<td>
ftpd</td>
<td>
[<span class="opt"><b class="flag">-46ADdlMnPSUW</b></span>] [<span class="opt"><b class="flag">-m</b> <i class="arg">minuid</i></span>] [<span class="opt"><b class="flag">-T</b> <i class="arg">maxtimeout</i></span>] [<span class="opt"><b class="flag">-t</b> <i class="arg">timeout</i></span>] [<span class="opt"><b class="flag">-u</b> <i class="arg">mask</i></span>]</td>
</tr>
</tbody>
</table>
</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> <b class="name">ftpd</b> is the Internet File Transfer Protocol server process. The server uses the TCP protocol and listens at the port specified in the &#8220;ftp&#8221; service specification; see <a class="link-man" href="../html5/services.html">services(5)</a>.<div class="spacer">
</div>
The options are as follows:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-4</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
When <b class="flag">-D</b> is specified, forces <b class="name">ftpd</b> to use IPv4 addresses only.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-6</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
When <b class="flag">-D</b> is specified, forces <b class="name">ftpd</b> to use IPv6 addresses only.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-A</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Permit only anonymous FTP connections (unless the <b class="flag">-n</b> option is specified), accounts listed in <i class="file">/etc/ftpchroot</i> or users in a login class with the &#8220;ftp-chroot&#8221; variable set (see below). Other connection attempts are refused.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-D</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
With this option set, <b class="name">ftpd</b> will detach and become a daemon, accepting connections on the FTP port and forking child processes to handle them. This has lower overhead than starting <b class="name">ftpd</b> from <a class="link-man" href="../html8/inetd.html">inetd(8)</a> and is thus useful on busy servers to reduce load.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-d</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Debugging information is written to the syslog using <span class="define">LOG_FTP</span>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-l</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Each successful and failed FTP session is logged using syslog with a facility of <span class="define">LOG_FTP</span>. If this option is specified twice, the retrieve (get), store (put), append, delete, make directory, remove directory and rename operations and their filename arguments are also logged.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-M</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Enables multihomed mode. Instead of simply using <i class="file">~ftp</i> for anonymous transfers, a directory matching the fully qualified name of the IP number the client connected to, and located inside <i class="file">~ftp</i>, is used instead.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-m</b> <i class="arg">minuid</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Disallow login to user accounts with a UID below <i class="arg">minuid</i>. The default is 1000, to prevent access to administrative and daemon accounts. Anonymous access is allowed even if the UID of the FTP user is smaller than <i class="arg">minuid</i>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-n</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Do not permit anonymous FTP logins. Normally they are permitted.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-P</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Permit illegal port numbers or addresses for PORT command initiated connects. By default <b class="name">ftpd</b> violates the RFC and thus constrains the PORT command to non-reserved ports and requires it use the same source address as the connection came from. This prevents the &quot;FTP bounce attack&quot; against services on both the local machine and other local machines.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-S</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
With this option set, <b class="name">ftpd</b> logs all anonymous downloads to the file <i class="file">/var/log/ftpd</i> when this file exists.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-T</b> <i class="arg">maxtimeout</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
A client may also request a different timeout period; the maximum period allowed may be set to <i class="arg">maxtimeout</i> seconds with the <b class="flag">-T</b> option. The default limit is 2 hours.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-t</b> <i class="arg">timeout</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
The inactivity timeout period is set to <i class="arg">timeout</i> seconds (the default is 15 minutes).</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-U</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Each concurrent FTP session is logged to the file <i class="file">/var/run/utmp</i>, making them visible to commands such as <a class="link-man" href="../html1/who.html">who(1)</a>. <b class="flag">-U</b> and <b class="flag">-W</b> are mutually exclusive.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-u</b> <i class="arg">mask</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Force the umask to <i class="arg">mask</i>, instead of the default specified in <i class="file">/etc/login.conf</i> (usually 022). Also disallows chmod.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-W</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Do not save login records to <i class="file">/var/log/wtmp</i>. <b class="flag">-W</b> and <b class="flag">-U</b> are mutually exclusive.</dd>
</dl>
<div class="spacer">
</div>
The file <i class="file">/etc/nologin</i> can be used to disable FTP access. If the file exists, <b class="name">ftpd</b> displays it and exits. Note: this method will disable <span class="emph">all</span> non-root logins; see <a class="link-man" href="../html1/login.html">login(1)</a> for further details. If the file <i class="file">/etc/ftpwelcome</i> exists, <b class="name">ftpd</b> prints it before issuing the &#8220;ready&#8221; message. If the welcome file exists (<i class="file">/etc/motd</i> by default), <b class="name">ftpd</b> prints it after a successful login. If the file <i class="file">.message</i> exists in a directory, <b class="name">ftpd</b> prints it when that directory is entered.<div class="spacer">
</div>
The FTP server currently supports the following FTP requests. The case of the requests is ignored.<table style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 6.00ex;" class="list list-col">
<col style="min-width: 7.00ex;"/>
<tbody>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
<span class="symb">Request</span></td>
<td class="list-col" style="margin-top: 1.00em;">
<span class="symb">Description</span></td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
ABOR</td>
<td class="list-col" style="margin-top: 1.00em;">
abort previous command</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
ACCT</td>
<td class="list-col" style="margin-top: 1.00em;">
specify account (not implemented)</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
ALLO</td>
<td class="list-col" style="margin-top: 1.00em;">
allocate storage (vacuously)</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
APPE</td>
<td class="list-col" style="margin-top: 1.00em;">
append to a file</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
CDUP</td>
<td class="list-col" style="margin-top: 1.00em;">
change to parent of current working directory</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
CWD</td>
<td class="list-col" style="margin-top: 1.00em;">
change working directory</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
DELE</td>
<td class="list-col" style="margin-top: 1.00em;">
delete a file</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
EPRT</td>
<td class="list-col" style="margin-top: 1.00em;">
specify data connection port</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
EPSV</td>
<td class="list-col" style="margin-top: 1.00em;">
prepare for server-to-server transfer</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
HELP</td>
<td class="list-col" style="margin-top: 1.00em;">
give help information</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
LIST</td>
<td class="list-col" style="margin-top: 1.00em;">
give list of files in a directory (<code class="lit">ls -lgA</code>)</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
LPRT</td>
<td class="list-col" style="margin-top: 1.00em;">
specify data connection port</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
LPSV</td>
<td class="list-col" style="margin-top: 1.00em;">
prepare for server-to-server transfer</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
MDTM</td>
<td class="list-col" style="margin-top: 1.00em;">
show last modification time of file</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
MKD</td>
<td class="list-col" style="margin-top: 1.00em;">
make a directory</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
MODE</td>
<td class="list-col" style="margin-top: 1.00em;">
specify data transfer <span class="emph">mode</span></td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
NLST</td>
<td class="list-col" style="margin-top: 1.00em;">
give name list of files in directory</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
NOOP</td>
<td class="list-col" style="margin-top: 1.00em;">
do nothing</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
PASS</td>
<td class="list-col" style="margin-top: 1.00em;">
specify password</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
PASV</td>
<td class="list-col" style="margin-top: 1.00em;">
prepare for server-to-server transfer</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
PORT</td>
<td class="list-col" style="margin-top: 1.00em;">
specify data connection port</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
PWD</td>
<td class="list-col" style="margin-top: 1.00em;">
print the current working directory</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
QUIT</td>
<td class="list-col" style="margin-top: 1.00em;">
terminate session</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
REIN</td>
<td class="list-col" style="margin-top: 1.00em;">
reinitialize (not implemented)</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
REST</td>
<td class="list-col" style="margin-top: 1.00em;">
restart incomplete transfer</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
RETR</td>
<td class="list-col" style="margin-top: 1.00em;">
retrieve a file</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
RMD</td>
<td class="list-col" style="margin-top: 1.00em;">
remove a directory</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
RNFR</td>
<td class="list-col" style="margin-top: 1.00em;">
specify rename-from file name</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
RNTO</td>
<td class="list-col" style="margin-top: 1.00em;">
specify rename-to file name</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
SITE</td>
<td class="list-col" style="margin-top: 1.00em;">
non-standard commands (see next section)</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
SIZE</td>
<td class="list-col" style="margin-top: 1.00em;">
return size of file</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
SMNT</td>
<td class="list-col" style="margin-top: 1.00em;">
structure mount (not implemented)</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
STAT</td>
<td class="list-col" style="margin-top: 1.00em;">
return status of server</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
STOR</td>
<td class="list-col" style="margin-top: 1.00em;">
store a file</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
STOU</td>
<td class="list-col" style="margin-top: 1.00em;">
store a file with a unique name</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
STRU</td>
<td class="list-col" style="margin-top: 1.00em;">
specify data transfer <span class="emph">structure</span></td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
SYST</td>
<td class="list-col" style="margin-top: 1.00em;">
show operating system type of server system</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
TYPE</td>
<td class="list-col" style="margin-top: 1.00em;">
specify data transfer <span class="emph">type</span></td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
USER</td>
<td class="list-col" style="margin-top: 1.00em;">
specify user name; not valid after login</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
XCUP</td>
<td class="list-col" style="margin-top: 1.00em;">
change to parent of current working directory (deprec.)</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
XCWD</td>
<td class="list-col" style="margin-top: 1.00em;">
change working directory (deprecated)</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
XMKD</td>
<td class="list-col" style="margin-top: 1.00em;">
make a directory (deprecated)</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
XPWD</td>
<td class="list-col" style="margin-top: 1.00em;">
print the current working directory (deprecated)</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
XRMD</td>
<td class="list-col" style="margin-top: 1.00em;">
remove a directory (deprecated)</td>
</tr>
</tbody>
</table>
<div class="spacer">
</div>
The following non-standard or UNIX specific commands are supported by the SITE request:<table style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 6.00ex;" class="list list-col">
<col style="min-width: 7.00ex;"/>
<tbody>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
<span class="symb">Request</span></td>
<td class="list-col" style="margin-top: 1.00em;">
<span class="symb">Description</span></td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
CHMOD</td>
<td class="list-col" style="margin-top: 1.00em;">
change mode of a file, e.g., SITE CHMOD 755 filename</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
HELP</td>
<td class="list-col" style="margin-top: 1.00em;">
give help information</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
IDLE</td>
<td class="list-col" style="margin-top: 1.00em;">
set idle-timer, e.g., SITE IDLE 60</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
UMASK</td>
<td class="list-col" style="margin-top: 1.00em;">
change umask, e.g., SITE UMASK 002</td>
</tr>
</tbody>
</table>
<div class="spacer">
</div>
The remaining FTP requests specified in Internet RFC 959 are recognized, but not implemented. MDTM and SIZE are specified in RFC 3659.<div class="spacer">
</div>
The FTP server will abort an active file transfer only when the ABOR command is preceded by a Telnet &quot;Interrupt Process&quot; (IP) signal and a Telnet &quot;Synch&quot; signal in the command Telnet stream, as described in Internet RFC 959. If a STAT command is received during a data transfer, preceded by a Telnet IP and Synch, transfer status will be returned.<div class="spacer">
</div>
<b class="name">ftpd</b> interprets file names according to the &#8220;globbing&#8221; conventions used by <a class="link-man" href="../html1/csh.html">csh(1)</a>. This allows users to utilize the metacharacters &#8220;<code class="lit">*?[]{}~</code>&#8221;.<div class="spacer">
</div>
<b class="name">ftpd</b> authenticates users by using the service and type of <i class="arg">ftp</i>, as defined in the <i class="file">/etc/login.conf</i> file (see <a class="link-man" href="../html5/login.conf.html">login.conf(5)</a>). An authentication style may be specified by appending with a colon (&#8216;:&#8217;) following the authentication style, i.e. &#8220;joe:skey&#8221;. The allowed authentication styles for <b class="name">ftpd</b> may be explicitly specified by the &#8220;auth-ftp&#8221; entry in <i class="file">/etc/login.conf</i>.<div class="spacer">
</div>
<b class="name">ftpd</b> authenticates users according to the following rules.<ol style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 6.00ex;" class="list list-enum">
<li class="list-enum" style="margin-top: 1.00em;">
The login name must be in the password database and not have a null password. In this case a password must be provided by the client before any file operations may be performed.</li>
<li class="list-enum" style="margin-top: 1.00em;">
The login name must not appear in the file <i class="file">/etc/ftpusers</i>.</li>
<li class="list-enum" style="margin-top: 1.00em;">
The user account must have a UID not less than <i class="arg">minuid</i>.</li>
<li class="list-enum" style="margin-top: 1.00em;">
The user must have a standard shell as described by <a class="link-man" href="../html5/shells.html">shells(5)</a>.</li>
<li class="list-enum" style="margin-top: 1.00em;">
If the user name appears in the file <i class="file">/etc/ftpchroot</i>, which is a text file containing one user name per line, the session's root will be changed to the user's login directory by <a class="link-man" href="../html2/chroot.html">chroot(2)</a> as for an &#8220;anonymous&#8221; or &#8220;ftp&#8221; account (see next item). However, the user must still supply a password. This feature is intended as a compromise between a fully anonymous account and a fully privileged account. The account should also be set up as for an anonymous account.</li>
<li class="list-enum" style="margin-top: 1.00em;">
If the user name is &#8220;anonymous&#8221; or &#8220;ftp&#8221;, an anonymous FTP account must be present in the password file (user &#8220;ftp&#8221;). In this case the user is allowed to log in by specifying any password (by convention an email address for the user should be used as the password).</li>
</ol>
<div class="spacer">
</div>
Once a user is authenticated the user must be approved by any approval script defined (see <a class="link-man" href="../html5/login.conf.html">login.conf(5)</a>). If a valid approval script (by either :approve=...: or :approve-ftp=...: for the user's class) is defined then it is run and must exit with a 0 (success) status. When <b class="name">ftpd</b> is running under the <b class="flag">-D</b> flag (and debugging is not turned on) then the approval script will be called with at least the following variables specified via the <b class="flag">-v</b> option (see <a class="link-man" href="../html5/login.conf.html">login.conf(5)</a>) to the approve script:<table style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 6.00ex;" class="list list-col">
<col style="min-width: 8.00ex;"/>
<tbody>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
<span class="symb">Variable</span></td>
<td class="list-col" style="margin-top: 1.00em;">
<span class="symb">Description</span></td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
FTPD_HOST</td>
<td class="list-col" style="margin-top: 1.00em;">
The server's (virtual) hostname</td>
</tr>
</tbody>
</table>
<div class="spacer">
</div>
For example (the line is broken to fit the page):<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
/usr/libexec/auth/approve_ftpd -v FTPD_HOST=ftp.mycompany.com \ 
	username class service</pre>
<div class="spacer">
</div>
When the user logs in to the anonymous FTP account, <b class="name">ftpd</b> takes special measures to restrict the client's access privileges. The server performs a <a class="link-man" href="../html2/chroot.html">chroot(2)</a> to the home directory of the &#8220;ftp&#8221; user. In order that system security is not breached, it is recommended that the &#8220;ftp&#8221; subtree be constructed with care, following these rules:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 6.00ex;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="file">~ftp</i></dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
Make the home directory owned by &#8220;root&#8221; and unwritable by anyone (mode 555).</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="file">~ftp/bin</i></dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
Make this directory owned by &#8220;root&#8221; and unwritable by anyone (mode 511). This directory is optional unless you have commands you wish the anonymous FTP user to be able to run (the <a class="link-man" href="../html1/ls.html">ls(1)</a> command exists as a built-in). Any programs in this directory should be mode 111 (executable only).</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="file">~ftp/etc</i></dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
Make this directory owned by &#8220;root&#8221; and unwritable by anyone (mode 511). The files pwd.db (see <a class="link-man" href="../html8/pwd_mkdb.html">pwd_mkdb(8)</a>) and <a class="link-man" href="../html5/group.html">group(5)</a> must be present for the <a class="link-man" href="../html1/ls.html">ls(1)</a> command to be able to produce owner names rather than numbers. The password field in <i class="file">pwd.db</i> is not used, and should not contain real passwords. The file <i class="file">motd</i>, if present, will be printed after a successful login. These files should be mode 444.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="file">~ftp/pub</i></dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
Make this directory mode 555 and owned by &#8220;root&#8221;. This is traditionally where publicly accessible files are stored for download.</dd>
</dl>
<div class="spacer">
</div>
If logging to the <i class="file">/var/log/ftpd</i> file is enabled, information will be written in the following format:<div class="spacer">
</div>
<dl style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 6.00ex;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
time</dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
The time and date of the download, in <a class="link-man" href="../html3/ctime.html">ctime(3)</a> format.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
elapsed time</dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
The elapsed time, in seconds.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
remote host</dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
The remote host (or IP number).</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
bytes</dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
The number of bytes transferred.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
path</dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
The full path (relative to the FTP chroot space) of the file transferred.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
type</dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
The type of transfer; either &#8216;a&#8217; for ASCII or &#8216;b&#8217; for binary.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
unused</dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
Unused field containing a &#8216;*&#8217;, for compatibility.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
unused</dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
Unused field containing an &#8216;o&#8217;, for compatibility.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
user type</dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
The type of user; either &#8216;a&#8217; for anonymous or &#8216;r&#8217; for a real user (should always be anonymous).</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
name</dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
Either a system login name or the value given for &#8220;email address&#8221; if an anonymous user.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
service name</dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
The network service name (always ftp).</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
unused</dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
Unused field containing a &#8216;0&#8217;, for compatibility.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
real name</dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
The system login name if the connection is not anonymous, or a &#8216;*&#8217; if it is.</dd>
</dl>
<div class="spacer">
</div>
Although fields exist for logging information on real users, this file is only used for anonymous downloads. Unused fields exist only for compatibility with other <b class="name">ftpd</b> implementations.</div>
<div class="section">
<h1 id="x4c4f47494e2e434f4e46205641524941424c4553">LOGIN.CONF VARIABLES</h1> The <b class="name">ftpd</b> daemon uses the following FTP-specific parameters:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="file">auth-ftp</i></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
The list of authentication types available to this class. See <a class="link-man" href="../html5/login.conf.html">login.conf(5)</a>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="file">ftp-chroot</i></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
A boolean value. If set, users in this class will be automatically chrooted to the user's login directory.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="file">ftp-dir</i></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
A path to a directory. This value overrides the login directory for users in this class. A leading tilde (&#8216;<code class="lit">~</code>&#8217;) in <i class="file">ftp-dir</i> will be expanded to the user's home directory based on the contents of the password database.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="file">welcome</i></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
The path of the file containing the welcome message. If this variable is not set, <i class="file">/etc/motd</i> is used.</dd>
</dl>
</div>
<div class="section">
<h1 id="x504f525420414c4c4f434154494f4e">PORT ALLOCATION</h1> For passive mode data connections, <b class="name">ftpd</b> will listen to a random high TCP port. The interval of ports used are configurable using <a class="link-man" href="../html8/sysctl.html">sysctl(8)</a> variables <b class="var">net.inet.ip.porthifirst</b> and <b class="var">net.inet.ip.porthilast</b>.</div>
<div class="section">
<h1 id="x46494c4553">FILES</h1><dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/etc/ftpchroot</i></dt>
<dd class="list-tag" style="margin-left: 15.00ex;">
list of normal users who should be chrooted</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/etc/ftpusers</i></dt>
<dd class="list-tag" style="margin-left: 15.00ex;">
list of unwelcome/restricted users</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/etc/ftpwelcome</i></dt>
<dd class="list-tag" style="margin-left: 15.00ex;">
welcome notice</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/etc/login.conf</i></dt>
<dd class="list-tag" style="margin-left: 15.00ex;">
authentication styles</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/etc/motd</i></dt>
<dd class="list-tag" style="margin-left: 15.00ex;">
printed after a successful login</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/etc/nologin</i></dt>
<dd class="list-tag" style="margin-left: 15.00ex;">
displayed and access refused</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/var/log/ftpd</i></dt>
<dd class="list-tag" style="margin-left: 15.00ex;">
log file for anonymous downloads</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/var/log/wtmp</i></dt>
<dd class="list-tag" style="margin-left: 15.00ex;">
login account records</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/var/run/utmp</i></dt>
<dd class="list-tag" style="margin-left: 15.00ex;">
list of users on the system</dd>
</dl>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../html1/ftp.html">ftp(1)</a>, <a class="link-man" href="../html1/login.html">login(1)</a>, <a class="link-man" href="../html1/skey.html">skey(1)</a>, <a class="link-man" href="../html1/who.html">who(1)</a>, <a class="link-man" href="../html2/chroot.html">chroot(2)</a>, <a class="link-man" href="../html3/ctime.html">ctime(3)</a>, <a class="link-man" href="../html5/group.html">group(5)</a>, <a class="link-man" href="../html5/login.conf.html">login.conf(5)</a>, <a class="link-man" href="../html5/motd.html">motd(5)</a>, <a class="link-man" href="../html5/services.html">services(5)</a>, <a class="link-man" href="../html5/shells.html">shells(5)</a>, <a class="link-man" href="../html8/ftp-proxy.html">ftp-proxy(8)</a>, <a class="link-man" href="../html8/inetd.html">inetd(8)</a>, <a class="link-man" href="../html8/pwd_mkdb.html">pwd_mkdb(8)</a>, <a class="link-man" href="../html8/sysctl.html">sysctl(8)</a>, <a class="link-man" href="../html8/syslogd.html">syslogd(8)</a></div>
<div class="section">
<h1 id="x5354414e4441524453">STANDARDS</h1> <span class="ref"><span class="ref-auth">J. Postel</span> and <span class="ref-auth">J. Reynolds</span>, <span class="ref-title">FILE TRANSFER PROTOCOL (FTP)</span>, <span class="ref-rep">RFC 959</span>, <span class="ref-date">October 1985</span>.</span><div class="spacer">
</div>
<span class="ref"><span class="ref-auth">P. Hethmon</span>, <span class="ref-title">Extensions to FTP</span>, <span class="ref-rep">RFC 3659</span>, <span class="ref-date">March 2007</span>.</span></div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> The <b class="name">ftpd</b> command appeared in <span class="unix">4.2BSD</span>.</div>
</div>
</body>
</html>

