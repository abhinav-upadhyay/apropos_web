<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/posix/style.css" type="text/css" media="all"/>
<title>
ADDUSER(8)</title>
</head>
<body>
<div class="mandoc">
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">adduser</b>, <b class="name">rmuser</b> &#8212; <span class="desc">add and delete users from the system</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1><table class="synopsis">
<col style="width: 7.00ex;"/>
<col/>
<tbody>
<tr>
<td>
adduser</td>
<td>
[<span class="opt"><b class="flag">-batch</b> <i class="arg">username</i> [<span class="opt"><i class="arg">group</i>[<span class="opt">,<i class="arg">group</i></span>]&#160;<i class="arg">...</i></span>] [<span class="opt"><i class="arg">fullname</i></span>] [<span class="opt"><i class="arg">password</i></span>]</span>] [<span class="opt"><b class="flag">-check_only</b></span>] [<span class="opt"><b class="flag">-class</b>&#160;<i class="arg">login_class</i></span>] [<span class="opt"><b class="flag">-config_create</b></span>] [<span class="opt"><b class="flag">-dotdir</b>&#160;<i class="arg">directory</i></span>] [<span class="opt"><b class="flag">-e</b> <i class="arg">method</i> |&#160;<b class="flag">-encryption</b>&#160;<i class="arg">method</i></span>] [<span class="opt"><b class="flag">-group</b>&#160;<i class="arg">login_group</i></span>] [<span class="opt"><b class="flag">-h</b>&#160;|&#160;<b class="flag">-help</b>&#160;|&#160;<b class="flag">-?</b></span>] [<span class="opt"><b class="flag">-home</b>&#160;<i class="arg">partition</i></span>] [<span class="opt"><b class="flag">-message</b>&#160;<i class="arg">file</i></span>] [<span class="opt"><b class="flag">-noconfig</b></span>] [<span class="opt"><b class="flag">-shell</b>&#160;<i class="arg">shell</i></span>] [<span class="opt"><b class="flag">-s</b>&#160;|&#160;<b class="flag">-silent</b>&#160;|&#160;<b class="flag">-q</b>&#160;|&#160;<b class="flag">-quiet</b></span>] [<span class="opt"><b class="flag">-uid_start</b>&#160;<i class="arg">uid</i></span>] [<span class="opt"><b class="flag">-uid_end</b>&#160;<i class="arg">uid</i></span>] [<span class="opt"><b class="flag">-v</b>&#160;|&#160;<b class="flag">-verbose</b></span>] [<span class="opt"><b class="flag">-unencrypted</b></span>]</td>
</tr>
</tbody>
</table>
<div class="spacer">
</div>
<br/>
<table class="synopsis">
<col style="width: 7.00ex;"/>
<col/>
<tbody>
<tr>
<td>
rmuser</td>
<td>
[<span class="opt"><i class="arg">username</i></span>]</td>
</tr>
</tbody>
</table>
</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> The <b class="name">adduser</b> program adds new users to the system. The <b class="name">rmuser</b> program removes users from the system. When not passed any arguments, both utilities operate in interactive mode and prompt for any required information.<div class="spacer">
</div>
The options are as follows:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-batch</b> <i class="arg">username</i> [<span class="opt"><i class="arg">group</i>[<span class="opt">,<i class="arg">group</i></span>] <i class="arg">...</i></span>] [<span class="opt"><i class="arg">fullname</i></span>] [<span class="opt"><i class="arg">password</i></span>]</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Enter batch mode in which multiple users are specified on the command line in a compact format. By default the password is assumed to already be properly encrypted.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-check_only</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Check the passwd, group, and shells databases for consistency and problems then exit without performing any other operation.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-class</b> <i class="arg">login_class</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Use the specified <i class="arg">login_class</i> as the default user login class. See <a class="link-man" href="../html5/login.conf.html">login.conf(5)</a> for further details.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-config_create</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Create or edit default configuration information and message file before proceeding with the normal interactive adduser procedure.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-dotdir</b> <i class="arg">directory</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Copy files from <i class="arg">directory</i> into the HOME directory of new users. Files named in the fashion of &#8220;<i class="file">dot.foo</i>&#8221; will be renamed to &#8220;<i class="file">.foo</i>&#8221;. By default, all files are made writable and readable by their owner.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-encryption</b>, <b class="flag">-e</b> <i class="arg">method</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Encrypt local passwords using <i class="arg">method</i> of encryption as described in <a class="link-man" href="../html5/login.conf.html">login.conf(5)</a>. If <i class="arg">method</i> is &#8220;auto&#8221;, the encryption type will be derived from the user's login class.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-group</b> <i class="arg">login_group</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Specify the default login group. A value of <i class="arg">USER</i> means that the username is to be used as the login group.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-help</b>, <b class="flag">-h</b>, <b class="flag">-?</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Print a summary of options and exit.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-home</b> <i class="arg">partition</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Specify the default home partition where all users' home directories are to be located.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-message</b> <i class="arg">file</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Send new users a welcome message from <i class="arg">file</i>. Specifying a value of &#8220;no&#8221; for <i class="arg">file</i> causes no message to be sent to new users.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-noconfig</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Do not read the default configuration file.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-shell</b> <i class="arg">shell</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Specify the default shell for new users.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-silent</b>, <b class="flag">-s</b>, <b class="flag">-quiet</b>, <b class="flag">-q</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Causes the program to print fewer warnings, questions, and bug reports.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-uid_start</b> <i class="arg">uid</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Use UIDs from <i class="arg">uid</i> up when automatically generating UIDs.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-uid_end</b> <i class="arg">uid</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Do not use UIDs higher than <i class="arg">uid</i> when generating UIDs.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-unencrypted</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Causes the program to assume that the password given in batch mode is unencrypted. The password will be encrypted before being added to the password file. Use of this option is discouraged, as the username and cleartext password will appear in the process list, which is visible to users.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-verbose</b>, <b class="flag">-v</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Causes the program to print many warnings and questions. This option is recommended for novice users.</dd>
</dl>
<div class="spacer">
</div>
<b class="name">adduser</b> first performs consistency checks on the password, group, and shell databases. This includes finding any duplicate user or group names, illegal shells, or shells that aren't executable. Once these tests are passed, <b class="name">adduser</b> performs the following operations for each new user:<ol style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 6.00ex;" class="list list-enum">
<li class="list-enum" style="margin-top: 1.00em;">
Add the appropriate entries to the password and group files and re-generate the password database using <a class="link-man" href="../html8/pwd_mkdb.html">pwd_mkdb(8)</a>.</li>
<li class="list-enum" style="margin-top: 1.00em;">
Create a home directory and copy all files from the skeletal login directory (normally <i class="file">/etc/skel</i>) to this new directory. Files named in the fashion of &#8220;<i class="file">dot.foo</i>&#8221; will be renamed to &#8220;<i class="file">.foo</i>&#8221; in the new directory.</li>
<li class="list-enum" style="margin-top: 1.00em;">
Mails the new user a welcome message at the discretion of the account creator.</li>
</ol>
<div class="spacer">
</div>
Similarly, when removing a user, <b class="name">rmuser</b> performs the following operations for the given <i class="arg">username</i>:<ol style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 6.00ex;" class="list list-enum">
<li class="list-enum" style="margin-top: 1.00em;">
Removes any <a class="link-man" href="../html1/crontab.html">crontab(1)</a> entries or <a class="link-man" href="../html1/at.html">at(1)</a> jobs belonging to the user.</li>
<li class="list-enum" style="margin-top: 1.00em;">
Removes the user from the password database and all groups in the group database. If a group becomes empty and its name is the same as the username, the group is removed (this complements <b class="name">adduser</b>'s unique per-user groups).</li>
<li class="list-enum" style="margin-top: 1.00em;">
Recursively deletes all files in the user's home directory and removes the directory itself (provided the directory actually belongs to the user). <b class="name">rmuser</b> prompts for confirmation before actually doing this.</li>
<li class="list-enum" style="margin-top: 1.00em;">
Removes the user's incoming mail file if one exists.</li>
</ol>
<div class="spacer">
</div>
Understandably, <b class="name">rmuser</b> politely refuses to remove users whose UID is 0 (typically root).</div>
<div class="section">
<h1 id="x5245535452494354494f4e53">RESTRICTIONS</h1><dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">username</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
It is recommended that login names contain only lowercase characters and digits. They may also contain uppercase characters, non-leading hyphens, periods, underscores, and a trailing &#8216;<code class="lit">$</code>&#8217;. Login names may not be longer than 31 characters. If you need a longer login name for email addresses, you can define an alias in <i class="file">/etc/mail/aliases</i>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">fullname</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
This should contain the user's first name and surname. The &#8216;<code class="lit">:</code>&#8217; is not permitted.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">login_class</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
The specified user login class must exist in <i class="file">/etc/login.conf</i>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">shell</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Only valid entries from the <a class="link-man" href="../html5/shells.html">shells(5)</a> database or entries corresponding to <a class="link-man" href="../html8/pppd.html">pppd(8)</a> are permitted.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">uid_start</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
This value is the start of the range where free UID values are searched for. This value must be less than the value of uid_end. The default value is 1000 or as configured in the configuration file.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">uid_end</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
This value is the end of the range where free UID values are searched for. This value must be more than the value of uid_start. The default value is 2147483647 or as configured in the configuration file.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">gid/login group</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
This value is generated automatically, but can be specified at the discretion of the person invoking the program.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">password</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
If not empty, the password is encrypted according to <a class="link-man" href="../html5/login.conf.html">login.conf(5)</a>. If empty, the account will be automatically disabled to prevent spurious access to it.</dd>
</dl>
</div>
<div class="section">
<h1 id="x434f4e46494755524154494f4e">CONFIGURATION</h1> <b class="name">adduser</b> follows these steps to extract its configuration information:<div class="spacer">
</div>
<ol style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 6.00ex;" class="list list-enum">
<li class="list-enum" style="margin-top: 0.00em;">
Read internal variables.</li>
<li class="list-enum" style="margin-top: 0.00em;">
Read configuration file (<i class="file">/etc/adduser.conf</i>).</li>
<li class="list-enum" style="margin-top: 0.00em;">
Parse command-line options.</li>
</ol>
<div class="spacer">
</div>
The <span class="emph">adduser.conf</span> format is explained within that file and is quite straightforward.</div>
<div class="section">
<h1 id="x46494c4553">FILES</h1><dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/etc/master.passwd</i></dt>
<dd class="list-tag" style="margin-left: 21.00ex;">
user database</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/etc/group</i></dt>
<dd class="list-tag" style="margin-left: 21.00ex;">
group database</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/etc/shells</i></dt>
<dd class="list-tag" style="margin-left: 21.00ex;">
shell database</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/etc/ptmp</i></dt>
<dd class="list-tag" style="margin-left: 21.00ex;">
lock file for the passwd database</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/etc/adduser.conf</i></dt>
<dd class="list-tag" style="margin-left: 21.00ex;">
configuration file for <b class="name">adduser</b></dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/etc/adduser.message</i></dt>
<dd class="list-tag" style="margin-left: 21.00ex;">
message file for <b class="name">adduser</b></dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/etc/skel</i></dt>
<dd class="list-tag" style="margin-left: 21.00ex;">
skeletal login directory</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/var/log/adduser</i></dt>
<dd class="list-tag" style="margin-left: 21.00ex;">
log file for <b class="name">adduser</b></dd>
</dl>
</div>
<div class="section">
<h1 id="x4558414d504c4553">EXAMPLES</h1> Start <b class="name">adduser</b> in interactive mode:<div class="spacer">
</div>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit"># adduser</code></div>
</blockquote>
<div class="spacer">
</div>
Create user &#8220;falken&#8221; and login group &#8220;falken&#8221;. Invite user &#8220;falken&#8221; into groups &#8220;guest&#8221;, &#8220;staff&#8221;, and &#8220;beer&#8221;. Realname (fullname) is &#8220;Prof. Falken&#8221;. The password has been created using <a class="link-man" href="../html1/encrypt.html">encrypt(1)</a>:<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
# adduser -batch falken guest,staff,beer 'Prof. Falken' \ 
    $2a$06$1Sdjxjoxg4cNmT6zAxriGOLgdLXQ3HdJ2dKBbzEk68jSrO1EtLJ3C</pre>
<div class="spacer">
</div>
Create user &#8220;vehlefanz&#8221; in login group &#8220;guest&#8221;. Start the free UID search at 5000. No other groups, no realname, no password. Send a welcome message:<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
# adduser -uid_start 5000 -group guest \ 
    -message /etc/adduser.message -batch vehlefanz</pre>
<div class="spacer">
</div>
Create user &#8220;jsmith&#8221; and place in the &#8220;jsmith&#8221; login group. Also add to the &#8220;staff&#8221; group. No password:<div class="spacer">
</div>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit"># adduser -group USER -batch jsmith staff</code></div>
</blockquote>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../html1/chpass.html">chpass(1)</a>, <a class="link-man" href="../html1/finger.html">finger(1)</a>, <a class="link-man" href="../html1/passwd.html">passwd(1)</a>, <a class="link-man" href="../html2/setlogin.html">setlogin(2)</a>, <a class="link-man" href="../html5/aliases.html">aliases(5)</a>, <a class="link-man" href="../html5/group.html">group(5)</a>, <a class="link-man" href="../html5/login.conf.html">login.conf(5)</a>, <a class="link-man" href="../html5/passwd.html">passwd(5)</a>, <a class="link-man" href="../html5/shells.html">shells(5)</a>, <a class="link-man" href="../html8/nologin.html">nologin(8)</a>, <a class="link-man" href="../html8/pwd_mkdb.html">pwd_mkdb(8)</a>, <a class="link-man" href="../html8/vipw.html">vipw(8)</a>, <a class="link-man" href="../html8/yp.html">yp(8)</a></div>
</div>
</body>
</html>

