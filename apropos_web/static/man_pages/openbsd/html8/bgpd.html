<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/posix/style.css" type="text/css" media="all"/>
<title>
BGPD(8)</title>
</head>
<body>
<div class="mandoc">
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">bgpd</b> &#8212; <span class="desc">Border Gateway Protocol daemon</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1><table class="synopsis">
<col style="width: 4.00ex;"/>
<col/>
<tbody>
<tr>
<td>
bgpd</td>
<td>
[<span class="opt"><b class="flag">-cdnv</b></span>] [<span class="opt"><b class="flag">-D</b>&#160;<i class="arg">macro</i>=<i class="arg">value</i></span>] [<span class="opt"><b class="flag">-f</b>&#160;<i class="arg">file</i></span>]</td>
</tr>
</tbody>
</table>
</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> <b class="name">bgpd</b> is a Border Gateway Protocol (BGP) daemon which manages the network routing tables. Its main purpose is to exchange information concerning &#8220;network reachability&#8221; with other BGP systems. <b class="name">bgpd</b> uses the Border Gateway Protocol, Version 4, as described in RFC 4271.<div class="spacer">
</div>
BGP is an exterior gateway protocol using a multiple step decision process to find the best path. Advanced filtering can be used to influence the route decision for traffic engineering. The session engine of <b class="name">bgpd</b> is responsible for maintaining the TCP session with each neighbor. Updates are passed to the Route Decision Engine (RDE) where the paths are filtered and used to compute a Routing Information Base (RIB). The parent process is responsible for keeping the RIB in sync with the kernel routing table.<div class="spacer">
</div>
The route decision process selects the best path by evaluating all paths to the same destination. The decision process continues to the next step if paths have equal attributes. Paths that are less preferred are taken out of consideration until there is only one path left.<ol style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 4.00ex;" class="list list-enum">
<li class="list-enum" style="margin-top: 1.00em;">
All paths with errors or loops are not eligible.</li>
<li class="list-enum" style="margin-top: 1.00em;">
Paths with an unreachable nexthop are not eligible. After this step all remaining paths are valid.</li>
<li class="list-enum" style="margin-top: 1.00em;">
The path with the highest <span class="emph">LOCAL_PREF</span> is selected.</li>
<li class="list-enum" style="margin-top: 1.00em;">
The path with the shortest <span class="emph">AS path</span> attribute is selected.</li>
<li class="list-enum" style="margin-top: 1.00em;">
The <span class="emph">ORIGIN</span> attribute is compared. The order is IGP before EGP before incomplete origins.</li>
<li class="list-enum" style="margin-top: 1.00em;">
The path with the lowest <span class="emph">MULTI_EXIT_DISC</span> metric is selected. Normally, this value is only considered when choosing between multiple routes sent by the same neighbouring AS. However, if &#8220;<code class="lit">rde med compare always</code>&#8221; is set in the configuration, the metric is compared for routes sent by any AS.</li>
<li class="list-enum" style="margin-top: 1.00em;">
Comparison of the BGP session type. Paths learned over an external (EBGP) session are preferred over those learned via an internal (IBGP) session.</li>
<li class="list-enum" style="margin-top: 1.00em;">
The path with the lowest local <span class="emph">weight</span> is selected.</li>
<li class="list-enum" style="margin-top: 1.00em;">
If &#8220;<code class="lit">rde route-age evaluate</code>&#8221; is set then the oldest path is selected.</li>
<li class="list-enum" style="margin-top: 1.00em;">
The path coming from the neighbor with the lowest <span class="emph">BGP ID</span> wins. If the <span class="emph">ORIGINATOR_ID</span> attribute is present that value will be used in the comparison instead.</li>
<li class="list-enum" style="margin-top: 1.00em;">
The path with the shortest <span class="emph">CLUSTER_LIST</span> attribute is selected. If it is not present then a length of 0 is used in the comparison.</li>
<li class="list-enum" style="margin-top: 1.00em;">
The path coming from the peer with the lowest IP address is selected. IPv4 sessions will be preferred over IPv6 ones.</li>
<li class="list-enum" style="margin-top: 1.00em;">
In case of locally announced prefixes <b class="name">bgpd</b> will prefer statically set prefixes over dynamically inserted ones.</li>
</ol>
<div class="spacer">
</div>
Attributes set by filters can be used to tip the decision process to prefer particular paths over others. This can be achieved by changing the <span class="emph">localpref</span>, <span class="emph">med</span>, or <span class="emph">weight</span> attributes. AS path prepending or changing the <span class="emph">med</span> or <span class="emph">origin</span> attribute can be used to influence the routing behaviour on remote systems.<div class="spacer">
</div>
<b class="name">bgpd</b> is usually started at boot time, and can be enabled by setting the following in <i class="file">/etc/rc.conf.local</i>:<div class="spacer">
</div>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit">bgpd_flags=&quot;&quot;</code></div>
</blockquote>
<div class="spacer">
</div>
See <a class="link-man" href="../html8/rc.html">rc(8)</a> and <a class="link-man" href="../html8/rc.conf.html">rc.conf(8)</a> for more information on the boot process and enabling daemons.<div class="spacer">
</div>
When <b class="name">bgpd</b> starts up, it reads settings from a configuration file, typically <a class="link-man" href="../html5/bgpd.conf.html">bgpd.conf(5)</a>. A running <b class="name">bgpd</b> process can be controlled using the <a class="link-man" href="../html8/bgpctl.html">bgpctl(8)</a> utility.<div class="spacer">
</div>
The options are as follows:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-c</b></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
Force <b class="name">bgpd</b> to do <a class="link-man" href="../html4/carp.html">carp(4)</a> demotion at startup when the <span class="emph">demote</span> functionality is used. Normally, <b class="name">bgpd</b> will only do demotion at startup when the demotion counter for the group in question is already greater than 0. <b class="name">bgpd</b> will start handling demotion after all sessions with demotion configured for the given group have been successfully established. At system startup, <a class="link-man" href="../html8/rc.html">rc(8)</a> has the demotion counter for the group <span class="emph">carp</span> increased until after <b class="name">bgpd</b> is started, so this option should <span class="emph">not</span> be used in <a class="link-man" href="../html8/rc.conf.html">rc.conf(8)</a>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-D</b> <i class="arg">macro</i>=<i class="arg">value</i></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
Define <i class="arg">macro</i> to be set to <i class="arg">value</i> on the command line. Overrides the definition of <i class="arg">macro</i> in the configuration file.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-d</b></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
Do not daemonize. If this option is specified, <b class="name">bgpd</b> will run in the foreground and log to <span class="emph">stderr</span>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-f</b> <i class="arg">file</i></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
Use <i class="arg">file</i> as the configuration file, instead of the default <i class="file">/etc/bgpd.conf</i>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-n</b></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
Configtest mode. Only check the configuration file for validity.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-v</b></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
Produce more verbose output.</dd>
</dl>
</div>
<div class="section">
<h1 id="x46494c4553">FILES</h1><dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/etc/bgpd.conf</i></dt>
<dd class="list-tag" style="margin-left: 21.00ex;">
default <b class="name">bgpd</b> configuration file</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/var/run/bgpd.sock</i></dt>
<dd class="list-tag" style="margin-left: 21.00ex;">
default <b class="name">bgpd</b> control socket</dd>
</dl>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../html5/bgpd.conf.html">bgpd.conf(5)</a>, <a class="link-man" href="../html8/bgpctl.html">bgpctl(8)</a>, <a class="link-man" href="../html8/bgplg.html">bgplg(8)</a>, <a class="link-man" href="../html8/bgplgsh.html">bgplgsh(8)</a></div>
<div class="section">
<h1 id="x5354414e4441524453">STANDARDS</h1> <span class="ref"><span class="ref-auth">R. Chandra</span>, <span class="ref-auth">P. Traina</span>, and <span class="ref-auth">T. Li</span>, <span class="ref-title">BGP Communities Attribute</span>, <span class="ref-rep">RFC 1997</span>, <span class="ref-date">August 1996</span>.</span><div class="spacer">
</div>
<span class="ref"><span class="ref-auth">A. Heffernan</span>, <span class="ref-title">Protection of BGP Sessions via the TCP MD5 Signature Option</span>, <span class="ref-rep">RFC 2385</span>, <span class="ref-date">August 1998</span>.</span><div class="spacer">
</div>
<span class="ref"><span class="ref-auth">P. Marques</span> and <span class="ref-auth">F. Dupont</span>, <span class="ref-title">Use of BGP-4 Multiprotocol Extensions for IPv6 Inter-Domain Routing</span>, <span class="ref-rep">RFC 2545</span>, <span class="ref-date">March 1999</span>.</span><div class="spacer">
</div>
<span class="ref"><span class="ref-auth">E. Chen</span>, <span class="ref-title">Route Refresh Capability for BGP-4</span>, <span class="ref-rep">RFC 2918</span>, <span class="ref-date">September 2000</span>.</span><div class="spacer">
</div>
<span class="ref"><span class="ref-auth">G. Huston</span>, <span class="ref-title">NOPEER Community for Border Gateway Protocol (BGP) Route Scope Control</span>, <span class="ref-rep">RFC 3765</span>, <span class="ref-date">April 2004</span>.</span><div class="spacer">
</div>
<span class="ref"><span class="ref-auth">Y. Rekhter</span>, <span class="ref-auth">T. Li</span>, and <span class="ref-auth">S. Hares</span>, <span class="ref-title">A Border Gateway Protocol 4 (BGP-4)</span>, <span class="ref-rep">RFC 4271</span>, <span class="ref-date">January 2006</span>.</span><div class="spacer">
</div>
<span class="ref"><span class="ref-auth">S. Sangli</span>, <span class="ref-auth">D. Tappan</span>, and <span class="ref-auth">Y. Rekhter</span>, <span class="ref-title">BGP Extended Communities Attribute</span>, <span class="ref-rep">RFC 4360</span>, <span class="ref-date">February 2006</span>.</span><div class="spacer">
</div>
<span class="ref"><span class="ref-auth">E. Rosen</span> and <span class="ref-auth">Y. Rekhter</span>, <span class="ref-title">BGP/MPLS IP Virtual Private Networks (VPNs)</span>, <span class="ref-rep">RFC 4364</span>, <span class="ref-date">February 2006</span>.</span><div class="spacer">
</div>
<span class="ref"><span class="ref-auth">T. Bates</span>, <span class="ref-auth">E. Chen</span>, and <span class="ref-auth">R. Chandra</span>, <span class="ref-title">BGP Route Reflection: An Alternative to Full Mesh Internal BGP (IBGP)</span>, <span class="ref-rep">RFC 4456</span>, <span class="ref-date">April 2006</span>.</span><div class="spacer">
</div>
<span class="ref"><span class="ref-auth">E. Chen</span> and <span class="ref-auth">V. Gillet</span>, <span class="ref-title">Subcodes for BGP Cease Notification Message</span>, <span class="ref-rep">RFC 4486</span>, <span class="ref-date">April 2006</span>.</span><div class="spacer">
</div>
<span class="ref"><span class="ref-auth">T. Bates</span>, <span class="ref-auth">R. Chandra</span>, <span class="ref-auth">D. Katz</span>, and <span class="ref-auth">Y. Rekhter</span>, <span class="ref-title">Multiprotocol Extensions for BGP-4</span>, <span class="ref-rep">RFC 4760</span>, <span class="ref-date">January 2007</span>.</span><div class="spacer">
</div>
<span class="ref"><span class="ref-auth">Q. Vohra</span> and <span class="ref-auth">E. Chen</span>, <span class="ref-title">BGP Support for Four-octet AS Number Space</span>, <span class="ref-rep">RFC 4893</span>, <span class="ref-date">May 2007</span>.</span><div class="spacer">
</div>
<span class="ref"><span class="ref-auth">V. Gill</span>, <span class="ref-auth">J. Heasley</span>, <span class="ref-auth">D. Meyer</span>, <span class="ref-auth">P. Savola</span>, and <span class="ref-auth">C. Pignatoro</span>, <span class="ref-title">The Generalized TTL Security Mechanism (GTSM)</span>, <span class="ref-rep">RFC 5082</span>, <span class="ref-date">October 2007</span>.</span><div class="spacer">
</div>
<span class="ref"><span class="ref-auth">J. Scudder</span> and <span class="ref-auth">R. Chandra</span>, <span class="ref-title">Capabilities Advertisement with BGP-4</span>, <span class="ref-rep">RFC 5492</span>, <span class="ref-date">February 2009</span>.</span><div class="spacer">
</div>
<span class="ref"><span class="ref-title">Error Handling for Optional Transitive BGP Attributes</span>, <span class="ref-rep">draft-ietf-idr-optional-transitive-00</span>, <span class="ref-date">April 2009</span>.</span><div class="spacer">
</div>
<span class="ref"><span class="ref-title">MRT routing information export format</span>, <span class="ref-rep">draft-ietf-grow-mrt-17</span>, <span class="ref-date">August 2011</span>.</span><div class="spacer">
</div>
<span class="ref"><span class="ref-auth">J. Dong</span>, <span class="ref-auth">M. Chen</span>, and <span class="ref-auth">A. Suryanarayana</span>, <span class="ref-title">Subcodes for BGP Finite State Machine Error</span>, <span class="ref-rep">RFC 6608</span>, <span class="ref-date">May 2012</span>.</span></div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> The <b class="name">bgpd</b> program first appeared in <span class="unix">OpenBSD&#160;3.5</span>.</div>
</div>
</body>
</html>

