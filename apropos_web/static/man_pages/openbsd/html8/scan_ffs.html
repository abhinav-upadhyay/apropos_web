<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/posix/style.css" type="text/css" media="all"/>
<title>
SCAN_FFS(8)</title>
</head>
<body>
<div class="mandoc">
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">scan_ffs</b> &#8212; <span class="desc">find UFS/FFS partitions on a disk</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1><table class="synopsis">
<col style="width: 8.00ex;"/>
<col/>
<tbody>
<tr>
<td>
scan_ffs</td>
<td>
[<span class="opt"><b class="flag">-lsv</b></span>] [<span class="opt"><b class="flag">-b</b> <i class="arg">begin</i></span>] [<span class="opt"><b class="flag">-e</b> <i class="arg">end</i></span>] <i class="arg">device</i></td>
</tr>
</tbody>
</table>
</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> This is the life-saver of typos. If you have ever been working too long, and just happened to type 'disklabel -w sd0 floppy', instead of 'disklabel -w fd0 floppy', you know what I am talking about.<div class="spacer">
</div>
This little program will take a raw disk device (which you might have to create) that covers the whole disk, and finds all probable UFS/FFS partitions on the disk. It has various options to make it go faster, and to print out information to help in the reconstruction of the disklabel.<div class="spacer">
</div>
The options are as follows:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-b</b> <i class="arg">begin</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Tell <b class="name">scan_ffs</b> where to begin searching for filesystems. This makes it easier to skip swap partitions, or other large non-UFS/FFS partitions.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-e</b> <i class="arg">end</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Ditto for telling <b class="name">scan_ffs</b> where to stop.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-l</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
This will make <b class="name">scan_ffs</b> print out a string looking much like the input to disklabel. With a little massaging, this output can usually be used in the disklabel edit.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-s</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
This tells <b class="name">scan_ffs</b> to be smart about skipping partitions (when it thinks it found a valid one). By not scanning partitions for superblocks, the program completes a couple of orders of magnitude faster. However, sometimes being smart is too good for its own good, especially if your disk has had a different layout previously, or contains other non-UFS/FFS filesystems.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-v</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Tell <b class="name">scan_ffs</b> to be verbose about what it is doing, and what it has found.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="arg">device</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
This specifies which device <b class="name">scan_ffs</b> should use to scan for filesystems. Usually this device should cover the whole disk in question.</dd>
</dl>
<div class="spacer">
</div>
The basic operation of this program is as follows:<ol style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-enum">
<li class="list-enum" style="margin-top: 1.00em;">
Panic. You usually do so anyways, so you might as well get it over with. Just don't do anything stupid. Panic away from your machine. Then relax, and see if the steps below won't help you out.</li>
<li class="list-enum" style="margin-top: 1.00em;">
Try to find your old disklabel by any other means possible. This includes printouts, backups (look in <i class="file">/var/backups/</i>), screendumps, and whatever other method you can think of. The more information you have, the better your chances are in recovering the disklabel of the disk.</li>
<li class="list-enum" style="margin-top: 1.00em;">
Create a disklabel on the affected disk, which covers the whole disk, and has at least one partition which covers the whole disk. As the &#8220;c&#8221; partition usually covers the whole disk anyways, this sounds like a good place to start.</li>
<li class="list-enum" style="margin-top: 1.00em;">
Run <b class="name">scan_ffs</b> over this partition. If you have any information about the disklabel which used to exist on the disk, keep that in mind while <b class="name">scan_ffs</b> spews out its things.</li>
<li class="list-enum" style="margin-top: 1.00em;">
Use <a class="link-man" href="../html8/disklabel.html">disklabel(8)</a> to reconstruct the disklabel on the affected disk, using all the information you gathered from <b class="name">scan_ffs</b> and other sources.</li>
</ol>
<div class="spacer">
</div>
Last but certainly not least, we wish you good luck. The UFS/FFS filesystems are pretty sturdy. I've seen them reconstructed after some pretty weird and awesome fumbles. If you can't have backups, at least have funky tools to help you out of a jam when they happen.</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../html8/disklabel.html">disklabel(8)</a></div>
<div class="section">
<h1 id="x42554753">BUGS</h1> It is not perfect, and could do a lot more things with date/time information in the superblocks it finds, but this program has saved more than one butt, more than once.</div>
</div>
</body>
</html>

