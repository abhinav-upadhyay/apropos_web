<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/posix/style.css" type="text/css" media="all"/>
<title>
BIOCTL(8)</title>
</head>
<body>
<div class="mandoc">
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">bioctl</b> &#8212; <span class="desc">RAID management interface</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1><table class="synopsis">
<col style="width: 6.00ex;"/>
<col/>
<tbody>
<tr>
<td>
bioctl</td>
<td>
[<span class="opt"><b class="flag">-hiqv</b></span>] [<span class="opt"><b class="flag">-a</b> <i class="arg">alarm-function</i></span>] [<span class="opt"><b class="flag">-b</b> <i class="arg">channel</i>:<i class="arg">target</i>[<span class="opt">.<i class="arg">lun</i></span>]</span>] [<span class="opt"><b class="flag">-H</b> <i class="arg">channel</i>:<i class="arg">target</i>[<span class="opt">.<i class="arg">lun</i></span>]</span>] [<span class="opt"><b class="flag">-R</b> <i class="arg">device</i> | <i class="arg">channel</i>:<i class="arg">target</i>[<span class="opt">.<i class="arg">lun</i></span>]</span>] [<span class="opt"><b class="flag">-t</b> <i class="arg">patrol-function</i></span>] [<span class="opt"><b class="flag">-u</b> <i class="arg">channel</i>:<i class="arg">target</i>[<span class="opt">.<i class="arg">lun</i></span>]</span>] <i class="arg">device</i></td>
</tr>
</tbody>
</table>
<div class="spacer">
</div>
<br/>
<table class="synopsis">
<col style="width: 6.00ex;"/>
<col/>
<tbody>
<tr>
<td>
bioctl</td>
<td>
[<span class="opt"><b class="flag">-dhiPqsv</b></span>] [<span class="opt"><b class="flag">-C</b> <i class="arg">flag</i>[<span class="opt">,<i class="arg">flag</i>[<span class="opt">,<i class="arg">...</i></span>]</span>]</span>] [<span class="opt"><b class="flag">-c</b> <i class="arg">raidlevel</i></span>] [<span class="opt"><b class="flag">-k</b> <i class="arg">keydisk</i></span>] [<span class="opt"><b class="flag">-l</b> <i class="arg">special</i>[<span class="opt">,<i class="arg">special</i>[<span class="opt">,<i class="arg">...</i></span>]</span>]</span>] [<span class="opt"><b class="flag">-O</b> <i class="arg">device</i> | <i class="arg">channel</i>:<i class="arg">target</i>[<span class="opt">.<i class="arg">lun</i></span>]</span>] [<span class="opt"><b class="flag">-p</b> <i class="arg">passfile</i></span>] [<span class="opt"><b class="flag">-R</b> <i class="arg">device</i> | <i class="arg">channel</i>:<i class="arg">target</i>[<span class="opt">.<i class="arg">lun</i></span>]</span>] [<span class="opt"><b class="flag">-r</b> <i class="arg">rounds</i></span>] <i class="arg">device</i></td>
</tr>
</tbody>
</table>
</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> RAID device drivers which support management functionality can register their services with the <a class="link-man" href="../html4/bio.html">bio(4)</a> driver. <b class="name">bioctl</b> then can be used to maintain RAID volumes.<div class="spacer">
</div>
In the first synopsis, RAID controllers are managed. <i class="arg">device</i> specifies either a drive (e.g. sd0) or a RAID controller (e.g. ami0). For operations which will be performed against <a class="link-man" href="../html4/ses.html">ses(4)</a> or <a class="link-man" href="../html4/safte.html">safte(4)</a> enclosures, it is also possible to directly specify the enclosure name (e.g. safte0).<div class="spacer">
</div>
In the second synopsis, <a class="link-man" href="../html4/softraid.html">softraid(4)</a> devices are managed. <i class="arg">device</i> specifies either a drive (e.g. sd0) or a <a class="link-man" href="../html4/softraid.html">softraid(4)</a> device (e.g. softraid0).<div class="spacer">
</div>
The options for RAID controllers are as follows:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-a</b> <i class="arg">alarm-function</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Control the RAID card's alarm functionality, if supported. <i class="arg">alarm-function</i> may be one of:<div class="spacer">
</div>
<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">disable</b></dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
Disable the alarm on the RAID controller.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">enable</b></dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
Enable the alarm on the RAID controller.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">get</b></dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
Retrieve the current alarm state (enabled or disabled).</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">silence</b> | <b class="flag">quiet</b></dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
Silence the alarm if it is currently beeping.</dd>
</dl>
<div class="spacer">
</div>
The <i class="arg">alarm-function</i> may be specified as given above, or by the first letter only (e.g. -a e).</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-b</b> <i class="arg">channel</i>:<i class="arg">target</i>[<span class="opt">.<i class="arg">lun</i></span>]</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Instruct the device at <i class="arg">channel</i>:<i class="arg">target</i>[<span class="opt">.<i class="arg">lun</i></span>] to start blinking, if there is <a class="link-man" href="../html4/ses.html">ses(4)</a> or <a class="link-man" href="../html4/safte.html">safte(4)</a> support in the enclosure.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-H</b> <i class="arg">channel</i>:<i class="arg">target</i>[<span class="opt">.<i class="arg">lun</i></span>]</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
If the device at <i class="arg">channel</i>:<i class="arg">target</i>[<span class="opt">.<i class="arg">lun</i></span>] is currently marked &#8220;Unused&#8221;, promote it to being a &#8220;Hot Spare&#8221;.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-h</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Where necessary, produce &#8220;human-readable&#8221; output. Use unit suffixes: Byte, Kilobyte, Megabyte, Gigabyte, Terabyte, Petabyte, Exabyte in order to reduce the number of digits to four or less.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-i</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Enumerate the selected RAID devices. This is the default if no other option is given.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-q</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Show vendor, product, revision, and serial number for the given disk.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-R</b> <i class="arg">device</i> | <i class="arg">channel</i>:<i class="arg">target</i>[<span class="opt">.<i class="arg">lun</i></span>]</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Manually kick off a rebuild of a RAID volume, using <i class="arg">device</i> or <i class="arg">channel</i>:<i class="arg">target</i>[<span class="opt">.<i class="arg">lun</i></span>] as a new chunk (with <a class="link-man" href="../html4/softraid.html">softraid(4)</a>, a partition of fstype &#8220;RAID&#8221;) in the volume. <i class="arg">device</i> must be specified as a full path to the chunk device file (e.g. /dev/wd0d). A RAID volume rather than a RAID controller is expected as the final argument.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-t</b> <i class="arg">patrol-function</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Control the RAID card's patrol functionality, if supported. <i class="arg">patrol-function</i> may be one of:<div class="spacer">
</div>
<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">stop</b></dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
Stop the patrol on the RAID controller.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">start</b></dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
Start the patrol on the RAID controller.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">get</b></dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
Retrieve the current patrol configuration.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">disable</b></dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
Disable the patrol functionality.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">manual</b></dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
Enable the patrol functionality to start/stop manually.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">auto</b>[<span class="opt">.<i class="arg">interval</i>[<span class="opt">.<i class="arg">start</i></span>]</span>]</dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
Enable the patrol functionality to start/stop automatically in every <i class="arg">interval</i> seconds, starting the first iteration after <i class="arg">start</i> seconds.</dd>
</dl>
</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-u</b> <i class="arg">channel</i>:<i class="arg">target</i>[<span class="opt">.<i class="arg">lun</i></span>]</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Instruct the device at <i class="arg">channel</i>:<i class="arg">target</i>[<span class="opt">.<i class="arg">lun</i></span>] to cease blinking, if there is <a class="link-man" href="../html4/ses.html">ses(4)</a> or <a class="link-man" href="../html4/safte.html">safte(4)</a> support in the enclosure.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-v</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Be more verbose in output.</dd>
</dl>
<div class="spacer">
</div>
In addition to the relevant options listed above, the options for <a class="link-man" href="../html4/softraid.html">softraid(4)</a> devices are as follows:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-C</b> <i class="arg">flag</i>[<span class="opt">,<i class="arg">flag</i>[<span class="opt">,<i class="arg">...</i></span>]</span>]</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Pass <i class="arg">flag</i> to <b class="name">bioctl</b>. May be one of:<div class="spacer">
</div>
<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">force</b></dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
Force the operation; for example, force the creation of volumes with unclean data in the metadata areas.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">noauto</b></dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
Do not automatically assemble this volume at boot time.</dd>
</dl>
</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-c</b> <i class="arg">raidlevel</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Create a <a class="link-man" href="../html4/softraid.html">softraid(4)</a> device of level <i class="arg">raidlevel</i>. The device must begin with &#8220;softraid&#8221; followed by a number.<div class="spacer">
</div>
Valid raidlevels are:<div class="spacer">
</div>
<dl style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 3.00ex;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">0</b></dt>
<dd class="list-tag" style="margin-left: 2.00ex;">
RAID 0: A striping discipline.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">1</b></dt>
<dd class="list-tag" style="margin-left: 2.00ex;">
RAID 1: A mirroring discipline.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">5</b></dt>
<dd class="list-tag" style="margin-left: 2.00ex;">
RAID 5: A striping discipline with floating parity chunk.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">C</b></dt>
<dd class="list-tag" style="margin-left: 2.00ex;">
CRYPTO: An encrypting discipline.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">c</b></dt>
<dd class="list-tag" style="margin-left: 2.00ex;">
CONCAT: A concatenating discipline.</dd>
</dl>
<div class="spacer">
</div>
The RAID 0, RAID 1 and CONCAT disciplines require a minimum of two devices to be provided via <b class="flag">-l</b>. RAID 5 requires at least three devices and the CRYPTO discipline requires exactly one.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-d</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Delete volume specified by device.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-k</b> <i class="arg">keydisk</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Use special device <i class="arg">keydisk</i> as a key disk for a crypto volume.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-l</b> <i class="arg">special</i>[<span class="opt">,<i class="arg">special</i>[<span class="opt">,<i class="arg">...</i></span>]</span>]</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Use <i class="arg">special</i> device list to create within the <a class="link-man" href="../html4/softraid.html">softraid(4)</a> framework. Requires <b class="flag">-c</b>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-O</b> <i class="arg">device</i> | <i class="arg">channel</i>:<i class="arg">target</i>[<span class="opt">.<i class="arg">lun</i></span>]</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Set the state of <i class="arg">device</i> or <i class="arg">channel</i>:<i class="arg">target</i>[<span class="opt">.<i class="arg">lun</i></span>] to offline. The state of the RAID volume will change in the same way that it would if the disk physically went offline. <i class="arg">device</i> must be specified as a full path to the chunk device file (e.g. /dev/wd0d). A RAID volume rather than a RAID controller is expected as the final argument.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-P</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Change the passphrase on the selected crypto volume.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-p</b> <i class="arg">passfile</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Passphrase file used when crypto volumes are brought up. This file must be root owned and have 0600 permissions.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-r</b> <i class="arg">rounds</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
When creating an encrypted volume, specifies the number of iterations of the PBKDF2 algorithm used to convert a passphrase into a key. Higher iteration counts take more time, but offer more resistance to key guessing attacks. The minimum is 1000 rounds and the default is 8192.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-s</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Read the passphrase for the selected crypto volume from <i class="file">/dev/stdin</i> rather than <i class="file">/dev/tty</i>. This option cannot be used during the initial creation of the crypto volume.</dd>
</dl>
</div>
<div class="section">
<h1 id="x4558414d504c4553">EXAMPLES</h1> The following command, executed from the command line, would configure the device softraid0 with 4 special devices (/dev/sd2e, /dev/sd3e, /dev/sd4e, /dev/sd5e) and a RAID level of 1:<div class="spacer">
</div>
<pre style="margin-left: 3.00ex;" class="lit display">
# bioctl -c 1 -l /dev/sd2e,/dev/sd3e,/dev/sd4e,/dev/sd5e softraid0</pre>
<div class="spacer">
</div>
The following command, executed from the command line, would configure the device softraid0 with one special device (/dev/sd2e) and an encrypting volume:<div class="spacer">
</div>
<pre style="margin-left: 3.00ex;" class="lit display">
# bioctl -c C -l /dev/sd2e softraid0</pre>
<div class="spacer">
</div>
<b class="name">bioctl</b> will ask for a passphrase, which will be needed to unlock the encrypted disk. After creating a newly encrypted disk, the first megabyte of it should be zeroed, so tools like <a class="link-man" href="../html8/fdisk.html">fdisk(8)</a> or <a class="link-man" href="../html8/disklabel.html">disklabel(8)</a> don't get confused by the random data that appears on the new disk. This can be done with the following command (assuming the new disk is sd3):<div class="spacer">
</div>
<pre style="margin-left: 3.00ex;" class="lit display">
# dd if=/dev/zero of=/dev/rsd3c bs=1m count=1</pre>
<div class="spacer">
</div>
Deleting a softraid volume requires the exact volume name. For example:<div class="spacer">
</div>
<pre style="margin-left: 3.00ex;" class="lit display">
# bioctl -d sd2</pre>
<div class="spacer">
</div>
The following command starts a rebuild of the degraded softraid volume sd0 using a new chunk on wd0d:<div class="spacer">
</div>
<pre style="margin-left: 3.00ex;" class="lit display">
# bioctl -R /dev/wd0d sd0</pre>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../html4/bio.html">bio(4)</a>, <a class="link-man" href="../html4/scsi.html">scsi(4)</a>, <a class="link-man" href="../html4/softraid.html">softraid(4)</a></div>
<div class="section">
<h1 id="x5354414e4441524453">STANDARDS</h1> <span class="ref"><span class="ref-auth">B. Kaliski</span>, <span class="ref-title">PKCS #5: Password-Based Cryptography Specification Version 2.0</span>, <span class="ref-rep">RFC 2898</span>, <span class="ref-date">September 2000</span>.</span></div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> The <b class="name">bioctl</b> command first appeared in <span class="unix">OpenBSD&#160;3.8</span>.</div>
<div class="section">
<h1 id="x415554484f5253">AUTHORS</h1> The <b class="name">bioctl</b> interface was written by <span class="author">Marco Peereboom</span> &lt;<a class="link-mail" href="mailto:marco@openbsd.org">marco@openbsd.org</a>&gt;.</div>
</div>
</body>
</html>

