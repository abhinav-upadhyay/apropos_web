<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/posix/style.css" type="text/css" media="all"/>
<title>
SPAMD(8)</title>
</head>
<body>
<div class="mandoc">
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">spamd</b> &#8212; <span class="desc">spam deferral daemon</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1><table class="synopsis">
<col style="width: 5.00ex;"/>
<col/>
<tbody>
<tr>
<td>
spamd</td>
<td>
[<span class="opt"><b class="flag">-45bdv</b></span>] [<span class="opt"><b class="flag">-B</b>&#160;<i class="arg">maxblack</i></span>] [<span class="opt"><b class="flag">-C</b>&#160;<i class="arg">file</i></span>] [<span class="opt"><b class="flag">-c</b>&#160;<i class="arg">maxcon</i></span>] [<span class="opt"><b class="flag">-G</b>&#160;<i class="arg">passtime</i>:<i class="arg">greyexp</i>:<i class="arg">whiteexp</i></span>] [<span class="opt"><b class="flag">-h</b>&#160;<i class="arg">hostname</i></span>] [<span class="opt"><b class="flag">-K</b>&#160;<i class="arg">file</i></span>] [<span class="opt"><b class="flag">-l</b>&#160;<i class="arg">address</i></span>] [<span class="opt"><b class="flag">-M</b>&#160;<i class="arg">address</i></span>] [<span class="opt"><b class="flag">-n</b>&#160;<i class="arg">name</i></span>] [<span class="opt"><b class="flag">-p</b>&#160;<i class="arg">port</i></span>] [<span class="opt"><b class="flag">-S</b>&#160;<i class="arg">secs</i></span>] [<span class="opt"><b class="flag">-s</b>&#160;<i class="arg">secs</i></span>] [<span class="opt"><b class="flag">-w</b>&#160;<i class="arg">window</i></span>] [<span class="opt"><b class="flag">-Y</b>&#160;<i class="arg">synctarget</i></span>] [<span class="opt"><b class="flag">-y</b>&#160;<i class="arg">synclisten</i></span>]</td>
</tr>
</tbody>
</table>
</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> <b class="name">spamd</b> is a fake mail daemon which rejects false mail. It is designed to be very efficient so that it does not slow down the receiving machine.<div class="spacer">
</div>
<b class="name">spamd</b> considers sending hosts to be of three types:<div class="spacer">
</div>
<span class="emph">blacklisted</span> hosts are diverted to <b class="name">spamd</b> and <span class="emph">tarpitted</span> i.e. they are communicated with very slowly to consume the sender's resources. Mail is rejected with either a 450 or 550 error message. A blacklisted host will not be allowed to talk to a real mail server.<div class="spacer">
</div>
<span class="emph">whitelisted</span> hosts do not talk to <b class="name">spamd</b>. Their connections are instead sent to a real mail server, such as <a class="link-man" href="../html8/smtpd.html">smtpd(8)</a>.<div class="spacer">
</div>
<span class="emph">greylisted</span> hosts are diverted to <b class="name">spamd</b>, but <b class="name">spamd</b> has not yet decided if they are likely spammers. They are given a temporary failure message by <b class="name">spamd</b> when they try to deliver mail.<div class="spacer">
</div>
When <b class="name">spamd</b> is run in default mode, it will greylist connections from new hosts. Depending on its configuration, it may choose to blacklist the host or, if the checks described below are met, eventually whitelist it. When <b class="name">spamd</b> is run in blacklist-only mode, using the <b class="flag">-b</b> flag, it will consult a pre-defined set of blacklist addresses to decide whether to tarpit the host or not.<div class="spacer">
</div>
When a sending host talks to <b class="name">spamd</b>, the reply will be <span class="emph">stuttered</span>. That is, the response will be sent back a character at a time, slowly. For blacklisted hosts, the entire dialogue is stuttered. For greylisted hosts, the default is to stutter for the first 10 seconds of dialogue only.<div class="spacer">
</div>
The options are as follows:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-4</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
For blacklisted entries, return error code 450 to the spammer (default).</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-5</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
For blacklisted entries, return error code 550 to the spammer.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-B</b> <i class="arg">maxblack</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
The maximum number of concurrent blacklisted connections to stutter at. This value may not be greater than maxcon (see below). The default is <i class="arg">maxcon</i> - 100. When this value is exceeded, new blacklisted connections will not be stuttered at.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-b</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Run in blacklist-only mode.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-C</b> <i class="arg">file</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Load the certificate for TLS from the given <i class="arg">file</i>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-c</b> <i class="arg">maxcon</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
The maximum number of concurrent connections to allow. <i class="arg">maxcon</i> may not exceed <b class="var">kern.maxfiles</b> - 200, and defaults to 800.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-d</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Debug mode. <b class="name">spamd</b> does not <a class="link-man" href="../html2/fork.html">fork(2)</a> into the background.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-G</b> <i class="arg">passtime</i>:<i class="arg">greyexp</i>:<i class="arg">whiteexp</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Adjust the three time parameters for greylisting. <i class="arg">passtime</i> defaults to 25 (minutes), <i class="arg">greyexp</i> to 4 (hours), and <i class="arg">whiteexp</i> to 864 (hours, approximately 36 days).</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-h</b> <i class="arg">hostname</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
The hostname that is reported in the SMTP banner.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-K</b> <i class="arg">file</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Load the private key for TLS from the given <i class="arg">file</i>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-l</b> <i class="arg">address</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Specify the local address to which <b class="name">spamd</b> is to <a class="link-man" href="../html2/bind.html">bind(2)</a>. By default <b class="name">spamd</b> listens on the localhost address 127.0.0.1.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-M</b> <i class="arg">address</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Specify a local IP address which is listed as a low priority MX record, used to identify and trap hosts that connect to MX hosts out of order. See <i class="link-sec"><a class="link-sec" href="#x475245595452415050494e47">GREYTRAPPING</a></i> below for details.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-n</b> <i class="arg">name</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
The SMTP version banner that is reported upon initial connection.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-p</b> <i class="arg">port</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Specify a different port number from the default port that <b class="name">spamd</b> should listen for diverted SMTP connections on. The default port is found by looking for the named service &#8220;spamd&#8221; using <a class="link-man" href="../html3/getservbyname.html">getservbyname(3)</a>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-S</b> <i class="arg">secs</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Stutter at greylisted connections for the specified amount of seconds, after which the connection is not stuttered at. The default is 10; maximum is 90.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-s</b> <i class="arg">secs</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Delay each character sent to the client by the specified amount of seconds. The default is 1; maximum is 10.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-v</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Enable verbose logging. By default <b class="name">spamd</b> logs connections, disconnections and blacklist matches to <a class="link-man" href="../html8/syslogd.html">syslogd(8)</a> at <span class="define">LOG_INFO</span> level. With verbose logging enabled, message detail including subject and recipient information is logged at <span class="define">LOG_INFO</span>, along with the message body and SMTP dialogue being logged at <span class="define">LOG_DEBUG</span> level.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-w</b> <i class="arg">window</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Set the socket receive buffer to this many bytes, adjusting the window size.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-Y</b> <i class="arg">synctarget</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Add target <i class="arg">synctarget</i> to receive synchronisation messages. <i class="arg">synctarget</i> can be either an IPv4 address for unicast messages or a network interface and optional TTL value for multicast messages to the group 224.0.1.240. If the multicast TTL is not specified, a default value of 1 is used. This option can be specified multiple times. See also <i class="link-sec"><a class="link-sec" href="#x53594e4348524f4e49534154494f4e">SYNCHRONISATION</a></i> below.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-y</b> <i class="arg">synclisten</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Listen on <i class="arg">synclisten</i> network interface for incoming synchronisation messages. This option can be specified only once. See also <i class="link-sec"><a class="link-sec" href="#x53594e4348524f4e49534154494f4e">SYNCHRONISATION</a></i> below.</dd>
</dl>
<div class="spacer">
</div>
When run in default mode, connections receive the pleasantly innocuous temporary failure of:<div class="spacer">
</div>
<pre style="margin-left: 4.00ex;" class="lit display">
451 Temporary failure, please try again later.</pre>
<div class="spacer">
</div>
This happens in the SMTP dialogue immediately after the DATA command is received from the client. <b class="name">spamd</b> will use the db file in <i class="file">/var/db/spamd</i> to track these connections to <b class="name">spamd</b> by connecting IP address, HELO/EHLO, envelope-from, and envelope-to, or <span class="emph">tuple</span> for short.<div class="spacer">
</div>
A previously unseen tuple is added to the <i class="file">/var/db/spamd</i> database, recording the time an initial connection attempt was seen. After <span class="emph">passtime</span> minutes if <b class="name">spamd</b> sees a retried attempt to deliver mail for the same tuple, <b class="name">spamd</b> will whitelist the connecting address by adding it as a whitelist entry to <i class="file">/var/db/spamd</i>.<div class="spacer">
</div>
<b class="name">spamd</b> regularly scans the <i class="file">/var/db/spamd</i> database and configures all whitelist addresses as the <a class="link-man" href="../html4/pf.html">pf(4)</a> &lt;spamd-white&gt; table, allowing connections to pass to the real MTA. Any addresses not found in &lt;spamd-white&gt; are diverted to <b class="name">spamd</b>.<div class="spacer">
</div>
An example <a class="link-man" href="../html5/pf.conf.html">pf.conf(5)</a> fragment is given below. In the example, the file <i class="file">/etc/mail/nospamd</i> contains addresses of hosts who should be passed directly to the SMTP agent (thus bypassing <b class="name">spamd</b>).<div class="spacer">
</div>
<pre style="margin-left: 4.00ex;" class="lit display">
table &lt;spamd-white&gt; persist 
table &lt;nospamd&gt; persist file &quot;/etc/mail/nospamd&quot; 
pass in on egress proto tcp from any to any port smtp \ 
    divert-to 127.0.0.1 port spamd 
pass in on egress proto tcp from &lt;nospamd&gt; to any port smtp 
pass in log on egress proto tcp from &lt;spamd-white&gt; to any port smtp 
pass out log on egress proto tcp to any port smtp</pre>
<div class="spacer">
</div>
<b class="name">spamd</b> removes tuple entries from the <i class="file">/var/db/spamd</i> database if delivery has not been retried within <span class="emph">greyexp</span> hours from the initial time a connection is seen. The default is 4 hours as this is the most common setting after which MTAs will give up attempting to retry delivery of a message.<div class="spacer">
</div>
<b class="name">spamd</b> removes whitelist entries from the <i class="file">/var/db/spamd</i> database if no mail delivery activity has been seen from the whitelisted address by <a class="link-man" href="../html8/spamlogd.html">spamlogd(8)</a> within <span class="emph">whiteexp</span> hours from the initial time an address is whitelisted. The default is 36 days to allow for the delivery of monthly mailing list digests without greylist delays every time.<div class="spacer">
</div>
<a class="link-man" href="../html8/spamd-setup.html">spamd-setup(8)</a> should be run periodically by <a class="link-man" href="../html8/cron.html">cron(8)</a>. When run in blacklist-only mode, the <b class="flag">-b</b> flag should be specified. Use <a class="link-man" href="../html1/crontab.html">crontab(1)</a> to uncomment the entry in root's crontab.<div class="spacer">
</div>
<a class="link-man" href="../html8/spamlogd.html">spamlogd(8)</a> should be used to update the whitelist entries in <i class="file">/var/db/spamd</i> when connections are seen to pass to the real MTA on the <span class="emph">smtp</span> port.<div class="spacer">
</div>
<a class="link-man" href="../html8/spamdb.html">spamdb(8)</a> can be used to examine and alter the contents of <i class="file">/var/db/spamd</i>. See <a class="link-man" href="../html8/spamdb.html">spamdb(8)</a> for further information.<div class="spacer">
</div>
<b class="name">spamd</b> sends log messages to <a class="link-man" href="../html8/syslogd.html">syslogd(8)</a> using <span class="emph">facility</span> daemon and, with increasing verbosity, <span class="emph">level</span> err, warn, info, and debug. The following <a class="link-man" href="../html5/syslog.conf.html">syslog.conf(5)</a> section can be used to log connection details to a dedicated file:<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
!spamd 
daemon.info	/var/log/spamd</pre>
<div class="spacer">
</div>
A typical entry shows the time of the connection and the IP address of the connecting host. When a host connects, the total number of active connections and the number of connections from blacklisted hosts is shown (connected (xx/xx)). When a host disconnects, the amount of time spent talking to <b class="name">spamd</b> is shown.</div>
<div class="section">
<h1 id="x475245595452415050494e47">GREYTRAPPING</h1> When running <b class="name">spamd</b> in default mode, it may be useful to define <span class="emph">spamtrap</span> destination addresses to catch spammers as they send mail from greylisted hosts. Such spamtrap addresses affect only greylisted connections to <b class="name">spamd</b> and are used to temporarily blacklist a host that is obviously sending spam. Unused email addresses or email addresses on spammers' lists are very useful for this. When a host that is currently greylisted attempts to send mail to a spamtrap address, it is blacklisted for 24 hours by adding the host to the <b class="name">spamd</b> blacklist &lt;spamd-greytrap&gt;. Spamtrap addresses are added to the <i class="file">/var/db/spamd</i> database with the following <a class="link-man" href="../html8/spamdb.html">spamdb(8)</a> command:<div class="spacer">
</div>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit"># spamdb -T -a 'spamtrap@mydomain.org'</code></div>
</blockquote>
<div class="spacer">
</div>
See <a class="link-man" href="../html8/spamdb.html">spamdb(8)</a> for further details.<div class="spacer">
</div>
The file <i class="file">/etc/mail/spamd.alloweddomains</i> can be used to specify a list of domainname suffixes, one per line, one of which must match each destination email address in the greylist. Any destination address which does not match one of the suffixes listed in <i class="file">spamd.alloweddomains</i> will be trapped, exactly as if it were sent to a spamtrap address. Comment lines beginning with &#8216;#&#8217; and empty lines are ignored.<div class="spacer">
</div>
For example, if <i class="file">spamd.alloweddomains</i> contains:<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
@humpingforjesus.com 
obtuse.com</pre>
<div class="spacer">
</div>
The following destination addresses <span class="emph">would not</span> cause the sending host to be trapped:<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
beardedclams@humpingforjesus.com 
beck@obtuse.com 
beck@snouts.obtuse.com</pre>
<div class="spacer">
</div>
However the following addresses <span class="emph">would</span> cause the sending host to be trapped:<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
peter@apostles.humpingforjesus.com 
bigbutts@bofh.ucs.ualberta.ca</pre>
<div class="spacer">
</div>
A low priority MX IP address may be specified with the <b class="flag">-M</b> option. When <b class="name">spamd</b> has such an address specified, no host may enter new greylist tuples when connecting to this address; only existing entries may be updated. Any host attempting to make new deliveries to the low priority MX for which a tuple has not previously been seen will be trapped.<div class="spacer">
</div>
Note that it is important to ensure that a host running <b class="name">spamd</b> with the low priority MX address active must see all the greylist changes for a higher priority MX host for the same domains. This is best done by the host itself receiving the connections to the higher priority MX on another IP address (which may be an IP alias). This will ensure that hosts are not trapped erroneously if the higher priority MX is unavailable. For example, on a host which is an existing MX record for a domain of value 10, a second IP address with MX of value 99 (a higher number, and therefore lower priority) would ensure that any RFC conformant client would attempt delivery to the IP address with the MX value of 10 first, and should not attempt to deliver to the address with MX value 99.</div>
<div class="section">
<h1 id="x424c41434b4c4953541e4f4e4c59204d4f4445">BLACKLIST-ONLY MODE</h1> When running in default mode, the <a class="link-man" href="../html5/pf.conf.html">pf.conf(5)</a> rules described above are sufficient. However when running in blacklist-only mode, a slightly modified <a class="link-man" href="../html5/pf.conf.html">pf.conf(5)</a> ruleset is required, diverting any addresses found in the &lt;spamd&gt; table to <b class="name">spamd</b>. Any other addresses are passed to the real MTA.<div class="spacer">
</div>
<pre style="margin-left: 4.00ex;" class="lit display">
table &lt;spamd&gt; persist 
pass in on egress inet proto tcp from &lt;spamd&gt; to any port smtp \ 
    divert-to 127.0.0.1 port spamd</pre>
<div class="spacer">
</div>
Addresses can be loaded into the <span class="emph">table</span>, like:<div class="spacer">
</div>
<pre style="margin-left: 4.00ex;" class="lit display">
# pfctl -q -t spamd -T replace -f /usr/local/share/spammers</pre>
<div class="spacer">
</div>
<a class="link-man" href="../html8/spamd-setup.html">spamd-setup(8)</a> can also be used to load addresses into the &lt;spamd&gt; table. It has the added benefit of being able to remove addresses from blacklists, and will connect to <b class="name">spamd</b> over a localhost socket, giving <b class="name">spamd</b> information about each source of blacklist addresses, as well as custom rejection messages for each blacklist source that can be used to let any real person whose mail is deferred by <b class="name">spamd</b> know why their address has been listed from sending mail. This is important as it allows legitimate mail senders to pressure spam sources into behaving properly so that they may be removed from the relevant blacklists.</div>
<div class="section">
<h1 id="x434f4e46494755524154494f4e20434f4e4e454354494f4e53">CONFIGURATION CONNECTIONS</h1> <b class="name">spamd</b> listens for configuration connections on the port identified by the named service &#8220;spamd-cfg&#8221; (see <a class="link-man" href="../html5/services.html">services(5)</a>). The configuration socket listens only on the INADDR_LOOPBACK address. Configuration of spamd is done by connecting to the configuration socket, and sending blacklist information, one blacklist per line. Each blacklist consists of a name, a message to reject mail with, and addresses in CIDR format, all separated by semicolons (;):<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
tag;&quot;rejection message&quot;;aaa.bbb.ccc.ddd/mm;aaa.bbb.ccc.ddd/mm</pre>
<div class="spacer">
</div>
The rejection message must be inside double quotes. A \&quot; will produce a double quote in the output. \n will produce a newline. %A will expand to the connecting IP address in dotted quad format. %% may be used to produce a single % in the output. \\ will produce a single \. <b class="name">spamd</b> will reject mail by displaying all the messages from all blacklists in which a connecting address is matched. <a class="link-man" href="../html8/spamd-setup.html">spamd-setup(8)</a> is normally used to configure this information.</div>
<div class="section">
<h1 id="x53594e4348524f4e49534154494f4e">SYNCHRONISATION</h1> <b class="name">spamd</b> supports realtime synchronisation of spamd databases between a number of spamd daemons running on multiple machines, using the <b class="flag">-Y</b> and <b class="flag">-y</b> options. The databases are synchronised for greylisted and trapped entries; whitelisted entries and entries made manually using <a class="link-man" href="../html8/spamdb.html">spamdb(8)</a> are not updated.<div class="spacer">
</div>
The following example will accept incoming multicast and unicast synchronisation messages, and send outgoing multicast messages through the network interface <i class="arg">em0</i>:<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
# /usr/libexec/spamd -y em0 -Y em0</pre>
<div class="spacer">
</div>
The second example will increase the multicast TTL to a value of 2, add the unicast targets <i class="arg">foo.somewhere.org</i> and <i class="arg">bar.somewhere.org</i>, and accept incoming unicast messages received on <i class="arg">bge0</i> only.<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
# /usr/libexec/spamd -y bge0 -Y em0:2 \ 
	-Y foo.somewhere.org -Y bar.somewhere.org</pre>
<div class="spacer">
</div>
If the file <i class="file">/etc/mail/spamd.key</i> exists, <b class="name">spamd</b> will calculate the message-digest fingerprint (checksum) for the file and use it as a shared key to authenticate the synchronisation messages. The file itself can contain any data. For example, to create a secure random key:<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
# dd if=/dev/random of=/etc/mail/spamd.key bs=2048 count=1</pre>
<div class="spacer">
</div>
The file needs to be copied to all hosts sending or receiving synchronisation messages.</div>
<div class="section">
<h1 id="x46494c4553">FILES</h1><dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/etc/mail/spamd.alloweddomains</i></dt>
<dd class="list-tag" style="margin-left: 32.00ex;">
Required suffixes for greytrapping.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/etc/mail/spamd.conf</i></dt>
<dd class="list-tag" style="margin-left: 32.00ex;">
Default configuration file.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/etc/mail/spamd.key</i></dt>
<dd class="list-tag" style="margin-left: 32.00ex;">
Authentication key for synchronisation messages.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/var/db/spamd</i></dt>
<dd class="list-tag" style="margin-left: 32.00ex;">
Greylisting database.</dd>
</dl>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../html5/pf.conf.html">pf.conf(5)</a>, <a class="link-man" href="../html5/services.html">services(5)</a>, <a class="link-man" href="../html5/spamd.conf.html">spamd.conf(5)</a>, <a class="link-man" href="../html5/syslog.conf.html">syslog.conf(5)</a>, <a class="link-man" href="../html8/pfctl.html">pfctl(8)</a>, <a class="link-man" href="../html8/spamd-setup.html">spamd-setup(8)</a>, <a class="link-man" href="../html8/spamdb.html">spamdb(8)</a>, <a class="link-man" href="../html8/spamlogd.html">spamlogd(8)</a>, <a class="link-man" href="../html8/syslogd.html">syslogd(8)</a></div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> The <b class="name">spamd</b> command first appeared in <span class="unix">OpenBSD&#160;3.3</span>.</div>
<div class="section">
<h1 id="x42554753">BUGS</h1> <b class="name">spamd</b> currently uses the user &#8220;_spamd&#8221; outside a chroot jail when running in default mode, and requires the greylisting database in <i class="file">/var/db/spamd</i> to be owned by the &#8220;_spamd&#8221; user. This is wrong and should change to a distinct user from the one used by the chrooted <b class="name">spamd</b> process.</div>
</div>
</body>
</html>

