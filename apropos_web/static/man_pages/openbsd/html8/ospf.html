<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/posix/style.css" type="text/css" media="all"/>
<title>
OSPFD(8)</title>
</head>
<body>
<div class="mandoc">
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">ospfd</b> &#8212; <span class="desc">Open Shortest Path First daemon</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1><table class="synopsis">
<col style="width: 5.00ex;"/>
<col/>
<tbody>
<tr>
<td>
ospfd</td>
<td>
[<span class="opt"><b class="flag">-dnv</b></span>] [<span class="opt"><b class="flag">-D</b> <i class="arg">macro</i>=<i class="arg">value</i></span>] [<span class="opt"><b class="flag">-f</b> <i class="arg">file</i></span>] [<span class="opt"><b class="flag">-s</b> <i class="arg">socket</i></span>]</td>
</tr>
</tbody>
</table>
</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> <b class="name">ospfd</b> is an Open Shortest Path First (OSPF) daemon which manages routing tables. This implementation supports OSPF version 2, thus it is only capable of maintaining IPv4 routing tables.<div class="spacer">
</div>
OSPF is an interior gateway protocol designed to supersede RIP. It has several advantages over RIP. For instance, every router has an understanding of the complete network topology. Response to changes in the network is faster. Furthermore, failure detection is improved.<div class="spacer">
</div>
The OSPF daemon maintains a Link State Database (LSDB) containing information about routers and networks within an Autonomous System (AS).<div class="spacer">
</div>
Dijkstra's shortest path first algorithm is used to compute a Routing Information Base (RIB) using the LSDB as input. The Forwarding Information Base (FIB), a.k.a. the kernel routing table, is updated with information from the RIB.<div class="spacer">
</div>
OSPF routers discover one another automatically via OSPF hello packets. OSPF routers communicate via two multicast groups: 224.0.0.5 (all Shortest Path First routers) and 224.0.0.6 (all Designated Routers). OSPF runs directly on top of IP and uses neither TCP nor UDP. IP protocol number 89 is reserved for OSPF.<div class="spacer">
</div>
All routers in an OSPF network spend most of their time keeping each others' LSDBs in sync. All routers must have the same information in the LSDB at all times. Every time the LSDB is updated the RIB is updated; if needed the FIB is also updated.<div class="spacer">
</div>
In a multi-access network such as Ethernet, it is unfeasible for all routers to synchronize their LSDB with all other routers in the network. In such networks a Designated Router (DR) and a Backup Designated Router (BDR) are elected. The DR's responsibility is to synchronize with all routers; the BDR will not do much until the DR fails. The first router in a network is automatically elected DR, the second router BDR. All routers have a FULL adjacency with the DR and the BDR. Routers with FULL adjacency exchange information about their LSDBs. A router not elected either DR or BDR will have 2-WAY adjacency with all routers but the DR and BDR. Routers with 2-WAY adjacency recognize that they know each other, but do not exchange information about their LSDBs. If a DR or BDR fails another router is elected DR or BDR and all routers form FULL adjacencies with the newly elected DR or BDR.<div class="spacer">
</div>
When routers are connected via point-to-point links, DR and BDR election is skipped since only two routers are connected to the link.<div class="spacer">
</div>
To limit the impact changes in the network have on the LSDB it is possible to segment an OSPF network into areas. Area 0.0.0.0 (a.k.a. the backbone area) must always be present. Routers can be configured as Area Border Router (ABR), being part of multiple areas. Every area must have direct access to the backbone area. ABRs not directly connected to the backbone area need to establish a virtual link to a router in the backbone area.<div class="spacer">
</div>
AS Border Routers (ASBR) are connected to an OSPF network and other external networks via BGP, RIP, or static routing, and provide connectivity to networks outside the AS.<div class="spacer">
</div>
<b class="name">ospfd</b> is usually started at boot time, and can be enabled by setting the following in <i class="file">/etc/rc.conf.local</i>:<div class="spacer">
</div>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit">ospfd_flags=&quot;&quot;</code></div>
</blockquote>
<div class="spacer">
</div>
See <a class="link-man" href="../html8/rc.html">rc(8)</a> and <a class="link-man" href="../html8/rc.conf.html">rc.conf(8)</a> for more information on the boot process and enabling daemons.<div class="spacer">
</div>
A running <b class="name">ospfd</b> can be controlled with the <a class="link-man" href="../html8/ospfctl.html">ospfctl(8)</a> utility.<div class="spacer">
</div>
The options are as follows:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-D</b> <i class="arg">macro</i>=<i class="arg">value</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Define <i class="arg">macro</i> to be set to <i class="arg">value</i> on the command line. Overrides the definition of <i class="arg">macro</i> in the configuration file.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-d</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Do not daemonize. If this option is specified, <b class="name">ospfd</b> will run in the foreground and log to <span class="emph">stderr</span>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-f</b> <i class="arg">file</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Specify an alternative configuration file.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-n</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Configtest mode. Only check the configuration file for validity.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-s</b> <i class="arg">socket</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Use an alternate location for the default control socket.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-v</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Produce more verbose output.</dd>
</dl>
</div>
<div class="section">
<h1 id="x46494c4553">FILES</h1><dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/etc/ospfd.conf</i></dt>
<dd class="list-tag" style="margin-left: 21.00ex;">
Default <b class="name">ospfd</b> configuration file.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/var/run/ospfd.sock</i></dt>
<dd class="list-tag" style="margin-left: 21.00ex;">
<span class="unix">UNIX</span>-domain socket used for communication with <a class="link-man" href="../html8/ospfctl.html">ospfctl(8)</a>.</dd>
</dl>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../html5/ospfd.conf.html">ospfd.conf(5)</a>, <a class="link-man" href="../html8/ospfctl.html">ospfctl(8)</a></div>
<div class="section">
<h1 id="x5354414e4441524453">STANDARDS</h1> <span class="ref"><span class="ref-auth">J. Moy</span>, <span class="ref-title">OSPF Version 2</span>, <span class="ref-rep">RFC 2328</span>, <span class="ref-date">April 1998</span>.</span><div class="spacer">
</div>
<span class="ref"><span class="ref-auth">A. Retana</span>, <span class="ref-auth">L. Nguyen</span>, <span class="ref-auth">R. White</span>, <span class="ref-auth">A. Zinin</span>, and <span class="ref-auth">D. McPherson</span>, <span class="ref-title">OSPF Stub Router Advertisement</span>, <span class="ref-rep">RFC 3137</span>, <span class="ref-date">June 2001</span>.</span></div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> The <b class="name">ospfd</b> program first appeared in <span class="unix">OpenBSD&#160;3.7</span>.</div>
<div class="section">
<h1 id="x42554753">BUGS</h1> Virtual links are currently not available in <b class="name">ospfd</b>.</div>
</div>
</body>
</html>

