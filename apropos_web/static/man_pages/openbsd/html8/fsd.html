<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/posix/style.css" type="text/css" media="all"/>
<title>
FSDB(8)</title>
</head>
<body>
<div class="mandoc">
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">fsdb</b> &#8212; <span class="desc">FFS debugging/editing tool</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1><table class="synopsis">
<col style="width: 4.00ex;"/>
<col/>
<tbody>
<tr>
<td>
fsdb</td>
<td>
[<span class="opt"><b class="flag">-d</b></span>] <b class="flag">-f</b> <i class="arg">fsname</i></td>
</tr>
</tbody>
</table>
</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> <b class="name">fsdb</b> opens <i class="arg">fsname</i> (usually a raw disk partition) and runs a command loop allowing manipulation of the file system's inode data. You are prompted to enter a command with <b class="cmd">fsdb (inum X)&gt;</b> where <b class="var">X</b> is the currently selected i-number. The initial selected inode is the root of the file system (i-number 2).<div class="spacer">
</div>
The command processor uses the <a class="link-man" href="../html3/editline.html">editline(3)</a> library, so you can use command line editing to reduce typing if desired. When you exit the command loop, the file system superblock is marked dirty and any buffered blocks are written to the file system.<div class="spacer">
</div>
The options are as follows:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-d</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Enables additional debugging output (which comes primarily from <a class="link-man" href="../html8/fsck.html">fsck(8)</a>-derived code).</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-f</b> <i class="arg">fsname</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Open file system <i class="arg">fsname</i>.</dd>
</dl>
<div class="spacer">
</div>
Besides the built-in <a class="link-man" href="../html3/editline.html">editline(3)</a> commands, <b class="name">fsdb</b> supports these commands:<div class="spacer">
</div>
<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">help</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Print out the list of accepted commands.<div class="spacer">
</div>
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">inode</b> <i class="arg">i-number</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Select inode <i class="arg">i-number</i> as the new current inode.<div class="spacer">
</div>
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">back</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Revert to the previously current inode.<div class="spacer">
</div>
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">clri</b> <i class="arg">i-number</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Clear the inode <i class="arg">i-number</i>.<div class="spacer">
</div>
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">lookup</b> <i class="arg">name</i>, <b class="flag">cd</b> <i class="arg">name</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Find <i class="arg">name</i> in the current directory and make its inode the current inode. <i class="arg">Name</i> may be a multi-component name or may begin with slash to indicate that the root inode should be used to start the lookup. If some component along the pathname is not found, the last valid directory encountered is left as the active inode.<div class="spacer">
</div>
This command is valid only if the starting inode is a directory.<div class="spacer">
</div>
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">active</b>, <b class="flag">print</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Print out the active inode.<div class="spacer">
</div>
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">uplink</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Increment the active inode's link count.<div class="spacer">
</div>
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">downlink</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Decrement the active inode's link count.<div class="spacer">
</div>
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">linkcount</b> <i class="arg">number</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Set the active inode's link count to <i class="arg">number</i>.<div class="spacer">
</div>
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">ls</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
List the current inode's directory entries. This command is valid only if the current inode is a directory.<div class="spacer">
</div>
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">rm</b> <i class="arg">name</i>, <b class="flag">del</b> <i class="arg">name</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Remove the entry <i class="arg">name</i> from the current directory inode. This command is valid only if the current inode is a directory.<div class="spacer">
</div>
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">ln</b> <i class="arg">ino</i> <i class="arg">name</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Create a link to inode <i class="arg">ino</i> under the name <i class="arg">name</i> in the current directory inode. This command is valid only if the current inode is a directory.<div class="spacer">
</div>
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">chinum</b> <i class="arg">dirslot</i> <i class="arg">inum</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Change the i-number in directory entry <i class="arg">dirslot</i> to <i class="arg">inum</i>.<div class="spacer">
</div>
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">chname</b> <i class="arg">dirslot</i> <i class="arg">name</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Change the name in directory entry <i class="arg">dirslot</i> to <i class="arg">name</i>. This command cannot expand a directory entry. You can only rename an entry if the name will fit into the existing directory slot.<div class="spacer">
</div>
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">chtype</b> <i class="arg">type</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Change the type of the current inode to <i class="arg">type</i>. <i class="arg">type</i> may be one of: <span class="emph">file</span>, <span class="emph">dir</span>, <span class="emph">socket</span>, or <span class="emph">fifo</span>.<div class="spacer">
</div>
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">chmod</b> <i class="arg">mode</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Change the mode bits of the current inode to <i class="arg">mode</i>. You cannot change the file type with this subcommand; use <b class="cmd">chtype</b> to do that.<div class="spacer">
</div>
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">chflags</b> <i class="arg">flags</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Change the file flags of the current inode to <i class="arg">flags</i>.<div class="spacer">
</div>
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">chown</b> <i class="arg">uid</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Change the owner of the current inode to <i class="arg">uid</i>.<div class="spacer">
</div>
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">chlen</b> <i class="arg">length</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Change the length of the current inode to <i class="arg">length</i>.<div class="spacer">
</div>
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">chgrp</b> <i class="arg">gid</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Change the group of the current inode to <i class="arg">gid</i>.<div class="spacer">
</div>
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">chgen</b> <i class="arg">gen</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Change the generation number of the current inode to <i class="arg">gen</i>.<div class="spacer">
</div>
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">mtime</b> <i class="arg">time</i>, <b class="flag">ctime</b> <i class="arg">time</i>, <b class="flag">atime</b> <i class="arg">time</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Change the modification, change, or access time (respectively) on the current inode to <i class="arg">time</i>. <i class="arg">Time</i> should be in the format <span class="emph">YYYYMMDDHHMMSS[.nsec]</span> where <span class="emph">nsec</span> is an optional nanosecond specification. If no nanoseconds are specified, the <b class="var">mtimensec</b>, <b class="var">ctimensec</b>, or <b class="var">atimensec</b> field will be set to zero.<div class="spacer">
</div>
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">quit</b>, <b class="flag">q</b>, <b class="flag">exit,</b> <span class="emph">&lt;EOF&gt;</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Exit the program.</dd>
</dl>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../html3/editline.html">editline(3)</a>, <a class="link-man" href="../html5/fs.html">fs(5)</a>, <a class="link-man" href="../html8/clri.html">clri(8)</a>, <a class="link-man" href="../html8/fsck.html">fsck(8)</a></div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> <b class="name">fsdb</b> uses the source code for <a class="link-man" href="../html8/fsck.html">fsck(8)</a> to implement most of the file system manipulation code. The remainder of <b class="name">fsdb</b> first appeared in <span class="unix">NetBSD&#160;1.1</span>.</div>
<div class="section">
<h1 id="x42554753">BUGS</h1> Manipulation of &#8220;short&#8221; symlinks doesn't work (in particular, don't try changing a symlink's type).<div class="spacer">
</div>
You must specify modes as numbers rather than symbolic names.<div class="spacer">
</div>
There are a bunch of other things that you might want to do which <b class="name">fsdb</b> doesn't implement.</div>
<div class="section">
<h1 id="x5741524e494e47">WARNING</h1> Use this tool with extreme caution &#8211; you can damage an FFS file system beyond what <a class="link-man" href="../html8/fsck.html">fsck(8)</a> can repair.</div>
</div>
</body>
</html>

