<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/posix/style.css" type="text/css" media="all"/>
<title>
RC.D(8)</title>
</head>
<body>
<div class="mandoc">
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">rc.d</b> &#8212; <span class="desc">daemon control scripts</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1><table class="synopsis">
<col style="width: 4.00ex;"/>
<col/>
<tbody>
<tr>
<td>
/etc/rc.d/<i class="arg">daemon</i></td>
<td>
[<span class="opt"><b class="flag">-df</b></span>] <i class="arg">action</i></td>
</tr>
</tbody>
</table>
</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> The <i class="file">/etc/rc.d</i> directory contains shell scripts to start, stop, and reconfigure daemon programs (&#8220;services&#8221;).<div class="spacer">
</div>
Services installed from <a class="link-man" href="../html7/packages.html">packages(7)</a> may be started at boot time in the order specified by the <b class="var">pkg_scripts</b> variable from <a class="link-man" href="../html8/rc.conf.html">rc.conf(8)</a>; the order will be reversed during shutdown. Services comprising <span class="unix">OpenBSD</span> base are started by <a class="link-man" href="../html8/rc.html">rc(8)</a>.<div class="spacer">
</div>
The options are as follows:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-d</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Setting this option will print the function names as they are called and prevent the <a class="link-man" href="../html8/rc.subr.html">rc.subr(8)</a> framework from redirecting stdin and stderr to /dev/null. This is used to allow debugging of failed <i class="arg">actions</i>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-f</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
This option only affects the <b class="flag">start</b> action. It will forcibly start the daemon whatever value <b class="var">daemon_flags</b> is set to. If <b class="var">daemon_flags</b> is set to &#8220;NO&#8221;, execution will continue with the script's own defaults unless other flags are specified.</dd>
</dl>
<div class="spacer">
</div>
Each such script responds to the following <i class="arg">actions</i>:<div class="spacer">
</div>
<dl style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 6.00ex;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">start</b></dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
Start the service, if not already running.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">stop</b></dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
Stop the service.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">reload</b></dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
Tell the daemon to reload its configuration.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">restart</b></dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
Perform a stop, then a start.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">check</b></dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
Return 0 if the daemon is running or 1 if it is not.</dd>
</dl>
</div>
<div class="section">
<h1 id="x454e5649524f4e4d454e54">ENVIRONMENT</h1> Daemon control scripts use a fixed number of <a class="link-man" href="../html1/sh.html">sh(1)</a> variables when starting a daemon. The following three can be overridden by site-specific values provided in <a class="link-man" href="../html8/rc.conf.local.html">rc.conf.local(8)</a>:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 6.00ex;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="arg">daemon</i>_flags</dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
Additional arguments to call the daemon with. These will be appended to any mandatory arguments already contained in the <b class="var">daemon</b> variable defined in the control script. If <i class="arg">daemon</i>_flags is set to &#8220;NO&#8221;, it will prevent the daemon from starting even when listed in <b class="var">pkg_scripts</b>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="arg">daemon</i>_rtable</dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
Routing table to run the daemon under, using <a class="link-man" href="../html8/route.html">route(8)</a>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="arg">daemon</i>_timeout</dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
Maximum time in seconds to wait for the <b class="flag">start</b> (only if <b class="var">rc_bg</b> is set), <b class="flag">stop</b> and <b class="flag">reload</b> actions to return. This is only guaranteed with the default <b class="cmd">rc_start</b>, <b class="cmd">rc_stop</b> and <b class="cmd">rc_reload</b> functions.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="arg">daemon</i>_user</dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
User to run the daemon as, using <a class="link-man" href="../html1/su.html">su(1)</a>.</dd>
</dl>
<div class="spacer">
</div>
To obtain the actual variable names, replace <i class="arg">daemon</i> with the name of the script. For example, postgres is managed through <i class="file">/etc/rc.d/postgresql</i>:<div class="spacer">
</div>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit">daemon_flags=-w -l /var/postgresql/logfile</code></div>
</blockquote>
<div class="spacer">
</div>
To override this and increase the debug log level (keeping the existing flags), define the following in <a class="link-man" href="../html8/rc.conf.local.html">rc.conf.local(8)</a>:<div class="spacer">
</div>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit">postgresql_flags=-w -l /var/postgresql/logfile -d 5</code></div>
</blockquote>
<div class="spacer">
</div>
Each script may define its own defaults, as explained in <a class="link-man" href="../html8/rc.subr.html">rc.subr(8)</a>.<div class="spacer">
</div>
<b class="var">daemon_class</b> is a special read-only variable. It is set to &#8220;daemon&#8221; unless there is a login class configured in <a class="link-man" href="../html5/login.conf.html">login.conf(5)</a> with the same name as the <b class="name">rc.d</b> script itself, in which case it will be set to that login class. This allows setting many initial process properties, for example environment variables, scheduling priority, and process limits such as maximum memory use and number of files.</div>
<div class="section">
<h1 id="x46494c4553">FILES</h1><dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="file">/etc/rc.d/</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Directory containing daemon control scripts.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="file">/etc/rc.d/rc.subr</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Functions and variables used by <b class="name">rc.d</b> scripts.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="file">/var/run/rc.d/</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Directory containing files recording the variables of currently running daemons. Some are informational and some are for matching daemons using <a class="link-man" href="../html1/pgrep.html">pgrep(1)</a> and <a class="link-man" href="../html1/pkill.html">pkill(1)</a>.</dd>
</dl>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../html8/rc.html">rc(8)</a>, <a class="link-man" href="../html8/rc.conf.html">rc.conf(8)</a>, <a class="link-man" href="../html8/rc.subr.html">rc.subr(8)</a>, <a class="link-man" href="../html8/rcctl.html">rcctl(8)</a></div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> The <i class="file">/etc/rc.d</i> directory first appeared in <span class="unix">OpenBSD&#160;4.9</span>.</div>
</div>
</body>
</html>

