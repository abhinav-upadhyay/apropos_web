<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/posix/style.css" type="text/css" media="all"/>
<title>
MAIL.LOCAL(8)</title>
</head>
<body>
<div class="mandoc">
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">mail.local</b> &#8212; <span class="desc">store mail in a mailbox</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1><table class="synopsis">
<col style="width: 10.00ex;"/>
<col/>
<tbody>
<tr>
<td>
mail.local</td>
<td>
[<span class="opt"><b class="flag">-Ll</b></span>] [<span class="opt"><b class="flag">-f</b> <i class="arg">from</i></span>] <i class="arg">user ...</i></td>
</tr>
</tbody>
</table>
</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> <b class="name">mail.local</b> reads the standard input up to an end-of-file and appends it to each <i class="arg">user</i>'s <i class="file">mail</i> file. The <i class="arg">user</i> must be a valid user name.<div class="spacer">
</div>
The options are as follows:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-f</b> <i class="arg">from</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Specify the sender's name.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-L</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Don't create a <i class="file">username.lock</i> file while locking the spool.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-l</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
For compatibility, request that files named <i class="file">username.lock</i> be used for locking. (This is the default behavior.)</dd>
</dl>
<div class="spacer">
</div>
Individual mail messages in the mailbox are delimited by an empty line followed by a line beginning with the string &#8220;From&#160;&#8221;. A line containing the string &#8220;From&#160;&#8221;, the sender's name and a timestamp is prepended to each delivered mail message. A blank line is appended to each message. A greater-than character (&#8216;<code class="lit">&gt;</code>&#8217;) is prepended to any line in the message which could be mistaken for a &#8220;From&#160;&#8221; delimiter line.<div class="spacer">
</div>
Significant efforts have been made to ensure that <b class="name">mail.local</b> acts as securely as possible if the spool directory is mode 1777 or 755. The default of mode 755 is more secure, but it prevents mail clients from using <i class="file">username.lock</i> style locking. The use of 1777 is more flexible in an NFS shared-spool environment, so many sites use it. However, it does carry some risks, such as attackers filling the spool disk. Some of these problems may be alleviated by making the spool a separate filesystem, and placing quotas on it. The use of any mode other than 1777 and 755 for the spool directory is recommended against but may work properly.<div class="spacer">
</div>
The mailbox is always locked using <a class="link-man" href="../html2/flock.html">flock(2)</a> while mail is appended. Unless the <b class="flag">-L</b> flag is specified, a <i class="file">username.lock</i> file is also used.<div class="spacer">
</div>
If the <a class="link-man" href="../html1/biff.html">biff(1)</a> service is returned by <a class="link-man" href="../html3/getservbyname.html">getservbyname(3)</a>, the biff server is notified of delivered mail.</div>
<div class="section">
<h1 id="x454e5649524f4e4d454e54">ENVIRONMENT</h1><dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">TZ</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Used to set the appropriate time zone on the timestamp.</dd>
</dl>
</div>
<div class="section">
<h1 id="x46494c4553">FILES</h1><dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/tmp/local.XXXXXXXXXX</i></dt>
<dd class="list-tag" style="margin-left: 21.00ex;">
temporary files</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/var/mail/user</i></dt>
<dd class="list-tag" style="margin-left: 21.00ex;">
user's mailbox directory</dd>
</dl>
</div>
<div class="section">
<h1 id="x4558495420535441545553">EXIT STATUS</h1> The <b class="utility">mail.local</b> utility exits&#160;0 on success, and&#160;&gt;0 if an error occurs.</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../html1/biff.html">biff(1)</a>, <a class="link-man" href="../html1/mail.html">mail(1)</a>, <a class="link-man" href="../html2/flock.html">flock(2)</a>, <a class="link-man" href="../html3/getservbyname.html">getservbyname(3)</a>, <a class="link-man" href="../html8/comsat.html">comsat(8)</a>, <a class="link-man" href="../html8/smtpd.html">smtpd(8)</a></div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> A superset of <b class="name">mail.local</b> (handling mailbox reading as well as mail delivery) appeared in Version&#160;7 AT&amp;T UNIX as the program <a class="link-man" href="../html1/mail.html">mail(1)</a>.</div>
<div class="section">
<h1 id="x42554753">BUGS</h1> Using quotas in <i class="file">/var/mail</i> can be problematic if using <a class="link-man" href="../html8/sendmail.html">sendmail(8)</a> as an MTA, since it asks <b class="name">mail.local</b> to deliver a message to multiple recipients if possible. This causes problems in a quota environment since a message may be delivered to some users but not others due to disk quotas. Even though the message was delivered to some of the recipients, <b class="name">mail.local</b> will exit with an exit code &gt; 0, causing <a class="link-man" href="../html8/sendmail.html">sendmail(8)</a> to attempt redelivery later. That means that some users will keep getting the same message every time <a class="link-man" href="../html8/sendmail.html">sendmail(8)</a> runs its queue. This problem does not exist for <a class="link-man" href="../html8/smtpd.html">smtpd(8)</a> users.<div class="spacer">
</div>
If you are running <a class="link-man" href="../html8/sendmail.html">sendmail(8)</a> and have disk quotas on <i class="file">/var/mail</i> it is imperative that you unset the &#8220;m&#8221; mailer flag for the &#8216;local&#8217; mailer. To do this, locate the line beginning with &#8220;Mlocal&#8221; in <i class="file">/etc/mail/sendmail.cf</i> and remove the &#8220;m&#8221; from the flags section, denoted by &#8220;F=&#8221;. Alternately, you can override the default mailer flags by adding the line:<div class="spacer">
</div>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit">define(`LOCAL_MAILER_FLAGS', `rn9S')dnl</code></div>
</blockquote>
<div class="spacer">
</div>
to your &#8220;.mc&#8221; file (this is the source file that is used to generate <i class="file">/etc/mail/sendmail.cf</i>).</div>
</div>
</body>
</html>

