<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/posix/style.css" type="text/css" media="all"/>
<title>
BIO_SET_CALLBACK(3)</title>
</head>
<body>
<div class="mandoc">
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">BIO_set_callback</b>, <b class="name">BIO_get_callback</b>, <b class="name">BIO_set_callback_arg</b>, <b class="name">BIO_get_callback_arg</b>, <b class="name">BIO_debug_callback</b> &#8212; <span class="desc">BIO callback functions</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="includes">#include &lt;<a class="link-includes">openssl/bio.h</a>&gt;</b><div class="spacer">
</div>
<b class="macro">#define BIO_set_callback(b,cb)		((b)-&gt;callback=(cb))</b><br/>
<b class="macro">#define BIO_get_callback(b)			((b)-&gt;callback)</b><br/>
<b class="macro">#define BIO_set_callback_arg(b,arg)	((b)-&gt;cb_arg=(char *)(arg))</b><br/>
<b class="macro">#define BIO_get_callback_arg(b)		((b)-&gt;cb_arg)</b><div class="spacer">
</div>
<i class="ftype">long</i><br/>
<b class="fname">BIO_debug_callback</b>(<i class="farg">BIO *bio</i>, <i class="farg">int cmd</i>, <i class="farg">const char *argp</i>, <i class="farg">int argi</i>, <i class="farg">long argl</i>, <i class="farg">long ret</i>);<div class="spacer">
</div>
<i class="ftype">typedef long *</i><br/>
<b class="fname">callback</b>(<i class="farg">BIO *b</i>, <i class="farg">int oper</i>, <i class="farg">const char *argp</i>, <i class="farg">int argi</i>, <i class="farg">long argl</i>, <i class="farg">long retvalue</i>);</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> <b class="fname">BIO_set_callback</b>() and <b class="fname">BIO_get_callback</b>() set and retrieve the BIO callback, they are both macros. The callback is called during most high level BIO operations. It can be used for debugging purposes to trace operations on a BIO or to modify its operation.<div class="spacer">
</div>
<b class="fname">BIO_set_callback_arg</b>() and <b class="fname">BIO_get_callback_arg</b>() are macros which can be used to set and retrieve an argument for use in the callback.<div class="spacer">
</div>
<b class="fname">BIO_debug_callback</b>() is a standard debugging callback which prints out information relating to each BIO operation. If the callback argument is set, it is interpreted as a BIO to send the information to, otherwise stderr is used.<div class="spacer">
</div>
<b class="fname">callback</b>() is the callback function itself. The meaning of each argument is described below.<div class="spacer">
</div>
The BIO the callback is attached to is passed in <i class="farg">b</i>.<div class="spacer">
</div>
<i class="farg">oper</i> is set to the operation being performed. For some operations the callback is called twice, once before and once after the actual operation. The latter case has <i class="farg">oper</i> or'ed with <span class="define">BIO_CB_RETURN</span>.<div class="spacer">
</div>
The meaning of the arguments <i class="farg">argp</i>, <i class="farg">argi</i> and <i class="farg">argl</i> depends on the value of <i class="farg">oper</i>, that is the operation being performed.<div class="spacer">
</div>
<i class="farg">retvalue</i> is the return value that would be returned to the application if no callback were present. The actual value returned is the return value of the callback itself. In the case of callbacks called before the actual BIO operation, 1 is placed in retvalue. If the return value is not positive, it will be immediately returned to the application and the BIO operation will not be performed.<div class="spacer">
</div>
The callback should normally simply return <i class="farg">retvalue</i> when it has finished processing, unless it specifically wishes to modify the value returned to the application.<div class="subsection">
<h2 id="x43616c6c6261636b206f7065726174696f6e73">Callback operations</h2><dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">BIO_free</b>(<i class="farg">b</i>)</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
<b class="fname">callback</b>(<i class="farg">b</i>, <i class="farg">BIO_CB_FREE</i>, <i class="farg">NULL</i>, <i class="farg">0L</i>, <i class="farg">0L</i>, <i class="farg">1L</i>) is called before the free operation.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">BIO_read</b>(<i class="farg">b</i>, <i class="farg">out</i>, <i class="farg">outl</i>)</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
<b class="fname">callback</b>(<i class="farg">b</i>, <i class="farg">BIO_CB_READ</i>, <i class="farg">out</i>, <i class="farg">outl</i>, <i class="farg">0L</i>, <i class="farg">1L</i>) is called before the read and <b class="fname">callback</b>(<i class="farg">b</i>, <i class="farg">BIO_CB_READ|BIO_CB_RETURN</i>, <i class="farg">out</i>, <i class="farg">outl</i>, <i class="farg">0L</i>, <i class="farg">retvalue</i>) after.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">BIO_write</b>(<i class="farg">b</i>, <i class="farg">in</i>, <i class="farg">inl</i>)</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
<b class="fname">callback</b>(<i class="farg">b</i>, <i class="farg">BIO_CB_WRITE</i>, <i class="farg">in</i>, <i class="farg">inl</i>, <i class="farg">0L</i>, <i class="farg">1L</i>) is called before the write and <b class="fname">callback</b>(<i class="farg">b</i>, <i class="farg">BIO_CB_WRITE|BIO_CB_RETURN</i>, <i class="farg">in</i>, <i class="farg">inl</i>, <i class="farg">0L</i>, <i class="farg">retvalue</i>) after.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">BIO_gets</b>(<i class="farg">b</i>, <i class="farg">out</i>, <i class="farg">outl</i>)</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
<b class="fname">callback</b>(<i class="farg">b</i>, <i class="farg">BIO_CB_GETS</i>, <i class="farg">out</i>, <i class="farg">outl</i>, <i class="farg">0L</i>, <i class="farg">1L</i>) is called before the operation and <b class="fname">callback</b>(<i class="farg">b</i>, <i class="farg">BIO_CB_GETS|BIO_CB_RETURN</i>, <i class="farg">out</i>, <i class="farg">outl</i>, <i class="farg">0L</i>, <i class="farg">retvalue</i>) after.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">BIO_puts</b>(<i class="farg">b</i>, <i class="farg">in</i>)</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
<b class="fname">callback</b>(<i class="farg">b</i>, <i class="farg">BIO_CB_WRITE</i>, <i class="farg">in</i>, <i class="farg">0</i>, <i class="farg">0L</i>, <i class="farg">1L</i>) is called before the operation and <b class="fname">callback</b>(<i class="farg">b</i>, <i class="farg">BIO_CB_WRITE|BIO_CB_RETURN</i>, <i class="farg">in</i>, <i class="farg">0</i>, <i class="farg">0L</i>, <i class="farg">retvalue</i>) after.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="fname">BIO_ctrl</b>(<i class="farg">b</i>, <i class="farg">cmd</i>, <i class="farg">larg</i>, <i class="farg">parg</i>)</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
<b class="fname">callback</b>(<i class="farg">b</i>, <i class="farg">BIO_CB_CTRL</i>, <i class="farg">parg</i>, <i class="farg">cmd</i>, <i class="farg">larg</i>, <i class="farg">1L</i>) is called before the call and <b class="fname">callback</b>(<i class="farg">b</i>, <i class="farg">BIO_CB_CTRL|BIO_CB_RETURN</i>, <i class="farg">parg</i>, <i class="farg">cmd</i>, <i class="farg">larg</i>, <i class="farg">ret</i>) after.</dd>
</dl>
</div>
</div>
<div class="section">
<h1 id="x4558414d504c4553">EXAMPLES</h1> The <b class="fname">BIO_debug_callback</b>() function is a good example, its source is in the file <i class="file">crypto/bio/bio_cb.c</i>.</div>
</div>
</body>
</html>

