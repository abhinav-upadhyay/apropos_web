<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/posix/style.css" type="text/css" media="all"/>
<title>
DSA_GENERATE_PARAMETERS(3)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
DSA_GENERATE_PARAMETERS(3)</td>
<td class="head-vol">
OpenSSL</td>
<td class="head-rtitle">
DSA_GENERATE_PARAMETERS(3)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>NAME</h1> DSA_generate_parameters_ex, DSA_generate_parameters - generate DSA parameters</div>
<div class="section">
<h1>SYNOPSIS</h1><br/>
 #include &lt;openssl/dsa.h&gt;<br/>
<br/>
 int DSA_generate_parameters_ex(DSA *dsa, int bits,<br/>
                const unsigned char *seed,int seed_len,<br/>
                int *counter_ret, unsigned long *h_ret, BN_GENCB *cb);<br/>
<div class="spacer">
</div>
Deprecated:<div class="spacer">
</div>
<br/>
 DSA *DSA_generate_parameters(int bits, unsigned char *seed,<br/>
                int seed_len, int *counter_ret, unsigned long *h_ret,<br/>
                void (*callback)(int, int, void *), void *cb_arg);<br/>
</div>
<div class="section">
<h1>DESCRIPTION</h1>  <i>DSA_generate_parameters_ex()</i> generates primes p and q and a generator g for use in the DSA and stores the result in  <b>dsa</b>.<div class="spacer">
</div>
<b>bits</b> is the length of the prime to be generated; the DSS allows a maximum of 1024 bits.<div class="spacer">
</div>
If <b>seed</b> is <b>NULL</b> or <b>seed_len</b> &lt; 20, the primes will be generated at random. Otherwise, the seed is used to generate them. If the given seed does not yield a prime q, a new random seed is chosen and placed at  <b>seed</b>.<div class="spacer">
</div>
<i>DSA_generate_parameters_ex()</i> places the iteration count in * <b>counter_ret</b> and a counter used for finding a generator in * <b>h_ret</b>, unless these are <b>NULL</b>.<div class="spacer">
</div>
A callback function may be used to provide feedback about the progress of the key generation. If  <b>cb</b> is not <b>NULL</b>, it will be called as shown below. For information on the BN_GENCB structure and the BN_GENCB_call function discussed below, refer to  <i>BN_generate_prime</i>(3).<dl>
<dt>
&#8226;</dt>
<dd>
When a candidate for q is generated, <b>BN_GENCB_call(cb, 0, m++)</b> is called (m is 0 for the first candidate).</dd>
</dl>
<dl>
<dt>
&#8226;</dt>
<dd>
When a candidate for q has passed a test by trial division,  <b>BN_GENCB_call(cb, 1, -1)</b> is called. While a candidate for q is tested by Miller-Rabin primality tests,  <b>BN_GENCB_call(cb, 1, i)</b> is called in the outer loop (once for each witness that confirms that the candidate may be prime); i is the loop counter (starting at 0).</dd>
</dl>
<dl>
<dt>
&#8226;</dt>
<dd>
When a prime q has been found, <b>BN_GENCB_call(cb, 2, 0)</b> and  <b>BN_GENCB_call(cb, 3, 0)</b> are called.</dd>
</dl>
<dl>
<dt>
&#8226;</dt>
<dd>
Before a candidate for p (other than the first) is generated and tested,  <b>BN_GENCB_call(cb, 0, counter)</b> is called.</dd>
</dl>
<dl>
<dt>
&#8226;</dt>
<dd>
When a candidate for p has passed the test by trial division,  <b>BN_GENCB_call(cb, 1, -1)</b> is called. While it is tested by the Miller-Rabin primality test,  <b>BN_GENCB_call(cb, 1, i)</b> is called in the outer loop (once for each witness that confirms that the candidate may be prime). i is the loop counter (starting at 0).</dd>
</dl>
<dl>
<dt>
&#8226;</dt>
<dd>
When p has been found, <b>BN_GENCB_call(cb, 2, 1)</b> is called.</dd>
</dl>
<dl>
<dt>
&#8226;</dt>
<dd>
When the generator has been found, <b>BN_GENCB_call(cb, 3, 1)</b> is called.</dd>
</dl>
<div class="spacer">
</div>
<i>DSA_generate_parameters()</i> (deprecated) works in much the same way as for DSA_generate_parameters_ex, except that no <b>dsa</b> parameter is passed and instead a newly allocated  <b>DSA</b> structure is returned. Additionally &quot;old style&quot; callbacks are used instead of the newer BN_GENCB based approach. Refer to  <i>BN_generate_prime</i>(3) for further information.</div>
<div class="section">
<h1>RETURN VALUE</h1>  <i>DSA_generate_parameters_ex()</i> returns a 1 on success, or 0 otherwise.<div class="spacer">
</div>
<i>DSA_generate_parameters()</i> returns a pointer to the DSA structure, or  <b>NULL</b> if the parameter generation fails.<div class="spacer">
</div>
The error codes can be obtained by <i>ERR_get_error</i>(3).</div>
<div class="section">
<h1>BUGS</h1> Seed lengths &gt; 20 are not supported.</div>
<div class="section">
<h1>SEE ALSO</h1>  <i>dsa</i>(3), <i>ERR_get_error</i>(3), <i>rand</i>(3),  <i>DSA_free</i>(3), <i>BN_generate_prime</i>(3)</div>
<div class="section">
<h1>HISTORY</h1>  <i>DSA_generate_parameters()</i> appeared in SSLeay 0.8. The <b>cb_arg</b> argument was added in SSLeay 0.9.0. In versions up to OpenSSL 0.9.4,  <b>callback(1, ...)</b> was called in the inner loop of the Miller-Rabin test whenever it reached the squaring step (the parameters to  <b>callback</b> did not reveal how many witnesses had been tested); since OpenSSL 0.9.5,  <b>callback(1, ...)</b> is called as in  <i>BN_is_prime</i>(3), i.e. once for each witness.</div>
<table class="foot">
<tr>
<td class="foot-date">
2014-07-11</td>
<td class="foot-os">
OpenBSD 6.0</td>
</tr>
</table>
</div>
</body>
</html>

