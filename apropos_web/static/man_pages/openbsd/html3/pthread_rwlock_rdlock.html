<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/posix/style.css" type="text/css" media="all"/>
<title>
PTHREAD_RWLOCK_RDLOCK(3)</title>
</head>
<body>
<div class="mandoc">
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">pthread_rwlock_rdlock</b>, <b class="name">pthread_rwlock_timedrdlock</b>, <b class="name">pthread_rwlock_tryrdlock</b> &#8212; <span class="desc">acquire a read/write lock for reading</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="includes">#include &lt;<a class="link-includes">pthread.h</a>&gt;</b><div class="spacer">
</div>
<i class="ftype">int</i><br/>
<b class="fname">pthread_rwlock_rdlock</b>(<i class="farg" style="white-space:nowrap;">pthread_rwlock_t *lock</i>);<div class="spacer">
</div>
<i class="ftype">int</i><br/>
<b class="fname">pthread_rwlock_timedrdlock</b>(<i class="farg" style="white-space:nowrap;">pthread_rwlock_t *lock</i>, <i class="farg" style="white-space:nowrap;">const struct timespec *abstime</i>);<div class="spacer">
</div>
<i class="ftype">int</i><br/>
<b class="fname">pthread_rwlock_tryrdlock</b>(<i class="farg" style="white-space:nowrap;">pthread_rwlock_t *lock</i>);</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> The <b class="fname">pthread_rwlock_rdlock</b>() function acquires a read lock on <i class="farg">lock</i> provided that <i class="farg">lock</i> is not presently held for writing and no writer threads are presently blocked on the lock. If the read lock cannot be immediately acquired, the calling thread blocks until it can acquire the lock.<div class="spacer">
</div>
The <b class="fname">pthread_rwlock_timedrdlock</b>() function performs the same action, but will not wait beyond <i class="farg">abstime</i> to obtain the lock before returning.<div class="spacer">
</div>
The <b class="fname">pthread_rwlock_tryrdlock</b>() function performs the same action as <b class="fname">pthread_rwlock_rdlock</b>(), but does not block if the lock cannot be immediately obtained (i.e., the lock is held for writing or there are writers waiting).<div class="spacer">
</div>
A thread may hold multiple concurrent read locks. If so, <b class="fname">pthread_rwlock_unlock</b>() must be called once for each lock obtained.<div class="spacer">
</div>
The results of acquiring a read lock while the calling thread holds a write lock are undefined.</div>
<div class="section">
<h1 id="x494d504c454d454e544154494f4e204e4f544553">IMPLEMENTATION NOTES</h1> To prevent writer starvation, writers are favored over readers.</div>
<div class="section">
<h1 id="x52455455524e2056414c554553">RETURN VALUES</h1> If successful, the <b class="fname">pthread_rwlock_rdlock</b>(), <b class="fname">pthread_rwlock_timedrdlock</b>(), and <b class="fname">pthread_rwlock_tryrdlock</b>() functions will return zero. Otherwise an error number will be returned to indicate the error.</div>
<div class="section">
<h1 id="x4552524f5253">ERRORS</h1> The <b class="fname">pthread_rwlock_tryrdlock</b>() function will fail if:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">EBUSY</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The lock could not be acquired because a writer holds the lock or was blocked on it.</dd>
</dl>
<div class="spacer">
</div>
The <b class="fname">pthread_rwlock_timedrdlock</b>() function will fail if:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">ETIMEDOUT</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The time specified by <i class="farg">abstime</i> was reached before the lock could be obtained.</dd>
</dl>
<div class="spacer">
</div>
The <b class="fname">pthread_rwlock_rdlock</b>(), <b class="fname">pthread_rwlock_timedrdlock</b>(), and <b class="fname">pthread_rwlock_tryrdlock</b>() functions may fail if:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">EAGAIN</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The lock could not be acquired because the maximum number of read locks against <i class="farg">lock</i> has been exceeded.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">EDEADLK</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The current thread already owns <i class="farg">lock</i> for writing.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">EINVAL</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The value specified by <i class="farg">lock</i> is invalid.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">ENOMEM</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
Insufficient memory exists to initialize the lock (applies to statically initialized locks only).</dd>
</dl>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../html3/pthread_rwlock_init.html">pthread_rwlock_init(3)</a>, <a class="link-man" href="../html3/pthread_rwlock_trywrlock.html">pthread_rwlock_trywrlock(3)</a>, <a class="link-man" href="../html3/pthread_rwlock_unlock.html">pthread_rwlock_unlock(3)</a>, <a class="link-man" href="../html3/pthread_rwlock_wrlock.html">pthread_rwlock_wrlock(3)</a></div>
<div class="section">
<h1 id="x5354414e4441524453">STANDARDS</h1> The <b class="fname">pthread_rwlock_rdlock</b>(), <b class="fname">pthread_rwlock_timedrdlock</b>(), and <b class="fname">pthread_rwlock_tryrdlock</b>() functions are expected to conform to Version&#160;2 of the Single UNIX Specification (&#8220;SUSv2&#8221;).</div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> The <b class="fname">pthread_rwlock_rdlock</b>() function first appeared in <span class="unix">FreeBSD&#160;3.0</span> and <span class="unix">OpenBSD&#160;2.5</span>. The <b class="fname">pthread_rwlock_timedrdlock</b>() function first appeared in <span class="unix">OpenBSD&#160;4.8</span>.</div>
</div>
</body>
</html>

