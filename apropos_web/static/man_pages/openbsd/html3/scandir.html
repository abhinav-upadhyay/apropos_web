<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/posix/style.css" type="text/css" media="all"/>
<title>
SCANDIR(3)</title>
</head>
<body>
<div class="mandoc">
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">scandir</b>, <b class="name">alphasort</b> &#8212; <span class="desc">scan a directory</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="includes">#include &lt;<a class="link-includes">sys/types.h</a>&gt;</b><br/>
<b class="includes">#include &lt;<a class="link-includes">dirent.h</a>&gt;</b><div class="spacer">
</div>
<i class="ftype">int</i><br/>
<b class="fname">scandir</b>(<i class="farg">const char *dirname</i>, <i class="farg">struct dirent ***namelist</i>, <i class="farg">int (*select)(const struct dirent *)</i>, <i class="farg">int (*compar)(const struct dirent **, const struct dirent **)</i>);<div class="spacer">
</div>
<i class="ftype">int</i><br/>
<b class="fname">alphasort</b>(<i class="farg" style="white-space:nowrap;">const struct dirent **d1</i>, <i class="farg" style="white-space:nowrap;">const struct dirent **d2</i>);</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> The <b class="fname">scandir</b>() function reads the directory <i class="farg">dirname</i> and builds an array of pointers to directory entries using <a class="link-man" href="../html3/malloc.html">malloc(3)</a>. It returns the number of entries in the array. A pointer to the array of directory entries is stored in the location referenced by <i class="farg">namelist</i>.<div class="spacer">
</div>
The <i class="farg">select</i> parameter is a pointer to a user-supplied subroutine which is called by <b class="fname">scandir</b>() to select which entries are to be included in the array. The select routine is passed a pointer to a directory entry and should return a non-zero value if the directory entry is to be included in the array. If <i class="farg">select</i> is <span class="define">NULL</span>, then all directory entries will be included.<div class="spacer">
</div>
The <i class="farg">compar</i> parameter is a pointer to a user-supplied subroutine which is passed to <a class="link-man" href="../html3/qsort.html">qsort(3)</a> to sort the completed array. If this pointer is <span class="define">NULL</span>, the array is not sorted.<div class="spacer">
</div>
The <b class="fname">alphasort</b>() function is a routine which can be used for the <i class="farg">compar</i> parameter to sort the array alphabetically.<div class="spacer">
</div>
The memory allocated for the array can be deallocated with <a class="link-man" href="../html3/free.html">free(3)</a>, by freeing each pointer in the array and then the array itself.</div>
<div class="section">
<h1 id="x444941474e4f5354494353">DIAGNOSTICS</h1> Returns -1 if the directory cannot be opened for reading or if <a class="link-man" href="../html3/malloc.html">malloc(3)</a> cannot allocate enough memory to hold all the data structures.</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../html3/directory.html">directory(3)</a>, <a class="link-man" href="../html3/malloc.html">malloc(3)</a>, <a class="link-man" href="../html3/qsort.html">qsort(3)</a>, <a class="link-man" href="../html5/dir.html">dir(5)</a></div>
<div class="section">
<h1 id="x5354414e4441524453">STANDARDS</h1> The <b class="fname">scandir</b>() and <b class="fname">alphasort</b>() functions conform to IEEE Std 1003.1-2008 (&#8220;POSIX.1&#8221;).</div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> The <b class="fname">scandir</b>() and <b class="fname">alphasort</b>() functions appeared in <span class="unix">4.2BSD</span>.<div class="spacer">
</div>
The argument types for <b class="fname">alphasort</b>() and for the <b class="fname">compar</b>() argument to <b class="fname">scandir</b>() were originally <span class="type">void *</span>, then changed to <span class="type">const void *</span>, and then finally changed by IEEE Std 1003.1-2008 (&#8220;POSIX.1&#8221;) to their current form of <span class="type">const struct dirent **</span>. Similarly, the <b class="fname">select</b>() argument to <b class="fname">scandir</b>() was originally <span class="type">struct dirent *</span> until it was changed to its current form of <span class="type">const struct dirent *</span>.</div>
</div>
</body>
</html>

