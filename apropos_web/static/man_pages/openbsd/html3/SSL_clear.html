<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/posix/style.css" type="text/css" media="all"/>
<title>
SSL_CLEAR(3)</title>
</head>
<body>
<div class="mandoc">
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">SSL_clear</b> &#8212; <span class="desc">reset SSL object to allow another connection</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="includes">#include &lt;<a class="link-includes">openssl/ssl.h</a>&gt;</b><div class="spacer">
</div>
<i class="ftype">int</i><br/>
<b class="fname">SSL_clear</b>(<i class="farg" style="white-space:nowrap;">SSL *ssl</i>);</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> Reset <i class="farg">ssl</i> to allow another connection. All settings (method, ciphers, BIOs) are kept.</div>
<div class="section">
<h1 id="x4e4f544553">NOTES</h1> <b class="fname">SSL_clear</b>() is used to prepare an <span class="type">SSL</span> object for a new connection. While all settings are kept, a side effect is the handling of the current SSL session. If a session is still <span class="emph">open</span>, it is considered bad and will be removed from the session cache, as required by RFC2246. A session is considered open if <a class="link-man" href="../html3/SSL_shutdown.html">SSL_shutdown(3)</a> was not called for the connection or at least <a class="link-man" href="../html3/SSL_set_shutdown.html">SSL_set_shutdown(3)</a> was used to set the <span class="define">SSL_SENT_SHUTDOWN</span> state.<div class="spacer">
</div>
If a session was closed cleanly, the session object will be kept and all settings corresponding. This explicitly means that for example the special method used during the session will be kept for the next handshake. So if the session was a TLSv1 session, a <span class="type">SSL</span> client object will use a TLSv1 client method for the next handshake and a <span class="type">SSL</span> server object will use a TLSv1 server method, even if <b class="fname">SSLv23_*_method</b>()s were chosen on startup. This might lead to connection failures (see <a class="link-man" href="../html3/SSL_new.html">SSL_new(3)</a>) for a description of the method's properties.</div>
<div class="section">
<h1 id="x5741524e494e4753">WARNINGS</h1> <b class="fname">SSL_clear</b>() resets the <span class="type">SSL</span> object to allow for another connection. The reset operation however keeps several settings of the last sessions (some of these settings were made automatically during the last handshake). It only makes sense for a new connection with the exact same peer that shares these settings, and may fail if that peer changes its settings between connections. Use the sequence <a class="link-man" href="../html3/SSL_get_session.html">SSL_get_session(3)</a>; <a class="link-man" href="../html3/SSL_new.html">SSL_new(3)</a>; <a class="link-man" href="../html3/SSL_set_session.html">SSL_set_session(3)</a>; <a class="link-man" href="../html3/SSL_free.html">SSL_free(3)</a> instead to avoid such failures (or simply <a class="link-man" href="../html3/SSL_free.html">SSL_free(3)</a>; <a class="link-man" href="../html3/SSL_new.html">SSL_new(3)</a> if session reuse is not desired).</div>
<div class="section">
<h1 id="x52455455524e2056414c554553">RETURN VALUES</h1> The following return values can occur:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
0</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
The <b class="fname">SSL_clear</b>() operation could not be performed. Check the error stack to find out the reason.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
1</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
The <b class="fname">SSL_clear</b>() operation was successful.</dd>
</dl>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../html3/ssl.html">ssl(3)</a>, <a class="link-man" href="../html3/SSL_CTX_set_client_cert_cb.html">SSL_CTX_set_client_cert_cb(3)</a>, <a class="link-man" href="../html3/SSL_CTX_set_options.html">SSL_CTX_set_options(3)</a>, <a class="link-man" href="../html3/SSL_free.html">SSL_free(3)</a>, <a class="link-man" href="../html3/SSL_new.html">SSL_new(3)</a>, <a class="link-man" href="../html3/SSL_set_shutdown.html">SSL_set_shutdown(3)</a>, <a class="link-man" href="../html3/SSL_shutdown.html">SSL_shutdown(3)</a></div>
</div>
</body>
</html>

