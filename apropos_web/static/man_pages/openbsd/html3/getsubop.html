<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/posix/style.css" type="text/css" media="all"/>
<title>
GETSUBOPT(3)</title>
</head>
<body>
<div class="mandoc">
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">getsubopt</b> &#8212; <span class="desc">get sub options from an argument</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="includes">#include &lt;<a class="link-includes">stdlib.h</a>&gt;</b><div class="spacer">
</div>
<span class="type">extern char *suboptarg;</span><div class="spacer">
</div>
<i class="ftype">int</i><br/>
<b class="fname">getsubopt</b>(<i class="farg" style="white-space:nowrap;">char **optionp</i>, <i class="farg" style="white-space:nowrap;">char * const *tokens</i>, <i class="farg" style="white-space:nowrap;">char **valuep</i>);</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> The <b class="fname">getsubopt</b>() function parses a string containing tokens delimited by one or more tab, space, or comma (&#8216;<code class="lit">,</code>&#8217;) characters. It is intended for use in parsing groups of option arguments provided as part of a utility command line.<div class="spacer">
</div>
The argument <i class="farg">optionp</i> is a pointer to a pointer to the string. The argument <i class="farg">tokens</i> is a pointer to a null-terminated array of pointers to strings.<div class="spacer">
</div>
The <b class="fname">getsubopt</b>() function returns the zero-based offset of the pointer in the <i class="farg">tokens</i> array referencing a string which matches the first token in the string, or -1 if the string contains no tokens or <i class="farg">tokens</i> does not contain a matching string.<div class="spacer">
</div>
If the token is of the form <i class="arg">name</i>=<i class="arg">value</i>, the location referenced by <i class="farg">valuep</i> will be set to point to the start of the &#8220;value&#8221; portion of the token.<div class="spacer">
</div>
On return from <b class="fname">getsubopt</b>(), <i class="farg">optionp</i> will be set to point to the start of the next token in the string, or the NUL at the end of the string if no more tokens are present. The external variable <i class="farg">suboptarg</i> will be set to point to the start of the current token, or <span class="define">NULL</span> if no tokens were present. The argument <i class="farg">valuep</i> will be set to point to the value portion of the token, or <span class="define">NULL</span> if no value portion was present.</div>
<div class="section">
<h1 id="x4558414d504c4553">EXAMPLES</h1><pre style="margin-left: 0.00ex;" class="lit display">
char *tokens[] = { 
	#define	ONE	0 
		&quot;one&quot;, 
	#define	TWO	1 
		&quot;two&quot;, 
	NULL 
}; 
 
... 
 
extern char *optarg, *suboptarg; 
char *options, *value; 
 
while ((ch = getopt(argc, argv, &quot;ab:&quot;)) != -1) { 
	switch (ch) { 
	case 'a': 
		/* process &quot;a&quot; option */ 
		break; 
	case 'b': 
		options = optarg; 
		while (*options) { 
			switch (getsubopt(&amp;options, tokens, &amp;value)) { 
			case ONE: 
				/* process &quot;one&quot; sub option */ 
				break; 
			case TWO: 
				/* process &quot;two&quot; sub option */ 
				if (!value) 
					error(&quot;no value for two&quot;); 
				i = atoi(value); 
				break; 
			case -1: 
				if (suboptarg) 
					error(&quot;illegal sub option %s&quot;, 
					  suboptarg); 
				else 
					error(&quot;missing sub option&quot;); 
				break; 
			} 
		} 
		break; 
	} 
}</pre>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../html3/getopt.html">getopt(3)</a>, <a class="link-man" href="../html3/strsep.html">strsep(3)</a></div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> The <b class="fname">getsubopt</b>() function first appeared in <span class="unix">4.4BSD</span>.</div>
</div>
</body>
</html>

