<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/posix/style.css" type="text/css" media="all"/>
<title>
SETVBUF(3)</title>
</head>
<body>
<div class="mandoc">
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">setvbuf</b> &#8212; <span class="desc">stream buffering operations</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="includes">#include &lt;<a class="link-includes">stdio.h</a>&gt;</b><div class="spacer">
</div>
<i class="ftype">int</i><br/>
<b class="fname">setvbuf</b>(<i class="farg" style="white-space:nowrap;">FILE *stream</i>, <i class="farg" style="white-space:nowrap;">char *buf</i>, <i class="farg" style="white-space:nowrap;">int mode</i>, <i class="farg" style="white-space:nowrap;">size_t size</i>);</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> The three types of stream buffering available are unbuffered, block buffered, and line buffered. When an output stream is unbuffered, information appears on the destination file or terminal as soon as written; when it is block buffered, many characters are saved up and written as a block; when line buffered, characters are saved up until a newline (&#8216;<code class="lit">\n</code>&#8217;) is output or input is read from any stream attached to a terminal device (typically <span class="emph">stdin</span>).<div class="spacer">
</div>
The <a class="link-man" href="../html3/fflush.html">fflush(3)</a> function may be used to force the block out early.<div class="spacer">
</div>
Normally, all files are block buffered. When the first I/O operation occurs on a file, <a class="link-man" href="../html3/malloc.html">malloc(3)</a> is called, and an optimally sized buffer is obtained. If a stream refers to a terminal (as <span class="emph">stdout</span> normally does), it is line buffered.<div class="spacer">
</div>
The standard error stream <span class="emph">stderr</span> is initially unbuffered.<div class="spacer">
</div>
The <b class="fname">setvbuf</b>() function may be used to alter the buffering behavior of a stream. The <i class="farg">mode</i> parameter must be one of the following three macros:<div class="spacer">
</div>
<dl style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 6.00ex;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
<span class="define">_IONBF</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
unbuffered</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<span class="define">_IOLBF</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
line buffered</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<span class="define">_IOFBF</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
fully buffered</dd>
</dl>
<div class="spacer">
</div>
The <i class="farg">size</i> parameter may be given as zero to obtain deferred optimal-size buffer allocation as usual. If it is not zero, then except for unbuffered files, the <i class="farg">buf</i> argument should point to a buffer at least <i class="farg">size</i> bytes long; this buffer will be used instead of the current buffer. (If the <i class="farg">size</i> argument is not zero but <i class="farg">buf</i> is <span class="define">NULL</span>, a buffer of the given size will be allocated immediately, and released on close. This is an extension to ANSI C; portable code should use a size of 0 with any <span class="define">NULL</span> buffer.)<div class="spacer">
</div>
The <b class="fname">setvbuf</b>() function may be used at any time, but may have peculiar side effects (such as discarding input or flushing output) if the stream is &#8220;active&#8221;. Portable applications should call it only once on any given stream, and before any I/O is performed.</div>
<div class="section">
<h1 id="x52455455524e2056414c554553">RETURN VALUES</h1> Upon successful completion, a value of 0 is returned. If <i class="farg">mode</i> is invalid or if the request cannot be honored, a non-zero value is returned, possibly setting <b class="var">errno</b> to indicate the error. The stream is not modified in the error case.</div>
<div class="section">
<h1 id="x4552524f5253">ERRORS</h1> The <b class="fname">setvbuf</b>() function will fail if:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">EBADF</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The <i class="farg">stream</i> specified is not associated with a valid file descriptor.</dd>
</dl>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../html3/fclose.html">fclose(3)</a>, <a class="link-man" href="../html3/fopen.html">fopen(3)</a>, <a class="link-man" href="../html3/fread.html">fread(3)</a>, <a class="link-man" href="../html3/malloc.html">malloc(3)</a>, <a class="link-man" href="../html3/printf.html">printf(3)</a>, <a class="link-man" href="../html3/puts.html">puts(3)</a>, <a class="link-man" href="../html3/setbuf.html">setbuf(3)</a></div>
<div class="section">
<h1 id="x5354414e4441524453">STANDARDS</h1> The <b class="fname">setvbuf</b>() function conforms to ISO/IEC 9899:1999 (&#8220;ISO&#160;C99&#8221;).</div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> The <b class="fname">setvbuf</b>() function first appeared in <span class="unix">4.4BSD</span>.</div>
</div>
</body>
</html>

