<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/posix/style.css" type="text/css" media="all"/>
<title>
GETPWENT(3)</title>
</head>
<body>
<div class="mandoc">
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">getpwent</b>, <b class="name">setpwent</b>, <b class="name">endpwent</b> &#8212; <span class="desc">sequential password database access</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="includes">#include &lt;<a class="link-includes">pwd.h</a>&gt;</b><div class="spacer">
</div>
<i class="ftype">struct passwd *</i><br/>
<b class="fname">getpwent</b>(<i class="farg" style="white-space:nowrap;">void</i>);<div class="spacer">
</div>
<i class="ftype">void</i><br/>
<b class="fname">setpwent</b>(<i class="farg" style="white-space:nowrap;">void</i>);<div class="spacer">
</div>
<i class="ftype">void</i><br/>
<b class="fname">endpwent</b>(<i class="farg" style="white-space:nowrap;">void</i>);</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> These functions operate on the password database file which is described in <a class="link-man" href="../html5/passwd.html">passwd(5)</a>. Each entry in the database is defined by the structure <code class="lit">struct passwd</code> found in the include file <b class="includes">&lt;<a class="link-includes">pwd.h</a>&gt;</b>:<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
struct passwd { 
	char	*pw_name;	/* user name */ 
	char	*pw_passwd;	/* encrypted password */ 
	uid_t	pw_uid;		/* user uid */ 
	gid_t	pw_gid;		/* user gid */ 
	time_t	pw_change;	/* password change time */ 
	char	*pw_class;	/* user access class */ 
	char	*pw_gecos;	/* Honeywell login info */ 
	char	*pw_dir;	/* home directory */ 
	char	*pw_shell;	/* default shell */ 
	time_t	pw_expire;	/* account expiration */ 
};</pre>
<div class="spacer">
</div>
The <b class="fname">getpwent</b>() function sequentially reads the password database and is intended for programs that wish to process the complete list of users.<div class="spacer">
</div>
It is dangerous for long-running programs to keep the file descriptors open as the database will become out of date if it is updated while the program is running. However the file descriptors are automatically closed when <a class="link-man" href="../html2/execve.html">execve(2)</a> is called.<div class="spacer">
</div>
<b class="fname">setpwent</b>() causes <b class="fname">getpwent</b>() to &#8220;rewind&#8221; to the beginning of the database.<div class="spacer">
</div>
The <b class="fname">endpwent</b>() function closes any file descriptors opened by <b class="fname">setpwent</b>() or <b class="fname">getpwent</b>().<div class="spacer">
</div>
These routines have been written to &#8220;shadow&#8221; the password file, that is, allow only certain programs to have access to the encrypted password. If the process which calls them has an effective UID of 0 or has the &#8220;_shadow&#8221; group in its group vector, the encrypted password will be returned, otherwise, the password field of the returned structure will point to the string &#8216;<code class="lit">*</code>&#8217;.</div>
<div class="section">
<h1 id="x595020535550504f5254">YP SUPPORT</h1> If YP is active, <b class="fname">getpwent</b>() also uses the <i class="file">master.passwd.byname</i> YP map (if available) or the <i class="file">passwd.byname</i> YP map. This is in addition to the passwd file, and respects the order of both normal and YP entries in the passwd file.</div>
<div class="section">
<h1 id="x52455455524e2056414c554553">RETURN VALUES</h1> The <b class="fname">getpwent</b>() function returns a valid pointer to a passwd structure on success or a null pointer if end-of-file is reached or an error occurs.<div class="spacer">
</div>
The <b class="fname">endpwent</b>() and <b class="fname">setpwent</b>() functions have no return value.</div>
<div class="section">
<h1 id="x46494c4553">FILES</h1><dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/etc/pwd.db</i></dt>
<dd class="list-tag" style="margin-left: 18.00ex;">
insecure password database file</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/etc/spwd.db</i></dt>
<dd class="list-tag" style="margin-left: 18.00ex;">
secure password database file</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/etc/master.passwd</i></dt>
<dd class="list-tag" style="margin-left: 18.00ex;">
current password file</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/etc/passwd</i></dt>
<dd class="list-tag" style="margin-left: 18.00ex;">
a Version 7 format password file</dd>
</dl>
</div>
<div class="section">
<h1 id="x4552524f5253">ERRORS</h1> The <b class="fname">getpwent</b>() function may fail for any of the errors specified for <a class="link-man" href="../html3/dbopen.html">dbopen(3)</a> and its <b class="fname">get</b>() routine.<div class="spacer">
</div>
If YP is active, it may also fail due to errors caused by the YP subsystem.</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../html2/getlogin.html">getlogin(2)</a>, <a class="link-man" href="../html3/getgrent.html">getgrent(3)</a>, <a class="link-man" href="../html3/getgrouplist.html">getgrouplist(3)</a>, <a class="link-man" href="../html3/getpwnam.html">getpwnam(3)</a>, <a class="link-man" href="../html3/pw_dup.html">pw_dup(3)</a>, <a class="link-man" href="../html5/passwd.html">passwd(5)</a>, <a class="link-man" href="../html8/Makefile.yp.html">Makefile.yp(8)</a>, <a class="link-man" href="../html8/pwd_mkdb.html">pwd_mkdb(8)</a>, <a class="link-man" href="../html8/vipw.html">vipw(8)</a>, <a class="link-man" href="../html8/yp.html">yp(8)</a></div>
<div class="section">
<h1 id="x5354414e4441524453">STANDARDS</h1> These functions are compliant with the X/Open System Interfaces option of the IEEE Std 1003.1-2008 (&#8220;POSIX.1&#8221;) specification.</div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> The <b class="fname">getpwent</b>(), <b class="fname">setpwent</b>(), and <b class="fname">endpwent</b>() functions appeared in Version&#160;7 AT&amp;T UNIX.<div class="spacer">
</div>
The historic function <b class="fname">setpwfile</b>(), which allowed the specification of alternate password databases, has been deprecated and is no longer available.</div>
<div class="section">
<h1 id="x42554753">BUGS</h1> The <b class="fname">getpwent</b>() function stores its results in an internal static buffer and returns a pointer to that buffer. Subsequent calls to <b class="fname">getpwent</b>(), <b class="fname">getpwnam</b>(), or <b class="fname">getpwuid</b>() will overwrite the same buffer.<div class="spacer">
</div>
The routines <b class="fname">getpwent</b>(), <b class="fname">endpwent</b>(), and <b class="fname">setpwent</b>() are fairly useless in a networked environment and should be avoided, if possible.</div>
</div>
</body>
</html>

