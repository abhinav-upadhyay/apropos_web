<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/posix/style.css" type="text/css" media="all"/>
<title>
GLOB(3)</title>
</head>
<body>
<div class="mandoc">
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">glob</b>, <b class="name">globfree</b> &#8212; <span class="desc">generate pathnames matching a pattern</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="includes">#include &lt;<a class="link-includes">glob.h</a>&gt;</b><div class="spacer">
</div>
<i class="ftype">int</i><br/>
<b class="fname">glob</b>(<i class="farg" style="white-space:nowrap;">const char *pattern</i>, <i class="farg" style="white-space:nowrap;">int flags</i>, <i class="farg" style="white-space:nowrap;">const int (*errfunc)(const char *, int)</i>, <i class="farg" style="white-space:nowrap;">glob_t *pglob</i>);<div class="spacer">
</div>
<i class="ftype">void</i><br/>
<b class="fname">globfree</b>(<i class="farg" style="white-space:nowrap;">glob_t *pglob</i>);</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> The <b class="fname">glob</b>() function is a pathname generator that implements the rules for file name pattern matching used by the shell.<div class="spacer">
</div>
The include file <b class="includes">&lt;<a class="link-includes">glob.h</a>&gt;</b> defines the structure type <code class="lit">glob_t</code>, which contains at least the following fields:<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
typedef struct { 
	int gl_pathc;	 /* count of total paths so far */ 
	int gl_matchc;	 /* count of paths matching pattern */ 
	int gl_offs;	 /* reserved at beginning of gl_pathv */ 
	int gl_flags;	 /* returned flags */ 
	char **gl_pathv; /* list of paths matching pattern */ 
} glob_t;</pre>
<div class="spacer">
</div>
The argument <i class="farg">pattern</i> is a pointer to a pathname pattern to be expanded. <b class="fname">glob</b>() matches all accessible pathnames against the pattern and creates a list of the pathnames that match. In order to have access to a pathname, <b class="fname">glob</b>() requires search permission on every component of a path except the last and read permission on each directory of any filename component of <i class="farg">pattern</i> that contains any of the special characters &#8216;<code class="lit">*</code>&#8217;, &#8216;<code class="lit">?</code>&#8217;, or &#8216;<code class="lit">[</code>&#8217;.<div class="spacer">
</div>
The number of matched pathnames is stored in the <i class="farg">gl_pathc</i> field, and a pointer to a list of pointers to pathnames in the <i class="farg">gl_pathv</i> field. The first pointer after the last pathname is <span class="define">NULL</span>. If the pattern does not match any pathnames, the returned number of matched paths is set to zero.<div class="spacer">
</div>
It is the caller's responsibility to create the structure pointed to by <i class="farg">pglob</i>. The <b class="fname">glob</b>() function allocates other space as needed, including the memory pointed to by <i class="farg">gl_pathv</i>.<div class="spacer">
</div>
The argument <i class="farg">flags</i> is used to modify the behavior of <b class="fname">glob</b>(). The value of <i class="farg">flags</i> is the bitwise inclusive OR of any of the following values defined in <b class="includes">&lt;<a class="link-includes">glob.h</a>&gt;</b>:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">GLOB_APPEND</span></dt>
<dd class="list-tag" style="margin-left: 15.00ex;">
Append pathnames generated to the ones from a previous call (or calls) to <b class="fname">glob</b>(). The value of <i class="farg">gl_pathc</i> will be the total matches found by this call and the previous call(s). The pathnames are appended to, not merged with the pathnames returned by the previous call(s). Between calls, the caller must not change the setting of the <span class="define">GLOB_DOOFFS</span> flag, nor change the value of <i class="farg">gl_offs</i> when <span class="define">GLOB_DOOFFS</span> is set, nor (obviously) call <b class="fname">globfree</b>() for <i class="farg">pglob</i>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">GLOB_DOOFFS</span></dt>
<dd class="list-tag" style="margin-left: 15.00ex;">
Make use of the <i class="farg">gl_offs</i> field. If this flag is set, <i class="farg">gl_offs</i> is used to specify how many null pointers to prepend to the beginning of the <i class="farg">gl_pathv</i> field. In other words, <i class="farg">gl_pathv</i> will point to <i class="farg">gl_offs</i> null pointers, followed by <i class="farg">gl_pathc</i> pathname pointers, followed by a null pointer.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">GLOB_ERR</span></dt>
<dd class="list-tag" style="margin-left: 15.00ex;">
Causes <b class="fname">glob</b>() to return when it encounters a directory that it cannot open or read. Ordinarily, <b class="fname">glob</b>() continues to find matches.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">GLOB_MARK</span></dt>
<dd class="list-tag" style="margin-left: 15.00ex;">
Each pathname that is a directory that matches <i class="farg">pattern</i> has a slash appended.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">GLOB_NOCHECK</span></dt>
<dd class="list-tag" style="margin-left: 15.00ex;">
If <i class="farg">pattern</i> does not match any pathname, then <b class="fname">glob</b>() returns a list consisting of only <i class="farg">pattern</i>, with the number of total pathnames set to 1, and the number of matched pathnames set to 0.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">GLOB_NOESCAPE</span></dt>
<dd class="list-tag" style="margin-left: 15.00ex;">
Normally, every occurrence of a backslash (&#8216;<code class="lit">\</code>&#8217;) followed by a character in <i class="farg">pattern</i> is replaced by that character. This is done to negate any special meaning for the character. If the <span class="define">GLOB_NOESCAPE</span> flag is set, a backslash character is treated as an ordinary character.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">GLOB_NOSORT</span></dt>
<dd class="list-tag" style="margin-left: 15.00ex;">
By default, the pathnames are sorted in ascending ASCII order; this flag prevents that sorting (speeding up <b class="fname">glob</b>()).</dd>
</dl>
<div class="spacer">
</div>
The following values may also be included in <i class="farg">flags</i>, however, they are non-standard extensions to IEEE Std 1003.2 (&#8220;POSIX.2&#8221;).<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">GLOB_ALTDIRFUNC</span></dt>
<dd class="list-tag" style="margin-left: 15.00ex;">
The following additional fields in the <i class="farg">pglob</i> structure have been initialized with alternate functions for <b class="fname">glob</b>() to use to open, read, and close directories and to get stat information on names found in those directories:<div class="spacer">
</div>
<pre style="margin-left: 0.00ex;" class="lit display">
	void *(*gl_opendir)(const char *); 
	struct dirent *(*gl_readdir)(void *); 
	void (*gl_closedir)(void *); 
	int (*gl_lstat)(const char *, struct stat *); 
	int (*gl_stat)(const char *, struct stat *);</pre>
<div class="spacer">
</div>
This extension is provided to allow programs such as <a class="link-man" href="../html8/restore.html">restore(8)</a> to provide globbing from directories stored on tape.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">GLOB_BRACE</span></dt>
<dd class="list-tag" style="margin-left: 15.00ex;">
Pre-process the pattern string to expand &#8216;<code class="lit">{pat,pat,...}</code>&#8217; strings like <a class="link-man" href="../html1/csh.html">csh(1)</a>. The pattern &#8216;<code class="lit">{}</code>&#8217; is left unexpanded for historical reasons. <a class="link-man" href="../html1/(csh.html">(csh(1)</a> does the same thing to ease typing of <a class="link-man" href="../html1/find.html">find(1)</a> patterns.)</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">GLOB_KEEPSTAT</span></dt>
<dd class="list-tag" style="margin-left: 15.00ex;">
Retain a copy of the <a class="link-man" href="../html2/stat.html">stat(2)</a> information retrieved for matching paths in the <i class="farg">gl_statv</i> array:<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
struct stat **gl_statv;</pre>
<div class="spacer">
</div>
This option may be used to avoid <a class="link-man" href="../html2/lstat.html">lstat(2)</a> lookups in cases where they are expensive.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">GLOB_MAGCHAR</span></dt>
<dd class="list-tag" style="margin-left: 15.00ex;">
Set by the <b class="fname">glob</b>() function if the pattern included globbing characters. See the description of the usage of the <i class="farg">gl_matchc</i> structure member for more details.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">GLOB_NOMAGIC</span></dt>
<dd class="list-tag" style="margin-left: 15.00ex;">
Is the same as <span class="define">GLOB_NOCHECK</span> but it only appends the <i class="farg">pattern</i> if it does not contain any of the special characters &#8216;<code class="lit">*</code>&#8217;, &#8216;<code class="lit">?</code>&#8217;, or &#8216;<code class="lit">[</code>&#8217;. <span class="define">GLOB_NOMAGIC</span> is provided to simplify implementing the historic <a class="link-man" href="../html1/csh.html">csh(1)</a> globbing behavior and should probably not be used anywhere else.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">GLOB_QUOTE</span></dt>
<dd class="list-tag" style="margin-left: 15.00ex;">
This option has no effect and is included for backwards compatibility with older sources.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">GLOB_TILDE</span></dt>
<dd class="list-tag" style="margin-left: 15.00ex;">
Expand patterns that start with &#8216;<code class="lit">~</code>&#8217; to user name home directories.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">GLOB_LIMIT</span></dt>
<dd class="list-tag" style="margin-left: 15.00ex;">
Limit the amount of memory used to store matched strings to <code class="lit">64K</code>, the number of <a class="link-man" href="../html2/stat.html">stat(2)</a> calls to 2048, and the number of <a class="link-man" href="../html3/readdir.html">readdir(3)</a> calls to 16K. This option should be set for programs that can be coerced to a denial of service attack via patterns that expand to a very large number of matches, such as a long string of &#8216;<code class="lit">*/../*/..</code>&#8217;.</dd>
</dl>
<div class="spacer">
</div>
If, during the search, a directory is encountered that cannot be opened or read and <i class="farg">errfunc</i> is non-null, <b class="fname">glob</b>() calls <i class="farg">(*errfunc)(path, errno)</i>. This may be unintuitive: a pattern like &#8220;*/Makefile&#8221; will try to <a class="link-man" href="../html2/stat.html">stat(2)</a> &#8220;foo/Makefile&#8221; even if &#8220;foo&#8221; is not a directory, resulting in a call to <i class="farg">errfunc</i>. The error routine can suppress this action by testing for <span class="errno">ENOENT</span> and <span class="errno">ENOTDIR</span>; however, the <span class="define">GLOB_ERR</span> flag will still cause an immediate return when this happens.<div class="spacer">
</div>
If <i class="farg">errfunc</i> returns non-zero, <b class="fname">glob</b>() stops the scan and returns <span class="define">GLOB_ABORTED</span> after setting <i class="farg">gl_pathc</i> and <i class="farg">gl_pathv</i> to reflect any paths already matched. This also happens if an error is encountered and <span class="define">GLOB_ERR</span> is set in <i class="farg">flags</i>, regardless of the return value of <i class="farg">errfunc</i>, if called. If <span class="define">GLOB_ERR</span> is not set and either <i class="farg">errfunc</i> is <span class="define">NULL</span> or <i class="farg">errfunc</i> returns zero, the error is ignored.<div class="spacer">
</div>
The <b class="fname">globfree</b>() function frees any space associated with <i class="farg">pglob</i> from a previous call(s) to <b class="fname">glob</b>().</div>
<div class="section">
<h1 id="x52455455524e2056414c554553">RETURN VALUES</h1> On successful completion, <b class="fname">glob</b>() returns zero. In addition the fields of <i class="farg">pglob</i> contain the values described below:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="farg">gl_pathc</i></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
Contains the total number of matched pathnames so far. This includes other matches from previous invocations of <b class="fname">glob</b>() if <span class="define">GLOB_APPEND</span> was specified.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="farg">gl_matchc</i></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
Contains the number of matched pathnames in the current invocation of <b class="fname">glob</b>().</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="farg">gl_flags</i></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
Contains a copy of the <i class="farg">flags</i> parameter with the bit <span class="define">GLOB_MAGCHAR</span> set if <i class="farg">pattern</i> contained any of the special characters &#8216;<code class="lit">*</code>&#8217;, &#8216;<code class="lit">?</code>&#8217;, or &#8216;<code class="lit">[</code>&#8217;, cleared if not.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="farg">gl_pathv</i></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
Contains a pointer to a null-terminated list of matched pathnames. However, if <i class="farg">gl_pathc</i> is zero, the contents of <i class="farg">gl_pathv</i> are undefined.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="farg">gl_statv</i></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
If the <span class="define">GLOB_KEEPSTAT</span> flag was set, <i class="farg">gl_statv</i> contains a pointer to a null-terminated list of matched <a class="link-man" href="../html2/stat.html">stat(2)</a> objects corresponding to the paths in <i class="farg">gl_pathc</i>.</dd>
</dl>
<div class="spacer">
</div>
If <b class="fname">glob</b>() terminates due to an error, it sets <b class="var">errno</b> and returns one of the following non-zero constants, which are defined in the include file <b class="includes">&lt;<a class="link-includes">glob.h</a>&gt;</b>:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">GLOB_NOSPACE</span></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
An attempt to allocate memory failed, or if <b class="var">errno</b> was 0 <code class="lit">GLOB_LIMIT</code> was specified in the flags and <code class="lit">ARG_MAX or more</code> patterns were matched.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">GLOB_ABORTED</span></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
The scan was stopped because an error was encountered and either <span class="define">GLOB_ERR</span> was set, or <i class="farg">(*errfunc)()</i> returned non-zero.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">GLOB_NOMATCH</span></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
The pattern did not match a pathname and <span class="define">GLOB_NOCHECK</span> was not set.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">GLOB_NOSYS</span></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
The requested function is not supported by this version of <b class="fname">glob</b>().</dd>
</dl>
<div class="spacer">
</div>
The arguments <i class="farg">pglob-&gt;gl_pathc</i> and <i class="farg">pglob-&gt;gl_pathv</i> are still set as specified above.</div>
<div class="section">
<h1 id="x4558414d504c4553">EXAMPLES</h1> A rough equivalent of &#8216;<code class="lit">ls -l *.c *.h</code>&#8217; can be obtained with the following code:<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
glob_t g; 
 
g.gl_offs = 2; 
glob(&quot;*.c&quot;, GLOB_DOOFFS, NULL, &amp;g); 
glob(&quot;*.h&quot;, GLOB_DOOFFS | GLOB_APPEND, NULL, &amp;g); 
g.gl_pathv[0] = &quot;ls&quot;; 
g.gl_pathv[1] = &quot;-l&quot;; 
execvp(&quot;ls&quot;, g.gl_pathv);</pre>
</div>
<div class="section">
<h1 id="x4552524f5253">ERRORS</h1> The <b class="fname">glob</b>() function may fail and set <b class="var">errno</b> for any of the errors specified for the library routines <a class="link-man" href="../html2/stat.html">stat(2)</a>, <a class="link-man" href="../html3/closedir.html">closedir(3)</a>, <a class="link-man" href="../html3/opendir.html">opendir(3)</a>, <a class="link-man" href="../html3/readdir.html">readdir(3)</a>, <a class="link-man" href="../html3/malloc.html">malloc(3)</a>, and <a class="link-man" href="../html3/free.html">free(3)</a>.</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../html1/sh.html">sh(1)</a>, <a class="link-man" href="../html3/fnmatch.html">fnmatch(3)</a>, <a class="link-man" href="../html3/regex.html">regex(3)</a>, <a class="link-man" href="../html7/glob.html">glob(7)</a></div>
<div class="section">
<h1 id="x5354414e4441524453">STANDARDS</h1> The <b class="fname">glob</b>() function is expected to conform to IEEE Std 1003.2 (&#8220;POSIX.2&#8221;) and X/Open Portability Guide Issue&#160;4, Version&#160;2 (&#8220;XPG4.2&#8221;). Note, however, that the flags <span class="define">GLOB_ALTDIRFUNC</span>, <span class="define">GLOB_BRACE</span>, <span class="define">GLOB_KEEPSTAT</span>, <span class="define">GLOB_MAGCHAR</span>, <span class="define">GLOB_NOMAGIC</span>, <span class="define">GLOB_QUOTE</span>, <span class="define">GLOB_TILDE</span>, and <span class="define">GLOB_LIMIT</span> and the fields <i class="farg">gl_matchc</i>, <i class="farg">gl_statv</i> and <i class="farg">gl_flags</i> should not be used by applications striving for strict standards conformance.</div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> The <b class="fname">glob</b>() and <b class="fname">globfree</b>() functions first appeared in <span class="unix">4.4BSD</span>.</div>
<div class="section">
<h1 id="x42554753">BUGS</h1> Patterns longer than <span class="define">PATH_MAX</span> may cause unchecked errors.</div>
</div>
</body>
</html>

