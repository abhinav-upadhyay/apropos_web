<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/posix/style.css" type="text/css" media="all"/>
<title>
X509_NAME_ADD_ENTRY_BY_TXT(3)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
X509_NAME_ADD_ENTRY_BY_TXT(3)</td>
<td class="head-vol">
OpenSSL</td>
<td class="head-rtitle">
X509_NAME_ADD_ENTRY_BY_TXT(3)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>NAME</h1> X509_NAME_add_entry_by_txt, X509_NAME_add_entry_by_OBJ, X509_NAME_add_entry_by_NID, X509_NAME_add_entry, X509_NAME_delete_entry - X509_NAME modification functions</div>
<div class="section">
<h1>SYNOPSIS</h1><br/>
 #include &lt;openssl/x509.h&gt;<br/>
<br/>
 int X509_NAME_add_entry_by_txt(X509_NAME *name, const char *field, int type, const unsigned char *bytes, int len, int loc, int set);<br/>
<br/>
 int X509_NAME_add_entry_by_OBJ(X509_NAME *name, ASN1_OBJECT *obj, int type, unsigned char *bytes, int len, int loc, int set);<br/>
<br/>
 int X509_NAME_add_entry_by_NID(X509_NAME *name, int nid, int type, unsigned char *bytes, int len, int loc, int set);<br/>
<br/>
 int X509_NAME_add_entry(X509_NAME *name,X509_NAME_ENTRY *ne, int loc, int set);<br/>
<br/>
 X509_NAME_ENTRY *X509_NAME_delete_entry(X509_NAME *name, int loc);<br/>
</div>
<div class="section">
<h1>DESCRIPTION</h1>  <i>X509_NAME_add_entry_by_txt()</i>, <i>X509_NAME_add_entry_by_OBJ()</i> and  <i>X509_NAME_add_entry_by_NID()</i> add a field whose name is defined by a string  <b>field</b>, an object <b>obj</b> or a NID <b>nid</b> respectively. The field value to be added is in  <b>bytes</b> of length <b>len</b>. If  <b>len</b> is -1 then the field length is calculated internally using strlen(bytes).<div class="spacer">
</div>
The type of field is determined by <b>type</b> which can either be a definition of the type of  <b>bytes</b> (such as <b>MBSTRING_ASC</b>) or a standard ASN1 type (such as  <b>V_ASN1_IA5STRING</b>). The new entry is added to a position determined by  <b>loc</b> and <b>set</b>.<div class="spacer">
</div>
<i>X509_NAME_add_entry()</i> adds a copy of <b>X509_NAME_ENTRY</b> structure <b>ne</b> to  <b>name</b>. The new entry is added to a position determined by <b>loc</b> and  <b>set</b>. Since a copy of <b>ne</b> is added <b>ne</b> must be freed up after the call.<div class="spacer">
</div>
<i>X509_NAME_delete_entry()</i> deletes an entry from <b>name</b> at position  <b>loc</b>. The deleted entry is returned and must be freed up.</div>
<div class="section">
<h1>NOTES</h1> The use of string types such as  <b>MBSTRING_ASC</b> or <b>MBSTRING_UTF8</b> is strongly recommended for the  <b>type</b> parameter. This allows the internal code to correctly determine the type of the field and to apply length checks according to the relevant standards. This is done using  <i>ASN1_STRING_set_by_NID()</i>.<div class="spacer">
</div>
If instead an ASN1 type is used no checks are performed and the supplied data in  <b>bytes</b> is used directly.<div class="spacer">
</div>
In <i>X509_NAME_add_entry_by_txt()</i> the <b>field</b> string represents the field name using OBJ_txt2obj(field, 0).<div class="spacer">
</div>
The <b>loc</b> and <b>set</b> parameters determine where a new entry should be added. For almost all applications  <b>loc</b> can be set to -1 and <b>set</b> to 0. This adds a new entry to the end of  <b>name</b> as a single valued RelativeDistinguishedName (RDN).<div class="spacer">
</div>
<b>loc</b> actually determines the index where the new entry is inserted: if it is -1 it is appended.<div class="spacer">
</div>
<b>set</b> determines how the new type is added. If it is zero a new RDN is created.<div class="spacer">
</div>
If <b>set</b> is -1 or 1 it is added to the previous or next RDN structure respectively. This will then be a multivalued RDN: since multivalues RDNs are very seldom used  <b>set</b> is almost always set to zero.</div>
<div class="section">
<h1>EXAMPLES</h1> Create an  <b>X509_NAME</b> structure:<div class="spacer">
</div>
&quot;C=UK, O=Disorganized Organization, CN=Joe Bloggs&quot;<div class="spacer">
</div>
<br/>
 X509_NAME *nm;<br/>
 nm = X509_NAME_new();<br/>
 if (nm == NULL)<br/>
        /* Some error */<br/>
 if (!X509_NAME_add_entry_by_txt(nm, MBSTRING_ASC,<br/>
                        &quot;C&quot;, &quot;UK&quot;, -1, -1, 0))<br/>
        /* Error */<br/>
 if (!X509_NAME_add_entry_by_txt(nm, MBSTRING_ASC,<br/>
                        &quot;O&quot;, &quot;Disorganized Organization&quot;, -1, -1, 0))<br/>
        /* Error */<br/>
 if (!X509_NAME_add_entry_by_txt(nm, MBSTRING_ASC,<br/>
                        &quot;CN&quot;, &quot;Joe Bloggs&quot;, -1, -1, 0))<br/>
        /* Error */<br/>
</div>
<div class="section">
<h1>RETURN VALUES</h1>  <i>X509_NAME_add_entry_by_txt()</i>, <i>X509_NAME_add_entry_by_OBJ()</i>,  <i>X509_NAME_add_entry_by_NID()</i> and <i>X509_NAME_add_entry()</i> return 1 for success of 0 if an error occurred.<div class="spacer">
</div>
<i>X509_NAME_delete_entry()</i> returns either the deleted <b>X509_NAME_ENTRY</b> structure of  <b>NULL</b> if an error occurred.</div>
<div class="section">
<h1>BUGS</h1>  <b>type</b> can still be set to <b>V_ASN1_APP_CHOOSE</b> to use a different algorithm to determine field types. Since this form does not understand multicharacter types, performs no length checks and can result in invalid field types its use is strongly discouraged.</div>
<div class="section">
<h1>SEE ALSO</h1>  <i>ERR_get_error</i>(3), <i>d2i_X509_NAME</i>(3)</div>
<div class="section">
<h1>HISTORY</h1></div>
<table class="foot">
<tr>
<td class="foot-date">
2015-09-22</td>
<td class="foot-os">
OpenBSD 6.0</td>
</tr>
</table>
</div>
</body>
</html>

