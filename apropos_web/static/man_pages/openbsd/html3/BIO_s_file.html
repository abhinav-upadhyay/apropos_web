<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/posix/style.css" type="text/css" media="all"/>
<title>
BIO_S_FILE(3)</title>
</head>
<body>
<div class="mandoc">
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">BIO_s_file</b>, <b class="name">BIO_new_file</b>, <b class="name">BIO_new_fp</b>, <b class="name">BIO_set_fp</b>, <b class="name">BIO_get_fp</b>, <b class="name">BIO_read_filename</b>, <b class="name">BIO_write_filename</b>, <b class="name">BIO_append_filename</b>, <b class="name">BIO_rw_filename</b> &#8212; <span class="desc">FILE bio</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="includes">#include &lt;<a class="link-includes">openssl/bio.h</a>&gt;</b><div class="spacer">
</div>
<i class="ftype">BIO_METHOD *</i><br/>
<b class="fname">BIO_s_file</b>(<i class="farg">void</i>);<div class="spacer">
</div>
<i class="ftype">BIO *</i><br/>
<b class="fname">BIO_new_file</b>(<i class="farg">const char *filename</i>, <i class="farg">const char *mode</i>);<div class="spacer">
</div>
<i class="ftype">BIO *</i><br/>
<b class="fname">BIO_new_fp</b>(<i class="farg">FILE *stream</i>, <i class="farg">int flags</i>);<div class="spacer">
</div>
<i class="ftype">long</i><br/>
<b class="fname">BIO_set_fp</b>(<i class="farg">BIO *b</i>, <i class="farg">FILE *fp</i>, <i class="farg">int flags</i>);<div class="spacer">
</div>
<i class="ftype">long</i><br/>
<b class="fname">BIO_get_fp</b>(<i class="farg">BIO *b</i>, <i class="farg">FILE **fpp</i>);<div class="spacer">
</div>
<i class="ftype">int</i><br/>
<b class="fname">BIO_read_filename</b>(<i class="farg">BIO *b</i>, <i class="farg">char *name</i>);<div class="spacer">
</div>
<i class="ftype">int</i><br/>
<b class="fname">BIO_write_filename</b>(<i class="farg">BIO *b</i>, <i class="farg">char *name</i>);<div class="spacer">
</div>
<i class="ftype">int</i><br/>
<b class="fname">BIO_append_filename</b>(<i class="farg">BIO *b</i>, <i class="farg">char *name</i>);<div class="spacer">
</div>
<i class="ftype">int</i><br/>
<b class="fname">BIO_rw_filename</b>(<i class="farg">BIO *b</i>, <i class="farg">char *name</i>);</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> <b class="fname">BIO_s_file</b>() returns the BIO file method. As its name implies, it is a wrapper around the stdio <span class="type">FILE</span> structure and it is a source/sink BIO.<div class="spacer">
</div>
Calls to <a class="link-man" href="../html3/BIO_read.html">BIO_read(3)</a> and <a class="link-man" href="../html3/BIO_write.html">BIO_write(3)</a> read and write data to the underlying stream. <a class="link-man" href="../html3/BIO_gets.html">BIO_gets(3)</a> and <a class="link-man" href="../html3/BIO_puts.html">BIO_puts(3)</a> are supported on file BIOs.<div class="spacer">
</div>
<a class="link-man" href="../html3/BIO_flush.html">BIO_flush(3)</a> on a file BIO calls the <a class="link-man" href="../html3/fflush.html">fflush(3)</a> function on the wrapped stream.<div class="spacer">
</div>
<a class="link-man" href="../html3/BIO_reset.html">BIO_reset(3)</a> attempts to change the file pointer to the start of file using <b class="fname">fseek</b>(<i class="farg">stream</i>, <i class="farg">0</i>, <i class="farg">0</i>).<div class="spacer">
</div>
<a class="link-man" href="../html3/BIO_seek.html">BIO_seek(3)</a> sets the file pointer to position <i class="farg">ofs</i> from the start of the file using <b class="fname">fseek</b>(<i class="farg">stream</i>, <i class="farg">ofs</i>, <i class="farg">0</i>).<div class="spacer">
</div>
<a class="link-man" href="../html3/BIO_eof.html">BIO_eof(3)</a> calls <a class="link-man" href="../html3/feof.html">feof(3)</a>.<div class="spacer">
</div>
Setting the <span class="define">BIO_CLOSE</span> flag calls <a class="link-man" href="../html3/fclose.html">fclose(3)</a> on the stream when the BIO is freed.<div class="spacer">
</div>
<b class="fname">BIO_new_file</b>() creates a new file BIO with mode <i class="farg">mode</i>. The meaning of <i class="farg">mode</i> is the same as for the stdio function <a class="link-man" href="../html3/fopen.html">fopen(3)</a>. The <span class="define">BIO_CLOSE</span> flag is set on the returned BIO.<div class="spacer">
</div>
<b class="fname">BIO_new_fp</b>() creates a file BIO wrapping <i class="farg">stream</i>. Flags can be: <span class="define">BIO_CLOSE</span>, <span class="define">BIO_NOCLOSE</span> (the close flag), <span class="define">BIO_FP_TEXT</span> (sets the underlying stream to text mode, default is binary: this only has any effect under Win32).<div class="spacer">
</div>
<b class="fname">BIO_set_fp</b>() set the file pointer of a file BIO to <i class="farg">fp</i>. <i class="farg">flags</i> has the same meaning as in <b class="fname">BIO_new_fp</b>(). <b class="fname">BIO_set_fp</b>() is a macro.<div class="spacer">
</div>
<b class="fname">BIO_get_fp</b>() retrieves the file pointer of a file BIO, it is a macro.<div class="spacer">
</div>
<a class="link-man" href="../html3/BIO_seek.html">BIO_seek(3)</a> is a macro that sets the position pointer to <i class="farg">offset</i> bytes from the start of file.<div class="spacer">
</div>
<a class="link-man" href="../html3/BIO_tell.html">BIO_tell(3)</a> returns the value of the position pointer.<div class="spacer">
</div>
<b class="fname">BIO_read_filename</b>(), <b class="fname">BIO_write_filename</b>(), <b class="fname">BIO_append_filename</b>(), and <b class="fname">BIO_rw_filename</b>() set the file BIO <i class="farg">b</i> to use file <i class="farg">name</i> for reading, writing, append or read write respectively.</div>
<div class="section">
<h1 id="x4e4f544553">NOTES</h1> When wrapping stdout, stdin, or stderr, the underlying stream should not normally be closed, so the <span class="define">BIO_NOCLOSE</span> flag should be set.<div class="spacer">
</div>
Because the file BIO calls the underlying stdio functions, any quirks in stdio behaviour will be mirrored by the corresponding BIO.<div class="spacer">
</div>
On Windows, <b class="fname">BIO_new_files</b>() reserves for the filename argument to be UTF-8 encoded. In other words, if you have to make it work in a multi-lingual environment, encode file names in UTF-8.</div>
<div class="section">
<h1 id="x52455455524e2056414c554553">RETURN VALUES</h1> <b class="fname">BIO_s_file</b>() returns the file BIO method.<div class="spacer">
</div>
<b class="fname">BIO_new_file</b>() and <b class="fname">BIO_new_fp</b>() return a file BIO or <span class="define">NULL</span> if an error occurred.<div class="spacer">
</div>
<b class="fname">BIO_set_fp</b>() and <b class="fname">BIO_get_fp</b>() return 1 for success or 0 for failure (although the current implementation never returns 0).<div class="spacer">
</div>
<a class="link-man" href="../html3/BIO_seek.html">BIO_seek(3)</a> returns the same value as the underlying <a class="link-man" href="../html3/fseek.html">fseek(3)</a> function: 0 for success or -1 for failure.<div class="spacer">
</div>
<a class="link-man" href="../html3/BIO_tell.html">BIO_tell(3)</a> returns the current file position.<div class="spacer">
</div>
<b class="fname">BIO_read_filename</b>(), <b class="fname">BIO_write_filename</b>(), <b class="fname">BIO_append_filename</b>(), and <b class="fname">BIO_rw_filename</b>() return 1 for success or 0 for failure.</div>
<div class="section">
<h1 id="x4558414d504c4553">EXAMPLES</h1> File BIO &quot;hello world&quot;:<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
BIO *bio_out; 
bio_out = BIO_new_fp(stdout, BIO_NOCLOSE); 
BIO_printf(bio_out, &quot;Hello World\n&quot;);</pre>
<div class="spacer">
</div>
Alternative technique:<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
BIO *bio_out; 
bio_out = BIO_new(BIO_s_file()); 
if(bio_out == NULL) /* Error ... */ 
if(!BIO_set_fp(bio_out, stdout, BIO_NOCLOSE)) /* Error ... */ 
BIO_printf(bio_out, &quot;Hello World\n&quot;);</pre>
<div class="spacer">
</div>
Write to a file:<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
BIO *out; 
out = BIO_new_file(&quot;filename.txt&quot;, &quot;w&quot;); 
if(!out) /* Error occurred */ 
BIO_printf(out, &quot;Hello World\n&quot;); 
BIO_free(out);</pre>
<div class="spacer">
</div>
Alternative technique:<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
BIO *out; 
out = BIO_new(BIO_s_file()); 
if(out == NULL) /* Error ... */ 
if(!BIO_write_filename(out, &quot;filename.txt&quot;)) /* Error ... */ 
BIO_printf(out, &quot;Hello World\n&quot;); 
BIO_free(out);</pre>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../html3/BIO_read.html">BIO_read(3)</a>, <a class="link-man" href="../html3/BIO_seek.html">BIO_seek(3)</a></div>
<div class="section">
<h1 id="x42554753">BUGS</h1> <a class="link-man" href="../html3/BIO_reset.html">BIO_reset(3)</a> and <a class="link-man" href="../html3/BIO_seek.html">BIO_seek(3)</a> are implemented using <a class="link-man" href="../html3/fseek.html">fseek(3)</a> on the underlying stream. The return value for <a class="link-man" href="../html3/fseek.html">fseek(3)</a> is 0 for success or -1 if an error occurred. This differs from other types of BIO which will typically return 1 for success and a non positive value if an error occurred.</div>
</div>
</body>
</html>

