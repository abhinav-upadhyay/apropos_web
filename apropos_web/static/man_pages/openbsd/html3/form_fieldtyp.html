<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/posix/style.css" type="text/css" media="all"/>
<title>
form_fieldtype(3)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
form_fieldtype(3)</td>
<td class="head-vol">
Library Functions Manual</td>
<td class="head-rtitle">
form_fieldtype(3)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>NAME</h1>  <b>new_fieldtype</b>, <b>free_fieldtype</b>,  <b>set_fieldtype_arg</b>, <b>set_fieldtype_choice</b>,  <b>link_fieldtype</b> - define validation-field types</div>
<div class="section">
<h1>SYNOPSIS</h1>  <b>#include &lt;form.h&gt;</b><div style="height: 0.00em;">
&#160;</div>
FIELDTYPE *new_fieldtype(<br/>
    bool (* const field_check)(FIELD *, const void *),<br/>
    bool (* const char_check)(int, const void *));<div style="height: 0.00em;">
&#160;</div>
int free_fieldtype(FIELDTYPE *fieldtype);<div style="height: 0.00em;">
&#160;</div>
int set_fieldtype_arg(<br/>
    FIELDTYPE *fieldtype,<br/>
    void *(* const make_arg)(va_list *),<br/>
    void *(* const copy_arg)(const void *),<br/>
    void  (* const free_arg)(void *));<div style="height: 0.00em;">
&#160;</div>
int set_fieldtype_choice(<br/>
    FIELDTYPE *fieldtype,<br/>
    bool (* const next_choice)(FIELD *, const void *),<br/>
    bool (* const prev_choice)(FIELD *, const void *));<div style="height: 0.00em;">
&#160;</div>
FIELDTYPE *link_fieldtype(FIELDTYPE *type1,<br/>
                          FIELDTYPE *type2);<div style="height: 0.00em;">
&#160;</div>
</div>
<div class="section">
<h1>DESCRIPTION</h1> The function  <b>new_fieldtype</b> creates a new field type usable for data validation.  You supply it with  <i>field_check</i>, a predicate to check the validity of an entered data string whenever the user attempts to leave a field. The (FIELD *) argument is passed in so the validation predicate can see the field's buffer, sizes and other attributes; the second argument is an argument-block structure, about which more below.<div class="spacer">
</div>
You also supply <b>new_fieldtype</b> with <i>char_check</i>, a function to validate input characters as they are entered; it will be passed the character to be checked and a pointer to an argument-block structure.<div class="spacer">
</div>
The function <b>free_fieldtype</b> frees the space allocated for a given validation type.<div class="spacer">
</div>
The function <b>set_fieldtype_arg</b> associates three storage-management functions with a field type. The  <i>make_arg</i> function is automatically applied to the list of arguments you give  <b>set_field_type</b> when attaching validation to a field; its job is to bundle these into an allocated argument-block object which can later be passed to validation predicated. The other two hook arguments should copy and free argument-block structures. They will be used by the forms-driver code. You must supply the  <i>make_arg</i> function, the other two are optional, you may supply NULL for them. In this case it is assumed that  <i>make_arg</i> does not allocate memory but simply loads the argument into a single scalar value.<div class="spacer">
</div>
The function <b>link_fieldtype</b> creates a new field type from the two given types. They are connected by an logical 'OR'.<div class="spacer">
</div>
The form driver requests <b>REQ_NEXT_CHOICE</b> and <b>REQ_PREV_CHOICE</b> assume that the possible values of a field form an ordered set, and provide the forms user with a way to move through the set. The  <b>set_fieldtype_choice</b> function allows forms programmers to define successor and predecessor functions for the field type. These functions take the field pointer and an argument-block structure as arguments.</div>
<div class="section">
<h1>RETURN VALUE</h1> The pointer-valued routines return NULL on error. They set errno according to their success:<dl>
<dt>
<b>E_OK</b></dt>
<dd>
The routine succeeded.</dd>
</dl>
<dl>
<dt>
<b>E_BAD_ARGUMENT</b></dt>
<dd>
Routine detected an incorrect or out-of-range argument.</dd>
</dl>
<dl>
<dt>
<b>E_SYSTEM_ERROR</b></dt>
<dd>
System error occurred, e.g., malloc failure.</dd>
</dl>
<div class="spacer">
</div>
The integer-valued routines return one of the following codes on error:<dl>
<dt>
<b>E_OK</b></dt>
<dd>
The routine succeeded.</dd>
</dl>
<dl>
<dt>
<b>E_BAD_ARGUMENT</b></dt>
<dd>
Routine detected an incorrect or out-of-range argument.</dd>
</dl>
<dl>
<dt>
<b>E_CONNECTED</b></dt>
<dd>
The field is already connected to a form.</dd>
</dl>
<dl>
<dt>
<b>E_CURRENT</b></dt>
<dd>
The field is the current field.</dd>
</dl>
<dl>
<dt>
<b>E_SYSTEM_ERROR</b></dt>
<dd>
System error occurred (see <b>errno</b>).</dd>
</dl>
</div>
<div class="section">
<h1>SEE ALSO</h1>  <b>curses</b>(3), <b>form</b>(3).</div>
<div class="section">
<h1>NOTES</h1> The header file  <b>&lt;form.h&gt;</b> automatically includes the header file  <b>&lt;curses.h&gt;</b>.<div class="spacer">
</div>
All of the <b>(char *)</b> arguments of these functions should actually be  <b>(void *)</b>.  The type has been left uncorrected for strict compatibility with System V.</div>
<div class="section">
<h1>PORTABILITY</h1> These routines emulate the System V forms library.  They were not supported on Version 7 or BSD versions.</div>
<div class="section">
<h1>AUTHORS</h1> Juergen Pfeifer.  Manual pages and adaptation for new curses by Eric S. Raymond.</div>
<table class="foot">
<tr>
<td class="foot-date">
</td>
<td class="foot-os">
</td>
</tr>
</table>
</div>
</body>
</html>

