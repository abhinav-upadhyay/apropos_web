<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/posix/style.css" type="text/css" media="all"/>
<title>
PIPE(2)</title>
</head>
<body>
<div class="mandoc">
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">pipe</b>, <b class="name">pipe2</b> &#8212; <span class="desc">create descriptor pair for interprocess communication</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="includes">#include &lt;<a class="link-includes">unistd.h</a>&gt;</b><div class="spacer">
</div>
<i class="ftype">int</i><br/>
<b class="fname">pipe</b>(<i class="farg" style="white-space:nowrap;">int fildes[2]</i>);<div class="spacer">
</div>
<b class="includes">#include &lt;<a class="link-includes">fcntl.h</a>&gt;</b><br/>
<b class="includes">#include &lt;<a class="link-includes">unistd.h</a>&gt;</b><div class="spacer">
</div>
<i class="ftype">int</i><br/>
<b class="fname">pipe2</b>(<i class="farg" style="white-space:nowrap;">int fildes[2]</i>, <i class="farg" style="white-space:nowrap;">int flags</i>);</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> The <b class="fname">pipe</b>() function creates a <span class="emph">pipe</span>, which is an object allowing unidirectional data flow, and allocates a pair of file descriptors. The first descriptor connects to the <span class="emph">read end</span> of the pipe, and the second connects to the <span class="emph">write end</span>, so that data written to <i class="farg">fildes[1]</i> appears on (i.e., can be read from) <i class="farg">fildes[0]</i>. This allows the output of one program to be sent to another program: the source's standard output is set up to be the write end of the pipe, and the sink's standard input is set up to be the read end of the pipe. The pipe itself persists until all its associated descriptors are closed.<div class="spacer">
</div>
A pipe whose read or write end has been closed is considered <span class="emph">widowed</span>. Writing on such a pipe causes the writing process to receive a <span class="define">SIGPIPE</span> signal. Widowing a pipe is the only way to deliver end-of-file to a reader: after the reader consumes any buffered data, reading a widowed pipe returns a zero count.<div class="spacer">
</div>
The <b class="fname">pipe2</b>() function is identical to <b class="fname">pipe</b>() except that the non-blocking I/O mode on both ends of the pipe is determined by the <span class="define">O_NONBLOCK</span> flag in the <i class="farg">flags</i> argument and the close-on-exec flag on both the new file descriptors is determined by the <span class="define">O_CLOEXEC</span> flag in the <i class="farg">flags</i> argument.</div>
<div class="section">
<h1 id="x52455455524e2056414c554553">RETURN VALUES</h1> Upon successful completion, the value&#160;0 is returned; otherwise the value&#160;-1 is returned and the global variable <b class="var">errno</b> is set to indicate the error.</div>
<div class="section">
<h1 id="x4552524f5253">ERRORS</h1> <b class="fname">pipe</b>() and <b class="fname">pipe2</b>() will succeed unless:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">EMFILE</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
Too many descriptors are active.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">ENFILE</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The system file table is full.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">EFAULT</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The <i class="farg">fildes</i> buffer is in an invalid area of the process's address space.</dd>
</dl>
<div class="spacer">
</div>
In addition, <b class="fname">pipe2</b>() may return the following error:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">EINVAL</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
<i class="farg">flags</i> is invalid.</dd>
</dl>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../html1/sh.html">sh(1)</a>, <a class="link-man" href="../html2/fork.html">fork(2)</a>, <a class="link-man" href="../html2/read.html">read(2)</a>, <a class="link-man" href="../html2/socketpair.html">socketpair(2)</a>, <a class="link-man" href="../html2/write.html">write(2)</a></div>
<div class="section">
<h1 id="x5354414e4441524453">STANDARDS</h1> The <b class="fname">pipe</b>() function conforms to IEEE Std 1003.1-2008 (&#8220;POSIX.1&#8221;). The <b class="fname">pipe2</b>() function is expected to conform to a future revision of that standard.<div class="spacer">
</div>
As an extension, the pipe provided is actually capable of moving data bidirectionally. This is compatible with SVR4. However, this is non-POSIX behaviour which should not be relied on, for reasons of portability.</div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> A <b class="fname">pipe</b>() function call appeared in Version&#160;3 AT&amp;T UNIX. Since Version&#160;4 AT&amp;T UNIX, it allocates two distinct file descriptors. The <b class="fname">pipe2</b>() function appeared in <span class="unix">OpenBSD&#160;5.7</span>.</div>
</div>
</body>
</html>

