<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/posix/style.css" type="text/css" media="all"/>
<title>
LINK(2)</title>
</head>
<body>
<div class="mandoc">
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">link</b>, <b class="name">linkat</b> &#8212; <span class="desc">make hard link to a file</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="includes">#include &lt;<a class="link-includes">unistd.h</a>&gt;</b><div class="spacer">
</div>
<i class="ftype">int</i><br/>
<b class="fname">link</b>(<i class="farg" style="white-space:nowrap;">const char *name1</i>, <i class="farg" style="white-space:nowrap;">const char *name2</i>);<div class="spacer">
</div>
<b class="includes">#include &lt;<a class="link-includes">fcntl.h</a>&gt;</b><br/>
<b class="includes">#include &lt;<a class="link-includes">unistd.h</a>&gt;</b><div class="spacer">
</div>
<i class="ftype">int</i><br/>
<b class="fname">linkat</b>(<i class="farg" style="white-space:nowrap;">int fd1</i>, <i class="farg" style="white-space:nowrap;">const char *name1</i>, <i class="farg" style="white-space:nowrap;">int fd2</i>, <i class="farg" style="white-space:nowrap;">const char *name2</i>, <i class="farg" style="white-space:nowrap;">int flag</i>);</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> The <b class="fname">link</b>() function atomically creates the specified directory entry (hard link) <i class="farg">name2</i> with the attributes of the underlying object pointed at by <i class="farg">name1</i>. If the link is successful: the link count of the underlying object is incremented; <i class="farg">name1</i> and <i class="farg">name2</i> share equal access and rights to the underlying object.<div class="spacer">
</div>
If <i class="farg">name1</i> is removed, the file <i class="farg">name2</i> is not deleted and the link count of the underlying object is decremented.<div class="spacer">
</div>
<i class="farg">name1</i> must exist for the hard link to succeed and both <i class="farg">name1</i> and <i class="farg">name2</i> must be in the same file system. As mandated by POSIX.1 <i class="farg">name1</i> may not be a directory.<div class="spacer">
</div>
The <b class="fname">linkat</b>() function is equivalent to <b class="fname">link</b>() except that where <i class="farg">name1</i> or <i class="farg">name2</i> specifies a relative path, the directory entries linked are resolved relative to the directories associated with file descriptors <i class="farg">fd1</i> or <i class="farg">fd2</i> (respectively) instead of the current working directory.<div class="spacer">
</div>
If <b class="fname">linkat</b>() is passed the special value <span class="define">AT_FDCWD</span> (defined in <b class="includes">&lt;<a class="link-includes">fcntl.h</a>&gt;</b>) in the <i class="farg">fd1</i> or <i class="farg">fd2</i> parameter, the current working directory is used for resolving the respective <i class="farg">name1</i> or <i class="farg">name2</i> argument.<div class="spacer">
</div>
The <i class="farg">flag</i> argument is the bitwise OR of zero or more of the following values:<div class="spacer">
</div>
<dl style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 6.00ex;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
<span class="define">AT_SYMLINK_FOLLOW</span></dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
If <i class="farg">name1</i> names a symbolic link, a new link for the target of the symbolic link is created.</dd>
</dl>
<div class="spacer">
</div>
If the <span class="define">AT_SYMLINK_FOLLOW</span> flag is clear and <i class="farg">name1</i> names a symbolic link, a new link is created for the symbolic link <i class="farg">name1</i> and not its target.</div>
<div class="section">
<h1 id="x52455455524e2056414c554553">RETURN VALUES</h1> Upon successful completion, the value&#160;0 is returned; otherwise the value&#160;-1 is returned and the global variable <b class="var">errno</b> is set to indicate the error.</div>
<div class="section">
<h1 id="x4552524f5253">ERRORS</h1> <b class="fname">link</b>() and <b class="fname">linkat</b>() will fail and no link will be created if:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">ENOTDIR</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
A component of either path prefix is not a directory.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">ENAMETOOLONG</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
A component of a pathname exceeded <span class="define">NAME_MAX</span> characters, or an entire pathname (including the terminating NUL) exceeded <span class="define">PATH_MAX</span> bytes.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">ENOENT</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
A component of either path prefix does not exist.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">EOPNOTSUPP</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The file system containing the file named by <i class="farg">name1</i> does not support links.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">EMLINK</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The link count of the file named by <i class="farg">name1</i> would exceed <span class="define">LINK_MAX</span>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">EACCES</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
A component of either path prefix denies search permission.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">EACCES</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The requested link requires writing in a directory with a mode that denies write permission.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">ELOOP</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
Too many symbolic links were encountered in translating one of the pathnames.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">ENOENT</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The file named by <i class="farg">name1</i> does not exist.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">EEXIST</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The link named by <i class="farg">name2</i> does exist.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">EPERM</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The file named by <i class="farg">name1</i> is a directory and the effective user ID is not superuser, or the file system containing the file does not permit the use of <b class="fname">link</b>() on a directory.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">EPERM</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The file named by <i class="farg">name1</i> is flagged immutable or append-only.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">EXDEV</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The link named by <i class="farg">name2</i> and the file named by <i class="farg">name1</i> are on different file systems.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">ENOSPC</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The directory in which the entry for the new link is being placed cannot be extended because there is no space left on the file system containing the directory.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">EDQUOT</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The directory in which the entry for the new link is being placed cannot be extended because the user's quota of disk blocks on the file system containing the directory has been exhausted.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">EIO</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
An I/O error occurred while reading from or writing to the file system to make the directory entry.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">EROFS</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The requested link requires writing in a directory on a read-only file system.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">EFAULT</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
One of the pathnames specified is outside the process's allocated address space.</dd>
</dl>
<div class="spacer">
</div>
Additionally, <b class="fname">linkat</b>() will fail if:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">EINVAL</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The value of the <i class="farg">flag</i> argument was neither zero nor <span class="define">AT_SYMLINK_FOLLOW</span>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">EBADF</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The <i class="farg">name1</i> or <i class="farg">name2</i> argument specifies a relative path and the <i class="farg">fd1</i> or <i class="farg">fd2</i> argument, respectively, is neither <span class="define">AT_FDCWD</span> nor a valid file descriptor.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">ENOTDIR</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The <i class="farg">name1</i> or <i class="farg">name2</i> argument specifies a relative path and the <i class="farg">fd1</i> or <i class="farg">fd2</i> argument, respectively, is a valid file descriptor but it does not reference a directory.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">EACCES</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The <i class="farg">name1</i> or <i class="farg">name2</i> argument specifies a relative path but search permission is denied for the directory which the <i class="farg">fd1</i> or <i class="farg">fd2</i> file descriptor, respectively, references.</dd>
</dl>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../html1/ln.html">ln(1)</a>, <a class="link-man" href="../html2/readlink.html">readlink(2)</a>, <a class="link-man" href="../html2/symlink.html">symlink(2)</a>, <a class="link-man" href="../html2/unlink.html">unlink(2)</a></div>
<div class="section">
<h1 id="x5354414e4441524453">STANDARDS</h1> The <b class="fname">link</b>() and <b class="fname">linkat</b>() functions are expected to conform to IEEE Std 1003.1-2008 (&#8220;POSIX.1&#8221;).</div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> The <b class="fname">link</b>() system call first appeared in Version&#160;1 AT&amp;T UNIX. The <b class="fname">linkat</b>() function appeared in <span class="unix">OpenBSD&#160;5.0</span>.</div>
</div>
</body>
</html>

