<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/posix/style.css" type="text/css" media="all"/>
<title>
ACCESS(2)</title>
</head>
<body>
<div class="mandoc">
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">access</b>, <b class="name">faccessat</b> &#8212; <span class="desc">check access permissions of a file or pathname</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="includes">#include &lt;<a class="link-includes">unistd.h</a>&gt;</b><div class="spacer">
</div>
<i class="ftype">int</i><br/>
<b class="fname">access</b>(<i class="farg" style="white-space:nowrap;">const char *path</i>, <i class="farg" style="white-space:nowrap;">int amode</i>);<div class="spacer">
</div>
<b class="includes">#include &lt;<a class="link-includes">fcntl.h</a>&gt;</b><br/>
<b class="includes">#include &lt;<a class="link-includes">unistd.h</a>&gt;</b><div class="spacer">
</div>
<i class="ftype">int</i><br/>
<b class="fname">faccessat</b>(<i class="farg" style="white-space:nowrap;">int fd</i>, <i class="farg" style="white-space:nowrap;">const char *path</i>, <i class="farg" style="white-space:nowrap;">int amode</i>, <i class="farg" style="white-space:nowrap;">int flag</i>);</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> The <b class="fname">access</b>() function checks the accessibility of the file named by <i class="farg">path</i> for the access permissions indicated by <i class="farg">amode</i>. The <i class="farg">amode</i> argument is either the bitwise OR of one or more of the access permissions to be checked (<span class="define">R_OK</span> for read permission, <span class="define">W_OK</span> for write permission, and <span class="define">X_OK</span> for execute/search permission) or the existence test, <span class="define">F_OK</span>. All components of the pathname <i class="farg">path</i> are checked for access permissions (including <span class="define">F_OK</span>).<div class="spacer">
</div>
The real user ID is used in place of the effective user ID and the real group access list (including the real group ID) is used in place of the effective ID for verifying permission.<div class="spacer">
</div>
If the invoking process has superuser privileges, <b class="fname">access</b>() will always indicate success for <span class="define">R_OK</span> and <span class="define">W_OK</span>, regardless of the actual file permission bits. Likewise, for <span class="define">X_OK</span>, if the file has any of the execute bits set and <i class="farg">path</i> is not a directory, <b class="fname">access</b>() will indicate success.<div class="spacer">
</div>
The <b class="fname">faccessat</b>() function is equivalent to <b class="fname">access</b>() except that where <i class="farg">path</i> specifies a relative path, the file whose accessibility is checked is determined relative to the directory associated with file descriptor <i class="farg">fd</i> instead of the current working directory.<div class="spacer">
</div>
If <b class="fname">faccessat</b>() is passed the special value <span class="define">AT_FDCWD</span> (defined in <b class="includes">&lt;<a class="link-includes">fcntl.h</a>&gt;</b>) in the <i class="farg">fd</i> parameter, the current working directory is used. If <i class="farg">flag</i> is also zero, the behavior is identical to a call to <b class="fname">access</b>().<div class="spacer">
</div>
The <i class="farg">flag</i> argument is the bitwise OR of zero or more of the following values:<div class="spacer">
</div>
<dl style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 6.00ex;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
<span class="define">AT_EACCESS</span></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
The checks for accessibility are performed using the effective user and group IDs instead of the real user and group IDs.</dd>
</dl>
</div>
<div class="section">
<h1 id="x52455455524e2056414c554553">RETURN VALUES</h1> If <i class="farg">path</i> cannot be found or if any of the desired access modes would not be granted, then a -1 value is returned; otherwise a 0 value is returned.</div>
<div class="section">
<h1 id="x4552524f5253">ERRORS</h1> Access to the file is denied if:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">ENOTDIR</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
A component of the path prefix is not a directory.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">ENAMETOOLONG</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
A component of a pathname exceeded <span class="define">NAME_MAX</span> characters, or an entire pathname (including the terminating NUL) exceeded <span class="define">PATH_MAX</span> bytes.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">ENOENT</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The named file does not exist.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">ELOOP</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
Too many symbolic links were encountered in translating the pathname.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">EROFS</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
Write access is requested for a file on a read-only file system.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">ETXTBSY</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
Write access is requested for a pure procedure (shared text) file presently being executed.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">EACCES</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
Permission bits of the file mode do not permit the requested access, or search permission is denied on a component of the path prefix. The owner of a file has permission checked with respect to the &#8220;owner&#8221; read, write, and execute mode bits, members of the file's group other than the owner have permission checked with respect to the &#8220;group&#8221; mode bits, and all others have permissions checked with respect to the &#8220;other&#8221; mode bits.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">EPERM</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
Write access has been requested and the named file has its immutable flag set (see <a class="link-man" href="../html2/chflags.html">chflags(2)</a>).</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">EFAULT</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
<i class="farg">path</i> points outside the process's allocated address space.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">EIO</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
An I/O error occurred while reading from or writing to the file system.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">EINVAL</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
An invalid value was specified for <i class="farg">amode</i>.</dd>
</dl>
<div class="spacer">
</div>
Additionally, <b class="fname">faccessat</b>() will fail if:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">EINVAL</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The value of the <i class="farg">flag</i> argument was neither zero nor <span class="define">AT_EACCESS</span>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">EBADF</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The <i class="farg">path</i> argument specifies a relative path and the <i class="farg">fd</i> argument is neither <span class="define">AT_FDCWD</span> nor a valid file descriptor.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">ENOTDIR</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The <i class="farg">path</i> argument specifies a relative path and the <i class="farg">fd</i> argument is a valid file descriptor but it does not reference a directory.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">EACCES</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The <i class="farg">path</i> argument specifies a relative path but search permission is denied for the directory which the <i class="farg">fd</i> file descriptor references.</dd>
</dl>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../html2/chmod.html">chmod(2)</a>, <a class="link-man" href="../html2/stat.html">stat(2)</a></div>
<div class="section">
<h1 id="x5354414e4441524453">STANDARDS</h1> The <b class="fname">access</b>() and <b class="fname">faccessat</b>() functions conform to IEEE Std 1003.1-2008 (&#8220;POSIX.1&#8221;).</div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> <b class="fname">access</b>() first appeared as an internal kernel function in Version&#160;1 AT&amp;T UNIX and was reimplemented in C before the release of Version&#160;4 AT&amp;T UNIX. It was first promoted to a system call in the Programmer's Workbench (PWB/UNIX), which was later ported to Version&#160;7 AT&amp;T UNIX and <span class="unix">2BSD</span>.<div class="spacer">
</div>
The <b class="fname">faccessat</b>() function appeared in <span class="unix">OpenBSD&#160;5.0</span>.</div>
<div class="section">
<h1 id="x415554484f5253">AUTHORS</h1> <span class="author">Ken Thompson</span> first implemented the <b class="fname">access</b>() kernel function in C.</div>
<div class="section">
<h1 id="x43415645415453">CAVEATS</h1> <b class="fname">access</b>() and <b class="fname">faccessat</b>() should never be used for actual access control. Doing so can result in a time of check vs. time of use security hole.</div>
</div>
</body>
</html>

