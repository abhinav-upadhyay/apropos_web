<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/posix/style.css" type="text/css" media="all"/>
<title>
SEND(2)</title>
</head>
<body>
<div class="mandoc">
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">send</b>, <b class="name">sendto</b>, <b class="name">sendmsg</b> &#8212; <span class="desc">send a message from a socket</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="includes">#include &lt;<a class="link-includes">sys/socket.h</a>&gt;</b><div class="spacer">
</div>
<i class="ftype">ssize_t</i><br/>
<b class="fname">send</b>(<i class="farg" style="white-space:nowrap;">int s</i>, <i class="farg" style="white-space:nowrap;">const void *msg</i>, <i class="farg" style="white-space:nowrap;">size_t len</i>, <i class="farg" style="white-space:nowrap;">int flags</i>);<div class="spacer">
</div>
<i class="ftype">ssize_t</i><br/>
<b class="fname">sendto</b>(<i class="farg" style="white-space:nowrap;">int s</i>, <i class="farg" style="white-space:nowrap;">const void *msg</i>, <i class="farg" style="white-space:nowrap;">size_t len</i>, <i class="farg" style="white-space:nowrap;">int flags</i>, <i class="farg" style="white-space:nowrap;">const struct sockaddr *to</i>, <i class="farg" style="white-space:nowrap;">socklen_t tolen</i>);<div class="spacer">
</div>
<i class="ftype">ssize_t</i><br/>
<b class="fname">sendmsg</b>(<i class="farg" style="white-space:nowrap;">int s</i>, <i class="farg" style="white-space:nowrap;">const struct msghdr *msg</i>, <i class="farg" style="white-space:nowrap;">int flags</i>);</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> <b class="fname">send</b>(), <b class="fname">sendto</b>(), and <b class="fname">sendmsg</b>() are used to transmit a message to another socket. <b class="fname">send</b>() may be used only when the socket is in a <span class="emph">connected</span> state, while <b class="fname">sendto</b>() and <b class="fname">sendmsg</b>() may be used at any time.<div class="spacer">
</div>
The address of the target is given by <i class="farg">to</i> with <i class="farg">tolen</i> specifying its size. The length of the message is given by <i class="farg">len</i>. If the message is too long to pass atomically through the underlying protocol, the error <span class="errno">EMSGSIZE</span> is returned, and the message is not transmitted.<div class="spacer">
</div>
No indication of failure to deliver is implicit in a <b class="fname">send</b>(). Locally detected errors are indicated by a return value of -1.<div class="spacer">
</div>
If no messages space is available at the socket to hold the message to be transmitted, then <b class="fname">send</b>() normally blocks, unless the socket has been placed in non-blocking I/O mode. The <a class="link-man" href="../html2/select.html">select(2)</a> or <a class="link-man" href="../html2/poll.html">poll(2)</a> system calls may be used to determine when it is possible to send more data.<div class="spacer">
</div>
The <i class="farg">flags</i> parameter may include one or more of the following:<div class="spacer">
</div>
<dl style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 6.00ex;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
<span class="define">MSG_DONTROUTE</span></dt>
<dd class="list-tag" style="margin-left: 15.00ex;">
bypass routing tables, silently ignored</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<span class="define">MSG_DONTWAIT</span></dt>
<dd class="list-tag" style="margin-left: 15.00ex;">
don't block</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<span class="define">MSG_EOR</span></dt>
<dd class="list-tag" style="margin-left: 15.00ex;">
terminate the record (SOCK_SEQPACKET only)</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<span class="define">MSG_NOSIGNAL</span></dt>
<dd class="list-tag" style="margin-left: 15.00ex;">
don't send <span class="define">SIGPIPE</span></dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<span class="define">MSG_OOB</span></dt>
<dd class="list-tag" style="margin-left: 15.00ex;">
process out-of-band data</dd>
</dl>
<div class="spacer">
</div>
The flag <span class="define">MSG_OOB</span> is used to send &#8220;out-of-band&#8221; data on sockets that support this notion (e.g., <span class="define">SOCK_STREAM</span>); the underlying protocol must also support &#8220;out-of-band&#8221; data. <span class="define">MSG_NOSIGNAL</span> is used to request not to send the <span class="define">SIGPIPE</span> signal if an attempt to send is made on a socket that is shut down for writing or no longer connected.<div class="spacer">
</div>
See <a class="link-man" href="../html2/recv.html">recv(2)</a> for a description of the <i class="farg">msghdr</i> structure.</div>
<div class="section">
<h1 id="x52455455524e2056414c554553">RETURN VALUES</h1> The call returns the number of characters sent, or -1 if an error occurred.</div>
<div class="section">
<h1 id="x4552524f5253">ERRORS</h1> <b class="fname">send</b>(), <b class="fname">sendto</b>(), and <b class="fname">sendmsg</b>() fail if:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">EBADF</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
An invalid descriptor was specified.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">ENOTSOCK</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The argument <i class="farg">s</i> is not a socket.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">EFAULT</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
An invalid user space address was specified for a parameter.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">EMSGSIZE</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The socket requires that message be sent atomically, and the size of the message to be sent made this impossible.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">EAGAIN</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The socket is marked non-blocking or the <span class="define">MSG_DONTWAIT</span> flag is set and the requested operation would block.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">ENOBUFS</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The system was unable to allocate an internal buffer. The operation may succeed when buffers become available.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">ENOBUFS</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The output queue for a network interface was full. This generally indicates that the interface has stopped sending, but may be caused by transient congestion.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">EACCES</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The <span class="define">SO_BROADCAST</span> option is not set on the socket, and a broadcast address was given as the destination.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">EHOSTUNREACH</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The destination address specified an unreachable host.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">EINVAL</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The <i class="farg">flags</i> parameter is invalid.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">EHOSTDOWN</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The destination address specified a host that is down.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">ENETDOWN</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The destination address specified a network that is down.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">ECONNREFUSED</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The destination host rejected the message (or a previous one). This error can only be returned by connected sockets.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">ENOPROTOOPT</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
There was a problem sending the message. This error can only be returned by connected sockets.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">EDESTADDRREQ</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The socket is not connected, and no destination address was specified.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">EPIPE</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The socket is shut down for writing or not longer connected and the <span class="define">MSG_NOSIGNAL</span> flag is set.</dd>
</dl>
<div class="spacer">
</div>
In addition, <b class="fname">send</b>() and <b class="fname">sendto</b>() may return the following error:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">EINVAL</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
<i class="farg">len</i> was larger than <span class="define">SSIZE_MAX</span>.</dd>
</dl>
<div class="spacer">
</div>
<b class="fname">sendto</b>() and <b class="fname">sendmsg</b>() may return the following errors:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">EAFNOSUPPORT</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
Addresses in the specified address family cannot be used with this socket.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">EISCONN</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The socket is already connected, and a destination address was specified.</dd>
</dl>
<div class="spacer">
</div>
<b class="fname">sendmsg</b>() may return the following errors:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">EINVAL</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The sum of the <i class="farg">iov_len</i> values in the <i class="farg">msg_iov</i> array overflowed an <span class="emph">ssize_t</span>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">EMSGSIZE</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The <i class="farg">msg_iovlen</i> member of <i class="farg">msg</i> was less than 0 or larger than <span class="define">IOV_MAX</span>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">EMFILE</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The message contains control information utilizing <a class="link-man" href="../html3/CMSG_DATA.html">CMSG_DATA(3)</a> to pass file descriptors, but too many file descriptors are already in-flight.</dd>
</dl>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../html2/fcntl.html">fcntl(2)</a>, <a class="link-man" href="../html2/getsockopt.html">getsockopt(2)</a>, <a class="link-man" href="../html2/poll.html">poll(2)</a>, <a class="link-man" href="../html2/recv.html">recv(2)</a>, <a class="link-man" href="../html2/select.html">select(2)</a>, <a class="link-man" href="../html2/socket.html">socket(2)</a>, <a class="link-man" href="../html2/write.html">write(2)</a>, <a class="link-man" href="../html3/CMSG_DATA.html">CMSG_DATA(3)</a></div>
<div class="section">
<h1 id="x5354414e4441524453">STANDARDS</h1> The <b class="fname">send</b>(), <b class="fname">sendto</b>(), and <b class="fname">sendmsg</b>() functions conform to IEEE Std 1003.1-2008 (&#8220;POSIX.1&#8221;). The <span class="define">MSG_DONTWAIT</span> and <span class="define">MSG_NOSIGNAL</span> flags are extensions to that specification.</div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> The <b class="fname">send</b>() function call appeared in <span class="unix">4.2BSD</span>.</div>
</div>
</body>
</html>

