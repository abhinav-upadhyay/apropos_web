<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/posix/style.css" type="text/css" media="all"/>
<title>
FORK(2)</title>
</head>
<body>
<div class="mandoc">
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">fork</b> &#8212; <span class="desc">create a new process</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="includes">#include &lt;<a class="link-includes">unistd.h</a>&gt;</b><div class="spacer">
</div>
<i class="ftype">pid_t</i><br/>
<b class="fname">fork</b>(<i class="farg" style="white-space:nowrap;">void</i>);</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> <b class="fname">fork</b>() causes creation of a new process. The new process (child process) is an exact copy of the calling process (parent process) except for the following:<ul style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 6.00ex;" class="list list-bul">
<li class="list-bul" style="margin-top: 1.00em;">
The child process has a unique process ID, which also does not match any existing process group ID.</li>
<li class="list-bul" style="margin-top: 1.00em;">
The child process has a different parent process ID (i.e., the process ID of the parent process).</li>
<li class="list-bul" style="margin-top: 1.00em;">
The child process has a single thread.</li>
<li class="list-bul" style="margin-top: 1.00em;">
The child process has its own copy of the parent's descriptors. These descriptors reference the same underlying objects, so that, for instance, file pointers in file objects are shared between the child and the parent, so that an <a class="link-man" href="../html2/lseek.html">lseek(2)</a> on a descriptor in the child process can affect a subsequent <a class="link-man" href="../html2/read.html">read(2)</a> or <a class="link-man" href="../html2/write.html">write(2)</a> by the parent. This descriptor copying is also used by the shell to establish standard input and output for newly created processes as well as to set up pipes.</li>
<li class="list-bul" style="margin-top: 1.00em;">
The child process has no <a class="link-man" href="../html2/fcntl.html">fcntl(2)</a>-style file locks.</li>
<li class="list-bul" style="margin-top: 1.00em;">
The child process' resource utilizations are set to 0; see <a class="link-man" href="../html2/getrusage.html">getrusage(2)</a>.</li>
<li class="list-bul" style="margin-top: 1.00em;">
All interval timers are cleared; see <a class="link-man" href="../html2/setitimer.html">setitimer(2)</a>.</li>
<li class="list-bul" style="margin-top: 1.00em;">
The child process' semaphore undo values are set to 0; see <a class="link-man" href="../html2/semop.html">semop(2)</a>.</li>
<li class="list-bul" style="margin-top: 1.00em;">
The child process' pending signals set is empty.</li>
<li class="list-bul" style="margin-top: 1.00em;">
The child process has no memory locks; see <a class="link-man" href="../html2/mlock.html">mlock(2)</a> and <a class="link-man" href="../html2/mlockall.html">mlockall(2)</a>.</li>
</ul>
<div class="spacer">
</div>
In general, the child process should call <a class="link-man" href="../html2/_exit.html">_exit(2)</a> rather than <a class="link-man" href="../html3/exit.html">exit(3)</a>. Otherwise, any stdio buffers that exist both in the parent and child will be flushed twice. Similarly, <a class="link-man" href="../html2/_exit.html">_exit(2)</a> should be used to prevent <a class="link-man" href="../html3/atexit.html">atexit(3)</a> routines from being called twice (once in the parent and once in the child).</div>
<div class="section">
<h1 id="x52455455524e2056414c554553">RETURN VALUES</h1> Upon successful completion, <b class="fname">fork</b>() returns a value of 0 to the child process and returns the process ID of the child process to the parent process. Otherwise, a value of -1 is returned to the parent process, no child process is created, and the global variable <b class="var">errno</b> is set to indicate the error.</div>
<div class="section">
<h1 id="x4552524f5253">ERRORS</h1> <b class="fname">fork</b>() will fail and no child process will be created if:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">EAGAIN</span>]</dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
The system-imposed limits on the total number of processes or total number of threads under execution would be exceeded. These limits are configuration dependent.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">EAGAIN</span>]</dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
The limit <span class="define">RLIMIT_NPROC</span> on the total number of processes under execution by the user ID would be exceeded.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">ENOMEM</span>]</dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
There is insufficient swap space for the new process.</dd>
</dl>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../html2/execve.html">execve(2)</a>, <a class="link-man" href="../html2/getrusage.html">getrusage(2)</a>, <a class="link-man" href="../html2/wait.html">wait(2)</a></div>
<div class="section">
<h1 id="x5354414e4441524453">STANDARDS</h1> The <b class="fname">fork</b>() function conforms to IEEE Std 1003.1-2008 (&#8220;POSIX.1&#8221;).</div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> The <b class="fname">fork</b>() system call first appeared in Version&#160;1 AT&amp;T UNIX.</div>
</div>
</body>
</html>

