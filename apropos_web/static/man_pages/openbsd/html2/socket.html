<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/posix/style.css" type="text/css" media="all"/>
<title>
SOCKET(2)</title>
</head>
<body>
<div class="mandoc">
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">socket</b> &#8212; <span class="desc">create an endpoint for communication</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="includes">#include &lt;<a class="link-includes">sys/socket.h</a>&gt;</b><div class="spacer">
</div>
<i class="ftype">int</i><br/>
<b class="fname">socket</b>(<i class="farg" style="white-space:nowrap;">int domain</i>, <i class="farg" style="white-space:nowrap;">int type</i>, <i class="farg" style="white-space:nowrap;">int protocol</i>);</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> <b class="fname">socket</b>() creates an endpoint for communication and returns a descriptor.<div class="spacer">
</div>
The <i class="farg">domain</i> parameter specifies a communications domain within which communication will take place; this selects the protocol family which should be used. These families are defined in the include file <b class="includes">&lt;<a class="link-includes">sys/socket.h</a>&gt;</b>. The currently understood formats are:<div class="spacer">
</div>
<dl style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 6.00ex;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
AF_UNIX</dt>
<dd class="list-tag" style="margin-left: 11.00ex;">
UNIX internal protocols</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
AF_INET</dt>
<dd class="list-tag" style="margin-left: 11.00ex;">
ARPA Internet protocols</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
AF_INET6</dt>
<dd class="list-tag" style="margin-left: 11.00ex;">
IPv6 (Internet Protocol version 6) protocols</dd>
</dl>
<div class="spacer">
</div>
The socket has the indicated <i class="farg">type</i>, which specifies the semantics of communication. Currently defined types are:<div class="spacer">
</div>
<dl style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 6.00ex;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
SOCK_STREAM</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
SOCK_DGRAM</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
SOCK_RAW</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
SOCK_SEQPACKET</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
</dd>
</dl>
<div class="spacer">
</div>
A <span class="define">SOCK_STREAM</span> type provides sequenced, reliable, two-way connection based byte streams. An out-of-band data transmission mechanism may be supported. A <span class="define">SOCK_DGRAM</span> socket supports datagrams (connectionless, unreliable messages of a fixed (typically small) maximum length). A <span class="define">SOCK_SEQPACKET</span> socket may provide a sequenced, reliable, two-way connection-based data transmission path for datagrams of fixed maximum length; a consumer may be required to read an entire packet with each read system call. This facility is protocol specific, and presently implemented only for <span class="define">AF_UNIX</span>. <span class="define">SOCK_RAW</span> sockets provide access to internal network protocols and interfaces, and are available only to the superuser.<div class="spacer">
</div>
Any combination of the following flags may additionally be used in the <i class="farg">type</i> argument:<div class="spacer">
</div>
<dl style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 6.00ex;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
SOCK_CLOEXEC</dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
Set close-on-exec flag on the new descriptor.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
SOCK_NONBLOCK</dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
Set non-blocking I/O mode on the new socket.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
SOCK_DNS</dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
For domains <span class="define">AF_INET</span> or <span class="define">AF_INET6</span>, only allow <a class="link-man" href="../html2/connect.html">connect(2)</a>, <a class="link-man" href="../html2/sendto.html">sendto(2)</a>, or <a class="link-man" href="../html2/sendmsg.html">sendmsg(2)</a> to the DNS port (typically 53).</dd>
</dl>
<div class="spacer">
</div>
The <i class="farg">protocol</i> specifies a particular protocol to be used with the socket. Normally only a single protocol exists to support a particular socket type within a given protocol family. However, it is possible that many protocols may exist, in which case a particular protocol must be specified in this manner. The protocol number to use is particular to the &#8220;communication domain&#8221; in which communication is to take place; see <a class="link-man" href="../html5/protocols.html">protocols(5)</a>. A value of 0 for <i class="farg">protocol</i> will let the system select an appropriate protocol for the requested socket type.<div class="spacer">
</div>
Sockets of type <span class="define">SOCK_STREAM</span> are full-duplex byte streams. A stream socket must be in a <span class="emph">connected</span> state before any data may be sent or received on it. A connection to another socket is created with a <a class="link-man" href="../html2/connect.html">connect(2)</a> call. Once connected, data may be transferred using <a class="link-man" href="../html2/read.html">read(2)</a> and <a class="link-man" href="../html2/write.html">write(2)</a> calls or some variant of the <a class="link-man" href="../html2/send.html">send(2)</a> and <a class="link-man" href="../html2/recv.html">recv(2)</a> calls. When a session has been completed a <a class="link-man" href="../html2/close.html">close(2)</a> may be performed. Out-of-band data may also be transmitted as described in <a class="link-man" href="../html2/send.html">send(2)</a> and received as described in <a class="link-man" href="../html2/recv.html">recv(2)</a>.<div class="spacer">
</div>
The communications protocols used to implement a <span class="define">SOCK_STREAM</span> ensure that data is not lost or duplicated. If a piece of data for which the peer protocol has buffer space cannot be successfully transmitted within a reasonable length of time, then the connection is considered broken and calls will indicate an error with -1 returns and with <span class="errno">ETIMEDOUT</span> as the specific code in the global variable <b class="var">errno</b>. The protocols optionally keep sockets &#8220;warm&#8221; by forcing transmissions roughly every minute in the absence of other activity. An error is then indicated if no response can be elicited on an otherwise idle connection for an extended period (e.g., 5 minutes). A <span class="define">SIGPIPE</span> signal is raised if a process sends on a broken stream; this causes naive processes, which do not handle the signal, to exit.<div class="spacer">
</div>
<span class="define">SOCK_SEQPACKET</span> sockets employ the same system calls as <span class="define">SOCK_STREAM</span> sockets. The only difference is that <a class="link-man" href="../html2/read.html">read(2)</a> calls will return only the amount of data requested, and any remaining in the arriving packet will be discarded.<div class="spacer">
</div>
<span class="define">SOCK_DGRAM</span> and <span class="define">SOCK_RAW</span> sockets allow sending of datagrams to correspondents named in <a class="link-man" href="../html2/send.html">send(2)</a> calls. Datagrams are generally received with <a class="link-man" href="../html2/recvfrom.html">recvfrom(2)</a>, which returns the next datagram with its return address.<div class="spacer">
</div>
An <a class="link-man" href="../html2/fcntl.html">fcntl(2)</a> call can be used to specify a process group to receive a <span class="define">SIGURG</span> signal when the out-of-band data arrives. It may also enable non-blocking I/O and asynchronous notification of I/O events via <span class="define">SIGIO</span>.<div class="spacer">
</div>
The operation of sockets is controlled by socket level <span class="emph">options</span>. These options are defined in the file <b class="includes">&lt;<a class="link-includes">sys/socket.h</a>&gt;</b>. <a class="link-man" href="../html2/setsockopt.html">setsockopt(2)</a> and <a class="link-man" href="../html2/getsockopt.html">getsockopt(2)</a> are used to set and get options, respectively.</div>
<div class="section">
<h1 id="x52455455524e2056414c554553">RETURN VALUES</h1> A -1 is returned if an error occurs, otherwise the return value is a descriptor referencing the socket.</div>
<div class="section">
<h1 id="x4552524f5253">ERRORS</h1> The <b class="fname">socket</b>() call fails if:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">EAFNOSUPPORT</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The specified address family is not supported on this machine.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">EPROTONOSUPPORT</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The protocol type or the specified protocol is not supported within this domain.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">EPROTOTYPE</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The combination of the specified protocol and type is not supported.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">EMFILE</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The per-process descriptor table is full.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">ENFILE</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The system file table is full.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">ENOBUFS</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
Insufficient resources were available in the system to perform the operation.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">EACCES</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
Permission to create a socket of the specified type and/or protocol is denied.</dd>
</dl>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../html2/accept.html">accept(2)</a>, <a class="link-man" href="../html2/bind.html">bind(2)</a>, <a class="link-man" href="../html2/connect.html">connect(2)</a>, <a class="link-man" href="../html2/getsockname.html">getsockname(2)</a>, <a class="link-man" href="../html2/getsockopt.html">getsockopt(2)</a>, <a class="link-man" href="../html2/ioctl.html">ioctl(2)</a>, <a class="link-man" href="../html2/listen.html">listen(2)</a>, <a class="link-man" href="../html2/poll.html">poll(2)</a>, <a class="link-man" href="../html2/read.html">read(2)</a>, <a class="link-man" href="../html2/recv.html">recv(2)</a>, <a class="link-man" href="../html2/select.html">select(2)</a>, <a class="link-man" href="../html2/send.html">send(2)</a>, <a class="link-man" href="../html2/setsockopt.html">setsockopt(2)</a>, <a class="link-man" href="../html2/shutdown.html">shutdown(2)</a>, <a class="link-man" href="../html2/socketpair.html">socketpair(2)</a>, <a class="link-man" href="../html2/write.html">write(2)</a>, <a class="link-man" href="../html3/getprotoent.html">getprotoent(3)</a>, <a class="link-man" href="../html4/inet.html">inet(4)</a>, <a class="link-man" href="../html4/inet6.html">inet6(4)</a>, <a class="link-man" href="../html4/netintro.html">netintro(4)</a>, <a class="link-man" href="../html4/unix.html">unix(4)</a><div class="spacer">
</div>
<span class="ref"><span class="ref-title">An Introductory 4.3 BSD Interprocess Communication Tutorial</span>, <span class="ref-opt">reprinted in UNIX Programmer's Supplementary Documents Volume 1</span>.</span><div class="spacer">
</div>
<span class="ref"><span class="ref-title">BSD Interprocess Communication Tutorial</span>, <span class="ref-opt">reprinted in UNIX Programmer's Supplementary Documents Volume 1</span>.</span></div>
<div class="section">
<h1 id="x5354414e4441524453">STANDARDS</h1> The <b class="fname">socket</b>() function conforms to IEEE Std 1003.1-2008 (&#8220;POSIX.1&#8221;). The <span class="define">SOCK_CLOEXEC</span> and <span class="define">SOCK_NONBLOCK</span> flags are expected to conform to a future revision of that standard.<div class="spacer">
</div>
The <span class="define">SOCK_DNS</span> flag is an <span class="unix">OpenBSD</span> extension.</div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> The <b class="fname">socket</b>() system call first appeared in <span class="unix">4.1cBSD</span>. Support for the <span class="define">SOCK_CLOEXEC</span> and <span class="define">SOCK_NONBLOCK</span> flags appeared in <span class="unix">OpenBSD&#160;5.7</span>. Support for the <span class="define">SOCK_DNS</span> flag appeared in <span class="unix">OpenBSD&#160;5.9</span>.</div>
</div>
</body>
</html>

