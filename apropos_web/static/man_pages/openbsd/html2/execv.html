<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/posix/style.css" type="text/css" media="all"/>
<title>
EXECVE(2)</title>
</head>
<body>
<div class="mandoc">
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">execve</b> &#8212; <span class="desc">execute a file</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="includes">#include &lt;<a class="link-includes">unistd.h</a>&gt;</b><div class="spacer">
</div>
<i class="ftype">int</i><br/>
<b class="fname">execve</b>(<i class="farg" style="white-space:nowrap;">const char *path</i>, <i class="farg" style="white-space:nowrap;">char *const argv[]</i>, <i class="farg" style="white-space:nowrap;">char *const envp[]</i>);</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> <b class="fname">execve</b>() transforms the calling process into a new process. The new process is constructed from an ordinary file, whose name is pointed to by <i class="farg">path</i>, called the <span class="emph">new process file</span>. This file is either an executable object file, or a file of data for an interpreter. An executable object file consists of an identifying header, followed by pages of data representing the initial program (text) and initialized data pages. Additional pages may be specified by the header to be initialized with zero data; see <a class="link-man" href="../html5/elf.html">elf(5)</a>.<div class="spacer">
</div>
An interpreter file begins with a line of the form:<div class="spacer">
</div>
<div style="margin-left: 5.00ex;" class="display">
<span class="symb">#!</span> <span class="emph">interpreter</span> [<span class="emph">arg</span>]</div>
<div class="spacer">
</div>
When an interpreter file is passed to <b class="fname">execve</b>() the system instead calls <b class="fname">execve</b>() with the specified <span class="emph">interpreter</span>. If the optional <span class="emph">arg</span> is specified, it becomes the first argument to the <span class="emph">interpreter</span>, and the original <i class="arg">path</i> becomes the second argument; otherwise, <i class="arg">path</i> becomes the first argument. The original arguments are shifted over to become the subsequent arguments. The zeroth argument, normally the name of the file being executed, is left unchanged.<div class="spacer">
</div>
The argument <i class="farg">argv</i> is a pointer to a null-terminated array of character pointers to NUL-terminated character strings. These strings construct the argument list to be made available to the new process. At least one non-null argument must be present in the array; by custom, the first element should be the name of the executed program (for example, the last component of <i class="farg">path</i>).<div class="spacer">
</div>
The argument <i class="farg">envp</i> is also a pointer to a null-terminated array of character pointers to NUL-terminated strings. A pointer to this array is normally stored in the global variable <b class="var">environ</b>. These strings pass information to the new process that is not directly an argument to the command (see <a class="link-man" href="../html7/environ.html">environ(7)</a>).<div class="spacer">
</div>
File descriptors open in the calling process image remain open in the new process image, except for those for which the close-on-exec flag is set (see <a class="link-man" href="../html2/close.html">close(2)</a> and <a class="link-man" href="../html2/fcntl.html">fcntl(2)</a>). Descriptors that remain open are unaffected by <b class="fname">execve</b>(). In the case of a new setuid or setgid executable being executed, if file descriptors 0, 1, or 2 (representing stdin, stdout, and stderr) are currently unallocated, these descriptors will be opened to point to some system file like <i class="file">/dev/null</i>. The intent is to ensure these descriptors are not unallocated, since many libraries make assumptions about the use of these 3 file descriptors.<div class="spacer">
</div>
Signals set to be ignored in the calling process, with the exception of <span class="define">SIGCHLD</span>, are set to be ignored in the new process. Other signals are set to default action in the new process image. Blocked signals remain blocked regardless of changes to the signal action. The signal stack is reset to be undefined (see <a class="link-man" href="../html2/sigaction.html">sigaction(2)</a> for more information).<div class="spacer">
</div>
If the set-user-ID mode bit of the new process image file is set (see <a class="link-man" href="../html2/chmod.html">chmod(2)</a>), the effective user ID of the new process image is set to the owner ID of the new process image file. If the set-group-ID mode bit of the new process image file is set, the effective group ID of the new process image is set to the group ID of the new process image file. (The effective group ID is the first element of the group list.) The real user ID, real group ID and other group IDs of the new process image remain the same as the calling process image. After any set-user-ID and set-group-ID processing, the effective user ID is recorded as the saved set-user-ID, and the effective group ID is recorded as the saved set-group-ID. These values may be used in changing the effective IDs later (see <a class="link-man" href="../html2/setuid.html">setuid(2)</a>). The set-user-ID and set-group-ID bits have no effect if the new process image file is located on a file system mounted with the nosuid flag. The process will be started without the new permissions.<div class="spacer">
</div>
The new process also inherits the following attributes from the calling process:<div class="spacer">
</div>
<dl style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 6.00ex;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
process ID</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
see <a class="link-man" href="../html2/getpid.html">getpid(2)</a></dd>
<dt class="list-tag" style="margin-top: 0.00em;">
parent process ID</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
see <a class="link-man" href="../html2/getppid.html">getppid(2)</a></dd>
<dt class="list-tag" style="margin-top: 0.00em;">
process group ID</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
see <a class="link-man" href="../html2/getpgrp.html">getpgrp(2)</a></dd>
<dt class="list-tag" style="margin-top: 0.00em;">
session ID</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
see <a class="link-man" href="../html2/getsid.html">getsid(2)</a></dd>
<dt class="list-tag" style="margin-top: 0.00em;">
access groups</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
see <a class="link-man" href="../html2/getgroups.html">getgroups(2)</a></dd>
<dt class="list-tag" style="margin-top: 0.00em;">
working directory</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
see <a class="link-man" href="../html2/chdir.html">chdir(2)</a></dd>
<dt class="list-tag" style="margin-top: 0.00em;">
root directory</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
see <a class="link-man" href="../html2/chroot.html">chroot(2)</a></dd>
<dt class="list-tag" style="margin-top: 0.00em;">
control terminal</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
see <a class="link-man" href="../html4/termios.html">termios(4)</a></dd>
<dt class="list-tag" style="margin-top: 0.00em;">
resource usages</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
see <a class="link-man" href="../html2/getrusage.html">getrusage(2)</a></dd>
<dt class="list-tag" style="margin-top: 0.00em;">
interval timers</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
see <a class="link-man" href="../html2/getitimer.html">getitimer(2)</a> (unless process image file is setuid or setgid, in which case all timers are disabled)</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
resource limits</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
see <a class="link-man" href="../html2/getrlimit.html">getrlimit(2)</a></dd>
<dt class="list-tag" style="margin-top: 0.00em;">
file mode mask</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
see <a class="link-man" href="../html2/umask.html">umask(2)</a></dd>
<dt class="list-tag" style="margin-top: 0.00em;">
signal mask</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
see <a class="link-man" href="../html2/sigaction.html">sigaction(2)</a>, <a class="link-man" href="../html3/sigsetmask.html">sigsetmask(3)</a></dd>
</dl>
<div class="spacer">
</div>
When a program is executed as a result of an <b class="fname">execve</b>() call, it is entered as follows:<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
main(int argc, char **argv, char **envp)</pre>
<div class="spacer">
</div>
where <i class="farg">argc</i> is the number of elements in <i class="farg">argv</i> (the &#8220;arg count&#8221;) and <i class="farg">argv</i> points to the array of character pointers to the arguments themselves.</div>
<div class="section">
<h1 id="x52455455524e2056414c554553">RETURN VALUES</h1> As the <b class="fname">execve</b>() function overlays the current process image with a new process image the successful call has no process to return to. If <b class="fname">execve</b>() does return to the calling process an error has occurred; the return value will be -1 and the global variable <b class="var">errno</b> is set to indicate the error.</div>
<div class="section">
<h1 id="x4552524f5253">ERRORS</h1> <b class="fname">execve</b>() will fail and return to the calling process if:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">ENOTDIR</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
A component of the path prefix is not a directory.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">ENAMETOOLONG</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
A component of a pathname exceeded <span class="define">NAME_MAX</span> characters, or an entire pathname (including the terminating NUL) exceeded <span class="define">PATH_MAX</span> bytes.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">ENOENT</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The new process file does not exist.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">ELOOP</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
Too many symbolic links were encountered in translating the pathname.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">EISDIR</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The new process file is a directory.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">EACCES</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
Search permission is denied for a component of the path prefix.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">EACCES</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The new process file is not an ordinary file.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">EACCES</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The new process file mode denies execute permission.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">EACCES</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The new process file is on a filesystem mounted with execution disabled (<span class="define">MNT_NOEXEC</span> in <b class="includes">&lt;<a class="link-includes">sys/mount.h</a>&gt;</b>).</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">ENOEXEC</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The new process file has the appropriate access permission, but has an invalid magic number in its header.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">ETXTBSY</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The new process file is a pure procedure (shared text) file that is currently open for writing by some process.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">ENOMEM</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The new process requires more virtual memory than is allowed by the imposed maximum (<a class="link-man" href="../html2/getrlimit.html">getrlimit(2)</a>).</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">E2BIG</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The number of bytes in the new process's argument list is larger than the system-imposed limit. The limit in the system as released is 262144 bytes (<span class="define">ARG_MAX</span>).</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">EFAULT</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The new process file is not as long as indicated by the size values in its header.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">EFAULT</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
<i class="farg">path</i>, <i class="farg">argv</i>, or <i class="farg">envp</i> point to an illegal address.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">EINVAL</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
<i class="farg">argv</i> did not contain at least one element.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">EIO</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
An I/O error occurred while reading from the file system.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">ENFILE</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
During startup of an <span class="emph">interpreter</span>, the system file table was found to be full.</dd>
</dl>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../html2/_exit.html">_exit(2)</a>, <a class="link-man" href="../html2/fork.html">fork(2)</a>, <a class="link-man" href="../html3/execl.html">execl(3)</a>, <a class="link-man" href="../html3/exit.html">exit(3)</a>, <a class="link-man" href="../html5/elf.html">elf(5)</a>, <a class="link-man" href="../html7/environ.html">environ(7)</a></div>
<div class="section">
<h1 id="x5354414e4441524453">STANDARDS</h1> The <b class="fname">execve</b>() function is expected to conform to IEEE Std 1003.1-2008 (&#8220;POSIX.1&#8221;).</div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> The predecessor of these functions, the former <b class="fname">exec</b>() system call, first appeared in Version&#160;1 AT&amp;T UNIX. The <b class="fname">execve</b>() function first appeared in Version&#160;7 AT&amp;T UNIX.</div>
<div class="section">
<h1 id="x43415645415453">CAVEATS</h1> If a program is <span class="emph">setuid</span> to a non-superuser, but is executed when the real <span class="emph">uid</span> is &#8220;root&#8221;, then the process has some of the powers of a superuser as well.<div class="spacer">
</div>
IEEE Std 1003.1-2008 (&#8220;POSIX.1&#8221;) permits <b class="name">execve</b> to leave <span class="define">SIGCHLD</span> as ignored in the new process; portable programs cannot rely on <b class="name">execve</b> resetting it to the default disposition.</div>
</div>
</body>
</html>

