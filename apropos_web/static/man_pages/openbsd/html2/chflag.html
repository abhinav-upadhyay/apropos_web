<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/posix/style.css" type="text/css" media="all"/>
<title>
CHFLAGS(2)</title>
</head>
<body>
<div class="mandoc">
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">chflags</b>, <b class="name">chflagsat</b>, <b class="name">fchflags</b> &#8212; <span class="desc">set file flags</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="includes">#include &lt;<a class="link-includes">sys/stat.h</a>&gt;</b><div class="spacer">
</div>
<i class="ftype">int</i><br/>
<b class="fname">chflags</b>(<i class="farg" style="white-space:nowrap;">const char *path</i>, <i class="farg" style="white-space:nowrap;">unsigned int flags</i>);<div class="spacer">
</div>
<i class="ftype">int</i><br/>
<b class="fname">fchflags</b>(<i class="farg" style="white-space:nowrap;">int fd</i>, <i class="farg" style="white-space:nowrap;">unsigned int flags</i>);<div class="spacer">
</div>
<b class="includes">#include &lt;<a class="link-includes">sys/stat.h</a>&gt;</b><br/>
<b class="includes">#include &lt;<a class="link-includes">fcntl.h</a>&gt;</b><div class="spacer">
</div>
<i class="ftype">int</i><br/>
<b class="fname">chflagsat</b>(<i class="farg" style="white-space:nowrap;">int fd</i>, <i class="farg" style="white-space:nowrap;">const char *path</i>, <i class="farg" style="white-space:nowrap;">unsigned int flags</i>, <i class="farg" style="white-space:nowrap;">int atflags</i>);</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> The file whose name is given by <i class="farg">path</i> or referenced by the descriptor <i class="farg">fd</i> has its flags changed to <i class="farg">flags</i>.<div class="spacer">
</div>
The flags are the bitwise OR of zero or more of the following values:<div class="spacer">
</div>
<dl style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 6.00ex;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
<span class="define">UF_NODUMP</span></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
Do not dump the file.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<span class="define">UF_IMMUTABLE</span></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
The file may not be changed.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<span class="define">UF_APPEND</span></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
The file may only be appended to.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<span class="define">SF_ARCHIVED</span></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
The file may be archived.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<span class="define">SF_IMMUTABLE</span></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
The file may not be changed.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<span class="define">SF_APPEND</span></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
The file may only be appended to.</dd>
</dl>
<div class="spacer">
</div>
The <span class="define">UF_IMMUTABLE</span> and <span class="define">UF_APPEND</span> flags may be set or unset by either the owner of a file or the superuser.<div class="spacer">
</div>
The <span class="define">SF_ARCHIVED</span>, <span class="define">SF_IMMUTABLE</span> and <span class="define">SF_APPEND</span> flags may only be set or unset by the superuser. They may be set at any time, but normally may only be unset when the system is in single-user mode. (See <a class="link-man" href="../html8/init.html">init(8)</a> for details.)<div class="spacer">
</div>
The <b class="fname">chflagsat</b>() function is equivalent to <b class="fname">chflags</b>() except in the case where <i class="farg">path</i> specifies a relative path. In this case the file to be changed is determined relative to the directory associated with the file descriptor <i class="farg">fd</i> instead of the current working directory.<div class="spacer">
</div>
If <b class="fname">chflagsat</b>() is passed the special value <span class="define">AT_FDCWD</span> (defined in <b class="includes">&lt;<a class="link-includes">fcntl.h</a>&gt;</b>) in the <i class="farg">fd</i> parameter, the current working directory is used. If <i class="farg">flag</i> is also zero, the behavior is identical to a call to <b class="fname">chflags</b>().<div class="spacer">
</div>
The <i class="farg">flag</i> argument is the bitwise OR of zero or more of the following values:<div class="spacer">
</div>
<dl style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 6.00ex;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
<span class="define">AT_SYMLINK_NOFOLLOW</span></dt>
<dd class="list-tag" style="margin-left: 19.00ex;">
If <i class="farg">path</i> names a symbolic link, then the flags of the symbolic link are changed.</dd>
</dl>
<div class="spacer">
</div>
The <b class="fname">fchflags</b>() function is equivalent to <b class="fname">chflags</b>() except that the file whose flags are changed is specified by the file descriptor <i class="farg">fd</i>.</div>
<div class="section">
<h1 id="x52455455524e2056414c554553">RETURN VALUES</h1> Upon successful completion, the value&#160;0 is returned; otherwise the value&#160;-1 is returned and the global variable <b class="var">errno</b> is set to indicate the error.</div>
<div class="section">
<h1 id="x4552524f5253">ERRORS</h1> <b class="fname">chflags</b>() will fail if:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">ENOTDIR</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
A component of the path prefix is not a directory.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">ENAMETOOLONG</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
A component of a pathname exceeded <span class="define">NAME_MAX</span> characters, or an entire pathname (including the terminating NUL) exceeded <span class="define">PATH_MAX</span> bytes.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">ENOENT</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The named file does not exist.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">EACCES</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
Search permission is denied for a component of the path prefix.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">ELOOP</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
Too many symbolic links were encountered in translating the pathname.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">EPERM</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The effective user ID does not match the owner of the file and the effective user ID is not the superuser, or the effective user ID is not the superuser and at least one of the super-user-only flags for the named file would be changed.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">EOPNOTSUPP</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The named file resides on a file system that does not support file flags.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">EROFS</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The named file resides on a read-only file system.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">EFAULT</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
<i class="farg">path</i> points outside the process's allocated address space.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">EIO</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
An I/O error occurred while reading from or writing to the file system.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">EINVAL</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The <i class="farg">flags</i> value is invalid.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">EINVAL</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The descriptor references a block or character device and the effective user ID is not the superuser.</dd>
</dl>
<div class="spacer">
</div>
<b class="fname">fchflags</b>() will fail if:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">EBADF</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The descriptor is not valid.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">EINVAL</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
<i class="farg">fd</i> refers to a socket, not to a file.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">EINVAL</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The descriptor references a block or character device and the effective user ID is not the superuser.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">EINVAL</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The <i class="farg">flags</i> value is invalid.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">EPERM</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The effective user ID does not match the owner of the file and the effective user ID is not the superuser, or the effective user ID is not the superuser and at least one of the super-user-only flags for the named file would be changed.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">EOPNOTSUPP</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The named file resides on a file system that does not support file flags.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">EROFS</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
The file resides on a read-only file system.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">EIO</span>]</dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
An I/O error occurred while reading from or writing to the file system.</dd>
</dl>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../html1/chflags.html">chflags(1)</a>, <a class="link-man" href="../html8/init.html">init(8)</a></div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> The <b class="fname">chflags</b>() and <b class="fname">fchflags</b>() functions first appeared in <span class="unix">4.4BSD</span>. The <b class="fname">chflagsat</b>() function first appeared in <span class="unix">FreeBSD&#160;10.0</span>. It was added to <span class="unix">OpenBSD</span> in <span class="unix">OpenBSD&#160;5.7</span>.</div>
</div>
</body>
</html>

