<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/posix/style.css" type="text/css" media="all"/>
<title>
MOUNT(2)</title>
</head>
<body>
<div class="mandoc">
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">mount</b>, <b class="name">unmount</b> &#8212; <span class="desc">mount or dismount a filesystem</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="includes">#include &lt;<a class="link-includes">sys/param.h</a>&gt;</b><br/>
<b class="includes">#include &lt;<a class="link-includes">sys/mount.h</a>&gt;</b><div class="spacer">
</div>
<i class="ftype">int</i><br/>
<b class="fname">mount</b>(<i class="farg" style="white-space:nowrap;">const char *type</i>, <i class="farg" style="white-space:nowrap;">const char *dir</i>, <i class="farg" style="white-space:nowrap;">int flags</i>, <i class="farg" style="white-space:nowrap;">void *data</i>);<div class="spacer">
</div>
<i class="ftype">int</i><br/>
<b class="fname">unmount</b>(<i class="farg" style="white-space:nowrap;">const char *dir</i>, <i class="farg" style="white-space:nowrap;">int flags</i>);</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> The <b class="fname">mount</b>() function grafts a filesystem object onto the system file tree at the point <i class="farg">dir</i>. The argument <i class="farg">data</i> describes the filesystem object to be mounted. The argument <i class="farg">type</i> tells the kernel how to interpret <i class="farg">data</i> (see <i class="farg">type</i> below). The contents of the filesystem become available through the new mount point <i class="farg">dir</i>. Any files in <i class="farg">dir</i> at the time of a successful mount are swept under the carpet, so to speak, and are unavailable until the filesystem is unmounted.<div class="spacer">
</div>
The following <i class="farg">flags</i> may be specified to suppress default semantics which affect filesystem access.<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">MNT_RDONLY</span></dt>
<dd class="list-tag" style="margin-left: 15.00ex;">
The filesystem should be treated as read-only: even the superuser may not write to it.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">MNT_NOATIME</span></dt>
<dd class="list-tag" style="margin-left: 15.00ex;">
Do not update the access time on files in the filesystem unless the modification or status change times are also being updated.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">MNT_NOEXEC</span></dt>
<dd class="list-tag" style="margin-left: 15.00ex;">
Do not allow files to be executed from the filesystem.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">MNT_NOSUID</span></dt>
<dd class="list-tag" style="margin-left: 15.00ex;">
Do not honor setuid or setgid bits on files when executing them.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">MNT_NODEV</span></dt>
<dd class="list-tag" style="margin-left: 15.00ex;">
Do not interpret special files on the filesystem.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">MNT_SYNCHRONOUS</span></dt>
<dd class="list-tag" style="margin-left: 15.00ex;">
All I/O to the filesystem should be done synchronously.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">MNT_ASYNC</span></dt>
<dd class="list-tag" style="margin-left: 15.00ex;">
All I/O to the filesystem should be done asynchronously.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">MNT_SOFTDEP</span></dt>
<dd class="list-tag" style="margin-left: 15.00ex;">
Use soft dependencies. Applies to FFS filesystems only (see 'softdep' in <a class="link-man" href="../html8/mount.html">mount(8)</a>).</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
MNT_WXALLOWED</dt>
<dd class="list-tag" style="margin-left: 15.00ex;">
Processes that ask for memory to be made writeable plus executable using the <a class="link-man" href="../html2/mmap.html">mmap(2)</a> and <a class="link-man" href="../html2/mprotect.html">mprotect(2)</a> system calls are killed by default. This option allows those processes to continue operation. The option is typically used on the <i class="file">/usr/local</i> filesystem.</dd>
</dl>
<div class="spacer">
</div>
The flag <span class="define">MNT_UPDATE</span> indicates that the mount command is being applied to an already mounted filesystem. This allows the mount flags to be changed without requiring that the filesystem be unmounted and remounted. Some filesystems may not allow all flags to be changed. For example, most filesystems will not allow a change from read-write to read-only.<div class="spacer">
</div>
The <i class="farg">type</i> argument defines the type of the filesystem. The types of filesystems known to the system are defined in <b class="includes">&lt;<a class="link-includes">sys/mount.h</a>&gt;</b>. <i class="farg">data</i> is a pointer to a structure that contains the type specific arguments to mount. The currently supported types of filesystems and their type specific data are:<div class="spacer">
</div>
<span class="define">MOUNT_CD9660</span><pre style="margin-left: 5.00ex;" class="lit display">
struct iso_args { 
    char	*fspec;	    /* block special device to mount */ 
    struct	export_args export_info; 
    			    /* network export info */ 
    int	flags;		    /* mounting flags, see below */ 
}; 
#define	ISOFSMNT_NORRIP	  0x00000001 /* disable Rock Ridge Ext.*/ 
#define	ISOFSMNT_GENS	  0x00000002 /* enable generation numbers */ 
#define	ISOFSMNT_EXTATT	  0x00000004 /* enable extended attributes */ 
#define	ISOFSMNT_NOJOLIET 0x00000008 /* disable Joliet Ext.*/ 
#define	ISOFSMNT_SESS	  0x00000010 /* use iso_args.sess */</pre>
<div class="spacer">
</div>
<span class="define">MOUNT_FFS</span><pre style="margin-left: 5.00ex;" class="lit display">
struct ufs_args { 
      char      *fspec;             /* block special file to mount */ 
      struct    export_args export_info; 
      				    /* network export information */ 
};</pre>
<div class="spacer">
</div>
<span class="define">MOUNT_MFS</span><pre style="margin-left: 5.00ex;" class="lit display">
struct mfs_args { 
      char	*fspec;             /* name to export for statfs */ 
      struct	export_args export_info; 
      				    /* if we can export an MFS */ 
      caddr_t	base;               /* base of filesystem in mem */ 
      u_long	size;               /* size of filesystem */ 
};</pre>
<div class="spacer">
</div>
<span class="define">MOUNT_MSDOS</span><pre style="margin-left: 5.00ex;" class="lit display">
struct msdosfs_args { 
	char	*fspec;	   /* blocks special holding fs to mount */ 
	struct	export_args export_info; 
			   /* network export information */ 
	uid_t	uid;	   /* uid that owns msdosfs files */ 
	gid_t	gid;	   /* gid that owns msdosfs files */ 
	mode_t  mask;	   /* mask to be applied for msdosfs perms */ 
	int	flags;	   /* see below */ 
}; 
 
/* 
 * Msdosfs mount options: 
 */ 
#define	MSDOSFSMNT_SHORTNAME 1  /* Force old DOS short names only */ 
#define	MSDOSFSMNT_LONGNAME  2  /* Force Win'95 long names */ 
#define	MSDOSFSMNT_NOWIN95   4  /* Completely ignore Win95 entries */</pre>
<div class="spacer">
</div>
<span class="define">MOUNT_NFS</span><pre style="margin-left: 5.00ex;" class="lit display">
struct nfs_args { 
      int	version;	/* args structure version */ 
      struct sockaddr *addr;	/* file server address */ 
      int	addrlen;	/* length of address */ 
      int	sotype;       	/* Socket type */ 
      int	proto;        	/* and Protocol */ 
      u_char	*fh;          	/* File handle to be mounted */ 
      int	fhsize;       	/* Size, in bytes, of fh */ 
      int	flags;        	/* flags */ 
      int	wsize;        	/* write size in bytes */ 
      int	rsize;        	/* read size in bytes */ 
      int	readdirsize;  	/* readdir size in bytes */ 
      int	timeo;        	/* initial timeout in .1 secs */ 
      int	retrans;      	/* times to retry send */ 
      int	maxgrouplist; 	/* Max. size of group list */ 
      int	readahead;    	/* # of blocks to readahead */ 
      int	leaseterm;    	/* Term (sec) of lease */ 
      int	deadthresh;   	/* Retrans threshold */ 
      char	*hostname;    	/* server's name */ 
      int	acregmin;     /* Attr cache file recently modified */ 
      int	acregmax;     	/* ac file not recently modified */ 
      int	acdirmin;     	/* ac for dir recently modified */ 
      int	acdirmax;     /* ac for dir not recently modified */ 
};</pre>
<div class="spacer">
</div>
<span class="define">MOUNT_NTFS</span><pre style="margin-left: 5.00ex;" class="lit display">
struct ntfs_args { 
        char    *fspec;	/* block special device to mount */ 
        struct  export_args export_info; 
			/* network export information */ 
        uid_t   uid;	/* uid that owns ntfs files */ 
        gid_t   gid;	/* gid that owns ntfs files */ 
        mode_t  mode;	/* mask to be applied for ntfs perms */ 
        u_long  flag;	/* additional flags */ 
}; 
 
/* 
 * ntfs mount options: 
 */ 
#define     NTFS_MFLAG_CASEINS      0x00000001 
#define     NTFS_MFLAG_ALLNAMES     0x00000002</pre>
<div class="spacer">
</div>
<span class="define">MOUNT_UDF</span><pre style="margin-left: 5.00ex;" class="lit display">
struct udf_args { 
	char	*fspec;	/* block special device to mount */ 
};</pre>
<div class="spacer">
</div>
The <b class="fname">unmount</b>() function call disassociates the filesystem from the specified mount point <i class="farg">dir</i>.<div class="spacer">
</div>
The <i class="farg">flags</i> argument may specify <span class="define">MNT_FORCE</span> to specify that the filesystem should be forcibly unmounted even if files are still active. Active special devices continue to work, but any further accesses to any other active files result in errors even if the filesystem is later remounted.</div>
<div class="section">
<h1 id="x52455455524e2056414c554553">RETURN VALUES</h1> Upon successful completion, the value&#160;0 is returned; otherwise the value&#160;-1 is returned and the global variable <b class="var">errno</b> is set to indicate the error.</div>
<div class="section">
<h1 id="x4552524f5253">ERRORS</h1> <b class="fname">mount</b>() will fail when one of the following occurs:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">EPERM</span>]</dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
The caller is not the superuser.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">ENAMETOOLONG</span>]</dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
The path name exceeded <span class="define">{MNAMELEN}</span> characters.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">ELOOP</span>]</dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
Too many symbolic links were encountered in translating a pathname.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">ENOENT</span>]</dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
A component of <i class="farg">dir</i> does not exist.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">ENOTDIR</span>]</dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
A component of <i class="arg">name</i> is not a directory, or a path prefix of <i class="arg">special</i> is not a directory.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">EINVAL</span>]</dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
An argument given was invalid.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">EBUSY</span>]</dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
Another process currently holds a reference to <i class="farg">dir</i>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">EFAULT</span>]</dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
<i class="farg">dir</i> points outside the process's allocated address space.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">EOPNOTSUPP</span>]</dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
<i class="farg">type</i> is not supported by the kernel.</dd>
</dl>
<div class="spacer">
</div>
The following errors can occur for a &#8220;ufs&#8221; filesystem mount:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">ENODEV</span>]</dt>
<dd class="list-tag" style="margin-left: 9.00ex;">
A component of ufs_args <i class="farg">fspec</i> does not exist.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">ENOTBLK</span>]</dt>
<dd class="list-tag" style="margin-left: 9.00ex;">
<i class="farg">fspec</i> is not a block device.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">ENXIO</span>]</dt>
<dd class="list-tag" style="margin-left: 9.00ex;">
The major device number of <i class="farg">fspec</i> is out of range (this indicates no device driver exists for the associated hardware).</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">EBUSY</span>]</dt>
<dd class="list-tag" style="margin-left: 9.00ex;">
<i class="farg">fspec</i> is already mounted.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">EINVAL</span>]</dt>
<dd class="list-tag" style="margin-left: 9.00ex;">
The super block for the filesystem had a bad magic number, an out of range block size, or an invalid combination of flags.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">ENOMEM</span>]</dt>
<dd class="list-tag" style="margin-left: 9.00ex;">
Not enough memory was available to read the cylinder group information for the filesystem.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">EIO</span>]</dt>
<dd class="list-tag" style="margin-left: 9.00ex;">
An I/O error occurred while reading the super block or cylinder group information.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">EFAULT</span>]</dt>
<dd class="list-tag" style="margin-left: 9.00ex;">
<i class="farg">fspec</i> points outside the process's allocated address space.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">EROFS</span>]</dt>
<dd class="list-tag" style="margin-left: 9.00ex;">
The filesystem was not unmounted cleanly and <span class="define">MNT_FORCE</span> was not specified.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">EROFS</span>]</dt>
<dd class="list-tag" style="margin-left: 9.00ex;">
An attempt was made to mount a <span class="unix">4.2BSD</span> filesystem without the <span class="define">MNT_RDONLY</span> flag.</dd>
</dl>
<div class="spacer">
</div>
The following errors can occur for an <span class="emph">NFS</span> filesystem mount:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">ETIMEDOUT</span>]</dt>
<dd class="list-tag" style="margin-left: 11.00ex;">
<span class="emph">NFS</span> timed out trying to contact the server.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">EFAULT</span>]</dt>
<dd class="list-tag" style="margin-left: 11.00ex;">
Some part of the information described by nfs_args points outside the process's allocated address space.</dd>
</dl>
<div class="spacer">
</div>
The following errors can occur for a <span class="emph">mfs</span> filesystem mount:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">EMFILE</span>]</dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
No space remains in the mount table.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">EINVAL</span>]</dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
The super block for the filesystem had a bad magic number or an out of range block size.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">ENOMEM</span>]</dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
Not enough memory was available to read the cylinder group information for the filesystem.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">EIO</span>]</dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
A paging error occurred while reading the super block or cylinder group information.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">EFAULT</span>]</dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
<span class="emph">Name</span> points outside the process's allocated address space.</dd>
</dl>
<div class="spacer">
</div>
<b class="fname">unmount</b>() may fail with one of the following errors:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">EPERM</span>]</dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
The caller is not the superuser.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">ENOTDIR</span>]</dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
A component of the path is not a directory.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">EINVAL</span>]</dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
An argument given was invalid.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">ENAMETOOLONG</span>]</dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
A component of a pathname exceeded <span class="define">NAME_MAX</span> characters, or an entire pathname (including the terminating NUL) exceeded <span class="define">PATH_MAX</span> bytes.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">ELOOP</span>]</dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
Too many symbolic links were encountered in translating the pathname.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">EINVAL</span>]</dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
The requested directory is not in the mount table.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">EBUSY</span>]</dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
A process is holding a reference to a file located on the filesystem.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">EIO</span>]</dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
An I/O error occurred while writing cached filesystem information.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
[<span class="errno">EFAULT</span>]</dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
<i class="farg">dir</i> points outside the process's allocated address space.</dd>
</dl>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../html2/statfs.html">statfs(2)</a>, <a class="link-man" href="../html8/mount.html">mount(8)</a>, <a class="link-man" href="../html8/mount_mfs.html">mount_mfs(8)</a>, <a class="link-man" href="../html8/umount.html">umount(8)</a></div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> The <b class="fname">mount</b>() and <b class="fname">unmount</b>() system calls first appeared in Version&#160;1 AT&amp;T UNIX. The <i class="farg">flags</i> argument is supported by <b class="fname">mount</b>() since Version&#160;5 AT&amp;T UNIX and by <b class="fname">unmount</b>() since <span class="unix">4.3BSD-Reno</span>. The current calling convention involving <i class="farg">type</i> and <i class="farg">data</i> arguments was introduced by <span class="unix">4.3BSD-Reno</span> as well.</div>
<div class="section">
<h1 id="x42554753">BUGS</h1> Some of the error codes need translation to more obvious messages.</div>
</div>
</body>
</html>

