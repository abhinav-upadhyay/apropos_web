<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/posix/style.css" type="text/css" media="all"/>
<title>
NEWSYSLOG(8)</title>
</head>
<body>
<div class="mandoc">
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">newsyslog</b>, <b class="name">newsyslog.conf</b> &#8212; <span class="desc">rotate log files</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1><table class="synopsis">
<col style="width: 9.00ex;"/>
<col/>
<tbody>
<tr>
<td>
newsyslog</td>
<td>
[<span class="opt"><b class="flag">-Fmnrv</b></span>] [<span class="opt"><b class="flag">-a</b> <i class="arg">directory</i></span>] [<span class="opt"><b class="flag">-f</b> <i class="arg">config_file</i></span>] [<span class="opt"><i class="arg">log ...</i></span>]</td>
</tr>
</tbody>
</table>
</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> The <b class="name">newsyslog</b> utility rotates log files when they exceed a configurable size or age. The <i class="arg">log</i> file is renamed to <i class="file">log.0</i> and an empty file is created in its place. An archive of older logs may be kept: in order of increasing age, these files are named <i class="file">log.1</i>, <i class="file">log.2</i>, and so on. When their number exceeds a given limit, the oldest is removed. The archived logs may also be compressed.<div class="spacer">
</div>
The options are as follows:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-a</b> <i class="arg">directory</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Specify a <i class="arg">directory</i> into which archived log files will be written. If <i class="arg">directory</i> is a relative path, it is appended to the parent directory of each log and the archived log is stored in the result. If an absolute path is given, all archived logs are stored in the given <i class="arg">directory</i>. If <i class="arg">directory</i> does not exist for a specified log, it is ignored for that entry and the log is rotated as if the <b class="flag">-a</b> option was not specified.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-F</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Force <b class="name">newsyslog</b> to trim logs regardless of the size and/or age requirements specified in <i class="file">/etc/newsyslog.conf</i>. This option may be combined with the <b class="flag">-n</b> or <b class="flag">-v</b> flags to aid in debugging problems with <i class="file">/etc/newsyslog.conf</i>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-f</b> <i class="arg">config_file</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Use <i class="arg">config_file</i> instead of <i class="file">/etc/newsyslog.conf</i> for the configuration file.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-m</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Monitoring mode; only entries marked with an &#8216;M&#8217; in flags are processed. For each log file being monitored, any log output since the last time <b class="name">newsyslog</b> was run with the <b class="flag">-m</b> flag is mailed to the user listed in the monitor notification section.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-n</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Do not trim the logs, but instead print out what would be done if this option were not specified.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-r</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Removes the restriction that <b class="name">newsyslog</b> must be running as root. Note that in this mode <b class="name">newsyslog</b> will not be able to send a <span class="define">SIGHUP</span> signal to <a class="link-man" href="../html8/syslogd.html">syslogd(8)</a>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-v</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Place <b class="name">newsyslog</b> in verbose mode. In this mode it will print out each log and its reasons for either trimming that log or skipping it.</dd>
</dl>
<div class="spacer">
</div>
In the default system configuration, <b class="name">newsyslog</b> is run by <a class="link-man" href="../html8/cron.html">cron(8)</a>, but it may also be run manually. If one or more <i class="arg">log</i> files are specified on the command line, only the specified files are rotated. Note that each <i class="arg">log</i> specified must have an entry in <i class="file">/etc/newsyslog.conf</i>.<div class="spacer">
</div>
A log can be archived because of two reasons: The log file can have grown bigger than a preset size in kilobytes, or a preset number of hours may have elapsed since the last log archive. The granularity of <b class="name">newsyslog</b> is dependent on how often it is scheduled to run in <a class="link-man" href="../html8/cron.html">cron(8)</a>. Since the program is quite fast, it may be scheduled to run every hour without any ill effects.<div class="spacer">
</div>
When starting up, <b class="name">newsyslog</b> reads in a configuration file to determine which logs should be looked at. By default, this configuration file is <i class="file">/etc/newsyslog.conf</i>. Each line of the file contains information about a particular log file that should be handled by <b class="name">newsyslog</b>. Each line has five mandatory fields and up to three optional fields, with whitespace separating each field. Blank lines or lines beginning with a hash mark (&#8216;<code class="lit">#</code>&#8217;) are ignored. The fields of the configuration file are as follows:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="arg">logfile_name</i></dt>
<dd class="list-tag" style="margin-left: 16.00ex;">
The full pathname of the system log file to be archived.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="arg">owner:group</i></dt>
<dd class="list-tag" style="margin-left: 16.00ex;">
This optional field specifies the owner and group for the archive file. The &#8216;<code class="lit">:</code>&#8217; is essential, even if the <i class="arg">owner</i> or <i class="arg">group</i> field is left blank. The fields may be numeric, or a name which is looked up in the system password and group databases. For backwards compatibility, a &#8216;<code class="lit">.</code>&#8217; may be used instead of a &#8216;<code class="lit">:</code>&#8217;. If either <i class="arg">owner</i> or <i class="arg">group</i> is not specified, the owner and/or group of the existing log file is used.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="arg">mode</i></dt>
<dd class="list-tag" style="margin-left: 16.00ex;">
File mode (in octal) to use for created log files and archives.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="arg">count</i></dt>
<dd class="list-tag" style="margin-left: 16.00ex;">
The number of archives to be kept besides the log file itself.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="arg">size</i></dt>
<dd class="list-tag" style="margin-left: 16.00ex;">
When the size of the log file (in kilobytes) reaches this point, the log file is trimmed as described above. If this field is replaced by an &#8216;<code class="lit">*</code>&#8217;, or set to &#8216;<code class="lit">0</code>&#8217;, then the size of the log file is not taken into account when determining when to trim the log file. By default, files smaller than 256 bytes are not rotated unless the &#8216;B&#8217; (binary) flag is set or the <b class="flag">-F</b> option is specified. This prevents <b class="name">newsyslog</b> from rotating files consisting solely of a message indicating that the log file has been turned over.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="arg">when</i></dt>
<dd class="list-tag" style="margin-left: 16.00ex;">
The <i class="arg">when</i> field can consist of an interval, a specific time, or both. If the <i class="arg">when</i> field consists of an asterisk (&#8216;<code class="lit">*</code>&#8217;), log rotation will depend only on the contents of the <i class="arg">size</i> field. Otherwise, the <i class="arg">when</i> field consists of an optional interval in hours, possibly followed by an &#8216;<code class="lit">@</code>&#8217;-sign and a time in a restricted ISO 8601 format or by a &#8216;<code class="lit">$</code>&#8217;-sign and a time specification for logfile rotation at a fixed time once per day, per week or per month.<div class="spacer">
</div>
If a time is specified, the log file will only be trimmed if <b class="name">newsyslog</b> is run within one hour of the specified time. If an interval is specified, the log file will be trimmed if that many hours have passed since the last rotation. When both a time and an interval are specified, both conditions must be satisfied for the rotation to take place.<div class="spacer">
</div>
There is no provision for the specification of a time zone. There is little point in specifying an explicit minutes or seconds component in the current implementation, since the only comparison is &#8216;within the hour&#8217;.<div class="spacer">
</div>
<span class="symb">ISO 8601 restricted time format:</span> The lead-in character for a restricted ISO 8601 time is an &#8216;<code class="lit">@</code>&#8217;-sign. The particular format of the time in restricted ISO 8601 is: [<span class="opt">[<span class="opt">[<span class="opt">[<span class="opt">[<span class="opt"><b class="var">cc</b></span>]<b class="var">yy</b></span>]<b class="var">mm</b></span>]<b class="var">dd</b></span>][<span class="opt"><b class="var">T</b>[<span class="opt"><b class="var">HH</b>[<span class="opt"><b class="var">MM</b>[<span class="opt"><b class="var">SS</b></span>]</span>]</span>]</span>]</span>]. Optional date fields default to the appropriate component of the current date; optional time fields default to midnight. For example, if today is January 22, 1999, the following date specifications are all equivalent:<div class="spacer">
</div>
<ul style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 6.00ex;" class="list list-item">
<li class="list-item" style="margin-top: 0.00em;">
&#8216;<code class="lit">19990122T000000</code>&#8217;</li>
<li class="list-item" style="margin-top: 0.00em;">
&#8216;<code class="lit">990122T000000</code>&#8217;</li>
<li class="list-item" style="margin-top: 0.00em;">
&#8216;<code class="lit">0122T000000</code>&#8217;</li>
<li class="list-item" style="margin-top: 0.00em;">
&#8216;<code class="lit">22T000000</code>&#8217;</li>
<li class="list-item" style="margin-top: 0.00em;">
&#8216;<code class="lit">T000000</code>&#8217;</li>
<li class="list-item" style="margin-top: 0.00em;">
&#8216;<code class="lit">T0000</code>&#8217;</li>
<li class="list-item" style="margin-top: 0.00em;">
&#8216;<code class="lit">T00</code>&#8217;</li>
<li class="list-item" style="margin-top: 0.00em;">
&#8216;<code class="lit">22T</code>&#8217;</li>
<li class="list-item" style="margin-top: 0.00em;">
&#8216;<code class="lit">T</code>&#8217;</li>
<li class="list-item" style="margin-top: 0.00em;">
&#8216;<code class="lit"></code>&#8217;</li>
</ul>
<div class="spacer">
</div>
<span class="symb">Day, week and month time format:</span> The lead-in character for day, week and month specification is a dollar sign ($). The particular format of day, week and month specification is: [<span class="opt"><code class="lit">D</code><i class="arg">HH</i></span>], [<span class="opt"><code class="lit">W</code><i class="arg">w</i>[<span class="opt"><code class="lit">D</code><i class="arg">HH</i></span>]</span>], and [<span class="opt"><code class="lit">M</code><i class="arg">dd</i>[<span class="opt"><code class="lit">D</code><i class="arg">HH</i></span>]</span>], respectively. Optional time fields default to midnight. The ranges for day and hour specifications are:<div class="spacer">
</div>
<dl style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 6.00ex;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="arg">HH</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
hours, range 0 ... 23</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="arg">w</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
day of week, range 0 ... 6, 0 = Sunday</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="arg">dd</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
day of month, range 1 ... 31, or the letter <span class="emph">L</span> or <span class="emph">l</span> to specify the last day of the month.</dd>
</dl>
<div class="spacer">
</div>
<span class="symb">Some examples:</span><dl style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 6.00ex;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
<code class="lit">$D0</code></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
rotate every night at midnight (same as <code class="lit">@T00</code>)</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<code class="lit">$D23</code></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
rotate every day at 23:00 hr (same as <code class="lit">@T23</code>)</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<code class="lit">$W0D23</code></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
rotate every week on Sunday at 23:00 hr</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<code class="lit">$W5D16</code></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
rotate every week on Friday at 16:00 hr</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<code class="lit">$M1D0</code></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
rotate on the first day of every month at midnight (i.e., the start of the day; same as <code class="lit">@01T00</code>)</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<code class="lit">$M5D6</code></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
rotate on every 5th day of the month at 6:00 hr (same as <code class="lit">@05T06</code>)</dd>
</dl>
</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="arg">flags</i></dt>
<dd class="list-tag" style="margin-left: 16.00ex;">
The optional <i class="arg">flags</i> field specifies if the archives should have any special processing done to the archived log files. The &#8216;Z&#8217; flag will make the archive files compressed to save space using <a class="link-man" href="../html1/gzip.html">gzip(1)</a> or <a class="link-man" href="../html1/compress.html">compress(1)</a>, depending on compilation options. The &#8216;B&#8217; flag means that the file is a binary file, and so the ASCII message which <b class="name">newsyslog</b> inserts to indicate the fact that the logs have been turned over should not be included. The &#8216;M&#8217; flag marks this entry as a monitored log file. The &#8216;F&#8217; flag specifies that symbolic links should be followed.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="arg">monitor</i></dt>
<dd class="list-tag" style="margin-left: 16.00ex;">
Specify the username (or email address) that should receive notification messages if this is a monitored log file. Notification messages are sent as email; the operator deserves what they get if they mark the mail log file as monitored. This field is only valid when the &#8216;M&#8217; flag is set.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="arg">pid_file</i></dt>
<dd class="list-tag" style="margin-left: 16.00ex;">
This optional field specifies a file containing the PID of a process to send a signal (usually <span class="define">SIGHUP</span>) to instead of <i class="file">/var/run/syslog.pid</i>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="arg">signal</i></dt>
<dd class="list-tag" style="margin-left: 16.00ex;">
Specify the signal to send to the process instead of <span class="define">SIGHUP</span>. Signal names must start with &#8220;SIG&#8221; and be the signal name, not the number, e.g., <span class="define">SIGUSR1</span>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="arg">command</i></dt>
<dd class="list-tag" style="margin-left: 16.00ex;">
This optional field specifies a command to run instead of sending a signal to the process. The command must be enclosed in double quotes (&#8216;<code class="lit">&quot;</code>&#8217;). The empty string, &#8216;<code class="lit">&quot;&quot;</code>&#8217;, can be used to prevent <b class="name">newsyslog</b> from sending a signal or running a command. You cannot specify both a command and a PID file. <span class="emph">NOTE:</span> If you specify a command to be run, <b class="name">newsyslog</b> will not send a <span class="define">SIGHUP to</span> <a class="link-man" href="../html8/syslogd.html">syslogd(8)</a>.</dd>
</dl>
</div>
<div class="section">
<h1 id="x46494c4553">FILES</h1><dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="file">/etc/newsyslog.conf</i></dt>
<dd class="list-tag" style="margin-left: 19.00ex;">
default configuration file</dd>
</dl>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../html1/compress.html">compress(1)</a>, <a class="link-man" href="../html1/gzip.html">gzip(1)</a>, <a class="link-man" href="../html3/syslog.html">syslog(3)</a>, <a class="link-man" href="../html8/syslogd.html">syslogd(8)</a></div>
<div class="section">
<h1 id="x415554484f5253">AUTHORS</h1> <span class="author">Theodore Ts'o</span>, MIT Project Athena<div style="height: 0.00em;">
&#160;</div>
Copyright 1987, Massachusetts Institute of Technology</div>
</div>
</body>
</html>

