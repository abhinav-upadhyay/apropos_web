<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/posix/style.css" type="text/css" media="all"/>
<title>
NEWFS_EXT2FS(8)</title>
</head>
<body>
<div class="mandoc">
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">newfs_ext2fs</b> &#8212; <span class="desc">construct a new ext2 file system</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1><table class="synopsis">
<col style="width: 12.00ex;"/>
<col/>
<tbody>
<tr>
<td>
newfs_ext2fs</td>
<td>
[<span class="opt"><b class="flag">-FINqZ</b></span>] [<span class="opt"><b class="flag">-b</b>&#160;<i class="arg">block-size</i></span>] [<span class="opt"><b class="flag">-D</b>&#160;<i class="arg">inodesize</i></span>] [<span class="opt"><b class="flag">-f</b>&#160;<i class="arg">frag-size</i></span>] [<span class="opt"><b class="flag">-i</b>&#160;<i class="arg">bytes-per-inode</i></span>] [<span class="opt"><b class="flag">-m</b>&#160;<i class="arg">free-space</i></span>] [<span class="opt"><b class="flag">-n</b>&#160;<i class="arg">inodes</i></span>] [<span class="opt"><b class="flag">-O</b>&#160;<i class="arg">filesystem-format</i></span>] [<span class="opt"><b class="flag">-S</b>&#160;<i class="arg">sector-size</i></span>] [<span class="opt"><b class="flag">-s</b>&#160;<i class="arg">size</i></span>] [<span class="opt"><b class="flag">-V</b>&#160;<i class="arg">verbose</i></span>] [<span class="opt"><b class="flag">-v</b>&#160;<i class="arg">volname</i></span>]&#160;<i class="arg">special</i></td>
</tr>
</tbody>
</table>
</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> <b class="name">newfs_ext2fs</b> is used to initialize and clear ext2 file systems before first use. Before running <b class="name">newfs_ext2fs</b> the disk must be labeled using <a class="link-man" href="../html8/disklabel.html">disklabel(8)</a>. <b class="name">newfs_ext2fs</b> builds a file system on the specified <i class="arg">special</i> device, basing its defaults on the information in the disk label. Typically the defaults are reasonable, although <b class="name">newfs_ext2fs</b> has numerous options to allow the defaults to be selectively overridden.<div class="spacer">
</div>
The <i class="arg">special</i> file should be a raw device, for example <i class="file">/dev/rsd0a</i>; if a relative path like <i class="file">sd0a</i> is specified, the corresponding raw device is used.<div class="spacer">
</div>
Options with numeric arguments may contain an optional (case-insensitive) suffix:<div class="spacer">
</div>
<dl style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 6.00ex;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
b</dt>
<dd class="list-tag" style="margin-left: 3.00ex;">
Bytes; causes no modification. (Default)</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
k</dt>
<dd class="list-tag" style="margin-left: 3.00ex;">
Kilo; multiply the argument by 1024.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
m</dt>
<dd class="list-tag" style="margin-left: 3.00ex;">
Mega; multiply the argument by 1048576.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
g</dt>
<dd class="list-tag" style="margin-left: 3.00ex;">
Giga; multiply the argument by 1073741824.</dd>
</dl>
<div class="spacer">
</div>
The following options define the general layout policies.<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-b</b> <i class="arg">block-size</i></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
The block size of the file system, in bytes. It must be a power of two. The smallest allowable size is 1024 bytes. The default size depends upon the size of the file system:<div class="spacer">
</div>
<dl style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 6.00ex;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
<span class="symb">file system size</span></dt>
<dd class="list-tag" style="margin-left: 16.00ex;">
<i class="arg">block-size</i></dd>
<dt class="list-tag" style="margin-top: 0.00em;">
&lt;= 512 MB</dt>
<dd class="list-tag" style="margin-left: 16.00ex;">
1 KB</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
&gt; 512 MB</dt>
<dd class="list-tag" style="margin-left: 16.00ex;">
4 KB</dd>
</dl>
</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-D</b> <i class="arg">inodesize</i></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
Set the inode size. Defaults to 128, and can also be set to 256 for compatibility with ext4.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-F</b></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
Create a file system image in <i class="arg">special</i>. The file system size needs to be specified with &#8220;<b class="flag">-s</b> <i class="arg">size</i>&#8221;. No attempts to use or update the disk label will be made.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-f</b> <i class="arg">frag-size</i></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
The fragment size of the file system in bytes. It must be the same as the blocksize, because the current ext2fs implementation doesn't support fragmentation.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-I</b></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
Do not require that the file system type listed in the disk label is &#8216;<code class="lit">ext2fs</code>&#8217;.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-i</b> <i class="arg">bytes-per-inode</i></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
This specifies the density of inodes in the file system. If fewer inodes are desired, a larger number should be used; to create more inodes a smaller number should be given.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-m</b> <i class="arg">free-space</i></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
The percentage of space reserved from normal users; the minimum free space threshold. The default value used is 5%.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-N</b></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
Causes the file system parameters to be printed out without really creating the file system.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-n</b> <i class="arg">inodes</i></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
This specifies the number of inodes for the file system. If both <b class="flag">-i</b> and <b class="flag">-n</b> are specified then <b class="flag">-n</b> takes precedence. The default number of inodes is calculated from a number of blocks in the file system.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-O</b> <i class="arg">filesystem-format</i></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
Select the filesystem-format.<div class="spacer">
</div>
<dl style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 6.00ex;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
0</dt>
<dd class="list-tag" style="margin-left: 3.00ex;">
&#8216;<code class="lit">GOOD_OLD_REV</code>&#8217;; this option is primarily used to build root file systems that can be understood by old or dumb firmware for bootstrap. (default)</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
1</dt>
<dd class="list-tag" style="margin-left: 3.00ex;">
&#8216;<code class="lit">DYNAMIC_REV</code>&#8217;; various extended (and sometimes incompatible) features are enabled (though not all features are supported on <span class="unix">OpenBSD</span>). Currently only the following features are supported:<div class="spacer">
</div>
<dl style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 6.00ex;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
RESIZE</dt>
<dd class="list-tag" style="margin-left: 11.00ex;">
Prepare some reserved structures which enable future file system resizing.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
FTYPE</dt>
<dd class="list-tag" style="margin-left: 11.00ex;">
Store file types in directory entries to improve performance.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
SPARSESUPER</dt>
<dd class="list-tag" style="margin-left: 11.00ex;">
Prepare superblock backups for the <a class="link-man" href="../html8/fsck_ext2fs.html">fsck_ext2fs(8)</a> utility on not all but sparse block groups.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
LARGEFILE</dt>
<dd class="list-tag" style="margin-left: 11.00ex;">
Enable files larger than 2G bytes.</dd>
</dl>
</dd>
</dl>
</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-q</b></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
Operate in quiet mode. Equivalent to <b class="flag">-V</b> <i class="arg">1</i>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-s</b> <i class="arg">size</i></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
The size of the file system in sectors. An &#8216;s&#8217; suffix will be interpreted as the number of sectors (the default). All other suffixes are interpreted as per other numeric arguments, except that the number is converted into sectors by dividing by the sector size (as specified by <b class="flag">-S</b> <i class="arg">secsize</i>) after suffix interpretation.<div class="spacer">
</div>
If no <b class="flag">-s</b> <i class="arg">size</i> is specified then the filesystem size defaults to that of the partition or, if <b class="flag">-F</b> is specified, the existing file.<div class="spacer">
</div>
If <i class="arg">size</i> is negative the specified size is subtracted from the default size (reserving space at the end of the partition).</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-V</b> <i class="arg">verbose</i></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
This controls the amount of information written to stdout:<div class="spacer">
</div>
<dl style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 6.00ex;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
0</dt>
<dd class="list-tag" style="margin-left: 3.00ex;">
No output.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
1</dt>
<dd class="list-tag" style="margin-left: 3.00ex;">
Overall size and cylinder group details.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
2</dt>
<dd class="list-tag" style="margin-left: 3.00ex;">
A progress bar (dots ending at right hand margin).</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
3</dt>
<dd class="list-tag" style="margin-left: 3.00ex;">
The first few super-block backup sector numbers are displayed before the progress bar.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
4</dt>
<dd class="list-tag" style="margin-left: 3.00ex;">
All the super-block backup sector numbers are displayed (no progress bar).</dd>
</dl>
<div class="spacer">
</div>
The default is 4. If <b class="flag">-N</b> is specified <b class="name">newfs_ext2fs</b> stops before outputting the progress bar.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-v</b> <i class="arg">volname</i></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
This specifies a volume name for the file system.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-Z</b></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
Pre-zeros the file system image created with <b class="flag">-F</b>. This is necessary if the image is to be used by <a class="link-man" href="../html4/vnd.html">vnd(4)</a> (which doesn't support file systems with &#8216;holes&#8217;).</dd>
</dl>
<div class="spacer">
</div>
The following option overrides the standard sizes for the disk geometry. The default value is taken from the disk label. Changing this default is useful only when using <b class="name">newfs_ext2fs</b> to build a file system whose raw image will eventually be used on a different type of disk than the one on which it is initially created (for example on a write-once disk). Note that changing this value from its default will make it impossible for <a class="link-man" href="../html8/fsck_ext2fs.html">fsck_ext2fs(8)</a> to find the alternative superblocks if the standard superblock is lost.<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-S</b> <i class="arg">sector-size</i></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
The size of a sector in bytes (almost never anything but 512). Defaults to 512.</dd>
</dl>
</div>
<div class="section">
<h1 id="x4e4f544553">NOTES</h1> There is no option to specify the metadata byte order on the file system to be created because the native ext2 file system is always little endian even on big endian hosts.<div class="spacer">
</div>
The file system is created with &#8216;random&#8217; inode generation numbers to improve NFS security.<div class="spacer">
</div>
The owner and group IDs of the root node and reserved blocks of the new file system are set to the effective UID and GID of the user initializing the file system.<div class="spacer">
</div>
For the <b class="name">newfs_ext2fs</b> command to succeed, the disk label should first be updated such that the fstype field for the partition is set to &#8216;<code class="lit">ext2fs</code>&#8217;, unless <b class="flag">-F</b> or <b class="flag">-I</b> is used.<div class="spacer">
</div>
The partition size is found using <a class="link-man" href="../html2/fstat.html">fstat(2)</a>, not by inspecting the disk label. The block size and fragment size will be written back to the disk label only if the last character of <i class="arg">special</i> references the same partition as the minor device number.</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../html2/fstat.html">fstat(2)</a>, <a class="link-man" href="../html5/disklabel.html">disklabel(5)</a>, <a class="link-man" href="../html5/disktab.html">disktab(5)</a>, <a class="link-man" href="../html5/fs.html">fs(5)</a>, <a class="link-man" href="../html8/disklabel.html">disklabel(8)</a>, <a class="link-man" href="../html8/fsck_ext2fs.html">fsck_ext2fs(8)</a>, <a class="link-man" href="../html8/mount.html">mount(8)</a>, <a class="link-man" href="../html8/mount_ext2fs.html">mount_ext2fs(8)</a>, <a class="link-man" href="../html8/newfs.html">newfs(8)</a><div class="spacer">
</div>
<span class="ref"><span class="ref-auth">Remy Card</span>, <span class="ref-auth">Theodore Ts'o</span>, and <span class="ref-auth">Stephen Tweedie</span>, <span class="ref-title">Design and Implementation of the Second Extended Filesystem</span>, <i class="ref-jrnl">The Proceedings of the First Dutch International Symposium on Linux</i>, <a class="link-ref" href="http://e2fsprogs.sourceforge.net/ext2intro.html">http://e2fsprogs.sourceforge.net/ext2intro.html</a>.</span></div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> The <b class="name">newfs_ext2fs</b> command first appeared in <span class="unix">OpenBSD&#160;4.7</span>.</div>
<div class="section">
<h1 id="x415554484f5253">AUTHORS</h1> The <b class="name">newfs_ext2fs</b> command was written by <span class="author">Izumi Tsutsui</span> &lt;<a class="link-mail" href="mailto:tsutsui@NetBSD.org">tsutsui@NetBSD.org</a>&gt;.</div>
<div class="section">
<h1 id="x42554753">BUGS</h1> The <b class="name">newfs_ext2fs</b> command is still experimental and there are few sanity checks.<div class="spacer">
</div>
The <b class="name">newfs_ext2fs</b> command doesn't have options to specify each REV1 file system feature independently.<div class="spacer">
</div>
The <b class="name">newfs_ext2fs</b> command doesn't support the bad block list accounted by the bad blocks inode.<div class="spacer">
</div>
Many newer ext2 file system features (especially journaling) are not supported yet.<div class="spacer">
</div>
Some features in file systems created by the <b class="name">newfs_ext2fs</b> command might not be recognized properly by the <a class="link-man" href="../html8/fsck_ext2fs.html">fsck_ext2fs(8)</a> utility.<div class="spacer">
</div>
There is no native tool in the <span class="unix">OpenBSD</span> distribution for resizing ext2 file systems yet.</div>
</div>
</body>
</html>

