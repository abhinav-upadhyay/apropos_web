<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/posix/style.css" type="text/css" media="all"/>
<title>
TRPT(8)</title>
</head>
<body>
<div class="mandoc">
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">trpt</b> &#8212; <span class="desc">transliterate protocol trace</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1><table class="synopsis">
<col style="width: 4.00ex;"/>
<col/>
<tbody>
<tr>
<td>
trpt</td>
<td>
[<span class="opt"><b class="flag">-afjst</b></span>] [<span class="opt"><b class="flag">-M</b> <i class="arg">core</i></span>] [<span class="opt"><b class="flag">-N</b> <i class="arg">system</i></span>] [<span class="opt"><b class="flag">-p</b> <i class="arg">hex-address</i></span>]</td>
</tr>
</tbody>
</table>
</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> <b class="name">trpt</b> interrogates the buffer of TCP trace records created when a socket is marked for &#8220;debugging&#8221; (see <a class="link-man" href="../html2/setsockopt.html">setsockopt(2)</a>), and prints a readable description of these records. When no options are supplied, <b class="name">trpt</b> prints all the trace records found in the system grouped according to TCP connection protocol control block (PCB).<div class="spacer">
</div>
The options are as follows:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-a</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
In addition to the normal output, print the values of the source and destination addresses for each packet recorded.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-f</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Follow the trace as it occurs, waiting a short time for additional records each time the end of the log is reached.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-j</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Just give a list of the protocol control block addresses for which there are trace records.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-M</b> <i class="arg">core</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Extract values associated with the name list from <i class="file">core</i> instead of the running kernel.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-N</b> <i class="arg">system</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Extract the name list from <i class="file">system</i> instead of the running kernel.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-p</b> <i class="arg">hex-address</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Show only trace records associated with the protocol control block at the given address <i class="arg">hex-address</i>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-s</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
In addition to the normal output, print a detailed description of the packet sequencing information.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-t</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
In addition to the normal output, print the values for all timers at each point in the trace.</dd>
</dl>
<div class="spacer">
</div>
The recommended use of <b class="name">trpt</b> is as follows. Isolate the problem and enable debugging on the socket(s) involved in the connection. Find the address of the protocol control blocks associated with the sockets using the <b class="flag">-A</b> option to <a class="link-man" href="../html1/netstat.html">netstat(1)</a>. Then run <b class="name">trpt</b> with the <b class="flag">-p</b> option, supplying the associated protocol control block addresses. The <b class="flag">-f</b> option can be used to follow the trace log once the trace is located. If there are many sockets using the debugging option, the <b class="flag">-j</b> option may be useful in checking to see if any trace records are present for the socket in question.</div>
<div class="section">
<h1 id="x444941474e4f5354494353">DIAGNOSTICS</h1><dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">no namelist</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
When the system image doesn't contain the proper symbols to find the trace buffer; others which should be self explanatory.</dd>
</dl>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../html1/netstat.html">netstat(1)</a>, <a class="link-man" href="../html2/setsockopt.html">setsockopt(2)</a></div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> The <b class="name">trpt</b> command appeared in <span class="unix">4.2BSD</span>.</div>
<div class="section">
<h1 id="x42554753">BUGS</h1> Should also print the data for each input or output, but this is not saved in the trace record.<div class="spacer">
</div>
The output format is inscrutable and should be described here.</div>
</div>
</body>
</html>

