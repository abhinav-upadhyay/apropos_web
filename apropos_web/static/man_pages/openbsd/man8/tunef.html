<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/posix/style.css" type="text/css" media="all"/>
<title>
TUNEFS(8)</title>
</head>
<body>
<div class="mandoc">
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">tunefs</b> &#8212; <span class="desc">tune up an existing file system</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1><table class="synopsis">
<col style="width: 6.00ex;"/>
<col/>
<tbody>
<tr>
<td>
tunefs</td>
<td>
[<span class="opt"><b class="flag">-AFN</b></span>] [<span class="opt"><b class="flag">-e</b>&#160;<i class="arg">maxbpg</i></span>] [<span class="opt"><b class="flag">-g</b>&#160;<i class="arg">avgfilesize</i></span>] [<span class="opt"><b class="flag">-h</b>&#160;<i class="arg">avgfpdir</i></span>] [<span class="opt"><b class="flag">-m</b>&#160;<i class="arg">minfree</i></span>] [<span class="opt"><b class="flag">-o</b>&#160;<i class="arg">optimize_preference</i></span>]&#160;<i class="arg">special</i> |&#160;<i class="arg">filesys</i></td>
</tr>
</tbody>
</table>
</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> <b class="name">tunefs</b> is designed to change the dynamic parameters of a file system which affect the layout policies.<div class="spacer">
</div>
The options are as follows:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-A</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Cause the values to be updated in all the alternate superblocks instead of just the standard superblock. If this option is not used, then use of a backup superblock by <a class="link-man" href="../html8/fsck.html">fsck(8)</a> will lose anything changed by <b class="name">tunefs</b>. <b class="flag">-A</b> is ignored when <b class="flag">-N</b> is specified.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-e</b> <i class="arg">maxbpg</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
This indicates the maximum number of blocks any single file can allocate out of a cylinder group before it is forced to begin allocating blocks from another cylinder group. Typically this value is set to about one quarter of the total blocks in a cylinder group. The intent is to prevent any single file from using up all the blocks in a single cylinder group, thus degrading access times for all files subsequently allocated in that cylinder group. The effect of this limit is to cause big files to do long seeks more frequently than if they were allowed to allocate all the blocks in a cylinder group before seeking elsewhere. For file systems with exclusively large files, this parameter should be set higher.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-F</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Indicates that <i class="arg">special</i> is a file system image, rather than a device name or file system mount point. <i class="arg">special</i> will be accessed &#8216;as-is&#8217;.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-g</b> <i class="arg">avgfilesize</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
This specifies the expected average file size.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-h</b> <i class="arg">avgfpdir</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
This specifies the expected number of files per directory.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-m</b> <i class="arg">minfree</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
This value specifies the percentage of space held back from normal users; the minimum free space threshold. The default value is set during creation of the filesystem; see <a class="link-man" href="../html8/newfs.html">newfs(8)</a>. This value can be set to zero, however up to a factor of three in throughput will be lost over the performance obtained at a 5% threshold. Note that if the value is raised above the current usage level, users will be unable to allocate files until enough files have been deleted to get under the higher threshold.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-N</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Display all the settable options (after any changes from the tuning options) but do not cause any of them to be changed.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-o</b> <i class="arg">optimize_preference</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
The file system can either try to minimize the time spent allocating blocks, or it can attempt to minimize the space fragmentation on the disk. If the value of <i class="arg">minfree</i> (see above) is less than 5%, then the file system should optimize for space to avoid running out of full sized blocks. For values of <i class="arg">minfree</i> greater than or equal to 5%, fragmentation is unlikely to be problematical, and the file system can be optimized for time.<div class="spacer">
</div>
<i class="arg">optimize_preference</i> can be specified as either <code class="lit">space</code> or <code class="lit">time</code>.</dd>
</dl>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../html5/fs.html">fs(5)</a>, <a class="link-man" href="../html8/dumpfs.html">dumpfs(8)</a>, <a class="link-man" href="../html8/fsck_ffs.html">fsck_ffs(8)</a>, <a class="link-man" href="../html8/growfs.html">growfs(8)</a>, <a class="link-man" href="../html8/newfs.html">newfs(8)</a><div class="spacer">
</div>
<span class="ref"><span class="ref-auth">M. McKusick</span>, <span class="ref-auth">W. Joy</span>, <span class="ref-auth">S. Leffler</span>, and <span class="ref-auth">R. Fabry</span>, <span class="ref-title">A Fast File System for UNIX</span>, <i class="ref-jrnl">ACM Transactions on Computer Systems 2</i>, <span class="ref-num">3</span>, <span class="ref-page">pp 181-197</span>, <span class="ref-date">August 1984</span>.</span></div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> The <b class="name">tunefs</b> command appeared in <span class="unix">4.2BSD</span>.</div>
<div class="section">
<h1 id="x42554753">BUGS</h1> This program should work on mounted and active file systems. Because the super-block is not kept in the buffer cache, the changes will only take effect if the program is run on unmounted file systems. To change the root file system, the system must be rebooted after the file system is tuned.<div class="spacer">
</div>
You can tune a file system, but you can't tune a fish.</div>
</div>
</body>
</html>

