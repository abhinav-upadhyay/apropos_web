<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/posix/style.css" type="text/css" media="all"/>
<title>
ATACTL(8)</title>
</head>
<body>
<div class="mandoc">
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">atactl</b> &#8212; <span class="desc">a program to manipulate ATA (IDE) devices</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1><table class="synopsis">
<col style="width: 6.00ex;"/>
<col/>
<tbody>
<tr>
<td>
atactl</td>
<td>
<i class="arg">device</i> [<span class="opt"><i class="arg">command</i> [<span class="opt"><i class="arg">arg ...</i></span>]</span>]</td>
</tr>
</tbody>
</table>
</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> <b class="name">atactl</b> allows a user or system administrator to issue commands to and otherwise control devices which reside on standard IDE and ATA controllers. It is used by specifying a device to manipulate, a command to perform, and any arguments the command may require.<div class="spacer">
</div>
<b class="name">atactl</b> supports the following commands: acousticdisable, acousticset, apmdisable, apmset, checkpower, dump, identify (the default), idle, poddisable, podenable, puisdisable, puisenable, puisspinup, readaheaddisable, readaheadenable, readattr, secdisablepass, secerase, secfreeze, secsetpass, secunlock, setidle, setstandby, sleep, smartautosave, smartdisable, smartenable, smartoffline, smartread, smartreadlog, smartstatus, standby, writecachedisable, and writecacheenable.<div class="spacer">
</div>
Support for Self-Monitoring, Analysis, and Reporting Technology (SMART) functionality is indicated by the device with &#8216;SMART feature set&#8217; in the output of the <code class="lit">identify</code> command. SMART commands and the <code class="lit">readattr</code> command are for experts only.<div class="spacer">
</div>
Support for Security Mode functionality is indicated by the device with &#8216;Security Mode feature set&#8217; in the output of the <code class="lit">identify</code> command. <span class="emph">Be very careful</span> while playing with these commands: loss of the user and master passwords for the device will result in an inaccessible device.<div class="spacer">
</div>
A full description of the commands follows:<div class="spacer">
</div>
<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
<code class="lit">acousticdisable</code></dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
Disables support for automatic acoustic management on the specified device. Note that devices supporting automatic acoustic management may refuse to disable it, resulting in an &#8216;ATA device returned Aborted Command&#8217; warning.<div class="spacer">
</div>
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<code class="lit">acousticset</code> <i class="arg">acoustic-management-level</i></dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
Enables and sets the automatic acoustic management level to the requested level on the specified device (if supported). Device performance may increase with increasing automatic acoustic management levels at the cost of potentially generating more noise and requiring more power. Valid values are 0 up to and including 126. Support for automatic acoustic management is indicated by the device with &#8216;Automatic Acoustic Management feature set&#8217; in the output of the <code class="lit">identify</code> command.<div class="spacer">
</div>
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<code class="lit">apmdisable</code></dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
Disables support for advanced power management on the specified device. Note that devices supporting advanced power management may refuse to disable it, resulting in an &#8216;ATA device returned Aborted Command&#8217; warning.<div class="spacer">
</div>
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<code class="lit">apmset</code> <i class="arg">power-management-level</i></dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
Enables and sets the advanced power management level to the requested level on the specified device (if supported). Device performance may increase with increasing power management levels at the cost of potentially requiring more power. Values up to and including 126 allow the device to go into standby mode and spin-down the disk. This <span class="emph">may cause disk time-outs</span> and is therefore <span class="emph">not</span> recommended. These values are more suitable optimization for low power usage on infrequently used devices. Values 127 up to and including 253 do not allow the device to go to standby mode and are more suitable for optimization for performance. Support for advanced power management is indicated by the device with &#8216;Advanced Power Management feature set&#8217; in the output of the <code class="lit">identify</code> command.<div class="spacer">
</div>
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<code class="lit">checkpower</code></dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
Will print out if the device is in Active, Idle, or Standby power management mode.<div class="spacer">
</div>
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<code class="lit">dump</code></dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
Extracts the records about issued ATA commands from the log buffer. The log buffer is cleared after extraction.<div class="spacer">
</div>
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<code class="lit">identify</code></dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
Identify the specified device, displaying the device's vendor, product, revision strings, supported capabilities and enabled capabilities. This command is the default.<div class="spacer">
</div>
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<code class="lit">idle</code></dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
Place the specified device into Idle mode. This mode may consume less power than Active mode.<div class="spacer">
</div>
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<code class="lit">poddisable</code></dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
Disallows the specified device to revert to power-on default (pod) settings after a software reset. In other words this permits the settings that have been modified since power-on to remain after a software reset.<div class="spacer">
</div>
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<code class="lit">podenable</code></dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
Allows the specified device to revert to power-on default (pod) settings after a software reset.<div class="spacer">
</div>
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<code class="lit">puisdisable</code></dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
Disables power-up in standby (puis) on the specified device, causing the device to spin up the disks after power-up. This should be the factory default setting of the device and it is recommended to leave this setting disabled.<div class="spacer">
</div>
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<code class="lit">puisenable</code></dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
Enables power-up in standby (puis) on the specified device, causing the device to wait while spinning up the disks after power-up. This may cause problems at boot if the device is too slow in spin-up. This option is therefore <span class="emph">not recommended</span> unless the implications are understood. Note that the power-up in standby mode stays enabled over power-downs, hardware and software resets. Support for power-up in standby is indicated by the device with &#8216;Power-up in standby feature set&#8217; in the output of the <code class="lit">identify</code> command.<div class="spacer">
</div>
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<code class="lit">puisspinup</code></dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
Explicitly spins up the device if power-up in standby (puis) mode is enabled.<div class="spacer">
</div>
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<code class="lit">readaheaddisable</code></dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
Disables read look-ahead on the specified device. This may decrease performance. Note that the device may use &#8216;vendor specific&#8217; behaviour in implementing this, so it is <span class="emph">not</span> recommended to issue this command on a disk containing any currently mounted filesystems.<div class="spacer">
</div>
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<code class="lit">readaheadenable</code></dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
Enables read look-ahead on the specified device. This may increase performance. Support for and status of read look-ahead is indicated by the device with &#8216;read look-ahead&#8217; in the output of the <code class="lit">identify</code> command.<div class="spacer">
</div>
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<code class="lit">readattr</code></dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
Displays attribute thresholds and values for the specified device. Besides attribute values, device vendors may provide additional information shown in the last column, &#8220;Raw&#8221;. Attributes names can be completely wrong since they vary between vendors and even models, so don't rely on it. SMART must be enabled while executing this command or the device will return an error.<div class="spacer">
</div>
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<code class="lit">secdisablepass</code> <i class="arg">user</i> | <i class="arg">master</i></dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
Disables the lock mode for the specified device with user or master password. This command won't change the master password. The master password will be reactivated when a user password is set.<div class="spacer">
</div>
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<code class="lit">secerase</code> <i class="arg">user</i> | <i class="arg">master</i> [<span class="opt"><i class="arg">enhanced</i></span>]</dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
Erases all user data and unlocks the specified device. Execution of this command with the master password is the only way to unlock a device locked at maximum security level with the <code class="lit">secsetpass</code> command if the user's password is lost or unknown. There are two erase modes: normal and enhanced. Default erase mode is normal. In the normal erase mode this command will write binary zeroes to all user data areas. The enhanced erase mode is optional and may not be supported by the device. When enhanced erase mode is specified, the device will write predetermined data patterns to all user data areas. In enhanced erase mode, all previously written user data will be overwritten, including sectors that are no longer in use due to reallocation. This command will disable the device lock mode, however, the master password will still be stored internally within the device and may be reactivated later when a new user password is set.<div class="spacer">
</div>
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<code class="lit">secfreeze</code></dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
Prevents changes to passwords until a following power cycle. The purpose of this command is to prevent password setting attacks on the security system. After command completion any other commands that update the device lock mode will be aborted.<div class="spacer">
</div>
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<code class="lit">secsetpass</code> <i class="arg">user</i> <i class="arg">high</i> | <i class="arg">maximum</i></dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<code class="lit">secsetpass</code> <i class="arg">master</i></dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
Sets password and security level for the specified device. There are two passwords, user and master, and two security levels, high and maximum. The maximum password length is 32 symbols. The security system is enabled by sending a user password to the device with this command. When the security system is enabled, access to user data on the device is denied after a power cycle until the user password is sent to the device with the <code class="lit">secunlock</code> command. A master password may be set in addition to the user password. The purpose of the master password is to allow an administrator to establish a password that is kept secret from the user, and which may be used to unlock the device if the user password is lost. Setting the master password does not enable security system. Each master password change decrements the master password revision code value which is displayed in the <code class="lit">identify</code> command output if supported. After value 0x0001 is reached the next value will be 0xfffe. The security level determines device behavior when the master password is used to unlock the device. When the security level is set to high the device requires the <code class="lit">secunlock</code> command if the master password is used to unlock. When the security level is set to maximum the device requires a <code class="lit">secerase</code> command if the master password is used to unlock it. Execution of the <code class="lit">secerase</code> command erases all user data on the device.<div class="spacer">
</div>
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<code class="lit">secunlock</code> <i class="arg">user</i> | <i class="arg">master</i></dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
Unlocks the specified device with user or master password. The device will always unlock if a valid user password is received. If the security level was set to high during the last <code class="lit">secsetpass</code> command, the device will unlock if the master password is received. If the security level was set to maximum during the last <code class="lit">secsetpass</code> command, the device won't unlock even if the master password is received.<div class="spacer">
</div>
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<code class="lit">setidle</code> <i class="arg">idle-timer</i></dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
Places the specified device into Idle mode, and sets the Idle timer to <i class="arg">idle-timer</i> seconds. A value of 0 will disable the Idle timer.<div class="spacer">
</div>
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<code class="lit">setstandby</code> <i class="arg">standby-timer</i></dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
Places the specified device into Standby mode, and sets the Standby timer to <i class="arg">standby-timer</i> seconds. A value of 0 will disable the Standby timer.<div class="spacer">
</div>
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<code class="lit">sleep</code></dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
Place the specified device into Sleep mode. This mode will consume less power than Standby mode, but requires a device reset to resume operation. Typically the <a class="link-man" href="../html4/wd.html">wd(4)</a> driver performs this reset automatically, but this should still be used with caution.<div class="spacer">
</div>
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<code class="lit">smartautosave</code> <i class="arg">enable</i> | <i class="arg">disable</i></dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
Enables/disables attribute autosave feature on the specified device.<div class="spacer">
</div>
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<code class="lit">smartdisable</code></dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
Disables support for SMART on the specified device. Note that this means that the device will no longer record any SMART information.<div class="spacer">
</div>
Note that SMART <span class="emph">must</span> be enabled while executing the following commands or the device will return an error.<div class="spacer">
</div>
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<code class="lit">smartenable</code></dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
Enables SMART (Self-Monitoring, Analysis, and Reporting Technology) on the specified device (if supported). This causes the device to record information for prediction of device degradation and/or faults.<div class="spacer">
</div>
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<code class="lit">smartoffline</code> <i class="arg">subcommand</i></dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
Causes the specified device to immediately initiate the optional set of activities that collect SMART data in off-line mode and then save this data to the device's non-volatile memory, or execute self-diagnostic test routines in either captive or off-line mode. The <i class="arg">subcommand</i> may be one of the following:<div class="spacer">
</div>
<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
<span class="emph">abort</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Abort off-line mode self-test routine.<div class="spacer">
</div>
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<span class="emph">collect</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Start SMART off-line data collection immediately.<div class="spacer">
</div>
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<span class="emph">extencaptive</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Execute SMART extended self-test routine immediately in captive mode.<div class="spacer">
</div>
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<span class="emph">extenoffline</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Execute SMART extended self-test routine immediately in off-line mode.<div class="spacer">
</div>
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<span class="emph">shortcaptive</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Execute SMART short self-test routine immediately in captive mode.<div class="spacer">
</div>
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<span class="emph">shortoffline</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Execute SMART short self-test routine immediately in off-line mode.</dd>
</dl>
<div class="spacer">
</div>
Note that executing self-test routines in captive mode causes the device to be not accessible until the routine completes. This option is therefore <span class="emph">not recommended</span> unless the implications are understood.<div class="spacer">
</div>
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<code class="lit">smartread</code></dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
Reads various SMART information from the specified device and prints it to stdout.<div class="spacer">
</div>
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<code class="lit">smartreadlog</code> <i class="arg">log</i></dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
Reads specified <i class="arg">log</i> and prints it to stdout. The <i class="arg">log</i> may be one of the following:<div class="spacer">
</div>
<dl style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 6.00ex;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
<span class="emph">comp</span></dt>
<dd class="list-tag" style="margin-left: 11.00ex;">
The comprehensive error log.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<span class="emph">directory</span></dt>
<dd class="list-tag" style="margin-left: 11.00ex;">
The error log directory.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<span class="emph">selftest</span></dt>
<dd class="list-tag" style="margin-left: 11.00ex;">
The self-test log.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<span class="emph">summary</span></dt>
<dd class="list-tag" style="margin-left: 11.00ex;">
The summary error log.</dd>
</dl>
<div class="spacer">
</div>
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<code class="lit">smartstatus</code></dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
Reads the reliability status of the specified device. If the device reports that one of its thresholds is exceeded (a strong indication of imminent failure), the warning &#8216;SMART threshold exceeded!&#8217; is printed to stderr and a status of 2 is returned.<div class="spacer">
</div>
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<code class="lit">standby</code></dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
Place the specified device into Standby mode. This mode will consume less power than Idle mode.<div class="spacer">
</div>
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<code class="lit">writecachedisable</code></dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
Disable the write cache on the specified device (if supported). This may decrease performance. Support for and status of write caching is indicated by the device with &#8216;write cache&#8217; in the output of the <code class="lit">identify</code> command.<div class="spacer">
</div>
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<code class="lit">writecacheenable</code></dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
Enables the write cache on the specified device (if supported). This may increase performance, however data still in the device's cache at powerdown <span class="emph">may be lost</span>. The <a class="link-man" href="../html4/wd.html">wd(4)</a> driver performs a cache flush automatically before shutdown.</dd>
</dl>
</div>
<div class="section">
<h1 id="x4558414d504c4553">EXAMPLES</h1> Display the vendor, product, revision strings, and capabilities (such as SMART support) as reported by <i class="file">/dev/wd0</i>:<div class="spacer">
</div>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit"># atactl /dev/wd0c identify</code></div>
</blockquote>
<div class="spacer">
</div>
Enable SMART support on <i class="file">/dev/wd0</i> for detection of early warning signs of device failure:<div class="spacer">
</div>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit"># atactl /dev/wd0c smartenable</code></div>
</blockquote>
<div class="spacer">
</div>
A <a class="link-man" href="../html5/crontab.html">crontab(5)</a> entry which queries <i class="file">/dev/wd0</i> each hour for early warning signs of failure. If the device exceeds one of the SMART thresholds, <b class="name">atactl</b> will output &#8216;SMART threshold exceeded!&#8217; to stderr and <a class="link-man" href="../html8/cron.html">cron(8)</a> will mail it.<div class="spacer">
</div>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit">0 * * * * /sbin/atactl /dev/wd0c smartstatus &gt;/dev/null</code></div>
</blockquote>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../html2/ioctl.html">ioctl(2)</a>, <a class="link-man" href="../html4/wd.html">wd(4)</a></div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> The <b class="name">atactl</b> command first appeared in <span class="unix">OpenBSD&#160;2.6</span>. Support for acoustic management, advanced power management, power-up in standby, read look-ahead, and SMART was added in <span class="unix">OpenBSD&#160;2.9</span>.</div>
<div class="section">
<h1 id="x415554484f5253">AUTHORS</h1> The <b class="name">atactl</b> command was written by <span class="author">Ken Hornstein</span>. It was based heavily on the scsictl command written by <span class="author">Jason R. Thorpe</span>. Support for acoustic management, advanced power management, power-up in standby, read look-ahead, and SMART was added by <span class="author">Wouter Slegers</span>.</div>
<div class="section">
<h1 id="x43415645415453">CAVEATS</h1> Not all devices are created equally. Some may not support the feature sets and/or commands needed to perform the requested action, even when the <code class="lit">identify</code> command indicates support for the requested action. The device will typically respond with an &#8216;ATA device returned Aborted Command&#8217; if the requested action is not supported. Similarly a device might not implement all commands in a feature set, so even though disabling a feature works, enabling might not.</div>
<div class="section">
<h1 id="x42554753">BUGS</h1> The output from the <code class="lit">identify</code> command is rather ugly.<div class="spacer">
</div>
Disabling read look-ahead with <code class="lit">readaheaddisable</code> might cause problems with mounted filesystems on that device.</div>
</div>
</body>
</html>

