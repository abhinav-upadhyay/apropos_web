<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/posix/style.css" type="text/css" media="all"/>
<title>
SASYNCD(8)</title>
</head>
<body>
<div class="mandoc">
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">sasyncd</b> &#8212; <span class="desc">IPsec SA synchronization daemon for failover gateways</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1><table class="synopsis">
<col style="width: 7.00ex;"/>
<col/>
<tbody>
<tr>
<td>
sasyncd</td>
<td>
[<span class="opt"><b class="flag">-dv</b></span>] [<span class="opt"><b class="flag">-c</b> <i class="arg">config-file</i></span>]</td>
</tr>
</tbody>
</table>
</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> The <b class="name">sasyncd</b> daemon synchronizes IPsec SA and SPD information between a number of failover IPsec gateways. The most typical scenario is to run <b class="name">sasyncd</b> on hosts also running <a class="link-man" href="../html8/isakmpd.html">isakmpd(8)</a> or <a class="link-man" href="../html8/iked.html">iked(8)</a> and sharing a common IP address using <a class="link-man" href="../html4/carp.html">carp(4)</a>.<div class="spacer">
</div>
The daemon runs either in master or slave mode, in which the master tracks all local IPsec SA changes and sends this information along to all slaves so they will have the same data.<div class="spacer">
</div>
When a slave connects, or reconnects, the master will transmit a snapshot of all its current IPsec SA and SPD information.<div class="subsection">
<h2 id="x4661696c6f766572">Failover</h2> <b class="name">sasyncd</b> does not itself do any failover processing; the normal mode of operation is to track state changes on a specified <a class="link-man" href="../html4/carp.html">carp(4)</a> interface. Whenever it changes, <b class="name">sasyncd</b> will follow suit. For debugging purposes, it is possible to &#8220;lock&#8221; the daemon to a particular state; see <a class="link-man" href="../html5/sasyncd.conf.html">sasyncd.conf(5)</a>.</div>
<div class="subsection">
<h2 id="x736173796e636420746f20736173796e636420636f6d6d756e69636174696f6e">sasyncd to sasyncd communication</h2> As <b class="name">sasyncd</b> will transmit IPsec SA key and policy information over a network not guaranteed to be private, <b class="name">sasyncd</b> messages are protected using AES and SHA. The shared key used for the encryption must be specified in <i class="file">/etc/sasyncd.conf</i>. See <a class="link-man" href="../html5/sasyncd.conf.html">sasyncd.conf(5)</a> for more information.</div>
<div class="subsection">
<h2 id="x5341207265706c617920636f756e74657273">SA replay counters</h2> For SAs with replay protection enabled, such as those created by <a class="link-man" href="../html8/isakmpd.html">isakmpd(8)</a>, the <b class="name">sasyncd</b> hosts must have <a class="link-man" href="../html4/pfsync.html">pfsync(4)</a> enabled to synchronize the in-kernel SA replay counters. Without this replay counter synchronization the IPsec packets a host sends after failover will not be accepted by the remote VPN endpoint.<div class="spacer">
</div>
In most redundancy setups <a class="link-man" href="../html4/pfsync.html">pfsync(4)</a> is likely already activated to synchronize <a class="link-man" href="../html4/pf.html">pf(4)</a> states. See <a class="link-man" href="../html4/pfsync.html">pfsync(4)</a> for more information.<div class="spacer">
</div>
The options are as follows:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-c</b> <i class="arg">config-file</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
If given, the <b class="flag">-c</b> option specifies an alternate configuration file instead of <i class="file">/etc/sasyncd.conf</i>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-d</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
The <b class="flag">-d</b> option causes the daemon to run in the foreground, logging to stderr. Without this option, <b class="name">sasyncd</b> sends log messages to <a class="link-man" href="../html3/syslog.html">syslog(3)</a>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-v</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
The <b class="flag">-v</b> option increases the verbosity level of the daemon, used primarily for debugging. This option may be specified several times.</dd>
</dl>
</div>
</div>
<div class="section">
<h1 id="x46494c4553">FILES</h1><dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/etc/sasyncd.conf</i></dt>
<dd class="list-tag" style="margin-left: 28.00ex;">
The default <b class="name">sasyncd</b> configuration file.</dd>
</dl>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../html3/crypto.html">crypto(3)</a>, <a class="link-man" href="../html3/syslog.html">syslog(3)</a>, <a class="link-man" href="../html4/carp.html">carp(4)</a>, <a class="link-man" href="../html4/ipsec.html">ipsec(4)</a>, <a class="link-man" href="../html4/pfsync.html">pfsync(4)</a>, <a class="link-man" href="../html5/sasyncd.conf.html">sasyncd.conf(5)</a>, <a class="link-man" href="../html8/iked.html">iked(8)</a>, <a class="link-man" href="../html8/isakmpd.html">isakmpd(8)</a></div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> The <b class="name">sasyncd</b> daemon first appeared in <span class="unix">OpenBSD&#160;3.8</span>. It was written in 2004-2005 by Hakan Olsson, in part sponsored by Multicom Security AB, Sweden.</div>
<div class="section">
<h1 id="x42554753">BUGS</h1> Due to the absence of a proper on the wire SA transfer protocol, <b class="name">sasyncd</b> only works if the peers share the same hardware architecture.</div>
</div>
</body>
</html>

