<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/posix/style.css" type="text/css" media="all"/>
<title>
NEWFS_MSDOS(8)</title>
</head>
<body>
<div class="mandoc">
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">newfs_msdos</b> &#8212; <span class="desc">construct a new MS-DOS (FAT) file system</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1><table class="synopsis">
<col style="width: 11.00ex;"/>
<col/>
<tbody>
<tr>
<td>
newfs_msdos</td>
<td>
[<span class="opt"><b class="flag">-N</b></span>] [<span class="opt"><b class="flag">-a</b>&#160;<i class="arg">FAT-size</i></span>] [<span class="opt"><b class="flag">-B</b>&#160;<i class="arg">boot</i></span>] [<span class="opt"><b class="flag">-b</b>&#160;<i class="arg">block-size</i></span>] [<span class="opt"><b class="flag">-c</b>&#160;<i class="arg">cluster-size</i></span>] [<span class="opt"><b class="flag">-e</b>&#160;<i class="arg">dirents</i></span>] [<span class="opt"><b class="flag">-F</b>&#160;<i class="arg">FAT-type</i></span>] [<span class="opt"><b class="flag">-f</b>&#160;<i class="arg">format</i></span>] [<span class="opt"><b class="flag">-h</b>&#160;<i class="arg">heads</i></span>] [<span class="opt"><b class="flag">-I</b>&#160;<i class="arg">volid</i></span>] [<span class="opt"><b class="flag">-i</b>&#160;<i class="arg">info</i></span>] [<span class="opt"><b class="flag">-k</b>&#160;<i class="arg">backup</i></span>] [<span class="opt"><b class="flag">-L</b>&#160;<i class="arg">label</i></span>] [<span class="opt"><b class="flag">-m</b>&#160;<i class="arg">media</i></span>] [<span class="opt"><b class="flag">-n</b>&#160;<i class="arg">FATs</i></span>] [<span class="opt"><b class="flag">-O</b>&#160;<i class="arg">OEM</i></span>] [<span class="opt"><b class="flag">-o</b>&#160;<i class="arg">hidden</i></span>] [<span class="opt"><b class="flag">-r</b>&#160;<i class="arg">reserved</i></span>] [<span class="opt"><b class="flag">-S</b>&#160;<i class="arg">sector-size</i></span>] [<span class="opt"><b class="flag">-s</b>&#160;<i class="arg">total</i></span>] [<span class="opt"><b class="flag">-u</b>&#160;<i class="arg">track-size</i></span>]&#160;<i class="arg">special</i> [<span class="opt"><i class="arg">disktype</i></span>]</td>
</tr>
</tbody>
</table>
</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> The <b class="name">newfs_msdos</b> utility creates a FAT12, FAT16, or FAT32 file system on device <i class="arg">special</i>, using <a class="link-man" href="../html5/disktab.html">disktab(5)</a> entry <i class="arg">disktype</i> to determine geometry, if required.<div class="spacer">
</div>
The <i class="arg">special</i> file should be a raw device, for example <i class="file">/dev/rsd0i</i>; if a relative path like <i class="file">sd0i</i> is specified, the corresponding raw device is used.<div class="spacer">
</div>
The options are as follows:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-a</b> <i class="arg">FAT-size</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Number of sectors per FAT.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-B</b> <i class="arg">boot</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Get bootstrap from file.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-b</b> <i class="arg">block-size</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
File system block size (bytes per cluster). This should resolve to an acceptable number of sectors per cluster (see below).</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-c</b> <i class="arg">cluster-size</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Sectors per cluster. Acceptable values are powers of 2 in the range 1 through 128.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-e</b> <i class="arg">dirents</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Number of root directory entries (FAT12 and FAT16 only).</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-F</b> <i class="arg">FAT-type</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
FAT type (one of 12, 16, or 32).</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-f</b> <i class="arg">format</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Specify a standard (floppy disk) format. The eight standard formats are (capacities in kilobytes): 160, 180, 320, 360, 720, 1200, 1440, 2880.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-h</b> <i class="arg">heads</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Number of drive heads.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-I</b> <i class="arg">volid</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Volume ID.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-i</b> <i class="arg">info</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Location of the file system info sector (FAT32 only). A value of 0xffff signifies no info sector.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-k</b> <i class="arg">backup</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Location of the backup boot sector (FAT32 only). A value of 0xffff signifies no backup sector.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-L</b> <i class="arg">label</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Volume label (up to 11 characters). The label should consist of only those characters permitted in regular DOS (8+3) filenames.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-m</b> <i class="arg">media</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Media descriptor (acceptable range 0xf0 to 0xff).</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-N</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Don't create a file system: just print out parameters.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-n</b> <i class="arg">FATs</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Number of FATs. Acceptable values are 1 to 16 inclusive. The default is 2.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-O</b> <i class="arg">OEM</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
OEM string (up to 8 characters). The default is &quot;BSD  4.4&quot;.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-o</b> <i class="arg">hidden</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Number of hidden sectors.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-r</b> <i class="arg">reserved</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Number of reserved sectors.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-S</b> <i class="arg">sector-size</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Number of bytes per sector. Acceptable values are powers of 2 in the range 512 through 32768.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-s</b> <i class="arg">total</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
File system size.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-u</b> <i class="arg">track-size</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Number of sectors per track.</dd>
</dl>
</div>
<div class="section">
<h1 id="x4e4f544553">NOTES</h1> FAT file system parameters occupy a &quot;Boot Sector BPB (BIOS Parameter Block)&quot; in the first of the &quot;reserved&quot; sectors which precede the actual file system. For reference purposes, this structure is presented below.<div class="spacer">
</div>
<pre style="margin-left: 0.00ex;" class="lit display">
struct bsbpb { 
	u_int16_t	bps;		/* [-S] bytes per sector */ 
	u_int8_t	spc;		/* [-c] sectors per cluster */ 
	u_int16_t	res;		/* [-r] reserved sectors */ 
	u_int8_t	nft;		/* [-n] number of FATs */ 
	u_int16_t	rde;		/* [-e] root directory entries */ 
	u_int16_t	sec;		/* [-s] total sectors */ 
	u_int8_t	mid;		/* [-m] media descriptor */ 
	u_int16_t	spf;		/* [-a] sectors per FAT */ 
	u_int16_t	spt;		/* [-u] sectors per track */ 
	u_int16_t	hds;		/* [-h] drive heads */ 
	u_int32_t	hid;		/* [-o] hidden sectors */ 
	u_int32_t	bsec;		/* [-s] big total sectors */ 
}; 
 
/* FAT32 extensions */ 
struct bsxbpb { 
	u_int32_t	bspf;		/* [-a] big sectors per FAT */ 
	u_int16_t	xflg;		/* control flags */ 
	u_int16_t	vers;		/* file system version */ 
	u_int32_t	rdcl;		/* root directory start cluster */ 
	u_int16_t	infs;		/* [-i] file system info sector */ 
	u_int16_t	bkbs;		/* [-k] backup boot sector */ 
};</pre>
</div>
<div class="section">
<h1 id="x4558414d504c4553">EXAMPLES</h1> Create a file system, using default parameters, on /dev/rwd0i.<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit">newfs_msdos /dev/rwd0i</code></div>
</blockquote>
<div class="spacer">
</div>
Create a standard 1.44M file system, with volume label &quot;foo&quot;, on /dev/rfd0c.<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit">newfs_msdos -f 1440 -L foo fd0c</code></div>
</blockquote>
</div>
<div class="section">
<h1 id="x444941474e4f5354494353">DIAGNOSTICS</h1> Exit status is 0 on success and 1 on error.</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../html5/disktab.html">disktab(5)</a>, <a class="link-man" href="../html8/disklabel.html">disklabel(8)</a>, <a class="link-man" href="../html8/fdisk.html">fdisk(8)</a>, <a class="link-man" href="../html8/newfs.html">newfs(8)</a></div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> The <b class="name">newfs_msdos</b> command first appeared in <span class="unix">OpenBSD&#160;2.1</span>.</div>
<div class="section">
<h1 id="x415554484f5253">AUTHORS</h1> <span class="author">Robert Nordier</span> &lt;<a class="link-mail" href="mailto:rnordier@FreeBSD.org">rnordier@FreeBSD.org</a>&gt;.</div>
</div>
</body>
</html>

