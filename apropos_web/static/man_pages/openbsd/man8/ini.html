<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/posix/style.css" type="text/css" media="all"/>
<title>
INIT(8)</title>
</head>
<body>
<div class="mandoc">
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">init</b> &#8212; <span class="desc">process control initialization</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1><table class="synopsis">
<col style="width: 4.00ex;"/>
<col/>
<tbody>
<tr>
<td>
init</td>
<td>
[<span class="opt"><b class="flag">-fs</b></span>]</td>
</tr>
</tbody>
</table>
</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> The <b class="name">init</b> program is the last stage of the boot process. It normally executes the sequence of events described in <a class="link-man" href="../html8/rc.html">rc(8)</a> and begins multi-user operation.<div class="spacer">
</div>
The kernel may pass the following options to <b class="name">init</b>, usually when requested by the <a class="link-man" href="../html8/boot.html">boot(8)</a> program:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-f</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Activate fastboot mode. This is not currently supported by the <span class="unix">OpenBSD</span> kernel. Instead, use the <i class="file">/fastboot</i> file as explained in the <a class="link-man" href="../html8/rc.html">rc(8)</a> manual.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-s</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Boot directly into single user mode.</dd>
</dl>
<div class="spacer">
</div>
Single-user mode is also entered if the boot scripts fail.<div class="spacer">
</div>
In single-user mode, the <a class="link-man" href="../html8/rc.html">rc(8)</a> script is not run and normal daemons are not started, but instead a super-user shell is started on the system console. If the <i class="arg">console</i> entry in the <a class="link-man" href="../html5/ttys.html">ttys(5)</a> file does not contain the &#8220;secure&#8221; flag, then <b class="name">init</b> will require that the superuser password be entered before the system will start a single-user shell. The password check is skipped if the <i class="arg">console</i> is marked as &#8220;secure&#8221;.<div class="spacer">
</div>
In single-user mode, the system is quiescent for maintenance work and may later be made to go to multi-user by exiting the single-user shell (with ^D). This causes <b class="name">init</b> to run the <a class="link-man" href="../html8/rc.html">rc(8)</a> startup command file in fastboot mode (skipping disk checks).<div class="spacer">
</div>
The kernel <a class="link-man" href="../html7/securelevel.html">securelevel(7)</a> is normally set to 0 while in single-user mode, and raised to 1 when the system begins multi-user operations. This action will not take place if the securelevel is -1, and can be modified via the <i class="file">/etc/rc.securelevel</i> script.<div class="spacer">
</div>
In multi-user operation, <b class="name">init</b> maintains processes for the terminal ports found in the file <a class="link-man" href="../html5/ttys.html">ttys(5)</a>. <b class="name">init</b> reads this file, and executes the command found in the second field. This command is usually <a class="link-man" href="../html8/getty.html">getty(8)</a>; <span class="emph">getty</span> opens and initializes the tty line and executes the <span class="emph">login</span> program. The <span class="emph">login</span> program, when a valid user logs in, executes a shell for that user. When this shell dies, either because the user logged out or an abnormal termination occurred (a signal), the <b class="name">init</b> program wakes up, deletes the user from the <a class="link-man" href="../html5/utmp.html">utmp(5)</a> file of current users and records the logout in the <span class="emph">wtmp</span> file. The cycle is then restarted by <b class="name">init</b> executing a new <span class="emph">getty</span> for the line.<div class="spacer">
</div>
Line status (on, off, secure, getty, or window information) may be changed in the <span class="emph">ttys</span> file without a reboot by sending the signal <span class="define">SIGHUP</span> to <b class="name">init</b> with the command &#8220;<code class="lit">kill -s HUP 1</code>&#8221;. On receipt of this signal, <b class="name">init</b> re-reads the <span class="emph">ttys</span> file. When a line is turned off in <span class="emph">ttys</span>, <b class="name">init</b> will send a <span class="define">SIGHUP</span> signal to the controlling process for the session associated with the line. For any lines that were previously turned off in the <span class="emph">ttys</span> file and are now on, <b class="name">init</b> executes a new <span class="emph">getty</span> to enable a new login. If the getty or window field for a line is changed, the change takes effect at the end of the current login session (e.g., the next time <b class="name">init</b> starts a process on the line). If a line is commented out or deleted from <span class="emph">ttys</span>, <b class="name">init</b> will not do anything at all to that line. However, it will complain that the relationship between lines in the <span class="emph">ttys</span> file and records in the <span class="emph">utmp</span> file is out of sync, so this practice is not recommended.<div class="spacer">
</div>
<b class="name">init</b> will terminate multi-user operations and resume single-user mode if sent a terminate (<span class="define">TERM</span>) signal, for example, &#8220;<code class="lit">kill -s TERM 1</code>&#8221;. If there are processes outstanding that are deadlocked (because of hardware or software failure), <b class="name">init</b> will not wait for them all to die (which might take forever), but will time out after 30 seconds and print a warning message.<div class="spacer">
</div>
<b class="name">init</b> will cease creating new <a class="link-man" href="../html8/getty.html">getty(8)</a> and allow the system to slowly die away, if it is sent a terminal stop (<span class="define">TSTP</span>) signal, i.e., &#8220;<code class="lit">kill -s TSTP 1</code>&#8221;. A later hangup will resume full multi-user operations, or a terminate will start a single-user shell. This hook is used by <a class="link-man" href="../html8/reboot.html">reboot(8)</a> and <a class="link-man" href="../html8/halt.html">halt(8)</a>.<div class="spacer">
</div>
<b class="name">init</b> will terminate multi-user operations, kill all <a class="link-man" href="../html8/getty.html">getty(8)</a>, and run <i class="file">/etc/rc.shutdown</i> if a user-defined signal 1 (<span class="define">USR1</span>), user-defined signal 2 (<span class="define">USR2</span>), or interrupt (<span class="define">INT</span>) signal is received. Following this, <span class="define">USR1</span> will halt the system; <span class="define">USR2</span> will request a powerdown; and <span class="define">INT</span> will cause a reboot. <i class="file">/etc/rc.shutdown</i> can specify that a powerdown is requested instead of the action specified by the signal.<div class="spacer">
</div>
The role of <b class="name">init</b> is so critical that if it dies, the system will reboot itself automatically. If, at bootstrap time, the <b class="name">init</b> process cannot be located, the system will panic with the message &#8220;panic: init died (signal %d, exit %d)&#8221;.</div>
<div class="section">
<h1 id="x5245534f5552434553">RESOURCES</h1> When <b class="name">init</b> spawns a process it sets the process priority, umask, and resource limits based on <i class="file">/etc/login.conf</i>. When starting the <a class="link-man" href="../html8/rc.html">rc(8)</a> files, the login class &#8220;daemon&#8221; is used. When starting a window system or <a class="link-man" href="../html8/getty.html">getty(8)</a>, the login class &#8220;default&#8221; is used. No resource changes are made when entering single user mode.</div>
<div class="section">
<h1 id="x46494c4553">FILES</h1><dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/dev/console</i></dt>
<dd class="list-tag" style="margin-left: 19.00ex;">
system console device</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/dev/tty*</i></dt>
<dd class="list-tag" style="margin-left: 19.00ex;">
terminal ports found in <span class="emph">ttys</span></dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/etc/rc</i></dt>
<dd class="list-tag" style="margin-left: 19.00ex;">
system startup commands</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/etc/rc.securelevel</i></dt>
<dd class="list-tag" style="margin-left: 19.00ex;">
commands that run before the security level changes</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/etc/rc.shutdown</i></dt>
<dd class="list-tag" style="margin-left: 19.00ex;">
script run at shutdown time</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/etc/ttys</i></dt>
<dd class="list-tag" style="margin-left: 19.00ex;">
terminal initialization information file</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/fastboot</i></dt>
<dd class="list-tag" style="margin-left: 19.00ex;">
tells <a class="link-man" href="../html8/rc.html">rc(8)</a> not to run <a class="link-man" href="../html8/fsck.html">fsck(8)</a> during the next boot</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/var/run/utmp</i></dt>
<dd class="list-tag" style="margin-left: 19.00ex;">
record of users currently logged in</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/var/log/wtmp</i></dt>
<dd class="list-tag" style="margin-left: 19.00ex;">
record of all logins and logouts</dd>
</dl>
</div>
<div class="section">
<h1 id="x444941474e4f5354494353">DIAGNOSTICS</h1><dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-diag">
<dt class="list-diag" style="margin-top: 1.00em;">
<b class="diag">getty repeating too quickly on port %s, sleeping</b></dt>
<dd class="list-diag">
A process being started to service a line is exiting quickly each time it is started. This is often caused by a ringing or noisy terminal line. <span class="emph">Init will sleep for 10 seconds</span>, <span class="emph">then continue trying to start the process</span>.</dd>
<dt class="list-diag" style="margin-top: 1.00em;">
<b class="diag">some processes would not die; ps axl advised.</b></dt>
<dd class="list-diag">
A process is hung and could not be killed when the system was shutting down. This condition is usually caused by a process that is stuck in a device driver because of a persistent device error condition.</dd>
</dl>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../html1/kill.html">kill(1)</a>, <a class="link-man" href="../html1/login.html">login(1)</a>, <a class="link-man" href="../html1/sh.html">sh(1)</a>, <a class="link-man" href="../html5/fbtab.html">fbtab(5)</a>, <a class="link-man" href="../html5/login.conf.html">login.conf(5)</a>, <a class="link-man" href="../html5/ttys.html">ttys(5)</a>, <a class="link-man" href="../html7/securelevel.html">securelevel(7)</a>, <a class="link-man" href="../html8/crash.html">crash(8)</a>, <a class="link-man" href="../html8/getty.html">getty(8)</a>, <a class="link-man" href="../html8/halt.html">halt(8)</a>, <a class="link-man" href="../html8/rc.html">rc(8)</a>, <a class="link-man" href="../html8/rc.shutdown.html">rc.shutdown(8)</a>, <a class="link-man" href="../html8/reboot.html">reboot(8)</a>, <a class="link-man" href="../html8/shutdown.html">shutdown(8)</a></div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> An <b class="name">init</b> command appeared in Version&#160;6 AT&amp;T UNIX.</div>
</div>
</body>
</html>

