<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/posix/style.css" type="text/css" media="all"/>
<title>
SYSMERGE(8)</title>
</head>
<body>
<div class="mandoc">
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">sysmerge</b> &#8212; <span class="desc">update system configuration files</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1><table class="synopsis">
<col style="width: 8.00ex;"/>
<col/>
<tbody>
<tr>
<td>
sysmerge</td>
<td>
[<span class="opt"><b class="flag">-bdp</b></span>]</td>
</tr>
</tbody>
</table>
</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> <b class="name">sysmerge</b> is a utility designed to help the administrator update configuration files after upgrading to a new release or snapshot.<div class="spacer">
</div>
<b class="name">sysmerge</b> works by comparing a reference root directory against currently installed files.<div class="spacer">
</div>
<b class="name">sysmerge</b> will work through the fileset, offering the chance to merge any differences using <a class="link-man" href="../html1/sdiff.html">sdiff(1)</a>. Merged files may be edited using the default editor or be left to deal with at a later date. Should any problems occur, such as a failure to upgrade a file, the user will be notified and will have to deal with the issue by hand.<div class="spacer">
</div>
By default (if <b class="flag">-d</b> is not used) <b class="name">sysmerge</b> only compares files whose reference sources have changed since the last run and attempts to automatically upgrade them to the newest version, provided that they have no local changes. It automatically installs missing files and binaries, and updates files differing only by CVS Id. Files whose reference sources have matching CVS Id are skipped from comparison. <i class="file">/etc/fbtab</i> and <i class="file">/etc/ttys</i> are created using helper scripts and are <span class="symb">always</span> compared. Users and groups that are missing from the current installation but present in the new <a class="link-man" href="../html5/master.passwd.html">master.passwd(5)</a> and <a class="link-man" href="../html5/group.html">group(5)</a> files will <span class="symb">always</span> be automatically (re)created.<div class="spacer">
</div>
<b class="name">sysmerge</b> will finish by running <a class="link-man" href="../html8/mtree.html">mtree(8)</a> to make sure the directory structure has correct permissions.<div class="spacer">
</div>
The options are as follows:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-b</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Batch mode. <b class="name">sysmerge</b> runs non-interactively, saving differing files for later manual processing.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-d</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Diff mode. <b class="name">sysmerge</b> does not take any automatic action, allowing for a full diff comparison.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-p</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Package mode. <b class="name">sysmerge</b> only compares the default configuration files of installed <a class="link-man" href="../html7/packages.html">packages(7)</a> against their target on the system (@sample).</dd>
</dl>
<div class="spacer">
</div>
Files can be excluded from comparison by listing them in <i class="file">/etc/sysmerge.ignore</i>. Checksum files stored under <i class="file">/var/sysmerge</i> as well as the following files will always be skipped from direct comparison: <i class="file">/etc/group</i>, <i class="file">/etc/localtime</i>, <i class="file">/etc/master.passwd</i>, <i class="file">/etc/motd</i>, <i class="file">/etc/passwd</i>, <i class="file">/etc/pwd.db</i>, <i class="file">/etc/spwd.db</i>, <i class="file">/var/db/locate.database</i>, <i class="file">/var/mail/root</i>.</div>
<div class="section">
<h1 id="x454e5649524f4e4d454e54">ENVIRONMENT</h1><dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">EDITOR</span>, <span class="env">VISUAL</span></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
Specifies an editor to use. If both <span class="env">EDITOR</span> and <span class="env">VISUAL</span> are set, <span class="env">VISUAL</span> takes precedence. If neither <span class="env">EDITOR</span> nor <span class="env">VISUAL</span> are set, the default is <a class="link-man" href="../html1/vi.html">vi(1)</a>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">PAGER</span></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
Specifies the pagination program to use.</dd>
</dl>
</div>
<div class="section">
<h1 id="x46494c4553">FILES</h1><dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/etc/sysmerge.ignore</i></dt>
<dd class="list-tag" style="margin-left: 22.00ex;">
Files and directories to ignore from comparison.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/var/sysmerge/backups</i></dt>
<dd class="list-tag" style="margin-left: 22.00ex;">
Directory containing backup of <b class="name">sysmerge</b> last run modified files. Rotated automatically in order of increasing age from <i class="file">backups.0</i> to <i class="file">backups.3</i>.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/var/sysmerge/etc.tgz</i></dt>
<dd class="list-tag" style="margin-left: 22.00ex;">
Base system set containing the reference files corresponding to the currently installed release.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/var/sysmerge/xetc.tgz</i></dt>
<dd class="list-tag" style="margin-left: 22.00ex;">
<a class="link-man" href="../html7/X.html">X(7)</a> set containing the reference files corresponding to the currently installed release.</dd>
</dl>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../html1/more.html">more(1)</a>, <a class="link-man" href="../html1/sdiff.html">sdiff(1)</a><div class="spacer">
</div>
<a class="link-ext" href="http://www.openbsd.org/faq/current.html">http://www.openbsd.org/faq/current.html</a> <a class="link-ext" href="http://www.openbsd.org/faq/upgradeXX.html">http://www.openbsd.org/faq/upgradeXX.html</a></div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> The <b class="name">sysmerge</b> script first appeared in <span class="unix">OpenBSD&#160;4.4</span>.</div>
<div class="section">
<h1 id="x415554484f5253">AUTHORS</h1> <b class="name">sysmerge</b> was written by <span class="author">Antoine Jacoutot</span> &lt;<a class="link-mail" href="mailto:ajacoutot@openbsd.org">ajacoutot@openbsd.org</a>&gt;. It was originally started as a friendly fork from mergemaster by <span class="author">Douglas Barton</span> &lt;<a class="link-mail" href="mailto:DougB@FreeBSD.org">DougB@FreeBSD.org</a>&gt;.</div>
</div>
</body>
</html>

