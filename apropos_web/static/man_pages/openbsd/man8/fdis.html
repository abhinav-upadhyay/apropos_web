<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/posix/style.css" type="text/css" media="all"/>
<title>
FDISK(8)</title>
</head>
<body>
<div class="mandoc">
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">fdisk</b> &#8212; <span class="desc">partition table maintenance program</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1><table class="synopsis">
<col style="width: 5.00ex;"/>
<col/>
<tbody>
<tr>
<td>
fdisk</td>
<td>
[<span class="opt"><b class="flag">-egvy</b></span>] [<span class="opt"><b class="flag">-i</b> | <b class="flag">-u</b></span>] [<span class="opt"><b class="flag">-b</b> <i class="arg">blocks</i></span>] [<span class="opt"><b class="flag">-c</b> <i class="arg">cylinders</i> <b class="flag">-h</b> <i class="arg">heads</i> <b class="flag">-s</b> <i class="arg">sectors</i></span>] [<span class="opt"><b class="flag">-f</b> <i class="arg">mbrfile</i></span>] [<span class="opt"><b class="flag">-l</b> <i class="arg">blocks</i></span>] <i class="arg">disk</i></td>
</tr>
</tbody>
</table>
</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> <b class="name">fdisk</b> makes changes to the MBR and GPT tables found on some disks. On such disks sector 0 contains a 4-entry MBR partition table that divides the space. The GPT partition table, when present, starts at sector 1.<div class="spacer">
</div>
Each entry has a type. A type of <i class="arg">0xA6</i> indicates an <span class="unix">OpenBSD</span> MBR partition, which starts with its own 16-entry partition table known as a <a class="link-man" href="../html5/disklabel.html">disklabel(5)</a>. This can be edited using <a class="link-man" href="../html8/disklabel.html">disklabel(8)</a>.<div class="spacer">
</div>
Caution is advised when editing these tables, since some platforms use tricks to boot and may rely on specific configurations created at install time.<div class="spacer">
</div>
The options are as follows:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-b</b> <i class="arg">blocks</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
A special boot partition of the specified size will be written to disk on architectures that need one. Only valid with <b class="flag">-i</b>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-c</b> <i class="arg">cylinders</i> <b class="flag">-h</b> <i class="arg">heads</i> <b class="flag">-s</b> <i class="arg">sectors</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Specifies an alternate BIOS geometry for <b class="name">fdisk</b> to use. By default, an automatic calculation of disk size will be built using heuristics. These figures are taken from the in-core disklabel (see <a class="link-man" href="../html8/disklabel.html">disklabel(8)</a>), or values that <span class="emph">/boot</span> has passed to the kernel.<div class="spacer">
</div>
Only one of <b class="flag">-chs</b> or <b class="flag">-l</b> can be specified.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-e</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Use the <b class="name">fdisk</b> interactive editor to modify the partition table. See <i class="link-sec"><a class="link-sec" href="#x434f4d4d414e44204d4f4445">COMMAND MODE</a></i>, below, for more information.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-f</b> <i class="arg">mbrfile</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Specifies an alternate MBR template file. The default file is <i class="file">/usr/mdec/mbr</i>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-g</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
A protective MBR and a default GPT will be written to disk. The default GPT will have a single <span class="unix">OpenBSD</span> partition containing all available space not allocated by a <b class="flag">-b</b> specification. Only valid with <b class="flag">-i</b>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-i</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Requests that the partition table data be re-initialized. In this mode, <b class="name">fdisk</b> will completely overwrite the primary MBR bootcode and MBR partition table.<div class="spacer">
</div>
If <b class="flag">-g</b> is not specified then the MBR will be overwritten by the default MBR template <i class="file">/usr/mdec/mbr</i> (or the one optionally specified by the <b class="flag">-f</b> flag). In the default template, MBR partition number 3 will be configured as an <span class="unix">OpenBSD</span> MBR partition containing all available space not allocated by a <b class="flag">-b</b> specification.<div class="spacer">
</div>
Only one of <b class="flag">-i</b> or <b class="flag">-u</b> can be specified.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-l</b> <i class="arg">blocks</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Specify the number of blocks in the disk, and force the MBR to be in LBA mode only.<div class="spacer">
</div>
Only one of <b class="flag">-chs</b> or <b class="flag">-l</b> can be specified.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-u</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Update MBR bootcode, preserving existing MBR partition table. The MBR bootcode extends from offset 0x000 to the start of the MBR partition table at offset 0x1BE. It is similar to the <b class="flag">-i</b> flag, except the existing MBR partition table is preserved. This is useful for writing new MBR bootcode onto an existing drive, and is equivalent to the DOS command &#8220;FDISK /MBR&#8221;. Note that this option will overwrite the NT disk signature, if present.<div class="spacer">
</div>
Only one of <b class="flag">-i</b> or <b class="flag">-u</b> can be specified.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-v</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Print the contents of the MBR, the Primary GPT and the Secondary GPT. Also print more detailed GPT header and partition entry information. Cannot be used with <b class="flag">-i</b>, <b class="flag">-u</b>, or <b class="flag">-e</b>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-y</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Avoid asking yes/no questions when not desirable.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="arg">disk</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Specify the <i class="arg">disk</i> to operate on. It can be specified either by its full pathname or an abbreviated disk form. In its abbreviated form, the path to the device and the &#8216;r&#8217; denoting &#8220;raw device&#8221; are omitted and the partition letter is optional. For example, the first IDE disk can be specified as either <i class="file">/dev/rwd0c</i>, <i class="file">wd0c</i>, or <i class="file">wd0</i>.</dd>
</dl>
</div>
<div class="section">
<h1 id="x5459504943414c204c41594f5554">TYPICAL LAYOUT</h1> When called with no special flags, <b class="name">fdisk</b> prints the partition table of the specified disk.<div class="spacer">
</div>
If the disk does not contain a valid GPT the contents of the MBR are displayed. For example:<div class="spacer">
</div>
<pre style="margin-left: 1.00ex;" class="lit display">
# fdisk sd0 
Disk: sd0       geometry: 121601/255/63 [1953525168 Sectors] 
Offset: 0       Signature: 0xAA55 
          Starting     Ending    LBA Info: 
 #: id     C H S -      C   H  S [     start:       size ] 
------------------------------------------------------------------------ 
 0: 0B     0 1 1 -  26108   0 63 [        63:  419425020 ] Win95 FAT-32 
 1: 00     0 0 0 -      0   0  0 [         0:          0 ] unused 
 2: 00     0 0 0 -      0   0  0 [         0:          0 ] unused 
*3: A6 26108 1 1 - 121600 254 63 [ 419425083: 1534094982 ] OpenBSD</pre>
<div class="spacer">
</div>
This 1953525168 sector (931GB) disk drive is divided into two MBR partitions that span the whole disk. The first MBR partition is a 200GB FAT-32 partition; the second is a 731GB <span class="unix">OpenBSD</span> MBR partition using the remainder of the disk. The fields of the output are:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="emph">#</span></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
Number identifying each MBR partition table entry. There are a total of four slots. &#8216;*&#8217; denotes the MBR partition which is declared bootable.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="emph">id</span></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
MBR partition type identifier. <span class="unix">OpenBSD</span> reserves the magic number hexadecimal A6 (166 decimal).</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="emph">C/H/S</span></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
These fields provide the starting and ending address of the MBR partition in BIOS geometry.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="emph">start/size</span></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
These fields provide the starting sector and size in sectors of the MBR partition in linear block addresses.</dd>
</dl>
<div class="spacer">
</div>
<span class="emph">NOTE</span>: The BIOS geometry sectors field (C/H/S) is &#8220;1 based&#8221;, but the LBA &quot;start&quot; field is &#8220;0 based&#8221;.<div class="spacer">
</div>
The CHS values will need to be in the BIOS's geometry for the system to be able to boot and use the drive correctly. These values must be kept correctly synchronized or a variety of problems develop which are very difficult to diagnose.<div class="spacer">
</div>
If the disk contains a protective MBR and a valid GPT, the contents of the GPT are displayed. For example:<div class="spacer">
</div>
<pre style="margin-left: 1.00ex;" class="lit display">
Disk: sd2       Usable LBA: 64 to 7765952 [7766016 Sectors] 
   #: type                                 [       start:         size ] 
------------------------------------------------------------------------ 
   1: EFI Sys                              [          64:          960 ] 
   3: OpenBSD                              [        1024:      7764929 ]</pre>
<div class="spacer">
</div>
This 7766016 sector disk drive is divided into two partitions that span the whole disk. The first partition is a 960 sector EFI Sys partition; the second is a 7764929 sector <span class="unix">OpenBSD</span> partition using the remainder of the disk. The fields of the output are:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="emph">#</span></dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
Number identifying each partition table entry.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="emph">type</span></dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
The partition type identifier. If the type is recognized the name of the type is displayed. Otherwise the type GUID is displayed.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="emph">start</span></dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
The sector the partition starts on.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="emph">size</span></dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
The number of sectors in the partition.</dd>
</dl>
<div class="spacer">
</div>
If the <b class="flag">-v</b> option is specified, the disk GUID and each partition's GUID and name are also displayed.<div class="spacer">
</div>
In either the MBR or GPT case the <span class="unix">OpenBSD</span> partition shown above is subdivided further using the functionality provided by <a class="link-man" href="../html8/disklabel.html">disklabel(8)</a>, which provides <span class="unix">OpenBSD</span> partitions.<div class="spacer">
</div>
<pre style="margin-left: 1.00ex;" class="lit display">
# /dev/rsd0c: 
type: SCSI 
disk: SCSI disk 
label: WDC WD10EADS-65L 
duid: 085ef8d68623f5b3 
flags: 
bytes/sector: 512 
sectors/track: 63 
tracks/cylinder: 255 
sectors/cylinder: 16065 
cylinders: 121601 
total sectors: 1953525168 
boundstart: 419425083 
boundend: 1953520065 
drivedata: 0 
 
16 partitions: 
#                size           offset  fstype [fsize bsize  cpg] 
  a:          2097125        419425083  4.2BSD   2048 16384    1 
  b:          4715520        421522208    swap 
  c:       1953525168                0  unused 
  d:          8388608        426237728  4.2BSD   2048 16384    1 
  e:         16771072        434626336  4.2BSD   2048 16384    1 
  f:          4194304        451397408  4.2BSD   2048 16384    1 
  g:          2097152        455591712  4.2BSD   2048 16384    1 
  h:         20971520        457688864  4.2BSD   2048 16384    1 
  i:        419425020               63   MSDOS 
  j:          4194304        478660384  4.2BSD   2048 16384    1 
  k:          4194304        482854688  4.2BSD   2048 16384    1 
  l:        629145536        487049024  4.2BSD   4096 32768    1</pre>
<div class="spacer">
</div>
These <span class="unix">OpenBSD</span> partitions are then mounted as follows using <i class="file">/etc/fstab</i>:<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
/dev/sd0a / ffs rw,softdep 1 1 
/dev/sd0d /tmp ffs rw,softdep,nodev,nosuid 1 2 
/dev/sd0e /var ffs rw,softdep,nodev,nosuid 1 2 
/dev/sd0f /usr ffs rw,softdep,nodev 1 2 
/dev/sd0g /usr/X11R6 ffs rw,softdep,nodev 1 2 
/dev/sd0h /usr/local ffs rw,softdep,nodev 1 2 
/dev/sd0i /mnt/example msdos rw,nodev,nosuid 1 2 
/dev/sd0j /usr/src ffs rw,softdep,nodev,nosuid 1 2 
/dev/sd0k /usr/obj ffs rw,softdep,nodev,nosuid 1 2 
/dev/sd0l /home ffs rw,softdep,nodev,nosuid 1 2</pre>
</div>
<div class="section">
<h1 id="x434f4d4d414e44204d4f4445">COMMAND MODE</h1> The <b class="flag">-e</b> flag causes <b class="name">fdisk</b> to enter an interactive command mode. The prompt contains information about the state of the edit process.<div class="spacer">
</div>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit">fdisk:*1&gt;</code></div>
</blockquote>
<div class="spacer">
</div>
&#8216;*&#8217; means that the in-memory copy of the partition table has been modified, but not yet written to disk.<div class="spacer">
</div>
1 is the disk offset of the currently selected boot block being edited. This number will be 2 when editing an extended MBR partition, 3 when editing an extended MBR partition within an extended MBR partition, and so on.<div class="spacer">
</div>
The list of commands and their explanations are given below. Commands may be abbreviated provided enough characters are given to ensure unambiguity.<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">?</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
A synonym for <b class="flag">help</b>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">help</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Display a list of commands that <b class="name">fdisk</b> understands in the interactive edit mode.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">manual</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Display this manual page.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">reinit</b> [<span class="opt"><b class="flag">gpt</b> | <b class="flag">mbr</b></span>]</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Initialize the currently selected, in-memory copy of the boot block. If <b class="flag">gpt</b> is specified a protective MBR and a GPT are initialized. If <b class="flag">mbr</b> is specified only an MBR is initialized. If neither <b class="flag">mbr</b> nor <b class="flag">gpt</b> are specified then a protective MBR and a GPT are initialized if a protective MBR already exists. Otherwise only an MBR is initialized.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">disk</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Display the current drive geometry that <b class="name">fdisk</b> probed using kernel provided information and various heuristics. The disk geometry may be changed at this point. Not available when editing a GPT.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">edit</b> <i class="arg">#</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Edit a given table entry in the memory copy of the current boot block. Sizes may be adjusted in BIOS geometry mode (MBR only) or using sector offsets and sizes. A unit &#8216;b&#8217;, &#8216;k&#8217;, &#8216;m&#8217;, or &#8216;g&#8217; may be appended to indicate bytes, kilobytes, megabytes, or gigabytes. The special size value &#8216;*&#8217; will cause the partition to be sized to use the remainder of the disk.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">flag</b> <i class="arg">#</i> [<span class="opt"><i class="arg">value</i></span>]</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Make the given MBR partition table entry bootable and mark all others as not bootable (only one entry can be marked bootable). The bootable partition is denoted with &#8216;*&#8217;. If a <i class="arg">value</i> of 0 is given, the MBR partition is marked as not bootable, but no other MBR partitions are touched.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">update</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Update the machine MBR bootcode and 0xAA55 signature in the memory copy of the currently selected MBR. Note that this option will overwrite an NT disk signature, if present. Not available when editing a GPT.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">select</b> <i class="arg">#</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Select and load into memory the MBR pointed to by the extended MBR partition table entry in the current boot block. Not available when editing a GPT.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">setpid</b> <i class="arg">#</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Change the partition identifier of the given partition table entry. This command is particularly useful for reassigning an existing partition to <span class="unix">OpenBSD</span>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">swap</b> <i class="arg">#</i> <i class="arg">#</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Swap two partition entries.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">print</b> [<span class="opt"><i class="arg">unit</i></span>]</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Print the currently selected in-memory copy of the partition table to the terminal. A <i class="arg">unit</i> &#8216;b&#8217;, &#8216;k&#8217;, &#8216;m&#8217;, or &#8216;g&#8217; may be appended to indicate bytes, kilobytes, megabytes, or gigabytes. Otherwise the number of sectors is printed.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">write</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Write the in-memory copy of the partition table to disk.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">exit</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Exit the current level of <b class="name">fdisk</b>, either returning to the previously selected in-memory copy of a MBR, or exiting the program if there is none.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">quit</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Exit the current level of <b class="name">fdisk</b>, either returning to the previously selected in-memory copy of a MBR, or exiting the program if there is none. Unlike <span class="emph">exit</span> it does write the modified block out.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">abort</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Quit program without saving current changes.</dd>
</dl>
</div>
<div class="section">
<h1 id="x46494c4553">FILES</h1><dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/usr/mdec/mbr</i></dt>
<dd class="list-tag" style="margin-left: 13.00ex;">
default MBR template</dd>
</dl>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../html5/fstab.html">fstab(5)</a>, <a class="link-man" href="../html8/boot_amd64.html">boot_amd64(8)</a>, <a class="link-man" href="../html8/boot_i386.html">boot_i386(8)</a>, <a class="link-man" href="../html8/boot_macppc.html">boot_macppc(8)</a>, <a class="link-man" href="../html8/boot_zaurus.html">boot_zaurus(8)</a>, <a class="link-man" href="../html8/disklabel.html">disklabel(8)</a></div>
<div class="section">
<h1 id="x43415645415453">CAVEATS</h1> Hand crafted disk layouts are highly error prone. It is common practice, though by no means required, that MBR partitions start on a cylinder boundary (generally head 0, sector 1, but head 1, sector 1 for track 0), and that MBR partitions also end at cylinder boundaries.</div>
</div>
</body>
</html>

