<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/posix/style.css" type="text/css" media="all"/>
<title>
BOOT_CONFIG(8)</title>
</head>
<body>
<div class="mandoc">
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">boot_config</b> &#8212; <span class="desc">how to change kernel configuration at boot</span></div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> <b class="name">BOOT_CONFIG</b> is a kernel option that makes it possible to change the configuration at boot time. The same interface is available from userland, using the <b class="flag">-e</b> argument to <a class="link-man" href="../html8/config.html">config(8)</a>.<div class="spacer">
</div>
The boot time configuration is invoked by passing the <b class="flag">-c</b> option, either from the firmware prompt or, depending on the architecture, when the bootstrap loader prompts for a kernel to boot:<div class="spacer">
</div>
<pre style="margin-left: 0.00ex;" class="lit display">
&gt;&gt; OpenBSD/i386 BOOT 3.26 
<code class="none">boot&gt;</code> <b class="cmd">boot -c</b> 
booting hd0a:/bsd: ... 
... 
real mem  = 1073086464 (1023MB) 
avail mem = 1043189760 (994MB) 
User Kernel Config 
UKC&gt;</pre>
<div class="spacer">
</div>
Changes made can be saved for the next reboot, by using <a class="link-man" href="../html8/config.html">config(8)</a>.</div>
<div class="section">
<h1 id="x434f4d4d414e4453">COMMANDS</h1><dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">add</b> <i class="arg">dev</i></dt>
<dd class="list-tag" style="margin-left: 19.00ex;">
Add a device through copying another.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">base</b> <b class="flag">8</b> | <b class="flag">10</b> | <b class="flag">16</b></dt>
<dd class="list-tag" style="margin-left: 19.00ex;">
Change the base of numbers displayed and entered.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">change</b> <i class="arg">devno</i> | <i class="arg">dev</i></dt>
<dd class="list-tag" style="margin-left: 19.00ex;">
Modify one or more devices.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">disable</b> <i class="arg">devno</i> | <i class="arg">dev</i></dt>
<dd class="list-tag" style="margin-left: 19.00ex;">
Disable one or more devices.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">enable</b> <i class="arg">devno</i> | <i class="arg">dev</i></dt>
<dd class="list-tag" style="margin-left: 19.00ex;">
Enable one or more devices.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">exit</b></dt>
<dd class="list-tag" style="margin-left: 19.00ex;">
Continue boot.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">find</b> <i class="arg">devno</i> | <i class="arg">dev</i></dt>
<dd class="list-tag" style="margin-left: 19.00ex;">
Find one or more devices.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">help</b></dt>
<dd class="list-tag" style="margin-left: 19.00ex;">
Give a short summary of all commands and their arguments.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">list</b></dt>
<dd class="list-tag" style="margin-left: 19.00ex;">
Show all known devices, a screen at a time.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">lines</b> [<span class="opt"><i class="arg">count</i></span>]</dt>
<dd class="list-tag" style="margin-left: 19.00ex;">
Set the number of rows per page.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">quit</b></dt>
<dd class="list-tag" style="margin-left: 19.00ex;">
Continue boot.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">show</b> [<span class="opt"><i class="arg">attr</i> [<span class="opt"><i class="arg">val</i></span>]</span>]</dt>
<dd class="list-tag" style="margin-left: 19.00ex;">
Show all devices for which attribute <i class="arg">attr</i> has the value <i class="arg">val</i>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">timezone</b> [<span class="opt"><i class="arg">minuteswest</i> [<span class="opt"><i class="arg">dst</i></span>]</span>]</dt>
<dd class="list-tag" style="margin-left: 19.00ex;">
Change the <b class="var">tz</b> timezone structure. <b class="var">minuteswest</b> is the number of minutes west of GMT and <b class="var">dst</b> is non-zero if Daylight Saving Time is in effect. Without arguments, displays its current value.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">verbose</b></dt>
<dd class="list-tag" style="margin-left: 19.00ex;">
Toggle the autoconfig verbose variable.</dd>
</dl>
</div>
<div class="section">
<h1 id="x4558414d504c4553">EXAMPLES</h1> The Ethernet card is not detected at boot because the kernel configuration does not match the physical hardware configuration, e.g. wrong IRQ in OpenBSD/i386. The Ethernet card is supposed to use the <a class="link-man" href="../html4/ne.html">ne(4)</a> driver.<div class="spacer">
</div>
<pre style="margin-left: 0.00ex;" class="lit display">
<code class="none">UKC&gt;</code> <b class="cmd">find ne</b> 
24 ne0 at isa0 port 0x240 size 0 iomem 0xd8000 iosiz 0 irq 9 drq -1 drq2 -1 flags 0x0 
25 ne1 at isa0 port 0x300 size 0 iomem -1 iosiz 0 irq 10 drq -1 drq2 -1 flags 0x0 
26 ne* at isapnp0 port -1 size 0 iomem -1 iosiz 0 irq -1 drq -1 flags 0x0 
27 ne* at pci* dev -1 function -1 flags 0x0 
28 ne* at pcmcia* function -1 irq -1 flags 0x0 
UKC&gt;</pre>
<div class="spacer">
</div>
ne1 seems to match the configuration except it uses IRQ 5 instead of IRQ 10. So the irq on ne1 should be changed via the <i class="farg">change</i> command. The device can be specified by either name or number.<div class="spacer">
</div>
<pre style="margin-left: 0.00ex;" class="lit display">
<code class="none">UKC&gt;</code> <b class="cmd">change ne1</b> 
25 ne1 at isa0 port 0x300 size 0 iomem -1 iosiz 0 irq 10 drq -1 drq2 -1 flags 0x0 
<code class="none">change (y/n) ?</code> <b class="cmd">y</b> 
<code class="none">port [0x300] ?</code> 
<code class="none">size [0] ?</code> 
<code class="none">iomem [-1] ?</code> 
<code class="none">iosiz [0] ?</code> 
<code class="none">irq [10] ?</code> <b class="cmd">5</b> 
<code class="none">drq [-1] ?</code> 
<code class="none">drq2 [-1] ?</code> 
<code class="none">flags [0] ?</code> 
25 ne1 changed 
25 ne1 at isa0 port 0x300 size 0 iomem -1 iosiz 0 irq 5 drq -1 drq2 -1 flags 0x0 
UKC&gt;</pre>
<div class="spacer">
</div>
The show command is useful for finding which devices have a certain attribute. It can also be used to find those devices with a particular value for an attribute.<div class="spacer">
</div>
<pre style="margin-left: 0.00ex;" class="lit display">
<code class="none">UKC&gt;</code> <b class="cmd">show slot</b> 
  2 ahc* at eisa0 slot -1 flags 0x0 
 10 uha* at eisa0 slot -1 flags 0x0 
 12 ep0 at eisa0 slot -1 flags 0x0 
 17 ep* at eisa0 slot -1 flags 0x0 
102 ahb* at eisa0 slot -1 flags 0x0 
103 fea* at eisa0 slot -1 flags 0x0 
<code class="none">UKC&gt;</code> <b class="cmd">show port 0x300</b> 
 25 ne1 at isa0 port 0x300 size 0 iomem -1 iosiz 0 irq 10 drq -1 drq2 -1 flags 0x0 
 72 we1 at isa0 port 0x300 size 0 iomem 0xcc000 iosiz 0 irq 10 drq -1 drq2 -1 flags 0x0 
 75 el0 at isa0 port 0x300 size 0 iomem -1 iosiz 0 irq 9 drq -1 drq2 -1 flags 0x0 
 77 ie1 at isa0 port 0x300 size 0 iomem -1 iosiz 0 irq 10 drq -1 drq2 -1 flags 0x0 
UKC&gt;</pre>
<div class="spacer">
</div>
It is possible to add new devices, but only devices that were linked into the kernel. If a new device is added, following devices will be renumbered.<div class="spacer">
</div>
<pre style="margin-left: 0.00ex;" class="lit display">
<code class="none">UKC&gt;</code> <b class="cmd">find ep</b> 
 11 ep0 at isa0 port -1 size 0 iomem -1 iosiz 0 irq -1 drq -1 drq2 -1 flags 0x0 
 12 ep0 at eisa0 slot -1 flags 0x0 
 13 ep0 at pci* dev -1 function -1 flags 0x0 
 14 ep* at isapnp0 port -1 size 0 iomem -1 iosiz 0 irq -1 drq -1 flags 0x0 
 15 ep* at isa0 port -1 size 0 iomem -1 iosiz 0 irq -1 drq -1 drq2 -1 flags 0x0 
 16 ep* at eisa0 slot -1 flags 0x0 
 17 ep* at pci* dev -1 function -1 flags 0x0 
 18 ep* at pcmcia* dev -1 irq -1 flags 0x0 
<code class="none">UKC&gt;</code> <b class="cmd">add ep1</b> 
<code class="none">Clone Device (DevNo, 'q' or '?') ?</code> <b class="cmd">13</b> 
<code class="none">Insert before Device (DevNo, 'q' or '?')</code> <b class="cmd">14</b> 
 14 ep1 at pci* dev -1 function -1 
<code class="none">UKC&gt;</code> <b class="cmd">change 14</b> 
 14 ep1 at pci* dev -1 function -1 
<code class="none">change (y/n) ?</code> <b class="cmd">y</b> 
<code class="none">dev [-1] ?</code> <b class="cmd">14</b> 
<code class="none">function [-1] ?</code> 
<code class="none">flags [0] ?</code> <b class="cmd">18</b> 
 14 ep1 changed 
 14 ep1 at pci* dev 14 function -1 flags 0x12 
UKC&gt;</pre>
<div class="spacer">
</div>
When configuration is completed, booting can proceed by issuing the <b class="cmd">quit</b> or <b class="cmd">exit</b> commands.<div class="spacer">
</div>
<pre style="margin-left: 0.00ex;" class="lit display">
<code class="none">UKC&gt;</code> <b class="cmd">quit</b> 
Continuing... 
mainbus0 (root)</pre>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../html8/config.html">config(8)</a></div>
<div class="section">
<h1 id="x415554484f5253">AUTHORS</h1> <span class="author">Mats O Jansson</span> &lt;<a class="link-mail" href="mailto:moj@stacken.kth.se">moj@stacken.kth.se</a>&gt;</div>
<div class="section">
<h1 id="x42554753">BUGS</h1> The <b class="cmd">add</b> command is rather restricted, and might be expanded in the future.</div>
</div>
</body>
</html>

