<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/posix/style.css" type="text/css" media="all"/>
<title>
MKHYBRID(8)</title>
</head>
<body>
<div class="mandoc">
<table class="head">
<tbody>
<tr>
<td class="head-ltitle">
MKHYBRID(8)</td>
<td class="head-vol">
System Manager's Manual</td>
<td class="head-rtitle">
MKHYBRID(8)</td>
</tr>
</tbody>
</table>
<div class="section">
<h1>NAME</h1> mkhybrid - create an hybrid ISO9660/JOLIET/HFS filesystem with optional Rock Ridge attributes.</div>
<div class="section">
<h1>SYNOPSIS</h1> <b>mkhybrid</b> [ <b>-a</b> ] [ <b>-abstract</b> <i>FILE</i> ] [ <b>-biblio</b> <i>FILE</i> ] [ <b>-b</b> <i>boot_image</i> ] [ <b>-c</b> <i>boot_catalog</i> ] [ <b>-copyright</b> <i>FILE</i> ] [ <b>-A</b> <i>application_id</i> ] [ <b>-f</b> ] [ <b>-d</b> ] [ <b>-D</b> ] [ <b>-hide</b> <i>glob</i> ] [ <b>-hide-list</b> <i>file</i> ] [ <b>-hide-joliet</b> <i>glob</i> ] [ <b>-hide-joliet-list</b> <i>file</i> ] [ <b>-J</b> ] [ <b>-l</b> ] [ <b>-L</b> ] [ <b>-log-file</b> <i>log_file</i> ] [ <b>-no-split-symlink-components</b> ] [ <b>-no-split-symlink-fields</b> ] [ <b>-path-list</b> <i>file</i> ] [ <b>-p</b> <i>preparer</i> ] [ <b>-print-size</b> ] [ <b>-P</b> <i>publisher</i> ] [ <b>-quiet</b> ] [ <b>-r</b> ] [ <b>-R</b> ] [ <b>-sysid</b> <i>ID</i> ] [ <b>-T</b> | <b>-table-name</b> <i>TABLE_NAME</i> ] [ <b>-v</b> ] [ <b>-V</b> <i>volid</i> ] [ <b>-volset</b> <i>ID</i> ] [ <b>-volset-size</b> <i>#</i> ] [ <b>-volset-seqno</b> <i>#</i> ] [ <b>-x</b> <i>path</i> ] [ <b>-z</b> ] [ <b>-m</b> <i>glob</i> ] [ <b>-hfs</b> | <b>-apple</b> ] [ <b>-map</b> <i>mapping_file</i> ] [ <b>-magic</b> <i>magic_file</i> ] [ <b>-no-mac-files</b> ] [ <b>-probe</b> ] [ <b>-no-desktop</b> ] [ <b>-mac-name</b> ] [ <b>-boot-hfs-file</b> <i>driver_file</i> [ <b>-part</b> ] [ <b>-auto</b> <i>AutoStart_file</i> ] [ <b>-cluster-size</b> <i>size</i> ] [ <b>-hide-hfs</b> <i>glob</i> ] [ <b>-hide-hfs-list</b> <i>file</i> ] [ <b>-hfs-volid</b> <i>hfs_volid</i> ] [ <b>-hfs-bless</b> <i>folder_name</i> ] [ <b>--cap</b> ] [ <b>--netatalk</b> ] [ <b>--double</b> ] [ <b>--ethershare</b> ] [ <b>--ushare</b> ] [ <b>--exchange</b> ] [ <b>--sgi</b> ] [ <b>--xinet</b> ] [ <b>--macbin</b> ] [ <b>--single</b> ] <b>-o</b> <i>filename</i> <i>pathspec [pathspec]</i></div>
<div class="section">
<h1>DESCRIPTION</h1> <b>mkhybrid</b> is effectively a pre-mastering program to generate an HFS/ISO9660/JOLIET hybrid filesystem. It is based on <b>mkisofs</b>(1) and will generate a pure ISO9660 filesystem unless the HFS hybrid command line options are given.<div class="spacer">
</div>
<b>mkhybrid</b> can generate a <i>true</i> (or <i>shared)</i> HFS hybrid filesystem. The same files are seen as HFS files when accessed from a Macintosh and as ISO9660 files when accessed from other machines. HFS stands for <i>Hierarchical File System</i> and is the native file system used on Macintosh computers.<div class="spacer">
</div>
As an alternative, <b>mkhybrid</b> can generate the <i>Apple Entensions to ISO9660</i> for each file. These extensions provide each file with CREATOR, TYPE and certain Finder Flags when accessed from a Macintosh. See the <b>MACINTOSH FILE FORMATS</b> section below.<div class="spacer">
</div>
<b>mkhybrid</b> takes a snapshot of a given directory tree, and generates a binary image which will correspond to an ISO9660 or HFS filesystem when written to a block device.<div class="spacer">
</div>
<b>mkhybrid</b> is also capable of generating the System Use Sharing Protocol records specified by the Rock Ridge Interchange Protocol.  This is used to further describe the files in the iso9660 filesystem to a unix host, and provides information such as longer filenames, uid/gid, posix permissions, and block and character devices.<div class="spacer">
</div>
Each file written to the iso9660 filesystem must have a filename in the 8.3 format (8 characters, period, 3 characters, all upper case), even if Rock Ridge is in use.  This filename is used on systems that are not able to make use of the Rock Ridge extensions (such as MS-DOS), and each filename in each directory must be different from the other filenames in the same directory. <b>mkhybrid</b> generally tries to form correct names by forcing the unix filename to upper case and truncating as required, but often times this yields unsatisfactory results when there are cases where the truncated names are not all unique. <b>mkhybrid</b> assigns weightings to each filename, and if two names that are otherwise the same are found the name with the lower priority is renamed to have a 3 digit number as an extension (where the number is guaranteed to be unique).  An example of this would be the files foo.bar and foo.bar.~1~ - the file foo.bar.~1~ would be written as FOO.000;1 and the file foo.bar would be written as FOO.BAR;1<div class="spacer">
</div>
When used with the HFS options, <b>mkhybrid</b> will attempt to recognise files stored in a number of Apple/Unix file formats and will copy the data and resource forks as well as any relevant finder information. See the <b>MACINTOSH FILE FORMATS</b> section below for more about formats <b>mkhybrid</b> supports.<div class="spacer">
</div>
Note that <b>mkhybrid</b> is not designed to communicate with the writer directly.  Most writers have proprietary command sets which vary from one manufacturer to another, and you need a specialized tool to actually burn the disk. The <b>cdwrite</b> utility is one such tool that runs under Linux and performs this task. The latest version of <b>cdwrite</b> is capable of communicating with Phillips/IMS/Kodak, HP and Yamaha drives. Most writers come with some version of DOS software that allows a direct image copy of an iso9660 image to the writer.  The current version of <b>cdwrite</b> is available from ftp://sunsite.unc.edu/utils/disk-management/cdwrite-2.0.tar.gz Note that cdwrite has not been actively maintained in recent times.<div class="spacer">
</div>
The <b>cdrecord</b> utility is another utility capable of burning an actual disc.  The latest version of <b>cdrecord</b> is available from ftp://ftp.fokus.gmd.de/pub/unix/cdrecord Cdrecord is under constant development.<div class="spacer">
</div>
Also you should know that most cd writers are very particular about timing. Once you start to burn a disc, you cannot let their buffer empty before you are done, or you will end up with a corrupt disc.  Thus it is critical that you be able to maintain an uninterrupted data stream to the writer for the entire time that the disc is being written.<div class="spacer">
</div>
<div style="height: 0.00em;">
&#160;</div>
<i>pathspec</i> is the path of the directory tree to be copied into the iso9660 filesystem. Multiple paths can be specified, and <b>mkhybrid</b> will merge the files found in all of the specified path components to form the cdrom image.<div class="spacer">
</div>
It is possible to graft the paths at points other than the root directory, and it is possible to graft files or directories onto the cdrom image with names different than what they have in the source filesystem.  This is easiest to illustrate with a couple of examples.   Let's start by assuming that a local file ../old.lis exists, and you wish to include it in the cdrom image.<div style="height: 1.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
	foo/bar/=../old.lis<div style="height: 1.00em;">
&#160;</div>
will include the file old.lis in the cdrom image at /foo/bar/old.lis, while<div style="height: 1.00em;">
&#160;</div>
	foo/bar/xxx=../old.lis<div style="height: 1.00em;">
&#160;</div>
will include the file old.lis in the cdrom image at /foo/bar/xxx.  The same sort of syntax can be used with directories as well. <b>mkhybrid</b> will create any directories required such that the graft points exist on the cdrom image - the directories do not need to appear in one of the paths.  Any directories that are created on the fly like this will have permissions 0555 and appear to be owned by the person running mkhybrid.  If you wish other permissions or owners of the intermediate directories, the easiest solution is to create real directories in the path such that mkhybrid doesn't have to invent them.<div class="spacer">
</div>
<i>mkhybrid</i> will also run on Win9X/NT4 machines when compiled with Cygnus' cygwin (available from http://sourceware.cygnus.com/cygwin/). Therefore most references in this man page to <i>Unix</i> can be replaced with <i>Win32</i>.<div style="height: 1.00em;">
&#160;</div>
</div>
<div class="section">
<h1>OPTIONS</h1><dl>
<dt>
<b>-a</b></dt>
<dd>
Include all files on the iso9660 filesystem.  Normally files that contain the characters '~' or '#' will not be included (these are typically backup files for editors under unix).</dd>
</dl>
<dl>
<dt>
<b>-abstract</b><i> FILE</i></dt>
<dd>
Specifies the abstract file name. This parameter can also be set in the file <b>.mkisofsrc</b> with ABST=filename. If specified in both places, the command line version is used.</dd>
</dl>
<dl>
<dt>
<b>-A</b><i> application_id</i></dt>
<dd>
Specifies a text string that will be written into the volume header. This should describe the application that will be on the disc.  There is space on the disc for 128 characters of information.  This parameter can also be set in the file <i>.mkisofsrc</i> with APPI=id. If specified in both places, the command line version is used.</dd>
</dl>
<dl>
<dt>
<b>-biblio</b><i> FILE</i></dt>
<dd>
Specifies the bibliographic file name. This parameter can also be set in the file <b>.mkisofsrc</b> with BIBLO=filename. If specified in both places, the command line version is used.</dd>
</dl>
<dl>
<dt>
<b>-b</b><i> boot_image</i></dt>
<dd>
Specifies the path and filename of the boot image to be used when making an &quot;El Torito&quot; bootable CD. The pathname must be relative to the source path specified to <b>mkhybrid.</b> This option is required to make a bootable CD. The boot image must be exactly the size of one of a 1.2, 1.44, or 2.88 MB floppy, or of a 2 KB CD sector, and <b>mkhybrid</b> will use this size when creating the output iso9660 filesystem. If the boot file is 2 KB long, a no-emulation boot CD will be created, and the whole 2 KB will be read on boot. If the boot file is a floppy image, then only the first 512-byte sector will be read from the boot image (it is emulating a normal floppy drive). This will work, for example, if the boot image is a LILO-based boot floppy.</dd>
</dl>
<dl>
<dt>
<b>-C</b><i> last_sess_start,next_sess_start</i></dt>
<dd>
This option is needed when <b>mkisofs</b> is used to create the image of a second session or a higher level session for a multi session disk. The option <b>-C</b> takes a pair of two numbers separated by a comma. The first number is the sector number of the first sector in the last session of the disk that should be appended to. The second number is the starting sector number of the new session. The expected pair of numbers may be retrieved by calling <b>cdrecord -msinfo ...</b> the <b>-C</b> option may only be uses in conjunction with the <b>-M</b> option.</dd>
</dl>
<dl>
<dt>
<b>-c</b><i> boot_catalog</i></dt>
<dd>
Specifies the path and filename of the boot catalog to be used when making an &quot;El Torito&quot; bootable CD. The pathname must be relative to the source path specified to <b>mkhybrid.</b> This option is required to make a bootable CD. This file will be created by <b>mkhybrid</b> in the source filesystem, so be sure the specified filename does not conflict with an existing file, as it will be quietly overwritten! Usually a name like &quot;boot.catalog&quot; is chosen.</dd>
</dl>
<dl>
<dt>
<b>-copyright</b><i> FILE</i></dt>
<dd>
Specifies the Copyright file name. This parameter can also be set in the file <b>.mkisofsrc</b> with COPY=filename. If specified in both places, the command line version is used.</dd>
</dl>
<dl>
<dt>
<b>-d</b></dt>
<dd>
Omit trailing period from files that do not have a period.  This violates the ISO9660 standard, but it happens to work on many systems.  Use with caution.</dd>
</dl>
<dl>
<dt>
<b>-D</b></dt>
<dd>
Do not use deep directory relocation, and instead just pack them in the way we see them.  This violates the ISO9660 standard, but it works on many systems.  Use with caution.</dd>
</dl>
<dl>
<dt>
<b>-f</b></dt>
<dd>
Follow symbolic links when generating the filesystem.  When this option is not in use, symbolic links will be entered using Rock Ridge if enabled, otherwise the file will be ignored.</dd>
</dl>
<dl>
<dt>
<b>-hide</b><i> glob</i></dt>
<dd>
Hide <i>glob</i> from being seen on the ISO9660 or Rock Ridge directory. <i>glob</i> is a shell wild-card-style pattern that must match any part of the filename or path. Multiple globs may be hidden (up to 1000). If <i>glob</i> matches a directory, then the contents of that directory will be hidden. All the hidden files will still be written to the output CD image file. Should be used with the <i>-hide-joliet</i> option.</dd>
</dl>
<dl>
<dt>
<b>-hide-list</b><i> file</i></dt>
<dd>
A file containing a list of <i>globs</i> to be hidden as above.</dd>
</dl>
<dl>
<dt>
<b>-hide-joliet</b><i> glob</i></dt>
<dd>
Hide <i>glob</i> from being seen on the Joliet directory. <i>glob</i> is a shell wild-card-style pattern that must match any part of the filename or path. Multiple globs may be hidden (up to 1000). If <i>glob</i> matches a directory, then the contents of that directory will be hidden. All the hidden files will still be written to the output CD image file. Should be used with the <i>-hide</i> option.</dd>
</dl>
<dl>
<dt>
<b>-hide-joliet-list</b><i> file</i></dt>
<dd>
A file containing a list of <i>globs</i> to be hidden as above.</dd>
</dl>
<dl>
<dt>
<b>-l</b></dt>
<dd>
Allow full 32 character filenames.  Normally the ISO9660 filename will be in an 8.3 format which is compatible with MS-DOS, even though the ISO9660 standard allows filenames of up to 32 characters.  If you use this option, the disc may be difficult to use on a MS-DOS system, but this comes in handy on some other systems (such as the Amiga).  Use with caution.</dd>
</dl>
<dl>
<dt>
<b>-J</b></dt>
<dd>
Generate Joliet directory records in addition to regular iso9660 file names.  This is primarily useful when the discs are to be used on Windows-NT or Windows-95 machines.   The Joliet filenames are specified in Unicode and each path component can be up to 64 Unicode characters long.</dd>
</dl>
<dl>
<dt>
<b>-L</b></dt>
<dd>
Allow filenames to begin with a period.  Usually, a leading dot is replaced with an underscore in order to maintain MS-DOS compatibility.</dd>
</dl>
<dl>
<dt>
<b>-log-file</b><i> log_file</i></dt>
<dd>
Redirect all error, warning and informational messages to <i>log_file</i> instead of the standard error.</dd>
</dl>
<dl>
<dt>
<b>-m</b><i> glob</i></dt>
<dd>
Exclude <i>glob</i> from being written to CDROM. <i>glob</i> is a shell wild-card-style pattern that must match part of the filename (not the path as with option <b>-x</b>). Technically <i>glob</i> is matched against the <i>d-&gt;d_name</i> part of the directory entry. Multiple globs may be excluded (up to 1000). Example:<div style="height: 1.00em;">
&#160;</div>
mkhybrid -o rom -m '*.o' -m core -m foobar<div style="height: 1.00em;">
&#160;</div>
would exclude all files ending in &quot;.o&quot;, called &quot;core&quot; or &quot;foobar&quot; to be copied to CDROM. Note that if you had a directory called &quot;foobar&quot; it too (and of course all its descendants) would be excluded.<div style="height: 1.00em;">
&#160;</div>
NOTE: The -m and -x option description should both be updated, they are wrong. Both now work identical and use filename globbing. A file is exluded if either the last component matches or the whole path matches.</dd>
</dl>
<dl>
<dt>
<b>-exclude-list</b><i> file</i></dt>
<dd>
A file containing a list of <i>globs</i> to be exclude as above.</dd>
</dl>
<dl>
<dt>
<b>-M</b><i> path</i></dt>
<dd>
or</dd>
</dl>
<dl>
<dt>
<b>-M</b><i> device</i></dt>
<dd>
Specifies path to existing iso9660 image to be merged. The alternate form takes a SCSI device specifier that uses the same syntax as the <b>dev=</b> parameter of <b>cdrecord.</b> The output of <b>mkhybrid</b> will be a new session which should get written to the end of the image specified in -M.  Typically this requires multi-session capability for the recorder and cdrom drive that you are attempting to write this image to. This option may only be used in conjunction with the <b>-C</b> option.</dd>
</dl>
<dl>
<dt>
<b>-N</b></dt>
<dd>
Omit version numbers from ISO9660 file names.  This may violate the ISO9660 standard, but no one really uses the version numbers anyway.  Use with caution.</dd>
</dl>
<dl>
<dt>
<b>-no-split-symlink-components</b></dt>
<dd>
Don't split the SL components, but begin a new Continuation Area (CE) instead. This may waste some space, but the SunOS 4.1.4 cdrom driver has a bug in reading split SL components (link_size = component_size instead of link_size += component_size).</dd>
</dl>
<dl>
<dt>
<b>-no-split-symlink-fields</b></dt>
<dd>
Don't split the SL fields, but begin a new Continuation Area (CE) instead. This may waste some space, but the SunOS 4.1.4 and Solaris 2.5.1 cdrom driver have a bug in reading split SL fields (a `/' can be dropped).</dd>
</dl>
<dl>
<dt>
<b>-o</b><i> filename</i></dt>
<dd>
is the name of the file to which the iso9660 filesystem image should be written.  This can be a disk file, a tape drive, or it can correspond directly to the device name of the optical disc writer.  If not specified, stdout is used.  Note that the output can also be a block special device for a regular disk drive, in which case the disk partition can be mounted and examined to ensure that the premastering was done correctly.</dd>
</dl>
<dl>
<dt>
<b>-path-list</b><i> file</i></dt>
<dd>
A file containing a list of <i>filespec</i> directories and filenames to be added to the ISO9660 filesystem. This list of filespecs are processed after any that appear on the command line. If the argument is <i>-</i>, then the list is read from the standard input.</dd>
</dl>
<dl>
<dt>
<b>-P</b><i> publisher_id</i></dt>
<dd>
Specifies a text string that will be written into the volume header. This should describe the publisher of the CDROM, usually with a mailing address and phone number.  There is space on the disc for 128 characters of information.  This parameter can also be set in the file <i>.mkisofsrc</i> with PUBL=. If specified in both places, the command line version is used.</dd>
</dl>
<dl>
<dt>
<b>-p</b><i> preparer_id</i></dt>
<dd>
Specifies a text string that will be written into the volume header. This should describe the preparer of the CDROM, usually with a mailing address and phone number.  There is space on the disc for 128 characters of information.  This parameter can also be set in the file <i>.mkisofsrc</i> with PREP=. If specified in both places, the command line version is used.</dd>
</dl>
<dl>
<dt>
<b>-print-size</b></dt>
<dd>
Print estimated filesystem size and exit. This option is needed for Disk At Once mode and with some CD-R drives when piping directly into <b>cdrecord.</b> In this case it is needed to know the size of the filesystem before the actual CD-creation is done. The option -print-size allows to get this size from a &quot;dry-run&quot; before the CD is actually written.</dd>
</dl>
<dl>
<dt>
<b>-quiet</b></dt>
<dd>
This makes <b>mkhybrid</b> even less verbose.  No progress output will be provided.</dd>
</dl>
<dl>
<dt>
<b>-R</b></dt>
<dd>
Generate SUSP and RR records using the Rock Ridge protocol to further describe the files on the iso9660 filesystem.</dd>
</dl>
<dl>
<dt>
<b>-r</b></dt>
<dd>
This is like the -R option, but file ownership and modes are set to more useful values.  The uid and gid are set to zero, because they are usually only useful on the author's system, and not useful to the client.  All the file read bits are set true, so that files and directories are globally readable on the client.  If any execute bit is set for a file, set all of the execute bits, so that executables are globally executable on the client.  If any search bit is set for a directory, set all of the search bits, so that directories are globally searchable on the client.  All write bits are cleared, because the CD-Rom will be mounted read-only in any case.  If any of the special mode bits are set, clear them, because file locks are not useful on a read-only file system, and set-id bits are not desirable for uid 0 or gid 0. When used on Win32, the execute bit is set on <i>all</i> files.</dd>
</dl>
<dl>
<dt>
<b>-sysid</b><i> ID</i></dt>
<dd>
Specifies the system ID. This parameter can also be set in the file <b>.mkisofsrc</b> with SYSI=system_id. If specified in both places, the command line version is used.</dd>
</dl>
<dl>
<dt>
<b>-T</b></dt>
<dd>
Generate a file TRANS.TBL in each directory on the CDROM, which can be used on non-Rock Ridge capable systems to help establish the correct file names. There is also information present in the file that indicates the major and minor numbers for block and character devices, and each symlink has the name of the link file given.</dd>
</dl>
<dl>
<dt>
<b>-table-name</b><i> TABLE_NAME</i></dt>
<dd>
Alternative translation table file name (see above). Implies the <i>-T</i> option.</dd>
</dl>
<dl>
<dt>
<b>-V</b><i> volid</i></dt>
<dd>
Specifies the volume ID (volume name or label) to be written into the master block.  This parameter can also be set in the file <i>.mkisofsrc</i> with VOLI=id. If specified in both places, the command line version is used.  Note that if you assign a volume ID, this is the name that will be used as the mount point used by the Solaris volume management system and the name that is assigned to the disc on a Windows or Mac platform.</dd>
</dl>
<dl>
<dt>
<b>-volset</b><i> ID</i></dt>
<dd>
Specifies the volset ID. This parameter can also be set in the file <b>.mkisofsrc</b> with VOLS=volset_id. If specified in both places, the command line version is used.</dd>
</dl>
<dl>
<dt>
<b>-volset-size</b><i> #</i></dt>
<dd>
Sets the volume set size to #. The volume set size is the number of CD's that are in a CD set. The <b>-volset-size</b> option may be used to create CD's that are part of e.g. a Operation System installation set of CD's. The option <b>-volset-size</b> must be specified before <b>-volset-seqno</b> on each command line.</dd>
</dl>
<dl>
<dt>
<b>-volset-seqno</b><i> #</i></dt>
<dd>
Sets the volume set sequence number to #. The volume set sequence number is the index number of the current CD in a CD set. The option <b>-volset-size</b> must be specified before <b>-volset-seqno</b> on each command line.</dd>
</dl>
<dl>
<dt>
<b>-v</b></dt>
<dd>
Verbose execution. If given twice on the command line, extra debug information will be printed.</dd>
</dl>
<dl>
<dt>
<b>-x</b><i> path</i></dt>
<dd>
Exclude <i>path</i> from being written to CDROM. <i>path</i> must be the complete pathname that results from concatenating the pathname given as command line argument and the path relative to this directory. Multiple paths may be excluded (up to 1000). Example:<div style="height: 1.00em;">
&#160;</div>
mkhybrid -o cd -x /local/dir1 -x /local/dir2 /local<div style="height: 1.00em;">
&#160;</div>
NOTE: The -m and -x option description should both be updated, they are wrong. Both now work identical and use filename globbing. A file is exluded if either the last component matches or the whole path matches.</dd>
</dl>
<dl>
<dt>
<b>-z</b></dt>
<dd>
Generate special SUSP records for transparently compressed files.  This is only of use and interest for hosts that support transparent decompression. This is an experimental feature, and no hosts yet support this, but there are ALPHA patches for Linux that can make use of this feature.</dd>
</dl>
</div>
<div class="section">
<h1>HFS OPTIONS</h1><dl>
<dt>
<b>-hfs</b></dt>
<dd>
Create an ISO9660/HFS hybrid CD. By default, all source files are checked to attempt to recognise files stored in one of the known Apple/Unix file formats. See the <b>MACINTOSH FILE FORMATS</b> section below for more about these formats</dd>
</dl>
<dl>
<dt>
<b>-apple</b></dt>
<dd>
Create an ISO9660 CD with Apple's extensions. Similar to the <i>-hfs</i> option, except that the Apple Extensions to ISO9660 are added instead of creating an HFS hybrid volume.</dd>
</dl>
<dl>
<dt>
<b>-map</b><i> mapping_file</i></dt>
<dd>
Use the <i>mapping_file</i> to set the CREATOR and TYPE information for a file based on the filename's extension. A filename is mapped only if it is not one of the know Apple/Unix file formats. See the <b>CREATOR/TYPE</b> section below.</dd>
</dl>
<dl>
<dt>
<b>-magic</b><i> magic_file</i></dt>
<dd>
The CREATOR and TYPE information is set by using a file's <i>magic number</i> (usually the first few bytes of a file). The <i>magic_file</i> is only used if a file is not one of the known Apple/Unix file formats, or the filename extension has not been mapped using the <i>-map</i> option. See the <b>CREATOR/TYPE</b> section below for more details.</dd>
</dl>
<dl>
<dt>
<b>-no-mac-files</b></dt>
<dd>
Disables searching for Apple/Unix files. This will speed up processing if there are none of the known Apple/Unix format files in the source directory trees (the source directories just contain ordinary files). The <i>-map</i> and/or <i>-magic</i> option can be used to set the CREATOR and TYPE for each file.</dd>
</dl>
<dl>
<dt>
<b>-probe</b></dt>
<dd>
Search the contents of files for Apple/Unix file formats. When <i>-hfs</i> or <i>-apple</i> is used, mkhybrid will attempt to work out automatically what type of Apple/Unix format each file is. However, the only way to check for <i>MacBinary</i> and <i>AppleSingle</i> files is to open and read them. Therefore, if <i>MacBinary</i> or <i>AppleSingle</i> format files are being used, then you need to give this option. This saves opening and searching every file if no <i>MacBinary</i> and/or <i>AppleSingle</i> files exist. Or you could use the relevant <i>double dash</i> options given below.</dd>
</dl>
<dl>
<dt>
<b>-no-desktop</b></dt>
<dd>
Do not create (empty) Desktop files. New HFS Desktop files will be created when the CD is used on a Macintosh (and stored in the System Folder). By default, empty Desktop files are added to the HFS volume.</dd>
</dl>
<dl>
<dt>
<b>-mac-name</b></dt>
<dd>
Use the HFS filename as the starting point for the ISO9660, Joliet and Rock Ridge file names. See the <b>MACINTOSH FILE NAMES</b> section below for more information.</dd>
</dl>
<dl>
<dt>
<b>-boot-hfs-file</b><i> driver_file</i></dt>
<dd>
Installs the <i>driver_file</i> that <i>may</i> make the CD bootable on a Macintosh. See the <b>HFS BOOT DRIVER</b> section below. (Alpha).</dd>
</dl>
<dl>
<dt>
<b>-part</b></dt>
<dd>
Generate an HFS partition table. By default, no partition table is generated, but some older Macintosh CDROM drivers need an HFS partition table on the CDROM to be able to recognize a hybrid CDROM.</dd>
</dl>
<dl>
<dt>
<b>-auto</b><i> AutoStart_file</i></dt>
<dd>
Make the HFS CD use the QuickTime 2.0 Autostart feature to launch an application or document. The given filename must be the name of a document or application located at the top level of the CD. The filename must be less than 12 characters. (Alpha).</dd>
</dl>
<dl>
<dt>
<b>-cluster-size</b><i> size</i></dt>
<dd>
Set the size in bytes of the cluster or allocation units of PC Exchange files. See the <b>MACINTOSH FILE FORMATS</b> section below.</dd>
</dl>
<dl>
<dt>
<b>-hide-hfs</b><i> glob</i></dt>
<dd>
Hide <i>glob</i> from the HFS volume. The file or directory will still exist in the ISO9660 and/or Joliet directory. <i>glob</i> is a shell wild-card-style pattern that must match any part of the filename Multiple globs may be excluded (up to 1000). Example:<div style="height: 1.00em;">
&#160;</div>
mkhybrid -o rom -hfs -hide-hfs '*.o' -hide-hfs foobar<div style="height: 1.00em;">
&#160;</div>
would exclude all files ending in &quot;.o&quot; or called &quot;foobar&quot; from the HFS volume. Note that if you had a directory called &quot;foobar&quot; it too (and of course all its descendants) would be excluded. The <i>glob</i> can also be a path name relative to the source directories given on the command line. Example:<div style="height: 1.00em;">
&#160;</div>
mkhybrid -o rom -hfs -hide-hfs src/html src<div style="height: 1.00em;">
&#160;</div>
would exclude just the file or directory called &quot;html&quot; from the &quot;src&quot; directory. Any other file or directory called &quot;html&quot; in the tree will not be excluded. Should be used with the <i>-hide</i> and/or <i>-hide-joliet</i> options.</dd>
</dl>
<dl>
<dt>
<b>-hide-hfs-list</b><i> file</i></dt>
<dd>
A file containing a list of <i>globs</i> to be hidden as above.</dd>
</dl>
<dl>
<dt>
<b>-hfs-volid</b><i> hfs_volid</i></dt>
<dd>
Volume name for the HFS partition. This is the name that is assigned to the disc on a Macintosh and replaces the <i>volid</i> used with the <i>-V</i> option</dd>
</dl>
<dl>
<dt>
<b>-hfs-bless</b><i> folder_name</i></dt>
<dd>
&quot;Bless&quot; the given directory (folder). This is usually the <b>System Folder</b> and is used in creating HFS bootable CDs. The name of the directory must be the whole path name as <b>mkisofs</b> sees it. e.g. if the given pathspec is ./cddata and the required folder is called System Folder, then the whole path name is &quot;./cddata/System Folder&quot; (remember to use quotes if the name contains spaces).</dd>
</dl>
<dl>
<dt>
<b>--cap</b></dt>
<dd>
Look for AUFS CAP Macintosh files. Search for CAP Apple/Unix file formats only. Searching for the other possible Apple/Unix file formats is disabled, unless other <i>double dash</i> options are given.</dd>
</dl>
<dl>
<dt>
<b>--netatalk</b></dt>
<dd>
Look for NETATALK Macintosh files</dd>
</dl>
<dl>
<dt>
<b>--double</b></dt>
<dd>
Look for AppleDouble Macintosh files</dd>
</dl>
<dl>
<dt>
<b>--ethershare</b></dt>
<dd>
Look for Helios EtherShare Macintosh files</dd>
</dl>
<dl>
<dt>
<b>--ushare</b></dt>
<dd>
Look for IPT UShare Macintosh files</dd>
</dl>
<dl>
<dt>
<b>--exchange</b></dt>
<dd>
Look for PC Exchange Macintosh files</dd>
</dl>
<dl>
<dt>
<b>--sgi</b></dt>
<dd>
Look for SGI Macintosh files</dd>
</dl>
<dl>
<dt>
<b>--xinet</b></dt>
<dd>
Look for XINET Macintosh files</dd>
</dl>
<dl>
<dt>
<b>--macbin</b></dt>
<dd>
Look for MacBinary Macintosh files</dd>
</dl>
<dl>
<dt>
<b>--single</b></dt>
<dd>
Look for AppleSingle Macintosh files<div style="height: 1.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
</dd>
</dl>
</div>
<div class="section">
<h1>CREATOR/TYPE</h1> A Macintosh file has two properties associated with it which define which application created the file, the <i>CREATOR</i> and what data the file contains, the <i>TYPE</i>. Both are (exactly) 4 letter strings. Usually this allows a Macintosh user to double-click on a file and launch the correct application etc. The CREATOR and TYPE of a particular file can be found by using something like ResEdit (or similar) on a Macintosh.<div class="spacer">
</div>
The CREATOR and TYPE information is stored in all the various Apple/Unix encoded files. For other files it is possible to base the CREATOR and TYPE on the filename's extension using a <i>mapping</i> file (the <i>-map</i> option) and/or using the <i>magic number</i> (usually a <i>signature</i> in the first few bytes) of a file (the <i>-magic</i> option). If both these options are given, then their order on the command line is important. If the <i>-map</i> option is given first, then a filename extension match is attempted before a magic number match. However, if the <i>-magic</i> option is given first, then a magic number match is attempted before a filename extension match.<div class="spacer">
</div>
If a mapping or magic file is not used, or no match is found then the default CREATOR and TYPE for all regular files can be set by using entries in the <i>.mkisofsrc</i> file, otherwise the default CREATOR and TYPE are 'unix' and 'TEXT'.<div class="spacer">
</div>
The format of the <i>mapping</i> file is the same <i>afpfile</i> format as used by <i>aufs</i>. This file has five columns for the <i>extension</i>, <i>file</i> <i>translation</i>, <i>CREATOR</i>, <i>TYPE</i> and <i>Comment</i>. Lines starting with the '#' character are comment lines and are ignored. An example file would be like:<table class="tbl">
<col style="width: 11.00ex;"/>
<col style="width: 5.00ex;"/>
<col style="width: 7.00ex;"/>
<col style="width: 6.00ex;"/>
<col style="width: 11.00ex;"/>
<tbody>
<tr>
<td>
# Example filename mapping file</td>
<td>
</td>
<td>
</td>
<td>
</td>
<td>
</td>
</tr>
<tr>
<td>
#</td>
<td>
</td>
<td>
</td>
<td>
</td>
<td>
</td>
</tr>
<tr>
<td>
# EXTN</td>
<td>
XLate</td>
<td>
CREATOR</td>
<td>
TYPE</td>
<td>
Comment</td>
</tr>
<tr>
<td>
TIFF image&quot;</td>
<td>
</td>
<td>
</td>
<td>
</td>
<td>
</td>
</tr>
<tr>
<td>
file&quot;</td>
<td>
</td>
<td>
</td>
<td>
</td>
<td>
</td>
</tr>
<tr>
<td>
file&quot;</td>
<td>
</td>
<td>
</td>
<td>
</td>
<td>
</td>
</tr>
<tr>
<td>
Movie&quot;</td>
<td>
</td>
<td>
</td>
<td>
</td>
<td>
</td>
</tr>
<tr>
<td>
*</td>
<td>
Ascii</td>
<td>
'ttxt'</td>
<td>
'TEXT'</td>
<td>
&quot;Text file&quot;</td>
</tr>
</tbody>
</table>
<div class="spacer">
</div>
Where:<dl>
<dt>
</dt>
<dd>
The first column <i>EXTN</i> defines the Unix filename extension to be mapped. The default mapping for any filename extension that doesn't match is defined with the &quot;*&quot; character.</dd>
</dl>
<dl>
<dt>
</dt>
<dd>
The <i>Xlate</i> column defines the type of text translation between the Unix and Macintosh file it is ignored by <i>mkhybrid,</i> but is kept to be compatible with <i>aufs</i>(1). Although <i>mkhybrid</i> does not alter the contents of a file, if a binary file has it's TYPE set as 'TEXT', it <i>may</i> be read incorrectly on a Macintosh. Therefore a better choice for the default TYPE may be '????'</dd>
</dl>
<dl>
<dt>
</dt>
<dd>
The <i>CREATOR</i> and <i>TYPE</i> keywords must be 4 characters long and enclosed in single quotes.</dd>
</dl>
<dl>
<dt>
</dt>
<dd>
The comment field is enclosed in double quotes - it is ignored by <i>mkhybrid</i>, but is kept to be compatible with <i>aufs</i>.</dd>
</dl>
<div class="spacer">
</div>
The format of the <i>magic</i> file is almost identical to the <i>magic</i>(4) file used by the Linux <i>file</i>(1) command - the routines for reading and decoding the <i>magic</i> file are based on the Linux <i>file</i>(1) command.<div class="spacer">
</div>
This file has four tab separated columns for the <i>byte</i> <i>offset</i>, <i>type</i>, <i>test</i> and <i>message</i>. Lines starting with the '#' character are comment lines and are ignored. An example file would be like:<table class="tbl">
<col style="width: 5.00ex;"/>
<col style="width: 7.00ex;"/>
<col style="width: 10.00ex;"/>
<col style="width: 43.00ex;"/>
<tbody>
<tr>
<td>
# Example magic file</td>
<td>
</td>
<td>
</td>
<td>
</td>
</tr>
<tr>
<td>
#</td>
<td>
</td>
<td>
</td>
<td>
</td>
</tr>
<tr>
<td>
# off</td>
<td>
type</td>
<td>
test</td>
<td>
message</td>
</tr>
<tr>
<td>
0</td>
<td>
string</td>
<td>
GIF8</td>
<td>
8BIM GIFf  GIF image</td>
</tr>
<tr>
<td>
0</td>
<td>
beshort</td>
<td>
0xffd8</td>
<td>
8BIM JPEG  image data</td>
</tr>
<tr>
<td>
0</td>
<td>
string</td>
<td>
SIT!</td>
<td>
SIT! SIT!  StuffIt Archive</td>
</tr>
<tr>
<td>
0</td>
<td>
string</td>
<td>
\037\235</td>
<td>
LZIV ZIVU  standard unix compress</td>
</tr>
<tr>
<td>
0</td>
<td>
string</td>
<td>
\037\213</td>
<td>
GNUz ZIVU  gzip compressed data</td>
</tr>
<tr>
<td>
0</td>
<td>
string</td>
<td>
%!</td>
<td>
ASPS TEXT  Postscript</td>
</tr>
<tr>
<td>
0</td>
<td>
string</td>
<td>
\004%!</td>
<td>
ASPS TEXT  PC Postscript with a ^D to start</td>
</tr>
<tr>
<td>
4</td>
<td>
string</td>
<td>
moov</td>
<td>
txtt MooV  QuickTime movie file (moov)</td>
</tr>
<tr>
<td>
4</td>
<td>
string</td>
<td>
mdat</td>
<td>
txtt MooV  QuickTime movie file (mdat)</td>
</tr>
</tbody>
</table>
<div class="spacer">
</div>
The format of the file is described in the <i>magic</i>(4) man page. The only difference here is that for each entry in the magic file, the <i>message</i> for the initial offset <b>must</b> be 4 characters for the CREATOR followed by 4 characters for the TYPE - white space is optional between them. Any other characters on this line are ignored. Continuation lines (starting with a '&gt;') are also ignored i.e. only the initial offset lines are used.<div class="spacer">
</div>
Using the <i>-magic</i> option may significantly increase processing time as each file has to opened and read to find it's magic number.<div class="spacer">
</div>
In summary, for all files, the default CREATOR is 'unix' and the default TYPE is 'TEXT'.  These can be changed by using entries in the <i>.mkisofsrc</i> file.<div class="spacer">
</div>
If the a file is in one of the known Apple/Unix formats (and the format has been selected), then the CREATOR and TYPE are taken from the values stored in the Apple/Unix file.<div class="spacer">
</div>
Other files can have their CREATOR and TYPE set from their file name extension (the <i>-map</i> option), or their magic number (the <i>-magic</i> option). If the default match is used in the <i>mapping</i> file, then these values override the default CREATOR and TYPE.<div class="spacer">
</div>
A full CREATOR/TYPE database can be found at http://www.angelfire.com/il/szekely/index.html<div style="height: 1.00em;">
&#160;</div>
</div>
<div class="section">
<h1>MACINTOSH FILE FORMATS</h1> Macintosh files have two parts called the <i>Data</i> and <i>Resource</i> fork. Either may be empty. Unix (and many other OSs) can only cope with files having one part (or fork). To add to this, Macintosh files have a number of attributes associated with them - probably the most important are the TYPE and CREATOR. Again Unix has no concept of these types of attributes.<div class="spacer">
</div>
e.g. a Macintosh file may be a JPEG image where the image is stored in the Data fork and a desktop thumbnail stored in the Resource fork. It is usually the information in the data fork that is useful across platforms.<div class="spacer">
</div>
Therefore to store a Macintosh file on a Unix filesystem, a way has to be found to cope with the two forks and the extra attributes (which are referred to as the <i>finder</i> <i>info).</i> Unfortunately, it seems that every software package that stores Macintosh files on Unix has chosen a completely different storage method.<div class="spacer">
</div>
The Apple/Unix formats that <i>mkhybrid</i> (partially) supports are:<dl>
<dt>
CAP AUFS format</dt>
<dd>
Data fork stored in a file. Resource fork in subdirectory .resource with same filename as data fork. Finder info in .finderinfo subdirectory with same filename.</dd>
</dl>
<dl>
<dt>
AppleDouble/Netatalk</dt>
<dd>
Data fork stored in a file. Resource fork stored in a file with same name prefixed with &quot;%&quot;. Finder info also stored in same &quot;%&quot; file. Netatalk uses the same format, but the resource fork/finderinfo stored in subdirectory .AppleDouble with same name as data fork.</dd>
</dl>
<dl>
<dt>
AppleSingle</dt>
<dd>
Data structures similar to above, except both forks and finder info are stored in one file.</dd>
</dl>
<dl>
<dt>
Helios EtherShare</dt>
<dd>
Data fork stored in a file. Resource fork and finder info together in subdirectory .rsrc with same filename as data fork.</dd>
</dl>
<dl>
<dt>
IPT UShare</dt>
<dd>
Very similar to the EtherShare format, but the finder info is stored slightly differently.</dd>
</dl>
<dl>
<dt>
MacBinary</dt>
<dd>
Both forks and finder info stored in one file.</dd>
</dl>
<dl>
<dt>
Apple PC Exchange</dt>
<dd>
Used by Macintoshes to store Apple files on DOS (FAT) disks. Data fork stored in a file. Resource fork in subdirectory resource.frk (or RESOURCE.FRK). Finder info as one record in file finder.dat (or FINDER.DAT). Separate finder.dat for each data fork directory.</dd>
</dl>
<dl>
<dt>
</dt>
<dd>
Note: normally files should be accessed directly from the DOS media as <i>mkhybrid</i> needs to find out the native FAT cluster size. If the native FAT cluster size is known, then the <i>-cluster-size</i> option can be used to set the cluster size - useful if PC Exchange files have be copied from DOS disks before running <i>mkhybrid</i>. The cluster or allocation size can be found by using the DOS utility <i>CHKDSK</i>.</dd>
</dl>
<dl>
<dt>
</dt>
<dd>
May not work with PC Exchange v2.2 or higher files (available with MacOS 8.1). DOS media containing PC Exchange files should be mounted as type <b>msdos</b> (not <b>vfat</b>) when using Linux.</dd>
</dl>
<dl>
<dt>
SGI/XINET</dt>
<dd>
Used by SGI machines when they mount HFS disks. Data fork stored in a file. Resource fork in subdirectory .HSResource with same name. Finder info as one record in file .HSancillary. Separate .HSancillary for each data fork directory.</dd>
</dl>
<div class="spacer">
</div>
<i>mkhybrid</i> will attempt to set the CREATOR, TYPE, date and possibly other flags from the finder info. Additionally, if it exists, the Macintosh filename is set from the finder info, otherwise the Macintosh name is based on the Unix filename - see the MACINTOSH FILE NAMES section below.<div class="spacer">
</div>
When using the <i>-apple</i> option, the TYPE and CREATOR are stored in the optional System Use or SUSP field in the ISO9660 Directory Record - in much the same way as the Rock Ridge attributes are. In fact to make life easy, the Apple extensions are added at the beginning of the existing Rock Ridge attributes (i.e. to get the Apple extensions you get the Rock Ridge extensions as well).<div class="spacer">
</div>
The Apple extensions require the resource fork to be stored as an ISO9660 <i>associated</i> file. This is just like any normal file stored in the ISO9660 filesystem except that the associated file flag is set in the Directory Record (bit 2). This file has the same name as the data fork (the file seen by non-Apple machines). Associated files are normally ignored by other OSs<div class="spacer">
</div>
When using the <i>-hfs</i> option, the TYPE and CREATOR plus other finder info, are stored in a separate HFS directory, not visible on the ISO9660 volume. The HFS directory references the same data and resource fork files described above.<div class="spacer">
</div>
In most cases, it is better to use the <i>-hfs</i> option instead of the <i>-apple</i> option, as the latter imposes the limited ISO9660 characters allowed in filenames. However, the Apple extensions do give the advantage that the files are packed on the disk more efficiently and it may be possible to fit more files on a CD - important when the total size of the source files is approaching 650MB.<div style="height: 1.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
<div style="height: 1.00em;">
&#160;</div>
</div>
<div class="section">
<h1>MACINTOSH FILE NAMES</h1> Where possible, the HFS filename that is stored with an Apple/Unix file is used for the HFS part of the CD. However, not all the Apple/Unix encodings store the HFS filename with the finderinfo. In these cases, the Unix filename is used - with escaped special characters. Special characters include '/' and characters with codes over 127.<div class="spacer">
</div>
Aufs escapes these characters by using &quot;:&quot; followed by the character code as two hex digits. Netatalk and EtherShare have a similar scheme, but uses &quot;%&quot; instead of a &quot;:&quot;.<div class="spacer">
</div>
If mkhybrid can't find an HFS filename, then it uses the Unix name, with any %xx or :xx characters (xx == two hex digits) converted to a single character code. If &quot;xx&quot; are not hex digits ([0-9a-fA-F]), then they are left alone - although any remaining &quot;:&quot; is converted to &quot;%&quot; as colon is the HFS directory separator. Care must be taken, as an ordinary Unix file with %xx or :xx will also be converted. e.g.<table class="tbl">
<col style="width: 11.00ex;"/>
<col style="width: 24.00ex;"/>
<tbody>
<tr>
<td>
This:2fFile</td>
<td>
converted to This/File</td>
</tr>
<tr>
<td>
</td>
<td>
</td>
</tr>
<tr>
<td>
This:File</td>
<td>
converted to This%File</td>
</tr>
<tr>
<td>
</td>
<td>
</td>
</tr>
<tr>
<td>
This:t7File</td>
<td>
converted to This%t7File</td>
</tr>
</tbody>
</table>
<div class="spacer">
</div>
Although HFS filenames appear to support upper and lower case letters, the filesystem is case insensitive. i.e. the filenames &quot;aBc&quot; and &quot;AbC&quot; are the same. If a file is found in a directory with the same HFS name, then <i>mkhybrid</i> will attempt, where possible, to make a unique name by adding '_' characters to one of the filenames.<div class="spacer">
</div>
If an HFS filename exists for a file, then mkhybrid can use this name as the starting point for the ISO9660, Joliet and Rock Ridge filenames using the <i>-mac-name</i> option. Normal Unix files without an HFS name will still use their Unix name. e.g.<div class="spacer">
</div>
If a <i>MacBinary</i> (or <i>PC</i> <i>Exchange</i>) file is stored as <i>someimage.gif.bin</i> on the Unix filesystem, but contains a HFS file called <i>someimage.gif</i>, then this is the name that would appear on the HFS part of the CD. However, as mkhybrid uses the Unix name as the starting point for the other names, then the ISO9660 name generated will probably be <i>SOMEIMAG.BIN</i> and the Joliet/Rock Ridge would be <i>someimage.gif.bin</i>. Although the actual data (in this case) is a GIF image. This option will use the HFS filename as the starting point and the ISO9660 name will probably be <i>SOMEIMAG.GIF</i> and the Joliet/Rock Ridge would be <i>someimage.gif</i>.<div class="spacer">
</div>
Using the <i>-mac-name</i> option will not currently work with the <i>-T</i> option - the Unix name will be used in the TRANS.TBL file, not the Macintosh name.<div class="spacer">
</div>
The existing mkisofs code will filter out any illegal characters for the ISO9660 and Joliet filenames, but as mkisofs expects to be dealing directly with Unix names, it leaves the Rock Ridge names as is. But as '/' is a legal HFS filename character, the <i>-mac-name</i> option coverts '/' to a '_' in a Rock Ridge filenames.<div class="spacer">
</div>
If the Apple extensions are used, then only the ISO9660 filenames will appear on the Macintosh. However, as the Macintosh ISO9660 drivers can use <i>Level 2</i> filenames, then you can use the <i>-l</i> option without problems on a Macintosh - still take care over the names, for example <i>this.file.name</i> will be converted to <i>THIS.FILE</i> i.e. only have one '.', also filename <i>abcdefgh</i> will be seen as <i>ABCDEFGH</i> but <i>abcdefghi</i> will be seen as <i>ABCDEFGHI.</i> i.e. with a '.' at the end - don't know if this is a Macintosh problem or mkisofs/mkhybrid problem. All filenames will be in uppercase when viewed on a Macintosh. Of course, DOS/Win3.X machines will not be able to see Level 2 filenames...<div class="spacer">
</div>
As Macintosh filenames do use the '~' and '#' characters (especially when using PC Exchange Macintosh files), then the <i>-a</i> option should be given.<div style="height: 1.00em;">
&#160;</div>
</div>
<div class="section">
<h1>HFS BOOT DRIVER</h1> It <i>may</i> be possible to make the hybrid CD bootable on a Macintosh.<div class="spacer">
</div>
A bootable HFS CD requires an Apple CD-ROM (or compatible) driver, a bootable HFS partition and the necessary System, Finder, etc. files.<div class="spacer">
</div>
A driver can be obtained from any other Macintosh bootable CD-ROM using the <i>apple_driver</i> utility. This file can then be used with the <i>-boot-hfs-file</i> option.<div class="spacer">
</div>
The HFS partition (i.e. the hybrid disk in our case) must contain a suitable System Folder, again from another CD-ROM or disk.<div class="spacer">
</div>
For a partition to be bootable, it must have it's <i>boot block</i> set. The boot block is in the first two blocks of a partition. For a non-bootable partition the boot block is full of zeros. Normally, when a System file is copied to partition on a Macintosh disk, the boot block is filled with a number of required settings - unfortunately I don't know the full spec for the boot block, so I'm guessing that the following will work OK.<div class="spacer">
</div>
Therefore, the utility <i>apple_driver</i> also extracts the boot block from the first HFS partition it finds on the given CD-ROM and this is used for the HFS partition created by <i>mkhybrid</i>.<dl>
<dt>
PLEASE NOTE</dt>
<dd>
By using a driver from an Apple CD and copying Apple software to your CD, you become liable to obey Apple Computer, Inc. Software License Agreements.</dd>
</dl>
<div class="spacer">
</div>
<div style="height: 1.00em;">
&#160;</div>
</div>
<div class="section">
<h1>CONFIGURATION</h1> <b>mkhybrid</b> looks for the <i>.mkisofsrc</i> file, first in the current working directory, then in the user's home directory, and then in the directory in which the <b>mkhybrid</b> binary is stored.  This file is assumed to contain a series of lines of the form &quot;TAG=value&quot;, and in this way you can specify certain options. The case of the tag is not significant. Some fields in the volume header are not settable on the command line, but can be altered through this facility. Comments may be placed in this file, using lines which start with a hash (#) character.<dl>
<dt>
APPI</dt>
<dd>
The application identifier should describe the application that will be on the disc. There is space on the disc for 128 characters of information. May be overridden using the -A command line option.</dd>
</dl>
<dl>
<dt>
COPY</dt>
<dd>
The copyright information, often the name of a file on the disc containing the copyright notice. There is space in the disc for 37 characters of information. May be overridden using the <b>-copyright</b> command line option.</dd>
</dl>
<dl>
<dt>
ABST</dt>
<dd>
The abstract information, often the name of a file on the disc containing an abstract. There is space in the disc for 37 characters of information. May be overridden using the <b>-abstract</b> command line option.</dd>
</dl>
<dl>
<dt>
BIBL</dt>
<dd>
The bibliographic information, often the name of a file on the disc containing a bibliography. There is space in the disc for 37 characters of information. May be overridden using the <b>-bilio</b> command line option.</dd>
</dl>
<dl>
<dt>
PREP</dt>
<dd>
This should describe the preparer of the CDROM, usually with a mailing address and phone number. There is space on the disc for 128 characters of information. May be overridden using the <b>-p</b> command line option.</dd>
</dl>
<dl>
<dt>
PUBL</dt>
<dd>
This should describe the publisher of the CDROM, usually with a mailing address and phone number. There is space on the disc for 128 characters of information. May be overridden using the <b>-P</b> command line option.</dd>
</dl>
<dl>
<dt>
SYSI</dt>
<dd>
The System Identifier. There is space on the disc for 32 characters of information. May be overridden using the <b>-sysid</b> command line option.</dd>
</dl>
<dl>
<dt>
VOLI</dt>
<dd>
The Volume Identifier. There is space on the disc for 32 characters of information. May be overridden using the <b>-V</b> command line option.</dd>
</dl>
<dl>
<dt>
VOLS</dt>
<dd>
The Volume Set Name. There is space on the disc for 278 characters of information. May be overridden using the <b>-volset</b> command line option.</dd>
</dl>
<dl>
<dt>
TYPE</dt>
<dd>
The default TYPE for Macintosh files. Must be exactly 4 characters.</dd>
</dl>
<dl>
<dt>
CREATOR</dt>
<dd>
The default CREATOR for Macintosh files. Must be exactly 4 characters.</dd>
</dl>
<div class="spacer">
</div>
<b>mkhybrid</b> can also be configured at compile time with defaults for many of these fields. See the file defaults.h.</div>
<div class="section">
<h1>AUTHOR</h1> <b>mkisofs</b> is not based on the standard mk*fs tools for unix, because we must generate a complete  copy of an existing filesystem on a disk in the  iso9660 filesystem.  The name mkisofs is probably a bit of a misnomer, since it not only creates the filesystem, but it also populates it as well.<div class="spacer">
</div>
<div style="height: 0.00em;">
&#160;</div>
Eric Youngdale &lt;ericy@gnu.ai.mit.edu&gt; or &lt;eric@andante.jic.com&gt; wrote both the Linux isofs9660 filesystem and the mkisofs utility, and is currently maintaining them.  The copyright for the mkisofs utility is held by Yggdrasil Computing, Incorporated.<div class="spacer">
</div>
<b>mkhybrid</b> is based on <b>mkisofs</b> and works in exactly the same way as <b>mkisofs</b> without the HFS options. The change in name is to signify that it does something extra. If you do not need the HFS options, then you should really be using <i>mkisofs</i>.<div class="spacer">
</div>
HFS hybrid code Copyright (C) James Pearson 1997, 1998, 1999<div style="height: 0.00em;">
&#160;</div>
libhfs code Copyright (C) 1996, 1997 Robert Leslie<div style="height: 0.00em;">
&#160;</div>
libfile code Copyright (C) Ian F. Darwin 1986, 1987, 1989, 1990, 1991, 1992, 1994, 1995.<div class="spacer">
</div>
<div style="height: 1.00em;">
&#160;</div>
</div>
<div class="section">
<h1>BUGS</h1> Any files that have hard links to files not in the tree being copied to the iso9660 filesystem will have an incorrect file reference count.<div class="spacer">
</div>
There may be some other ones.  Please, report them to the author.<div style="height: 1.00em;">
&#160;</div>
</div>
<div class="section">
<h1>HFS PROBLEMS/LIMITATIONS</h1> I have had to make several assumptions on how I expect the modified libhfs routines to work, however there may be situations that either I haven't thought of, or come across when these assumptions fail. Therefore I can't guarantee that mkhybrid will work as expected (although I haven't had a major problem yet). Most of the HFS features work fine, however, some are not fully tested. These are marked as <i>Alpha</i> above.<div class="spacer">
</div>
Output volume size must be at least 800Kb (libhfs limit - shouldn't really be a problem).<div class="spacer">
</div>
Although HFS filenames appear to support upper and lower case letters, the filesystem is case insensitive. i.e. the filenames &quot;aBc&quot; and &quot;AbC&quot; are the same. If a file is found in a directory with the same HFS name, then <i>mkhybrid</i> will attempt, where possible, to make a unique name by adding '_' characters to one of the filenames.<div class="spacer">
</div>
HFS file/directory names that share the first 31 characters have _N' (N == decimal number) substituted for the last few characters to generate unique names.<div class="spacer">
</div>
Care must be taken when &quot;grafting&quot; Apple/Unix files or directories (see above for the method and syntax involved). It is not possible to use a new name for an Apple/Unix encoded file/directory. e.g. If a Apple/Unix encoded file called &quot;oldname&quot; is to added to the CD, then you can not use the command line:<dl>
<dt>
</dt>
<dd>
mkhybrid -o output.raw -hfs newname=oldname cd_dir</dd>
</dl>
<div class="spacer">
</div>
mkhybrid will be unable to decode &quot;oldname&quot;. However, you can graft Apple/Unix encoded files or directories as long as you do not atempt to give them new names as above.<div class="spacer">
</div>
The <i>-M</i> option has no real meaning with an HFS volume - and will probably not work.<div class="spacer">
</div>
Symbolic links (as with all other non-regular files) are not added to the HFS directory.<div class="spacer">
</div>
Hybrid volumes may be larger than pure ISO9660 volumes containing the same data.<div class="spacer">
</div>
The resulting hybrid volume can be accessed on a Unix machine by using the hfsutils routines. However, no changes should be made to the contents of the volume as it's not a &quot;real&quot; HFS volume.<div class="spacer">
</div>
Using the <i>-mac-name</i> option will not currently work with the <i>-T</i> option - the Unix name will be used in the TRANS.TBL file, not the Macintosh name.<div class="spacer">
</div>
Although <i>mkhybrid</i> does not alter the contents of a file, if a binary file has it's TYPE set as 'TEXT', it <i>may</i> be read incorrectly on a Macintosh. Therefore a better choice for the default TYPE may be '????'<div class="spacer">
</div>
The <i>-mac-boot-file</i> option may not work at all...<div class="spacer">
</div>
The <i>-a</i> option should be used at all times. It may well become the default in future releases.<div class="spacer">
</div>
May not work with PC Exchange v2.2 or higher files (available with MacOS 8.1). DOS media containing PC Exchange files should be mounted as type <b>msdos</b> (not <b>vfat</b>) when using Linux.</div>
<div class="section">
<h1>SEE ALSO</h1> <i>mkisofs</i>(8), <i>magic</i>(5), <i>apple_driver</i>(8)</div>
<div class="section">
<h1>FUTURE IMPROVEMENTS</h1> Some sort of gui interface.</div>
<div class="section">
<h1>AVAILABILITY</h1> <b>mkisofs</b> is available for anonymous ftp from ftp://tsx-11.mit.edu/pub/linux/packages/mkisofs and many other mirror sites.<div class="spacer">
</div>
<b>mkhybrid</b> is available from ftp://ftp.ge.ucl.ac.uk/pub/mkhfs and <b>hfsutils</b> from ftp://ftp.mars.org/pub/hfs</div>
<table class="foot">
<tr>
<td class="foot-date">
7 April 1999</td>
<td class="foot-os">
Version 1.12b5.1</td>
</tr>
</table>
</div>
</body>
</html>

