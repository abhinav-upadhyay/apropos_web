<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/posix/style.css" type="text/css" media="all"/>
<title>
SCSI(8)</title>
</head>
<body>
<div class="mandoc">
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">scsi</b> &#8212; <span class="desc">program to assist with SCSI devices</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1><table class="synopsis">
<col style="width: 4.00ex;"/>
<col/>
<tbody>
<tr>
<td>
scsi</td>
<td>
<b class="flag">-f</b> <i class="arg">device</i> <b class="flag">-d</b> <i class="arg">debug_level</i></td>
</tr>
</tbody>
</table>
<br/>
<table class="synopsis">
<col style="width: 4.00ex;"/>
<col/>
<tbody>
<tr>
<td>
scsi</td>
<td>
<b class="flag">-f</b> <i class="arg">device</i> <b class="flag">-m</b> <i class="arg">page</i> [<span class="opt"><b class="flag">-e</b></span>] [<span class="opt"><b class="flag">-P</b> <i class="arg">pc</i></span>]</td>
</tr>
</tbody>
</table>
<br/>
<table class="synopsis">
<col style="width: 4.00ex;"/>
<col/>
<tbody>
<tr>
<td>
scsi</td>
<td>
<b class="flag">-f</b> <i class="arg">device</i> [<span class="opt"><b class="flag">-v</b></span>] [<span class="opt"><b class="flag">-s</b> <i class="arg">seconds</i></span>] <b class="flag">-c</b> <i class="arg">cmd_fmt</i> [<span class="opt"><i class="arg">arg ...</i></span>] <b class="flag">-o</b> <i class="arg">count out_fmt</i> [<span class="opt"><i class="arg">arg ...</i></span>] <b class="flag">-i</b> <i class="arg">count in_fmt</i> [<span class="opt"><i class="arg">arg ...</i></span>]</td>
</tr>
</tbody>
</table>
</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> The <b class="name">scsi</b> program is used to send commands to a SCSI device. It is also a sample usage of the user-level SCSI commands. <i class="arg">out_fmt</i> can be &#8216;<code class="lit">-</code>&#8217; to read output data from stdin; <i class="arg">in_fmt</i> can be &#8216;<code class="lit">-</code>&#8217; to write input data to stdout.<div class="spacer">
</div>
The options are as follows:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-c</b> <i class="arg">cmd_fmt</i> [<span class="opt"><i class="arg">arg ...</i></span>]</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Send a user-level SCSI command to a device. The command format is described below and the command is sent using the <span class="define">SCIOCCOMMAND</span> <a class="link-man" href="../html2/ioctl.html">ioctl(2)</a>, so the device being accessed must permit this ioctl. See <a class="link-man" href="../html4/scsi.html">scsi(4)</a> for full details of which minor devices permit the ioctl.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-d</b> <i class="arg">debug_level</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Sets the SCSI kernel debug level. The kernel must have been compiled with the <b class="cmd">SCSIDEBUG</b> option. See <i class="file">/sys/scsi/scsi_debug.h</i> to figure out what to set the kernel debug level to.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-e</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Permits edit of the fields. It will use the editor specified by the <span class="env">EDITOR</span> environment variable. To store changes permanently, edit page control 3 using the <b class="flag">-P</b> flag.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-f</b> <i class="arg">device</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Specifies the <i class="arg">device</i> that should be opened, e.g., <i class="file">/dev/rsd0c</i>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-i</b> <i class="arg">count in_fmt</i> [<span class="opt"><i class="arg">arg ...</i></span>]</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Indicates that this is an input command (i.e., data will be read from the device into the system) with <i class="arg">count</i> bytes of data read in. The information is extracted according to <i class="arg">in_fmt</i> and is displayed on standard output. <i class="arg">in_fmt</i> can be specified as a hyphen (&#8216;<code class="lit">-</code>&#8217;) to indicate that <i class="arg">count</i> bytes of data input should be written to standard output.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-m</b> <i class="arg">page</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Read a device mode page. The file <i class="file">/usr/share/misc/scsi_modes</i> is read to discover how to interpret the mode data. The environment variable <span class="env">SCSI_MODES</span> can specify a different file to use.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-o</b> <i class="arg">count out_fmt</i> [<span class="opt"><i class="arg">arg ...</i></span>]</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Indicates that this is an output command (i.e., data will be sent from the system to the device) with <i class="arg">count</i> bytes of data. The data is built up using the provided arguments to fill in any integer variables. <i class="arg">out_fmt</i> can be specified as a hyphen (&#8216;<code class="lit">-</code>&#8217;) to indicate that <i class="arg">count</i> bytes of data should be read from standard input.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-P</b> <i class="arg">pc</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Specify a page control field. The page control fields are<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
0 Current Values 
1 Changeable Values 
2 Default Values 
3 Saved Values</pre>
</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-s</b> <i class="arg">seconds</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Sets the command timeout to <i class="arg">seconds</i>. The default is two seconds.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-v</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Turns on more verbose information.</dd>
</dl>
<div class="subsection">
<h2 id="x5343534920636f6d6d616e6473">SCSI commands</h2> The command arguments to the <b class="flag">-cio</b> options specify the command data buffer used to both send and receive information to and from the <a class="link-man" href="../html4/scsi.html">scsi(4)</a> subsystem. Their format is:<div class="spacer">
</div>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit"><b class="flag">-c</b> <i class="arg">command</i> [<span class="opt"><i class="arg">argument ...</i></span>]</code></div>
</blockquote>
<div class="spacer">
</div>
The commands are composed of a list of field specifiers. The specifiers denote the field name, the field value, and the length of the field. Examples are given below.<div class="spacer">
</div>
Whitespace and text following a &#8216;#&#8217; character in the command string are ignored.<div class="spacer">
</div>
The first part of a field specifier is the field name and is surrounded by curly braces (&#8216;{}&#8217;). This part is optional and may be left out.<div class="spacer">
</div>
The second part is the value of the field. The value may be given directly or may arrange that the next argument to the <b class="name">scsi</b> command be used as the value of the field. Direct hexadecimal (<code class="lit">0-FF</code>) or decimal (0-255) values may be specified. The special value <b class="cmd">v</b> can be used to arrange that the next integer argument be taken from the <i class="arg">argument</i> list. For retrieving output (with <b class="flag">-i</b>), this part of the field cannot be used.<div class="spacer">
</div>
The third part specifies the length of the field. This is optional and defaults to one byte if not specified. The length may be specified in bits by prefixing it with <b class="cmd">b</b> or <b class="cmd">t</b>, or in bytes by prefixing it with <b class="cmd">i</b>. Additionally, character arrays can be specified by prefixing with <b class="cmd">c</b> or, with zeroed trailing spaces, with <b class="cmd">z</b>. Bits are packed together tightly and begin with the high bit. New bytes are started when a byte fills or an <b class="cmd">i</b> field is next. <b class="cmd">i</b> fields indicate a 1-4 byte integral value that must already be given in SCSI byte order (most significant byte first). Otherwise, the field value specified will be swapped into SCSI byte order.<div class="spacer">
</div>
Retrieving data (with <b class="flag">-i</b>) follows similarly but without field values. Besides field specifiers, the command can also include control operations, which currently includes seeking operations used to ignore returned data. Seek operations are composed of the <b class="cmd">s</b> character followed by the absolute position to skip to. If the position is prefixed with a <b class="cmd">+</b>, the position is interpreted relative to the current position.<div class="spacer">
</div>
Entire fields can be suppressed from being returned with the <b class="cmd">*</b> modifier prepended to the field width.<div class="spacer">
</div>
Here are some examples:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">s8 z8 z16 z4</b></dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
Seek to position 8 and specify three fields of lengths 8 bytes, 16 bytes, and 4 bytes.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">1A 2</b></dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
Specify a one-byte field with the hexadecimal value <code class="lit">0x1A</code> followed by another one-byte field with the decimal value 2.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">v:i1</b></dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
Specify a one-byte field whose value will be determined from the next argument in the <i class="arg">argument</i> list.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">0:7</b></dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
Specify a 7-bit field with a value of zero.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">*b3 b5</b></dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
Specify a three-bit field that will be suppressed from being returned and a five-bit field that will be returned.</dd>
</dl>
</div>
</div>
<div class="section">
<h1 id="x454e5649524f4e4d454e54">ENVIRONMENT</h1><dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">SU_DEBUG_OUTPUT</span></dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
This variable can be set to a file to send debugging output to that file.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">SU_DEBUG_LEVEL</span></dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
This variable can be set to a non-zero integer to increase the level of debugging. Currently this is an on or off thing; it should perhaps use the ioctl to set the debug level in the kernel and then set it back to zero at program exit.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">SU_DEBUG_TRUNCATE</span></dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
This variable can be set to an integer to limit the amount of data phase output sent to the debugging file.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">EDITOR</span></dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
This variable determines the editor to use for the mode editor.</dd>
</dl>
</div>
<div class="section">
<h1 id="x46494c4553">FILES</h1><dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="file">/usr/share/misc/scsi_modes</i></dt>
<dd class="list-tag" style="margin-left: 26.00ex;">
</dd>
</dl>
</div>
<div class="section">
<h1 id="x4558495420535441545553">EXIT STATUS</h1> The <b class="utility">scsi</b> utility exits&#160;0 on success, and&#160;&gt;0 if an error occurs.</div>
<div class="section">
<h1 id="x4558414d504c4553">EXAMPLES</h1> To verify that the device type for the disk <i class="file">/dev/rsd0c</i> is 0 (direct access device):<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
# scsi -f /dev/rsd0c -c &quot;12 0 0 0 64 0&quot; -i 0x64 &quot;*b3 b5&quot; 
0</pre>
<div class="spacer">
</div>
To do an inquiry to <i class="file">/dev/rsd2c</i>:<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
# scsi -f /dev/rsd2c -c &quot;12 0 0 0 64 0&quot; -i 0x64 &quot;s8 z8 z16 z4&quot; 
FUJITSU M2654S-512 010P</pre>
<div class="spacer">
</div>
To spin down <i class="file">/dev/rsd2c</i>:<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
# scsi -f /dev/rsd2c -c &quot;1b 0 0 0 0 0&quot;</pre>
<div class="spacer">
</div>
To edit mode page 1 on <i class="file">/dev/rsd2c</i> and store it permanently on the drive (set AWRE and ARRE to 1 to enable bad block remapping):<div class="spacer">
</div>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit"># scsi -f /dev/rsd2c -m 1 -e -P 3</code></div>
</blockquote>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../html2/ioctl.html">ioctl(2)</a>, <a class="link-man" href="../html4/scsi.html">scsi(4)</a></div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> The <b class="name">scsi</b> command appeared in 386BSD 0.1.2.4/FreeBSD to support the new reprobe and user SCSI commands.</div>
<div class="section">
<h1 id="x42554753">BUGS</h1> <b class="cmd">scsi&#160;-f /dev/rsd0c -c &quot;4 0 0 0 0 0&quot;</b> permits anyone who can write to <i class="file">/dev/rsd0c</i> to format the disk drive.</div>
</div>
</body>
</html>

