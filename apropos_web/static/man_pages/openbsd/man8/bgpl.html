<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/posix/style.css" type="text/css" media="all"/>
<title>
BGPLG(8)</title>
</head>
<body>
<div class="mandoc">
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">bgplg</b> &#8212; <span class="desc">looking glass for the OpenBSD Border Gateway Protocol daemon</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1><table class="synopsis">
<col style="width: 5.00ex;"/>
<col/>
<tbody>
<tr>
<td>
bgplg</td>
<td>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> The <b class="name">bgplg</b> CGI program is a looking glass for the <a class="link-man" href="../html8/bgpd.html">bgpd(8)</a> Border Gateway Protocol daemon. The looking glass will provide a simple web interface with read-only access to a restricted set of <a class="link-man" href="../html8/bgpd.html">bgpd(8)</a> and system status information, which is typically used on route servers by Internet Service Providers (ISPs) and Internet eXchange points (IXs). It is intended to be used in a <a class="link-man" href="../html2/chroot.html">chroot(2)</a> environment in <i class="file">/var/www</i>.<div class="spacer">
</div>
<b class="name">bgplg</b> is disabled by default. It requires four steps to enable the looking glass:<ol style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-enum">
<li class="list-enum" style="margin-top: 1.00em;">
Update the file permission mode to allow the execution of the <b class="name">bgplg</b> CGI program and the additional statically linked programs that have been installed into the <a class="link-man" href="../html2/chroot.html">chroot(2)</a> environment.<div class="spacer">
</div>
For example, to allow execution of <b class="name">bgplg</b> and the statically-linked version of <a class="link-man" href="../html8/bgpctl.html">bgpctl(8)</a>:<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
# chmod 0555 /var/www/cgi-bin/bgplg 
# chmod 0555 /var/www/bin/bgpctl</pre>
<div class="spacer">
</div>
External commands like <a class="link-man" href="../html8/ping.html">ping(8)</a> and others will be hidden from the looking glass command list unless given the correct permissions. See the <i class="link-sec"><a class="link-sec" href="#x46494c4553">FILES</a></i> section below for the list of installed programs.</li>
<li class="list-enum" style="margin-top: 1.00em;">
The programs <a class="link-man" href="../html8/ping.html">ping(8)</a>, <a class="link-man" href="../html8/ping6.html">ping6(8)</a>, <a class="link-man" href="../html8/traceroute.html">traceroute(8)</a> and <a class="link-man" href="../html8/traceroute6.html">traceroute6(8)</a> will require a copy of the resolver configuration file <a class="link-man" href="../html5/resolv.conf.html">resolv.conf(5)</a> in the <a class="link-man" href="../html2/chroot.html">chroot(2)</a> environment for optional host name lookups.<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
# mkdir /var/www/etc 
# cp /etc/resolv.conf /var/www/etc</pre>
</li>
<li class="list-enum" style="margin-top: 1.00em;">
Start the Border Gateway Protocol daemon with a second, restricted, control socket that can be used from within the <a class="link-man" href="../html2/chroot.html">chroot(2)</a> environment. See <a class="link-man" href="../html5/bgpd.conf.html">bgpd.conf(5)</a> for more information.<div class="spacer">
</div>
For example, add the following to <i class="file">/etc/bgpd.conf</i> to have <a class="link-man" href="../html8/bgpd.html">bgpd(8)</a> open a second, restricted, control socket:<div class="spacer">
</div>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit">socket &quot;/var/www/run/bgpd.rsock&quot; restricted</code></div>
</blockquote>
</li>
<li class="list-enum" style="margin-top: 1.00em;">
Start the <a class="link-man" href="../html8/httpd.html">httpd(8)</a> and <a class="link-man" href="../html8/slowcgi.html">slowcgi(8)</a> servers after configuring the related <b class="cmd">server</b> section in <a class="link-man" href="../html5/httpd.conf.html">httpd.conf(5)</a>. For example:<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
ext_addr=&quot;0.0.0.0&quot; 
 
server &quot;lg.example.net&quot; { 
	listen on $ext_addr port 80 
	location &quot;/cgi-bin/*&quot; { 
		fastcgi 
		root &quot;&quot; 
	} 
}</pre>
</li>
</ol>
</div>
<div class="section">
<h1 id="x46494c4553">FILES</h1><dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/var/www/conf/bgplg.css</i></dt>
<dd class="list-tag" style="margin-left: 26.00ex;">
Optional <b class="name">bgplg</b> CSS style sheet.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/var/www/conf/bgplg.head</i></dt>
<dd class="list-tag" style="margin-left: 26.00ex;">
Optional <b class="name">bgplg</b> HTML header.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/var/www/conf/bgplg.foot</i></dt>
<dd class="list-tag" style="margin-left: 26.00ex;">
Optional <b class="name">bgplg</b> HTML footer.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/var/www/run/bgpd.rsock</i></dt>
<dd class="list-tag" style="margin-left: 26.00ex;">
Position of the second, restricted, control socket of <a class="link-man" href="../html8/bgpd.html">bgpd(8)</a>.</dd>
</dl>
<div class="spacer">
</div>
The following statically linked executables have been installed into the <a class="link-man" href="../html2/chroot.html">chroot(2)</a> environment of the <a class="link-man" href="../html8/httpd.html">httpd(8)</a> server. To enable the corresponding functionality, use the <a class="link-man" href="../html1/chmod.html">chmod(1)</a> utility to manually set the file permission mode to 0555 or anything appropriate.<div class="spacer">
</div>
<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/var/www/cgi-bin/bgplg</i></dt>
<dd class="list-tag" style="margin-left: 26.00ex;">
The <b class="name">bgplg</b> CGI executable.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/var/www/bin/bgpctl</i></dt>
<dd class="list-tag" style="margin-left: 26.00ex;">
The <a class="link-man" href="../html8/bgpctl.html">bgpctl(8)</a> program used to query information from <a class="link-man" href="../html8/bgpd.html">bgpd(8)</a></dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/var/www/bin/ping</i></dt>
<dd class="list-tag" style="margin-left: 26.00ex;">
The <a class="link-man" href="../html8/ping.html">ping(8)</a> program used to send ICMP ECHO_REQUEST packets to network hosts. Requires the set-user-ID bit, set the permission mode to 4555.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/var/www/bin/ping6</i></dt>
<dd class="list-tag" style="margin-left: 26.00ex;">
The <a class="link-man" href="../html8/ping6.html">ping6(8)</a> program used to send ICMPv6 ICMP6_ECHO_REQUEST packets to network hosts. Requires the set-user-ID bit, set the permission mode to 4555.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/var/www/bin/traceroute</i></dt>
<dd class="list-tag" style="margin-left: 26.00ex;">
The <a class="link-man" href="../html8/traceroute.html">traceroute(8)</a> program used to print the route packets take to network hosts. Requires the set-user-ID bit, set the permission mode to 4555.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/var/www/bin/traceroute6</i></dt>
<dd class="list-tag" style="margin-left: 26.00ex;">
The <a class="link-man" href="../html8/traceroute6.html">traceroute6(8)</a> program used to print the route packets take to <a class="link-man" href="../html4/inet6.html">inet6(4)</a> network hosts. Requires the set-user-ID bit, set the permission mode to 4555.</dd>
</dl>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../html8/bgpctl.html">bgpctl(8)</a>, <a class="link-man" href="../html8/bgpd.html">bgpd(8)</a>, <a class="link-man" href="../html8/bgplgsh.html">bgplgsh(8)</a>, <a class="link-man" href="../html8/httpd.html">httpd(8)</a>, <a class="link-man" href="../html8/slowcgi.html">slowcgi(8)</a></div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> The <b class="name">bgplg</b> program first appeared in <span class="unix">OpenBSD&#160;4.1</span>. The initial implementation was done in 2005 for DE-CIX, the German commercial internet exchange point.</div>
<div class="section">
<h1 id="x415554484f5253">AUTHORS</h1> The <b class="name">bgplg</b> program was written by <span class="author">Reyk Floeter</span> &lt;<a class="link-mail" href="mailto:reyk@openbsd.org">reyk@openbsd.org</a>&gt;.</div>
<div class="section">
<h1 id="x43415645415453">CAVEATS</h1> To prevent commands from running endlessly, <b class="name">bgplg</b> will kill the corresponding processes after a hard limit of 60 seconds. For example, this can take effect when using <a class="link-man" href="../html8/traceroute.html">traceroute(8)</a> with blackholed or bad routes.</div>
</div>
</body>
</html>

