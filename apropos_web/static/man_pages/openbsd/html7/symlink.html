<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/posix/style.css" type="text/css" media="all"/>
<title>
SYMLINK(7)</title>
</head>
<body>
<div class="mandoc">
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">symlink</b> &#8212; <span class="desc">symbolic link handling</span></div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> Symbolic links are files that act as pointers to other files. To understand their behavior, it is necessary to understand how hard links work. A hard link to a file is indistinguishable from the original file because it is a reference to the object underlying the original file name. Changes to a file are independent of the name used to reference the file. Hard links may not refer to directories and may not reference files on different file systems. A symbolic link contains the name of the file to which it is linked; i.e., it is a pointer to a name, and not to an underlying object. For this reason, symbolic links may reference directories and may span file systems.<div class="spacer">
</div>
Because a symbolic link and its referenced object coexist in the filesystem name space, confusion can arise in distinguishing between the link itself and the referenced object. Historically, commands and system calls have adopted their own link-following conventions in a somewhat ad hoc fashion. Rules for a more uniform approach, as they are implemented in this system, are outlined here. It is important that local applications conform to these rules, too, so that the user interface can be as consistent as possible.<div class="spacer">
</div>
Symbolic links are handled either by operating on the link itself, or by operating on the object referenced by the link. In the latter case, an application or system call is said to &#8220;follow&#8221; the link. Symbolic links may reference other symbolic links, in which case the links are dereferenced until an object that is not a symbolic link is found, a symbolic link which references a file which doesn't exist is found, or a loop is detected. (Loop detection is done by placing an upper limit on the number of links that may be followed, with an error resulting if this limit is exceeded.)<div class="spacer">
</div>
There are three separate areas that need to be discussed. They are as follows:<div class="spacer">
</div>
<ol style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 6.00ex;" class="list list-enum">
<li class="list-enum" style="margin-top: 0.00em;">
Symbolic links used as file name arguments for system calls.</li>
<li class="list-enum" style="margin-top: 0.00em;">
Symbolic links specified as command-line arguments to utilities that are not traversing a file tree.</li>
<li class="list-enum" style="margin-top: 0.00em;">
Symbolic links encountered by utilities that are traversing a file tree (either specified on the command line or encountered as part of the file hierarchy walk).</li>
</ol>
<div class="subsection">
<h2 id="x53797374656d2063616c6c73">System calls</h2> The first area is symbolic links used as file name arguments for system calls.<div class="spacer">
</div>
Except as noted below, all system calls follow symbolic links. For example, if there were a symbolic link &#8220;<code class="lit">slink</code>&#8221; which pointed to a file named &#8220;<code class="lit">afile</code>&#8221;, the system call &#8220;<code class="lit">open(&quot;slink&quot; ...)</code>&#8221; would return a file descriptor to the file &#8220;afile&#8221;.<div class="spacer">
</div>
There are at least five system calls that do not follow links, and which operate on the symbolic link itself. They are: <a class="link-man" href="../html2/lchown.html">lchown(2)</a>, <a class="link-man" href="../html2/lstat.html">lstat(2)</a>, <a class="link-man" href="../html2/readlink.html">readlink(2)</a>, <a class="link-man" href="../html2/rename.html">rename(2)</a>, and <a class="link-man" href="../html2/unlink.html">unlink(2)</a>. Because <a class="link-man" href="../html3/remove.html">remove(3)</a> is an alias for <a class="link-man" href="../html2/unlink.html">unlink(2)</a>, it also does not follow symbolic links.<div class="spacer">
</div>
Additionally, the following system calls accept a <i class="farg">flag</i> argument to control whether or not to follow symbolic links: <a class="link-man" href="../html2/chflagsat.html">chflagsat(2)</a>, <a class="link-man" href="../html2/fchmodat.html">fchmodat(2)</a>, <a class="link-man" href="../html2/fchownat.html">fchownat(2)</a>, <a class="link-man" href="../html2/fstatat.html">fstatat(2)</a>, <a class="link-man" href="../html2/linkat.html">linkat(2)</a>, and <a class="link-man" href="../html2/utimensat.html">utimensat(2)</a>.<div class="spacer">
</div>
The <span class="unix">4.4BSD</span> system differs from historical 4BSD systems in that the system call <a class="link-man" href="../html2/chown.html">chown(2)</a> has been changed to follow symbolic links. The <a class="link-man" href="../html2/lchown.html">lchown(2)</a> system call was added later when the limitations of the new <a class="link-man" href="../html2/chown.html">chown(2)</a> became apparent.</div>
<div class="subsection">
<h2 id="x436f6d6d616e6473206e6f742074726176657273696e6720612066696c652074726565">Commands not traversing a file tree</h2> The second area is symbolic links, specified as command-line file name arguments, to commands which are not traversing a file tree.<div class="spacer">
</div>
Except as noted below, commands follow symbolic links named as command-line arguments. For example, if there were a symbolic link &#8220;<code class="lit">slink</code>&#8221; which pointed to a file named &#8220;<code class="lit">afile</code>&#8221;, the command &#8220;<code class="lit">cat slink</code>&#8221; would display the contents of the file &#8220;<code class="lit">afile</code>&#8221;.<div class="spacer">
</div>
It is important to realize that this rule includes commands which may optionally traverse file trees, e.g., the command &#8220;<code class="lit">chown owner file</code>&#8221; is included in this rule, while the command &#8220;<code class="lit">chown -R owner file</code>&#8221; is not. (The latter is described in the third area, below.)<div class="spacer">
</div>
If it is explicitly intended that the command operate on the symbolic link instead of following the symbolic link -- e.g., it is desired that &#8220;<code class="lit">chown owner slink</code>&#8221; change the ownership of &#8220;<code class="lit">slink</code>&#8221;, not of what it points to -- the <b class="flag">-h</b> option should be used. In the above example, &#8220;<code class="lit">chown owner slink</code>&#8221; would change the owner of &#8220;<code class="lit">afile</code>&#8221; to &#8220;<code class="lit">owner</code>&#8221;, while &#8220;<code class="lit">chown -h owner slink</code>&#8221; would change the ownership of &#8220;<code class="lit">slink</code>&#8221;.<div class="spacer">
</div>
There are several exceptions to this rule. The <a class="link-man" href="../html1/mv.html">mv(1)</a> and <a class="link-man" href="../html1/rm.html">rm(1)</a> commands do not follow symbolic links named as arguments, but respectively attempt to rename and delete them. (Note that if the symbolic link references a file via a relative path, moving it to another directory may very well cause it to stop working, since the path may no longer be correct.)<div class="spacer">
</div>
The <a class="link-man" href="../html1/ls.html">ls(1)</a> command is also an exception to this rule. For compatibility with historic systems (when <b class="name">ls</b> is not doing a tree walk, i.e., the <b class="flag">-R</b> option is not specified), the <b class="name">ls</b> command follows symbolic links named as arguments if the <b class="flag">-L</b> option is specified, or if the <b class="flag">-F</b>, <b class="flag">-d</b>, or <b class="flag">-l</b> options are not specified. (If the <b class="flag">-L</b> option is specified, <b class="name">ls</b> always follows symbolic links. The <b class="flag">-L</b> option affects its behavior even though it is not doing a walk of a file tree.)<div class="spacer">
</div>
The <a class="link-man" href="../html1/file.html">file(1)</a> command behaves as <a class="link-man" href="../html1/ls.html">ls(1)</a> in that the <b class="flag">-L</b> option makes it follow a symbolic link. By default, &#8220;<code class="lit">file slink</code>&#8221; will report that &#8220;<code class="lit">slink</code>&#8221; is a symbolic link. This behavior is different from <a class="link-man" href="../html1/file.html">file(1)</a> on some other systems, where the <b class="flag">-h</b> convention is followed.<div class="spacer">
</div>
The <span class="unix">4.4BSD</span> system differs from historical 4BSD systems in that the <a class="link-man" href="../html8/chown.html">chown(8)</a>, <a class="link-man" href="../html1/chgrp.html">chgrp(1)</a>, and <a class="link-man" href="../html1/file.html">file(1)</a> commands follow symbolic links specified on the command line (unless the <b class="flag">-h</b> option is used).</div>
<div class="subsection">
<h2 id="x436f6d6d616e64732074726176657273696e6720612066696c652074726565">Commands traversing a file tree</h2> The following commands either optionally or always traverse file trees: <a class="link-man" href="../html1/chflags.html">chflags(1)</a>, <a class="link-man" href="../html1/chgrp.html">chgrp(1)</a>, <a class="link-man" href="../html1/chmod.html">chmod(1)</a>, <a class="link-man" href="../html1/cp.html">cp(1)</a>, <a class="link-man" href="../html1/du.html">du(1)</a>, <a class="link-man" href="../html1/find.html">find(1)</a>, <a class="link-man" href="../html1/ls.html">ls(1)</a>, <a class="link-man" href="../html1/pax.html">pax(1)</a>, <a class="link-man" href="../html1/rm.html">rm(1)</a>, <a class="link-man" href="../html1/tar.html">tar(1)</a>, and <a class="link-man" href="../html8/chown.html">chown(8)</a>.<div class="spacer">
</div>
It is important to realize that the following rules apply equally to symbolic links encountered during the file tree traversal and symbolic links listed as command-line arguments.<div class="spacer">
</div>
The first rule applies to symbolic links that reference files that are not of type directory. Operations that apply to symbolic links are performed on the links themselves, but otherwise the links are ignored.<div class="spacer">
</div>
For example, the command &#8220;<code class="lit">chown -R user slink directory</code>&#8221; will ignore &#8220;<code class="lit">slink</code>&#8221;, because the <b class="flag">-h</b> option was not given. Any symbolic links encountered during the tree traversal will also be ignored. The command &#8220;<code class="lit">rm -r slink directory</code>&#8221; will remove &#8220;<code class="lit">slink</code>&#8221;, as well as any symbolic links encountered in the tree traversal of &#8220;<code class="lit">directory</code>&#8221;, because symbolic links may be removed. In no case will either <a class="link-man" href="../html8/chown.html">chown(8)</a> or <a class="link-man" href="../html1/rm.html">rm(1)</a> follow the symlink to affect the file which &#8220;<code class="lit">slink</code>&#8221; references.<div class="spacer">
</div>
The second rule applies to symbolic links that reference files of type directory. Symbolic links which reference files of type directory are never &#8220;followed&#8221; by default. This is often referred to as a &#8220;physical&#8221; walk, as opposed to a &#8220;logical&#8221; walk (where symbolic links referencing directories are followed).<div class="spacer">
</div>
As consistently as possible, it is possible to make commands doing a file tree walk follow any symbolic links named on the command line, regardless of the type of file they reference, by specifying the <b class="flag">-H</b> (for &#8220;half-logical&#8221;) flag. This flag is intended to make the command-line name space look like the logical name space. (Note: for commands that do not always do file tree traversals, the <b class="flag">-H</b> flag will be ignored if the <b class="flag">-R</b> flag is not also specified.)<div class="spacer">
</div>
For example, the command &#8220;<code class="lit">chown -HR user slink</code>&#8221; will traverse the file hierarchy rooted in the file pointed to by &#8220;<code class="lit">slink</code>&#8221;. The <b class="flag">-H</b> is not the same as the previously discussed <b class="flag">-h</b> flag. The <b class="flag">-H</b> flag causes symbolic links specified on the command line to be dereferenced both for the purposes of the action to be performed and the tree walk, and it is as if the user had specified the name of the file to which the symbolic link pointed.<div class="spacer">
</div>
As consistently as possible, it is possible to make commands doing a file tree walk follow any symbolic links named on the command line, as well as any symbolic links encountered during the traversal, regardless of the type of file they reference, by specifying the <b class="flag">-L</b> (for &#8220;logical&#8221;) flag. This flag is intended to make the entire name space look like the logical name space. (Note: for commands that do not always do file tree traversals, the <b class="flag">-L</b> flag will be ignored if the <b class="flag">-R</b> flag is not also specified.)<div class="spacer">
</div>
For example, the command &#8220;<code class="lit">chown -LR user slink</code>&#8221; will change the owner of the file referenced by &#8220;<code class="lit">slink</code>&#8221;. If &#8220;<code class="lit">slink</code>&#8221; references a directory, <b class="name">chown</b> will traverse the file hierarchy rooted in the directory that it references. In addition, if any symbolic links are encountered in any file tree that <b class="name">chown</b> traverses, they will be treated in the same fashion as &#8220;<code class="lit">slink</code>&#8221;.<div class="spacer">
</div>
As consistently as possible, it is possible to specify the default behavior by specifying the <b class="flag">-P</b> (for &#8220;physical&#8221;) flag. This flag is intended to make the entire name space look like the physical name space.<div class="spacer">
</div>
For commands that do not by default do file tree traversals, the <b class="flag">-H</b>, <b class="flag">-L</b>, and <b class="flag">-P</b> flags are ignored if the <b class="flag">-R</b> flag is not also specified. In addition, the <b class="flag">-H</b>, <b class="flag">-L</b>, and <b class="flag">-P</b> options may be specified more than once; the last one specified determines the command's behavior. This is intended to permit aliasing commands to behave one way or the other, and then override that behavior on the command line.<div class="spacer">
</div>
The <a class="link-man" href="../html1/ls.html">ls(1)</a> and <a class="link-man" href="../html1/rm.html">rm(1)</a> commands have exceptions to these rules. The <b class="name">rm</b> command operates on the symbolic link, and not the file it references, and therefore never follows a symbolic link. The <b class="name">rm</b> command does not support the <b class="flag">-H</b>, <b class="flag">-L</b>, or <b class="flag">-P</b> options.<div class="spacer">
</div>
To maintain compatibility with historic systems, the <b class="name">ls</b> command never follows symbolic links unless the <b class="flag">-L</b> flag is specified. If the <b class="flag">-L</b> flag is specified, <b class="name">ls</b> follows all symbolic links, regardless of their type, whether specified on the command line or encountered in the tree walk. The <b class="name">ls</b> command does not support the <b class="flag">-H</b> or <b class="flag">-P</b> options.</div>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../html1/chflags.html">chflags(1)</a>, <a class="link-man" href="../html1/chgrp.html">chgrp(1)</a>, <a class="link-man" href="../html1/chmod.html">chmod(1)</a>, <a class="link-man" href="../html1/cp.html">cp(1)</a>, <a class="link-man" href="../html1/du.html">du(1)</a>, <a class="link-man" href="../html1/find.html">find(1)</a>, <a class="link-man" href="../html1/ln.html">ln(1)</a>, <a class="link-man" href="../html1/ls.html">ls(1)</a>, <a class="link-man" href="../html1/mv.html">mv(1)</a>, <a class="link-man" href="../html1/pax.html">pax(1)</a>, <a class="link-man" href="../html1/rm.html">rm(1)</a>, <a class="link-man" href="../html1/tar.html">tar(1)</a>, <a class="link-man" href="../html2/lchown.html">lchown(2)</a>, <a class="link-man" href="../html2/lstat.html">lstat(2)</a>, <a class="link-man" href="../html2/readlink.html">readlink(2)</a>, <a class="link-man" href="../html2/rename.html">rename(2)</a>, <a class="link-man" href="../html2/symlink.html">symlink(2)</a>, <a class="link-man" href="../html2/unlink.html">unlink(2)</a>, <a class="link-man" href="../html3/fts.html">fts(3)</a>, <a class="link-man" href="../html3/remove.html">remove(3)</a>, <a class="link-man" href="../html8/chown.html">chown(8)</a></div>
</div>
</body>
</html>

