<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/posix/style.css" type="text/css" media="all"/>
<title>
LIBRARY-SPECS(7)</title>
</head>
<body>
<div class="mandoc">
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">library-specs</b> &#8212; <span class="desc">shared library name specifications</span></div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> Each <span class="env">WANTLIB</span> item in the ports tree conforms to<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
[path/]libname[=major[.minor]]</pre>
<div class="spacer">
</div>
or<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
[path/]libname[&gt;=major[.minor]]</pre>
<div class="spacer">
</div>
All libraries that a package needs must be mentioned in that list. Except for system and X11 libraries, they all must be reachable through <span class="env">LIB_DEPENDS</span> and <span class="env">RUN_DEPENDS</span>, directly, or indirectly through recursive dependencies.<div class="spacer">
</div>
Conversely, the ports tree uses <span class="env">WANTLIB</span> to check whether a given <span class="env">LIB_DEPENDS</span> will be required at runtime for shared libraries, and thus turn it into a <b class="flag">@depend</b> line (see <a class="link-man" href="../html1/pkg_create.html">pkg_create(1)</a>).<div class="spacer">
</div>
The package system will embed correct dependency checks in the built package in the form of <b class="flag">@wantlib</b> lines, according to the normal shared library semantics: any library with the same major number, and a greater or equal minor number will do.<div class="spacer">
</div>
Note that static libraries can only satisfy a library specification if no shared library has been found. Thus, if WANTLIB = foo&gt;=5, and both libfoo.so.4.0 and libfoo.a are present, the check will fail.<div class="spacer">
</div>
Therefore, porters must strive to respect correct shared library semantics in their own ports: by bumping the minor number each time the interface is augmented, and by bumping the major number each time the interface changes. Note that adding functions to a library is an interface augmentation. Removing functions is an interface change.<div class="spacer">
</div>
The major.minor components of the library specification are used only as a build-time check, the run-time checks are computed by <a class="link-man" href="../html1/resolve-lib.html">resolve-lib(1)</a>. For &#8216;libname&gt;=major[.minor]&#8217;, any library which is more recent than the given major.minor version will do. If a specific major number is needed, use the form &#8216;libname=major[.minor]&#8217;. If the minor component is left empty, any minor will do. If both components are left empty, any version will do.<div class="spacer">
</div>
Most specifications won't mention a <i class="file">path</i>: <a class="link-man" href="../html1/resolve-lib.html">resolve-lib(1)</a> will look in the default <a class="link-man" href="../html8/ldconfig.html">ldconfig(8)</a> path automatically, namely <i class="file">/usr/local/lib</i>, <i class="file">/usr/X11R6/lib</i>, <i class="file">/usr/lib</i>. It is generally a bad idea to put libraries elsewhere as they won't be reached directly.<div class="spacer">
</div>
However, distinct ports may install different major versions of the same library in <i class="file">/usr/local/lib</i>, and disambiguate the build by creating a link in a separate directory, and specifying the right options to the linker.<div class="spacer">
</div>
These libraries will require a <i class="file">path</i> component in the corresponding <span class="env">WANTLIB</span> to make sure the right library is resolved. This path is rooted under <i class="file">/usr/local</i>. For instance, to refer to <i class="file">/usr/local/lib/qt3/libqt-mt.so.33.0</i>, one would use &#8216;lib/qt3/qt-mt&gt;=33&#8217;.</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../html1/check-lib-depends.html">check-lib-depends(1)</a>, <a class="link-man" href="../html1/ld.html">ld(1)</a>, <a class="link-man" href="../html1/ld.so.html">ld.so(1)</a>, <a class="link-man" href="../html1/pkg_add.html">pkg_add(1)</a>, <a class="link-man" href="../html1/resolve-lib.html">resolve-lib(1)</a>, <a class="link-man" href="../html5/bsd.port.mk.html">bsd.port.mk(5)</a>, <a class="link-man" href="../html7/packages.html">packages(7)</a>, <a class="link-man" href="../html7/packages-specs.html">packages-specs(7)</a>, <a class="link-man" href="../html7/ports.html">ports(7)</a>, <a class="link-man" href="../html8/ldconfig.html">ldconfig(8)</a></div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> Full support for library specifications first appeared in <span class="unix">OpenBSD&#160;3.1</span>. The format of specifications changed slightly to include &#8216;&gt;=&#8217; before <span class="unix">OpenBSD&#160;4.0</span>. The interactions between <span class="env">LIB_DEPENDS</span> and <span class="env">WANTLIB</span> were modified and clarified for <span class="unix">OpenBSD&#160;4.8</span>. The format of specifications changed again before <span class="unix">OpenBSD&#160;4.9</span> to remove extra noise.</div>
</div>
</body>
</html>

