<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/posix/style.css" type="text/css" media="all"/>
<title>
PORTS(7)</title>
</head>
<body>
<div class="mandoc">
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">ports</b> &#8212; <span class="desc">contributed applications</span></div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> The <span class="unix">OpenBSD</span> Ports Collection is the infrastructure used to create binary packages for third party applications.<div class="spacer">
</div>
For normal usage refer to <a class="link-man" href="../html7/packages.html">packages(7)</a>, as most ports produce binary packages which are available from the official CD-ROM, or on a neighborly FTP mirror.<div class="spacer">
</div>
Each port contains any patches necessary to make the original application source code compile and run on <span class="unix">OpenBSD</span>. Compiling an application is as simple as typing <b class="cmd">make</b> in the port directory! The <i class="file">Makefile</i> automatically fetches the application source code, either from a local disk or via ftp, unpacks it on the local system, applies the patches, and compiles it. If all goes well, simply type <b class="cmd">doas make install</b> to install the application.<div class="spacer">
</div>
For more information about using ports, see The <span class="unix">OpenBSD</span> Ports System (<a class="link-ext" href="http://www.openbsd.org/faq/faq15.html#Ports">http://www.openbsd.org/faq/faq15.html#Ports</a>). For information about creating new ports, see the <span class="unix">OpenBSD</span> Porter's Handbook (<a class="link-ext" href="http://www.openbsd.org/faq/ports/">http://www.openbsd.org/faq/ports/</a>).<div class="spacer">
</div>
For a detailed description of the build process, see <a class="link-man" href="../html5/bsd.port.mk.html">bsd.port.mk(5)</a>.</div>
<div class="section">
<h1 id="x504f525453204d4153544552204d414b4546494c45">PORTS MASTER MAKEFILE</h1> The ports master Makefile, normally located in <i class="file">/usr/ports/Makefile</i> (but see <span class="env">PORTSDIR</span> below) offers a few useful targets.<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">index</b></dt>
<dd class="list-tag" style="margin-left: 9.00ex;">
rebuild the ports complete index, <i class="file">/usr/ports/INDEX</i></dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">pkglocatedb</b></dt>
<dd class="list-tag" style="margin-left: 9.00ex;">
build a <a class="link-man" href="../html1/pkg_mklocatedb.html">pkg_mklocatedb(1)</a> database file and place it in <i class="file">${PORTSDIR}/packages/${MACHINE_ARCH}/ftp</i>, for use by <a class="link-man" href="../html1/locate.html">locate(1)</a>,</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">print-index</b></dt>
<dd class="list-tag" style="margin-left: 9.00ex;">
display the contents of the index in a user-friendly way,</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">search</b></dt>
<dd class="list-tag" style="margin-left: 9.00ex;">
invoked with a key, e.g., <b class="cmd">make search key=foo</b>, retrieve information relevant to a given port (obsolescent).</dd>
</dl>
<div class="spacer">
</div>
Starting in <span class="unix">OpenBSD&#160;4.0</span>, there is a port, <i class="file">databases/sqlports</i> that builds an sqlite database containing most information relevant to every port in the ports tree. This database can be searched using any tool able to manipulate such databases, for instance sqlitebrowser, or a script language with an sqlite interface, e.g., perl, python, ocaml, lua, php5.</div>
<div class="section">
<h1 id="x53454c454354494e47204120534554204f4620504f525453">SELECTING A SET OF PORTS</h1> One can define <span class="env">SUBDIRLIST</span> to point to a file that contains a list of <span class="env">FULLPKGPATHs</span>, one per line, to build stuff only in some directories.<div class="spacer">
</div>
If <i class="file">/usr/ports/INDEX</i> is up to date, it is possible to select subsets by setting the following variables on the command line:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="var">key</b></dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
package name matching the given key,</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="var">category</b></dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
port belonging to category,</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="var">maintainer</b></dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
port maintained by a given person.</dd>
</dl>
<div class="spacer">
</div>
For instance, to invoke <b class="flag">clean</b> on all ports in the x11 category, one can say:<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
$ make category=x11 clean</pre>
<div class="spacer">
</div>
The index search is done by a perl script, so all regular expressions from <a class="link-man" href="../html1/perlre.html">perlre(1)</a> apply.</div>
<div class="section">
<h1 id="x54415247455453">TARGETS</h1> Individual ports are controlled through a few documented targets. Some of these targets work recursively through subdirectories, so that someone can, for example, install all of the net ports.<div class="spacer">
</div>
The variable <span class="env">SKIPDIR</span> can hold a set of package directories to avoid during recursion. These are always specified relative to the root of the ports tree, and can contain a flavor or subpackage part (see <a class="link-man" href="../html7/packages-specs.html">packages-specs(7)</a>). <span class="env">SKIPDIR</span> is handled by a <b class="cmd">case</b> statement, and so can contain simple wildcards (see <a class="link-man" href="../html1/sh.html">sh(1)</a> &#8220;File name patterns&#8221;), e.g., SKIPDIR='editors/openoffice*' .<div class="spacer">
</div>
The variable <span class="env">STARTDIR</span> can hold the path to a starting directory. The recursion will skip all directories up to that package path. This can be used to resume a full build at some specific point without having to go through thousands of directories first.<div class="spacer">
</div>
The variable <span class="env">STARTAFTER</span> can hold the path to a starting directory. The recursion will skip all directories up to and including that package path. This can be used to resume a full build after some specific point without having to go through thousands of directories first.<div class="spacer">
</div>
In case of failure in a subdirectory, the shell fragment held in <span class="env">REPORT_PROBLEM</span> is executed. Default behavior is to call exit, but this can be overridden on the command line, e.g., to avoid stopping after each problem.<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
$ make REPORT_PROBLEM=true</pre>
<div class="spacer">
</div>
If <span class="env">REPORT_PROBLEM_LOGFILE</span> is non empty, then <span class="env">REPORT_PROBLEM</span> will default to:<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
echo $$subdir ($@) &gt;&gt;$${REPORT_PROBLEM_LOGFILE}</pre>
<div class="spacer">
</div>
That is, any failure will append the faulty directory name together with the target that failed to <i class="file">${REPORT_PROBLEM_LOGFILE}</i> and proceed.<div class="spacer">
</div>
Some targets that do this are <b class="flag">all</b>, <b class="flag">build</b>, <b class="flag">checksum</b>, <b class="flag">clean</b>, <b class="flag">configure</b>, <b class="flag">extract</b>, <b class="flag">fake</b>, <b class="flag">fetch</b>, <b class="flag">install</b>, <b class="flag">distclean</b>, <b class="flag">deinstall</b>, <b class="flag">reinstall</b>, <b class="flag">package</b>, <b class="flag">prepare</b>, <b class="flag">link-categories</b>, <b class="flag">unlink-categories</b>, <b class="flag">describe</b>, <b class="flag">show</b>, <b class="flag">regress</b>, <b class="flag">lib-depends-check</b>, <b class="flag">homepage-links</b>, <b class="flag">manpages-check</b>, <b class="flag">license-check</b>, <b class="flag">all-dir-depends</b>, <b class="flag">build-dir-depends</b>, <b class="flag">run-dir-depends</b> and <b class="flag">readmes</b>.<div class="spacer">
</div>
Target names starting with &#8216;_&#8217; are private to the ports infrastructure, should not be invoked directly, and are liable to change without notice.<div class="spacer">
</div>
In the following list, each target will run the preceding targets in order automatically. That is, <b class="flag">build</b> will be run (if necessary) by <b class="flag">install</b>, and so on all the way to <b class="flag">fetch</b>. In typical use, one will only run <b class="flag">install</b> explicitly (as normal user, with <span class="env">SUDO</span> defined in <i class="file">/etc/mk.conf</i>), or <b class="flag">build</b> (as user), then <b class="flag">install</b> (as root).<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">fetch</b></dt>
<dd class="list-tag" style="margin-left: 9.00ex;">
Fetch all of the files needed to build this port from the site(s) listed in <span class="env">MASTER_SITES</span>. See <span class="env">FETCH_CMD</span> and <span class="env">MASTER_SITE_OVERRIDE</span>. Use <a class="link-man" href="../html1/dpb.html">dpb(1)</a> with option <b class="flag">-F</b> to quickly fetch distfiles for a subtree.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">checksum</b></dt>
<dd class="list-tag" style="margin-left: 9.00ex;">
Verify that the fetched distfile matches the one the port was tested against. Defining <span class="env">NO_CHECKSUM</span> to <span class="define">Yes</span> will skip this step. Sometimes, distfiles change without warning. The main <span class="unix">OpenBSD</span> mirror should still hold a copy of old distfiles, indexed by checksum. Using<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
$ make checksum REFETCH=true</pre>
<div class="spacer">
</div>
will try to get a set of distfiles that match the recorded checksum.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">prepare</b></dt>
<dd class="list-tag" style="margin-left: 9.00ex;">
Install any build dependencies of the current port. Defining <span class="env">NO_DEPENDS</span> to <span class="define">Yes</span> will skip this step.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">extract</b></dt>
<dd class="list-tag" style="margin-left: 9.00ex;">
Expand the distfile into a work directory.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">patch</b></dt>
<dd class="list-tag" style="margin-left: 9.00ex;">
Apply any patches that are necessary for the port.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">configure</b></dt>
<dd class="list-tag" style="margin-left: 9.00ex;">
Configure the port. Some ports will ask questions during this stage. See <span class="env">INTERACTIVE</span> and <span class="env">BATCH</span>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">build</b></dt>
<dd class="list-tag" style="margin-left: 9.00ex;">
Build the port. This is the same as calling the <b class="flag">all</b> target.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">fake</b></dt>
<dd class="list-tag" style="margin-left: 9.00ex;">
Pretend to install the port under a subdirectory of the work directory.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">package</b></dt>
<dd class="list-tag" style="margin-left: 9.00ex;">
Create a binary package from the fake installation. The package is a .tgz file that can be used to install the port with <a class="link-man" href="../html1/pkg_add.html">pkg_add(1)</a>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">install</b></dt>
<dd class="list-tag" style="margin-left: 9.00ex;">
Install the resulting package.</dd>
</dl>
<div class="spacer">
</div>
The following targets are not run during the normal install process.<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">print-build-depends</b>, <b class="flag">print-run-depends</b></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
Print an ordered list of all the compile and run dependencies.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">clean</b></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
Remove the expanded source code. This does not recurse to dependencies unless <span class="env">CLEANDEPENDS</span> is defined to <span class="define">Yes</span>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">distclean</b></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
Remove the port's distfile(s). This does not recurse to dependencies.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">regress</b></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
Runs the ports regression tests. Usually needs a completed build.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">reinstall</b></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
Use this to restore a port after using <a class="link-man" href="../html1/pkg_delete.html">pkg_delete(1)</a>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">update</b></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
Alternative target to <b class="flag">install</b>. Does not install new packages, but updates existing ones.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">link-categories</b></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
Populate the ports tree with symbolic links for each category the port belongs to.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">unlink-categories</b></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
Remove the symbolic links created by <b class="flag">link-categories</b>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">homepage-links</b></dt>
<dd class="list-tag" style="margin-left: 10.00ex;">
creates an html list of links for each port <span class="env">HOMEPAGE</span>.</dd>
</dl>
</div>
<div class="section">
<h1 id="x4c4f434b20494e465241535452554354555245">LOCK INFRASTRUCTURE</h1> The ports tree can be used concurrently for building several ports at the same time, thanks to a locking mechanism. By default, locks are stored under <i class="file">/tmp/portslocks</i>. Defining <span class="env">LOCKDIR</span> will point them elsewhere, or disable the mechanism if set to an empty value.<div class="spacer">
</div>
All locks will be stored in <i class="file">${LOCKDIR}</i>. <span class="env">LOCK_CMD</span> should be used to acquire a lock, and <span class="env">UNLOCK_CMD</span> should be used to release it.<div class="spacer">
</div>
Locks are named <i class="file">${LOCKDIR}/${FULLPKGNAME}.lock</i>, or <i class="file">${LOCKDIR}/${DISTFILE}.lock</i> for distfiles fetching.<div class="spacer">
</div>
The default values of <span class="env">LOCK_CMD</span> and <span class="env">UNLOCK_CMD</span> are appropriate for most uses.<div class="spacer">
</div>
The locking protocol follows a big-lock model: each top-level target in a port directory will acquire the corresponding lock, complete its job, then release the lock, e.g., running<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
$ make build</pre>
<div class="spacer">
</div>
will acquire the lock, run the port through <b class="flag">fetch</b>, <b class="flag">checksum</b>, <b class="flag">extract</b>, <b class="flag">patch</b>, <b class="flag">configure</b>, <b class="flag">build</b>, then release the lock. If dependencies are involved, they will invoke top-level targets in other directories, and thus acquire some other locks as well.<div class="spacer">
</div>
The infrastructure contains some protection against acquiring the same lock twice, thus recursive locking is not needed for <span class="env">LOCK_CMD</span>.<div class="spacer">
</div>
Starting with <span class="unix">OpenBSD&#160;4.3</span>, the infrastructure supports manual locking: the targets <b class="flag">lock</b> and <b class="flag">unlock</b> can be used to acquire and release individual locks. Both these targets output a shell command that must be used to update environment variables. Manual locking can be used to protect a directory against interference by an automated build job, while the user is looking at or modifying a given port.</div>
<div class="section">
<h1 id="x5550444154494e47205041434b41474553">UPDATING PACKAGES</h1> Instead of deinstalling each package and rebuilding from scratch, the ports tree can be used to update installed packages. The <b class="flag">update</b> target will replace an installed package using <a class="link-man" href="../html1/pkg_add.html">pkg_add(1)</a> in replacement mode. If <span class="env">FORCE_UPDATE</span> is set to <span class="define">Yes</span>, dependencies will also be updated first, and packages will always be updated, even if there is no difference between the old and the new packages.<div class="spacer">
</div>
Updates use a mechanism similar to bulk cookies and deposit cookies in the <span class="env">UPDATE_COOKIES_DIR</span>. See the next section for more details, since most of the fine points of bulk package building also apply to updates.<div class="spacer">
</div>
There are bugs in the ports tree, most related to libtool, which make some updates prefer the already installed libraries instead of the newly built ones. This shows up as undefined references in libraries, in which case there is no choice but to proceed the old way: deinstall the offending package and everything built on top of it, build and install new packages.</div>
<div class="section">
<h1 id="x42554c4b205041434b414745204255494c44494e47">BULK PACKAGE BUILDING</h1> Building any significant number of packages from the ports tree should use <a class="link-man" href="../html1/dpb.html">dpb(1)</a>, a tool located inside the ports tree proper (normally as <i class="file">/usr/ports/infrastructure/bin/dpb</i>). In particular, it can take advantage of machine clusters (same architecture and same installation), and of multi-core machines.<div class="spacer">
</div>
A few remarks may save a lot of time:<ul style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-bul">
<li class="list-bul" style="margin-top: 1.00em;">
The default limits in <a class="link-man" href="../html5/login.conf.html">login.conf(5)</a> are inappropriate for bulk builds. <b class="var">maxproc</b>, <b class="var">openfiles</b>, <b class="var">datasize</b> should be cranked way up, especially for parallel builds. For instance, a lot of C++-based ports will require a <b class="var">datasize</b> over 1G.</li>
<li class="list-bul" style="margin-top: 1.00em;">
Cluster builds should have shared <span class="env">PORTSDIR</span> and local <span class="env">WRKOBJDIR</span>. If possible, dedicated <span class="env">WRKOBJDIR</span> partitions mounted &#8216;noatime,async&#8217; will help.</li>
<li class="list-bul" style="margin-top: 1.00em;">
As far as possible, the log directory should be local to the machine running <a class="link-man" href="../html1/dpb.html">dpb(1)</a>.</li>
<li class="list-bul" style="margin-top: 1.00em;">
A full bulk will fetch over 20G of distfiles and create over 17G of packages. The largest work directories are about 10G each.</li>
<li class="list-bul" style="margin-top: 1.00em;">
Take notice of <span class="env">CHECKSUM_PACKAGES</span> in <a class="link-man" href="../html5/bsd.port.mk.html">bsd.port.mk(5)</a>. This can be set to &#8216;ftp&#8217; during official package builds to compute partial sha256 checksum files.<div class="spacer">
</div>
At the end of the build, just<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
cd ${PORTSDIR}/packages/${MACHINE_ARCH}/cksums &amp;&amp; cat * &gt;sha256</pre>
</li>
</ul>
</div>
<div class="section">
<h1 id="x4e4554574f524b20434f4e46494755524154494f4e">NETWORK CONFIGURATION</h1> The variables pertaining to network access have been marshalled into <i class="file">${PORTSDIR}/infrastructure/templates/network.conf.template</i>.<div class="spacer">
</div>
To customize that setup, copy that file into <i class="file">${PORTSDIR}/infrastructure/db/network.conf</i> and edit it.<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">MASTER_SITE_OPENBSD</span></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
If set to <span class="define">Yes</span>, include the master <span class="unix">OpenBSD</span> site when fetching files.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">MASTER_SITE_FREEBSD</span></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
If set to <span class="define">Yes</span>, include the master <span class="unix">FreeBSD</span> site when fetching files.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">MASTER_SITE_OVERRIDE</span></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
Go to this site first for all files.</dd>
</dl>
</div>
<div class="section">
<h1 id="x464c41564f5253">FLAVORS</h1> The <span class="unix">OpenBSD</span> ports tree comes with a mechanism called <b class="cmd">FLAVORS</b>. Thanks to this mechanism, users can select specific options provided by a given port.<div class="spacer">
</div>
If a port is &#8220;flavored&#8221;, there should be a terse description of available flavors in the <i class="file">pkg/DESCR</i> file.<div class="spacer">
</div>
For example, the <i class="file">misc/screen</i> port comes with a flavor called <b class="cmd">static</b>. This changes the building process so a statically compiled version of the program will be built. To avoid confusion with other packages or flavors, the package name will be extended with a dash-separated list of the selected flavors.<div class="spacer">
</div>
In this instance, the corresponding package will be called <b class="cmd">screen-4.0.2-static</b>.<div class="spacer">
</div>
To see the flavors of a port, use the <b class="flag">show</b> target:<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
$ make show=FLAVORS</pre>
<div class="spacer">
</div>
To build a port with a specific flavor, just pass <span class="env">FLAVOR</span> in the environment of the <a class="link-man" href="../html1/make.html">make(1)</a> command:<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
$ env FLAVOR=&quot;static&quot; make package</pre>
<div class="spacer">
</div>
and of course, use the same settings for the subsequent invocations of make:<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
$ env FLAVOR=&quot;static&quot; make install 
$ env FLAVOR=&quot;static&quot; make clean</pre>
<div class="spacer">
</div>
More than one flavor may be specified:<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
$ cd /usr/ports/mail/exim 
$ env FLAVOR=&quot;mysql ldap&quot; make package</pre>
<div class="spacer">
</div>
Specifying a flavor that does not exist is an error. Additionally, some ports impose some further restrictions on flavor combinations, when such combinations do not make sense.<div class="spacer">
</div>
Lots of ports can be built without X11 requirement and accordingly have a <b class="cmd">no_x11</b> flavor.<div class="spacer">
</div>
Flavor settings are not propagated to dependencies. If a specific combination is needed, careful hand-building of the required set of packages is still necessary.</div>
<div class="section">
<h1 id="x4d554c54495f5041434b41474553">MULTI_PACKAGES</h1> The <span class="unix">OpenBSD</span> ports tree comes with a mechanism called <b class="cmd">MULTI_PACKAGES</b>. This mechanism is used when a larger package is broken down into several smaller components referred to as subpackages.<div class="spacer">
</div>
If a port is &#8220;subpackaged&#8221;, each subpackage will have a corresponding description in the <i class="file">pkg/DESCR-subpackage</i> file.<div class="spacer">
</div>
For example, the <i class="file">databases/mariadb</i> port comes with subpackages called <b class="cmd">-main</b>, <b class="cmd">-tests</b> and <b class="cmd">-server</b>.<div class="spacer">
</div>
In this instance, the build will yield multiple packages, one corresponding to each subpackage. In the case of our mariadb example, the packages will be called <b class="cmd">mariadb-client-&lt;version&gt;</b>, <b class="cmd">mariadb-tests-&lt;version&gt;</b>, and <b class="cmd">mariadb-server-&lt;version&gt;</b>.<div class="spacer">
</div>
To install/deinstall a specific subpackage of a port, you may <a class="link-man" href="../html1/pkg_add.html">pkg_add(1)</a> them manually, or alternatively, you may set <span class="env">SUBPACKAGE</span> in the environment of the <a class="link-man" href="../html1/make.html">make(1)</a> command during the install/deinstall phase:<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
$ env SUBPACKAGE=&quot;-server&quot; make install 
$ env SUBPACKAGE=&quot;-server&quot; make deinstall</pre>
</div>
<div class="section">
<h1 id="x504f5254205641524941424c4553">PORT VARIABLES</h1> These can be changed in the environment, or in <i class="file">/etc/mk.conf</i> for persistence. They can also be set on make's command line, e.g., <b class="cmd">make VAR_FOO</b>=<span class="define">foo</span><div class="spacer">
</div>
Boolean variables should be set to <span class="define">Yes</span> instead of simply being defined, for uniformity and future compatibility.<div class="spacer">
</div>
Variable names starting with &#8216;_&#8217; are private to the ports infrastructure, should not be changed by the user, and are liable to change without notice.<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">PORTSDIR</span></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
Location of the ports tree (usually <i class="file">/usr/ports</i>).</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">DISTDIR</span></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
Where to find/put distfiles, normally <i class="file">${PORTSDIR}/distfiles</i>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">PACKAGE_REPOSITORY</span></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
Used only for the <b class="flag">package</b> target; the base directory for the packages tree, normally <i class="file">${PORTSDIR}/packages</i>. If this directory exists, the package tree will be (partially) constructed.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">BULK_COOKIES_DIR</span></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
During bulk package building, used to store cookies for already built packages to avoid rebuilding them, since the actual working directory will already have been cleaned out. Defaults to <i class="file">${PORTSDIR}/bulk/${MACHINE_ARCH}</i>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">UPDATE_COOKIES_DIR</span></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
Used to store cookies for package updates, defaults to <i class="file">${PORTSDIR}/update/${MACHINE_ARCH}</i>. If set to empty, it will revert to a file under <i class="file">${WRKDIR}</i>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">LOCALBASE</span></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
Where to install things in general (usually <i class="file">/usr/local</i>).</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">MASTER_SITES</span></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
Primary sites for distribution files if not found locally.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">CLEANDEPENDS</span></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
If set to <span class="define">Yes</span>, let <b class="flag">clean</b> recurse to dependencies.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">FETCH_CMD</span></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
Command to use to fetch files. Normally <a class="link-man" href="../html1/ftp.html">ftp(1)</a>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">FETCH_PACKAGES</span></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
If set to <span class="define">Yes</span>, try to use <a class="link-man" href="../html1/pkg_add.html">pkg_add(1)</a> to install the missing packages from <span class="env">PKG_PATH</span>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">PATCH_DEBUG</span></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
If defined, display verbose output when applying each patch.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">INTERACTIVE</span></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
If defined, only operate on a port if it requires interaction.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">BATCH</span></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
If defined, only operate on a port if it can be installed 100% automatically.</dd>
</dl>
</div>
<div class="section">
<h1 id="x5553494e47204120524541441e4f4e4c5920504f5254532054524545">USING A READ-ONLY PORTS TREE</h1> Select read-write partition(s) that can accommodate working directories, the distfiles repository, and the built packages. Set <span class="env">WRKOBJDIR</span>, <span class="env">PACKAGE_REPOSITORY</span>, <span class="env">BULK_COOKIES_DIR</span>, <span class="env">UPDATE_COOKIES_DIR</span>, <span class="env">DISTDIR</span>, and <span class="env">PLIST_DB</span> in <i class="file">/etc/mk.conf</i> accordingly.</div>
<div class="section">
<h1 id="x46494c4553">FILES</h1><dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/usr/ports</i></dt>
<dd class="list-tag" style="margin-left: 19.00ex;">
The default ports directory.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/usr/ports/Makefile</i></dt>
<dd class="list-tag" style="margin-left: 19.00ex;">
Ports master Makefile.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/usr/ports/INDEX</i></dt>
<dd class="list-tag" style="margin-left: 19.00ex;">
Ports index.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/usr/ports/infrastructure/mk/bsd.port.mk</i></dt>
<dd class="list-tag" style="margin-left: 19.00ex;">
The ports main engine.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/usr/ports/infrastructure/templates/network.conf.template</i></dt>
<dd class="list-tag" style="margin-left: 19.00ex;">
Network configuration defaults.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/usr/ports/infrastructure/db/network.conf</i></dt>
<dd class="list-tag" style="margin-left: 19.00ex;">
Local network configuration.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/usr/ports/infrastructure/db/user.list</i></dt>
<dd class="list-tag" style="margin-left: 19.00ex;">
List of users and groups created by ports.</dd>
</dl>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../html1/dpb.html">dpb(1)</a>, <a class="link-man" href="../html1/make.html">make(1)</a>, <a class="link-man" href="../html1/pkg_add.html">pkg_add(1)</a>, <a class="link-man" href="../html1/pkg_create.html">pkg_create(1)</a>, <a class="link-man" href="../html1/pkg_delete.html">pkg_delete(1)</a>, <a class="link-man" href="../html1/pkg_info.html">pkg_info(1)</a>, <a class="link-man" href="../html5/bsd.port.mk.html">bsd.port.mk(5)</a>, <a class="link-man" href="../html5/port-modules.html">port-modules(5)</a>, <a class="link-man" href="../html7/mirroring-ports.html">mirroring-ports(7)</a>, <a class="link-man" href="../html7/packages.html">packages(7)</a><div class="spacer">
</div>
The <span class="unix">OpenBSD</span> Ports System: <a class="link-ext" href="http://www.openbsd.org/faq/faq15.html#Ports">http://www.openbsd.org/faq/faq15.html#Ports</a><div class="spacer">
</div>
The <span class="unix">OpenBSD</span> Porter's Handbook: <a class="link-ext" href="http://www.openbsd.org/faq/ports/">http://www.openbsd.org/faq/ports/</a></div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> <b class="name">The Ports Collection</b> appeared in <span class="unix">FreeBSD&#160;1.0</span>. It was introduced in <span class="unix">OpenBSD</span> by Ejovi Nuwere, with much initial effort by Angelos D. Keromytis. Maintenance passed then to Marco S. Hyman, and then to Christopher Turan. It is currently managed by Marc Espie, Christian Weisgerber, along with a host of others found at <a class="link-mail" href="mailto:ports@openbsd.org">ports@openbsd.org</a>.</div>
<div class="section">
<h1 id="x415554484f5253">AUTHORS</h1> This man page was originated by <span class="author">David O'Brien</span>, from the <span class="unix">FreeBSD</span> project.</div>
</div>
</body>
</html>

