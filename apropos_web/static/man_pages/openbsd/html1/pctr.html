<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/posix/style.css" type="text/css" media="all"/>
<title>
PCTR(1)</title>
</head>
<body>
<div class="mandoc">
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">pctr</b> &#8212; <span class="desc">display CPU performance counters</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1><table class="synopsis">
<col style="width: 4.00ex;"/>
<col/>
<tbody>
<tr>
<td>
pctr</td>
<td>
[<span class="opt"><b class="flag">-AEeIiklMSu</b></span>] [<span class="opt"><b class="flag">-f</b> <i class="arg">funct</i></span>] [<span class="opt"><b class="flag">-m</b> <i class="arg">umask</i></span>] [<span class="opt"><b class="flag">-s</b> <i class="arg">ctr</i></span>] [<span class="opt"><b class="flag">-t</b> <i class="arg">thold</i></span>]</td>
</tr>
</tbody>
</table>
</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> The <b class="name">pctr</b> program is a sample implementation of how to access the <a class="link-man" href="../html4/pctr.html">pctr(4)</a> pseudo device available on many i386 and amd64 compatible machines.<div class="spacer">
</div>
By default, the <b class="name">pctr</b> command displays the current values of the TSC and any vendor specific counter registers.<div class="spacer">
</div>
The options are as follows:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-A</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Some bus events differentiate between the originating physical processor (a bus agent) and other agents on the bus. Specifying this option allows counting on all bus agents. This is supported on Intel processors only.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-E</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Enables counting exclusive cache coherency state (supported on Intel processors only).</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-e</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Enables Edge Detect. It is mandatory to enable Edge Detect with certain counter functions.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-f</b> <i class="arg">funct</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Specifies a function number in hexadecimal to program the counter, specified by the <b class="flag">-s</b> option.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-I</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Enables counting invalid cache coherency state (supported on Intel processors only).</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-i</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Invert the result of the threshold comparison, so that both greater than and less than comparisons can be made.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-k</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Count events occurring in kernel mode. Specification of either <b class="flag">-k</b> or <b class="flag">-u</b> options is mandatory.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-l</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
List all possible vendor specific counters available on the current processor.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-M</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Enables counting modified cache coherency state (supported on Intel processors only).</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-m</b> <i class="arg">umask</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Specifies a Unit Mask value for a function, specified by the <b class="flag">-f</b> option.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-S</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Enables counting shared cache coherency state (supported on Intel processors only).</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-s</b> <i class="arg">ctr</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Program counter number <i class="arg">ctr</i> with the function number specified by the <b class="flag">-f</b> option. A list of all possible functions supported on the current processor can be obtained by the <b class="flag">-l</b> option output.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-t</b> <i class="arg">thold</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Specifies an increment threshold. The counter <i class="arg">ctr</i> will be incremented if the number of events occurring during one cycle is greater or equal to <i class="arg">thold</i>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-u</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Count events occurring in user mode. Specification of either <b class="flag">-k</b> or <b class="flag">-u</b> options is mandatory.</dd>
</dl>
</div>
<div class="section">
<h1 id="x4558414d504c4553">EXAMPLES</h1> The following command, executed from the command line, will set the first performance counter to count the number of cacheable L1 data cache reads in user and kernel modes on an Intel Core2 Duo processor:<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
# pctr -s 0 -f 40 -uk -MESI</pre>
<div class="spacer">
</div>
To reset the counter run the following command:<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
# pctr -s 0 -f 0</pre>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../html4/pctr.html">pctr(4)</a><div class="spacer">
</div>
OS and Kernel Developer's Guide for AMD NPT Family 0Fh Processors.<div class="spacer">
</div>
Intel 64 and IA-32 Architectures Software Developer's Manual. Volume 3B: System Programming Guide, Part 2. Appendix A: Performance Monitoring Events.</div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> The <b class="name">pctr</b> program appeared in <span class="unix">OpenBSD&#160;2.0</span> but was subsequently rewritten in <span class="unix">OpenBSD&#160;4.3</span>.</div>
<div class="section">
<h1 id="x43415645415453">CAVEATS</h1> It is strongly advised to look through the manual for a particular processor before programming a counter and interpreting the results.</div>
</div>
</body>
</html>

