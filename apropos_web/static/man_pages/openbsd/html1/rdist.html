<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/posix/style.css" type="text/css" media="all"/>
<title>
RDIST(1)</title>
</head>
<body>
<div class="mandoc">
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">rdist</b> &#8212; <span class="desc">remote file distribution client program</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1><table class="synopsis">
<col style="width: 5.00ex;"/>
<col/>
<tbody>
<tr>
<td>
rdist</td>
<td>
[<span class="opt"><b class="flag">-DFnV</b></span>] [<span class="opt"><b class="flag">-A</b>&#160;<i class="arg">num</i></span>] [<span class="opt"><b class="flag">-a</b>&#160;<i class="arg">num</i></span>] [<span class="opt"><b class="flag">-c</b>&#160;<i class="arg">mini_distfile</i></span>] [<span class="opt"><b class="flag">-d</b>&#160;<i class="arg">var</i>=<i class="arg">value</i></span>] [<span class="opt"><b class="flag">-f</b>&#160;<i class="arg">distfile</i></span>] [<span class="opt"><b class="flag">-L</b>&#160;<i class="arg">remote_logopts</i></span>] [<span class="opt"><b class="flag">-l</b>&#160;<i class="arg">local_logopts</i></span>] [<span class="opt"><b class="flag">-M</b>&#160;<i class="arg">maxproc</i></span>] [<span class="opt"><b class="flag">-m</b>&#160;<i class="arg">host</i></span>] [<span class="opt"><b class="flag">-o</b>&#160;<i class="arg">distopts</i></span>] [<span class="opt"><b class="flag">-P</b>&#160;<i class="arg">rsh-path</i></span>] [<span class="opt"><b class="flag">-p</b>&#160;<i class="arg">rdistd-path</i></span>] [<span class="opt"><b class="flag">-t</b>&#160;<i class="arg">timeout</i></span>] [<span class="opt"><i class="arg">name&#160;...</i></span>]</td>
</tr>
</tbody>
</table>
</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> <b class="name">rdist</b> is a program to maintain identical copies of files over multiple hosts. It preserves the owner, group, mode, and mtime of files if possible and can update programs that are executing.<div class="spacer">
</div>
<b class="name">rdist</b> reads commands from <i class="file">distfile</i> to direct the updating of files and/or directories. If <i class="file">distfile</i> is &#8216;-&#8217;, the standard input is used. If no <b class="flag">-f</b> option is present, the program looks first for <i class="file">distfile</i>, then <i class="file">Distfile</i>, to use as the input. If no names are specified on the command line, <b class="name">rdist</b> will update all of the files and directories listed in <i class="file">distfile</i>. If the file <i class="file">/etc/Distfile</i> exists, it will be run automatically by the clock daemon <a class="link-man" href="../html8/cron.html">cron(8)</a>, via the system script <a class="link-man" href="../html8/daily.html">daily(8)</a>.<div class="spacer">
</div>
If <i class="arg">name</i> is specified, it is taken to be the name of a file to be updated or the label of a command to execute. If label and file names conflict, it is assumed to be a label. These may be used together to update specific files using specific commands.<div class="spacer">
</div>
<b class="name">rdist</b> uses a remote shell command to access each target host. By default, <a class="link-man" href="../html1/ssh.html">ssh(1)</a> is used unless overridden by the <b class="flag">-P</b> option or the <span class="env">RSH</span> environment variable. If the target host is the string &#8220;localhost&#8221; and the remote user name is the same as the local user name, <b class="name">rdist</b> will run the command:<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
/bin/sh -c rdistd -S</pre>
<div class="spacer">
</div>
Otherwise, <b class="name">rdist</b> will run the command:<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
ssh &lt;host&gt; -l &lt;login_name&gt; rdistd -S</pre>
<div class="spacer">
</div>
<i class="arg">host</i> is the name of the target host; <i class="arg">login_name</i> is the name of the user to make the connection as.<div class="spacer">
</div>
On each target host <b class="name">rdist</b> will attempt to run the command:<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
rdistd -S</pre>
<div class="spacer">
</div>
Or if the <b class="flag">-p</b> option was specified, <b class="name">rdist</b> will attempt to run the command:<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
&lt;rdistd path&gt; -S</pre>
<div class="spacer">
</div>
If no <b class="flag">-p</b> option is specified, or &#10216;<i class="arg">rdistd path</i>&#10217; is a simple filename, <a class="link-man" href="../html1/rdistd.html">rdistd(1)</a> or &#10216;<i class="arg">rdistd path</i>&#10217; must be somewhere in the <span class="env">PATH</span> of the user running <b class="name">rdist</b> on the remote (target) host.<div class="spacer">
</div>
The options are as follows:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-A</b> <i class="arg">num</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Set the minimum number of free files (inodes) on a filesystem that must exist for <b class="name">rdist</b> to update or install a file.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-a</b> <i class="arg">num</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Set the minimum amount of free space (in bytes) on a filesystem that must exist for <b class="name">rdist</b> to update or install a file.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-c</b> <i class="arg">mini_distfile</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Forces <b class="name">rdist</b> to interpret the remaining arguments as a small distfile. The format is:<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
$ rdist -c name ... [login@]host[:dest]</pre>
<div class="spacer">
</div>
The equivalent distfile is as follows:<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
(  name ... ) -&gt; [login@]host 
	install	[dest] ;</pre>
</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-D</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Enable copious debugging messages.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-d</b> <i class="arg">var</i>=<i class="arg">value</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Define <i class="arg">var</i> to have <i class="arg">value</i>. This option is used to define or override variable definitions in <i class="file">distfile</i>. <i class="arg">value</i> can be the empty string, one name, or a list of names surrounded by parentheses and separated by tabs and/or spaces.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-F</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Do not fork any child <b class="name">rdist</b> processes. All clients are updated sequentially.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-f</b> <i class="arg">distfile</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Set the name of the distfile to <i class="arg">distfile</i>. If &#8216;-&#8217; (dash) is used then read from standard input (stdin).</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-L</b> <i class="arg">remote_logopts</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Set remote logging options. See the section <i class="link-sec"><a class="link-sec" href="#x4d455353414745204c4f4747494e47">MESSAGE LOGGING</a></i> for details on the syntax for <i class="arg">remote_logopts</i>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-l</b> <i class="arg">local_logopts</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Set local logging options. See the section <i class="link-sec"><a class="link-sec" href="#x4d455353414745204c4f4747494e47">MESSAGE LOGGING</a></i> for details on the syntax for <i class="arg">local_logopts</i>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-M</b> <i class="arg">maxproc</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Set the maximum number of simultaneously running child <b class="name">rdist</b> processes to <i class="arg">maxproc</i>. The default is 4.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-m</b> <i class="arg">host</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Limit which machines are to be updated. Multiple <b class="flag">-m</b> arguments can be given to limit updates to a subset of the hosts listed in <i class="file">distfile</i>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-n</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Print the commands without executing them. This option is useful for debugging a distfile.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-o</b> <i class="arg">distopts</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Specify the dist options to enable. <i class="arg">distopts</i> is a comma separated list of options which are listed below. The valid values for <i class="arg">distopts</i> are:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">chknfs</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Do not check or update files on the target host that reside on NFS filesystems.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">chkreadonly</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Enable a check on the target host to see if a file resides on a read-only filesystem. If a file does, then no checking or updating of the file is attempted.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">chksym</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
If the target on the remote host is a symbolic link, but is not on the master host, the remote target will be left a symbolic link. This behavior is generally considered a bug in the original version of <b class="name">rdist</b>, but is present to allow compatibility with older versions.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">compare</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Binary comparison. Perform a binary comparison and update files if they differ rather than comparing dates and sizes.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">defgroup</b>[<span class="opt">=<i class="arg">groupname</i></span>]</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
If the group of a file to be transferred does not exist on the destination host, use the specified group instead. If <i class="arg">groupname</i> is not specified, the <span class="emph">bin</span> group is used.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">defowner</b>[<span class="opt">=<i class="arg">owner</i></span>]</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
If the owner of a file to be transferred does not exist on the destination host, use the specified owner instead. If <i class="arg">owner</i> is not specified, the user <span class="emph">bin</span> is used.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">follow</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Follow symbolic links. Copy the file that the link points to rather than the link itself.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">history</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
When <b class="cmd">savetargets</b> and <b class="cmd">history</b> are both defined then the target file that is updated is first renamed from <i class="file">file</i> to <i class="file">file.NNN</i> where NNN increases for each generation update. The first generation is 001, and the last is 999. After 999 generations, the counter is reset and stuck to 001, and 001 will get overwritten all the time. This is undesirable behavior, so some other method needs to be devised to clean up or limit the number of generations.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">ignlnks</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Ignore unresolved links. <b class="name">rdist</b> will normally try to maintain the link structure of files being transferred and warn the user if all the links cannot be found.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">nochkgroup</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Do not check group ownership of files that already exist. The file ownership is only set when the file is updated.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">nochkmode</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Do not check file and directory permission modes. The permission mode is only set when the file is updated.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">nochkowner</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Do not check user ownership of files that already exist. The file ownership is only set when the file is updated.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">nodescend</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Do not descend into a directory. Normally, <b class="name">rdist</b> will recursively check directories. If this option is enabled, then any files listed in the file list in the distfile that are directories are not recursively scanned. Only the existence, ownership, and mode of the directory are checked.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">noexec</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Automatically exclude executable binary files in <a class="link-man" href="../html5/elf.html">elf(5)</a> format from being checked or updated.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">numchkgroup</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Use the numeric group ID (GID) to check group ownership instead of the group name.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">numchkowner</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Use the numeric user ID (UID) to check user ownership instead of the user name.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">quiet</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Quiet mode. Files that are being modified are normally printed on standard output. This option suppresses that.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">remove</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Remove extraneous files. If a directory is being updated, any files that exist on the remote host that do not exist in the master directory are removed. This is useful for maintaining truly identical copies of directories.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">savetargets</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Save files that are updated instead of removing them. Any target file that is updated is first renamed from <i class="file">file</i> to <i class="file">file.OLD</i>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">sparse</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Enable checking for sparse files. One of the most common types of sparse files are those produced by <a class="link-man" href="../html3/dbopen.html">dbopen(3)</a>. This option adds some additional processing overhead so it should only be enabled for targets likely to contain sparse files.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">updateperm</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Do not send the whole file when the size and the modification time match. Instead, just update the ownership, group, and permissions as necessary.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">verify</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Verify that the files are up to date on all the hosts. Any files that are out of date will be displayed but no files will be changed and no mail will be sent.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">whole</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Whole mode. The whole file name is appended to the destination directory name. Normally, only the last component of a name is used when renaming files. This will preserve the directory structure of the files being copied instead of flattening the directory structure. For example, rdisting a list of files such as <i class="file">/p/dir1/f1</i> and <i class="file">/p/dir2/f2</i> to <i class="file">/tmp/dir</i> would create files <i class="file">/tmp/dir/p/dir1/f1</i> and <i class="file">/tmp/dir/p/dir2/f2</i> instead of <i class="file">/tmp/dir/dir1/f1</i> and <i class="file">/tmp/dir/dir2/f2</i>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">younger</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Younger mode. Files are normally updated if their <span class="emph">mtime</span> and <span class="emph">size</span> (see <a class="link-man" href="../html2/stat.html">stat(2)</a>) disagree. This option causes <b class="name">rdist</b> not to update files that are younger than the master copy. This can be used to prevent newer copies on other hosts from being replaced. A warning message is printed for files which are newer than the master copy.</dd>
</dl>
</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-P</b> <i class="arg">rsh-path</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Set the path to the remote shell command. <i class="arg">rsh-path</i> may be a colon separated list of possible pathnames, in which case the first component of the path to exist is used.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-p</b> <i class="arg">rdistd-path</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Set the path where the rdistd server is searched for on the target host.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-t</b> <i class="arg">timeout</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Set the timeout period, in seconds, for waiting for responses from the remote <b class="name">rdist</b> server. The default is 900 seconds.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-V</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Print version information and exit.</dd>
</dl>
</div>
<div class="section">
<h1 id="x4449535446494c4553">DISTFILES</h1> The <i class="file">distfile</i> contains a sequence of entries that specify the files to be copied, the destination hosts, and what operations to perform to do the updating. Each entry has one of the following formats.<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
&lt;variable name&gt; = &lt;name list&gt; 
[ label: ] &lt;source list&gt; -&gt; &lt;destination list&gt; &lt;command list&gt; 
[ label: ] &lt;source list&gt; :: &lt;timestamp file&gt; &lt;command list&gt;</pre>
<div class="spacer">
</div>
The first format is used for defining variables. The second format is used for distributing files to other hosts. The third format is used for making lists of files that have been changed since some given date. The <i class="arg">source list</i> specifies a list of files and/or directories on the local host which are to be used as the master copy for distribution. The <i class="arg">destination list</i> is the list of hosts to which these files are to be copied. Each file in the source list is added to a list of changes if the file is out of date on the host which is being updated (second format) or the file is newer than the <i class="arg">timestamp file</i> (third format).<div class="spacer">
</div>
Newlines, tabs, and blanks are only used as separators and are otherwise ignored. Comments begin with &#8216;#&#8217; and end with a newline.<div class="spacer">
</div>
Variables to be expanded begin with &#8216;$&#8217; followed by one character or a name enclosed in curly braces (see the examples at the end).<div class="spacer">
</div>
Labels are optional. They are used to identify a specific command to execute (for example, allowing an update of a subset of a repository).<div class="spacer">
</div>
The source and destination lists have the following format:<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
&lt;name&gt;</pre>
or<pre style="margin-left: 5.00ex;" class="lit display">
`(' &lt;zero or more names separated by whitespace&gt; `)'</pre>
<div class="spacer">
</div>
These simple lists can be modified by using one level of set addition, subtraction, or intersection like this:<div class="spacer">
</div>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit">list - list</code></div>
</blockquote>
or<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit">list + list</code></div>
</blockquote>
or<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit">list &amp; list</code></div>
</blockquote>
<div class="spacer">
</div>
If additional modifications are needed (e.g. &#8220;all servers and client machines except for the OSF/1 machines&#8221;) then the list will have to be explicitly constructed in steps using &#8220;temporary&#8221; variables.<div class="spacer">
</div>
The shell meta-characters `[', `]', `{', `}', `*', and `?' are recognized and expanded (on the local host only) in the same way as <a class="link-man" href="../html1/ksh.html">ksh(1)</a>. They can be escaped with a backslash. The `~' character is also expanded in the same way as <a class="link-man" href="../html1/ksh.html">ksh(1)</a> but is expanded separately on the local and destination hosts. When the <b class="flag">-o</b> <i class="arg">whole</i> option is used with a file name that begins with `~', everything except the home directory is appended to the destination name. File names which do not begin with `/' or `~' use the destination user's home directory as the root directory for the rest of the file name.<div class="spacer">
</div>
The command list consists of zero or more commands of the following format:<table style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 6.00ex;" class="list list-col">
<col style="width: 10.00ex;"/>
<col style="width: 14.00ex;"/>
<col style="width: 13.00ex;"/>
<col style="min-width: 1.00ex;"/>
<tbody>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
install</td>
<td class="list-col" style="margin-top: 1.00em;">
&lt;options&gt;</td>
<td class="list-col" style="margin-top: 1.00em;">
opt_dest_name</td>
<td class="list-col" style="margin-top: 1.00em;">
;</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
notify</td>
<td class="list-col" style="margin-top: 1.00em;">
&lt;name list&gt;</td>
<td class="list-col" style="margin-top: 1.00em;">
</td>
<td class="list-col" style="margin-top: 1.00em;">
;</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
except</td>
<td class="list-col" style="margin-top: 1.00em;">
&lt;name list&gt;</td>
<td class="list-col" style="margin-top: 1.00em;">
</td>
<td class="list-col" style="margin-top: 1.00em;">
;</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
except_pat</td>
<td class="list-col" style="margin-top: 1.00em;">
&lt;pattern list&gt;</td>
<td class="list-col" style="margin-top: 1.00em;">
</td>
<td class="list-col" style="margin-top: 1.00em;">
;</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
special</td>
<td class="list-col" style="margin-top: 1.00em;">
&lt;name list&gt;</td>
<td class="list-col" style="margin-top: 1.00em;">
string</td>
<td class="list-col" style="margin-top: 1.00em;">
;</td>
</tr>
<tr class="list-col">
<td class="list-col" style="margin-top: 1.00em;">
cmdspecial</td>
<td class="list-col" style="margin-top: 1.00em;">
&lt;name list&gt;</td>
<td class="list-col" style="margin-top: 1.00em;">
string</td>
<td class="list-col" style="margin-top: 1.00em;">
;</td>
</tr>
</tbody>
</table>
<div class="spacer">
</div>
The <b class="flag">install</b> command is used to copy out of date files and/or directories. Each source file is copied to each host in the destination list. Directories are recursively copied in the same way. <i class="arg">opt_dest_name</i> is an optional parameter to rename files. If no <b class="flag">install</b> command appears in the command list or the destination name is not specified, the source file name is used. Directories in the path name will be created if they do not exist on the remote host. The <b class="flag">-o</b> <i class="arg">distopts</i> option as specified above has the same semantics as on the command line except <i class="arg">distopts</i> only applies to the files in the source list. The login name used on the destination host is the same as the local host unless the destination name is of the format &#8220;login@host&#8221;.<div class="spacer">
</div>
The <b class="flag">notify</b> command is used to mail the list of files updated (and any errors that may have occurred) to the listed names. If no `@' appears in the name, the destination host is appended to the name (e.g. name1@host, name2@host, ...).<div class="spacer">
</div>
The <b class="flag">except</b> command is used to update all of the files in the source list <span class="symb">except</span> for the files listed in <i class="arg">name list</i>. This is usually used to copy everything in a directory except certain files.<div class="spacer">
</div>
The <b class="flag">except_pat</b> command is like the <b class="flag">except</b> command except that <i class="arg">pattern list</i> is a list of basic regular expressions (see <a class="link-man" href="../html7/re_format.html">re_format(7)</a> for details). If one of the patterns matches some string within a file name, that file will be ignored. Note that since `\' is a quote character, it must be doubled to become part of the regular expression. Variables are expanded in <i class="arg">pattern list</i> but not shell file pattern matching characters. To include a `$', it must be escaped with `\'.<div class="spacer">
</div>
The <b class="flag">special</b> command is used to specify <a class="link-man" href="../html1/sh.html">sh(1)</a> commands that are to be executed on the remote host after the file in <i class="arg">name list</i> is updated or installed. If the <i class="arg">name list</i> is omitted then the shell commands will be executed for every file updated or installed. <i class="arg">string</i> starts and ends with `&quot;' and can cross multiple lines in <i class="file">distfile</i>. Multiple commands to the shell should be separated by `;'. Commands are executed in the user's home directory on the host being updated. The <b class="flag">special</b> command can be used, for example, to rebuild private databases after a program has been updated. The following environment variables are set for each <b class="flag">special</b> command:<div class="spacer">
</div>
<dl style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 3.00ex;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
<span class="env">FILE</span></dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
The full pathname of the local file that was just updated.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<span class="env">REMFILE</span></dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
The full pathname of the remote file that was just updated.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
BASEFILE</dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
The basename of the remote file that was just updated.</dd>
</dl>
<div class="spacer">
</div>
The <b class="flag">cmdspecial</b> command is similar to the <b class="flag">special</b> command, except it is executed only when the entire command is completed instead of after each file is updated. The list of files is placed in the <span class="env">FILES</span> environment variable. Each file name in <span class="env">FILES</span> is separated by a &#8216;:&#8217; (colon).<div class="spacer">
</div>
If a hostname ends in a &#8216;+&#8217; (plus sign), then the plus is stripped off and NFS checks are disabled. This is equivalent to disabling the <b class="flag">-o</b> <i class="arg">chknfs</i> option just for this one host.</div>
<div class="section">
<h1 id="x4d455353414745204c4f4747494e47">MESSAGE LOGGING</h1> <b class="name">rdist</b> uses a collection of predefined message <span class="emph">facilities</span> that each contain a list of message <span class="emph">types</span> specifying which types of messages to send to that facility. The local client and the remote server each maintain their own copy of what types of messages to log to what facilities.<div class="spacer">
</div>
The <b class="flag">-l</b> <i class="arg">local_logopts</i> option specifies the logging options to use locally; <b class="flag">-L</b> <i class="arg">remote_logopts</i> specifies the logging options to pass to the remote server.<div class="spacer">
</div>
Logging options should be of the form:<div class="spacer">
</div>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
facility=types:facility=types...</div>
</blockquote>
<div class="spacer">
</div>
The valid facility names are:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 6.00ex;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">file</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Log to a file. To specify the file name, use the format &#8220;file=filename=types&#8221;. For example:<div class="spacer">
</div>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit">file=/tmp/rdist.log=all,debug</code></div>
</blockquote>
</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">notify</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Use the internal <b class="name">rdist</b> <b class="cmd">notify</b> facility. This facility is used in conjunction with the <b class="cmd">notify</b> keyword in a <i class="file">distfile</i> to specify what messages are mailed to the <b class="cmd">notify</b> address.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">stdout</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Messages to standard output.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">syslog</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Use the <a class="link-man" href="../html8/syslogd.html">syslogd(8)</a> facility.</dd>
</dl>
<div class="spacer">
</div>
<i class="arg">types</i> should be a comma separated list of message types. Each message type specified enables that message level. This is unlike the <a class="link-man" href="../html3/syslog.html">syslog(3)</a> system facility which uses an ascending order scheme. The following are the valid types:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 6.00ex;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">all</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
All but debug messages.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">change</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Things that change. This includes files that are installed or updated in some way.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">debug</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Debugging information.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">ferror</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Fatal errors.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">info</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
General information.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">nerror</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Normal errors that are not fatal.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">notice</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
General info about things that change. This includes things like making directories which are needed in order to install a specific target, but which are not explicitly specified in the <i class="file">distfile</i>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">warning</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Warnings about errors which are not as serious as <b class="cmd">nerror</b> type messages.</dd>
</dl>
<div class="spacer">
</div>
Here is a sample command line option:<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
-l stdout=all:syslog=change,notice:file=/tmp/rdist.log=all</pre>
<div class="spacer">
</div>
This entry will set local message logging to have all but debug messages sent to standard output, change and notice messages will be sent to <a class="link-man" href="../html3/syslog.html">syslog(3)</a>, and all messages will be written to the file <i class="file">/tmp/rdist.log</i>.</div>
<div class="section">
<h1 id="x454e5649524f4e4d454e54">ENVIRONMENT</h1><dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
RSH</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Name of the default remote shell program to use. The default is <a class="link-man" href="../html1/ssh.html">ssh(1)</a>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
TMPDIR</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Name of the temporary directory to use. The default is <i class="file">/tmp</i>.</dd>
</dl>
</div>
<div class="section">
<h1 id="x46494c4553">FILES</h1><dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">{d,D}istfile</i></dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
<b class="name">rdist</b> command file.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/etc/Distfile</i></dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
System-wide <b class="name">rdist</b> command file.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">$TMPDIR/rdist*</i></dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
Temporary file for update lists.</dd>
</dl>
</div>
<div class="section">
<h1 id="x4558414d504c4553">EXAMPLES</h1> The following is an example <i class="file">distfile</i>:<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
HOSTS = ( matisse root@arpa) 
 
FILES = ( /bin /lib /usr/bin /usr/games 
	/usr/include/{*.h,{stand,sys,vax*,pascal,machine}/*.h} 
	/usr/lib /usr/man/man? /usr/ucb /usr/local/rdist ) 
 
EXLIB = ( Mail.rc aliases aliases.db crontab dshrc 
	sendmail.cf sendmail.hf sendmail.st uucp vfont ) 
 
${FILES} -&gt; ${HOSTS} 
	install -oremove,chknfs ; 
	except /usr/lib/${EXLIB} ; 
	except /usr/games/lib ; 
	special /usr/lib/sendmail &quot;/usr/lib/sendmail -bi&quot; ; 
 
srcs: 
/usr/src/bin -&gt; arpa 
	except_pat ( \\.o\$ /SCCS\$ ) ; 
 
IMAGEN = (ips dviimp catdvi) 
 
imagen: 
/usr/local/${IMAGEN} -&gt; arpa 
	install /usr/local/lib ; 
	notify ralph ; 
 
sendmail.cf :: stamp.cory 
	notify root@cory ;</pre>
<div class="spacer">
</div>
Using the above <i class="file">distfile</i>:<div class="spacer">
</div>
Update everything that's out of date, making any relevant notifications:<div class="spacer">
</div>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit">$ rdist</code></div>
</blockquote>
<div class="spacer">
</div>
Update files in <i class="file">/usr/src/bin</i> to host &#8220;arpa&#8221;, except for files with names ending &#8220;.o&#8221; or &#8220;/SCCS&#8221;:<div class="spacer">
</div>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit">$ rdist srcs</code></div>
</blockquote>
<div class="spacer">
</div>
Update <i class="file">sendmail.cf</i> if it's older than timestamp file <i class="file">stamp.cory</i>, notifying root@cory if an update has happened:<div class="spacer">
</div>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit">$ rdist sendmail.cf</code></div>
</blockquote>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../html1/rdistd.html">rdistd(1)</a>, <a class="link-man" href="../html1/sh.html">sh(1)</a>, <a class="link-man" href="../html1/ssh.html">ssh(1)</a>, <a class="link-man" href="../html7/re_format.html">re_format(7)</a>, <a class="link-man" href="../html8/daily.html">daily(8)</a>, <a class="link-man" href="../html8/syslogd.html">syslogd(8)</a></div>
<div class="section">
<h1 id="x5354414e4441524453">STANDARDS</h1> The options [<span class="opt"><b class="flag">-bhiNOqRrsvwxy</b></span>] are still recognized for backwards compatibility.</div>
<div class="section">
<h1 id="x43415645415453">CAVEATS</h1> If the basename of a file (the last component in the pathname) is &#8216;.&#8217;, <b class="name">rdist</b> assumes the remote (destination) name is a directory. That is, <i class="file">/tmp/.</i> means that <i class="file">/tmp</i> should be a directory on the remote host.</div>
<div class="section">
<h1 id="x42554753">BUGS</h1> Source files must reside on the local host where <b class="name">rdist</b> is executed.<div class="spacer">
</div>
Variable expansion only works for name lists; there should be a general macro facility.<div class="spacer">
</div>
<b class="name">rdist</b> aborts on files which have a negative mtime (before Jan 1, 1970).<div class="spacer">
</div>
If a hardlinked file is listed more than once in the same target, <b class="name">rdist</b> will report missing links. Only one instance of a link should be listed in each target.<div class="spacer">
</div>
The <b class="cmd">defowner</b>, <b class="cmd">defgroup</b>, and <b class="cmd">updateperm</b> options are extensions to the 6.1.0 protocol and will not work with earlier versions of rdist 6.</div>
</div>
</body>
</html>

