<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/posix/style.css" type="text/css" media="all"/>
<title>
TCPBENCH(1)</title>
</head>
<body>
<div class="mandoc">
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">tcpbench</b> &#8212; <span class="desc">TCP/UDP benchmarking and measurement tool</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1><table class="synopsis">
<col style="width: 8.00ex;"/>
<col/>
<tbody>
<tr>
<td>
tcpbench</td>
<td>
<b class="flag">-l</b></td>
</tr>
</tbody>
</table>
<br/>
<table class="synopsis">
<col style="width: 8.00ex;"/>
<col/>
<tbody>
<tr>
<td>
tcpbench</td>
<td>
[<span class="opt"><b class="flag">-46uv</b></span>] [<span class="opt"><b class="flag">-B</b> <i class="arg">buf</i></span>] [<span class="opt"><b class="flag">-b</b> <i class="arg">addr</i></span>] [<span class="opt"><b class="flag">-k</b> <i class="arg">kvars</i></span>] [<span class="opt"><b class="flag">-n</b> <i class="arg">connections</i></span>] [<span class="opt"><b class="flag">-p</b> <i class="arg">port</i></span>] [<span class="opt"><b class="flag">-r</b> <i class="arg">interval</i></span>] [<span class="opt"><b class="flag">-S</b> <i class="arg">space</i></span>] [<span class="opt"><b class="flag">-T</b> <i class="arg">toskeyword</i></span>] [<span class="opt"><b class="flag">-t</b> <i class="arg">secs</i></span>] [<span class="opt"><b class="flag">-V</b> <i class="arg">rtable</i></span>] <i class="arg">hostname</i></td>
</tr>
</tbody>
</table>
<br/>
<table class="synopsis">
<col style="width: 8.00ex;"/>
<col/>
<tbody>
<tr>
<td>
tcpbench</td>
<td>
<b class="flag">-s</b> [<span class="opt"><b class="flag">-46uv</b></span>] [<span class="opt"><b class="flag">-B</b>&#160;<i class="arg">buf</i></span>] [<span class="opt"><b class="flag">-k</b>&#160;<i class="arg">kvars</i></span>] [<span class="opt"><b class="flag">-p</b>&#160;<i class="arg">port</i></span>] [<span class="opt"><b class="flag">-r</b>&#160;<i class="arg">interval</i></span>] [<span class="opt"><b class="flag">-S</b>&#160;<i class="arg">space</i></span>] [<span class="opt"><b class="flag">-T</b>&#160;<i class="arg">toskeyword</i></span>] [<span class="opt"><b class="flag">-V</b>&#160;<i class="arg">rtable</i></span>]</td>
</tr>
</tbody>
</table>
</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> <b class="name">tcpbench</b> is a small tool that performs throughput benchmarking and concurrent sampling of kernel network variables.<div class="spacer">
</div>
<b class="name">tcpbench</b> is run as a client/server pair. The server must be invoked with the <b class="flag">-s</b> flag, which will cause it to listen for incoming connections. The client must be invoked with the <i class="arg">hostname</i> of a listening server to connect to.<div class="spacer">
</div>
Once connected, the client will send TCP or UDP traffic as fast as possible to the server. Both the client and server will periodically display throughput statistics along with any kernel variables the user has selected to sample (using the <b class="flag">-k</b> option, which is only available in TCP mode). A list of available kernel variables may be obtained using the <b class="flag">-l</b> option.<div class="spacer">
</div>
The options are as follows:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-4</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Forces <b class="name">tcpbench</b> to use IPv4 addresses only.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-6</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Forces <b class="name">tcpbench</b> to use IPv6 addresses only.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-B</b> <i class="arg">buf</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Specify the size of the internal read/write buffer used by <b class="name">tcpbench</b>. The default is 262144 bytes for TCP client/server and UDP server. In UDP client mode this may be used to specify the packet size on the test stream.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-b</b> <i class="arg">addr</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Specifies the IP address of the interface which is used to send the packets.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-k</b> <i class="arg">kvars</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Specify one or more kernel variables to monitor; multiple variables must be separated with commas. This option is only valid in TCP mode. The default is not to monitor any variables. Using this option requires read access to <i class="file">/dev/kmem</i>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-l</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
List the name of kernel variables available for monitoring and exit.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-n</b> <i class="arg">connections</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Use the given number of TCP connections (default: 1). UDP is connectionless so this option isn't valid.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-p</b> <i class="arg">port</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Specify the port used for the test stream (default: 12345).</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-r</b> <i class="arg">interval</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Specify the statistics interval reporting rate in milliseconds (default: 1000).</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-S</b> <i class="arg">space</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Set the size of the socket buffer used for the test stream. On the client this option will resize the send buffer; on the server it will resize the receive buffer.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-s</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Place <b class="name">tcpbench</b> in server mode, where it will listen on all interfaces for incoming connections. It defaults to using TCP if <b class="flag">-u</b> is not specified.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-T</b> <i class="arg">toskeyword</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Change the IPv4 TOS or IPv6 TCLASS value. <i class="arg">toskeyword</i> may be one of <i class="arg">critical</i>, <i class="arg">inetcontrol</i>, <i class="arg">lowdelay</i>, <i class="arg">netcontrol</i>, <i class="arg">throughput</i>, <i class="arg">reliability</i>, or one of the DiffServ Code Points: <i class="arg">ef</i>, <i class="arg">af11 ... af43</i>, <i class="arg">cs0 ... cs7</i>; or a number in either hex or decimal.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-t</b> <i class="arg">secs</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Stop after <i class="arg">secs</i> seconds.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-u</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Use UDP instead of TCP; this must be specified on both the client and the server. Transmitted packets per second (TX PPS) will be accounted on the client side, while received packets per second (RX PPS) will be accounted on the server side. UDP has no Protocol Control Block (PCB) so the <b class="flag">-k</b> flags don't apply.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-V</b> <i class="arg">rtable</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Set the routing table to be used.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-v</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Display verbose output. If specified more than once, increase the detail of information displayed.</dd>
</dl>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../html1/netstat.html">netstat(1)</a>, <a class="link-man" href="../html8/pstat.html">pstat(8)</a></div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> The <b class="name">tcpbench</b> program first appeared in <span class="unix">OpenBSD&#160;4.4</span>.</div>
<div class="section">
<h1 id="x415554484f5253">AUTHORS</h1> The <b class="name">tcpbench</b> program was written by <span class="author">Damien Miller</span> &lt;<a class="link-mail" href="mailto:djm@openbsd.org">djm@openbsd.org</a>&gt;.<div class="spacer">
</div>
UDP mode and libevent port by <span class="author">Christiano F. Haesbaert</span> &lt;<a class="link-mail" href="mailto:haesbaert@haesbaert.org">haesbaert@haesbaert.org</a>&gt;.</div>
</div>
</body>
</html>

