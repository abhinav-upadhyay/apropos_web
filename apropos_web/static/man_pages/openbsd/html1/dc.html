<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/posix/style.css" type="text/css" media="all"/>
<title>
DC(1)</title>
</head>
<body>
<div class="mandoc">
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">dc</b> &#8212; <span class="desc">desk calculator</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1><table class="synopsis">
<col style="width: 2.00ex;"/>
<col/>
<tbody>
<tr>
<td>
dc</td>
<td>
[<span class="opt"><b class="flag">-x</b></span>] [<span class="opt"><b class="flag">-e</b> <i class="arg">expression</i></span>] [<span class="opt"><i class="arg">file</i></span>]</td>
</tr>
</tbody>
</table>
</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> <b class="name">dc</b> is an arbitrary precision arithmetic package. The overall structure of <b class="name">dc</b> is a stacking (reverse Polish) calculator i.e. numbers are stored on a stack. Adding a number pushes it onto the stack. Arithmetic operations pop arguments off the stack and push the results. See also the <a class="link-man" href="../html1/bc.html">bc(1)</a> utility, which is a preprocessor for <b class="name">dc</b> providing infix notation and a C-like syntax which implements functions and reasonable control structures for programs. The options are as follows:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-e</b> <i class="arg">expression</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Evaluate <i class="arg">expression</i>. If multiple <b class="flag">-e</b> options are specified, they will be processed in the order given.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-x</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Enable extended register mode. This mode is used by <a class="link-man" href="../html1/bc.html">bc(1)</a> to allow more than 256 registers. See <i class="link-sec"><a class="link-sec" href="#x526567697374657273">Registers</a></i> for a more detailed description.</dd>
</dl>
<div class="spacer">
</div>
If neither <i class="arg">expression</i> nor <i class="arg">file</i> are specified on the command line, <b class="name">dc</b> reads from the standard input. Otherwise <i class="arg">expression</i> and <i class="arg">file</i> are processed and <b class="name">dc</b> exits.<div class="spacer">
</div>
Ordinarily, <b class="name">dc</b> operates on decimal integers, but one may specify an input base, output base, and a number of fractional digits (scale) to be maintained. Whitespace is ignored, except where it signals the end of a number, end of a line or when a register name is expected. The following constructions are recognized:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="var">number</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
The value of the number is pushed on the stack. A number is an unbroken string of the digits 0-9 and letters A-F. It may be preceded by an underscore (&#8216;_&#8217;) to input a negative number. A number may contain a single decimal point. A number may also contain the characters A-F, with the values 10-15.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">+ - / * % ~ ^</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
The top two values on the stack are added (+), subtracted (-), multiplied (*), divided (/), remaindered (%), divided and remaindered (~), or exponentiated (^). The two entries are popped off the stack; the result is pushed on the stack in their place. Any fractional part of an exponent is ignored.<div class="spacer">
</div>
For addition and subtraction, the scale of the result is the maximum of scales of the operands. For division the scale of the result is defined by the scale set by the <b class="cmd">k</b> operation. For multiplication, the scale is defined by the expression <span class="symb">min(a+b,max(a,b,scale))</span>, where <span class="symb">a</span> and <span class="symb">b</span> are the scales of the operands, and <span class="symb">scale</span> is the scale defined by the <b class="cmd">k</b> operation. For exponentiation with a non-negative exponent, the scale of the result is <span class="symb">min(a*b,max(scale,a))</span>, where <span class="symb">a</span> is the scale of the base, and <span class="symb">b</span> is the <span class="emph">value</span> of the exponent. If the exponent is negative, the scale of the result is the scale defined by the <b class="cmd">k</b> operation.<div class="spacer">
</div>
In the case of the division and modulus operator (~), the resultant quotient is pushed first followed by the remainder. This is a shorthand for the sequence:<pre style="margin-left: 5.00ex;" class="lit display">
x y / x y %</pre>
The division and modulus operator is a non-portable extension.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">a</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Pop the top value from the stack. If that value is a number, compute the integer part of the number modulo 256. If the result is zero, push an empty string. Otherwise push a one character string by interpreting the computed value as an ASCII character.<div class="spacer">
</div>
If the top value is a string, push a string containing the first character of the original string. If the original string is empty, an empty string is pushed back. The <b class="cmd">a</b> operator is a non-portable extension.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">c</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
All values on the stack are popped.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">d</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
The top value on the stack is duplicated.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">f</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
All values on the stack are printed, separated by newlines.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">G</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
The top two numbers are popped from the stack and compared. A one is pushed if the top of the stack is equal to the second number on the stack. A zero is pushed otherwise. This is a non-portable extension.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">I</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Pushes the input base on the top of the stack.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">i</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
The top value on the stack is popped and used as the base for further input. The initial input base is 10.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">J</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Pop the top value from the stack. The recursion level is popped by that value and, following that, the input is skipped until the first occurrence of the <b class="cmd">M</b> operator. The <b class="cmd">J</b> operator is a non-portable extension, used by the <a class="link-man" href="../html1/bc.html">bc(1)</a> command.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">K</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
The current scale factor is pushed onto the stack.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">k</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
The top of the stack is popped, and that value is used as a non-negative scale factor: the appropriate number of places are printed on output, and maintained during multiplication, division, and exponentiation. The interaction of scale factor, input base, and output base will be reasonable if all are changed together.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">L</b><i class="arg">x</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Register <i class="arg">x</i> is treated as a stack and its top value is popped onto the main stack.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">l</b><i class="arg">x</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
The value in register <i class="arg">x</i> is pushed on the stack. The register <i class="arg">x</i> is not altered. Initially, all registers contain the value zero.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">M</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Mark used by the <b class="cmd">J</b> operator. The <b class="cmd">M</b> operator is a non-portable extensions, used by the <a class="link-man" href="../html1/bc.html">bc(1)</a> command.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">N</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
The top of the stack is replaced by one if the top of the stack is equal to zero. If the top of the stack is unequal to zero, it is replaced by zero. This is a non-portable extension.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">n</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
The top value on the stack is popped and printed without a newline. This is a non-portable extension.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">O</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Pushes the output base on the top of the stack.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">o</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
The top value on the stack is popped and used as the base for further output. The initial output base is 10.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">P</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
The top of the stack is popped. If the top of the stack is a string, it is printed without a trailing newline. If the top of the stack is a number, it is interpreted as a base 256 number, and each digit of this base 256 number is printed as an ASCII character, without a trailing newline.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">p</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
The top value on the stack is printed with a trailing newline. The top value remains unchanged.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">Q</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
The top value on the stack is popped and the string execution level is popped by that value.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">q</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Exits the program. If executing a string, the recursion level is popped by two.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">R</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
The top of the stack is removed (popped). This is a non-portable extension.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">r</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
The top two values on the stack are reversed (swapped). This is a non-portable extension.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">S</b><i class="arg">x</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Register <i class="arg">x</i> is treated as a stack. The top value of the main stack is popped and pushed on it.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">s</b><i class="arg">x</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
The top of the stack is popped and stored into a register named <i class="arg">x</i>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">v</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Replaces the top element on the stack by its square root. The scale of the result is the maximum of the scale of the argument and the current value of scale.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">X</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Replaces the number on the top of the stack with its scale factor. If the top of the stack is a string, replace it with the integer 0.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">x</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Treats the top element of the stack as a character string and executes it as a string of <b class="name">dc</b> commands.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">Z</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Replaces the number on the top of the stack with its length. The length of a string is its number of characters. The length of a number is its number of digits, not counting the minus sign and decimal point.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">z</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
The stack level is pushed onto the stack.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">[</b>...<b class="flag">]</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Puts the bracketed ASCII string onto the top of the stack. If the string includes brackets, these must be properly balanced. The backslash character (&#8216;\&#8217;) may be used as an escape character, making it possible to include unbalanced brackets in strings. To include a backslash in a string, use a double backslash.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&lt;</b><b class="var">x</b> <b class="flag">&gt;</b><b class="var">x</b> <b class="flag">=</b><b class="var">x</b> <b class="flag">!&lt;</b><b class="var">x</b> <b class="flag">!&gt;</b><b class="var">x</b> <b class="flag">!=</b><b class="var">x</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
The top two elements of the stack are popped and compared. Register <i class="arg">x</i> is executed if they obey the stated relation.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">&lt;</b><b class="var">x</b>e<b class="var">y</b> <b class="flag">&gt;</b><b class="var">x</b>e<b class="var">y</b> <b class="flag">=</b><b class="var">x</b>e<b class="var">y</b> <b class="flag">!&lt;</b><b class="var">x</b>e<b class="var">y</b> <b class="flag">!&gt;</b><b class="var">x</b>e<b class="var">y</b> <b class="flag">!=</b><b class="var">x</b>e<b class="var">y</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
These operations are variants of the comparison operations above. The first register name is followed by the letter &#8216;e&#8217; and another register name. Register <i class="arg">x</i> will be executed if the relation is true, and register <i class="arg">y</i> will be executed if the relation is false. This is a non-portable extension.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">(</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
The top two numbers are popped from the stack and compared. A one is pushed if the top of the stack is less than the second number on the stack. A zero is pushed otherwise. This is a non-portable extension.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">{</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
The top two numbers are popped from the stack and compared. A one is pushed if the top of stack is less than or equal to the second number on the stack. A zero is pushed otherwise. This is a non-portable extension.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">?</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
A line of input is taken from the input source (usually the terminal) and executed.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">:</b><i class="arg">r</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Pop two values from the stack. The second value on the stack is stored into the array <i class="arg">r</i> indexed by the top of stack.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">;</b><i class="arg">r</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Pop a value from the stack. The value is used as an index into register <i class="arg">r</i>. The value in this register is pushed onto the stack.<div class="spacer">
</div>
Array elements initially have the value zero. Each level of a stacked register has its own array associated with it. The command sequence<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
[first] 0:a [dummy] Sa [second] 0:a 0;a p La 0;a p</pre>
<div class="spacer">
</div>
will print<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
second 
first</pre>
<div class="spacer">
</div>
since the string &#8216;<code class="lit">second</code>&#8217; is written in an array that is later popped, to reveal the array that stored &#8216;<code class="lit">first</code>&#8217;.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">#</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Skip the rest of the line. This is a non-portable extension.</dd>
</dl>
<div class="subsection">
<h2 id="x526567697374657273">Registers</h2> Registers have a single character name <i class="arg">x</i>, where <i class="arg">x</i> may be any character, including space, tab or any other special character. If extended register mode is enabled using the <b class="flag">-x</b> option and the register identifier <i class="arg">x</i> has the value 255, the next two characters are interpreted as a two-byte register index. The set of standard single character registers and the set of extended registers do not overlap. Extended register mode is a non-portable extension.</div>
</div>
<div class="section">
<h1 id="x4558414d504c4553">EXAMPLES</h1> An example which prints the first ten values of <b class="cmd">n!</b>:<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
[la1+dsa*pla10&gt;y]sy 
0sa1 
lyx</pre>
<div class="spacer">
</div>
Independent of the current input base, the command<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
Ai</pre>
<div class="spacer">
</div>
will reset the input base to decimal 10.</div>
<div class="section">
<h1 id="x444941474e4f5354494353">DIAGNOSTICS</h1><dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-diag">
<dt class="list-diag" style="margin-top: 1.00em;">
<b class="diag">%c (0%o) is unimplemented</b></dt>
<dd class="list-diag">
an undefined operation was called.</dd>
<dt class="list-diag" style="margin-top: 1.00em;">
<b class="diag">stack empty</b></dt>
<dd class="list-diag">
for not enough elements on the stack to do what was asked.</dd>
<dt class="list-diag" style="margin-top: 1.00em;">
<b class="diag">stack register '%c' (0%o) is empty</b></dt>
<dd class="list-diag">
for an <i class="arg">L</i> operation from a stack register that is empty.</dd>
<dt class="list-diag" style="margin-top: 1.00em;">
<b class="diag">Runtime warning: non-zero scale in exponent</b></dt>
<dd class="list-diag">
for a fractional part of an exponent that is being ignored.</dd>
<dt class="list-diag" style="margin-top: 1.00em;">
<b class="diag">divide by zero</b></dt>
<dd class="list-diag">
for trying to divide by zero.</dd>
<dt class="list-diag" style="margin-top: 1.00em;">
<b class="diag">remainder by zero</b></dt>
<dd class="list-diag">
for trying to take a remainder by zero.</dd>
<dt class="list-diag" style="margin-top: 1.00em;">
<b class="diag">square root of negative number</b></dt>
<dd class="list-diag">
for trying to take the square root of a negative number.</dd>
<dt class="list-diag" style="margin-top: 1.00em;">
<b class="diag">index too big</b></dt>
<dd class="list-diag">
for an array index that is larger than 2048.</dd>
<dt class="list-diag" style="margin-top: 1.00em;">
<b class="diag">negative index</b></dt>
<dd class="list-diag">
for a negative array index.</dd>
<dt class="list-diag" style="margin-top: 1.00em;">
<b class="diag">input base must be a number between 2 and 16</b></dt>
<dd class="list-diag">
for trying to set an illegal input base.</dd>
<dt class="list-diag" style="margin-top: 1.00em;">
<b class="diag">output base must be a number greater than 1</b></dt>
<dd class="list-diag">
for trying to set an illegal output base.</dd>
<dt class="list-diag" style="margin-top: 1.00em;">
<b class="diag">scale must be a nonnegative number</b></dt>
<dd class="list-diag">
for trying to set a negative or zero scale.</dd>
<dt class="list-diag" style="margin-top: 1.00em;">
<b class="diag">scale too large</b></dt>
<dd class="list-diag">
for trying to set a scale that is too large. A scale must be representable as a 32-bit unsigned number.</dd>
<dt class="list-diag" style="margin-top: 1.00em;">
<b class="diag">Q command argument exceeded string execution depth</b></dt>
<dd class="list-diag">
for trying to pop the recursion level more than the current recursion level.</dd>
<dt class="list-diag" style="margin-top: 1.00em;">
<b class="diag">Q command requires a number &gt;= 1</b></dt>
<dd class="list-diag">
for trying to pop an illegal number of recursion levels.</dd>
<dt class="list-diag" style="margin-top: 1.00em;">
<b class="diag">recursion too deep</b></dt>
<dd class="list-diag">
for too many levels of nested execution.<div class="spacer">
</div>
The recursion level is increased by one if the <i class="arg">x</i> or <i class="arg">?</i> operation or one of the compare operations resulting in the execution of register is executed. As an exception, the recursion level is not increased if the operation is executed as the last command of a string. For example, the commands<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
[lax]sa 
1 lax</pre>
<div class="spacer">
</div>
will execute an endless loop, while the commands<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
[laxp]sa 
1 lax</pre>
<div class="spacer">
</div>
will terminate because of a too deep recursion level.</dd>
<dt class="list-diag" style="margin-top: 1.00em;">
<b class="diag">J command argument exceeded string execution depth</b></dt>
<dd class="list-diag">
for trying to pop the recursion level more than the current recursion level.</dd>
<dt class="list-diag" style="margin-top: 1.00em;">
<b class="diag">mark not found</b></dt>
<dd class="list-diag">
for a failed scan for an occurrence of the <b class="cmd">M</b> operator.</dd>
</dl>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../html1/bc.html">bc(1)</a></div>
<div class="section">
<h1 id="x5354414e4441524453">STANDARDS</h1> The arithmetic operations of the <b class="name">dc</b> utility are expected to conform to the definition listed in the <a class="link-man" href="../html1/bc.html">bc(1)</a> section of the IEEE Std 1003.2 (&#8220;POSIX.2&#8221;) specification.</div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> The <b class="name">dc</b> command first appeared in Version&#160;6 AT&amp;T UNIX. A complete rewrite of the <b class="name">dc</b> command using the <a class="link-man" href="../html3/bn.html">bn(3)</a> big number routines first appeared in <span class="unix">OpenBSD&#160;3.5</span>.</div>
<div class="section">
<h1 id="x415554484f5253">AUTHORS</h1> The original version of the <b class="name">dc</b> command was written by <span class="author">Robert Morris</span> and <span class="author">Lorinda Cherry</span>. The current version of the <b class="name">dc</b> utility was written by <span class="author">Otto Moerbeek</span>.</div>
</div>
</body>
</html>

