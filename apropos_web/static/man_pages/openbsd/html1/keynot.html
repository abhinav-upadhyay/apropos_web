<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/posix/style.css" type="text/css" media="all"/>
<title>
KEYNOTE(1)</title>
</head>
<body>
<div class="mandoc">
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">keynote</b> &#8212; <span class="desc">command line tool for keynote operations</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1><table class="synopsis">
<col style="width: 7.00ex;"/>
<col/>
<tbody>
<tr>
<td>
keynote</td>
<td>
<b class="flag">keygen</b> <i class="arg">AlgorithmName</i> <i class="arg">KeySize</i> <i class="arg">PublicKeyFile</i> <i class="arg">PrivateKeyFile</i> [<span class="opt"><i class="arg">print-offset</i></span>] [<span class="opt"><i class="arg">print-length</i></span>]</td>
</tr>
</tbody>
</table>
<div class="spacer">
</div>
<br/>
<table class="synopsis">
<col style="width: 7.00ex;"/>
<col/>
<tbody>
<tr>
<td>
keynote</td>
<td>
<b class="flag">sign</b> [<span class="opt"><b class="flag">-v</b></span>] <i class="arg">AlgorithmName</i> <i class="arg">AssertionFile</i> <i class="arg">PrivateKeyFile</i> [<span class="opt"><i class="arg">print-offset</i></span>] [<span class="opt"><i class="arg">print-length</i></span>]</td>
</tr>
</tbody>
</table>
<div class="spacer">
</div>
<br/>
<table class="synopsis">
<col style="width: 7.00ex;"/>
<col/>
<tbody>
<tr>
<td>
keynote</td>
<td>
<b class="flag">sigver</b> [<span class="opt"><i class="arg">AssertionFile</i></span>]</td>
</tr>
</tbody>
</table>
<div class="spacer">
</div>
<br/>
<table class="synopsis">
<col style="width: 7.00ex;"/>
<col/>
<tbody>
<tr>
<td>
keynote</td>
<td>
<b class="flag">verify</b> [<span class="opt"><b class="flag">-h</b></span>] [<span class="opt"><b class="flag">-e</b> <i class="arg">file</i></span>] [<span class="opt"><b class="flag">-k</b> <i class="arg">file</i></span>] [<span class="opt"><b class="flag">-l</b> <i class="arg">file</i></span>] <b class="flag">-r</b> <i class="arg">retlist</i> [<span class="opt"><i class="arg">file ...</i></span>]</td>
</tr>
</tbody>
</table>
</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> For more details on <b class="name">KeyNote</b>, see RFC 2704.</div>
<div class="section">
<h1 id="x4b45592047454e45524154494f4e">KEY GENERATION</h1> <b class="name">keynote</b> <b class="flag">keygen</b> creates a public/private key of size <i class="arg">KeySize</i> (in bits), for the algorithm specified by <i class="arg">AlgorithmName</i>. Typical keysizes are 512, 1024, or 2048 (bits). The minimum key size for DSA keys is 512 (bits). Supported <i class="arg">AlgorithmName</i> identifiers are:<div class="spacer">
</div>
<dl style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 6.00ex;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
dsa-hex:</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
dsa-base64:</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
rsa-hex:</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
rsa-base64:</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
</dd>
</dl>
<div class="spacer">
</div>
Notice that the trailing colon is required. The resulting public key is stored in file <i class="arg">PublicKeyFile</i>. Similarly, the resulting private key is stored in file <i class="arg">PrivateKeyFile</i>. Either of the filenames can be specified to be &#8216;-&#8217;, in which case the corresponding key(s) will be printed to standard output.<div class="spacer">
</div>
The optional parameters <i class="arg">print-offset</i> and <i class="arg">print-length</i> specify the offset from the beginning of the line where the key will be printed, and the number of characters of the key that will be printed per line. <i class="arg">print-length</i> includes <i class="arg">AlgorithmName</i> for the first line and has to be longer (by at least 2) than <i class="arg">AlgorithmName</i>. <i class="arg">print-length</i> also accounts for the line-continuation character (backslash) at the end of each line, and the double quotes at the beginning and end of the key encoding. Default values are 12 and 50 respectively.</div>
<div class="section">
<h1 id="x415353455254494f4e205349474e494e47">ASSERTION SIGNING</h1> <b class="name">keynote</b> <b class="flag">sign</b> reads the assertion contained in <i class="arg">AssertionFile</i> and generates a signature specified by <i class="arg">AlgorithmName</i> using the private key stored in <i class="arg">PrivateKeyFile</i>. The private key is expected to be of the form output by <b class="name">keynote</b> <b class="flag">keygen</b>. The private key algorithm and the <i class="arg">AlgorithmName</i> specified as an argument are expected to match. There is no requirement for the internal or ASCII encodings to match. Valid <i class="arg">AlgorithmName</i> identifiers are:<div class="spacer">
</div>
<dl style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 6.00ex;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
sig-dsa-sha1-hex:</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
sig-dsa-sha1-base64:</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
sig-rsa-sha1-hex:</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
sig-rsa-sha1-base64:</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
sig-rsa-md5-hex:</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
sig-rsa-md5-base64:</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
sig-x509-sha1-hex:</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
sig-x509-sha1-base64:</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
</dd>
</dl>
<div class="spacer">
</div>
Notice that the trailing colon is required. The resulting signature is printed to standard output. This can then be added (via cut-and-paste or some script) at the end of the assertion, in the <i class="arg">Signature</i> field.<div class="spacer">
</div>
The public key corresponding to the private key in <i class="arg">PrivateKeyFile</i> is expected to already be included in the <i class="arg">Authorizer</i> field of the assertion, either directly or indirectly (i.e., through use of a <i class="arg">Local-Constants</i> attribute). Furthermore, the assertion must have a <i class="arg">Signature</i> field (even if it is empty), as the signature is computed on everything between the <i class="arg">KeyNote-Version</i> and <i class="arg">Signature</i> keywords (inclusive), and the <i class="arg">AlgorithmName</i> string.<div class="spacer">
</div>
If the <b class="flag">-v</b> flag is provided, <b class="name">keynote</b> <b class="flag">sign</b> will also verify the newly-created signature using the <i class="arg">Authorizer</i> field key.<div class="spacer">
</div>
The optional parameters <i class="arg">print-offset</i> and <i class="arg">print-length</i> specify the offset from the beginning of the line where the signature will be printed, and the number of characters of the signature that will be printed per line. <i class="arg">print-length</i> includes <i class="arg">AlgorithmName</i> for the first line and has to be longer (by at least 2) than <i class="arg">AlgorithmName</i>. <i class="arg">print-length</i> also accounts for the line-continuation character (backslash) at the end of each line, and the double quotes at the beginning and end of the signature encoding. Default values are 12 and 50 respectively.</div>
<div class="section">
<h1 id="x5349474e415455524520564552494649434154494f4e">SIGNATURE VERIFICATION</h1> <b class="name">keynote</b> <b class="flag">sigver</b> reads the assertions contained in <i class="arg">AssertionFile</i> and verifies the public-key signatures on all of them.</div>
<div class="section">
<h1 id="x515545525920544f4f4c">QUERY TOOL</h1> For each operand that names a <i class="arg">file</i>, <b class="name">keynote</b> <b class="flag">verify</b> reads the file and parses the assertions contained therein (one assertion per file).<div class="spacer">
</div>
The options are as follows:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-e</b> <i class="arg">file</i></dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
Specify a file containing environment variables and their values, in the following format:<div class="spacer">
</div>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit">varname = &quot;value&quot;</code></div>
</blockquote>
<div class="spacer">
</div>
<i class="arg">varname</i> can begin with any letter (upper or lower case) or number, and can contain underscores. <i class="arg">value</i> is a quoted string, and can contain any character, and escape (backslash) processing is performed, as specified in the KeyNote RFC.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-h</b></dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
Print a usage message and exit.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-k</b> <i class="arg">file</i></dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
Add a key from <i class="arg">file</i> in the action authorizers.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-l</b> <i class="arg">file</i></dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
Specify a file containing trusted assertions (no signature verification is performed), and the <i class="arg">Authorizer</i> field can contain non-key principals. There should be at least one assertion with the <i class="arg">POLICY</i> keyword in the <i class="arg">Authorizer</i> field.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-r</b> <i class="arg">retlist</i></dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
Specify a comma-separated list of return values, in increasing order of compliance from left to right.</dd>
</dl>
<div class="spacer">
</div>
Exactly one <b class="flag">-r</b> and at least one each of the <b class="flag">-e</b>, <b class="flag">-l</b>, and <b class="flag">-k</b> flags should be given per invocation. If no flags are given, <b class="name">keynote</b> <b class="flag">verify</b> prints the usage message and exits with error code -1.<div class="spacer">
</div>
<b class="name">keynote</b> <b class="flag">verify</b> exits with code -1 if there was an error, and 0 on success.</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../html3/keynote.html">keynote(3)</a>, <a class="link-man" href="../html4/keynote.html">keynote(4)</a>, <a class="link-man" href="../html5/keynote.html">keynote(5)</a><div class="spacer">
</div>
<span class="ref"><span class="ref-auth">M. Blaze</span>, <span class="ref-auth">J. Feigenbaum</span>, and <span class="ref-auth">J. Lacy</span>, <span class="ref-title">Decentralized Trust Management</span>, <i class="ref-jrnl">IEEE Symposium on Security and Privacy</i>, <span class="ref-date">1996</span>.</span><div class="spacer">
</div>
<span class="ref"><span class="ref-auth">M. Blaze</span>, <span class="ref-auth">J. Feigenbaum</span>, and <span class="ref-auth">M. Strauss</span>, <span class="ref-title">Compliance-Checking in the PolicyMaker Trust Management System</span>, <i class="ref-jrnl">Financial Crypto Conference</i>, <span class="ref-date">1998</span>.</span></div>
<div class="section">
<h1 id="x5354414e4441524453">STANDARDS</h1> <span class="ref"><span class="ref-auth">M. Blaze</span>, <span class="ref-auth">J. Feigenbaum</span>, <span class="ref-auth">J. Ioannidis</span>, and <span class="ref-auth">A. Keromytis</span>, <span class="ref-title">The KeyNote Trust-Management System Version 2</span>, <span class="ref-rep">RFC 2704</span>, <span class="ref-date">September 1999</span>.</span></div>
<div class="section">
<h1 id="x415554484f5253">AUTHORS</h1> <span class="author">Angelos D. Keromytis</span> &lt;<a class="link-mail" href="mailto:angelos@cs.columbia.edu">angelos@cs.columbia.edu</a>&gt;</div>
<div class="section">
<h1 id="x5745422050414745">WEB PAGE</h1> <a class="link-ext" href="http://www1.cs.columbia.edu/~angelos/keynote.html">http://www1.cs.columbia.edu/~angelos/keynote.html</a></div>
</div>
</body>
</html>

