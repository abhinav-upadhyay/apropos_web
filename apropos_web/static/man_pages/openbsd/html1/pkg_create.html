<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/posix/style.css" type="text/css" media="all"/>
<title>
PKG_CREATE(1)</title>
</head>
<body>
<div class="mandoc">
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">pkg_create</b> &#8212; <span class="desc">create binary software package for distribution</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1><table class="synopsis">
<col style="width: 10.00ex;"/>
<col/>
<tbody>
<tr>
<td>
pkg_create</td>
<td>
[<span class="opt"><b class="flag">-mnQqvx</b></span>] [<span class="opt"><b class="flag">-A</b>&#160;<i class="arg">arches</i></span>] [<span class="opt"><b class="flag">-B</b>&#160;<i class="arg">pkg-destdir</i></span>] [<span class="opt"><b class="flag">-D</b>&#160;<i class="arg">name</i>[<span class="opt">=<i class="arg">value</i></span>]</span>] [<span class="opt"><b class="flag">-L</b>&#160;<i class="arg">localbase</i></span>] [<span class="opt"><b class="flag">-M</b>&#160;<i class="arg">displayfile</i></span>] [<span class="opt"><b class="flag">-P</b>&#160;<i class="arg">pkgpath</i>:<i class="arg">pkgspec</i>:<i class="arg">default</i></span>] [<span class="opt"><b class="flag">-s</b>&#160;<i class="arg">signature-parameter</i></span>] [<span class="opt"><b class="flag">-U</b>&#160;<i class="arg">undisplayfile</i></span>] [<span class="opt"><b class="flag">-W</b>&#160;<i class="arg">libspec</i></span>]&#160;<b class="flag">-d</b> <i class="arg">desc</i>&#160;<b class="flag">-D</b> <i class="arg">COMMENT</i>=<i class="arg">value</i>&#160;<b class="flag">-D</b> <i class="arg">PORTSDIR</i>=<i class="arg">value</i>&#160;<b class="flag">-f</b> <i class="arg">packinglist</i>&#160;<b class="flag">-p</b> <i class="arg">prefix</i>&#160;<i class="arg">pkg-name</i></td>
</tr>
</tbody>
</table>
<br/>
<table class="synopsis">
<col style="width: 10.00ex;"/>
<col/>
<tbody>
<tr>
<td>
pkg_create</td>
<td>
[<span class="opt"><b class="flag">-s</b> <i class="arg">signature-parameter</i></span>] <b class="flag">-f</b> <i class="arg">packinglist</i></td>
</tr>
</tbody>
</table>
</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> The <b class="name">pkg_create</b> command is normally used to create a binary package named <i class="arg">pkg-name</i>, for subsequent use with <a class="link-man" href="../html1/pkg_add.html">pkg_add(1)</a>, <a class="link-man" href="../html1/pkg_delete.html">pkg_delete(1)</a> and <a class="link-man" href="../html1/pkg_info.html">pkg_info(1)</a>. <i class="arg">pkg-name</i> will traditionally have a &#8220;.tgz&#8221; extension, to denote the underlying binary format. <i class="arg">pkg-name</i> must follow <a class="link-man" href="../html7/packages-specs.html">packages-specs(7)</a>.<div class="spacer">
</div>
Use of the <a class="link-man" href="../html7/ports.html">ports(7)</a> infrastructure instead of manual <b class="name">pkg_create</b> invocation is strongly recommended.<div class="spacer">
</div>
<b class="name">pkg_create</b> can also be used to recreate a binary package from an existing installation.<div class="spacer">
</div>
During package creation, <b class="name">pkg_create</b> replaces too long file names with smaller equivalents (see <a class="link-man" href="../html5/package.html">package(5)</a>), records extra information in the packing-list, such as the existence of symlinks and hard links, computes and stores file checksums, and verifies that all special objects are properly annotated in the packing-list.<div class="spacer">
</div>
It will also check all required shared libraries for reachability, by looking into all installed dependencies. It may also ask the ports tree for extra dependencies, provided some other dependency refers to the same <span class="env">BASE_PKGPATH</span> (see <a class="link-man" href="../html5/bsd.port.mk.html">bsd.port.mk(5)</a>). The rationale is that those libraries must already be present for the package to build correctly, and thus be reachable through the subset of dependencies that are not pure <span class="env">RUN_DEPENDS</span>.<div class="spacer">
</div>
The options are as follows:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-A</b> <i class="arg">arches</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Register a list of architectures for which this package should install. <i class="arg">arches</i> is a comma-separated list of architectures. Use &#8216;*&#8217; to mean any architecture (e.g., arch-independent packages).</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-B</b> <i class="arg">pkg-destdir</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Set <i class="arg">pkg-destdir</i> as the prefix to prepend to any file to select for the package.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-D</b> <i class="arg">name</i>[<span class="opt">=<i class="arg">value</i></span>]</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Define <i class="arg">name</i> to <i class="arg">value</i> (or just define it) for substitution and fragment inclusion purposes. Some specific <i class="arg">names</i> have extra meaning, see <a class="link-man" href="../html5/bsd.port.mk.html">bsd.port.mk(5)</a> for details:<div class="spacer">
</div>
<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="arg">CDROM</i></dt>
<dd class="list-tag" style="margin-left: 11.00ex;">
Set to the port's Makefile <i class="arg">PERMIT_PACKAGE_CDROM</i>.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="arg">COMMENT</i></dt>
<dd class="list-tag" style="margin-left: 11.00ex;">
Set package &#8220;one line description&#8221; (mandatory).</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="arg">HISTORY_DIR</i></dt>
<dd class="list-tag" style="margin-left: 11.00ex;">
Record checksums of files in permanent location <i class="file">${HISTORY_DIR}/${FULLPKGPATH:S,/,./g}</i>.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="arg">FTP</i></dt>
<dd class="list-tag" style="margin-left: 11.00ex;">
Set to the port's Makefile <i class="arg">PERMIT_PACKAGE_FTP</i>.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="arg">FULLPKGPATH</i></dt>
<dd class="list-tag" style="margin-left: 11.00ex;">
Strongly recommended, otherwise updates won't work.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="arg">HOMEPAGE</i></dt>
<dd class="list-tag" style="margin-left: 11.00ex;">
If defined, appended to the description.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="arg">MAINTAINER</i></dt>
<dd class="list-tag" style="margin-left: 11.00ex;">
If defined, appended to the description.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="arg">USE_GROFF</i></dt>
<dd class="list-tag" style="margin-left: 11.00ex;">
Set to 1 to have groff format manpages behind the scenes during package creation.</dd>
</dl>
</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-d</b> <code class="none">[-]</code><i class="arg">desc</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Fetch long description for package from file <i class="arg">desc</i> or, if preceded by &#8216;-&#8217;, the argument itself.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-f</b> <i class="arg">packinglist</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Fetch &#8220;packing-list&#8221; for package from the file <i class="arg">packinglist</i>. Several packing-lists can be mentioned, in which case they will be concatenated together.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-L</b> <i class="arg">localbase</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Record <i class="arg">localbase</i> as the localbase used in the package (By default, <i class="file">/usr/local</i>). Packages built with another localbase can only be installed by using the same localbase in <a class="link-man" href="../html1/pkg_add.html">pkg_add(1)</a>, to prevent errors.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-M</b> <i class="arg">displayfile</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Display the file (using <a class="link-man" href="../html1/more.html">more(1)</a>) after installing the package. Useful for things like legal notices on almost-free software, etc.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-m</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Causes <b class="name">pkg_create</b> to always display the progress meter in cases it would not do so by default.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-n</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Don't actually create a package.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-P</b> <i class="arg">pkgpath</i>:<i class="arg">pkgspec</i>:<i class="arg">default</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Declare a dependency on a package matching <i class="arg">pkgspec</i> (see <a class="link-man" href="../html7/packages-specs.html">packages-specs(7)</a>). An appropriate package must be installed before this package may be installed, and that package must be deinstalled before this package is deinstalled. The dependency also contains a <i class="arg">pkgpath</i> (see <a class="link-man" href="../html7/pkgpath.html">pkgpath(7)</a>) and a <i class="arg">default</i> package name, in case there is no listing of available packages.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-p</b> <i class="arg">prefix</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Set <i class="arg">prefix</i> as the initial directory &#8220;base&#8221; to start from in selecting files for the package, and to record as the base for installing the package.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-Q</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Print out the files in the actual packing-list of the package being generated, with explicit typing (e.g. <b class="flag">@file</b>, <b class="flag">@lib</b>, <b class="flag">...</b>).</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-q</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Print out the actual packing-list of the package being generated (query mode). Most often used in combination with <b class="flag">-n</b>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-s</b> <i class="arg">signature-parameter</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Specify signature parameters for signing packages on-the-fly during building. Refer to <a class="link-man" href="../html1/pkg_sign.html">pkg_sign(1)</a> for the meaning of the parameters and the signing process.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-U</b> <i class="arg">undisplayfile</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Display the file (using <a class="link-man" href="../html1/more.html">more(1)</a>) when deinstalling the package. Useful for reminders about stuff to clean up.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-v</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Turn on verbose output.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-W</b> <i class="arg">libspec</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Package needs a shared library to work. <i class="arg">libspec</i> is &#8216;name.major.minor&#8217; or &#8216;path/name.major.minor&#8217;. The package won't be installed unless a library with the same name, the exact same major number and at least the same minor number can be located. A library without path is searched through dependent packages under the same <i class="arg">localbase</i>, then in the system libraries under <i class="file">/usr/lib</i> and <i class="file">/usr/X11R6/lib</i>. A library with a path is only searched through dependent packages, that path being relative to <i class="arg">localbase</i>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-x</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Disable progress meter.</dd>
</dl>
<div class="spacer">
</div>
<b class="name">pkg_create</b> can also be invoked with only the packing-list from an installed package. It will recreate the corresponding binary package in the current directory from the installation, or error out if any problem is found. For example, the following will recreate a <i class="file">kdelibs-3.4.3.tgz</i> package:<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
pkg_create -f /var/db/pkg/kdelibs-3.4.3/+CONTENTS</pre>
</div>
<div class="section">
<h1 id="x5041434b494e471e4c4953542044455441494c53">PACKING-LIST DETAILS</h1> The &#8220;packing-list&#8221; format (see <b class="flag">-f</b>) is fairly simple, being basically a list of filenames and directory names to include in the package.<div class="spacer">
</div>
Substitution of variables and inclusion of fragments is documented in the next section.<div class="spacer">
</div>
Directory names are denoted by a trailing slash.<div class="spacer">
</div>
There are some annotations that can be inserted for better control. All these commands start with an &#8216;@&#8217;. The following annotations can be inserted manually:<div class="spacer">
</div>
<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">@ask-update</b> <i class="arg">pkgspec</i> <i class="arg">message</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Mechanism to prevent unwanted updates. If the new package is installed as part of an update matching <i class="arg">pkgspec</i>, the <i class="arg">message</i> will be displayed to the user. In non-interactive mode, the update will abort. Otherwise, the user will have a chance to proceed. Automated updates can be done by using <b class="flag">-D</b> <i class="arg">update_stem</i>, with <i class="arg">stem</i> the stem of the <i class="arg">pkgspec</i>. Classical use case for postgresql:<div class="spacer">
</div>
<pre style="margin-left: 3.00ex;" class="lit display">
@ask-update postgresql-server-&lt;8 Make sure your existing database is backed up</pre>
<div class="spacer">
</div>
Use very sparingly. Most cases that seem to require manual updates just require a bit more thought.<div class="spacer">
</div>
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">@bin</b> <i class="arg">filename</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Describe the file as an <span class="unix">OpenBSD</span> binary executable (not a script).<div class="spacer">
</div>
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">@comment</b> <i class="arg">string</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Place a comment in the packing-list. Useful in trying to document some particularly hairy sequence that may trip someone up later. Can also be used to comment out elements that update-plist (see <a class="link-man" href="../html5/bsd.port.mk.html">bsd.port.mk(5)</a>) will insist in inserting in a packing-list.<div class="spacer">
</div>
The special comment <b class="flag">@comment</b> <i class="arg">no checksum</i> can be used to tag the next file as special: even though its characteristics will be recorded in the package, it can be altered after installation, and <a class="link-man" href="../html1/pkg_delete.html">pkg_delete(1)</a> will still delete it.<div class="spacer">
</div>
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">@conflict</b> <i class="arg">pkgspec</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Declare a conflict with packages matching <i class="arg">pkgspec</i> (see <a class="link-man" href="../html7/packages-specs.html">packages-specs(7)</a>). The <i class="arg">pkgname</i> package can <span class="emph">not</span> be installed if a package matching <i class="arg">pkgspec</i> has been installed because they install the same files and thus conflict.<div class="spacer">
</div>
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">@cwd</b> <i class="arg">pathname</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Set the package current directory. All subsequent filenames will be assumed relative to <i class="arg">pathname</i>.<div class="spacer">
</div>
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">@dir</b> <i class="arg">directoryname</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Create directory <i class="arg">directoryname</i> at <a class="link-man" href="../html1/pkg_add.html">pkg_add(1)</a> time, taking <b class="flag">@mode</b>, <b class="flag">@group</b>, and <b class="flag">@owner</b> into account, and remove it during <a class="link-man" href="../html1/pkg_delete.html">pkg_delete(1)</a>. Directories to remove can be shared between packages. If <i class="arg">name</i> does not begin with an @, same as<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit">name/</code></div>
</blockquote>
<div class="spacer">
</div>
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">@exec</b> <i class="arg">command</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Execute <i class="arg">command</i> during <a class="link-man" href="../html1/pkg_add.html">pkg_add(1)</a>. Note that <b class="flag">@exec</b> commands are executed relative to their location in the packing-list, so they can rely on any data that have already been extracted, but not on anything that is listed after them. Some special elements, such as new users and new groups, are always created first, so that <b class="flag">@exec</b> can rely on them.<div class="spacer">
</div>
<a class="link-man" href="../html1/pkg_add.html">pkg_add(1)</a> and <a class="link-man" href="../html1/pkg_delete.html">pkg_delete(1)</a> set the <span class="env">PATH</span> to a predictable value:<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
/bin:/sbin:/usr/bin:/usr/sbin:/usr/X11R6/bin:${LOCALBASE}/bin:${LOCALBASE}/sbin</pre>
<div class="spacer">
</div>
during execution.<div class="spacer">
</div>
If <i class="arg">command</i> contains any of the following sequences somewhere in it, they will be expanded inline. For the following examples, assume that <b class="flag">@cwd</b> is set to <i class="file">/usr/local</i> and the last extracted file was <i class="file">bin/emacs</i>.<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">%B</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Expands to the &#8220;basename&#8221; of the fully qualified filename, that is the current directory prefix, plus the last filespec, minus the trailing filename. In the example case, that would be <i class="file">/usr/local/bin</i>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">%D</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Expands to the current directory prefix, as set with <b class="flag">@cwd</b>; in the example case <i class="file">/usr/local</i>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">%F</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Expands to the last filename extracted (as specified); in the example case, <i class="file">bin/emacs</i>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">%f</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Expands to the &#8220;filename&#8221; part of the fully qualified name, or the converse of <b class="flag">%B</b>; in the example case, <i class="file">emacs</i>.</dd>
</dl>
<div class="spacer">
</div>
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">@exec-always</b> <i class="arg">command</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Synonym of <b class="flag">@exec</b>.<div class="spacer">
</div>
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">@exec-add</b> <i class="arg">command</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Similar to <b class="flag">@exec</b>, except it only gets executed during new installations, and not during updates.<div class="spacer">
</div>
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">@exec-update</b> <i class="arg">command</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Similar to <b class="flag">@exec</b>, except it only gets executed during updates, and not during new installations.<div class="spacer">
</div>
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">@extra</b> <i class="arg">filename</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Declare extra file <i class="arg">filename</i> to be deleted at deinstall time, if user sets the <b class="flag">-c</b> option. Those files are extra configuration files that are normally not deleted. <i class="arg">filename</i> can be an absolute path. If <i class="arg">filename</i> ends with a slash, it is a directory.<div class="spacer">
</div>
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">@extraunexec</b> <i class="arg">command</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Extra <i class="arg">command</i> to execute when removing extra files.<div class="spacer">
</div>
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">@file</b> <i class="arg">filename</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Default annotation, to use if <i class="arg">filename</i> begins with @. <i class="arg">filename</i> is always a relative path, relative to the current <b class="flag">@cwd</b>.<div class="spacer">
</div>
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">@fontdir</b> <i class="arg">directoryname</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Specialized version of <b class="flag">@dir</b>, to handle font directories: create <i class="file">font.alias</i> from <i class="file">font.alias-*</i> fragments, execute <a class="link-man" href="../html1/mkfontdir.html">mkfontdir(1)</a>, <a class="link-man" href="../html1/mkfontscale.html">mkfontscale(1)</a> and <a class="link-man" href="../html1/fc-cache.html">fc-cache(1)</a> when needed. Delete extra files at <a class="link-man" href="../html1/pkg_delete.html">pkg_delete(1)</a> time.<div class="spacer">
</div>
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">@group</b> <i class="arg">group</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Set default group ownership for all subsequently extracted files to <i class="arg">group</i>. Use without an arg to set back to default (extraction) group ownership.<div class="spacer">
</div>
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">@info</b> <i class="arg">filename</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Specialized version of <b class="flag">@file</b>, to handle GNU info files. Automatically grab <i class="arg">filename</i>-* chapter files, run <a class="link-man" href="../html1/install-info.html">install-info(1)</a> as needed.<div class="spacer">
</div>
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">@lib</b> <i class="arg">filename</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Specialized version of <b class="flag">@file</b>, to handle shared libraries. Satisfy LIB_DEPENDS and WANTLIB, run <a class="link-man" href="../html8/ldconfig.html">ldconfig(8)</a> as needed. See &#8216;VARIABLE SUBSTITUTION AND FRAGMENT INCLUSION&#8217; for some details.<div class="spacer">
</div>
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">@man</b> <i class="arg">filename</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Specialized version of <b class="flag">@file</b>, to handle manual pages.<div class="spacer">
</div>
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">@mandir</b> <i class="arg">directoryname</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Specialized version of <b class="flag">@dir</b>, to handle manual directories: instruct user to add/remove the directory to <a class="link-man" href="../html5/man.conf.html">man.conf(5)</a>, remove <a class="link-man" href="../html1/apropos.html">apropos(1)</a> database when needed.<div class="spacer">
</div>
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">@mode</b> <i class="arg">mode</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Set default permission for all subsequently extracted files to <i class="arg">mode</i>. Format is the same as that used by the <a class="link-man" href="../html1/chmod.html">chmod(1)</a> command. Use without an arg to set back to default (extraction) permissions.<div class="spacer">
</div>
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">@newgroup</b> <i class="arg">name</i>:<i class="arg">gid</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
During <a class="link-man" href="../html1/pkg_add.html">pkg_add(1)</a>, create a new group, using <a class="link-man" href="../html8/groupadd.html">groupadd(8)</a>. Happens before file and user creations. <i class="arg">gid</i> can be prefixed with a &#8216;!&#8217; to ensure group has the correct GID. During <a class="link-man" href="../html1/pkg_delete.html">pkg_delete(1)</a>, groups will be deleted if extra clean-up has been requested, and if other installed packages don't list the same group.<div class="spacer">
</div>
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">@newuser</b> <i class="arg">name</i>:<i class="arg">uid</i>:<i class="arg">group</i>:<i class="arg">loginclass</i>:<i class="arg">comment</i>:<i class="arg">home</i>:<i class="arg">shell</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
During <a class="link-man" href="../html1/pkg_add.html">pkg_add(1)</a>, create a new user. Happens before any file creation. All fields correspond to <a class="link-man" href="../html8/useradd.html">useradd(8)</a> parameters. Some fields are optional and can be left empty. If the user already exists, no action is taken. Individual fields can be prefixed by a &#8216;!&#8217; to make sure an existing user matches. For instance, the directive <code class="lit">@newuser foo:!42</code> will make sure user foo has UID 42. During <a class="link-man" href="../html1/pkg_delete.html">pkg_delete(1)</a>, users will be deleted if extra clean-up has been requested, and if other installed packages don't list the same user.<div class="spacer">
</div>
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">@option</b> <i class="arg">name</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Effects vary depending on <i class="arg">name</i>. These are the user settable options<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="arg">always-update</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
By default, <a class="link-man" href="../html1/pkg_add.html">pkg_add(1)</a> uses some simplified information to decide whether an installed package needs updating. With this option, the package is updated whenever anything changes. To be used sparingly, as this is more expensive.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="arg">no-default-conflict</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
By default, a package conflicts with other versions of the same package. With this option, the older package version will still be noticed, but the installation will proceed anyway.</dd>
</dl>
<div class="spacer">
</div>
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">@owner</b> <i class="arg">user</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Set default ownership for all subsequently extracted files to <i class="arg">user</i>. Use without an arg to set back to default (extraction) ownership.<div class="spacer">
</div>
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">@pkgpath</b> <i class="arg">pkgpath</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Declare a secondary <i class="arg">pkgpath</i> for the package. This is used for updates: <b class="name">pkg_add</b> <b class="flag">-u</b> normally checks that the <i class="arg">pkgpath</i> embedded in the package corresponds to the old package, to solve ambiguities when packages with similar names are involved. When ports get renamed, or flavors change, extra <b class="flag">@pkgpath</b> annotations can help <b class="name">pkg_add</b> get a sense of continuity. Note that these <i class="arg">pkgpath</i> can take extra optional components, to allow the matching of several flavors at once, and are order independent. For instance,<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
@pkgpath some/dir,f1,f2</pre>
<div class="spacer">
</div>
and<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
@pkgpath some/dir,f2,f2,f1</pre>
<div class="spacer">
</div>
are equivalent.<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
@pkgpath some/dir,f1[,f2,f3][,f4]</pre>
<div class="spacer">
</div>
will match all pkgpaths to some/dir with flavor f1, and optionally f4, and optionally both f2 and f3, e.g., <i class="arg">some/dir,f1,f4</i>, <i class="arg">some/dir,f1,f2,f3</i>, <i class="arg">some/dir,f1,f2,f3,f4</i>, <i class="arg">some/dir,f1</i> would match, but <i class="arg">some/dir,f1,f5</i>, <i class="arg">some/dir,f2,f3</i>, <i class="arg">some/dir,f1,f2,f4</i> would not.<div class="spacer">
</div>
Each binary package contains a set of pkgpaths: the primary pkgpath that was used to build the package, recorded as <b class="flag">@comment</b> <i class="arg">pkgpath=some/path</i>, and secondary pkgpaths as recorded through <b class="flag">@pkgpath</b>.<div class="spacer">
</div>
In order for two packages to match, their primary pkgpaths must match, or a secondary pkgpath must match the other package's primary pkgpath.<div class="spacer">
</div>
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">@rcscript</b> <i class="arg">filename</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Script for the <i class="file">/etc/rc.d</i> framework. Contrary to <b class="flag">@file</b>, absolute paths are okay, e.g.,<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
@rcscript ${RCDIR}/ballsd</pre>
<div class="spacer">
</div>
In this case, performs an implicit <b class="flag">@cwd</b> to <i class="file">${RCDIR}</i>.<div class="spacer">
</div>
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">@sample</b> <i class="arg">filename</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Last preceding <b class="flag">@file</b> item is a sample configuration file, to be copied to <i class="arg">filename</i> at <a class="link-man" href="../html1/pkg_add.html">pkg_add(1)</a> time and to be removed at <a class="link-man" href="../html1/pkg_delete.html">pkg_delete(1)</a> time. During installation, existing configuration files are untouched. During deinstallation, configuration files are only removed if unchanged. <i class="arg">filename</i> can be an absolute path. If <i class="arg">filename</i> ends with a slash, it refers to a configuration directory instead.<div class="spacer">
</div>
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">@shell</b> <i class="arg">filename</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Specialized version of <b class="flag">@file</b>, to handle shells. See <a class="link-man" href="../html5/shells.html">shells(5)</a>.<div class="spacer">
</div>
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">@sysctl</b> <i class="arg">var</i>=<i class="arg">val</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">@sysctl</b> <i class="arg">var</i>&#8805;<i class="arg">val</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
During <a class="link-man" href="../html1/pkg_add.html">pkg_add(1)</a>, check that <a class="link-man" href="../html8/sysctl.html">sysctl(8)</a> variable <i class="arg">var</i> is set to exactly/at least a given value <i class="arg">val</i>. Adjust it otherwise.<div class="spacer">
</div>
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">@unexec</b> <i class="arg">command</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Execute <i class="arg">command</i> during <a class="link-man" href="../html1/pkg_delete.html">pkg_delete(1)</a>. <span class="env">PATH</span> and expansion of special <b class="flag">%</b> sequences are the same as for <b class="flag">@exec</b>. Note that <b class="flag">@unexec</b> commands are executed relative to their location in the packing-list, so they cannot rely on any data that has already been deleted, thus they should occur before the files they need to function. Some special elements, such as new users and new groups, are always deleted last, so that <b class="flag">@unexec</b> can rely on them.<div class="spacer">
</div>
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">@unexec-always</b> <i class="arg">command</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Synonym of <b class="flag">@unexec</b>.<div class="spacer">
</div>
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">@unexec-delete</b> <i class="arg">command</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Similar to <b class="flag">@unexec</b>, except it only gets executed during true deletions and not while removing an old package during updates.<div class="spacer">
</div>
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="flag">@unexec-update</b> <i class="arg">command</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Similar to <b class="flag">@unexec</b>, except it only gets executed while removing an old package during updates, and not during true deletions.</dd>
</dl>
<div class="spacer">
</div>
See <a class="link-man" href="../html5/package.html">package(5)</a> for other internal annotations that are automatically added by the package tools.</div>
<div class="section">
<h1 id="x5641524941424c4520535542535449545554494f4e20414e4420465241474d454e5420494e434c5553494f4e">VARIABLE SUBSTITUTION AND FRAGMENT INCLUSION</h1> In packing-lists, installation, deinstallation and requirement scripts, description and message files, constructs like <code class="lit">${VAR}</code> will be replaced with the variable value, according to <b class="flag">-D</b> <i class="arg">name</i>=<i class="arg">value</i> options.<div class="spacer">
</div>
In particular, shared library versions should never be mentioned explicitly in a packing-list. Shared library &#8216;foo&#8217; will take its version number from <span class="env">LIBfoo_VERSION</span>. The ports framework normally takes care of all details, see <span class="env">SHARED_LIBS</span> in <a class="link-man" href="../html5/bsd.port.mk.html">bsd.port.mk(5)</a>.<div class="spacer">
</div>
Constructs like <code class="lit">%%VAR%%</code> and <code class="lit">!%%VAR%%</code> trigger fragment inclusion. If such a line is encountered in a packing-list, the corresponding variable must be defined to 0 or 1. If the variable's value is 1, <code class="lit">%%VAR%%</code> will be replaced by the corresponding positive fragment, and <code class="lit">!%%VAR%%</code> will be ignored. If the variable's value is 0, <code class="lit">%%VAR%%</code> will be ignored, and <code class="lit">!%%VAR%%</code> will be replaced by the corresponding positive fragment.<div class="spacer">
</div>
A fragment is an auxiliary packing-list file, whose name is derived from the current packing-list, and the variable name <b class="var">VAR</b> triggering the inclusion: <i class="file">pkg/PLIST</i> yields a positive fragment <i class="file">pkg/PFRAG.VAR</i> and a negative fragment <i class="file">pkg/PFRAG.no-VAR</i>, <i class="file">pkg/PLIST-FOO</i> yields a positive fragment <i class="file">pkg/PFRAG.VAR-foo</i> and a negative fragment <i class="file">pkg/PFRAG.no-VAR-foo</i>.<div class="spacer">
</div>
Fragments can be included inside fragments, so that <code class="lit">%%VAR2%%</code> inside <i class="file">pkg/PFRAG.VAR</i> triggers the inclusion of <i class="file">pkg/PFRAG.VAR2-VAR</i> and <code class="lit">!%%VAR2%%</code> triggers the inclusion of <i class="file">pkg/PFRAG.no-VAR2-VAR</i>.<div class="spacer">
</div>
If a positive or a negative fragment file does not exist, the corresponding inclusion will be ignored. However, if both the positive and negative fragment files do not exist, <b class="name">pkg_create</b> will error out, to make it easier to spot fragment names errors.</div>
<div class="section">
<h1 id="x454e5649524f4e4d454e54">ENVIRONMENT</h1><dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">PKG_DESTDIR</span></dt>
<dd class="list-tag" style="margin-left: 11.00ex;">
Default value for <i class="arg">pkg-destdir</i>, if no <b class="flag">-B</b> option is specified.</dd>
</dl>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../html1/pkg_add.html">pkg_add(1)</a>, <a class="link-man" href="../html1/pkg_delete.html">pkg_delete(1)</a>, <a class="link-man" href="../html1/pkg_info.html">pkg_info(1)</a>, <a class="link-man" href="../html1/pkg_sign.html">pkg_sign(1)</a>, <a class="link-man" href="../html1/tar.html">tar(1)</a>, <a class="link-man" href="../html5/bsd.port.mk.html">bsd.port.mk(5)</a>, <a class="link-man" href="../html5/package.html">package(5)</a>, <a class="link-man" href="../html5/pkg.conf.html">pkg.conf(5)</a>, <a class="link-man" href="../html7/packages-specs.html">packages-specs(7)</a>, <a class="link-man" href="../html7/pkgpath.html">pkgpath(7)</a>, <a class="link-man" href="../html7/ports.html">ports(7)</a></div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> The <b class="name">pkg_create</b> command first appeared in <span class="unix">FreeBSD</span>.</div>
<div class="section">
<h1 id="x415554484f5253">AUTHORS</h1><dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
<span class="author">Jordan Hubbard</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
initial design</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<br/>
<span class="author">Marc Espie</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
complete rewrite.</dd>
</dl>
</div>
</div>
</body>
</html>

