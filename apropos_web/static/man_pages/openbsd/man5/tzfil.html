<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/posix/style.css" type="text/css" media="all"/>
<title>
TZFILE(5)</title>
</head>
<body>
<div class="mandoc">
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">tzfile</b> &#8212; <span class="desc">time zone information</span></div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> The time zone information files used by <a class="link-man" href="../html3/tzset.html">tzset(3)</a> begin with the magic characters &quot;TZif&quot; to identify themselves as time zone information files, followed by a character identifying the version of the file's format (as of 2005, either an ASCII NUL or a '2') followed by fifteen bytes containing zeroes reserved for future use, followed by six four-byte values of type <i class="farg">int</i> written in a &#8220;big endian&#8221; byte order (the most significant byte of the value is written first). These values are, in order:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="farg">tzh_ttisgmtcnt</i></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
The number of UTC/local indicators stored in the file.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="farg">tzh_ttisstdcnt</i></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
The number of standard/wall indicators stored in the file.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="farg">tzh_leapcnt</i></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
The number of leap seconds for which data is stored in the file.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="farg">tzh_timecnt</i></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
The number of &quot;transition times&quot; for which data is stored in the file.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="farg">tzh_typecnt</i></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
The number of &quot;local time types&quot; for which data is stored in the file (must not be zero).</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="farg">tzh_charcnt</i></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
The number of characters of &quot;time zone abbreviation strings&quot; stored in the file.</dd>
</dl>
<div class="spacer">
</div>
The above header is followed by <i class="farg">tzh_timecnt</i> four-byte values of type <i class="farg">long</i>, sorted in ascending order. These values are written in &#8220;standard&#8221; byte order. Each is used as a transition time (as returned by <a class="link-man" href="../html3/time.html">time(3)</a>) at which the rules for computing local time change. Next come <i class="farg">tzh_timecnt</i> one-byte values of type <i class="farg">unsigned char</i>; each one tells which of the different types of &#8220;local time&#8221; types described in the file is associated with the same-indexed transition time. These values serve as indices into an array of <i class="farg">ttinfo</i> structures (with <i class="farg">tzh_typecnt</i> entries) that appears next in the file; these structures are defined as follows:<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
struct ttinfo { 
	long	tt_gmtoff;	/* UTC offset in seconds */ 
	int	tt_isdst;	/* used to set tm_isdst */ 
	int	tt_abbrind;	/* abbreviation list index */ 
};</pre>
<div class="spacer">
</div>
Each structure is written as a four-byte value for <i class="farg">tt_gmtoff</i> of type <i class="farg">long</i>, in &#8220;big endian&#8221; byte order, followed by a one-byte value for <i class="farg">tt_isdst</i> and a one-byte value for <i class="farg">tt_abbrind</i>. In each structure, <i class="farg">tt_gmtoff</i> gives the number of seconds to be added to UTC, <i class="farg">tt_isdst</i> tells whether <i class="farg">tm_isdst</i> should be set by <a class="link-man" href="../html3/localtime.html">localtime(3)</a> and <i class="farg">tt_abbrind</i> serves as an index into the array of time zone abbreviation characters that follow the <i class="farg">ttinfo</i> structure(s) in the file.<div class="spacer">
</div>
Then there are <i class="farg">tzh_leapcnt</i> pairs of four-byte values, written in standard byte order; the first value of each pair gives the time (as returned by <a class="link-man" href="../html3/time.html">time(3)</a>) at which a leap second occurs; the second gives the <span class="emph">total</span> number of leap seconds to be applied after the given time. The pairs of values are sorted in ascending order by time.<div class="spacer">
</div>
Then there are <i class="farg">tzh_ttisstdcnt</i> standard/wall indicators, each stored as a one-byte value; they tell whether the transition times associated with local time types were specified as standard time or wall clock time, and are used when a time zone file is used in handling POSIX-style time zone environment variables.<div class="spacer">
</div>
Finally there are <i class="farg">tzh_ttisgmtcnt</i> UTC/local indicators, each stored as a one-byte value; they tell whether the transition times associated with local time types were specified as UTC or local time, and are used when a time zone file is used in handling POSIX-style time zone environment variables.<div class="spacer">
</div>
<a class="link-man" href="../html3/localtime.html">localtime(3)</a> uses the first standard-time <i class="farg">ttinfo</i> structure in the file, or simply the first <i class="farg">ttinfo</i> structure in the absence of a standard-time structure, if either <i class="farg">tzh_timecnt</i> is zero or the time argument is less than the first transition time recorded in the file.<div class="spacer">
</div>
For version-2-format time zone files, the above header and data are followed by a second header and data, identical in format except that eight bytes are used for each transition time or leap second time. After the second header and data comes a newline-enclosed, POSIX-TZ-environment-variable-style string for use in handling instants after the last transition time stored in the file (with nothing between the newlines if there is no POSIX representation for such instants).</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../html3/ctime.html">ctime(3)</a></div>
</div>
</body>
</html>

