<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/posix/style.css" type="text/css" media="all"/>
<title>
OSPFD.CONF(5)</title>
</head>
<body>
<div class="mandoc">
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">ospfd.conf</b> &#8212; <span class="desc">Open Shortest Path First daemon configuration file</span></div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> The <a class="link-man" href="../html8/ospfd.html">ospfd(8)</a> daemon implements the Open Shortest Path First protocol version 2 as described in RFC 2328.</div>
<div class="section">
<h1 id="x53454354494f4e53">SECTIONS</h1> The <b class="name">ospfd.conf</b> config file is divided into three main sections.<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">Macros</span></dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
User-defined variables may be defined and used later, simplifying the configuration file.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">Global Configuration</span></dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
Global settings for <a class="link-man" href="../html8/ospfd.html">ospfd(8)</a>. A number of global settings can be overruled in specific areas or interfaces.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">Areas</span></dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
An OSPF router must be a member of at least one area. Areas are used to group interfaces, simplifying configuration.</dd>
</dl>
<div class="spacer">
</div>
Argument names not beginning with a letter, digit, or underscore must be quoted.<div class="spacer">
</div>
Additional configuration files can be included with the <b class="cmd">include</b> keyword, for example:<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
include &quot;/etc/ospfd.sub.conf&quot;</pre>
</div>
<div class="section">
<h1 id="x4d4143524f53">MACROS</h1> Macros can be defined that will later be expanded in context. Macro names must start with a letter, digit, or underscore, and may contain any of those characters. Macro names may not be reserved words (for example, <b class="cmd">area</b>, <b class="cmd">interface</b>, or <b class="cmd">hello-interval</b>). Macros are not expanded inside quotes.<div class="spacer">
</div>
For example:<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
hi=&quot;5&quot; 
area 0.0.0.0 { 
	interface em0 { 
		hello-interval $hi 
	} 
}</pre>
<div class="spacer">
</div>
The same can be accomplished by specifying the hello-interval globally or within the area declaration.</div>
<div class="section">
<h1 id="x474c4f42414c20434f4e46494755524154494f4e">GLOBAL CONFIGURATION</h1> All interface related settings can be configured globally, per area and per interface. The only settings that can be set globally and not overruled are listed below.<div class="spacer">
</div>
<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="cmd">fib-update</b> (<b class="cmd">yes</b>|<b class="cmd">no</b>)</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
If set to <b class="cmd">no</b>, do not update the Forwarding Information Base, a.k.a. the kernel routing table. The default is <b class="cmd">yes</b>. Setting <b class="cmd">fib-update</b> to <b class="cmd">no</b> will implicitly set the <b class="cmd">stub</b> <b class="cmd">router</b> option to ensure that no traffic tries to transit via this router.<div class="spacer">
</div>
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="cmd">rdomain</b> <i class="arg">tableid</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Specifies the routing table <a class="link-man" href="../html8/ospfd.html">ospfd(8)</a> should modify. Table 0 is the default table.<div class="spacer">
</div>
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
[<span class="opt"><b class="cmd">no</b></span>] <b class="cmd">redistribute</b> (<b class="cmd">static</b>|<b class="cmd">connected</b>|<b class="cmd">default</b>) [<span class="opt"><b class="cmd">set ...</b></span>]</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
[<span class="opt"><b class="cmd">no</b></span>] <b class="cmd">redistribute</b> <i class="arg">prefix</i> [<span class="opt"><b class="cmd">set ...</b></span>]</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
[<span class="opt"><b class="cmd">no</b></span>] <b class="cmd">redistribute rtlabel</b> <i class="arg">label</i> [<span class="opt"><b class="cmd">set ...</b></span>]</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
If set to <b class="cmd">connected</b>, routes to directly attached networks will be announced over OSPF. If set to <b class="cmd">static</b>, static routes will be announced over OSPF. If set to <b class="cmd">default</b>, a default route pointing to this router will be announced over OSPF. It is possible to specify a network range with <i class="arg">prefix</i>; networks need to be part of that range to be redistributed. Additionally it is possible to redistribute based on route labels using the <b class="cmd">rtlabel</b> keyword. By default no additional routes will be announced over OSPF.<div class="spacer">
</div>
<b class="cmd">redistribute</b> statements are evaluated in sequential order, from first to last. The first matching rule decides if a route should be redistributed or not. Matching rules starting with <b class="cmd">no</b> will force the route to be not announced. The only exception is <b class="cmd">default</b>, which will be set no matter what, and additionally <b class="cmd">no</b> cannot be used together with it.<div class="spacer">
</div>
It is possible to set the route <b class="cmd">metric</b> and <b class="cmd">type</b> for each redistribute rule. <b class="cmd">type</b> is either 1 or 2. The default value for <b class="cmd">type</b> is 1 and for <b class="cmd">metric</b> is 100. Setting more than one option needs curly brackets:<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
redistribute static set { metric 300 type 2 }</pre>
<div class="spacer">
</div>
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="cmd">rfc1583compat</b> (<b class="cmd">yes</b>|<b class="cmd">no</b>)</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
If set to <b class="cmd">yes</b>, decisions regarding AS-external routes are evaluated according to RFC 2328. The default is <b class="cmd">no</b>.<div class="spacer">
</div>
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="cmd">router-id</b> <i class="arg">address</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Set the router ID; if not specified, the numerically lowest IP address of the router will be used.<div class="spacer">
</div>
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="cmd">rtlabel</b> <i class="arg">label</i> <b class="cmd">external-tag</b> <i class="arg">number</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Map route labels to external route tags and vice versa. The external route tag is a non-negative 32-bit number attached to AS-external OSPF LSAs.<div class="spacer">
</div>
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="cmd">spf-delay</b> (<i class="arg">seconds</i>|<b class="cmd">msec</b> <i class="arg">milliseconds</i>)</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Set the SPF delay. The delay between receiving an update to the link state database and starting the shortest path first calculation. The default value is 1 second; valid range is 10 milliseconds-10 seconds.<div class="spacer">
</div>
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="cmd">spf-holdtime</b> (<i class="arg">seconds</i>|<b class="cmd">msec</b> <i class="arg">milliseconds</i>)</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Set the SPF holdtime. The minimum time between two consecutive shortest path first calculations. The default value is 5 seconds; the valid range is 10 milliseconds-5 seconds.<div class="spacer">
</div>
</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<b class="cmd">stub</b> <b class="cmd">router</b> (<b class="cmd">yes</b>|<b class="cmd">no</b>)</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
If set to <b class="cmd">yes</b>, all interfaces with active neighbors will have a metric of infinity. This ensures that the other routers prefer routes around this router while still being able to reach directly connected IP prefixes. The <b class="cmd">stub</b> <b class="cmd">router</b> option is automatically enabled if either the <a class="link-man" href="../html8/sysctl.html">sysctl(8)</a> variable <b class="var">net.inet.ip.forwarding</b> is set to a value other than 1 or if the FIB is not coupled.</dd>
</dl>
</div>
<div class="section">
<h1 id="x4152454153">AREAS</h1> Areas are used for grouping interfaces. All interface-specific parameters can be configured per area, overruling the global settings.<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">area</b> <i class="arg">address</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Specify an area section, grouping one or more interfaces.<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
area 0.0.0.0 { 
	interface em0 
	interface em1 { 
		metric 10 
	} 
}</pre>
</dd>
</dl>
<div class="spacer">
</div>
Area specific parameters are listed below.<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">demote</b> <i class="arg">group</i> [<span class="opt"><i class="arg">count</i></span>]</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Increase the <a class="link-man" href="../html4/carp.html">carp(4)</a> demotion counter by <i class="arg">count</i> on the given interface group, usually <i class="arg">carp</i>, when no neighbor in the area is in an active state. The demotion counter will be decreased when one neighbor in that area is in an active state. The default value for <i class="arg">count</i> is 1.<div class="spacer">
</div>
For more information on interface groups, see the <b class="cmd">group</b> keyword in <a class="link-man" href="../html8/ifconfig.html">ifconfig(8)</a>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">stub</b> [<span class="opt"><b class="cmd">redistribute default</b></span>] [<span class="opt"><b class="cmd">set ...</b></span>]</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Mark the area as <i class="arg">stub</i>. Stub areas will not be flooded by as-ext LSA, resulting in smaller routing tables. Area border routers should redistribute a default network LSA; this can be enabled by specifying the default redistribute option. A default summary LSA will only be redistributed if the router has an active connection to the backbone area 0.0.0.0.</dd>
</dl>
</div>
<div class="section">
<h1 id="x494e5445524641434553">INTERFACES</h1> Each interface can have several parameters configured individually, otherwise they are inherited. An interface is specified by its name. If multiple networks are configured an additional IP address can be supplied. By default the first IP address is used.<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
interface em0 { 
	auth-type crypt 
	auth-md 1 &quot;yotVoo_Heypp&quot; 
	auth-md-keyid 1 
} 
interface fxp0:192.168.1.3</pre>
<div class="spacer">
</div>
Interface-specific parameters are listed below.<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">auth-key</b> <i class="arg">key</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Set the authentication key for <b class="cmd">simple</b> authentication. Up to 8 characters can be specified.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">auth-md</b> <i class="arg">key-id key</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Set the authentication <i class="arg">key-id</i> and <i class="arg">key</i> for <b class="cmd">crypt</b> authentication. The valid range for <i class="arg">key-id</i> is 0-255. Up to 16 characters can be specified for <i class="arg">key</i>. Multiple keys may be specified.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">auth-md-keyid</b> <i class="arg">key-id</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Configure the <i class="arg">key-id</i> to use for <b class="cmd">crypt</b> authentication. The valid range for <i class="arg">key-id</i> is 0-255. The default key-id is 1. While key-id 0 is valid, it is unavailable on various other implementations.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">auth-type</b> (<b class="cmd">none</b>|<b class="cmd">simple</b>|<b class="cmd">crypt</b>)</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Set the authentication type. The default is <b class="cmd">none</b>. Simple authentication uses a plaintext password, up to 8 characters. Crypt authentication uses an MD5 hash.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">demote</b> <i class="arg">group</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Increase the <a class="link-man" href="../html4/carp.html">carp(4)</a> demotion counter by 1 on the given interface group, usually <i class="arg">carp</i>, when the interface state is going down. The demotion counter will be decreased when the interface state is active again.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">fast-hello-interval</b> <b class="cmd">msec</b> <i class="arg">milliseconds</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
If the interface is configured to use <b class="cmd">router-dead-time minimal</b>, hello packets will be sent using this timer. The default value is 333; valid range is 50-333 milliseconds.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">hello-interval</b> <i class="arg">seconds</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Set the hello interval. The default value is 10; valid range is 1-65535 seconds.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">metric</b> <i class="arg">cost</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Set the interface metric a.k.a. cost. The default value is 10; valid range is 1-65535.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">passive</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Prevent transmission and reception of OSPF packets on this interface. The specified interface will be announced as a stub network.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">retransmit-interval</b> <i class="arg">seconds</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Set retransmit interval. The default value is 5 seconds; valid range is 5-3600 seconds.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">router-dead-time</b> (<i class="arg">seconds</i>|<b class="cmd">minimal</b>)</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Set the router dead time, a.k.a. neighbor inactivity timer. The default value is 40 seconds; valid range is 2-2147483647 seconds. If the router dead time has been set to <b class="cmd">minimal</b>, the timer is set to 1 second and hello packets are sent using the interval specified by <b class="cmd">fast-hello-interval</b>. When a neighbor has been inactive for router-dead-time its state is set to DOWN. Neighbors that have been inactive for more than 24 hours are completely removed.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">router-priority</b> <i class="arg">priority</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Set the router priority. The default value is 1; valid range is 0-255. If set to 0 the router is not eligible as a Designated Router or Backup Designated Router.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">transmit-delay</b> <i class="arg">seconds</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Set the transmit delay. The default value is 1; valid range is 1-3600 seconds.</dd>
</dl>
</div>
<div class="section">
<h1 id="x46494c4553">FILES</h1><dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/etc/ospfd.conf</i></dt>
<dd class="list-tag" style="margin-left: 15.00ex;">
<a class="link-man" href="../html8/ospfd.html">ospfd(8)</a> configuration file</dd>
</dl>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../html8/ospfctl.html">ospfctl(8)</a>, <a class="link-man" href="../html8/ospfd.html">ospfd(8)</a>, <a class="link-man" href="../html8/rc.conf.local.html">rc.conf.local(8)</a></div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> The <b class="name">ospfd.conf</b> file format first appeared in <span class="unix">OpenBSD&#160;3.7</span>.</div>
</div>
</body>
</html>

