<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/posix/style.css" type="text/css" media="all"/>
<title>
BSD.PORT.MK(5)</title>
</head>
<body>
<div class="mandoc">
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">bsd.port.mk</b> &#8212; <span class="desc">ports tree master Makefile fragment</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="macro">.include &lt;bsd.port.mk&gt;</b></div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> <b class="name">bsd.port.mk</b> holds all the standard routines used by the ports tree. Some variables and targets are for its internal use only. The rest is documented here.<div class="spacer">
</div>
<b class="name">bsd.port.mk</b> also uses quite a few helper scripts. Those live under <i class="file">${PORTSDIR}/infrastructure/bin</i>, and they do have manpages under <i class="file">${PORTSDIR}/infrastructure/man</i>.<div class="spacer">
</div>
Other <span class="unix">BSD</span> variants, as well as older versions of <b class="name">bsd.port.mk</b>, include other targets and variables. Conversion methods are outlined here.<div class="spacer">
</div>
Most variables and targets are documented, with very few exceptions.<div class="spacer">
</div>
This documentation covers the current targets, variables and paths used by <b class="name">bsd.port.mk</b>. There is a separate section covering the fake framework, a section explaining flavors and multi-packages, and a section covering the generation of package information.<div class="spacer">
</div>
It ends with sections on obsolete constructs that a porter may need when converting from other ports systems.<div class="spacer">
</div>
Binary package details are mostly covered in <a class="link-man" href="../html1/pkg_create.html">pkg_create(1)</a> for the packing-list details, and in <a class="link-man" href="../html1/pkg_add.html">pkg_add(1)</a> for the installation semantics.<div class="spacer">
</div>
Selected common user activity such as the building of every package in the system is covered by <a class="link-man" href="../html7/ports.html">ports(7)</a> instead. <a class="link-man" href="../html7/packages.html">packages(7)</a> provides an overview of the result.</div>
<div class="section">
<h1 id="x54415247455453">TARGETS</h1><dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">{build,run,all,test}-dir-depends</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Print all dependencies for a port in order to build it, run it, build and run it, or to run regression tests. The output is formatted as package specification pairs, in a form suitable for <a class="link-man" href="../html1/tsort.html">tsort(1)</a>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">full-{build,run,all,test}-depends</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Print all dependencies a package depends upon for building, running, or both, as a list of package names, sorted by dependency order with <a class="link-man" href="../html1/tsort.html">tsort(1)</a>, most dependent port first.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">{build,lib,test,run}-depends-list</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Print a list of first level package specifications a port depends as build dependencies, library dependencies, test dependencies or run dependencies.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">print-{build,run}-depends</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
User convenience target that displays the result of <b class="flag">full-{build,run}-depends</b> in a more readable way.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">{pre,do,post}-*</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Most standard targets can be specialized according to a given port's needs. If defined, the <b class="flag">pre-*</b> hook will be invoked before running the normal action; the <b class="flag">do-*</b> hook will be invoked instead of the normal action; the <b class="flag">post-*</b> hook will be invoked after the normal action. Specialization hooks exist for <b class="flag">build</b>, <b class="flag">configure</b>, <b class="flag">distpatch</b>, <b class="flag">extract</b>, <b class="flag">fake</b>, <b class="flag">install</b>, <b class="flag">patch</b>, <b class="flag">test</b>. See individual targets for exceptions.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">addsum</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Complete the ${CHECKSUM_FILE} record of checksums with files that have been added since <b class="flag">makesum</b>. Complain if anything does not match.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">all-lib-depends-args</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Process the full <span class="env">LIB_DEPENDS</span> list into a form suitable for <a class="link-man" href="../html1/pkg_create.html">pkg_create(1)</a>, see <b class="flag">print-package-args</b>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">build</b>, <b class="flag">all</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Default target. Build the port. Essentially invoke<div class="spacer">
</div>
<pre style="margin-left: 0.00ex;" class="lit display">
env -i ${MAKE_ENV} ${MAKE_PROGRAM} ${MAKE_FLAGS} \ 
	-f ${MAKE_FILE} ${ALL_TARGET}</pre>
</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">build-depends</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Verify the ports mentioned in <span class="env">BUILD_DEPENDS</span>, by checking the corresponding packages are actually installed, and install the missing ports by recursing through the ports tree. Deprecated, see <b class="flag">prepare</b>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">check-register</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Introspection target. Verify from the ports tree, without building anything, that the current subpackage will register okay (see <span class="env">PLIST_REPOSITORY</span>).</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">check-register-all</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Apply <b class="flag">check-register</b> to all subpackages of the current port.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">checkpatch</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Debugging version of the <b class="flag">patch</b> target that simulates invoking <a class="link-man" href="../html1/patch.html">patch(1)</a>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">checksum</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Check distribution archives and distribution patches control sum against the results recorded in ${CHECKSUM_FILE}, using the message digest (checksum) utilities listed in ${PREFERRED_CIPHERS}. All the files needed to recreate a port should be in ${CHECKSUMFILES} and checksummed. Invoking <b class="flag">checksum</b> with <span class="env">REFETCH</span>=<b class="flag">true</b> will try to fetch a version with the correct checksum from the <span class="unix">OpenBSD</span> main archive site in the case of a checksum mismatch. <span class="env">NO_CHECKSUM</span> can be used to avoid all checksumming steps.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">clean</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Clean ports contents. By default, it will clean the work directory. It can be invoked as make clean='[depends build bulk work fake flavors dist install sub package packages plist]'.<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="var">work</b></dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
Clean work directory.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="var">bulk</b></dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
Clean bulk cookie.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="var">build</b></dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
Clean the <b class="var">WRKBUILD</b> directory (only useful if <b class="var">SEPARATE_BUILD</b> is set).</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="var">depends</b></dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
Recurse into dependencies.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="var">dist</b></dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
Clean distribution files.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="var">fake</b></dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
Clean fake installation directory.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="var">flavors</b></dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
Clean all work directories.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="var">install</b></dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
Uninstall package.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="var">package</b></dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
Remove all copies of package file.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="var">plist</b></dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
Remove registered packing lists of all subpackages.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="var">sub</b></dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
With <b class="var">install</b> or <b class="var">package</b>, clean subpackages as well.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="var">packages</b></dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
Shorthand for &#8216;sub package&#8217;.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="var">all</b></dt>
<dd class="list-tag" style="margin-left: 8.00ex;">
Shorthand for &#8216;work flavors packages plist&#8217;.</dd>
</dl>
</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">clean-depends</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Shorthand for &#8216;<code class="lit">make clean=depends</code>&#8217;.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">configure</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Configure the port. Might be a void operation. Unless overridden, <b class="flag">configure</b> creates the ${WRKBUILD} directory (see SEPARATE_BUILD), and runs whatever configuration methods are recorded in <span class="env">CONFIGURE_STYLE</span>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">depends</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Check all the port's dependencies, that is: <b class="flag">build-depends</b>, <b class="flag">lib-depends</b>, <b class="flag">run-depends</b>, <b class="flag">test-depends</b>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">describe</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Prints a one-line index entry of the port, suitable for <i class="file">${PORTSDIR}/INDEX</i>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">distclean</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Shorthand for &#8216;<code class="lit">make clean=dist</code>&#8217;.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">distpatch</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Apply distribution patches only. See <b class="flag">patch</b> and <span class="env">PATCH_CASES</span> for details.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">dump-vars</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Dump the values of all relevant variables in a port, prepended with the port's FULLPKGPATH.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">extract</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Extract the distribution files under <i class="file">${WRKDIR}</i> (but see <span class="env">EXTRACT_ONLY</span> and <span class="env">NO_DEPENDS</span>). Refer to <span class="env">EXTRACT_CASES</span> for a complete description. Do not use <b class="flag">pre-extract</b> and <b class="flag">do-extract</b> hooks.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">fake</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Do a fake port installation, that is, simulate the port installation under ${WRKINST}. There is no <b class="flag">do-fake</b> and <b class="flag">post-fake</b> hooks. <b class="flag">fake</b> actually uses <b class="flag">pre-fake</b>, <b class="flag">pre-install</b>, <b class="flag">do-install</b> and <b class="flag">post-install</b>. Override <b class="flag">pre-install</b>, <b class="flag">do-install</b>, or <b class="flag">post-install</b> to change behavior. Do not touch <b class="flag">pre-fake</b> unless you really know what you are doing. See <i class="link-sec"><a class="link-sec" href="#x5448452046414b45204652414d45574f524b">THE FAKE FRAMEWORK</a></i> section below.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">fake-wantlib-args</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Check <span class="env">WANTLIB</span> against the list of installed packages and libraries in the ports tree. See <b class="flag">print-package-args</b>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">fetch</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Fetch the distribution files and patchfiles, using ${FETCH_CMD}. Each file of the <span class="env">DISTFILES</span> and <span class="env">PATCHFILES</span> lists is retrieved, if necessary, from the list of sites in <span class="env">MASTER_SITES</span>.<div class="spacer">
</div>
If a filename ends with a &#8216;:0&#8217; to &#8216;:9&#8217; extension, it will be retrieved from <span class="env">MASTER_SITES0</span> to <span class="env">MASTER_SITES9</span> instead. After stripping that extension if necessary, if the entry parses as &#8216;<i class="arg">filename</i>{<i class="arg">url</i>}<i class="arg">sufx</i>&#8217; it will be fetched as <i class="arg">url</i><i class="arg">sufx</i> instead, yet still stored as <i class="arg">filename</i><i class="arg">sufx</i>.<div class="spacer">
</div>
Transfers in progress will be stored as <i class="arg">filenamesufx.part</i>.<div class="spacer">
</div>
The ports framework uses <i class="file">${DISTDIR}/${DIST_SUBDIR}</i> (aliased to <i class="file">${FULLDISTDIR}</i>) to cache the ports distribution files and patch files. Note that this framework is also used by mirroring scripts, which will also retrieve <span class="env">SUPDISTFILES</span>, to fill with supplementary distribution files which are not needed for every configuration.<div class="spacer">
</div>
Note that fetching a significant number of distfiles, or fetching all distfiles relevant to a port and dependencies is better accomplished using <a class="link-man" href="../html1/dpb.html">dpb(1)</a> with the <b class="flag">-F</b> option.<div class="spacer">
</div>
Use of <b class="flag">{pre,do,post}-fetch</b> hooks is forbidden, as this would make mirroring of distfiles very complicated. See <span class="env">CHECKSUMFILES</span>, <span class="env">CDROM_SITE</span>, <span class="env">DISTDIR</span>, <span class="env">DISTFILES</span>, <span class="env">DIST_SUBDIR</span>, <span class="env">FETCH_CMD</span>, <span class="env">FETCH_MANUALLY</span>, <span class="env">FETCH_SYMLINK_DISTFILES</span>, <span class="env">FULLDISTDIR</span>, <span class="env">MAKESUMFILES</span>, <span class="env">MASTER_SITES</span>, <span class="env">MASTER_SITES0</span>, <span class="env">...</span>, <span class="env">MASTER_SITES9</span>, <span class="env">PATCHFILES</span>, <span class="env">SUPDISTFILES</span>, <span class="env">REFETCH</span>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">fetch-all</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
also fetches <span class="env">SUPDISTFILES</span>, for use with e.g., <b class="flag">makesum</b>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">index</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Top-level target, see <a class="link-man" href="../html7/ports.html">ports(7)</a>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">install</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Install the package after building. See the description of <i class="link-sec"><a class="link-sec" href="#x5448452046414b45204652414d45574f524b">THE FAKE FRAMEWORK</a></i> for the non-intuitive details of the way <b class="flag">{pre,do,post}-install</b> hooks are actually used by the ports tree.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">install-all</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Install all packages in a multi-packages port.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">lib-depends</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Verify that the library dependencies a port needs are actually there, by checking the library specifications.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">lib-depends-args</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Filter <span class="env">LIB_DEPENDS</span> to keep only entries required by <span class="env">WANTLIB</span>, and output a list of dependencies suitable for <a class="link-man" href="../html1/pkg_create.html">pkg_create(1)</a>, see <b class="flag">print-package-args</b>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">lib-depends-check</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Verify that the <span class="env">LIB_DEPENDS</span> and <span class="env">WANTLIB</span> are accurate for the port. See <b class="flag">port-lib-depends-check</b>, which is quicker.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">license-check</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Check that <span class="env">PERMIT_PACKAGE_*</span> settings match: if any dependency has a more restrictive setting, warn about it. This warning is advisory, because the automated license checking cannot figure out which ports were used only for building and did not taint the current port.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">link-categories</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Create symbolic links in other directories that correspond to the port's <span class="env">CATEGORIES</span>. Note that this does not affect bulk package building, since those links don't appear in the upper-level Makefiles. See also <b class="flag">unlink-categories</b>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">lock</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Manually obtain a lock on a given directory. Output must be used to update environment variables. The lock can be released with <b class="flag">unlock</b>. Seldom used, see <a class="link-man" href="../html7/ports.html">ports(7)</a> for details.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">makesum</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Create the ${CHECKSUM_FILE} list of recorded checksums by running the cryptographic fingerprint sha256 on ${MAKESUMFILES}. That normally includes ${DISTFILES}, ${SUPDISTFILES} and ${PATCHFILES}. <span class="env">NO_CHECKSUM</span> can be used to avoid all checksumming steps.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">manpages-check</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Verify that <a class="link-man" href="../html8/makewhatis.html">makewhatis(8)</a> can do a correct job with the port's manpages.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">mirror-maker</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Top-level target, see <a class="link-man" href="../html7/mirroring-ports.html">mirroring-ports(7)</a>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">mirror-maker-fetch</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Debug target: generate the <b class="flag">mirror-maker</b> makefile fragment and use it to fetch files, see <a class="link-man" href="../html7/mirroring-ports.html">mirroring-ports(7)</a>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">no-lib-depends-args</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Degenerate form of <b class="flag">lib-depends-args</b> that does not do anything. See <b class="flag">print-package-args</b>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">no-wantlib-args</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Degenerate form of <b class="flag">wantlib-args</b> that does not do anything. See <b class="flag">print-package-args</b>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">package</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Build a port package (or packages in a <span class="env">MULTI_PACKAGES</span> case) from the fake installation. Involves creating packaging information from templates (see <span class="env">COMMENT</span>, <span class="env">SUBST_VARS</span> among others) and invoking <a class="link-man" href="../html1/pkg_create.html">pkg_create(1)</a> for each package in the <span class="env">MULTI_PACKAGES</span> list. If the repository already contains up-to-date packages, they are not rebuilt. If PLIST_REPOSITORY is set, the resulting packaging information is compared with existing stuff, and saved if new, with loud complaints if it changed without a REVISION bump. Arch-independent packages are created in ${PACKAGE_REPOSITORY}/no-arch, and copied into ${PACKAGE_REPOSITORY}/${MACHINE_ARCH}/all as needed. If ${PERMIT_PACKAGE_FTP} is set to &#8216;Yes&#8217;, copies built packages into ${PACKAGE_REPOSITORY}/${MACHINE_ARCH}/ftp, using hard links if possible. If ${PERMIT_PACKAGE_CDROM} is set to &#8216;Yes&#8217;, copies built packages into ${PACKAGE_REPOSITORY}/${MACHINE_ARCH}/cdrom, using hard links if possible.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">patch</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Apply distribution and <span class="unix">OpenBSD</span> specific patches. Because of historical accident, <b class="flag">patch</b> does not follow the exact same scheme other standard targets do. Namely, <b class="flag">patch</b> invokes <b class="flag">pre-patch</b> (if defined), <b class="flag">do-patch</b>, and <b class="flag">post-patch</b>, but the default <b class="flag">do-patch</b> target invokes <b class="flag">distpatch</b> directly. So, if the <b class="flag">do-patch</b> target is overridden, it should still begin by calling &#8216;<code class="lit">make distpatch</code>&#8217;, before applying <span class="unix">OpenBSD</span> specific patches. Accordingly, the exact sequence of hooks is: <b class="flag">pre-patch</b>, <b class="flag">do-distpatch</b>, <b class="flag">post-distpatch</b>, <b class="flag">do-patch</b>, <b class="flag">post-patch</b>. If <i class="file">${PATCHDIR}</i> exists, the files described under <span class="env">PATCH_LIST</span> will be applied under <span class="env">WRKDIST</span>. See also <span class="env">REORDER_DEPENDENCIES</span> for possible <b class="flag">post-patch</b> clean-up.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">peek-ftp</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Connect to the first site in <span class="env">MASTER_SITES</span>, in the right directory, and leaves user at <a class="link-man" href="../html1/ftp.html">ftp(1)</a>'s prompt.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">pkglocatedb</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Top-level target, see <a class="link-man" href="../html7/ports.html">ports(7)</a>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">port-lib-depends-check</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Verify that the <span class="env">LIB_DEPENDS</span> and <span class="env">WANTLIB</span> hold all shared libraries used for every package in the port. See <a class="link-man" href="../html7/library-specs.html">library-specs(7)</a>. This makes use of <b class="flag">print-plist-with-depends</b> to avoid actually building the packages, it only needs the completion of the <b class="flag">fake</b> stage, and thus is quicker than <b class="flag">lib-depends-check</b>, unless you already have all binary packages.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">port-wantlib-args</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Resolve <span class="env">WANTLIB</span> against the ports tree itself and system libraries, without looking at built or installed packages, and writes a list of options suitable for <a class="link-man" href="../html1/pkg_create.html">pkg_create(1)</a>. See <b class="flag">print-package-args</b>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">prepare</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Prepare a port for building, by checking and installing all required dependencies, constructed from <span class="env">LIB_DEPENDS</span> and <span class="env">BUILD_DEPENDS</span>. In <span class="env">MULTI_PACKAGES</span> setups, see <i class="link-sec"><a class="link-sec" href="#x464c41564f525320414e44204d554c54495f5041434b41474553">FLAVORS AND MULTI_PACKAGES</a></i>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">print-package-args</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Print all dependency-related information that will be passed as parameters to <a class="link-man" href="../html1/pkg_create.html">pkg_create(1)</a>, e.g., <b class="flag">-W</b> <i class="arg">wantlib</i> and <b class="flag">-P</b> <i class="arg">depends</i> lines.<div class="spacer">
</div>
Those parameters are generated by <b class="flag">run-depends-args</b> for <span class="env">RUN_DEPENDENCIES</span> handling, a form of <b class="flag">lib-depends-args</b> for <span class="env">LIB_DEPENDS</span> and <span class="env">WANTLIB</span> interaction, and a form of <b class="flag">wantlib-args</b> for <span class="env">WANTLIB</span> resolution.<div class="spacer">
</div>
Variables <span class="env">lib_depends_args</span> and <span class="env">wantlib_args</span> control the exact behavior: <span class="env">lib_depends_args</span> is normally set to <b class="flag">lib-depends-args</b>, but will be set to <b class="flag">all-lib-depends-args</b> by <b class="flag">port-lib-depends-check</b>, in order to have access to the full list of LIB_DEPENDS for figuring out missing WANTLIB. <span class="env">wantlib_args</span> is normally set to <b class="flag">wantlib-args</b> but it may be set to <b class="flag">port-wantlib-args</b> for introspection purposes, to <b class="flag">fake-wantlib-args</b> to avoid some checks, or to <b class="flag">no-wantlib-args</b> to avoid expensive WANTLIB checks entirely.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">print-update-signature</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Print the update signature, as computed using information from the ports tree, in the same format used for <a class="link-man" href="../html1/pkg_info.html">pkg_info(1)</a> <b class="flag">-S</b>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">print-plist</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Generate and print a package packing-list from the static information present in the port.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">print-plist-all</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Iterate over <b class="flag">print-plist</b> for all subpackages in a given port.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">print-plist-all-with-depends</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Iterate over <b class="flag">print-plist-with-depends</b> for all subpackages in a given port.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">print-plist-contents</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Generate and print package contents from the static information present in the port. In contrast with <b class="flag">print-plist</b>, the package contents only consists of files, all tagged with category markers such as @file. See <a class="link-man" href="../html1/pkg_create.html">pkg_create(1)</a>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">print-plist-libs</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Generate and print the list of static and dynamic libraries present in the port. See <a class="link-man" href="../html1/pkg_create.html">pkg_create(1)</a>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">print-plist-libs-with-depends</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Like <b class="flag">print-plist-libs</b>, but slower. It also handles <span class="env">LIB_DEPENDS</span>, <span class="env">RUN_DEPENDS</span>, and <span class="env">WANTLIB</span>, so that the packing-list has complete dependency information.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">print-plist-with-depends</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Like <b class="flag">print-plist</b>, but slower. It also handles <span class="env">LIB_DEPENDS</span>, <span class="env">RUN_DEPENDS</span>, and <span class="env">WANTLIB</span>, so that the packing-list is complete.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">rebuild</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Force rebuild of the port.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">reinstall</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Force reinstallation of a port, by first cleaning the old installation. Seldom needed, as <b class="flag">update</b> will often do the right thing.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">repackage</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Rebuild the packages of a port after removing existing packages.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">run-depends</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Verify the ports mentioned in <span class="env">RUN_DEPENDS</span>, by checking the corresponding packages are actually installed, and install the missing ports by recursing through the ports tree. Invoked right before installing the package.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">run-depends-args</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Process <span class="env">RUN_DEPENDS</span> and outputs a list of dependencies suitable for <a class="link-man" href="../html1/pkg_create.html">pkg_create(1)</a>, see <b class="flag">print-package-args</b>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">show</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Invoked as make show=name, show the contents of ${name}. Invoked as make show=&quot;name1 name2 ...&quot;, show the contents of ${name1} ${name2} ..., one variable value per line. Mostly used from recursive makes, or to know the contents of another port's variables without guessing wrongly.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">show-fake-size</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Print the size of ${WRKINST}. Used by some options of <a class="link-man" href="../html1/dpb.html">dpb(1)</a>, suitable for <span class="env">BULK_TARGETS</span>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">show-prepare-results</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Print the list of actual installed packages found out by <b class="flag">prepare</b>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">show-prepare-test-results</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Print the list of actual installed packages found out by <b class="flag">prepare</b> and <b class="flag">test-depends</b>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">show-required-by</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Print the list of <a class="link-man" href="../html7/pkgpath.html">pkgpath(7)</a> for all ports that will be affected by the current port changing. Works by walking the list of dependencies, in reverse.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">show-run-depends</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Print all running dependencies for a port, one per-line, without duplicates.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">subpackage</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Build a port package. Exactly like <b class="flag">package</b>, but affects only one single subpackage in multi-packages ports.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">show-size</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Prints the size of the work directory. Used by some options of <a class="link-man" href="../html1/dpb.html">dpb(1)</a>, suitable for <span class="env">BULK_TARGETS</span>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">subupdate</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Update an existing installation to a newer package, exactly like <b class="flag">update</b>, but affects only one single subpackage in multi-packages ports.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">test</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Run regression tests for the port. Essentially depend on a correct build and invoke<div class="spacer">
</div>
<pre style="margin-left: 0.00ex;" class="lit display">
env -i ${ALL_TEST_ENV} ${MAKE_PROGRAM} ${ALL_TEST_FLAGS} \ 
	-f ${MAKE_FILE} ${TEST_TARGET} ${TEST_LOG}</pre>
<div class="spacer">
</div>
If a port needs some other ports installed to run regression tests, use <span class="env">TEST_DEPENDS</span>. If a port needs special configuration or build options to enable regression testing, define a &#8216;test&#8217; <span class="env">FLAVOR</span>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">test-depends</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Verify packages needed for regression tests, using the same scheme as <b class="flag">build-depends</b>. Only invoked when regression tests are run, or explicitly through <b class="flag">depends</b>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">unlink-categories</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Remove symbolic links in other directories that correspond to the port's <span class="env">CATEGORIES</span>. See also <b class="flag">link-categories</b>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">unlock</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Manually release a lock on a given directory. See <b class="flag">lock</b>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">update-patches</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Create or update patches for a port, using <a class="link-man" href="../html1/update-patches.html">update-patches(1)</a>, which invokes <a class="link-man" href="../html1/diff.html">diff(1)</a> between <i class="file">file</i> and <i class="file">file.orig</i>, based on <i class="file">file.orig</i> existence. In order to generate a patch, the original file needs to be named <i class="file">file.orig</i> and <i class="file">file</i> edited. After the target is invoked, the patches are placed under the patches/ directory. It moves existing patches from <i class="file">patch-file</i> to <i class="file">patch-file.orig</i>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">update</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Update an existing installation to a newer package: scan the installation for a package with the same <span class="env">FULLPKGPATH</span>, and update it using &#8216;pkg_add -r&#8217; if a newer package is available. In multi-packages ports, all relevant packages are updated. See <span class="env">UPDATE_COOKIES_DIR</span> and <span class="env">FORCE_UPDATE</span> as well.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">update-or-install</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Update an installed package or perform a fresh installation, by using &#8216;pkg_add -r&#8217;. Handles one single package in multi-packages ports. See <span class="env">UPDATE_COOKIES_DIR</span> and <span class="env">FORCE_UPDATE</span> as well.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">update-or-install-all</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Update installed packages or perform a fresh installation, by using &#8216;pkg_add -r&#8217;. Handles all packages in multi-packages ports. See <span class="env">UPDATE_COOKIES_DIR</span> and <span class="env">FORCE_UPDATE</span> as well.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">update-plist</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Update the packing lists for a port, using the fake installation and the existing packing lists. <b class="flag">update-plist</b> should produce a mostly correct <i class="file">PLIST</i> file, handling GNU <a class="link-man" href="../html1/info.html">info(1)</a> files, setuid files, and empty directories. It moves an existing file to <i class="file">PLIST.orig</i>. If the generated list includes files and directories that shouldn't be included, comment these like this:<div class="spacer">
</div>
<pre style="margin-left: 0.00ex;" class="lit display">
@comment unwanted-file 
@comment unwanted-dir/</pre>
<div class="spacer">
</div>
Subsequent calls to <b class="flag">update-plist</b> will automatically recognize and handle such lines correctly.<div class="spacer">
</div>
<b class="flag">update-plist</b> may not handle flavor and multi-packages situations correctly yet, so beware.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">verbose-show</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Similar to <b class="flag">show</b>, except that it prefixes each value with the variable name, e.g., <code class="lit">VAR=value</code>. Also note that it does not show undefined variables, contrary to <b class="flag">show</b> which outputs blank lines for these.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">wantlib-args</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Call <b class="flag">port-wantlib-args</b> and <b class="flag">fake-wantlib-args</b> and compare the results, errors out in case of discrepancies. See <b class="flag">print-package-args</b>.</dd>
</dl>
</div>
<div class="section">
<h1 id="x5641524941424c4553">VARIABLES</h1> Note that some variables are marked as &#8216;User-settings&#8217;, which means that individual ports should not modify them, and that some variables are marked as &#8216;read-only&#8217;, which means that they shouldn't ever be changed. In a <span class="env">MULTI_PACKAGES</span> setup, some variables have settings specific to a given subpackage. See <i class="link-sec"><a class="link-sec" href="#x464c41564f525320414e44204d554c54495f5041434b41474553">FLAVORS AND MULTI_PACKAGES</a></i>.<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">show</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Invoked as make show=name, show the contents of ${name}. Invoked as make show=&quot;name1 name2 ...&quot;, show the contents of ${name1} ${name2} ..., one variable value per line.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">ALL_FAKE_FLAGS</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Flags passed to ${MAKE} invocations during the fake process. Equals <code class="lit">${MAKE_FLAGS} ${DESTDIRNAME}=${WRKINST} ${FAKE_FLAGS}</code>. Read-only.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">ALL_TEST_ENV</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Environment passed to test. Equals <code class="lit">${MAKE_ENV} ${TEST_ENV}</code>. Read-only.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">ALL_TEST_FLAGS</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Flags passed to ${MAKE} invocations during test. Equals <code class="lit">${MAKE_FLAGS} ${TEST_FLAGS}</code>. Read-only.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">ALL_TARGET</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Target used to build software. Default is &#8216;all&#8217;. Can be set to empty, to yield a package's default target.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">APM_ARCHS</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Set to the list of <a class="link-man" href="../html4/apm.html">apm(4)</a> architectures. Read-only. Use with <span class="env">ONLY_FOR_ARCHS</span>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">ARCH</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Current machine architecture. Read-only.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">AUTOCONF</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Location of the autoconf binary if needed. Defaults to autoconf (though autoreconf might be more appropriate).</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">AUTOCONF_DIR</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Where to invoke autoconf if ${CONFIGURE_STYLE} includes autoconf. Defaults to ${WRKSRC}.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">AUTOCONF_VERSION</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Starting with <span class="unix">OpenBSD&#160;3.3</span>, several versions of autoconf may coexist peacefully. The main autoconf script is a shell wrapper in the <i class="file">devel/metaauto</i> package, and similarly for automake. Setting <span class="env">AUTOCONF_VERSION</span> along with <span class="env">CONFIGURE_STYLE</span> set to autoconf is the correct way to specify which one to use. <span class="env">AUTOCONF_VERSION</span> defaults to 2.13. If autoconf must be run manually, <span class="env">MODGNU_AUTOCONF_DEPENDS</span> can be used to specify what packages to depend upon.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">AUTOHEADER</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Location of the autoheader binary. Defaults to autoheader.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">AUTOMAKE_VERSION</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Several versions of automake may coexist peacefully. <span class="env">AUTOMAKE_VERSION</span> must be set before trying to run automake. Defaults to 1.4. Note that even if <span class="env">CONFIGURE_STYLE</span> includes automake, automake should still be run manually during the right <b class="flag">configure</b> stage.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">AUTOUPDATE</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Location of the autoupdate binary. Defaults to autoupdate.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">BASE_PKGPATH</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Full <a class="link-man" href="../html7/pkgpath.html">pkgpath(7)</a> to the current port, taking flavors into account. See also <span class="env">BUILD_PKGPATH</span>, which also includes pseudo-flavors. Read-only.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">BASELOCALSTATEDIR</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
User settings. Base location for system-wide state directory. Defaults to <i class="file">${VARBASE}</i>. See <span class="env">LOCALSTATEDIR</span>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">BASESYSCONFDIR</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
User settings. Base location for system-wide configuration files. Defaults to <i class="file">/etc</i>. See <span class="env">SYSCONFDIR</span>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">BATCH</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
User-settings. Set to &#8216;Yes&#8217; to avoid ports that require user-interaction. Use in conjunction with <span class="env">INTERACTIVE</span> to simplify bulk-package builds. (See IGNORE).</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">BE_ARCHS</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Set to the list of big-endian architectures. Read-only. Use with <span class="env">NOT_FOR_ARCHS</span> and <span class="env">ONLY_FOR_ARCHS</span>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">BUILD_PACKAGES</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
The actual list of packages that will be built, once architecture problems and pseudo-flavors have been taken into account. See <i class="link-sec"><a class="link-sec" href="#x464c41564f525320414e44204d554c54495f5041434b41474553">FLAVORS AND MULTI_PACKAGES</a></i>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">BROKEN</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Define only for broken ports, set to reason the port is broken. See also <span class="env">NO_IGNORE</span>, <span class="env">TRY_BROKEN</span>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">BROKEN-&lt;arch&gt;</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Define only for ports broken on a given architecture. Distinct from <span class="env">ONLY_FOR_ARCHS</span> and <span class="env">NOT_FOR_ARCHS</span>, which are used to mark ports for which support for some architectures does not exist at all, or is completely obsolete.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">BSD_INSTALL_{PROGRAM,SCRIPT,DATA,MAN}[_DIR]</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Macros passed to make and configure invocations. Set based on corresponding INSTALL_* variables.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">BUILD_DEPENDS</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
List of other ports the current port needs to build correctly. Each item has the form &#8216;[pkgspec:]pkgpath[:target]&#8217;. &#8216;target&#8217; defaults to &#8216;install&#8217;. The package installed must conform to the &#8216;pkgspec&#8217;, which is by default obtained from the dependent &#8216;pkgpath&#8217; (see <span class="env">PKGSPEC</span>). If no installation is involved, the infrastructure will still check that the directory would provide a package conforming to the &#8216;pkgspec&#8217;. &#8216;pkgpath&#8217; is set relative to ${PORTSDIR}, see <a class="link-man" href="../html7/pkgpath.html">pkgpath(7)</a> for details. Build dependencies are checked before the <b class="flag">extract</b> stage during <b class="flag">prepare</b>.<div class="spacer">
</div>
Build dependencies with a <b class="flag">patch</b>, <b class="flag">configure</b> or <b class="flag">build</b> target will be processed in a subdirectory of the working directory, specifically, in ${WRKDIR}/some/directory, with <i class="file">some/directory</i> the directory part of the &#8216;pkgpath&#8217;.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">BUILD_ONCE</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
User settings. Defaults to &#8216;No&#8217;. Set to &#8216;Yes&#8217; during bulk builds.<div class="spacer">
</div>
When <span class="env">BUILD_ONCE</span> is set to &#8216;Yes&#8217;, all <span class="env">PSEUDO_FLAVORS</span> matching &#8216;no_*&#8217; will be disabled, unless the special pseudo-flavor &#8216;bootstrap&#8217; is also set.<div class="spacer">
</div>
This is a bulk build optimisation, automatically set by <a class="link-man" href="../html1/dpb.html">dpb(1)</a>: to avoid rebuilding the same package several times, a full bulk build will strip most ports of pseudo-packages variations that remove subpackages.<div class="spacer">
</div>
For instance, an individual package may depend on <i class="file">databases/db/v4,no_java,no_tcl</i>, to avoid bringing a jdk in during a quick build. Nevertheless, during a full bulk build, <i class="file">databases/db/v4</i> will only be built once, as the pseudo-flavor will be automatically removed.<div class="spacer">
</div>
However, the extra &#8216;bootstrap&#8217; rule is needed to take build cycles into account. For instance, the <i class="file">x11/gnome/gvfs,-goa</i> subpackage depends on gnome-online-accounts, which in turn requires <i class="file">x11/gnome/gvfs,-main</i> to build (through its dependencies). So <i class="file">x11/gnome/gvfs</i> has <code class="lit">PSEUDO_FLAVORS = no_smb no_goa bootstrap</code> and the GNOME build first builds <i class="file">x11/gnome/gvfs,no_smb,no_goa,bootstrap,-main</i> which is later used to rebuild <i class="file">x11/gnome/gvfs</i>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">BUILD_PKGPATH</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Full <a class="link-man" href="../html7/pkgpath.html">pkgpath(7)</a> to the current port, taking flavors and pseudo-flavors into account. See also <span class="env">BASE_PKGPATH</span>, which doesn't include pseudo-flavors. Mostly useful to write dependencies for subpackages like this: <code class="lit">LIB_DEPENDS-foo=${BUILD_PKGPATH}</code> and avoid starting to build a package with some other flavor combination. See <a class="link-man" href="../html7/pkgpath.html">pkgpath(7)</a> on the subject of &#8216;pkgpath normalisation&#8217;. Read-only.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">BULK</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
User settings. If set to &#8216;Yes&#8217;, all successful package builds and installations will clean their working directories, after invoking any targets mentioned in BULK_TARGETS, and commands mentioned in BULK_DO. Can be set on a per-${PKGPATH} basis. For instance, setting BULK_misc/screen=No will override any BULK=Yes passed on the command line. If set to &#8216;Auto&#8217;, it will apply to dependencies, but not to the current port itself. See <span class="env">BULK_COOKIES_DIR</span>. Defaults to &#8216;Auto&#8217;.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">BULK_COOKIES_DIR</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
User settings. Used to store cookies for successful bulk-package builds, defaults to <i class="file">${PORTSDIR}/bulk/${MACHINE_ARCH}</i>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">BULK_DO</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Commands to run after each bulk package build before cleaning up the working directory. Empty defaults. Can be set on a per-${PKGPATH} basis, e.g., BULK_DO_${PKGPATH}=...</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">BULK_FLAGS</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Flags to pass to build each target in <span class="env">BULK_TARGETS</span>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">BULK_TARGETS</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Targets to run after each bulk package build before cleaning up the working directory. Empty defaults. Can be set on a per-${PKGPATH} basis, e.g., BULK_TARGETS_${PKGPATH}=...</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">BZIP2</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Name of the bzip2 binary.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">CATEGORIES</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
List of descriptive categories into which this port falls. Mandatory. One entry must match the current pkgpath: <i class="file">devel/gmake</i> must belong to the &#8216;devel&#8217; category. See <b class="flag">link-categories</b>, <b class="flag">unlink-categories</b>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">CCACHE_DIR</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Sets the cache directory used when <span class="env">USE_CCACHE</span> is set to yes. Defaults to ${WRKOBJDIR}/.ccache.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">CCACHE_ENV</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Sets additional environment variables when <span class="env">USE_CCACHE</span> is set to yes. For instance, to enable verbose logging, set CCACHE_ENV=&quot;CCACHE_LOGFILE=/tmp/ccache.log&quot;</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">CDIAGFLAGS</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Flags appended to <span class="env">CFLAGS</span> if <span class="env">WARNINGS</span> is set.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">CDROM_SITE</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Path to a local source that holds distribution files (usually a CD-ROM or other similar media), used to retrieve distribution files before going to the network. Defaults to empty, set to <i class="file">/cdrom/distfiles/${DIST_SUBDIR}</i> to check that path. Distribution files are still copied or linked (see <span class="env">FETCH_SYMLINK_DISTFILES</span>) into <span class="env">DISTDIR</span> if they are found under CDROM_SITE.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">CFLAGS</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Default flags passed to the compiler for building. Many ports ignore it. See also <span class="env">COPTS</span>, <span class="env">CDIAGFLAGS</span>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">CHECK_LIB_DEPENDS</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
User settings. If set to &#8216;Yes&#8217;, every package build will verify that shared libraries are correctly registered. This is essentially the same as running &#8216;<code class="lit">make lib-depends-check</code>&#8217; after each package build. Defaults to &#8216;No&#8217;, as this can be a big performance hit.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">CHECKSUMFILES</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
List of all files that need to be retrieved by <b class="flag">fetch</b>, with <span class="env">DIST_SUBDIR</span> prepended and with the master site selection extension removed. Read-only. See also <span class="env">MAKESUMFILES</span>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">CHECKSUM_FILE</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Location for this port's checksums, used by <b class="flag">addsum</b>, <b class="flag">checksum</b>, and <b class="flag">makesum</b>. Defaults to <i class="file">distinfo</i>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">CHECKSUM_PACKAGES</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
User settings. Choose whether or not to checksum packages while building. Deposits result in <i class="file">${PACKAGE_REPOSITORY}/${MACHINE_ARCH}/cksums/${FULLPKGNAME}.sha256</i>. Can be set to &#8216;Yes&#8217; to compute a checksum for all packages, &#8216;cdrom&#8217; to compute it only for <span class="env">PERMIT_PACKAGE_CDROM</span> packages or to &#8216;ftp&#8217; to compute it only for <span class="env">PERMIT_PACKAGE_FTP</span> packages. Defaults to &#8216;no&#8217;, which does not compute a checksum at all.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">CLEANDEPENDS</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
If set to &#8216;Yes&#8217;, the <b class="flag">clean</b> target will also clean dependencies. Can be overridden on a per-${PKGPATH} basis, by setting CLEANDEPENDS_${PKGPATH}.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">COMMENT</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Short, one line description of the port, used for the package, and in the INDEX.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">COMMENT-foo</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Same as COMMENT but used for sub package -foo in a multi-package setup.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">COMMENT-vanilla</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Same as COMMENT but used for a flavored package, if the non-flavored comment is inappropriate.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">COMMENT-foo-vanilla</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Same as COMMENT but used for a sub-, flavored package.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">COMES_WITH</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
The first release where the port was made part of the standard distribution. If the current <span class="unix">OpenBSD</span> version is &gt;= this version then a notice will be displayed instead of the port being built.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">CONFIG_SITE_LIST</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Used when <code class="lit">CONFIGURE_STYLE=gnu</code>, or with <code class="lit">MODULES += gnu</code>. List of <i class="file">config.site</i> fragments that will speed up gnu-configure, and prevent it from preferring various gnu programs, unless <span class="env">BUILD_DEPENDS</span> explicitly ask for them. Read-only, available for debugging purposes.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">CONFIGURE_ARGS</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Arguments to pass to configure script. Defaults are empty, except for GNU-style configure, where prefix and sysconfdir are set.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">CONFIGURE_ENV</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Basic environment passed to configure script (path and libtool setup). GNU-style configure adds a lot more variables.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">CONFIGURE_SCRIPT</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Set to name of script invoked by the <b class="flag">configure</b> target, if appropriate. Should be either an absolute path, or relative to ${WRKSRC}.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">CONFIGURE_STYLE</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Set to style of configuration that needs to happen.<div class="spacer">
</div>
If &#8216;perl&#8217;, assume <a class="link-man" href="../html1/perl.html">perl(1)</a> <a class="link-man" href="../html3p/ExtUtils::MakeMaker.html">ExtUtils::MakeMaker(3p)</a> style. Add &#8216;modbuild&#8217; to enable <a class="link-man" href="../html3p/Module::Build.html">Module::Build(3p)</a>, &#8216;modbuild tiny&#8217; to enable <a class="link-man" href="../html3p/Module::Build::Tiny.html">Module::Build::Tiny(3p)</a>, or &#8216;modinst&#8217; for <a class="link-man" href="../html3p/Module::Install.html">Module::Install(3p)</a> style.<div class="spacer">
</div>
If &#8216;gnu&#8217;, assume GNU configure style. Add &#8216;dest&#8217; if port does not handle DESTDIR correctly, and needs to be configured to add DESTDIR to prefixes (see also <span class="env">DESTDIRNAME</span>). Add &#8216;old&#8217; if port is an older autoconf port that does not recognize --sysconfdir. Add &#8216;autoconf&#8217; if autoconf needs to be rerun first, but set &#8216;no-autoheader&#8217; to prevent autoheader from running. Add &#8216;automake&#8217; if automake may need to be rerun. Otherwise, automake will be explicitly disabled. Note that automake is never run automatically. In order to use it, <span class="env">CONFIGURE_STYLE</span> should include &#8216;automake&#8217; and there should be a <b class="flag">{pre,do}-configure</b> target running automake.<div class="spacer">
</div>
If &#8216;imake&#8217;, assume port configures using X11 ports Imakefile framework. Add &#8216;noman&#8217; if port has no man pages the Imakefile should try installing.<div class="spacer">
</div>
If &#8216;simple&#8217;, there is a configure script, but it does not fit the normal GNU configure conventions.<div class="spacer">
</div>
Extensions may be defined by specific MODULES. See <a class="link-man" href="../html5/port-modules.html">port-modules(5)</a> for details.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">COPTS</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
User settings. Supplementary options appended to ${CFLAGS} for building. Since most ports ignore the COPTS convention, they are actually told to use ${CFLAGS} ${COPTS} as CFLAGS.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">CXXDIAGFLAGS</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Flags appended to <span class="env">CXXFLAGS</span> if <span class="env">WARNINGS</span> is set.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">CXXFLAGS</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Default flags passed to the C++ compiler for building. Many ports ignore it.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">CXXOPTS</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
User settings. Supplementary options appended to ${CXXFLAGS} for building.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">DESTDIR</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
See <span class="env">DESTDIRNAME</span>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">DESTDIRNAME</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Name of variable to set to ${WRKINST} while faking. Usually DESTDIR. To be used in the rare cases where a port heeds DESTDIR in a few directories and needs to be configured with &#8216;gnu dest&#8217;, so that those few directories do not get in the way.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">DISTDIR</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
User settings. Directory where all ports distribution files and patchfiles are stashed. Defaults to <i class="file">${PORTSDIR}/distfiles</i>. Override if distribution files are stored elsewhere. Always use <span class="env">FULLDISTDIR</span> to refer to ports' distribution files location, as it takes an eventual <span class="env">DIST_SUBDIR</span> into account.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">DISTFILES</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
The main port's distribution files (the actual software source, except for binary-only ports). Will be retrieved from the MASTER_SITES (see <b class="flag">fetch</b>), checksummed and extracted (see <b class="flag">checksum</b>, <b class="flag">extract</b>). <span class="env">DISTFILES</span> normally holds a list of files, possibly with &#8216;:0&#8217; to &#8216;:9&#8217; appended to select a different <span class="env">MASTER_SITES</span>.<div class="spacer">
</div>
Each entry may optionally be of the form &#8216;<i class="arg">filename</i>{<i class="arg">url</i>}<i class="arg">sufx</i>&#8217; to deal with sites that only offer archives as weird urls, doing the transfer of <i class="arg">url</i><i class="arg">sufx</i> into result file <i class="arg">filename</i><i class="arg">sufx</i>. For instance, if<div class="spacer">
</div>
<pre style="margin-left: 0.00ex;" class="lit display">
DISTFILES = minetest-{minetest/archive/}${V}${EXTRACT_SUFX}</pre>
<div class="spacer">
</div>
then <b class="flag">fetch</b> will retrieve from url &#8216;minetest/archive/${V}${EXTRACT_SUFX}&#8217; into &#8216;minetest-${V}${EXTRACT_SUFX}&#8217;.<div class="spacer">
</div>
If ${DISTFILES} varies depending on FLAVORS or architecture, use <span class="env">SUPDISTFILES</span> to ensure distfiles mirroring and <b class="flag">makesum</b> proper operation.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">DISTNAME</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Name used to identify the port. See <span class="env">DISTFILES</span> and <span class="env">PKGNAME</span>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">DISTORIG</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Suffix used by <b class="flag">distpatch</b> to rename original files. Defaults to <i class="file">.bak.orig</i>. Distinct from <i class="file">.orig</i> to avoid confusing <b class="flag">update-patches</b>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">DIST_SUBDIR</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Optional subdirectory of ${DISTDIR} where the current port's distribution files and patchfiles will be located. See target <b class="flag">fetch</b>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">DPB</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Set by the distributed ports builder to only get the information it needs from <b class="flag">dump-vars</b>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">ECHO_MSG</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
User settings. Used to display &#8216;===&gt; Configuring for foo&#8217; and similar informative messages. Override to turn off, for instance.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">ECHO_REORDER</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
User settings. Set it to &#8216;echo&#8217; to see <span class="env">REORDER_DEPENDENCIES</span> actions. Silent by default.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">EPOCH</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Epoch number of the current package. Defaults to empty (no need for numbering changes), then numbering starts at 0. Gets automatically incorporated into <span class="env">FULLPKGNAME</span> as &#8216;v${EPOCH}&#8217; to form a full package-name conforming to <a class="link-man" href="../html7/packages-specs.html">packages-specs(7)</a>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">ERRORS</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
List of errors found while parsing the port's Makefile. Display the errors before making any target, and if any error starts with &#8220;Fatal:&#8221;, do not make anything. For instance:<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
.if !defined(COMMENT) 
ERRORS+=&quot;Fatal: Missing comment&quot; 
.endif</pre>
Porter can add to <span class="env">ERRORS</span>, for instance to flag erroneous combinations of <span class="env">FLAVORS</span> (but see <span class="env">ONLY_FOR_ARCHS</span> <span class="env">NOT_FOR_ARCHS</span> and <span class="env">BROKEN</span> for other common issues).</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">EXTRACT_CASES</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
In the normal extraction stage (when <span class="env">EXTRACT_ONLY</span> is not empty), this is the contents of a case statement, used to extract files. Fragments are automatically appended to extract tar, xz and zip archives, so that the default case is more or less equivalent to the following shell fragment:<div class="spacer">
</div>
<pre style="margin-left: 0.00ex;" class="lit display">
set -e 
cd ${WRKDIR} 
for archive in ${EXTRACT_ONLY} 
do 
    case $$archive in 
	*.tar.xz|*.tar.lzma) 
	  xzcat ${FULLDISTDIR}/$$archive| tar xf -;; 
	*.tar.lz) 
	  lunzip -c ${FULLDISTDIR}/$$archive| tar xf -;; 
	*.zip) 
	  unzip -q ${FULLDISTDIR}/$$archive -d ${WRKDIR};; 
	*.tar.bz2|*.tbz2|*.tbz) 
	  bzip2 -dc ${FULLDISTDIR}/$$archive| tar xf -;; 
	*.shar.gz|*.shar.Z|*.sh.Z|*.sh.gz) 
	  gzcat ${FULLDISTDIR}/$$archive | /bin/sh;; 
	*.shar|*.sh) 
	  /bin/sh ${FULLDISTDIR}/$$archive;; 
	*.tar) 
	  tar xf ${FULLDISTDIR}/$$archive;; 
	*) 
	  gzip -dc ${FULLDISTDIR}/$$archive | tar xf -;; 
    esac 
done</pre>
</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">EXTRACT_ONLY</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Set to the list of distfiles to actually extract if some distfiles should not be extracted during the <b class="flag">do-extract</b> stage. Defaults to all distfiles, can even be set to empty.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">EXTRACT_SUFX</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Used to set DISTFILES default value to ${DISTNAME}${EXTRACT_SUFX}. Default value is .tar.gz.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">FAKE_FLAGS</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Extra flags passed to ${MAKE_PROGRAM} during the fake invocation. Empty by default. Also see <span class="env">ALL_FAKE_FLAGS</span>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">FAKE_SETUP</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
List of environment values normally set during fake invocations. Exposed so that modules may provide their own <b class="flag">do-install</b>. Read-only, see <i class="link-sec"><a class="link-sec" href="#x5448452046414b45204652414d45574f524b">THE FAKE FRAMEWORK</a></i> section for details.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">FAKE_TARGET</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Target built by ${MAKE_PROGRAM} on fake invocation. Defaults to ${INSTALL_TARGET}.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">FAKEOBJDIR</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
User settings. If non empty, used as a base for the fake area. The real fake directory ${WRKINST} is created there. Can be set on a per-${PKGPATH} basis. For instance, setting FAKEOBJDIR_www/mozilla=/tmp/obj will affect only the mozilla port.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">FETCH_CMD</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
User settings. Command used to fetch distribution files for this port. Defaults to <a class="link-man" href="../html1/ftp.html">ftp(1)</a>. Can be used to go through excessively paranoid firewalls. Note that <span class="env">FETCH_CMD</span> should support <b class="flag">-C</b> and <b class="flag">-o</b> <i class="arg">dest</i>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">FETCH_MANUALLY</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Some ports' distfiles cannot be fetched automatically for licensing reasons. In this case, set <span class="env">FETCH_MANUALLY</span> to a list of strings that will be displayed, one per line, e.g.,<div class="spacer">
</div>
<pre style="margin-left: 0.00ex;" class="lit display">
FETCH_MANUALLY= &quot;You must fetch foo-1.0.tgz&quot; 
FETCH_MANUALLY+=&quot;from http://www.fubar.com/ manually,&quot; 
FETCH_MANUALLY+=&quot;after reading and agreeing to the license.&quot;</pre>
Behaves like <span class="env">IS_INTERACTIVE</span> if some distribution files are missing.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">FETCH_PACKAGES</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
User settings. If set to &#8216;Yes&#8217;, the <b class="flag">package</b> target will download packages missing from the repository from locations in ${PKG_PATH} and place them into <i class="file">${PACKAGE_REPOSITORY}/${MACHINE_ARCH}/cache/</i>. It will only build them if no suitable packages are found.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">FETCH_SYMLINK_DISTFILES</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
User settings. Set to &#8216;Yes&#8217; to link distribution files off <span class="env">CDROM_SITE</span> instead of copying them.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">FILESDIR</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Location of other files related to the current port. Default: files.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">FLAVOR</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
The port's current options. Set by the user, and tested by the port to activate wanted functionalities.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">FLAVORS</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
List of all flavors keywords a port may match. Used to sort FLAVOR into a canonical order to build the package name, or to select the packing-list, and as a quick validity check. See also <span class="env">PSEUDO_FLAVORS</span>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">FLAVOR_EXT</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Canonical list of flavors being set for the current build, dash-separated. See <span class="env">FULLPKGNAME</span>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">FORCE_UPDATE</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
User settings. If set to &#8216;Yes&#8217;, the <b class="flag">update</b> target will always update an installed package, as soon as its signature differs, and all dependencies that install packages will also force an update. If set to &#8216;hard&#8217;, the <b class="flag">update</b> target will also update installed packages even when the signature did not change.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">FULLDISTDIR</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Complete path to directory where ${DISTFILES} and ${PATCHFILES} will be located, to be used in hand-crafted extraction targets. Read-only.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">FULLPKGNAME</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Full name of the created package, taking flavors into account. Defaults to ${PKGNAME}${FLAVOR_EXT}. See also <span class="env">EPOCH</span> and <span class="env">REVISION</span>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">FULLPKGPATH</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Path to the current port's directory, relative to ${PORTSDIR}, including flavors and subpackages. See <a class="link-man" href="../html7/pkgpath.html">pkgpath(7)</a>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">GCC3_ARCHS</span>, <span class="env">GCC4_ARCHS</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
List of architectures using gcc 3.3.6, or gcc 4.2.1. Read-only. Use with <span class="env">NOT_FOR_ARCHS</span> or <span class="env">ONLY_FOR_ARCHS</span> to limit ports to architectures where they compile.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">GH_*</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Support for GitHub-hosted projects. Leave empty for non hosted projects. Yields a suitable default for <span class="env">MASTER_SITES_GITHUB</span> and <span class="env">DISTNAME</span>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">GH_ACCOUNT</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Account name of the GitHub user hosting the project.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">GH_COMMIT</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
SHA1 commit id to fetch. It is an error to specify ${GH_COMMIT} when ${GH_TAGNAME} is specified.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">GH_PROJECT</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Name of the project on GitHub.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">GH_TAGNAME</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Name of the tag to download. Setting ${GH_TAGNAME} to master is invalid and will throw an error. ${WRKDIST} is auto-generated based on the ${GH_TAGNAME} if specified, otherwise ${GH_COMMIT} will be used to generate ${WRKDIST}.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">GMAKE</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Location of the GNU make binary, if needed. Defaults to gmake.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">HOMEPAGE</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
URL to the homepage of the software, if applicable.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">IGNORE</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
For ignored ports, set to the reasons for which the port is ignored. If non-empty, most common targets that do something (e.g., <b class="flag">fetch</b>, <b class="flag">build</b>, <b class="flag">install</b> <code class="none">...</code>) will be ignored. See also <span class="env">BATCH</span>, <span class="env">BROKEN</span>, <span class="env">FETCH_MANUALLY</span>, <span class="env">IGNORE_IS_FATAL</span>, <span class="env">IGNORE_SILENT</span>, <span class="env">INTERACTIVE</span>, <span class="env">IS_INTERACTIVE</span>, <span class="env">NOT_FOR_ARCHS</span>, <span class="env">NO_IGNORE</span>, <span class="env">ONLY_FOR_ARCHS</span>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">IGNORE_IS_FATAL</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
User settings. If set to &#8216;Yes&#8217;, ignored ports will become fatal errors.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">IGNORE_SILENT</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
User settings. If set to &#8216;Yes&#8217;, do not print anything when ignoring a port.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">INSTALL_{PROGRAM,SCRIPT,DATA,MAN}[_DIR]</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Macros to use to install a program, a script, data, or a man page (or the corresponding directory), respectively.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">INSTALL_TARGET</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Target invoked to install the software, during fake installation. Default is &#8216;install&#8217;.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">INTERACTIVE</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
User settings. Set to &#8216;Yes&#8217; to skip all non-interactive ports. Used in conjunction with <span class="env">BATCH</span> to simplify bulk-package builds.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">IS_INTERACTIVE</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Set to &#8216;Yes&#8217; if port needs human interaction to build. Porters should strive to minimize <span class="env">IS_INTERACTIVE</span> ports, by using <span class="env">FLAVORS</span> for multiple choice ports, and by postponing human intervention to package installation time.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">LE_ARCHS</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Set to the list of little-endian architectures. Read-only. Use with <span class="env">NOT_FOR_ARCHS</span> and <span class="env">ONLY_FOR_ARCHS</span>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">LIB_DEPENDS</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Libraries this port depends upon. Each item has the form &#8216;[pkgspec:]pkgpath&#8217;. Similar to <span class="env">BUILD_DEPENDS</span> and <span class="env">RUN_DEPENDS</span>, but with specific rules: <span class="env">LIB_DEPENDS</span> always turn into <span class="env">BUILD_DEPENDS</span>.<div class="spacer">
</div>
On architectures that use dynamic libraries, <span class="env">LIB_DEPENDS</span> is also used as a run-time dependency, and recorded in the package as such, if any of the libraries mentioned in <span class="env">WANTLIB</span> is a shared library that originates within the dependent port.<div class="spacer">
</div>
See <a class="link-man" href="../html7/library-specs.html">library-specs(7)</a> for more details.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">lib_depends_args</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Controls the behavior of <a class="link-man" href="../html1/pkg_create.html">pkg_create(1)</a> related targets, see <b class="flag">print-package-args</b> for details.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">LIBTOOL</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Location of the libtool binary. Default: <i class="file">/usr/bin/libtool</i>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">LIBTOOL_FLAGS</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Arguments to pass to libtool. If USE_LIBTOOL is set, the environment variable LIBTOOL is set to ${LIBTOOL} ${LIBTOOL_FLAGS}.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">LOCALBASE</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
where other ports have already been installed. Default: <i class="file">/usr/local</i>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">LOCALSTATEDIR</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Location for this port's state directory, should always be derived from <span class="env">BASELOCALSTATEDIR</span>, which defaults to <i class="file">/var</i>. Passed to gnu configure scripts.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">LOCKDIR</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
User settings. Defaults to <i class="file">${WRKOBJDIR}/locks</i>. If set, points to a local directory common for all instances of concurrent ports builds.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">LOCK_CMD</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Expands to a command that will acquire a lock, namely <a class="link-man" href="../html1/dolock.html">dolock(1)</a>. See also <a class="link-man" href="../html7/ports.html">ports(7)</a>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">LOCK_VERBOSE</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
User settings. Defaults to &#8216;No&#8217;. Set to &#8216;Yes&#8217; to show every acquire/release lock operation.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">LP64_ARCHS</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Set to the list of 64-bit architectures. Read-only. Use with <span class="env">NOT_FOR_ARCHS</span>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">MAINTAINER</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Email address with full name of the port's maintainer. Defaults to <a class="link-mail" href="mailto:ports@openbsd.org">ports@openbsd.org</a>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">MAKE_ENV</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Environment variables passed to make invocations and tests. Sets at least PATH, PREFIX, LOCALBASE, X11BASE, CFLAGS, TRUEPREFIX, DESTDIR, and the BSD_INSTALL_* macros.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">MAKE_FLAGS</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Flags used for all make invocations, except for the <b class="flag">fake</b> stage, which adds <span class="env">FAKE_FLAGS</span> (see <span class="env">ALL_FAKE_FLAGS</span>) and for the <b class="flag">test</b> stage, which adds <span class="env">TEST_FLAGS</span> (see <span class="env">ALL_TEST_FLAGS</span>).</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">MAKE_FILE</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Name of the Makefile used for ports building. Defaults to Makefile. Used after changing directory to ${WRKBUILD}.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">MAKE_PROGRAM</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
The make program that is used for building the port. Set to ${MAKE} or ${GMAKE} depending on USE_GMAKE. Read-only.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">MAKEFILE_LIST</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Introspection variable, see <a class="link-man" href="../html1/make.html">make(1)</a>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">MAKESUMFILES</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
List of all files that need to be retrieved by <b class="flag">fetch-all</b>, with <span class="env">DIST_SUBDIR</span> prepended and with master site selection extension removed. Read-only. See also <span class="env">CHECKSUMFILES</span>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">MASTER_SITE_BACKUP</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
User settings. List of sites to try after normal master sites, or before if <span class="env">MASTER_SITE_OVERRIDE</span> is set to &#8216;Yes&#8217;. Normally includes ${MASTER_SITE_OPENBSD} and ${MASTER_SITE_FREEBSD}.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">MASTER_SITE_*</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Lists of standard sites to retrieve files from, refer to <i class="file">${PORTSDIR}/infrastructure/templates/network.conf.template</i>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">MASTER_SITE_OVERRIDE</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
User settings. Set to &#8216;Yes&#8217; to retrieve distfiles and patchfiles preferentially from the ${MASTER_SITE_BACKUP} sites. Defaults to &#8216;No&#8217;.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">MASTER_SITES</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
List of primary locations from which distribution files and patchfiles are retrieved. See the <b class="flag">fetch</b> target for details. Defaults to ${MASTER_SITES_GITHUB} for GitHub-hosted projects, see <span class="env">GH_*</span>. See <a class="link-man" href="../html7/ports.html">ports(7)</a> for user configuration.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">MASTER_SITES0</span>, <span class="env">...</span>, <span class="env">MASTER_SITES9</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Supplementary locations from which distribution files and patchfiles are retrieved.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">MESSAGE</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
File recorded in the package and displayed during installation. Defaults to ${PKGDIR}/MESSAGE if this file exists. Leave empty if no message is needed.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">MISSING_FILES</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
When <span class="env">FETCH_MANUALLY</span> is set, <span class="env">MISSING_FILES</span> will contain the list of missing distfiles or patchfiles that need to be fetched manually. Read-only.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">MTREE_FILE</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
<a class="link-man" href="../html8/mtree.html">mtree(8)</a> specification to check when creating a PLIST with the <b class="flag">update-plist</b> target. <span class="env">MTREE_FILE</span> can hold a list of file names, to which <i class="file">${PORTSDIR}/infrastructure/db/fake.mtree</i> is always appended. These specifications are rooted at <i class="file">${WRKINST}</i>, and are subject to <span class="env">SUBST_VARS</span> substitution, to ease <i class="file">${PREFIX}</i> independence. This feature is primarily intended for large, interconnected ports, such as the kde suite, where a base package sets up a large, extra directory hierarchy that would make the manual checking of packing lists tedious.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">MODGNU_CONFIG_GUESS_DIRS</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
If a port uses config.guess outside WRKSRC, the directories containing the other copies must be set here.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">MODPERL_ADJ_FILES</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
If any files have a Perl shebang line, which needs to be replaced with &#8220;#!/usr/bin/perl&#8221;, list them in <span class="env">MODPERL_ADJ_FILES</span>. File paths here should be relative to <span class="env">WRKSRC</span>. These files are patched automatically at the end of <b class="flag">pre-configure</b>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">MODPERL_BIN_ADJ</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Shell fragment to patch the Perl interpreter path in executable scripts. Used by <span class="env">MODPERL_ADJ_FILES</span>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">MODPERL_BUILD_TARGET</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Normal content of <b class="flag">do-build</b> when <span class="env">CONFIGURE_STYLE</span> uses perl. Provided as a separate variable if a port wants to override <b class="flag">do-build</b> for its own reasons.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">MODPERL_INSTALL_TARGET</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Likewise for <b class="flag">do-install</b>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">MODPERL_TEST_TARGET</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Likewise for <b class="flag">do-test</b>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">MODULES</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
External modules mechanism, documented separately. Modules such as &#8216;imake&#8217; and &#8216;gnu&#8217; are normally included automatically with the right <span class="env">CONFIGURE_STYLE</span>. Note that it is possible to <code class="lit">CONFIGURE_STYLE = simple</code>, <code class="lit">MODULES += gnu</code> to just get the effects of <span class="env">CONFIG_SITE</span> and <span class="env">MODGNU_CONFIG_GUESS_DIRS</span> along with the default <span class="env">TEST_TARGET</span>, in case the normal GNU configure script was wrapped in a separate script that takes different arguments. See <a class="link-man" href="../html5/port-modules.html">port-modules(5)</a>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">MULTI_PACKAGES</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Set to a list of subpackage extensions for ports that create multiple packages. See <i class="link-sec"><a class="link-sec" href="#x464c41564f525320414e44204d554c54495f5041434b41474553">FLAVORS AND MULTI_PACKAGES</a></i> below. Especially read the part about <span class="env">ONLY_FOR_ARCHS</span> when some of the packages only exist for some architectures.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
NO_ARCH</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Location for arch-independent packages. Defaults to &#8216;no-arch&#8217;. Normally, packages are generated under ${PACKAGE_REPOSITORY}/${MACHINE_ARCH}, except for packages where PKG_ARCH=*, which end up under ${PACKAGE_REPOSITORY}/${NO_ARCH}.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">NOT_FOR_ARCHS</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
List of architectures on which this port does not build. See also <span class="env">ONLY_FOR_ARCHS</span>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">NO_BUILD</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Set to &#8216;Yes&#8217; if port does not need any build stage.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">NO_CCACHE</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Set to &#8216;Yes&#8217; to prevent ccache from being used when building a certain port, even when <span class="env">USE_CCACHE</span> is set.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">NO_CHECKSUM</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
User settings. Set to &#8216;Yes&#8217; to avoid <b class="flag">checksum</b>, <b class="flag">makesum</b>, and <b class="flag">addsum</b> actions entirely. Beware of the full implications of this mechanism, namely that it disables the basic authentication mechanisms of the ports tree entirely.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">NO_DEPENDS</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
User settings. Don't verify build of dependencies. Do not use in any ports Makefile. This is only meant as a user convenience when, e.g., you just want to browse through a given port's source and do not wish to trigger the build of dependencies.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">NO_IGNORE</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
User settings. If set to &#8216;Yes&#8217;, avoid ignoring a port for the usual reasons. Use, for instance, for fetching all distribution files, or for fixing a broken port. See also <span class="env">IGNORE</span> and <span class="env">TRY_BROKEN</span>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">NO_TEST</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Port does not have any regression tests. Only set to &#8216;Yes&#8217; for ports with no regression test. It should be left alone for ports with empty regression tests, and for ports with failing tests. That way, if a subsequent update of a port acquires actual regression tests, they will be picked up automatically.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">OLD_WRKDIR_NAME</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Base name for <span class="env">WRKDIR</span> in the old scheme without <span class="env">WRKOBJDIR</span>. Mostly used as a value for <span class="env">WRKDIR_LINKNAME</span>, e.g.,<div class="spacer">
</div>
<pre style="margin-left: 0.00ex;" class="lit display">
WRKDIR_LINKNAME = ${OLD_WRKDIR_NAME}</pre>
<div class="spacer">
</div>
in <i class="file">/etc/mk.conf</i>. Read-only.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">ONLY_FOR_ARCHS</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
List of architectures on which this port builds. Can hold both processor-specific information (e.g., powerpc), and more specific model information (e.g., macppc). This is subpackage dependent. Read the corresponding part of <i class="link-sec"><a class="link-sec" href="#x464c41564f525320414e44204d554c54495f5041434b41474553">FLAVORS AND MULTI_PACKAGES</a></i> if some subpackages should only be built on some architectures.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">OSREV</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Revision number of <span class="unix">OpenBSD</span>. Read-only.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">PACKAGE_REPOSITORY</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
User settings. Location for built packages. Defaults to <i class="file">${PORTSDIR}/packages</i>. See <b class="flag">package</b> for details.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">PATCH</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Command to use to apply all patches. Defaults to <i class="file">/usr/bin/patch</i>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">PATCHORIG</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Suffix used by <b class="flag">patch</b> to rename original files, and <b class="flag">update-patches</b> to re-generate <i class="file">${PATCHDIR}/${PATCH_LIST}</i> by looking for files using this suffix. Defaults to <i class="file">.orig</i>. For a port that already contains <i class="file">.orig</i> files in the ${DISTFILES}, set this to something else, such as <i class="file">.pat.orig</i>. See also <b class="flag">distpatch</b>, <span class="env">DISTORIG</span>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">PATCH_CASES</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
In the normal <b class="flag">distpatch</b> stage (when <span class="env">PATCHFILES</span> is not empty), this is the contents of a case statement, used to apply distribution patches. Fragments are automatically appended to handle gzip'ed, bzip'ed and lzip'ed patches, so that the default case is more or less equivalent to the following shell fragment:<div class="spacer">
</div>
<pre style="margin-left: 0.00ex;" class="lit display">
set -e 
cd ${FULLDISTDIR} 
for patchfile in ${_LIST_PATCHFILES} 
do 
    case $$patchfile in 
	*.bz2) 
	  bzip2 -dc $$patchfile | ${PATCH} ${PATCH_DIST_ARGS};; 
	*.lz) 
	  lunzip -c $$patchfile | ${PATCH} ${PATCH_DIST_ARGS};; 
	*.Z|*.gz) 
	  gzcat $$patchfile | ${PATCH} ${PATCH_DIST_ARGS};; 
	*) 
	  ${PATCH} ${PATCH_DIST_ARGS} &lt;$$patchfile;; 
    esac 
done</pre>
</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">PATCHDIR</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Location for patches applied by the <b class="flag">patch</b> target. Default: <i class="file">patches</i>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">PATCHFILES</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Files to fetch from the master sites like <span class="env">DISTFILES</span>, but serving a different purpose, as they hold distribution patches that will be applied at the <b class="flag">patch</b> stage. See also <span class="env">SUPDISTFILES</span>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">PATCH_ARGS</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Full list of options used while applying port's patches.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">PATCH_CHECK_ONLY</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Set to &#8216;Yes&#8217; by the <b class="flag">checkpatch</b> target. Don't touch unless the default <b class="flag">checkpatch</b> target needs to be redefined. Ideally, user-defined patch subtargets ought to test checkpatch. In practice, they don't.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">PATCH_DEBUG</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
If set to &#8216;Yes&#8217;, the <b class="flag">patch</b> stage will output extra debug information.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">PATCH_DIST_ARGS</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Full list of options used while applying distribution patches.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">PATCH_DIST_STRIP</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Patch option used to strip directory levels while applying distribution patches. Defaults to -p0 .</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">PATCH_LIST</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Wildcard pattern of patches to select under ${PATCHDIR}. Defaults to patch-*. Note that filenames ending in .orig, or ~ are never applied. Note that <span class="env">PATCH_LIST</span> can hold absolute pathnames, for instance to share patches among similar ports:<div class="spacer">
</div>
<pre style="margin-left: 0.00ex;" class="lit display">
PATCH_LIST=${PORTSDIR}/x11/kde/libs2/patches/p-* patch-*</pre>
</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">PATCH_STRIP</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Patch option used to strip directory levels while applying port's patches. Defaults to -p0 .</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">PERMIT_DISTFILES_FTP</span>, <span class="env">PERMIT_PACKAGE_CDROM</span>, <span class="env">PERMIT_PACKAGE_FTP</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Set to &#8216;Yes&#8217; if package or distribution files can be allowed on FTP sites or CD-ROM without legal issues. Set to reason not to otherwise. PERMIT_* lines in the Makefile should be preceded with a comment explaining details about licensing and patents issues the port may have. Porters must be very thorough in their checks. In case of doubt, ask.<div class="spacer">
</div>
If <span class="env">PERMIT_PACKAGE_CDROM</span> is set to &#8216;Yes&#8217;, <span class="env">PERMIT_PACKAGE_FTP</span> and <span class="env">PERMIT_DISTFILES_FTP</span> will default to &#8216;Yes&#8217;.<div class="spacer">
</div>
If <span class="env">PERMIT_PACKAGE_FTP</span> is set to &#8216;Yes&#8217;, <span class="env">PERMIT_DISTFILES_FTP</span> will default to &#8216;Yes&#8217;.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">PKG_ADD</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
User settings. Path to <a class="link-man" href="../html1/pkg_add.html">pkg_add(1)</a> command, with possible options.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">PKG_ARCH</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Comma-separated list of architectures on which this package may install. Defaults to ${MACHINE_ARCH},${ARCH}. Use * for arch-independent packages.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">PKG_ARGS</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Special arguments to pass to <a class="link-man" href="../html1/pkg_create.html">pkg_create(1)</a>, in addition to the default ones. For mips64 and pic libraries, see <i class="link-sec"><a class="link-sec" href="#x5448452047454e45524154494f4e204f46205041434b41474520494e464f524d4154494f4e">THE GENERATION OF PACKAGE INFORMATION</a></i>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">PKG_CREATE</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
User settings. Path to <a class="link-man" href="../html1/pkg_create.html">pkg_create(1)</a> command, with possible options. Signing options should be set separately in <span class="env">SIGNING_PARAMETERS</span>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">PKG_CREATE_NO_CHECKS</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Porters switch. Set to &#8216;Yes&#8217; to avoid checking the ports tree when solving <span class="env">WANTLIB</span> (see <b class="flag">wantlib-args</b>). May result in bogus packages that mix <b class="flag">@depends</b> lines obtained from the ports tree with <b class="flag">@wantlib</b> lines that come from the installed system. Set to &#8216;Warn&#8217; to have the differences printed as a warning instead of an error (the default).</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">PKG_DBDIR</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
User settings. Path to package installation records. Defaults to <i class="file">/var/db/pkg</i>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">PKG_DELETE</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
User settings. Path to <a class="link-man" href="../html1/pkg_delete.html">pkg_delete(1)</a> command, with possible options.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">PKG_INFO</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
User settings. Path to <a class="link-man" href="../html1/pkg_info.html">pkg_info(1)</a> command, with possible options.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">PKG_TMPDIR</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
See <a class="link-man" href="../html1/pkg_add.html">pkg_add(1)</a>. Normally points to <i class="file">/var/tmp</i>, as per default.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">PORTHOME</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Setting of env variable <span class="env">HOME</span> for most shell invocations. Default will trip ports that try to write into $HOME while building.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">PORTPATH</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Path used by most shell invocations. Don't override unless really needed.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">PORTSDIR</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Root of the ports tree (default: <i class="file">/usr/ports</i>).</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">PORTSDIR_PATH</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Path used by dependencies and <i class="file">bsd.port.subdir.mk</i> to look up package specifications. Defaults to <i class="file">${PORTSDIR}:${PORTSDIR}/mystuff</i>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">PKGDIR</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Location for packaging information (packing list, port description, messages). Default: pkg.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">PKGFILE</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Full path to the created package for the given subpackage. Read-only.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">PKGFILES</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Full path to all created packages. Read-only.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">PKGNAME</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Name of the created package. Default is ${DISTNAME}. This does not take flavors into account. See <span class="env">FULLPKGNAME</span> for that. Specific revisions and epoch changes should be handled by <span class="env">REVISION</span> and <span class="env">EPOCH</span> instead.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">PKGNAMES</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Read-only. List of all package names generated by the port, with <span class="env">FLAVORS</span> and <span class="env">BUILD_PACKAGES</span> taken into account. Mostly used as &#8216;<code class="lit">make show=PKGNAMES</code>&#8217; to verify that bumped package names are correct.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">PKGNAME-foo</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Package name for sub-package foo, if the default value of ${PKGNAME}${SUBPACKAGE} is not appropriate.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">PKGPATH</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Path to the current port's directory, relative to ${PORTSDIR}. Read-only.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">PKGPATHS</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Read-only. List of all package paths generated by the port, with <span class="env">FLAVORS</span> and <span class="env">MULTI_PACKAGES</span> taken into account. Order matches <span class="env">PKGNAMES</span> exactly.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">PKGSPEC</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Default package spec for using this port as a dependency. Defaults to &#8216;stem-*&#8217;, derived from the <span class="env">FULLPKGNAME</span>. Do not override without very good reasons, namely software that coexist as different incompatible versions with the same stem, e.g., already a mess.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">PLIST_DB</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Deprecated, see <span class="env">PLIST_REPOSITORY</span>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">PLIST_REPOSITORY</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
User settings. Base directory used to save generated packing-lists, as persistent information. Packing-lists are processed by a script, <a class="link-man" href="../html1/register-plist.html">register-plist(1)</a>, which complains when packing-lists change without a <span class="env">REVISION</span> bump. It also knows enough about package version numbers when something in the package or its dependencies goes backward, thus catching <span class="env">EPOCH</span> issues. This directory is never cleaned during normal operation. &#8216;<code class="lit">make clean=plist</code>&#8217; should only ever be used during debugging by port maintainers. Defaults to <i class="file">${PORTSDIR}/plist</i> (plists actually get saved into <i class="file">${PLIST_REPOSITORY}/${MACHINE_ARCH}</i>). If set to empty, will not register anything: very much unsafe.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">PORTS_BUILD_XENOCARA_TOO</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
EXPERIMENTAL. Set to &#8216;Yes&#8217; to build xenocara through ports. This is highly experimental and not recommended.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">PORTROACH</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Controls the behavior of <i class="file">misc/portroach</i> as documented in detail at http://jasperla.github.io/portroach/docs/portroach-portconfig.txt .</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">PREFERRED_CIPHERS</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
List of cryptographic ciphers to use, in order of preference. Default is &#8216;sha256&#8217;. The first cipher that matches in ${CHECKSUM_FILE} is verified.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">PREFIX</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Base directory for the current port installation. Usually ${LOCALBASE}, though some ports may elect a location under <i class="file">${VARBASE}</i>, and some multi-package ports may install under several locations. Additionally, firmware files generally install under <i class="file">${BASESYSCONFDIR}</i>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">PREPARE_CHECK_ONLY</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Build settings. Prevent the <b class="flag">prepare</b> stage from installing anything, let it just check dependencies, and handle [:target] dependencies. Mostly used by <a class="link-man" href="../html1/dpb.html">dpb(1)</a>, which already installs everything before running <b class="flag">prepare</b>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">PROGRESS_METER</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
User-settings. Defaults to &#8216;Yes&#8217;. Forces commands like <a class="link-man" href="../html1/ftp.html">ftp(1)</a> and <a class="link-man" href="../html1/pkg_create.html">pkg_create(1)</a> to use their progress-meter even in the absence of a terminal.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">PROPERTIES</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
List of properties specific to a given machine architecture. Most often obtained through <a class="link-man" href="../html5/bsd.port.arch.mk.html">bsd.port.arch.mk(5)</a>. These can be checked like this<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
.include &lt;bsd.port.arch.mk&gt; 
.if ${PROPERTIES:Mapm} 
# then add build options specific to apm arches 
... 
.if !${PROPERTIES:Mlp64} 
# build options specific to lp32 arches 
...</pre>
For <span class="env">MULTI_PACKAGES</span> setup, use of <span class="env">ONLY_FOR_ARCHS-sub</span> and <span class="env">BUILD_PACKAGES</span> is generally preferred (and simpler). Possible properties include<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
apm</dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
architecture possesses suspend (apm) support.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
be</dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
architecture is big-endian.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
gccN</dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
gccN architecture.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
le</dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
architecture is little-endian.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
lp64</dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
lp64 architecture.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
llvm</dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
there is <i class="file">lang/llvm</i> support on this architecture.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
mono</dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
there is <i class="file">lang/mono</i> support on this architecture.</dd>
</dl>
</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">PSEUDO_FLAVOR</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
List of flavors in <span class="env">FLAVOR</span> that are actually pseudo-flavors. Only for introspection purposes. Read-only.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">PSEUDO_FLAVORS</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Extra list of flavors that do not register in package names, but are still used to control build logic, and work directory names. Its only use should be for disabling part of a multi-packages build, for instance:<div class="spacer">
</div>
<pre style="margin-left: 0.00ex;" class="lit display">
FLAVOR=no_gnome make package</pre>
<div class="spacer">
</div>
Pseudo-flavors should be named as &#8216;no_something&#8217; to disable the build of subpackage &#8216;-something&#8217; (and possibly some others, by restricting <span class="env">BUILD_PACKAGES</span>). Pseudo-flavors should always be handled through <a class="link-man" href="../html5/bsd.port.arch.mk.html">bsd.port.arch.mk(5)</a>. A pseudo-flavor can remove several subpackages through the following construct.<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
# pseudo-flavor no_gui will also remove gtk and gtk3 
MULTI_PACKAGES = -main -gtk -gtk3 -gui 
# ... 
.include &lt;bsd.port.arch.mk&gt; 
 
# remove extra build components 
.if !${BUILD_PACKAGES:M-gui} 
BUILD_PACKAGES := ${BUILD_PACKAGES:N-gtk:N-gtk3} 
.endif 
 
# normal configure setup, e.g., 
.if ${BUILD_PACKAGES:M-gtk} 
# ...</pre>
<div class="spacer">
</div>
Caveat: creation of a separate working directory is mandatory for a pseudo-flavor. If, at a later time, a full build with all subpackages is required, all the work will need to be done again.<div class="spacer">
</div>
See also <span class="env">BUILD_ONCE</span>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">RCDIR</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Location for daemon startup scripts. Defaults to <i class="file">/etc/rc.d</i>. Do not change.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">RECURSIVE_FETCH_LIST</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
See <a class="link-man" href="../html7/mirroring-ports.html">mirroring-ports(7)</a>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">REFETCH</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
User settings. If set to true, <b class="flag">checksum</b> will analyze ${CHECKSUM_FILE}, and try retrieving files with the correct checksum off <a class="link-ext" href="ftp.openbsd.org">ftp.openbsd.org</a>, in the directory <i class="file">/pub/OpenBSD/distfiles/$cipher/$value/$file</i>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">REORDER_DEPENDENCIES</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Points to a list of files that specify inter-dependencies for <a class="link-man" href="../html1/make.html">make(1)</a>. If defined, each line of the file is either a comment (starting with #) or a pair of two files: most_recent older. At the end of <b class="flag">post-patch</b>, <a class="link-man" href="../html1/touch.html">touch(1)</a> will be used to ensure those files are put in the proper order. The files are assumed to be under <i class="file">${WRKSRC}</i>. The notation /file can be used to ask for a recursive search, e.g., to make sure that all Makefile.in are up-to-date. See <i class="file">${PORTSDIR}/infrastructure/mk/automake.dep</i> for an example.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">REPORT_PROBLEM</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
See <a class="link-man" href="../html7/ports.html">ports(7)</a>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">REPORT_PROBLEM_LOGFILE</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
See <a class="link-man" href="../html7/ports.html">ports(7)</a>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">REVISION</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Revision number of the current package. Defaults to empty (very first package), then numbering starts at 0. Gets automatically incorporated into <span class="env">FULLPKGNAME</span> as &#8216;p${REVISION}&#8217; to form a full package-name conforming to <a class="link-man" href="../html7/packages-specs.html">packages-specs(7)</a>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">RUN_DEPENDS</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Specification of ports this port needs installed to be functional. Same format as <span class="env">LIB_DEPENDS</span>. The corresponding packages will be built right before the <b class="flag">install</b> stage, and <a class="link-man" href="../html1/pkg_add.html">pkg_add(1)</a> will take care of installing them.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">SEPARATE_BUILD</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Many GNU configure ports can be built in a directory distinct from the place they were unpacked. For some specific ports, this is even mandatory. Set to &#8216;yes&#8217; or &#8216;simple&#8217; if this is the case. The ports infrastructure will generate a separate ${WRKBUILD} directory in which the port will be configured and built. Wipe ${WRKBUILD} to start anew, but skipping the extract/patch stage.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">SETENV</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Normally set to <code class="lit">/usr/bin/env -i</code>. Prepended to every command invocation that requires a clean environment. Do not override.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">SHARED_LIBS</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
List of shared libraries that the port may build, as a list of the form &#8216;libname&#8217; &#8216;libversion&#8217;. Used to set variables of the form <span class="env">LIBlibname_VERSION</span> that are then used for substitution by <a class="link-man" href="../html1/pkg_create.html">pkg_create(1)</a>. The porter is responsible for making sure the port uses those version numbers when shared libraries are built.<div class="spacer">
</div>
The intent is that the <span class="unix">OpenBSD</span> ports system must have control over shared library versions because of global changes that may require bumping the major version of every shared library in the system, or simply because the third party programmers do not understand the rules for shared library versions, thus breaking the update mechanism. For that reason it is advised to set libversion to 0.0 when first importing a port.<div class="spacer">
</div>
Porters of software using libtool should make sure <span class="env">MAKE_FLAGS</span> get propagated to the libtool invocations. This should be enough in most cases.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">SIGNING_PARAMETERS</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
User settings. Set to <a class="link-man" href="../html1/pkg_create.html">pkg_create(1)</a> options for signing packages directly during their creation.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">SKIPDIR</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
See <a class="link-man" href="../html7/ports.html">ports(7)</a>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">STATIC_PLIST</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Normally set to &#8216;yes&#8217;. Can be set to no for ports that do not have a static plist. Do not change without a very good reason. Note that the only good reason to not have a static plist is for ports such as <i class="file">databases/ports-readmes</i> which actually build a bunch of files depending on the current ports tree. This breaks all introspection mechanisms within the ports tree, including <i class="file">databases/pkglocatedb</i> which will not include that port.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">STARTAFTER</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
See <a class="link-man" href="../html7/ports.html">ports(7)</a>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">STARTDIR</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
See <a class="link-man" href="../html7/ports.html">ports(7)</a>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">SUBPACKAGE</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Set to the subpackage suffix when building a package in a multi-package port. Read-only. Used to test for dependencies or to adjust the package name.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">SUBST_CMD</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
A command that can be used to perform <span class="env">SUBST_VARS</span> substitution on arbitrary files. In normal mode,<div class="spacer">
</div>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit">${SUBST_CMD} file1 file2 ...</code></div>
</blockquote>
<div class="spacer">
</div>
will substitute files in place, creating backup copies of them. In copy mode,<div class="spacer">
</div>
<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit">${SUBST_CMD} -c src1 dest1 src2 dest2</code></div>
</blockquote>
<div class="spacer">
</div>
will copy files over while performing the substitution, as suitable for copying template files over from <i class="file">${FILESDIR}</i> to <i class="file">${PREFIX}</i>, for instance. This uses <a class="link-man" href="../html1/pkg_subst.html">pkg_subst(1)</a> with suitable parameters. Read-only.<div class="spacer">
</div>
${SUBST_CMD} can be used like <a class="link-man" href="../html1/install.html">install(1)</a>:<blockquote style="margin-top: 0.00em;margin-bottom: 0.00em;">
<div class="display">
<code class="lit">${SUBST_CMD} [<span class="opt"><b class="flag">-g</b> <i class="arg">group</i></span>] [<span class="opt"><b class="flag">-o</b> <i class="arg">owner</i></span>] [<span class="opt"><b class="flag">-m</b> <i class="arg">mode</i></span>] file...</code></div>
</blockquote>
to set file <i class="arg">owner</i>, <i class="arg">group</i> and/or <i class="arg">mode</i>.<div class="spacer">
</div>
Note that <span class="env">SUBST_CMD</span> is not really appropriate when variables have subpackage variations, like <span class="env">PREFIX</span> or <span class="env">FULLPKGNAME</span>. Use the appropriate <span class="env">SUBST_CMD-sub</span> instead.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">SUBST_CMD-sub</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
<span class="env">SUBST_CMD</span> with subpackage-dependent semantics, like packing-list substitution. It will substitute the right variable depending on the desired subpackage, e.g., <span class="env">SUBST_CMD-foo</span> will substitute the value of <span class="env">FULLPKGNAME-foo</span> for <code class="lit">${FULLPKGNAME}</code>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">SUBST_DATA</span>, <span class="env">SUBST_MAN</span>, <span class="env">SUBST_PROGRAM</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Specialized versions of <span class="env">SUBST_CMD</span> that use <b class="flag">-c</b> and appropriate owner/group/mode for data, manpages and programs respectively.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">SUBST_VARS</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Make variables whose values get substituted to create the actual package information. Always holds <span class="env">ARCH</span>, <span class="env">BASE_PKGPATH</span>, <span class="env">FLAVOR_EXT</span>, <span class="env">FULLPKGNAME</span>, <span class="env">HOMEPAGE</span>, <span class="env">LOCALBASE</span>, <span class="env">MACHINE_ARCH</span>, <span class="env">MAINTAINER</span>, <span class="env">PREFIX</span>, <span class="env">RCDIR</span>, <span class="env">SYSCONFDIR</span>, <span class="env">TRUEPREFIX</span>, and <span class="env">X11BASE</span>. The special construct &#8216;${FLAVORS}&#8217; can be used in the packing-list to specify the current list of dash separated flavors the port is compiled with (useful for cross-dependencies in <span class="env">MULTI_PACKAGES</span>). Add other variables as needed. Some variable names are prefixed by a ^. This is only relevant for <b class="flag">update-plist</b>, where it means the variable will only be substituted at the beginning of a path.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">SUDO</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
User settings. If set to <a class="link-man" href="../html1/doas.html">doas(1)</a> in <a class="link-man" href="../html5/mk.conf.html">mk.conf(5)</a>, the ports tree will only invoke root's privileges for the parts that really require it.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">SUPDISTFILES</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Supplementary files that need to be retrieved under some specific circumstances. For instance, a port might need architecture-specific files. <span class="env">SUPDISTFILES</span> should hold a list of all distribution files and patchfiles that are not always needed, so that a mirror will be able to grab all files, or that <b class="flag">makesum</b> will work. Having an overlap between <span class="env">SUPDISTFILES</span> and <span class="env">DISTFILES</span>, <span class="env">PATCHFILES</span> is admissible, and in fact, expected, as it is much simpler to build an error-free list of files to retrieve in that way. See the xanim port for an example.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">SYSCONFDIR</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Location for this port's configuration files, should always be derived from <span class="env">BASESYSCONFDIR</span>, which defaults to <i class="file">/etc</i>. Passed to gnu configure scripts and substituted in PLISTs.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">TAR</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Name of the tar binary.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">TARGETS</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Read-only. Set to the list of special targets for a port (<b class="flag">{pre,do,post}-*</b> and module hooks). Used by introspection tools such as the sqlports package.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">TEMPLATES</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Base location for the templates used in the <b class="flag">readmes</b> target. User settings. Defaults to <i class="file">${PORTSDIR}/infrastructure/templates</i>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">TEST_DEPENDS</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
See <span class="env">BUILD_DEPENDS</span> for specification. Test dependencies are only checked if the <b class="flag">test</b> stage is invoked.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">TEST_ENV</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Additional environment variables passed to tests. Empty by default.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">TEST_FLAGS</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Extra flags passed to ${MAKE_PROGRAM} to run the regression tests. Empty by default.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">TEST_IS_INTERACTIVE</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Set to &#8216;Yes&#8217; if port needs human interaction to run its tests, or set to &#8216;X11&#8217; if the tests need an active X11 display to work.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">TEST_LOG</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Command used to log the results of regression tests to TEST_LOGFILE.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">TEST_LOGFILE</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Log file containing the results of regression tests.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">TEST_TARGET</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Target to run regression tests. Defaults to &#8216;regress&#8217;, except for &#8216;perl&#8217; and &#8216;gnu&#8217; <span class="env">CONFIGURE_STYLE</span>, which default to &#8216;test&#8217; and &#8216;check&#8217;, respectively.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">TRUEPREFIX</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Read-only. Mostly the same as ${PREFIX}, except it never gets ${DESTDIR} prepended during <b class="flag">fake</b>. Refer to <i class="link-sec"><a class="link-sec" href="#x5448452046414b45204652414d45574f524b">THE FAKE FRAMEWORK</a></i> section for details.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">TRY_BROKEN</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
User settings. If set to &#8216;Yes&#8217;, don't set <span class="env">IGNORE</span> for <span class="env">BROKEN</span> ports, so that we will attempt to build them.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">UNLOCK_CMD</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
User settings. If set, expands to a command that will release a lock. This lock will reside in <i class="file">${LOCKDIR}</i>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">UNMESSAGE</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
File recorded in the package and displayed during deinstallation. Defaults to ${PKGDIR}/UNMESSAGE if this file exists. Leave empty if no message is needed.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">UNZIP</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Name of the unzip binary.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">UPDATE_COOKIES_DIR</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
User settings. Used to store cookies for package updates and defaults to <i class="file">${PORTSDIR}/update/${MACHINE_ARCH}</i>. If set to empty, will revert to a file under <i class="file">${WRKDIR}</i>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">USE_CCACHE</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
User settings. Set to &#8216;Yes&#8217; to use ccache when building ports. Adds a build dependency on devel/ccache, and sets up the build environment so that it is used.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">USE_GMAKE</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Set to &#8216;Yes&#8217; if GNU make (${GMAKE}) is needed for correct behavior of this port.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">USE_GROFF</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Set to &#8216;Yes&#8217; to use groff to build manpages. This sets groff as a build dependency, and also tells <a class="link-man" href="../html1/pkg_create.html">pkg_create(1)</a> to format manpages behind the scene using groff while building packages.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">USE_LIBTOOL</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Defaults to &#8216;Yes&#8217;. Set to &#8216;gnu&#8217; if the base <a class="link-man" href="../html1/libtool.html">libtool(1)</a> is insufficient and GNU libtool is required. Set to &#8216;No&#8217; to disable the use of <a class="link-man" href="../html1/libtool.html">libtool(1)</a> entirely; this should not be set under normal circumstances. Adds dependencies if necessary, and passes LIBTOOL environment variable to scripts invocations.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">USE_MFS</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Set to &#8216;Yes&#8217; to build ports under an MFS filesystem (see <a class="link-man" href="../html8/mount_mfs.html">mount_mfs(8)</a>). Mostly for use by <a class="link-man" href="../html1/dpb.html">dpb(1)</a> and not intended to be a user setting. See <span class="env">WRKOBJDIR_MFS</span> for configuration.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">USE_X11</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Normally, presence of ${X11BASE} is enforced by default for building ports. But there is an experimental way to hook the xenocara build into <a class="link-man" href="../html1/dpb.html">dpb(1)</a>, which requires knowing whether a port requires X11 to already be there.<div class="spacer">
</div>
The infrastructure mostly sets <span class="env">USE_X11</span> automatically based on <span class="env">WANTLIB</span> values, there are a few ports (about 20) that require X11 components without any library telltale.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">VARBASE</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
User settings. Base location for ports that install stuff outside of <i class="file">${LOCALBASE}</i>. Defaults to <i class="file">/var</i>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">WANTLIB</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Extra list of library specifications that a package will need. May include system and X11 libraries. See <a class="link-man" href="../html7/library-specs.html">library-specs(7)</a> for more details.<div class="spacer">
</div>
As a special extension, <span class="env">WANTLIB</span> may include absolute paths, e.g., <i class="file">${LOCALBASE}/lib/expat.=4</i> to distinguish between base libraries and port libraries. Use with caution, this is very seldom needed.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">wantlib_args</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Controls the behavior of <a class="link-man" href="../html1/pkg_create.html">pkg_create(1)</a> related targets, see <b class="flag">print-package-args</b> for details.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">WARNINGS</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
User settings. If set to &#8216;Yes&#8217;, add <span class="env">CDIAGFLAGS</span> to <span class="env">CFLAGS</span> and <span class="env">CXXDIAGFLAGS</span> to <span class="env">CXXFLAGS</span>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">WRKBUILD</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Subdirectory of ${WRKDIR} where the actual build occurs. Defaults to ${WRKSRC}, unless SEPARATE_BUILD is involved, in which case it is set to an appropriate value.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">WRKCONF</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Subdirectory of ${WRKDIR} where the actual configure set occurs. Defaults to ${WRKBUILD}.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">WRKDIR</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Location where all port activity occurs. Apart from the actual port, may hold all kinds of cookies that checkpoint the port's build. Read-only. Note that WRKDIR may be a symbolic link. During ports building, <i class="file">${WRKDIR}/bin</i> is put at the front of the <span class="env">PATH</span>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">WRKDIR_LINKNAME</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Name of a symbolic link to create within the port directory which will point to the port's ${WRKDIR}. See <span class="env">OLD_WRKDIRNAME</span>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">WRKDIST</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Subdirectory of ${WRKDIR} in which the distribution files normally unpack. Base for all patches. Defaults to <i class="file">${WRKDIR}/${DISTNAME}</i>. Note that WRKDIST may be a symbolic link, if set to ${WRKDIR}.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">WRKSRC</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Subdirectory of ${WRKDIR} where the actual source is. Base for configuration (default: ${WRKDIST}). Note that WRKSRC may be a symbolic link, if set to ${WRKDIR}.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">WRKINST</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Subdirectory of ${WRKDIR} where port normally installs (see the <b class="flag">fake</b> target).</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">WRKOBJDIR</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Used as a base for the actual port working directory. Defaults to <i class="file">${PORTSDIR}/pobj</i>. The real working directory ${WRKDIR} is created there. Can be set on a per-${PKGPATH} basis. For instance, setting WRKOBJDIR_www/mozilla=/tmp/obj will affect only the mozilla port. If explicitly unset (WRKOBJDIR=), the working directory is created within the port directory.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">WRKOBJDIR_MFS</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Alternate location for the port working directory. The intent is to use an MFS based filesystem for small ports with <a class="link-man" href="../html1/dpb.html">dpb(1)</a>. Active when <span class="env">USE_MFS</span> is &#8216;Yes&#8217;. Defaults to <i class="file">/tmp/pobj</i>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">X11BASE</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Where X11 has been installed. Default: <i class="file">/usr/X11R6</i>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">XAUTHORITY</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Points to a suitable authority file for X11 interactive regression tests. Defaults to <i class="file">${HOME}/.xauthority</i>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">XMKMF</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Invocation of xmkmf for a <code class="lit">CONFIGURE_STYLE=imake</code> port. Defaults to xmkmf -a -DPorts. The -DPorts is specific to <span class="unix">OpenBSD</span> and is always appended.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">YACC</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Name of yacc program to pass to GNU-configure, defaults to yacc. GNU-configure would always try to use bison otherwise, which leads to unreproducible builds. Set to bison if needed.</dd>
</dl>
</div>
<div class="section">
<h1 id="x444941474e4f5354494353">DIAGNOSTICS</h1> Note that some of these messages are actually emitted by some other external commands, but grouped here for convenience: easier to look for in <a class="link-man" href="../html1/dpb.html">dpb(1)</a>'s logs.<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-diag">
<dt class="list-diag" style="margin-top: 1.00em;">
<b class="diag">Discovered old directory in ...</b></dt>
<dd class="list-diag">
This message comes from <a class="link-man" href="../html1/make-plist.html">make-plist(1)</a>. A directory was found in the PLIST that used to be needed but is no longer, because it's now accounted for through dependencies. Indicates the old directory has been removed.</dd>
<dt class="list-diag" style="margin-top: 1.00em;">
<b class="diag">Error: change in plist between ...</b></dt>
<dd class="list-diag">
Error message comes from <a class="link-man" href="../html1/register-plist.html">register-plist(1)</a>.</dd>
<dt class="list-diag" style="margin-top: 1.00em;">
<b class="diag">Error: duplicate item in packing-list</b></dt>
<dd class="list-diag">
Error message comes from <a class="link-man" href="../html1/pkg_create.html">pkg_create(1)</a>, and will result from incorrect packing-lists, such as including several fragments with the same file, or having incorrect <span class="env">PKG_ARGS-sub</span>.</dd>
<dt class="list-diag" style="margin-top: 1.00em;">
<b class="diag">Error: Libraries in packing-lists...and libraries from installed packages don't match</b></dt>
<dd class="list-diag">
The ports tree and the installed packages are out-of-sync. Mixing library information from both sources might produce packages that can't be installed elsewhere. Cleanest fix is to update the out-of-date source (e.g., update the ports tree, or build and install new packages). Developers may use <span class="env">PKG_CREATE_NO_CHECKS</span> instead, assuming they understand the implications. See <b class="flag">print-package-args</b> (<b class="flag">wantlib-args</b>) for details.</dd>
<dt class="list-diag" style="margin-top: 1.00em;">
<b class="diag">Fatal: can't flavor a SUBDIR</b></dt>
<dd class="list-diag">
A dependency mentions top_subdir,flavor. Flavor would then be ignored, as it is only applied to individual ports.</dd>
<dt class="list-diag" style="margin-top: 1.00em;">
<b class="diag">Fatal: can't subpackage a SUBDIR</b></dt>
<dd class="list-diag">
A dependency mentions top_subdir,-sub. Subpackage would then be ignored, as it is only applied to individual ports.</dd>
<dt class="list-diag" style="margin-top: 1.00em;">
<b class="diag">Fatal: flavor should never start with a digit</b></dt>
<dd class="list-diag">
This would utterly confuse <a class="link-man" href="../html1/pkg_add.html">pkg_add(1)</a>. See <a class="link-man" href="../html7/packages-specs.html">packages-specs(7)</a>.</dd>
<dt class="list-diag" style="margin-top: 1.00em;">
<b class="diag">Fatal: inclusion of &lt;file&gt; from &lt;file&gt;</b></dt>
<dd class="list-diag">
<i class="file">bsd.port.mk</i> or <i class="file">bsd.port.subdir.mk</i> has been included from a <span class="env">MODULE</span> or from <i class="file">Makefile.inc</i>, resulting in a double inclusion. This would lead to weird results, such as <span class="env">PKG_ARGS</span> being defined twice.</dd>
<dt class="list-diag" style="margin-top: 1.00em;">
<b class="diag">Fatal: SUBPACKAGES should always begin with -: &lt;offending list&gt;</b></dt>
<dd class="list-diag">
That is the only way to differentiate between <span class="env">FLAVOR</span> and <span class="env">SUBPACKAGE</span> in <a class="link-man" href="../html7/pkgpath.html">pkgpath(7)</a> specifications.</dd>
<dt class="list-diag" style="margin-top: 1.00em;">
<b class="diag">Fatal: building ports requires correctly installed X11</b></dt>
<dd class="list-diag">
All file sets of the base OS, including xenocara, must be installed before building ports.</dd>
<dt class="list-diag" style="margin-top: 1.00em;">
<b class="diag">Fatal: /usr/local/lib/X11/app-defaults should exist and be a symlink</b></dt>
<dd class="list-diag">
/usr/local/lib/X11/app-defaults is distributed as a symlink in the xshare*.tgz file set. If xenocara was not fully installed before packages were added, it may have been created as a directory instead.</dd>
<dt class="list-diag" style="margin-top: 1.00em;">
<b class="diag">Fatal: the licensing info for &lt;pkgname&gt; is incomplete...</b></dt>
<dd class="list-diag">
Every port must have explicit defines of all <span class="env">PERMIT_*</span> values.</dd>
<dt class="list-diag" style="margin-top: 1.00em;">
<b class="diag">Fatal: Use 'env FLAVOR=flavor make' instead</b></dt>
<dd class="list-diag">
Arguments specified after <a class="link-man" href="../html1/make.html">make(1)</a> are hardcoded for all recursive sub-makes, and very difficult to override. Thus, <span class="env">FLAVOR</span> must be specified in the environment instead.</dd>
<dt class="list-diag" style="margin-top: 1.00em;">
<b class="diag">Fatal: Use 'env SUBPACKAGE=-sub make' instead</b></dt>
<dd class="list-diag">
Arguments specified after <a class="link-man" href="../html1/make.html">make(1)</a> are hardcoded for all recursive sub-makes, and very difficult to override. Thus, <span class="env">SUBPACKAGE</span> must be specified in the environment instead.</dd>
<dt class="list-diag" style="margin-top: 1.00em;">
<b class="diag">ldconfig: &lt;dir&gt;: No such file or directory</b></dt>
<dd class="list-diag">
Usually produced by <a class="link-man" href="../html1/pkg_add.html">pkg_add(1)</a> running <a class="link-man" href="../html8/ldconfig.html">ldconfig(8)</a>. Some tools such as GNU libtool will add directories living under <i class="file">${WRKINST}</i> to the shared library path during the <b class="flag">fake</b> stage. Of course, <a class="link-man" href="../html8/ldconfig.html">ldconfig(8)</a> will later complain after the directory no longer exists. The bogus tool should be fixed to conform to <span class="unix">OpenBSD</span> usage.</dd>
<dt class="list-diag" style="margin-top: 1.00em;">
<b class="diag">LIB_DEPENDS &lt;spec&gt; not needed for &lt;FULLPKGPATH&gt;</b></dt>
<dd class="list-diag">
There doesn't seem to be any WANTLIB to match the given LIB_DEPENDS. Thus, the LIB_DEPENDS won't turn into a @depends line in the created package. This is often because of confusion between LIB_DEPENDS and RUN_DEPENDS: RUN_DEPENDS is needed for dlopen'd libraries.<div class="spacer">
</div>
Might be intentional sometimes, if some compile flavors create static binaries, for instance. Also, will happen for multi-packages, where one sets LIB_DEPENDS to have a given build dependency (and corresponding WANTLIB for a given SUBPACKAGE).<div class="spacer">
</div>
See <b class="flag">print-package-args</b> (<b class="flag">lib-depends-args</b>) for details.</dd>
<dt class="list-diag" style="margin-top: 1.00em;">
<b class="diag">Warning: FULLPKGNAME-sub defined but not FULLPKGPATH-sub</b></dt>
<dd class="list-diag">
<span class="env">FULLPKGNAME-sub</span> has been explicitly defined by the port, instead of relying on the default, but no value of <span class="env">FULLPKGPATH-sub</span> has been given. This is often an error.</dd>
<dt class="list-diag" style="margin-top: 1.00em;">
<b class="diag">Warning: symlink(s) point to non existent file.</b></dt>
<dd class="list-diag">
Warning message comes from <a class="link-man" href="../html1/pkg_create.html">pkg_create(1)</a>. The symlink resides in the fake area, under <i class="file">${WRKINST}</i>. This is only a warning because the symlink may point to a run-time dependency, which obviously won't exist under <i class="file">${WRKINST}</i> at the time &#8216;<code class="lit">make package</code>&#8217; is run.</dd>
<dt class="list-diag" style="margin-top: 1.00em;">
<b class="diag">Warning: @option no-default-conflict with no @conflict</b></dt>
<dd class="list-diag">
Warning message comes from <a class="link-man" href="../html1/pkg_create.html">pkg_create(1)</a>. Most packages that waive &quot;default-conflict&quot; will have explicit conflict markers instead. Otherwise, the package will only conflict with the exact same version, with some possible <span class="env">REVISION</span> bumps. Any other version or <span class="env">FLAVOR</span> won't conflict. This is generally an error, apart from very few ports like <i class="file">devel/autoconf/*</i>.</dd>
<dt class="list-diag" style="margin-top: 1.00em;">
<b class="diag">groff produced empty result for &lt;manpage&gt;...</b></dt>
<dd class="list-diag">
Warning message comes from <a class="link-man" href="../html1/pkg_create.html">pkg_create(1)</a>. Manpages are automatically formatted with <a class="link-man" href="../html1/groff.html">groff(1)</a> if <span class="env">USE_GROFF</span> is set. The above message denotes an actual problem while formatting the page, which should be addressed. In the meantime, <a class="link-man" href="../html1/pkg_create.html">pkg_create(1)</a> still produces a package, but leaves the manpage unformatted, in the hope that something will be able to make sense of it.</dd>
</dl>
</div>
<div class="section">
<h1 id="x46494c4553">FILES</h1><dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="file">../Makefile.inc</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Common Makefile fragment for a set of ports, included automatically.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="file">/cdrom/distfiles</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Default path to a CD-ROM (or other media) full of distribution files.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="file">${DISTDIR}</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Cache of all distribution files.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="file">distinfo</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Checksum file. Holds the output of <a class="link-man" href="../html1/cksum.html">cksum(1)</a>, using ${PREFERRED_CIPHERS}, for the port's ${DISTFILES} and ${PATCHFILES}, as well as the sizes of these files.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="file">${DISTDIR}/${CHECKSUMFILES}</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Cache of normal distribution files for a given port.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="file">${DISTDIR}/${MAKESUMFILES}</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Cache of all distribution files for a given port.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="file">${PKGDIR}/DESCR</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Description for the port. Variables such as ${HOMEPAGE} and ${MAINTAINER} will be expanded (see SUBST_VARS). Multi-package ports will use DESCR${SUBPACKAGE}.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="file">${PKGDIR}/README</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
<span class="unix">OpenBSD</span> specific documentation for a port, that will be installed as <i class="file">${LOCALBASE}/share/doc/pkg-readmes/${FULLPKGNAME}</i> at the end of <b class="flag">fake</b>. Variables from <span class="env">SUBST_VARS</span> will be expanded. Multi-package ports will use <i class="file">README${SUBPACKAGE}</i>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="file">${PKGDIR}/&lt;foo&gt;.rc</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Startup script for &lt;foo&gt;. Will be installed as <i class="arg">${RCDIR}/&lt;foo&gt;</i> at the end of <b class="flag">fake</b>. Variables from <span class="env">SUBST_VARS</span> will be expanded.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="file">${PORTSDIR}/infrastructure/db/fake.mtree</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Specification used for populating ${WRKINST} at the start of <b class="flag">fake</b>. Use <b class="flag">pre-fake</b> if this is incomplete.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="file">${PORTSDIR}/packages/${MACHINE_ARCH}</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Default setup of ${PACKAGE_REPOSITORY}.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="file">${PACKAGE_REPOSITORY}/no-arch</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Location of arch-independent packages.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="file">${PACKAGE_REPOSITORY}/${MACHINE_ARCH}/all</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Location of all built packages.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="file">${PACKAGE_REPOSITORY}/${MACHINE_ARCH}/cache</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Location of packages retrieved through the network.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="file">${PACKAGE_REPOSITORY}/${MACHINE_ARCH}/cksums</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Location of checksums, see <span class="env">CHECKSUM_PACKAGES</span>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="file">${PACKAGE_REPOSITORY}/${MACHINE_ARCH}/cdrom</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Location of packages suitable for the CD.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="file">${PACKAGE_REPOSITORY}/${MACHINE_ARCH}/ftp</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Location of packages suitable for FTP.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="file">${PORTSDIR}/bulk/${MACHINE_ARCH}</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Default setup of ${BULK_COOKIES_DIR}.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="file">${PORTSDIR}/update/${MACHINE_ARCH}</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Default setup of ${UPDATE_COOKIES_DIR}.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="file">${PORTSDIR}/mystuff</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Extra directory used to store local ports before committing them. All depend targets will normally look there after the normal lookup fails. See <span class="env">PORTSDIR_PATH</span>.</dd>
</dl>
</div>
<div class="section">
<h1 id="x5448452046414b45204652414d45574f524b">THE FAKE FRAMEWORK</h1> The <b class="flag">fake</b> target is used to install the port in a private directory first, ready for packaging by the <b class="flag">package</b> target, so that the actual installation will use the package.<div class="spacer">
</div>
Essentially, <b class="flag">fake</b> invokes a real install process after tweaking a few variables.<div class="spacer">
</div>
<b class="flag">fake</b> first creates a skeleton tree under ${WRKINST}, using the <a class="link-man" href="../html8/mtree.html">mtree(8)</a> specification <i class="file">${PORTSDIR}/infrastructure/db/fake.mtree</i>.<div class="spacer">
</div>
A <b class="flag">pre-fake</b> target may be used to complete that skeleton tree. For instance, a few ports may need supplementary stuff to be present (as it would be installed if the port's dependencies were present).<div class="spacer">
</div>
If <b class="flag">{pre,do,post}-install</b> overrides are present, they are used with some important changes, listed in <span class="env">FAKE_SETUP</span>:<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
TRUEPREFIX=${PREFIX} 
PREFIX=${WRKINST}${PREFIX} 
${DESTDIRNAME}=${WRKINST}</pre>
<div class="spacer">
</div>
Essentially, old install targets work transparently, except for a need to change PREFIX to TRUEPREFIX for symbolic links and similar path lookups. Specific traditional post install work can be simply removed, as it will be taken care of by the package itself (for instance, ldconfig, or texinfo's install-info).<div class="spacer">
</div>
If no <b class="flag">do-install</b> override is present, the port is installed using<div class="spacer">
</div>
<pre style="margin-left: 2.00ex;" class="lit display">
env -i ${MAKE_ENV} ${FAKE_SETUP} ${MAKE_PROGRAM} ${ALL_FAKE_FLAGS} -f ${MAKE_FILE} ${FAKE_TARGET}</pre>
<div class="spacer">
</div>
Note that this does set both PREFIX and ${DESTDIRNAME}. If a port's Makefile both heeds ${DESTDIRNAME}, and references PREFIX explicitly, FAKE_FLAGS may rectify the problem by setting PREFIX=${PREFIX} (which will do the right thing, since ${PREFIX} is a <a class="link-man" href="../html1/make.html">make(1)</a> construct which will not be seen by the shell).<div class="spacer">
</div>
${FAKE_FLAGS} is used to set variables on <a class="link-man" href="../html1/make.html">make(1)</a> command line, which will override the port Makefile contents. Thus, a port that mentions DESTDIR= does not need any patch to work with fake.<div class="spacer">
</div>
Files such as <i class="file">${PKGDIR}/README*</i> or <i class="file">${PKGDIR}/*.rc</i> get copied to <i class="file">${WRKINST}</i> at the end of <b class="flag">fake</b> (see the <i class="link-sec"><a class="link-sec" href="#x46494c4553">FILES</a></i> section above for details).</div>
<div class="section">
<h1 id="x464c41564f525320414e44204d554c54495f5041434b41474553">FLAVORS AND MULTI_PACKAGES</h1> Starting with <span class="unix">OpenBSD&#160;2.7</span>, each port can generate distinct packages through two orthogonal mechanisms: FLAVORS and MULTI_PACKAGES.<div class="spacer">
</div>
The current MULTI_PACKAGES mechanism was introduced after <span class="unix">OpenBSD&#160;4.0</span>.<div class="spacer">
</div>
The arch-dependent part was refined after <span class="unix">OpenBSD&#160;5.0</span>.<div class="spacer">
</div>
If a port can be compiled with several options, these options should be turned into FLAVORS. The port maintainer will set FLAVORS to be the list of possible options in the Makefile. When building the port, the package builder will set <code class="lit">FLAVOR='option1 option2...'</code> to build a specific flavor of the port. The Makefile should test the value of FLAVOR as follows:<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
FLAVOR?= 
.if ${FLAVOR:Moption1} 
# what to do if option1 
.endif 
.if ${FLAVOR:Moption2} 
# what to do if option2 
.endif</pre>
<div class="spacer">
</div>
<b class="name">bsd.port.mk</b> takes care of a few details, such as generating a distinct work directory for each flavor, or creating a FULLPKGNAME by adding a dash separated list of flavors to the base package name. The order in which FLAVOR is specified does not matter: this dash separated list will be reordered to match the ordering of FLAVORS.<div class="spacer">
</div>
It is an error to specify an option in FLAVOR that does not appear in FLAVORS, to prevent misspellings.<div class="spacer">
</div>
In bulk package building, flavors can be specified as a comma separated list after the package directory, e.g., SUBDIR+=vim,no_x11 (see <a class="link-man" href="../html7/pkgpath.html">pkgpath(7)</a>)<div class="spacer">
</div>
Finally, package information will use templates with the canonical package extension if they are available: if FLAVOR='option1 option2' and both COMMENT and COMMENT-option1-option2 are available, COMMENT-option1-option2 will be used.<div class="spacer">
</div>
If one build of a port can generate several distinct packages, set MULTI_PACKAGES accordingly. Each extension of a MULTI_PACKAGES name should start with a dash, so that they cannot be confused with FLAVORS. In dependency checking and bulk builds, a subpackage can be specified after a comma, e.g., SUBDIR+=quake,-server. MULTI_PACKAGES only affects the actual package building step (and the <b class="flag">describe</b> step, since a MULTI_PACKAGES port will produce several descriptions).<div class="spacer">
</div>
If MULTI_PACKAGES is set, the packaging stage happens once for every subpackage, using subpackage-specific variables. For instance, if MULTI_PACKAGES=-main -lib -server, <span class="env">PKG_ARCH-main</span>, <span class="env">PKG_ARCH-lib</span> and <span class="env">PKG_ARCH-server</span> will be used for the subpackages respectively called <span class="env">FULLPKGNAME-main</span>, <span class="env">FULLPKGNAME-lib</span> and <span class="env">FULLPKGNAME-server</span>.<div class="spacer">
</div>
All package information is also derived from templates with SUBPACKAGE appended. In the preceding example, the packing-list template for FULLPKGNAME-lib must be in PLIST-lib.<div class="spacer">
</div>
The following variables are subpackage dependent: <span class="env">COMMENT</span>, <span class="env">PKG_ARCH</span>, <span class="env">PERMIT_PACKAGE_FTP</span>, <span class="env">PERMIT_PACKAGE_CDROM</span>, <span class="env">PKGFILE</span>, <span class="env">PKGNAME</span>, <span class="env">FULLPKGNAME</span>, <span class="env">REVISION</span>, <span class="env">EPOCH</span>, <span class="env">FULLPKGPATH</span>, <span class="env">RUN_DEPENDS</span>, <span class="env">WANTLIB</span>, <span class="env">LIB_DEPENDS</span>, <span class="env">IGNORE</span>, <span class="env">ONLY_FOR_ARCHS</span>, <span class="env">NOT_FOR_ARCHS</span>, <span class="env">PKG_ARGS</span>, <span class="env">PREFIX</span>, <span class="env">CATEGORIES</span>, <span class="env">MESSAGE</span>, <span class="env">UNMESSAGE</span>, <span class="env">DESCR</span>, <span class="env">PLIST</span>, <span class="env">STATIC_PLIST</span>, <span class="env">PKGSPEC</span>.<div class="spacer">
</div>
The usual non-MULTI_PACKAGES variables are simply used as default values for all subpackages. So, if you set <code class="lit">PKG_ARCH=*</code> <code class="lit">PKG_ARCH-main=i386</code> then <span class="env">PKG_ARCH-lib</span> and <span class="env">PKG_ARCH-server</span> will both be &#8216;*&#8217;.<div class="spacer">
</div>
<span class="env">WANTLIB</span> and <span class="env">LIB_DEPENDS</span> are special. At the beginning of the build, during <b class="flag">prepare</b>, all build dependencies will be checked, which includes <span class="env">LIB_DEPENDS</span>, <span class="env">WANTLIB</span> for every subpackage. As an exception, any <span class="env">LIB_DEPENDS-sub</span> that references the current port will be ignored as a build dependency, in order to avoid recursion.<div class="spacer">
</div>
<span class="env">FULLPKGPATH</span> and <span class="env">FULLPKGNAME</span> are special as well. You must set <span class="env">PKGNAME-sub</span> or <span class="env">FULLPKGNAME-sub</span> for each subpackage, but <span class="env">FULLPKGPATH-sub</span> is set automatically to the right value. In very rare cases, one may override <span class="env">FULLPKGPATH-sub</span>. (for instance, if one specific subpackage is not affected by option settings that affect other subpackages, e.g., for include files packs).<div class="spacer">
</div>
In terms of using the port, quite a few targets will have a subpackage specific subtarget: invoking <b class="flag">package</b> is the same as invoking <b class="flag">subpackage</b> for all subpackages, invoking <b class="flag">install-all</b> is the same as invoking <b class="flag">install</b> for all subpackages, and invoking <b class="flag">update</b> is the same as invoking <b class="flag">subupdate</b> for all subpackages.<div class="spacer">
</div>
<span class="env">ONLY_FOR_ARCHS</span> and <span class="env">NOT_FOR_ARCHS</span> interact with <span class="env">MULTI_PACKAGES</span> and <span class="env">IGNORE</span>. The infrastructure will automatically filter subpackages that are not suitable for the current architecture. Thus, <span class="env">MULTI_PACKAGES</span> should always list all subpackages, even things not buildable on the current architecture, for indexing purposes.<div class="spacer">
</div>
Starting with <span class="unix">OpenBSD&#160;5.1</span>, <a class="link-man" href="../html5/bsd.port.arch.mk.html">bsd.port.arch.mk(5)</a> should be used to simplify the handling of <span class="env">MULTI_PACKAGES</span> in arch-dependent setups:<div class="spacer">
</div>
Make sure <span class="env">MULTI_PACKAGES</span>, <span class="env">ONLY_FOR_ARCHS*</span>, and <span class="env">PSEUDO_FLAVORS</span> are defined correctly, then<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
.include &lt;bsd.port.arch.mk&gt;</pre>
<div class="spacer">
</div>
This will compute <span class="env">BUILD_PACKAGES</span>, the list of actual subpackages to build with the current setup, by taking arch constraints and pseudo-flavors into account. Then test <span class="env">BUILD_PACKAGES</span> to set up the right configuration, e.g., to check if <span class="env">SUBPACKAGE</span> <i class="arg">-mono</i> should be built:<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
.if ${BUILD_PACKAGES:M-mono}</pre>
<div class="spacer">
</div>
The <i class="file">lang/gcc/4.9</i> or <i class="file">print/poppler</i> ports should provide examples of proper use.<div class="spacer">
</div>
Note that <a class="link-man" href="../html1/dpb.html">dpb(1)</a> will break if all subpackages are not properly listed.</div>
<div class="section">
<h1 id="x5448452047454e45524154494f4e204f46205041434b41474520494e464f524d4154494f4e">THE GENERATION OF PACKAGE INFORMATION</h1> Starting after <span class="unix">OpenBSD&#160;4.1</span> all package information is processed directly by <a class="link-man" href="../html1/pkg_create.html">pkg_create(1)</a> from templates in ${PKG_DIR}.<div class="spacer">
</div>
<ul style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-bul">
<li class="list-bul" style="margin-top: 0.00em;">
If not overridden by the user, determine which set of templates to use, depending on the current SUBPACKAGE and FLAVOR information. Set PLIST${SUBPACKAGE}, DESCR${SUBPACKAGE}, COMMENT${SUBPACKAGE}, MESSAGE${SUBPACKAGE}, UNMESSAGE${SUBPACKAGE} accordingly.</li>
<li class="list-bul" style="margin-top: 0.00em;">
Generate the actual DESCR, and if needed, MESSAGE, UNMESSAGE, from the templates in ${DESCR}, ${MESSAGE}, ${UNMESSAGE}, by substituting the variables in ${SUBST_VARS}, and by substituting ${FLAVORS} with the canonical flavor extension for this port, e.g., if FLAVORS=no_map gfx qt2, if FLAVOR=gfx no_map, this is &#8216;-no_map-gfx&#8217;.</li>
<li class="list-bul" style="margin-top: 0.00em;">
Generate the actual PLIST from the template ${PLIST}, by inserting fragments and applying the same variable substitutions as other package information.</li>
</ul>
<div class="spacer">
</div>
Note that ${COMMENT} is currently not substituted, to speed up <b class="flag">describe</b> generation.<div class="spacer">
</div>
To avoid substitution, variables can be escaped as follows: <code class="lit">$\{PREFIX}</code><div class="spacer">
</div>
If FLAVORS lists flv, then constructs such as the line <code class="lit">%%flv%%</code> or <code class="lit">!%%flv%%</code> in the packing-list template trigger the inclusion of <i class="file">${PKGDIR}/PFRAG.flv${SUBPACKAGE}</i> or <i class="file">${PKGDIR}/PFRAG.no-flv${SUBPACKAGE}</i>. Other fragments can be defined by simply adding <code class="lit">-Dfrag=1</code> or <code class="lit">-Dfrag=0</code> to <span class="env">PKG_ARGS</span>.<div class="spacer">
</div>
If libraries are built using <i class="file">bsd.lib.mk</i>, special care should be taken for mips64* architectures, which do not ever build <i class="file">*pic.a</i> files (all mips code is pic already). <b class="name">bsd.port.mk</b> automatically adds <code class="lit">-Dno_mips64=1</code> or <code class="lit">-Dno_mips64=0</code> to <span class="env">PKG_ARGS</span>, and the porter only needs to provide the appropriate fragment.<div class="spacer">
</div>
<a class="link-man" href="../html1/pkg_add.html">pkg_add(1)</a> now calls <a class="link-man" href="../html8/ldconfig.html">ldconfig(8)</a> directly, provided dynamic libraries have been annotated with <code class="lit">@lib libthingy.so.5.0</code>. Adding new directories to the dynamic loader cache has been deprecated. It is often better to let libraries be visible as a link under ${LOCALBASE}. Having a separate directory is enough to trick <a class="link-man" href="../html1/ld.html">ld(1)</a> into grabbing the right version. Libraries used only for <a class="link-man" href="../html3/dlopen.html">dlopen(3)</a> do not need to be visible. Some programs will prefer to use rpath to find their own libraries.<div class="spacer">
</div>
The special <b class="flag">update-plist</b> target does a fairly good job of automatically generating the PLIST.<div class="spacer">
</div>
If <span class="env">PLIST_REPOSITORY</span> points to a directory, all packing-lists from packages generated by <a class="link-man" href="../html1/pkg_create.html">pkg_create(1)</a> during the <b class="flag">package</b> stage are saved in <i class="file">${PLIST_REPOSITORY}/${MACHINE_ARCH}</i> by a script: <i class="file">${PORTSDIR}/infrastructure/bin/register-plist</i>. This script strips some irrelevant information and normalizes the packing-list somehow, and compares it to existing information, looking for relevant changes. Since a package name must always be changed when the packing-list changes, any attempt to replace a packing-list of a given name with a different packing-list will be flagged as an error.<div class="spacer">
</div>
In MULTI_PACKAGES mode, there must be separate COMMENT, DESCR, and PLIST templates for each SUBPACKAGE (and optional distinct MESSAGE, UNMESSAGE files in a similar way). This contrasts with the FLAVORS situation, where all these files will automatically default to the non-flavor version if there is no flavor-specific file around.</div>
<div class="section">
<h1 id="x4f42534f4c4554452054415247455453">OBSOLETE TARGETS</h1><dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">cdrom-packages</b>, <b class="flag">ftp-packages</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Links are now created during the <b class="flag">package</b> target.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">depends-list</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Renamed into <b class="flag">full-build-depends</b>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">{pre,do}-extract</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Don't override. Set <span class="env">EXTRACT_ONLY</span> to nothing and override <b class="flag">post-extract</b> instead.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">{pre,do,post}-fetch</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
These prevented bulk mechanisms from running properly.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">{pre,do,post}-package</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
There is no port that requires special treatment during packaging, as <b class="flag">{pre,do,post}-install</b> should take care of every necessity.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">fetch-list</b>, <b class="flag">mirror-distfiles</b>, <b class="flag">fetch-makefile</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
See <a class="link-man" href="../html7/mirroring-ports.html">mirroring-ports(7)</a> for more efficient and flexible ways to build mirrors.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">obj</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Starting with <span class="unix">OpenBSD&#160;3.3</span>, using <span class="env">WRKOBJDIR</span> no longer creates a symlink between the current directory and a subdirectory of ${WRKOBJDIR}, so <b class="flag">obj</b> is no longer applicable.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">print-depends</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Use <b class="flag">print-build-depends</b> and <b class="flag">print-run-depends</b> instead.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">print-depends-list</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Renamed into <b class="flag">print-build-depends</b>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">print-package-depends</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Renamed into <b class="flag">print-run-depends</b>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">print-package-signature</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Renamed into <b class="flag">print-update-signature</b>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">readme</b>, <b class="flag">readmes</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
replaced by the <i class="file">databases/ports-readmes</i> port, using the Template Toolkit (<i class="file">textproc/p5-Template</i>) instead of hand-coded substitutions.</dd>
</dl>
</div>
<div class="section">
<h1 id="x4f42534f4c455445205641524941424c4553">OBSOLETE VARIABLES</h1><dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">BIN_PACKAGES</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Old user settings. The infrastructure always trusts the repository to contain correct packages. So, if the package name did not change and if it exists in the repository, it will not be rebuilt without manual user action.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">CATn</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
List of formatted manpages, per section.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">CATPREFIX</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Location for storing formatted manpages. Derived directly from <span class="env">PREFIX</span>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">CDROM_PACKAGES</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Old user settings. Base location where packages suitable for a CD-ROM (see PERMIT_PACKAGE_CDROM) will be placed. Now hardwired to <i class="file">${PACKAGE_REPOSITORY}/${MACHINE_ARCH}/cdrom</i>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">COMMENT</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Used to be the name of the comment file for a package. It now holds the comment itself. Some magic has been put in to allow for a seamless transition.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">CONFIGURE_SHARED</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Used to default to --enable-shared or --disable-shared, depending on whether the architecture supported shared libraries.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">DESCR_SRC</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
From <span class="unix">NetBSD</span>. This is DESCR. <span class="unix">OpenBSD</span> does not give a specific name to the generated file. It is not recommended to try to access it directly.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">EXTRACT_AFTER_ARGS</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Was used to cobble together the normal extraction command, as ${EXTRACT_CMD} ${EXTRACT_BEFORE_ARGS} ${EXTRACT_AFTER_ARGS}. Use <span class="env">EXTRACT_CASES</span> instead.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">EXTRACT_BEFORE_ARGS</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Likewise, use <span class="env">EXTRACT_CASES</span> instead.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">EXTRACT_CMD</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Likewise, use <span class="env">EXTRACT_CASES</span> instead.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">FETCH_BEFORE_ARGS</span>, <span class="env">FETCH_AFTER_ARGS</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Set <span class="env">FETCH_CMD</span> to point to a script that does any required special treatment instead.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">FETCH_DEPENDS</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Used to specify dependencies that were needed to fetch files. It is much easier to mirror locally weird distribution files.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">FTP_PACKAGES</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
User settings. Base location where packages suitable for FTP (see PERMIT_PACKAGE_FTP) will be placed. Now hardwired to <i class="file">${PACKAGE_REPOSITORY}/${MACHINE_ARCH}/ftp</i>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">GNU_CONFIGURE</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Use <span class="env">CONFIGURE_STYLE</span> instead.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">HAS_CONFIGURE</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Use <span class="env">CONFIGURE_STYLE</span> instead.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">IGNOREFILES</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Set to the list of files that can't be checksummed. All uses of it have led to postponing the correct action: talking to the software author and getting him to provide versioned archives.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">MANn</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
List of unformatted manpages, per section.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">MANPREFIX</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Location for storing unformatted manpages. Derived directly from <span class="env">PREFIX</span>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">MASTERDIR</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
From <span class="unix">FreeBSD</span>. Used to organize a collection of ports that share most files. <span class="unix">OpenBSD</span> uses a single port with flavors or multi-packages to produce package variations instead.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">MASTER_SITE_SUBDIR</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Contents were used to replace &#8216;%SUBDIR%&#8217; in all <span class="env">MASTER_SITES</span> variables. Since &#8216;%SUBDIR%&#8217; almost always occur at the end of the directory, the simpler <code class="lit">${VARIABLE:=subdir/}</code> construct is now used instead (taken from <span class="unix">NetBSD</span>).</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">MD5_FILE</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Use <span class="env">CHECKSUM_FILE</span> instead.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">MIRROR_DISTFILE</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Use <span class="env">PERMIT_DISTFILES_FTP</span> to determine which files can be mirrored instead. See <a class="link-man" href="../html7/mirroring-ports.html">mirroring-ports(7)</a>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">NEED_VERSION</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Used to set a requirement on a specific revision of <b class="name">bsd.port.mk</b> needed by a port. No longer needed as <b class="name">bsd.port.mk</b> should always be kept up-to-date.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">NO_CONFIGURE</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
If ${CONFIGURE_SCRIPT} does not exist, no automatic configuration will be done anyway.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">NO_DESCRIBE</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
All ports should generate a description.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">NO_EXTRACT</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Set EXTRACT_ONLY= instead.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">NO_INSTALL_MANPAGES</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Use <span class="env">CONFIGURE_STYLE</span> instead.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">NO_MTREE</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Starting with <span class="unix">OpenBSD&#160;2.7</span>, the operating system installation script runs the /usr/local specification globally, instead of embedding it in each package. So packages no longer record an <a class="link-man" href="../html8/mtree.html">mtree(8)</a> specification. Use an explicit &#8216;@exec&#8217; command if needed.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">NO_PACKAGE</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
All ports should generate a package, preferably before install.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">NO_PATCH</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
The absence of a patches directory does the same. Use PATCHDIR and PATCH_LIST if patches need to be changed dynamically.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">NO_SHARED_ARCHS</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Used to be set to the list of platforms that did not support shared libraries. No such architectures remain.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">NO_SHARED_LIBS</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Used to be set to &#8216;Yes&#8217; if platform did not support shared libraries.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">NO_WRKDIR</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
All ports should have a working directory, as this is necessary to store cookies and keep state.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">NO_WRKSUBDIR</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
The same functionality is obtained by setting WRKDIST=${WRKDIR} .</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">NOCLEANDEPENDS</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Use CLEANDEPENDS instead.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">NOMANCOMPRESS</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
<span class="unix">FreeBSD</span> ships with compressed man pages, and uses this variable to control that behavior.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">OBJMACHINE</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Starting with <span class="unix">OpenBSD&#160;3.3</span>, setting <span class="env">WRKOBJDIR</span> creates the whole <span class="env">WRKDIR</span> hierarchy under ${WRKOBJDIR}, so <span class="env">OBJMACHINE</span> is no longer useful.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">OPSYS</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
The operating system. This ports tree is only used on <span class="unix">OpenBSD</span>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">OPSYS_VER</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Use <span class="env">OSREV</span> instead.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">PACKAGES</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Base location for packages built, everything is based on <span class="env">PACKAGE_REPOSITORY</span> now.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">PACKAGING</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Used to be set during package creation, so that the port would test it to tweak some settings at this point. All its effects are now achieved through <span class="env">MULTI_PACKAGES</span>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">PATCH_SITES</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
<span class="env">PATCHFILES</span> used to be retrieved from a separate site list. For greater flexibility, all files are now retrieved from <span class="env">MASTER_SITES</span>, <span class="env">MASTER_SITES0</span>, <span class="env">...</span>, <span class="env">MASTER_SITES9</span>, using a &#8216;:0&#8217; to &#8216;:9&#8217; extension to the file name, e.g.,<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
PATCHFILES=foo.diff.gz 
PATCH_SITES=ftp://ftp.zoinx.org/pub/</pre>
<div class="spacer">
</div>
becomes<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
PATCHFILES=foo.diff.gz:0 
MASTER_SITES0=ftp://ftp.zoinx.org/pub/</pre>
</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">PERMIT_DISTFILES_CDROM</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
The <span class="unix">OpenBSD</span> project does not ship distfiles on cdrom. Concentrate on real questions instead, make sure <span class="env">PERMIT_PACKAGE_CDROM</span> is set correctly.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">PKG_CMD</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Replaced by <span class="env">PKG_CREATE</span>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">PKGREPOSITORY</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Old user settings. See <span class="env">PACKAGE_REPOSITORY</span>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">PKGREPOSITORYBASE</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Old user settings. See <span class="env">PACKAGE_REPOSITORY</span>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">PLIST_SRC</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
From <span class="unix">NetBSD</span>. This is PLIST. <span class="unix">OpenBSD</span> does not give a specific name to the generated file. It is not recommended to try to access them directly.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">PKGNAME</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Used to refer to the full package name, has been superseded by <span class="env">FULLPKGNAME-foo</span>, for <span class="env">SUBPACKAGE</span> -foo . <span class="env">PKGNAME</span> now holds the package name, not taking multi-packages or flavors into account. Most ports are not concerned by this change.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">PLIST_SUBST</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
From <span class="unix">NetBSD</span> and <span class="unix">FreeBSD</span>. Use SUBST_VARS instead. <span class="unix">OpenBSD</span> does not allow general substitutions of the form VAR=value, but uses only a list of variables instead. Most package files gets transformed, instead of only the packing list.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">RESTRICTED</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Port has cryptographic issues. <span class="unix">OpenBSD</span> focuses on <span class="env">PERMIT_PACKAGE_{FTP,CDROM}</span> instead.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">SED_PLIST</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Old pipeline for creating packing-lists at the ports level. Necessary functionality has been integrated directly into <a class="link-man" href="../html1/pkg_create.html">pkg_create(1)</a>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">SCRIPTDIR</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Old location for scripts related to the current port. There is no reason for the semantic distinction, use <span class="env">FILESDIR</span> for those.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">SCRIPTS_ENV</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Used to contain the environment for invoking various scripts. <span class="env">CONFIGURE_ENV</span> and <span class="env">MAKE_ENV</span> are enough.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">SHARED_ONLY</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Had to be set to &#8216;Yes&#8217; if port could only be built on architectures with shared libraries.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">USE_AUTOCONF</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Use <span class="env">CONFIGURE_STYLE</span> instead.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">USE_BZIP2</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
The framework will automatically detect the presence of <i class="file">.tar.bz2</i> files to extract. See also <span class="env">BZIP2</span>, <span class="env">EXTRACT_CASES</span>, and <span class="env">EXTRACT_SUFX</span>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">USE_IMAKE</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Use <span class="env">CONFIGURE_STYLE</span> instead.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">USE_ZIP</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
The framework will automatically detect the presence of <i class="file">.zip</i> files to extract. See also <span class="env">ZIP</span>, <span class="env">EXTRACT_CASES</span>, and <span class="env">EXTRACT_SUFX</span>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">VARNAME</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Use make show=name instead of make show VARNAME=name.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="env">WRKPKG</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Directory used to build package information from the templates under <i class="file">${PKGDIR}</i>. This information is now built on the fly by <a class="link-man" href="../html1/pkg_create.html">pkg_create(1)</a>.</dd>
</dl>
</div>
<div class="section">
<h1 id="x4f42534f4c4554452046494c4553">OBSOLETE FILES</h1><dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="file">{files,patches,pkg}.${ARCH}</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Offensive to introspection, makes it impossible to build a decent sqlports on a given arch. Hasn't been used for a long time, and there are lots of mechanisms such as <span class="env">PKG_ARGS</span> and fragment substitution, or <span class="env">PATCH_LIST</span> to achieve similar results.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="file">Makefile.${ARCH}</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Likewise, offensive to introspection too.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="file">${FILESDIR}/md5</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Renamed to <i class="file">distinfo</i> to match other <span class="unix">BSD</span>, and save directories.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="file">${SCRIPTDIR}/{pre,do,post}-*</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Identical functionality can be obtained through a <b class="flag">{pre,do,post}-*</b> target, invoking the script manually if necessary.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="file">${SCRIPTDIR}/configure</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
No longer invoked automatically. Just inline the instructions in <b class="flag">do-configure</b> in the Makefile, or put the script in ${FILESDIR} and invoke it.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="file">${PKGDIR}/COMMENT</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Use COMMENT variable instead.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="file">${PKGDIR}/DEINSTALL*</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Use @unexec annotations in the packing-list instead.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="file">${PKGDIR}/INSTALL*</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Use @exec annotations in the packing-list instead.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="file">${PKGDIR}/PLIST.{noshared,no-shared,shared}</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Packaging list fragments to handle platforms that did not support shared libraries.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="file">${PKGDIR}/PLIST.sed</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Use PLIST directly. Until revision 1.295, <b class="name">bsd.port.mk</b> did not substitute variables in the packing list unless this special form was used.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="file">${PKGDIR}/REQ*</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Old requirement script. Was mostly unused anyway.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="file">/usr/share/mk/bsd.port.mk</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Original location of <b class="name">bsd.port.mk</b>. The current file lives under <i class="file">${PORTSDIR}/infrastructure/mk/bsd.port.mk</i>, whereas <i class="file">/usr/share/mk/bsd.port.mk</i> is just a stub.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="file">{scripts,files,patches}.${OPSYS}</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
The <span class="unix">OpenBSD</span> ports tree focuses on robustness, not on being portable to other operating systems. In any case, portability should not need to depend on operating system dependent patches.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="file">/usr/local/etc</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Used by <span class="unix">FreeBSD</span> to marshall system configuration files. All <span class="unix">OpenBSD</span> system configuration files are located in <i class="file">/etc</i>, or in a subdirectory of <i class="file">/etc</i>.</dd>
</dl>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../html1/ftp.html">ftp(1)</a>, <a class="link-man" href="../html1/pkg_add.html">pkg_add(1)</a>, <a class="link-man" href="../html1/pkg_create.html">pkg_create(1)</a>, <a class="link-man" href="../html3p/OpenBSD::Intro.html">OpenBSD::Intro(3p)</a>, <a class="link-man" href="../html5/bsd.port.arch.mk.html">bsd.port.arch.mk(5)</a>, <a class="link-man" href="../html5/mk.conf.html">mk.conf(5)</a>, <a class="link-man" href="../html5/port-modules.html">port-modules(5)</a>, <a class="link-man" href="../html7/library-specs.html">library-specs(7)</a>, <a class="link-man" href="../html7/mirroring-ports.html">mirroring-ports(7)</a>, <a class="link-man" href="../html7/packages-specs.html">packages-specs(7)</a>, <a class="link-man" href="../html7/pkgpath.html">pkgpath(7)</a>, <a class="link-man" href="../html7/ports.html">ports(7)</a></div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> The ports mechanism originally came from <span class="unix">FreeBSD</span>. A lot of additions were taken from <span class="unix">NetBSD</span> over the seminal years.<div class="spacer">
</div>
Since 1998, the framework has been systematically cleaned-up and reorganized to remove bugs. New features have been carefully introduced, trying hard to avoid inconsistencies.<div class="spacer">
</div>
FLAVORS, MULTI_PACKAGES and FAKE are <span class="unix">OpenBSD</span> improvements. Most recent additions do not come from another <span class="unix">BSD</span>.</div>
<div class="section">
<h1 id="x4255475320414e44204c494d49544154494f4e53">BUGS AND LIMITATIONS</h1> <span class="env">LOCALBASE</span>, <span class="env">X11BASE</span>, <span class="env">SYSCONFDIR</span> and <span class="env">PREFIX</span> are not heeded consistently. Most of the ports tree will probably fall apart if one tries to build/use stuff elsewhere.</div>
</div>
</body>
</html>

