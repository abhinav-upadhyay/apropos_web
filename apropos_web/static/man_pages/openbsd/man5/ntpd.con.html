<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/posix/style.css" type="text/css" media="all"/>
<title>
NTPD.CONF(5)</title>
</head>
<body>
<div class="mandoc">
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">ntpd.conf</b> &#8212; <span class="desc">Network Time Protocol daemon configuration file</span></div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> This manual page describes the format of the <a class="link-man" href="../html8/ntpd.html">ntpd(8)</a> configuration file.<div class="spacer">
</div>
<b class="name">ntpd.conf</b> has the following format:<div class="spacer">
</div>
Empty lines and lines beginning with the &#8216;#&#8217; character are ignored.<div class="spacer">
</div>
Keywords may be specified multiple times within the configuration file. The basic configuration options are as follows:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">listen on</b> <i class="arg">address</i> [<span class="opt"><b class="cmd">rtable</b> <i class="arg">table-id</i></span>]</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Specify a local IP address or a hostname the <a class="link-man" href="../html8/ntpd.html">ntpd(8)</a> daemon should listen on. If it appears multiple times, <a class="link-man" href="../html8/ntpd.html">ntpd(8)</a> will listen on each given address. If &#8216;*&#8217; is given as an address, <a class="link-man" href="../html8/ntpd.html">ntpd(8)</a> will listen on all local addresses using the specified routing table. <a class="link-man" href="../html8/ntpd.html">ntpd(8)</a> does not listen on any address by default. The optional <b class="cmd">rtable</b> keyword will specify which routing table to listen on. By default <a class="link-man" href="../html8/ntpd.html">ntpd(8)</a> will listen using the current routing table. For example:<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
listen on *</pre>
<div class="spacer">
</div>
or<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
listen on 127.0.0.1 
listen on ::1 
listen on 127.0.0.1 rtable 4</pre>
</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">sensor</b> <i class="arg">device</i> [<span class="opt"><b class="cmd">correction</b> <i class="arg">microseconds</i></span>] [<span class="opt"><b class="cmd">weight</b> <i class="arg">weight-value</i></span>] [<span class="opt"><b class="cmd">refid</b> <i class="arg">string</i></span>] [<span class="opt"><b class="cmd">stratum</b> <i class="arg">stratum-value</i></span>]</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Specify a timedelta sensor device <a class="link-man" href="../html8/ntpd.html">ntpd(8)</a> should use. The sensor can be specified multiple times: <a class="link-man" href="../html8/ntpd.html">ntpd(8)</a> will use each given sensor that actually exists. Non-existent sensors are ignored. If &#8216;*&#8217; is given as device name, <a class="link-man" href="../html8/ntpd.html">ntpd(8)</a> will use all timedelta sensors it finds. <a class="link-man" href="../html8/ntpd.html">ntpd(8)</a> does not use any timedelta sensor by default. For example:<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
sensor * 
sensor nmea0</pre>
<div class="spacer">
</div>
An optional correction in microseconds can be given to compensate for the sensor's offset. The maximum correction is 127 seconds. For example, if a DCF77 receiver is lagging 70ms behind actual time:<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
sensor udcf0 correction 70000</pre>
<div class="spacer">
</div>
The optional <b class="cmd">weight</b> keyword permits finer control over the relative importance of time sources (servers or sensor devices). Weights are specified in the range 1 to 10; if no weight is given, the default is 1. A server with a weight of 5, for example, will have five times more influence on time offset calculation than a server with a weight of 1.<div class="spacer">
</div>
An optional reference ID string - up to 4 ASCII characters - can be given to publish the sensor type to clients. RFC 2030 suggests some common reference identifiers, but new identifiers &quot;can be contrived as appropriate.&quot; If an ID string is not given, <a class="link-man" href="../html8/ntpd.html">ntpd(8)</a> will use a generic reference ID. For example:<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
sensor nmea0 refid GPS</pre>
<div class="spacer">
</div>
A stratum value other than the default of 1 can be assigned using the stratum keyword.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">server</b> <i class="arg">address</i> [<span class="opt"><b class="cmd">weight</b> <i class="arg">weight-value</i></span>]</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Specify the IP address or the hostname of an NTP server to synchronize to. If it appears multiple times, <a class="link-man" href="../html8/ntpd.html">ntpd(8)</a> will try to synchronize to all of the servers specified. If a hostname resolves to multiple IPv4 and/or IPv6 addresses, <a class="link-man" href="../html8/ntpd.html">ntpd(8)</a> uses the first address. If it does not get a reply, <a class="link-man" href="../html8/ntpd.html">ntpd(8)</a> retries with the next address and continues to do so until a working address is found. For example:<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
server 10.0.0.2 weight 5 
server ntp.example.org weight 1</pre>
<div class="spacer">
</div>
To provide redundancy, it is good practice to configure multiple servers. In general, best accuracy is obtained by using servers that have a low network latency.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">servers</b> <i class="arg">address</i> [<span class="opt"><b class="cmd">weight</b> <i class="arg">weight-value</i></span>]</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
As with <b class="flag">server</b>, specify the IP address or hostname of an NTP server to synchronize to. If it appears multiple times, <a class="link-man" href="../html8/ntpd.html">ntpd(8)</a> will try to synchronize to all of the servers specified. Should the hostname resolve to multiple IP addresses, <a class="link-man" href="../html8/ntpd.html">ntpd(8)</a> will try to synchronize to all of them. For example:<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
servers pool.ntp.org 
servers pool.ntp.org weight 5</pre>
</dd>
</dl>
</div>
<div class="section">
<h1 id="x434f4e53545241494e5453">CONSTRAINTS</h1> <a class="link-man" href="../html8/ntpd.html">ntpd(8)</a> can be configured to query the &#8216;Date&#8217; from trusted HTTPS servers via TLS. This time information is not used for precision but acts as an authenticated constraint, thereby reducing the impact of unauthenticated NTP man-in-the-middle attacks. Received NTP packets with time information falling outside of a range near the constraint will be discarded and such NTP servers will be marked as invalid.<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">constraint from</b> <i class="arg">url</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Specify the URL, IP address or the hostname of an HTTPS server to provide a constraint. If <b class="cmd">constraint from</b> is used more than once, <a class="link-man" href="../html8/ntpd.html">ntpd(8)</a> will calculate a median constraint from all the servers specified.<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
server ntp.example.org 
constraint from www.example.com</pre>
</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">constraints from</b> <i class="arg">url</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
As with <b class="cmd">constraint from</b>, specify the URL, IP address or the hostname of an HTTPS server to provide a constraint. Should the hostname resolve to multiple IP addresses, <a class="link-man" href="../html8/ntpd.html">ntpd(8)</a> will calculate a median constraint from all of them. For example:<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
servers pool.ntp.org 
constraints from &quot;https://www.google.com/&quot;</pre>
</dd>
</dl>
</div>
<div class="section">
<h1 id="x46494c4553">FILES</h1><dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/etc/ntpd.conf</i></dt>
<dd class="list-tag" style="margin-left: 17.00ex;">
default <a class="link-man" href="../html8/ntpd.html">ntpd(8)</a> configuration file</dd>
</dl>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../html8/ntpctl.html">ntpctl(8)</a>, <a class="link-man" href="../html8/ntpd.html">ntpd(8)</a>, <a class="link-man" href="../html8/sysctl.html">sysctl(8)</a></div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> The <b class="name">ntpd.conf</b> file format first appeared in <span class="unix">OpenBSD&#160;3.6</span>.</div>
</div>
</body>
</html>

