<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/posix/style.css" type="text/css" media="all"/>
<title>
EXPORTS(5)</title>
</head>
<body>
<div class="mandoc">
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">exports</b> &#8212; <span class="desc">define remote mount points for NFS mount requests</span></div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> The <b class="name">exports</b> file specifies remote mount points for the NFS mount protocol per the NFS server specification; see <span class="ref-title">Network File System Protocol Specification,</span> RFC 1094, Appendix A and <span class="ref-title">NFS: Network File System Version 3 Specification,</span> RFC 1813, Appendix I.<div class="spacer">
</div>
Each line in the file (other than comment lines that begin with a &#8220;#&#8221;) specifies the mount point(s) and export flags within one local server filesystem for one or more hosts. A host may be specified only once for each local filesystem on the server and there may be only one default entry for each server filesystem that applies to all other hosts. The latter exports the filesystem to the &#8220;world&#8221; and should be used only when the filesystem contains public information.<div class="spacer">
</div>
In a mount entry, the first field(s) specify the directory path(s) within a server filesystem that can be mounted on by the corresponding client(s). There are two forms of this specification. The first is to list all mount points as absolute directory paths separated by whitespace. The second is to specify the pathname of the root of the filesystem followed by the <b class="flag">-alldirs</b> flag; this form allows the host(s) to mount at any point within the filesystem, including regular files. The pathnames must not have any symbolic links in them and should not have any &#8220;.&#8221; or &#8220;..&#8221; components. Mount points for a filesystem may appear on multiple lines each with different sets of hosts and export options.<div class="spacer">
</div>
The second component of a line specifies how the filesystem is to be exported to the host set. The option flags specify whether the filesystem is exported read-only or read-write and how the client UID is mapped to user credentials on the server.<div class="spacer">
</div>
Export options are specified as follows:<div class="spacer">
</div>
<b class="flag">-maproot</b><code class="none">=</code><i class="arg">user</i> The credential of the specified user is used for remote access by root. The credential includes all the groups to which the user is a member on the local machine (see <a class="link-man" href="../html1/id.html">id(1)</a>). The <i class="arg">user</i> may be specified by name or number.<div class="spacer">
</div>
<b class="flag">-maproot</b><code class="none">=</code><i class="arg">user:group1:group2:...</i> The colon separated list is used to specify the precise credential to be used for remote access by root. The elements of the list may be either names or numbers. Note that user: should be used to distinguish a credential containing no groups from a complete credential for that user.<div class="spacer">
</div>
<b class="flag">-mapall</b><code class="none">=</code><i class="arg">user</i> or <b class="flag">-mapall</b><code class="none">=</code><i class="arg">user:group1:group2:...</i> Specifies a mapping for all client UIDs (including root) using the same semantics as <b class="flag">-maproot</b>.<div class="spacer">
</div>
The option <b class="flag">-r</b> is a synonym for <b class="flag">-maproot</b> in an effort to be backward compatible with older export file formats.<div class="spacer">
</div>
In the absence of <b class="flag">-maproot</b> and <b class="flag">-mapall</b> options, remote accesses by root will result in using a credential of -2:-2. All other users will be mapped to their remote credential. If a <b class="flag">-maproot</b> option is given, remote access by root will be mapped to that credential instead of -2:-2. If a <b class="flag">-mapall</b> option is given, all users (including root) will be mapped to that credential in place of their own.<div class="spacer">
</div>
The <b class="flag">-ro</b> option specifies that the filesystem should be exported read-only (default read/write). The option <b class="flag">-o</b> is a synonym for <b class="flag">-ro</b> in an effort to be backward compatible with older export file formats.<div class="spacer">
</div>
The third component of a line specifies the host set to which the line applies. The set may be specified in three ways. The first way is to list the host name(s) separated by whitespace. (Standard internet &#8220;dot&#8221; addresses may be used in place of names.) The second way is to specify a &#8220;netgroup&#8221; as defined in the netgroup file (see <a class="link-man" href="../html5/netgroup.html">netgroup(5)</a>). The third way is to specify an internet subnetwork using a network and network mask that is defined as the set of all hosts with addresses within the subnetwork. This latter approach requires less overhead within the kernel and is recommended for cases where the export line refers to a large number of clients within an administrative subnet.<div class="spacer">
</div>
The first two cases are specified by simply listing the name(s) separated by whitespace. All names are checked to see if they are &#8220;netgroup&#8221; names first and are assumed to be hostnames otherwise. Using the full domain specification for a hostname can normally circumvent the problem of a host that has the same name as a netgroup. The third case is specified by the flag <b class="flag">-network</b><code class="none">=</code><i class="arg">netname</i> and optionally <b class="flag">-mask</b><code class="none">=</code><i class="arg">netmask</i>. If the mask is not specified, it will default to the mask for that network class (A, B or C; see <a class="link-man" href="../html3/inet_addr.html">inet_addr(3)</a>).<div class="spacer">
</div>
For example:<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
/usr /usr/local -maproot=0:10 friends 
/usr -maproot=daemon grumpy.cis.uoguelph.ca 131.104.48.16 
/usr -ro -mapall=nobody 
/u -maproot=bin: -network=131.104.48 -mask=255.255.255.0 
/u2 -maproot=root friends 
/u2 -alldirs -network=cis-net -mask=cis-mask</pre>
<div class="spacer">
</div>
Given that <i class="file">/usr</i>, <i class="file">/u</i> and <i class="file">/u2</i> are local filesystem mount points, the above example specifies the following: <i class="file">/usr</i> is exported to hosts <span class="emph">friends</span> where <span class="emph">friends</span> is specified in the netgroup file with users mapped to their remote credentials and root mapped to UID 0 and GID 10. It is exported read-write and the hosts in &#8220;friends&#8221; can mount either <i class="file">/usr</i> or <i class="file">/usr/local</i>. It is exported to <span class="emph">131.104.48.16</span> and <span class="emph">grumpy.cis.uoguelph.ca</span> with users mapped to their remote credentials and root mapped to the user and groups associated with &#8220;daemon&#8221;; it is exported to the rest of the world as read-only with all users mapped to the user and groups associated with &#8220;nobody&#8221;.<div class="spacer">
</div>
<i class="file">/u</i> is exported to all hosts on the subnetwork <span class="emph">131.104.48</span> with root mapped to the UID for &#8220;bin&#8221; and with no group access.<div class="spacer">
</div>
<i class="file">/u2</i> is exported to the hosts in &#8220;friends&#8221; with root mapped to UID and groups associated with &#8220;root&#8221;; it is exported to all hosts on network &#8220;cis-net&#8221; allowing mounts at any directory within /u2.</div>
<div class="section">
<h1 id="x46494c4553">FILES</h1><dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/etc/exports</i></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
default remote mount-point file</dd>
</dl>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../html5/netgroup.html">netgroup(5)</a>, <a class="link-man" href="../html8/mountd.html">mountd(8)</a>, <a class="link-man" href="../html8/nfsd.html">nfsd(8)</a>, <a class="link-man" href="../html8/showmount.html">showmount(8)</a></div>
<div class="section">
<h1 id="x42554753">BUGS</h1> The export options are tied to the local mount points in the kernel and must be non-contradictory for any exported subdirectory of the local server mount point. It is recommended that all exported directories within the same server filesystem be specified on adjacent lines going down the tree. You cannot specify a hostname that is also the name of a netgroup. Specifying the full domain specification for a hostname can normally circumvent the problem.<div class="spacer">
</div>
Regarding <b class="flag">-alldirs</b>, because NFS mount filehandles are filesystem wide the <b class="flag">-alldirs</b> option applies to exports of the entire filesystem -- even mountpoints that are higher up elsewhere in the directory hierarchy. Hence if the server has a filesystem <i class="file">/export</i> and you wished to export the sub-directory<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
/export/root/client -alldirs client.foo.com</pre>
<div class="spacer">
</div>
you must realize that this also allows mounts to be requested against other locations in the <i class="file">/export</i> filesystem; thus the host client.foo.com is also permitted to mount the directory <i class="file">/export/root/client2</i> if it exists.</div>
</div>
</body>
</html>

