<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/posix/style.css" type="text/css" media="all"/>
<title>
ISAKMPD.CONF(5)</title>
</head>
<body>
<div class="mandoc">
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">isakmpd.conf</b> &#8212; <span class="desc">configuration file for isakmpd</span></div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> <b class="name">isakmpd.conf</b> is the configuration file for the <a class="link-man" href="../html8/isakmpd.html">isakmpd(8)</a> daemon, managing security association and key management for the IPsec layer of the kernel's networking stack.<div class="spacer">
</div>
The file is of a well known type of format called .INI style, named after the suffix used by an overrated windowing environment for its configuration files. This format consists of sections, each beginning with a line looking like:<div class="spacer">
</div>
<pre style="margin-left: 0.00ex;" class="lit display">
[<span class="symb">Section name</span>]</pre>
Between the brackets is the name of the section following this section header. Inside a section many tag/value pairs can be stored, each one looking like:<div class="spacer">
</div>
<pre style="margin-left: 0.00ex;" class="lit display">
<i class="arg">Tag</i>=<i class="arg">Value</i></pre>
The current line can be extended over multiple lines using a backslash (&#8216;\&#8217;). Comments can be put anywhere in the file using a hash mark (&#8216;#&#8217;), and extend to the end of the current line. Care should be taken when commenting out multi-line text: the comment remains in effect until the end of the entire current line.<div class="spacer">
</div>
Often the right-hand side values consist of other section names. This results in a tree structure. Some values are treated as a list of several scalar values. Such lists always use a comma character as the separator. Some values are formatted like this: X,Y:Z, which is an offer/accept syntax, where X is a value we offer and Y:Z is a range of accepted values, inclusive.<div class="spacer">
</div>
To activate changes to <b class="name">isakmpd.conf</b> without restarting <a class="link-man" href="../html8/isakmpd.html">isakmpd(8)</a>, send a <span class="define">SIGHUP</span> signal to the daemon process.</div>
<div class="section">
<h1 id="x4155544f1e47454e455241544544205041525453204f462054484520434f4e46494755524154494f4e">AUTO-GENERATED PARTS OF THE CONFIGURATION</h1> Some predefined section names are recognized by the daemon, avoiding the need to fully specify the Main Mode transforms and Quick Mode suites, protocols, and transforms.<div class="spacer">
</div>
For Main Mode:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-inset">
<dt class="list-inset" style="margin-top: 0.00em;">
<i class="arg">cipher</i><code class="none">-</code><i class="arg">hash</i>[<span class="opt">-<i class="arg">group</i></span>][<span class="opt">-RSA_SIG</span>]</dt>
<dd class="list-inset">
</dd>
</dl>
<div class="spacer">
</div>
where:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 6.00ex;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="arg">cipher</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
is either BLF, 3DES, CAST, AES, AES-128, AES-192 or AES-256</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="arg">hash</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
is either MD5, SHA, or SHA2-{256,384,512}</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="arg">group</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
is either GRP1, GRP2, GRP5, GRP14, or GRP15</dd>
</dl>
<div class="spacer">
</div>
For Quick Mode:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-inset">
<dt class="list-inset" style="margin-top: 0.00em;">
<code class="none">QM-</code><i class="arg">proto</i>[<span class="opt">-TRP</span>]<code class="none">-</code><i class="arg">cipher</i>[<span class="opt">-<i class="arg">hash</i></span>][<span class="opt">-PFS[<span class="opt">-<i class="arg">group</i></span>]</span>]<code class="none">-SUITE</code></dt>
<dd class="list-inset">
</dd>
</dl>
<div class="spacer">
</div>
where:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 6.00ex;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="arg">proto</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
is either ESP or AH</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="arg">cipher</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
is either 3DES, CAST, BLF, AES, AES-128, AES-192, AES-256, AESCTR, AESCTR-128, AESCTR-192, AESCTR-256, AESGCM-128, AESGCM-192, AESGCM-256, AESGMAC-128, AESGMAC-192, AESGMAC-256 or NULL</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="arg">hash</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
is either MD5, SHA, RIPEMD, or SHA2-{256,384,512}</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="arg">group</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
is either GRP1, GRP2, GRP5, GRP14, or GRP15</dd>
</dl>
<div class="spacer">
</div>
For example, AES-SHA2-256 means: AES encryption, SHA2-256 hash, and authorization by pre-shared keys. Adding &quot;-RSA_SIG&quot; will enable public key authentication, e.g. AES-SHA2-256-RSA_SIG. Similarly, QM-ESP-3DES-SHA-PFS-SUITE means: ESP protocol, 3DES encryption, SHA hash, and use Perfect Forward Secrecy.<div class="spacer">
</div>
Unless explicitly stated with -GRP1, 2, 5, 14 or 15, transforms and PFS suites use DH group 2. There are currently no predefined ESP+AH Quick Mode suites.<div class="spacer">
</div>
The predefinitions include some default values for the special sections &quot;General&quot;, &quot;Keynote&quot;, &quot;X509-certificates&quot;, and &quot;Default-phase-1-configuration&quot;. These default values are presented in the example below.<div class="spacer">
</div>
All autogenerated values can be overridden by manual entries by using the same section and tag names in the configuration file. In particular, the default phase 1 (Main or Aggressive Mode) and phase 2 (Quick Mode) lifetimes can be overridden by these tags under the &quot;General&quot; section:<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
[General] 
Default-phase-1-lifetime=	3600,60:86400 
Default-phase-2-lifetime=	1200,60:86400</pre>
<div class="spacer">
</div>
The Main Mode lifetime currently defaults to one hour (minimum 60 seconds, maximum 1 day). The Quick Mode lifetime defaults to 20 minutes (minimum 60 seconds, maximum 1 day).<div class="spacer">
</div>
Also, the default phase 1 ID can be set by creating a &#10216;<span class="symb">Phase1-ID</span>&#10217; section, as shown below, and adding this tag under the &quot;General&quot; section:<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
[General] 
Default-phase-1-ID=		Phase1-ID-name 
 
[Phase1-ID-name] 
ID-type=			USER_FQDN 
Name=				foo@bar.com</pre>
</div>
<div class="section">
<h1 id="x524f4f5453">ROOTS</h1><dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-hang">
<dt class="list-hang" style="margin-top: 1.00em;">
[<span class="symb">General</span>]</dt>
<dd class="list-hang" style="margin-left: 8.00ex;">
Generic global configuration parameters<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="emph">Acquire-Only</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
If this tag is defined, <a class="link-man" href="../html8/isakmpd.html">isakmpd(8)</a> will not set up flows automatically. This is useful when flows are configured with <a class="link-man" href="../html8/ipsecctl.html">ipsecctl(8)</a> or by other programs like <a class="link-man" href="../html8/bgpd.html">bgpd(8)</a>. Thus <a class="link-man" href="../html8/isakmpd.html">isakmpd(8)</a> only takes care of the SA establishment.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="emph">Check-interval</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
The interval between watchdog checks of connections we want up at all times, in seconds. The default value is 60 seconds.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="emph">Default-phase-1-ID</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Optional default phase 1 ID name.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="emph">Default-phase-1-lifetime</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
The default lifetime for autogenerated transforms (phase 1). If unspecified, the value 3600,60:86400 is used as the default.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="emph">Default-phase-2-lifetime</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
The default lifetime for autogenerated suites (phase 2). If unspecified, the value 1200,60:86400 is used as the default.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="emph">Default-phase-2-suites</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
A list of phase 2 suites that will be used when establishing dynamic SAs. If left unspecified, QM-ESP-3DES-SHA-PFS-SUITE is used as the default.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="emph">DPD-check-interval</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
The interval between RFC 3706 (Dead Peer Detection) messages, in seconds. The default value is 0 (zero), which means DPD is disabled.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="emph">Exchange-max-time</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
How many seconds should an exchange maximally take to set up before we give up.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="emph">Listen-on</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
A list of IP addresses or interface names OK to listen on. This list is used as a filter for the set of addresses the interfaces configured provides. This means that we won't see if an address given here does not exist on this host, and thus no error is given for that case.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="emph">Loglevel</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
A list of the form <i class="arg">class</i>=<i class="arg">level</i>, where both <i class="arg">class</i> and <i class="arg">level</i> are numbers. This is similar to the <b class="flag">-D</b> command line switch of <a class="link-man" href="../html8/isakmpd.html">isakmpd(8)</a>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="emph">Logverbose</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
If this tag is defined, whatever the value is, verbose logging is enabled. This is similar to the <b class="flag">-v</b> command line switch of <a class="link-man" href="../html8/isakmpd.html">isakmpd(8)</a>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="emph">NAT-T-Keepalive</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
The number of seconds between NAT-T keepalive messages, sent by the peer behind NAT to keep the mapping active. Defaults to 20.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="emph">Policy-file</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
The name of the file that contains <a class="link-man" href="../html4/keynote.html">keynote(4)</a> policies. The default is <i class="file">/etc/isakmpd/isakmpd.policy</i>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="emph">Pubkey-directory</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
The directory in which <b class="name">isakmpd.conf</b> looks for explicitly trusted public keys. The default is <i class="file">/etc/isakmpd/pubkeys</i>. Read <a class="link-man" href="../html8/isakmpd.html">isakmpd(8)</a> for the required naming convention of the files in here.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="emph">Renegotiate-on-HUP</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
If this tag is defined, whatever the value is, <a class="link-man" href="../html8/isakmpd.html">isakmpd(8)</a> will renegotiate all current phase 2 SAs when the daemon receives a <span class="define">SIGHUP</span> signal, or an &#8216;R&#8217; is sent to the FIFO interface (see <a class="link-man" href="../html8/isakmpd.html">isakmpd(8)</a>).</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="emph">Retransmits</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
How many times should a message be retransmitted before giving up.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="emph">Shared-SADB</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
If this tag is defined, whatever the value is, some semantics of <b class="name">isakmpd.conf</b> are changed so that multiple instances can run on top of one SADB and set up SAs with each other. Specifically this means replay protection will not be asked for, and errors that can occur when updating an SA with its parameters a 2nd time will be ignored.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="emph">Use-Keynote</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
This tag controls the use of <a class="link-man" href="../html4/keynote.html">keynote(4)</a> policy checking. The default value is &#8220;yes&#8221;, which enables the policy checking. When set to any other value, policies will not be checked. This is useful when policies for flows and SA establishment are arranged by other programs like <a class="link-man" href="../html8/ipsecctl.html">ipsecctl(8)</a> or <a class="link-man" href="../html8/bgpd.html">bgpd(8)</a>.</dd>
</dl>
</dd>
<dt class="list-hang" style="margin-top: 1.00em;">
[<span class="symb">Phase 1</span>]</dt>
<dd class="list-hang" style="margin-left: 8.00ex;">
ISAKMP SA negotiation parameter root<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="emph">Default</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
A name of the default ISAKMP peer. Incoming phase 1 connections from other IP addresses will use this peer name. This name is used as the section name for further information to be found. Look at &#10216;<span class="symb">ISAKMP-peer</span>&#10217; below.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
&#10216;<span class="emph">IP-address</span>&#10217;</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
A name of the ISAKMP peer at the given IP address.</dd>
</dl>
</dd>
<dt class="list-hang" style="margin-top: 1.00em;">
[<span class="symb">Phase 2</span>]</dt>
<dd class="list-hang" style="margin-left: 8.00ex;">
IPsec SA negotiation parameter root<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="emph">Connections</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
A list of directed IPsec &quot;connection&quot; names that should be brought up automatically, either on first use if the system supports it, or at startup of the daemon. These names are section names where further information can be found. Look at &#10216;<span class="symb">IPsec-connection</span>&#10217; below. Normally any connections mentioned here are treated as part of the &quot;Passive-connection&quot; list we present below; however there is a flag, <span class="emph">Active-only</span>, that disables this behaviour. This too is mentioned in the &#10216;<span class="symb">IPsec-connection</span>&#10217; section, in the &quot;Flags&quot; tag.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="emph">Passive-connections</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
A list of IPsec &quot;connection&quot; names we recognize and accept initiations for. These names are section names where further information can be found. Look at &#10216;<span class="symb">IPsec-connection</span>&#10217; below. Currently only the Local-ID and Remote-ID tags are looked at in those sections, as they are matched against the IDs given by the initiator.</dd>
</dl>
</dd>
<dt class="list-hang" style="margin-top: 1.00em;">
[<span class="symb">KeyNote</span>]</dt>
<dd class="list-hang" style="margin-left: 8.00ex;">
KeyNote configuration section<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="emph">Credential-directory</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
A directory containing directories named after IDs (IP addresses, &#8220;user@domain&#8221;, or hostnames) that contain files named &#8220;credentials&#8221; and &#8220;private_key&#8221;.<div class="spacer">
</div>
The credentials file contains <a class="link-man" href="../html4/keynote.html">keynote(4)</a> credentials that are sent to a remote IKE daemon when we use the associated ID, or credentials that we may want to consider when doing an exchange with a remote IKE daemon that uses that ID. Note that, in the former case, the last credential in the file MUST contain our public key in its Licensees field. More than one credentials may exist in the file. They are separated by whitelines (the format is essentially the same as that of the policy file). The credentials are of the same format as the policies described in <a class="link-man" href="../html5/isakmpd.policy.html">isakmpd.policy(5)</a>. The only difference is that the Authorizer field contains a public key, and the assertion is signed. Signed assertions can be generated using the <a class="link-man" href="../html1/keynote.html">keynote(1)</a> utility.<div class="spacer">
</div>
The private_key file contains the private RSA key we use for authentication. If the directory (and the files) exist, they take precedence over X509-based authentication.</dd>
</dl>
</dd>
<dt class="list-hang" style="margin-top: 1.00em;">
[<span class="symb">X509-Certificates</span>]</dt>
<dd class="list-hang" style="margin-left: 8.00ex;">
X509-certificate configuration section<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="emph">Accept-self-signed</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
If this tag is defined, whatever the value is, certificates that do not originate from a trusted CA but are self-signed will be accepted.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="emph">Ca-directory</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
A directory containing PEM certificates of certification authorities that we trust to sign other certificates. Note that for a CA to be really trusted, it needs to be somehow referred to by policy, in <a class="link-man" href="../html5/isakmpd.policy.html">isakmpd.policy(5)</a>. The certificates in this directory are used for the actual X.509 authentication and for cross-referencing policies that refer to Distinguished Names (DNs). Keeping a separate directory (as opposed to integrating policies and X.509 CA certificates) allows for maintenance of a list of &quot;well known&quot; CAs without actually having to trust all (or any) of them.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="emph">Cert-directory</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
A directory containing PEM certificates that we trust to be valid. These certificates are used in preference to those passed in messages and are required to have a subjectAltName extension containing the certificate holder identity; usually IP address, FQDN, or User FQDN.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="emph">Private-key</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
The private key matching the public key of our certificate (which should be in the &quot;Cert-directory&quot;, and have an appropriate subjectAltName field).</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="emph">Private-key-directory</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
A directory containing private keys named after an ID (IP addresses, &#8220;user@domain&#8221;, or hostnames).</dd>
</dl>
</dd>
</dl>
</div>
<div class="section">
<h1 id="x52454645525245441e544f2053454354494f4e53">REFERRED-TO SECTIONS</h1><dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-hang">
<dt class="list-hang" style="margin-top: 1.00em;">
&#10216;<span class="symb">ISAKMP-peer</span>&#10217;</dt>
<dd class="list-hang" style="margin-left: 6.00ex;">
Parameters for negotiation with an ISAKMP peer<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="emph">Address</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
If existent, the IP address of the peer.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="emph">Authentication</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
If existent, authentication data for this specific peer. In the case of a pre-shared key, this is the key value itself.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="emph">Configuration</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
The name of the ISAKMP-configuration section to use. Look at &#10216;<span class="symb">ISAKMP-configuration</span>&#10217; below. If unspecified, defaults to &quot;Default-phase-1-configuration&quot;.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="emph">Flags</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
A comma-separated list of flags controlling the further handling of the ISAKMP SA. Currently there are no specific ISAKMP SA flags defined.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="emph">ID</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
If existent, the name of the section that describes the local client ID that we should present to our peer. If not present, it defaults to the address of the local interface we are sending packets over to the remote daemon. Look at &#10216;<span class="symb">Phase1-ID</span>&#10217; below.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="emph">Local-address</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
The Local IP address to use, if we are multi-homed, or have aliases.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="emph">Phase</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
The constant &#8216;1&#8217;, as ISAKMP-peers and IPsec-connections really are handled by the same code inside <a class="link-man" href="../html8/isakmpd.html">isakmpd(8)</a>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="emph">Port</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
For UDP, the UDP port number to send to. This is optional; the default value is 500 which is the IANA-registered number for ISAKMP.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="emph">Remote-ID</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
If existent, the name of the section that describes the remote client ID we expect the remote daemon to send us. If not present, it defaults to the address of the remote daemon. Look at &#10216;<span class="symb">Phase1-ID</span>&#10217; below.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="emph">Transport</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
The name of the transport protocol; defaults to UDP.</dd>
</dl>
</dd>
<dt class="list-hang" style="margin-top: 1.00em;">
&#10216;<span class="symb">Phase1-ID</span>&#10217;</dt>
<dd class="list-hang" style="margin-left: 6.00ex;">
Parameters for Phase 1 negotiation<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="emph">Address</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
If the ID-type is <code class="lit">IPV4_ADDR</code> or <code class="lit">IPV6_ADDR</code>, this tag should exist and be an IP address.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="emph">ID-type</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
The ID type as given by the RFC specifications. For phase 1 this is currently <code class="lit">IPV4_ADDR</code>, <code class="lit">IPV4_ADDR_SUBNET</code>, <code class="lit">IPV6_ADDR</code>, <code class="lit">IPV6_ADDR_SUBNET</code>, <code class="lit">FQDN</code>, <code class="lit">USER_FQDN</code>, or <code class="lit">KEY_ID</code>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="emph">Name</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
If the ID-type is <code class="lit">FQDN</code>, <code class="lit">USER_FQDN</code>, or <code class="lit">KEY_ID</code>, this tag should exist and contain a domain name, user@domain, or other identifying string respectively.<div class="spacer">
</div>
In the case of <code class="lit">KEY_ID</code>, note that the IKE protocol allows any octet sequence to be sent or received under this payload, potentially including non-printable ones. <a class="link-man" href="../html8/isakmpd.html">isakmpd(8)</a> can only transmit printable <code class="lit">KEY_ID</code> payloads, but can receive and process arbitrary <code class="lit">KEY_ID</code> payloads. This effectively means that non-printable <code class="lit">KEY_ID</code> remote identities cannot be verified through this means, although it is still possible to do so through <a class="link-man" href="../html5/isakmpd.policy.html">isakmpd.policy(5)</a>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="emph">Netmask</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
If the ID-type is <code class="lit">IPV4_ADDR_SUBNET</code> or <code class="lit">IPV6_ADDR_SUBNET</code>, this tag should exist and be a network subnet mask.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="emph">Network</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
If the ID-type is <code class="lit">IPV4_ADDR_SUBNET</code> or <code class="lit">IPV6_ADDR_SUBNET</code>, this tag should exist and be a network address.</dd>
</dl>
</dd>
<dt class="list-hang" style="margin-top: 1.00em;">
&#10216;<span class="symb">ISAKMP-configuration</span>&#10217;</dt>
<dd class="list-hang" style="margin-left: 6.00ex;">
Parameters for ISAKMP configuration<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="emph">DOI</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
The domain of interpretation as given by the RFCs. Normally <code class="lit">IPSEC</code>. If unspecified, defaults to <code class="lit">IPSEC</code>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="emph">EXCHANGE_TYPE</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
The exchange type as given by the RFCs. For main mode this is <code class="lit">ID_PROT</code> and for aggressive mode it is <code class="lit">AGGRESSIVE</code>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="emph">Transforms</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
A list of proposed transforms to use for protecting the ISAKMP traffic. These are actually names for sections further describing the transforms. Look at &#10216;<span class="symb">ISAKMP-transform</span>&#10217; below.</dd>
</dl>
</dd>
<dt class="list-hang" style="margin-top: 1.00em;">
&#10216;<span class="symb">ISAKMP-transform</span>&#10217;</dt>
<dd class="list-hang" style="margin-left: 6.00ex;">
Parameters for ISAKMP authentication<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="emph">AUTHENTICATION_METHOD</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
The authentication method as the RFCs name it, or ANY.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="emph">ENCRYPTION_ALGORITHM</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
The encryption algorithm as the RFCs name it, or ANY to denote that any encryption algorithm proposed will be accepted.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="emph">GROUP_DESCRIPTION</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
The group used for Diffie-Hellman exponentiations, or ANY. The names are symbolic, like <code class="lit">MODP_768</code>, <code class="lit">MODP_1024</code>, <code class="lit">EC_155</code>, and <code class="lit">EC_185</code>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="emph">HASH_ALGORITHM</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
The hash algorithm as the RFCs name it, or ANY.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="emph">KEY_LENGTH</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
For encryption algorithms with variable key length, this is where the offered/accepted keylengths are described. The value is of the offer-accept kind described above.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="emph">Life</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
A list of lifetime descriptions, or ANY. In the former case, each element is in itself a name of the section that defines the lifetime. Look at &#10216;<span class="symb">Lifetime</span>&#10217; below. If it is set to ANY, then any type of proposed lifetime type and value will be accepted.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="emph">PRF</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
The algorithm to use for the keyed pseudo-random function (used for key derivation and authentication in phase 1), or ANY.</dd>
</dl>
</dd>
<dt class="list-hang" style="margin-top: 1.00em;">
&#10216;<span class="symb">Lifetime</span>&#10217;</dt>
<dd class="list-hang" style="margin-left: 6.00ex;">
Parameters for connection duration<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="emph">LIFE_DURATION</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
An offer/accept kind of value; see above. Can also be set to ANY.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="emph">LIFE_TYPE</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
<code class="lit">SECONDS</code> or <code class="lit">KILOBYTES</code> depending on the type of the duration. Notice that this field may NOT be set to ANY.</dd>
</dl>
</dd>
<dt class="list-hang" style="margin-top: 1.00em;">
&#10216;<span class="symb">IPsec-connection</span>&#10217;</dt>
<dd class="list-hang" style="margin-left: 6.00ex;">
Parameters for IPsec connection configuration<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="emph">Configuration</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
The name of the IPsec-configuration section to use. Look at &#10216;<span class="symb">IPsec-configuration</span>&#10217; below.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="emph">Flags</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
A comma-separated list of flags controlling the further handling of the IPsec SA. Currently only one flag is defined:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="emph">Active-only</span></dt>
<dd class="list-tag" style="margin-left: 12.00ex;">
If this flag is given and this &#10216;<span class="symb">IPsec-connection</span>&#10217; is part of the phase 2 connections we automatically keep up, it will not automatically be used for accepting connections from the peer.</dd>
</dl>
</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="emph">ISAKMP-peer</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
The name of the ISAKMP-peer to talk to in order to set up this connection. The value is the name of an &#10216;<span class="symb">ISAKMP-peer</span>&#10217; section. See above.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="emph">Local-ID</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
If existent, the name of the section that describes the optional local client ID that we should present to our peer. It is also used when we act as responders to find out what &#10216;<span class="symb">IPsec-connection</span>&#10217; we are dealing with. Look at &#10216;<span class="symb">IPsec-ID</span>&#10217; below.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="emph">Phase</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
The constant &#8216;2&#8217;, as ISAKMP-peers and IPsec-connections really are handled by the same code inside <a class="link-man" href="../html8/isakmpd.html">isakmpd(8)</a>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="emph">Remote-ID</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
If existent, the name of the section that describes the optional remote client ID that we should present to our peer. It is also used when we act as responders to find out what &#10216;<span class="symb">IPsec-connection</span>&#10217; we are dealing with. Look at &#10216;<span class="symb">IPsec-ID</span>&#10217; below.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="emph">PF-Tag</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Add a <a class="link-man" href="../html4/pf.html">pf(4)</a> tag to all packets of phase 2 SAs created for this connection. This will allow matching packets for this connection by defining rules in <a class="link-man" href="../html5/pf.conf.html">pf.conf(5)</a> using the <span class="emph">tagged</span> keyword.<div class="spacer">
</div>
The following variables can be used in tags to include information from the remote peer on runtime:<div class="spacer">
</div>
<dl style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 6.00ex;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="arg">$id</i></dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
The remote phase 1 ID. It will be expanded to <i class="arg">id-type/id-value</i>, e.g. <i class="arg">fqdn/foo.bar.org</i>.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="arg">$domain</i></dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
Extract the domain from IDs of type FQDN or UFQDN.</dd>
</dl>
<div class="spacer">
</div>
For example, if the ID is <i class="arg">fqdn/foo.bar.org</i> or <i class="arg">ufqdn/user@bar.org</i>, &#8220;PF-Tag=ipsec-$domain&#8221; expands to &#8220;ipsec-bar.org&#8221;. The variable expansion for the <i class="arg">PF-Tag</i> directive occurs only at runtime, not during configuration file parse time.</dd>
</dl>
</dd>
<dt class="list-hang" style="margin-top: 1.00em;">
&#10216;<span class="symb">IPsec-configuration</span>&#10217;</dt>
<dd class="list-hang" style="margin-left: 6.00ex;">
Parameters for IPsec configuration<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="emph">DOI</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
The domain of interpretation as given by the RFCs. Normally <code class="lit">IPSEC</code>. If unspecified, defaults to <code class="lit">IPSEC</code>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="emph">EXCHANGE_TYPE</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
The exchange type as given by the RFCs. For quick mode this is <code class="lit">QUICK_MODE</code>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="emph">Suites</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
A list of protection suites (bundles of protocols) usable for protecting the IP traffic. Each of the list elements is a name of an &#10216;<span class="symb">IPsec-suite</span>&#10217; section. See below.</dd>
</dl>
</dd>
<dt class="list-hang" style="margin-top: 1.00em;">
&#10216;<span class="symb">IPsec-suite</span>&#10217;</dt>
<dd class="list-hang" style="margin-left: 6.00ex;">
Parameters for IPsec protection suite configuration<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="emph">Protocols</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
A list of the protocols included in this protection suite. Each of the list elements is a name of an &#10216;<span class="symb">IPsec-protocol</span>&#10217; section. See below.</dd>
</dl>
</dd>
<dt class="list-hang" style="margin-top: 1.00em;">
&#10216;<span class="symb">IPsec-protocol</span>&#10217;</dt>
<dd class="list-hang" style="margin-left: 6.00ex;">
Parameters for IPsec protocol configuration<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="emph">PROTOCOL_ID</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
The protocol as given by the RFCs. Acceptable values are currently <code class="lit">IPSEC_AH</code> and <code class="lit">IPSEC_ESP</code>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="emph">ReplayWindow</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
The size of the window used for replay protection. This is normally left alone. Look at the ESP and AH RFCs for a better description.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="emph">Transforms</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
A list of transforms usable for implementing the protocol. Each of the list elements is a name of an &#10216;<span class="symb">IPsec-transform</span>&#10217; section. See below.</dd>
</dl>
</dd>
<dt class="list-hang" style="margin-top: 1.00em;">
&#10216;<span class="symb">IPsec-transform</span>&#10217;</dt>
<dd class="list-hang" style="margin-left: 6.00ex;">
Parameters for IPsec transform configuration<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="emph">AUTHENTICATION_ALGORITHM</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
The optional authentication algorithm in the case of this being an ESP transform.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="emph">ENCAPSULATION_MODE</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
The encapsulation mode as given by the RFCs. This means TRANSPORT or TUNNEL.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="emph">GROUP_DESCRIPTION</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
An optional (provides PFS if present) Diffie-Hellman group description. The values are the same as those for GROUP_DESCRIPTION in &#10216;<span class="symb">ISAKMP-transform</span>&#10217; sections shown above.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="emph">KEY_LENGTH</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
For encryption algorithms with variable key length, this is where the offered keylength is described.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="emph">Life</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
List of lifetimes, each element is a &#10216;<span class="symb">Lifetime</span>&#10217; section name.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="emph">TRANSFORM_ID</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
The transform ID as given by the RFCs.</dd>
</dl>
</dd>
<dt class="list-hang" style="margin-top: 1.00em;">
&#10216;<span class="symb">IPsec-ID</span>&#10217;</dt>
<dd class="list-hang" style="margin-left: 6.00ex;">
Parameters for IPsec ID configuration<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="emph">Address</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
If the ID-type is <code class="lit">IPV4_ADDR</code> or <code class="lit">IPV6_ADDR</code>, this tag should exist and be an IP address, an interface name, or the <span class="emph">default</span> keyword. If an interface is used, the first address of the appropriate family will be used. The <span class="emph">default</span> keyword uses the interface associated with the default route. In the case of IPv6, link-local addresses will be skipped if addresses which are not link-local exist. If the address on the interface changes <a class="link-man" href="../html8/isakmpd.html">isakmpd(8)</a> will not track the change. The configuration must be reloaded to learn the new address.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="emph">ID-type</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
The ID type as given by the RFCs. For IPsec this is currently <code class="lit">IPV4_ADDR</code>, <code class="lit">IPV6_ADDR</code>, <code class="lit">IPV4_ADDR_SUBNET</code>, or <code class="lit">IPV6_ADDR_SUBNET</code>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="emph">Netmask</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
If the ID-type is <code class="lit">IPV4_ADDR_SUBNET</code> or <code class="lit">IPV6_ADDR_SUBNET</code>, this tag should exist and be a network subnet mask or an interface. When an interface is specified, the netmask is the mask associated with the <span class="emph">Network</span>. The <span class="emph">default</span> keyword uses the interface associated with the default route.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="emph">Network</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
If the ID-type is <code class="lit">IPV4_ADDR_SUBNET</code> or <code class="lit">IPV6_ADDR_SUBNET</code>, this tag should exist and be a network address, an interface, or the <span class="emph">default</span> keyword. When an interface is specified, the network is selected as with the <span class="emph">Address</span> tag.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="emph">Port</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
If the ID-type is <code class="lit">IPV4_ADDR</code>, <code class="lit">IPV4_ADDR_SUBNET</code>, <code class="lit">IPV6_ADDR</code>, or <code class="lit">IPV6_ADDR_SUBNET</code>, this tag indicates what source or destination port is allowed to be transported over the SA (depending on whether this is a local or remote ID). If left unspecified, all ports of the given transport protocol will be transmitted (or permitted) over the SA. The <span class="emph">Protocol</span> tag must be specified in conjunction with this tag.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="emph">Protocol</span></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
If the ID-type is <code class="lit">IPV4_ADDR</code>, <code class="lit">IPV4_ADDR_SUBNET</code>, <code class="lit">IPV6_ADDR</code>, or <code class="lit">IPV6_ADDR_SUBNET</code>, this tag indicates what transport protocol should be transmitted over the SA. If left unspecified, all transport protocols between the two address (ranges) will be sent (or permitted) over that SA.</dd>
</dl>
</dd>
</dl>
</div>
<div class="section">
<h1 id="x4f544845522053454354494f4e53">OTHER SECTIONS</h1><dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-hang">
<dt class="list-hang" style="margin-top: 1.00em;">
&#10216;<span class="symb">IKECFG-ID</span>&#10217;</dt>
<dd class="list-hang" style="margin-left: 8.00ex;">
Parameters to use with IKE mode-config. One ID per peer.<div class="spacer">
</div>
An IKECFG-ID is written as [&lt;ID-type&gt;/&lt;name&gt;]. The following ID types are supported:<div class="spacer">
</div>
<dl style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 6.00ex;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
IPv4</dt>
<dd class="list-tag" style="margin-left: 9.00ex;">
[ipv4/A.B.C.D]</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
IPv6</dt>
<dd class="list-tag" style="margin-left: 9.00ex;">
[ipv6/abcd:abcd::ab:cd]</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
FQDN</dt>
<dd class="list-tag" style="margin-left: 9.00ex;">
[fqdn/foo.bar.org]</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
UFQDN</dt>
<dd class="list-tag" style="margin-left: 9.00ex;">
[ufqdn/user@foo.bar.org]</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
ASN1_DN</dt>
<dd class="list-tag" style="margin-left: 9.00ex;">
[asn1_dn//C=aa/O=cc/...] (Note the double slashes as the DN itself starts with a &#8216;/&#8217;.)</dd>
</dl>
<div class="spacer">
</div>
Each section specifies what configuration values to return to the peer requesting IKE mode-config. Currently supported values are:<div class="spacer">
</div>
<dl style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 6.00ex;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
<span class="emph">Address</span></dt>
<dd class="list-tag" style="margin-left: 13.00ex;">
The peer's network address.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<span class="emph">Netmask</span></dt>
<dd class="list-tag" style="margin-left: 13.00ex;">
The peer's netmask.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<span class="emph">Nameserver</span></dt>
<dd class="list-tag" style="margin-left: 13.00ex;">
The IP address of a DNS nameserver.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<span class="emph">WINS-server</span></dt>
<dd class="list-tag" style="margin-left: 13.00ex;">
The IP address of a WINS server.</dd>
</dl>
</dd>
<dt class="list-hang" style="margin-top: 1.00em;">
&#10216;<span class="symb">Initiator-ID</span>&#10217;</dt>
<dd class="list-hang" style="margin-left: 8.00ex;">
Parameters for peer initiator configuration<div class="spacer">
</div>
During phase 1 negotiation <a class="link-man" href="../html8/isakmpd.html">isakmpd(8)</a> looks for a pre-shared key in the &#10216;<span class="symb">ISAKMP-peer</span>&#10217; section. If no Authentication data is specified in that section, and <a class="link-man" href="../html8/isakmpd.html">isakmpd(8)</a> is not the initiator, it looks for Authentication data in a section named after the initiator's phase 1 ID. This allows mobile users with dynamic IP addresses to have different shared secrets.<div class="spacer">
</div>
This only works for aggressive mode because in main mode the remote initiator ID would not yet be known. Note, however, that use of aggressive mode is discouraged. See <i class="link-sec"><a class="link-sec" href="#x43415645415453">CAVEATS</a></i>, below.<div class="spacer">
</div>
The name of the &#10216;<span class="symb">Initiator-ID</span>&#10217; section depends on the ID type sent by the initiator. Currently this can be:<div class="spacer">
</div>
<dl style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 6.00ex;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
IPv4</dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
[A.B.C.D]</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
IPv6</dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
[abcd:abcd::ab:cd]</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
FQDN</dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
[foo.bar.org]</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
UFQDN</dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
[user@foo.bar.org]</dd>
</dl>
</dd>
</dl>
</div>
<div class="section">
<h1 id="x46494c4553">FILES</h1><dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="file">/etc/isakmpd/isakmpd.conf</i></dt>
<dd class="list-tag" style="margin-left: 25.00ex;">
The default <a class="link-man" href="../html8/isakmpd.html">isakmpd(8)</a> configuration file.</dd>
</dl>
</div>
<div class="section">
<h1 id="x4558414d504c4553">EXAMPLES</h1> An example of a configuration file:<div class="spacer">
</div>
<pre style="margin-left: 0.00ex;" class="lit display">
# A configuration sample for the isakmpd ISAKMP/Oakley (aka IKEv1) daemon. 
 
[General] 
Listen-on=		10.1.0.2 
 
# Incoming phase 1 negotiations are multiplexed on the source IP address 
[Phase 1] 
10.1.0.1=		ISAKMP-peer-west 
 
# These connections are walked over after config file parsing and told 
# to the application layer so that it will inform us when traffic wants to 
# pass over them.  This means we can do on-demand keying. 
[Phase 2] 
Connections=		IPsec-east-west 
 
# Default values are commented out. 
[ISAKMP-peer-west] 
Phase=			1 
#Transport=		udp 
Local-address=		10.1.0.2 
Address=		10.1.0.1 
#Port=			isakmp 
#Port=			500 
#Configuration=		Default-phase-1-configuration 
Authentication=		mekmitasdigoat 
#Flags= 
 
[IPsec-east-west] 
Phase=			2 
ISAKMP-peer=		ISAKMP-peer-west 
Configuration=		Default-quick-mode 
Local-ID=		Net-east 
Remote-ID=		Net-west 
#Flags= 
 
[Net-west] 
ID-type=		IPV4_ADDR_SUBNET 
Network=		192.168.1.0 
Netmask=		255.255.255.0 
 
[Net-east] 
ID-type=		IPV4_ADDR_SUBNET 
Network=		192.168.2.0 
Netmask=		255.255.255.0 
 
# Quick mode descriptions 
 
[Default-quick-mode] 
EXCHANGE_TYPE=		QUICK_MODE 
Suites=			QM-ESP-3DES-SHA-PFS-SUITE,QM-ESP-AES-SHA-PFS-SUITE 
 
# Data for an IKE mode-config peer 
[asn1_dn//C=SE/L=SomeCity/O=SomeCompany/CN=SomePeer.company.com] 
Address=		192.168.1.123 
Netmask=		255.255.255.0 
Nameserver=		192.168.1.10 
WINS-server=		192.168.1.11 
 
# pre-shared key based on initiator's phase 1 ID 
[foo.bar.org] 
Authentication=		mekmitasdigoat 
 
# 
# ##################################################################### 
# All configuration data below this point is not required as the example 
# uses the predefined Main Mode transform and Quick Mode suite names. 
# It is included here for completeness.  Note the default values for the 
# [General] and [X509-certificates] sections just below. 
# ##################################################################### 
# 
 
[General] 
Policy-file=		/etc/isakmpd/isakmpd.policy 
Retransmits=		3 
Exchange-max-time=	120 
 
# KeyNote credential storage 
[KeyNote] 
Credential-directory=	/etc/isakmpd/keynote/ 
 
# Certificates stored in PEM format 
[X509-certificates] 
CA-directory=           /etc/isakmpd/ca/ 
Cert-directory=         /etc/isakmpd/certs/ 
CRL-directory=		/etc/isakmpd/crls/ 
Private-key=		/etc/isakmpd/private/local.key 
 
# Default phase 1 description (Main Mode) 
 
[Default-phase-1-configuration] 
EXCHANGE_TYPE=		ID_PROT 
Transforms=		3DES-SHA 
 
# Main mode transforms 
###################### 
 
# 3DES 
 
[3DES-SHA] 
ENCRYPTION_ALGORITHM=	3DES_CBC 
HASH_ALGORITHM=		SHA 
AUTHENTICATION_METHOD=	PRE_SHARED 
GROUP_DESCRIPTION=	MODP_1024 
Life=			LIFE_MAIN_MODE 
 
# AES 
 
[AES-SHA] 
ENCRYPTION_ALGORITHM=	AES_CBC 
KEY_LENGTH=		128,128:256 
HASH_ALGORITHM=		SHA 
AUTHENTICATION_METHOD=	PRE_SHARED 
GROUP_DESCRIPTION=	MODP_1024 
Life=			LIFE_MAIN_MODE 
 
# AES-128 
 
[AES-128-SHA] 
ENCRYPTION_ALGORITHM=   AES_CBC 
KEY_LENGTH=             128,128:128 
HASH_ALGORITHM=         SHA 
AUTHENTICATION_METHOD=  PRE_SHARED 
GROUP_DESCRIPTION=      MODP_1024 
Life=                   LIFE_MAIN_MODE 
 
# AES-192 
 
[AES-192-SHA] 
ENCRYPTION_ALGORITHM=   AES_CBC 
KEY_LENGTH=             192,192:192 
HASH_ALGORITHM=         SHA 
AUTHENTICATION_METHOD=  PRE_SHARED 
GROUP_DESCRIPTION=      MODP_1024 
Life=                   LIFE_MAIN_MODE 
 
# AES-256 
 
[AES-256-SHA] 
ENCRYPTION_ALGORITHM=   AES_CBC 
KEY_LENGTH=             256,256:256 
HASH_ALGORITHM=         SHA 
AUTHENTICATION_METHOD=  PRE_SHARED 
GROUP_DESCRIPTION=      MODP_1024 
Life=                   LIFE_MAIN_MODE 
 
# Blowfish 
 
[BLF-SHA] 
ENCRYPTION_ALGORITHM=	BLOWFISH_CBC 
KEY_LENGTH=		128,96:192 
HASH_ALGORITHM=		SHA 
AUTHENTICATION_METHOD=	PRE_SHARED 
GROUP_DESCRIPTION=	MODP_1024 
Life=			LIFE_MAIN_MODE 
 
# Blowfish, using DH group 4 (non-default) 
[BLF-SHA-EC185] 
ENCRYPTION_ALGORITHM=	BLOWFISH_CBC 
KEY_LENGTH=		128,96:192 
HASH_ALGORITHM=		SHA 
AUTHENTICATION_METHOD=	PRE_SHARED 
GROUP_DESCRIPTION=	EC2N_185 
Life=			LIFE_MAIN_MODE 
 
# Quick mode protection suites 
############################## 
 
# 3DES 
 
[QM-ESP-3DES-SHA-SUITE] 
Protocols=		QM-ESP-3DES-SHA 
 
[QM-ESP-3DES-SHA-PFS-SUITE] 
Protocols=		QM-ESP-3DES-SHA-PFS 
 
# AES 
 
[QM-ESP-AES-SHA-SUITE] 
Protocols=              QM-ESP-AES-SHA 
 
[QM-ESP-AES-SHA-PFS-SUITE] 
Protocols=              QM-ESP-AES-SHA-PFS 
 
# AES-128 
 
[QM-ESP-AES-128-SHA-SUITE] 
Protocols=              QM-ESP-AES-128-SHA 
 
[QM-ESP-AES-128-SHA-PFS-SUITE] 
Protocols=              QM-ESP-AES-128-SHA-PFS 
 
# AES-192 
 
[QM-ESP-AES-192-SHA-SUITE] 
Protocols=              QM-ESP-AES-192-SHA 
 
[QM-ESP-AES-192-SHA-PFS-SUITE] 
Protocols=              QM-ESP-AES-192-SHA-PFS 
 
# AES-256 
 
[QM-ESP-AES-256-SHA-SUITE] 
Protocols=              QM-ESP-AES-256-SHA 
 
[QM-ESP-AES-256-SHA-PFS-SUITE] 
Protocols=              QM-ESP-AES-256-SHA-PFS 
 
# AH 
 
[QM-AH-MD5-SUITE] 
Protocols=		QM-AH-MD5 
 
[QM-AH-MD5-PFS-SUITE] 
Protocols=		QM-AH-MD5-PFS 
 
# AH + ESP (non-default) 
 
[QM-AH-MD5-ESP-3DES-SHA-SUITE] 
Protocols=		QM-AH-MD5,QM-ESP-3DES-SHA 
 
[QM-ESP-3DES-SHA-AH-MD5-SUITE] 
Protocols=		QM-ESP-3DES-SHA,QM-AH-MD5 
 
# Quick mode protocols 
 
# 3DES 
 
[QM-ESP-3DES-SHA] 
PROTOCOL_ID=		IPSEC_ESP 
Transforms=		QM-ESP-3DES-SHA-XF 
 
[QM-ESP-3DES-SHA-PFS] 
PROTOCOL_ID=		IPSEC_ESP 
Transforms=		QM-ESP-3DES-SHA-PFS-XF 
 
[QM-ESP-3DES-SHA-TRP] 
PROTOCOL_ID=		IPSEC_ESP 
Transforms=		QM-ESP-3DES-SHA-TRP-XF 
 
# AES 
 
[QM-ESP-AES-SHA] 
PROTOCOL_ID=		IPSEC_ESP 
Transforms=		QM-ESP-AES-SHA-XF 
 
[QM-ESP-AES-SHA-PFS] 
PROTOCOL_ID=		IPSEC_ESP 
Transforms=		QM-ESP-AES-SHA-PFS-XF 
 
[QM-ESP-AES-SHA-TRP] 
PROTOCOL_ID=		IPSEC_ESP 
Transforms=		QM-ESP-AES-SHA-TRP-XF 
 
# AES-128 
 
[QM-ESP-AES-128-SHA] 
PROTOCOL_ID=            IPSEC_ESP 
Transforms=             QM-ESP-AES-128-SHA-XF 
 
[QM-ESP-AES-128-SHA-PFS] 
PROTOCOL_ID=            IPSEC_ESP 
Transforms=             QM-ESP-AES-128-SHA-PFS-XF 
 
[QM-ESP-AES-128-SHA-TRP] 
PROTOCOL_ID=            IPSEC_ESP 
Transforms=             QM-ESP-AES-128-SHA-TRP-XF 
 
# AES-192 
 
[QM-ESP-AES-192-SHA] 
PROTOCOL_ID=            IPSEC_ESP 
Transforms=             QM-ESP-AES-192-SHA-XF 
 
[QM-ESP-AES-192-SHA-PFS] 
PROTOCOL_ID=            IPSEC_ESP 
Transforms=             QM-ESP-AES-192-SHA-PFS-XF 
 
[QM-ESP-AES-192-SHA-TRP] 
PROTOCOL_ID=            IPSEC_ESP 
Transforms=             QM-ESP-AES-192-SHA-TRP-XF 
 
# AES-256 
 
[QM-ESP-AES-256-SHA] 
PROTOCOL_ID=            IPSEC_ESP 
Transforms=             QM-ESP-AES-256-SHA-XF 
 
[QM-ESP-AES-256-SHA-PFS] 
PROTOCOL_ID=            IPSEC_ESP 
Transforms=             QM-ESP-AES-256-SHA-PFS-XF 
 
[QM-ESP-AES-256-SHA-TRP] 
PROTOCOL_ID=            IPSEC_ESP 
Transforms=             QM-ESP-AES-256-SHA-TRP-XF 
 
 
# AH MD5 
 
[QM-AH-MD5] 
PROTOCOL_ID=		IPSEC_AH 
Transforms=		QM-AH-MD5-XF 
 
[QM-AH-MD5-PFS] 
PROTOCOL_ID=		IPSEC_AH 
Transforms=		QM-AH-MD5-PFS-XF 
 
# Quick mode transforms 
 
# 3DES 
 
[QM-ESP-3DES-SHA-XF] 
TRANSFORM_ID=		3DES 
ENCAPSULATION_MODE=	TUNNEL 
AUTHENTICATION_ALGORITHM=	HMAC_SHA 
Life=			LIFE_QUICK_MODE 
 
[QM-ESP-3DES-SHA-PFS-XF] 
TRANSFORM_ID=		3DES 
ENCAPSULATION_MODE=	TUNNEL 
AUTHENTICATION_ALGORITHM=	HMAC_SHA 
GROUP_DESCRIPTION=	MODP_1024 
Life=			LIFE_QUICK_MODE 
 
[QM-ESP-3DES-SHA-TRP-XF] 
TRANSFORM_ID=		3DES 
ENCAPSULATION_MODE=	TRANSPORT 
AUTHENTICATION_ALGORITHM=	HMAC_SHA 
Life=			LIFE_QUICK_MODE 
 
# AES 
 
[QM-ESP-AES-SHA-XF] 
TRANSFORM_ID=		AES 
ENCAPSULATION_MODE=	TUNNEL 
AUTHENTICATION_ALGORITHM=	HMAC_SHA 
KEY_LENGTH=		128 
Life=			LIFE_QUICK_MODE 
 
[QM-ESP-AES-SHA-PFS-XF] 
TRANSFORM_ID=		AES 
ENCAPSULATION_MODE=	TUNNEL 
AUTHENTICATION_ALGORITHM=	HMAC_SHA 
GROUP_DESCRIPTION=	MODP_1024 
KEY_LENGTH=		128 
Life=			LIFE_QUICK_MODE 
 
[QM-ESP-AES-SHA-TRP-XF] 
TRANSFORM_ID=		AES 
ENCAPSULATION_MODE=	TRANSPORT 
AUTHENTICATION_ALGORITHM=	HMAC_SHA 
KEY_LENGTH=		128 
Life=			LIFE_QUICK_MODE 
 
# AES-128 
 
[QM-ESP-AES-128-SHA-XF] 
TRANSFORM_ID=           AES 
ENCAPSULATION_MODE=     TUNNEL 
AUTHENTICATION_ALGORITHM=       HMAC_SHA 
KEY_LENGTH=             128 
Life=                   LIFE_QUICK_MODE 
 
[QM-ESP-AES-128-SHA-PFS-XF] 
TRANSFORM_ID=           AES 
ENCAPSULATION_MODE=     TUNNEL 
AUTHENTICATION_ALGORITHM=       HMAC_SHA 
GROUP_DESCRIPTION=      MODP_1024 
KEY_LENGTH=             128 
Life=                   LIFE_QUICK_MODE 
 
[QM-ESP-AES-128-SHA-TRP-XF] 
TRANSFORM_ID=           AES 
ENCAPSULATION_MODE=     TRANSPORT 
AUTHENTICATION_ALGORITHM=       HMAC_SHA 
KEY_LENGTH=             128 
Life=                   LIFE_QUICK_MODE 
 
# AES-192 
 
[QM-ESP-AES-192-SHA-XF] 
TRANSFORM_ID=           AES 
ENCAPSULATION_MODE=     TUNNEL 
AUTHENTICATION_ALGORITHM=       HMAC_SHA 
KEY_LENGTH=             192 
Life=                   LIFE_QUICK_MODE 
 
[QM-ESP-AES-192-SHA-PFS-XF] 
TRANSFORM_ID=           AES 
ENCAPSULATION_MODE=     TUNNEL 
AUTHENTICATION_ALGORITHM=       HMAC_SHA 
GROUP_DESCRIPTION=      MODP_1024 
KEY_LENGTH=             192 
Life=                   LIFE_QUICK_MODE 
 
[QM-ESP-AES-192-SHA-TRP-XF] 
TRANSFORM_ID=           AES 
ENCAPSULATION_MODE=     TRANSPORT 
AUTHENTICATION_ALGORITHM=       HMAC_SHA 
KEY_LENGTH=             192 
Life=                   LIFE_QUICK_MODE 
 
# AES-256 
 
[QM-ESP-AES-256-SHA-XF] 
TRANSFORM_ID=           AES 
ENCAPSULATION_MODE=     TUNNEL 
AUTHENTICATION_ALGORITHM=       HMAC_SHA 
KEY_LENGTH=             256 
Life=                   LIFE_QUICK_MODE 
 
[QM-ESP-AES-256-SHA-PFS-XF] 
TRANSFORM_ID=           AES 
ENCAPSULATION_MODE=     TUNNEL 
AUTHENTICATION_ALGORITHM=       HMAC_SHA 
GROUP_DESCRIPTION=      MODP_1024 
KEY_LENGTH=             256 
Life=                   LIFE_QUICK_MODE 
 
[QM-ESP-AES-256-SHA-TRP-XF] 
TRANSFORM_ID=           AES 
ENCAPSULATION_MODE=     TRANSPORT 
AUTHENTICATION_ALGORITHM=       HMAC_SHA 
KEY_LENGTH=             256 
Life=                   LIFE_QUICK_MODE 
 
 
# AH 
 
[QM-AH-MD5-XF] 
TRANSFORM_ID=		MD5 
ENCAPSULATION_MODE=	TUNNEL 
AUTHENTICATION_ALGORITHM=	HMAC_MD5 
Life=			LIFE_QUICK_MODE 
 
[QM-AH-MD5-PFS-XF] 
TRANSFORM_ID=		MD5 
ENCAPSULATION_MODE=	TUNNEL 
GROUP_DESCRIPTION=	MODP_1024 
Life=			LIFE_QUICK_MODE 
 
[Sample-Life-Time] 
LIFE_TYPE=		SECONDS 
LIFE_DURATION=		3600,1800:7200 
 
[Sample-Life-Volume] 
LIFE_TYPE=		KILOBYTES 
LIFE_DURATION=		1000,768:1536</pre>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../html1/keynote.html">keynote(1)</a>, <a class="link-man" href="../html1/openssl.html">openssl(1)</a>, <a class="link-man" href="../html4/ipsec.html">ipsec(4)</a>, <a class="link-man" href="../html4/keynote.html">keynote(4)</a>, <a class="link-man" href="../html5/isakmpd.policy.html">isakmpd.policy(5)</a>, <a class="link-man" href="../html8/isakmpd.html">isakmpd(8)</a></div>
<div class="section">
<h1 id="x43415645415453">CAVEATS</h1> Using aggressive mode is discouraged due to various design problems. If your peer only supports aggressive mode, please consider replacing that peer with a sane ISAKMP/IKE implementation. For details see <a class="link-ext" href="http://www.usenix.org/publications/login/1999-12/features/harmful.html">http://www.usenix.org/publications/login/1999-12/features/harmful.html</a>.</div>
<div class="section">
<h1 id="x42554753">BUGS</h1> The RFCs do not permit differing DH groups in the same proposal for aggressive and quick mode exchanges. Mixing both PFS and non-PFS suites in a quick mode proposal is not possible, as PFS implies using a DH group.</div>
</div>
</body>
</html>

