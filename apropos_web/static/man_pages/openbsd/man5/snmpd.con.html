<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/posix/style.css" type="text/css" media="all"/>
<title>
SNMPD.CONF(5)</title>
</head>
<body>
<div class="mandoc">
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">snmpd.conf</b> &#8212; <span class="desc">Simple Network Management Protocol daemon configuration file</span></div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> <b class="name">snmpd.conf</b> is the configuration file for the <a class="link-man" href="../html8/snmpd.html">snmpd(8)</a> daemon.</div>
<div class="section">
<h1 id="x53454354494f4e53">SECTIONS</h1> The <b class="name">snmpd.conf</b> file is divided into three main sections:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">Macros</span></dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
User-defined variables may be defined and used later, simplifying the configuration file.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">Global Configuration</span></dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
Global runtime settings for <a class="link-man" href="../html8/snmpd.html">snmpd(8)</a>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">User Configuration</span></dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
USM user definitions.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="symb">OID Configuration</span></dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
Custom configuration of SNMP object identifiers and values.</dd>
</dl>
<div class="spacer">
</div>
The current line can be extended over multiple lines using a backslash (&#8216;\&#8217;). Comments can be put anywhere in the file using a hash mark (&#8216;#&#8217;), and extend to the end of the current line. Care should be taken when commenting out multi-line text: the comment is effective until the end of the entire block.<div class="spacer">
</div>
Argument names not beginning with a letter, digit, or underscore must be quoted.<div class="spacer">
</div>
Additional configuration files can be included with the <b class="cmd">include</b> keyword, for example:<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
include &quot;/etc/snmpd.conf.local&quot;</pre>
</div>
<div class="section">
<h1 id="x4d4143524f53">MACROS</h1> Macros can be defined that will later be expanded in context. Macro names must start with a letter, digit, or underscore, and may contain any of those characters. Macro names may not be reserved words (for example, <b class="cmd">community</b>, <b class="cmd">system</b>, or <b class="cmd">oid</b>). Macros are not expanded inside quotes.<div class="spacer">
</div>
For example:<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
ext_addr=&quot;192.168.0.1&quot; 
listen on $ext_addr</pre>
</div>
<div class="section">
<h1 id="x474c4f42414c20434f4e46494755524154494f4e">GLOBAL CONFIGURATION</h1> The following options can be set globally:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">filter-routes</b> (<b class="cmd">yes</b> | <b class="cmd">no</b>)</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
If set to <b class="cmd">yes</b>, ask the kernel to filter route update messages on the routing socket. Routing table information will not be available, but CPU use will be reduced during bulk updates. The default is <b class="cmd">no</b>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">listen on</b> <i class="arg">address</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Specify the local address <a class="link-man" href="../html8/snmpd.html">snmpd(8)</a> should listen on for incoming SNMP messages.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">read-only community</b> <i class="arg">string</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Specify the name of the read-only community. The default value is <i class="arg">public</i>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">read-write</b> (<b class="cmd">community</b> <i class="arg">string</i> | <b class="cmd">disabled</b>)</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Specify the name of the read-write community, or disallow writes completely. The default value is <i class="arg">private</i>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">seclevel</b> (<b class="cmd">none</b> | <b class="cmd">auth</b> | <b class="cmd">enc</b>)</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Specify the lowest security level that <a class="link-man" href="../html8/snmpd.html">snmpd(8)</a> accepts:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;margin-left: 5.00ex;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">none</b></dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
Both authentication and encryption of messages is optional. This is the default value.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">auth</b></dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
Authentication of messages is mandatory. <a class="link-man" href="../html8/snmpd.html">snmpd(8)</a> will discard any messages that don't have a valid digest. Encryption of messages is optional.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">enc</b></dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
Messages must be encrypted and must have a valid digest for authentication. Otherwise they will be discarded.</dd>
</dl>
<div class="spacer">
</div>
If the chosen value is different from <b class="cmd">none</b> <a class="link-man" href="../html8/snmpd.html">snmpd(8)</a> will accept only SNMPv3 requests since older versions neither support authentication nor encryption.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">socket</b> &#8220;<i class="arg">path</i>&#8221; [<span class="opt"><b class="cmd">restricted</b> | <b class="cmd">agentx</b></span>]</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Create a control socket at <i class="arg">path</i>. If <b class="cmd">restricted</b> is specified, a restricted control socket will be created. If <b class="cmd">agentx</b> is specified, a socket which speaks the AgentX protocol will be created. Multiple <b class="cmd">restricted</b> and <b class="cmd">agentx</b> sockets may be created. By default <i class="file">/var/run/snmpd.sock</i> is created and no other sockets are created.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">system contact</b> <i class="arg">string</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Specify the name or description of the system contact, typically a name or an email address. The default value is <i class="arg">root@hostname</i> using the hostname of the local machine.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">system description</b> <i class="arg">string</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Specify a description of the local system. The default value is the operating system identification as printed by the <a class="link-man" href="../html1/uname.html">uname(1)</a> command using the <b class="flag">-a</b> flag:<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
OpenBSD myhost.example.com 4.2 GENERIC#595 i386</pre>
</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">system location</b> <i class="arg">string</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Specify the string describing the location of the local system, typically a physical location. The default value is an empty string.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">system name</b> <i class="arg">string</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Specify the name of the local system, typically a fully-qualified domain name. The default value is the hostname of the local system.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">system oid</b> <i class="arg">oid-string</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Specify the authoritative identification of the local system. The default value is <i class="arg">1.3.6.1.4.1.30155.23.1</i> (iso.org.dod.internet.private.enterprises.openbsd.23.1) identifying a common <span class="unix">OpenBSD</span> system.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">system services</b> <i class="arg">number</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Specify a magic value which indicates the set of services that the local system may provide. Refer to the <i class="arg">sysServices</i> description in the SNMP MIB for details.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">trap community</b> <i class="arg">string</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Specify the name of the trap community. The default value is <i class="arg">public</i>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">trap handle</b> <i class="arg">oid</i> &#8220;<i class="arg">command</i>&#8221;</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Execute <b class="cmd">command</b> upon receipt of an SNMP trap that begins with a prefix of <b class="cmd">oid</b>. Alternately, the string &#8220;<b class="cmd">default</b>&#8221; may be used, in which case the prefix used is <b class="cmd">1.3</b>. The invoked <i class="arg">command</i> will receive the following information about the trap on standard input, one per line, in this order: the resolved hostname of the host sending the trap, the IP address of the host sending the trap, and any variable bindings contained in the trap (the OID followed by the value, separated by a single space).</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">trap receiver</b> <i class="arg">string</i> [<span class="opt"><b class="cmd">oid</b> <i class="arg">oid-string</i></span>] [<span class="opt"><b class="cmd">community</b> <i class="arg">string</i></span>]</dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Specify the address or FQDN of a remote trap receiver for outgoing traps sent by <a class="link-man" href="../html8/snmpd.html">snmpd(8)</a>. This option may be specified multiple times. The daemon will send outgoing traps using the revised SNMPv2 format and the configured trap community. The default community is specified by the global <b class="cmd">trap community</b> option.</dd>
</dl>
</div>
<div class="section">
<h1 id="x5553455220434f4e46494755524154494f4e">USER CONFIGURATION</h1> Users for the SNMP User-based Security Model (USM, RFC 3414) must be defined in the configuration file:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">user</b> <i class="arg">name</i> [<span class="opt"><b class="cmd">authkey</b> <i class="arg">key</i> <b class="cmd">auth</b> <i class="arg">hmac</i></span>] [<span class="opt"><b class="cmd">enckey</b> <i class="arg">key</i> <b class="cmd">enc</b> <i class="arg">cipher</i></span>]</dt>
<dd class="list-tag" style="margin-left: 4.00ex;">
Defines a known user. The <b class="cmd">authkey</b> keyword is required to specify the digest key used to authenticate messages. If this keyword is omitted then authentication is disabled for this user account. Optionally the HMAC algorithm used for authentication can be specified. <i class="arg">hmac</i> must be either <b class="cmd">hmac-md5</b> or <b class="cmd">hmac-sha1</b>. If omitted the default is <b class="cmd">hmac-sha1</b>.<div class="spacer">
</div>
With <b class="cmd">enckey</b> the encryption key used to encrypt and decrypt messages for privacy is defined. Without an <b class="cmd">enckey</b> specification the user account will neither accept encrypted incoming messages nor will it encrypt outgoing messages. The <i class="arg">enc</i> algorithm can be either <b class="cmd">des</b> or <b class="cmd">aes</b> and defaults to <b class="cmd">des</b>.<div class="spacer">
</div>
Any user account that has encryption enabled requires authentication to be enabled too.</dd>
</dl>
</div>
<div class="section">
<h1 id="x4f494420434f4e46494755524154494f4e">OID CONFIGURATION</h1> It is possible to specify user-defined OIDs in the configuration file:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="cmd">oid</b> <i class="arg">oid-string</i> <b class="cmd">name</b> <i class="arg">name</i> [<span class="opt"><b class="cmd">read-only</b> | <b class="cmd">read-write</b></span>] [<span class="opt"><i class="arg">type</i></span>] <i class="arg">value</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Return the specified value to the client for this OID. The <b class="cmd">read-write</b> option may allow the client to override it, and the type is either <b class="cmd">string</b> or <b class="cmd">integer</b>.</dd>
</dl>
</div>
<div class="section">
<h1 id="x46494c4553">FILES</h1><dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<i class="file">/etc/snmpd.conf</i></dt>
<dd class="list-tag" style="margin-left: 15.00ex;">
Default location of the configuration file.</dd>
</dl>
</div>
<div class="section">
<h1 id="x4558414d504c4553">EXAMPLES</h1> The following example will tell <a class="link-man" href="../html8/snmpd.html">snmpd(8)</a> to listen on localhost, override the default system OID, set the magic services value and provides some custom OID values:<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
listen on 127.0.0.1 
 
system oid 1.3.6.1.4.1.30155.23.2 
system services 74 
 
oid 1.3.6.1.4.1.30155.42.1 name myName read-only string &quot;humppa&quot; 
oid 1.3.6.1.4.1.30155.42.2 name myStatus read-only integer 1</pre>
<div class="spacer">
</div>
The next example will enforce SNMPv3 with authenticated and encrypted communication and the user-based security model. The configuration defines two users, the first one is using the <b class="cmd">aes</b> encryption algorithm and the second one the default <b class="cmd">des</b> algorithm.<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
seclevel enc 
 
user &quot;hans&quot; authkey &quot;password123&quot; enc aes enckey &quot;321drowssap&quot; 
user &quot;sophie&quot; authkey &quot;password456&quot; enckey &quot;654drowssap&quot;</pre>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../html8/snmpctl.html">snmpctl(8)</a>, <a class="link-man" href="../html8/snmpd.html">snmpd(8)</a></div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> The <b class="name">snmpd.conf</b> file format first appeared in <span class="unix">OpenBSD&#160;4.3</span>.</div>
<div class="section">
<h1 id="x415554484f5253">AUTHORS</h1> The <a class="link-man" href="../html8/snmpd.html">snmpd(8)</a> program was written by <span class="author">Reyk Floeter</span> &lt;<a class="link-mail" href="mailto:reyk@openbsd.org">reyk@openbsd.org</a>&gt;.</div>
</div>
</body>
</html>

