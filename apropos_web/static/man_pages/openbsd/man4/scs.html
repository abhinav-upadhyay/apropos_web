<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/posix/style.css" type="text/css" media="all"/>
<title>
SCSI(4)</title>
</head>
<body>
<div class="mandoc">
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">scsi</b>, <b class="name">scsibus</b> &#8212; <span class="desc">SCSI system</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="config">cd* at scsibus?</b><br/>
<b class="config">ch* at scsibus?</b><br/>
<b class="config">safte* at scsibus?</b><br/>
<b class="config">sd* at scsibus?</b><br/>
<b class="config">ses* at scsibus?</b><br/>
<b class="config">st* at scsibus?</b><br/>
<b class="config">uk* at scsibus?</b><div class="spacer">
</div>
<br/>
<b class="config"># multipath support</b><br/>
<b class="config">emc* at scsibus?</b><br/>
<b class="config">hds* at scsibus?</b><br/>
<b class="config">rdac* at scsibus?</b><br/>
<b class="config">sym* at scsibus?</b></div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> The <span class="emph">SCSI</span> system provides a uniform and modular system for the implementation of drivers to control various SCSI devices, and to utilize different SCSI host adapters through host adapter drivers. When the system probes the <span class="emph">SCSI</span> buses, it attaches any devices it finds to the appropriate drivers. If no driver seems appropriate, then it attaches the device to the uk (unknown) driver so that user level SCSI ioctls may still be performed against the device.</div>
<div class="section">
<h1 id="x4b45524e454c20434f4e46494755524154494f4e">KERNEL CONFIGURATION</h1> The option SCSIDEBUG enables the debug ioctl.<div class="spacer">
</div>
All devices and the SCSI buses support boot time allocation so that an upper number of devices and controllers does not need to be configured; <b class="config">sd* at scsibus?</b> will suffice for any number of disk drivers.<div class="spacer">
</div>
The devices are either <span class="emph">wired</span> so they appear as a particular device unit or <span class="emph">counted</span> so that they appear as the next available unused unit.<div class="spacer">
</div>
To configure a driver in the kernel without wiring down the device use a config line similar to <b class="config">ch* at scsibus?</b> to include the changer driver.<div class="spacer">
</div>
To wire down a unit use a config line similar to <b class="config">ch1 at scsibus0 target 4 lun 0</b> to assign changer 1 as the changer with SCSI ID 4, SCSI logical unit 0 on SCSI bus 0. Individual scsibuses can be wired down to specific controllers with a config line similar to <b class="config">scsibus0 at ahc0</b> which assigns SCSI bus 0 to the first unit using the ahc driver. For controllers supporting more than one bus, the particular bus can be specified as in <b class="config">scsibus3 at ahc1 bus 1</b> which assigns scsibus 1 to the second bus probed on the ahc1 device.<div class="spacer">
</div>
When there is a mixture of wired down and counted devices then the counting begins with the first non-wired down unit for a particular type. That is, if a disk is wired down as <b class="config">sd1 at scsibus?</b>, then the first non-wired disk shall come on line as <span class="emph">sd2</span>.</div>
<div class="section">
<h1 id="x494f43544c53">IOCTLS</h1> There are a number of ioctls that work on any <span class="emph">SCSI</span> device. They are defined in <b class="includes">&lt;<a class="link-includes">sys/scsiio.h</a>&gt;</b> and can be applied against any SCSI device that permits them. For the tape, it must be applied against the control device. See the manual page for each device type for more information about how generic SCSI ioctls may be applied to a specific device.<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">SCIOCRESET</span></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
Reset a device.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">SCIOCDEBUG</span> <i class="farg">int *</i></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
Turn on debugging. All SCSI operations originating from this device's driver will be traced to the console, along with other information. Debugging is controlled by four bits, described in the header file. If no debugging is configured into the kernel, debugging will have no effect. <span class="emph">SCSI</span> debugging is controlled by the configuration option <span class="emph">SCSIDEBUG</span>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">SCIOCCOMMAND</span> <i class="farg">scsireq_t *</i></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
Take a SCSI command and data from a user process and apply them to the SCSI device. Return all status information and return data to the process. The ioctl will return a successful status even if the device rejected the command. As all status is returned to the user, it is up to the user process to examine this information to decide the success of the command.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">SCIOCIDENTIFY</span> <i class="farg">struct scsi_addr *</i></dt>
<dd class="list-tag" style="margin-left: 14.00ex;">
Ask the driver what its bus, target and lun are. In addition, the device type, ATAPI or SCSI, is returned.</dd>
</dl>
</div>
<div class="section">
<h1 id="x4144415054455253">ADAPTERS</h1> The system allows common device drivers to work through many different types of adapters. The adapters take requests from the upper layers and do all I/O between the <span class="emph">SCSI</span> bus and the system. The maximum size of a transfer is governed by the adapter. Most adapters can transfer 64KB in a single operation, and many can transfer larger amounts.</div>
<div class="section">
<h1 id="x444941474e4f5354494353">DIAGNOSTICS</h1> When the kernel is compiled with option SCSIDEBUG, the SCIOCDEBUG ioctl can be used to enable various amounts of tracing information on any specific device. Devices not being traced will not produce trace information. The four bits that make up the debug level each control certain types of debugging information.<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">Bit 0</span></dt>
<dd class="list-tag" style="margin-left: 5.00ex;">
shows all SCSI bus operations including SCSI commands, error information and the first 48 bytes of any data transferred.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">Bit 1</span></dt>
<dd class="list-tag" style="margin-left: 5.00ex;">
shows routines called.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">Bit 2</span></dt>
<dd class="list-tag" style="margin-left: 5.00ex;">
shows information about what branches are taken and often some of the return values of functions.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<span class="define">Bit 3</span></dt>
<dd class="list-tag" style="margin-left: 5.00ex;">
shows more detailed information including DMA scatter-gather logs.</dd>
</dl>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../html4/cd.html">cd(4)</a>, <a class="link-man" href="../html4/ch.html">ch(4)</a>, <a class="link-man" href="../html4/emc.html">emc(4)</a>, <a class="link-man" href="../html4/hds.html">hds(4)</a>, <a class="link-man" href="../html4/intro.html">intro(4)</a>, <a class="link-man" href="../html4/mpath.html">mpath(4)</a>, <a class="link-man" href="../html4/rdac.html">rdac(4)</a>, <a class="link-man" href="../html4/safte.html">safte(4)</a>, <a class="link-man" href="../html4/sd.html">sd(4)</a>, <a class="link-man" href="../html4/ses.html">ses(4)</a>, <a class="link-man" href="../html4/st.html">st(4)</a>, <a class="link-man" href="../html4/sym.html">sym(4)</a>, <a class="link-man" href="../html4/uk.html">uk(4)</a>, <a class="link-man" href="../html8/scsi.html">scsi(8)</a></div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> This <b class="name">scsi</b> system appeared in MACH 2.5 at TRW.</div>
</div>
</body>
</html>

