<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/posix/style.css" type="text/css" media="all"/>
<title>
VR(4)</title>
</head>
<body>
<div class="mandoc">
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">vr</b> &#8212; <span class="desc">VIA Rhine I/II/III 10/100 Ethernet device</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="config">vr* at pci?</b><br/>
<b class="config">amphy* at mii?</b><br/>
<b class="config">icsphy* at mii?</b><br/>
<b class="config">sqphy* at mii?</b></div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> The <b class="name">vr</b> driver provides support for PCI Ethernet adapters and embedded controllers based on the VIA Technologies VT3043 Rhine I, VT86C100A Rhine II, VT6102 Rhine II, and VT6105/VT6105M Rhine III Fast Ethernet controller chips, including the following:<div class="spacer">
</div>
<ul style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-bul">
<li class="list-bul" style="margin-top: 0.00em;">
AOpen/Acer ALN-320</li>
<li class="list-bul" style="margin-top: 0.00em;">
D-Link DFE-520TX, DFE-530TX</li>
<li class="list-bul" style="margin-top: 0.00em;">
Hawking Technologies PN102TX</li>
<li class="list-bul" style="margin-top: 0.00em;">
Soekris Engineering lan1741</li>
</ul>
<div class="spacer">
</div>
The VIA Rhine chips use bus master DMA and have a software interface designed to resemble that of the DEC 21x4x &quot;tulip&quot; chips. The major differences are that the receive filter in the Rhine chips is much simpler and is programmed through registers rather than by downloading a special setup frame through the transmit DMA engine, and that on older chips transmit and receive DMA buffers must be longword aligned. The Rhine chips are meant to be interfaced with external physical layer devices via an MII bus. They support both 10 and 100Mbps speeds in either full or half duplex.<div class="spacer">
</div>
The <b class="name">vr</b> driver for the VT6105M controller supports IPv4 IP/TCP/UDP transmit/receive checksum offload and VLAN tag insertion and stripping. The <b class="name">vr</b> driver additionally supports Wake on LAN (WoL). See <a class="link-man" href="../html8/arp.html">arp(8)</a> and <a class="link-man" href="../html8/ifconfig.html">ifconfig(8)</a> for more details.<div class="spacer">
</div>
The <b class="name">vr</b> driver supports the following media types:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
autoselect</dt>
<dd class="list-tag" style="margin-left: 11.00ex;">
Enable autoselection of the media type and options. The user can manually override the autoselected mode by adding media options to the appropriate <a class="link-man" href="../html5/hostname.if.html">hostname.if(5)</a> file.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
10baseT</dt>
<dd class="list-tag" style="margin-left: 11.00ex;">
Set 10Mbps operation. The <i class="arg">mediaopt</i> option can also be used to select either <i class="arg">full-duplex</i> or <i class="arg">half-duplex</i> modes.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
100baseTX</dt>
<dd class="list-tag" style="margin-left: 11.00ex;">
Set 100Mbps (Fast Ethernet) operation. The <i class="arg">mediaopt</i> option can also be used to select either <i class="arg">full-duplex</i> or <i class="arg">half-duplex</i> modes.</dd>
</dl>
<div class="spacer">
</div>
The <b class="name">vr</b> driver supports the following media options:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
full-duplex</dt>
<dd class="list-tag" style="margin-left: 11.00ex;">
Force full duplex operation.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
half-duplex</dt>
<dd class="list-tag" style="margin-left: 11.00ex;">
Force half duplex operation.</dd>
</dl>
<div class="spacer">
</div>
Note that the 100baseTX media type is only available if supported by the adapter.<div class="spacer">
</div>
For more information on configuring this device, see <a class="link-man" href="../html8/ifconfig.html">ifconfig(8)</a>.</div>
<div class="section">
<h1 id="x444941474e4f5354494353">DIAGNOSTICS</h1><dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-diag">
<dt class="list-diag" style="margin-top: 1.00em;">
<b class="diag">vr0: couldn't map memory</b></dt>
<dd class="list-diag">
A fatal initialization error has occurred.</dd>
<dt class="list-diag" style="margin-top: 1.00em;">
<b class="diag">vr0: couldn't map interrupt</b></dt>
<dd class="list-diag">
A fatal initialization error has occurred.</dd>
<dt class="list-diag" style="margin-top: 1.00em;">
<b class="diag">vr0: watchdog timeout</b></dt>
<dd class="list-diag">
The device has stopped responding to the network, or there is a problem with the network connection (cable).</dd>
<dt class="list-diag" style="margin-top: 1.00em;">
<b class="diag">vr0: no memory for rx list</b></dt>
<dd class="list-diag">
The driver failed to allocate an mbuf for the receiver ring.</dd>
<dt class="list-diag" style="margin-top: 1.00em;">
<b class="diag">vr0: no memory for tx list</b></dt>
<dd class="list-diag">
The driver failed to allocate an mbuf for the transmitter ring when allocating a pad buffer or collapsing an mbuf chain into a cluster.</dd>
</dl>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../html4/amphy.html">amphy(4)</a>, <a class="link-man" href="../html4/arp.html">arp(4)</a>, <a class="link-man" href="../html4/icsphy.html">icsphy(4)</a>, <a class="link-man" href="../html4/ifmedia.html">ifmedia(4)</a>, <a class="link-man" href="../html4/intro.html">intro(4)</a>, <a class="link-man" href="../html4/netintro.html">netintro(4)</a>, <a class="link-man" href="../html4/pci.html">pci(4)</a>, <a class="link-man" href="../html4/sqphy.html">sqphy(4)</a>, <a class="link-man" href="../html5/hostname.if.html">hostname.if(5)</a>, <a class="link-man" href="../html8/ifconfig.html">ifconfig(8)</a><div class="spacer">
</div>
<span class="ref"><span class="ref-title">The VIA Technologies VT86C100A data sheet</span>, <a class="link-ref" href="http://www.via.com.tw">http://www.via.com.tw</a>.</span></div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> The <b class="name">vr</b> device driver first appeared in <span class="unix">FreeBSD&#160;3.0</span>. <span class="unix">OpenBSD</span> support first appeared in <span class="unix">OpenBSD&#160;2.5</span>.</div>
<div class="section">
<h1 id="x415554484f5253">AUTHORS</h1> The <b class="name">vr</b> driver was written by <span class="author">Bill Paul</span> &lt;<a class="link-mail" href="mailto:wpaul@ctr.columbia.edu">wpaul@ctr.columbia.edu</a>&gt;.</div>
<div class="section">
<h1 id="x43415645415453">CAVEATS</h1> The <b class="name">vr</b> driver copies transmit mbuf chains into longword-aligned buffers prior to transmission in order to pacify the VT3043 and VT86C100A chips. If buffers are not aligned correctly, the chip will round the supplied buffer address and begin DMAing from the wrong location. This buffer copying impairs transmit performance on slower systems but can't be avoided. On faster machines (e.g., a Pentium II), the performance impact is much less noticeable.</div>
</div>
</body>
</html>

