<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<link rel="stylesheet" href="/static/man_pages/posix/style.css" type="text/css" media="all"/>
<title>
UNIX(4)</title>
</head>
<body>
<div class="mandoc">
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">unix</b> &#8212; <span class="desc">UNIX-domain protocol family</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1> <b class="includes">#include &lt;<a class="link-includes">sys/types.h</a>&gt;</b><br/>
<b class="includes">#include &lt;<a class="link-includes">sys/un.h</a>&gt;</b></div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> The <span class="unix">UNIX</span>-domain protocol family is a collection of protocols that provides local (on-machine) interprocess communication through the normal <a class="link-man" href="../html2/socket.html">socket(2)</a> mechanisms. The <span class="unix">UNIX</span>-domain family supports the <span class="define">SOCK_STREAM</span>, <span class="define">SOCK_SEQPACKET</span>, and <span class="define">SOCK_DGRAM</span> socket types and uses filesystem pathnames for addressing.</div>
<div class="section">
<h1 id="x41444452455353494e47">ADDRESSING</h1> <span class="unix">UNIX</span>-domain addresses are variable-length filesystem pathnames of at most 104 characters. The include file <b class="includes">&lt;<a class="link-includes">sys/un.h</a>&gt;</b> defines this address:<div class="spacer">
</div>
<pre style="margin-left: 5.00ex;" class="lit display">
struct sockaddr_un { 
	u_char	sun_len; 
	u_char	sun_family; 
	char	sun_path[104]; 
};</pre>
<div class="spacer">
</div>
Binding a name to a <span class="unix">UNIX</span>-domain socket with <a class="link-man" href="../html2/bind.html">bind(2)</a> causes a socket file to be created in the filesystem. This file is <span class="emph">not</span> removed when the socket is closed&#8212;<a class="link-man" href="../html2/unlink.html">unlink(2)</a> must be used to remove the file.<div class="spacer">
</div>
The <span class="unix">UNIX</span>-domain protocol family does not support broadcast addressing or any form of &#8220;wildcard&#8221; matching on incoming messages. All addresses are absolute- or relative-pathnames of other <span class="unix">UNIX</span>-domain sockets. Normal filesystem access-control mechanisms are also applied when referencing pathnames; e.g., the destination of a <a class="link-man" href="../html2/connect.html">connect(2)</a> or <a class="link-man" href="../html2/sendto.html">sendto(2)</a> must be writable.</div>
<div class="section">
<h1 id="x50524f544f434f4c53">PROTOCOLS</h1> The <span class="unix">UNIX</span>-domain protocol family is comprised of simple transport protocols that support the <span class="define">SOCK_STREAM</span>, <span class="define">SOCK_SEQPACKET</span>, and <span class="define">SOCK_DGRAM</span> abstractions. <span class="define">SOCK_STREAM</span> and <span class="define">SOCK_SEQPACKET</span> sockets also support the communication of <span class="unix">UNIX</span> file descriptors through the use of the <i class="arg">msg_control</i> field in the <i class="arg">msg</i> argument to <a class="link-man" href="../html2/sendmsg.html">sendmsg(2)</a> and <a class="link-man" href="../html2/recvmsg.html">recvmsg(2)</a>.<div class="spacer">
</div>
Any valid descriptor may be sent in a message. The file descriptor(s) to be passed are described using a <i class="arg">struct cmsghdr</i> that is defined in the include file <b class="includes">&lt;<a class="link-includes">sys/socket.h</a>&gt;</b>. The type of the message is <span class="define">SCM_RIGHTS</span>, and the data portion of the messages is an array of integers representing the file descriptors to be passed. The number of descriptors being passed is defined by the length field of the message; the length field is the sum of the size of the header plus the size of the array of file descriptors.<div class="spacer">
</div>
The received descriptor is a <span class="emph">duplicate</span> of the sender's descriptor, as if it were created with a call to <a class="link-man" href="../html2/dup.html">dup(2)</a>. Per-process descriptor flags, set with <a class="link-man" href="../html2/fcntl.html">fcntl(2)</a>, are <span class="emph">not</span> passed to a receiver. Descriptors that are awaiting delivery, or that are purposely not received, are automatically closed by the system when the destination socket is closed.</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man" href="../html2/socket.html">socket(2)</a>, <a class="link-man" href="../html4/netintro.html">netintro(4)</a></div>
</div>
</body>
</html>

